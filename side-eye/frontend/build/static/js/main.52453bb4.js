/*! For license information please see main.52453bb4.js.LICENSE.txt */
(()=>{var e={195:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(4436).A)()},304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(5501)},423:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o});var r=n(4501);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?`${n}-${o}`:`${r.A.generate(e)}-${t}`}},630:(e,t,n)=>{"use strict";e.exports=n(2138)},782:(e,t,n)=>{"use strict";n.d(t,{LX:()=>m,MA:()=>p,_W:()=>f,Lc:()=>y,Ms:()=>b});var r=n(9629),i=n(5060),o=n(7509);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var o;const a=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function m(e){return p(e,"spacing",8)}function f(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=f(t,n),e)),{})}(c(n),i),a=e[n];return(0,r.NI)(e,a,o)}function v(e,t){const n=m(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h},827:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(8635).A},1014:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3539).A},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1927).A},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1375:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9950),i=n(1824);let o=!0,a=!1;const s=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function p(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,s.start(100,(()=>{a=!1})),t.current=!1,!0)},ref:e}}},1399:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1506:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5393).A},1573:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1375).A},1676:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5501).A},1735:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8587),i=n(8168);const o=["values","unit","step"],a=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,l=(0,r.A)(e,o),c=a(t),u=Object.keys(c);function d(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-s/100}${n})`}function p(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-s/100}${n})`}return(0,i.A)({keys:u,values:c,up:d,down:h,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!f)if(null!==r(c))f=!0,P(E);else{var t=r(u);null!==t&&M(x,t.startTime-e)}}function E(e,n){f=!1,g&&(g=!1,y(_),_=-1),m=!0;var o=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(x,d.startTime-n),l=!1}return l}finally{h=null,p=o,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,T=null,_=-1,k=5,C=-1;function I(){return!(t.unstable_now()-C<k)}function R(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?A():(S=!1,T=null)}}else S=!1}if("function"===typeof b)A=function(){b(R)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,L=D.port2;D.port1.onmessage=R,A=function(){L.postMessage(null)}}else A=function(){v(R,0)};function P(e){T=e,S||(S=!0,A())}function M(e,n){_=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(_),_=-1):g=!0,M(x,o-a))):(e.sortIndex=s,n(c,e),f||m||(f=!0,P(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1763:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(423);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},1783:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1824:(e,t,n)=>{"use strict";n.d(t,{E:()=>a,A:()=>s});var r=n(9950);const i={};const o=[];class a{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new a}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function s(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(a.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},1927:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},1942:(e,t,n)=>{e.exports=n(3488)()},1960:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},1976:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2529).A},2004:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,f(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,A={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:A.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+C(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+C(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},M={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:A};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=A.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},2138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case f:case l:return e;default:return t}}case i:return t}}}function E(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=f,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return E(e)||x(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===f},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},2183:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},2529:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(1399);const o=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},3488:(e,t,n)=>{"use strict";var r=n(3959);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3539:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>s});var i=n(9950);let o=0;const a=(r||(r=n.t(i,2)))["useId".toString()];function s(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n(`mui-${o}`))}),[t]),r}(e)}},3699:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(5708),i=n(1735),o=n(4033)},3828:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},3876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(m){var i=p(n);i&&i!==m&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),f=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!f||!f[v])&&(!s||!s[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},3931:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:a}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[a?t:s,r.useCallback((e=>{a||l(e)}),[])]}},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4033:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4168:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,b:()=>s});var r=n(9950),i=n(5537),o=n(4414);const a=r.createContext(void 0);function s(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?(0,i.A)(o.defaultProps,r):o.styleOverrides||o.variants?r:(0,i.A)(o,r)}({props:t,name:n,theme:{components:r.useContext(a)}})}const l=function(e){let{value:t,children:n}=e;return(0,o.jsx)(a.Provider,{value:t,children:n})}},4222:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(5501),i=n(7509),o=n(5060),a=n(9629),s=n(8329);function l(){function e(e,t,n,i){const s={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(h)return h(s);return(0,a.NI)(s,t,(t=>{let n=(0,o.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,d,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:s.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,a.EU)(l.breakpoints),s=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(s=r[n],d=l,"function"===typeof s?s(d):s);var s,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,a.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,a.vf)(s,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4436:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(8168),i=n(8587),o=n(8099),a=n(7483),s=n(8329),l=n(4222),c=n(5708);var u=n(9240);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},m={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function E(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function A(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),A=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),S=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[500],light:m[300],dark:m[700]}:{main:m[700],light:m[400],dark:m[800]}}(t),T=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),_=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),k=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(t);function C(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:w.text.primary}const I=e=>{let{color:t,name:n,mainShade:i=500,lightShade:a=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?` (${n})`:"",JSON.stringify(t.main)));return E(t,"light",a,s),E(t,"dark",l,s),t.contrastText||(t.contrastText=C(t.main)),t},R={dark:x,light:w};return(0,a.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:I({color:c,name:"primary"}),secondary:I({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:S,name:"error"}),warning:I({color:k,name:"warning"}),info:I({color:T,name:"info"}),success:I({color:_,name:"success"}),grey:h,contrastThreshold:n,getContrastText:C,augmentColor:I,tonalOffset:s},R[t]),l)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const T={textTransform:"uppercase"},_='"Roboto", "Helvetica", "Arial", sans-serif';function k(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=_,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:m}=n,f=(0,i.A)(n,S);const g=s/14,v=m||(e=>e/h*g+"rem"),y=(e,t,n,i,a)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:v(t),lineHeight:n},o===_?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},a,p);var s},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,T),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,T),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,a.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),f,{clone:!1})}function C(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const I=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(5361);const D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.A)(e,L);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,o.A)(18));const p=A(n),m=(0,c.A)(e);let f=(0,a.A)(m,{mixins:(g=m.breakpoints,v=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:p,shadows:I.slice(),typography:k(p,d),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},D)});var g,v;f=(0,a.A)(f,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return f=b.reduce(((e,t)=>(0,a.A)(e,t)),f),f.unstable_sxConfig=(0,r.A)({},s.A,null==h?void 0:h.unstable_sxConfig),f.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},f}const M=P},4453:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},4501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(s,t))}};t.default=i,e.exports=t.default},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5060:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>a,Yn:()=>o});var r=n(5501),i=n(9629);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function a(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,i.NI)(e,c,(e=>{let i=a(u,l,e);return e===i&&"string"===typeof e&&(i=a(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},5260:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(4222),i=n(8620),o=n(8329)},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5361:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>s});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},a,e.easing),n=(0,i.A)({},s,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=n.standard,easing:s=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof a?a:l(a)} ${s} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},5393:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(5587);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},5433:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore")},5471:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8168),i=n(9950),o=n(9360),a=n(4414);function s(e,t){function n(n,i){return(0,a.jsx)(o.A,(0,r.A)({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return n.muiName=o.A.muiName,i.memo(i.forwardRef(n))}},5501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8099);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},5511:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},5537:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const a=e[o]||{},s=t[o];n[o]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[o]=(0,r.A)({},s),Object.keys(a).forEach((e=>{n[o][e]=i(a[e],s[e])}))):n[o]=s:n[o]=a}else void 0===n[o]&&(n[o]=e[o])})),n}},5587:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},5708:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(7483),a=n(1735);const s={borderRadius:4};var l=n(782);var c=n(4222),u=n(8329),d=n(4033);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:m={}}=e,f=(0,i.A)(e,h),g=(0,a.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(p);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},s,m)},f);y.applyStyles=d.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return y=w.reduce(((e,t)=>(0,o.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==f?void 0:f.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},6204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>E.A,StyledEngineProvider:()=>x,ThemeContext:()=>i.T,css:()=>v.AH,default:()=>A,internal_processStyles:()=>S,keyframes:()=>v.i7});var r=n(8168),i=n(7370),o=n(9015),a=n(6477),s=n(1783),l=n(9950),c=n(7923),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=(0,c.A)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),h=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:h},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},f=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,s.SF)(t,n,r),(0,a.s)((function(){return(0,s.sk)(t,n,r)})),null},g=function e(t,n){var a,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(a=n.label,c=n.target);var h=m(t,n,u),g=h||p(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&b.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var x=y.length,E=1;E<x;E++)b.push(y[E],w[E])}var A=(0,i.w)((function(e,t,n){var r=v&&e.as||d,a="",u=[],m=e;if(null==e.theme){for(var y in m={},e)m[y]=e[y];m.theme=l.useContext(i.T)}"string"===typeof e.className?a=(0,s.Rk)(t.registered,u,e.className):null!=e.className&&(a=e.className+" ");var w=(0,o.J)(b.concat(u),t.registered,m);a+=t.key+"-"+w.name,void 0!==c&&(a+=" "+c);var x=v&&void 0===h?p(r):g,E={};for(var A in e)v&&"as"===A||x(A)&&(E[A]=e[A]);return E.className=a,n&&(E.ref=n),l.createElement(l.Fragment,null,l.createElement(f,{cache:t,serialized:w,isStringTag:"string"===typeof r}),l.createElement(r,E))}));return A.displayName=void 0!==a?a:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",A.defaultProps=t.defaultProps,A.__emotion_real=A,A.__emotion_base=d,A.__emotion_styles=b,A.__emotion_forwardProp=h,Object.defineProperty(A,"toString",{value:function(){return"."+c}}),A.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(A,i,!0)})).apply(void 0,b)},A}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=n(8283),y=n(8603),b=n(4414);let w;function x(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(i.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));var E=n(8219);function A(e,t){return g(e,t)}const S=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},6319:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},6477:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>s,s:()=>a});var i=n(9950),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()},s=o||i.useLayoutEffect},6688:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(9950)),i=n(6204);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},6747:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},6832:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat")},6879:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case u:case d:case m:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case s:return e;default:return t}}case r:return t}}}t.vM=c,t.lD=h,t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===o||e===u||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===s||e.$$typeof===c||e.$$typeof===f||void 0!==e.getModuleId)}},6907:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},7034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o,createSvgIcon:()=>a.A,debounce:()=>s.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>m.A,unstable_useId:()=>f.A,unsupportedProp:()=>g,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>b.A,useIsFocusVisible:()=>w.A});var r=n(4501),i=n(1676);const o=n(5511).A;var a=n(5471),s=n(1209);const l=function(e,t){return()=>null};var c=n(3828),u=n(7402),d=n(827);const h=function(e,t){return()=>null};const p=n(5587).A;var m=n(9044),f=n(1014);const g=function(e,t,n,r,i){return null};var v=n(8733),y=n(1976),b=n(1506),w=n(1573);const x={configure:e=>{r.A.configure(e)}}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7355:()=>{},7370:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>d,c:()=>m,h:()=>h,w:()=>u});var r=n(9950),i=n(8603),o=n(1783),a=n(9015),s=n(6477),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},d=r.createContext({});var h={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",m=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},f=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,s.s)((function(){return(0,o.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e[p],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,a.J)(l,void 0,r.useContext(d));c+=t.key+"-"+u.name;var m={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==p&&(m[g]=e[g]);return m.className=c,n&&(m.ref=n),r.createElement(r.Fragment,null,r.createElement(f,{cache:t,serialized:u,isStringTag:"string"===typeof s}),r.createElement(s,m))}))},7402:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6907).A},7483:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>o});var r=n(8168),i=n(9950);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function a(e){if(i.isValidElement(e)||!o(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=a(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((r=>{i.isValidElement(t[r])?l[r]=t[r]:o(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&o(e[r])?l[r]=s(e[r],t[r],n):n.clone?l[r]=o(t[r])?a(t[r]):t[r]:l[r]=t[r]})),l}},7509:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7483);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},7550:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},7785:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(7483)},7813:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")},7923:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},7988:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},8099:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},8154:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment")},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8219:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(9950);var r=n(8283),i=n(4414);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},8283:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>d,mL:()=>c});var r=n(7370),i=n(9950),o=n(1783),a=n(6477),s=n(9015),l=(n(8603),n(3876),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,a=new Array(o);a[0]=r.E,a[1]=(0,r.c)(e,t);for(var s=2;s<o;s++)a[s]=n[s];return i.createElement.apply(null,a)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)((function(e,t){var n=e.styles,l=(0,s.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,a.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,a.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.J)(t)}function d(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8329:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(782),i=n(5060),o=n(7509);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var s=n(9629);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),m=c("borderLeft",l),f=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),x=c("outlineColor"),E=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};E.propTypes={},E.filterProps=["borderRadius"];a(u,d,h,p,m,f,g,v,y,b,E,w,x);const A=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};A.propTypes={},A.filterProps=["gap"];const S=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};S.propTypes={},S.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];a(A,S,T,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function _(e,t){return"grey"===t?t:e}a((0,i.Ay)({prop:"color",themeKey:"palette",transform:_}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:_}));function k(e){return e<=1&&0!==e?100*e+"%":e}const C=(0,i.Ay)({prop:"width",transform:k}),I=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:k(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};I.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:k}),D=(0,i.Ay)({prop:"height",transform:k}),L=(0,i.Ay)({prop:"maxHeight",transform:k}),P=(0,i.Ay)({prop:"minHeight",transform:k}),M=((0,i.Ay)({prop:"size",cssProperty:"width",transform:k}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:k}),a(C,I,R,D,L,P,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:E},color:{themeKey:"palette",transform:_},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_},backgroundColor:{themeKey:"palette",transform:_},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:A},rowGap:{style:T},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:k},maxWidth:{style:I},minWidth:{transform:k},height:{transform:k},maxHeight:{transform:k},minHeight:{transform:k},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var N,j=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function oe(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ae=null,Se=null;function Te(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function _e(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function ke(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Re=!1;function De(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Ae||null!==Se)&&(Ie(),ke())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ne=!1,je=null,Fe=!1,Ue=null,Be={onError:function(e){Ne=!0,je=e}};function $e(e,t,n,r,i,o,a,s,l){Ne=!1,je=null,Oe.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return ze(i),e;if(a===r)return ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,At,St,Tt,_t=!1,kt=[],Ct=null,It=null,Rt=null,Dt=new Map,Lt=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Tt(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){_t=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Dt.forEach(Ut),Lt.forEach(Ut)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return $t(t,e)}if(0<kt.length){$t(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&$t(Ct,e),null!==It&&$t(It,e),null!==Rt&&$t(Rt,e),Dt.forEach(t),Lt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Wt=w.ReactCurrentBatchConfig,zt=!0;function Ht(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function qt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Nt(Ct,e,t,n,r,i),!0;case"dragenter":return It=Nt(It,e,t,n,r,i),!0;case"mouseover":return Rt=Nt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,Nt(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lt.set(o,Nt(Lt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&zr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=j({},cn,{view:0,detail:0}),hn=on(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),mn=on(pn),fn=on(j({},pn,{dataTransfer:0})),gn=on(j({},dn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(j({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Tn(){return Sn}var _n=j({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(_n),Cn=on(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Dn),Pn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Nn=u&&"TextEvent"in window&&!On,jn=u&&(!Mn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),De(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Ar={},Sr={};function Tr(e){if(Ar[e])return Ar[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ar[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var _r=Tr("animationend"),kr=Tr("animationiteration"),Cr=Tr("animationstart"),Ir=Tr("transitionend"),Rr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Mr=Dr[Pr];Lr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Lr(_r,"onAnimationEnd"),Lr(kr,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if($e.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=je;Ne=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[$r]){e[$r]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}De((function(){var r=o,i=xe(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case _r:case kr:case Cr:l=vn;break;case Ir:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Le(m,h))&&u.push(Hr(m,f,p)))),d)break;m=m.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?s:wi(l),p=null==c?s:wi(c),(s=new u(f,m+"leave",l,n,i)).target=d,s.relatedTarget=p,f=null,yi(i)===r&&((u=new u(h,m+"enter",c,n,i)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Gr(p))m++;for(p=0,f=h;f;f=Gr(f))p++;for(;0<m-p;)u=Gr(u),m--;for(;0<p-m;)h=Gr(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,s,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(zn(s))if(Qn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Vn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=$n(n))&&(b.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Zt=Jt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Le(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Le(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Le(n,o))&&a.unshift(Hr(n,l,s)):i||null!=(l=Le(n,o))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,fi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var Ei=[],Ai=-1;function Si(e){return{current:e}}function Ti(e){0>Ai||(e.current=Ei[Ai],Ei[Ai]=null,Ai--)}function _i(e,t){Ai++,Ei[Ai]=e.current,e.current=t}var ki={},Ci=Si(ki),Ii=Si(!1),Ri=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ii),Ti(Ci)}function Mi(e,t,n){if(Ci.current!==ki)throw Error(o(168));_i(Ci,t),_i(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return j({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ri=Ci.current,_i(Ci,e),_i(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Oi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ii),Ti(Ci),_i(Ci,e)):Ti(Ii),_i(Ii,n)}var Fi=null,Ui=!1,Bi=!1;function $i(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Vi),i}finally{bt=t,Bi=!1}}return null}var Wi=[],zi=0,Hi=null,qi=0,Gi=[],Ki=0,Yi=null,Xi=1,Qi="";function Ji(e,t){Wi[zi++]=qi,Wi[zi++]=Hi,Hi=e,qi=t}function Zi(e,t,n){Gi[Ki++]=Xi,Gi[Ki++]=Qi,Gi[Ki++]=Yi,Yi=e;var r=Xi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Xi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--zi],Wi[zi]=null,qi=Wi[--zi],Wi[zi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function mo(){ro=no=null,io=!1}function fo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===A?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case L:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function f(i,o,s,l){for(var c=null,u=null,d=o,f=o=0,g=null;null!==d&&f<s.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=p(i,d,s[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===s.length)return n(i,d),io&&Ji(i,f),c;if(null===d){for(;f<s.length;f++)null!==(d=h(i,s[f],l))&&(o=a(d,o,f),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,f),c}for(d=r(i,d);f<s.length;f++)null!==(g=m(d,i,f,s[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),o=a(g,o,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,f),c}function g(i,s,l,c){var u=O(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,f=s,g=s=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=p(i,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(i,f),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,f=v}if(y.done)return n(i,f),io&&Ji(i,g),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(f=r(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===A){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===A?((o=Oc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case E:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case L:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return f(r,o,a,l);if(O(a))return g(r,o,a,l);yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=jc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var xo=wo(!0),Eo=wo(!1),Ao=Si(null),So=null,To=null,_o=null;function ko(){_o=To=So=null}function Co(e){var t=Ao.current;Ti(Ao),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){So=e,_o=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Do(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===So)throw Error(o(308));To=e,So.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Lo=null;function Po(e){null===Lo?Lo=[e]:Lo.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oo(e,r)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var No=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oo(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oo(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,f=s;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=j({},d,h);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},qo=Si(Ho),Go=Si(Ho),Ko=Si(Ho);function Yo(e){if(e===Ho)throw Error(o(174));return e}function Xo(e,t){switch(_i(Ko,t),_i(Go,e),_i(qo,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(qo),_i(qo,t)}function Qo(){Ti(qo),Ti(Go),Ti(Ko)}function Jo(e){Yo(Ko.current);var t=Yo(qo.current),n=le(t,e.type);t!==n&&(_i(Go,e),_i(qo,n))}function Zo(e){Go.current===e&&(Ti(qo),Ti(Go))}var ea=Si(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=w.ReactCurrentDispatcher,oa=w.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,pa=0;function ma(){throw Error(o(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Nl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Sa(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Na(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Da(9,_a.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ia(e)}function ka(e,t,n){return n((function(){Ca(t)&&Ia(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ia(e){var t=Oo(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function La(){return ba().memoizedState}function Pa(e,t,n,r){var i=ya();sa.flags|=e,i.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&fa(r,a.deps))return void(i.memoizedState=Da(t,n,o,r))}sa.flags|=e,i.memoizedState=Da(1|t,n,o,r)}function Oa(e,t){return Pa(8390656,8,e,t)}function Na(e,t){return Ma(2048,8,e,t)}function ja(e,t){return Ma(4,2,e,t)}function Fa(e,t){return Ma(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Ua.bind(null,t,e),n)}function $a(){}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=ft(),sa.lanes|=n,Nl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function qa(){return ba().memoizedState}function Ga(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Mo(e,t,n,r))){nc(n,e,r,ec()),Qa(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Mo(e,t,i,r))&&(nc(n,e,r,i=ec()),Qa(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Xa(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:Do,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},Za={readContext:Do,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Do,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ra,useDebugValue:$a,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Oa(ka.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Do,useCallback:Va,useContext:Do,useEffect:Na,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:xa,useRef:La,useState:function(){return xa(wa)},useDebugValue:$a,useDeferredValue:function(e){return za(ba(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Sa,useId:qa,unstable_isNewReconciler:!1},ts={readContext:Do,useCallback:Va,useContext:Do,useEffect:Na,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:Ea,useRef:La,useState:function(){return Ea(wa)},useDebugValue:$a,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:za(t,la.memoizedState,e)},useTransition:function(){return[Ea(wa)[0],ba().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Sa,useId:qa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),$o(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),$o(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bo(e,i,r))&&(nc(t,e,r,n),$o(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Do(o):(i=Li(t)?Ri:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Do(o):(o=Li(t)?Ri:Ci.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Hl=r),ds(0,t)},n}function ms(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Eo(t,null,n,r):xo(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ga(e,t,n,r,o,i),n=va(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Pc(o,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return _s(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,_i(Pl,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,_i(Pl,Ll),Ll|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,i){var o=Li(n)?Ri:Ci.current;return o=Di(t,o),Ro(t,i),n=ga(e,t,n,r,o,i),r=va(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function ks(e,t,n,r,i){if(Li(n)){var o=!0;Ni(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Do(c):c=Di(t,c=Li(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),No=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ii.current||No?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=No||os(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Do(l):l=Di(t,l=Li(n)?Ri:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),No=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var m=t.memoizedState;s!==d||h!==m||Ii.current||No?("function"===typeof p&&(rs(t,n,p,r),m=t.memoizedState),(c=No||os(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,o,i)}function Cs(e,t,n,r,i,o){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),zs(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Xo(e,t.containerInfo)}function Rs(e,t,n,r,i){return mo(),fo(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Ls,Ps,Ms,Os={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Os,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Os,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Oo(e,i),nc(r,e,i,-1))}return fc(),Us(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Ki++]=Xi,Gi[Ki++]=Qi,Gi[Ki++]=Yi,Xi=e.id,Qi=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pc(r,s):(s=Oc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&fo(r),xo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function $s(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$s(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$s(t,!0,n,null,o);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Li(t.type)&&Pi(),qs(t),null;case 3:return r=t.stateNode,Qo(),Ti(Ii),Ti(Ci),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ls(e,t),qs(t),null;case 5:Zo(t);var i=Yo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=Yo(qo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Ko.current),Yo(qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ti(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),mo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else mo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ml&&(Ml=3):fc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Qo(),Ls(e,t),null===e&&Vr(t.stateNode.containerInfo),qs(t),null;case 10:return Co(t.type._context),qs(t),null;case 19:if(Ti(ea),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Hs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return qs(t),null}else 2*Qe()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,_i(ea,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Li(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ti(Ii),Ti(Ci),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ea),null;case 4:return Qo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(qo.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,hl(e,t,n),Xs=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(i,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Qe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,fl(t,e),Xs=u):fl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(m=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zs(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==m?(m.return=p,Js=m):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=a,(Xs=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Js=l):El(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Ys=s,Xs=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):wl(e)}}function wl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&il(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function El(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Sc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Al,Sl=Math.ceil,Tl=w.ReactCurrentDispatcher,_l=w.ReactCurrentOwner,kl=w.ReactCurrentBatchConfig,Cl=0,Il=null,Rl=null,Dl=0,Ll=0,Pl=Si(0),Ml=0,Ol=null,Nl=0,jl=0,Fl=0,Ul=null,Bl=null,$l=0,Vl=1/0,Wl=null,zl=!1,Hl=null,ql=null,Gl=!1,Kl=null,Yl=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Dl?Dl&-Dl:null!==go.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(o(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(jl|=n),4===Ml&&sc(e,Dl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Qe()+500,Ui&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Il?Dl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(lc.bind(null,e)):$i(lc.bind(null,e)),ai((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var a=mc();for(Il===e&&Dl===t||(Wl=null,Vl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}ko(),Tl.current=a,Cl=i,null!==Rl?t=0:(Il=null,Dl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ol,hc(e,0),sc(e,r),rc(e,Qe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ol,hc(e,0),sc(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Bl,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=$l+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,Wl),t);break}xc(e,Bl,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,Wl),r);break}xc(e,Bl,Wl);break;default:throw Error(o(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(o(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ol,hc(e,0),sc(e,t),rc(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Wl),rc(e,Qe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Qe()+500,Ui&&Vi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Cl=t))&&Vi()}}function dc(){Ll=Pl.current,Ti(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Qo(),Ti(Ii),Ti(Ci),ra();break;case 5:Zo(r);break;case 4:Qo();break;case 13:case 19:Ti(ea);break;case 10:Co(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Pc(e.current,null),Dl=Ll=t,Ml=0,Ol=null,Fl=jl=Nl=0,Bl=Ul=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(r=(n=Lo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Lo=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(ko(),ia.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,_l.current=null,null===n||null===n.return){Ml=1,Ol=t,Rl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=gs(s);if(null!==m){m.flags&=-257,vs(m,s,l,0,t),1&m.mode&&fs(a,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fs(a,u,t),fc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fo(cs(c,l));break e}}a=c=cs(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[a]:Ul.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=Ja,null===e?Ja:e}function fc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Il||0===(268435455&Nl)&&0===(268435455&jl)||sc(Il,Dl)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(Il===e&&Dl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(ko(),Cl=n,Tl.current=r,null!==Rl)throw Error(o(261));return Il=null,Dl=0,Ml}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Al(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,_l.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ll)))return void(Rl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ml=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Kl);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Rl=Il=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,(function(){return Ec(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=kl.transition,kl.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,_l.current=null,function(e,t){if(ei=zt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++d===r&&(c=s),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),zt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Cl=l,bt=s,kl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,Vi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function Ec(){if(null!==Kl){var e=wt(Yl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var p=(d=Js).sibling,m=d.return;if(ol(d),d===u){Js=null;break}if(null!==p){p.return=m,Js=p;break}Js=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Sc(l,l.return,E)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Cl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function Ac(e,t,n){e=Bo(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bo(t,e=ms(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Dl&n)===n&&(4===Ml||3===Ml&&(130023424&Dl)===Dl&&500>Qe()-$l?hc(e,0):Fl|=n),rc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Oo(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),_c(e,n)}function Ic(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case A:return Oc(n.children,i,a,t);case S:s=8,i|=8;break;case T:return(e=Dc(12,n,t,2|i)).elementType=T,e.lanes=a,e;case I:return(e=Dc(13,n,t,i)).elementType=I,e.lanes=a,e;case R:return(e=Dc(19,n,t,i)).elementType=R,e.lanes=a,e;case P:return Nc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case k:s=9;break e;case C:s=11;break e;case D:s=14;break e;case L:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Dc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Dc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function $c(e){if(!e)return ki;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Li(n))return Oi(e,n,t)}return t}function Vc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=$c(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(i,t,a))&&(nc(e,i,a,o),$o(e,i,a)),a}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),mo();break;case 5:Jo(t);break;case 1:Li(t.type)&&Ni(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Ao,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(_i(ea,1&ea.current),null!==(e=zs(e,t,n))?e.sibling:null);_i(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ro(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ns(r,e),i){case 0:t=_s(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),r===i){t=zs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return js(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,_i(Ao,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=zs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Do(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Es(e,t,r,i=ns(r.type,i),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Li(r)?(e=!0,Ni(t)):e=!1,Ro(t,n),as(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ss(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=zc(a);s.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=zc(a);o.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[mi]=a.current,Vr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[mi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return zc(a)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Cl)&&(Vl=Qe()+500,Vi()))}break;case 13:uc((function(){var t=Oo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},Et=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},At=function(e){if(13===e.tag){var t=tc(e),n=Oo(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},St=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));G(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,_e,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,a,s),e[mi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8399:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(6879);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t=`${e}`.match(i);return t&&t[1]||""}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function s(e,t,n){const r=a(t);return e.displayName||(""!==r?`${n}(${r})`:n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return a(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.vM:return s(e,e.render,"ForwardRef");case r.lD:return s(e,e.type,"memo");default:return}}}},8463:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(9950);var r=n(4168);n(4414);function i(e){return(0,r.b)(e)}},8465:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},8603:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function m(e,t){return t.push(e),e}var f=1,g=1,v=0,y=0,b=0,w="";function x(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:f,column:g,length:a,return:""}}function E(e,t){return a(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function A(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,f--),b}function S(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,f++),b}function T(){return u(w,y)}function _(){return y}function k(e,t){return d(w,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return f=g=1,v=h(w=e),y=0,[]}function R(e){return w="",e}function D(e){return s(k(y-1,M(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(b=T())&&b<33;)S();return C(e)>2||C(b)>3?"":" "}function P(e,t){for(;--t&&S()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return k(e,_()+(t<6&&32==T()&&32==S()))}function M(e){for(;S();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&M(b);break;case 40:41===e&&M(e);break;case 92:S()}return y}function O(e,t){for(;S()&&e+b!==57&&(e+b!==84||47!==T()););return"/*"+k(t,y-1)+"*"+o(47===e?e:S())}function N(e){for(;!C(T());)S();return k(e,y)}var j="-ms-",F="-moz-",U="-webkit-",B="comm",$="rule",V="decl",W="@keyframes";function z(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case B:return"";case W:return e.return=e.value+"{"+z(e.children,r)+"}";case $:e.value=e.props.join(",")}return h(n=z(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return R(G("",null,null,null,[""],e=I(e),0,[0],e))}function G(e,t,n,r,i,a,s,d,p){for(var f=0,g=0,v=s,y=0,b=0,w=0,x=1,E=1,k=1,C=0,I="",R=i,M=a,j=r,F=I;E;)switch(w=C,C=S()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(D(C),"&","&\f"),"&\f")&&(k=-1);break}case 34:case 39:case 91:F+=D(C);break;case 9:case 10:case 13:case 32:F+=L(w);break;case 92:F+=P(_()-1,7);continue;case 47:switch(T()){case 42:case 47:m(Y(O(S(),_()),t,n),p);break;default:F+="/"}break;case 123*x:d[f++]=h(F)*k;case 125*x:case 59:case 0:switch(C){case 0:case 125:E=0;case 59+g:-1==k&&(F=l(F,/\f/g,"")),b>0&&h(F)-v&&m(b>32?X(F+";",r,n,v-1):X(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(m(j=K(F,t,n,f,g,i,d,I,R=[],M=[],v),a),123===C)if(0===g)G(F,t,j,j,R,a,v,d,M);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:G(e,j,j,r&&m(K(e,j,j,0,0,i,d,I,i,R=[],v),M),i,M,v,d,r?R:M);break;default:G(F,j,j,j,[""],M,0,d,M)}}f=g=b=0,x=k=1,I=F="",v=s;break;case 58:v=1+h(F),b=w;default:if(x<1)if(123==C)--x;else if(125==C&&0==x++&&125==A())continue;switch(F+=o(C),C*x){case 38:k=g>0?1:(F+="\f",-1);break;case 44:d[f++]=(h(F)-1)*k,k=1;break;case 64:45===T()&&(F+=D(S())),y=T(),g=v=h(I=F+=N(_())),C++;break;case 45:45===w&&2==h(F)&&(x=0)}}return a}function K(e,t,n,r,o,a,c,u,h,m,f){for(var g=o-1,v=0===o?a:[""],y=p(v),b=0,w=0,E=0;b<r;++b)for(var A=0,S=d(e,g+1,g=i(w=c[b])),T=e;A<y;++A)(T=s(w>0?v[A]+" "+S:l(S,/&\f/g,v[A])))&&(h[E++]=T);return x(e,t,n,0===o?$:u,h,m,f)}function Y(e,t,n){return x(e,t,n,B,o(b),d(e,2,-2),0)}function X(e,t,n,r){return x(e,t,n,V,d(e,0,r),d(e,r+1,-1),r)}var Q=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!C(i);)S();return k(e,y)},J=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=Q(y-1,t,n);break;case 2:e[n]+=D(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=S());return e}(I(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],o=J(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+F+e+j+e+e;case 6828:case 4268:return U+e+j+e+e;case 6165:return U+e+j+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+j+"flex-$1$2")+e;case 5443:return U+e+j+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+j+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+j+l(e,"shrink","negative")+e;case 5292:return U+e+j+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+j+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+j+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+j+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case W:return z([E(e,{value:l(e.value,"@","@"+U)})],r);case $:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return z([E(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return z([E(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),E(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),E(e,{props:[l(t,/:(plac\w+)/,j+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,o,a=e.stylisPlugins||re,s={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,d=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(a,d));o=function(e,t,n,r){c=n,z(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return m.sheet.hydrate(l),m}},8620:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(7483),a=n(8329);const s=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:a.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,s),{systemProps:a,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[a,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},a,e):a}:(0,r.A)({},a,t),(0,r.A)({},c,{sx:u})}},8635:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6907);function i(e){return(0,r.A)(e).defaultView||window}},8733:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3931).A},9015:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(7923),o=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return m={name:t,styles:n,next:m},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return m={name:i.name,styles:i.styles,next:m},i.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)m={name:s.name,styles:s.styles,next:m},s=s.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var a in n){var s=n[a];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?r+=a+"{"+t[l]+"}":c(l)&&(r+=u(a)+":"+d(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&o)throw new Error(h);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var m=p(e,t,s);switch(a){case"animation":case"animationName":r+=u(a)+":"+m+";";break;default:r+=a+"{"+m+"}"}}else for(var f=0;f<s.length;f++)c(s[f])&&(r+=u(a)+":"+d(a,s[f])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=m,f=n(e);return m=l,p(e,t,f)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var m,f=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";m=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=p(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=p(n,t,e[a]),r)i+=o[a]}f.lastIndex=0;for(var s,l="";null!==(s=f.exec(i));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:m}}},9044:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1399).A},9234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(8099)},9240:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=m,t.tL=g,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=f;var i=r(n(9234)),o=r(n(9344));function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function s(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(s(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),u({type:s,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,u(e)}function m(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function f(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?m(e,t):f(e,t)}},9254:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var r=n(9634),i=n(195),o=n(7550),a=n(9608);const s=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:a.A})},9344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6747)},9360:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(8168),i=n(8587),o=n(9950),a=n(2004),s=n(8465),l=n(1676),c=n(8463),u=n(9254),d=n(1763),h=n(423);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var m=n(4414);const f=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.A)(n.color)}`],t[`fontSize${(0,l.A)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,a,s,l,c,u,d,h,p,m,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.active,disabled:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.disabled,inherit:void 0}[n.color]}})),v=o.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:x,viewBox:E="0 0 24 24"}=n,A=(0,i.A)(n,f),S=o.isValidElement(u)&&"svg"===u.type,T=(0,r.A)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:E,hasSvgAsChild:S}),_={};w||(_.viewBox=E);const k=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.A)(t)}`,`fontSize${(0,l.A)(n)}`]};return(0,s.A)(i,p,r)})(T);return(0,m.jsxs)(g,(0,r.A)({as:v,className:(0,a.A)(k.root,d),focusable:"false",color:b,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},_,A,S&&u.props,{ownerState:T,children:[S?u.props.children:u,x?(0,m.jsx)("title",{children:x}):null]}))}));v.muiName="SvgIcon";const y=v},9526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7034)},9608:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1960);const i=e=>(0,r.A)(e)&&"classes"!==e},9629:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>a,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(7483);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`};function a(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=s(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),a)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}},9634:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=f,rootShouldForwardProp:r=m,slotShouldForwardProp:l=m}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:p,skipVariantsResolver:f,skipSx:w,overridesResolver:x=y(g(p))}=c,E=(0,o.default)(c,h),A=void 0!==f?f:p&&"Root"!==p&&"root"!==p||!1,S=w||!1;let T=m;"Root"===p||"root"===p?T=r:p?T=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(T=void 0);const _=(0,a.default)(e,(0,i.default)({shouldForwardProp:T,label:undefined},E)),k=e=>"function"===typeof e&&e.__emotion_real!==e||(0,s.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,C=function(r){let o=k(r);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];const c=s?s.map(k):[];d&&x&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,a={};return Object.entries(o).forEach((t=>{let[n,o]=t;a[n]=b(o,(0,i.default)({},e,{theme:r}))})),x(e,a)})),d&&!A&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),S||c.push(u);const h=c.length-s.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=_(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return _.withConfig&&(C.withConfig=_.withConfig),C}};var i=r(n(4634)),o=r(n(4893)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6204)),s=n(7785),l=(r(n(304)),r(n(8399)),r(n(3699))),c=r(n(5260));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const f=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const a="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(a))return a.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(a&&"object"===typeof a&&Array.isArray(a.variants)){const{variants:e=[]}=a;let t=(0,o.default)(a,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return a}},9693:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(9950),r=n.t(t,2),i=n(1352);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(XA){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,p=l.history,m=e.Pop,f=null,g=v();function v(){return(p.state||{idx:null}).idx}function y(){m=e.Pop;let t=v(),n=null==t?null:t-g;g=t,f&&f({action:m,location:w.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(o({},p.state,{idx:g}),""));let w={get action(){return m},get location(){return t(l,p)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(a,y),f=e,()=>{l.removeEventListener(a,y),f=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){m=e.Push;let i=u(w.location,t,n);r&&r(i,t),g=v()+1;let o=c(i,g),a=w.createHref(i);try{p.pushState(o,"",a)}catch(Rb){if(Rb instanceof DOMException&&"DataCloneError"===Rb.name)throw Rb;l.location.assign(a)}h&&f&&f({action:m,location:w.location,delta:1})},replace:function(t,n){m=e.Replace;let i=u(w.location,t,n);r&&r(i,t),g=v();let o=c(i,g),a=w.createHref(i);p.replaceState(o,"",a),h&&f&&f({action:m,location:w.location,delta:0})},go:e=>p.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=R(("string"===typeof t?h(t):t).pathname||"/",n);if(null==i)return null;let o=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=I(i);a=k(o[s],e,r)}return a}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=O([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:_(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=y(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,x=2,E=1,A=10,S=-2,T=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=S),t&&(r+=x),n.filter((e=>!T(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?E:A)),r)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:O([o,u.pathname]),pathnameBase:N(O([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=O([o,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Rb){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Rb+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=h(e):(i=o({},e),s(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let a,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)a=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:F(i)}}(i,a),d=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!p||(u.pathname+="/"),u}const O=e=>e.join("/").replace(/\/\/+/g,"/"),N=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const W=t.createContext(null);const z=t.createContext(null);const H=t.createContext(null);const q=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const K=t.createContext(null);function Y(){return null!=t.useContext(q)}function X(){return Y()||s(!1),t.useContext(q).location}function Q(e){t.useContext(H).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=ce(se.UseNavigateStable),n=de(le.UseNavigateStable),r=t.useRef(!1);return Q((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},i)))}),[e,n])}():function(){Y()||s(!1);let e=t.useContext(W),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:o}=t.useContext(G),{pathname:a}=X(),l=JSON.stringify(P(o,r.v7_relativeSplatPath)),c=t.useRef(!1);return Q((()=>{c.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let o=M(t,JSON.parse(l),a,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:O([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[n,i,l,a,e])}()}function Z(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(H),{matches:o}=t.useContext(G),{pathname:a}=X(),s=JSON.stringify(P(o,i.v7_relativeSplatPath));return t.useMemo((()=>M(e,JSON.parse(s),a,"path"===r)),[e,s,a,r])}function te(n,r,i,o){Y()||s(!1);let{navigator:a,static:l}=t.useContext(H),{matches:c}=t.useContext(G),u=c[c.length-1],d=u?u.params:{},p=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let m,g=X();if(r){var v;let e="string"===typeof r?h(r):r;"/"===p||(null==(v=e.pathname)?void 0:v.startsWith(p))||s(!1),m=e}else m=g;let y=m.pathname||"/",b=y;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!l&&i&&i.matches&&i.matches.length>0?i.matches:f(n,{pathname:b});let x=ae(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:O([p,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:O([p,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,i,o);return r&&x?t.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:e.Pop}},x):x}function ne(){let e=function(){var e;let n=t.useContext(K),r=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(W);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},i)}function ae(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(o=r)?void 0:o.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,i,o)=>{let a,s=!1,h=null,p=null;var m;r&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||re,u&&(d<0&&0===o?(m="route-fallback",!1||he[m]||(he[m]=!0),s=!0,p=null):d===o&&(s=!0,p=i.route.hydrateFallbackElement||null)));let f=n.concat(l.slice(0,o+1)),g=()=>{let n;return n=a?h:s?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(oe,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(W);return n||s(!1),n}function ue(e){let n=t.useContext(z);return n||s(!1),n}function de(e){let n=function(){let e=t.useContext(G);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function me(e){let{to:n,replace:r,state:i,relative:o}=e;Y()||s(!1);let{future:a,static:l}=t.useContext(H),{matches:c}=t.useContext(G),{pathname:u}=X(),d=J(),h=M(n,P(c,a.v7_relativeSplatPath),u,"path"===o),p=JSON.stringify(h);return t.useEffect((()=>d(JSON.parse(p),{replace:r,state:i,relative:o})),[d,p,o,r,i]),null}function fe(e){s(!1)}function ge(n){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:l,static:c=!1,future:u}=n;Y()&&s(!1);let d=r.replace(/^\/*/,"/"),p=t.useMemo((()=>({basename:d,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},u)})),[d,u,l,c]);"string"===typeof o&&(o=h(o));let{pathname:m="/",search:f="",hash:g="",state:v=null,key:y="default"}=o,b=t.useMemo((()=>{let e=R(m,d);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:a}}),[d,m,f,g,v,y,a]);return null==b?null:t.createElement(H.Provider,{value:p},t.createElement(q.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise((()=>{}));t.Component;function ye(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ye(e.props.children,o));e.type!==fe&&s(!1),e.props.index&&e.props.children&&s(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,o)),r.push(a)})),r}var be=n(7119),we=n.t(be,2);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(XA){}new Map;const Se=r.startTransition;we.flushSync,r.useId;function Te(e){let{basename:n,children:r,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,s)));let l=a.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:m}=i||{},f=t.useCallback((e=>{m&&Se?Se((()=>h(e))):h(e)}),[h,m]);return t.useLayoutEffect((()=>l.listen(f)),[l,f]),t.useEffect((()=>pe(i)),[i]),t.createElement(ge,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=t.forwardRef((function(e,n){let r,{onClick:i,relative:o,reloadDocument:a,replace:l,state:c,target:u,to:h,preventScrollReset:p,viewTransition:m}=e,f=Ee(e,Ae),{basename:g}=t.useContext(H),v=!1;if("string"===typeof h&&ke.test(h)&&(r=h,_e))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(XA){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||s(!1);let{basename:i,navigator:o}=t.useContext(H),{hash:a,pathname:l,search:c}=ee(e,{relative:r}),u=l;return"/"!==i&&(u="/"===l?i:O([i,l])),o.createHref({pathname:u,search:c,hash:a})}(h,{relative:o}),b=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===n?{}:n,c=J(),u=X(),h=ee(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:d(u)===d(h);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}}),[u,c,h,i,o,r,e,a,s,l])}(h,{replace:l,state:c,target:u,preventScrollReset:p,relative:o,viewTransition:m});return t.createElement("a",xe({},f,{href:r||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Ie,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var De=n(8168),Le=n(8587),Pe=n(2004),Me=n(6204),Oe=n(4222),Ne=n(8620),je=n(5708),Fe=n(7370);const Ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Fe.T);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},Be=(0,je.A)();const $e=function(){return Ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be)};var Ve=n(4414);const We=["className","component"];var ze=n(4501),He=n(4436),qe=n(7550),Ge=n(1763);const Ke=(0,Ge.A)("MuiBox",["root"]),Ye=(0,He.A)(),Xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:o}=e,a=(0,Me.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Oe.A),s=t.forwardRef((function(e,t){const s=$e(r),l=(0,Ne.A)(e),{className:c,component:u="div"}=l,d=(0,Le.A)(l,We);return(0,Ve.jsx)(a,(0,De.A)({as:u,ref:t,className:(0,Pe.A)(c,o?o(i):i),theme:n&&s[n]||s},d))}));return s}({themeId:qe.A,defaultTheme:Ye,defaultClassName:Ke.root,generateClassName:ze.A.generate}),Qe=Xe;var Je=n(8463),Ze=n(8219);const et=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=$e(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Ve.jsx)(Ze.A,{styles:o})};var tt=n(195);const nt=function(e){return(0,Ve.jsx)(et,(0,De.A)({},e,{defaultTheme:tt.A,themeId:qe.A}))},rt=(e,t)=>(0,De.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),it=e=>(0,De.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const ot=function(e){const n=(0,Je.b)({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=n;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(nt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var o;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,De.A)({html:rt(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,De.A)({margin:0},it(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(e,i)}),r]})},at=!1,st=!1,lt="${JSCORE_VERSION}",ct=function(e,t){if(!e)throw ut(t)},ut=function(e){return new Error("Firebase Database ("+lt+") INTERNAL ASSERT FAILED: "+e)},dt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new pt;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mt=function(e){const t=dt(e);return ht.encodeByteArray(t,!0)},ft=function(e){return mt(e).replace(/\./g,"")},gt=function(e){try{return ht.decodeString(e,!0)}catch(XA){console.error("base64Decode failed: ",XA)}return null};function vt(e){return yt(void 0,e)}function yt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=yt(e[n],t[n]));return e}const bt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wt=()=>{try{return bt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(XA){return}const t=e&&gt(e[1]);return t&&JSON.parse(t)})()}catch(XA){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${XA}`)}},xt=e=>{var t,n;return null===(n=null===(t=wt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Et=e=>{const t=xt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},At=()=>{var e;return null===(e=wt())||void 0===e?void 0:e.config},St=e=>{var t;return null===(t=wt())||void 0===t?void 0:t[`_${e}`]};class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function _t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ft(JSON.stringify({alg:"none",type:"JWT"})),ft(JSON.stringify(o)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function It(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Rt(){return!0===at||!0===st}function Dt(){return!function(){var e;const t=null===(e=wt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(XA){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lt(){try{return"object"===typeof indexedDB}catch(XA){return!1}}class Pt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Ot,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Pt(n,o,t)}}const Ot=/\{\$([^}]+)}/g;function Nt(e){return JSON.parse(e)}function jt(e){return JSON.stringify(e)}const Ft=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Nt(gt(o[0])||""),n=Nt(gt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(XA){}return{header:t,claims:n,data:r,signature:i}};function Ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Wt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(zt(n)&&zt(o)){if(!Wt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zt(e){return null!==e&&"object"===typeof e}function Ht(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Gt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Kt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(s^l),i=1518500249):(r=a^s^l,i=1859775393):u<60?(r=a&s|l&(a|s),i=2400959708):(r=a^s^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=s,s=4294967295&(a<<30|a>>>2),a=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Yt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xt),void 0===r.error&&(r.error=Xt),void 0===r.complete&&(r.complete=Xt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(XA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(XA){"undefined"!==typeof console&&console.error&&console.error(XA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xt(){}function Qt(e,t){return`${e} failed: ${t} argument `}const Jt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Zt(e){return e&&e._delegate?e._delegate:e}class en{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tn="[DEFAULT]";class nn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Tt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(XA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(XA){if(r)return null;throw XA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:tn})}catch(XA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(XA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(JK){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(JK){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.component?this.component.multipleInstances?e:tn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function rn(e){return e===tn?void 0:e}class on{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const an=[];var sn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(sn||(sn={}));const ln={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},cn=sn.INFO,un={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},dn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=un[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class hn{constructor(e){this.name=e,this._logLevel=cn,this._logHandler=dn,this._userLogHandler=null,an.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ln[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...t),this._logHandler(this,sn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...t),this._logHandler(this,sn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.INFO,...t),this._logHandler(this,sn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.WARN,...t),this._logHandler(this,sn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...t),this._logHandler(this,sn.ERROR,...t)}}let pn,mn;const fn=new WeakMap,gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,bn=new WeakMap;let wn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return gn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function xn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(mn||(mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Sn(this),n),An(fn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return An(e.apply(Sn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Sn(this),t,...r);return vn.set(o,t.sort?t.sort():[t]),An(o)}}function En(e){return"function"===typeof e?xn(e):(e instanceof IDBTransaction&&function(e){if(gn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));gn.set(e,t)}(e),t=e,(pn||(pn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,wn):e);var t}function An(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(An(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&fn.set(t,e)})).catch((()=>{})),bn.set(t,e),t}(e);if(yn.has(e))return yn.get(e);const t=En(e);return t!==e&&(yn.set(e,t),bn.set(t,e)),t}const Sn=e=>bn.get(e);const Tn=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],kn=new Map;function Cn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(kn.get(t))return kn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Tn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return kn.set(t,o),o}wn=(e=>({...e,get:(t,n,r)=>Cn(t,n)||e.get(t,n,r),has:(t,n)=>!!Cn(t,n)||e.has(t,n)}))(wn);class In{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Rn="@firebase/app",Dn="0.11.4",Ln=new hn("@firebase/app"),Pn="@firebase/app-compat",Mn="@firebase/analytics-compat",On="@firebase/analytics",Nn="@firebase/app-check-compat",jn="@firebase/app-check",Fn="@firebase/auth",Un="@firebase/auth-compat",Bn="@firebase/database",$n="@firebase/data-connect",Vn="@firebase/database-compat",Wn="@firebase/functions",zn="@firebase/functions-compat",Hn="@firebase/installations",qn="@firebase/installations-compat",Gn="@firebase/messaging",Kn="@firebase/messaging-compat",Yn="@firebase/performance",Xn="@firebase/performance-compat",Qn="@firebase/remote-config",Jn="@firebase/remote-config-compat",Zn="@firebase/storage",er="@firebase/storage-compat",tr="@firebase/firestore",nr="@firebase/vertexai",rr="@firebase/firestore-compat",ir="firebase",or="[DEFAULT]",ar={[Rn]:"fire-core",[Pn]:"fire-core-compat",[On]:"fire-analytics",[Mn]:"fire-analytics-compat",[jn]:"fire-app-check",[Nn]:"fire-app-check-compat",[Fn]:"fire-auth",[Un]:"fire-auth-compat",[Bn]:"fire-rtdb",[$n]:"fire-data-connect",[Vn]:"fire-rtdb-compat",[Wn]:"fire-fn",[zn]:"fire-fn-compat",[Hn]:"fire-iid",[qn]:"fire-iid-compat",[Gn]:"fire-fcm",[Kn]:"fire-fcm-compat",[Yn]:"fire-perf",[Xn]:"fire-perf-compat",[Qn]:"fire-rc",[Jn]:"fire-rc-compat",[Zn]:"fire-gcs",[er]:"fire-gcs-compat",[tr]:"fire-fst",[rr]:"fire-fst-compat",[nr]:"fire-vertex","fire-js":"fire-js",[ir]:"fire-js-all"},sr=new Map,lr=new Map,cr=new Map;function ur(e,t){try{e.container.addComponent(t)}catch(XA){Ln.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,XA)}}function dr(e){const t=e.name;if(cr.has(t))return Ln.debug(`There were multiple attempts to register component ${t}.`),!1;cr.set(t,e);for(const n of sr.values())ur(n,e);for(const n of lr.values())ur(n,e);return!0}function hr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const mr=new Mt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class fr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new en("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const gr="11.6.0";function vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:or,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=At()),!n)throw mr.create("no-options");const o=sr.get(i);if(o){if(Wt(n,o.options)&&Wt(r,o.config))return o;throw mr.create("duplicate-app",{appName:i})}const a=new on(i);for(const l of cr.values())a.addComponent(l);const s=new fr(n,r,a);return sr.set(i,s),s}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or;const t=sr.get(e);if(!t&&e===or&&At())return vr();if(!t)throw mr.create("no-app",{appName:e});return t}function br(e,t,n){var r;let i=null!==(r=ar[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ln.warn(e.join(" "))}dr(new en(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const wr="firebase-heartbeat-store";let xr=null;function Er(){return xr||(xr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=An(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(An(a.result),e.oldVersion,e.newVersion,An(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(wr)}catch(XA){console.warn(XA)}}}).catch((e=>{throw mr.create("idb-open",{originalErrorMessage:e.message})}))),xr}async function Ar(e,t){try{const n=(await Er()).transaction(wr,"readwrite"),r=n.objectStore(wr);await r.put(t,Sr(e)),await n.done}catch(XA){if(XA instanceof Pt)Ln.warn(XA.message);else{const t=mr.create("idb-set",{originalErrorMessage:null===XA||void 0===XA?void 0:XA.message});Ln.warn(t.message)}}}function Sr(e){return`${e.name}!${e.options.appId}`}class Tr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_r();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(XA){Ln.warn(XA)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_r(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Cr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ft(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(XA){return Ln.warn(XA),""}}}function _r(){return(new Date).toISOString().substring(0,10)}class kr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Lt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Rb){t(Rb)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Er()).transaction(wr),n=await t.objectStore(wr).get(Sr(e));return await t.done,n}catch(XA){if(XA instanceof Pt)Ln.warn(XA.message);else{const t=mr.create("idb-get",{originalErrorMessage:null===XA||void 0===XA?void 0:XA.message});Ln.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Cr(e){return ft(JSON.stringify({version:2,heartbeats:e})).length}var Ir;Ir="",dr(new en("platform-logger",(e=>new In(e)),"PRIVATE")),dr(new en("heartbeat",(e=>new Tr(e)),"PRIVATE")),br(Rn,Dn,Ir),br(Rn,Dn,"esm2017"),br("fire-js","");br("firebase","11.6.0","app");function Rr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Dr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lr=Dr,Pr=new Mt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mr=new hn("@firebase/auth");function Or(e){if(Mr.logLevel<=sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mr.error(`Auth (${gr}): ${e}`,...n)}}function Nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Br(e,...n)}function jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Br(e,...n)}function Fr(e,t,n){const r=Object.assign(Object.assign({},Lr()),{[t]:n});return new Mt("auth","Firebase",r).create(t,{appName:e.name})}function Ur(e){return Fr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pr.create(e,...n)}function $r(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Br(t,...r)}}function Vr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Or(t),new Error(t)}function Wr(e,t){e||Vr(t)}function zr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hr(){return"http:"===qr()||"https:"===qr()}function qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Gr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ct()||It()}get(){return Gr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yr(e,t){Wr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Xr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Jr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zr=new Kr(3e4,6e4);function ei(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ti(e,t,n,r){return ni(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=Ht(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Xr.fetch()(await ii(e,e.config.apiHost,n,a),l)}))}async function ni(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qr),t);try{const t=new ai(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw si(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw si(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw si(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw si(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Fr(e,s,a);Nr(e,s)}}catch(XA){if(XA instanceof Pt)throw XA;Nr(e,"network-request-failed",{message:String(XA)})}}async function ri(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await ti(e,t,n,r,i);return"mfaPendingCredential"in o&&Nr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function ii(e,t,n,r){const i=`${t}${n}?${r}`,o=e,a=o.config.emulator?Yr(e.config,i):`${e.config.apiScheme}://${i}`;if(Jr.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function oi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ai{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(jr(this.auth,"network-request-failed"))),Zr.get())}))}}function si(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jr(e,t,r);return i.customData._tokenResponse=n,i}function li(e){return void 0!==e&&void 0!==e.enterprise}class ci{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ui(e,t){return ti(e,"GET","/v2/recaptchaConfig",ei(e,t))}async function di(e,t){return ti(e,"POST","/v1/accounts:lookup",t)}function hi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(XA){}}function pi(e){return 1e3*Number(e)}function mi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Or("JWT malformed, contained fewer than 3 sections"),null;try{const e=gt(n);return e?JSON.parse(e):(Or("Failed to decode base64 JWT payload"),null)}catch(XA){return Or("Caught error parsing JWT payload as JSON",null===XA||void 0===XA?void 0:XA.toString()),null}}function fi(e){const t=mi(e);return $r(t,"internal-error"),$r("undefined"!==typeof t.exp,"internal-error"),$r("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function gi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(XA){throw XA instanceof Pt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(XA)&&e.auth.currentUser===e&&await e.auth.signOut(),XA}}class vi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(XA){return void("auth/network-request-failed"===(null===XA||void 0===XA?void 0:XA.code)&&this.schedule(!0))}this.schedule()}}class yi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gi(e,di(n,{idToken:r}));$r(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?wi(o.providerUserInfo):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new yi(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function wi(e){return e.map((e=>{var{providerId:t}=e,n=Rr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$r(e.idToken,"internal-error"),$r("undefined"!==typeof e.idToken,"internal-error"),$r("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$r(0!==e.length,"internal-error");const t=fi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?($r(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ni(e,{},(async()=>{const n=Ht({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await ii(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xr.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new xi;return n&&($r("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&($r("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&($r("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function Ei(e,t){$r("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ai{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Rr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gi(this,this.stsTokenManager.getToken(this.auth,e));return $r(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Zt(e),r=await n.getIdToken(t),i=mi(r);$r(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:hi(pi(i.auth_time)),issuedAtTime:hi(pi(i.iat)),expirationTime:hi(pi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Zt(e);await bi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&($r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await gi(this,async function(e,t){return ti(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,f=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:E}=t;$r(y&&E,e,"internal-error");const A=xi.fromJSON(this.name,E);$r("string"===typeof y,e,"internal-error"),Ei(u,e.name),Ei(d,e.name),$r("boolean"===typeof b,e,"internal-error"),$r("boolean"===typeof w,e,"internal-error"),Ei(h,e.name),Ei(p,e.name),Ei(m,e.name),Ei(f,e.name),Ei(g,e.name),Ei(v,e.name);const S=new Ai({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map((e=>Object.assign({},e)))),f&&(S._redirectEventId=f),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new xi;r.updateFromServerResponse(t);const i=new Ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];$r(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?wi(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new xi;a.updateFromIdToken(n);const s=new Ai({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new yi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const Si=new Map;function Ti(e){Wr(e instanceof Function,"Expected a class definition");let t=Si.get(e);return t?(Wr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Si.set(e,t),t)}class _i{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_i.type="NONE";const ki=_i;function Ci(e,t,n){return`firebase:${e}:${t}:${n}`}class Ii{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ci(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ci("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await di(this.auth,{idToken:e}).catch((()=>{}));return t?Ai._fromGetAccountInfoResponse(this.auth,t,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ii(Ti(ki),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ti(ki);const o=Ci(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){let n;if("string"===typeof t){const r=await di(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Ai._fromGetAccountInfoResponse(e,r,t)}else n=Ai._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(JK){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(JK){}}))),new Ii(i,e,n)):new Ii(i,e,n)}}function Ri(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Di(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ni(t))return"Blackberry";if(ji(t))return"Webos";if(Li(t))return"Safari";if((t.includes("chrome/")||Pi(t))&&!t.includes("edge/"))return"Chrome";if(Oi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(e)}function Li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(e)}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(e)}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(e)}function ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(e)}function Fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ui(){return function(){const e=kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return Fi(e)||Oi(e)||ji(e)||Ni(e)||/windows phone/i.test(e)||Mi(e)}function $i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ri(kt());break;case"Worker":t=`${Ri(kt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gr}/${r}`}class Vi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(XA){r(XA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(XA){t.reverse();for(const n of t)try{n()}catch(PS){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===XA||void 0===XA?void 0:XA.message})}}}class Wi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Ii.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(XA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await di(this,{idToken:e}),n=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(XA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(XA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(XA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bi(e)}catch(XA){if("auth/network-request-failed"!==(null===XA||void 0===XA?void 0:XA.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(Ur(this));const t=e?Zt(e):null;return t&&$r(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&$r(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return pr(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(Ur(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ti(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ti(e,"GET","/v2/passwordPolicy",ei(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Wi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ti(e,"POST","/v2/accounts:revokeToken",ei(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ti(e)||this._popupRedirectResolver;$r(t,this,"argument-error"),this.redirectPersistenceManager=await Ii.create(this,[Ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($r(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$i(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mr.logLevel<=sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mr.warn(`Auth (${gr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Hi(e){return Zt(e)}class qi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Yt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return $r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ki(e){return Gi.loadJS(e)}function Yi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Xi{constructor(){this.enterprise=new Qi}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qi{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ji="NO_RECAPTCHA";class Zi{constructor(e){this.type="recaptcha-enterprise",this.auth=Hi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;li(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Ji)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Xi).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ui(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ci(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&li(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Gi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ki(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function eo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Zi(e);let a;if(i)a=Ji;else try{a=await o.verify(n)}catch(Rb){a=await o.verify(n,!0)}const s=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function to(e,t,n,r,i){var o,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await eo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await eo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await eo(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await eo(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await eo(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function no(e){const t=Hi(e),n=await ui(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ci(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Zi(t).verify()}}function ro(e,t,n){const r=Hi(e);$r(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=io(t),{host:a,port:s}=function(e){const t=io(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:oo(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:oo(t)}}}(t),l={url:`${o}//${a}${null===s?"":`:${s}`}/`},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $r(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $r(Wt(l,r.config.emulator)&&Wt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function io(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function oo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ao{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function so(e,t){return ti(e,"POST","/v1/accounts:signUp",t)}async function lo(e,t){return ri(e,"POST","/v1/accounts:signInWithPassword",ei(e,t))}async function co(e,t){return ti(e,"POST","/v1/accounts:sendOobCode",ei(e,t))}async function uo(e,t){return co(e,t)}class ho extends ao{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ho(e,t,"password")}static _fromEmailAndCode(e,t){return new ho(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return to(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ei(e,t))}(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return to(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",so,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ei(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function po(e,t){return ri(e,"POST","/v1/accounts:signInWithIdp",ei(e,t))}class mo extends ao{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Rr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new mo(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return po(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,po(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,po(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ht(t)}return e}}async function fo(e,t){return ti(e,"POST","/v1/accounts:sendVerificationCode",ei(e,t))}const go={USER_NOT_FOUND:"user-not-found"};class vo extends ao{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new vo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new vo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,t));if(n.temporaryProof)throw si(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),go)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new vo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class yo{constructor(e){var t,n,r,i,o,a;const s=qt(Gt(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);$r(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=qt(Gt(e)).link,n=t?qt(Gt(t)).deep_link_id:null,r=qt(Gt(e)).deep_link_id;return(r?qt(Gt(r)).link:null)||r||n||t||e}(e);try{return new yo(t)}catch(JK){return null}}}class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,t){return ho._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=yo.parseLink(t);return $r(n,"argument-error"),ho._fromEmailAndCode(e,n.code,n.tenantId)}}bo.PROVIDER_ID="password",bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xo extends wo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Eo extends xo{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Eo.credential(t.oauthAccessToken)}catch(JK){return null}}}Eo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Eo.PROVIDER_ID="facebook.com";class Ao extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ao.credential(n,r)}catch(JK){return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com",Ao.PROVIDER_ID="google.com";class So extends xo{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return So.credential(t.oauthAccessToken)}catch(JK){return null}}}So.GITHUB_SIGN_IN_METHOD="github.com",So.PROVIDER_ID="github.com";class To extends xo{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return To.credential(n,r)}catch(JK){return null}}}async function _o(e,t){return ri(e,"POST","/v1/accounts:signUp",ei(e,t))}To.TWITTER_SIGN_IN_METHOD="twitter.com",To.PROVIDER_ID="twitter.com";class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ai._fromIdTokenResponse(e,n,r),o=Co(n);return new ko({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Co(n);return new ko({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Co(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Io extends Pt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Io.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Io(e,t,n,r)}}function Ro(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Io._fromErrorAndOperation(e,n,t,r);throw n}))}async function Do(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ko._forOperation(e,"link",r)}async function Lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(pr(r.app))return Promise.reject(Ur(r));const i="reauthenticate";try{const o=await gi(e,Ro(r,i,t,e),n);$r(o.idToken,r,"internal-error");const a=mi(o.idToken);$r(a,r,"internal-error");const{sub:s}=a;return $r(e.uid===s,r,"user-mismatch"),ko._forOperation(e,i,o)}catch(XA){throw"auth/user-not-found"===(null===XA||void 0===XA?void 0:XA.code)&&Nr(r,"user-mismatch"),XA}}async function Po(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(pr(e.app))return Promise.reject(Ur(e));const r="signIn",i=await Ro(e,r,t),o=await ko._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Mo(e,t){return Po(Hi(e),t)}async function Oo(e,t){return Lo(Zt(e),t)}function No(e,t,n){var r;$r((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),$r("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),$r("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($r(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&($r(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function jo(e){const t=Hi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Fo(e,t){const n=Zt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&No(n.auth,r,t);const{email:i}=await async function(e,t){return co(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Uo(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Zt(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await gi(i,async function(e,t){return ti(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const s=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));s&&(s.displayName=i.displayName,s.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Bo(e,t,n,r){return Zt(e).onAuthStateChanged(t,n,r)}function $o(e){return Zt(e).signOut()}function Vo(e,t){return ti(e,"POST","/v2/accounts/mfaEnrollment:start",ei(e,t))}new WeakMap;const Wo="__sak";class zo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wo,"1"),this.storage.removeItem(Wo),Promise.resolve(!0)):Promise.resolve(!1)}catch(JK){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ho extends zo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ui()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ho.type="LOCAL";const qo=Ho;function Go(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Ko(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Yo{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Ko(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Go(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Ko(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Ko(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Go(n);const i=setInterval((()=>{const e=Go(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Yo.type="COOKIE";class Xo extends zo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xo.type="SESSION";const Qo=Xo;class Jo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Jo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Jo.receivers=[];class ea{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=Zo("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function ta(){return window}function na(){return"undefined"!==typeof ta().WorkerGlobalScope&&"function"===typeof ta().importScripts}const ra="firebaseLocalStorageDb",ia="firebaseLocalStorage",oa="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function sa(e,t){return e.transaction([ia],t?"readwrite":"readonly").objectStore(ia)}function la(){const e=indexedDB.open(ra,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ia,{keyPath:oa})}catch(XA){n(XA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ia)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ra);return new aa(e).toPromise()}(),t(await la()))}))}))}async function ca(e,t,n){const r=sa(e,!0).put({[oa]:t,value:n});return new aa(r).toPromise()}function ua(e,t){const n=sa(e,!0).delete(t);return new aa(n).toPromise()}class da{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await la()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(XA){if(t++>3)throw XA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return na()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jo._getInstance(na()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ea(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(JK){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await la();return await ca(e,Wo,"1"),await ua(e,Wo),!0}catch(JK){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ca(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=sa(e,!1).get(t),r=await new aa(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ua(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=sa(e,!1).getAll();return new aa(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}da.type="LOCAL";const ha=da;function pa(e,t){return ti(e,"POST","/v2/accounts/mfaSignIn:start",ei(e,t))}Yi("rcb"),new Kr(3e4,6e4);const ma="recaptcha";async function fa(e,t,n){var r;if(!e._getRecaptchaConfig())try{await no(e)}catch(Rb){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){$r("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ji){$r((null===n||void 0===n?void 0:n.type)===ma,e,"argument-error");return Vo(e,await ga(e,t,n))}return Vo(e,t)},a=to(e,r,"mfaSmsEnrollment",o,"PHONE_PROVIDER"),s=await a.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{$r("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;$r(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ji){$r((null===n||void 0===n?void 0:n.type)===ma,e,"argument-error");return pa(e,await ga(e,t,n))}return pa(e,t)},l=to(e,a,"mfaSmsSignIn",s,"PHONE_PROVIDER"),c=await l.catch((e=>Promise.reject(e)));return c.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===Ji){$r((null===n||void 0===n?void 0:n.type)===ma,e,"argument-error");return fo(e,await ga(e,t,n))}return fo(e,t)},o=to(e,t,"sendVerificationCode",r,"PHONE_PROVIDER"),a=await o.catch((e=>Promise.reject(e)));return a.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ga(e,t,n){$r(n.type===ma,e,"argument-error");const r=await n.verify();$r("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class va{constructor(e){this.providerId=va.PROVIDER_ID,this.auth=Hi(e)}verifyPhoneNumber(e,t){return fa(this.auth,e,Zt(t))}static credential(e,t){return vo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return va.credentialFromTaggedObject(t)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?vo._fromTokenResponse(n,r):null}}function ya(e,t){return t?Ti(t):($r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}va.PROVIDER_ID="phone",va.PHONE_SIGN_IN_METHOD="phone";class ba extends ao{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wa(e){return Po(e.auth,new ba(e),e.bypassAuthState)}function xa(e){const{auth:t,user:n}=e;return $r(n,t,"internal-error"),Lo(n,new ba(e),e.bypassAuthState)}async function Ea(e){const{auth:t,user:n}=e;return $r(n,t,"internal-error"),Do(n,new ba(e),e.bypassAuthState)}class Aa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(XA){this.reject(XA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(XA){this.reject(XA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wa;case"linkViaPopup":case"linkViaRedirect":return Ea;case"reauthViaPopup":case"reauthViaRedirect":return xa;default:Nr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new Kr(2e3,1e4);class Ta extends Aa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $r(e,this.auth,"internal-error"),e}async onExecution(){Wr(1===this.filter.length,"Popup operations only handle one event");const e=Zo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(jr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Sa.get())};e()}}Ta.currentPopupAction=null;const _a=new Map;class ka extends Aa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=_a.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ra(t),r=Ia(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(XA){e=()=>Promise.reject(XA)}_a.set(this.auth._key(),e)}return this.bypassAuthState||_a.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ca(e,t){_a.set(e._key(),t)}function Ia(e){return Ti(e._redirectPersistence)}function Ra(e){return Ci("pendingRedirect",e.config.apiKey,e.name)}async function Da(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(pr(e.app))return Promise.reject(Ur(e));const r=Hi(e),i=ya(r,t),o=new ka(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class La{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ma(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ma(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pa(e))}saveEventToCache(e){this.cachedEventUids.add(Pa(e)),this.lastProcessedEventTime=Date.now()}}function Pa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ma(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Oa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Na=/^https?/;async function ja(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ti(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(Fa(n))return}catch(JK){}Nr(e,"unauthorized-domain")}function Fa(e){const t=zr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Na.test(n))return!1;if(Oa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ua=new Kr(3e4,6e4);function Ba(){const e=ta().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function $a(e){return new Promise(((t,n)=>{var r,i,o;function a(){Ba(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ba(),n(jr(e,"network-request-failed"))},timeout:Ua.get()})}if(null===(i=null===(r=ta().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ta().gapi)||void 0===o?void 0:o.load)){const t=Yi("iframefcb");return ta()[t]=()=>{gapi.load?a():n(jr(e,"network-request-failed"))},Ki(`${Gi.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw Va=null,e}))}let Va=null;const Wa=new Kr(5e3,15e3),za={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ha=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qa(e){const t=e.config;$r(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gr},i=Ha.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ht(r).slice(1)}`}async function Ga(e){const t=await function(e){return Va=Va||$a(e),Va}(e),n=ta().gapi;return $r(n,e,"internal-error"),t.open({where:document.body,url:qa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:za,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=jr(e,"network-request-failed"),o=ta().setTimeout((()=>{r(i)}),Wa.get());function a(){ta().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Ka={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ya{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(XA){}}}function Xa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Ka),{width:r.toString(),height:i.toString(),top:o,left:a}),c=kt().toLowerCase();n&&(s=Pi(c)?"_blank":n),Di(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Fi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Ya(null);const d=window.open(t||"",s,u);$r(d,e,"popup-blocked");try{d.focus()}catch(XA){}return new Ya(d)}const Qa="__/auth/handler",Ja="emulator/auth/handler",Za=encodeURIComponent("fac");async function es(e,t,n,r,i,o){$r(e.config.authDomain,e,"auth-domain-config-required"),$r(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gr,eventId:i};if(t instanceof wo){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",$t(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof xo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?`#${Za}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Qa}`;return Yr(t,Ja)}(e)}?${Ht(s).slice(1)}${c}`}const ts="webStorageSupport";const ns=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qo,this._completeRedirectFn=Da,this._overrideRedirectResult=Ca}async _openPopup(e,t,n,r){var i;Wr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Xa(e,await es(e,t,n,zr(),r),Zo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ta().location.href=e}(await es(e,t,n,zr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Wr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ga(e),n=new La(e);return t.register("authEvent",(t=>{$r(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ts,{type:ts},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ts];void 0!==i&&t(!!i),Nr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ja(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bi()||Li()||Fi()}};var rs="@firebase/auth",is="1.10.0";class os{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const as=St("authIdTokenMaxAge")||300;let ss=null;var ls;!function(e){Gi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=jr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ls="Browser",dr(new en("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;$r(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:ls,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$i(ls)},c=new zi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),dr(new en("auth-internal",(e=>(e=>new os(e))(Hi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),br(rs,is,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ls)),br(rs,is,"esm2017");var cs,us,ds="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},hs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(s,s);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new f(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=a(n)).j(t);d(c)||0<c.l(e);)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=p(e,c)}return new f(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),f=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=p*g,m(n,2*i+2*o),n[2*i+2*o+1]+=l*g,m(n,2*i+2*o+1),n[2*i+2*o+1]+=p*f,m(n,2*i+2*o+1),n[2*i+2*o+2]+=l*f,m(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,us=hs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},cs=hs.Integer=r}).apply("undefined"!==typeof ds?ds:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ps,ms,fs,gs,vs,ys,bs,ws,xs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Es={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xs&&xs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=f().indexOf("Gecko")&&!(-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge"))&&!(-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE"))&&-1==f().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function A(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(D)}};var D=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(nS){A(nS)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function L(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(nS){}return e}();function O(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(sS){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:N[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,P);var N={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}$.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function q(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[z]=l=new $(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(o=e.g[t],n,r,i))&&(B(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[z]=null)):B(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[z])instanceof $?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){L.call(this),this.i=new $(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;x(t=new P(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,L),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){L.call(this),this.h=e,this.g={}}d(le,L);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var we={},xe=null;function Ee(){return xe=xe||new ne}function Ae(e){P.call(this,we.La,e)}function Se(e){const t=Ee();re(t,new Ae(t))}function Te(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ee();re(t,new Te(t,e))}function ke(e,t){P.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Ae,P),we.STAT_EVENT="statevent",d(Te,P),we.Ma="timingevent",d(ke,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var De,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}d(Me,me),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},De=new Me;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ne,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=q(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(JA){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(JA){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(He(s),We(s)),r.g=a}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(JA){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=Ht(this.g);e="";var o=r.length,a=4==zt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),qe(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ve(this,s),e==Fe){4==h&&(this.s=4,_e(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,_e(15),Re(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ke(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(d),d.M=!0,_e(11))}}else Re(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Re(this.i,this.l,s,null),Ke(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),qe(this)}}}catch(are){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),_e(17)),Ge(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var ft=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){xt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function At(e,t){return xt(e),t=Tt(e,t),e.g.has(t)}function St(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(sS){}}function kt(){this.g=new pe}function Ct(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(XA){throw t.push(r+"type="+encodeURIComponent("_badmap")),XA}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Nt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)At(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,At(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(It,me),It.prototype.g=function(){return new Rt(this.l,this.j)},It.prototype.i=function(e){return function(){return e}}({}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Nt,ne);var jt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),Vt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!jt.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<zt(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Bt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(XA){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ss){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(aS){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||R(),C||(k(),C=!0),I.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Zt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ct(s,e,"req"+n+"_")}catch(are){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||R(),C||(k(),C=!0),I.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new ke(r,n)),Qt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),_t(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)})).catch((()=>{clearTimeout(r),_t(0,0,!1,t)}))}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Nt(new It({eb:n})):new Nt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function fn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Nt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?fe(this.o):fe(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(sS){return void Ut(this,sS)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(sS){Ut(this,sS)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Nt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(ZA){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ZA){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Mt(o)))+"&"+t:this.m&&Ot(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new fn(e,t)},d(fn,ne),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Kt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,fn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ws=Es.createWebChannelTransport=function(){return new mn},bs=Es.getStatEventTarget=function(){return Ee()},ys=Es.Event=we,vs=Es.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,gs=Es.ErrorCode=Le,Pe.COMPLETE="complete",fs=Es.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ms=Es.WebChannel=ge,Es.FetchXmlHttpFactory=It,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,ps=Es.XhrIo=Nt}).apply("undefined"!==typeof xs?xs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const As="@firebase/firestore",Ss="4.7.10";class Ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");let _s="11.5.0";const ks=new hn("@firebase/firestore");function Cs(){return ks.logLevel}function Is(e){if(ks.logLevel<=sn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.debug(`Firestore (${_s}): ${e}`,...i)}}function Rs(e){if(ks.logLevel<=sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.error(`Firestore (${_s}): ${e}`,...i)}}function Ds(e){if(ks.logLevel<=sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.warn(`Firestore (${_s}): ${e}`,...i)}}function Ls(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(QA){return e}}function Ps(){const e=`FIRESTORE (${_s}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Rs(e),new Error(e)}function Ms(e,t){e||Ps()}function Os(e,t){return e}const Ns={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class js extends Pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Us{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ts.UNAUTHENTICATED)))}shutdown(){}}class $s{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ms(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Is("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Is("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fs)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Is("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ms("string"==typeof t.accessToken),new Us(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ms(null===e||"string"==typeof e),new Ts(e)}}class Vs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ws{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Vs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ts.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hs{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,pr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ms(void 0===this.o);const n=e=>{null!=e.error&&Is("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Is("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Is("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Is("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new zs(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ms("string"==typeof e.token),this.R=e.token,new zs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Gs(){return new TextEncoder}class Ks{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=qs(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ys(e,t){return e<t?-1:e>t?1:0}function Xs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ys(r,i);{const o=Gs(),a=Js(o.encode(Qs(e,n)),o.encode(Qs(t,n)));return 0!==a?a:Ys(r,i)}}n+=r>65535?2:1}return Ys(e.length,t.length)}function Qs(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Js(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ys(e[n],t[n]);return Ys(e.length,t.length)}function Zs(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const el=-62135596800,tl=1e6;class nl{static now(){return nl.fromMillis(Date.now())}static fromDate(e){return nl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tl);return new nl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new js(Ns.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new js(Ns.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<el)throw new js(Ns.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new js(Ns.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tl}_compareTo(e){return this.seconds===e.seconds?Ys(this.nanoseconds,e.nanoseconds):Ys(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-el;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rl{static fromTimestamp(e){return new rl(e)}static min(){return new rl(new nl(0,0))}static max(){return new rl(new nl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const il="__name__";class ol{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ps(),void 0===n?n=e.length-t:n>e.length-t&&Ps(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ol.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ol?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ol.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ys(e.length,t.length)}static compareSegments(e,t){const n=ol.isNumericId(e),r=ol.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ol.extractNumericId(e).compare(ol.extractNumericId(t)):Xs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class al extends ol{construct(e,t,n){return new al(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new js(Ns.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new al(e)}static emptyPath(){return new al([])}}const sl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ll extends ol{construct(e,t,n){return new ll(e,t,n)}static isValidIdentifier(e){return sl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ll.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===il}static keyField(){return new ll([il])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new js(Ns.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new js(Ns.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new js(Ns.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new js(Ns.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ll(t)}static emptyPath(){return new ll([])}}class cl{constructor(e){this.path=e}static fromPath(e){return new cl(al.fromString(e))}static fromName(e){return new cl(al.fromString(e).popFirst(5))}static empty(){return new cl(al.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===al.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return al.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cl(new al(e.slice()))}}const ul=-1;class dl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}dl.UNKNOWN_ID=-1;function hl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rl.fromTimestamp(1e9===r?new nl(n+1,0):new nl(n,r));return new ml(i,cl.empty(),t)}function pl(e){return new ml(e.readTime,e.key,ul)}class ml{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ml(rl.min(),cl.empty(),ul)}static max(){return new ml(rl.max(),cl.empty(),ul)}}function fl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cl.comparator(e.documentKey,t.documentKey),0!==n?n:Ys(e.largestBatchId,t.largestBatchId))}const gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yl(e){if(e.code!==Ns.FAILED_PRECONDITION||e.message!==gl)throw e;Is("LocalStore","Unexpectedly lost primary lease")}class bl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ps(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof bl?t:bl.resolve(t)}catch(e){return bl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):bl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):bl.reject(t)}static resolve(e){return new bl(((t,n)=>{t(e)}))}static reject(e){return new bl(((t,n)=>{n(e)}))}static waitFor(e){return new bl(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=bl.resolve(!1);for(const n of e)t=t.next((e=>e?bl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new bl(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new bl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function wl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xl(e){return"IndexedDbTransactionError"===e.name}class El{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}El.ae=-1;const Al=-1;function Sl(e){return null==e}function Tl(e){return 0===e&&1/e==-1/0}function _l(e){return"number"==typeof e&&Number.isInteger(e)&&!Tl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const kl="\x01";function Cl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rl(t)),t=Il(e.get(n),t);return Rl(t)}function Il(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case kl:n+="\x01\x11";break;default:n+=t}}return n}function Rl(e){return e+kl+"\x01"}const Dl="remoteDocuments",Ll="owner",Pl="mutationQueues",Ml="mutations";const Ol="documentMutations",Nl="remoteDocumentsV14",jl="remoteDocumentGlobal",Fl="targets",Ul="targetDocuments",Bl="targetGlobal",$l="collectionParents",Vl="clientMetadata",Wl="bundles",zl="namedQueries",Hl="indexConfiguration",ql="indexState",Gl="indexEntries",Kl="documentOverlays",Yl="globals",Xl=[Pl,Ml,Ol,Dl,Fl,Ll,Bl,Ul,Vl,jl,$l,Wl,zl],Ql=[Pl,Ml,Ol,Nl,Fl,Ll,Bl,Ul,Vl,jl,$l,Wl,zl,Kl],Jl=Ql,Zl=[...Jl,Hl,ql,Gl];function ec(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rc{constructor(e,t){this.comparator=e,this.root=t||oc.EMPTY}insert(e,t){return new rc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oc.BLACK,null,null))}remove(e){return new rc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:oc.RED,this.left=null!=r?r:oc.EMPTY,this.right=null!=i?i:oc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new oc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return oc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return oc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ps();if(this.right.isRed())throw Ps();const e=this.left.check();if(e!==this.right.check())throw Ps();return e+(this.isRed()?0:1)}}oc.EMPTY=null,oc.RED=!0,oc.BLACK=!1,oc.EMPTY=new class{constructor(){this.size=0}get key(){throw Ps()}get value(){throw Ps()}get color(){throw Ps()}get left(){throw Ps()}get right(){throw Ps()}copy(e,t,n,r,i){return this}insert(e,t,n){return new oc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ac{constructor(e){this.comparator=e,this.data=new rc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sc(this.data.getIterator())}getIteratorFrom(e){return new sc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ac))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ac(this.comparator);return t.data=e,t}}class sc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lc{constructor(e){this.fields=e,e.sort(ll.comparator)}static empty(){return new lc([])}unionWith(e){let t=new ac(ll.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new lc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class cc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class uc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new cc("Invalid base64 string: "+e):e}}(e);return new uc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new uc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ys(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}uc.EMPTY_BYTE_STRING=new uc("");const dc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hc(e){if(Ms(!!e),"string"==typeof e){let t=0;const n=dc.exec(e);if(Ms(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pc(e.seconds),nanos:pc(e.nanos)}}function pc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mc(e){return"string"==typeof e?uc.fromBase64String(e):uc.fromUint8Array(e)}const fc="server_timestamp",gc="__type__",vc="__previous_value__",yc="__local_write_time__";function bc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[gc])||void 0===n?void 0:n.stringValue)===fc}function wc(e){const t=e.mapValue.fields[vc];return bc(t)?wc(t):t}function xc(e){const t=hc(e.mapValue.fields[yc].timestampValue);return new nl(t.seconds,t.nanos)}class Ec{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}const Ac="(default)";class Sc{constructor(e,t){this.projectId=e,this.database=t||Ac}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===Ac}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}const Tc="__type__",_c="__max__",kc={mapValue:{fields:{__type__:{stringValue:_c}}}},Cc="__vector__",Ic="value";function Rc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bc(e)?4:Gc(e)?9007199254740991:Hc(e)?10:11:Ps()}function Dc(e,t){if(e===t)return!0;const n=Rc(e);if(n!==Rc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xc(e).isEqual(xc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=hc(e.timestampValue),r=hc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mc(e.bytesValue).isEqual(mc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return pc(e.geoPointValue.latitude)===pc(t.geoPointValue.latitude)&&pc(e.geoPointValue.longitude)===pc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return pc(e.integerValue)===pc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=pc(e.doubleValue),r=pc(t.doubleValue);return n===r?Tl(n)===Tl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Zs(e.arrayValue.values||[],t.arrayValue.values||[],Dc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ec(n)!==ec(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dc(n[i],r[i])))return!1;return!0}(e,t);default:return Ps()}}function Lc(e,t){return void 0!==(e.values||[]).find((e=>Dc(e,t)))}function Pc(e,t){if(e===t)return 0;const n=Rc(e),r=Rc(t);if(n!==r)return Ys(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ys(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=pc(e.integerValue||e.doubleValue),r=pc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mc(e.timestampValue,t.timestampValue);case 4:return Mc(xc(e),xc(t));case 5:return Xs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=mc(e),r=mc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ys(n[i],r[i]);if(0!==e)return e}return Ys(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ys(pc(e.latitude),pc(t.latitude));return 0!==n?n:Ys(pc(e.longitude),pc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Oc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a[Ic])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Ic])||void 0===r?void 0:r.arrayValue,u=Ys((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Oc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===kc.mapValue&&t===kc.mapValue)return 0;if(e===kc.mapValue)return 1;if(t===kc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Xs(r[a],o[a]);if(0!==e)return e;const t=Pc(n[r[a]],i[o[a]]);if(0!==t)return t}return Ys(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ps()}}function Mc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ys(e,t);const n=hc(e),r=hc(t),i=Ys(n.seconds,r.seconds);return 0!==i?i:Ys(n.nanos,r.nanos)}function Oc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Pc(n[i],r[i]);if(e)return e}return Ys(n.length,r.length)}function Nc(e){return jc(e)}function jc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=hc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return mc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${jc(e.fields[i])}`;return n+"}"}(e.mapValue):Ps()}function Fc(e){switch(Rc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wc(e);return t?16+Fc(t):16;case 5:return 2*e.stringValue.length;case 6:return mc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Fc(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tc(e.fields,((e,n)=>{t+=e.length+Fc(n)})),t}(e.mapValue);default:throw Ps()}}function Uc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bc(e){return!!e&&"integerValue"in e}function $c(e){return!!e&&"arrayValue"in e}function Vc(e){return!!e&&"nullValue"in e}function Wc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zc(e){return!!e&&"mapValue"in e}function Hc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Tc])||void 0===n?void 0:n.stringValue)===Cc}function qc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=qc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===_c}class Kc{constructor(e){this.value=e}static empty(){return new Kc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(t)}setAll(e){let t=ll.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Kc(qc(this.value))}}function Yc(e){const t=[];return tc(e.fields,((e,n)=>{const r=new ll([e]);if(zc(n)){const e=Yc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new lc(t)}class Xc{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xc(e,0,rl.min(),rl.min(),rl.min(),Kc.empty(),0)}static newFoundDocument(e,t,n,r){return new Xc(e,1,t,rl.min(),n,r,0)}static newNoDocument(e,t){return new Xc(e,2,t,rl.min(),rl.min(),Kc.empty(),0)}static newUnknownDocument(e,t){return new Xc(e,3,t,rl.min(),rl.min(),Kc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qc{constructor(e,t){this.position=e,this.inclusive=t}}function Jc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?cl.comparator(cl.fromName(a.referenceValue),n.key):Pc(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Zc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dc(e.position[n],t.position[n]))return!1;return!0}class eu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nu{}class ru extends nu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new du(e,t,n):"array-contains"===t?new fu(e,n):"in"===t?new gu(e,n):"not-in"===t?new vu(e,n):"array-contains-any"===t?new yu(e,n):new ru(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new hu(e,n):new pu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Pc(t,this.value)):null!==t&&Rc(this.value)===Rc(t)&&this.matchesComparison(Pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ps()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class iu extends nu{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new iu(e,t)}matches(e){return ou(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ou(e){return"and"===e.op}function au(e){return su(e)&&ou(e)}function su(e){for(const t of e.filters)if(t instanceof iu)return!1;return!0}function lu(e){if(e instanceof ru)return e.field.canonicalString()+e.op.toString()+Nc(e.value);if(au(e))return e.filters.map((e=>lu(e))).join(",");{const t=e.filters.map((e=>lu(e))).join(",");return`${e.op}(${t})`}}function cu(e,t){return e instanceof ru?function(e,t){return t instanceof ru&&e.op===t.op&&e.field.isEqual(t.field)&&Dc(e.value,t.value)}(e,t):e instanceof iu?function(e,t){return t instanceof iu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&cu(n,t.filters[r])),!0)}(e,t):void Ps()}function uu(e){return e instanceof ru?function(e){return`${e.field.canonicalString()} ${e.op} ${Nc(e.value)}`}(e):e instanceof iu?function(e){return e.op.toString()+" {"+e.getFilters().map(uu).join(" ,")+"}"}(e):"Filter"}class du extends ru{constructor(e,t,n){super(e,t,n),this.key=cl.fromName(n.referenceValue)}matches(e){const t=cl.comparator(e.key,this.key);return this.matchesComparison(t)}}class hu extends ru{constructor(e,t){super(e,"in",t),this.keys=mu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pu extends ru{constructor(e,t){super(e,"not-in",t),this.keys=mu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cl.fromName(e.referenceValue)))}class fu extends ru{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $c(t)&&Lc(t.arrayValue,this.value)}}class gu extends ru{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lc(this.value.arrayValue,t)}}class vu extends ru{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lc(this.value.arrayValue,t)}}class yu extends ru{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$c(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lc(this.value.arrayValue,e)))}}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function wu(e){return new bu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xu(e){const t=Os(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>lu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Sl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Nc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Nc(e))).join(",")),t.le=e}return t.le}function Eu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zc(e.startAt,t.startAt)&&Zc(e.endAt,t.endAt)}function Au(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Su{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Tu(e,t,n,r,i,o,a,s){return new Su(e,t,n,r,i,o,a,s)}function _u(e){return new Su(e)}function ku(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cu(e){return null!==e.collectionGroup}function Iu(e){const t=Os(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ac(ll.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new eu(r,n))})),e.has(ll.keyField().canonicalString())||t.he.push(new eu(ll.keyField(),n))}return t.he}function Ru(e){const t=Os(e);return t.Pe||(t.Pe=Du(t,Iu(e))),t.Pe}function Du(e,t){if("F"===e.limitType)return wu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new eu(e.field,t)}));const n=e.endAt?new Qc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qc(e.startAt.position,e.startAt.inclusive):null;return wu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Lu(e,t){const n=e.filters.concat([t]);return new Su(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Pu(e,t,n){return new Su(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mu(e,t){return Eu(Ru(e),Ru(t))&&e.limitType===t.limitType}function Ou(e){return`${xu(Ru(e))}|lt:${e.limitType}`}function Nu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>uu(e))).join(", ")}]`),Sl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Nc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Nc(e))).join(",")),`Target(${t})`}(Ru(e))}; limitType=${e.limitType})`}function ju(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Iu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Jc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Iu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Jc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Iu(e),t))}(e,t)}function Fu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Uu(e){return(t,n)=>{let r=!1;for(const i of Iu(e)){const e=Bu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Bu(e,t,n){const r=e.field.isKeyField()?cl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pc(r,i):Ps()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ps()}}class $u{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return nc(this.inner)}size(){return this.innerSize}}const Vu=new rc(cl.comparator);function Wu(){return Vu}const zu=new rc(cl.comparator);function Hu(){let e=zu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function qu(e){let t=zu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Gu(){return Yu()}function Ku(){return Yu()}function Yu(){return new $u((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Xu=new rc(cl.comparator),Qu=new ac(cl.comparator);function Ju(){let e=Qu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Zu=new ac(Ys);function ed(){return Zu}function td(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(t)?"-0":t}}function nd(e){return{integerValue:""+e}}function rd(e,t){return _l(t)?nd(t):td(e,t)}class id{constructor(){this._=void 0}}function od(e,t,n){return e instanceof ld?function(e,t){const n={fields:{[gc]:{stringValue:fc},[yc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bc(t)&&(t=wc(t)),t&&(n.fields[vc]=t),{mapValue:n}}(n,t):e instanceof cd?ud(e,t):e instanceof dd?hd(e,t):function(e,t){const n=sd(e,t),r=md(n)+md(e.Ie);return Bc(n)&&Bc(e.Ie)?nd(r):td(e.serializer,r)}(e,t)}function ad(e,t,n){return e instanceof cd?ud(e,t):e instanceof dd?hd(e,t):n}function sd(e,t){return e instanceof pd?function(e){return Bc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ld extends id{}class cd extends id{constructor(e){super(),this.elements=e}}function ud(e,t){const n=fd(t);for(const r of e.elements)n.some((e=>Dc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dd extends id{constructor(e){super(),this.elements=e}}function hd(e,t){let n=fd(t);for(const r of e.elements)n=n.filter((e=>!Dc(e,r)));return{arrayValue:{values:n}}}class pd extends id{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function md(e){return pc(e.integerValue||e.doubleValue)}function fd(e){return $c(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gd{constructor(e,t){this.field=e,this.transform=t}}class vd{constructor(e,t){this.version=e,this.transformResults=t}}class yd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yd}static exists(e){return new yd(void 0,e)}static updateTime(e){return new yd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class wd{}function xd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dd(e.key,yd.none()):new _d(e.key,e.data,yd.none());{const n=e.data,r=Kc.empty();let i=new ac(ll.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new kd(e.key,r,new lc(i.toArray()),yd.none())}}function Ed(e,t,n){e instanceof _d?function(e,t,n){const r=e.value.clone(),i=Id(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kd?function(e,t,n){if(!bd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Id(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Cd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ad(e,t,n,r){return e instanceof _d?function(e,t,n,r){if(!bd(e.precondition,t))return n;const i=e.value.clone(),o=Rd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kd?function(e,t,n,r){if(!bd(e.precondition,t))return n;const i=Rd(e.fieldTransforms,r,t),o=t.data;return o.setAll(Cd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return bd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Sd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=sd(r.transform,e||null);null!=i&&(null===n&&(n=Kc.empty()),n.set(r.field,i))}return n||null}function Td(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cd&&t instanceof cd||e instanceof dd&&t instanceof dd?Zs(e.elements,t.elements,Dc):e instanceof pd&&t instanceof pd?Dc(e.Ie,t.Ie):e instanceof ld&&t instanceof ld}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _d extends wd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kd extends wd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Cd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Id(e,t,n){const r=new Map;Ms(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,ad(a,s,n[i]))}return r}function Rd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,od(e,o,t))}return r}class Dd extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ld extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ed(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ad(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ad(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ku();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=xd(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(rl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ju())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,((e,t)=>Td(e,t)))&&Zs(this.baseMutations,e.baseMutations,((e,t)=>Td(e,t)))}}class Md{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ms(e.mutations.length===n.length);let r=Xu;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Md(e,t,n,r)}}class Od{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nd{constructor(e,t){this.count=e,this.unchangedNames=t}}var jd,Fd;function Ud(e){switch(e){case Ns.OK:return Ps();case Ns.CANCELLED:case Ns.UNKNOWN:case Ns.DEADLINE_EXCEEDED:case Ns.RESOURCE_EXHAUSTED:case Ns.INTERNAL:case Ns.UNAVAILABLE:case Ns.UNAUTHENTICATED:return!1;case Ns.INVALID_ARGUMENT:case Ns.NOT_FOUND:case Ns.ALREADY_EXISTS:case Ns.PERMISSION_DENIED:case Ns.FAILED_PRECONDITION:case Ns.ABORTED:case Ns.OUT_OF_RANGE:case Ns.UNIMPLEMENTED:case Ns.DATA_LOSS:return!0;default:return Ps()}}function Bd(e){if(void 0===e)return Rs("GRPC error has no .code"),Ns.UNKNOWN;switch(e){case jd.OK:return Ns.OK;case jd.CANCELLED:return Ns.CANCELLED;case jd.UNKNOWN:return Ns.UNKNOWN;case jd.DEADLINE_EXCEEDED:return Ns.DEADLINE_EXCEEDED;case jd.RESOURCE_EXHAUSTED:return Ns.RESOURCE_EXHAUSTED;case jd.INTERNAL:return Ns.INTERNAL;case jd.UNAVAILABLE:return Ns.UNAVAILABLE;case jd.UNAUTHENTICATED:return Ns.UNAUTHENTICATED;case jd.INVALID_ARGUMENT:return Ns.INVALID_ARGUMENT;case jd.NOT_FOUND:return Ns.NOT_FOUND;case jd.ALREADY_EXISTS:return Ns.ALREADY_EXISTS;case jd.PERMISSION_DENIED:return Ns.PERMISSION_DENIED;case jd.FAILED_PRECONDITION:return Ns.FAILED_PRECONDITION;case jd.ABORTED:return Ns.ABORTED;case jd.OUT_OF_RANGE:return Ns.OUT_OF_RANGE;case jd.UNIMPLEMENTED:return Ns.UNIMPLEMENTED;case jd.DATA_LOSS:return Ns.DATA_LOSS;default:return Ps()}}(Fd=jd||(jd={}))[Fd.OK=0]="OK",Fd[Fd.CANCELLED=1]="CANCELLED",Fd[Fd.UNKNOWN=2]="UNKNOWN",Fd[Fd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fd[Fd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fd[Fd.NOT_FOUND=5]="NOT_FOUND",Fd[Fd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fd[Fd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fd[Fd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fd[Fd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fd[Fd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fd[Fd.ABORTED=10]="ABORTED",Fd[Fd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fd[Fd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fd[Fd.INTERNAL=13]="INTERNAL",Fd[Fd.UNAVAILABLE=14]="UNAVAILABLE",Fd[Fd.DATA_LOSS=15]="DATA_LOSS";let $d=null;const Vd=new cs([4294967295,4294967295],0);function Wd(e){const t=Gs().encode(e),n=new us;return n.update(t),new Uint8Array(n.digest())}function zd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new cs([n,r],0),new cs([i,o],0)]}class Hd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qd(`Invalid padding: ${t}`);if(n<0)throw new qd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new qd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new qd(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=cs.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(cs.fromNumber(n)));return 1===r.compare(Vd)&&(r=new cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Wd(e),[n,r]=zd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hd(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ee)return;const t=Wd(e),[n,r]=zd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gd(rl.min(),r,new rc(Ys),Wu(),Ju())}}class Kd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kd(n,t,Ju(),Ju(),Ju())}}class Yd{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Xd{constructor(e,t){this.targetId=e,this.ge=t}}class Qd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Jd{constructor(){this.pe=0,this.ye=th(),this.we=uc.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ju(),t=Ju(),n=Ju();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ps()}})),new Kd(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=th()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ms(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Zd{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Wu(),this.$e=eh(),this.Ue=eh(),this.Ke=new rc(Ys)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Ps()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(Au(i))if(0===n){const e=new cl(i.path);this.ze(t,e,Xc.newNoDocument(e,rl.min()))}else Ms(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==$d||$d.rt(function(e,t,n,r,i){var o,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=mc(n).toUint8Array()}catch(e){if(e instanceof cc)return Ds("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Hd(o,r,i)}catch(e){return Ds(e instanceof qd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ee?null:a}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Au(i.target)){const t=new cl(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Xc.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Ju();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Gd(e,t,this.Ke,this.Qe,n);return this.Qe=Wu(),this.$e=eh(),this.Ue=eh(),this.Ke=new rc(Ys),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Jd,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new ac(Ys),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ac(Ys),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Is("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Jd),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function eh(){return new rc(cl.comparator)}function th(){return new rc(cl.comparator)}const nh={asc:"ASCENDING",desc:"DESCENDING"},rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ih={and:"AND",or:"OR"};class oh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ah(e,t){return e.useProto3Json||Sl(t)?t:{value:t}}function sh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ch(e,t){return sh(e,t.toTimestamp())}function uh(e){return Ms(!!e),rl.fromTimestamp(function(e){const t=hc(e);return new nl(t.seconds,t.nanos)}(e))}function dh(e,t){return hh(e,t).canonicalString()}function hh(e,t){const n=function(e){return new al(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ph(e){const t=al.fromString(e);return Ms(Ph(t)),t}function mh(e,t){return dh(e.databaseId,t.path)}function fh(e,t){const n=ph(t);if(n.get(1)!==e.databaseId.projectId)throw new js(Ns.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new js(Ns.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cl(bh(n))}function gh(e,t){return dh(e.databaseId,t)}function vh(e){const t=ph(e);return 4===t.length?al.emptyPath():bh(t)}function yh(e){return new al(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bh(e){return Ms(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wh(e,t,n){return{name:mh(e,t),fields:n.value.mapValue.fields}}function xh(e,t){let n;if(t instanceof _d)n={update:wh(e,t.key,t.value)};else if(t instanceof Dd)n={delete:mh(e,t.key)};else if(t instanceof kd)n={update:wh(e,t.key,t.data),updateMask:Lh(t.fieldMask)};else{if(!(t instanceof Ld))return Ps();n={verify:mh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ld)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pd)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ps()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ch(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ps()}(e,t.precondition)),n}function Eh(e,t){return{documents:[gh(e,t.path)]}}function Ah(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gh(e,i);const o=function(e){if(0!==e.length)return Dh(iu.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ih(e.field),direction:_h(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=ah(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Sh(e){let t=vh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ms(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Th(e);return t instanceof iu&&au(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new eu(Rh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Sl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Qc(n,t)}(n.endAt)),Tu(t,i,a,o,s,"F",l,c)}function Th(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rh(e.unaryFilter.field);return ru.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Rh(e.unaryFilter.field);return ru.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rh(e.unaryFilter.field);return ru.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Rh(e.unaryFilter.field);return ru.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ps()}}(e):void 0!==e.fieldFilter?function(e){return ru.create(Rh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ps()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return iu.create(e.compositeFilter.filters.map((e=>Th(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ps()}}(e.compositeFilter.op))}(e):Ps()}function _h(e){return nh[e]}function kh(e){return rh[e]}function Ch(e){return ih[e]}function Ih(e){return{fieldPath:e.canonicalString()}}function Rh(e){return ll.fromServerFormat(e.fieldPath)}function Dh(e){return e instanceof ru?function(e){if("=="===e.op){if(Wc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NAN"}};if(Vc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NAN"}};if(Vc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(e.field),op:kh(e.op),value:e.value}}}(e):e instanceof iu?function(e){const t=e.getFilters().map((e=>Dh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ch(e.op),filters:t}}}(e):Ps()}function Lh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ph(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Mh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:uc.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oh{constructor(e){this.Tt=e}}function Nh(e){const t=Sh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Pu(t,t.limit,"L"):t}class jh{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pc(e.integerValue));else if("doubleValue"in e){const n=pc(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Tl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=hc(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(mc(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Gc(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Hc(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Ps()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const o=Ic,a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(pc(a)),this.wt(o,t),this.Rt(i[o],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),cl.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}jh.xt=new jh;class Fh{constructor(){this.Tn=new Uh}addToCollectionParentIndex(e,t){return this.Tn.add(t),bl.resolve()}getCollectionParents(e,t){return bl.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return bl.resolve()}deleteFieldIndex(e,t){return bl.resolve()}deleteAllFieldIndexes(e){return bl.resolve()}createTargetIndexes(e,t){return bl.resolve()}getDocumentsMatchingTarget(e,t){return bl.resolve(null)}getIndexType(e,t){return bl.resolve(0)}getFieldIndexes(e,t){return bl.resolve([])}getNextCollectionGroupToUpdate(e){return bl.resolve(null)}getMinOffset(e,t){return bl.resolve(ml.min())}getMinOffsetFromCollectionGroup(e,t){return bl.resolve(ml.min())}updateCollectionGroup(e,t,n){return bl.resolve()}updateIndexEntries(e,t){return bl.resolve()}}class Uh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ac(al.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ac(al.comparator)).toArray()}}new Uint8Array(0);const Bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$h=41943040;class Vh{static withCacheSize(e){return new Vh(e,Vh.DEFAULT_COLLECTION_PERCENTILE,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Vh.DEFAULT_COLLECTION_PERCENTILE=10,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vh.DEFAULT=new Vh($h,Vh.DEFAULT_COLLECTION_PERCENTILE,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vh.DISABLED=new Vh(-1,0,0);class Wh{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Wh(0)}static Kn(){return new Wh(-1)}}const zh="LruGarbageCollector",Hh=1048576;function qh(e,t){let[n,r]=e,[i,o]=t;const a=Ys(n,i);return 0===a?Ys(r,o):a}class Gh{constructor(e){this.Hn=e,this.buffer=new ac(qh),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();qh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Is(zh,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xl(e)?Is(zh,"Ignoring IndexedDB error during garbage collection: ",e):await yl(e)}await this.er(3e5)}))}}class Yh{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return bl.resolve(El.ae);const n=new Gh(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Is("LruGarbageCollector","Garbage collection skipped; disabled"),bl.resolve(Bh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Is("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bh):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,o,a,s,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Is("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Cs()<=sn.DEBUG&&Is("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(s-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-c}ms`),bl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Xh(e,t){return new Yh(e,t)}class Qh{constructor(){this.changes=new $u((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Jh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Zh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ad(n.mutation,e,lc.empty(),nl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ju()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ju();const r=Gu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Hu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Gu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ju())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Wu();const o=Yu(),a=Yu();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof kd)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Ad(a.mutation,t,a.mutation.getFieldMask(),nl.now())):o.set(t.key,lc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Jh(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Yu();let r=new rc(((e,t)=>e-t)),i=Ju();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||lc.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||Ju()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=Ku();l.forEach((e=>{if(!i.has(e)){const r=xd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return bl.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bl.resolve(Gu());let a=ul,s=i;return o.next((t=>bl.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?bl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Ju()))).next((e=>({batchId:a,changes:qu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cl(t)).next((e=>{let t=Hu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Hu();return this.indexManager.getCollectionParents(e,i).next((a=>bl.forEach(a,(a=>{const s=function(e,t){return new Su(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xc.newInvalidDocument(r)))}));let n=Hu();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Ad(o.mutation,r,lc.empty(),nl.now()),ju(t,r)&&(n=n.insert(e,r))})),n}))}}class ep{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return bl.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:uh(e.createTime)}}(t)),bl.resolve()}getNamedQuery(e,t){return bl.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Nh(e.bundledQuery),readTime:uh(e.readTime)}}(t)),bl.resolve()}}class tp{constructor(){this.overlays=new rc(cl.comparator),this.Rr=new Map}getOverlay(e,t){return bl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gu();return bl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),bl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),bl.resolve()}getOverlaysForCollection(e,t,n){const r=Gu(),i=t.length+1,o=new cl(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new rc(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Gu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Gu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return bl.resolve(a)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Od(t,n));let i=this.Rr.get(t);void 0===i&&(i=Ju(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class np{constructor(){this.sessionToken=uc.EMPTY_BYTE_STRING}getSessionToken(e){return bl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,bl.resolve()}}class rp{constructor(){this.Vr=new ac(ip.mr),this.gr=new ac(ip.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new ip(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new ip(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new cl(new al([])),n=new ip(t,e),r=new ip(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new cl(new al([])),n=new ip(t,e),r=new ip(t,e+1);let i=Ju();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ip(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ip{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return cl.comparator(e.key,t.key)||Ys(e.Cr,t.Cr)}static pr(e,t){return Ys(e.Cr,t.Cr)||cl.comparator(e.key,t.key)}}class op{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new ac(ip.mr)}checkEmpty(e){return bl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Pd(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ip(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return bl.resolve(o)}lookupMutationBatch(e,t){return bl.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return bl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bl.resolve(0===this.mutationQueue.length?Al:this.Fr-1)}getAllMutationBatches(e){return bl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ip(t,0),r=new ip(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),bl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ac(Ys);return t.forEach((e=>{const t=new ip(e,0),r=new ip(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),bl.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cl.isDocumentKey(i)||(i=i.child(""));const o=new ip(new cl(i),0);let a=new ac(Ys);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Cr)),!0)}),o),bl.resolve(this.Br(a))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ms(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return bl.forEach(t.mutations,(r=>{const i=new ip(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new ip(t,0),r=this.Mr.firstAfterOrEqual(n);return bl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bl.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ap{constructor(e){this.kr=e,this.docs=new rc(cl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bl.resolve(n?n.document.mutableCopy():Xc.newInvalidDocument(t))}getEntries(e,t){let n=Wu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xc.newInvalidDocument(e))})),bl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Wu();const o=t.path,a=new cl(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||fl(pl(a),n)<=0||(r.has(a.key)||ju(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return bl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ps()}qr(e,t){return bl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new sp(this)}getSize(e){return bl.resolve(this.size)}}class sp extends Qh{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),bl.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class lp{constructor(e){this.persistence=e,this.Qr=new $u((e=>xu(e)),Eu),this.lastRemoteSnapshotVersion=rl.min(),this.highestTargetId=0,this.$r=0,this.Ur=new rp,this.targetCount=0,this.Kr=Wh.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),bl.resolve()}getLastRemoteSnapshotVersion(e){return bl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bl.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),bl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),bl.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Wh(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,bl.resolve()}updateTargetData(e,t){return this.zn(t),bl.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,bl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),bl.waitFor(i).next((()=>r))}getTargetCount(e){return bl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return bl.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),bl.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),bl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),bl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return bl.resolve(n)}containsKey(e,t){return bl.resolve(this.Ur.containsKey(t))}}class cp{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new El(0),this.zr=!1,this.zr=!0,this.jr=new np,this.referenceDelegate=e(this),this.Hr=new lp(this),this.indexManager=new Fh,this.remoteDocumentCache=function(e){return new ap(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Oh(t),this.Yr=new ep(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new op(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Is("MemoryPersistence","Starting transaction:",e);const r=new up(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return bl.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class up extends vl{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.ti=new rp,this.ni=null}static ri(e){return new dp(e)}get ii(){if(this.ni)return this.ni;throw Ps()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),bl.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),bl.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),bl.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bl.forEach(this.ii,(n=>{const r=cl.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,rl.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return bl.or([()=>bl.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class hp{constructor(e,t){this.persistence=e,this.oi=new $u((e=>Cl(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Xh(this,t)}static ri(e,t){return new hp(e,t)}Zr(){}Xr(e){return bl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return bl.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?bl.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,rl.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),bl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),bl.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),bl.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),bl.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fc(e.data.value)),t}ar(e,t,n){return bl.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return bl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class pp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Ju(),r=Ju();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pp(e,t.fromCache,n,r)}}class mp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fp{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Dt()?8:wl(kt())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new mp;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(Cs()<=sn.DEBUG&&Is("QueryEngine","SDK will not create cache indexes for query:",Nu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),bl.resolve()):(Cs()<=sn.DEBUG&&Is("QueryEngine","Query:",Nu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Cs()<=sn.DEBUG&&Is("QueryEngine","The SDK decides to create cache indexes for query:",Nu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ru(t))):bl.resolve())}rs(e,t){if(ku(t))return bl.resolve(null);let n=Ru(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Pu(t,null,"F"),n=Ru(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ju(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.cs(t,r);return this.ls(t,o,i,n.readTime)?this.rs(e,Pu(t,null,"F")):this.hs(e,o,t,n)}))))})))))}ss(e,t,n,r){return ku(t)||r.isEqual(rl.min())?bl.resolve(null):this.ns.getDocuments(e,n).next((i=>{const o=this.cs(t,i);return this.ls(t,o,n,r)?bl.resolve(null):(Cs()<=sn.DEBUG&&Is("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nu(t)),this.hs(e,o,t,hl(r,ul)).next((e=>e)))}))}cs(e,t){let n=new ac(Uu(e));return t.forEach(((t,r)=>{ju(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return Cs()<=sn.DEBUG&&Is("QueryEngine","Using full collection scan to execute query:",Nu(t)),this.ns.getDocumentsMatchingQuery(e,t,ml.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const gp="LocalStore";class vp{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new rc(Ys),this.Is=new $u((e=>xu(e)),Eu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zh(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function yp(e,t,n,r){return new vp(e,t,n,r)}async function bp(e,t){const n=Os(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=Ju();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function wp(e){const t=Os(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function xp(e,t,n){let r=Ju(),i=Ju();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Wu();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(rl.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Is(gp,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Vs:r,fs:i}}))}function Ep(e,t){const n=Os(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Al),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ap(e,t){const n=Os(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,bl.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Mh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Sp(e,t,n){const r=Os(e),i=r.Ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!xl(e))throw e;Is(gp,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Tp(e,t,n){const r=Os(e);let i=rl.min(),o=Ju();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Os(e),i=r.Is.get(n);return void 0!==i?bl.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Ru(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:rl.min(),n?o:Ju()))).next((e=>(_p(r,Fu(t),e),{documents:e,gs:o})))))}function _p(e,t,n){let r=e.Es.get(t)||rl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class kp{constructor(){this.activeTargetIds=ed()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cp{constructor(){this.ho=new kp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new kp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ip{To(e){}shutdown(){}}const Rp="ConnectivityMonitor";class Dp{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Is(Rp,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Is(Rp,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Lp=null;function Pp(){return null===Lp?Lp=268435456+Math.round(2147483648*Math.random()):Lp++,"0x"+Lp.toString(16)}const Mp="RestConnection",Op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Np{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Ac?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const o=Pp(),a=this.bo(e,t.toUriEncodedString());Is(Mp,`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(s,r,i),this.vo(e,a,s,n).then((t=>(Is(Mp,`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw Ds(Mp,`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}Co(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_s,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Op[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class jp{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Fp="WebChannelConnection";class Up extends Np{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Pp();return new Promise(((o,a)=>{const s=new ps;s.setWithCredentials(!0),s.listenOnce(fs.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case gs.NO_ERROR:const t=s.getResponseJson();Is(Fp,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case gs.TIMEOUT:Is(Fp,`RPC '${e}' ${i} timed out`),a(new js(Ns.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:const n=s.getStatus();if(Is(Fp,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ns).indexOf(t)>=0?t:Ns.UNKNOWN}(t.status);a(new js(e,t.message))}else a(new js(Ns.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new js(Ns.UNAVAILABLE,"Connection failed."));break;default:Ps()}}finally{Is(Fp,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Is(Fp,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Pp(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ws(),a=bs(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");Is(Fp,`Creating RPC '${e}' stream ${r}: ${c}`,s);const u=o.createWebChannel(c,s);let d=!1,h=!1;const p=new jp({Fo:t=>{h?Is(Fp,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Is(Fp,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Is(Fp,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,ms.EventType.OPEN,(()=>{h||(Is(Fp,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),m(u,ms.EventType.CLOSE,(()=>{h||(h=!0,Is(Fp,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),m(u,ms.EventType.ERROR,(t=>{h||(h=!0,Ds(Fp,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new js(Ns.UNAVAILABLE,"The operation could not be completed")))})),m(u,ms.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Ms(!!i);const o=i,a=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Is(Fp,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=jd[e];if(void 0!==t)return Bd(t)}(t),i=a.message;void 0===n&&(n=Ns.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.Uo(new js(n,i)),u.close()}else Is(Fp,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),m(a,ys.STAT_EVENT,(t=>{t.stat===vs.PROXY?Is(Fp,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===vs.NOPROXY&&Is(Fp,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Bp(){return"undefined"!=typeof document?document:null}function $p(e){return new oh(e,!0)}class Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Is("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Wp="PersistentStream";class zp{constructor(e,t,n,r,i,o,a,s){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Vp(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===Ns.RESOURCE_EXHAUSTED?(Rs(t.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ns.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new js(Ns.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Is(Wp,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Is(Wp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hp extends zp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ps()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ms(void 0===t||"string"==typeof t),uc.fromBase64String(t||"")):(Ms(void 0===t||t instanceof Buffer||t instanceof Uint8Array),uc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Ns.UNKNOWN:Bd(e.code);return new js(t,e.message||"")}(a);n=new Qd(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fh(e,r.document.name),o=uh(r.document.updateTime),a=r.document.createTime?uh(r.document.createTime):rl.min(),s=new Kc({mapValue:{fields:r.document.fields}}),l=Xc.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fh(e,r.document),o=r.readTime?uh(r.readTime):rl.min(),a=Xc.newNoDocument(i,o),s=r.removedTargetIds||[];n=new Yd([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fh(e,r.document),o=r.removedTargetIds||[];n=new Yd([],o,i,null)}else{if(!("filter"in t))return Ps();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Nd(r,i),a=e.targetId;n=new Xd(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rl.min():t.readTime?uh(t.readTime):rl.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=yh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Au(r)?{documents:Eh(e,r)}:{query:Ah(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lh(e,t.resumeToken);const r=ah(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rl.min())>0){n.readTime=sh(e,t.snapshotVersion.toTimestamp());const r=ah(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ps()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=yh(this.serializer),t.removeTarget=e,this.I_(t)}}class qp extends zp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ms(!!e.streamToken),this.lastStreamToken=e.streamToken,Ms(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Ms(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Ms(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?uh(e.updateTime):uh(t);return n.isEqual(rl.min())&&(n=uh(t)),new vd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=uh(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=yh(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>xh(this.serializer,e)))};this.I_(t)}}class Gp{}class Kp extends Gp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new js(Ns.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection.So(e,hh(t,n),r,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ns.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new js(Ns.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[a,s]=o;return this.connection.Co(e,hh(t,n),r,a,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ns.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new js(Ns.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rs(t),this.N_=!1):Is("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Xp="RemoteStore";class Qp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{am(this)&&(Is(Xp,"Restarting streams for network reachability change."),await async function(e){const t=Os(e);t.W_.add(4),await Zp(t),t.j_.set("Unknown"),t.W_.delete(4),await Jp(t)}(this))}))})),this.j_=new Yp(n,r)}}async function Jp(e){if(am(e))for(const t of e.G_)await t(!0)}async function Zp(e){for(const t of e.G_)await t(!1)}function em(e,t){const n=Os(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),om(n)?im(n):Tm(n).c_()&&nm(n,t))}function tm(e,t){const n=Os(e),r=Tm(n);n.K_.delete(t),r.c_()&&rm(n,t),0===n.K_.size&&(r.c_()?r.P_():am(n)&&n.j_.set("Unknown"))}function nm(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tm(e).y_(t)}function rm(e,t){e.H_.Ne(t),Tm(e).w_(t)}function im(e){e.H_=new Zd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Tm(e).start(),e.j_.B_()}function om(e){return am(e)&&!Tm(e).u_()&&e.K_.size>0}function am(e){return 0===Os(e).W_.size}function sm(e){e.H_=void 0}async function lm(e){e.j_.set("Online")}async function cm(e){e.K_.forEach(((t,n)=>{nm(e,t)}))}async function um(e,t){sm(e),om(e)?(e.j_.q_(t),im(e)):e.j_.set("Unknown")}async function dm(e,t,n){if(e.j_.set("Online"),t instanceof Qd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){Is(Xp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hm(e,n)}else if(t instanceof Yd?e.H_.We(t):t instanceof Xd?e.H_.Ze(t):e.H_.je(t),!n.isEqual(rl.min()))try{const t=await wp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(uc.EMPTY_BYTE_STRING,r.snapshotVersion)),rm(e,t);const i=new Mh(r.target,t,n,r.sequenceNumber);nm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Is(Xp,"Failed to raise snapshot:",t),await hm(e,t)}}async function hm(e,t,n){if(!xl(t))throw t;e.W_.add(1),await Zp(e),e.j_.set("Offline"),n||(n=()=>wp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Is(Xp,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Jp(e)}))}function pm(e,t){return t().catch((n=>hm(e,n,t)))}async function mm(e){const t=Os(e),n=_m(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Al;for(;fm(t);)try{const e=await Ep(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,gm(t,e)}catch(e){await hm(t,e)}vm(t)&&ym(t)}function fm(e){return am(e)&&e.U_.length<10}function gm(e,t){e.U_.push(t);const n=_m(e);n.c_()&&n.S_&&n.b_(t.mutations)}function vm(e){return am(e)&&!_m(e).u_()&&e.U_.length>0}function ym(e){_m(e).start()}async function bm(e){_m(e).C_()}async function wm(e){const t=_m(e);for(const n of e.U_)t.b_(n.mutations)}async function xm(e,t,n){const r=e.U_.shift(),i=Md.from(r,t,n);await pm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await mm(e)}async function Em(e,t){t&&_m(e).S_&&await async function(e,t){if(function(e){return Ud(e)&&e!==Ns.ABORTED}(t.code)){const n=e.U_.shift();_m(e).h_(),await pm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await mm(e)}}(e,t),vm(e)&&ym(e)}async function Am(e,t){const n=Os(e);n.asyncQueue.verifyOperationInProgress(),Is(Xp,"RemoteStore received new credentials");const r=am(n);n.W_.add(3),await Zp(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Jp(n)}async function Sm(e,t){const n=Os(e);t?(n.W_.delete(2),await Jp(n)):t||(n.W_.add(2),await Zp(n),n.j_.set("Unknown"))}function Tm(e){return e.J_||(e.J_=function(e,t,n){const r=Os(e);return r.M_(),new Hp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:lm.bind(null,e),No:cm.bind(null,e),Lo:um.bind(null,e),p_:dm.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),om(e)?im(e):e.j_.set("Unknown")):(await e.J_.stop(),sm(e))}))),e.J_}function _m(e){return e.Y_||(e.Y_=function(e,t,n){const r=Os(e);return r.M_(),new qp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:bm.bind(null,e),Lo:Em.bind(null,e),D_:wm.bind(null,e),v_:xm.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await mm(e)):(await e.Y_.stop(),e.U_.length>0&&(Is(Xp,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class km{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new km(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new js(Ns.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(e,t){if(Rs("AsyncQueue",`${t}: ${e}`),xl(e))return new js(Ns.UNAVAILABLE,`${t}: ${e}`);throw e}class Im{static emptySet(e){return new Im(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||cl.comparator(t.key,n.key):(e,t)=>cl.comparator(e.key,t.key),this.keyedMap=Hu(),this.sortedSet=new rc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Im))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Im;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Rm{constructor(){this.Z_=new rc(cl.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ps():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Dm{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Dm(e,t,Im.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Lm{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Pm{constructor(){this.queries=Mm(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=Os(e),r=n.queries;n.queries=Mm(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new js(Ns.ABORTED,"Firestore shutting down"))}}function Mm(){return new $u((e=>Ou(e)),Mu)}async function Om(e,t){const n=Os(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.na()&&t.ra()&&(r=2):(o=new Lm,r=t.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(i,!0);break;case 1:o.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Cm(e,`Initialization of query '${Nu(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.ta.push(t),t.sa(n.onlineState),o.ea&&t.oa(o.ea)&&Um(n)}async function Nm(e,t){const n=Os(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.ta.indexOf(t);e>=0&&(o.ta.splice(e,1),0===o.ta.length?i=t.ra()?0:1:!o.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jm(e,t){const n=Os(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&Um(n)}function Fm(e,t,n){const r=Os(e),i=r.queries.get(t);if(i)for(const o of i.ta)o.onError(n);r.queries.delete(t)}function Um(e){e.ia.forEach((e=>{e.next()}))}var Bm,$m;($m=Bm||(Bm={}))._a="default",$m.Cache="cache";class Vm{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Dm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Bm.Cache}}class Wm{constructor(e){this.key=e}}class zm{constructor(e){this.key=e}}class Hm{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ju(),this.mutatedKeys=Ju(),this.ya=Uu(e),this.wa=new Im(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Rm,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ju(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.va(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.ya(u,s)>0||l&&this.ya(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:o,Da:n,ls:a,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ps()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const a=t&&!r?this.Fa():[],s=0===this.pa.size&&this.current&&!r?1:0,l=s!==this.ga;return this.ga=s,0!==o.length||l?{snapshot:new Dm(this.query,e.wa,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Rm,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ju(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new zm(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new Wm(n))})),t}Oa(e){this.fa=e.gs,this.pa=Ju();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Dm.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const qm="SyncEngine";class Gm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Km{constructor(e){this.key=e,this.Ba=!1}}class Ym{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new $u((e=>Ou(e)),Mu),this.qa=new Map,this.Qa=new Set,this.$a=new rc(cl.comparator),this.Ua=new Map,this.Ka=new rp,this.Wa={},this.Ga=new Map,this.za=Wh.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Xm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=yf(e);let i;const o=r.ka.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await Jm(r,t,n,!0),i}async function Qm(e,t){const n=yf(e);await Jm(n,t,!0,!1)}async function Jm(e,t,n,r){const i=await Ap(e.localStore,Ru(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Zm(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&em(e.remoteStore,i),s}async function Zm(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Tp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return hf(e,t.targetId,s.Ma),s.snapshot}(e,t,n,r);const o=await Tp(e.localStore,t,!0),a=new Hm(t,o.gs),s=a.ba(o.documents),l=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);hf(e,n,c.Ma);const u=new Gm(t,n,a);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function ef(e,t,n){const r=Os(e),i=r.ka.get(t),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter((e=>!Mu(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tm(r.remoteStore,i.targetId),uf(r,i.targetId)})).catch(yl)):(uf(r,i.targetId),await Sp(r.localStore,i.targetId,!0))}async function tf(e,t){const n=Os(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tm(n.remoteStore,r.targetId))}async function nf(e,t){const n=Os(e);try{const e=await function(e,t){const n=Os(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Hr.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Hr.addMatchingKeys(e,o.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(uc.EMPTY_BYTE_STRING,rl.min()).withLastLimboFreeSnapshotVersion(rl.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&a.push(n.Hr.updateTargetData(e,c))}));let s=Wu(),l=Ju();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(xp(e,o,t.documentUpdates).next((e=>{s=e.Vs,l=e.fs}))),!r.isEqual(rl.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return bl.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(Ms(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?Ms(r.Ba):e.removedDocuments.size>0&&(Ms(r.Ba),r.Ba=!1))})),await ff(n,e,t)}catch(e){await yl(e)}}function rf(e,t,n){const r=Os(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Os(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Um(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function of(e,t,n){const r=Os(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),o=i&&i.key;if(o){let e=new rc(cl.comparator);e=e.insert(o,Xc.newNoDocument(o,rl.min()));const n=Ju().add(o),i=new Gd(rl.min(),new Map,new rc(Ys),e,n);await nf(r,i),r.$a=r.$a.remove(o),r.Ua.delete(t),mf(r)}else await Sp(r.localStore,t,!1).then((()=>uf(r,t,n))).catch(yl)}async function af(e,t){const n=Os(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Os(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=bl.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Ms(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ju();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);cf(n,r,null),lf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ff(n,e)}catch(e){await yl(e)}}async function sf(e,t,n){const r=Os(e);try{const e=await function(e,t){const n=Os(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ms(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);cf(r,t,n),lf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ff(r,e)}catch(n){await yl(n)}}function lf(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function cf(e,t,n){const r=Os(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||df(e,t)}))}function df(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(tm(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),mf(e))}function hf(e,t,n){for(const r of n)r instanceof Wm?(e.Ka.addReference(r.key,t),pf(e,r)):r instanceof zm?(Is(qm,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||df(e,r.key)):Ps()}function pf(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Is(qm,"New document in limbo: "+n),e.Qa.add(r),mf(e))}function mf(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new cl(al.fromString(t)),r=e.za.next();e.Ua.set(r,new Km(n)),e.$a=e.$a.insert(n,r),em(e.remoteStore,new Mh(Ru(_u(n.path)),r,"TargetPurposeLimboResolution",El.ae))}}async function ff(e,t,n){const r=Os(e),i=[],o=[],a=[];r.ka.isEmpty()||(r.ka.forEach(((e,s)=>{a.push(r.Ha(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=pp.Yi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.La.p_(i),await async function(e,t){const n=Os(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>bl.forEach(t,(t=>bl.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>bl.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xl(e))throw e;Is(gp,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,o))}async function gf(e,t){const n=Os(e);if(!n.currentUser.isEqual(t)){Is(qm,"User change. New user:",t.toKey());const e=await bp(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new js(Ns.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ff(n,e.Rs)}}function vf(e,t){const n=Os(e),r=n.Ua.get(t);if(r&&r.Ba)return Ju().add(r.key);{let e=Ju();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function yf(e){const t=Os(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=of.bind(null,t),t.La.p_=jm.bind(null,t.eventManager),t.La.Ja=Fm.bind(null,t.eventManager),t}function bf(e){const t=Os(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=af.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sf.bind(null,t),t}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return yp(this.persistence,new fp,e.initialUser,this.serializer)}Xa(e){return new cp(dp.ri,this.serializer)}Za(e){return new Cp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class xf extends wf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ms(this.persistence.referenceDelegate instanceof hp);const n=this.persistence.referenceDelegate.garbageCollector;return new Kh(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Vh.withCacheSize(this.cacheSizeBytes):Vh.DEFAULT;return new cp((e=>hp.ri(e,t)),this.serializer)}}class Ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>rf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gf.bind(null,this.syncEngine),await Sm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pm}createDatastore(e){const t=$p(e.databaseInfo.databaseId),n=function(e){return new Up(e)}(e.databaseInfo);return function(e,t,n,r){return new Kp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>rf(this.syncEngine,e,0)),Dp.D()?new Dp:new Ip)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Ym(e,t,n,r,i,o);return a&&(s.ja=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Os(e);Is(Xp,"RemoteStore shutting down."),t.W_.add(5),await Zp(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ef.provider={build:()=>new Ef};class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Sf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new js(Ns.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Os(e),r={documents:t.map((e=>mh(n.serializer,e)))},i=await n.Co("BatchGetDocuments",n.serializer.databaseId,al.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ms(!!t.found),t.found.name,t.found.updateTime;const n=fh(e,t.found.name),r=uh(t.found.updateTime),i=t.found.createTime?uh(t.found.createTime):rl.min(),o=new Kc({mapValue:{fields:t.found.fields}});return Xc.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Ms(!!t.missing),Ms(!!t.readTime);const n=fh(e,t.missing),r=uh(t.readTime);return Xc.newNoDocument(n,r)}(e,t):Ps()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ms(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cl.fromPath(t);this.mutations.push(new Ld(n,this.precondition(n)))})),await async function(e,t){const n=Os(e),r={writes:t.map((e=>xh(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,al.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ps();t=rl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new js(Ns.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rl.min())?yd.exists(!1):yd.updateTime(t):yd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rl.min()))throw new js(Ns.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yd.updateTime(t)}return yd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Tf{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new Vp(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new Sf(this.datastore),t=this.du(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Au(e)}))))})).catch((e=>{this.Au(e)}))}))}du(e){try{const t=this.updateFunction(e);return!Sl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ud(t)}return!1}}const _f="FirestoreClient";class kf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ts.UNAUTHENTICATED,this.clientId=Ks.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Is(_f,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Is(_f,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(QA){const n=Cm(QA,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Cf(e,t){e.asyncQueue.verifyOperationInProgress(),Is(_f,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function If(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rf(e);Is(_f,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Am(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Am(t.remoteStore,n))),e._onlineComponents=t}async function Rf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Is(_f,"Using user provided OfflineComponentProvider");try{await Cf(e,e._uninitializedComponentsProvider._offline)}catch(QA){const n=QA;if(!function(e){return"FirebaseError"===e.name?e.code===Ns.FAILED_PRECONDITION||e.code===Ns.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Cf(e,new wf)}}else Is(_f,"Using default OfflineComponentProvider"),await Cf(e,new xf(void 0));return e._offlineComponents}async function Df(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Is(_f,"Using user provided OnlineComponentProvider"),await If(e,e._uninitializedComponentsProvider._online)):(Is(_f,"Using default OnlineComponentProvider"),await If(e,new Ef))),e._onlineComponents}function Lf(e){return Df(e).then((e=>e.syncEngine))}function Pf(e){return Df(e).then((e=>e.datastore))}async function Mf(e){const t=await Df(e),n=t.eventManager;return n.onListen=Xm.bind(null,t.syncEngine),n.onUnlisten=ef.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Qm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tf.bind(null,t.syncEngine),n}function Of(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Af({next:s=>{o.su(),t.enqueueAndForget((()=>Nm(e,a)));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new js(Ns.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new js(Ns.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Vm(_u(n.path),o,{includeMetadataChanges:!0,Ta:!0});return Om(e,a)}(await Mf(e),e.asyncQueue,t,n,r))),r.promise}function Nf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Af({next:n=>{o.su(),t.enqueueAndForget((()=>Nm(e,a))),n.fromCache&&"server"===r.source?i.reject(new js(Ns.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Vm(n,o,{includeMetadataChanges:!0,Ta:!0});return Om(e,a)}(await Mf(e),e.asyncQueue,t,n,r))),r.promise}function jf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ff=new Map;function Uf(e,t,n){if(!n)throw new js(Ns.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bf(e){if(!cl.isDocumentKey(e))throw new js(Ns.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $f(e){if(cl.isDocumentKey(e))throw new js(Ns.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ps()}function Wf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new js(Ns.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vf(e);throw new js(Ns.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function zf(e,t){if(t<=0)throw new js(Ns.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Hf="firestore.googleapis.com",qf=!0;class Gf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new js(Ns.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hf,this.ssl=qf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:qf;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$h;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Hh)throw new js(Ns.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new js(Ns.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new js(Ns.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new js(Ns.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new js(Ns.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new js(Ns.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new js(Ns.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bs;switch(e.type){case"firstParty":return new Ws(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new js(Ns.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ff.get(e);t&&(Is("ComponentProvider","Removing Datastore"),Ff.delete(e),t.terminate())}(this),Promise.resolve()}}class Yf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yf(this.firestore,e,this._query)}}class Xf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xf(this.firestore,e,this._key)}}class Qf extends Yf{constructor(e,t,n){super(e,t,_u(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xf(this.firestore,null,new cl(e))}withConverter(e){return new Qf(this.firestore,e,this._path)}}function Jf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),Uf("collection","path",t),e instanceof Kf){const n=al.fromString(t,...r);return $f(n),new Qf(e,null,n)}{if(!(e instanceof Xf||e instanceof Qf))throw new js(Ns.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return $f(n),new Qf(e.firestore,null,n)}}function Zf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),1===arguments.length&&(t=Ks.newId()),Uf("doc","path",t),e instanceof Kf){const n=al.fromString(t,...r);return Bf(n),new Xf(e,null,new cl(n))}{if(!(e instanceof Xf||e instanceof Qf))throw new js(Ns.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return Bf(n),new Xf(e.firestore,e instanceof Qf?e.converter:null,new cl(n))}}const eg="AsyncQueue";class tg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Vp(this,"async_queue_retry"),this.Su=()=>{const e=Bp();e&&Is(eg,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Bp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Bp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Fs;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(XA){if(!xl(XA))throw XA;Is(eg,"Operation failed with retryable error: "+XA)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rs("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=km.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Ps()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ng(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rg extends Kf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new tg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tg(e),this._firestoreClient=void 0,await e}}}function ig(e){if(e._terminated)throw new js(Ns.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||og(e),e._firestoreClient}function og(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Ec(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new kf(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ag{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ag(uc.fromBase64String(e))}catch(e){throw new js(Ns.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ag(uc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new js(Ns.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ll(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lg{constructor(e){this._methodName=e}}class cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new js(Ns.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new js(Ns.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ys(this._lat,e._lat)||Ys(this._long,e._long)}}class ug{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const dg=/^__.*__$/;class hg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new _d(e,this.data,t,this.fieldTransforms)}}class pg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ps()}}class fg{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Og(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(mg(this.Lu)&&dg.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$p(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fg({Lu:e,methodName:t,zu:n,path:ll.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vg(e){const t=e._freezeSettings(),n=$p(e._databaseId);return new gg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yg(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ju(o.merge||o.mergeFields?2:0,t,n,i);Dg("Data must be an object, but it was:",a,r);const s=Ig(r,a);let l,c;if(o.merge)l=new lc(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Lg(t,r,n);if(!a.contains(i))throw new js(Ns.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ng(e,i)||e.push(i)}l=new lc(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new hg(new Kc(s),l,c)}class bg extends lg{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function wg(e,t,n){return new fg({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class xg extends lg{_toFieldTransform(e){return new gd(e.path,new ld)}isEqual(e){return e instanceof xg}}class Eg extends lg{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=wg(this,e,!0),n=this.Hu.map((e=>Cg(e,t))),r=new cd(n);return new gd(e.path,r)}isEqual(e){return e instanceof Eg&&Wt(this.Hu,e.Hu)}}class Ag extends lg{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=wg(this,e,!0),n=this.Hu.map((e=>Cg(e,t))),r=new dd(n);return new gd(e.path,r)}isEqual(e){return e instanceof Ag&&Wt(this.Hu,e.Hu)}}class Sg extends lg{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new pd(e.serializer,rd(e.serializer,this.Ju));return new gd(e.path,t)}isEqual(e){return e instanceof Sg&&this.Ju===e.Ju}}function Tg(e,t,n,r){const i=e.ju(1,t,n);Dg("Data must be an object, but it was:",i,r);const o=[],a=Kc.empty();tc(r,((e,r)=>{const s=Mg(t,e,n);r=Zt(r);const l=i.Uu(s);if(r instanceof bg)o.push(s);else{const e=Cg(r,l);null!=e&&(o.push(s),a.set(s,e))}}));const s=new lc(o);return new pg(a,s,i.fieldTransforms)}function _g(e,t,n,r,i,o){const a=e.ju(1,t,n),s=[Lg(t,r,n)],l=[i];if(o.length%2!=0)throw new js(Ns.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)s.push(Lg(t,o[h])),l.push(o[h+1]);const c=[],u=Kc.empty();for(let h=s.length-1;h>=0;--h)if(!Ng(c,s[h])){const e=s[h];let t=l[h];t=Zt(t);const n=a.Uu(e);if(t instanceof bg)c.push(e);else{const r=Cg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new lc(c);return new pg(u,d,a.fieldTransforms)}function kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cg(n,e.ju(r?4:3,t))}function Cg(e,t){if(Rg(e=Zt(e)))return Dg("Unsupported field value:",t,e),Ig(e,t);if(e instanceof lg)return function(e,t){if(!mg(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cg(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nl.fromDate(e);return{timestampValue:sh(t.serializer,n)}}if(e instanceof nl){const n=new nl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sh(t.serializer,n)}}if(e instanceof cg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ag)return{bytesValue:lh(t.serializer,e._byteString)};if(e instanceof Xf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:dh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ug)return function(e,t){return{mapValue:{fields:{[Tc]:{stringValue:Cc},[Ic]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return td(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Vf(e)}`)}(e,t)}function Ig(e,t){const n={};return nc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tc(e,((e,r)=>{const i=Cg(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nl||e instanceof cg||e instanceof ag||e instanceof Xf||e instanceof lg||e instanceof ug)}function Dg(e,t,n){if(!Rg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Vf(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Lg(e,t,n){if((t=Zt(t))instanceof sg)return t._internalPath;if("string"==typeof t)return Mg(e,t);throw Og("Field path arguments must be of type string or ",e,!1,void 0,n)}const Pg=new RegExp("[~\\*/\\[\\]]");function Mg(e,t,n){if(t.search(Pg)>=0)throw Og(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sg(...t.split("."))._internalPath}catch(r){throw Og(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Og(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new js(Ns.INVALID_ARGUMENT,s+e+l)}function Ng(e,t){return e.some((e=>e.isEqual(t)))}class jg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fg extends jg{data(){return super.data()}}function Ug(e,t){return"string"==typeof t?Mg(e,t):t instanceof sg?t._internalPath:t._delegate._internalPath}function Bg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new js(Ns.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class Vg extends $g{}function Wg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof $g&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof qg)).length,n=e.filter((e=>e instanceof zg)).length;if(t>1||t>0&&n>0)throw new js(Ns.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class zg extends Vg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zg(e,t,n)}_apply(e){const t=this._parse(e);return Zg(e._query,t),new Yf(e.firestore,e.converter,Lu(e._query,t))}_parse(e){const t=vg(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new js(Ns.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){Jg(a,o);const t=[];for(const n of a)t.push(Qg(r,e,n));s={arrayValue:{values:t}}}else s=Qg(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jg(a,o),s=kg(n,t,a,"in"===o||"not-in"===o);return ru.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Hg(e,t,n){const r=t,i=Ug("where",e);return zg._create(i,r,n)}class qg extends $g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:iu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Zg(n,i),n=Lu(n,i)}(e._query,t),new Yf(e.firestore,e.converter,Lu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Gg extends Vg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new js(Ns.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new js(Ns.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(t,n)}(e._query,this._field,this._direction);return new Yf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Su(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Kg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ug("orderBy",e);return Gg._create(n,t)}class Yg extends Vg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Yg(e,t,n)}_apply(e){return new Yf(e.firestore,e.converter,Pu(e._query,this._limit,this._limitType))}}function Xg(e){return zf("limit",e),Yg._create("limit",e,"F")}function Qg(e,t,n){if("string"==typeof(n=Zt(n))){if(""===n)throw new js(Ns.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cu(t)&&-1!==n.indexOf("/"))throw new js(Ns.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(al.fromString(n));if(!cl.isDocumentKey(r))throw new js(Ns.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uc(e,new cl(r))}if(n instanceof Xf)return Uc(e,n._key);throw new js(Ns.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vf(n)}.`)}function Jg(e,t){if(!Array.isArray(e)||0===e.length)throw new js(Ns.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Zg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new js(Ns.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new js(Ns.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ev{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ps()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return tc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ic].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>pc(e.doubleValue)));return new ug(i)}convertGeoPoint(e){return new cg(pc(e.latitude),pc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const t=hc(e);return new nl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=al.fromString(e);Ms(Ph(n));const r=new Sc(n.get(1),n.get(3)),i=new cl(n.popFirst(5));return r.isEqual(t)||Rs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function tv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xf(this.firestore,null,t)}}class rv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iv extends jg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ov(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ov extends iv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class av{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ov(this._firestore,this._userDataWriter,n.key,n,new rv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new js(Ns.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new ov(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ov(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:sv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ps()}}function lv(e){e=Wf(e,Xf);const t=Wf(e.firestore,rg);return Of(ig(t),e._key).then((n=>vv(t,e,n)))}class cv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xf(this.firestore,null,t)}}function uv(e){e=Wf(e,Yf);const t=Wf(e.firestore,rg),n=ig(t),r=new cv(t);return Bg(e._query),Nf(n,e._query).then((n=>new av(t,r,e,n)))}function dv(e,t,n){e=Wf(e,Xf);const r=Wf(e.firestore,rg),i=tv(e.converter,t,n);return gv(r,[yg(vg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,yd.none())])}function hv(e,t,n){e=Wf(e,Xf);const r=Wf(e.firestore,rg),i=vg(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=Zt(t))||t instanceof sg?_g(i,"updateDoc",e._key,t,n,s):Tg(i,"updateDoc",e._key,t),gv(r,[o.toMutation(e._key,yd.exists(!0))])}function pv(e){return gv(Wf(e.firestore,rg),[new Dd(e._key,yd.none())])}function mv(e,t){const n=Wf(e.firestore,rg),r=Zf(e),i=tv(e.converter,t);return gv(n,[yg(vg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,yd.exists(!1))]).then((()=>r))}function fv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=Zt(e);let s={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ng(n[l])||(s=n[l],l++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ng(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Xf)d=Wf(e.firestore,rg),h=_u(e._key.path),u={next:t=>{n[l]&&n[l](vv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Wf(e,Yf);d=Wf(t.firestore,rg),h=t._query;const r=new cv(d);u={next:e=>{n[l]&&n[l](new av(d,r,t,e))},error:n[l+1],complete:n[l+2]},Bg(e._query)}return function(e,t,n,r){const i=new Af(r),o=new Vm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Om(await Mf(e),o))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>Nm(await Mf(e),o)))}}(ig(d),h,c,u)}function gv(e,t){return function(e,t){const n=new Fs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=bf(e);try{const e=await function(e,t){const n=Os(e),r=nl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ju());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=Wu(),l=Ju();return n.ds.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=Sd(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new kd(e.key,t,Yc(t.value.mapValue),yd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:qu(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new rc(Ys)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await ff(r,e.changes),await mm(r.remoteStore)}catch(e){const t=Cm(e,"Failed to persist write");n.reject(t)}}(await Lf(e),t,n))),n.promise}(ig(e),t)}function vv(e,t,n){const r=n.docs.get(t._key),i=new cv(e);return new iv(e,i,t._key,r,new rv(n.hasPendingWrites,n.fromCache),t.converter)}const yv={maxAttempts:5};class bv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vg(e)}set(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore),i=tv(r.converter,t,n),o=yg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,yd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=Zt(t))||t instanceof sg?_g(this._dataReader,"WriteBatch.update",r._key,t,n,a):Tg(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,yd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wv(e,this._firestore);return this._mutations=this._mutations.concat(new Dd(t._key,yd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new js(Ns.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wv(e,t){if((e=Zt(e)).firestore!==t)throw new js(Ns.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class xv{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vg(e)}get(e){const t=wv(e,this._firestore),n=new nv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ps();const r=e[0];if(r.isFoundDocument())return new jg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new jg(this._firestore,n,t._key,null,t.converter);throw Ps()}))}set(e,t,n){const r=wv(e,this._firestore),i=tv(r.converter,t,n),o=yg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=wv(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=Zt(t))||t instanceof sg?_g(this._dataReader,"Transaction.update",r._key,t,n,a):Tg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=wv(e,this._firestore);return this._transaction.delete(t._key),this}}class Ev extends xv{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wv(e,this._firestore),n=new cv(this._firestore);return super.get(e).then((e=>new iv(this._firestore,n,t._key,e._document,new rv(!1,!1),t.converter)))}}function Av(e,t,n){e=Wf(e,rg);const r=Object.assign(Object.assign({},yv),n);return function(e){if(e.maxAttempts<1)throw new js(Ns.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Pf(e);new Tf(e.asyncQueue,i,n,t,r).Iu()})),r.promise}(ig(e),(n=>t(new Ev(e,n))),r)}function Sv(){return new xg("serverTimestamp")}function Tv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Eg("arrayUnion",t)}function _v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ag("arrayRemove",t)}function kv(e){return new Sg("increment",e)}function Cv(e){return ig(e=Wf(e,rg)),new bv(e,(t=>gv(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_s=e}(gr),dr(new en("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new rg(new $s(e.getProvider("auth-internal")),new Hs(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new js(Ns.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),br(As,Ss,e),br(As,Ss,"esm2017")}();const Iv="firebasestorage.googleapis.com",Rv="storageBucket";class Dv extends Pt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Mv(e),`Firebase Storage: ${t} (${Mv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lv,Pv;function Mv(e){return"storage/"+e}function Ov(){return new Dv(Lv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Nv(){return new Dv(Lv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jv(){return new Dv(Lv.CANCELED,"User canceled the upload/download.")}function Fv(){return new Dv(Lv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uv(e){return new Dv(Lv.INVALID_ARGUMENT,e)}function Bv(){return new Dv(Lv.APP_DELETED,"The Firebase app was deleted.")}function $v(e,t){return new Dv(Lv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vv(e){throw new Dv(Lv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Lv||(Lv={}));class Wv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Wv.makeFromUrl(e,t)}catch(XA){return new Wv(e,"")}if(""===n.path)return n;throw r=e,new Dv(Lv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===Iv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Wv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Dv(Lv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class zv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Hv(e){return"string"===typeof e||e instanceof String}function qv(e){return Gv()&&e instanceof Blob}function Gv(){return"undefined"!==typeof Blob}function Kv(e,t,n,r){if(r<t)throw Uv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Uv(`Invalid value for '${e}'. Expected ${n} or less.`)}function Yv(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Xv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Qv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Pv||(Pv={}));class Jv{constructor(e,t,n,r,i,o,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Zv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Pv.NO_ERROR,i=n.getStatus();if(!t||Qv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Pv.ABORT;return void e(!1,new Zv(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Zv(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(XA){r(XA)}else if(null!==i){const e=Ov();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Bv():jv())}else{r(Nv())}};this.canceled_?t(0,new Zv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){o&&clearTimeout(o)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let m=!1;function f(e){m||(m=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout((()=>{a=!0,f(!0)}),n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Zv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ey(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ty(){const e=ey();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Gv())return new Blob(n);throw new Dv(Lv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ny(e){if("undefined"===typeof atob)throw t="base-64",new Dv(Lv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const ry="raw",iy="base64",oy="base64url",ay="data_url";class sy{constructor(e,t){this.data=e,this.contentType=t||null}}function ly(e,t){switch(e){case ry:return new sy(cy(t));case iy:case oy:return new sy(uy(e,t));case ay:return new sy(function(e){const t=new dy(e);return t.base64?uy(iy,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(XA){throw $v(ay,"Malformed data URL.")}return cy(t)}(t.rest)}(t),new dy(t).contentType)}throw Ov()}function cy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function uy(e,t){switch(e){case iy:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw $v(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case oy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw $v(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ny(t)}catch(XA){if(XA.message.includes("polyfill"))throw XA;throw $v(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class dy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $v(ay,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class hy{constructor(e,t){let n=0,r="";qv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(qv(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new hy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new hy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Gv()){const e=t.map((e=>e instanceof hy?e.data_:e));return new hy(ty.apply(null,e))}{const e=t.map((e=>Hv(e)?ly(ry,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new hy(r,!0)}}uploadData(){return this.data_}}function py(e){let t;try{t=JSON.parse(e)}catch(XA){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function my(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function fy(e,t){return t}class gy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||fy}}let vy=null;function yy(){if(vy)return vy;const e=[];e.push(new gy("bucket")),e.push(new gy("generation")),e.push(new gy("metageneration")),e.push(new gy("name","fullPath",!0));const t=new gy("name");t.xform=function(e,t){return function(e){return!Hv(e)||e.length<2?e:my(e)}(t)},e.push(t);const n=new gy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new gy("timeCreated")),e.push(new gy("updated")),e.push(new gy("md5Hash",null,!0)),e.push(new gy("cacheControl",null,!0)),e.push(new gy("contentDisposition",null,!0)),e.push(new gy("contentEncoding",null,!0)),e.push(new gy("contentLanguage",null,!0)),e.push(new gy("contentType",null,!0)),e.push(new gy("metadata","customMetadata",!0)),vy=e,vy}function by(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Wv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function wy(e,t,n){const r=py(t);if(null===r)return null;return by(e,r,n)}function xy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Ey{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ay(e){if(!e)throw Ov()}function Sy(e,t){return function(n,r){const i=wy(e,r,t);return Ay(null!==i),i}}function Ty(e,t){return function(n,r){const i=wy(e,r,t);return Ay(null!==i),function(e,t,n,r){const i=py(t);if(null===i)return null;if(!Hv(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return Yv("/b/"+a(i)+"/o/"+a(o),n,r)+Xv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function _y(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Dv(Lv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Dv(Lv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Dv(Lv.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Dv(Lv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ky(e){const t=_y(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Dv(Lv.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Cy(e,t,n){const r=Yv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ey(r,"GET",Sy(e,n),i);return o.errorHandler=ky(t),o}function Iy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ry(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=Iy(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xy(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=hy.getBlob(c,r,u);if(null===d)throw Fv();const h={name:l.fullPath},p=Yv(o,e.host,e._protocol),m=e.maxUploadRetryTime,f=new Ey(p,"POST",Sy(e,n),m);return f.urlParams=h,f.headers=a,f.body=d.uploadData(),f.errorHandler=_y(t),f}class Dy{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Ly(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(XA){Ay(!1)}return Ay(!!n&&-1!==(t||["active"]).indexOf(n)),n}const Py=262144;function My(e,t,n,r,i,o,a,s){const l=new Dy(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Dv(Lv.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const m={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},f=r.slice(d,h);if(null===f)throw Fv();const g=t.maxUploadRetryTime,v=new Ey(n,"POST",(function(e,n){const i=Ly(e,["active","final"]),a=l.current+u,s=r.size();let c;return c="final"===i?Sy(t,o)(e,n):null,new Dy(a,s,"final"===i,c)}),g);return v.headers=m,v.body=f.uploadData(),v.progressCallback=s||null,v.errorHandler=_y(e),v}const Oy="running",Ny="paused",jy="success",Fy="canceled",Uy="error";function By(e){switch(e){case"running":case"pausing":case"canceling":return Oy;case"paused":return Ny;case"success":return jy;case"canceled":return Fy;default:return Uy}}class $y{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function Vy(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class Wy{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pv.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Pv.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Pv.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Vv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(XA){return-1}}getResponse(){if(!this.sent_)throw Vv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class zy extends Wy{initXhr(){this.xhr_.responseType="text"}}function Hy(){return new zy}class qy{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=yy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Lv.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Qv(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Nv()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Lv.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a=Iy(t,r,i),s={name:a.fullPath},l=Yv(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=xy(a,n),d=e.maxUploadRetryTime,h=new Ey(l,"POST",(function(e){let t;Ly(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(XA){Ay(!1)}return Ay(Hv(t)),t}),d);return h.urlParams=s,h.headers=c,h.body=u,h.errorHandler=_y(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new Ey(n,"POST",(function(e){const t=Ly(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(XA){Ay(!1)}n||Ay(!1);const i=Number(n);return Ay(!isNaN(i)),new Dy(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=_y(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Hy,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Py*this._chunkMultiplier,t=new Dy(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=My(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(XA){return this._error=XA,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Hy,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Py*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Cy(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Ry(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=jv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=By(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new $y(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(By(this._state)){case jy:Vy(this._resolve.bind(null,this.snapshot))();break;case Fy:case Uy:Vy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(By(this._state)){case Oy:case Ny:e.next&&Vy(e.next.bind(e,this.snapshot))();break;case jy:e.complete&&Vy(e.complete.bind(e))();break;default:e.error&&Vy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gy{constructor(e,t){this._service=e,this._location=t instanceof Wv?t:Wv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gy(e,t)}get root(){const e=new Wv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return my(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Wv(this._location.bucket,e);return new Gy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Dv(Lv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ky(e,t,n){e._throwIfRoot("uploadBytes");const r=Ry(e.storage,e._location,yy(),new hy(t,!0),n);return e.storage.makeRequestWithTokens(r,Hy).then((t=>({metadata:t,ref:e})))}function Yy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Yv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ey(r,"GET",Ty(e,n),i);return o.errorHandler=ky(t),o}(e.storage,e._location,yy());return e.storage.makeRequestWithTokens(t,Hy).then((e=>{if(null===e)throw new Dv(Lv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Xy(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Yv(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Ey(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ky(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Hy)}function Qy(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wv(e._location.bucket,n);return new Gy(e.storage,r)}function Jy(e,t){if(e instanceof tb){const n=e;if(null==n._bucket)throw new Dv(Lv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rv+"' property when initializing the app?");const r=new Gy(n,n._bucket);return null!=t?Jy(r,t):r}return void 0!==t?Qy(e,t):e}function Zy(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof tb)return new Gy(e,t);throw Uv("To use ref(service, url), the first argument must be a Storage instance.")}return Jy(e,t)}function eb(e,t){const n=null===t||void 0===t?void 0:t[Rv];return null==n?null:Wv.makeFromBucketSpec(n,e)}class tb{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Iv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Wv.makeFromBucketSpec(r,this._host):eb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Wv.makeFromBucketSpec(this._url,e):this._bucket=eb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new zv(Bv());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=Xv(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Jv(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const nb="@firebase/storage",rb="0.13.7",ib="storage";function ob(e,t,n){return Ky(e=Zt(e),t,n)}function ab(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new qy(e,new hy(t),n)}(e=Zt(e),t,n)}function sb(e){return Yy(e=Zt(e))}function lb(e){return Xy(e=Zt(e))}function cb(e,t){return Zy(e=Zt(e),t)}function ub(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr(),t=arguments.length>1?arguments[1]:void 0;e=Zt(e);const n=hr(e,ib).getImmediate({identifier:t}),r=Et("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:_t(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function db(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new tb(r,i,o,n,gr)}dr(new en(ib,db,"PUBLIC").setMultipleInstances(!0)),br(nb,rb,""),br(nb,rb,"esm2017");const hb="@firebase/database",pb="1.0.14";let mb="";function fb(e){mb=e}class gb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Nt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ut(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const yb=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new gb(t)}}catch(XA){}return new vb},bb=yb("localStorage"),wb=yb("sessionStorage"),xb=new hn("@firebase/database"),Eb=function(){let e=1;return function(){return e++}}(),Ab=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Kt;n.update(t);const r=n.digest();return ht.encodeByteArray(r)},Sb=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Sb.apply(null,n):e+="object"===typeof n?jt(n):n,e+=" "}return e};let Tb=null,_b=!0;const kb=function(e,t){ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(xb.logLevel=sn.VERBOSE,Tb=xb.log.bind(xb),t&&wb.set("logging_enabled",!0)):"function"===typeof e?Tb=e:(Tb=null,wb.remove("logging_enabled"))},Cb=function(){if(!0===_b&&(_b=!1,null===Tb&&!0===wb.get("logging_enabled")&&kb(!0)),Tb){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Sb.apply(null,t);Tb(r)}},Ib=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Cb(e,...n)}},Rb=function(){const e="FIREBASE INTERNAL ERROR: "+Sb(...arguments);xb.error(e)},Db=function(){const e=`FIREBASE FATAL ERROR: ${Sb(...arguments)}`;throw xb.error(e),new Error(e)},Lb=function(){const e="FIREBASE WARNING: "+Sb(...arguments);xb.warn(e)},Pb=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Mb="[MIN_NAME]",Ob="[MAX_NAME]",Nb=function(e,t){if(e===t)return 0;if(e===Mb||t===Ob)return-1;if(t===Mb||e===Ob)return 1;{const n=zb(e),r=zb(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},jb=function(e,t){return e===t?0:e<t?-1:1},Fb=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+jt(t))},Ub=function(e){if("object"!==typeof e||null===e)return jt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=jt(t[r]),n+=":",n+=Ub(e[t[r]]);return n+="}",n},Bb=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function $b(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Vb=function(e){ct(!Pb(e),"Invalid JSON number");const t=1023;let n,r,i,o,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Wb=new RegExp("^-?(0*)\\d{1,10}$"),zb=function(e){if(Wb.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Hb=function(e){try{e()}catch(XA){setTimeout((()=>{const t=XA.stack||"";throw Lb("Exception was thrown by user callback.",t),XA}),Math.floor(0))}},qb=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Gb{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,pr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Lb(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Kb{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Cb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lb(e)}}class Yb{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yb.OWNER="owner";const Xb="5",Qb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jb="ac",Zb="websocket",ew="long_polling";class tw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bb.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bb.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function nw(e,t,n){let r;if(ct("string"===typeof t,"typeof type must == string"),ct("object"===typeof n,"typeof params must == object"),t===Zb)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ew)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return $b(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class rw{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return vt(this.counters_)}}const iw={},ow={};function aw(e){const t=e.toString();return iw[t]||(iw[t]=new rw),iw[t]}class sw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Hb((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const lw="start";class cw{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ib(e),this.stats_=aw(t),this.urlFn=e=>(this.appCheckToken&&(e[Jb]=this.appCheckToken),nw(t,ew,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Rt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new uw((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,a,s,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===lw)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[lw]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xb,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Jb]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Qb.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cw.forceAllow_=!0}static forceDisallow(){cw.forceDisallow_=!0}static isAvailable(){return!Rt()&&(!!cw.forceAllow_||!cw.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=mt(t),r=Bb(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Rt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uw{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Rt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Eb(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=uw.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(XA){Cb("frame writing exception"),XA.stack&&Cb(XA.stack),Cb(XA)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cb("No IE domain setting required")}catch(XA){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Rt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Cb("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(XA){}}),Math.floor(1))}}let dw=null;"undefined"!==typeof MozWebSocket?dw=MozWebSocket:"undefined"!==typeof WebSocket&&(dw=WebSocket);class hw{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ib(this.connId),this.stats_=aw(t),this.connURL=hw.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=Xb,!Rt()&&"undefined"!==typeof location&&location.hostname&&Qb.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[Jb]=r),i&&(o.p=i),nw(e,Zb,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bb.set("previous_websocket_failure",!0);try{let e;if(Rt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Xb}/${mb}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new dw(this.connURL,[],e)}catch(XA){this.log_("Error instantiating WebSocket.");const t=XA.message||XA.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){hw.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dw&&!hw.forceDisallow_}static previouslyFailed(){return bb.isInMemoryStorage||!0===bb.get("previous_websocket_failure")}markConnectionHealthy(){bb.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Nt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ct(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Bb(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(XA){this.log_("Exception thrown from WebSocket.send():",XA.message||XA.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hw.responsesRequiredToBeHealthy=2,hw.healthyTimeout=3e4;class pw{static get ALL_TRANSPORTS(){return[cw,hw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=hw&&hw.isAvailable();let n=t&&!hw.previouslyFailed();if(e.webSocketOnly&&(t||Lb("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[hw];else{const e=this.transports_=[];for(const t of pw.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);pw.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pw.globalTransportInitialized_=!1;class mw{constructor(e,t,n,r,i,o,a,s,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ib("c:"+this.id+":"),this.transportManager_=new pw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=qb((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Fb("t",e),n=Fb("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Fb("t",e),n=Fb("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Fb("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Rb("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rb("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xb!==n&&Lb("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),qb((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qb((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bb.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fw{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class gw{constructor(e){this.allowedEvents_=e,this.listeners_={},ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){ct(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class vw extends gw{static getInstance(){return new vw}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ct()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return ct("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class yw{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bw(){return new yw("")}function ww(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function xw(e){return e.pieces_.length-e.pieceNum_}function Ew(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new yw(e.pieces_,t)}function Aw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Sw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Tw(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new yw(t,0)}function _w(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof yw)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new yw(n,0)}function kw(e){return e.pieceNum_>=e.pieces_.length}function Cw(e,t){const n=ww(e),r=ww(t);if(null===n)return t;if(n===r)return Cw(Ew(e),Ew(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Iw(e,t){if(xw(e)!==xw(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Rw(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(xw(e)>xw(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Dw{constructor(e,t){this.errorPrefix_=t,this.parts_=Sw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Jt(this.parts_[n]);Lw(this)}}function Lw(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pw(e))}function Pw(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Mw extends gw{static getInstance(){return new Mw}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ow=1e3;class Nw extends fw{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=Nw.nextPersistentConnectionId_++,this.log_=Ib("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ow,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s&&!Rt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mw.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&vw.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(jt(i)),ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Tt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ct(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;Nw.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ut(e,"w")){const n=Bt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Lb(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ft(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ft(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+jt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Rb("Unrecognized action received from server: "+jt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ow,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ow,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ow),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Nw.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const s=function(){a?a.close():(o=!0,n())},l=function(e){ct(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:s,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Cb("getToken() completed but was canceled"):(Cb("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,a=new mw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Lb(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Rb){this.log_("Failed to get token: "+Rb),o||(this.repoInfo_.nodeAdmin&&Lb(Rb),s())}}}interrupt(e){Cb("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cb("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$t(this.interruptReasons_)&&(this.reconnectDelay_=Ow,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ub(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new yw(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Cb("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Cb("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Rt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+mb.replace(/\./g,"-")]=1,Ct()?e["framework.cordova"]=1:It()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vw.getInstance().currentlyOnline();return $t(this.interruptReasons_)&&e}}Nw.nextPersistentConnectionId_=0,Nw.nextConnectionId_=0;class jw{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new jw(e,t)}}class Fw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new jw(Mb,e),r=new jw(Mb,t);return 0!==this.compare(n,r)}minPost(){return jw.MIN}}let Uw;class Bw extends Fw{static get __EMPTY_NODE(){return Uw}static set __EMPTY_NODE(e){Uw=e}compare(e,t){return Nb(e.name,t.name)}isDefinedOn(e){throw ut("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return jw.MIN}maxPost(){return new jw(Ob,Uw)}makePost(e,t){return ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new jw(e,Uw)}toString(){return".key"}}const $w=new Bw;class Vw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ww{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ww.RED,this.left=null!=r?r:zw.EMPTY_NODE,this.right=null!=i?i:zw.EMPTY_NODE}copy(e,t,n,r,i){return new Ww(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return zw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return zw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ww.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ww.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ww.RED=!0,Ww.BLACK=!1;class zw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new zw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ww.BLACK,null,null))}remove(e){return new zw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ww.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vw(this.root_,null,this.comparator_,!0,e)}}function Hw(e,t){return Nb(e.name,t.name)}function qw(e,t){return Nb(e,t)}let Gw;zw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ww(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Kw=function(e){return"number"===typeof e?"number:"+Vb(e):"string:"+e},Yw=function(e){if(e.isLeafNode()){const t=e.val();ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ut(t,".sv"),"Priority must be a string or number.")}else ct(e===Gw||e.isEmpty(),"priority of unexpected type.");ct(e===Gw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xw,Qw,Jw;class Zw{static set __childrenNodeConstructor(e){Xw=e}static get __childrenNodeConstructor(){return Xw}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zw.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Zw(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Zw.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return kw(e)?this:".priority"===ww(e)?this.priorityNode_:Zw.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Zw.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ww(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(ct(".priority"!==n||1===xw(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Zw.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ew(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Kw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Vb(this.value_):this.value_,this.lazyHash_=Ab(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Zw.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zw.__childrenNodeConstructor?-1:(ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Zw.VALUE_TYPE_ORDER.indexOf(t),i=Zw.VALUE_TYPE_ORDER.indexOf(n);return ct(r>=0,"Unknown leaf type: "+t),ct(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Zw.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ex=new class extends Fw{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Nb(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return jw.MIN}maxPost(){return new jw(Ob,new Zw("[PRIORITY-POST]",Jw))}makePost(e,t){const n=Qw(e);return new jw(t,new Zw("[PRIORITY-POST]",n))}toString(){return".priority"}},tx=Math.log(2);class nx{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/tx,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rx=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new Ww(s,a.node,Ww.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],s=n?n(a):a,new Ww(s,a.node,Ww.BLACK,c,u)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const c=i(o+1,s),u=e[o],d=n?n(u):u;l(new Ww(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,Ww.BLACK):(s(r,Ww.BLACK),s(r,Ww.RED))}return o}(new nx(e.length));return new zw(r||t,o)};let ix;const ox={};class ax{static get Default(){return ct(ox&&ex,"ChildrenNode.ts has not been loaded"),ix=ix||new ax({".priority":ox},{".priority":ex}),ix}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Bt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zw?t:null}hasIndex(e){return Ut(this.indexSet_,e.toString())}addIndex(e,t){ct(e!==$w,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(jw.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?rx(n,e.getCompare()):ox;const s=e.toString(),l=Object.assign({},this.indexSet_);l[s]=e;const c=Object.assign({},this.indexes_);return c[s]=o,new ax(c,l)}addToIndexes(e,t){const n=Vt(this.indexes_,((n,r)=>{const i=Bt(this.indexSet_,r);if(ct(i,"Missing index implementation for "+r),n===ox){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(jw.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),rx(n,i.getCompare())}return ox}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new jw(e.name,r))),i.insert(e,e.node)}}));return new ax(n,this.indexSet_)}removeFromIndexes(e,t){const n=Vt(this.indexes_,(n=>{if(n===ox)return n;{const r=t.get(e.name);return r?n.remove(new jw(e.name,r)):n}}));return new ax(n,this.indexSet_)}}let sx;class lx{static get EMPTY_NODE(){return sx||(sx=new lx(new zw(qw),null,ax.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yw(this.priorityNode_),this.children_.isEmpty()&&ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sx}updatePriority(e){return this.children_.isEmpty()?this:new lx(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?sx:t}}getChild(e){const t=ww(e);return null===t?this:this.getImmediateChild(t).getChild(Ew(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(ct(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new jw(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?sx:this.priorityNode_;return new lx(r,o,i)}}updateChild(e,t){const n=ww(e);if(null===n)return t;{ct(".priority"!==ww(e)||1===xw(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Ew(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(ex,((o,a)=>{t[o]=a.val(e),n++,i&&lx.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Kw(this.getPriority().val())+":"),this.forEachChild(ex,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ab(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new jw(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new jw(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new jw(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,jw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,jw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cx?-1:0}withIndex(e){if(e===$w||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new lx(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===$w||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ex),n=t.getIterator(ex);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===$w?null:this.indexMap_.get(e.toString())}}lx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const cx=new class extends lx{constructor(){super(new zw(qw),lx.EMPTY_NODE,ax.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lx.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(jw,{MIN:{value:new jw(Mb,lx.EMPTY_NODE)},MAX:{value:new jw(Ob,cx)}}),Bw.__EMPTY_NODE=lx.EMPTY_NODE,Zw.__childrenNodeConstructor=lx,Gw=cx,function(e){Jw=e}(cx);function ux(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lx.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Zw(e,ux(t))}if(e instanceof Array){let n=lx.EMPTY_NODE;return $b(e,((t,r)=>{if(Ut(e,t)&&"."!==t.substring(0,1)){const e=ux(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(ux(t))}{const n=[];let r=!1;if($b(e,((e,t)=>{if("."!==e.substring(0,1)){const i=ux(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new jw(e,i)))}})),0===n.length)return lx.EMPTY_NODE;const i=rx(n,Hw,(e=>e.name),qw);if(r){const e=rx(n,ex.getCompare());return new lx(i,ux(t),new ax({".priority":e},{".priority":ex}))}return new lx(i,ux(t),ax.Default)}}!function(e){Qw=e}(ux);class dx extends Fw{constructor(e){super(),this.indexPath_=e,ct(!kw(e)&&".priority"!==ww(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Nb(e.name,t.name):i}makePost(e,t){const n=ux(e),r=lx.EMPTY_NODE.updateChild(this.indexPath_,n);return new jw(t,r)}maxPost(){const e=lx.EMPTY_NODE.updateChild(this.indexPath_,cx);return new jw(Ob,e)}toString(){return Sw(this.indexPath_,0).join("/")}}const hx=new class extends Fw{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Nb(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return jw.MIN}maxPost(){return jw.MAX}makePost(e,t){const n=ux(e);return new jw(t,n)}toString(){return".value"}};function px(e){return{type:"value",snapshotNode:e}}function mx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function fx(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gx(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class vx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ex}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mb}hasEnd(){return this.endSet_}getIndexEndValue(){return ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ob}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ex}copy(){const e=new vx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ex?n="$priority":e.index_===hx?n="$value":e.index_===$w?n="$key":(ct(e.index_ instanceof dx,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=jt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=jt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+jt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=jt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function bx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ex&&(t.i=e.index_.toString()),t}class wx extends fw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ib("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=wx.getListenId_(e,n),a={};this.listens_[o]=a;const s=yx(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),Bt(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=wx.getListenId_(e,t);delete this.listens_[n]}get(e){const t=yx(e._queryParams),n=e._path.toString(),r=new Tt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ht(t);this.log_("Sending REST request for "+a);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=Nt(s.responseText)}catch(XA){Lb("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&Lb("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))}}class xx{constructor(){this.rootNode_=lx.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ex(){return{value:null,children:new Map}}function Ax(e,t,n){if(kw(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ww(t);e.children.has(r)||e.children.set(r,Ex());Ax(e.children.get(r),t=Ew(t),n)}}function Sx(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Sx(r,new yw(t.toString()+"/"+e),n)}))}class Tx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$b(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class _x{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tx(e);const n=1e4+2e4*Math.random();qb(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;$b(e,((e,r)=>{r>0&&Ut(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),qb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var kx;function Cx(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(kx||(kx={}));class Ix{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=kx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(kw(this.path)){if(null!=this.affectedTree.value)return ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yw(e));return new Ix(bw(),t,this.revert)}}return ct(ww(this.path)===e,"operationForChild called for unrelated child."),new Ix(Ew(this.path),this.affectedTree,this.revert)}}class Rx{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=kx.OVERWRITE}operationForChild(e){return kw(this.path)?new Rx(this.source,bw(),this.snap.getImmediateChild(e)):new Rx(this.source,Ew(this.path),this.snap)}}class Dx{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=kx.MERGE}operationForChild(e){if(kw(this.path)){const t=this.children.subtree(new yw(e));return t.isEmpty()?null:t.value?new Rx(this.source,bw(),t.value):new Dx(this.source,bw(),t)}return ct(ww(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dx(this.source,Ew(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kw(e))return this.isFullyInitialized()&&!this.filtered_;const t=ww(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Px(e,t,n,r,i,o){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ut("Should only compare child_ events.");const r=new jw(t.childName,t.snapshotNode),i=new jw(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Mx(e,t){return{eventCache:e,serverCache:t}}function Ox(e,t,n,r){return Mx(new Lx(t,n,r),e.serverCache)}function Nx(e,t,n,r){return Mx(e.eventCache,new Lx(t,n,r))}function jx(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Fx(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ux;class Bx{static fromObject(e){let t=new Bx(null);return $b(e,((e,n)=>{t=t.set(new yw(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ux||(Ux=new zw(jb)),Ux);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bw(),value:this.value};if(kw(e))return null;{const n=ww(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Ew(e),t);if(null!=i){return{path:_w(new yw(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(kw(e))return this;{const t=ww(e),n=this.children.get(t);return null!==n?n.subtree(Ew(e)):new Bx(null)}}set(e,t){if(kw(e))return new Bx(t,this.children);{const n=ww(e),r=(this.children.get(n)||new Bx(null)).set(Ew(e),t),i=this.children.insert(n,r);return new Bx(this.value,i)}}remove(e){if(kw(e))return this.children.isEmpty()?new Bx(null):new Bx(null,this.children);{const t=ww(e),n=this.children.get(t);if(n){const r=n.remove(Ew(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Bx(null):new Bx(this.value,i)}return this}}get(e){if(kw(e))return this.value;{const t=ww(e),n=this.children.get(t);return n?n.get(Ew(e)):null}}setTree(e,t){if(kw(e))return t;{const n=ww(e),r=(this.children.get(n)||new Bx(null)).setTree(Ew(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Bx(this.value,i)}}fold(e){return this.fold_(bw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(_w(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,bw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(kw(e))return null;{const r=ww(e),i=this.children.get(r);return i?i.findOnPath_(Ew(e),_w(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bw(),t)}foreachOnPath_(e,t,n){if(kw(e))return this;{this.value&&n(t,this.value);const r=ww(e),i=this.children.get(r);return i?i.foreachOnPath_(Ew(e),_w(t,r),n):new Bx(null)}}foreach(e){this.foreach_(bw(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(_w(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class $x{constructor(e){this.writeTree_=e}static empty(){return new $x(new Bx(null))}}function Vx(e,t,n){if(kw(t))return new $x(new Bx(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=Cw(i,t);return o=o.updateChild(a,n),new $x(e.writeTree_.set(i,o))}{const r=new Bx(n),i=e.writeTree_.setTree(t,r);return new $x(i)}}}function Wx(e,t,n){let r=e;return $b(n,((e,n)=>{r=Vx(r,_w(t,e),n)})),r}function zx(e,t){if(kw(t))return $x.empty();{const n=e.writeTree_.setTree(t,new Bx(null));return new $x(n)}}function Hx(e,t){return null!=qx(e,t)}function qx(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cw(n.path,t)):null}function Gx(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ex,((e,n)=>{t.push(new jw(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new jw(e,n.value))})),t}function Kx(e,t){if(kw(t))return e;{const n=qx(e,t);return new $x(null!=n?new Bx(n):e.writeTree_.subtree(t))}}function Yx(e){return e.writeTree_.isEmpty()}function Xx(e,t){return Qx(bw(),e.writeTree_,t)}function Qx(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Qx(_w(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(_w(e,".priority"),r)),n}}function Jx(e,t){return dE(t,e)}function Zx(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));ct(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&eE(t,r.path)?i=!1:Rw(r.path,t.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=nE(e.allWrites,tE,bw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=zx(e.visibleWrites,r.path);else{$b(r.children,(t=>{e.visibleWrites=zx(e.visibleWrites,_w(r.path,t))}))}return!0}return!1}function eE(e,t){if(e.snap)return Rw(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Rw(_w(e.path,n),t))return!0;return!1}function tE(e){return e.visible}function nE(e,t,n){let r=$x.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Rw(n,e)?(t=Cw(n,e),r=Vx(r,t,o.snap)):Rw(e,n)&&(t=Cw(e,n),r=Vx(r,bw(),o.snap.getChild(t)));else{if(!o.children)throw ut("WriteRecord should have .snap or .children");if(Rw(n,e))t=Cw(n,e),r=Wx(r,t,o.children);else if(Rw(e,n))if(t=Cw(e,n),kw(t))r=Wx(r,bw(),o.children);else{const e=Bt(o.children,ww(t));if(e){const n=e.getChild(Ew(t));r=Vx(r,bw(),n)}}}}}return r}function rE(e,t,n,r,i){if(r||i){const o=Kx(e.visibleWrites,t);if(!i&&Yx(o))return n;if(i||null!=n||Hx(o,bw())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Rw(e.path,t)||Rw(t,e.path))};return Xx(nE(e.allWrites,o,t),n||lx.EMPTY_NODE)}return null}{const r=qx(e.visibleWrites,t);if(null!=r)return r;{const r=Kx(e.visibleWrites,t);if(Yx(r))return n;if(null!=n||Hx(r,bw())){return Xx(r,n||lx.EMPTY_NODE)}return null}}}function iE(e,t,n,r){return rE(e.writeTree,e.treePath,t,n,r)}function oE(e,t){return function(e,t,n){let r=lx.EMPTY_NODE;const i=qx(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ex,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Kx(e.visibleWrites,t);return n.forEachChild(ex,((e,t)=>{const n=Xx(Kx(i,new yw(e)),t);r=r.updateImmediateChild(e,n)})),Gx(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Gx(Kx(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function aE(e,t,n,r){return function(e,t,n,r,i){ct(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=_w(t,n);if(Hx(e.visibleWrites,o))return null;{const t=Kx(e.visibleWrites,o);return Yx(t)?i.getChild(n):Xx(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function sE(e,t){return function(e,t){return qx(e.visibleWrites,t)}(e.writeTree,_w(e.treePath,t))}function lE(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const l=Kx(e.visibleWrites,t),c=qx(l,bw());if(null!=c)s=c;else{if(null==n)return[];s=Xx(l,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function cE(e,t,n){return function(e,t,n,r){const i=_w(t,n),o=qx(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return Xx(Kx(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function uE(e,t){return dE(_w(e.treePath,t),e.writeTree)}function dE(e,t){return{treePath:e,writeTree:t}}class hE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ct(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gx(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,fx(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ut("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gx(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const pE=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class mE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Lx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cE(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fx(this.viewCache_),i=lE(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function fE(e,t,n,r,i){const o=new hE;let a,s;if(n.type===kx.OVERWRITE){const l=n;l.source.fromUser?a=yE(e,t,l.path,l.snap,r,i,o):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!kw(l.path),a=vE(e,t,l.path,l.snap,r,i,s,o))}else if(n.type===kx.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,l)=>{const c=_w(n,r);bE(t,ww(c))&&(s=yE(e,s,c,l,i,o,a))})),r.foreach(((r,l)=>{const c=_w(n,r);bE(t,ww(c))||(s=yE(e,s,c,l,i,o,a))})),s}(e,t,l.path,l.children,r,i,o):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=xE(e,t,l.path,l.children,r,i,s,o))}else if(n.type===kx.ACK_USER_WRITE){const s=n;a=s.revert?function(e,t,n,r,i,o){let a;if(null!=sE(r,n))return t;{const s=new mE(r,t,i),l=t.eventCache.getNode();let c;if(kw(n)||".priority"===ww(n)){let n;if(t.serverCache.isFullyInitialized())n=iE(r,Fx(t));else{const e=t.serverCache.getNode();ct(e instanceof lx,"serverChildren would be complete if leaf node"),n=oE(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=ww(n);let u=cE(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,Ew(n),s,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,lx.EMPTY_NODE,Ew(n),s,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=iE(r,Fx(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=sE(r,bw()),Ox(t,c,a,e.filter.filtersNodes())}}(e,t,s.path,r,i,o):function(e,t,n,r,i,o,a){if(null!=sE(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(kw(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vE(e,t,n,l.getNode().getChild(n),i,o,s,a);if(kw(n)){let r=new Bx(null);return l.getNode().forEachChild($w,((e,t)=>{r=r.set(new yw(e),t)})),xE(e,t,n,r,i,o,s,a)}return t}{let c=new Bx(null);return r.foreach(((e,t)=>{const r=_w(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),xE(e,t,n,c,i,o,s,a)}}(e,t,s.path,s.affectedTree,r,i,o)}else{if(n.type!==kx.LISTEN_COMPLETE)throw ut("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const o=t.serverCache,a=Nx(t,o.getNode(),o.isFullyInitialized()||kw(n),o.isFiltered());return gE(e,a,n,r,pE,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=jx(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(px(jx(t)))}}(t,a,l),{viewCache:a,changes:l}}function gE(e,t,n,r,i,o){const a=t.eventCache;if(null!=sE(r,n))return t;{let s,l;if(kw(n))if(ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Fx(t),i=oE(r,n instanceof lx?n:lx.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=iE(r,Fx(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=ww(n);if(".priority"===c){ct(1===xw(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const o=aE(r,n,i,l);s=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const u=Ew(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=aE(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=cE(r,c,t.serverCache);s=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,o):a.getNode()}}return Ox(t,s,a.isFullyInitialized()||kw(n),e.filter.filtersNodes())}}function vE(e,t,n,r,i,o,a,s){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(kw(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ww(n);if(!l.isCompleteForPath(n)&&xw(n)>1)return t;const i=Ew(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,pE,null)}const d=Nx(t,c,l.isFullyInitialized()||kw(n),u.filtersNodes());return gE(e,d,n,i,new mE(i,d,o),s)}function yE(e,t,n,r,i,o,a){const s=t.eventCache;let l,c;const u=new mE(i,t,o);if(kw(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Ox(t,c,!0,e.filter.filtersNodes());else{const i=ww(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ox(t,c,s.isFullyInitialized(),s.isFiltered());else{const o=Ew(n),c=s.getNode().getImmediateChild(i);let d;if(kw(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===Aw(o)&&e.getChild(Tw(o)).isEmpty()?e:e.updateChild(o,r):lx.EMPTY_NODE}if(c.equals(d))l=t;else{l=Ox(t,e.filter.updateChild(s.getNode(),i,d,o,u,a),s.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function bE(e,t){return e.eventCache.isCompleteForChild(t)}function wE(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function xE(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=kw(n)?r:new Bx(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=wE(0,t.serverCache.getNode().getImmediateChild(n),r);c=vE(e,c,new yw(n),l,i,o,a,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=wE(0,t.serverCache.getNode().getImmediateChild(n),r);c=vE(e,c,new yw(n),l,i,o,a,s)}})),c}function EE(e,t){const n=Fx(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!kw(t)&&!n.getImmediateChild(ww(t)).isEmpty())?n.getChild(t):null}function AE(e,t,n,r){t.type===kx.MERGE&&null!==t.source.queryId&&(ct(Fx(e.viewCache_),"We should always have a full cache before handling merges"),ct(jx(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=fE(e.processor_,i,t,n,r);var a,s;return a=e.processor_,s=o.viewCache,ct(s.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),ct(s.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),ct(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,SE(e,o.changes,o.viewCache.eventCache.getNode(),null)}function SE(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Px(e,i,"child_removed",t,r,n),Px(e,i,"child_added",t,r,n),Px(e,i,"child_moved",o,r,n),Px(e,i,"child_changed",t,r,n),Px(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let TE,_E;function kE(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return ct(null!=o,"SyncTree gave us an op for an invalid query."),AE(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(AE(o,t,n,r));return i}}function CE(e,t){let n=null;for(const r of e.views.values())n=n||EE(r,t);return n}class IE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bx(null),this.pendingWriteTree_={visibleWrites:$x.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RE(e,t,n,r,i){return function(e,t,n,r,i){ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Vx(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?OE(e,new Rx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function DE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Zx(e.pendingWriteTree_,t)){let t=new Bx(null);return null!=r.snap?t=t.set(bw(),!0):$b(r.children,(e=>{t=t.set(new yw(e),!0)})),OE(e,new Ix(r.path,t,n))}return[]}function LE(e,t,n){return OE(e,new Rx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function PE(e,t,n,r){const i=FE(e,r);if(null!=i){const r=UE(i),o=r.path,a=r.queryId,s=Cw(o,t);return BE(e,o,new Rx(Cx(a),s,n))}return[]}function ME(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=CE(n,Cw(e,t));if(r)return r}));return rE(r,t,i,n,!0)}function OE(e,t){return NE(t,e.syncPointTree_,null,Jx(e.pendingWriteTree_,bw()))}function NE(e,t,n,r){if(kw(e.path))return jE(e,t,n,r);{const i=t.get(bw());null==n&&null!=i&&(n=CE(i,bw()));let o=[];const a=ww(e.path),s=e.operationForChild(a),l=t.children.get(a);if(l&&s){const e=n?n.getImmediateChild(a):null,t=uE(r,a);o=o.concat(NE(s,l,e,t))}return i&&(o=o.concat(kE(i,e,r,n))),o}}function jE(e,t,n,r){const i=t.get(bw());null==n&&null!=i&&(n=CE(i,bw()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=uE(r,t),l=e.operationForChild(t);l&&(o=o.concat(jE(l,i,a,s)))})),i&&(o=o.concat(kE(i,e,r,n))),o}function FE(e,t){return e.tagToQueryMap.get(t)}function UE(e){const t=e.indexOf("$");return ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new yw(e.substr(0,t))}}function BE(e,t,n){const r=e.syncPointTree_.get(t);ct(r,"Missing sync point for query tag that we're tracking");return kE(r,n,Jx(e.pendingWriteTree_,t),null)}class $E{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $E(t)}node(){return this.node_}}class VE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_w(this.path_,e);return new VE(this.syncTree_,t)}node(){return ME(this.syncTree_,this.path_)}}const WE=function(e,t,n){return e&&"object"===typeof e?(ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?zE(e[".sv"],t,n):"object"===typeof e[".sv"]?HE(e[".sv"],t):void ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},zE=function(e,t,n){if("timestamp"===e)return n.timestamp;ct(!1,"Unexpected server value: "+e)},HE=function(e,t,n){e.hasOwnProperty("increment")||ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&ct(!1,"Unexpected increment value: "+r);const i=t.node();if(ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},qE=function(e,t,n,r){return KE(t,new VE(n,e),r)},GE=function(e,t,n){return KE(e,new $E(t),n)};function KE(e,t,n){const r=e.getPriority().val(),i=WE(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=WE(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new Zw(o,ux(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Zw(i))),r.forEachChild(ex,((e,r)=>{const i=KE(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class YE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function XE(e,t){let n=t instanceof yw?t:new yw(t),r=e,i=ww(n);for(;null!==i;){const e=Bt(r.node.children,i)||{children:{},childCount:0};r=new YE(i,r,e),n=Ew(n),i=ww(n)}return r}function QE(e){return e.node.value}function JE(e,t){e.node.value=t,rA(e)}function ZE(e){return e.node.childCount>0}function eA(e,t){$b(e.node.children,((n,r)=>{t(new YE(n,e,r))}))}function tA(e,t,n,r){n&&!r&&t(e),eA(e,(e=>{tA(e,t,!0,r)})),n&&r&&t(e)}function nA(e){return new yw(null===e.parent?e.name:nA(e.parent)+"/"+e.name)}function rA(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===QE(e)&&!ZE(e)}(n),i=Ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,rA(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,rA(e))}(e.parent,e.name,e)}const iA=/[\[\].#$\/\u0000-\u001F\u007F]/,oA=/[\[\].#$\u0000-\u001F\u007F]/,aA=10485760,sA=function(e){return"string"===typeof e&&0!==e.length&&!iA.test(e)},lA=function(e){return"string"===typeof e&&0!==e.length&&!oA.test(e)},cA=function(e,t,n){const r=n instanceof yw?new Dw(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Pw(r));if("function"===typeof t)throw new Error(e+"contains a function "+Pw(r)+" with contents = "+t.toString());if(Pb(t))throw new Error(e+"contains "+t.toString()+" "+Pw(r));if("string"===typeof t&&t.length>aA/3&&Jt(t)>aA)throw new Error(e+"contains a string greater than "+aA+" utf8 bytes "+Pw(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if($b(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!sA(t)))throw new Error(e+" contains an invalid key ("+t+") "+Pw(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Jt(t),Lw(e)}(r,t),cA(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=Jt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Pw(r)+" in addition to actual children.")}},uA=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!sA(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),lA(e)}(n))throw new Error(Qt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class dA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hA(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||Iw(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function pA(e,t,n){hA(e,n),mA(e,(e=>Rw(e,t)||Rw(t,e)))}function mA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(fA(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function fA(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Tb&&Cb("event: "+n.toString()),Hb(r)}}}const gA="repo_interrupt";class vA{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ex(),this.transactionQueueTree_=new YE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yA(e,t,n){if(e.stats_=aw(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new wx(e.repoInfo_,((t,n,r,i)=>{xA(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>EA(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(n)}catch(XA){throw new Error("Invalid authOverride provided: "+XA)}}e.persistentConnection_=new Nw(e.repoInfo_,t,((t,n,r,i)=>{xA(e,t,n,r,i)}),(t=>{EA(e,t)}),(t=>{!function(e,t){$b(t,((t,n)=>{AA(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ow[n]||(ow[n]=t()),ow[n]}(e.repoInfo_,(()=>new _x(e.stats_,e.server_))),e.infoData_=new xx,e.infoSyncTree_=new IE({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=LE(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),AA(e,"connected",!1),e.serverSyncTree_=new IE({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);pA(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function bA(e){const t=e.infoData_.getNode(new yw(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function wA(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:bA(e)})}function xA(e,t,n,r,i){e.dataUpdateCount++;const o=new yw(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=Vt(n,(e=>ux(e)));a=function(e,t,n,r){const i=FE(e,r);if(i){const r=UE(i),o=r.path,a=r.queryId,s=Cw(o,t),l=Bx.fromObject(n);return BE(e,o,new Dx(Cx(a),s,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=ux(n);a=PE(e.serverSyncTree_,o,t,i)}else if(r){const t=Vt(n,(e=>ux(e)));a=function(e,t,n){const r=Bx.fromObject(n);return OE(e,new Dx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=ux(n);a=LE(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=IA(e,o)),pA(e.eventQueue_,s,a)}function EA(e,t){AA(e,"connected",t),!1===t&&function(e){_A(e,"onDisconnectEvents");const t=wA(e),n=Ex();Sx(e.onDisconnect_,bw(),((r,i)=>{const o=qE(r,i,e.serverSyncTree_,t);Ax(n,r,o)}));let r=[];Sx(n,bw(),((t,n)=>{r=r.concat(LE(e.serverSyncTree_,t,n));const i=MA(e,t);IA(e,i)})),e.onDisconnect_=Ex(),pA(e.eventQueue_,bw(),r)}(e)}function AA(e,t,n){const r=new yw("/.info/"+t),i=ux(n);e.infoData_.updateSnapshot(r,i);const o=LE(e.infoSyncTree_,r,i);pA(e.eventQueue_,r,o)}function SA(e){return e.nextWriteId_++}function TA(e){e.persistentConnection_&&e.persistentConnection_.interrupt(gA)}function _A(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Cb(t,...r)}function kA(e,t,n){return ME(e.serverSyncTree_,t,n)||lx.EMPTY_NODE}function CA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||PA(e,t),QE(t)){const n=DA(e,t);ct(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=kA(e,t,r);let o=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];ct(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Cw(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const s=o.val(!0),l=t;e.server_.put(l.toString(),s,(r=>{_A(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(DE(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();PA(e,XE(e.transactionQueueTree_,t)),CA(e,e.transactionQueueTree_),pA(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Hb(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Lb("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}IA(e,t)}}),a)}(e,nA(t),n)}else ZE(t)&&eA(t,(t=>{CA(e,t)}))}function IA(e,t){const n=RA(e,t),r=nA(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),a=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=Cw(n,o.path);let u,d=!1;if(ct(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(DE(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(DE(e.serverSyncTree_,o.currentWriteId,!0));else{const n=kA(e,o.path,a);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){cA("transaction failed: Data returned ",r,o.path);let t=ux(r);"object"===typeof r&&null!=r&&Ut(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=o.currentWriteId,l=wA(e),c=GE(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=SA(e),a.splice(a.indexOf(s),1),i=i.concat(RE(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(DE(e.serverSyncTree_,s,!0))}else d=!0,u="nodata",i=i.concat(DE(e.serverSyncTree_,o.currentWriteId,!0))}pA(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,s=t[l].unwatcher,setTimeout(s,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var s;PA(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Hb(r[l]);CA(e,e.transactionQueueTree_)}(e,DA(e,n),r),r}function RA(e,t){let n,r=e.transactionQueueTree_;for(n=ww(t);null!==n&&void 0===QE(r);)r=XE(r,n),n=ww(t=Ew(t));return r}function DA(e,t){const n=[];return LA(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function LA(e,t,n){const r=QE(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);eA(t,(t=>{LA(e,t,n)}))}function PA(e,t){const n=QE(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,JE(t,n.length>0?n:void 0)}eA(t,(t=>{PA(e,t)}))}function MA(e,t){const n=nA(RA(e,t)),r=XE(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{OA(e,t)})),OA(e,r),tA(r,(t=>{OA(e,t)})),n}function OA(e,t){const n=QE(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(ct(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(ct(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(DE(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?JE(t,void 0):n.length=o+1,pA(e.eventQueue_,nA(t),i);for(let e=0;e<r.length;e++)Hb(r[e])}}const NA=function(e,t){const n=jA(e),r=n.namespace;"firebase.com"===n.domain&&Db(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Db("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Lb("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new tw(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new yw(n.pathString)}},jA=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(XA){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Lb(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},FA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class UA{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return kw(this._path)?null:Aw(this._path)}get ref(){return new BA(this._repo,this._path)}get _queryIdentifier(){const e=bx(this._queryParams),t=Ub(e);return"{}"===t?"default":t}get _queryObject(){return bx(this._queryParams)}isEqual(e){if(!((e=Zt(e))instanceof UA))return!1;const t=this._repo===e._repo,n=Iw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class BA extends UA{constructor(e,t){super(e,t,new vx,!1)}get parent(){const e=Tw(this._path);return null===e?null:new BA(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){ct(!TE,"__referenceConstructor has already been defined"),TE=e}(BA),function(e){ct(!_E,"__referenceConstructor has already been defined"),_E=e}(BA);const $A={};let VA=!1;function WA(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Db("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cb("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,l=NA(o,i),c=l.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${c.namespace}`,l=NA(o,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new Yb(Yb.OWNER):new Kb(e.name,e.options,t);uA("Invalid Firebase Database URL",l),kw(l.path)||Db("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=$A[t.name];i||(i={},$A[t.name]=i);let o=i[e.toURLString()];o&&Db("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new vA(e,VA,n,r),i[e.toURLString()]=o,o}(c,e,u,new Gb(e,n));return new zA(d,e)}class zA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new BA(this._repo,bw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=$A[t];n&&n[e.key]===e||Db(`Database ${t}(${e.repoInfo_}) has already been deleted.`),TA(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Db("Cannot call "+e+" on a deleted database.")}}Nw.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Nw.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){fb(gr),dr(new en("database",((e,t)=>{let{instanceIdentifier:n}=t;return WA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),br(hb,pb,e),br(hb,pb,"esm2017")}();const HA={apiKey:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",authDomain:"sideeye.uk",projectId:"sideeye-bafda",storageBucket:"sideeye-bafda.firebasestorage.app",messagingSenderId:"864667627333",appId:"1:864667627333:web:1ec087179141d1e91a982c",measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.REACT_APP_FIREBASE_MEASUREMENT_ID,databaseURL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app"},qA=0===Array.from(sr.values()).length?vr(HA):yr();console.log("Initializing Firebase app");const GA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr();const t=hr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=hr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Wt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Nr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ns,persistence:[ha,qo,Qo]}),r=St("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>as)return;const r=null===t||void 0===t?void 0:t.token;ss!==r&&(ss=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Zt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Zt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=xt("auth");return o&&ro(n,`http://${o}`),n}(qA),KA=function(e,t,n){n||(n=Ac);const r=hr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Wt(r.getOptions(n),t))return e;throw new js(Ns.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new js(Ns.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<Hh)throw new js(Ns.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(qA,{experimentalForceLongPolling:!0,cacheSizeBytes:-1}),YA=ub(qA);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr(),t=arguments.length>1?arguments[1]:void 0;const n=hr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Et("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Zt(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Wt(r,o.repoInfo_.emulatorOptions))return;Db("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Db('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Yb(Yb.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:_t(r.mockUserToken,e.app.options.projectId);a=new Yb(t)}!function(e,t,n,r){e.repoInfo_=new tw(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(o,i,r,a)}(n,...e)}}(qA);Bo(GA,(e=>{console.log("Firebase auth state changed:",e?"User logged in":"No user")}));(()=>{{console.log("Checking Firebase configuration in production..."),console.log("Firebase App:",qA.name),console.log("Firebase Auth:",GA.app.name),console.log("Firestore:",KA.app.name);const e=qA.options.projectId;console.log("Firebase Project ID:",e);const t=qA.options.apiKey;console.log("Firebase API Key:",t?"Present":"Missing");const n=qA.options.authDomain;console.log("Firebase Auth Domain:",n),e&&t&&n||(console.error("Firebase configuration is incomplete!"),console.error("Project ID:",e),console.error("API Key:",t?"Present":"Missing"),console.error("Auth Domain:",n))}})();let XA={data:""},QA=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||XA,JA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ZA=/\/\*[^]*?\*\/|  +/g,eS=/\n+/g,tS=(e,t)=>{let n="",r="",i="";for(let o in e){let a=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?tS(a,o):o+"{"+tS(a,"k"==o[1]?"":t)+"}":"object"==typeof a?r+=tS(a,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=tS.p?tS.p(o,a):o+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},nS={},rS=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+rS(e[n]);return t}return e},iS=(e,t,n,r,i)=>{let o=rS(e),a=nS[o]||(nS[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!nS[a]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=JA.exec(e.replace(ZA,""));)t[4]?r.shift():t[3]?(n=t[3].replace(eS," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(eS," ").trim();return r[0]})(e);nS[a]=tS(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let s=n&&nS.g?nS.g:null;return n&&(nS.g=nS[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(nS[a],t,r,s),a};function oS(e){let t=this||{},n=e.call?e(t.p):e;return iS(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":tS(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,QA(t.target),t.g,t.o,t.k)}oS.bind({g:1});let aS,sS,lS,cS=oS.bind({k:1});function uS(e,t){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),l=s.className||i.className;n.p=Object.assign({theme:sS&&sS()},s),n.o=/ *go\d+/.test(l),s.className=oS.apply(n,r)+(l?" "+l:""),t&&(s.ref=a);let c=e;return e[0]&&(c=s.as||e,delete s.as),lS&&c[0]&&lS(s),aS(c,s)}return t?t(i):i}}var dS=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,hS=(()=>{let e=0;return()=>(++e).toString()})(),pS=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),mS=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return mS(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},fS=[],gS={toasts:[],pausedAt:void 0},vS=e=>{gS=mS(gS,e),fS.forEach((e=>{e(gS)}))},yS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bS=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||hS()}}(t,e,n);return vS({type:2,toast:r}),r.id},wS=(e,t)=>bS("blank")(e,t);wS.error=bS("error"),wS.success=bS("success"),wS.loading=bS("loading"),wS.custom=bS("custom"),wS.dismiss=e=>{vS({type:3,toastId:e})},wS.remove=e=>vS({type:4,toastId:e}),wS.promise=(e,t,n)=>{let r=wS.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?dS(t.success,e):void 0;return i?wS.success(i,{id:r,...n,...null==n?void 0:n.success}):wS.dismiss(r),e})).catch((e=>{let i=t.error?dS(t.error,e):void 0;i?wS.error(i,{id:r,...n,...null==n?void 0:n.error}):wS.dismiss(r)})),e};var xS=(e,t)=>{vS({type:1,toast:{id:e,height:t}})},ES=()=>{vS({type:5,time:Date.now()})},AS=new Map,SS=e=>{let{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,t.useState)(gS),i=(0,t.useRef)(gS);(0,t.useEffect)((()=>(i.current!==gS&&r(gS),fS.push(r),()=>{let e=fS.indexOf(r);e>-1&&fS.splice(e,1)})),[]);let o=n.toasts.map((t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||yS[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...n,toasts:o}}(e);(0,t.useEffect)((()=>{if(r)return;let e=Date.now(),t=n.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>wS.dismiss(t.id)),n);t.visible&&wS.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[n,r]);let i=(0,t.useCallback)((()=>{r&&vS({type:6,time:Date.now()})}),[r]),o=(0,t.useCallback)(((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=t||{},a=n.filter((t=>(t.position||o)===(e.position||o)&&t.height)),s=a.findIndex((t=>t.id===e.id)),l=a.filter(((e,t)=>t<s&&e.visible)).length;return a.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[n]);return(0,t.useEffect)((()=>{n.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(AS.has(e))return;let n=setTimeout((()=>{AS.delete(e),vS({type:4,toastId:e})}),t);AS.set(e,n)}(e.id,e.removeDelay);else{let t=AS.get(e.id);t&&(clearTimeout(t),AS.delete(e.id))}}))}),[n]),{toasts:n,handlers:{updateHeight:xS,startPause:ES,endPause:i,calculateOffset:o}}},TS=cS`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_S=cS`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kS=cS`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,CS=uS("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_S} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,IS=cS`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RS=uS("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${IS} 1s linear infinite;
`,DS=cS`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LS=cS`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,PS=uS("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,MS=uS("div")`
  position: absolute;
`,OS=uS("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,NS=cS`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jS=uS("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${NS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FS=e=>{let{toast:n}=e,{icon:r,type:i,iconTheme:o}=n;return void 0!==r?"string"==typeof r?t.createElement(jS,null,r):r:"blank"===i?null:t.createElement(OS,null,t.createElement(RS,{...o}),"loading"!==i&&t.createElement(MS,null,"error"===i?t.createElement(CS,{...o}):t.createElement(PS,{...o})))},US=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,BS=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,$S=uS("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,VS=uS("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WS=t.memo((e=>{let{toast:n,position:r,style:i,children:o}=e,a=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=pS()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[US(n),BS(n)];return{animation:t?`${cS(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cS(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(n.position||r||"top-center",n.visible):{opacity:0},s=t.createElement(FS,{toast:n}),l=t.createElement(VS,{...n.ariaProps},dS(n.message,n));return t.createElement($S,{className:n.className,style:{...a,...i,...n.style}},"function"==typeof o?o({icon:s,message:l}):t.createElement(t.Fragment,null,s,l))}));!function(e,t,n,r){tS.p=t,aS=e,sS=n,lS=r}(t.createElement);var zS=e=>{let{id:n,className:r,style:i,onHeightUpdate:o,children:a}=e,s=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;o(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[n,o]);return t.createElement("div",{ref:s,className:r,style:i},a)},HS=oS`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qS=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:i,gutter:o,children:a,containerStyle:s,containerClassName:l}=e,{toasts:c,handlers:u}=SS(i);return t.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||r,s=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(i,u.calculateOffset(e,{reverseOrder:n,gutter:o,defaultPosition:r}));return t.createElement(zS,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?HS:"",style:s},"custom"===e.type?dS(e.message,e):a?a(e):t.createElement(WS,{toast:e,position:i}))})))},GS=n(7355),KS=null;function YS(e,t){if("number"!==typeof(e=e||sT))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(iT(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return GS.randomBytes(e)}catch{}if(!KS)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return KS(e)}(aT),aT)),n.join("")}function XS(e,t,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0),"undefined"===typeof e)e=sT;else if("number"!==typeof e)throw Error("illegal arguments: "+typeof e);function r(t){eT((function(){try{t(null,YS(e))}catch(n){t(n)}}))}if(!n)return new Promise((function(e,t){r((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);r(n)}function QS(e,t){if("undefined"===typeof t&&(t=sT),"number"===typeof t&&(t=YS(t)),"string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return vT(e,t)}function JS(e,t,n,r){function i(n){"string"===typeof e&&"number"===typeof t?XS(t,(function(t,i){vT(e,i,n,r)})):"string"===typeof e&&"string"===typeof t?vT(e,t,n,r):eT(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)}function ZS(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return 0===n}var eT="undefined"!==typeof process&&process&&"function"===typeof process.nextTick?"function"===typeof setImmediate?setImmediate:process.nextTick:setTimeout;function tT(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t}var nT="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),rT=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function iT(e,t){var n,r,i=0,o=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(n=255&e[i++],o.push(nT[n>>2&63]),n=(3&n)<<4,i>=t){o.push(nT[63&n]);break}if(n|=(r=255&e[i++])>>4&15,o.push(nT[63&n]),n=(15&r)<<2,i>=t){o.push(nT[63&n]);break}n|=(r=255&e[i++])>>6&3,o.push(nT[63&n]),o.push(nT[63&r])}return o.join("")}function oT(e,t){var n,r,i,o,a,s=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;s<l-1&&c<t&&(n=(a=e.charCodeAt(s++))<rT.length?rT[a]:-1,r=(a=e.charCodeAt(s++))<rT.length?rT[a]:-1,-1!=n&&-1!=r)&&(o=n<<2>>>0,o|=(48&r)>>4,u.push(String.fromCharCode(o)),!(++c>=t||s>=l))&&-1!=(i=(a=e.charCodeAt(s++))<rT.length?rT[a]:-1)&&(o=(15&r)<<4>>>0,o|=(60&i)>>2,u.push(String.fromCharCode(o)),!(++c>=t||s>=l));)o=(3&i)<<6>>>0,o|=(a=e.charCodeAt(s++))<rT.length?rT[a]:-1,u.push(String.fromCharCode(o)),++c;var d=[];for(s=0;s<c;s++)d.push(u[s].charCodeAt(0));return d}var aT=16,sT=10,lT=16,cT=100,uT=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],dT=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],hT=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function pT(e,t,n,r){var i,o=e[t],a=e[t+1];return i=r[(o^=n[0])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[1])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[2])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[3])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[4])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[5])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[6])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[7])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[8])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[9])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[10])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[11])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[12])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[13])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[14])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[15])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],o^=(i+=r[768|255&a])^n[16],e[t]=a^n[lT+1],e[t+1]=o,e}function mT(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|255&e[t],t=(t+1)%e.length;return{key:r,offp:t}}function fT(e,t,n){for(var r,i=0,o=[0,0],a=t.length,s=n.length,l=0;l<a;l++)i=(r=mT(e,i)).offp,t[l]=t[l]^r.key;for(l=0;l<a;l+=2)o=pT(o,0,t,n),t[l]=o[0],t[l+1]=o[1];for(l=0;l<s;l+=2)o=pT(o,0,t,n),n[l]=o[0],n[l+1]=o[1]}function gT(e,t,n,r,i){var o,a=hT.slice(),s=a.length;if(n<4||n>31){if(o=Error("Illegal number of rounds (4-31): "+n),r)return void eT(r.bind(this,o));throw o}if(t.length!==aT){if(o=Error("Illegal salt length: "+t.length+" != "+aT),r)return void eT(r.bind(this,o));throw o}n=1<<n>>>0;var l,c,u,d=0;function h(){if(i&&i(d/n),!(d<n)){for(d=0;d<64;d++)for(u=0;u<s>>1;u++)pT(a,u<<1,l,c);var o=[];for(d=0;d<s;d++)o.push((a[d]>>24&255)>>>0),o.push((a[d]>>16&255)>>>0),o.push((a[d]>>8&255)>>>0),o.push((255&a[d])>>>0);return r?void r(null,o):o}for(var p=Date.now();d<n&&(d+=1,fT(e,l,c),fT(t,l,c),!(Date.now()-p>cT)););r&&eT(h)}if("function"===typeof Int32Array?(l=new Int32Array(uT),c=new Int32Array(dT)):(l=uT.slice(),c=dT.slice()),function(e,t,n,r){for(var i,o=0,a=[0,0],s=n.length,l=r.length,c=0;c<s;c++)o=(i=mT(t,o)).offp,n[c]=n[c]^i.key;for(o=0,c=0;c<s;c+=2)o=(i=mT(e,o)).offp,a[0]^=i.key,o=(i=mT(e,o)).offp,a[1]^=i.key,a=pT(a,0,n,r),n[c]=a[0],n[c+1]=a[1];for(c=0;c<l;c+=2)o=(i=mT(e,o)).offp,a[0]^=i.key,o=(i=mT(e,o)).offp,a[1]^=i.key,a=pT(a,0,n,r),r[c]=a[0],r[c+1]=a[1]}(t,e,l,c),"undefined"!==typeof r)h();else for(var p;;)if("undefined"!==typeof(p=h()))return p||[]}function vT(e,t,n,r){var i,o,a;if("string"!==typeof e||"string"!==typeof t){if(i=Error("Invalid string / salt: Not a string"),n)return void eT(n.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),n)return void eT(n.bind(this,i));throw i}if("$"===t.charAt(2))o=String.fromCharCode(0),a=3;else{if("a"!==(o=t.charAt(2))&&"b"!==o&&"y"!==o||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),n)return void eT(n.bind(this,i));throw i}a=4}if(t.charAt(a+2)>"$"){if(i=Error("Missing salt rounds"),n)return void eT(n.bind(this,i));throw i}var s=10*parseInt(t.substring(a,a+1),10)+parseInt(t.substring(a+1,a+2),10),l=t.substring(a+3,a+25),c=function(e){for(var t,n,r=0,i=new Array(tT(e)),o=0,a=e.length;o<a;++o)(t=e.charCodeAt(o))<128?i[r++]=t:t<2048?(i[r++]=t>>6|192,i[r++]=63&t|128):55296===(64512&t)&&56320===(64512&(n=e.charCodeAt(o+1)))?(t=65536+((1023&t)<<10)+(1023&n),++o,i[r++]=t>>18|240,i[r++]=t>>12&63|128,i[r++]=t>>6&63|128,i[r++]=63&t|128):(i[r++]=t>>12|224,i[r++]=t>>6&63|128,i[r++]=63&t|128);return i}(e+=o>="a"?"\0":""),u=oT(l,aT);function d(e){var t=[];return t.push("$2"),o>="a"&&t.push(o),t.push("$"),s<10&&t.push("0"),t.push(s.toString()),t.push("$"),t.push(iT(u,u.length)),t.push(iT(e,4*hT.length-1)),t.join("")}if("undefined"==typeof n)return d(gT(c,u,s));gT(c,u,s,(function(e,t){e?n(e,null):n(null,d(t))}),r)}const yT={setRandomFallback:function(e){KS=e},genSaltSync:YS,genSalt:XS,hashSync:QS,hash:JS,compareSync:function(e,t){if("string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&ZS(QS(e,t.substring(0,t.length-31)),t)},compare:function(e,t,n,r){function i(n){"string"===typeof e&&"string"===typeof t?60===t.length?JS(e,t.substring(0,29),(function(e,r){e?n(e):n(null,ZS(r,t))}),r):eT(n.bind(this,null,!1)):eT(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)},getRounds:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return tT(e)>72},encodeBase64:function(e,t){return iT(e,t)},decodeBase64:function(e,t){return oT(e,t)}},bT=(0,t.createContext)({currentUser:null,user:null,userProfile:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resetPassword:async()=>{},sendEmailVerification:async()=>{},setUserProfile:()=>{},setError:()=>{},tempUserForSourceCode:null,verifySourceCodeAndCompleteLogin:async()=>{},forceCheckEmailVerification:async()=>!1,completeInitialSetupAndLogin:()=>{}}),wT=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),f=J();(0,t.useEffect)((()=>{console.log("Setting up auth state listener");const e=Bo(GA,(async e=>{if(console.log("Auth state changed:",e?"User logged in":"No user"),e)try{const t=await lv(Zf(KA,"users",e.uid));if(t.exists()){const n=t.data();a({...e,...n,uid:e.uid}),console.log("User data loaded successfully:",e.uid)}else console.error("User document not found in Firestore:",e.uid),a(null)}catch(d){console.error("Error loading user data:",d),a(null)}else a(null);u(!1)}));return()=>{console.log("Cleaning up auth state listener"),e()}}),[]),(0,t.useEffect)((()=>{if(null===r||void 0===r||!r.uid||!KA)return;const e=fv(Zf(KA,"users",r.uid),(e=>{if(e.exists()){const t=e.data(),n=null===s||void 0===s?void 0:s.isPrivate;l(t),a((e=>e?{...e,...t,isPrivate:t.isPrivate||!1,followers:t.followers||[],following:t.following||[]}:null)),n!==t.isPrivate&&(wS.success("Account is now "+(t.isPrivate?"private":"public")),window.location.pathname.includes("/profile")&&window.location.reload())}}),(e=>{console.error("Error listening to privacy changes:",e),wS.error("Failed to sync privacy settings")}));return()=>e()}),[null===r||void 0===r?void 0:r.uid,KA,null===s||void 0===s?void 0:s.isPrivate]),(0,t.useEffect)((()=>{r&&!c&&(r.emailVerified||wS.error("Please verify your email to continue",{duration:5e3,id:"email-verification-needed"}),s&&!s.sourceCodeSetupComplete&&wS.error("Please set up your source code to continue",{duration:5e3,id:"source-code-setup-needed"}))}),[r,s,c]);const g=async e=>{try{console.log("Starting forceCheckEmailVerification for user:",e.uid),console.log("Initial emailVerified status:",e.emailVerified),await e.reload();const n=GA.currentUser;if(!n)return console.error("User disappeared after reload"),!1;const r=n.emailVerified;if(console.log("Email verification status after reload:",r),r&&KA)try{const e=Zf(KA,"users",n.uid),t=await lv(e);if(t.exists()){if(!t.data().isVerified){const t=await(async e=>{if(!KA)return!1;try{return(await lv(Zf(KA,"admins",e))).exists()}catch(d){return console.log("Error checking admin status:",d),!1}})(n.uid);t?(await hv(e,{isVerified:!0,updatedAt:Sv()}),console.log("Updated user profile verification status in Firestore")):console.log("User is not admin, skipping verification status update")}}}catch(d){console.log("Could not access user profile in Firestore")}try{const e=await n.getIdTokenResult(!0);return console.log("Token verification status:",e.claims.email_verified),e.claims.email_verified&&!r?(await n.reload(),n.emailVerified):!0===e.claims.email_verified}catch(t){return console.error("Error checking token verification status:",t),r}}catch(d){return console.error("Failed to check email verification status:",d),!1}},v={currentUser:r,user:o,userProfile:s,loading:c,error:d,login:async(e,t)=>{u(!0),h(null);try{console.log("Starting login process for:",e),await function(e,t){return Zt(e).setPersistence(t)}(GA,qo),console.log("Persistence set to LOCAL");const n=await function(e,t,n){return pr(e.app)?Promise.reject(Ur(e)):Mo(Zt(e),bo.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&jo(e),t}))}(GA,e,t),r=n.user;console.log("Login successful, checking verification status...");const o=await g(r);if(console.log("Email verification status after login:",o),!o)return console.log("Email not verified, redirecting to verification page..."),h("Please verify your email before logging in."),i(null),a(null),l(null),await $o(GA),u(!1),void f("/verify-email",{replace:!0});const s=await lv(Zf(KA,"users",r.uid));if(!s.exists())throw new Error("User profile not found");const c=s.data();if(!c.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),m(r),u(!1),void f("/setup-source-code",{replace:!0});i(r),a(r),l(c),u(!1),console.log("Login complete, redirecting to feed..."),f("/",{replace:!0})}catch(d){console.error("Login function error:",d);let t="An error occurred during login.";"auth/invalid-credential"===d.code?t="Invalid email or password.":"auth/user-not-found"===d.code?t="No account found with this email.":"auth/wrong-password"===d.code?t="Incorrect password.":"auth/too-many-requests"===d.code?t="Too many failed attempts. Please try again later.":"auth/network-request-failed"===d.code&&(t="Network error. Please check your connection."),h(t),i(null),a(null),l(null),u(!1),((e,t)=>{console.error(`[${t}] Error:`,e)})(d,"Login Function")}},register:async(e,t,n,r)=>{u(!0),h(null);try{const o=await async function(e,t,n){if(pr(e.app))return Promise.reject(Ur(e));const r=Hi(e),i=to(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_o,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&jo(e),t})),a=await ko._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(GA,e,t),s=o.user;console.log("User created successfully with UID:",s.uid),await Uo(s,{displayName:n}),console.log("User profile updated with username:",n),await Fo(s),console.log("Verification email sent to:",s.email);try{if(KA){const t={theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0},i={name:n,username:n,email:e||"",profilePic:s.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:nl.fromDate(new Date),lastLogin:nl.fromDate(new Date),dateOfBirth:r,settings:{theme:"light",notifications:!0,privacy:"public"},preferences:t};await dv(Zf(KA,"users",s.uid),i),console.log("Basic user profile created in Firestore")}}catch(i){console.error("Error creating user profile in Firestore:",i)}a(s)}catch(d){throw console.error("Registration error:",d),h(ET(d.code)),d}finally{u(!1)}},logout:async()=>{try{u(!0),await $o(GA),i(null),a(null),l(null),f("/login")}catch(d){console.error("Error logging out:",d),wS.error("Failed to log out")}finally{u(!1)}},resetPassword:async e=>{try{u(!0),await async function(e,t,n){const r=Hi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&No(r,i,n),await to(r,i,"getOobCode",uo,"EMAIL_PASSWORD_PROVIDER")}(GA,e)}catch(d){throw h(d.message),d}finally{u(!1)}},sendEmailVerification:async()=>{const e=r||o;if(!e)throw new Error("No user available to send verification email");try{u(!0),console.log("Sending email verification to:",e.email),await e.reload();const n=GA.currentUser||e;if(n.emailVerified)return console.log("User is already verified"),u(!1),await g(n),void(GA.currentUser&&f("/setup-source-code"));const r={url:`${window.location.origin}/verify-email`,handleCodeInApp:!0};if(await Fo(n,r),console.log("Verification email sent successfully"),KA)try{const e=Zf(KA,"users",n.uid);await hv(e,{lastVerificationAttempt:Sv(),verificationStatus:"pending"}),console.log("Updated Firestore with verification attempt timestamp")}catch(t){console.error("Error updating Firestore after sending verification email:",t)}}catch(d){throw console.error("Error sending verification email:",d),h(d.message),d}finally{u(!1)}},setUserProfile:l,setError:h,tempUserForSourceCode:p,verifySourceCodeAndCompleteLogin:async e=>{if(!p)return h("No user logged in"),void console.error("verifySourceCodeAndCompleteLogin: No temporary user found");try{u(!0),h(null);const t=Zf(KA,"users",p.uid),n=await lv(t);if(!n.exists())return h("User profile not found"),void console.error("verifySourceCodeAndCompleteLogin: User profile not found");const r=n.data();if(!r.sourceCodeHash)return h("Source code not set up"),void console.error("verifySourceCodeAndCompleteLogin: No source code hash found");if(!await yT.compare(e,r.sourceCodeHash))return void h("Invalid source code");i(p),l(r),m(null),u(!1),setTimeout((()=>{f("/")}),0)}catch(d){console.error("Error verifying source code:",d),h("Failed to verify source code"),u(!1)}},forceCheckEmailVerification:g,completeInitialSetupAndLogin:(e,t)=>{console.log("Initial source code setup complete. Finalizing login directly."),i(e),a(e),l(t),m(null),h(null),u(!1),f("/",{replace:!0})}};return(0,Ve.jsx)(bT.Provider,{value:v,children:n})},xT=()=>{const e=(0,t.useContext)(bT);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},ET=e=>{switch(e){case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email is already in use";case"auth/weak-password":return"Password is too weak";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}},AT=()=>{const{currentUser:e,userProfile:t}=xT();return{canViewProfile:n=>{var r;if(!e||!t)return!1;if(e.uid===n)return!0;const i=null===(r=t.followers)||void 0===r?void 0:r.includes(n);return!t.isPrivate||i},canViewContent:n=>{var r;if(!e||!t)return!1;if(e.uid===n)return!0;const i=null===(r=t.following)||void 0===r?void 0:r.includes(n);return!t.isPrivate||i}}},ST=(0,t.createContext)(void 0),TT=e=>{let{children:n}=e;const{currentUser:r}=xT(),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)(0),[l,c]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(r&&KA){c(!0);const e=fv(Wg(Jf(KA,"users",r.uid,"notifications"),Kg("createdAt","desc"),Xg(50)),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,...t,createdAt:t.createdAt.toDate(),type:t.type,senderId:t.senderId,recipientId:t.recipientId,isRead:t.isRead,senderName:t.senderName,senderAvatar:t.senderAvatar,postId:t.postId,commentId:t.commentId,roomId:t.roomId,content:t.content}}));o(t),s(t.filter((e=>!e.isRead)).length),c(!1)}),(e=>{console.error("Error fetching notifications: ",e),c(!1)}));return()=>e()}o([]),s(0),c(!1)}),[r]);return(0,Ve.jsx)(ST.Provider,{value:{notifications:i,unreadCount:a,markAsRead:async e=>{if(KA&&r)try{const t=Zf(KA,"users",r.uid,"notifications",e);await hv(t,{isRead:!0})}catch(Rb){console.error("Error marking notification as read:",Rb)}},markAllAsRead:async()=>{if(KA&&r)try{const e=i.filter((e=>!e.isRead)).map((e=>hv(Zf(KA,"users",r.uid,"notifications",e.id),{isRead:!0})));await Promise.all(e)}catch(Rb){console.error("Error marking all notifications as read:",Rb)}},deleteNotification:async e=>{if(KA&&r)try{const t=Zf(KA,"users",r.uid,"notifications",e);await pv(t)}catch(Rb){console.error("Error deleting notification:",Rb)}}},children:n})};const _T=t.createContext(null);function kT(){return t.useContext(_T)}const CT="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const IT=function(e){const{children:n,theme:r}=e,i=kT(),o=t.useMemo((()=>{const e=null===i?r:function(e,t){if("function"===typeof t)return t(e);return(0,De.A)({},e,t)}(i,r);return null!=e&&(e[CT]=null!==i),e}),[r,i]);return(0,Ve.jsx)(_T.Provider,{value:o,children:n})},RT=["value"],DT=t.createContext();const LT=()=>{const e=t.useContext(DT);return null!=e&&e},PT=function(e){let{value:t}=e,n=(0,Le.A)(e,RT);return(0,Ve.jsx)(DT.Provider,(0,De.A)({value:null==t||t},n))};var MT=n(4168);const OT={};function NT(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof r){const o=r(t),a=e?(0,De.A)({},n,{[e]:o}):o;return i?()=>a:a}return e?(0,De.A)({},n,{[e]:r}):(0,De.A)({},n,r)}),[e,n,r,i])}const jT=function(e){const{children:t,theme:n,themeId:r}=e,i=Ue(OT),o=kT()||OT,a=NT(r,i,n),s=NT(r,o,n,!0),l="rtl"===a.direction;return(0,Ve.jsx)(IT,{theme:s,children:(0,Ve.jsx)(Fe.T.Provider,{value:a,children:(0,Ve.jsx)(PT,{value:l,children:(0,Ve.jsx)(MT.A,{value:null==a?void 0:a.components,children:t})})})})},FT=["theme"];function UT(e){let{theme:t}=e,n=(0,Le.A)(e,FT);const r=t[qe.A];let i=r||t;return"function"!==typeof t&&(r&&!r.vars?i=(0,De.A)({},r,{vars:null}):t&&!t.vars&&(i=(0,De.A)({},t,{vars:null}))),(0,Ve.jsx)(jT,(0,De.A)({},n,{themeId:r?qe.A:void 0,theme:i}))}const BT=(0,t.createContext)(void 0),$T=e=>{let{children:n}=e;const[r,i]=(0,t.useState)((()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)}));(0,t.useEffect)((()=>{localStorage.setItem("darkMode",JSON.stringify(r))}),[r]);const o=(0,He.A)({palette:{mode:r?"dark":"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:r?"#121212":"#ffffff",paper:r?"#1e1e1e":"#ffffff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});return(0,Ve.jsx)(BT.Provider,{value:{isDarkMode:r,toggleDarkMode:()=>{i(!r)}},children:(0,Ve.jsx)(UT,{theme:o,children:n})})};var VT=n(8465),WT=n(9254),zT=n(1676),HT=n(9240);const qT=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var GT=n(423);function KT(e){return(0,GT.Ay)("MuiPaper",e)}(0,Ge.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const YT=["className","component","elevation","square","variant"],XT=(0,WT.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,De.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.divider}`},"elevation"===n.variant&&(0,De.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,HT.X4)("#fff",qT(n.elevation))}, ${(0,HT.X4)("#fff",qT(n.elevation))})`},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),QT=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:a=!1,variant:s="elevation"}=n,l=(0,Le.A)(n,YT),c=(0,De.A)({},n,{component:i,elevation:o,square:a,variant:s}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,VT.A)(o,KT,i)})(c);return(0,Ve.jsx)(XT,(0,De.A)({as:i,ownerState:c,className:(0,Pe.A)(u.root,r),ref:t},l))})),JT=QT;function ZT(e){return(0,GT.Ay)("MuiAppBar",e)}(0,Ge.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const e_=["className","color","enableColorOnDark","position"],t_=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,n_=(0,WT.Ay)(JT,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,zT.A)(n.position)}`],t[`color${(0,zT.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,De.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,De.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,De.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,De.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:t_(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:t_(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:t_(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:t_(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),r_=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:a="fixed"}=n,s=(0,Le.A)(n,e_),l=(0,De.A)({},n,{color:i,position:a,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,zT.A)(t)}`,`position${(0,zT.A)(n)}`]};return(0,VT.A)(i,ZT,r)})(l);return(0,Ve.jsx)(n_,(0,De.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,Pe.A)(c.root,r,"fixed"===a&&"mui-fixed"),ref:t},s))})),i_=r_;function o_(e){return(0,GT.Ay)("MuiToolbar",e)}(0,Ge.A)("MuiToolbar",["root","gutters","regular","dense"]);const a_=["className","component","disableGutters","variant"],s_=(0,WT.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),l_=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:a="regular"}=n,s=(0,Le.A)(n,a_),l=(0,De.A)({},n,{component:i,disableGutters:o,variant:a}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,VT.A)(i,o_,t)})(l);return(0,Ve.jsx)(s_,(0,De.A)({as:i,className:(0,Pe.A)(c.root,r),ref:t,ownerState:l},s))})),c_=l_;var u_=n(5471);const d_=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function h_(e){return(0,GT.Ay)("MuiAvatar",e)}(0,Ge.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var p_=n(5393);const m_=function(e){return"string"===typeof e};const f_=function(e,t,n){return void 0===e||m_(e)?t:(0,De.A)({},t,{ownerState:(0,De.A)({},t.ownerState,n)})};const g_=function(e,t,n){return"function"===typeof e?e(t,n):e};const v_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const y_=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const b_=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,Pe.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,De.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),a=(0,De.A)({},n,i,r);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=v_((0,De.A)({},i,r)),s=y_(r),l=y_(i),c=t(a),u=(0,Pe.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,De.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,De.A)({},c,n,l,s);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},w_=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],x_=["component","slots","slotProps"],E_=["component"];function A_(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s}=t,l=(0,Le.A)(t,w_),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=o,h=(0,Le.A)(o,x_),p=u[e]||r,m=g_(d[e],i),f=b_((0,De.A)({className:n},l,{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:m})),{props:{component:g},internalRef:v}=f,y=(0,Le.A)(f.props,E_),b=(0,p_.A)(v,null==m?void 0:m.ref,t.ref),w=a?a(y):{},x=(0,De.A)({},i,w),E="root"===e?g||c:g,A=f_(p,(0,De.A)({},"root"===e&&!c&&!u[e]&&s,"root"!==e&&!u[e]&&s,y,E&&{as:E},{ref:b}),x);return Object.keys(w).forEach((e=>{delete A[e]})),[p,A]}const S_=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],T_=(0,WT.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,De.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,De.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),__=(0,WT.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),k_=(0,WT.Ay)(d_,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const C_=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",slots:l={},slotProps:c={},imgProps:u,sizes:d,src:h,srcSet:p,variant:m="circular"}=r,f=(0,Le.A)(r,S_);let g=null;const v=function(e){let{crossOrigin:n,referrerPolicy:r,src:i,srcSet:o}=e;const[a,s]=t.useState(!1);return t.useEffect((()=>{if(!i&&!o)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,o&&(t.srcset=o),()=>{e=!1}}),[n,r,i,o]),a}((0,De.A)({},u,{src:h,srcSet:p})),y=h||p,b=y&&"error"!==v,w=(0,De.A)({},r,{colorDefault:!b,component:s,variant:m}),x=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,VT.A)(i,h_,t)})(w),[E,A]=A_("img",{className:x.img,elementType:__,externalForwardedProps:{slots:l,slotProps:{img:(0,De.A)({},u,c.img)}},additionalProps:{alt:i,src:h,srcSet:p,sizes:d},ownerState:w});return g=b?(0,Ve.jsx)(E,(0,De.A)({},A)):o||0===o?o:y&&i?i[0]:(0,Ve.jsx)(k_,{ownerState:w,className:x.fallback}),(0,Ve.jsx)(T_,(0,De.A)({as:s,ownerState:w,className:(0,Pe.A)(x.root,a),ref:n},f,{children:g}))})),I_=C_;function R_(e){return(0,GT.Ay)("MuiTypography",e)}(0,Ge.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const D_=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],L_=(0,WT.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,zT.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),P_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},M_={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},O_=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiTypography"}),r=(e=>M_[e]||e)(n.color),i=(0,Ne.A)((0,De.A)({},n,{color:r})),{align:o="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=P_}=i,p=(0,Le.A)(i,D_),m=(0,De.A)({},i,{align:o,color:r,className:a,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),f=s||(u?"p":h[d]||P_[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e,s={root:["root",o,"inherit"!==e.align&&`align${(0,zT.A)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,VT.A)(s,R_,a)})(m);return(0,Ve.jsx)(L_,(0,De.A)({as:f,ref:t,ownerState:m,className:(0,Pe.A)(g.root,a)},p))})),N_=O_;var j_=n(1506),F_=n(1976),U_=n(1573);function B_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$_(e,t)}function V_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$_(e,t)}const W_=t.createContext(null);function z_(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function H_(e,t,n){return null!=n[t]?n[t]:e.props[t]}function q_(e,n,r){var i=z_(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,c=a in i,u=n[a],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:H_(s,"exit",e),enter:H_(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:H_(s,"exit",e),enter:H_(s,"enter",e)})}})),o}var G_=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},K_=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(B_(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}V_(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,z_(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:H_(e,"appear",r),enter:H_(e,"enter",r),exit:H_(e,"exit",r)})}))):q_(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=z_(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,De.A)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,Le.A)(e,["component","childFactory"]),o=this.state.contextValue,a=G_(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(W_.Provider,{value:o},a):t.createElement(W_.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);K_.propTypes={},K_.defaultProps={component:"div",childFactory:function(e){return e}};const Y_=K_;var X_=n(8283),Q_=n(1824);const J_=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),p=(0,Pe.A)(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),m={width:s,height:s,top:-s/2+a,left:-s/2+o},f=(0,Pe.A)(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Ve.jsx)("span",{className:p,style:m,children:(0,Ve.jsx)("span",{className:f})})};const Z_=(0,Ge.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ek=["center","classes","className"];let tk,nk,rk,ik,ok=e=>e;const ak=(0,X_.i7)(tk||(tk=ok`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),sk=(0,X_.i7)(nk||(nk=ok`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),lk=(0,X_.i7)(rk||(rk=ok`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),ck=(0,WT.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),uk=(0,WT.Ay)(J_,{name:"MuiTouchRipple",slot:"Ripple"})(ik||(ik=ok`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Z_.rippleVisible,ak,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Z_.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),Z_.child,Z_.childLeaving,sk,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Z_.childPulsate,lk,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),dk=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=(0,Le.A)(r,ek),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),p=(0,Q_.A)(),m=t.useRef(null),f=t.useRef(null),g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;c((e=>[...e,(0,Ve.jsx)(uk,{classes:{ripple:(0,Pe.A)(o.ripple,Z_.ripple),rippleVisible:(0,Pe.A)(o.rippleVisible,Z_.rippleVisible),ripplePulsate:(0,Pe.A)(o.ripplePulsate,Z_.ripplePulsate),child:(0,Pe.A)(o.child,Z_.child),childLeaving:(0,Pe.A)(o.childLeaving,Z_.childLeaving),childPulsate:(0,Pe.A)(o.childPulsate,Z_.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=a}),[o]),v=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const s=a?null:f.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===m.current&&(m.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.start(80,(()=>{m.current&&(m.current(),m.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,g,p]),y=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),b=t.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&m.current)return m.current(),m.current=null,void p.start(0,(()=>{b(e,t)}));m.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[p]);return t.useImperativeHandle(n,(()=>({pulsate:y,start:v,stop:b})),[y,v,b]),(0,Ve.jsx)(ck,(0,De.A)({className:(0,Pe.A)(Z_.root,o.root,a),ref:f},s,{children:(0,Ve.jsx)(Y_,{component:null,exit:!0,children:l})}))})),hk=dk;function pk(e){return(0,GT.Ay)("MuiButtonBase",e)}const mk=(0,Ge.A)("MuiButtonBase",["root","disabled","focusVisible"]),fk=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],gk=(0,WT.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${mk.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),vk=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:m,onClick:f,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:w,onKeyUp:x,onMouseDown:E,onMouseLeave:A,onMouseUp:S,onTouchEnd:T,onTouchMove:_,onTouchStart:k,tabIndex:C=0,TouchRippleProps:I,touchRippleRef:R,type:D}=r,L=(0,Le.A)(r,fk),P=t.useRef(null),M=t.useRef(null),O=(0,j_.A)(M,R),{isFocusVisibleRef:N,onFocus:j,onBlur:F,ref:U}=(0,U_.A)(),[B,$]=t.useState(!1);c&&B&&$(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{$(!0),P.current.focus()}})),[]);const[V,W]=t.useState(!1);t.useEffect((()=>{W(!0)}),[]);const z=V&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,F_.A)((r=>{t&&t(r);return!n&&M.current&&M.current[e](r),!0}))}t.useEffect((()=>{B&&h&&!u&&V&&M.current.pulsate()}),[u,h,B,V]);const q=H("start",E),G=H("stop",g),K=H("stop",v),Y=H("stop",S),X=H("stop",(e=>{B&&e.preventDefault(),A&&A(e)})),Q=H("start",k),J=H("stop",T),Z=H("stop",_),ee=H("stop",(e=>{F(e),!1===N.current&&$(!1),m&&m(e)}),!1),te=(0,F_.A)((e=>{P.current||(P.current=e.currentTarget),j(e),!0===N.current&&($(!0),b&&b(e)),y&&y(e)})),ne=()=>{const e=P.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=t.useRef(!1),ie=(0,F_.A)((e=>{h&&!re.current&&B&&M.current&&" "===e.key&&(re.current=!0,M.current.stop(e,(()=>{M.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),f&&f(e))})),oe=(0,F_.A)((e=>{h&&" "===e.key&&M.current&&B&&!e.defaultPrevented&&(re.current=!1,M.current.stop(e,(()=>{M.current.pulsate(e)}))),x&&x(e),f&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&f(e)}));let ae=l;"button"===ae&&(L.href||L.to)&&(ae=p);const se={};"button"===ae?(se.type=void 0===D?"button":D,se.disabled=c):(L.href||L.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=(0,j_.A)(n,U,P);const ce=(0,De.A)({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:C,focusVisible:B}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,VT.A)(o,pk,i);return n&&r&&(a.root+=` ${r}`),a})(ce);return(0,Ve.jsxs)(gk,(0,De.A)({as:ae,className:(0,Pe.A)(ue.root,s),ownerState:ce,onBlur:ee,onClick:f,onContextMenu:G,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:q,onMouseLeave:X,onMouseUp:Y,onDragLeave:K,onTouchEnd:J,onTouchMove:Z,onTouchStart:Q,ref:le,tabIndex:c?-1:C,type:D},se,L,{children:[a,z?(0,Ve.jsx)(hk,(0,De.A)({ref:O,center:o},I)):null]}))})),yk=vk;function bk(e){return(0,GT.Ay)("MuiIconButton",e)}const wk=(0,Ge.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),xk=["edge","children","className","color","disabled","disableFocusRipple","size"],Ek=(0,WT.Ay)(yk,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,zT.A)(n.color)}`],n.edge&&t[`edge${(0,zT.A)(n.edge)}`],t[`size${(0,zT.A)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,De.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,De.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,De.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${wk.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),Ak=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Le.A)(n,xk),d=(0,De.A)({},n,{edge:r,color:a,disabled:s,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,a={root:["root",n&&"disabled","default"!==r&&`color${(0,zT.A)(r)}`,i&&`edge${(0,zT.A)(i)}`,`size${(0,zT.A)(o)}`]};return(0,VT.A)(a,bk,t)})(d);return(0,Ve.jsx)(Ek,(0,De.A)({className:(0,Pe.A)(h.root,o),centerRipple:!0,focusRipple:!l,disabled:s,ref:t},u,{ownerState:d,children:i}))})),Sk=Ak,Tk=e=>{const n=t.useRef({});return t.useEffect((()=>{n.current=e})),n.current},_k=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const kk=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,a=(0,Le.A)(e,_k),s=o?{}:g_(r,i),{props:l,internalRef:c}=b_((0,De.A)({},a,{externalSlotProps:s})),u=(0,p_.A)(c,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref);return f_(n,(0,De.A)({},l,{ref:u}),i)};const Ck=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=Tk({badgeContent:t,max:r});let a=n;!1!==n||0!==t||i||(a=!0);const{badgeContent:s,max:l=r}=a?o:e;return{badgeContent:s,invisible:a,max:l,displayValue:s&&Number(s)>l?`${l}+`:s}};function Ik(e){return(0,GT.Ay)("MuiBadge",e)}const Rk=(0,Ge.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Dk=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Lk=(0,WT.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Pk=(0,WT.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,zT.A)(n.anchorOrigin.vertical)}${(0,zT.A)(n.anchorOrigin.horizontal)}${(0,zT.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,zT.A)(n.color)}`],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Rk.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),Mk=t.forwardRef((function(e,t){var n,r,i,o,a,s;const l=(0,Je.b)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:m,overlap:f="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:w,slotProps:x,showZero:E=!1,variant:A="standard"}=l,S=(0,Le.A)(l,Dk),{badgeContent:T,invisible:_,max:k,displayValue:C}=Ck({max:y,invisible:v,badgeContent:b,showZero:E}),I=Tk({anchorOrigin:c,color:g,overlap:f,variant:A,badgeContent:b}),R=_||null==T&&"dot"!==A,{color:D=g,overlap:L=f,anchorOrigin:P=c,variant:M=A}=R?I:l,O="dot"!==M?C:void 0,N=(0,De.A)({},l,{badgeContent:T,invisible:R,max:k,displayValue:O,showZero:E,anchorOrigin:P,color:D,overlap:L,variant:M}),j=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=e,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${(0,zT.A)(n.vertical)}${(0,zT.A)(n.horizontal)}`,`anchorOrigin${(0,zT.A)(n.vertical)}${(0,zT.A)(n.horizontal)}${(0,zT.A)(i)}`,`overlap${(0,zT.A)(i)}`,"default"!==t&&`color${(0,zT.A)(t)}`]};return(0,VT.A)(s,Ik,a)})(N),F=null!=(n=null!=(r=null==w?void 0:w.root)?r:h.Root)?n:Lk,U=null!=(i=null!=(o=null==w?void 0:w.badge)?o:h.Badge)?i:Pk,B=null!=(a=null==x?void 0:x.root)?a:p.root,$=null!=(s=null==x?void 0:x.badge)?s:p.badge,V=kk({elementType:F,externalSlotProps:B,externalForwardedProps:S,additionalProps:{ref:t,as:d},ownerState:N,className:(0,Pe.A)(null==B?void 0:B.className,j.root,u)}),W=kk({elementType:U,externalSlotProps:$,ownerState:N,className:(0,Pe.A)(j.badge,null==$?void 0:$.className)});return(0,Ve.jsxs)(F,(0,De.A)({},V,{children:[m,(0,Ve.jsx)(U,(0,De.A)({},W,{children:O}))]}))})),Ok=Mk;var Nk=n(5537),jk=n(9608);function Fk(e){return(0,GT.Ay)("MuiButton",e)}const Uk=(0,Ge.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const Bk=t.createContext({});const $k=t.createContext(void 0),Vk=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Wk=e=>(0,De.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),zk=(0,WT.Ay)(yk,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,zT.A)(n.color)}`],t[`size${(0,zT.A)(n.size)}`],t[`${n.variant}Size${(0,zT.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],a="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,De.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,De.A)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:`1px solid ${(t.vars||t).palette[n.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Uk.focusVisible}`]:(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Uk.disabled}`]:(0,De.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${(0,HT.X4)(t.palette[n.color].main,.5)}`},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Uk.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Uk.disabled}`]:{boxShadow:"none"}}})),Hk=(0,WT.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,zT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Wk(t))})),qk=(0,WT.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,zT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Wk(t))})),Gk=t.forwardRef((function(e,n){const r=t.useContext(Bk),i=t.useContext($k),o=(0,Nk.A)(r,e),a=(0,Je.b)({props:o,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:m,focusVisibleClassName:f,fullWidth:g=!1,size:v="medium",startIcon:y,type:b,variant:w="text"}=a,x=(0,Le.A)(a,Vk),E=(0,De.A)({},a,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:g,size:v,type:b,variant:w}),A=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=e,s={root:["root",o,`${o}${(0,zT.A)(t)}`,`size${(0,zT.A)(i)}`,`${o}Size${(0,zT.A)(i)}`,`color${(0,zT.A)(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,zT.A)(i)}`],endIcon:["icon","endIcon",`iconSize${(0,zT.A)(i)}`]},l=(0,VT.A)(s,Fk,a);return(0,De.A)({},a,l)})(E),S=y&&(0,Ve.jsx)(Hk,{className:A.startIcon,ownerState:E,children:y}),T=m&&(0,Ve.jsx)(qk,{className:A.endIcon,ownerState:E,children:m}),_=i||"";return(0,Ve.jsxs)(zk,(0,De.A)({ownerState:E,className:(0,Pe.A)(r.className,A.root,u,_),component:c,disabled:d,focusRipple:!p,focusVisibleClassName:(0,Pe.A)(A.focusVisible,f),ref:n,type:b},x,{classes:A,children:[S,s,T]}))})),Kk=Gk;var Yk=n(7402);const Xk=t.createContext({});function Qk(e){return(0,GT.Ay)("MuiList",e)}(0,Ge.A)("MuiList",["root","padding","dense","subheader"]);const Jk=["children","className","component","dense","disablePadding","subheader"],Zk=(0,WT.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,De.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),eC=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,u=(0,Le.A)(r,Jk),d=t.useMemo((()=>({dense:s})),[s]),h=(0,De.A)({},r,{component:a,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,VT.A)(o,Qk,t)})(h);return(0,Ve.jsx)(Xk.Provider,{value:d,children:(0,Ve.jsxs)(Zk,(0,De.A)({as:a,className:(0,Pe.A)(p.root,o),ref:n,ownerState:h},u,{children:[c,i]}))})})),tC=eC;function nC(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const rC=nC;var iC=n(9044);const oC=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function aC(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function sC(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function lC(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function cC(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&lC(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const uC=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Le.A)(e,oC),p=t.useRef(null),m=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,iC.A)((()=>{i&&p.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${rC((0,Yk.A)(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const f=(0,j_.A)(p,n);let g=-1;t.Children.forEach(a,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=n),g===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=a.length&&(g=-1))):g===n&&(g+=1,g>=a.length&&(g=-1))}));const v=t.Children.map(a,((e,n)=>{if(n===g){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Ve.jsx)(tC,(0,De.A)({role:"menu",ref:f,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,Yk.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),cC(t,r,c,l,aC);else if("ArrowUp"===n)e.preventDefault(),cC(t,r,c,l,sC);else if("Home"===n)e.preventDefault(),cC(t,null,c,l,aC);else if("End"===n)e.preventDefault(),cC(t,null,c,l,sC);else if(1===n.length){const i=m.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&lC(r,i);i.previousKeyMatched&&(s||cC(t,r,!1,l,aC,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},h,{children:v}))})),dC=uC;var hC=n(1209),pC=n(827);function mC(e){var n;return parseInt(t.version,10)>=19?(null==e||null==(n=e.props)?void 0:n.ref)||null:(null==e?void 0:e.ref)||null}const fC=!1;var gC=function(e){return e.scrollTop},vC="unmounted",yC="exited",bC="entering",wC="entered",xC="exiting",EC=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=yC,r.appearStatus=bC):i=wC:i=t.unmountOnExit||t.mountOnEnter?vC:yC,r.state={status:i},r.nextCallback=null,r}V_(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===vC?{status:yC}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==bC&&n!==wC&&(t=bC):n!==bC&&n!==wC||(t=xC)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===bC){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this);n&&gC(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===yC&&this.setState({status:vC})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[be.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||fC?this.safeSetState({status:wC},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:bC},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:wC},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:be.findDOMNode(this);t&&!fC?(this.props.onExit(r),this.safeSetState({status:xC},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:yC},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:yC},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===vC)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Le.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(W_.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function AC(){}EC.contextType=W_,EC.propTypes={},EC.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:AC,onEntering:AC,onEntered:AC,onExit:AC,onExiting:AC,onExited:AC},EC.UNMOUNTED=vC,EC.EXITED=yC,EC.ENTERING=bC,EC.ENTERED=wC,EC.EXITING=xC;const SC=EC;function TC(){const e=$e(tt.A);return e[qe.A]||e}const _C=e=>e.scrollTop;function kC(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}const CC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function IC(e){return`scale(${e}, ${e**2})`}const RC={entering:{opacity:1,transform:IC(1)},entered:{opacity:1,transform:"none"}},DC="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),LC=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:m,timeout:f="auto",TransitionComponent:g=SC}=e,v=(0,Le.A)(e,CC),y=(0,Q_.A)(),b=t.useRef(),w=TC(),x=t.useRef(null),E=(0,j_.A)(x,mC(o),n),A=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},S=A(u),T=A(((e,t)=>{_C(e);const{duration:n,delay:r,easing:i}=kC({style:m,timeout:f,easing:a},{mode:"enter"});let o;"auto"===f?(o=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:DC?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),_=A(c),k=A(p),C=A((e=>{const{duration:t,delay:n,easing:r}=kC({style:m,timeout:f,easing:a},{mode:"exit"});let i;"auto"===f?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:DC?i:.666*i,delay:DC?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=IC(.75),d&&d(e)})),I=A(h);return(0,Ve.jsx)(g,(0,De.A)({appear:i,in:s,nodeRef:x,onEnter:T,onEntered:_,onEntering:S,onExit:C,onExited:I,onExiting:k,addEndListener:e=>{"auto"===f&&y.start(b.current||0,e),r&&r(x.current,e)},timeout:"auto"===f?null:f},v,{children:(e,n)=>t.cloneElement(o,(0,De.A)({style:(0,De.A)({opacity:0,transform:IC(.75),visibility:"exited"!==e||s?void 0:"hidden"},RC[e],m,o.props.style),ref:E},n))}))}));LC.muiSupportAuto=!0;const PC=LC;var MC=n(6907);const OC=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function NC(e){const t=[],n=[];return Array.from(e.querySelectorAll(OC)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function jC(){return!0}const FC=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:a=NC,isEnabled:s=jC,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=t.useRef(null),m=t.useRef(!1),f=t.useRef(null),g=(0,p_.A)(mC(n),f),v=t.useRef(null);t.useEffect((()=>{l&&f.current&&(m.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!f.current)return;const e=(0,MC.A)(f.current);return f.current.contains(e.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex","-1"),m.current&&f.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!f.current)return;const e=(0,MC.A)(f.current),t=t=>{v.current=t,!i&&s()&&"Tab"===t.key&&e.activeElement===f.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=f.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!m.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=a(f.current)),n.length>0){var r,o;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,o,s,l,a]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),m.current=!0};return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),m.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var UC=n(1399),BC=n(5587);const $C=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=t.useState(null),l=(0,p_.A)(t.isValidElement(r)?mC(r):null,n);if((0,UC.A)((()=>{o||s(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),(0,UC.A)((()=>{if(a&&!o)return(0,BC.A)(n,a),()=>{(0,BC.A)(n,null)}}),[n,a,o]),o){if(t.isValidElement(r)){const e={ref:l};return t.cloneElement(r,e)}return(0,Ve.jsx)(t.Fragment,{children:r})}return(0,Ve.jsx)(t.Fragment,{children:a?be.createPortal(r,a):a})})),VC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],WC={entering:{opacity:1},entered:{opacity:1}},zC=t.forwardRef((function(e,n){const r=TC(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:m,onExiting:f,style:g,timeout:v=i,TransitionComponent:y=SC}=e,b=(0,Le.A)(e,VC),w=t.useRef(null),x=(0,j_.A)(w,mC(s),n),E=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},A=E(h),S=E(((e,t)=>{_C(e);const n=kC({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),u&&u(e,t)})),T=E(d),_=E(f),k=E((e=>{const t=kC({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),p&&p(e)})),C=E(m);return(0,Ve.jsx)(y,(0,De.A)({appear:a,in:c,nodeRef:w,onEnter:S,onEntered:T,onEntering:A,onExit:k,onExited:C,onExiting:_,addEndListener:e=>{o&&o(w.current,e)},timeout:v},b,{children:(e,n)=>t.cloneElement(s,(0,De.A)({style:(0,De.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},WC[e],g,s.props.style),ref:x},n))}))})),HC=zC;function qC(e){return(0,GT.Ay)("MuiBackdrop",e)}(0,Ge.A)("MuiBackdrop",["root","invisible"]);const GC=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],KC=(0,WT.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),YC=t.forwardRef((function(e,t){var n,r,i;const o=(0,Je.b)({props:e,name:"MuiBackdrop"}),{children:a,className:s,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:m={},TransitionComponent:f=HC,transitionDuration:g}=o,v=(0,Le.A)(o,GC),y=(0,De.A)({},o,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,VT.A)(r,qC,t)})(y),w=null!=(n=p.root)?n:u.root;return(0,Ve.jsx)(f,(0,De.A)({in:h,timeout:g},v,{children:(0,Ve.jsx)(KC,(0,De.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=m.root)?i:c.Root)?r:l,className:(0,Pe.A)(b.root,s,null==w?void 0:w.className),ownerState:(0,De.A)({},y,null==w?void 0:w.ownerState),classes:b,ref:t,children:a}))}))})),XC=YC;var QC=n(2529),JC=n(5511),ZC=n(8635);function eI(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function tI(e){return parseInt((0,ZC.A)(e).getComputedStyle(e).paddingRight,10)||0}function nI(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&eI(e,i)}))}function rI(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function iI(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,MC.A)(e);return t.body===e?(0,ZC.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=nC((0,MC.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${tI(r)+e}px`;const t=(0,MC.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${tI(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,MC.A)(r).body;else{const t=r.parentElement,n=(0,ZC.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const oI=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&eI(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);nI(t,e.mount,e.modalRef,r,!0);const i=rI(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=rI(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=iI(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=rI(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&eI(e.modalRef,t),nI(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&eI(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const aI=function(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,manager:o=oI,closeAfterTransition:a=!1,onTransitionEnter:s,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,p=t.useRef({}),m=t.useRef(null),f=t.useRef(null),g=(0,p_.A)(f,h),[v,y]=t.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const x=()=>(p.current.modalRef=f.current,p.current.mount=m.current,p.current),E=()=>{o.mount(x(),{disableScrollLock:i}),f.current&&(f.current.scrollTop=0)},A=(0,QC.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||(0,MC.A)(m.current).body;o.add(x(),e),f.current&&E()})),S=t.useCallback((()=>o.isTopModal(x())),[o]),T=(0,QC.A)((e=>{m.current=e,e&&(d&&S()?E():f.current&&eI(f.current,w))})),_=t.useCallback((()=>{o.remove(x(),w)}),[w,o]);t.useEffect((()=>()=>{_()}),[_]),t.useEffect((()=>{d?A():b&&a||_()}),[d,_,b,a,A]);const k=e=>t=>{var n;null==(n=e.onKeyDown)||n.call(e,t),"Escape"===t.key&&229!==t.which&&S()&&(r||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},C=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=v_(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,De.A)({},n,t);return(0,De.A)({role:"presentation"},r,{onKeyDown:k(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-hidden":!0},e,{onClick:C(e),open:d})},getTransitionProps:()=>({onEnter:(0,JC.A)((()=>{y(!1),s&&s()}),null==c?void 0:c.props.onEnter),onExited:(0,JC.A)((()=>{y(!0),l&&l(),a&&_()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:T,isTopModal:S,exited:v,hasTransition:b}};function sI(e){return(0,GT.Ay)("MuiModal",e)}(0,Ge.A)("MuiModal",["root","hidden","backdrop"]);const lI=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],cI=(0,WT.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),uI=(0,WT.Ay)(XC,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),dI=t.forwardRef((function(e,n){var r,i,o,a,s,l;const c=(0,Je.b)({name:"MuiModal",props:e}),{BackdropComponent:u=uI,BackdropProps:d,className:h,closeAfterTransition:p=!1,children:m,container:f,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:x=!1,disablePortal:E=!1,disableRestoreFocus:A=!1,disableScrollLock:S=!1,hideBackdrop:T=!1,keepMounted:_=!1,onBackdropClick:k,open:C,slotProps:I,slots:R}=c,D=(0,Le.A)(c,lI),L=(0,De.A)({},c,{closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:x,disablePortal:E,disableRestoreFocus:A,disableScrollLock:S,hideBackdrop:T,keepMounted:_}),{getRootProps:P,getBackdropProps:M,getTransitionProps:O,portalRef:N,isTopModal:j,exited:F,hasTransition:U}=aI((0,De.A)({},L,{rootRef:n})),B=(0,De.A)({},L,{exited:F}),$=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,VT.A)(i,sI,r)})(B),V={};if(void 0===m.props.tabIndex&&(V.tabIndex="-1"),U){const{onEnter:e,onExited:t}=O();V.onEnter=e,V.onExited=t}const W=null!=(r=null!=(i=null==R?void 0:R.root)?i:v.Root)?r:cI,z=null!=(o=null!=(a=null==R?void 0:R.backdrop)?a:v.Backdrop)?o:u,H=null!=(s=null==I?void 0:I.root)?s:y.root,q=null!=(l=null==I?void 0:I.backdrop)?l:y.backdrop,G=kk({elementType:W,externalSlotProps:H,externalForwardedProps:D,getSlotProps:P,additionalProps:{ref:n,as:g},ownerState:B,className:(0,Pe.A)(h,null==H?void 0:H.className,null==$?void 0:$.root,!B.open&&B.exited&&(null==$?void 0:$.hidden))}),K=kk({elementType:z,externalSlotProps:q,additionalProps:d,getSlotProps:e=>M((0,De.A)({},e,{onClick:t=>{k&&k(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,Pe.A)(null==q?void 0:q.className,null==d?void 0:d.className,null==$?void 0:$.backdrop),ownerState:B});return _||C||U&&!F?(0,Ve.jsx)($C,{ref:N,container:f,disablePortal:E,children:(0,Ve.jsxs)(W,(0,De.A)({},G,{children:[!T&&u?(0,Ve.jsx)(z,(0,De.A)({},K)):null,(0,Ve.jsx)(FC,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:A,isEnabled:j,open:C,children:t.cloneElement(m,V)})]}))}):null})),hI=dI;function pI(e){return(0,GT.Ay)("MuiPopover",e)}(0,Ge.A)("MuiPopover",["root","paper"]);const mI=["onEntering"],fI=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],gI=["slotProps"];function vI(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function yI(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function bI(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function wI(e){return"function"===typeof e?e():e}const xI=(0,WT.Ay)(hI,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),EI=(0,WT.Ay)(JT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),AI=t.forwardRef((function(e,n){var r,i,o;const a=(0,Je.b)({props:e,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:p,container:m,elevation:f=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:b,slotProps:w,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:E=PC,transitionDuration:A="auto",TransitionProps:{onEntering:S}={},disableScrollLock:T=!1}=a,_=(0,Le.A)(a.TransitionProps,mI),k=(0,Le.A)(a,fI),C=null!=(r=null==w?void 0:w.paper)?r:y,I=t.useRef(),R=(0,j_.A)(I,C.ref),D=(0,De.A)({},a,{anchorOrigin:c,anchorReference:d,elevation:f,marginThreshold:g,externalPaperSlotProps:C,transformOrigin:x,TransitionComponent:E,transitionDuration:A,TransitionProps:_}),L=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],paper:["paper"]},pI,t)})(D),P=t.useCallback((()=>{if("anchorPosition"===d)return u;const e=wI(l),t=(e&&1===e.nodeType?e:(0,Yk.A)(I.current).body).getBoundingClientRect();return{top:t.top+vI(t,c.vertical),left:t.left+yI(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),M=t.useCallback((e=>({vertical:vI(e,x.vertical),horizontal:yI(e,x.horizontal)})),[x.horizontal,x.vertical]),O=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=M(t);if("none"===d)return{top:null,left:null,transformOrigin:bI(n)};const r=P();let i=r.top-n.vertical,o=r.left-n.horizontal;const a=i+t.height,s=o+t.width,c=(0,pC.A)(wI(l)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&a>u){const e=a-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(s>h){const e=s-h;o-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(o)}px`,transformOrigin:bI(n)}}),[l,d,P,M,g]),[N,j]=t.useState(v),F=t.useCallback((()=>{const e=I.current;if(!e)return;const t=O(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,j(!0)}),[O]);t.useEffect((()=>(T&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F))),[l,T,F]);t.useEffect((()=>{v&&F()})),t.useImperativeHandle(s,(()=>v?{updatePosition:()=>{F()}}:null),[v,F]),t.useEffect((()=>{if(!v)return;const e=(0,hC.A)((()=>{F()})),t=(0,pC.A)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,v,F]);let U=A;"auto"!==A||E.muiSupportAuto||(U=void 0);const B=m||(l?(0,Yk.A)(wI(l)).body:void 0),$=null!=(i=null==b?void 0:b.root)?i:xI,V=null!=(o=null==b?void 0:b.paper)?o:EI,W=kk({elementType:V,externalSlotProps:(0,De.A)({},C,{style:N?C.style:(0,De.A)({},C.style,{opacity:0})}),additionalProps:{elevation:f,ref:R},ownerState:D,className:(0,Pe.A)(L.paper,null==C?void 0:C.className)}),z=kk({elementType:$,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:k,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:B,open:v},ownerState:D,className:(0,Pe.A)(L.root,p)}),{slotProps:H}=z,q=(0,Le.A)(z,gI);return(0,Ve.jsx)($,(0,De.A)({},q,!m_($)&&{slotProps:H,disableScrollLock:T},{children:(0,Ve.jsx)(E,(0,De.A)({appear:!0,in:v,onEntering:(e,t)=>{S&&S(e,t),F()},onExited:()=>{j(!1)},timeout:U},_,{children:(0,Ve.jsx)(V,(0,De.A)({},W,{children:h}))}))}))})),SI=AI;function TI(e){return(0,GT.Ay)("MuiMenu",e)}(0,Ge.A)("MuiMenu",["root","paper","list"]);const _I=["onEntering"],kI=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],CI={vertical:"top",horizontal:"right"},II={vertical:"top",horizontal:"left"},RI=(0,WT.Ay)(SI,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),DI=(0,WT.Ay)(EI,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),LI=(0,WT.Ay)(dC,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),PI=t.forwardRef((function(e,n){var r,i;const o=(0,Je.b)({props:e,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:p={},PopoverClasses:m,transitionDuration:f="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:b={}}=o,w=(0,Le.A)(o.TransitionProps,_I),x=(0,Le.A)(o,kI),E=LT(),A=(0,De.A)({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:f,TransitionProps:w,variant:v}),S=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],paper:["paper"],list:["list"]},TI,t)})(A),T=a&&!c&&h,_=t.useRef(null);let k=-1;t.Children.map(s,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===k)&&(k=n))}));const C=null!=(r=y.paper)?r:DI,I=null!=(i=b.paper)?i:p,R=kk({elementType:y.root,externalSlotProps:b.root,ownerState:A,className:[S.root,l]}),D=kk({elementType:C,externalSlotProps:I,ownerState:A,className:S.paper});return(0,Ve.jsx)(RI,(0,De.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?CI:II,slots:{paper:C,root:y.root},slotProps:{root:R,paper:D},open:h,ref:n,transitionDuration:f,TransitionProps:(0,De.A)({onEntering:(e,t)=>{_.current&&_.current.adjustStyleForScrollbar(e,{direction:E?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:A},x,{classes:m,children:(0,Ve.jsx)(LI,(0,De.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:_,autoFocus:a&&(-1===k||c),autoFocusItem:T,variant:v},u,{className:(0,Pe.A)(S.list,u.className),children:s}))}))})),MI=PI;function OI(e){return(0,GT.Ay)("MuiDivider",e)}const NI=(0,Ge.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function jI(e){return(0,GT.Ay)("MuiListItemIcon",e)}const FI=(0,Ge.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function UI(e){return(0,GT.Ay)("MuiListItemText",e)}const BI=(0,Ge.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function $I(e){return(0,GT.Ay)("MuiMenuItem",e)}const VI=(0,Ge.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),WI=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],zI=(0,WT.Ay)(yk,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${VI.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${VI.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${VI.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${VI.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${VI.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${NI.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${NI.inset}`]:{marginLeft:52},[`& .${BI.root}`]:{marginTop:0,marginBottom:0},[`& .${BI.inset}`]:{paddingLeft:36},[`& .${FI.root}`]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,De.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${FI.root} svg`]:{fontSize:"1.25rem"}}))})),HI=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,p=(0,Le.A)(r,WI),m=t.useContext(Xk),f=t.useMemo((()=>({dense:a||m.dense||!1,disableGutters:l})),[m.dense,a,l]),g=t.useRef(null);(0,iC.A)((()=>{i&&g.current&&g.current.focus()}),[i]);const v=(0,De.A)({},r,{dense:f.dense,divider:s,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,s={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,VT.A)(s,$I,a);return(0,De.A)({},a,l)})(r),b=(0,j_.A)(g,n);let w;return r.disabled||(w=void 0!==d?d:-1),(0,Ve.jsx)(Xk.Provider,{value:f,children:(0,Ve.jsx)(zI,(0,De.A)({ref:b,role:u,tabIndex:w,component:o,focusVisibleClassName:(0,Pe.A)(y.focusVisible,c),className:(0,Pe.A)(y.root,h)},p,{ownerState:v,classes:y}))})})),qI=HI,GI=["className"],KI=(0,WT.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),YI=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItemIcon"}),{className:i}=r,o=(0,Le.A)(r,GI),a=t.useContext(Xk),s=(0,De.A)({},r,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,VT.A)(r,jI,n)})(s);return(0,Ve.jsx)(KI,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))})),XI=YI,QI=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],JI=(0,WT.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${BI.primary}`]:t.primary},{[`& .${BI.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,De.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),ZI=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=(0,Le.A)(r,QI),{dense:p}=t.useContext(Xk);let m=null!=l?l:i,f=u;const g=(0,De.A)({},r,{disableTypography:a,inset:s,primary:!!m,secondary:!!f,dense:p}),v=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,a={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,VT.A)(a,UI,t)})(g);return null==m||m.type===N_||a||(m=(0,Ve.jsx)(N_,(0,De.A)({variant:p?"body2":"body1",className:v.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:m}))),null==f||f.type===N_||a||(f=(0,Ve.jsx)(N_,(0,De.A)({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:f}))),(0,Ve.jsxs)(JI,(0,De.A)({className:(0,Pe.A)(v.root,o),ownerState:g,ref:n},h,{children:[m,f]}))})),eR=ZI,tR=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],nR=(0,WT.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,HT.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),rR=(0,WT.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===n.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})})),iR=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:a=(i?"div":"hr"),flexItem:s=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==a?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Le.A)(n,tR),m=(0,De.A)({},n,{absolute:r,component:a,flexItem:s,light:l,orientation:c,role:u,textAlign:d,variant:h}),f=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===a&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,VT.A)(c,OI,r)})(m);return(0,Ve.jsx)(nR,(0,De.A)({as:a,className:(0,Pe.A)(f.root,o),role:u,ref:t,ownerState:m},p,{children:i?(0,Ve.jsx)(rR,{className:f.wrapper,ownerState:m,children:i}):null}))}));iR.muiSkipListHighlight=!0;const oR=iR,aR=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),sR=(0,u_.A)((0,Ve.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),lR=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),cR=(0,u_.A)((0,Ve.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),uR=(0,u_.A)((0,Ve.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),dR=()=>{const e=J(),[n,r]=(0,t.useState)(null),{currentUser:i,logout:o}=xT(),a=()=>{r(null)},s=t=>{a(),setTimeout((()=>{e(t,{replace:!0})}),50)};return(0,Ve.jsx)(Ve.Fragment,{children:(0,Ve.jsx)(i_,{position:"static",elevation:0,sx:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none",borderBottom:"none",padding:"0 24px"},children:(0,Ve.jsxs)(c_,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",minHeight:"auto"},disableGutters:!0,children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,Ve.jsx)(I_,{src:"/logo.png",alt:"Side Eye",sx:{width:40,height:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>e("/")}),(0,Ve.jsx)(N_,{variant:"h5",component:"div",sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main","&:hover":{opacity:.8}},onClick:()=>e("/"),children:"SideEye"})]}),(0,Ve.jsx)(Qe,{sx:{display:"flex",alignItems:"center",gap:2},children:i?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Sk,{color:"inherit",onClick:()=>e("/notifications"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(Ok,{badgeContent:0,color:"error",children:(0,Ve.jsx)(aR,{})})}),(0,Ve.jsx)(Sk,{color:"inherit",onClick:e=>{r(e.currentTarget)},sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(sR,{})})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Kk,{color:"inherit",onClick:()=>e("/login"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Login"}),(0,Ve.jsx)(Kk,{color:"inherit",onClick:()=>e("/register"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Register"})]})}),(0,Ve.jsxs)(MI,{anchorEl:n,open:Boolean(n),onClose:a,sx:{"& .MuiPaper-root":{borderRadius:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",minWidth:200,border:"none"}},children:[(0,Ve.jsxs)(qI,{onClick:()=>s("/creators-hub"),children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(lR,{})}),(0,Ve.jsx)(eR,{primary:"Creators Hub"})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(qI,{onClick:()=>s("/settings"),children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(cR,{})}),(0,Ve.jsx)(eR,{primary:"Settings"})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(qI,{onClick:async()=>{await o(),a()},children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(uR,{})}),(0,Ve.jsx)(eR,{children:"Logout"})]})]})]})})})},hR=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function pR(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,pC.A)(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=o.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+s-r.left}px)`:`translateX(${o.innerWidth+s-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const mR=t.forwardRef((function(e,n){const r=TC(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:d=i,in:h,onEnter:p,onEntered:m,onEntering:f,onExit:g,onExited:v,onExiting:y,style:b,timeout:w=o,TransitionComponent:x=SC}=e,E=(0,Le.A)(e,hR),A=t.useRef(null),S=(0,j_.A)(mC(l),A,n),T=e=>t=>{e&&(void 0===t?e(A.current):e(A.current,t))},_=T(((e,t)=>{pR(u,e,c),_C(e),p&&p(e,t)})),k=T(((e,t)=>{const n=kC({timeout:w,style:b,easing:d},{mode:"enter"});e.style.webkitTransition=r.transitions.create("-webkit-transform",(0,De.A)({},n)),e.style.transition=r.transitions.create("transform",(0,De.A)({},n)),e.style.webkitTransform="none",e.style.transform="none",f&&f(e,t)})),C=T(m),I=T(y),R=T((e=>{const t=kC({timeout:w,style:b,easing:d},{mode:"exit"});e.style.webkitTransition=r.transitions.create("-webkit-transform",t),e.style.transition=r.transitions.create("transform",t),pR(u,e,c),g&&g(e)})),D=T((e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)})),L=t.useCallback((()=>{A.current&&pR(u,A.current,c)}),[u,c]);return t.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=(0,hC.A)((()=>{A.current&&pR(u,A.current,c)})),t=(0,pC.A)(A.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),t.useEffect((()=>{h||L()}),[h,L]),(0,Ve.jsx)(x,(0,De.A)({nodeRef:A,onEnter:_,onEntered:C,onEntering:k,onExit:R,onExited:D,onExiting:I,addEndListener:e=>{a&&a(A.current,e)},appear:s,in:h,timeout:w},E,{children:(e,n)=>t.cloneElement(l,(0,De.A)({ref:S,style:(0,De.A)({visibility:"exited"!==e||h?void 0:"hidden"},b,l.props.style)},n))}))})),fR=mR;var gR=n(3828);function vR(e){return(0,GT.Ay)("MuiListItem",e)}const yR=(0,Ge.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function bR(e){return(0,GT.Ay)("MuiListItemButton",e)}const wR=(0,Ge.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function xR(e){return(0,GT.Ay)("MuiListItemSecondaryAction",e)}(0,Ge.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const ER=["className"],AR=(0,WT.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),SR=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=(0,Le.A)(r,ER),a=t.useContext(Xk),s=(0,De.A)({},r,{disableGutters:a.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,VT.A)(r,xR,n)})(s);return(0,Ve.jsx)(AR,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))}));SR.muiName="ListItemSecondaryAction";const TR=SR,_R=["className"],kR=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],CR=(0,WT.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,De.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${wR.root}`]:{paddingRight:48}},{[`&.${yR.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${yR.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${yR.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${yR.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yR.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),IR=(0,WT.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),RR=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:a=!1,children:s,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:m=!1,disabled:f=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:w,selected:x=!1,slotProps:E={},slots:A={}}=r,S=(0,Le.A)(r.ContainerProps,_R),T=(0,Le.A)(r,kR),_=t.useContext(Xk),k=t.useMemo((()=>({dense:m||_.dense||!1,alignItems:i,disableGutters:g})),[i,_.dense,m,g]),C=t.useRef(null);(0,iC.A)((()=>{o&&C.current&&C.current.focus()}),[o]);const I=t.Children.toArray(s),R=I.length&&(0,gR.A)(I[I.length-1],["ListItemSecondaryAction"]),D=(0,De.A)({},r,{alignItems:i,autoFocus:o,button:a,dense:k.dense,disabled:f,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:R,selected:x}),L=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,VT.A)(d,vR,r)})(D),P=(0,j_.A)(C,n),M=A.root||u.Root||CR,O=E.root||d.root||{},N=(0,De.A)({className:(0,Pe.A)(L.root,O.className,l),disabled:f},T);let j=c||"li";return a&&(N.component=c||"div",N.focusVisibleClassName=(0,Pe.A)(yR.focusVisible,b),j=yk),R?(j=N.component||c?j:"div","li"===h&&("li"===j?j="div":"li"===N.component&&(N.component="div")),(0,Ve.jsx)(Xk.Provider,{value:k,children:(0,Ve.jsxs)(IR,(0,De.A)({as:h,className:(0,Pe.A)(L.container,p),ref:P,ownerState:D},S,{children:[(0,Ve.jsx)(M,(0,De.A)({},O,!m_(M)&&{as:j,ownerState:(0,De.A)({},D,O.ownerState)},N,{children:I})),I.pop()]}))})):(0,Ve.jsx)(Xk.Provider,{value:k,children:(0,Ve.jsxs)(M,(0,De.A)({},O,{as:j,ref:P},!m_(M)&&{ownerState:(0,De.A)({},D,O.ownerState)},N,{children:[I,w&&(0,Ve.jsx)(TR,{children:w})]}))})})),DR=RR;function LR(e){return(0,GT.Ay)("MuiListItemAvatar",e)}(0,Ge.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const PR=["className"],MR=(0,WT.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,De.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),OR=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItemAvatar"}),{className:i}=r,o=(0,Le.A)(r,PR),a=t.useContext(Xk),s=(0,De.A)({},r,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,VT.A)(r,LR,n)})(s);return(0,Ve.jsx)(MR,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))})),NR=OR;var jR=n(3539);function FR(e){return(0,GT.Ay)("MuiDialog",e)}const UR=(0,Ge.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const BR=t.createContext({}),$R=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],VR=(0,WT.Ay)(XC,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),WR=(0,WT.Ay)(hI,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),zR=(0,WT.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,zT.A)(n.scroll)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),HR=(0,WT.Ay)(JT,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,zT.A)(n.scroll)}`],t[`paperWidth${(0,zT.A)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${UR.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`,[`&.${UR.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${UR.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),qR=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiDialog"}),i=TC(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:m=!1,maxWidth:f="sm",onBackdropClick:g,onClick:v,onClose:y,open:b,PaperComponent:w=JT,PaperProps:x={},scroll:E="paper",TransitionComponent:A=HC,transitionDuration:S=o,TransitionProps:T}=r,_=(0,Le.A)(r,$R),k=(0,De.A)({},r,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:m,maxWidth:f,scroll:E}),C=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,a={root:["root"],container:["container",`scroll${(0,zT.A)(n)}`],paper:["paper",`paperScroll${(0,zT.A)(n)}`,`paperWidth${(0,zT.A)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,VT.A)(a,FR,t)})(k),I=t.useRef(),R=(0,jR.A)(s),D=t.useMemo((()=>({titleId:R})),[R]);return(0,Ve.jsx)(WR,(0,De.A)({className:(0,Pe.A)(C.root,d),closeAfterTransition:!0,components:{Backdrop:VR},componentsProps:{backdrop:(0,De.A)({transitionDuration:S,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:b,ref:n,onClick:e=>{v&&v(e),I.current&&(I.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:k},_,{children:(0,Ve.jsx)(A,(0,De.A)({appear:!0,in:b,timeout:S,role:"presentation"},T,{children:(0,Ve.jsx)(zR,{className:(0,Pe.A)(C.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:k,children:(0,Ve.jsx)(HR,(0,De.A)({as:w,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":R},x,{className:(0,Pe.A)(C.paper,x.className),ownerState:k,children:(0,Ve.jsx)(BR.Provider,{value:D,children:u})}))})}))}))})),GR=qR;var KR=n(7483),YR=n(8099),XR=n(1927);const QR=["onChange","maxRows","minRows","style","value"];function JR(e){return parseInt(e,10)||0}const ZR={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function eD(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const tD=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s}=e,l=(0,Le.A)(e,QR),{current:c}=t.useRef(null!=s),u=t.useRef(null),d=(0,p_.A)(n,u),h=t.useRef(null),p=t.useRef(null),m=t.useCallback((()=>{const t=u.current,n=p.current;if(!t||!n)return;const r=(0,ZC.A)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=r.boxSizing,s=JR(r.paddingBottom)+JR(r.paddingTop),l=JR(r.borderBottomWidth)+JR(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;o&&(h=Math.max(Number(o)*d,h)),i&&(h=Math.min(Number(i)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===a?s+l:0),overflowing:Math.abs(h-c)<=1}}),[i,o,e.placeholder]),f=(0,QC.A)((()=>{const e=u.current,t=m();if(!e||!t||eD(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=t.useCallback((()=>{const e=u.current,t=m();if(!e||!t||eD(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[m]),v=t.useRef(-1);(0,UC.A)((()=>{const e=(0,XR.A)(g),t=null==u?void 0:u.current;if(!t)return;const n=(0,ZC.A)(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{f()&&(r.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[m,g,f]),(0,UC.A)((()=>{g()}));return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("textarea",(0,De.A)({value:s,onChange:e=>{c||g(),r&&r(e)},ref:d,rows:o,style:a},l)),(0,Ve.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,De.A)({},ZR,a,{paddingTop:0,paddingBottom:0})})]})})),nD=tD;function rD(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const iD=t.createContext(void 0);function oD(){return t.useContext(iD)}function aD(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function sD(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(aD(e.value)&&""!==e.value||t&&aD(e.defaultValue)&&""!==e.defaultValue)}function lD(e){return(0,GT.Ay)("MuiInputBase",e)}const cD=(0,Ge.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),uD=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],dD=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,zT.A)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},hD=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},pD=(0,WT.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:dD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${cD.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,De.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),mD=(0,WT.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:hD})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,De.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},a=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,De.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${cD.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${cD.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),fD=(0,Ve.jsx)(nt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),gD=t.forwardRef((function(e,n){var r;const i=(0,Je.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:m,fullWidth:f=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:w,minRows:x,multiline:E=!1,name:A,onBlur:S,onChange:T,onClick:_,onFocus:k,onKeyDown:C,onKeyUp:I,placeholder:R,readOnly:D,renderSuffix:L,rows:P,slotProps:M={},slots:O={},startAdornment:N,type:j="text",value:F}=i,U=(0,Le.A)(i,uD),B=null!=y.value?y.value:F,{current:$}=t.useRef(null!=B),V=t.useRef(),W=t.useCallback((e=>{0}),[]),z=(0,j_.A)(V,b,y.ref,W),[H,q]=t.useState(!1),G=oD();const K=rD({props:i,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});K.focused=G?G.focused:H,t.useEffect((()=>{!G&&h&&H&&(q(!1),S&&S())}),[G,h,H,S]);const Y=G&&G.onFilled,X=G&&G.onEmpty,Q=t.useCallback((e=>{sD(e)?Y&&Y():X&&X()}),[Y,X]);(0,iC.A)((()=>{$&&Q({value:B})}),[B,Q,$]);t.useEffect((()=>{Q(V.current)}),[]);let J=v,Z=y;E&&"input"===J&&(Z=P?(0,De.A)({type:void 0,minRows:P,maxRows:P},Z):(0,De.A)({type:void 0,maxRows:w,minRows:x},Z),J=nD);t.useEffect((()=>{G&&G.setAdornedStart(Boolean(N))}),[G,N]);const ee=(0,De.A)({},i,{color:K.color||"primary",disabled:K.disabled,endAdornment:m,error:K.error,focused:K.focused,formControl:G,fullWidth:f,hiddenLabel:K.hiddenLabel,multiline:E,size:K.size,startAdornment:N,type:j}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:m}=e,f={root:["root",`color${(0,zT.A)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",h&&"medium"!==h&&`size${(0,zT.A)(h)}`,u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===m&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,VT.A)(f,lD,t)})(ee),ne=O.root||c.Root||pD,re=M.root||u.root||{},ie=O.input||c.Input||mD;return Z=(0,De.A)({},Z,null!=(r=M.input)?r:u.input),(0,Ve.jsxs)(t.Fragment,{children:[!p&&fD,(0,Ve.jsxs)(ne,(0,De.A)({},re,!m_(ne)&&{ownerState:(0,De.A)({},ee,re.ownerState)},{ref:n,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),_&&_(e)}},U,{className:(0,Pe.A)(te.root,re.className,l,D&&"MuiInputBase-readOnly"),children:[N,(0,Ve.jsx)(iD.Provider,{value:null,children:(0,Ve.jsx)(ie,(0,De.A)({ownerState:ee,"aria-invalid":K.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:d,disabled:K.disabled,id:g,onAnimationStart:e=>{Q("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:A,placeholder:R,readOnly:D,required:K.required,rows:P,value:B,onKeyDown:C,onKeyUp:I,type:j},Z,!m_(ie)&&{as:J,ownerState:(0,De.A)({},ee,Z.ownerState)},{ref:z,className:(0,Pe.A)(te.input,Z.className,D&&"MuiInputBase-readOnly"),onBlur:e=>{S&&S(e),y.onBlur&&y.onBlur(e),G&&G.onBlur?G.onBlur(e):q(!1)},onChange:function(e){if(!$){const t=e.target||V.current;if(null==t)throw new Error((0,YR.A)(1));Q({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),T&&T(e,...n)},onFocus:e=>{K.disabled?e.stopPropagation():(k&&k(e),y.onFocus&&y.onFocus(e),G&&G.onFocus?G.onFocus(e):q(!0))}}))}),m,L?L((0,De.A)({},K,{startAdornment:N})):null]}))]})})),vD=gD;function yD(e){return(0,GT.Ay)("MuiInput",e)}const bD=(0,De.A)({},cD,(0,Ge.A)("MuiInput",["root","underline","input"])),wD=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],xD=(0,WT.Ay)(pD,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...dD(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),(0,De.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bD.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bD.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bD.disabled}, .${bD.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${bD.disabled}:before`]:{borderBottomStyle:"dotted"}})})),ED=(0,WT.Ay)(mD,{name:"MuiInput",slot:"Input",overridesResolver:hD})({}),AD=t.forwardRef((function(e,t){var n,r,i,o;const a=(0,Je.b)({props:e,name:"MuiInput"}),{disableUnderline:s,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:m={},type:f="text"}=a,g=(0,Le.A)(a,wD),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,VT.A)(r,yD,t);return(0,De.A)({},t,i)})(a),y={root:{ownerState:{disableUnderline:s}}},b=(null!=p?p:c)?(0,KR.A)(null!=p?p:c,y):y,w=null!=(n=null!=(r=m.root)?r:l.Root)?n:xD,x=null!=(i=null!=(o=m.input)?o:l.Input)?i:ED;return(0,Ve.jsx)(vD,(0,De.A)({slots:{root:w,input:x},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:f},g,{classes:v}))}));AD.muiName="Input";const SD=AD;function TD(e){return(0,GT.Ay)("MuiFilledInput",e)}const _D=(0,De.A)({},cD,(0,Ge.A)("MuiFilledInput",["root","underline","input"])),kD=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],CD=(0,WT.Ay)(pD,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...dD(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,De.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a}},[`&.${_D.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a},[`&.${_D.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${_D.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${_D.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${_D.disabled}, .${_D.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${_D.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,De.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),ID=(0,WT.Ay)(mD,{name:"MuiFilledInput",slot:"Input",overridesResolver:hD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),RD=t.forwardRef((function(e,t){var n,r,i,o;const a=(0,Je.b)({props:e,name:"MuiFilledInput"}),{components:s={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:m="text"}=a,f=(0,Le.A)(a,kD),g=(0,De.A)({},a,{fullWidth:c,inputComponent:u,multiline:d,type:m}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,VT.A)(r,TD,t);return(0,De.A)({},t,i)})(a),y={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,KR.A)(y,null!=h?h:l):y,w=null!=(n=null!=(r=p.root)?r:s.Root)?n:CD,x=null!=(i=null!=(o=p.input)?o:s.Input)?i:ID;return(0,Ve.jsx)(vD,(0,De.A)({slots:{root:w,input:x},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:m},f,{classes:v}))}));RD.muiName="Input";const DD=RD;var LD;const PD=["children","classes","className","label","notched"],MD=(0,WT.Ay)("fieldset",{shouldForwardProp:jk.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),OD=(0,WT.Ay)("legend",{shouldForwardProp:jk.A})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,De.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function ND(e){return(0,GT.Ay)("MuiOutlinedInput",e)}const jD=(0,De.A)({},cD,(0,Ge.A)("MuiOutlinedInput",["root","notchedOutline","input"])),FD=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],UD=(0,WT.Ay)(pD,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:dD})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,De.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${jD.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${jD.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${jD.focused} .${jD.notchedOutline}`]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},[`&.${jD.error} .${jD.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${jD.disabled} .${jD.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,De.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),BD=(0,WT.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,Le.A)(e,PD),o=null!=n&&""!==n,a=(0,De.A)({},e,{notched:r,withLabel:o});return(0,Ve.jsx)(MD,(0,De.A)({"aria-hidden":!0,className:t,ownerState:a},i,{children:(0,Ve.jsx)(OD,{ownerState:a,children:o?(0,Ve.jsx)("span",{children:n}):LD||(LD=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),$D=(0,WT.Ay)(mD,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:hD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),VD=t.forwardRef((function(e,n){var r,i,o,a,s;const l=(0,Je.b)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:m,slots:f={},type:g="text"}=l,v=(0,Le.A)(l,FD),y=(e=>{const{classes:t}=e,n=(0,VT.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},ND,t);return(0,De.A)({},t,n)})(l),b=oD(),w=rD({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=(0,De.A)({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:g}),E=null!=(r=null!=(i=f.root)?i:c.Root)?r:UD,A=null!=(o=null!=(a=f.input)?a:c.Input)?o:$D;return(0,Ve.jsx)(vD,(0,De.A)({slots:{root:E,input:A},renderSuffix:e=>(0,Ve.jsx)(BD,{ownerState:x,className:y.notchedOutline,label:null!=h&&""!==h&&w.required?s||(s=(0,Ve.jsxs)(t.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof m?m:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:n,type:g},v,{classes:(0,De.A)({},y,{notchedOutline:null})}))}));VD.muiName="Input";const WD=VD;function zD(e){return(0,GT.Ay)("MuiFormLabel",e)}const HD=(0,Ge.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),qD=["children","className","color","component","disabled","error","filled","focused","required"],GD=(0,WT.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${HD.focused}`]:{color:(t.vars||t).palette[n.color].main},[`&.${HD.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${HD.error}`]:{color:(t.vars||t).palette.error.main}})})),KD=(0,WT.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${HD.error}`]:{color:(t.vars||t).palette.error.main}}})),YD=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,a=(0,Le.A)(n,qD),s=rD({props:n,muiFormControl:oD(),states:["color","required","focused","disabled","error","filled"]}),l=(0,De.A)({},n,{color:s.color||"primary",component:o,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e,l={root:["root",`color${(0,zT.A)(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,VT.A)(l,zD,t)})(l);return(0,Ve.jsxs)(GD,(0,De.A)({as:o,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},a,{children:[r,s.required&&(0,Ve.jsxs)(KD,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),XD=YD;function QD(e){return(0,GT.Ay)("MuiInputLabel",e)}(0,Ge.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const JD=["disableAnimation","margin","shrink","variant","className"],ZD=(0,WT.Ay)(XD,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${HD.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,De.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),eL=t.forwardRef((function(e,t){const n=(0,Je.b)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,a=(0,Le.A)(n,JD),s=oD();let l=i;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);const c=rD({props:n,muiFormControl:s,states:["size","variant","required","focused"]}),u=(0,De.A)({},n,{disableAnimation:r,formControl:s,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${(0,zT.A)(r)}`,a],asterisk:[s&&"asterisk"]},c=(0,VT.A)(l,QD,t);return(0,De.A)({},t,c)})(u);return(0,Ve.jsx)(ZD,(0,De.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,Pe.A)(d.root,o)},a,{classes:d}))})),tL=eL;function nL(e){return(0,GT.Ay)("MuiFormControl",e)}(0,Ge.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const rL=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],iL=(0,WT.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,t[`margin${(0,zT.A)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),oL=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:m=!1,size:f="medium",variant:g="outlined"}=r,v=(0,Le.A)(r,rL),y=(0,De.A)({},r,{color:a,component:s,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:m,size:f,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,zT.A)(n)}`,r&&"fullWidth"]};return(0,VT.A)(i,nL,t)})(y),[w,x]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!(0,gR.A)(t,["Input","Select"]))return;const n=(0,gR.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[E,A]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{(0,gR.A)(t,["Input","Select"])&&(sD(t.props,!0)||sD(t.props.inputProps,!0))&&(e=!0)})),e})),[S,T]=t.useState(!1);l&&S&&T(!1);const _=void 0===u||l?S:u;let k;const C=t.useMemo((()=>({adornedStart:w,setAdornedStart:x,color:a,disabled:l,error:c,filled:E,focused:_,fullWidth:d,hiddenLabel:h,size:f,onBlur:()=>{T(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{T(!0)},registerEffect:k,required:m,variant:g})),[w,a,l,c,E,_,d,h,k,m,f,g]);return(0,Ve.jsx)(iD.Provider,{value:C,children:(0,Ve.jsx)(iL,(0,De.A)({as:s,ownerState:y,className:(0,Pe.A)(b.root,o),ref:n},v,{children:i}))})})),aL=oL;function sL(e){return(0,GT.Ay)("MuiFormHelperText",e)}const lL=(0,Ge.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var cL;const uL=["children","className","component","disabled","error","filled","focused","margin","required","variant"],dL=(0,WT.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,zT.A)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${lL.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${lL.error}`]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),hL=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,a=(0,Le.A)(n,uL),s=rD({props:n,muiFormControl:oD(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,De.A)({},n,{component:o,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${(0,zT.A)(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,VT.A)(c,sL,t)})(l);return(0,Ve.jsx)(dL,(0,De.A)({as:o,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},a,{children:" "===r?cL||(cL=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),pL=hL;function mL(e){return(0,GT.Ay)("MuiNativeSelect",e)}const fL=(0,Ge.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),gL=["className","disabled","error","IconComponent","inputRef","variant"],vL=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,De.A)({},n.vars?{backgroundColor:`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${fL.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},yL=(0,WT.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:jk.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${fL.multiple}`]:t.multiple}]}})(vL),bL=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${fL.disabled}`]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},wL=(0,WT.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,zT.A)(n.variant)}`],n.open&&t.iconOpen]}})(bL),xL=t.forwardRef((function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=e,c=(0,Le.A)(e,gL),u=(0,De.A)({},e,{disabled:i,variant:l,error:o}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${(0,zT.A)(n)}`,o&&"iconOpen",r&&"disabled"]};return(0,VT.A)(s,mL,t)})(u);return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(yL,(0,De.A)({ownerState:u,className:(0,Pe.A)(d.select,r),disabled:i,ref:s||n},c)),e.multiple?null:(0,Ve.jsx)(wL,{as:a,ownerState:u,className:d.icon})]})})),EL=xL;var AL=n(1960),SL=n(8733);function TL(e){return(0,GT.Ay)("MuiSelect",e)}const _L=(0,Ge.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var kL;const CL=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],IL=(0,WT.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${_L.select}`]:t.select},{[`&.${_L.select}`]:t[n.variant]},{[`&.${_L.error}`]:t.error},{[`&.${_L.multiple}`]:t.multiple}]}})(vL,{[`&.${_L.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),RL=(0,WT.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,zT.A)(n.variant)}`],n.open&&t.iconOpen]}})(bL),DL=(0,WT.Ay)("input",{shouldForwardProp:e=>(0,AL.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function LL(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function PL(e){return null==e||"string"===typeof e&&!e.trim()}const ML=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:s,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:p,error:m=!1,IconComponent:f,inputRef:g,labelId:v,MenuProps:y={},multiple:b,name:w,onBlur:x,onChange:E,onClose:A,onFocus:S,onOpen:T,open:_,readOnly:k,renderValue:C,SelectDisplayProps:I={},tabIndex:R,value:D,variant:L="standard"}=e,P=(0,Le.A)(e,CL),[M,O]=(0,SL.A)({controlled:D,default:d,name:"Select"}),[N,j]=(0,SL.A)({controlled:_,default:u,name:"Select"}),F=t.useRef(null),U=t.useRef(null),[B,$]=t.useState(null),{current:V}=t.useRef(null!=_),[W,z]=t.useState(),H=(0,j_.A)(n,g),q=t.useCallback((e=>{U.current=e,e&&$(e)}),[]),G=null==B?void 0:B.parentNode;t.useImperativeHandle(H,(()=>({focus:()=>{U.current.focus()},node:F.current,value:M})),[M]),t.useEffect((()=>{u&&N&&B&&!V&&(z(s?null:G.clientWidth),U.current.focus())}),[B,s]),t.useEffect((()=>{a&&U.current.focus()}),[a]),t.useEffect((()=>{if(!v)return;const e=(0,Yk.A)(U.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const K=(e,t)=>{e?T&&T(t):A&&A(t),V||(z(s?null:G.clientWidth),j(e))},Y=t.Children.toArray(l),X=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(O(n),E)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),E(i,e)}b||K(!1,t)}},Q=null!==B&&N;let J,Z;delete P["aria-invalid"];const ee=[];let te=!1,ne=!1;(sD({value:M})||p)&&(C?J=C(M):te=!0);const re=Y.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(M))throw new Error((0,YR.A)(2));n=M.some((t=>LL(t,e.props.value))),n&&te&&ee.push(e.props.children)}else n=LL(M,e.props.value),n&&te&&(Z=e.props.children);return n&&(ne=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:X(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));te&&(J=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=W;!s&&V&&B&&(oe=G.clientWidth),ie="undefined"!==typeof R?R:h?null:0;const ae=I.id||(w?`mui-component-select-${w}`:void 0),se=(0,De.A)({},e,{variant:L,value:M,open:Q,error:m}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${(0,zT.A)(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,VT.A)(s,TL,t)})(se),ce=(0,De.A)({},y.PaperProps,null==(r=y.slotProps)?void 0:r.paper),ue=(0,jR.A)();return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(IL,(0,De.A)({ref:q,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!k){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||k?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),K(!0,e))},onBlur:e=>{!Q&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:w}}),x(e))},onFocus:S},I,{ownerState:se,className:(0,Pe.A)(I.className,le.select,c),id:ae,children:PL(J)?kL||(kL=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,Ve.jsx)(DL,(0,De.A)({"aria-invalid":m,value:Array.isArray(M)?M.join(","):M,name:w,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(O(t.props.value),E&&E(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:a,ownerState:se},P)),(0,Ve.jsx)(RL,{as:f,className:le.icon,ownerState:se}),(0,Ve.jsx)(MI,(0,De.A)({id:`menu-${w||""}`,anchorEl:G,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,De.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,De.A)({},y.slotProps,{paper:(0,De.A)({},ce,{style:(0,De.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),OL=ML,NL=(0,u_.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),jL=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],FL=["root"],UL={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,jk.A)(e)&&"variant"!==e,slot:"Root"},BL=(0,WT.Ay)(SD,UL)(""),$L=(0,WT.Ay)(WD,UL)(""),VL=(0,WT.Ay)(DD,UL)(""),WL=t.forwardRef((function(e,n){const r=(0,Je.b)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=NL,id:d,input:h,inputProps:p,label:m,labelId:f,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:w,open:x,renderValue:E,SelectDisplayProps:A,variant:S="outlined"}=r,T=(0,Le.A)(r,jL),_=y?EL:OL,k=rD({props:r,muiFormControl:oD(),states:["variant","error"]}),C=k.variant||S,I=(0,De.A)({},r,{variant:C,classes:a}),R=(e=>{const{classes:t}=e;return t})(I),D=(0,Le.A)(R,FL),L=h||{standard:(0,Ve.jsx)(BL,{ownerState:I}),outlined:(0,Ve.jsx)($L,{label:m,ownerState:I}),filled:(0,Ve.jsx)(VL,{ownerState:I})}[C],P=(0,j_.A)(n,mC(L));return(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(L,(0,De.A)({inputComponent:_,inputProps:(0,De.A)({children:o,error:k.error,IconComponent:u,variant:C,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:f,MenuProps:g,onClose:b,onOpen:w,open:x,renderValue:E,SelectDisplayProps:(0,De.A)({id:d},A)},p,{classes:p?(0,KR.A)(D,p.classes):D},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===C?{notched:!0}:{},{ref:P,className:(0,Pe.A)(L.props.className,s,R.root)},!h&&{variant:C},T))})}));WL.muiName="Select";const zL=WL;function HL(e){return(0,GT.Ay)("MuiTextField",e)}(0,Ge.A)("MuiTextField",["root"]);const qL=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],GL={standard:SD,filled:DD,outlined:WD},KL=(0,WT.Ay)(aL,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),YL=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:m,InputLabelProps:f,inputProps:g,InputProps:v,inputRef:y,label:b,maxRows:w,minRows:x,multiline:E=!1,name:A,onBlur:S,onChange:T,onFocus:_,placeholder:k,required:C=!1,rows:I,select:R=!1,SelectProps:D,type:L,value:P,variant:M="outlined"}=n,O=(0,Le.A)(n,qL),N=(0,De.A)({},n,{autoFocus:i,color:s,disabled:c,error:u,fullWidth:h,multiline:E,required:C,select:R,variant:M}),j=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},HL,t)})(N);const F={};"outlined"===M&&(f&&"undefined"!==typeof f.shrink&&(F.notched=f.shrink),F.label=b),R&&(D&&D.native||(F.id=void 0),F["aria-describedby"]=void 0);const U=(0,jR.A)(m),B=p&&U?`${U}-helper-text`:void 0,$=b&&U?`${U}-label`:void 0,V=GL[M],W=(0,Ve.jsx)(V,(0,De.A)({"aria-describedby":B,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:E,name:A,rows:I,maxRows:w,minRows:x,type:L,value:P,id:U,inputRef:y,onBlur:S,onChange:T,onFocus:_,placeholder:k,inputProps:g},F,v));return(0,Ve.jsxs)(KL,(0,De.A)({className:(0,Pe.A)(j.root,a),disabled:c,error:u,fullWidth:h,ref:t,required:C,color:s,variant:M,ownerState:N},O,{children:[null!=b&&""!==b&&(0,Ve.jsx)(tL,(0,De.A)({htmlFor:U,id:$},f,{children:b})),R?(0,Ve.jsx)(zL,(0,De.A)({"aria-describedby":B,id:U,labelId:$,value:P,input:W},D,{children:o})):W,p&&(0,Ve.jsx)(pL,(0,De.A)({id:B},d,{children:p}))]}))})),XL=YL;function QL(e){return(0,GT.Ay)("MuiCircularProgress",e)}(0,Ge.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const JL=["className","color","disableShrink","size","style","thickness","value","variant"];let ZL,eP,tP,nP,rP=e=>e;const iP=44,oP=(0,X_.i7)(ZL||(ZL=rP`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),aP=(0,X_.i7)(eP||(eP=rP`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),sP=(0,WT.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,zT.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,X_.AH)(tP||(tP=rP`
      animation: ${0} 1.4s linear infinite;
    `),oP)})),lP=(0,WT.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),cP=(0,WT.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,zT.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,X_.AH)(nP||(nP=rP`
      animation: ${0} 1.4s ease-in-out infinite;
    `),aP)})),uP=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Le.A)(n,JL),h=(0,De.A)({},n,{color:i,disableShrink:o,size:a,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${(0,zT.A)(r)}`],svg:["svg"],circle:["circle",`circle${(0,zT.A)(n)}`,i&&"circleDisableShrink"]};return(0,VT.A)(o,QL,t)})(h),m={},f={},g={};if("determinate"===u){const e=2*Math.PI*((iP-l)/2);m.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),m.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,f.transform="rotate(-90deg)"}return(0,Ve.jsx)(sP,(0,De.A)({className:(0,Pe.A)(p.root,r),style:(0,De.A)({width:a,height:a},f,s),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,Ve.jsx)(lP,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Ve.jsx)(cP,{className:p.circle,style:m,ownerState:h,cx:iP,cy:iP,r:(iP-l)/2,fill:"none",strokeWidth:l})})}))})),dP=uP;var hP=n(5501);function pP(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,Nk.A)(t.components[n].defaultProps,r):r}function mP(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=$e(r);i&&(o=o[i]||o);return pP({theme:o,name:n,props:t})}const fP=["ownerState"],gP=["variants"],vP=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function yP(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const bP=(0,je.A)(),wP=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function xP(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function EP(e){return e?(t,n)=>n[e]:null}function AP(e,t){let{ownerState:n}=t,r=(0,Le.A)(t,fP);const i="function"===typeof e?e((0,De.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>AP(e,(0,De.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Le.A)(i,gP);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,De.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,De.A)({ownerState:n},r,n)):e.style))})),t}return i}const SP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=bP,rootShouldForwardProp:r=yP,slotShouldForwardProp:i=yP}=e,o=e=>(0,Oe.A)((0,De.A)({},e,{theme:xP((0,De.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Me.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=EP(wP(l))}=a,h=(0,Le.A)(a,vP),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,m=u||!1;let f=yP;"Root"===l||"root"===l?f=r:l?f=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(f=void 0);const g=(0,Me.default)(e,(0,De.A)({shouldForwardProp:f,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,KR.Q)(e)?r=>AP(e,(0,De.A)({},r,{theme:xP({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];s&&d&&u.push((e=>{const r=xP((0,De.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[s]||!r.components[s].styleOverrides)return null;const i=r.components[s].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=AP(i,(0,De.A)({},e,{theme:r}))})),d(e,o)})),s&&!p&&u.push((e=>{var r;const i=xP((0,De.A)({},e,{defaultTheme:n,themeId:t}));return AP({variants:null==i||null==(r=i.components)||null==(r=r[s])?void 0:r.variants},(0,De.A)({},e,{theme:i}))})),m||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const f=g(i,...u);return e.muiName&&(f.muiName=e.muiName),f};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),TP=SP,_P=["className","component","disableGutters","fixed","maxWidth","classes"],kP=(0,je.A)(),CP=TP("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,hP.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),IP=e=>mP({props:e,name:"MuiContainer",defaultTheme:kP});const RP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=CP,useThemeProps:r=IP,componentName:i="MuiContainer"}=e,o=n((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),a=t.forwardRef((function(e,t){const n=r(e),{className:a,component:s="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=n,d=(0,Le.A)(n,_P),h=(0,De.A)({},n,{component:s,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,a={root:["root",o&&`maxWidth${(0,hP.A)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,VT.A)(a,(e=>(0,GT.Ay)(t,e)),n)})(h,i);return(0,Ve.jsx)(o,(0,De.A)({as:s,ownerState:h,className:(0,Pe.A)(p.root,a),ref:t},d))}));return a}({createStyledComponent:(0,WT.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,zT.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,Je.b)({props:e,name:"MuiContainer"})}),DP=RP;function LP(e){return(0,GT.Ay)("MuiAlert",e)}const PP=(0,Ge.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),MP=(0,u_.A)((0,Ve.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),OP=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),NP=(0,u_.A)((0,Ve.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),jP=(0,u_.A)((0,Ve.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),FP=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),UP=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],BP=(0,WT.Ay)(JT,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,zT.A)(n.color||n.severity)}`]]}})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?HT.e$:HT.a,r="light"===t.palette.mode?HT.a:HT.e$;return(0,De.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${PP.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${PP.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,De.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})})),$P=(0,WT.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),VP=(0,WT.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),WP=(0,WT.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),zP={success:(0,Ve.jsx)(MP,{fontSize:"inherit"}),warning:(0,Ve.jsx)(OP,{fontSize:"inherit"}),error:(0,Ve.jsx)(NP,{fontSize:"inherit"}),info:(0,Ve.jsx)(jP,{fontSize:"inherit"})},HP=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:a="Close",color:s,components:l={},componentsProps:c={},icon:u,iconMapping:d=zP,onClose:h,role:p="alert",severity:m="success",slotProps:f={},slots:g={},variant:v="standard"}=n,y=(0,Le.A)(n,UP),b=(0,De.A)({},n,{color:s,severity:m,variant:v,colorSeverity:s||m}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`color${(0,zT.A)(n||r)}`,`${t}${(0,zT.A)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,VT.A)(o,LP,i)})(b),x={slots:(0,De.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,De.A)({},c,f)},[E,A]=A_("closeButton",{elementType:Sk,externalForwardedProps:x,ownerState:b}),[S,T]=A_("closeIcon",{elementType:FP,externalForwardedProps:x,ownerState:b});return(0,Ve.jsxs)(BP,(0,De.A)({role:p,elevation:0,ownerState:b,className:(0,Pe.A)(w.root,o),ref:t},y,{children:[!1!==u?(0,Ve.jsx)($P,{ownerState:b,className:w.icon,children:u||d[m]||zP[m]}):null,(0,Ve.jsx)(VP,{ownerState:b,className:w.message,children:i}),null!=r?(0,Ve.jsx)(WP,{ownerState:b,className:w.action,children:r}):null,null==r&&h?(0,Ve.jsx)(WP,{ownerState:b,className:w.action,children:(0,Ve.jsx)(E,(0,De.A)({size:"small","aria-label":a,title:a,color:"inherit",onClick:h},A,{children:(0,Ve.jsx)(S,(0,De.A)({fontSize:"small"},T))}))}):null]}))})),qP=HP;function GP(e){return(0,GT.Ay)("MuiDialogTitle",e)}const KP=(0,Ge.A)("MuiDialogTitle",["root"]),YP=["className","id"],XP=(0,WT.Ay)(N_,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),QP=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiDialogTitle"}),{className:i,id:o}=r,a=(0,Le.A)(r,YP),s=r,l=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},GP,t)})(s),{titleId:c=o}=t.useContext(BR);return(0,Ve.jsx)(XP,(0,De.A)({component:"h2",className:(0,Pe.A)(l.root,i),ownerState:s,ref:n,variant:"h6",id:null!=o?o:c},a))})),JP=QP;function ZP(e){return(0,GT.Ay)("MuiDialogContent",e)}(0,Ge.A)("MuiDialogContent",["root","dividers"]);const eM=["className","dividers"],tM=(0,WT.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${KP.root} + &`]:{paddingTop:0}})})),nM=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,Le.A)(n,eM),a=(0,De.A)({},n,{dividers:i}),s=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,VT.A)(r,ZP,t)})(a);return(0,Ve.jsx)(tM,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),rM=nM,iM=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),oM=(0,u_.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),aM=(0,u_.A)([(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,Ve.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),sM=(0,u_.A)((0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8M12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4m3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"EmojiEmotions"),lM=e=>{var n;let{open:r,onClose:i}=e;const[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(0),b=280,w=(0,t.useRef)(null),{currentUser:x,userProfile:E}=xT();return(0,Ve.jsxs)(GR,{open:r,onClose:i,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:[(0,Ve.jsxs)(JP,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(I_,{src:(null===E||void 0===E?void 0:E.profilePic)||(null===x||void 0===x?void 0:x.photoURL)||"",alt:(null===E||void 0===E?void 0:E.name)||(null===x||void 0===x?void 0:x.displayName)||"User",sx:{width:40,height:40}}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",fontWeight:"bold",children:(null===E||void 0===E?void 0:E.name)||(null===x||void 0===x?void 0:x.displayName)||"Anonymous"}),(0,Ve.jsxs)(N_,{variant:"caption",color:"text.secondary",children:["@",(null===E||void 0===E?void 0:E.username)||(null===x||void 0===x||null===(n=x.email)||void 0===n?void 0:n.split("@")[0])||"user"]})]})]}),(0,Ve.jsx)(Sk,{onClick:i,size:"small",children:(0,Ve.jsx)(iM,{})})]}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x&&KA&&E)if(o.trim()){h(!0),m(null);try{var t;let e=null;if(s){const t=cb(YA,`posts/${x.uid}/${Date.now()}_${s.name}`);await ob(t,s),e=await sb(t)}const n={content:o.trim(),authorId:x.uid,userId:x.uid,timestamp:Sv(),likes:0,likedBy:[],authorName:E.name||x.displayName||"Anonymous",authorAvatar:E.profilePic||x.photoURL||"",authorUsername:E.username||(null===(t=x.email)||void 0===t?void 0:t.split("@")[0])||"user",...e&&{imageUrl:e},comments:[],tags:o.match(/#[a-zA-Z0-9_]+/g)||[],isPrivate:!1,reposts:0,repostedBy:[],views:0,isPinned:!1,isEdited:!1,isArchived:!1,deleted:!1};await mv(Jf(KA,"posts"),n),wS.success("Post created successfully"),a(""),l(null),u(null),y(0),i()}catch(p){console.error("Error creating post:",p),m("Failed to create post. Please try again.")}finally{h(!1)}}else m("Please enter some content");else m("Please sign in and ensure profile is loaded to create a post")},children:[(0,Ve.jsx)(XL,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"What's on your mind?",value:o,onChange:e=>{const t=e.target.value;a(t),y(t.length),t.length>b?m("Post cannot exceed 280 characters"):m(null)},sx:{mb:2}}),c&&(0,Ve.jsxs)(Qe,{sx:{position:"relative",mb:2},children:[(0,Ve.jsx)("img",{src:c,alt:"Preview",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px",objectFit:"contain"}}),(0,Ve.jsx)(Sk,{onClick:()=>{l(null),u(null),w.current&&(w.current.value=""),m(null)},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:(0,Ve.jsx)(oM,{sx:{color:"white"}})})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void m("Image size should be less than 5MB");if(!t.type.match(/image\/(jpeg|png|gif)/))return void m("Only JPEG, PNG, and GIF images are allowed");l(t),u(URL.createObjectURL(t)),m(null)}},style:{display:"none"},ref:w}),(0,Ve.jsx)(Sk,{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:(0,Ve.jsx)(aM,{})}),(0,Ve.jsx)(Sk,{onClick:e=>{g(!0)},children:(0,Ve.jsx)(sM,{})})]}),(0,Ve.jsx)(Kk,{variant:"contained",type:"submit",disabled:!o.trim()&&!s||d,children:d?(0,Ve.jsx)(dP,{size:24}):"Post"})]})]}),p&&(0,Ve.jsx)(qP,{severity:"error",sx:{mt:2},children:p})]})]})};function cM(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function uM(e){return parseFloat(e)}var dM=n(6747);function hM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,dM.A)(e,t,n)}function pM(e){if(e.type)return e;if("#"===e.charAt(0))return pM(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,YR.A)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,YR.A)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function mM(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function fM(e,t){return e=pM(e),t=hM(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,mM(e)}function gM(e){return(0,GT.Ay)("MuiSkeleton",e)}(0,Ge.A)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const vM=["animation","className","component","height","style","variant","width"];let yM,bM,wM,xM,EM=e=>e;const AM=(0,X_.i7)(yM||(yM=EM`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),SM=(0,X_.i7)(bM||(bM=EM`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),TM=(0,WT.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const r=cM(t.shape.borderRadius)||"px",i=uM(t.shape.borderRadius);return(0,De.A)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:fM(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,X_.AH)(wM||(wM=EM`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),AM)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,X_.AH)(xM||(xM=EM`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),SM,(n.vars||n).palette.action.hover)})),_M=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:o="span",height:a,style:s,variant:l="text",width:c}=n,u=(0,Le.A)(n,vM),d=(0,De.A)({},n,{animation:r,component:o,variant:l,hasChildren:Boolean(u.children)}),h=(e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:a}=e,s={root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]};return(0,VT.A)(s,gM,t)})(d);return(0,Ve.jsx)(TM,(0,De.A)({as:o,ref:t,className:(0,Pe.A)(h.root,i),ownerState:d},u,{style:(0,De.A)({width:c,height:a},s)}))})),kM=_M,CM=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");let IM;function RM(){if(IM)return IM;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),IM="reverse",e.scrollLeft>0?IM="default":(e.scrollLeft=1,0===e.scrollLeft&&(IM="negative")),document.body.removeChild(e),IM}function DM(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(RM()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function LM(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const PM=["onChange"],MM={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const OM=(0,u_.A)((0,Ve.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),NM=(0,u_.A)((0,Ve.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function jM(e){return(0,GT.Ay)("MuiTabScrollButton",e)}const FM=(0,Ge.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),UM=["className","slots","slotProps","direction","orientation","disabled"],BM=(0,WT.Ay)(yk,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({width:40,flexShrink:0,opacity:.8,[`&.${FM.disabled}`]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})})),$M=t.forwardRef((function(e,t){var n,r;const i=(0,Je.b)({props:e,name:"MuiTabScrollButton"}),{className:o,slots:a={},slotProps:s={},direction:l}=i,c=(0,Le.A)(i,UM),u=LT(),d=(0,De.A)({isRtl:u},i),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,VT.A)(i,jM,t)})(d),p=null!=(n=a.StartScrollButtonIcon)?n:OM,m=null!=(r=a.EndScrollButtonIcon)?r:NM,f=kk({elementType:p,externalSlotProps:s.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=kk({elementType:m,externalSlotProps:s.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,Ve.jsx)(BM,(0,De.A)({component:"div",className:(0,Pe.A)(h.root,o),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,Ve.jsx)(p,(0,De.A)({},f)):(0,Ve.jsx)(m,(0,De.A)({},g))}))})),VM=$M;function WM(e){return(0,GT.Ay)("MuiTabs",e)}const zM=(0,Ge.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),HM=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],qM=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,GM=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,KM=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},YM=(0,WT.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${zM.scrollButtons}`]:t.scrollButtons},{[`& .${zM.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${zM.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),XM=(0,WT.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),QM=(0,WT.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),JM=(0,WT.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),ZM=(0,WT.Ay)((function(e){const{onChange:n}=e,r=(0,Le.A)(e,PM),i=t.useRef(),o=t.useRef(null),a=()=>{i.current=o.current.offsetHeight-o.current.clientHeight};return(0,iC.A)((()=>{const e=(0,hC.A)((()=>{const e=i.current;a(),e!==i.current&&n(i.current)})),t=(0,pC.A)(o.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[n]),t.useEffect((()=>{a(),n(i.current)}),[n]),(0,Ve.jsx)("div",(0,De.A)({style:MM},r,{ref:o}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),eO={};const tO=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiTabs"}),i=TC(),o=LT(),{"aria-label":a,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:m="primary",onChange:f,orientation:g="horizontal",ScrollButtonComponent:v=VM,scrollButtons:y="auto",selectionFollowsFocus:b,slots:w={},slotProps:x={},TabIndicatorProps:E={},TabScrollButtonProps:A={},textColor:S="primary",value:T,variant:_="standard",visibleScrollbar:k=!1}=r,C=(0,Le.A)(r,HM),I="scrollable"===_,R="vertical"===g,D=R?"scrollTop":"scrollLeft",L=R?"top":"left",P=R?"bottom":"right",M=R?"clientHeight":"clientWidth",O=R?"height":"width",N=(0,De.A)({},r,{component:h,allowScrollButtonsMobile:p,indicatorColor:m,orientation:g,vertical:R,scrollButtons:y,textColor:S,variant:_,visibleScrollbar:k,fixed:!I,hideScrollbar:I&&!k,scrollableX:I&&!R,scrollableY:I&&R,centered:c&&!I,scrollButtonsHideMobile:!p}),j=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,VT.A)(c,WM,l)})(N),F=kk({elementType:w.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:N}),U=kk({elementType:w.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:N});const[B,$]=t.useState(!1),[V,W]=t.useState(eO),[z,H]=t.useState(!1),[q,G]=t.useState(!1),[K,Y]=t.useState(!1),[X,Q]=t.useState({overflow:"hidden",scrollbarWidth:0}),J=new Map,Z=t.useRef(null),ee=t.useRef(null),te=()=>{const e=Z.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:DM(e,o?"rtl":"ltr"),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==T){const e=ee.current.children;if(e.length>0){const t=e[J.get(T)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=(0,F_.A)((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;if(R)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=o?"right":"left",t&&e){const i=o?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(o?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[O]:t?t[O]:0};if(isNaN(V[n])||isNaN(V[O]))W(i);else{const e=Math.abs(V[n]-i[n]),t=Math.abs(V[O]-i[O]);(e>=1||t>=1)&&W(i)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=LM,duration:a=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===s&&(s=r);const u=Math.min(1,(r-s)/a);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(D,Z.current,e,{duration:i.transitions.duration.standard}):Z.current[D]=e},ie=e=>{let t=Z.current[D];R?t+=e:(t+=e*(o?-1:1),t*=o&&"reverse"===RM()?-1:1),re(t)},oe=()=>{const e=Z.current[M];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[M]>e){0===r&&(t=e);break}t+=i[M]}return t},ae=()=>{ie(-1*oe())},se=()=>{ie(oe())},le=t.useCallback((e=>{Q({overflow:null,scrollbarWidth:e})}),[]),ce=(0,F_.A)((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[L]<t[L]){const r=t[D]+(n[L]-t[L]);re(r,{animation:e})}else if(n[P]>t[P]){const r=t[D]+(n[P]-t[P]);re(r,{animation:e})}})),ue=(0,F_.A)((()=>{I&&!1!==y&&Y(!K)}));t.useEffect((()=>{const e=(0,hC.A)((()=>{Z.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null==(n=t)||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null==(n=t)||n.observe(e)}))})),e(),ue()},r=(0,pC.A)(Z.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{var n,o;e.clear(),r.removeEventListener("resize",e),null==(n=i)||n.disconnect(),null==(o=t)||o.disconnect()}}),[ne,ue]),t.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&I&&!1!==y){const n=e[0],r=e[t-1],i={root:Z.current,threshold:.99},o=new IntersectionObserver((e=>{H(!e[0].isIntersecting)}),i);o.observe(n);const a=new IntersectionObserver((e=>{G(!e[0].isIntersecting)}),i);return a.observe(r),()=>{o.disconnect(),a.disconnect()}}}),[I,y,K,null==u?void 0:u.length]),t.useEffect((()=>{$(!0)}),[]),t.useEffect((()=>{ne()})),t.useEffect((()=>{ce(eO!==V)}),[ce,V]),t.useImperativeHandle(l,(()=>({updateIndicator:ne,updateScrollButtons:ue})),[ne,ue]);const de=(0,Ve.jsx)(JM,(0,De.A)({},E,{className:(0,Pe.A)(j.indicator,E.className),ownerState:N,style:(0,De.A)({},V,E.style)}));let he=0;const pe=t.Children.map(u,(e=>{if(!t.isValidElement(e))return null;const n=void 0===e.props.value?he:e.props.value;J.set(n,he);const r=n===T;return he+=1,t.cloneElement(e,(0,De.A)({fullWidth:"fullWidth"===_,indicator:r&&!B&&de,selected:r,selectionFollowsFocus:b,onChange:f,textColor:S,value:n},1!==he||!1!==T||e.props.tabIndex?{}:{tabIndex:0}))})),me=(()=>{const e={};e.scrollbarSizeListener=I?(0,Ve.jsx)(ZM,{onChange:le,className:(0,Pe.A)(j.scrollableX,j.hideScrollbar)}):null;const t=I&&("auto"===y&&(z||q)||!0===y);return e.scrollButtonStart=t?(0,Ve.jsx)(v,(0,De.A)({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:F},orientation:g,direction:o?"right":"left",onClick:ae,disabled:!z},A,{className:(0,Pe.A)(j.scrollButtons,A.className)})):null,e.scrollButtonEnd=t?(0,Ve.jsx)(v,(0,De.A)({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:U},orientation:g,direction:o?"left":"right",onClick:se,disabled:!q},A,{className:(0,Pe.A)(j.scrollButtons,A.className)})):null,e})();return(0,Ve.jsxs)(YM,(0,De.A)({className:(0,Pe.A)(j.root,d),ownerState:N,ref:n,as:h},C,{children:[me.scrollButtonStart,me.scrollbarSizeListener,(0,Ve.jsxs)(XM,{className:j.scroller,ownerState:N,style:{overflow:X.overflow,[R?"margin"+(o?"Left":"Right"):"marginBottom"]:k?void 0:-X.scrollbarWidth},ref:Z,children:[(0,Ve.jsx)(QM,{"aria-label":a,"aria-labelledby":s,"aria-orientation":"vertical"===g?"vertical":null,className:j.flexContainer,ownerState:N,onKeyDown:e=>{const t=ee.current,n=(0,Yk.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",i="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&o&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),KM(t,n,GM);break;case i:e.preventDefault(),KM(t,n,qM);break;case"Home":e.preventDefault(),KM(t,null,qM);break;case"End":e.preventDefault(),KM(t,null,GM)}},ref:ee,role:"tablist",children:pe}),B&&de]}),me.scrollButtonEnd]}))})),nO=tO;function rO(e){return(0,GT.Ay)("MuiTab",e)}const iO=(0,Ge.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),oO=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],aO=(0,WT.Ay)(yk,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,zT.A)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${iO.iconWrapper}`]:t.iconWrapper}]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${iO.iconWrapper}`]:(0,De.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,[`&.${iO.selected}`]:{opacity:1},[`&.${iO.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${iO.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${iO.disabled}`]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${iO.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${iO.disabled}`]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),sO=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:a=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:m,selected:f,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=r,w=(0,Le.A)(r,oO),x=(0,De.A)({},r,{disabled:o,disableFocusRipple:a,selected:f,icon:!!l,iconPosition:c,label:!!d,fullWidth:s,textColor:v,wrapped:b}),E=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:l}=e,c={root:["root",o&&a&&"labelIcon",`textColor${(0,zT.A)(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,VT.A)(c,rO,t)})(x),A=l&&d&&t.isValidElement(l)?t.cloneElement(l,{className:(0,Pe.A)(E.iconWrapper,l.props.className)}):l;return(0,Ve.jsxs)(aO,(0,De.A)({focusRipple:!a,className:(0,Pe.A)(E.root,i),ref:n,role:"tab","aria-selected":f,disabled:o,onClick:e=>{!f&&h&&h(e,y),p&&p(e)},onFocus:e=>{g&&!f&&h&&h(e,y),m&&m(e)},ownerState:x,tabIndex:f?0:-1},w,{children:["top"===c||"start"===c?(0,Ve.jsxs)(t.Fragment,{children:[A,d]}):(0,Ve.jsxs)(t.Fragment,{children:[d,A]}),u]}))})),lO=sO;function cO(e){return(0,GT.Ay)("MuiDialogActions",e)}(0,Ge.A)("MuiDialogActions",["root","spacing"]);const uO=["className","disableSpacing"],dO=(0,WT.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),hO=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,Le.A)(n,uO),a=(0,De.A)({},n,{disableSpacing:i}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,VT.A)(r,cO,t)})(a);return(0,Ve.jsx)(dO,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),pO=hO,mO=(0,u_.A)((0,Ve.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),fO=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate"),gO=e=>{let{open:n,onClose:r}=e;const{currentUser:i}=xT(),[o,a]=(0,t.useState)(0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(null),[v,y]=(0,t.useState)([]),b=(0,t.useRef)(null),w=(0,t.useRef)(null);(0,t.useEffect)((()=>{n&&(a(0),l(null),m(null),u(!1),y([]))}),[n]),(0,t.useEffect)((()=>()=>{f&&f.getTracks().forEach((e=>e.stop()))}),[f]);return(0,Ve.jsxs)(GR,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsxs)(JP,{children:["Create New Story",(0,Ve.jsx)(Sk,{onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,Ve.jsx)(iM,{})})]}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsxs)(nO,{value:o,onChange:(e,t)=>{a(t),l(null),m(null),u(!1),y([]),f&&(f.getTracks().forEach((e=>e.stop())),g(null))},sx:{mb:2},children:[(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)(mO,{}),label:"Record Video"}),(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)(aM,{}),label:"Take Photo"}),(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)(fO,{}),label:"Upload"})]}),p&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:p}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[0===o&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("video",{ref:b,autoPlay:!0,muted:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}),(0,Ve.jsx)(Qe,{sx:{mt:2},children:c?(0,Ve.jsx)(Kk,{variant:"contained",color:"secondary",onClick:()=>{w.current&&c&&(w.current.stop(),u(!1),f&&f.getTracks().forEach((e=>e.stop())))},disabled:d,children:"Stop Recording"}):(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});g(e),b.current&&(b.current.srcObject=e);const t=new MediaRecorder(e);w.current=t;const n=[];t.ondataavailable=e=>{e.data.size>0&&n.push(e.data)},t.onstop=()=>{const e=new Blob(n,{type:"video/webm"});y(n),l(URL.createObjectURL(e))},t.start(),u(!0)}catch(p){console.error("Error accessing camera:",p),m("Failed to access camera")}},disabled:d,children:"Start Recording"})})]}),1===o&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("video",{ref:b,autoPlay:!0,muted:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}),(0,Ve.jsx)(Qe,{sx:{mt:2},children:(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:async()=>{if(b.current){const e=document.createElement("canvas");e.width=b.current.videoWidth,e.height=b.current.videoHeight;const t=e.getContext("2d");t&&(t.drawImage(b.current,0,0),l(e.toDataURL("image/jpeg")))}},disabled:d,children:"Take Photo"})})]}),2===o&&(0,Ve.jsxs)(Qe,{sx:{width:"100%",textAlign:"center"},children:[(0,Ve.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>10485760)return void m("File size should be less than 10MB");if(!t.type.match(/^(image\/(jpeg|png|gif)|video\/mp4|video\/webm)$/))return void m("Only JPEG, PNG, GIF images and MP4, WebM videos are allowed");l(URL.createObjectURL(t)),m(null)}},style:{display:"none"},id:"file-upload"}),(0,Ve.jsx)("label",{htmlFor:"file-upload",children:(0,Ve.jsx)(Kk,{variant:"contained",component:"span",disabled:d,children:"Choose File"})})]}),s&&(0,Ve.jsx)(Qe,{sx:{mt:2,width:"100%"},children:s.startsWith("data:video")?(0,Ve.jsx)("video",{src:s,controls:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}):(0,Ve.jsx)("img",{src:s,alt:"Preview",style:{width:"100%",maxHeight:"400px",objectFit:"contain"}})})]})]}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:r,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(i&&(s||0!==v.length))try{let e,t;if(h(!0),m(null),v.length>0)e=new Blob(v,{type:"video/webm"}),t="video";else{if(!s)throw new Error("No media to upload");{const n=await fetch(s);e=await n.blob(),t=s.startsWith("data:video")?"video":"image"}}const n=cb(YA,`stories/${i.uid}/${Date.now()}_${t}`);await ob(n,e);const o=await sb(n),a=new Date;a.setHours(a.getHours()+24),await mv(Jf(KA,"stories"),{authorId:i.uid,mediaUrl:o,mediaType:t,timestamp:Sv(),expiresAt:nl.fromDate(a),views:[],viewDetails:[]}),r()}catch(p){console.error("Error uploading story:",p),m("Failed to upload story")}finally{h(!1)}},variant:"contained",disabled:!s||d,children:d?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(dP,{size:24,sx:{mr:1}}),"Uploading..."]}):"Upload Story"})]})]})};var vO=n(5361);function yO(e){return(0,GT.Ay)("MuiCollapse",e)}(0,Ge.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const bO=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],wO=(0,WT.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,De.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),xO=(0,WT.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),EO=(0,WT.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,De.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),AO=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:m,onExited:f,onExiting:g,orientation:v="vertical",style:y,timeout:b=vO.p0.standard,TransitionComponent:w=SC}=r,x=(0,Le.A)(r,bO),E=(0,De.A)({},r,{orientation:v,collapsedSize:s}),A=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,VT.A)(r,yO,n)})(E),S=TC(),T=(0,Q_.A)(),_=t.useRef(null),k=t.useRef(),C="number"===typeof s?`${s}px`:s,I="horizontal"===v,R=I?"width":"height",D=t.useRef(null),L=(0,j_.A)(n,D),P=e=>t=>{if(e){const n=D.current;void 0===t?e(n):e(n,t)}},M=()=>_.current?_.current[I?"clientWidth":"clientHeight"]:0,O=P(((e,t)=>{_.current&&I&&(_.current.style.position="absolute"),e.style[R]=C,d&&d(e,t)})),N=P(((e,t)=>{const n=M();_.current&&I&&(_.current.style.position="");const{duration:r,easing:i}=kC({style:y,timeout:b,easing:c},{mode:"enter"});if("auto"===b){const t=S.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,k.current=t}else e.style.transitionDuration="string"===typeof r?r:`${r}ms`;e.style[R]=`${n}px`,e.style.transitionTimingFunction=i,p&&p(e,t)})),j=P(((e,t)=>{e.style[R]="auto",h&&h(e,t)})),F=P((e=>{e.style[R]=`${M()}px`,m&&m(e)})),U=P(f),B=P((e=>{const t=M(),{duration:n,easing:r}=kC({style:y,timeout:b,easing:c},{mode:"exit"});if("auto"===b){const n=S.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,k.current=n}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[R]=C,e.style.transitionTimingFunction=r,g&&g(e)}));return(0,Ve.jsx)(w,(0,De.A)({in:u,onEnter:O,onEntered:j,onEntering:N,onExit:F,onExited:U,onExiting:B,addEndListener:e=>{"auto"===b&&T.start(k.current||0,e),i&&i(D.current,e)},nodeRef:D,timeout:"auto"===b?null:b},x,{children:(e,t)=>(0,Ve.jsx)(wO,(0,De.A)({as:l,className:(0,Pe.A)(A.root,a,{entered:A.entered,exited:!u&&"0px"===C&&A.hidden}[e]),style:(0,De.A)({[I?"minWidth":"minHeight"]:C},y),ref:L},t,{ownerState:(0,De.A)({},E,{state:e}),children:(0,Ve.jsx)(xO,{ownerState:(0,De.A)({},E,{state:e}),className:A.wrapper,ref:_,children:(0,Ve.jsx)(EO,{ownerState:(0,De.A)({},E,{state:e}),className:A.wrapperInner,children:o})})}))}))}));AO.muiSupportAuto=!0;const SO=AO,TO=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),_O=(0,u_.A)((0,Ve.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),kO=(0,u_.A)((0,Ve.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),CO=(0,u_.A)((0,Ve.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),IO=(0,u_.A)((0,Ve.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),RO=(0,u_.A)((0,Ve.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),DO=(0,u_.A)((0,Ve.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var LO={};function PO(){return LO}function MO(e){return MO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MO(e)}function OO(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function NO(e){OO(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===MO(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function jO(e,t){OO(2,arguments);var n=NO(e),r=NO(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function FO(e){OO(1,arguments);var t=NO(e);return t.setHours(23,59,59,999),t}function UO(e){OO(1,arguments);var t=NO(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function BO(e,t){OO(2,arguments);var n,r=NO(e),i=NO(t),o=jO(r,i),a=Math.abs(function(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(a<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*a);var s=jO(r,i)===-o;(function(e){OO(1,arguments);var t=NO(e);return FO(t).getTime()===UO(t).getTime()})(NO(e))&&1===a&&1===jO(e,i)&&(s=!1),n=o*(a-Number(s))}return 0===n?0:n}var $O={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function VO(e,t,n){OO(2,arguments);var r,i=function(e,t){return OO(2,arguments),NO(e).getTime()-NO(t).getTime()}(e,t)/1e3;return((r=null===n||void 0===n?void 0:n.roundingMethod)?$O[r]:$O.trunc)(i)}var WO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const zO=function(e,t,n){var r,i=WO[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function HO(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var qO={date:HO({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:HO({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:HO({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var GO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function KO(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function YO(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(s)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}var XO;const QO={code:"en-US",formatDistance:zO,formatLong:qO,formatRelative:function(e,t,n,r){return GO[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:KO({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:KO({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:KO({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:KO({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:KO({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(XO={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(XO.matchPattern);if(!n)return null;var r=n[0],i=e.match(XO.parsePattern);if(!i)return null;var o=XO.valueCallback?XO.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:YO({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:YO({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:YO({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:YO({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:YO({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},JO=QO;function ZO(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function eN(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var tN=43200;function nN(e,t,n){var r,i;OO(2,arguments);var o=PO(),a=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:o.locale)&&void 0!==r?r:JO;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=jO(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var l,c,u=ZO(ZO({},n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:s});s>0?(l=NO(t),c=NO(e)):(l=NO(e),c=NO(t));var d,h=VO(c,l),p=(eN(c)-eN(l))/1e3,m=Math.round((h-p)/60);if(m<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?a.formatDistance("lessThanXSeconds",5,u):h<10?a.formatDistance("lessThanXSeconds",10,u):h<20?a.formatDistance("lessThanXSeconds",20,u):h<40?a.formatDistance("halfAMinute",0,u):h<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):0===m?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",m,u);if(m<45)return a.formatDistance("xMinutes",m,u);if(m<90)return a.formatDistance("aboutXHours",1,u);if(m<1440){var f=Math.round(m/60);return a.formatDistance("aboutXHours",f,u)}if(m<2520)return a.formatDistance("xDays",1,u);if(m<tN){var g=Math.round(m/1440);return a.formatDistance("xDays",g,u)}if(m<86400)return d=Math.round(m/tN),a.formatDistance("aboutXMonths",d,u);if((d=BO(c,l))<12){var v=Math.round(m/tN);return a.formatDistance("xMonths",v,u)}var y=d%12,b=Math.floor(d/12);return y<3?a.formatDistance("aboutXYears",b,u):y<9?a.formatDistance("overXYears",b,u):a.formatDistance("almostXYears",b+1,u)}function rN(e,t){return OO(1,arguments),nN(e,Date.now(),t)}const iN=e=>{let{stories:n,initialIndex:r,open:i,onClose:o}=e;const{currentUser:a}=xT(),[s,l]=(0,t.useState)(r),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),b=(0,t.useRef)(),w=(0,t.useRef)(null),[x,E]=((0,t.useRef)(null),(0,t.useState)(0)),[A,S]=(0,t.useState)(!1),[T,_]=(0,t.useState)(!1),k=(0,t.useRef)(),C=J(),I=n[s];(0,t.useEffect)((()=>{i&&(l(r),E(0),S(!1),g(!1))}),[i,r]),(0,t.useEffect)((()=>{if(!I||!a)return;(async()=>{try{const e=Zf(KA,"stories",I.id);await hv(e,{views:Tv(a.uid)})}catch(d){console.error("Error marking story as viewed:",d)}})()}),[I,a]),(0,t.useEffect)((()=>{if(!I)return;(async()=>{try{const e=fv(Zf(KA,"stories",I.id),(e=>{if(e.exists()){const t=e.data();y(t.viewDetails||[])}}));return()=>e()}catch(e){console.error("Error fetching viewers:",e)}})()}),[I]),(0,t.useEffect)((()=>{if(!i||!I||A)return;const e=Date.now();return b.current=setInterval((()=>{const t=(Date.now()-e)/5e3*100;t>=100?(clearInterval(b.current),R()):E(t)}),50),()=>{b.current&&clearInterval(b.current)}}),[i,I,A]),(0,t.useEffect)((()=>{w.current&&(A?w.current.pause():w.current.play())}),[A]);const R=()=>{s<n.length-1?(l(s+1),E(0)):o()},D=()=>{S(!0),b.current&&clearInterval(b.current)},L=()=>{S(!1)},P=()=>{b.current&&clearInterval(b.current),o()},M=()=>{k.current&&clearTimeout(k.current),T&&(_(!1),L())};(0,t.useEffect)((()=>()=>{k.current&&clearTimeout(k.current)}),[]);return I?(0,Ve.jsx)(GR,{fullScreen:!0,open:i,onClose:P,PaperProps:{sx:{bgcolor:"black",color:"white"}},children:(0,Ve.jsxs)(Qe,{sx:{position:"relative",height:"100%",display:"flex",flexDirection:"column"},onTouchStart:()=>{k.current=setTimeout((()=>{_(!0),D()}),300)},onTouchEnd:()=>{k.current&&clearTimeout(k.current),T&&(_(!1),L())},onMouseDown:()=>{k.current=setTimeout((()=>{_(!0),D()}),300)},onMouseUp:M,onMouseLeave:M,children:[(0,Ve.jsx)(Qe,{sx:{display:"flex",gap:1,p:1,position:"absolute",top:0,left:0,right:0,zIndex:1},children:n.map(((e,t)=>(0,Ve.jsx)(Qe,{sx:{flex:1,height:2,bgcolor:"rgba(255, 255, 255, 0.3)",borderRadius:1,overflow:"hidden"},children:(0,Ve.jsx)(Qe,{sx:{width:`${t===s?x:t<s?100:0}%`,height:"100%",bgcolor:"white",transition:"width 0.05s linear"}})},t)))}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",p:2,position:"absolute",top:0,left:0,right:0,zIndex:1},children:[(0,Ve.jsx)(I_,{src:I.author.avatar}),(0,Ve.jsxs)(Qe,{sx:{ml:2,flex:1},children:[(0,Ve.jsx)(N_,{variant:"subtitle1",children:I.author.name}),(0,Ve.jsx)(N_,{variant:"caption",children:new Date(I.timestamp).toLocaleTimeString()})]}),I.authorId===(null===a||void 0===a?void 0:a.uid)&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Sk,{onClick:e=>m(e.currentTarget),color:"inherit",children:(0,Ve.jsx)(TO,{})}),(0,Ve.jsx)(MI,{anchorEl:p,open:Boolean(p),onClose:()=>m(null),children:(0,Ve.jsx)(qI,{onClick:async()=>{if(I&&a&&I.authorId===a.uid)try{await pv(Zf(KA,"stories",I.id)),m(null),R()}catch(d){console.error("Error deleting story:",d),h("Failed to delete story")}},children:"Delete Story"})})]}),(0,Ve.jsx)(Sk,{onClick:P,color:"inherit",children:(0,Ve.jsx)(iM,{})})]}),(0,Ve.jsx)(Qe,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},onClick:()=>S(!A),children:"video"===I.mediaType?(0,Ve.jsx)("video",{ref:w,src:I.mediaUrl,autoPlay:!0,loop:!0,style:{width:"100%",height:"100%",objectFit:"contain"}}):(0,Ve.jsx)("img",{src:I.mediaUrl,alt:"Story",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,Ve.jsxs)(Qe,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[(0,Ve.jsx)(Sk,{onClick:()=>{s>0&&(l(s-1),E(0))},color:"inherit",sx:{visibility:s>0?"visible":"hidden"},children:(0,Ve.jsx)(_O,{})}),(0,Ve.jsx)(Sk,{onClick:R,color:"inherit",sx:{visibility:s<n.length-1?"visible":"hidden"},children:(0,Ve.jsx)(kO,{})})]}),(0,Ve.jsxs)(Qe,{sx:{position:"absolute",top:16,right:16,display:"flex",alignItems:"center",gap:1},children:[T&&(0,Ve.jsx)(N_,{variant:"caption",sx:{color:"white"},children:"Holding to pause"}),(0,Ve.jsx)(Sk,{onClick:A?L:D,sx:{color:"white",bgcolor:"rgba(0, 0, 0, 0.3)","&:hover":{bgcolor:"rgba(0, 0, 0, 0.5)"}},children:A?(0,Ve.jsx)(CO,{}):(0,Ve.jsx)(IO,{})})]}),(0,Ve.jsxs)(Qe,{onClick:e=>((e,t)=>{e.stopPropagation(),o(),C(`/profile/${t}`)})(e,I.authorId),sx:{position:"absolute",top:16,left:16,display:"flex",alignItems:"center",gap:1,bgcolor:"rgba(0, 0, 0, 0.3)",p:1,borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"rgba(0, 0, 0, 0.5)"}},children:[(0,Ve.jsx)(I_,{src:I.author.avatar,sx:{width:32,height:32,border:"2px solid white"}}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",sx:{fontWeight:"bold"},children:I.author.name}),(0,Ve.jsxs)(N_,{variant:"caption",sx:{opacity:.8},children:["@",I.author.username]})]})]}),(0,Ve.jsxs)(JT,{sx:{position:"absolute",bottom:0,left:0,right:0,bgcolor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:0},children:[(0,Ve.jsxs)(Qe,{onClick:()=>g(!f),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,cursor:"pointer"},children:[(0,Ve.jsxs)(N_,{variant:"subtitle1",children:[v.length," ",1===v.length?"view":"views"]}),f?(0,Ve.jsx)(RO,{}):(0,Ve.jsx)(DO,{})]}),(0,Ve.jsxs)(SO,{in:f,children:[(0,Ve.jsx)(oR,{sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,Ve.jsx)(tC,{sx:{maxHeight:200,overflow:"auto"},children:v.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.userAvatar||""})}),(0,Ve.jsx)(eR,{primary:e.userName||"Anonymous User",secondary:rN(e.timestamp,{addSuffix:!0}),secondaryTypographyProps:{color:"rgba(255, 255, 255, 0.7)"}})]}),n<v.length-1&&(0,Ve.jsx)(oR,{sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}})]},e.userId)))})]})]})]})}):null},oN=e=>{let{following:n}=e;const[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null),{currentUser:v,userProfile:y}=xT(),b=e=>{g(e),m(!0)};(0,t.useEffect)((()=>{if(!v)return;const e=Jf(KA,"stories"),t=Array.from(new Set([...n,v.uid]));if(0===t.length)return a([]),i([]),void l(!1);const r=fv(Wg(e,Hg("authorId","in",t),Hg("expiresAt",">",nl.now()),Kg("authorId"),Kg("timestamp","desc")),(e=>{const t=[],n=new Set,r=[];e.forEach((e=>{const i=e.data();if(!i.authorId||!i.timestamp||!i.expiresAt)return;lv(Zf(KA,"users",i.authorId)).then((o=>{const a=o.data();if(a){var s;const o={id:e.id,mediaUrl:i.mediaUrl,mediaType:i.mediaType,author:{name:a.name||"",avatar:a.avatar||"",username:a.username||""},authorId:i.authorId,timestamp:i.timestamp.toDate(),expiresAt:i.expiresAt.toDate(),views:i.views||[],viewDetails:(null===(s=i.viewDetails)||void 0===s?void 0:s.map((e=>({userId:e.userId,timestamp:e.timestamp.toDate()}))))||[]};t.push(o),i.authorId===v.uid||n.has(i.authorId)||(r.push(o),n.add(i.authorId))}}))})),a(t),i(r),l(!1)}),(e=>{console.error("Error fetching stories:",e),u("Failed to fetch stories."),l(!1)}));return()=>r()}),[v,n]);const w=o.some((e=>e.authorId===(null===v||void 0===v?void 0:v.uid))),x=o.filter((e=>e.authorId===(null===v||void 0===v?void 0:v.uid))),E=x.some((e=>e.views.includes((null===v||void 0===v?void 0:v.uid)||"")));return(0,Ve.jsxs)(Qe,{sx:{p:2},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:2,overflowX:"auto",pb:2,"&::-webkit-scrollbar":{display:"none"}},children:[v&&(0,Ve.jsxs)(Qe,{onClick:()=>{if(!v)return;const e=o.some((e=>e.authorId===v.uid));e?b(v.uid):h(!0)},sx:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",minWidth:80,textAlign:"center"},children:[(0,Ve.jsxs)(Qe,{sx:{position:"relative",width:64,height:64,mb:1},children:[(0,Ve.jsx)(I_,{src:(null===y||void 0===y?void 0:y.profilePic)||v.photoURL||"",sx:{width:"100%",height:"100%",border:"2px solid",borderColor:w?E?"grey.400":"primary.main":"#e0e0e0","&:hover":{opacity:.8}}}),(0,Ve.jsx)(Sk,{onClick:()=>h(!0),size:"small",sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"white",border:"2px solid white","&:hover":{bgcolor:"primary.dark"},width:22,height:22},children:(0,Ve.jsx)(CM,{sx:{fontSize:"1rem"}})})]}),(0,Ve.jsx)(N_,{variant:"caption",sx:{mt:.5},children:w?"Your Story":"Add Story"})]}),s?Array(5).fill(0).map(((e,t)=>(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80},children:[(0,Ve.jsx)(kM,{variant:"circular",width:64,height:64}),(0,Ve.jsx)(kM,{variant:"text",width:60,sx:{mt:1}})]},t))):c?(0,Ve.jsx)(qP,{severity:"error",sx:{flexGrow:1},children:c}):0!==r.length||s||w?(0,Ve.jsx)(Qe,{sx:{display:"flex",gap:2,overflowX:"auto",p:2,bgcolor:"background.paper"},children:r.map((e=>(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80,textAlign:"center"},children:[(0,Ve.jsx)(I_,{src:e.author.avatar,onClick:()=>b(e.authorId),sx:{width:64,height:64,cursor:"pointer",mb:1,border:"2px solid",borderColor:e.views.includes((null===v||void 0===v?void 0:v.uid)||"")?"grey.400":"primary.main","&:hover":{opacity:.8}}}),(0,Ve.jsx)(N_,{variant:"caption",component:Ce,to:`/profile/${e.authorId}`,sx:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:e.author.name})]},e.authorId)))}):(0,Ve.jsx)(N_,{variant:"body2",sx:{color:"text.secondary",alignSelf:"center",mx:2},children:"No stories to show."})]}),(0,Ve.jsx)(gO,{open:d,onClose:()=>{h(!1)}}),p&&f&&(0,Ve.jsx)(iN,{stories:o.filter((e=>e.authorId===f)),initialIndex:0,open:p,onClose:()=>{m(!1),g(null)}})]})},aN=(0,t.createContext)({db:null,loading:!1,error:null}),sN=()=>{const e=(0,t.useContext)(aN);if(void 0===e)throw new Error("useFirestore must be used within a FirestoreProvider");return null===e.db&&console.warn("useFirestore called before db was initialized or initialization failed"),e},lN=e=>{let{children:t}=e;const n={db:KA,loading:!1,error:null};return(0,Ve.jsx)(aN.Provider,{value:n,children:t})};var cN=n(2183),uN=n(6832),dN=n(8154),hN=n(6319),pN=n(9693),mN=n(4453),fN=n(7988);const gN=t.forwardRef((function(e,t){return(0,Ve.jsx)(fR,{direction:"up",ref:t,...e})})),vN=()=>{const{currentUser:e,loading:n}=xT(),{db:r}=sN(),[i,o]=(J(),(0,t.useState)([])),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[w,x]=(0,t.useState)(""),E=(0,t.useRef)(null),[A,S]=(0,t.useState)([]),[T,_]=(0,t.useState)(!1),[k,C]=(0,t.useState)(null),[I,R]=(0,t.useState)(null),D=Boolean(k),[L,P]=(0,t.useState)(!1),[M,O]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n||!e||!r)return;console.log("Feed: Auth finished, currentUser exists. Loading user profile...");(async()=>{try{const t=await lv(Zf(r,"users",e.uid));if(!t.exists())return c("User profile not found"),void s(!1);const n=t.data();p(n),d(n.connections||[]),f(!0),s(!1)}catch(l){console.error("Error loading user profile:",l),c("Failed to load user profile"),s(!1)}})()}),[e,r,n]),(0,t.useEffect)((()=>{if(!r||!e)return void s(!1);(async()=>{try{O(!0);const t=Jf(r,"users",e.uid,"following"),n=(await uv(t)).docs.map((e=>e.id)).filter(Boolean),i=[...n,e.uid].filter(Boolean);if(0===i.length)return o([]),s(!1),void O(!1);const a=fv(Wg(Jf(r,"posts"),Hg("authorId","in",i),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));o(t),O(!1),s(!1)}),(e=>{console.error("Error fetching posts:",e),c("Failed to load posts"),O(!1),s(!1)}));return()=>a()}catch(l){console.error("Error setting up posts listener:",l),c("Failed to load posts"),O(!1),s(!1)}})()}),[r,e]);const N=async t=>{if(r&&e)try{var n;const i=Zf(r,"posts",t),o=await lv(i);if(!o.exists())throw new Error("Post not found");const a=o.data(),s=null===(n=a.likedBy)||void 0===n?void 0:n.includes(e.uid),l=a.likes||0;if(s)await hv(i,{likedBy:_v(e.uid),likes:Math.max(0,l-1)});else if(await hv(i,{likedBy:Tv(e.uid),likes:l+1}),a.authorId!==e.uid){const n={type:"like",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:a.authorId,postId:t,content:`${e.displayName||"Someone"} liked your post`,createdAt:Sv(),isRead:!1};await mv(Jf(r,"users",a.authorId,"notifications"),n)}}catch(l){console.error("Error toggling like:",l),wS.error("Failed to update like")}},j=async t=>{if(!e||!r)return void wS.error("You must be logged in to repost");const n=i.find((e=>e.id===t));if(!n)return void wS.error("Post not found");const a=i.some((n=>n.isRepost&&n.id===t&&n.repostedById===e.uid));try{if(a)S((e=>[...e,{postId:t,added:!1}])),o((n=>n.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:Math.max(0,(e.reposts||0)-1)})).filter((n=>!(n.isRepost&&n.id===t&&n.repostedById===e.uid))))),wS.success("Repost removed");else{if(S((e=>[...e,{postId:t,added:!0}])),o((r=>[{...n,timestamp:nl.now(),isRepost:!0,repostedById:e.uid,reposts:(n.reposts||0)+1},...r.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:(e.reposts||0)+1}))])),n.authorId!==e.uid){const i={type:"repost",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:n.authorId,postId:t,content:`${e.displayName||"Someone"} reposted your post`,createdAt:Sv(),isRead:!1};await mv(Jf(r,"users",n.authorId,"notifications"),i)}wS.success("Post reposted!")}await U()}catch(l){console.error("Error handling repost:",l),wS.error("Failed to process repost. Changes will sync later.")}},F=()=>{C(null),R(null)},U=async()=>{if(r&&e&&0!==A.length){_(!0);try{const t=Cv(r),n=Jf(r,"reposts");for(const r of A){const{postId:i,added:o}=r,a=Zf(n,`${e.uid}_${i}`);o?t.set(a,{originalPostId:i,userId:e.uid,timestamp:nl.now()}):t.delete(a)}await t.commit(),S([]),wS.success("Reposts synced successfully!")}catch(l){console.error("Error syncing reposts:",l),wS.error("Failed to sync reposts. Try again later.")}finally{_(!1)}}};return n?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(dP,{})}):e?l?(0,Ve.jsx)(Qe,{sx:{p:3,textAlign:"center"},children:(0,Ve.jsx)(N_,{color:"error",children:l})}):(0,Ve.jsxs)(DP,{maxWidth:"lg",children:[(0,Ve.jsxs)(Qe,{sx:{mb:4,pt:3,display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1,textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em",position:"relative","&::after":{content:'""',position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",width:"60px",height:"4px",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",borderRadius:"2px"}},children:"Your Feed"}),(0,Ve.jsx)(N_,{variant:"subtitle1",color:"text.secondary",sx:{textAlign:"center",fontStyle:"italic",mb:2},children:"Stay updated with your friends and community"})]}),l&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:l}),a?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(dP,{})}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Qe,{sx:{mb:4},children:(0,Ve.jsx)(oN,{following:(null===h||void 0===h?void 0:h.following)||[]})}),(0,Ve.jsx)(JT,{elevation:3,sx:{mb:4,borderRadius:2,p:2,position:"relative",zIndex:10},children:(0,Ve.jsx)(lM,{open:L,onClose:()=>P(!1)})}),(0,Ve.jsx)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:0===i.length?(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",align:"center",children:"No posts yet. Follow some users to see their posts!"}):(0,Ve.jsx)(tC,{children:i.map((t=>{var n,r,i,o;return(0,Ve.jsxs)(DR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"},mb:2,borderRadius:2,backgroundColor:"background.paper",boxShadow:1},onClick:()=>{v(t),b(!0)},children:[t.isRepost&&(0,Ve.jsx)(Qe,{sx:{position:"absolute",top:-12,left:20,backgroundColor:"primary.main",color:"white",borderRadius:1,px:1,py:.5,fontSize:"0.75rem",zIndex:1},children:"Reposted"}),(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:t.authorAvatar||void 0})})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(N_,{variant:"subtitle1",component:"span",sx:{"&:hover":{textDecoration:"underline"}},children:t.authorName})}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[rN((null===(n=t.timestamp)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date)," ago"]}),!t.isRepost&&t.reposts>0&&(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:["\u2022 ",t.reposts," repost",1!==t.reposts?"s":""]})]}),t.authorId===(null===e||void 0===e?void 0:e.uid)&&(0,Ve.jsx)(Sk,{size:"small",onClick:e=>{return n=e,r=t.id,n.stopPropagation(),C(n.currentTarget),void R(r);var n,r},children:(0,Ve.jsx)(mN.A,{})})]}),secondary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mt:1},children:t.content}),t.isEdited&&(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:"(edited)"}),(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[t.comments&&t.comments.length>0&&(0,Ve.jsxs)(Qe,{sx:{backgroundColor:"background.default",borderRadius:1,p:1,mt:1},children:[t.comments.slice(0,2).map(((e,t)=>(0,Ve.jsxs)(Qe,{sx:{mb:1},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",component:"span",children:e.authorName}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:e.content})]},t))),t.comments.length>2&&(0,Ve.jsxs)(N_,{variant:"body2",color:"primary",sx:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),v(t),b(!0)},children:["View all ",t.comments.length," comments"]})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1,mt:1},children:[(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"likes",onClick:e=>{e.stopPropagation(),N(t.id)},children:[(0,Ve.jsx)(cN.A,{color:null!==(i=t.likedBy)&&void 0!==i&&i.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:t.likes||0})]}),(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"repost",onClick:e=>{e.stopPropagation(),j(t.id)},children:[(0,Ve.jsx)(uN.A,{color:t.isRepost&&t.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:t.reposts||0})]}),(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"comment",onClick:e=>{e.stopPropagation(),v(t),b(!0)},children:[(0,Ve.jsx)(dN.A,{}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:(null===(o=t.comments)||void 0===o?void 0:o.length)||0})]})]})]})]})})]},`${t.id}-${t.isRepost?"repost":"post"}`)}))})})]}),(()=>{var t,n,i,o;return g?(0,Ve.jsxs)(GR,{fullScreen:!0,open:y,onClose:()=>b(!1),TransitionComponent:gN,children:[(0,Ve.jsx)(i_,{sx:{position:"relative"},children:(0,Ve.jsxs)(c_,{children:[(0,Ve.jsx)(Sk,{edge:"start",color:"inherit",onClick:()=>b(!1),"aria-label":"close",children:(0,Ve.jsx)(hN.A,{})}),(0,Ve.jsx)(N_,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:g.isRepost?"Reposted Post":"Post"})]})}),(0,Ve.jsxs)(Qe,{sx:{p:2},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(Ce,{to:`/profile/${g.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:g.authorAvatar||void 0,sx:{width:48,height:48,mr:2}})}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${g.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(N_,{variant:"h6",sx:{"&:hover":{textDecoration:"underline"}},children:g.authorName})}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",children:[rN((null===(t=g.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]})]}),(0,Ve.jsx)(N_,{variant:"body1",sx:{mb:3},children:g.content}),g.imageUrl&&(0,Ve.jsx)(Qe,{sx:{mb:3,display:"flex",justifyContent:"center"},children:(0,Ve.jsx)("img",{src:g.imageUrl,alt:"Post attachment",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px"}})}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,Ve.jsxs)(Kk,{startIcon:(0,Ve.jsx)(cN.A,{color:null!==(i=g.likedBy)&&void 0!==i&&i.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),onClick:()=>N(g.id),children:[g.likes||0," Likes"]}),(0,Ve.jsxs)(Kk,{startIcon:(0,Ve.jsx)(uN.A,{color:g.isRepost&&g.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),onClick:()=>j(g.id),children:[g.reposts||0," Reposts"]}),(0,Ve.jsxs)(Kk,{startIcon:(0,Ve.jsx)(dN.A,{}),onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},children:[(null===(o=g.comments)||void 0===o?void 0:o.length)||0," Comments"]})]}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsx)(N_,{variant:"h6",sx:{mb:2},children:"Comments"}),g.comments&&g.comments.length>0?(0,Ve.jsx)(tC,{children:g.comments.map(((e,t)=>(0,Ve.jsxs)(DR,{alignItems:"flex-start",divider:!0,children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.authorAvatar||void 0})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",children:e.authorName}),(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:e.timestamp?rN(e.timestamp.toDate())+" ago":""})]}),secondary:(0,Ve.jsx)(N_,{component:"span",variant:"body2",color:"text.primary",sx:{display:"inline",mt:1},children:e.content})})]},t)))}):(0,Ve.jsx)(N_,{color:"text.secondary",sx:{mb:2},children:"No comments yet. Be the first to comment!"}),(0,Ve.jsxs)(Qe,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",boxShadow:3,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(XL,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:w,onChange:e=>x(e.target.value),inputRef:E,InputProps:{sx:{borderRadius:4}}}),(0,Ve.jsx)(Sk,{color:"primary",disabled:!w.trim(),onClick:()=>{w.trim()&&((async(t,n)=>{if(r&&e)try{const i=Zf(r,"posts",t),o=(await lv(i)).data(),a={content:n,authorId:e.uid,authorName:e.displayName||"Anonymous",authorAvatar:e.photoURL||"",timestamp:Sv(),likes:0};if(await hv(i,{comments:Tv(a)}),o&&o.authorId!==e.uid){const i={type:"comment",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:o.authorId,postId:t,content:`${e.displayName||"Someone"} commented on your post: "${n}"`,createdAt:Sv(),isRead:!1};await mv(Jf(r,"users",o.authorId,"notifications"),i)}const s=n.match(/@(\w+)/g);if(s){const i=Array.from(new Set(s));for(const a of i){const i=a.slice(1),s=Wg(Jf(r,"users"),Hg("username","==",i),Xg(1)),l=await uv(s);if(!l.empty){const i=l.docs[0];if(o&&i.id!==e.uid&&i.id!==o.authorId){const o={type:"mention",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:i.id,postId:t,content:`${e.displayName||"Someone"} mentioned you in a comment: "${n}"`,createdAt:Sv(),isRead:!1};await mv(Jf(r,"users",i.id,"notifications"),o)}}}}}catch(l){console.error("Error adding comment:",l),c("Failed to add comment")}})(g.id,w.trim()),x(""))},children:(0,Ve.jsx)(pN.A,{})})]}),(0,Ve.jsx)(Qe,{sx:{height:"64px"}})]})]}):null})(),0===A.length?null:(0,Ve.jsx)(Qe,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:(0,Ve.jsxs)(Kk,{variant:"contained",color:"primary",onClick:U,startIcon:(0,Ve.jsx)(uN.A,{}),children:["Sync ",A.length," Repost",1!==A.length?"s":""]})}),(0,Ve.jsx)(MI,{anchorEl:k,open:D,onClose:F,onClick:e=>e.stopPropagation(),children:(0,Ve.jsxs)(qI,{onClick:()=>{I&&(async t=>{if(r&&e)try{const n=Zf(r,"posts",t),i=await lv(n);if(i.exists()){const r=i.data();if(r.authorId!==e.uid)throw new Error("You can only delete your own posts");if(r.imageUrl)try{const e=cb(YA,r.imageUrl);await lb(e)}catch(l){console.error("Error deleting image:",l)}await pv(n),o((e=>e.filter((e=>e.id!==t)))),wS.success("Post deleted successfully")}}catch(l){console.error("Error deleting post:",l),c("Failed to delete post"),wS.error("Failed to delete post")}})(I),F()},children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(fN.A,{fontSize:"small"})}),"Delete Post"]})})]}):(0,Ve.jsx)(DP,{maxWidth:"md",children:(0,Ve.jsx)(Qe,{sx:{py:4,textAlign:"center"},children:(0,Ve.jsx)(N_,{variant:"h6",children:"Please sign in to view your feed"})})})};var yN=n(9629);const bN=t.createContext();function wN(e){return(0,GT.Ay)("MuiGrid",e)}const xN=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],EN=(0,Ge.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...xN.map((e=>`grid-xs-${e}`)),...xN.map((e=>`grid-sm-${e}`)),...xN.map((e=>`grid-md-${e}`)),...xN.map((e=>`grid-lg-${e}`)),...xN.map((e=>`grid-xl-${e}`))]),AN=EN,SN=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function TN(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function _N(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const kN=(0,WT.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(a,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...d]}})((e=>{let{ownerState:t}=e;return(0,De.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,yN.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,yN.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${AN.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,yN.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=_N({breakpoints:t.breakpoints.values,values:e})),o=(0,yN.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:`-${TN(o)}`,[`& > .${AN.item}`]:{paddingTop:TN(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${AN.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,yN.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=_N({breakpoints:t.breakpoints.values,values:e})),o=(0,yN.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:`calc(100% + ${TN(o)})`,marginLeft:`-${TN(o)}`,[`& > .${AN.item}`]:{paddingLeft:TN(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${AN.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=(0,yN.kW)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;const l=Math.round(t/s*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${TN(e)})`;c={flexBasis:t,maxWidth:t}}}o=(0,De.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const CN=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)}));const d={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==a&&`wrap-xs-${String(a)}`,...u]};return(0,VT.A)(d,wN,t)},IN=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiGrid"}),{breakpoints:i}=TC(),o=(0,Ne.A)(r),{className:a,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:m=0,wrap:f="wrap",zeroMinWidth:g=!1}=o,v=(0,Le.A)(o,SN),y=p||m,b=l||m,w=t.useContext(bN),x=u?s||12:w,E={},A=(0,De.A)({},v);i.keys.forEach((e=>{null!=v[e]&&(E[e]=v[e],delete A[e])}));const S=(0,De.A)({},o,{columns:x,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:f,zeroMinWidth:g,spacing:m},E,{breakpoints:i.keys}),T=CN(S);return(0,Ve.jsx)(bN.Provider,{value:x,children:(0,Ve.jsx)(kN,(0,De.A)({ownerState:S,className:(0,Pe.A)(T.root,a),as:c,ref:n},A))})}));const RN=IN;function DN(e){return(0,GT.Ay)("MuiLink",e)}const LN=(0,Ge.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var PN=n(5060);const MN={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ON=e=>{let{theme:t,ownerState:n}=e;const r=(e=>MN[e]||e)(n.color),i=(0,PN.Yn)(t,`palette.${r}`,!1)||n.color,o=(0,PN.Yn)(t,`palette.${r}Channel`);return"vars"in t&&o?`rgba(${o} / 0.4)`:(0,HT.X4)(i,.4)},NN=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],jN=(0,WT.Ay)(N_,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${(0,zT.A)(n.underline)}`],"button"===n.component&&t.button]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,De.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:ON({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${LN.focusVisible}`]:{outline:"auto"}})})),FN=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiLink"}),{className:i,color:o="primary",component:a="a",onBlur:s,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:h}=r,p=(0,Le.A)(r,NN),{isFocusVisibleRef:m,onBlur:f,onFocus:g,ref:v}=(0,U_.A)(),[y,b]=t.useState(!1),w=(0,j_.A)(n,v),x=(0,De.A)({},r,{color:o,component:a,focusVisible:y,underline:u,variant:d}),E=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${(0,zT.A)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,VT.A)(o,DN,t)})(x);return(0,Ve.jsx)(jN,(0,De.A)({color:o,className:(0,Pe.A)(E.root,i),classes:c,component:a,onBlur:e=>{f(e),!1===m.current&&b(!1),s&&s(e)},onFocus:e=>{g(e),!0===m.current&&b(!0),l&&l(e)},ref:w,ownerState:x,variant:d,sx:[...Object.keys(MN).includes(o)?[]:[{color:o}],...Array.isArray(h)?h:[h]]},p))})),UN=FN,BN=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),{login:c,loading:u,error:d,setError:h,currentUser:p,userProfile:m}=xT(),f=J();(0,t.useEffect)((()=>{l(null)}),[e,r]),(0,t.useEffect)((()=>{p&&m&&m.sourceCodeSetupComplete&&f("/")}),[p,m,f]),(0,t.useEffect)((()=>{d&&l({type:"error",message:d})}),[d]);const g=u||o;return(0,Ve.jsx)(DP,{maxWidth:"xs",children:(0,Ve.jsxs)(JT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:"Login to Side Eye"}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),h&&h(null),l(null),e.trim())if(r)try{a(!0),l({type:"info",message:"Logging in..."}),await c(e,r),l({type:"success",message:"Login successful! Redirecting..."})}catch(n){console.error("Login component caught error:",n),"auth/too-many-requests"===n.code?l({type:"error",message:"Too many failed login attempts. Please try again later or reset your password."}):"auth/invalid-credential"===n.code?l({type:"error",message:"Invalid email or password. Please try again."}):l({type:"error",message:"Login failed. Please try again."})}finally{a(!1)}else l({type:"error",message:"Password is required"});else l({type:"error",message:"Email is required"})},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(XL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>n(e.target.value),disabled:g}),(0,Ve.jsx)(XL,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:r,onChange:e=>i(e.target.value),disabled:g}),s&&(0,Ve.jsx)(qP,{severity:s.type,sx:{mt:2},children:s.message}),(0,Ve.jsx)(Kk,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?(0,Ve.jsx)(dP,{size:24}):"Sign In"}),(0,Ve.jsxs)(RN,{container:!0,justifyContent:"space-between",children:[(0,Ve.jsx)(RN,{item:!0,children:(0,Ve.jsx)(UN,{component:Ce,to:"/reset-password",variant:"body2",children:"Forgot password?"})}),(0,Ve.jsx)(RN,{item:!0,children:(0,Ve.jsx)(UN,{component:Ce,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})};function $N(e){return(0,GT.Ay)("MuiInputAdornment",e)}const VN=(0,Ge.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var WN;const zN=["children","className","component","disablePointerEvents","disableTypography","position","variant"],HN=(0,WT.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,zT.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${VN.positionStart}&:not(.${VN.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),qN=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=r,d=(0,Le.A)(r,zN),h=oD()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const m=(0,De.A)({},r,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:c,variant:p}),f=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=e,s={root:["root",n&&"disablePointerEvents",i&&`position${(0,zT.A)(i)}`,a,r&&"hiddenLabel",o&&`size${(0,zT.A)(o)}`]};return(0,VT.A)(s,$N,t)})(m);return(0,Ve.jsx)(iD.Provider,{value:null,children:(0,Ve.jsx)(HN,(0,De.A)({as:a,ownerState:m,className:(0,Pe.A)(f.root,o),ref:n},d,{children:"string"!==typeof i||l?(0,Ve.jsxs)(t.Fragment,{children:["start"===c?WN||(WN=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,Ve.jsx)(N_,{color:"text.secondary",children:i})}))})})),GN=qN;function KN(e,n,r,i,o){const[a,s]=t.useState((()=>o&&r?r(e).matches:i?i(e).matches:n));return(0,UC.A)((()=>{let t=!0;if(!r)return;const n=r(e),i=()=>{t&&s(n.matches)};return i(),n.addListener(i),()=>{t=!1,n.removeListener(i)}}),[e,r]),a}const YN=r.useSyncExternalStore;function XN(e,n,r,i,o){const a=t.useCallback((()=>n),[n]),s=t.useMemo((()=>{if(o&&r)return()=>r(e).matches;if(null!==i){const{matches:t}=i(e);return()=>t}return a}),[a,e,i,o,r]),[l,c]=t.useMemo((()=>{if(null===r)return[a,()=>()=>{}];const t=r(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[a,r,e]);return YN(c,l,s)}function QN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ue(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:o=(r?window.matchMedia:null),ssrMatchMedia:a=null,noSsr:s=!1}=pP({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");return(void 0!==YN?XN:KN)(l,i,o,a,s)}function JN(e){let{props:t,name:n}=e;return mP({props:t,name:n,defaultTheme:tt.A,themeId:qe.A})}var ZN=n(1942),ej=n.n(ZN);const tj=ej().oneOfType([ej().func,ej().object]),nj=(e,t)=>e.length===t.length&&t.every((t=>e.includes(t))),rj=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r=e.setMilliseconds(r,e.getMilliseconds(n)),r},ij=e=>{let{date:t,disableFuture:n,disablePast:r,maxDate:i,minDate:o,isDateDisabled:a,utils:s,timezone:l}=e;const c=rj(s,s.date(void 0,l),t);r&&s.isBefore(o,c)&&(o=c),n&&s.isAfter(i,c)&&(i=c);let u=t,d=t;for(s.isBefore(t,o)&&(u=o,d=null),s.isAfter(t,i)&&(d&&(d=i),u=null);u||d;){if(u&&s.isAfter(u,i)&&(u=null),d&&s.isBefore(d,o)&&(d=null),u){if(!a(u))return u;u=s.addDays(u,1)}if(d){if(!a(d))return d;d=s.addDays(d,-1)}}return null},oj=(e,t,n)=>null!=t&&e.isValid(t)?t:n,aj=(e,t)=>{const n=[e.startOfYear(t)];for(;n.length<12;){const t=n[n.length-1];n.push(e.addMonths(t,1))}return n},sj=(e,t,n)=>"date"===n?e.startOfDay(e.date(void 0,t)):e.date(void 0,t),lj=["year","month","day"],cj=e=>lj.includes(e),uj=(e,t,n)=>{let{format:r,views:i}=t;if(null!=r)return r;const o=e.formats;return nj(i,["year"])?o.year:nj(i,["month"])?o.month:nj(i,["day"])?o.dayOfMonth:nj(i,["month","year"])?`${o.month} ${o.year}`:nj(i,["day","month"])?`${o.month} ${o.dayOfMonth}`:n?/en/.test(e.getCurrentLocaleCode())?o.normalDateWithWeekday:o.normalDate:o.keyboardDate},dj=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map((t=>e.addDays(n,t)))},hj=["hours","minutes","seconds"],pj=(e,t)=>3600*t.getHours(e)+60*t.getMinutes(e)+t.getSeconds(e),mj={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},fj=(e,t,n)=>{if(t===mj.year)return e.startOfYear(n);if(t===mj.month)return e.startOfMonth(n);if(t===mj.day)return e.startOfDay(n);let r=n;return t<mj.minutes&&(r=e.setMinutes(r,0)),t<mj.seconds&&(r=e.setSeconds(r,0)),t<mj.milliseconds&&(r=e.setMilliseconds(r,0)),r},gj=e=>{let{props:t,utils:n,granularity:r,timezone:i,getTodayDate:o}=e,a=o?o():fj(n,r,sj(n,i));null!=t.minDate&&n.isAfterDay(t.minDate,a)&&(a=fj(n,r,t.minDate)),null!=t.maxDate&&n.isBeforeDay(t.maxDate,a)&&(a=fj(n,r,t.maxDate));const s=((e,t)=>(n,r)=>e?t.isAfter(n,r):pj(n,t)>pj(r,t))(t.disableIgnoringDatePartForTimeValidation??!1,n);return null!=t.minTime&&s(t.minTime,a)&&(a=fj(n,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:rj(n,a,t.minTime))),null!=t.maxTime&&s(a,t.maxTime)&&(a=fj(n,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:rj(n,a,t.maxTime))),a},vj=(e,t)=>{const n=e.formatTokenMap[t];if(null==n)throw new Error([`MUI X: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"===typeof n?{type:n,contentType:"meridiem"===n?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},yj=(e,t)=>{const n=[],r=e.date(void 0,"default"),i=e.startOfWeek(r),o=e.endOfWeek(r);let a=i;for(;e.isBefore(a,o);)n.push(a),a=e.addDays(a,1);return n.map((n=>e.formatByString(n,t)))},bj=(e,t,n,r)=>{switch(n){case"month":return aj(e,e.date(void 0,t)).map((t=>e.formatByString(t,r)));case"weekDay":return yj(e,r);case"meridiem":{const n=e.date(void 0,t);return[e.startOfDay(n),e.endOfDay(n)].map((t=>e.formatByString(t,r)))}default:return[]}},wj=["0","1","2","3","4","5","6","7","8","9"],xj=(e,t)=>{if("0"===t[0])return e;const n=[];let r="";for(let i=0;i<e.length;i+=1){r+=e[i];const o=t.indexOf(r);o>-1&&(n.push(o.toString()),r="")}return n.join("")},Ej=(e,t)=>"0"===t[0]?e:e.split("").map((e=>t[Number(e)])).join(""),Aj=(e,t)=>{const n=xj(e,t);return" "!==n&&!Number.isNaN(Number(n))},Sj=(e,t)=>{let n=e;for(n=Number(n).toString();n.length<t;)n=`0${n}`;return n},Tj=(e,t,n,r,i)=>{if("day"===i.type&&"digit-with-letter"===i.contentType){const r=e.setDate(n.longestMonth,t);return e.formatByString(r,i.format)}let o=t.toString();return i.hasLeadingZerosInInput&&(o=Sj(o,i.maxLength)),Ej(o,r)},_j=(e,t,n,r,i,o,a,s)=>{const l=(e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(r),c="Home"===r,u="End"===r,d=""===n.value||c||u;return"digit"===n.contentType||"digit-with-letter"===n.contentType?(()=>{const r=i[n.type]({currentDate:a,format:n.format,contentType:n.contentType}),h=t=>Tj(e,t,r,o,n),p="minutes"===n.type&&s?.minutesStep?s.minutesStep:1;let m;if(d){if("year"===n.type&&!u&&!c)return e.formatByString(e.date(void 0,t),n.format);m=l>0||c?r.minimum:r.maximum}else m=parseInt(xj(n.value,o),10)+l*p;return m%p!==0&&((l<0||c)&&(m+=p-(p+m)%p),(l>0||u)&&(m-=m%p)),m>r.maximum?h(r.minimum+(m-r.maximum-1)%(r.maximum-r.minimum+1)):m<r.minimum?h(r.maximum-(r.minimum-m-1)%(r.maximum-r.minimum+1)):h(m)})():(()=>{const r=bj(e,t,n.type,n.format);if(0===r.length)return n.value;if(d)return l>0||c?r[0]:r[r.length-1];const i=r.indexOf(n.value);return r[((i+l)%r.length+r.length)%r.length]})()},kj=(e,t,n)=>{let r=e.value||e.placeholder;const i="non-input"===t?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;"non-input"===t&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(r=Number(xj(r,n)).toString());return["input-rtl","input-ltr"].includes(t)&&"digit"===e.contentType&&!i&&1===r.length&&(r=`${r}\u200e`),"input-rtl"===t&&(r=`\u2068${r}\u2069`),r},Cj=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),Ij=(e,t)=>4===e.formatByString(e.date(void 0,"system"),t).length,Rj=(e,t,n,r)=>{if("digit"!==t)return!1;const i=e.date(void 0,"default");switch(n){case"year":return"dayjs"===e.lib&&"YY"===r||e.formatByString(e.setYear(i,1),r).startsWith("0");case"month":return e.formatByString(e.startOfYear(i),r).length>1;case"day":return e.formatByString(e.startOfMonth(i),r).length>1;case"weekDay":return e.formatByString(e.startOfWeek(i),r).length>1;case"hours":return e.formatByString(e.setHours(i,1),r).length>1;case"minutes":return e.formatByString(e.setMinutes(i,1),r).length>1;case"seconds":return e.formatByString(e.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}};const Dj=(e,t)=>{0},Lj={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},Pj=(e,t,n,r,i)=>[...n].sort(((e,t)=>Lj[e.type]-Lj[t.type])).reduce(((n,r)=>!i||r.modified?((e,t,n,r)=>{switch(t.type){case"year":return e.setYear(r,e.getYear(n));case"month":return e.setMonth(r,e.getMonth(n));case"weekDay":{const r=yj(e,t.format),i=e.formatByString(n,t.format),o=r.indexOf(i),a=r.indexOf(t.value)-o;return e.addDays(n,a)}case"day":return e.setDate(r,e.getDate(n));case"meridiem":{const t=e.getHours(n)<12,i=e.getHours(r);return t&&i>=12?e.addHours(r,-12):!t&&i<12?e.addHours(r,12):r}case"hours":return e.setHours(r,e.getHours(n));case"minutes":return e.setMinutes(r,e.getMinutes(n));case"seconds":return e.setSeconds(r,e.getSeconds(n));default:return r}})(e,r,t,n):n),r),Mj=(e,t)=>{if(null==e)return null;if("all"===e)return"all";if("string"===typeof e){const n=t.findIndex((t=>t.type===e));return-1===n?null:n}return e},Oj=(e,t)=>{if(e.value)switch(e.type){case"month":{if("digit"===e.contentType)return t.format(t.setMonth(t.date(),Number(e.value)-1),"month");const n=t.parse(e.value,e.format);return n?t.format(n,"month"):void 0}case"day":return"digit"===e.contentType?t.format(t.setDate(t.startOfYear(t.date()),Number(e.value)),"dayOfMonthFull"):e.value;default:return}},Nj=(e,t)=>{if(e.value)switch(e.type){case"weekDay":if("letter"===e.contentType)return;return Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return"digit-with-letter"===e.contentType?parseInt(e.value,10):Number(e.value);case"month":{if("digit"===e.contentType)return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return"letter"!==e.contentType?Number(e.value):void 0}},jj=["value","referenceDate"],Fj={emptyValue:null,getTodayValue:sj,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=(0,Le.A)(e,jj);return null!=t&&r.utils.isValid(t)?t:null!=n?n:gj(r)},cleanValue:(e,t)=>null!=t&&e.isValid(t)?t:null,areValuesEqual:(e,t,n)=>!e.isValid(t)&&null!=t&&!e.isValid(n)&&null!=n||e.isEqual(t,n),isSameError:(e,t)=>e===t,hasError:e=>null!=e,defaultErrorState:null,getTimezone:(e,t)=>null!=t&&e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>null==n?null:e.setTimezone(n,t)},Uj={updateReferenceValue:(e,t,n)=>null!=t&&e.isValid(t)?t:n,getSectionsFromValue:(e,t,n,r)=>!e.isValid(t)&&!!n?n:r(t),getV7HiddenInputValueFromSections:e=>e.map((e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`)).join(""),getV6InputValueFromSections:(e,t,n)=>{const r=e.map((e=>{const r=kj(e,n?"input-rtl":"input-ltr",t);return`${e.startSeparator}${r}${e.endSeparator}`})).join("");return n?`\u2066${r}\u2069`:r},getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:e=>e,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:null!=n&&e.isValid(n)?n:t.referenceValue})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},Bj=["localeText"],$j=t.createContext(null);const Vj=function(e){const{localeText:n}=e,r=(0,Le.A)(e,Bj),{utils:i,localeText:o}=t.useContext($j)??{utils:void 0,localeText:void 0},a=JN({props:r,name:"MuiLocalizationProvider"}),{children:s,dateAdapter:l,dateFormats:c,dateLibInstance:u,adapterLocale:d,localeText:h}=a,p=t.useMemo((()=>(0,De.A)({},h,o,n)),[h,o,n]),m=t.useMemo((()=>{if(!l)return i||null;const e=new l({locale:d,formats:c,instance:u});if(!e.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join("\n"));return e}),[l,d,c,u,i]),f=t.useMemo((()=>m?{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}:null),[m]),g=t.useMemo((()=>({utils:m,defaultDates:f,localeText:p})),[f,m,p]);return(0,Ve.jsx)($j.Provider,{value:g,children:s})},Wj=e=>{const{utils:t,formatKey:n,contextTranslation:r,propsTranslation:i}=e;return e=>{const o=null!==e&&t.isValid(e)?t.format(e,n):null;return(i??r)(e,t,o)}},zj={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n,r)=>`Select ${e}. ${r||null!==t&&n.isValid(t)?`Selected time is ${r??n.format(t,"fullTime")}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t,n)=>n||null!==e&&t.isValid(e)?`Choose date, selected date is ${n??t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t,n)=>n||null!==e&&t.isValid(e)?`Choose time, selected time is ${n??t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>"letter"===e.contentType?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>"letter"===e.contentType?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},Hj=zj;qj=zj,(0,De.A)({},qj);var qj;const Gj=()=>{const e=t.useContext($j);if(null===e)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join("\n"));if(null===e.utils)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join("\n"));const n=t.useMemo((()=>(0,De.A)({},Hj,e.localeText)),[e.localeText]);return t.useMemo((()=>(0,De.A)({},e,{localeText:n})),[e,n])},Kj=()=>Gj().utils,Yj=()=>Gj().defaultDates,Xj=e=>{const n=Kj(),r=t.useRef(void 0);return void 0===r.current&&(r.current=n.date(void 0,e)),r.current};function Qj(e){return(0,GT.Ay)("MuiPickersToolbar",e)}(0,Ge.A)("MuiPickersToolbar",["root","content"]);const Jj=["children","className","toolbarTitle","hidden","titleId","isLandscape","classes","landscapeDirection"],Zj=(0,WT.Ay)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{isLandscape:!0},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]}})),eF=(0,WT.Ay)("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{isLandscape:!0},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{isLandscape:!0,landscapeDirection:"row"},style:{flexDirection:"row"}}]}),tF=t.forwardRef((function(e,t){const n=JN({props:e,name:"MuiPickersToolbar"}),{children:r,className:i,toolbarTitle:o,hidden:a,titleId:s}=n,l=(0,Le.A)(n,Jj),c=n,u=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],content:["content"]},Qj,t)})(c);return a?null:(0,Ve.jsxs)(Zj,(0,De.A)({ref:t,className:(0,Pe.A)(u.root,i),ownerState:c},l,{children:[(0,Ve.jsx)(N_,{color:"text.secondary",variant:"overline",id:s,children:o}),(0,Ve.jsx)(eF,{className:u.content,ownerState:c,children:r})]}))})),nF=()=>Gj().localeText;function rF(e){return(0,GT.Ay)("MuiDatePickerToolbar",e)}(0,Ge.A)("MuiDatePickerToolbar",["root","title"]);const iF=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className","onViewChange","view"],oF=(0,WT.Ay)(tF,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),aF=(0,WT.Ay)(N_,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})({variants:[{props:{isLandscape:!0},style:{margin:"auto 16px auto auto"}}]}),sF=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiDatePickerToolbar"}),{value:i,isLandscape:o,toolbarFormat:a,toolbarPlaceholder:s="\u2013\u2013",views:l,className:c}=r,u=(0,Le.A)(r,iF),d=Kj(),h=nF(),p=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],title:["title"]},rF,t)})(r),m=t.useMemo((()=>{if(!i)return s;const e=uj(d,{format:a,views:l},!0);return d.formatByString(i,e)}),[i,a,s,d,l]),f=r;return(0,Ve.jsx)(oF,(0,De.A)({ref:n,toolbarTitle:h.datePickerToolbarTitle,isLandscape:o,className:(0,Pe.A)(p.root,c)},u,{children:(0,Ve.jsx)(aF,{variant:"h4",align:o?"left":"center",ownerState:f,className:p.title,children:m})}))}));function lF(e,n){const r=Kj(),i=Yj(),o=JN({props:e,name:n}),a=t.useMemo((()=>null==o.localeText?.toolbarTitle?o.localeText:(0,De.A)({},o.localeText,{datePickerToolbarTitle:o.localeText.toolbarTitle})),[o.localeText]);return(0,De.A)({},o,{localeText:a},(e=>{let{openTo:t,defaultOpenTo:n,views:r,defaultViews:i}=e;const o=r??i;let a;if(null!=t)a=t;else if(o.includes(n))a=n;else{if(!(o.length>0))throw new Error("MUI X: The `views` prop must contain at least one view.");a=o[0]}return{views:o,openTo:a}})({views:o.views,openTo:o.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:o.disableFuture??!1,disablePast:o.disablePast??!1,minDate:oj(r,o.minDate,i.minDate),maxDate:oj(r,o.maxDate,i.maxDate),slots:(0,De.A)({toolbar:sF},o.slots)})}const cF=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],uF=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],dF=["minDateTime","maxDateTime"],hF=[...cF,...uF,...dF],pF=e=>hF.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),mF=e=>{let{props:t,value:n,timezone:r,adapter:i}=e;if(null===n)return null;const{shouldDisableDate:o,shouldDisableMonth:a,shouldDisableYear:s,disablePast:l,disableFuture:c}=t,u=i.utils.date(void 0,r),d=oj(i.utils,t.minDate,i.defaultDates.minDate),h=oj(i.utils,t.maxDate,i.defaultDates.maxDate);switch(!0){case!i.utils.isValid(n):return"invalidDate";case Boolean(o&&o(n)):return"shouldDisableDate";case Boolean(a&&a(n)):return"shouldDisableMonth";case Boolean(s&&s(n)):return"shouldDisableYear";case Boolean(c&&i.utils.isAfterDay(n,u)):return"disableFuture";case Boolean(l&&i.utils.isBeforeDay(n,u)):return"disablePast";case Boolean(d&&i.utils.isBeforeDay(n,d)):return"minDate";case Boolean(h&&i.utils.isAfterDay(n,h)):return"maxDate";default:return null}};mF.valueManager=Fj;var fF=n(6688);function gF(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vF(e){return e instanceof gF(e).Element||e instanceof Element}function yF(e){return e instanceof gF(e).HTMLElement||e instanceof HTMLElement}function bF(e){return"undefined"!==typeof ShadowRoot&&(e instanceof gF(e).ShadowRoot||e instanceof ShadowRoot)}var wF=Math.max,xF=Math.min,EF=Math.round;function AF(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function SF(){return!/^((?!chrome|android).)*safari/i.test(AF())}function TF(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&yF(e)&&(i=e.offsetWidth>0&&EF(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&EF(r.height)/e.offsetHeight||1);var a=(vF(e)?gF(e):window).visualViewport,s=!SF()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function _F(e){var t=gF(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function kF(e){return e?(e.nodeName||"").toLowerCase():null}function CF(e){return((vF(e)?e.ownerDocument:e.document)||window.document).documentElement}function IF(e){return TF(CF(e)).left+_F(e).scrollLeft}function RF(e){return gF(e).getComputedStyle(e)}function DF(e){var t=RF(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function LF(e,t,n){void 0===n&&(n=!1);var r=yF(t),i=yF(t)&&function(e){var t=e.getBoundingClientRect(),n=EF(t.width)/e.offsetWidth||1,r=EF(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=CF(t),a=TF(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==kF(t)||DF(o))&&(s=function(e){return e!==gF(e)&&yF(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:_F(e);var t}(t)),yF(t)?((l=TF(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=IF(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function PF(e){var t=TF(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function MF(e){return"html"===kF(e)?e:e.assignedSlot||e.parentNode||(bF(e)?e.host:null)||CF(e)}function OF(e){return["html","body","#document"].indexOf(kF(e))>=0?e.ownerDocument.body:yF(e)&&DF(e)?e:OF(MF(e))}function NF(e,t){var n;void 0===t&&(t=[]);var r=OF(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=gF(r),a=i?[o].concat(o.visualViewport||[],DF(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(NF(MF(a)))}function jF(e){return["table","td","th"].indexOf(kF(e))>=0}function FF(e){return yF(e)&&"fixed"!==RF(e).position?e.offsetParent:null}function UF(e){for(var t=gF(e),n=FF(e);n&&jF(n)&&"static"===RF(n).position;)n=FF(n);return n&&("html"===kF(n)||"body"===kF(n)&&"static"===RF(n).position)?t:n||function(e){var t=/firefox/i.test(AF());if(/Trident/i.test(AF())&&yF(e)&&"fixed"===RF(e).position)return null;var n=MF(e);for(bF(n)&&(n=n.host);yF(n)&&["html","body"].indexOf(kF(n))<0;){var r=RF(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var BF="top",$F="bottom",VF="right",WF="left",zF="auto",HF=[BF,$F,VF,WF],qF="start",GF="end",KF="viewport",YF="popper",XF=HF.reduce((function(e,t){return e.concat([t+"-"+qF,t+"-"+GF])}),[]),QF=[].concat(HF,[zF]).reduce((function(e,t){return e.concat([t,t+"-"+qF,t+"-"+GF])}),[]),JF=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ZF(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function eU(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var tU={placement:"bottom",modifiers:[],strategy:"absolute"};function nU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function rU(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?tU:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},tU,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:vF(e)?NF(e):e.contextElement?NF(e.contextElement):[],popper:NF(t)};var u=function(e){var t=ZF(e);return JF.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(nU(t,n)){i.rects={reference:LF(t,UF(n),"fixed"===i.options.strategy),popper:PF(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:eU((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!nU(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var iU={passive:!0};function oU(e){return e.split("-")[0]}function aU(e){return e.split("-")[1]}function sU(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function lU(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?oU(i):null,a=i?aU(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case BF:t={x:s,y:n.y-r.height};break;case $F:t={x:s,y:n.y+n.height};break;case VF:t={x:n.x+n.width,y:l};break;case WF:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?sU(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case qF:t[c]=t[c]-(n[u]/2-r[u]/2);break;case GF:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var cU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uU(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,p=void 0===h?0:h,m=a.y,f=void 0===m?0:m,g="function"===typeof u?u({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=WF,w=BF,x=window;if(c){var E=UF(n),A="clientHeight",S="clientWidth";if(E===gF(n)&&"static"!==RF(E=CF(n)).position&&"absolute"===s&&(A="scrollHeight",S="scrollWidth"),i===BF||(i===WF||i===VF)&&o===GF)w=$F,f-=(d&&E===x&&x.visualViewport?x.visualViewport.height:E[A])-r.height,f*=l?1:-1;if(i===WF||(i===BF||i===$F)&&o===GF)b=VF,p-=(d&&E===x&&x.visualViewport?x.visualViewport.width:E[S])-r.width,p*=l?1:-1}var T,_=Object.assign({position:s},c&&cU),k=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:EF(n*i)/i||0,y:EF(r*i)/i||0}}({x:p,y:f},gF(n)):{x:p,y:f};return p=k.x,f=k.y,l?Object.assign({},_,((T={})[w]=y?"0":"",T[b]=v?"0":"",T.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",T)):Object.assign({},_,((t={})[w]=y?f+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const dU={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];yF(i)&&kF(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});yF(r)&&kF(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const hU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=QF.reduce((function(e,n){return e[n]=function(e,t,n){var r=oU(e),i=[WF,BF].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[WF,VF].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var pU={left:"right",right:"left",bottom:"top",top:"bottom"};function mU(e){return e.replace(/left|right|bottom|top/g,(function(e){return pU[e]}))}var fU={start:"end",end:"start"};function gU(e){return e.replace(/start|end/g,(function(e){return fU[e]}))}function vU(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&bF(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function yU(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bU(e,t,n){return t===KF?yU(function(e,t){var n=gF(e),r=CF(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=SF();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+IF(e),y:l}}(e,n)):vF(t)?function(e,t){var n=TF(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):yU(function(e){var t,n=CF(e),r=_F(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=wF(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=wF(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+IF(e),l=-r.scrollTop;return"rtl"===RF(i||n).direction&&(s+=wF(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(CF(e)))}function wU(e,t,n,r){var i="clippingParents"===t?function(e){var t=NF(MF(e)),n=["absolute","fixed"].indexOf(RF(e).position)>=0&&yF(e)?UF(e):e;return vF(n)?t.filter((function(e){return vF(e)&&vU(e,n)&&"body"!==kF(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=bU(e,n,r);return t.top=wF(i.top,t.top),t.right=xF(i.right,t.right),t.bottom=xF(i.bottom,t.bottom),t.left=wF(i.left,t.left),t}),bU(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function xU(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function EU(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function AU(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?KF:c,d=n.elementContext,h=void 0===d?YF:d,p=n.altBoundary,m=void 0!==p&&p,f=n.padding,g=void 0===f?0:f,v=xU("number"!==typeof g?g:EU(g,HF)),y=h===YF?"reference":YF,b=e.rects.popper,w=e.elements[m?y:h],x=wU(vF(w)?w:w.contextElement||CF(e.elements.popper),l,u,a),E=TF(e.elements.reference),A=lU({reference:E,element:b,strategy:"absolute",placement:i}),S=yU(Object.assign({},b,A)),T=h===YF?S:E,_={top:x.top-T.top+v.top,bottom:T.bottom-x.bottom+v.bottom,left:x.left-T.left+v.left,right:T.right-x.right+v.right},k=e.modifiersData.offset;if(h===YF&&k){var C=k[i];Object.keys(_).forEach((function(e){var t=[VF,$F].indexOf(e)>=0?1:-1,n=[BF,$F].indexOf(e)>=0?"y":"x";_[e]+=C[n]*t}))}return _}const SU={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=t.options.placement,v=oU(g),y=l||(v===g||!m?[mU(g)]:function(e){if(oU(e)===zF)return[];var t=mU(e);return[gU(e),t,gU(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(oU(n)===zF?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?QF:l,u=aU(r),d=u?s?XF:XF.filter((function(e){return aU(e)===u})):HF,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=AU(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[oU(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),w=t.rects.reference,x=t.rects.popper,E=new Map,A=!0,S=b[0],T=0;T<b.length;T++){var _=b[T],k=oU(_),C=aU(_)===qF,I=[BF,$F].indexOf(k)>=0,R=I?"width":"height",D=AU(t,{placement:_,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),L=I?C?VF:WF:C?$F:BF;w[R]>x[R]&&(L=mU(L));var P=mU(L),M=[];if(o&&M.push(D[k]<=0),s&&M.push(D[L]<=0,D[P]<=0),M.every((function(e){return e}))){S=_,A=!1;break}E.set(_,M)}if(A)for(var O=function(e){var t=b.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},N=m?3:1;N>0;N--){if("break"===O(N))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function TU(e,t,n){return wF(e,xF(t,n))}const _U={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,m=n.tetherOffset,f=void 0===m?0:m,g=AU(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=oU(t.placement),y=aU(t.placement),b=!y,w=sU(v),x="x"===w?"y":"x",E=t.modifiersData.popperOffsets,A=t.rects.reference,S=t.rects.popper,T="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,_="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(E){if(o){var I,R="y"===w?BF:WF,D="y"===w?$F:VF,L="y"===w?"height":"width",P=E[w],M=P+g[R],O=P-g[D],N=p?-S[L]/2:0,j=y===qF?A[L]:S[L],F=y===qF?-S[L]:-A[L],U=t.elements.arrow,B=p&&U?PF(U):{width:0,height:0},$=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=$[R],W=$[D],z=TU(0,A[L],B[L]),H=b?A[L]/2-N-z-V-_.mainAxis:j-z-V-_.mainAxis,q=b?-A[L]/2+N+z+W+_.mainAxis:F+z+W+_.mainAxis,G=t.elements.arrow&&UF(t.elements.arrow),K=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Y=null!=(I=null==k?void 0:k[w])?I:0,X=P+q-Y,Q=TU(p?xF(M,P+H-Y-K):M,P,p?wF(O,X):O);E[w]=Q,C[w]=Q-P}if(s){var J,Z="x"===w?BF:WF,ee="x"===w?$F:VF,te=E[x],ne="y"===x?"height":"width",re=te+g[Z],ie=te-g[ee],oe=-1!==[BF,WF].indexOf(v),ae=null!=(J=null==k?void 0:k[x])?J:0,se=oe?re:te-A[ne]-S[ne]-ae+_.altAxis,le=oe?te+A[ne]+S[ne]-ae-_.altAxis:ie,ce=p&&oe?function(e,t,n){var r=TU(e,t,n);return r>n?n:r}(se,te,le):TU(p?se:re,te,p?le:ie);E[x]=ce,C[x]=ce-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};const kU={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=oU(n.placement),l=sU(s),c=[WF,VF].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return xU("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:EU(e,HF))}(i.padding,n),d=PF(o),h="y"===l?BF:WF,p="y"===l?$F:VF,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=UF(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=m/2-f/2,b=u[h],w=v-d[c]-u[p],x=v/2-d[c]/2+y,E=TU(b,x,w),A=l;n.modifiersData[r]=((t={})[A]=E,t.centerOffset=E-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&vU(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function CU(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function IU(e){return[BF,VF,$F,WF].some((function(t){return e[t]>=0}))}var RU=rU({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=gF(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,iU)})),s&&l.addEventListener("resize",n.update,iU),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,iU)})),s&&l.removeEventListener("resize",n.update,iU)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=lU({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:oU(t.placement),variation:aU(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,uU(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,uU(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},dU,hU,SU,_U,kU,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=AU(t,{elementContext:"reference"}),s=AU(t,{altBoundary:!0}),l=CU(a,r),c=CU(s,i,o),u=IU(l),d=IU(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function DU(e){return(0,GT.Ay)("MuiPopper",e)}(0,Ge.A)("MuiPopper",["root"]);const LU=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],PU=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function MU(e){return"function"===typeof e?e():e}function OU(e){return void 0!==e.nodeType}const NU={},jU=t.forwardRef((function(e,n){var r;const{anchorEl:i,children:o,direction:a,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:m={},TransitionProps:f}=e,g=(0,Le.A)(e,LU),v=t.useRef(null),y=(0,p_.A)(v,n),b=t.useRef(null),w=(0,p_.A)(b,h),x=t.useRef(w);(0,UC.A)((()=>{x.current=w}),[w]),t.useImperativeHandle(h,(()=>b.current),[]);const E=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,a),[A,S]=t.useState(E),[T,_]=t.useState(MU(i));t.useEffect((()=>{b.current&&b.current.forceUpdate()})),t.useEffect((()=>{i&&_(MU(i))}),[i]),(0,UC.A)((()=>{if(!T||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{S(e.placement)})(t)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=RU(T,v.current,(0,De.A)({placement:E},d,{modifiers:e}));return x.current(t),()=>{t.destroy(),x.current(null)}}),[T,s,l,c,d,E]);const k={placement:A};null!==f&&(k.TransitionProps=f);const C=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},DU,t)})(e),I=null!=(r=m.root)?r:"div",R=kk({elementType:I,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:C.root});return(0,Ve.jsx)(I,(0,De.A)({},R,{children:"function"===typeof o?o(k):o}))})),FU=t.forwardRef((function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=NU,popperRef:p,style:m,transition:f=!1,slotProps:g={},slots:v={}}=e,y=(0,Le.A)(e,PU),[b,w]=t.useState(!0);if(!l&&!u&&(!f||b))return null;let x;if(o)x=o;else if(r){const e=MU(r);x=e&&OU(e)?(0,MC.A)(e).body:(0,MC.A)(null).body}const E=u||!l||f&&!b?void 0:"none",A=f?{in:u,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,Ve.jsx)($C,{disablePortal:s,container:x,children:(0,Ve.jsx)(jU,(0,De.A)({anchorEl:r,direction:a,disablePortal:s,modifiers:c,ref:n,open:f?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:(0,De.A)({position:"fixed",top:0,left:0,display:E},m),TransitionProps:A,children:i}))})})),UU=FU,BU=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],$U=(0,WT.Ay)(UU,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),VU=t.forwardRef((function(e,t){var n;const r=(0,fF.A)(),i=(0,Je.b)({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:s,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:m,popperOptions:f,popperRef:g,transition:v,slots:y,slotProps:b}=i,w=(0,Le.A)(i,BU),x=null!=(n=null==y?void 0:y.root)?n:null==s?void 0:s.Root,E=(0,De.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:m,popperOptions:f,popperRef:g,transition:v},w);return(0,Ve.jsx)($U,(0,De.A)({as:a,direction:null==r?void 0:r.direction,slots:{root:x},slotProps:null!=b?b:l},E,{ref:t}))})),WU=VU;function zU(e){return(0,GT.Ay)("MuiPickersPopper",e)}(0,Ge.A)("MuiPickersPopper",["root","paper"]);const HU=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).activeElement;return e?e.shadowRoot?HU(e.shadowRoot):e:null},qU="@media (pointer: fine)",GU="undefined"!==typeof navigator&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),KU=GU&&GU[1]?parseInt(GU[1],10):null,YU=GU&&GU[2]?parseInt(GU[2],10):null,XU=KU&&KU<10||YU&&YU<13||!1,QU=()=>QN("@media (prefers-reduced-motion: reduce)",{defaultMatches:!1})||XU,JU=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],ZU=(0,WT.Ay)(WU,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{zIndex:t.zIndex.modal}})),eB=(0,WT.Ay)(JT,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})({outline:0,transformOrigin:"top center",variants:[{props:e=>{let{placement:t}=e;return["top","top-start","top-end"].includes(t)},style:{transformOrigin:"bottom center"}}]});const tB=t.forwardRef(((e,t)=>{const{PaperComponent:n,popperPlacement:r,ownerState:i,children:o,paperSlotProps:a,paperClasses:s,onPaperClick:l,onPaperTouchStart:c}=e,u=(0,Le.A)(e,JU),d=(0,De.A)({},i,{placement:r}),h=kk({elementType:n,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:s,ownerState:d});return(0,Ve.jsx)(n,(0,De.A)({},u,h,{onClick:e=>{l(e),h.onClick?.(e)},onTouchStart:e=>{c(e),h.onTouchStart?.(e)},ownerState:d,children:o}))}));function nB(e){const n=JN({props:e,name:"MuiPickersPopper"}),{anchorEl:r,children:i,containerRef:o=null,shouldRestoreFocus:a,onBlur:s,onDismiss:l,open:c,role:u,placement:d,slots:h,slotProps:p,reduceAnimations:m}=n;t.useEffect((()=>{function e(e){c&&"Escape"===e.key&&l()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[l,c]);const f=t.useRef(null);t.useEffect((()=>{"tooltip"===u||a&&!a()||(c?f.current=HU(document):f.current&&f.current instanceof HTMLElement&&setTimeout((()=>{f.current instanceof HTMLElement&&f.current.focus()})))}),[c,u,a]);const[g,v,y]=function(e,n){const r=t.useRef(!1),i=t.useRef(!1),o=t.useRef(null),a=t.useRef(!1);t.useEffect((()=>{if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),a.current=!1};function t(){a.current=!0}}),[e]);const s=(0,QC.A)((e=>{if(!a.current)return;const t=i.current;i.current=!1;const s=(0,MC.A)(o.current);if(!o.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,s))return;if(r.current)return void(r.current=!1);let l;l=e.composedPath?e.composedPath().indexOf(o.current)>-1:!s.documentElement.contains(e.target)||o.current.contains(e.target),l||t||n(e)})),l=()=>{i.current=!0};return t.useEffect((()=>{if(e){const e=(0,MC.A)(o.current),t=()=>{r.current=!0};return e.addEventListener("touchstart",s),e.addEventListener("touchmove",t),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",t)}}}),[e,s]),t.useEffect((()=>{if(e){const e=(0,MC.A)(o.current);return e.addEventListener("click",s),()=>{e.removeEventListener("click",s),i.current=!1}}}),[e,s]),[o,l,l]}(c,s??l),b=t.useRef(null),w=(0,p_.A)(b,o),x=(0,p_.A)(w,g),E=n,A=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],paper:["paper"]},zU,t)})(E),S=QU(),T=m??S,_=h?.desktopTransition??T?HC:PC,k=h?.desktopTrapFocus??FC,C=h?.desktopPaper??eB,I=h?.popper??ZU,R=kk({elementType:I,externalSlotProps:p?.popper,additionalProps:{transition:!0,role:u,open:c,anchorEl:r,placement:d,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),l())}},className:A.root,ownerState:n});return(0,Ve.jsx)(I,(0,De.A)({},R,{children:e=>{let{TransitionProps:t,placement:n}=e;return(0,Ve.jsx)(k,(0,De.A)({open:c,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===u,isEnabled:()=>!0},p?.desktopTrapFocus,{children:(0,Ve.jsx)(_,(0,De.A)({},t,p?.desktopTransition,{children:(0,Ve.jsx)(tB,{PaperComponent:C,ownerState:E,popperPlacement:n,ref:x,onPaperClick:v,onPaperTouchStart:y,paperClasses:A.paper,paperSlotProps:p?.desktopPaper,children:i})}))}))}}))}function rB(e){const{props:n,validator:r,value:i,timezone:o,onError:a}=e,s=Gj(),l=t.useRef(r.valueManager.defaultErrorState),c=r({adapter:s,value:i,timezone:o,props:n}),u=r.valueManager.hasError(c);t.useEffect((()=>{a&&!r.valueManager.isSameError(c,l.current)&&a(c,i),l.current=c}),[r,a,c,i]);const d=(0,QC.A)((e=>r({adapter:s,value:e,timezone:o,props:n})));return{validationError:c,hasValidationError:u,getValidationErrorForNewValue:d}}var iB=n(3931);const oB=e=>{let{timezone:n,value:r,defaultValue:i,referenceDate:o,onChange:a,valueManager:s}=e;const l=Kj(),c=t.useRef(i),u=r??c.current??s.emptyValue,d=t.useMemo((()=>s.getTimezone(l,u)),[l,s,u]),h=(0,QC.A)((e=>null==d?e:s.setTimezone(l,d,e)));let p;p=n||(d||(o?l.getTimezone(o):"default"));const m=t.useMemo((()=>s.setTimezone(l,p,u)),[s,l,p,u]),f=(0,QC.A)((function(e){const t=h(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];a?.(t,...r)}));return{value:m,handleValueChange:f,timezone:p}},aB=e=>{let{name:t,timezone:n,value:r,defaultValue:i,referenceDate:o,onChange:a,valueManager:s}=e;const[l,c]=(0,iB.A)({name:t,state:"value",controlled:r,default:i??s.emptyValue}),u=(0,QC.A)((function(e){c(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a?.(e,...n)}));return oB({timezone:n,value:l,defaultValue:void 0,referenceDate:o,onChange:u,valueManager:s})},sB=e=>{let{props:n,valueManager:r,valueType:i,wrapperVariant:o,validator:a}=e;const{onAccept:s,onChange:l,value:c,defaultValue:u,closeOnSelect:d="desktop"===o,timezone:h,referenceDate:p}=n,{current:m}=t.useRef(u),{current:f}=t.useRef(void 0!==c),[g,v]=t.useState(h);const y=Kj(),b=Gj(),{isOpen:w,setIsOpen:x}=(e=>{let{open:n,onOpen:r,onClose:i}=e;const o=t.useRef("boolean"===typeof n).current,[a,s]=t.useState(!1);return t.useEffect((()=>{if(o){if("boolean"!==typeof n)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(n)}}),[o,n]),{isOpen:a,setIsOpen:t.useCallback((e=>{o||s(e),e&&r&&r(),!e&&i&&i()}),[o,r,i])}})(n),{timezone:E,value:A,handleValueChange:S}=oB({timezone:h,value:c,defaultValue:m,referenceDate:p,onChange:l,valueManager:r}),[T,_]=t.useState((()=>{let e;return e=void 0!==A?A:void 0!==m?m:r.emptyValue,{draft:e,lastPublishedValue:e,lastCommittedValue:e,lastControlledValue:c,hasBeenModifiedSinceMount:!1}})),k=r.getTimezone(y,T.draft);g!==h&&(v(h),h&&k&&h!==k&&_((e=>(0,De.A)({},e,{draft:r.setTimezone(y,h,e.draft)}))));const{getValidationErrorForNewValue:C}=rB({props:n,validator:a,timezone:E,value:T.draft,onError:n.onError}),I=(0,QC.A)((e=>{const t={action:e,dateState:T,hasChanged:t=>!r.areValuesEqual(y,e.value,t),isControlled:f,closeOnSelect:d},n=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i}=e,o=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromField"===t.name||("setValueFromAction"===t.name?!(!o||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastPublishedValue):("setValueFromView"===t.name&&"shallow"!==t.selectionState||"setValueFromShortcut"===t.name)&&(!!o||n(r.lastPublishedValue)))})(t),i=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i,closeOnSelect:o}=e,a=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromAction"===t.name?!(!a||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastCommittedValue):"setValueFromView"===t.name&&"finish"===t.selectionState&&o?!!a||n(r.lastCommittedValue):"setValueFromShortcut"===t.name&&"accept"===t.changeImportance&&n(r.lastCommittedValue)})(t),o=(e=>{const{action:t,closeOnSelect:n}=e;return"setValueFromAction"===t.name||("setValueFromView"===t.name?"finish"===t.selectionState&&n:"setValueFromShortcut"===t.name&&"accept"===t.changeImportance)})(t);_((t=>(0,De.A)({},t,{draft:e.value,lastPublishedValue:n?e.value:t.lastPublishedValue,lastCommittedValue:i?e.value:t.lastCommittedValue,hasBeenModifiedSinceMount:!0})));let a=null;const l=()=>{if(!a){const t="setValueFromField"===e.name?e.context.validationError:C(e.value);a={validationError:t},"setValueFromShortcut"===e.name&&(a.shortcut=e.shortcut)}return a};n&&S(e.value,l()),i&&s&&s(e.value,l()),o&&x(!1)}));if(T.lastControlledValue!==c){const e=r.areValuesEqual(y,T.draft,A);_((t=>(0,De.A)({},t,{lastControlledValue:c},e?{}:{lastCommittedValue:A,lastPublishedValue:A,draft:A,hasBeenModifiedSinceMount:!0})))}const R=(0,QC.A)((()=>{I({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})})),D=(0,QC.A)((()=>{I({value:T.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})})),L=(0,QC.A)((()=>{I({value:T.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})})),P=(0,QC.A)((()=>{I({value:T.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})})),M=(0,QC.A)((()=>{I({value:r.getTodayValue(y,E,i),name:"setValueFromAction",pickerAction:"today"})})),O=(0,QC.A)((e=>{e.preventDefault(),x(!0)})),N=(0,QC.A)((e=>{e?.preventDefault(),x(!1)})),j=(0,QC.A)((function(e){return I({name:"setValueFromView",value:e,selectionState:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"partial"})})),F=(0,QC.A)(((e,t,n)=>I({name:"setValueFromShortcut",value:e,changeImportance:t,shortcut:n}))),U=(0,QC.A)(((e,t)=>I({name:"setValueFromField",value:e,context:t}))),B={onClear:R,onAccept:D,onDismiss:L,onCancel:P,onSetToday:M,onOpen:O,onClose:N},$={value:T.draft,onChange:U},V=t.useMemo((()=>r.cleanValue(y,T.draft)),[y,r,T.draft]),W={value:V,onChange:j,onClose:N,open:w},z=(0,De.A)({},B,{value:V,onChange:j,onSelectShortcut:F,isValid:e=>{const t=a({adapter:b,value:e,timezone:E,props:n});return!r.hasError(t)}}),H=t.useMemo((()=>({onOpen:O,onClose:N,open:w})),[w,N,O]);return{open:w,fieldProps:$,viewProps:W,layoutProps:z,actions:B,contextValue:H}};function lB(e){let{onChange:n,onViewChange:r,openTo:i,view:o,views:a,autoFocus:s,focusedView:l,onFocusedViewChange:c}=e;const u=t.useRef(i),d=t.useRef(a),h=t.useRef(a.includes(i)?i:a[0]),[p,m]=(0,iB.A)({name:"useViews",state:"view",controlled:o,default:h.current}),f=t.useRef(s?p:null),[g,v]=(0,iB.A)({name:"useViews",state:"focusedView",controlled:l,default:f.current});t.useEffect((()=>{(u.current&&u.current!==i||d.current&&d.current.some((e=>!a.includes(e))))&&(m(a.includes(i)?i:a[0]),d.current=a,u.current=i)}),[i,m,p,a]);const y=a.indexOf(p),b=a[y-1]??null,w=a[y+1]??null,x=(0,QC.A)(((e,t)=>{v(t?e:t=>e===t?null:t),c?.(e,t)})),E=(0,QC.A)((e=>{x(e,!0),e!==p&&(m(e),r&&r(e))})),A=(0,QC.A)((()=>{w&&E(w)})),S=(0,QC.A)(((e,t,r)=>{const i="finish"===t,o=r?a.indexOf(r)<a.length-1:Boolean(w);if(n(e,i&&o?"partial":t,r),r&&r!==p){const e=a[a.indexOf(r)+1];e&&E(e)}else i&&A()}));return{view:p,setView:E,focusedView:g,setFocusedView:x,nextView:w,previousView:b,defaultView:a.includes(i)?i:a[0],goToNextView:A,setValueAndGoToNextView:S}}const cB=["className","sx"],uB=e=>{let{props:n,propsFromPickerValue:r,additionalViewProps:i,autoFocusView:o,rendererInterceptor:a,fieldRef:s}=e;const{onChange:l,open:c,onClose:u}=r,{view:d,views:h,openTo:p,onViewChange:m,viewRenderers:f,timezone:g}=n,v=(0,Le.A)(n,cB),{view:y,setView:b,defaultView:w,focusedView:x,setFocusedView:E,setValueAndGoToNextView:A}=lB({view:d,views:h,openTo:p,onChange:l,onViewChange:m,autoFocus:o}),{hasUIView:S,viewModeLookup:T}=t.useMemo((()=>h.reduce(((e,t)=>{let n;return n=null!=f[t]?"UI":"field",e.viewModeLookup[t]=n,"UI"===n&&(e.hasUIView=!0),e}),{hasUIView:!1,viewModeLookup:{}})),[f,h]),_=t.useMemo((()=>h.reduce(((e,t)=>null!=f[t]&&(e=>hj.includes(e))(t)?e+1:e),0)),[f,h]),k=T[y],C=(0,QC.A)((()=>"UI"===k)),[I,R]=t.useState("UI"===k?y:null);I!==y&&"UI"===T[y]&&R(y),(0,UC.A)((()=>{"field"===k&&c&&(u(),setTimeout((()=>{s?.current?.setSelectedSections(y),s?.current?.focusField(y)})))}),[y]),(0,UC.A)((()=>{if(!c)return;let e=y;"field"===k&&null!=I&&(e=I),e!==w&&"UI"===T[e]&&"UI"===T[w]&&(e=w),e!==y&&b(e),E(e,!0)}),[c]);return{hasUIView:S,shouldRestoreFocus:C,layoutProps:{views:h,view:I,onViewChange:b},renderCurrentView:()=>{if(null==I)return null;const e=f[I];if(null==e)return null;const t=(0,De.A)({},v,i,r,{views:h,timezone:g,onChange:A,view:I,onViewChange:b,focusedView:x,onFocusedViewChange:E,showViewSwitcher:_>1,timeViewsCount:_});return a?a(f,I,t):e(t)}}},dB=t.createContext();const hB=()=>t.useContext(dB)??!1;function pB(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}const mB=(e,n)=>{const[r,i]=t.useState(pB);if((0,UC.A)((()=>{const e=()=>{i(pB())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}}),[]),o=e,a=["hours","minutes","seconds"],Array.isArray(a)?a.every((e=>-1!==o.indexOf(e))):-1!==o.indexOf(a))return!1;var o,a;return"landscape"===(n||r)};const fB=e=>{let{props:n,valueManager:r,valueType:i,wrapperVariant:o,additionalViewProps:a,validator:s,autoFocusView:l,rendererInterceptor:c,fieldRef:u}=e;const d=sB({props:n,valueManager:r,valueType:i,wrapperVariant:o,validator:s}),h=uB({props:n,additionalViewProps:a,autoFocusView:l,fieldRef:u,propsFromPickerValue:d.viewProps,rendererInterceptor:c}),p=(e=>{let{props:t,propsFromPickerValue:n,propsFromPickerViews:r,wrapperVariant:i}=e;const{orientation:o}=t,a=mB(r.views,o),s=hB();return{layoutProps:(0,De.A)({},r,n,{isLandscape:a,isRtl:s,wrapperVariant:i,disabled:t.disabled,readOnly:t.readOnly})}})({props:n,wrapperVariant:o,propsFromPickerValue:d.layoutProps,propsFromPickerViews:h.layoutProps}),m=function(e){const{props:n,pickerValueResponse:r}=e;return t.useMemo((()=>({value:r.viewProps.value,open:r.open,disabled:n.disabled??!1,readOnly:n.readOnly??!1})),[r.viewProps.value,r.open,n.disabled,n.readOnly])}({props:n,pickerValueResponse:d});return{open:d.open,actions:d.actions,fieldProps:d.fieldProps,renderCurrentView:h.renderCurrentView,hasUIView:h.hasUIView,shouldRestoreFocus:h.shouldRestoreFocus,layoutProps:p.layoutProps,contextValue:d.contextValue,ownerState:m}};function gB(e){return(0,GT.Ay)("MuiPickersLayout",e)}const vB=(0,Ge.A)("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),yB=["onAccept","onClear","onCancel","onSetToday","actions"];function bB(e){const{onAccept:t,onClear:n,onCancel:r,onSetToday:i,actions:o}=e,a=(0,Le.A)(e,yB),s=nF();if(null==o||0===o.length)return null;const l=o?.map((e=>{switch(e){case"clear":return(0,Ve.jsx)(Kk,{onClick:n,children:s.clearButtonLabel},e);case"cancel":return(0,Ve.jsx)(Kk,{onClick:r,children:s.cancelButtonLabel},e);case"accept":return(0,Ve.jsx)(Kk,{onClick:t,children:s.okButtonLabel},e);case"today":return(0,Ve.jsx)(Kk,{onClick:i,children:s.todayButtonLabel},e);default:return null}}));return(0,Ve.jsx)(pO,(0,De.A)({},a,{children:l}))}const wB=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function xB(e){return(0,GT.Ay)("MuiChip",e)}const EB=(0,Ge.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),AB=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],SB=(0,WT.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:l}=n;return[{[`& .${EB.avatar}`]:t.avatar},{[`& .${EB.avatar}`]:t[`avatar${(0,zT.A)(s)}`]},{[`& .${EB.avatar}`]:t[`avatarColor${(0,zT.A)(r)}`]},{[`& .${EB.icon}`]:t.icon},{[`& .${EB.icon}`]:t[`icon${(0,zT.A)(s)}`]},{[`& .${EB.icon}`]:t[`iconColor${(0,zT.A)(i)}`]},{[`& .${EB.deleteIcon}`]:t.deleteIcon},{[`& .${EB.deleteIcon}`]:t[`deleteIcon${(0,zT.A)(s)}`]},{[`& .${EB.deleteIcon}`]:t[`deleteIconColor${(0,zT.A)(r)}`]},{[`& .${EB.deleteIcon}`]:t[`deleteIcon${(0,zT.A)(l)}Color${(0,zT.A)(r)}`]},t.root,t[`size${(0,zT.A)(s)}`],t[`color${(0,zT.A)(r)}`],o&&t.clickable,o&&"default"!==r&&t[`clickableColor${(0,zT.A)(r)})`],a&&t.deletable,a&&"default"!==r&&t[`deletableColor${(0,zT.A)(r)}`],t[l],t[`${l}${(0,zT.A)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,De.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${EB.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${EB.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},[`& .${EB.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${EB.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${EB.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${EB.icon}`]:(0,De.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,De.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),[`& .${EB.deleteIcon}`]:(0,De.A)({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:(0,HT.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:(0,HT.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?`rgba(${t.vars.palette[n.color].contrastTextChannel} / 0.7)`:(0,HT.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{[`&.${EB.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${EB.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,HT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${EB.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${EB.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${EB.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${EB.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${EB.avatar}`]:{marginLeft:4},[`& .${EB.avatarSmall}`]:{marginLeft:2},[`& .${EB.icon}`]:{marginLeft:4},[`& .${EB.iconSmall}`]:{marginLeft:2},[`& .${EB.deleteIcon}`]:{marginRight:5},[`& .${EB.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,HT.X4)(t.palette[n.color].main,.7)}`,[`&.${EB.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${EB.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:(0,HT.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${EB.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,HT.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),TB=(0,WT.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,zT.A)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function _B(e){return"Backspace"===e.key||"Delete"===e.key}const kB=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:m,onKeyDown:f,onKeyUp:g,size:v="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:w=!1}=r,x=(0,Le.A)(r,AB),E=t.useRef(null),A=(0,j_.A)(E,n),S=e=>{e.stopPropagation(),m&&m(e)},T=!(!1===a||!p)||a,_=T||m?yk:l||"div",k=(0,De.A)({},r,{component:_,disabled:u,size:v,color:s,iconColor:t.isValidElement(d)&&d.props.color||s,onDelete:!!m,clickable:T,variant:y}),C=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled",`size${(0,zT.A)(r)}`,`color${(0,zT.A)(i)}`,s&&"clickable",s&&`clickableColor${(0,zT.A)(i)}`,a&&"deletable",a&&`deletableColor${(0,zT.A)(i)}`,`${l}${(0,zT.A)(i)}`],label:["label",`label${(0,zT.A)(r)}`],avatar:["avatar",`avatar${(0,zT.A)(r)}`,`avatarColor${(0,zT.A)(i)}`],icon:["icon",`icon${(0,zT.A)(r)}`,`iconColor${(0,zT.A)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,zT.A)(r)}`,`deleteIconColor${(0,zT.A)(i)}`,`deleteIcon${(0,zT.A)(l)}Color${(0,zT.A)(i)}`]};return(0,VT.A)(c,xB,t)})(k),I=_===yk?(0,De.A)({component:l||"div",focusVisibleClassName:C.focusVisible},m&&{disableRipple:!0}):{};let R=null;m&&(R=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,Pe.A)(c.props.className,C.deleteIcon),onClick:S}):(0,Ve.jsx)(wB,{className:(0,Pe.A)(C.deleteIcon),onClick:S}));let D=null;i&&t.isValidElement(i)&&(D=t.cloneElement(i,{className:(0,Pe.A)(C.avatar,i.props.className)}));let L=null;return d&&t.isValidElement(d)&&(L=t.cloneElement(d,{className:(0,Pe.A)(C.icon,d.props.className)})),(0,Ve.jsxs)(SB,(0,De.A)({as:_,className:(0,Pe.A)(C.root,o),disabled:!(!T||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&_B(e)&&e.preventDefault(),f&&f(e)},onKeyUp:e=>{e.currentTarget===e.target&&(m&&_B(e)?m(e):"Escape"===e.key&&E.current&&E.current.blur()),g&&g(e)},ref:A,tabIndex:w&&u?-1:b,ownerState:k},I,x,{children:[D||L,(0,Ve.jsx)(TB,{className:(0,Pe.A)(C.label),ownerState:k,children:h}),R]}))})),CB=kB,IB=320,RB=["items","changeImportance","isLandscape","onChange","isValid"],DB=["getValue"];function LB(e){const{items:t,changeImportance:n="accept",onChange:r,isValid:i}=e,o=(0,Le.A)(e,RB);if(null==t||0===t.length)return null;const a=t.map((e=>{let{getValue:t}=e,o=(0,Le.A)(e,DB);const a=t({isValid:i});return(0,De.A)({},o,{label:o.label,onClick:()=>{r(a,n,o)},disabled:!i(a)})}));return(0,Ve.jsx)(tC,(0,De.A)({dense:!0,sx:[{maxHeight:336,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:a.map((e=>(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(CB,(0,De.A)({},e))},e.id??e.label)))}))}const PB=e=>{const{wrapperVariant:t,onAccept:n,onClear:r,onCancel:i,onSetToday:o,view:a,views:s,onViewChange:l,value:c,onChange:u,onSelectShortcut:d,isValid:h,isLandscape:p,disabled:m,readOnly:f,children:g,slots:v,slotProps:y}=e,b=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]};return(0,VT.A)(r,gB,t)})(e),w=v?.actionBar??bB,x=kk({elementType:w,externalSlotProps:y?.actionBar,additionalProps:{onAccept:n,onClear:r,onCancel:i,onSetToday:o,actions:"desktop"===t?[]:["cancel","accept"]},className:b.actionBar,ownerState:(0,De.A)({},e,{wrapperVariant:t})}),E=(0,Ve.jsx)(w,(0,De.A)({},x)),A=v?.toolbar,S=kk({elementType:A,externalSlotProps:y?.toolbar,additionalProps:{isLandscape:p,onChange:u,value:c,view:a,onViewChange:l,views:s,disabled:m,readOnly:f},className:b.toolbar,ownerState:(0,De.A)({},e,{wrapperVariant:t})}),T=function(e){return null!==e.view}(S)&&A?(0,Ve.jsx)(A,(0,De.A)({},S)):null,_=g,k=v?.tabs,C=a&&k?(0,Ve.jsx)(k,(0,De.A)({view:a,onViewChange:l,className:b.tabs},y?.tabs)):null,I=v?.shortcuts??LB,R=kk({elementType:I,externalSlotProps:y?.shortcuts,additionalProps:{isValid:h,isLandscape:p,onChange:d},className:b.shortcuts,ownerState:{isValid:h,isLandscape:p,onChange:d,wrapperVariant:t}});return{toolbar:T,content:_,tabs:C,actionBar:E,shortcuts:a&&I?(0,Ve.jsx)(I,(0,De.A)({},R)):null}},MB=(0,WT.Ay)("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${vB.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{isLandscape:!0},style:{[`& .${vB.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${vB.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{isLandscape:!0,isRtl:!0},style:{[`& .${vB.toolbar}`]:{gridColumn:3}}},{props:{isLandscape:!1},style:{[`& .${vB.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${vB.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{isLandscape:!1,isRtl:!0},style:{[`& .${vB.shortcuts}`]:{gridColumn:3}}}]}),OB=(0,WT.Ay)("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),NB=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:o,tabs:a,actionBar:s,shortcuts:l}=PB(r),{sx:c,className:u,isLandscape:d,wrapperVariant:h}=r,p=(e=>{const{isLandscape:t,classes:n}=e,r={root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]};return(0,VT.A)(r,gB,n)})(r);return(0,Ve.jsxs)(MB,{ref:n,sx:c,className:(0,Pe.A)(p.root,u),ownerState:r,children:[d?l:i,d?i:l,(0,Ve.jsx)(OB,{className:p.contentWrapper,children:"desktop"===h?(0,Ve.jsxs)(t.Fragment,{children:[o,a]}):(0,Ve.jsxs)(t.Fragment,{children:[a,o]})}),s]})})),jB=t.createContext(null);function FB(e){const{contextValue:t,localeText:n,children:r}=e;return(0,Ve.jsx)(jB.Provider,{value:t,children:(0,Ve.jsx)(Vj,{localeText:n,children:r})})}const UB=["props","getOpenDialogAriaText"],BB=["ownerState"],$B=["ownerState"],VB=(0,u_.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),WB=(0,u_.A)((0,Ve.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),zB=(0,u_.A)((0,Ve.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),HB=(0,u_.A)((0,Ve.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),qB=((0,u_.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),(0,u_.A)((0,Ve.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,u_.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),(0,u_.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")),GB=(e,t,n,r)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),r).length,format:r});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return t.fieldDayPlaceholder({format:r});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return t.fieldHoursPlaceholder({format:r});case"minutes":return t.fieldMinutesPlaceholder({format:r});case"seconds":return t.fieldSecondsPlaceholder({format:r});case"meridiem":return t.fieldMeridiemPlaceholder({format:r});default:return r}},KB=e=>{let{utils:t,date:n,shouldRespectLeadingZeros:r,localeText:i,localizedDigits:o,now:a,token:s,startSeparator:l}=e;if(""===s)throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=vj(t,s),u=Rj(t,c.contentType,c.type,s),d=r?u:"digit"===c.contentType,h=null!=n&&t.isValid(n);let p=h?t.formatByString(n,s):"",m=null;if(d)if(u)m=""===p?t.formatByString(a,s).length:p.length;else{if(null==c.maxLength)throw new Error(`MUI X: The token ${s} should have a 'maxDigitNumber' property on it's adapter`);m=c.maxLength,h&&(p=Ej(Sj(xj(p,o),m),o))}return(0,De.A)({},c,{format:s,maxLength:m,value:p,placeholder:GB(t,i,c,s),hasLeadingZerosInFormat:u,hasLeadingZerosInInput:d,startSeparator:l,endSeparator:"",modified:!1})},YB=e=>{let t=(e=>{let{utils:t,format:n}=e,r=10,i=n,o=t.expandFormat(n);for(;o!==i;)if(i=o,o=t.expandFormat(i),r-=1,r<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the picker component.");return o})(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=(e=>{let{utils:t,expandedFormat:n}=e;const r=[],{start:i,end:o}=t.escapedCharacters,a=new RegExp(`(\\${i}[^\\${o}]*\\${o})+`,"g");let s=null;for(;s=a.exec(n);)r.push({start:s.index,end:a.lastIndex-1});return r})((0,De.A)({},e,{expandedFormat:t})),r=(e=>{const{utils:t,expandedFormat:n,escapedParts:r}=e,i=t.date(void 0),o=[];let a="";const s=Object.keys(t.formatTokenMap).sort(((e,t)=>t.length-e.length)),l=/^([a-zA-Z]+)/,c=new RegExp(`^(${s.join("|")})*$`),u=new RegExp(`^(${s.join("|")})`),d=e=>r.find((t=>t.start<=e&&t.end>=e));let h=0;for(;h<n.length;){const t=d(h),r=null!=t,s=l.exec(n.slice(h))?.[1];if(!r&&null!=s&&c.test(s)){let t=s;for(;t.length>0;){const n=u.exec(t)[1];t=t.slice(n.length),o.push(KB((0,De.A)({},e,{now:i,token:n,startSeparator:a}))),a=""}h+=s.length}else{const e=n[h];r&&t?.start===h||t?.end===h||(0===o.length?a+=e:o[o.length-1].endSeparator+=e),h+=1}}return 0===o.length&&a.length>0&&o.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:a,endSeparator:"",modified:!1}),o})((0,De.A)({},e,{expandedFormat:t,escapedParts:n}));return(e=>{let{isRtl:t,formatDensity:n,sections:r}=e;return r.map((e=>{const r=e=>{let r=e;return t&&null!==r&&r.includes(" ")&&(r=`\u2069${r}\u2066`),"spacious"===n&&["/",".","-"].includes(r)&&(r=` ${r} `),r};return e.startSeparator=r(e.startSeparator),e.endSeparator=r(e.endSeparator),e}))})((0,De.A)({},e,{sections:r}))},XB=e=>{const n=Kj(),r=nF(),i=Gj(),o=hB(),{valueManager:a,fieldValueManager:s,valueType:l,validator:c,internalProps:u,internalProps:{value:d,defaultValue:h,referenceDate:p,onChange:m,format:f,formatDensity:g="dense",selectedSections:v,onSelectedSectionsChange:y,shouldRespectLeadingZeros:b=!1,timezone:w,enableAccessibleFieldDOMStructure:x=!1}}=e,{timezone:E,value:A,handleValueChange:S}=oB({timezone:w,value:d,defaultValue:h,referenceDate:p,onChange:m,valueManager:a}),T=t.useMemo((()=>(e=>{const t=e.date(void 0);return"0"===e.formatByString(e.setSeconds(t,0),"s")?wj:Array.from({length:10}).map(((n,r)=>e.formatByString(e.setSeconds(t,r),"s")))})(n)),[n]),_=t.useMemo((()=>((e,t,n)=>{const r=e.date(void 0,n),i=e.endOfYear(r),o=e.endOfDay(r),{maxDaysInMonth:a,longestMonth:s}=aj(e,r).reduce(((t,n)=>{const r=e.getDaysInMonth(n);return r>t.maxDaysInMonth?{maxDaysInMonth:r,longestMonth:n}:t}),{maxDaysInMonth:0,longestMonth:null});return{year:t=>{let{format:n}=t;return{minimum:0,maximum:Ij(e,n)?9999:99}},month:()=>({minimum:1,maximum:e.getMonth(i)+1}),day:t=>{let{currentDate:n}=t;return{minimum:1,maximum:null!=n&&e.isValid(n)?e.getDaysInMonth(n):a,longestMonth:s}},weekDay:t=>{let{format:n,contentType:r}=t;if("digit"===r){const t=yj(e,n).map(Number);return{minimum:Math.min(...t),maximum:Math.max(...t)}}return{minimum:1,maximum:7}},hours:n=>{let{format:i}=n;const a=e.getHours(o);return xj(e.formatByString(e.endOfDay(r),i),t)!==a.toString()?{minimum:1,maximum:Number(xj(e.formatByString(e.startOfDay(r),i),t))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:e.getMinutes(o)}),seconds:()=>({minimum:0,maximum:e.getSeconds(o)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}})(n,T,E)),[n,T,E]),k=t.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s.getSectionsFromValue(n,e,t,(e=>YB({utils:n,localeText:r,localizedDigits:T,format:f,date:e,formatDensity:g,shouldRespectLeadingZeros:b,enableAccessibleFieldDOMStructure:x,isRtl:o})))}),[s,f,r,T,o,b,n,g,x]),[C,I]=t.useState((()=>{const e=k(A);Dj();const t={sections:e,value:A,referenceValue:a.emptyValue,tempValueStrAndroid:null},r=(e=>Math.max(...e.map((e=>mj[e.type]??1))))(e),i=a.getInitialReferenceValue({referenceDate:p,value:A,utils:n,props:u,granularity:r,timezone:E});return(0,De.A)({},t,{referenceValue:i})})),[R,D]=(0,iB.A)({controlled:v,default:null,name:"useField",state:"selectedSections"}),L=e=>{D(e),y?.(e)},P=t.useMemo((()=>Mj(R,C.sections)),[R,C.sections]),M="all"===P?0:P,O=e=>{let{value:t,referenceValue:r,sections:o}=e;if(I((e=>(0,De.A)({},e,{sections:o,value:t,referenceValue:r,tempValueStrAndroid:null}))),a.areValuesEqual(n,C.value,t))return;const s={validationError:c({adapter:i,value:t,timezone:E,props:u})};S(t,s)},N=(e,t)=>{const n=[...C.sections];return n[e]=(0,De.A)({},n[e],{value:t,modified:!0}),n};return t.useEffect((()=>{const e=k(C.value);Dj(),I((t=>(0,De.A)({},t,{sections:e})))}),[f,n.locale,o]),t.useEffect((()=>{let e;e=!a.areValuesEqual(n,C.value,A)||a.getTimezone(n,C.value)!==a.getTimezone(n,A),e&&I((e=>(0,De.A)({},e,{value:A,referenceValue:s.updateReferenceValue(n,A,e.referenceValue),sections:k(A)})))}),[A]),{state:C,activeSectionIndex:M,parsedSelectedSections:P,setSelectedSections:L,clearValue:()=>{O({value:a.emptyValue,referenceValue:C.referenceValue,sections:k(a.emptyValue)})},clearActiveSection:()=>{if(null==M)return;const e=C.sections[M],t=s.getActiveDateManager(n,C,e),r=t.getSections(C.sections).filter((e=>""!==e.value)).length===(""===e.value?0:1),i=N(M,""),o=r?null:n.getInvalidDate(),a=t.getNewValuesFromNewActiveDate(o);O((0,De.A)({},a,{sections:i}))},updateSectionValue:e=>{let{activeSection:t,newSectionValue:r,shouldGoToNextSection:i}=e;i&&M<C.sections.length-1&&L(M+1);const o=s.getActiveDateManager(n,C,t),a=N(M,r),l=o.getSections(a),c=((e,t,n)=>{const r=t.some((e=>"day"===e.type)),i=[],o=[];for(let l=0;l<t.length;l+=1){const e=t[l];r&&"weekDay"===e.type||(i.push(e.format),o.push(kj(e,"non-input",n)))}const a=i.join(" "),s=o.join(" ");return e.parse(s,a)})(n,l,T);let u,d;if(null!=c&&n.isValid(c)){const e=Pj(n,c,l,o.referenceDate,!0);u=o.getNewValuesFromNewActiveDate(e),d=!0}else u=o.getNewValuesFromNewActiveDate(c),d=(null!=c&&!n.isValid(c))!==(null!=o.date&&!n.isValid(o.date));return d?O((0,De.A)({},u,{sections:a})):I((e=>(0,De.A)({},e,u,{sections:a,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const t=s.parseValueStr(e,C.referenceValue,((e,t)=>{const i=n.parse(e,f);if(null==i||!n.isValid(i))return null;const a=YB({utils:n,localeText:r,localizedDigits:T,format:f,date:i,formatDensity:g,shouldRespectLeadingZeros:b,enableAccessibleFieldDOMStructure:x,isRtl:o});return Pj(n,i,a,t,!1)})),i=s.updateReferenceValue(n,t,C.referenceValue);O({value:t,referenceValue:i,sections:k(t,C.sections)})},setTempAndroidValueStr:e=>I((t=>(0,De.A)({},t,{tempValueStrAndroid:e}))),getSectionsFromValue:k,sectionsValueBoundaries:_,localizedDigits:T,timezone:E}},QB=e=>null!=e.saveQuery,JB=e=>{let{sections:n,updateSectionValue:r,sectionsValueBoundaries:i,localizedDigits:o,setTempAndroidValueStr:a,timezone:s}=e;const l=Kj(),[c,u]=t.useState(null),d=(0,QC.A)((()=>u(null)));t.useEffect((()=>{null!=c&&n[c.sectionIndex]?.type!==c.sectionType&&d()}),[n,c,d]),t.useEffect((()=>{if(null!=c){const e=setTimeout((()=>d()),5e3);return()=>{clearTimeout(e)}}return()=>{}}),[c,d]);const h=(e,t,r)=>{let{keyPressed:i,sectionIndex:o}=e;const a=i.toLowerCase(),s=n[o];if(null!=c&&(!r||r(c.value))&&c.sectionIndex===o){const e=`${c.value}${a}`,n=t(e,s);if(!QB(n))return u({sectionIndex:o,value:e,sectionType:s.type}),n}const l=t(a,s);return QB(l)&&!l.saveQuery?(d(),null):(u({sectionIndex:o,value:a,sectionType:s.type}),QB(l)?null:l)},p=(0,QC.A)((e=>{const t=n[e.sectionIndex],c=Aj(e.keyPressed,o)?(e=>{const t=(e,t)=>{const n=xj(e,o),r=Number(n),a=i[t.type]({currentDate:null,format:t.format,contentType:t.contentType});if(r>a.maximum)return{saveQuery:!1};if(r<a.minimum)return{saveQuery:!0};const s=10*r>a.maximum||n.length===a.maximum.toString().length;return{sectionValue:Tj(l,r,a,o,t),shouldGoToNextSection:s}};return h(e,((e,n)=>{if("digit"===n.contentType||"digit-with-letter"===n.contentType)return t(e,n);if("month"===n.type){const r=Rj(l,"digit","month","MM"),i=t(e,{type:n.type,format:"MM",hasLeadingZerosInFormat:r,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(QB(i))return i;const o=Cj(l,i.sectionValue,"MM",n.format);return(0,De.A)({},i,{sectionValue:o})}if("weekDay"===n.type){const r=t(e,n);if(QB(r))return r;const i=yj(l,n.format)[Number(r.sectionValue)-1];return(0,De.A)({},r,{sectionValue:i})}return{saveQuery:!1}}),(e=>Aj(e,o)))})((0,De.A)({},e,{keyPressed:Ej(e.keyPressed,o)})):(e=>{const t=(e,t,n)=>{const r=t.filter((e=>e.toLowerCase().startsWith(n)));return 0===r.length?{saveQuery:!1}:{sectionValue:r[0],shouldGoToNextSection:1===r.length}},n=(e,n,r,i)=>{const o=e=>bj(l,s,n.type,e);if("letter"===n.contentType)return t(n.format,o(n.format),e);if(r&&null!=i&&"letter"===vj(l,r).contentType){const n=o(r),a=t(0,n,e);return QB(a)?{saveQuery:!1}:(0,De.A)({},a,{sectionValue:i(a.sectionValue,n)})}return{saveQuery:!1}};return h(e,((e,t)=>{switch(t.type){case"month":{const r=e=>Cj(l,e,l.formats.month,t.format);return n(e,t,l.formats.month,r)}case"weekDay":{const r=(e,t)=>t.indexOf(e).toString();return n(e,t,l.formats.weekday,r)}case"meridiem":return n(e,t);default:return{saveQuery:!1}}}))})(e);null!=c?r({activeSection:t,newSectionValue:c.sectionValue,shouldGoToNextSection:c.shouldGoToNextSection}):a(null)}));return{applyCharacterEditing:p,resetCharacterQuery:d}},ZB=e=>{const{internalProps:{disabled:n,readOnly:r=!1},forwardedProps:{sectionListRef:i,onBlur:o,onClick:a,onFocus:s,onInput:l,onPaste:c,focused:u,autoFocus:d=!1},fieldValueManager:h,applyCharacterEditing:p,resetCharacterQuery:m,setSelectedSections:f,parsedSelectedSections:g,state:v,clearActiveSection:y,clearValue:b,updateSectionValue:w,updateValueFromValueStr:x,sectionOrder:E,areAllSectionsEmpty:A,sectionsValueBoundaries:S}=e,T=t.useRef(null),_=(0,p_.A)(i,T),k=nF(),C=Kj(),I=(0,jR.A)(),[R,D]=t.useState(!1),L=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!T.current)return;const e=document.getSelection();if(!e)return;if(null==g)return e.rangeCount>0&&T.current.getRoot().contains(e.getRangeAt(0).startContainer)&&e.removeAllRanges(),void(R&&T.current.getRoot().blur());if(!T.current.getRoot().contains(HU(document)))return;const t=new window.Range;let n;if("all"===g)n=T.current.getRoot();else{n="empty"===v.sections[g].type?T.current.getSectionContainer(g):T.current.getSectionContent(g)}t.selectNodeContents(n),n.focus(),e.removeAllRanges(),e.addRange(t)},getActiveSectionIndexFromDOM:()=>{const e=HU(document);return e&&T.current&&T.current.getRoot().contains(e)?T.current.getSectionIndexFromDOMElement(e):null},focusField:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!T.current||null!=L.getActiveSectionIndexFromDOM())return;const t=Mj(e,v.sections);D(!0),T.current.getSectionContent(t).focus()},setSelectedSections:e=>{if(!T.current)return;const t=Mj(e,v.sections);D(null!==("all"===t?0:t)),f(e)},isFieldFocused:()=>{const e=HU(document);return!!T.current&&T.current.getRoot().contains(e)}})),[g,f,v.sections,R]),P=(0,QC.A)((e=>{if(!T.current)return;const t=v.sections[e];T.current.getSectionContent(e).innerHTML=t.value||t.placeholder,L.syncSelectionToDOM()})),M=(0,QC.A)((function(e){if(!e.isDefaultPrevented()&&T.current){D(!0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(a?.(e,...n),"all"===g)setTimeout((()=>{const e=document.getSelection().getRangeAt(0).startOffset;if(0===e)return void f(E.startIndex);let t=0,n=0;for(;n<e&&t<v.sections.length;){const e=v.sections[t];t+=1,n+=`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`.length}f(t-1)}));else if(R){T.current.getRoot().contains(e.target)||f(E.startIndex)}else D(!0),f(E.startIndex)}})),O=(0,QC.A)((e=>{if(l?.(e),!T.current||"all"!==g)return;const t=e.target.textContent??"";T.current.getRoot().innerHTML=v.sections.map((e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`)).join(""),L.syncSelectionToDOM(),0===t.length||10===t.charCodeAt(0)?(m(),b(),f("all")):t.length>1?x(t):("all"===g&&f(0),p({keyPressed:t,sectionIndex:0}))})),N=(0,QC.A)((e=>{if(c?.(e),r||"all"!==g)return void e.preventDefault();const t=e.clipboardData.getData("text");e.preventDefault(),m(),x(t)})),j=(0,QC.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s?.(...t),R||!T.current)return;D(!0);null!=T.current.getSectionIndexFromDOMElement(HU(document))||f(E.startIndex)})),F=(0,QC.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o?.(...t),setTimeout((()=>{if(!T.current)return;const e=HU(document);!T.current.getRoot().contains(e)&&(D(!1),f(null))}))})),U=(0,QC.A)((e=>t=>{t.isDefaultPrevented()||f(e)})),B=(0,QC.A)((e=>{e.preventDefault()})),$=(0,QC.A)((e=>()=>{f(e)})),V=(0,QC.A)((e=>{if(e.preventDefault(),r||n||"number"!==typeof g)return;const t=v.sections[g],i=e.clipboardData.getData("text"),o=/^[a-zA-Z]+$/.test(i),a=/^[0-9]+$/.test(i),s=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(i);"letter"===t.contentType&&o||"digit"===t.contentType&&a||"digit-with-letter"===t.contentType&&s?(m(),w({activeSection:t,newSectionValue:i,shouldGoToNextSection:!0})):o||a||(m(),x(i))})),W=(0,QC.A)((e=>{e.preventDefault(),e.dataTransfer.dropEffect="none"})),z=(0,QC.A)((e=>{if(!T.current)return;const t=e.target,n=t.textContent??"",i=T.current.getSectionIndexFromDOMElement(t),o=v.sections[i];if(!r&&T.current){if(0===n.length){if(""===o.value)return void P(i);const t=e.nativeEvent.inputType;return"insertParagraph"===t||"insertLineBreak"===t?void P(i):(m(),void y())}p({keyPressed:n,sectionIndex:i}),P(i)}else P(i)}));(0,UC.A)((()=>{if(R&&T.current)if("all"===g)T.current.getRoot().focus();else if("number"===typeof g){const e=T.current.getSectionContent(g);e&&e.focus()}}),[g,R]);const H=t.useMemo((()=>v.sections.reduce(((e,t)=>(e[t.type]=S[t.type]({currentDate:null,contentType:t.contentType,format:t.format}),e)),{})),[S,v.sections]),q="all"===g,G=t.useMemo((()=>v.sections.map(((e,i)=>{const o=!q&&!n&&!r;return{container:{"data-sectionindex":i,onClick:U(i)},content:{tabIndex:q||i>0?-1:0,contentEditable:!q&&!n&&!r,role:"spinbutton",id:`${I}-${e.type}`,"aria-labelledby":`${I}-${e.type}`,"aria-readonly":r,"aria-valuenow":Nj(e,C),"aria-valuemin":H[e.type].minimum,"aria-valuemax":H[e.type].maximum,"aria-valuetext":e.value?Oj(e,C):k.empty,"aria-label":k[e.type],"aria-disabled":n,spellCheck:!o&&void 0,autoCapitalize:o?"off":void 0,autoCorrect:o?"off":void 0,[parseInt(t.version,10)>=17?"enterKeyHint":"enterkeyhint"]:o?"next":void 0,children:e.value||e.placeholder,onInput:z,onPaste:V,onFocus:$(i),onDragOver:W,onMouseUp:B,inputMode:"letter"===e.contentType?"text":"numeric"},before:{children:e.startSeparator},after:{children:e.endSeparator}}}))),[v.sections,$,V,W,z,U,B,n,r,q,k,C,H,I]),K=(0,QC.A)((e=>{x(e.target.value)})),Y=t.useMemo((()=>A?"":h.getV7HiddenInputValueFromSections(v.sections)),[A,v.sections,h]);return t.useEffect((()=>{if(null==T.current)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please remove the `enableAccessibleFieldDOMStructure` prop from your picker or field component:","","<DatePicker slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join("\n"));d&&T.current&&T.current.getSectionContent(E.startIndex).focus()}),[]),{interactions:L,returnedValue:{autoFocus:d,readOnly:r,focused:u??R,sectionListRef:_,onBlur:F,onClick:M,onFocus:j,onInput:O,onPaste:N,enableAccessibleFieldDOMStructure:!0,elements:G,tabIndex:0===g?-1:0,contentEditable:q,value:Y,onChange:K,areAllSectionsEmpty:A}}},e$=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),t$=e=>{const n=hB(),r=t.useRef(void 0),i=t.useRef(void 0),{forwardedProps:{onFocus:o,onClick:a,onPaste:s,onBlur:l,inputRef:c,placeholder:u},internalProps:{readOnly:d=!1,disabled:h=!1},parsedSelectedSections:p,activeSectionIndex:m,state:f,fieldValueManager:g,valueManager:v,applyCharacterEditing:y,resetCharacterQuery:b,updateSectionValue:w,updateValueFromValueStr:x,clearActiveSection:E,clearValue:A,setTempAndroidValueStr:S,setSelectedSections:T,getSectionsFromValue:_,areAllSectionsEmpty:k,localizedDigits:C}=e,I=t.useRef(null),R=(0,p_.A)(c,I),D=t.useMemo((()=>((e,t,n)=>{let r=0,i=n?1:0;const o=[];for(let a=0;a<e.length;a+=1){const s=e[a],l=kj(s,n?"input-rtl":"input-ltr",t),c=`${s.startSeparator}${l}${s.endSeparator}`,u=e$(c).length,d=c.length,h=e$(l),p=i+(""===h?0:l.indexOf(h[0]))+s.startSeparator.length,m=p+h.length;o.push((0,De.A)({},s,{start:r,end:r+u,startInInput:p,endInInput:m})),r+=u,i+=d}return o})(f.sections,C,n)),[f.sections,C,n]),L=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!I.current)return;if(null==p)return void(I.current.scrollLeft&&(I.current.scrollLeft=0));if(I.current!==HU(document))return;const e=I.current.scrollTop;if("all"===p)I.current.select();else{const e=D[p],t="empty"===e.type?e.startInInput-e.startSeparator.length:e.startInInput,n="empty"===e.type?e.endInInput+e.endSeparator.length:e.endInInput;t===I.current.selectionStart&&n===I.current.selectionEnd||I.current===HU(document)&&I.current.setSelectionRange(t,n),clearTimeout(i.current),i.current=setTimeout((()=>{!I.current||I.current!==HU(document)||I.current.selectionStart!==I.current.selectionEnd||I.current.selectionStart===t&&I.current.selectionEnd===n||L.syncSelectionToDOM()}))}I.current.scrollTop=e},getActiveSectionIndexFromDOM:()=>{const e=I.current.selectionStart??0,t=I.current.selectionEnd??0;if(0===e&&0===t)return null;const n=e<=D[0].startInInput?1:D.findIndex((t=>t.startInInput-t.startSeparator.length>e));return-1===n?D.length-1:n-1},focusField:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;HU(document)!==I.current&&(I.current?.focus(),T(e))},setSelectedSections:e=>T(e),isFieldFocused:()=>I.current===HU(document)})),[I,p,D,T]),P=()=>{const e=I.current.selectionStart??0;let t;t=e<=D[0].startInInput||e>=D[D.length-1].endInInput?1:D.findIndex((t=>t.startInInput-t.startSeparator.length>e));const n=-1===t?D.length-1:t-1;T(n)},M=(0,QC.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o?.(...t);const i=I.current;clearTimeout(r.current),r.current=setTimeout((()=>{i&&i===I.current&&null==m&&(i.value.length&&Number(i.selectionEnd)-Number(i.selectionStart)===i.value.length?T("all"):P())}))})),O=(0,QC.A)((function(e){if(!e.isDefaultPrevented()){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a?.(e,...n),P()}})),N=(0,QC.A)((e=>{if(s?.(e),e.preventDefault(),d||h)return;const t=e.clipboardData.getData("text");if("number"===typeof p){const e=f.sections[p],n=/^[a-zA-Z]+$/.test(t),r=/^[0-9]+$/.test(t),i=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(t);if("letter"===e.contentType&&n||"digit"===e.contentType&&r||"digit-with-letter"===e.contentType&&i)return b(),void w({activeSection:e,newSectionValue:t,shouldGoToNextSection:!0});if(n||r)return}b(),x(t)})),j=(0,QC.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l?.(...t),T(null)})),F=(0,QC.A)((e=>{if(d)return;const t=e.target.value;if(""===t)return b(),void A();const r=e.nativeEvent.data,i=r&&r.length>1,o=i?r:t,a=e$(o);if("all"===p&&T(m),null==m||i)return void x(i?r:a);let s;if("all"===p&&1===a.length)s=a;else{const e=e$(g.getV6InputValueFromSections(D,C,n));let t=-1,r=-1;for(let n=0;n<e.length;n+=1)-1===t&&e[n]!==a[n]&&(t=n),-1===r&&e[e.length-n-1]!==a[a.length-n-1]&&(r=n);const i=D[m];if(t<i.start||e.length-r-1>i.end)return;const o=a.length-e.length+i.end-e$(i.endSeparator||"").length;s=a.slice(i.start+e$(i.startSeparator||"").length,o)}if(0===s.length)return navigator.userAgent.toLowerCase().includes("android")&&S(o),b(),void E();y({keyPressed:s,sectionIndex:m})})),U=t.useMemo((()=>void 0!==u?u:g.getV6InputValueFromSections(_(v.emptyValue),C,n)),[u,g,_,v.emptyValue,C,n]),B=t.useMemo((()=>f.tempValueStrAndroid??g.getV6InputValueFromSections(f.sections,C,n)),[f.sections,g,f.tempValueStrAndroid,C,n]);t.useEffect((()=>(I.current&&I.current===HU(document)&&T("all"),()=>{clearTimeout(r.current),clearTimeout(i.current)})),[]);const $=t.useMemo((()=>null==m||"letter"===f.sections[m].contentType?"text":"numeric"),[m,f.sections]),V=I.current&&I.current===HU(document);return{interactions:L,returnedValue:{readOnly:d,onBlur:j,onClick:O,onFocus:M,onPaste:N,inputRef:R,enableAccessibleFieldDOMStructure:!1,placeholder:U,inputMode:$,autoComplete:"off",value:!V&&k?"":B,onChange:F}}},n$=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator"],r$=e=>{const n=(e=>{const t=Kj(),n=Yj();return(0,De.A)({},e,{disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,format:e.format??t.formats.keyboardDate,minDate:oj(t,e.minDate,n.minDate),maxDate:oj(t,e.maxDate,n.maxDate)})})(e),{forwardedProps:r,internalProps:i}=((e,n)=>t.useMemo((()=>{const t=(0,De.A)({},e),r={},i=e=>{t.hasOwnProperty(e)&&(r[e]=t[e],delete t[e])};return n$.forEach(i),"date"===n?cF.forEach(i):"time"===n?uF.forEach(i):"date-time"===n&&(cF.forEach(i),uF.forEach(i),dF.forEach(i)),{forwardedProps:t,internalProps:r}}),[e,n]))(n,"date");return(e=>{const n=Kj(),{internalProps:r,internalProps:{unstableFieldRef:i,minutesStep:o,enableAccessibleFieldDOMStructure:a=!1,disabled:s=!1,readOnly:l=!1},forwardedProps:{onKeyDown:c,error:u,clearable:d,onClear:h},fieldValueManager:p,valueManager:m,validator:f}=e,g=hB(),v=XB(e),{state:y,activeSectionIndex:b,parsedSelectedSections:w,setSelectedSections:x,clearValue:E,clearActiveSection:A,updateSectionValue:S,setTempAndroidValueStr:T,sectionsValueBoundaries:_,localizedDigits:k,timezone:C}=v,I=JB({sections:y.sections,updateSectionValue:S,sectionsValueBoundaries:_,localizedDigits:k,setTempAndroidValueStr:T,timezone:C}),{resetCharacterQuery:R}=I,D=m.areValuesEqual(n,y.value,m.emptyValue),L=a?ZB:t$,P=t.useMemo((()=>((e,t)=>{const n={};if(!t)return e.forEach(((t,r)=>{const i=0===r?null:r-1,o=r===e.length-1?null:r+1;n[r]={leftIndex:i,rightIndex:o}})),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},i={};let o=0,a=0,s=e.length-1;for(;s>=0;){a=e.findIndex(((e,t)=>t>=o&&e.endSeparator?.includes(" ")&&" / "!==e.endSeparator)),-1===a&&(a=e.length-1);for(let e=a;e>=o;e-=1)i[e]=s,r[s]=e,s-=1;o=a+1}return e.forEach(((t,o)=>{const a=i[o],s=0===a?null:r[a-1],l=a===e.length-1?null:r[a+1];n[o]={leftIndex:s,rightIndex:l}})),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}})(y.sections,g&&!a)),[y.sections,g,a]),{returnedValue:M,interactions:O}=L((0,De.A)({},e,v,I,{areAllSectionsEmpty:D,sectionOrder:P})),N=(0,QC.A)((e=>{if(c?.(e),!s)switch(!0){case(e.ctrlKey||e.metaKey)&&"A"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey:e.preventDefault(),x("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==w)x(P.startIndex);else if("all"===w)x(P.endIndex);else{const e=P.neighbors[w].rightIndex;null!==e&&x(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==w)x(P.endIndex);else if("all"===w)x(P.startIndex);else{const e=P.neighbors[w].leftIndex;null!==e&&x(e)}break;case"Delete"===e.key:if(e.preventDefault(),l)break;null==w||"all"===w?E():A(),R();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),l||null==b)break;"all"===w&&x(b);const t=y.sections[b],r=p.getActiveDateManager(n,y,t),i=_j(n,C,t,e.key,_,k,r.date,{minutesStep:o});S({activeSection:t,newSectionValue:i,shouldGoToNextSection:!1});break}}}));(0,UC.A)((()=>{O.syncSelectionToDOM()}));const{hasValidationError:j}=rB({props:r,validator:f,timezone:C,value:y.value,onError:r.onError}),F=t.useMemo((()=>void 0!==u?u:j),[j,u]);t.useEffect((()=>{F||null!=b||R()}),[y.referenceValue,b,F]),t.useEffect((()=>{null!=y.tempValueStrAndroid&&null!=b&&(R(),A())}),[y.sections]),t.useImperativeHandle(i,(()=>({getSections:()=>y.sections,getActiveSectionIndex:O.getActiveSectionIndexFromDOM,setSelectedSections:O.setSelectedSections,focusField:O.focusField,isFieldFocused:O.isFieldFocused})));const U=(0,QC.A)((function(e){e.preventDefault();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];h?.(e,...n),E(),O.isFieldFocused()?x(P.startIndex):O.focusField(0)})),B={onKeyDown:N,onClear:U,error:F,clearable:Boolean(d&&!D&&!l&&!s)},$={disabled:s,readOnly:l};return(0,De.A)({},e.forwardedProps,B,$,M)})({forwardedProps:r,internalProps:i,valueManager:Fj,fieldValueManager:Uj,validator:mF,valueType:"date"})},i$=["clearable","onClear","InputProps","sx","slots","slotProps"],o$=["ownerState"];function a$(e){return(0,GT.Ay)("MuiPickersTextField",e)}(0,Ge.A)("MuiPickersTextField",["root","focused","disabled","error","required"]);function s$(e){return(0,GT.Ay)("MuiPickersInputBase",e)}const l$=(0,Ge.A)("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input"]);function c$(e){return(0,GT.Ay)("MuiPickersOutlinedInput",e)}const u$=(0,De.A)({},l$,(0,Ge.A)("MuiPickersOutlinedInput",["root","notchedOutline","input"])),d$=["children","className","label","notched","shrink"],h$=(0,WT.Ay)("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),p$=(0,WT.Ay)("span")((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,fontSize:"inherit"}})),m$=(0,WT.Ay)("legend")((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:{withLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{withLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{withLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}}));function f$(e){const{className:t,label:n}=e,r=(0,Le.A)(e,d$),i=null!=n&&""!==n,o=(0,De.A)({},e,{withLabel:i});return(0,Ve.jsx)(h$,(0,De.A)({"aria-hidden":!0,className:t},r,{ownerState:o,children:(0,Ve.jsx)(m$,{ownerState:o,children:i?(0,Ve.jsx)(p$,{children:n}):(0,Ve.jsx)(p$,{className:"notranslate",children:"\u200b"})})}))}const g$={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function v$(e){return(0,GT.Ay)("MuiPickersSectionList",e)}const y$=(0,Ge.A)("MuiPickersSectionList",["root","section","sectionContent"]),b$=["slots","slotProps","elements","sectionListRef"],w$=(0,WT.Ay)("div",{name:"MuiPickersSectionList",slot:"Root",overridesResolver:(e,t)=>t.root})({direction:"ltr /*! @noflip */",outline:"none"}),x$=(0,WT.Ay)("span",{name:"MuiPickersSectionList",slot:"Section",overridesResolver:(e,t)=>t.section})({}),E$=(0,WT.Ay)("span",{name:"MuiPickersSectionList",slot:"SectionSeparator",overridesResolver:(e,t)=>t.sectionSeparator})({whiteSpace:"pre"}),A$=(0,WT.Ay)("span",{name:"MuiPickersSectionList",slot:"SectionContent",overridesResolver:(e,t)=>t.sectionContent})({outline:"none"});function S$(e){const{slots:t,slotProps:n,element:r,classes:i}=e,o=t?.section??x$,a=kk({elementType:o,externalSlotProps:n?.section,externalForwardedProps:r.container,className:i.section,ownerState:{}}),s=t?.sectionContent??A$,l=kk({elementType:s,externalSlotProps:n?.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:{}}),c=t?.sectionSeparator??E$,u=kk({elementType:c,externalSlotProps:n?.sectionSeparator,externalForwardedProps:r.before,ownerState:{position:"before"}}),d=kk({elementType:c,externalSlotProps:n?.sectionSeparator,externalForwardedProps:r.after,ownerState:{position:"after"}});return(0,Ve.jsxs)(o,(0,De.A)({},a,{children:[(0,Ve.jsx)(c,(0,De.A)({},u)),(0,Ve.jsx)(s,(0,De.A)({},l)),(0,Ve.jsx)(c,(0,De.A)({},d))]}))}const T$=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:o,elements:a,sectionListRef:s}=r,l=(0,Le.A)(r,b$),c=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],section:["section"],sectionContent:["sectionContent"]},v$,t)})(r),u=t.useRef(null),d=(0,p_.A)(n,u),h=e=>{if(!u.current)throw new Error(`MUI X: Cannot call sectionListRef.${e} before the mount of the component.`);return u.current};t.useImperativeHandle(s,(()=>({getRoot:()=>h("getRoot"),getSectionContainer:e=>h("getSectionContainer").querySelector(`.${y$.section}[data-sectionindex="${e}"]`),getSectionContent:e=>h("getSectionContent").querySelector(`.${y$.section}[data-sectionindex="${e}"] .${y$.sectionContent}`),getSectionIndexFromDOMElement(e){const t=h("getSectionIndexFromDOMElement");if(null==e||!t.contains(e))return null;let n=null;return e.classList.contains(y$.section)?n=e:e.classList.contains(y$.sectionContent)&&(n=e.parentElement),null==n?null:Number(n.dataset.sectionindex)}})));const p=i?.root??w$,m=kk({elementType:p,externalSlotProps:o?.root,externalForwardedProps:l,additionalProps:{ref:d,suppressContentEditableWarning:!0},className:c.root,ownerState:{}});return(0,Ve.jsx)(p,(0,De.A)({},m,{children:m.contentEditable?a.map((e=>{let{content:t,before:n,after:r}=e;return`${n.children}${t.children}${r.children}`})).join(""):(0,Ve.jsx)(t.Fragment,{children:a.map(((e,t)=>(0,Ve.jsx)(S$,{slots:i,slotProps:o,element:e,classes:c},t)))})}))})),_$=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef"],k$=(0,WT.Ay)("div",{name:"MuiPickersInputBase",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:(n=.15/16,Math.round(1e5*n)/1e5)+"em",variants:[{props:{fullWidth:!0},style:{width:"100%"}}]});var n})),C$=(0,WT.Ay)(w$,{name:"MuiPickersInputBase",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})((e=>{let{theme:t}=e;return{padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{isRtl:!0},style:{textAlign:"right /*! @noflip */"}},{props:{size:"small"},style:{paddingTop:1}},{props:{adornedStart:!1,focused:!1,filled:!1},style:{color:"currentColor",opacity:0}},{props:e=>{let{adornedStart:t,focused:n,filled:r,label:i}=e;return!t&&!n&&!r&&null==i},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:"light"===t.palette.mode?.42:.5}}]}})),I$=(0,WT.Ay)(x$,{name:"MuiPickersInputBase",slot:"Section",overridesResolver:(e,t)=>t.section})((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"}})),R$=(0,WT.Ay)(A$,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"}})),D$=(0,WT.Ay)(E$,{name:"MuiPickersInputBase",slot:"Separator",overridesResolver:(e,t)=>t.separator})((()=>({whiteSpace:"pre",letterSpacing:"inherit"}))),L$=(0,WT.Ay)("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})((0,De.A)({},g$)),P$=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:o,value:a,onChange:s,id:l,endAdornment:c,startAdornment:u,renderSuffix:d,slots:h,slotProps:p,contentEditable:m,tabIndex:f,onInput:g,onPaste:v,onKeyDown:y,name:b,readOnly:w,inputProps:x,inputRef:E,sectionListRef:A}=r,S=(0,Le.A)(r,_$),T=t.useRef(null),_=(0,p_.A)(n,T),k=(0,p_.A)(x?.ref,E),C=hB(),I=oD();if(!I)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");t.useEffect((()=>{I&&I.setAdornedStart(Boolean(u))}),[I,u]),t.useEffect((()=>{I&&(o?I.onEmpty():I.onFilled())}),[I,o]);const R=(0,De.A)({},r,I,{isRtl:C}),D=(e=>{const{focused:t,disabled:n,error:r,classes:i,fullWidth:o,readOnly:a,color:s,size:l,endAdornment:c,startAdornment:u}=e,d={root:["root",t&&!n&&"focused",n&&"disabled",a&&"readOnly",r&&"error",o&&"fullWidth",`color${(0,hP.A)(s)}`,"small"===l&&"inputSizeSmall",Boolean(u)&&"adornedStart",Boolean(c)&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"]};return(0,VT.A)(d,s$,i)})(R),L=h?.root||k$,P=kk({elementType:L,externalSlotProps:p?.root,externalForwardedProps:S,additionalProps:{"aria-invalid":I.error,ref:_},className:D.root,ownerState:R}),M=h?.input||C$;return(0,Ve.jsxs)(L,(0,De.A)({},P,{children:[u,(0,Ve.jsx)(T$,{sectionListRef:A,elements:i,contentEditable:m,tabIndex:f,className:D.sectionsContainer,onFocus:e=>{I.disabled?e.stopPropagation():I.onFocus?.(e)},onBlur:I.onBlur,onInput:g,onPaste:v,onKeyDown:y,slots:{root:M,section:I$,sectionContent:R$,sectionSeparator:D$},slotProps:{root:{ownerState:R},sectionContent:{className:l$.sectionContent},sectionSeparator:e=>{let{position:t}=e;return{className:"before"===t?l$.sectionBefore:l$.sectionAfter}}}}),c,d?d((0,De.A)({},I)):null,(0,Ve.jsx)(L$,(0,De.A)({name:b,className:D.input,value:a,onChange:s,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:w,required:I.required,disabled:I.disabled},x,{ref:k}))]}))})),M$=["label","autoFocus","ownerState","notched"],O$=(0,WT.Ay)(k$,{name:"MuiPickersOutlinedInput",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${u$.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${u$.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${u$.focused} .${u$.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${u$.disabled}`]:{[`& .${u$.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${u$.error} .${u$.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e]?.main??!1)).map((e=>({props:{color:e},style:{[`&.${u$.focused}:not(.${u$.error}) .${u$.notchedOutline}`]:{borderColor:(t.vars||t).palette[e].main}}})))}})),N$=(0,WT.Ay)(C$,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({padding:"16.5px 0",variants:[{props:{size:"small"},style:{padding:"8.5px 0"}}]}),j$=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersOutlinedInput"}),{label:i,ownerState:o,notched:a}=r,s=(0,Le.A)(r,M$),l=oD(),c=(0,De.A)({},r,o,l,{color:l?.color||"primary"}),u=(e=>{const{classes:t}=e,n=(0,VT.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},c$,t);return(0,De.A)({},t,n)})(c);return(0,Ve.jsx)(P$,(0,De.A)({slots:{root:O$,input:N$},renderSuffix:e=>(0,Ve.jsx)(f$,{shrink:Boolean(a||e.adornedStart||e.focused||e.filled),notched:Boolean(a||e.adornedStart||e.focused||e.filled),className:u.notchedOutline,label:null!=i&&""!==i&&l?.required?(0,Ve.jsxs)(t.Fragment,{children:[i,"\u2009","*"]}):i,ownerState:c})},s,{label:i,classes:u,ref:n}))}));j$.muiName="Input";var F$=n(6879);function U$(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function B$(e){if(t.isValidElement(e)||(0,F$.Hy)(e)||!U$(e))return e;const n={};return Object.keys(e).forEach((t=>{n[t]=B$(e[t])})),n}function $$(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?{...e}:e;return U$(e)&&U$(n)&&Object.keys(n).forEach((o=>{t.isValidElement(n[o])||(0,F$.Hy)(n[o])?i[o]=n[o]:U$(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&U$(e[o])?i[o]=$$(e[o],n[o],r):r.clone?i[o]=U$(n[o])?B$(n[o]):n[o]:i[o]=n[o]})),i}function V$(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),a=Object.keys(o);function s(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=a.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[a[o]]?t[a[o]]:i)-r/100}${n})`}return{keys:a,values:o,up:s,down:l,between:c,only:function(e){return a.indexOf(e)+1<a.length?c(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):c(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const W$={borderRadius:4},z$={xs:0,sm:600,md:900,lg:1200,xl:1536},H$={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${z$[e]}px)`},q$={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:z$[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function G$(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||H$;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||H$;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:q$,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||z$).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function K$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function Y$(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function X$(e){if("string"!==typeof e)throw new Error(function(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Q$(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function J$(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:Q$(e,n)||i,t&&(r=t(r,i,e)),r}const Z$=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=Q$(e.theme,r)||{};return G$(e,o,(e=>{let r=J$(a,i,e);return e===r&&"string"===typeof e&&(r=J$(a,i,`${t}${"default"===e?"":X$(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const eV=function(e,t){return t?$$(e,t,{clone:!1}):e};const tV={m:"margin",p:"padding"},nV={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rV={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},iV=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!rV[e])return[e];e=rV[e]}const[t,n]=e.split(""),r=tV[t],i=nV[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),oV=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],aV=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],sV=[...oV,...aV];function lV(e,t,n,r){const i=Q$(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?i.startsWith("var(")&&0===e?0:i.startsWith("var(")&&1===e?i:`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?`calc(-1 * ${n})`:`-${n}`}:"function"===typeof i?i:()=>{}}function cV(e){return lV(e,"spacing",8)}function uV(e,t){return"string"===typeof t||null==t?t:e(t)}function dV(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=uV(t,n),e)),{})}(iV(n),r);return G$(e,e[n],i)}function hV(e,t){const n=cV(e.theme);return Object.keys(e).map((r=>dV(e,t,r,n))).reduce(eV,{})}function pV(e){return hV(e,oV)}function mV(e){return hV(e,aV)}function fV(e){return hV(e,sV)}pV.propTypes={},pV.filterProps=oV,mV.propTypes={},mV.filterProps=aV,fV.propTypes={},fV.filterProps=sV;const gV=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?eV(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function vV(e){return"number"!==typeof e?e:`${e}px solid`}function yV(e,t){return Z$({prop:e,themeKey:"borders",transform:t})}const bV=yV("border",vV),wV=yV("borderTop",vV),xV=yV("borderRight",vV),EV=yV("borderBottom",vV),AV=yV("borderLeft",vV),SV=yV("borderColor"),TV=yV("borderTopColor"),_V=yV("borderRightColor"),kV=yV("borderBottomColor"),CV=yV("borderLeftColor"),IV=yV("outline",vV),RV=yV("outlineColor"),DV=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=lV(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:uV(t,e)});return G$(e,e.borderRadius,n)}return null};DV.propTypes={},DV.filterProps=["borderRadius"];gV(bV,wV,xV,EV,AV,SV,TV,_V,kV,CV,DV,IV,RV);const LV=e=>{if(void 0!==e.gap&&null!==e.gap){const t=lV(e.theme,"spacing",8),n=e=>({gap:uV(t,e)});return G$(e,e.gap,n)}return null};LV.propTypes={},LV.filterProps=["gap"];const PV=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=lV(e.theme,"spacing",8),n=e=>({columnGap:uV(t,e)});return G$(e,e.columnGap,n)}return null};PV.propTypes={},PV.filterProps=["columnGap"];const MV=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=lV(e.theme,"spacing",8),n=e=>({rowGap:uV(t,e)});return G$(e,e.rowGap,n)}return null};MV.propTypes={},MV.filterProps=["rowGap"];gV(LV,PV,MV,Z$({prop:"gridColumn"}),Z$({prop:"gridRow"}),Z$({prop:"gridAutoFlow"}),Z$({prop:"gridAutoColumns"}),Z$({prop:"gridAutoRows"}),Z$({prop:"gridTemplateColumns"}),Z$({prop:"gridTemplateRows"}),Z$({prop:"gridTemplateAreas"}),Z$({prop:"gridArea"}));function OV(e,t){return"grey"===t?t:e}gV(Z$({prop:"color",themeKey:"palette",transform:OV}),Z$({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:OV}),Z$({prop:"backgroundColor",themeKey:"palette",transform:OV}));function NV(e){return e<=1&&0!==e?100*e+"%":e}const jV=Z$({prop:"width",transform:NV}),FV=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||z$[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:NV(t)}};return G$(e,e.maxWidth,t)}return null};FV.filterProps=["maxWidth"];const UV=Z$({prop:"minWidth",transform:NV}),BV=Z$({prop:"height",transform:NV}),$V=Z$({prop:"maxHeight",transform:NV}),VV=Z$({prop:"minHeight",transform:NV}),WV=(Z$({prop:"size",cssProperty:"width",transform:NV}),Z$({prop:"size",cssProperty:"height",transform:NV}),gV(jV,FV,UV,BV,$V,VV,Z$({prop:"boxSizing"})),{border:{themeKey:"borders",transform:vV},borderTop:{themeKey:"borders",transform:vV},borderRight:{themeKey:"borders",transform:vV},borderBottom:{themeKey:"borders",transform:vV},borderLeft:{themeKey:"borders",transform:vV},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vV},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:DV},color:{themeKey:"palette",transform:OV},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:OV},backgroundColor:{themeKey:"palette",transform:OV},p:{style:mV},pt:{style:mV},pr:{style:mV},pb:{style:mV},pl:{style:mV},px:{style:mV},py:{style:mV},padding:{style:mV},paddingTop:{style:mV},paddingRight:{style:mV},paddingBottom:{style:mV},paddingLeft:{style:mV},paddingX:{style:mV},paddingY:{style:mV},paddingInline:{style:mV},paddingInlineStart:{style:mV},paddingInlineEnd:{style:mV},paddingBlock:{style:mV},paddingBlockStart:{style:mV},paddingBlockEnd:{style:mV},m:{style:pV},mt:{style:pV},mr:{style:pV},mb:{style:pV},ml:{style:pV},mx:{style:pV},my:{style:pV},margin:{style:pV},marginTop:{style:pV},marginRight:{style:pV},marginBottom:{style:pV},marginLeft:{style:pV},marginX:{style:pV},marginY:{style:pV},marginInline:{style:pV},marginInlineStart:{style:pV},marginInlineEnd:{style:pV},marginBlock:{style:pV},marginBlockStart:{style:pV},marginBlockEnd:{style:pV},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:LV},rowGap:{style:MV},columnGap:{style:PV},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:NV},maxWidth:{style:FV},minWidth:{transform:NV},height:{transform:NV},maxHeight:{transform:NV},minHeight:{transform:NV},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const zV=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:c}=o;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const u=Q$(n,s)||{};if(c)return c(i);return G$(i,t,(t=>{let n=J$(u,l,t);return t===n&&"string"===typeof t&&(n=J$(u,l,`${e}${"default"===t?"":X$(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??WV;function a(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const a=K$(i.breakpoints),s=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=(s=r[n],c=i,"function"===typeof s?s(c):s);var s,c;if(null!==a&&void 0!==a)if("object"===typeof a)if(o[n])l=eV(l,e(n,a,i,o));else{const e=G$({theme:i},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?l=eV(l,e):l[n]=t({sx:a,theme:i})}else l=eV(l,e(n,a,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,Y$(s,l))}return Array.isArray(r)?r.map(a):a(r)}}();zV.filterProps=["sx"];const HV=zV;function qV(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const GV=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e,a=V$(t),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cV({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(r);let l=$$({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:s,shape:{...W$,...i}},o);l=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(l),l.applyStyles=qV;for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];return l=u.reduce(((e,t)=>$$(e,t)),l),l.unstable_sxConfig={...WV,...o?.unstable_sxConfig},l.unstable_sx=function(e){return HV({sx:e,theme:this})},l};GV();function KV(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function YV(e){return(0,GT.Ay)("MuiPickersFilledInput",e)}const XV=(0,De.A)({},l$,(0,Ge.A)("MuiPickersFilledInput",["root","underline","input"])),QV=["label","autoFocus","disableUnderline","ownerState"],JV=(0,WT.Ay)(k$,{name:"MuiPickersFilledInput",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>KV(e)&&"disableUnderline"!==e})((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${XV.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${XV.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e].main)).map((e=>({props:{color:e,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e]?.main}`}}}))),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${XV.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${XV.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${XV.disabled}, .${XV.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${XV.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:e=>{let{startAdornment:t}=e;return!!t},style:{paddingLeft:12}},{props:e=>{let{endAdornment:t}=e;return!!t},style:{paddingRight:12}}]}})),ZV=(0,WT.Ay)(C$,{name:"MuiPickersFilledInput",slot:"sectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{startAdornment:t}=e;return!!t},style:{paddingLeft:0}},{props:e=>{let{endAdornment:t}=e;return!!t},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,size:"small"},style:{paddingTop:8,paddingBottom:9}}]}),eW=t.forwardRef((function(e,t){const n=JN({props:e,name:"MuiPickersFilledInput"}),{label:r,disableUnderline:i=!1,ownerState:o}=n,a=(0,Le.A)(n,QV),s=oD(),l=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,VT.A)(r,YV,t);return(0,De.A)({},t,i)})((0,De.A)({},n,o,s,{color:s?.color||"primary"}));return(0,Ve.jsx)(P$,(0,De.A)({slots:{root:JV,input:ZV},slotProps:{root:{disableUnderline:i}}},a,{label:r,classes:l,ref:t}))}));function tW(e){return(0,GT.Ay)("MuiPickersFilledInput",e)}eW.muiName="Input";const nW=(0,De.A)({},l$,(0,Ge.A)("MuiPickersInput",["root","input"])),rW=["label","autoFocus","disableUnderline","ownerState"],iW=(0,WT.Ay)(k$,{name:"MuiPickersInput",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e].main)).map((e=>({props:{color:e},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e].main}`}}}))),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${nW.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${nW.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${nW.disabled}, .${nW.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${nW.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}})),oW=t.forwardRef((function(e,t){const n=JN({props:e,name:"MuiPickersInput"}),{label:r,disableUnderline:i=!1,ownerState:o}=n,a=(0,Le.A)(n,rW),s=oD(),l=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,VT.A)(r,tW,t);return(0,De.A)({},t,i)})((0,De.A)({},n,o,s,{disableUnderline:i,color:s?.color||"primary"}));return(0,Ve.jsx)(P$,(0,De.A)({slots:{root:iW}},a,{label:r,classes:l,ref:t}))}));oW.muiName="Input";const aW=["onFocus","onBlur","className","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps"],sW={standard:oW,filled:eW,outlined:j$},lW=(0,WT.Ay)(aL,{name:"MuiPickersTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),cW=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:o,className:a,color:s="primary",disabled:l=!1,error:c=!1,variant:u="outlined",required:d=!1,InputProps:h,inputProps:p,inputRef:m,sectionListRef:f,elements:g,areAllSectionsEmpty:v,onClick:y,onKeyDown:b,onKeyUp:w,onPaste:x,onInput:E,endAdornment:A,startAdornment:S,tabIndex:T,contentEditable:_,focused:k,value:C,onChange:I,fullWidth:R,id:D,name:L,helperText:P,FormHelperTextProps:M,label:O,InputLabelProps:N}=r,j=(0,Le.A)(r,aW),F=t.useRef(null),U=(0,p_.A)(n,F),B=(0,jR.A)(D),$=P&&B?`${B}-helper-text`:void 0,V=O&&B?`${B}-label`:void 0,W=(0,De.A)({},r,{color:s,disabled:l,error:c,focused:k,required:d,variant:u}),z=(e=>{const{focused:t,disabled:n,classes:r,required:i}=e,o={root:["root",t&&!n&&"focused",n&&"disabled",i&&"required"]};return(0,VT.A)(o,a$,r)})(W),H=sW[u];return(0,Ve.jsxs)(lW,(0,De.A)({className:(0,Pe.A)(z.root,a),ref:U,focused:k,onFocus:i,onBlur:o,disabled:l,variant:u,error:c,color:s,fullWidth:R,required:d,ownerState:W},j,{children:[(0,Ve.jsx)(tL,(0,De.A)({htmlFor:B,id:V},N,{children:O})),(0,Ve.jsx)(H,(0,De.A)({elements:g,areAllSectionsEmpty:v,onClick:y,onKeyDown:b,onKeyUp:w,onInput:E,onPaste:x,endAdornment:A,startAdornment:S,tabIndex:T,contentEditable:_,value:C,onChange:I,id:B,fullWidth:R,inputProps:p,inputRef:m,sectionListRef:f,label:O,name:L,role:"group","aria-labelledby":V,"aria-describedby":$,"aria-live":$?"polite":void 0},h)),P&&(0,Ve.jsx)(pL,(0,De.A)({id:$},M,{children:P}))]}))})),uW=["enableAccessibleFieldDOMStructure"],dW=["InputProps","readOnly"],hW=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef"],pW=["slots","slotProps","InputProps","inputProps"],mW=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiDateField"}),{slots:i,slotProps:o,InputProps:a,inputProps:s}=r,l=(0,Le.A)(r,pW),c=r,u=i?.textField??(e.enableAccessibleFieldDOMStructure?cW:XL),d=kk({elementType:u,externalSlotProps:o?.textField,externalForwardedProps:l,additionalProps:{ref:n},ownerState:c});d.inputProps=(0,De.A)({},s,d.inputProps),d.InputProps=(0,De.A)({},a,d.InputProps);const h=(e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=(0,Le.A)(e,uW);if(t){const{InputProps:e,readOnly:t}=n,r=(0,Le.A)(n,dW);return(0,De.A)({},r,{InputProps:(0,De.A)({},e??{},{readOnly:t})})}const{onPaste:r,onKeyDown:i,inputMode:o,readOnly:a,InputProps:s,inputProps:l,inputRef:c}=n,u=(0,Le.A)(n,hW);return(0,De.A)({},u,{InputProps:(0,De.A)({},s??{},{readOnly:a}),inputProps:(0,De.A)({},l??{},{inputMode:o,onPaste:r,onKeyDown:i,ref:c})})})(r$(d)),p=(e=>{const n=nF(),{clearable:r,onClear:i,InputProps:o,sx:a,slots:s,slotProps:l}=e,c=(0,Le.A)(e,i$),u=s?.clearButton??Sk,d=kk({elementType:u,externalSlotProps:l?.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:n.fieldClearLabel}}),h=(0,Le.A)(d,o$),p=s?.clearIcon??qB,m=kk({elementType:p,externalSlotProps:l?.clearIcon,ownerState:{}});return(0,De.A)({},c,{InputProps:(0,De.A)({},o,{endAdornment:(0,Ve.jsxs)(t.Fragment,{children:[r&&(0,Ve.jsx)(GN,{position:"end",sx:{marginRight:o?.endAdornment?-1:-1.5},children:(0,Ve.jsx)(u,(0,De.A)({},h,{onClick:i,children:(0,Ve.jsx)(p,(0,De.A)({fontSize:"small"},m))}))}),o?.endAdornment]})}),sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(a)?a:[a]]})})((0,De.A)({},h,{slots:i,slotProps:o}));return(0,Ve.jsx)(u,(0,De.A)({},p))})),fW=e=>{let{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:o,maxDate:a,disableFuture:s,disablePast:l,timezone:c}=e;const u=Gj();return t.useCallback((e=>null!==mF({adapter:u,value:e,timezone:c,props:{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:o,maxDate:a,disableFuture:s,disablePast:l}})),[u,n,r,i,o,a,s,l,c])},gW=e=>{const{value:n,referenceDate:r,disableFuture:i,disablePast:o,disableSwitchToMonthOnDayFocus:a=!1,maxDate:s,minDate:l,onMonthChange:c,reduceAnimations:u,shouldDisableDate:d,timezone:h}=e,p=Kj(),m=t.useRef(((e,t,n)=>(r,i)=>{switch(i.type){case"changeMonth":return(0,De.A)({},r,{slideDirection:i.direction,currentMonth:i.newMonth,isMonthSwitchingAnimating:!e});case"changeMonthTimezone":{const e=i.newTimezone;if(n.getTimezone(r.currentMonth)===e)return r;let t=n.setTimezone(r.currentMonth,e);return n.getMonth(t)!==n.getMonth(r.currentMonth)&&(t=n.setMonth(t,n.getMonth(r.currentMonth))),(0,De.A)({},r,{currentMonth:t})}case"finishMonthSwitchingAnimation":return(0,De.A)({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(null!=r.focusedDay&&null!=i.focusedDay&&n.isSameDay(i.focusedDay,r.focusedDay))return r;const o=null!=i.focusedDay&&!t&&!n.isSameMonth(r.currentMonth,i.focusedDay);return(0,De.A)({},r,{focusedDay:i.focusedDay,isMonthSwitchingAnimating:o&&!e&&!i.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(i.focusedDay):r.currentMonth,slideDirection:null!=i.focusedDay&&n.isAfterDay(i.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}})(Boolean(u),a,p)).current,f=t.useMemo((()=>Fj.getInitialReferenceValue({value:n,utils:p,timezone:h,props:e,referenceDate:r,granularity:mj.day})),[r,h]),[g,v]=t.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:f,currentMonth:p.startOfMonth(f),slideDirection:"left"});t.useEffect((()=>{v({type:"changeMonthTimezone",newTimezone:p.getTimezone(f)})}),[f,p]);const y=t.useCallback((e=>{v((0,De.A)({type:"changeMonth"},e)),c&&c(e.newMonth)}),[c]),b=t.useCallback((e=>{const t=e;p.isSameMonth(t,g.currentMonth)||y({newMonth:p.startOfMonth(t),direction:p.isAfterDay(t,g.currentMonth)?"left":"right"})}),[g.currentMonth,y,p]),w=fW({shouldDisableDate:d,minDate:l,maxDate:s,disableFuture:i,disablePast:o,timezone:h}),x=t.useCallback((()=>{v({type:"finishMonthSwitchingAnimation"})}),[]),E=(0,QC.A)(((e,t)=>{w(e)||v({type:"changeFocusedDay",focusedDay:e,withoutMonthSwitchingAnimation:t})}));return{referenceDate:f,calendarState:g,changeMonth:b,changeFocusedDay:E,isDateDisabled:w,onMonthSwitchingAnimationEnd:x,handleChangeMonth:y}},vW=e=>(0,GT.Ay)("MuiPickersFadeTransitionGroup",e),yW=((0,Ge.A)("MuiPickersFadeTransitionGroup",["root"]),(0,WT.Ay)(Y_,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"}));function bW(e){const t=JN({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:r,reduceAnimations:i,transKey:o}=t,a=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},vW,t)})(t),s=TC();return i?n:(0,Ve.jsx)(yW,{className:(0,Pe.A)(a.root,r),children:(0,Ve.jsx)(HC,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:s.transitions.duration.enteringScreen,enter:s.transitions.duration.enteringScreen,exit:0},children:n},o)})}function wW(e){return(0,GT.Ay)("MuiPickersDay",e)}const xW=(0,Ge.A)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),EW=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],AW=e=>{let{theme:t}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:fM(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:fM(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${xW.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${xW.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${xW.disabled}:not(.${xW.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${xW.disabled}&.${xW.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:"0 2px"}},{props:{outsideCurrentMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,today:!0},style:{[`&:not(.${xW.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]})},SW=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},TW=(0,WT.Ay)(yk,{name:"MuiPickersDay",slot:"Root",overridesResolver:SW})(AW),_W=(0,WT.Ay)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:SW})((e=>{let{theme:t}=e;return(0,De.A)({},AW({theme:t}),{opacity:0,pointerEvents:"none"})})),kW=()=>{},CW=t.forwardRef((function(e,n){const r=JN({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:o,day:a,disabled:s=!1,disableHighlightToday:l=!1,disableMargin:c=!1,isAnimating:u,onClick:d,onDaySelect:h,onFocus:p=kW,onBlur:m=kW,onKeyDown:f=kW,onMouseDown:g=kW,onMouseEnter:v=kW,outsideCurrentMonth:y,selected:b=!1,showDaysOutsideCurrentMonth:w=!1,children:x,today:E=!1}=r,A=(0,Le.A)(r,EW),S=(0,De.A)({},r,{autoFocus:i,disabled:s,disableHighlightToday:l,disableMargin:c,selected:b,showDaysOutsideCurrentMonth:w,today:E}),T=(e=>{const{selected:t,disableMargin:n,disableHighlightToday:r,today:i,disabled:o,outsideCurrentMonth:a,showDaysOutsideCurrentMonth:s,classes:l}=e,c=a&&!s,u={root:["root",t&&!c&&"selected",o&&"disabled",!n&&"dayWithMargin",!r&&i&&"today",a&&s&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return(0,VT.A)(u,wW,l)})(S),_=Kj(),k=t.useRef(null),C=(0,p_.A)(k,n);(0,UC.A)((()=>{!i||s||u||y||k.current.focus()}),[i,s,u,y]);return y&&!w?(0,Ve.jsx)(_W,{className:(0,Pe.A)(T.root,T.hiddenDaySpacingFiller,o),ownerState:S,role:A.role}):(0,Ve.jsx)(TW,(0,De.A)({className:(0,Pe.A)(T.root,o),ref:C,centerRipple:!0,disabled:s,tabIndex:b?0:-1,onKeyDown:e=>f(e,a),onFocus:e=>p(e,a),onBlur:e=>m(e,a),onMouseEnter:e=>v(e,a),onClick:e=>{s||h(a),y&&e.currentTarget.focus(),d&&d(e)},onMouseDown:e=>{g(e),y&&e.preventDefault()}},A,{ownerState:S,children:x||_.format(a,"dayOfMonth")}))})),IW=t.memo(CW);function RW(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var DW=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=RW(n.className,r):n.setAttribute("class",RW(n.className&&n.className.baseVal||"",r)));var n,r}))},LW=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}V_(n,e);var r=n.prototype;return r.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&gC(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},r.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&DW(e,r),i&&DW(e,i),o&&DW(e,o)},r.render=function(){var e=this.props,n=(e.classNames,(0,Le.A)(e,["classNames"]));return t.createElement(SC,(0,De.A)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(t.Component);LW.defaultProps={classNames:""},LW.propTypes={};const PW=LW,MW=e=>(0,GT.Ay)("MuiPickersSlideTransition",e),OW=(0,Ge.A)("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),NW=["children","className","reduceAnimations","slideDirection","transKey","classes"],jW=(0,WT.Ay)(Y_,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${OW["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${OW["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${OW.slideEnterActive}`]:t.slideEnterActive},{[`.${OW.slideExit}`]:t.slideExit},{[`.${OW["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${OW["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})((e=>{let{theme:t}=e;const n=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${OW["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${OW["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${OW.slideEnterActive}`]:{transform:"translate(0%)",transition:n},[`& .${OW.slideExit}`]:{transform:"translate(0%)"},[`& .${OW["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:n,zIndex:0},[`& .${OW["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:n,zIndex:0}}}));const FW=e=>(0,GT.Ay)("MuiDayCalendar",e),UW=((0,Ge.A)("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]),["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"]),BW=["ownerState"],$W=(0,WT.Ay)("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),VW=(0,WT.Ay)("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),WW=(0,WT.Ay)(N_,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary}})),zW=(0,WT.Ay)(N_,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled}})),HW=(0,WT.Ay)(N_,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,padding:0,margin:"0 2px",color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})})),qW=(0,WT.Ay)("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),GW=(0,WT.Ay)((function(e){const n=JN({props:e,name:"MuiPickersSlideTransition"}),{children:r,className:i,reduceAnimations:o,transKey:a}=n,s=(0,Le.A)(n,NW),l=(e=>{const{classes:t,slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return(0,VT.A)(r,MW,t)})(n),c=TC();if(o)return(0,Ve.jsx)("div",{className:(0,Pe.A)(l.root,i),children:r});const u={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return(0,Ve.jsx)(jW,{className:(0,Pe.A)(l.root,i),childFactory:e=>t.cloneElement(e,{classNames:u}),role:"presentation",children:(0,Ve.jsx)(PW,(0,De.A)({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:u},s,{children:r}),a)})}),{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:240}),KW=(0,WT.Ay)("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),YW=(0,WT.Ay)("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"});function XW(e){let{parentProps:n,day:r,focusableDay:i,selectedDays:o,isDateDisabled:a,currentMonthNumber:s,isViewFocused:l}=e,c=(0,Le.A)(e,UW);const{disabled:u,disableHighlightToday:d,isMonthSwitchingAnimating:h,showDaysOutsideCurrentMonth:p,slots:m,slotProps:f,timezone:g}=n,v=Kj(),y=Xj(g),b=null!==i&&v.isSameDay(r,i),w=o.some((e=>v.isSameDay(e,r))),x=v.isSameDay(r,y),E=m?.day??IW,A=kk({elementType:E,externalSlotProps:f?.day,additionalProps:(0,De.A)({disableHighlightToday:d,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:h,"data-timestamp":v.toJsDate(r).valueOf()},c),ownerState:(0,De.A)({},n,{day:r,selected:w})}),S=(0,Le.A)(A,BW),T=t.useMemo((()=>u||a(r)),[u,a,r]),_=t.useMemo((()=>v.getMonth(r)!==s),[v,r,s]),k=t.useMemo((()=>{const e=v.startOfMonth(v.setMonth(r,s));return p?v.isSameDay(r,v.startOfWeek(e)):v.isSameDay(r,e)}),[s,r,p,v]),C=t.useMemo((()=>{const e=v.endOfMonth(v.setMonth(r,s));return p?v.isSameDay(r,v.endOfWeek(e)):v.isSameDay(r,e)}),[s,r,p,v]);return(0,Ve.jsx)(E,(0,De.A)({},S,{day:r,disabled:T,autoFocus:l&&b,today:x,outsideCurrentMonth:_,isFirstVisibleCell:k,isLastVisibleCell:C,selected:w,tabIndex:b?0:-1,"aria-selected":w,"aria-current":x?"date":void 0}))}function QW(e){const n=JN({props:e,name:"MuiDayCalendar"}),r=Kj(),{onFocusedDayChange:i,className:o,currentMonth:a,selectedDays:s,focusedDay:l,loading:c,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:d,readOnly:h,reduceAnimations:p,renderLoading:m=()=>(0,Ve.jsx)("span",{children:"..."}),slideDirection:f,TransitionProps:g,disablePast:v,disableFuture:y,minDate:b,maxDate:w,shouldDisableDate:x,shouldDisableMonth:E,shouldDisableYear:A,dayOfWeekFormatter:S=e=>r.format(e,"weekdayShort").charAt(0).toUpperCase(),hasFocus:T,onFocusedViewChange:_,gridLabelId:k,displayWeekNumber:C,fixedWeekNumber:I,autoFocus:R,timezone:D}=n,L=Xj(D),P=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},FW,t)})(n),M=hB(),O=fW({shouldDisableDate:x,shouldDisableMonth:E,shouldDisableYear:A,minDate:b,maxDate:w,disablePast:v,disableFuture:y,timezone:D}),N=nF(),[j,F]=(0,iB.A)({name:"DayCalendar",state:"hasFocus",controlled:T,default:R??!1}),[U,B]=t.useState((()=>l||L)),$=(0,QC.A)((e=>{h||u(e)})),V=e=>{O(e)||(i(e),B(e),_?.(!0),F(!0))},W=(0,QC.A)(((e,t)=>{switch(e.key){case"ArrowUp":V(r.addDays(t,-7)),e.preventDefault();break;case"ArrowDown":V(r.addDays(t,7)),e.preventDefault();break;case"ArrowLeft":{const n=r.addDays(t,M?1:-1),i=r.addMonths(t,M?1:-1),o=ij({utils:r,date:n,minDate:M?n:r.startOfMonth(i),maxDate:M?r.endOfMonth(i):n,isDateDisabled:O,timezone:D});V(o||n),e.preventDefault();break}case"ArrowRight":{const n=r.addDays(t,M?-1:1),i=r.addMonths(t,M?-1:1),o=ij({utils:r,date:n,minDate:M?r.startOfMonth(i):n,maxDate:M?n:r.endOfMonth(i),isDateDisabled:O,timezone:D});V(o||n),e.preventDefault();break}case"Home":V(r.startOfWeek(t)),e.preventDefault();break;case"End":V(r.endOfWeek(t)),e.preventDefault();break;case"PageUp":V(r.addMonths(t,1)),e.preventDefault();break;case"PageDown":V(r.addMonths(t,-1)),e.preventDefault()}})),z=(0,QC.A)(((e,t)=>V(t))),H=(0,QC.A)(((e,t)=>{j&&r.isSameDay(U,t)&&_?.(!1)})),q=r.getMonth(a),G=r.getYear(a),K=t.useMemo((()=>s.filter((e=>!!e)).map((e=>r.startOfDay(e)))),[r,s]),Y=`${G}-${q}`,X=t.useMemo((()=>t.createRef()),[Y]),Q=t.useMemo((()=>{const e=r.startOfMonth(a),t=r.endOfMonth(a);return O(U)||r.isAfterDay(U,t)||r.isBeforeDay(U,e)?ij({utils:r,date:U,minDate:e,maxDate:t,disablePast:v,disableFuture:y,isDateDisabled:O,timezone:D}):U}),[a,y,v,U,O,r,D]),J=t.useMemo((()=>{const e=r.getWeekArray(a);let t=r.addMonths(a,1);for(;I&&e.length<I;){const n=r.getWeekArray(t),i=r.isSameDay(e[e.length-1][0],n[0][0]);n.slice(i?1:0).forEach((t=>{e.length<I&&e.push(t)})),t=r.addMonths(t,1)}return e}),[a,I,r]);return(0,Ve.jsxs)($W,{role:"grid","aria-labelledby":k,className:P.root,children:[(0,Ve.jsxs)(VW,{role:"row",className:P.header,children:[C&&(0,Ve.jsx)(zW,{variant:"caption",role:"columnheader","aria-label":N.calendarWeekNumberHeaderLabel,className:P.weekNumberLabel,children:N.calendarWeekNumberHeaderText}),dj(r,L).map(((e,t)=>(0,Ve.jsx)(WW,{variant:"caption",role:"columnheader","aria-label":r.format(e,"weekday"),className:P.weekDayLabel,children:S(e)},t.toString())))]}),c?(0,Ve.jsx)(qW,{className:P.loadingContainer,children:m()}):(0,Ve.jsx)(GW,(0,De.A)({transKey:Y,onExited:d,reduceAnimations:p,slideDirection:f,className:(0,Pe.A)(o,P.slideTransition)},g,{nodeRef:X,children:(0,Ve.jsx)(KW,{ref:X,role:"rowgroup",className:P.monthContainer,children:J.map(((e,t)=>(0,Ve.jsxs)(YW,{role:"row",className:P.weekContainer,"aria-rowindex":t+1,children:[C&&(0,Ve.jsx)(HW,{className:P.weekNumber,role:"rowheader","aria-label":N.calendarWeekNumberAriaLabelText(r.getWeekNumber(e[0])),children:N.calendarWeekNumberText(r.getWeekNumber(e[0]))}),e.map(((e,t)=>(0,Ve.jsx)(XW,{parentProps:n,day:e,selectedDays:K,focusableDay:Q,onKeyDown:W,onFocus:z,onBlur:H,onDaySelect:$,isDateDisabled:O,currentMonthNumber:q,isViewFocused:j,"aria-colindex":t+1},e.toString())))]},`week-${e[0]}`)))})}))]})}function JW(e){return(0,GT.Ay)("MuiPickersMonth",e)}const ZW=(0,Ge.A)("MuiPickersMonth",["root","monthButton","disabled","selected"]),ez=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow","slots","slotProps"],tz=(0,WT.Ay)("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{monthsPerRow:4},style:{flexBasis:"25%"}}]}),nz=(0,WT.Ay)("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${ZW.disabled}`]:t.disabled},{[`&.${ZW.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:fM(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:fM(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${ZW.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${ZW.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),rz=t.memo((function(e){const n=JN({props:e,name:"MuiPickersMonth"}),{autoFocus:r,className:i,children:o,disabled:a,selected:s,value:l,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":m,"aria-label":f,slots:g,slotProps:v}=n,y=(0,Le.A)(n,ez),b=t.useRef(null),w=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]};return(0,VT.A)(i,JW,r)})(n);(0,UC.A)((()=>{r&&b.current?.focus()}),[r]);const x=g?.monthButton??nz,E=kk({elementType:x,externalSlotProps:v?.monthButton,additionalProps:{children:o,disabled:a,tabIndex:c,ref:b,type:"button",role:"radio","aria-current":m,"aria-checked":s,"aria-label":f,onClick:e=>u(e,l),onKeyDown:e=>d(e,l),onFocus:e=>h(e,l),onBlur:e=>p(e,l)},ownerState:n,className:w.monthButton});return(0,Ve.jsx)(tz,(0,De.A)({className:(0,Pe.A)(w.root,i),ownerState:n},y,{children:(0,Ve.jsx)(x,(0,De.A)({},E))}))}));function iz(e){return(0,GT.Ay)("MuiMonthCalendar",e)}(0,Ge.A)("MuiMonthCalendar",["root"]);const oz=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"];const az=(0,WT.Ay)("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:IB,boxSizing:"border-box"}),sz=t.forwardRef((function(e,n){const r=function(e,t){const n=Kj(),r=Yj(),i=JN({props:e,name:t});return(0,De.A)({disableFuture:!1,disablePast:!1},i,{minDate:oj(n,i.minDate,r.minDate),maxDate:oj(n,i.maxDate,r.maxDate)})}(e,"MuiMonthCalendar"),{className:i,value:o,defaultValue:a,referenceDate:s,disabled:l,disableFuture:c,disablePast:u,maxDate:d,minDate:h,onChange:p,shouldDisableMonth:m,readOnly:f,autoFocus:g=!1,onMonthFocus:v,hasFocus:y,onFocusedViewChange:b,monthsPerRow:w=3,timezone:x,gridLabelId:E,slots:A,slotProps:S}=r,T=(0,Le.A)(r,oz),{value:_,handleValueChange:k,timezone:C}=aB({name:"MonthCalendar",timezone:x,value:o,defaultValue:a,referenceDate:s,onChange:p,valueManager:Fj}),I=Xj(C),R=hB(),D=Kj(),L=t.useMemo((()=>Fj.getInitialReferenceValue({value:_,utils:D,props:r,timezone:C,referenceDate:s,granularity:mj.month})),[]),P=r,M=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},iz,t)})(P),O=t.useMemo((()=>D.getMonth(I)),[D,I]),N=t.useMemo((()=>null!=_?D.getMonth(_):null),[_,D]),[j,F]=t.useState((()=>N||D.getMonth(L))),[U,B]=(0,iB.A)({name:"MonthCalendar",state:"hasFocus",controlled:y,default:g??!1}),$=(0,QC.A)((e=>{B(e),b&&b(e)})),V=t.useCallback((e=>{const t=D.startOfMonth(u&&D.isAfter(I,h)?I:h),n=D.startOfMonth(c&&D.isBefore(I,d)?I:d),r=D.startOfMonth(e);return!!D.isBefore(r,t)||(!!D.isAfter(r,n)||!!m&&m(r))}),[c,u,d,h,I,m,D]),W=(0,QC.A)(((e,t)=>{if(f)return;const n=D.setMonth(_??L,t);k(n)})),z=(0,QC.A)((e=>{V(D.setMonth(_??L,e))||(F(e),$(!0),v&&v(e))}));t.useEffect((()=>{F((e=>null!==N&&e!==N?N:e))}),[N]);const H=(0,QC.A)(((e,t)=>{const n=12;switch(e.key){case"ArrowUp":z((n+t-3)%n),e.preventDefault();break;case"ArrowDown":z((n+t+3)%n),e.preventDefault();break;case"ArrowLeft":z((n+t+(R?1:-1))%n),e.preventDefault();break;case"ArrowRight":z((n+t+(R?-1:1))%n),e.preventDefault()}})),q=(0,QC.A)(((e,t)=>{z(t)})),G=(0,QC.A)(((e,t)=>{j===t&&$(!1)}));return(0,Ve.jsx)(az,(0,De.A)({ref:n,className:(0,Pe.A)(M.root,i),ownerState:P,role:"radiogroup","aria-labelledby":E},T,{children:aj(D,_??L).map((e=>{const t=D.getMonth(e),n=D.format(e,"monthShort"),r=D.format(e,"month"),i=t===N,o=l||V(e);return(0,Ve.jsx)(rz,{selected:i,value:t,onClick:W,onKeyDown:H,autoFocus:U&&t===j,disabled:o,tabIndex:t!==j||o?-1:0,onFocus:q,onBlur:G,"aria-current":O===t?"date":void 0,"aria-label":r,monthsPerRow:w,slots:A,slotProps:S,children:n},n)}))}))}));function lz(e){return(0,GT.Ay)("MuiPickersYear",e)}const cz=(0,Ge.A)("MuiPickersYear",["root","yearButton","selected","disabled"]),uz=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow","slots","slotProps"],dz=(0,WT.Ay)("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{yearsPerRow:4},style:{flexBasis:"25%"}}]}),hz=(0,WT.Ay)("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${cz.disabled}`]:t.disabled},{[`&.${cz.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:fM(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:fM(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${cz.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${cz.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),pz=t.memo((function(e){const n=JN({props:e,name:"MuiPickersYear"}),{autoFocus:r,className:i,children:o,disabled:a,selected:s,value:l,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":m,slots:f,slotProps:g}=n,v=(0,Le.A)(n,uz),y=t.useRef(null),b=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]};return(0,VT.A)(i,lz,r)})(n);(0,UC.A)((()=>{r&&y.current?.focus()}),[r]);const w=f?.yearButton??hz,x=kk({elementType:w,externalSlotProps:g?.yearButton,additionalProps:{children:o,disabled:a,tabIndex:c,ref:y,type:"button",role:"radio","aria-current":m,"aria-checked":s,onClick:e=>u(e,l),onKeyDown:e=>d(e,l),onFocus:e=>h(e,l),onBlur:e=>p(e,l)},ownerState:n,className:b.yearButton});return(0,Ve.jsx)(dz,(0,De.A)({className:(0,Pe.A)(b.root,i),ownerState:n},v,{children:(0,Ve.jsx)(w,(0,De.A)({},x))}))}));function mz(e){return(0,GT.Ay)("MuiYearCalendar",e)}(0,Ge.A)("MuiYearCalendar",["root"]);const fz=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"];const gz=(0,WT.Ay)("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:IB,maxHeight:280,boxSizing:"border-box",position:"relative"}),vz=t.forwardRef((function(e,n){const r=function(e,t){const n=Kj(),r=Yj(),i=JN({props:e,name:t});return(0,De.A)({disablePast:!1,disableFuture:!1},i,{yearsPerRow:i.yearsPerRow??3,minDate:oj(n,i.minDate,r.minDate),maxDate:oj(n,i.maxDate,r.maxDate)})}(e,"MuiYearCalendar"),{autoFocus:i,className:o,value:a,defaultValue:s,referenceDate:l,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onChange:m,readOnly:f,shouldDisableYear:g,onYearFocus:v,hasFocus:y,onFocusedViewChange:b,yearsOrder:w="asc",yearsPerRow:x,timezone:E,gridLabelId:A,slots:S,slotProps:T}=r,_=(0,Le.A)(r,fz),{value:k,handleValueChange:C,timezone:I}=aB({name:"YearCalendar",timezone:E,value:a,defaultValue:s,referenceDate:l,onChange:m,valueManager:Fj}),R=Xj(I),D=hB(),L=Kj(),P=t.useMemo((()=>Fj.getInitialReferenceValue({value:k,utils:L,props:r,timezone:I,referenceDate:l,granularity:mj.year})),[]),M=r,O=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},mz,t)})(M),N=t.useMemo((()=>L.getYear(R)),[L,R]),j=t.useMemo((()=>null!=k?L.getYear(k):null),[k,L]),[F,U]=t.useState((()=>j||L.getYear(P))),[B,$]=(0,iB.A)({name:"YearCalendar",state:"hasFocus",controlled:y,default:i??!1}),V=(0,QC.A)((e=>{$(e),b&&b(e)})),W=t.useCallback((e=>{if(d&&L.isBeforeYear(e,R))return!0;if(u&&L.isAfterYear(e,R))return!0;if(p&&L.isBeforeYear(e,p))return!0;if(h&&L.isAfterYear(e,h))return!0;if(!g)return!1;const t=L.startOfYear(e);return g(t)}),[u,d,h,p,R,g,L]),z=(0,QC.A)(((e,t)=>{if(f)return;const n=L.setYear(k??P,t);C(n)})),H=(0,QC.A)((e=>{W(L.setYear(k??P,e))||(U(e),V(!0),v?.(e))}));t.useEffect((()=>{U((e=>null!==j&&e!==j?j:e))}),[j]);const q="desc"!==w?1*x:-1*x,G=D&&"asc"===w||!D&&"desc"===w?-1:1,K=(0,QC.A)(((e,t)=>{switch(e.key){case"ArrowUp":H(t-q),e.preventDefault();break;case"ArrowDown":H(t+q),e.preventDefault();break;case"ArrowLeft":H(t-G),e.preventDefault();break;case"ArrowRight":H(t+G),e.preventDefault()}})),Y=(0,QC.A)(((e,t)=>{H(t)})),X=(0,QC.A)(((e,t)=>{F===t&&V(!1)})),Q=t.useRef(null),J=(0,p_.A)(n,Q);t.useEffect((()=>{if(i||null===Q.current)return;const e=Q.current.querySelector('[tabindex="0"]');if(!e)return;const t=e.offsetHeight,n=e.offsetTop,r=Q.current.clientHeight,o=Q.current.scrollTop,a=n+t;t>r||n<o||(Q.current.scrollTop=a-r/2-t/2)}),[i]);const Z=L.getYearRange([p,h]);return"desc"===w&&Z.reverse(),(0,Ve.jsx)(gz,(0,De.A)({ref:J,className:(0,Pe.A)(O.root,o),ownerState:M,role:"radiogroup","aria-labelledby":A},_,{children:Z.map((e=>{const t=L.getYear(e),n=t===j,r=c||W(e);return(0,Ve.jsx)(pz,{selected:n,value:t,onClick:z,onKeyDown:K,autoFocus:B&&t===F,disabled:r,tabIndex:t!==F||r?-1:0,onFocus:Y,onBlur:X,"aria-current":N===t?"date":void 0,yearsPerRow:x,slots:S,slotProps:T,children:L.format(e,"year")},L.format(e,"year"))}))}))}));function yz(e){return(0,GT.Ay)("MuiPickersArrowSwitcher",e)}(0,Ge.A)("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const bz=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId"],wz=["ownerState"],xz=["ownerState"],Ez=(0,WT.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),Az=(0,WT.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((e=>{let{theme:t}=e;return{width:t.spacing(3)}})),Sz=(0,WT.Ay)(Sk,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})({variants:[{props:{hidden:!0},style:{visibility:"hidden"}}]}),Tz=t.forwardRef((function(e,t){const n=hB(),r=JN({props:e,name:"MuiPickersArrowSwitcher"}),{children:i,className:o,slots:a,slotProps:s,isNextDisabled:l,isNextHidden:c,onGoToNext:u,nextLabel:d,isPreviousDisabled:h,isPreviousHidden:p,onGoToPrevious:m,previousLabel:f,labelId:g}=r,v=(0,Le.A)(r,bz),y=r,b=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},yz,t)})(y),w={isDisabled:l,isHidden:c,goTo:u,label:d},x={isDisabled:h,isHidden:p,goTo:m,label:f},E=a?.previousIconButton??Sz,A=kk({elementType:E,externalSlotProps:s?.previousIconButton,additionalProps:{size:"medium",title:x.label,"aria-label":x.label,disabled:x.isDisabled,edge:"end",onClick:x.goTo},ownerState:(0,De.A)({},y,{hidden:x.isHidden}),className:(0,Pe.A)(b.button,b.previousIconButton)}),S=a?.nextIconButton??Sz,T=kk({elementType:S,externalSlotProps:s?.nextIconButton,additionalProps:{size:"medium",title:w.label,"aria-label":w.label,disabled:w.isDisabled,edge:"start",onClick:w.goTo},ownerState:(0,De.A)({},y,{hidden:w.isHidden}),className:(0,Pe.A)(b.button,b.nextIconButton)}),_=a?.leftArrowIcon??WB,k=kk({elementType:_,externalSlotProps:s?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:y,className:b.leftArrowIcon}),C=(0,Le.A)(k,wz),I=a?.rightArrowIcon??zB,R=kk({elementType:I,externalSlotProps:s?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:y,className:b.rightArrowIcon}),D=(0,Le.A)(R,xz);return(0,Ve.jsxs)(Ez,(0,De.A)({ref:t,className:(0,Pe.A)(b.root,o),ownerState:y},v,{children:[(0,Ve.jsx)(E,(0,De.A)({},A,{children:n?(0,Ve.jsx)(I,(0,De.A)({},D)):(0,Ve.jsx)(_,(0,De.A)({},C))})),i?(0,Ve.jsx)(N_,{variant:"subtitle1",component:"span",id:g,children:i}):(0,Ve.jsx)(Az,{className:b.spacer,ownerState:y}),(0,Ve.jsx)(S,(0,De.A)({},T,{children:n?(0,Ve.jsx)(_,(0,De.A)({},C)):(0,Ve.jsx)(I,(0,De.A)({},D))}))]}))}));const _z=e=>(0,GT.Ay)("MuiPickersCalendarHeader",e),kz=(0,Ge.A)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Cz=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone","format"],Iz=["ownerState"],Rz=(0,WT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Dz=(0,WT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((e=>{let{theme:t}=e;return(0,De.A)({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})})),Lz=(0,WT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),Pz=(0,WT.Ay)(Sk,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${kz.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),Mz=(0,WT.Ay)(VB,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})((e=>{let{theme:t}=e;return{willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"}})),Oz=t.forwardRef((function(e,n){const r=nF(),i=Kj(),o=JN({props:e,name:"MuiPickersCalendarHeader"}),{slots:a,slotProps:s,currentMonth:l,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onMonthChange:m,onViewChange:f,view:g,reduceAnimations:v,views:y,labelId:b,className:w,timezone:x,format:E=`${i.formats.month} ${i.formats.year}`}=o,A=(0,Le.A)(o,Cz),S=o,T=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},_z,t)})(o),_=a?.switchViewButton??Pz,k=kk({elementType:_,externalSlotProps:s?.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(g)},ownerState:S,className:T.switchViewButton}),C=a?.switchViewIcon??Mz,I=kk({elementType:C,externalSlotProps:s?.switchViewIcon,ownerState:S,className:T.switchViewIcon}),R=(0,Le.A)(I,Iz),D=function(e,n){let{disableFuture:r,maxDate:i,timezone:o}=n;const a=Kj();return t.useMemo((()=>{const t=a.date(void 0,o),n=a.startOfMonth(r&&a.isBefore(t,i)?t:i);return!a.isAfter(n,e)}),[r,i,e,a,o])}(l,{disableFuture:u,maxDate:h,timezone:x}),L=function(e,n){let{disablePast:r,minDate:i,timezone:o}=n;const a=Kj();return t.useMemo((()=>{const t=a.date(void 0,o),n=a.startOfMonth(r&&a.isAfter(t,i)?t:i);return!a.isBefore(n,e)}),[r,i,e,a,o])}(l,{disablePast:d,minDate:p,timezone:x});if(1===y.length&&"year"===y[0])return null;const P=i.formatByString(l,E);return(0,Ve.jsxs)(Rz,(0,De.A)({},A,{ownerState:S,className:(0,Pe.A)(T.root,w),ref:n,children:[(0,Ve.jsxs)(Dz,{role:"presentation",onClick:()=>{if(1!==y.length&&f&&!c)if(2===y.length)f(y.find((e=>e!==g))||y[0]);else{const e=0!==y.indexOf(g)?0:1;f(y[e])}},ownerState:S,"aria-live":"polite",className:T.labelContainer,children:[(0,Ve.jsx)(bW,{reduceAnimations:v,transKey:P,children:(0,Ve.jsx)(Lz,{id:b,ownerState:S,className:T.label,children:P})}),y.length>1&&!c&&(0,Ve.jsx)(_,(0,De.A)({},k,{children:(0,Ve.jsx)(C,(0,De.A)({},R))}))]}),(0,Ve.jsx)(HC,{in:"day"===g,appear:!v,enter:!v,children:(0,Ve.jsx)(Tz,{slots:a,slotProps:s,onGoToPrevious:()=>m(i.addMonths(l,-1),"right"),isPreviousDisabled:L,previousLabel:r.previousMonth,onGoToNext:()=>m(i.addMonths(l,1),"left"),isNextDisabled:D,nextLabel:r.nextMonth})})]}))})),Nz=(0,WT.Ay)("div")({overflow:"hidden",width:IB,maxHeight:336,display:"flex",flexDirection:"column",margin:"0 auto"}),jz=e=>(0,GT.Ay)("MuiDateCalendar",e),Fz=((0,Ge.A)("MuiDateCalendar",["root","viewTransitionContainer"]),["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"]);const Uz=(0,WT.Ay)(Nz,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:336}),Bz=(0,WT.Ay)(bW,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),$z=t.forwardRef((function(e,n){const r=Kj(),i=(0,jR.A)(),o=function(e,t){const n=Kj(),r=Yj(),i=QU(),o=JN({props:e,name:t});return(0,De.A)({},o,{loading:o.loading??!1,disablePast:o.disablePast??!1,disableFuture:o.disableFuture??!1,openTo:o.openTo??"day",views:o.views??["year","day"],reduceAnimations:o.reduceAnimations??i,renderLoading:o.renderLoading??(()=>(0,Ve.jsx)("span",{children:"..."})),minDate:oj(n,o.minDate,r.minDate),maxDate:oj(n,o.maxDate,r.maxDate)})}(e,"MuiDateCalendar"),{autoFocus:a,onViewChange:s,value:l,defaultValue:c,referenceDate:u,disableFuture:d,disablePast:h,onChange:p,onYearChange:m,onMonthChange:f,reduceAnimations:g,shouldDisableDate:v,shouldDisableMonth:y,shouldDisableYear:b,view:w,views:x,openTo:E,className:A,disabled:S,readOnly:T,minDate:_,maxDate:k,disableHighlightToday:C,focusedView:I,onFocusedViewChange:R,showDaysOutsideCurrentMonth:D,fixedWeekNumber:L,dayOfWeekFormatter:P,slots:M,slotProps:O,loading:N,renderLoading:j,displayWeekNumber:F,yearsOrder:U,yearsPerRow:B,monthsPerRow:$,timezone:V}=o,W=(0,Le.A)(o,Fz),{value:z,handleValueChange:H,timezone:q}=aB({name:"DateCalendar",timezone:V,value:l,defaultValue:c,referenceDate:u,onChange:p,valueManager:Fj}),{view:G,setView:K,focusedView:Y,setFocusedView:X,goToNextView:Q,setValueAndGoToNextView:J}=lB({view:w,views:x,openTo:E,onChange:H,onViewChange:s,autoFocus:a,focusedView:I,onFocusedViewChange:R}),{referenceDate:Z,calendarState:ee,changeFocusedDay:te,changeMonth:ne,handleChangeMonth:re,isDateDisabled:ie,onMonthSwitchingAnimationEnd:oe}=gW({value:z,referenceDate:u,reduceAnimations:g,onMonthChange:f,minDate:_,maxDate:k,shouldDisableDate:v,disablePast:h,disableFuture:d,timezone:q}),ae=S&&z||_,se=S&&z||k,le=`${i}-grid-label`,ce=null!==Y,ue=M?.calendarHeader??Oz,de=kk({elementType:ue,externalSlotProps:O?.calendarHeader,additionalProps:{views:x,view:G,currentMonth:ee.currentMonth,onViewChange:K,onMonthChange:(e,t)=>re({newMonth:e,direction:t}),minDate:ae,maxDate:se,disabled:S,disablePast:h,disableFuture:d,reduceAnimations:g,timezone:q,labelId:le},ownerState:o}),he=(0,QC.A)((e=>{const t=r.startOfMonth(e),n=r.endOfMonth(e),i=ie(e)?ij({utils:r,date:e,minDate:r.isBefore(_,t)?t:_,maxDate:r.isAfter(k,n)?n:k,disablePast:h,disableFuture:d,isDateDisabled:ie,timezone:q}):e;i?(J(i,"finish"),f?.(t)):(Q(),ne(t)),te(i,!0)})),pe=(0,QC.A)((e=>{const t=r.startOfYear(e),n=r.endOfYear(e),i=ie(e)?ij({utils:r,date:e,minDate:r.isBefore(_,t)?t:_,maxDate:r.isAfter(k,n)?n:k,disablePast:h,disableFuture:d,isDateDisabled:ie,timezone:q}):e;i?(J(i,"finish"),m?.(i)):(Q(),ne(t)),te(i,!0)})),me=(0,QC.A)((e=>H(e?rj(r,e,z??Z):e,"finish",G)));t.useEffect((()=>{null!=z&&r.isValid(z)&&ne(z)}),[z]);const fe=o,ge=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},jz,t)})(fe),ve={disablePast:h,disableFuture:d,maxDate:k,minDate:_},ye={disableHighlightToday:C,readOnly:T,disabled:S,timezone:q,gridLabelId:le,slots:M,slotProps:O},be=t.useRef(G);t.useEffect((()=>{be.current!==G&&(Y===be.current&&X(G,!0),be.current=G)}),[Y,X,G]);const we=t.useMemo((()=>[z]),[z]);return(0,Ve.jsxs)(Uz,(0,De.A)({ref:n,className:(0,Pe.A)(ge.root,A),ownerState:fe},W,{children:[(0,Ve.jsx)(ue,(0,De.A)({},de,{slots:M,slotProps:O})),(0,Ve.jsx)(Bz,{reduceAnimations:g,className:ge.viewTransitionContainer,transKey:G,ownerState:fe,children:(0,Ve.jsxs)("div",{children:["year"===G&&(0,Ve.jsx)(vz,(0,De.A)({},ve,ye,{value:z,onChange:pe,shouldDisableYear:b,hasFocus:ce,onFocusedViewChange:e=>X("year",e),yearsOrder:U,yearsPerRow:B,referenceDate:Z})),"month"===G&&(0,Ve.jsx)(sz,(0,De.A)({},ve,ye,{hasFocus:ce,className:A,value:z,onChange:he,shouldDisableMonth:y,onFocusedViewChange:e=>X("month",e),monthsPerRow:$,referenceDate:Z})),"day"===G&&(0,Ve.jsx)(QW,(0,De.A)({},ee,ve,ye,{onMonthSwitchingAnimationEnd:oe,onFocusedDayChange:te,reduceAnimations:g,selectedDays:we,onSelectedDaysChange:me,shouldDisableDate:v,shouldDisableMonth:y,shouldDisableYear:b,hasFocus:ce,onFocusedViewChange:e=>X("day",e),showDaysOutsideCurrentMonth:D,fixedWeekNumber:L,dayOfWeekFormatter:P,displayWeekNumber:F,loading:N,renderLoading:j}))]})})]}))})),Vz=e=>{let{view:t,onViewChange:n,views:r,focusedView:i,onFocusedViewChange:o,value:a,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:m,maxDate:f,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:E,yearsOrder:A,yearsPerRow:S,slots:T,slotProps:_,loading:k,renderLoading:C,disableHighlightToday:I,readOnly:R,disabled:D,showDaysOutsideCurrentMonth:L,dayOfWeekFormatter:P,sx:M,autoFocus:O,fixedWeekNumber:N,displayWeekNumber:j,timezone:F}=e;return(0,Ve.jsx)($z,{view:t,onViewChange:n,views:r.filter(cj),focusedView:i&&cj(i)?i:null,onFocusedViewChange:o,value:a,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:m,maxDate:f,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:E,yearsOrder:A,yearsPerRow:S,slots:T,slotProps:_,loading:k,renderLoading:C,disableHighlightToday:I,readOnly:R,disabled:D,showDaysOutsideCurrentMonth:L,dayOfWeekFormatter:P,sx:M,autoFocus:O,fixedWeekNumber:N,displayWeekNumber:j,timezone:F})},Wz=t.forwardRef((function(e,n){const r=nF(),i=Kj(),o=lF(e,"MuiDesktopDatePicker"),a=(0,De.A)({day:Vz,month:Vz,year:Vz},o.viewRenderers),s=(0,De.A)({},o,{viewRenderers:a,format:uj(i,o,!1),yearsPerRow:o.yearsPerRow??4,slots:(0,De.A)({openPickerIcon:HB,field:mW},o.slots),slotProps:(0,De.A)({},o.slotProps,{field:e=>(0,De.A)({},g_(o.slotProps?.field,e),pF(o),{ref:n}),toolbar:(0,De.A)({hidden:!0},o.slotProps?.toolbar)})}),{renderPicker:l}=(e=>{let{props:n,getOpenDialogAriaText:r}=e,i=(0,Le.A)(e,UB);const{slots:o,slotProps:a,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:m,name:f,label:g,inputRef:v,readOnly:y,disabled:b,autoFocus:w,localeText:x,reduceAnimations:E}=n,A=t.useRef(null),S=t.useRef(null),T=(0,jR.A)(),_=a?.toolbar?.hidden??!1,{open:k,actions:C,hasUIView:I,layoutProps:R,renderCurrentView:D,shouldRestoreFocus:L,fieldProps:P,contextValue:M,ownerState:O}=fB((0,De.A)({},i,{props:n,fieldRef:S,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),N=o.inputAdornment??GN,j=kk({elementType:N,externalSlotProps:a?.inputAdornment,additionalProps:{position:"end"},ownerState:n}),F=(0,Le.A)(j,BB),U=o.openPickerButton??Sk,B=kk({elementType:U,externalSlotProps:a?.openPickerButton,additionalProps:{disabled:b||y,onClick:k?C.onClose:C.onOpen,"aria-label":r(P.value),edge:F.position},ownerState:n}),$=(0,Le.A)(B,$B),V=o.openPickerIcon,W=kk({elementType:V,externalSlotProps:a?.openPickerIcon,ownerState:O}),z=o.field,H=kk({elementType:z,externalSlotProps:a?.field,additionalProps:(0,De.A)({},P,_&&{id:T},{readOnly:y,disabled:b,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:m,label:g,name:f,autoFocus:w&&!n.open,focused:!!k||void 0},v?{inputRef:v}:{}),ownerState:n});I&&(H.InputProps=(0,De.A)({},H.InputProps,{ref:A},!n.disableOpenPicker&&{[`${F.position}Adornment`]:(0,Ve.jsx)(N,(0,De.A)({},F,{children:(0,Ve.jsx)(U,(0,De.A)({},$,{children:(0,Ve.jsx)(V,(0,De.A)({},W))}))}))}));const q=(0,De.A)({textField:o.textField,clearIcon:o.clearIcon,clearButton:o.clearButton},H.slots),G=o.layout??NB;let K=T;_&&(K=g?`${T}-label`:void 0);const Y=(0,De.A)({},a,{toolbar:(0,De.A)({},a?.toolbar,{titleId:T}),popper:(0,De.A)({"aria-labelledby":K},a?.popper)}),X=(0,p_.A)(S,H.unstableFieldRef);return{renderPicker:()=>(0,Ve.jsxs)(FB,{contextValue:M,localeText:x,children:[(0,Ve.jsx)(z,(0,De.A)({},H,{slots:q,slotProps:Y,unstableFieldRef:X})),(0,Ve.jsx)(nB,(0,De.A)({role:"dialog",placement:"bottom-start",anchorEl:A.current},C,{open:k,slots:o,slotProps:Y,shouldRestoreFocus:L,reduceAnimations:E,children:(0,Ve.jsx)(G,(0,De.A)({},R,Y?.layout,{slots:o,slotProps:Y,children:D()}))}))]})}})({props:s,valueManager:Fj,valueType:"date",getOpenDialogAriaText:Wj({utils:i,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:s.localeText?.openDatePickerDialogue}),validator:mF});return l()}));Wz.propTypes={autoFocus:ej().bool,className:ej().string,closeOnSelect:ej().bool,dayOfWeekFormatter:ej().func,defaultValue:ej().object,disabled:ej().bool,disableFuture:ej().bool,disableHighlightToday:ej().bool,disableOpenPicker:ej().bool,disablePast:ej().bool,displayWeekNumber:ej().bool,enableAccessibleFieldDOMStructure:ej().any,fixedWeekNumber:ej().number,format:ej().string,formatDensity:ej().oneOf(["dense","spacious"]),inputRef:tj,label:ej().node,loading:ej().bool,localeText:ej().object,maxDate:ej().object,minDate:ej().object,monthsPerRow:ej().oneOf([3,4]),name:ej().string,onAccept:ej().func,onChange:ej().func,onClose:ej().func,onError:ej().func,onMonthChange:ej().func,onOpen:ej().func,onSelectedSectionsChange:ej().func,onViewChange:ej().func,onYearChange:ej().func,open:ej().bool,openTo:ej().oneOf(["day","month","year"]),orientation:ej().oneOf(["landscape","portrait"]),readOnly:ej().bool,reduceAnimations:ej().bool,referenceDate:ej().object,renderLoading:ej().func,selectedSections:ej().oneOfType([ej().oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ej().number]),shouldDisableDate:ej().func,shouldDisableMonth:ej().func,shouldDisableYear:ej().func,showDaysOutsideCurrentMonth:ej().bool,slotProps:ej().object,slots:ej().object,sx:ej().oneOfType([ej().arrayOf(ej().oneOfType([ej().func,ej().object,ej().bool])),ej().func,ej().object]),timezone:ej().string,value:ej().object,view:ej().oneOf(["day","month","year"]),viewRenderers:ej().shape({day:ej().func,month:ej().func,year:ej().func}),views:ej().arrayOf(ej().oneOf(["day","month","year"]).isRequired),yearsOrder:ej().oneOf(["asc","desc"]),yearsPerRow:ej().oneOf([3,4])};const zz=(0,WT.Ay)(GR)({[`& .${UR.container}`]:{outline:0},[`& .${UR.paper}`]:{outline:0,minWidth:IB}}),Hz=(0,WT.Ay)(rM)({"&:first-of-type":{padding:0}});function qz(e){const{children:t,onDismiss:n,open:r,slots:i,slotProps:o}=e,a=i?.dialog??zz,s=i?.mobileTransition??HC;return(0,Ve.jsx)(a,(0,De.A)({open:r,onClose:n},o?.dialog,{TransitionComponent:s,TransitionProps:o?.mobileTransition,PaperComponent:i?.mobilePaper,PaperProps:o?.mobilePaper,children:(0,Ve.jsx)(Hz,{children:t})}))}const Gz=["props","getOpenDialogAriaText"],Kz=t.forwardRef((function(e,n){const r=nF(),i=Kj(),o=lF(e,"MuiMobileDatePicker"),a=(0,De.A)({day:Vz,month:Vz,year:Vz},o.viewRenderers),s=(0,De.A)({},o,{viewRenderers:a,format:uj(i,o,!1),slots:(0,De.A)({field:mW},o.slots),slotProps:(0,De.A)({},o.slotProps,{field:e=>(0,De.A)({},g_(o.slotProps?.field,e),pF(o),{ref:n}),toolbar:(0,De.A)({hidden:!1},o.slotProps?.toolbar)})}),{renderPicker:l}=(e=>{let{props:n,getOpenDialogAriaText:r}=e,i=(0,Le.A)(e,Gz);const{slots:o,slotProps:a,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:m,name:f,label:g,inputRef:v,readOnly:y,disabled:b,localeText:w}=n,x=t.useRef(null),E=(0,jR.A)(),A=a?.toolbar?.hidden??!1,{open:S,actions:T,layoutProps:_,renderCurrentView:k,fieldProps:C,contextValue:I}=fB((0,De.A)({},i,{props:n,fieldRef:x,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),R=o.field,D=kk({elementType:R,externalSlotProps:a?.field,additionalProps:(0,De.A)({},C,A&&{id:E},!(b||y)&&{onClick:T.onOpen,onKeyDown:(L=T.onOpen,e=>{"Enter"!==e.key&&" "!==e.key||(L(e),e.preventDefault(),e.stopPropagation()),P&&P(e)})},{readOnly:y??!0,disabled:b,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:m,label:g,name:f},v?{inputRef:v}:{}),ownerState:n});var L,P;D.inputProps=(0,De.A)({},D.inputProps,{"aria-label":r(C.value)});const M=(0,De.A)({textField:o.textField},D.slots),O=o.layout??NB;let N=E;A&&(N=g?`${E}-label`:void 0);const j=(0,De.A)({},a,{toolbar:(0,De.A)({},a?.toolbar,{titleId:E}),mobilePaper:(0,De.A)({"aria-labelledby":N},a?.mobilePaper)}),F=(0,p_.A)(x,D.unstableFieldRef);return{renderPicker:()=>(0,Ve.jsxs)(FB,{contextValue:I,localeText:w,children:[(0,Ve.jsx)(R,(0,De.A)({},D,{slots:M,slotProps:j,unstableFieldRef:F})),(0,Ve.jsx)(qz,(0,De.A)({},T,{open:S,slots:o,slotProps:j,children:(0,Ve.jsx)(O,(0,De.A)({},_,j?.layout,{slots:o,slotProps:j,children:k()}))}))]})}})({props:s,valueManager:Fj,valueType:"date",getOpenDialogAriaText:Wj({utils:i,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:s.localeText?.openDatePickerDialogue}),validator:mF});return l()}));Kz.propTypes={autoFocus:ej().bool,className:ej().string,closeOnSelect:ej().bool,dayOfWeekFormatter:ej().func,defaultValue:ej().object,disabled:ej().bool,disableFuture:ej().bool,disableHighlightToday:ej().bool,disableOpenPicker:ej().bool,disablePast:ej().bool,displayWeekNumber:ej().bool,enableAccessibleFieldDOMStructure:ej().any,fixedWeekNumber:ej().number,format:ej().string,formatDensity:ej().oneOf(["dense","spacious"]),inputRef:tj,label:ej().node,loading:ej().bool,localeText:ej().object,maxDate:ej().object,minDate:ej().object,monthsPerRow:ej().oneOf([3,4]),name:ej().string,onAccept:ej().func,onChange:ej().func,onClose:ej().func,onError:ej().func,onMonthChange:ej().func,onOpen:ej().func,onSelectedSectionsChange:ej().func,onViewChange:ej().func,onYearChange:ej().func,open:ej().bool,openTo:ej().oneOf(["day","month","year"]),orientation:ej().oneOf(["landscape","portrait"]),readOnly:ej().bool,reduceAnimations:ej().bool,referenceDate:ej().object,renderLoading:ej().func,selectedSections:ej().oneOfType([ej().oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ej().number]),shouldDisableDate:ej().func,shouldDisableMonth:ej().func,shouldDisableYear:ej().func,showDaysOutsideCurrentMonth:ej().bool,slotProps:ej().object,slots:ej().object,sx:ej().oneOfType([ej().arrayOf(ej().oneOfType([ej().func,ej().object,ej().bool])),ej().func,ej().object]),timezone:ej().string,value:ej().object,view:ej().oneOf(["day","month","year"]),viewRenderers:ej().shape({day:ej().func,month:ej().func,year:ej().func}),views:ej().arrayOf(ej().oneOf(["day","month","year"]).isRequired),yearsOrder:ej().oneOf(["asc","desc"]),yearsPerRow:ej().oneOf([3,4])};const Yz=["desktopModeMediaQuery"],Xz=t.forwardRef((function(e,t){const n=JN({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:r=qU}=n,i=(0,Le.A)(n,Yz);return QN(r,{defaultMatches:!0})?(0,Ve.jsx)(Wz,(0,De.A)({ref:t},i)):(0,Ve.jsx)(Kz,(0,De.A)({ref:t},i))})),Qz=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),Jz=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),Zz=()=>{const[e,n]=(0,t.useState)({username:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",name:""}),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)({}),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),p=J(),{register:m}=xT(),f=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r}))),o[t]&&a((e=>({...e,[t]:void 0})))};return s?(0,Ve.jsx)(DP,{maxWidth:"sm",children:(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(dP,{})})}):(0,Ve.jsx)(DP,{maxWidth:"sm",children:(0,Ve.jsx)(Qe,{sx:{mt:8},children:(0,Ve.jsxs)(JT,{elevation:0,sx:{p:4},children:[(0,Ve.jsx)(N_,{variant:"h4",gutterBottom:!0,align:"center",children:"Create Account"}),(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Join SideEye and start sharing your thoughts with the community"}),d&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:d}),(0,Ve.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(null),(()=>{const t={};if(e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",e.password){const n=e.password;n.length<8?t.password="Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?/[!@#$%^&*(),.?":{}|<>]/.test(n)||(t.password="Password must contain at least one special character"):t.password="Password must contain at least one number":t.password="Password must contain at least one lowercase letter":t.password="Password must contain at least one uppercase letter"}else t.password="Password is required";if(e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),e.username?e.username.length<3?t.username="Username must be at least 3 characters long":/^[a-zA-Z0-9_-]+$/.test(e.username)||(t.username="Username can only contain letters, numbers, underscores, and hyphens"):t.username="Username is required",e.name?e.name.length<2?t.name="Name must be at least 2 characters long":/^[a-zA-Z\s-']+$/.test(e.name)||(t.name="Name can only contain letters, spaces, hyphens, and apostrophes"):t.name="Name is required",r){const e=new Date;let n=e.getFullYear()-r.getFullYear();const i=e.getMonth()-r.getMonth();(i<0||0===i&&e.getDate()<r.getDate())&&n--,n<16?t.dateOfBirth="You must be at least 16 years old":n>120&&(t.dateOfBirth="Please enter a valid date of birth")}else t.dateOfBirth="Date of birth is required";return a(t),0===Object.keys(t).length})())try{if(l(!0),!r||isNaN(r.getTime()))throw new Error("Invalid date of birth");await m(e.email,e.password,e.username,nl.fromDate(r)),p("/verify-email",{replace:!0})}catch(d){console.error("Registration error:",d),"auth/email-already-in-use"===d.code?h("Email is already in use"):"auth/weak-password"===d.code?h("Password is too weak"):"Invalid date of birth"===d.message?h("Please enter a valid date of birth"):h(d.message||"Error creating account. Please try again.")}finally{l(!1)}},children:[(0,Ve.jsx)(XL,{fullWidth:!0,label:"Full Name",name:"name",value:e.name,onChange:f,margin:"normal",required:!0,error:!!o.name,helperText:o.name}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:f,margin:"normal",required:!0,error:!!o.username,helperText:o.username}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:f,margin:"normal",required:!0,error:!!o.email,helperText:o.email}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:e.password,onChange:f,margin:"normal",required:!0,error:!!o.password,helperText:o.password,InputProps:{endAdornment:(0,Ve.jsx)(GN,{position:"end",children:(0,Ve.jsx)(Sk,{onClick:()=>u(!c),edge:"end",children:c?(0,Ve.jsx)(Qz,{}):(0,Ve.jsx)(Jz,{})})})}}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:c?"text":"password",value:e.confirmPassword,onChange:f,margin:"normal",required:!0,error:!!o.confirmPassword,helperText:o.confirmPassword}),(0,Ve.jsx)(Xz,{label:"Date of Birth",value:r,onChange:e=>{i(e),e&&!isNaN(e.getTime())?n((t=>({...t,dateOfBirth:e.toISOString()}))):n((e=>({...e,dateOfBirth:""}))),o.dateOfBirth&&a((e=>({...e,dateOfBirth:void 0})))},slotProps:{textField:{margin:"normal",required:!0,fullWidth:!0,error:!!o.dateOfBirth,helperText:o.dateOfBirth}},disableFuture:!0,maxDate:new Date}),(0,Ve.jsx)(Kk,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Create Account"}),(0,Ve.jsxs)(N_,{variant:"body2",sx:{mt:2},align:"center",children:["Already have an account? ",(0,Ve.jsx)(Ce,{to:"/login",children:"Log in"})]})]})]})})})},eH=()=>{const{resetPassword:e}=xT(),[n,r]=(J(),(0,t.useState)("")),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null);return(0,Ve.jsx)(DP,{maxWidth:"xs",children:(0,Ve.jsxs)(JT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Password"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your email address and we'll send you a link to reset your password."}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),o(!0),s(null),c(null),!n)return s("Email is required."),void o(!1);try{await e(n),c("Password reset email sent. Please check your inbox.")}catch(r){console.error("Error sending password reset email:",r),s("Failed to send reset email. Please check the address and try again.")}finally{o(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(XL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:n,onChange:e=>r(e.target.value),autoFocus:!0}),a&&(0,Ve.jsx)(qP,{severity:"error",sx:{mt:2},children:a}),l&&(0,Ve.jsx)(qP,{severity:"success",sx:{mt:2},children:l}),(0,Ve.jsx)(Kk,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?(0,Ve.jsx)(dP,{size:24}):"Send Reset Link"}),(0,Ve.jsx)(Qe,{textAlign:"center",children:(0,Ve.jsx)(UN,{component:Ce,to:"/login",variant:"body2",children:"Back to Login"})})]})]})})};function tH(e){return(0,GT.Ay)("MuiDrawer",e)}(0,Ge.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const nH=["BackdropProps"],rH=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],iH=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},oH=(0,WT.Ay)(hI,{name:"MuiDrawer",slot:"Root",overridesResolver:iH})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),aH=(0,WT.Ay)("div",{shouldForwardProp:jk.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:iH})({flex:"0 0 auto"}),sH=(0,WT.Ay)(JT,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${(0,zT.A)(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${(0,zT.A)(n.anchor)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})})),lH={left:"right",right:"left",top:"down",bottom:"up"};const cH=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiDrawer"}),i=TC(),o=LT(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:l,children:c,className:u,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:p}={},onClose:m,open:f=!1,PaperProps:g={},SlideProps:v,TransitionComponent:y=fR,transitionDuration:b=a,variant:w="temporary"}=r,x=(0,Le.A)(r.ModalProps,nH),E=(0,Le.A)(r,rH),A=t.useRef(!1);t.useEffect((()=>{A.current=!0}),[]);const S=function(e,t){let{direction:n}=e;return"rtl"===n&&function(e){return-1!==["left","right"].indexOf(e)}(t)?lH[t]:t}({direction:o?"rtl":"ltr"},s),T=s,_=(0,De.A)({},r,{anchor:T,elevation:d,open:f,variant:w},E),k=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,zT.A)(n)}`,"temporary"!==r&&`paperAnchorDocked${(0,zT.A)(n)}`]};return(0,VT.A)(i,tH,t)})(_),C=(0,Ve.jsx)(sH,(0,De.A)({elevation:"temporary"===w?d:0,square:!0},g,{className:(0,Pe.A)(k.paper,g.className),ownerState:_,children:c}));if("permanent"===w)return(0,Ve.jsx)(aH,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:_,ref:n},E,{children:C}));const I=(0,Ve.jsx)(y,(0,De.A)({in:f,direction:lH[S],timeout:b,appear:A.current},v,{children:C}));return"persistent"===w?(0,Ve.jsx)(aH,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:_,ref:n},E,{children:I})):(0,Ve.jsx)(oH,(0,De.A)({BackdropProps:(0,De.A)({},l,p,{transitionDuration:b}),className:(0,Pe.A)(k.root,k.modal,u),open:f,ownerState:_,onClose:m,hideBackdrop:h,ref:n},E,x,{children:I}))})),uH=cH;function dH(e){return(0,GT.Ay)("MuiCard",e)}(0,Ge.A)("MuiCard",["root"]);const hH=["className","raised"],pH=(0,WT.Ay)(JT,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),mH=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,Le.A)(n,hH),a=(0,De.A)({},n,{raised:i}),s=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},dH,t)})(a);return(0,Ve.jsx)(pH,(0,De.A)({className:(0,Pe.A)(s.root,r),elevation:i?8:void 0,ref:t,ownerState:a},o))})),fH=mH;function gH(e){return(0,GT.Ay)("MuiCardMedia",e)}(0,Ge.A)("MuiCardMedia",["root","media","img"]);const vH=["children","className","component","image","src","style"],yH=(0,WT.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),bH=["video","audio","picture","iframe","img"],wH=["picture","img"],xH=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:a,src:s,style:l}=n,c=(0,Le.A)(n,vH),u=-1!==bH.indexOf(o),d=!u&&a?(0,De.A)({backgroundImage:`url("${a}")`},l):l,h=(0,De.A)({},n,{component:o,isMediaComponent:u,isImageComponent:-1!==wH.indexOf(o)}),p=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,VT.A)(i,gH,t)})(h);return(0,Ve.jsx)(yH,(0,De.A)({className:(0,Pe.A)(p.root,i),as:o,role:!u&&a?"img":void 0,ref:t,style:d,ownerState:h,src:u?a||s:void 0},c,{children:r}))})),EH=xH;function AH(e){return(0,GT.Ay)("MuiCardContent",e)}(0,Ge.A)("MuiCardContent",["root"]);const SH=["className","component"],TH=(0,WT.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),_H=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,Le.A)(n,SH),a=(0,De.A)({},n,{component:i}),s=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},AH,t)})(a);return(0,Ve.jsx)(TH,(0,De.A)({as:i,className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),kH=_H;function CH(e){return(0,GT.Ay)("MuiCardActions",e)}(0,Ge.A)("MuiCardActions",["root","spacing"]);const IH=["disableSpacing","className"],RH=(0,WT.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),DH=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,o=(0,Le.A)(n,IH),a=(0,De.A)({},n,{disableSpacing:r}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,VT.A)(r,CH,t)})(a);return(0,Ve.jsx)(RH,(0,De.A)({className:(0,Pe.A)(s.root,i),ownerState:a,ref:t},o))})),LH=DH,PH=(0,u_.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),MH=(0,u_.A)((0,Ve.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove"),OH=(0,u_.A)((0,Ve.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),NH=(0,u_.A)((0,Ve.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),jH=(0,u_.A)((0,Ve.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment"),FH=(0,u_.A)((0,Ve.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat"),UH=(0,u_.A)((0,Ve.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),BH=(0,u_.A)((0,Ve.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),$H=(0,u_.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group");function VH(e){const{children:t,value:n,index:r,...i}=e;return(0,Ve.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`profile-tabpanel-${r}`,"aria-labelledby":`profile-tab-${r}`,...i,children:n===r&&(0,Ve.jsx)(Qe,{sx:{p:3},children:t})})}const WH=e=>{let{open:n,onClose:r,followers:i,followersList:o,followingList:a,connections:s,currentUser:l,isLoading:c,handleUnfollow:u,handleFollow:d,initialTab:h}=e;const[p,m]=(0,t.useState)(h);return(0,t.useEffect)((()=>{m(h)}),[h,n]),(0,Ve.jsxs)(GR,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:(0,Ve.jsxs)(nO,{value:p,onChange:(e,t)=>m(t),variant:"fullWidth",children:[(0,Ve.jsx)(lO,{label:`Followers (${i.length})`}),(0,Ve.jsx)(lO,{label:`Following (${s.length})`})]})}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(tC,{children:0===p?o.length>0?o.map((e=>(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(N_,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(TR,{children:(0,Ve.jsx)(Kk,{variant:s.includes(e.id)?"outlined":"contained",color:s.includes(e.id)?"error":"primary",onClick:t=>{t.stopPropagation(),s.includes(e.id)?u(e.id):d()},disabled:c,size:"small",children:c?"Loading...":s.includes(e.id)?"Unfollow":"Follow"})})]},e.id))):(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No followers yet"}):a.length>0?a.map((e=>(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(N_,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(TR,{children:(0,Ve.jsx)(Kk,{variant:"outlined",color:"error",onClick:t=>{t.stopPropagation(),u(e.id)},disabled:c,size:"small",children:c?"Loading...":"Unfollow"})})]},e.id))):(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"Not following anyone yet"})})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:r,children:"Close"})})]})},zH=()=>{var e,n,r,i;QN(TC().breakpoints.down("sm"));const{currentUser:o,user:a,userProfile:s,loading:l,setUserProfile:c}=xT(),{db:u}=sN(),{userId:d}=Z(),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(""),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[w,x]=(0,t.useState)(""),[E,A]=(0,t.useState)(!1),[S,T]=(0,t.useState)(0),[_,k]=(0,t.useState)([]),[C,I]=(0,t.useState)([]),[R,D]=(0,t.useState)([]),[L,P]=(0,t.useState)([]),[M,O]=(0,t.useState)(!0),[N,j]=(0,t.useState)(null),[F,U]=(0,t.useState)([]),[B,$]=(0,t.useState)([]),[V,W]=(0,t.useState)(!1),[z,H]=(0,t.useState)(null),[q,G]=(0,t.useState)(!1),[K,Y]=(0,t.useState)([]),[X,Q]=(0,t.useState)(""),[J,ee]=(0,t.useState)(0),[te,ne]=(0,t.useState)([]),[re,ie]=(0,t.useState)(!1),oe=(0,t.useRef)(null),[ae,se]=(0,t.useState)([]),[le,ce]=(0,t.useState)([]),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(""),[me,fe]=(0,t.useState)(""),[ge,ve]=(0,t.useState)(""),[ye,be]=(0,t.useState)(!1),[we,xe]=(0,t.useState)(!1),[Ee,Ae]=(0,t.useState)(!1),[Se,Te]=(0,t.useState)(null),[_e,ke]=(0,t.useState)(null),[Ie,Re]=(0,t.useState)(!1),[De,Le]=(0,t.useState)(0),[Pe,Me]=(0,t.useState)(!1),[Oe,Ne]=(0,t.useState)(!1),[je,Fe]=(0,t.useState)(!1),[Ue,Be]=(0,t.useState)([]),[$e,We]=(0,t.useState)(null),[ze,He]=(0,t.useState)(""),[qe,Ge]=(0,t.useState)(!1),[Ke,Ye]=(0,t.useState)(!1),[Xe,Je]=(0,t.useState)(!1),[Ze,et]=(0,t.useState)(!1),[tt,nt]=(0,t.useState)([]),[rt,it]=(0,t.useState)(null),[ot,at]=(0,t.useState)([]),[st,lt]=(0,t.useState)([]),[ct,ut]=(0,t.useState)([]),dt=h||(null===o||void 0===o?void 0:o.uid)||"";(0,t.useEffect)((()=>{p(d||((null===o||void 0===o?void 0:o.uid)||null))}),[d,null===o||void 0===o?void 0:o.uid]);const ht=(0,t.useCallback)((async()=>{if(u&&h)try{O(!0),j(null);const e=Zf(u,"users",h),t=await lv(e);if(!t.exists())return j("Profile not found"),void O(!1);const n=t.data(),r=n.isPrivate||!1,i=(null===o||void 0===o?void 0:o.uid)===h;if(Me(r),it(n),f(n.username||""),v(n.name||""),x(n.bio||""),H(n.profilePic||null),i||!r)Fe(!0),j(null);else if(null!==o&&void 0!==o&&o.uid){const e=Zf(u,`users/${h}/followers/${o.uid}`),t=(await lv(e)).exists();Fe(t),t||j("This profile is private")}else Fe(!1),j("This profile is private");const[a,s]=await Promise.all([uv(Jf(u,`users/${h}/followers`)),uv(Jf(u,`users/${h}/following`))]),l=a.docs.map((e=>e.id)),c=s.docs.map((e=>e.id));if($(l),at(c),U(c),je){const[e,t]=await Promise.all([Promise.all(l.map((e=>lv(Zf(u,"users",e))))),Promise.all(c.map((e=>lv(Zf(u,"users",e)))))]);se(e.map((e=>({id:e.id,...e.data()})))),ce(t.map((e=>({id:e.id,...e.data()}))));const[n,r,i]=await Promise.all([uv(Wg(Jf(u,"posts"),Hg("authorId","==",h),Kg("timestamp","desc"))),uv(Wg(Jf(u,"posts"),Hg("likedBy","array-contains",h),Kg("timestamp","desc"))),uv(Wg(Jf(u,"videos"),Hg("userId","==",h),Kg("timestamp","desc")))]);k(n.docs.map((e=>({id:e.id,...e.data()})))),P(r.docs.map((e=>({id:e.id,...e.data()})))),Be(i.docs.map((e=>({id:e.id,...e.data()}))))}}catch(N){console.error("Error in fetchUserData:",N),j("Failed to load profile data")}finally{O(!1)}else O(!1)}),[u,h,null===o||void 0===o?void 0:o.uid,je]);(0,t.useEffect)((()=>{if(!u||!h)return;const e=fv(Zf(u,"users",h),(async e=>{if(e.exists()){const t=e.data(),n=t.isPrivate||!1,r=(null===o||void 0===o?void 0:o.uid)===h;if(it(t),Me(n),f(t.username||""),v(t.name||""),x(t.bio||""),H(t.profilePic||null),r||!n)Fe(!0),j(null);else if(null!==o&&void 0!==o&&o.uid){const e=Zf(u,`users/${h}/followers/${o.uid}`),t=(await lv(e)).exists();Fe(t),t||j("This profile is private")}else Fe(!1),j("This profile is private");if(!n&&Xe)try{if(null!==o&&void 0!==o&&o.uid){const e=Zf(u,"users",h,"followRequests",o.uid);await pv(e),Je(!1)}}catch(N){console.error("Error clearing follow request:",N)}}}),(e=>{console.error("Error in privacy settings listener:",e),j("Failed to sync privacy settings")}));return()=>e()}),[u,h,null===o||void 0===o?void 0:o.uid,Xe]),(0,t.useEffect)((()=>{h&&ht()}),[ht,h]),(0,t.useEffect)((()=>{s&&(pe(s.name||""),fe(s.bio||""),ve(s.username||""))}),[s]),(0,t.useEffect)((()=>{be(!(null===o||void 0===o||!o.uid)&&B.includes(o.uid))}),[o,B]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h&&Pe){const e=async()=>{if(u)try{const e=Zf(u,"users",h,"followRequests",o.uid),t=await lv(e);Je(t.exists())}catch(N){console.error("Error checking follow request:",N)}};if(e(),u){const e=fv(Zf(u,"users",h,"followRequests",o.uid),(e=>{Je(e.exists())}));return()=>e()}}}),[null===o||void 0===o?void 0:o.uid,h,Pe,u]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h&&o.uid===h){const e=async()=>{if(u)try{const e=Jf(u,"users",h,"followRequests"),t=(await uv(e)).docs.map((e=>e.id));nt(t)}catch(N){console.error("Error fetching pending requests:",N)}};e()}}),[null===o||void 0===o?void 0:o.uid,h,u]);const pt=async()=>{if(u&&o&&h)try{if(Pe){const e=Zf(u,"users",h,"followRequests",o.uid);await dv(e,{timestamp:Sv()});const t=Zf(Jf(u,"users",h,"notifications"));await dv(t,{type:"follow_request",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",timestamp:Sv(),read:!1}),Je(!0)}else{const e=Zf(u,"users",o.uid,"following",h),t=Zf(u,"users",h,"followers",o.uid);await dv(e,{timestamp:Sv()}),await dv(t,{timestamp:Sv()}),be(!0)}}catch(N){console.error("Error handling follow:",N),j("Failed to process follow request")}},mt=async e=>{if(!o||!dt||!u)return void j("Database not initialized");const t=e||dt;try{O(!0);const e=Zf(u,"users",o.uid,"following",t);await pv(e);const n=Zf(u,"users",t,"followers",o.uid);await pv(n),be(!1),$((e=>e.filter((e=>e!==o.uid)))),at((e=>e.filter((e=>e!==t)))),await ht()}catch(N){console.error("Error unfollowing user:",N),j("Failed to unfollow user")}finally{O(!1)}};(0,t.useEffect)((()=>{if(!u||!dt)return;const e=fv(Jf(u,"users",dt,"followers"),(e=>{const t=e.docs.map((e=>e.id));$(t)}));return()=>e()}),[u,dt]),(0,t.useEffect)((()=>{if(!u||!dt)return;const e=fv(Jf(u,"users",dt,"following"),(e=>{const t=e.docs.map((e=>e.id));U(t)}));return()=>e()}),[u,dt]),(0,t.useEffect)((()=>{if(!u||!o||!dt)return;const e=fv(Zf(u,"users",o.uid,"following",dt),(e=>{be(e.exists())}));return()=>e()}),[u,o,dt]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h){const e=async()=>{if(u)try{const e=Zf(u,"users",h,"followers",o.uid),t=await lv(e);Fe(t.exists()||o.uid===h)}catch(N){console.error("Error checking profile visibility:",N)}};e()}}),[null===o||void 0===o?void 0:o.uid,h,u]);const ft=()=>(null===o||void 0===o?void 0:o.uid)!==h&&h?(0,Ve.jsx)(Kk,{variant:ye?"outlined":"contained",color:ye?"error":"primary",startIcon:ye?(0,Ve.jsx)(MH,{}):(0,Ve.jsx)(OH,{}),onClick:ye?()=>mt(h):pt,disabled:M||Pe&&Xe,children:M?"Loading...":ye?"Unfollow":Pe&&Xe?"Requested":"Follow"}):null,gt=async()=>{if(o&&dt&&X.trim()&&!ue&&u)try{de(!0);const e={senderId:o.uid,receiverId:dt,content:X.trim(),timestamp:Sv(),read:!1,senderName:o.displayName||"Anonymous",senderAvatar:(null===s||void 0===s?void 0:s.profilePic)||null};await mv(Jf(u,"messages"),e),Q("")}catch(N){console.error("Error sending message:",N),j("Failed to send message")}finally{de(!1)}else j("Database not initialized")},vt=async e=>{if(o&&u)try{const t=Zf(u,"messages",e);await hv(t,{read:!0})}catch(N){console.error("Error marking message as read:",N)}else j("Database not initialized")};(0,t.useEffect)((()=>{if(q){const e=(async()=>{if(GA.currentUser&&dt&&u)try{const e=fv(Wg(Jf(u,"messages"),Hg("receiverId","==",GA.currentUser.uid),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));Y(t),ee(t.filter((e=>!e.read)).length)}));return e}catch(N){console.error("Error fetching messages:",N)}else j("Database not initialized")})();return()=>{e&&e.then((e=>null===e||void 0===e?void 0:e()))}}}),[q]);const yt=async e=>{if(o&&u)try{var t;const n=Zf(u,"posts",e),r=await lv(n);if(!r.exists())throw new Error("Post not found");const i=r.data();if(null===(t=i.likedBy)||void 0===t?void 0:t.includes(o.uid))await hv(n,{likedBy:_v(o.uid)});else if(await hv(n,{likedBy:Tv(o.uid)}),i.authorId!==o.uid){const t={type:"like",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,content:`${o.displayName||"Someone"} liked your post`,createdAt:Sv(),isRead:!1};await mv(Jf(u,"users",i.authorId,"notifications"),t)}}catch(N){console.error("Error toggling like:",N),wS.error("Failed to update like")}},bt=async e=>{if(o&&u)try{var t;const n=Zf(u,"posts",e),r=await lv(n);if(!r.exists())throw new Error("Post not found");const i=r.data();if(null===(t=i.repostedBy)||void 0===t?void 0:t.includes(o.uid))await hv(n,{repostedBy:_v(o.uid),reposts:kv(-1)});else if(await hv(n,{repostedBy:Tv(o.uid),reposts:kv(1)}),i.authorId!==o.uid){const t={type:"repost",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,content:`${o.displayName||"Someone"} reposted your post`,createdAt:Sv(),isRead:!1};await mv(Jf(u,"users",i.authorId,"notifications"),t)}}catch(N){console.error("Error toggling repost:",N),wS.error("Failed to update repost")}},wt=()=>{var e;return(0,Ve.jsx)(uH,{anchor:"bottom",open:Ke,onClose:()=>Ye(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16,overflow:"hidden","@media (max-width: 600px)":{height:"90vh"}}},children:(0,Ve.jsxs)(Qe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(N_,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(Sk,{onClick:()=>Ye(!1),children:(0,Ve.jsx)(iM,{})})]}),$e&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Qe,{sx:{mb:2},children:(0,Ve.jsx)("video",{src:$e.url,style:{width:"100%",maxHeight:"200px",objectFit:"contain",backgroundColor:"black"},controls:!0,playsInline:!0,muted:!0})}),(0,Ve.jsx)(tC,{sx:{flex:1,overflow:"auto",mb:2},children:null===(e=$e.commentsList)||void 0===e?void 0:e.map((e=>{var t,n;return(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{children:e.username[0]})}),(0,Ve.jsx)(eR,{primary:e.username,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(N_,{variant:"body2",children:e.content}),(0,Ve.jsxs)(N_,{variant:"caption",color:"text.secondary",children:[rN((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]})})]},e.id)}))}),(0,Ve.jsx)(Qe,{sx:{mt:"auto"},children:(0,Ve.jsx)(XL,{fullWidth:!0,size:"small",placeholder:"Add a comment...",value:ze,onChange:e=>He(e.target.value),InputProps:{endAdornment:(0,Ve.jsx)(Kk,{size:"small",onClick:()=>$e&&(async(e,t)=>{if(o&&t.trim()&&u)try{const n=Zf(u,"posts",e),r=await lv(n);if(!r.exists())throw new Error("Post not found");const i=r.data(),a=await mv(Jf(u,`posts/${e}/comments`),{content:t.trim(),userId:o.uid,username:o.displayName||"Anonymous",userPhotoURL:o.photoURL||"",timestamp:Sv()});if(await hv(n,{comments:kv(1)}),i.authorId!==o.uid){const n={type:"comment",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,commentId:a.id,content:`${o.displayName||"Someone"} commented on your post: "${t.trim()}"`,createdAt:Sv(),isRead:!1};await mv(Jf(u,"users",i.authorId,"notifications"),n)}const s=/@(\w+)/g,l=t.match(s);if(l)for(const c of l){const n=c.substring(1),r=Wg(Jf(u,"users"),Hg("username","==",n),Xg(1)),s=await uv(r);if(!s.empty){const n=s.docs[0];if(n.id!==o.uid&&n.id!==i.authorId){const r={type:"mention",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:n.id,postId:e,commentId:a.id,content:`${o.displayName||"Someone"} mentioned you in a comment: "${t.trim()}"`,createdAt:Sv(),isRead:!1};await mv(Jf(u,"users",n.id,"notifications"),r)}}}}catch(N){console.error("Error adding comment:",N),wS.error("Failed to add comment")}})($e.id,ze),disabled:!ze.trim()||qe,children:"Post"})}})})]})]})})},xt=()=>{ke(null)};return(0,t.useEffect)((()=>{if(u&&h)try{O(!0),j(null);const e=Wg(Jf(u,"users",h,"sideRooms"),Kg("lastActive","desc")),t=Wg(Jf(u,"sideRooms"),Hg("ownerId","==",h)),n=fv(e,(e=>{const t=e.docs.map((e=>{var t,n;return{id:e.id,...e.data(),joinedAt:null===(t=e.data().joinedAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate()}}));lt(t)}),(e=>{console.error("Error fetching joined rooms:",e)})),r=fv(t,(e=>{const t=e.docs.map((e=>{var t,n,r;return{id:e.id,roomId:e.id,name:e.data().name,description:e.data().description,memberCount:e.data().memberCount,isPrivate:e.data().isPrivate,category:e.data().category,role:"owner",joinedAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate(),isOwner:!0,thumbnailUrl:(null===(r=e.data().style)||void 0===r?void 0:r.thumbnailUrl)||null}}));ut(t)}),(e=>{console.error("Error fetching created rooms:",e)}));return()=>{n(),r()}}catch(N){console.error("Error setting up rooms listeners:",N),j("Failed to set up rooms listeners")}finally{O(!1)}else O(!1)}),[u,h]),l||M?(0,Ve.jsx)(DP,{maxWidth:"lg",children:(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(dP,{})})}):(0,Ve.jsxs)(DP,{maxWidth:"lg",sx:{mt:2,mb:4},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,Ve.jsx)(JT,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,alignItems:"center"},children:[(0,Ve.jsx)(Qe,{sx:{position:"relative"},children:(0,Ve.jsx)(Ok,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(null===o||void 0===o?void 0:o.uid)===h&&(0,Ve.jsx)(Sk,{component:"label",size:"small",onClick:e=>{ke(e.currentTarget)},sx:{bgcolor:"background.paper","&:hover":{bgcolor:"background.default"}},children:(0,Ve.jsx)(aM,{fontSize:"small"})}),children:(0,Ve.jsx)(I_,{src:z||void 0,alt:m,sx:{width:120,height:120}})})}),(0,Ve.jsxs)(Qe,{sx:{flex:1,minWidth:0},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,Ve.jsx)(N_,{variant:"h4",sx:{fontWeight:"bold"},children:g||"No name set"}),Pe&&(0,Ve.jsx)(UH,{color:"action"}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(Sk,{onClick:()=>A(!0),size:"small",children:(0,Ve.jsx)(BH,{fontSize:"small"})})]}),(0,Ve.jsxs)(N_,{variant:"body1",color:"text.secondary",sx:{mb:2},children:["@",m||"No username set"]}),Pe&&!je&&(null===o||void 0===o?void 0:o.uid)!==dt?(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(qP,{severity:"info",sx:{mb:2},children:"This account is private. Follow to see their posts and other content."}),(0,Ve.jsx)(Qe,{sx:{display:"flex",gap:2},children:ft()})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mb:2},children:w||"No bio set"}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[ft(),dt?(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{G(!0),K.forEach((e=>{e.read||vt(e.id)}))},sx:{border:"1px solid",borderColor:"primary.main","&:hover":{backgroundColor:"primary.light",opacity:.8},width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ve.jsx)(Ok,{badgeContent:J,color:"error",children:(0,Ve.jsx)(PH,{})})}):null,(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(Sk,{color:"error",onClick:()=>xe(!0),sx:{border:"1px solid",borderColor:"error.main","&:hover":{backgroundColor:"error.light",opacity:.8}},children:(0,Ve.jsx)(oM,{})})]})]})]})]})}),!Pe||je||(null===o||void 0===o?void 0:o.uid)===dt?(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[(0,Ve.jsx)(JT,{elevation:0,sx:{p:2,borderRadius:2,backgroundColor:"background.paper",flex:{md:1}},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Qe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h6",children:_.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{ht(),Le(0),W(!0)},children:[(0,Ve.jsx)(N_,{variant:"h6",children:B.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{ht(),Le(1),W(!0)},children:[(0,Ve.jsx)(N_,{variant:"h6",children:ot.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsx)(WH,{open:V,onClose:()=>W(!1),followers:B,followersList:ae,followingList:le,connections:F,currentUser:o,isLoading:M,handleUnfollow:mt,handleFollow:pt,initialTab:De}),(0,Ve.jsx)(Qe,{sx:{flex:{md:2}},children:(0,Ve.jsx)(JT,{elevation:0,sx:{borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(nO,{value:S,onChange:(e,t)=>{T(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:"medium"}},children:[(0,Ve.jsx)(lO,{label:"Posts"}),(0,Ve.jsx)(lO,{label:"Vibits"}),(0,Ve.jsx)(lO,{label:"Side Rooms"}),(0,Ve.jsx)(lO,{label:"Liked Posts"}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(lO,{label:"Deleted Items"})]})})})]}):(0,Ve.jsx)(JT,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Qe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h6",children:_.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Qe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h6",children:B.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Qe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h6",children:ot.length||0}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsxs)(Qe,{sx:{flex:1},children:[(0,Ve.jsx)(VH,{value:S,index:0,children:je?0===_.length?(0,Ve.jsx)(N_,{children:"No posts yet"}):(0,Ve.jsx)(tC,{children:_.map((e=>{var t,n,r,i;return(0,Ve.jsxs)(DR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{Te(e),Ae(!0)},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(N_,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[rN((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]}),secondary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(TR,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),yt(e.id)},children:[(0,Ve.jsx)(NH,{color:null!==(r=e.likedBy)&&void 0!==r&&r.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),bt(e.id)},children:[(0,Ve.jsx)(FH,{color:null!==(i=e.repostedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(UH,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(N_,{variant:"h6",color:"text.secondary",children:"This account's posts are private"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their posts"})]})}),(0,Ve.jsx)(VH,{value:S,index:1,children:je?0===Ue.length?(0,Ve.jsx)(N_,{children:"No videos uploaded yet"}):(0,Ve.jsx)(Qe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2},children:Ue.map((e=>(0,Ve.jsxs)(fH,{sx:{position:"relative"},children:[(0,Ve.jsx)(EH,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)(kH,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(NH,{fontSize:"small",color:"action"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:e.likes}),(0,Ve.jsxs)(Sk,{size:"small",onClick:t=>{t.stopPropagation(),(e=>{We(e),Ye(!0)})(e)},children:[(0,Ve.jsx)(jH,{fontSize:"small",color:"action"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:e.comments})]})]})})]},e.id)))}):(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(UH,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(N_,{variant:"h6",color:"text.secondary",children:"This account's videos are private"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their videos"})]})}),(0,Ve.jsx)(VH,{value:S,index:2,children:je?0===ct.length&&0===st.length?(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"Not a member of any side rooms yet"}),(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",component:Ce,to:"/side-rooms",sx:{mt:2},children:"Browse Side Rooms"})]}):(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[ct.length>0&&(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",sx:{mb:2},children:"Created Rooms"}),(0,Ve.jsx)(Qe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:ct.map((e=>(0,Ve.jsxs)(fH,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(EH,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)(kH,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(N_,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(CB,{size:"small",label:"Owner",color:"primary"})]}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(CB,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)($H,{})}),e.category&&(0,Ve.jsx)(CB,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(CB,{size:"small",icon:(0,Ve.jsx)(UH,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(LH,{children:(0,Ve.jsx)(Kk,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]}),st.length>0&&(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",sx:{mb:2},children:"Joined Rooms"}),(0,Ve.jsx)(Qe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:st.map((e=>(0,Ve.jsxs)(fH,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(EH,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)(kH,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(N_,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(CB,{size:"small",label:"Member"})]}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(CB,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)($H,{})}),e.category&&(0,Ve.jsx)(CB,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(CB,{size:"small",icon:(0,Ve.jsx)(UH,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(LH,{children:(0,Ve.jsx)(Kk,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]})]}):(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(UH,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(N_,{variant:"h6",color:"text.secondary",children:"This account's side rooms are private"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their side rooms"})]})}),(0,Ve.jsx)(VH,{value:S,index:3,children:je?0===L.length?(0,Ve.jsx)(N_,{children:"No liked posts yet"}):(0,Ve.jsx)(tC,{children:L.map((e=>{var t,n,r,i;return(0,Ve.jsxs)(DR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{Te(e),Ae(!0)},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(I_,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(N_,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[rN((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]}),secondary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(TR,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),yt(e.id)},children:[(0,Ve.jsx)(NH,{color:null!==(r=e.likedBy)&&void 0!==r&&r.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(Sk,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),bt(e.id)},children:[(0,Ve.jsx)(FH,{color:null!==(i=e.repostedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Qe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(UH,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(N_,{variant:"h6",color:"text.secondary",children:"This account's liked posts are private"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their liked posts"})]})}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(VH,{value:S,index:4,children:0===te.length?(0,Ve.jsx)(N_,{children:"No deleted items"}):(0,Ve.jsx)(tC,{children:te.map((e=>(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",children:"post"===e.type?"Post":"room"===e.type?"Side Room":"Forum"}),(0,Ve.jsx)(N_,{variant:"body1",children:"post"===e.type?e.content.content:e.content.name})]}),secondary:`Deleted ${rN(e.deletedAt.toDate())} ago`}),(0,Ve.jsxs)(TR,{children:[(0,Ve.jsx)(Kk,{variant:"outlined",onClick:()=>(async(e,t)=>{if(u)try{const n=Zf(u,"deleted_items",e),r=await lv(n);if(!r.exists())return void j("Item not found in trash");const i=r.data(),o="post"===t?"posts":"room"===t?"sideRooms":"forums";await dv(Zf(u,o,e),{...i.content,deletedAt:null,scheduledForPermanentDeletion:null}),await pv(n),ne((t=>t.filter((t=>t.id!==e)))),j("Item restored successfully")}catch(N){console.error("Error restoring item:",N),j("Failed to restore item")}else j("Database not initialized")})(e.id,e.type),children:"Restore"}),(0,Ve.jsx)(Kk,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(u)try{await pv(Zf(u,"deleted_items",e)),ne((t=>t.filter((t=>t.id!==e)))),j("Item permanently deleted")}catch(N){console.error("Error permanently deleting item:",N),j("Failed to delete item permanently")}else j("Database not initialized")})(e.id),sx:{ml:1},children:"Delete Permanently"})]})]},e.id)))})})]})]}),(0,Ve.jsxs)(GR,{open:E,onClose:()=>A(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Edit Profile"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Ve.jsx)(XL,{label:"Name",value:he,onChange:e=>pe(e.target.value),fullWidth:!0,variant:"outlined"}),(0,Ve.jsx)(XL,{label:"Username",value:ge,onChange:e=>ve(e.target.value),fullWidth:!0,variant:"outlined",helperText:"This will be your unique identifier on the platform"}),(0,Ve.jsx)(XL,{label:"Bio",value:me,onChange:e=>fe(e.target.value),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",helperText:"Tell others about yourself (You can use emojis!)",InputProps:{endAdornment:(0,Ve.jsx)(Sk,{onClick:()=>{const e=window.prompt("Enter an emoji:");e&&fe((t=>t+e))},sx:{color:"primary.main","&:hover":{color:"primary.dark"}},children:(0,Ve.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\ude0a"})})}})]})}),(0,Ve.jsxs)(pO,{sx:{p:3},children:[(0,Ve.jsx)(Kk,{variant:"outlined",onClick:()=>A(!1),sx:{minWidth:"120px",borderColor:"text.secondary",color:"text.secondary","&:hover":{borderColor:"text.primary",color:"text.primary"}},children:"Cancel"}),(0,Ve.jsx)(Kk,{variant:"contained",onClick:async()=>{if(o&&u)try{const e=he.trim(),t=me.trim(),n=ge.trim();await hv(Zf(u,"users",o.uid),{name:e,bio:t,username:n}),v(e),x(t),f(n),A(!1),s&&c({...s,name:e,bio:t,username:n})}catch(N){console.error("Error saving profile:",N),j("Failed to save profile")}},disabled:M,sx:{minWidth:"120px",bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:M?"Saving...":"Save Changes"})]})]}),(0,Ve.jsxs)(GR,{open:q,onClose:()=>G(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:(null===o||void 0===o?void 0:o.uid)===dt?"Your Messages":`Message ${m}`}),(0,Ve.jsx)(rM,{children:(null===o||void 0===o?void 0:o.uid)===dt?(0,Ve.jsx)(tC,{children:K.map((e=>{var t;return(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.senderAvatar||void 0})}),(0,Ve.jsx)(eR,{primary:e.senderName,secondary:e.content}),(0,Ve.jsx)(TR,{children:(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString()})})]},e.id)}))}):(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(XL,{fullWidth:!0,multiline:!0,rows:4,label:"Your message",value:X,onChange:e=>Q(e.target.value),variant:"outlined",sx:{mb:2}}),(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,Ve.jsx)(Kk,{variant:"contained",onClick:gt,disabled:!X.trim()||ue,sx:{minWidth:"100px","@media (max-width: 600px)":{width:"100%"}},children:ue?"Sending...":"Send"})})]})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>G(!1),children:"Close"})})]}),(0,Ve.jsxs)(GR,{open:Ee,onClose:()=>Ae(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(I_,{src:(null===Se||void 0===Se?void 0:Se.authorAvatar)||void 0}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",children:null===Se||void 0===Se?void 0:Se.authorName}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:null===Se||void 0===Se||null===(e=Se.timestamp)||void 0===e||null===(n=e.toDate)||void 0===n||null===(r=n.call(e))||void 0===r?void 0:r.toLocaleString()})]})]})}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mt:2},children:null===Se||void 0===Se?void 0:Se.content}),(null===Se||void 0===Se?void 0:Se.isEdited)&&(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:"(edited)"})]}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsxs)(Sk,{children:[(0,Ve.jsx)(NH,{color:null!==Se&&void 0!==Se&&null!==(i=Se.likedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{ml:1},children:(null===Se||void 0===Se?void 0:Se.likes)||0})]}),(0,Ve.jsx)(Kk,{onClick:()=>Ae(!1),children:"Close"})]})]}),(0,Ve.jsxs)(MI,{anchorEl:_e,open:Boolean(_e),onClose:xt,children:[(0,Ve.jsx)(qI,{onClick:()=>{var e;xt(),null===(e=oe.current)||void 0===e||e.click()},children:"Change Profile Picture"}),(0,Ve.jsx)(qI,{onClick:()=>{xt(),Re(!0)},children:"Add to Story"})]}),(0,Ve.jsx)(wt,{}),(null===o||void 0===o?void 0:o.uid)!==h||0===tt.length?null:(0,Ve.jsxs)(Kk,{variant:"outlined",color:"primary",onClick:()=>et(!0),sx:{ml:2},children:["View Requests (",tt.length,")"]}),(0,Ve.jsxs)(GR,{open:Ze,onClose:()=>et(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Follow Requests"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(tC,{children:tt.length>0?tt.map((e=>(0,Ve.jsxs)(DR,{divider:!0,children:[(0,Ve.jsx)(eR,{primary:e}),(0,Ve.jsxs)(TR,{children:[(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(u&&h)try{const t=Zf(u,"users",h,"followRequests",e);await pv(t);const n=Zf(u,"users",e,"following",h),r=Zf(u,"users",h,"followers",e);await dv(n,{timestamp:Sv()}),await dv(r,{timestamp:Sv()}),nt((t=>t.filter((t=>t!==e))))}catch(N){console.error("Error accepting follow request:",N),j("Failed to accept follow request")}})(e),sx:{mr:1},children:"Accept"}),(0,Ve.jsx)(Kk,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(u&&h)try{const t=Zf(u,"users",h,"followRequests",e);await pv(t),nt((t=>t.filter((t=>t!==e))))}catch(N){console.error("Error rejecting follow request:",N),j("Failed to reject follow request")}})(e),children:"Reject"})]})]},e))):(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No pending follow requests"})})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>et(!1),children:"Close"})})]})]})};function HH(e){return(0,GT.Ay)("PrivateSwitchBase",e)}(0,Ge.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const qH=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],GH=(0,WT.Ay)(yk)((e=>{let{ownerState:t}=e;return(0,De.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),KH=(0,WT.Ay)("input",{shouldForwardProp:jk.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),YH=t.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:a,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:m,onBlur:f,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:w,type:x,value:E}=e,A=(0,Le.A)(e,qH),[S,T]=(0,SL.A)({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),_=oD();let k=s;_&&"undefined"===typeof k&&(k=_.disabled);const C="checkbox"===x||"radio"===x,I=(0,De.A)({},e,{checked:S,disabled:k,disableFocusRipple:l,edge:c}),R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,zT.A)(i)}`],input:["input"]};return(0,VT.A)(o,HH,t)})(I);return(0,Ve.jsxs)(GH,(0,De.A)({component:"span",className:(0,Pe.A)(R.root,o),centerRipple:!0,focusRipple:!l,disabled:k,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),_&&_.onFocus&&_.onFocus(e)},onBlur:e=>{f&&f(e),_&&_.onBlur&&_.onBlur(e)},ownerState:I,ref:t},A,{children:[(0,Ve.jsx)(KH,(0,De.A)({autoFocus:n,checked:r,defaultChecked:a,className:R.input,disabled:k,id:C?d:void 0,name:m,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;T(t),g&&g(e,t)},readOnly:y,ref:p,required:b,ownerState:I,tabIndex:w,type:x},"checkbox"===x&&void 0===E?{}:{value:E},h)),S?i:u]}))})),XH=YH;function QH(e){return(0,GT.Ay)("MuiSwitch",e)}const JH=(0,Ge.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ZH=["className","color","edge","size","sx"],eq=(0,WT.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,zT.A)(n.edge)}`],t[`size${(0,zT.A)(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${JH.thumb}`]:{width:16,height:16},[`& .${JH.switchBase}`]:{padding:4,[`&.${JH.checked}`]:{transform:"translateX(16px)"}}}}]}),tq=(0,WT.Ay)(XH,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${JH.input}`]:t.input},"default"!==n.color&&t[`color${(0,zT.A)(n.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${JH.checked}`]:{transform:"translateX(20px)"},[`&.${JH.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${JH.checked} + .${JH.track}`]:{opacity:.5},[`&.${JH.disabled} + .${JH.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${JH.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${JH.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${JH.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${"light"===t.palette.mode?(0,HT.a)(t.palette[n].main,.62):(0,HT.e$)(t.palette[n].main,.55)}`}},[`&.${JH.checked} + .${JH.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),nq=(0,WT.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),rq=(0,WT.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),iq=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:a="medium",sx:s}=n,l=(0,Le.A)(n,ZH),c=(0,De.A)({},n,{color:i,edge:o,size:a}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:a}=e,s={root:["root",n&&`edge${(0,zT.A)(n)}`,`size${(0,zT.A)(r)}`],switchBase:["switchBase",`color${(0,zT.A)(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,VT.A)(s,QH,t);return(0,De.A)({},t,l)})(c),d=(0,Ve.jsx)(rq,{className:u.thumb,ownerState:c});return(0,Ve.jsxs)(eq,{className:(0,Pe.A)(u.root,r),sx:s,ownerState:c,children:[(0,Ve.jsx)(tq,(0,De.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,De.A)({},u,{root:u.switchBase})})),(0,Ve.jsx)(nq,{className:u.track,ownerState:c})]})})),oq=iq,aq=(0,u_.A)((0,Ve.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),sq=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),lq=(0,u_.A)([(0,Ve.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,Ve.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts"),cq=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield"),uq=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),dq=(0,u_.A)([(0,Ve.jsx)("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07 1.95-1.95 5.12-1.95 7.07 0 1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"Policy"),hq=(0,u_.A)((0,Ve.jsx)("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Cookie"),pq=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),mq=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen"),fq=(0,u_.A)((0,Ve.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),gq=(0,u_.A)((0,Ve.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),vq=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{const e=await navigator.mediaDevices.enumerateDevices();n(e)})()}),[]);return(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("h3",{children:"Select Audio and Video Devices"}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Audio Input:"}),(0,Ve.jsx)("select",{onChange:e=>{i(e.target.value)},value:r,children:e.filter((e=>"audioinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Video Input:"}),(0,Ve.jsx)("select",{onChange:e=>{a(e.target.value)},value:o,children:e.filter((e=>"videoinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Camera ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsx)("button",{onClick:async()=>{const e={audio:{deviceId:r?{exact:r}:void 0},video:{deviceId:o?{exact:o}:void 0}};try{await navigator.mediaDevices.getUserMedia(e)}catch(Rb){console.error("Error accessing media devices.",Rb)}},children:"Start Stream"})]})},yq=()=>{QN(TC().breakpoints.down("sm"));const{isDarkMode:e,toggleDarkMode:n}=(()=>{const e=(0,t.useContext)(BT);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e})(),{currentUser:r,userProfile:i}=xT(),{canViewProfile:o,canViewContent:a}=AT(),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),[b,w]=(0,t.useState)({followers:0,following:0,pendingRequests:0}),[x,E]=(0,t.useState)(!1),[A,S]=(0,t.useState)(!1),[T,_]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[I,R]=(0,t.useState)(""),[D,L]=(0,t.useState)(!1),[P,M]=(0,t.useState)(""),O=[{title:"Device Management",icon:(0,Ve.jsx)(aq,{}),path:"#",description:"Manage your connected devices and appearance settings",onClick:()=>u(!0)},{title:"Security & Authentication",icon:(0,Ve.jsx)(sq,{}),path:"/security",description:"Learn about our authentication flow and security features"},{title:"Account Management",icon:(0,Ve.jsx)(lq,{}),path:"/account-management",description:"Deactivate or delete your account"},{title:"Safety & Community Guidelines",icon:(0,Ve.jsx)(cq,{}),path:"/safety",description:"Review our safety policies and community guidelines"},{title:"About",icon:(0,Ve.jsx)(uq,{}),path:"/about",description:"Learn more about SideEye and our mission"},{title:"Privacy Policy",icon:(0,Ve.jsx)(dq,{}),path:"/privacy-policy",description:"Read our privacy policy and data handling practices"},{title:"Terms of Service",icon:(0,Ve.jsx)(dq,{}),path:"/terms",description:"Review our terms of service and community guidelines"},{title:"Cookie Policy",icon:(0,Ve.jsx)(hq,{}),path:"/cookies",description:"Learn about how we use cookies and similar technologies"}];(0,t.useEffect)((()=>{if(r){const e=fv(Zf(KA,"users",r.uid),(e=>{if(e.exists()){var t,n;const r=e.data();g(r.isPrivate||!1),w({followers:(null===(t=r.followers)||void 0===t?void 0:t.length)||0,following:(null===(n=r.following)||void 0===n?void 0:n.length)||0,pendingRequests:v.length})}})),t=async()=>{const e=Wg(Jf(KA,`users/${r.uid}/followRequests`),Kg("timestamp","desc")),t=(await uv(e)).docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username,timestamp:t.timestamp}}));y(t)};return t(),()=>e()}}),[r,v.length]);const N=async(e,t,n)=>{if(r)try{await pv(Zf(KA,`users/${r.uid}/followRequests`,e)),n?(await dv(Zf(KA,`users/${r.uid}/followers`,t),{timestamp:Sv()}),await dv(Zf(KA,`users/${t}/following`,r.uid),{timestamp:Sv()}),wS.success("Follow request accepted")):wS.success("Follow request declined"),y((t=>t.filter((t=>t.id!==e))))}catch(p){console.error("Error handling follow request:",p),wS.error("Failed to process follow request")}};return(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(Qe,{sx:{py:4},children:[(0,Ve.jsx)(N_,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Settings"}),p&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:p}),(0,Ve.jsx)(JT,{elevation:0,sx:{borderRadius:2},children:(0,Ve.jsx)(tC,{children:O.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(DR,{component:e.path?Ce:"div",to:e.path,onClick:e.onClick,sx:{"&:hover":{backgroundColor:"action.hover"},textDecoration:"none",color:"inherit",cursor:"pointer"},children:[(0,Ve.jsx)(XI,{children:e.icon}),(0,Ve.jsx)(eR,{primary:e.title,secondary:e.description})]}),n<O.length-1&&(0,Ve.jsx)(oR,{})]},e.title)))})}),(0,Ve.jsxs)(GR,{open:c,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Device Management"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(pq,{})}),(0,Ve.jsx)(eR,{primary:"Dark Mode",secondary:"Toggle between light and dark mode"}),(0,Ve.jsx)(TR,{children:(0,Ve.jsx)(oq,{checked:e,onChange:n,color:"primary"})})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsx)(N_,{variant:"subtitle1",sx:{px:2,py:1,fontWeight:"bold"},children:"Connected Devices"}),s.map((e=>(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(eR,{primary:e.name,secondary:`Last active: ${e.lastActive}`}),(0,Ve.jsx)(Sk,{edge:"end",onClick:()=>{h(e.id),(async e=>{if(r)try{const t=Zf(KA,"users",r.uid);await hv(t,{devices:_v(e)}),l(s.filter((t=>t.id!==e))),u(!1),h(null)}catch(t){m("Failed to remove device"),console.error("Error removing device:",t)}})(e.id)},children:(0,Ve.jsx)(oM,{})})]},e.id))),0===s.length&&(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{px:2,py:2},children:"No devices connected"}),(0,Ve.jsx)(vq,{})]})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>u(!1),children:"Close"})})]}),(0,Ve.jsxs)(Qe,{sx:{mb:4,mt:4},children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Privacy Settings"}),(0,Ve.jsxs)(JT,{elevation:2,sx:{p:3},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:2},children:[f?(0,Ve.jsx)(UH,{color:"primary"}):(0,Ve.jsx)(mq,{color:"primary"}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:f?"Only approved followers can see your content":"Anyone can see your content"})]})]}),(0,Ve.jsx)(oq,{checked:f,onChange:async()=>{if(null!==r&&void 0!==r&&r.uid)try{if(await hv(Zf(KA,"users",r.uid),{isPrivate:!f,updatedAt:Sv()}),!f)for(const e of v)await N(e.id,e.userId,!0)}catch(p){console.error("Error updating privacy settings:",p),wS.error("Failed to update privacy settings")}},color:"primary"})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:3,mt:2,p:2,bgcolor:"background.default",borderRadius:1},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle2",color:"text.secondary",children:"Followers"}),(0,Ve.jsx)(N_,{variant:"h6",children:b.followers})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle2",color:"text.secondary",children:"Following"}),(0,Ve.jsx)(N_,{variant:"h6",children:b.following})]}),f&&(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle2",color:"text.secondary",children:"Pending Requests"}),(0,Ve.jsx)(N_,{variant:"h6",children:b.pendingRequests})]})]}),(0,Ve.jsx)(qP,{severity:"info",sx:{mt:2},children:f?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(DR,{button:!0,onClick:async()=>{if(r)try{const e=Zf(KA,"users",r.uid),t=await lv(e);if(t.exists()){t.data().verificationCode?E(!0):S(!0)}}catch(p){console.error("Error checking verification code:",p),wS.error("Failed to check verification status")}},children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(fq,{})}),(0,Ve.jsx)(eR,{primary:"View Registration Source Code",secondary:"Verify your code to view your registration source code"})]})]})]}),(0,Ve.jsxs)(GR,{open:A,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Create Verification Code"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(XL,{label:"Create a verification code",value:k,onChange:e=>C(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>S(!1),children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(r&&k)try{const e=Zf(KA,"users",r.uid);await hv(e,{verificationCode:k}),S(!1),E(!0),wS.success("Verification code created successfully")}catch(p){console.error("Error creating verification code:",p),wS.error("Failed to create verification code")}},variant:"contained",children:"Create"})]})]}),(0,Ve.jsxs)(GR,{open:x,onClose:()=>E(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Verify Code"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(XL,{label:"Enter your verification code",value:T,onChange:e=>_(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>E(!1),children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(r)try{const e=Zf(KA,"users",r.uid),t=await lv(e);if(t.exists()){const e=t.data();e.verificationCode===T?(M(e.sourceCodeHash?T:""),L(!0),E(!1),wS.success("Code verified successfully")):wS.error("Invalid verification code")}}catch(p){console.error("Error verifying code:",p),wS.error("Failed to verify code")}},variant:"contained",children:"Verify"})]})]}),(0,Ve.jsxs)(GR,{open:D,onClose:()=>L(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Your Registration Source Code"}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1,mb:3,color:"info.main"},children:[(0,Ve.jsx)(uq,{color:"info"}),(0,Ve.jsx)(N_,{sx:{color:"info.main",fontSize:"1rem"},children:"When your account is used on another device, you will need this Source Code to register your account."})]}),(0,Ve.jsx)(Qe,{sx:{p:2,bgcolor:"background.paper",borderRadius:1,fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"60vh",fontSize:"24px",textAlign:"center"},children:P})]}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>L(!1),children:"Close"})})]}),f&&v.length>0&&(0,Ve.jsxs)(Qe,{sx:{mt:3},children:[(0,Ve.jsx)(N_,{variant:"subtitle1",gutterBottom:!0,children:"Follow Requests"}),(0,Ve.jsx)(tC,{children:v.map((e=>{var t;return(0,Ve.jsxs)(DR,{sx:{bgcolor:"background.paper",borderRadius:1,mb:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(I_,{children:e.username[0]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsxs)(N_,{variant:"subtitle1",children:["@",e.username]}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleDateString()})]})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(Sk,{color:"success",onClick:()=>N(e.id,e.userId,!0),children:(0,Ve.jsx)(gq,{})}),(0,Ve.jsx)(Sk,{color:"error",onClick:()=>N(e.id,e.userId,!1),children:(0,Ve.jsx)(iM,{})})]})]},e.id)}))})]})]})})},bq=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],wq=(0,WT.Ay)(yk,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${wR.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${wR.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${wR.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${wR.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${wR.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),xq=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=r,m=(0,Le.A)(r,bq),f=t.useContext(Xk),g=t.useMemo((()=>({dense:l||f.dense||!1,alignItems:i,disableGutters:c})),[i,f.dense,l,c]),v=t.useRef(null);(0,iC.A)((()=>{o&&v.current&&v.current.focus()}),[o]);const y=(0,De.A)({},r,{alignItems:i,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=e,l={root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",s&&"selected"]},c=(0,VT.A)(l,bR,n);return(0,De.A)({},n,c)})(y),w=(0,j_.A)(v,n);return(0,Ve.jsx)(Xk.Provider,{value:g,children:(0,Ve.jsx)(wq,(0,De.A)({ref:w,href:m.href||m.to,component:(m.href||m.to)&&"div"===a?"button":a,focusVisibleClassName:(0,Pe.A)(b.focusVisible,d),ownerState:y,className:(0,Pe.A)(b.root,p)},m,{classes:b,children:s}))})})),Eq=xq,Aq=()=>{const e=J(),{searchQuery:n}=Z(),{db:r,loading:i,error:o}=sN(),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(0);QN(TC().breakpoints.down("sm"));(0,t.useEffect)((()=>{(async()=>{if(n&&r)try{c(!0);const e=[],t=Wg(Jf(r,"users"),Hg("username",">=",n.toLowerCase()),Hg("username","<=",n.toLowerCase()+"\uf8ff"),Xg(20));(await uv(t)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"user",data:n})}));const i=Wg(Jf(r,"posts"),Hg("content",">=",n.toLowerCase()),Hg("content","<=",n.toLowerCase()+"\uf8ff"),Kg("content"),Xg(20)),o=await uv(i);for(const n of o.docs){const t=n.data(),i=(await lv(Zf(r,"users",t.authorId))).data();e.push({id:n.id,type:"post",data:{...t,author:i}})}const a=Wg(Jf(r,"forums"),Hg("title",">=",n.toLowerCase()),Hg("title","<=",n.toLowerCase()+"\uf8ff"),Xg(20));(await uv(a)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"forum",data:n})}));const l=Wg(Jf(r,"sideRooms"),Hg("name",">=",n.toLowerCase()),Hg("name","<=",n.toLowerCase()+"\uf8ff"),Xg(20));(await uv(l)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"sideRoom",data:n})})),s(e)}catch(e){console.error("Error searching:",e),d("Failed to search. Please try again later.")}finally{c(!1)}})()}),[n,r]);const m=a.filter((e=>{switch(h){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return i?(0,Ve.jsx)("div",{children:"Loading..."}):o?(0,Ve.jsxs)("div",{children:["Error: ",o.message]}):r?(0,Ve.jsxs)(DP,{maxWidth:"md",sx:{mt:4},children:[(0,Ve.jsxs)(N_,{variant:"h4",gutterBottom:!0,children:['Search Results for "',n,'"']}),u&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:u}),(0,Ve.jsx)(Qe,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,Ve.jsxs)(nO,{value:h,onChange:(e,t)=>p(t),children:[(0,Ve.jsx)(lO,{label:"Users"}),(0,Ve.jsx)(lO,{label:"Posts"}),(0,Ve.jsx)(lO,{label:"Forums"}),(0,Ve.jsx)(lO,{label:"Side Rooms"})]})}),l?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(dP,{})}):0===m.length?(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,Ve.jsx)(tC,{children:m.map((t=>(0,Ve.jsxs)(Eq,{onClick:()=>(t=>{switch(t.type){case"user":e(`/profile/${t.id}`);break;case"post":e(`/post/${t.id}`);break;case"forum":e(`/forum/${t.id}`);break;case"sideRoom":e(`/side-room/${t.id}`)}})(t),sx:{mb:1,borderRadius:1},children:[(0,Ve.jsx)(NR,{children:"user"===t.type?(0,Ve.jsx)(I_,{src:t.data.avatar}):(0,Ve.jsx)(I_,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,Ve.jsx)(eR,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,Ve.jsx)("div",{children:"Error: Database connection failed"})},Sq=(0,u_.A)((0,Ve.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),Tq=(0,u_.A)((0,Ve.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),_q=(0,u_.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var kq=n(9360);const Cq=e=>(0,Ve.jsxs)(kq.A,{...e,viewBox:"0 0 24 24",children:[(0,Ve.jsx)("path",{d:"M6 4h12M12 19L7 8M12 19L17 8",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ve.jsx)("path",{d:"M4 14C8 10 16 10 20 14",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round"})]}),Iq=()=>{const[e,n]=(0,t.useState)(0),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[p,m]=(0,t.useState)(new Set),f=J(),{currentUser:g}=xT(),[v,y]=(0,t.useState)(null),b=async()=>{try{const e=Wg(Jf(KA,"users"),Kg("createdAt","desc"),Xg(20)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));a(t)}catch(v){console.error("Error fetching users:",v)}finally{h(!1)}},w=async()=>{try{const e=Wg(Jf(KA,"rooms"),Kg("createdAt","desc"),Xg(20)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));l(t)}catch(v){console.error("Error fetching rooms:",v)}};(0,t.useEffect)((()=>{b(),w(),x(),g&&E()}),[g]);const x=async()=>{try{const e=Wg(Jf(KA,"videos"),Kg("timestamp","desc"),Xg(20)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));u(t)}catch(v){console.error("Error fetching videos:",v)}},E=async()=>{if(g)try{const e=Wg(Jf(KA,`users/${g.uid}/following`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));m(n)}catch(v){console.error("Error fetching following:",v)}};return d?(0,Ve.jsx)(Qe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,Ve.jsx)(dP,{})}):(0,Ve.jsxs)(DP,{maxWidth:"lg",sx:{mt:4},children:[(0,Ve.jsxs)(Qe,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(Sq,{fontSize:"large",color:"primary"}),(0,Ve.jsx)(N_,{variant:"h4",component:"h1",children:"Discover"})]}),(0,Ve.jsx)(JT,{sx:{p:2,mb:4},children:(0,Ve.jsx)(XL,{fullWidth:!0,placeholder:"Search users and rooms...",value:r,onChange:e=>(async e=>{if(i(e),!g||!KA)return a([]),void l([]);if(e.length<2)return b(),void w();h(!0),y(null);try{const t=Jf(KA,"users"),n=e.toLowerCase(),r=Wg(t,Kg("username"),Xg(20)),i=(await uv(r)).docs.map((e=>({id:e.id,...e.data()}))),o=i.filter((e=>{var t,r;return(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(n))}));a(o);const s=Wg(Jf(KA,"rooms"),Kg("name"),Xg(20)),c=(await uv(s)).docs.map((e=>({id:e.id,...e.data()}))),u=c.filter((e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(n))}));l(u)}catch(v){console.error("Search error:",v),y(`Failed to perform search: ${v.message}`),wS.error(`Search failed: ${v.code||v.message}`),b(),w()}finally{h(!1)}})(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(GN,{position:"start",children:(0,Ve.jsx)(Tq,{})}),endAdornment:d&&(0,Ve.jsx)(GN,{position:"end",children:(0,Ve.jsx)(dP,{size:20})})}})}),(0,Ve.jsx)(Qe,{sx:{width:"100%",mb:4},children:(0,Ve.jsxs)(nO,{value:e,onChange:(e,t)=>{n(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",children:[(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)(_q,{}),label:"People"}),(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)($H,{}),label:"Rooms"}),(0,Ve.jsx)(lO,{icon:(0,Ve.jsx)(Cq,{}),label:"Vibits"})]})}),0===e&&(0,Ve.jsx)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(JT,{children:[(0,Ve.jsx)(Qe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(N_,{variant:"h6",component:"h2",children:"Users"})}),(0,Ve.jsx)(tC,{children:0===o.length?(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(eR,{primary:"No users found",secondary:"Try a different search term"})}):o.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(DR,{secondaryAction:e.id!==(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(Sk,{edge:"end",onClick:()=>f(`/messages/${e.id}`),title:"Send message",children:(0,Ve.jsx)(PH,{})}),(0,Ve.jsx)(Sk,{edge:"end",onClick:()=>(async e=>{if(g&&e!==g.uid)try{const t=Zf(KA,`users/${g.uid}/following`,e),n=Zf(KA,`users/${e}/followers`,g.uid);if(p.has(e))await pv(t),await pv(n),m((t=>{const n=new Set(t);return n.delete(e),n})),wS.success("Unfollowed user");else{await dv(t,{timestamp:Sv()}),await dv(n,{timestamp:Sv()}),m((t=>new Set(t).add(e)));const r={type:"follow",senderId:g.uid,senderName:g.displayName||"Anonymous",senderAvatar:g.photoURL||"",recipientId:e,content:`${g.displayName||"Someone"} started following you`,createdAt:Sv(),isRead:!1};await mv(Jf(KA,"users",e,"notifications"),r),wS.success("Followed user")}}catch(v){console.error("Error toggling follow:",v),wS.error("Failed to update follow status")}})(e.id),title:p.has(e.id)?"Unfollow user":"Follow user",color:p.has(e.id)?"primary":"default",children:(0,Ve.jsx)(OH,{})})]}),children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.profilePic,alt:e.name,children:e.name[0]})}),(0,Ve.jsx)(eR,{primary:e.name,secondary:(0,Ve.jsxs)(t.Fragment,{children:["@",e.username,e.bio&&(0,Ve.jsx)(N_,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.bio.length>100?`${e.bio.substring(0,100)}...`:e.bio})]}),onClick:()=>{return t=e.id,void f(`/profile/${t}`);var t},sx:{cursor:"pointer"}})]}),n<o.length-1&&(0,Ve.jsx)(oR,{})]},e.id)))})]})}),1===e&&(0,Ve.jsx)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(JT,{children:[(0,Ve.jsx)(Qe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(N_,{variant:"h6",component:"h2",children:"Rooms"})}),(0,Ve.jsx)(tC,{children:0===s.length?(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(eR,{primary:"No rooms found",secondary:"Try a different search term"})}):s.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(DR,{secondaryAction:(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(CB,{icon:(0,Ve.jsx)(_q,{}),label:`${e.memberCount} members`,size:"small"}),e.isPrivate&&(0,Ve.jsx)(CB,{label:"Private",color:"secondary",size:"small"})]}),children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{children:(0,Ve.jsx)($H,{})})}),(0,Ve.jsx)(eR,{primary:e.name,secondary:(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(N_,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description}),(0,Ve.jsxs)(N_,{component:"span",variant:"caption",color:"text.secondary",children:[e.shareCount," shares"]})]}),onClick:()=>{return t=e.id,void f(`/room/${t}`);var t},sx:{cursor:"pointer"}})]}),n<s.length-1&&(0,Ve.jsx)(oR,{})]},e.id)))})]})}),2===e&&(0,Ve.jsx)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(JT,{children:[(0,Ve.jsx)(Qe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsxs)(N_,{variant:"h6",component:"h2",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(Cq,{color:"primary"})," Vibits"]})}),0===c.length?(0,Ve.jsxs)(Qe,{sx:{p:4,textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h6",color:"text.secondary",children:"No videos found"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Check back later or upload your own!"}),(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",sx:{mt:2},onClick:()=>f("/vibits"),startIcon:(0,Ve.jsx)(Cq,{}),children:"Go to Vibits"})]}):(0,Ve.jsx)(RN,{container:!0,spacing:2,sx:{p:2},children:c.map((e=>(0,Ve.jsx)(RN,{item:!0,xs:12,sm:6,md:4,children:(0,Ve.jsxs)(fH,{sx:{position:"relative"},children:[(0,Ve.jsx)(EH,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)(Qe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:1,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white"},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Ve.jsxs)(N_,{variant:"subtitle2",children:["@",e.username]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(NH,{fontSize:"small"}),(0,Ve.jsx)(N_,{variant:"caption",sx:{ml:.5},children:e.likes})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(jH,{fontSize:"small"}),(0,Ve.jsx)(N_,{variant:"caption",sx:{ml:.5},children:e.comments})]})]})]})})]},e.id)},e.id)))})]})})]})},Rq=()=>{const{user:e}=xT(),{db:n}=sN(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(n&&e)try{const t=fv(Wg(Jf(n,"messages"),Hg("participants","array-contains",e.uid),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t),u(!1)}));return()=>t()}catch(t){h("Failed to fetch messages"),console.error("Error fetching messages:",t),u(!1)}}),[n,e]);return c?(0,Ve.jsx)(Qe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(dP,{})}):d?(0,Ve.jsx)(Qe,{p:3,children:(0,Ve.jsx)(N_,{color:"error",children:d})}):(0,Ve.jsxs)(Qe,{p:3,children:[(0,Ve.jsx)(N_,{variant:"h4",gutterBottom:!0,children:"Messages"}),(0,Ve.jsxs)(Qe,{mb:3,children:[(0,Ve.jsx)(XL,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Type your message...",value:o,onChange:e=>a(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:async()=>{if(n&&e&&s&&o.trim())try{await mv(Jf(n,"messages"),{text:o,senderId:e.uid,receiverId:s,timestamp:new Date,read:!1,participants:[e.uid,s]}),a("")}catch(t){h("Failed to send message"),console.error("Error sending message:",t)}},disabled:!o.trim()||!s,children:"Send"})]}),(0,Ve.jsxs)(tC,{children:[r.map((n=>{var r;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:n.senderId===(null===e||void 0===e?void 0:e.uid)&&(null===e||void 0===e?void 0:e.photoURL)||void 0})}),(0,Ve.jsx)(eR,{primary:n.text,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(N_,{component:"span",variant:"body2",color:"text.primary",children:n.senderId===(null===e||void 0===e?void 0:e.uid)?"You":"Other User"})," \u2014 ",new Date(null===(r=n.timestamp)||void 0===r?void 0:r.toDate()).toLocaleString()]})})]}),(0,Ve.jsx)(oR,{})]},n.id)})),0===r.length&&(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"No messages yet"})]})]})};var Dq=n(1014);function Lq(e){return(0,GT.Ay)("MuiTooltip",e)}const Pq=(0,Ge.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Mq=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const Oq=(0,WT.Ay)(WU,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${Pq.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Pq.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Pq.arrow}`]:(0,De.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Pq.arrow}`]:(0,De.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),Nq=(0,WT.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,zT.A)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,HT.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:(r=16/14,Math.round(1e5*r)/1e5)+"em",fontWeight:t.typography.fontWeightRegular},{[`.${Pq.popper}[data-popper-placement*="left"] &`]:(0,De.A)({transformOrigin:"right center"},n.isRtl?(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${Pq.popper}[data-popper-placement*="right"] &`]:(0,De.A)({transformOrigin:"left center"},n.isRtl?(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${Pq.popper}[data-popper-placement*="top"] &`]:(0,De.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${Pq.popper}[data-popper-placement*="bottom"] &`]:(0,De.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),jq=(0,WT.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,HT.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let Fq=!1;const Uq=new Q_.E;let Bq={x:0,y:0};function $q(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t&&t(n,...i),e(n,...i)}}const Vq=t.forwardRef((function(e,n){var r,i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w,x;const E=(0,Je.b)({props:e,name:"MuiTooltip"}),{arrow:A=!1,children:S,components:T={},componentsProps:_={},describeChild:k=!1,disableFocusListener:C=!1,disableHoverListener:I=!1,disableInteractive:R=!1,disableTouchListener:D=!1,enterDelay:L=100,enterNextDelay:P=0,enterTouchDelay:M=700,followCursor:O=!1,id:N,leaveDelay:j=0,leaveTouchDelay:F=1500,onClose:U,onOpen:B,open:$,placement:V="bottom",PopperComponent:W,PopperProps:z={},slotProps:H={},slots:q={},title:G,TransitionComponent:K=PC,TransitionProps:Y}=E,X=(0,Le.A)(E,Mq),Q=t.isValidElement(S)?S:(0,Ve.jsx)("span",{children:S}),J=TC(),Z=LT(),[ee,te]=t.useState(),[ne,re]=t.useState(null),ie=t.useRef(!1),oe=R||O,ae=(0,Q_.A)(),se=(0,Q_.A)(),le=(0,Q_.A)(),ce=(0,Q_.A)(),[ue,de]=(0,SL.A)({controlled:$,default:!1,name:"Tooltip",state:"open"});let he=ue;const pe=(0,Dq.A)(N),me=t.useRef(),fe=(0,F_.A)((()=>{void 0!==me.current&&(document.body.style.WebkitUserSelect=me.current,me.current=void 0),ce.clear()}));t.useEffect((()=>fe),[fe]);const ge=e=>{Uq.clear(),Fq=!0,de(!0),B&&!he&&B(e)},ve=(0,F_.A)((e=>{Uq.start(800+j,(()=>{Fq=!1})),de(!1),U&&he&&U(e),ae.start(J.transitions.duration.shortest,(()=>{ie.current=!1}))})),ye=e=>{ie.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),se.clear(),le.clear(),L||Fq&&P?se.start(Fq?P:L,(()=>{ge(e)})):ge(e))},be=e=>{se.clear(),le.start(j,(()=>{ve(e)}))},{isFocusVisibleRef:we,onBlur:xe,onFocus:Ee,ref:Ae}=(0,U_.A)(),[,Se]=t.useState(!1),Te=e=>{xe(e),!1===we.current&&(Se(!1),be(e))},_e=e=>{ee||te(e.currentTarget),Ee(e),!0===we.current&&(Se(!0),ye(e))},ke=e=>{ie.current=!0;const t=Q.props;t.onTouchStart&&t.onTouchStart(e)},Ce=e=>{ke(e),le.clear(),ae.clear(),fe(),me.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(M,(()=>{document.body.style.WebkitUserSelect=me.current,ye(e)}))},Ie=e=>{Q.props.onTouchEnd&&Q.props.onTouchEnd(e),fe(),le.start(F,(()=>{ve(e)}))};t.useEffect((()=>{if(he)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}}),[ve,he]);const Re=(0,j_.A)(mC(Q),Ae,te,n);G||0===G||(he=!1);const Me=t.useRef(),Oe={},Ne="string"===typeof G;k?(Oe.title=he||!Ne||I?null:G,Oe["aria-describedby"]=he?pe:null):(Oe["aria-label"]=Ne?G:null,Oe["aria-labelledby"]=he&&!Ne?pe:null);const je=(0,De.A)({},Oe,X,Q.props,{className:(0,Pe.A)(X.className,Q.props.className),onTouchStart:ke,ref:Re},O?{onMouseMove:e=>{const t=Q.props;t.onMouseMove&&t.onMouseMove(e),Bq={x:e.clientX,y:e.clientY},Me.current&&Me.current.update()}}:{});const Fe={};D||(je.onTouchStart=Ce,je.onTouchEnd=Ie),I||(je.onMouseOver=$q(ye,je.onMouseOver),je.onMouseLeave=$q(be,je.onMouseLeave),oe||(Fe.onMouseOver=ye,Fe.onMouseLeave=be)),C||(je.onFocus=$q(_e,je.onFocus),je.onBlur=$q(Te,je.onBlur),oe||(Fe.onFocus=_e,Fe.onBlur=Te));const Ue=t.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=z.popperOptions)&&e.modifiers&&(t=t.concat(z.popperOptions.modifiers)),(0,De.A)({},z.popperOptions,{modifiers:t})}),[ne,z]),Be=(0,De.A)({},E,{isRtl:Z,arrow:A,disableInteractive:oe,placement:V,PopperComponentProp:W,touch:ie.current}),$e=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,zT.A)(o.split("-")[0])}`],arrow:["arrow"]};return(0,VT.A)(a,Lq,t)})(Be),We=null!=(r=null!=(i=q.popper)?i:T.Popper)?r:Oq,ze=null!=(o=null!=(a=null!=(s=q.transition)?s:T.Transition)?a:K)?o:PC,He=null!=(l=null!=(c=q.tooltip)?c:T.Tooltip)?l:Nq,qe=null!=(u=null!=(d=q.arrow)?d:T.Arrow)?u:jq,Ge=f_(We,(0,De.A)({},z,null!=(h=H.popper)?h:_.popper,{className:(0,Pe.A)($e.popper,null==z?void 0:z.className,null==(p=null!=(m=H.popper)?m:_.popper)?void 0:p.className)}),Be),Ke=f_(ze,(0,De.A)({},Y,null!=(f=H.transition)?f:_.transition),Be),Ye=f_(He,(0,De.A)({},null!=(g=H.tooltip)?g:_.tooltip,{className:(0,Pe.A)($e.tooltip,null==(v=null!=(y=H.tooltip)?y:_.tooltip)?void 0:v.className)}),Be),Xe=f_(qe,(0,De.A)({},null!=(b=H.arrow)?b:_.arrow,{className:(0,Pe.A)($e.arrow,null==(w=null!=(x=H.arrow)?x:_.arrow)?void 0:w.className)}),Be);return(0,Ve.jsxs)(t.Fragment,{children:[t.cloneElement(Q,je),(0,Ve.jsx)(We,(0,De.A)({as:null!=W?W:WU,placement:V,anchorEl:O?{getBoundingClientRect:()=>({top:Bq.y,left:Bq.x,right:Bq.x,bottom:Bq.y,width:0,height:0})}:ee,popperRef:Me,open:!!ee&&he,id:pe,transition:!0},Fe,Ge,{popperOptions:Ue,children:e=>{let{TransitionProps:t}=e;return(0,Ve.jsx)(ze,(0,De.A)({timeout:J.transitions.duration.shorter},t,Ke,{children:(0,Ve.jsxs)(He,(0,De.A)({},Ye,{children:[G,A?(0,Ve.jsx)(qe,(0,De.A)({},Xe,{ref:re})):null]}))}))}}))]})})),Wq=Vq;var zq=n(782);const Hq=["component","direction","spacing","divider","children","className","useFlexGap"],qq=(0,je.A)(),Gq=TP("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Kq(e){return mP({props:e,name:"MuiStack",defaultTheme:qq})}function Yq(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,o)=>(e.push(i),o<r.length-1&&e.push(t.cloneElement(n,{key:`separator-${o}`})),e)),[])}const Xq=e=>{let{ownerState:t,theme:n}=e,r=(0,De.A)({display:"flex",flexDirection:"column"},(0,yN.NI)({theme:n},(0,yN.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,zq.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,yN.kW)({values:t.direction,base:i}),a=(0,yN.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const s=(n,r)=>{return t.useFlexGap?{gap:(0,zq._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,zq._W)(e,n)}};var i};r=(0,KR.A)(r,(0,yN.NI)({theme:n},a,s))}return r=(0,yN.iZ)(n.breakpoints,r),r};const Qq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=Gq,useThemeProps:r=Kq,componentName:i="MuiStack"}=e,o=n(Xq),a=t.forwardRef((function(e,t){const n=r(e),a=(0,Ne.A)(n),{component:s="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=a,m=(0,Le.A)(a,Hq),f={direction:l,spacing:c,useFlexGap:p},g=(0,VT.A)({root:["root"]},(e=>(0,GT.Ay)(i,e)),{});return(0,Ve.jsx)(o,(0,De.A)({as:s,ownerState:f,ref:t,className:(0,Pe.A)(g.root,h)},m,{children:u?Yq(d,u):d}))}));return a}({createStyledComponent:(0,WT.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,Je.b)({props:e,name:"MuiStack"})}),Jq=Qq;function Zq(e){return(0,GT.Ay)("MuiFormControlLabel",e)}const eG=(0,Ge.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),tG=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],nG=(0,WT.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${eG.label}`]:t.label},t.root,t[`labelPlacement${(0,zT.A)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${eG.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${eG.label}`]:{[`&.${eG.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})})),rG=(0,WT.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${eG.error}`]:{color:(t.vars||t).palette.error.main}}})),iG=t.forwardRef((function(e,n){var r,i;const o=(0,Je.b)({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:m={}}=o,f=(0,Le.A)(o,tG),g=oD(),v=null!=(r=null!=c?c:l.props.disabled)?r:null==g?void 0:g.disabled,y=null!=p?p:l.props.required,b={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof o[e]&&(b[e]=o[e])}));const w=rD({props:o,muiFormControl:g,states:["error"]}),x=(0,De.A)({},o,{disabled:v,labelPlacement:h,required:y,error:w.error}),E=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,a={root:["root",n&&"disabled",`labelPlacement${(0,zT.A)(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,VT.A)(a,Zq,t)})(x),A=null!=(i=m.typography)?i:s.typography;let S=d;return null==S||S.type===N_||u||(S=(0,Ve.jsx)(N_,(0,De.A)({component:"span"},A,{className:(0,Pe.A)(E.label,null==A?void 0:A.className),children:S}))),(0,Ve.jsxs)(nG,(0,De.A)({className:(0,Pe.A)(E.root,a),ownerState:x,ref:n},f,{children:[t.cloneElement(l,b),y?(0,Ve.jsxs)(Jq,{display:"block",children:[S,(0,Ve.jsxs)(rG,{ownerState:x,"aria-hidden":!0,className:E.asterisk,children:["\u2009","*"]})]}):S]}))})),oG=iG,aG=e=>{let{open:n,onClose:r}=e;const{currentUser:i}=xT(),o=J(),[a,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[m,f]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)([]),[w,x]=(0,t.useState)(""),[E,A]=(0,t.useState)(""),[S,T]=(0,t.useState)(50),[_,k]=(0,t.useState)([]),[C,I]=(0,t.useState)(""),[R,D]=(0,t.useState)(!1),[L,P]=(0,t.useState)(4),[M,O]=(0,t.useState)(!1),[N,j]=(0,t.useState)(2),F=()=>{w.trim()&&!y.includes(w.trim())&&(b([...y,w.trim()]),x(""))},U=()=>{C.trim()&&!_.includes(C.trim())&&(k([..._,C.trim()]),I(""))};return(0,Ve.jsxs)(GR,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Create Side Room"}),(0,Ve.jsxs)(rM,{children:[l&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:l}),(0,Ve.jsx)(XL,{autoFocus:!0,margin:"dense",label:"Room Name",type:"text",fullWidth:!0,value:u,onChange:e=>d(e.target.value),required:!0}),(0,Ve.jsx)(XL,{margin:"dense",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,value:h,onChange:e=>p(e.target.value)}),(0,Ve.jsxs)(aL,{fullWidth:!0,margin:"dense",children:[(0,Ve.jsx)(tL,{children:"Category"}),(0,Ve.jsxs)(zL,{value:E,onChange:e=>A(e.target.value),label:"Category",children:[(0,Ve.jsx)(qI,{value:"general",children:"General"}),(0,Ve.jsx)(qI,{value:"gaming",children:"Gaming"}),(0,Ve.jsx)(qI,{value:"music",children:"Music"}),(0,Ve.jsx)(qI,{value:"movies",children:"Movies & TV"}),(0,Ve.jsx)(qI,{value:"sports",children:"Sports"}),(0,Ve.jsx)(qI,{value:"tech",children:"Technology"}),(0,Ve.jsx)(qI,{value:"art",children:"Art & Design"}),(0,Ve.jsx)(qI,{value:"education",children:"Education"}),(0,Ve.jsx)(qI,{value:"other",children:"Other"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",children:"Tags"}),(0,Ve.jsx)(Qe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:y.map((e=>(0,Ve.jsx)(CB,{label:e,onDelete:()=>{return t=e,void b(y.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(XL,{size:"small",value:w,onChange:e=>x(e.target.value),placeholder:"Add tag",onKeyPress:e=>"Enter"===e.key&&F()}),(0,Ve.jsx)(Sk,{onClick:F,size:"small",children:(0,Ve.jsx)(CM,{})})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",children:"Rules"}),(0,Ve.jsx)(Qe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:_.map((e=>(0,Ve.jsx)(CB,{label:e,onDelete:()=>{return t=e,void k(_.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(XL,{size:"small",value:C,onChange:e=>I(e.target.value),placeholder:"Add rule",onKeyPress:e=>"Enter"===e.key&&U()}),(0,Ve.jsx)(Sk,{onClick:U,size:"small",children:(0,Ve.jsx)(CM,{})})]})]}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:m,onChange:e=>f(e.target.checked)}),label:"Private Room"}),m&&(0,Ve.jsx)(XL,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:g,onChange:e=>v(e.target.value),required:!0}),(0,Ve.jsx)(XL,{margin:"dense",label:"Maximum Participants",type:"number",fullWidth:!0,value:S,onChange:e=>T(Number(e.target.value)),inputProps:{min:2,max:100}}),(0,Ve.jsx)(oR,{sx:{my:2}}),(0,Ve.jsx)(N_,{variant:"h6",sx:{mb:2},children:"Live Session Settings"}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:R,onChange:e=>D(e.target.checked)}),label:"Enable Live Sessions"}),R&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(XL,{margin:"dense",label:"Maximum Live Participants",type:"number",fullWidth:!0,value:L,onChange:e=>P(Number(e.target.value)),inputProps:{min:1,max:10},helperText:"Maximum number of people who can join the live session"}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:M,onChange:e=>O(e.target.checked)}),label:"Allow Guest Speakers"}),M&&(0,Ve.jsx)(XL,{margin:"dense",label:"Guest Speaker Limit",type:"number",fullWidth:!0,value:N,onChange:e=>j(Number(e.target.value)),inputProps:{min:1,max:5},helperText:"Maximum number of guest speakers allowed in a session"})]})]}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:r,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(i&&KA)if(u.trim())if(!m||g.trim()){s(!0),c("");try{const e=await lv(Zf(KA,"users",i.uid));if(!e.exists())throw new Error("User data not found");const t=e.data(),n={userId:i.uid,username:t.username||i.displayName||"Unknown User",displayName:t.displayName||t.username||i.displayName||"Unknown User",avatar:t.avatar||t.photoURL||i.photoURL||""},a=new Date,s={name:u.trim(),description:h.trim(),ownerId:i.uid,owner:n,members:[{...n,role:"owner",joinedAt:a}],memberCount:1,createdAt:a,isPrivate:m,password:m?g.trim():null,tags:y,category:E,maxParticipants:S,rules:_,isLive:!1,liveParticipants:[],activeUsers:0,bannedUsers:[],enableLiveSessions:R,maxLiveParticipants:L,allowGuestSpeakers:M,guestSpeakerLimit:N,liveSettings:{audioEnabled:!0,videoEnabled:!1,screenSharingEnabled:!1,raiseHandEnabled:!0,chatEnabled:!0,reactionsEnabled:!0}},l=await mv(Jf(KA,"sideRooms"),s),c=Zf(KA,"users",i.uid);await hv(c,{sideRooms:Tv(l.id)}),r(),o(`/side-room/${l.id}`)}catch(e){console.error("Error creating room:",e),c("Failed to create room. Please try again.")}finally{s(!1)}}else c("Password is required for private rooms");else c("Room name is required")},variant:"contained",disabled:a,children:a?"Creating...":"Create Room"})]})]})},sG=["All","Gaming","Music","Art","Technology","Sports","Education","Entertainment","Social","Other"],lG=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(""),[x,E]=(0,t.useState)("All"),[A,S]=(0,t.useState)("newest"),T=J(),{currentUser:_}=xT();(0,t.useEffect)((()=>{if(!KA)return l("Firestore not initialized"),void a(!1);try{a(!0);const e=Jf(KA,"sideRooms"),t=fv(Wg(e,Kg("createdAt","desc")),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",description:t.description,createdAt:t.createdAt,lastActive:t.lastActive,memberCount:t.memberCount||0,maxMembers:t.maxMembers||50,members:t.members,isPrivate:t.isPrivate,password:t.password,genre:t.genre,tags:t.tags,category:t.category}})),r=t.filter((e=>!e.isPrivate));n(r),a(!1),l(null)}),(e=>{console.error("Error fetching side rooms:",e),l("Error fetching rooms. Please check permissions or network."),a(!1)}));return()=>t()}catch(e){console.error("Error setting up side rooms query:",e),l(`Error setting up query: ${e.message}`),a(!1)}}),[KA]),(0,t.useEffect)((()=>{let t=[...e];b&&(t=t.filter((e=>e.name.toLowerCase().includes(b.toLowerCase())||e.description&&e.description.toLowerCase().includes(b.toLowerCase())))),"All"!==x&&(t=t.filter((e=>e.category===x||e.genre===x||e.tags&&e.tags.includes(x)))),t.sort(((e,t)=>{var n,r,i,o;const a=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0,s=(null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0,l=(null===(i=e.lastActive)||void 0===i?void 0:i.toMillis())||0,c=(null===(o=t.lastActive)||void 0===o?void 0:o.toMillis())||0;switch(A){case"newest":return s-a;case"oldest":return a-s;case"members":return(t.memberCount||0)-(e.memberCount||0);case"activity":return c-l;default:return 0}})),i(t)}),[e,b,x,A]);return o?(0,Ve.jsx)("div",{children:"Loading..."}):s?(0,Ve.jsxs)("div",{children:["Error: ",s]}):(0,Ve.jsxs)(Qe,{sx:{p:3},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",children:"Side Rooms \ud83c\udfad"}),(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",startIcon:(0,Ve.jsx)(CM,{}),onClick:()=>u(!0),children:"Create Room"})]}),c&&(0,Ve.jsx)(aG,{open:c,onClose:()=>u(!1)}),(0,Ve.jsx)(JT,{sx:{p:2,mb:3},children:(0,Ve.jsxs)(RN,{container:!0,spacing:2,alignItems:"center",children:[(0,Ve.jsx)(RN,{item:!0,xs:12,md:4,children:(0,Ve.jsx)(XL,{fullWidth:!0,placeholder:"Search rooms by name or genre...",value:b,onChange:e=>w(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(GN,{position:"start",children:(0,Ve.jsx)(Tq,{})})}})}),(0,Ve.jsx)(RN,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Genre/Category"}),(0,Ve.jsx)(zL,{value:x,label:"Genre/Category",onChange:e=>E(e.target.value),children:sG.map((e=>(0,Ve.jsx)(qI,{value:e,children:e},e)))})]})}),(0,Ve.jsx)(RN,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Sort by"}),(0,Ve.jsxs)(zL,{value:A,label:"Sort by",onChange:e=>S(e.target.value),children:[(0,Ve.jsx)(qI,{value:"newest",children:"Newest First"}),(0,Ve.jsx)(qI,{value:"oldest",children:"Oldest First"}),(0,Ve.jsx)(qI,{value:"members",children:"Most Members"}),(0,Ve.jsx)(qI,{value:"activity",children:"Most Active"})]})]})})]})}),(0,Ve.jsx)(Qe,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:0===r.length?(0,Ve.jsx)(N_,{variant:"body1",sx:{width:"100%",textAlign:"center",mt:4},children:"No rooms found matching your criteria"}):r.map((e=>{var t;return(0,Ve.jsxs)(fH,{sx:{width:300,display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(kH,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,Ve.jsx)(N_,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.name}),e.isPrivate&&(0,Ve.jsx)(Wq,{title:"Private Room",children:(0,Ve.jsx)(UH,{fontSize:"small"})})]}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(e.category||e.genre)&&(0,Ve.jsx)(CB,{size:"small",label:e.category||e.genre,color:"secondary",variant:"outlined"}),null===(t=e.tags)||void 0===t?void 0:t.map((e=>(0,Ve.jsx)(CB,{size:"small",label:e,variant:"outlined"},e)))]}),(0,Ve.jsx)(CB,{size:"small",icon:(0,Ve.jsx)($H,{}),label:`${e.memberCount||0} members`,variant:"outlined"})]}),(0,Ve.jsx)(LH,{children:(0,Ve.jsx)(Kk,{fullWidth:!0,variant:"contained",onClick:()=>(async e=>{if(KA&&_)if(e.isPrivate)m(e),h(!0);else try{y(!0);const t=Zf(KA,"sideRooms",e.id);await Av(KA,(async e=>{const n=await e.get(t);if(!n.exists())throw new Error("Room not found");(n.data().members||[]).some((e=>e.userId===_.uid))?e.update(t,{activeUsers:kv(1),lastActive:Sv()}):e.update(t,{members:Tv({userId:_.uid,username:_.displayName||"Anonymous",avatar:_.photoURL||"",role:"member",joinedAt:new Date}),memberCount:kv(1),activeUsers:kv(1),lastActive:Sv()})})),wS.success("Joined room successfully"),T(`/side-room/${e.id}`)}catch(s){console.error("Error joining room:",s),s instanceof Error?wS.error(s.message):wS.error("Failed to join room")}finally{y(!1)}else wS.error("Not authenticated")})(e),disabled:v||e.memberCount>=e.maxMembers,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:v?(0,Ve.jsx)(dP,{size:24}):e.memberCount>=e.maxMembers?"Room Full":"Join Room"})})]},e.id)}))}),(0,Ve.jsxs)(GR,{open:d,onClose:()=>!v&&h(!1),children:[(0,Ve.jsx)(JP,{children:"Enter Room Password"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(XL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:f,onChange:e=>g(e.target.value),disabled:v})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>h(!1),disabled:v,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(p&&KA&&_)if(f===p.password)try{y(!0);const e=Zf(KA,"sideRooms",p.id);await Av(KA,(async t=>{const n=await t.get(e);if(!n.exists())throw new Error("Room not found");(n.data().members||[]).some((e=>e.userId===_.uid))?t.update(e,{activeUsers:kv(1),lastActive:Sv()}):t.update(e,{members:Tv({userId:_.uid,username:_.displayName||"Anonymous",avatar:_.photoURL||"",role:"member",joinedAt:new Date}),memberCount:kv(1),activeUsers:kv(1),lastActive:Sv()})})),wS.success("Joined room successfully"),h(!1),g(""),m(null),T(`/side-room/${p.id}`)}catch(s){console.error("Error joining room:",s),wS.error("Failed to join room")}finally{y(!1)}else wS.error("Incorrect password")},variant:"contained",disabled:v||!f,children:v?(0,Ve.jsx)(dP,{size:24}):"Join"})]})]})]})};var cG=n(1375);const uG=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))};function dG(e,t){return e-t}function hG(e,t){var n;const{index:r}=null!=(n=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null))?n:{};return r}function pG(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function mG(e,t,n){return 100*(e-t)/(n-t)}function fG(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function gG(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(dG)}function vG(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;var i,o;const a=(0,MC.A)(t.current);var s;null!=(i=t.current)&&i.contains(a.activeElement)&&Number(null==a||null==(o=a.activeElement)?void 0:o.getAttribute("data-index"))===n||(null==(s=t.current)||s.querySelector(`[type="range"][data-index="${n}"]`).focus());r&&r(n)}function yG(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&uG(e,t)}const bG={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},wG=e=>e;let xG;function EG(){return void 0===xG&&(xG="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),xG}function AG(e){const{"aria-labelledby":n,defaultValue:r,disabled:i=!1,disableSwap:o=!1,isRtl:a=!1,marks:s=!1,max:l=100,min:c=0,name:u,onChange:d,onChangeCommitted:h,orientation:p="horizontal",rootRef:m,scale:f=wG,step:g=1,shiftStep:v=10,tabIndex:y,value:b}=e,w=t.useRef(void 0),[x,E]=t.useState(-1),[A,S]=t.useState(-1),[T,_]=t.useState(!1),k=t.useRef(0),[C,I]=(0,iB.A)({controlled:b,default:null!=r?r:c,name:"Slider"}),R=d&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:u}}),d(i,t,n)}),D=Array.isArray(C);let L=D?C.slice().sort(dG):[C];L=L.map((e=>null==e?c:(0,dM.A)(e,c,l)));const P=!0===s&&null!==g?[...Array(Math.floor((l-c)/g)+1)].map(((e,t)=>({value:c+g*t}))):s||[],M=P.map((e=>e.value)),{isFocusVisibleRef:O,onBlur:N,onFocus:j,ref:F}=(0,cG.A)(),[U,B]=t.useState(-1),$=t.useRef(null),V=(0,p_.A)(F,$),W=(0,p_.A)(m,V),z=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));j(t),!0===O.current&&B(r),S(r),null==e||null==(n=e.onFocus)||n.call(e,t)},H=e=>t=>{var n;N(t),!1===O.current&&B(-1),S(-1),null==e||null==(n=e.onBlur)||n.call(e,t)},q=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=L[n],i=M.indexOf(r);let a=t;if(P&&null==g){const e=M[M.length-1];a=a>e?e:a<M[0]?M[0]:a<r?M[i-1]:M[i+1]}if(a=(0,dM.A)(a,c,l),D){o&&(a=(0,dM.A)(a,L[n-1]||-1/0,L[n+1]||1/0));const e=a;a=gG({values:L,newValue:a,index:n});let t=n;o||(t=a.indexOf(e)),vG({sliderRef:$,activeIndex:t})}I(a),B(n),R&&!yG(a,C)&&R(e,a,n),h&&h(e,a)},G=e=>t=>{var n;if(null!==g){const e=Number(t.currentTarget.getAttribute("data-index")),n=L[e];let r=null;("ArrowLeft"===t.key||"ArrowDown"===t.key)&&t.shiftKey||"PageDown"===t.key?r=Math.max(n-v,c):(("ArrowRight"===t.key||"ArrowUp"===t.key)&&t.shiftKey||"PageUp"===t.key)&&(r=Math.min(n+v,l)),null!==r&&(q(t,r),t.preventDefault())}null==e||null==(n=e.onKeyDown)||n.call(e,t)};(0,UC.A)((()=>{var e;i&&$.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[i]),i&&-1!==x&&E(-1),i&&-1!==U&&B(-1);const K=t.useRef(void 0);let Y=p;a&&"horizontal"===p&&(Y+="-reverse");const X=e=>{let{finger:t,move:n=!1}=e;const{current:r}=$,{width:i,height:a,bottom:s,left:u}=r.getBoundingClientRect();let d,h;if(d=0===Y.indexOf("vertical")?(s-t.y)/a:(t.x-u)/i,-1!==Y.indexOf("-reverse")&&(d=1-d),h=function(e,t,n){return(n-t)*e+t}(d,c,l),g)h=fG(h,g,c);else{const e=hG(M,h);h=M[e]}h=(0,dM.A)(h,c,l);let p=0;if(D){p=n?K.current:hG(L,h),o&&(h=(0,dM.A)(h,L[p-1]||-1/0,L[p+1]||1/0));const e=h;h=gG({values:L,newValue:h,index:p}),o&&n||(p=h.indexOf(e),K.current=p)}return{newValue:h,activeIndex:p}},Q=(0,QC.A)((e=>{const t=pG(e,w);if(!t)return;if(k.current+=1,"mousemove"===e.type&&0===e.buttons)return void J(e);const{newValue:n,activeIndex:r}=X({finger:t,move:!0});vG({sliderRef:$,activeIndex:r,setActive:E}),I(n),!T&&k.current>2&&_(!0),R&&!yG(n,C)&&R(e,n,r)})),J=(0,QC.A)((e=>{const t=pG(e,w);if(_(!1),!t)return;const{newValue:n}=X({finger:t,move:!0});E(-1),"touchend"===e.type&&S(-1),h&&h(e,n),w.current=void 0,ee()})),Z=(0,QC.A)((e=>{if(i)return;EG()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(w.current=t.identifier);const n=pG(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=X({finger:n});vG({sliderRef:$,activeIndex:r,setActive:E}),I(t),R&&!yG(t,C)&&R(e,t,r)}k.current=0;const r=(0,MC.A)($.current);r.addEventListener("touchmove",Q,{passive:!0}),r.addEventListener("touchend",J,{passive:!0})})),ee=t.useCallback((()=>{const e=(0,MC.A)($.current);e.removeEventListener("mousemove",Q),e.removeEventListener("mouseup",J),e.removeEventListener("touchmove",Q),e.removeEventListener("touchend",J)}),[J,Q]);t.useEffect((()=>{const{current:e}=$;return e.addEventListener("touchstart",Z,{passive:EG()}),()=>{e.removeEventListener("touchstart",Z),ee()}}),[ee,Z]),t.useEffect((()=>{i&&ee()}),[i,ee]);const te=mG(D?L[0]:c,c,l),ne=mG(L[L.length-1],c,l)-te,re=e=>t=>{var n;null==(n=e.onMouseLeave)||n.call(e,t),S(-1)};return{active:x,axis:Y,axisProps:bG,dragging:T,focusedThumbIndex:U,getHiddenInputProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;const o=v_(t),s={onChange:(d=o||{},e=>{var t;null==(t=d.onChange)||t.call(d,e),q(e,e.target.valueAsNumber)}),onFocus:z(o||{}),onBlur:H(o||{}),onKeyDown:G(o||{})};var d;const h=(0,De.A)({},o,s);return(0,De.A)({tabIndex:y,"aria-labelledby":n,"aria-orientation":p,"aria-valuemax":f(l),"aria-valuemin":f(c),name:u,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":null!=(r=e.step)?r:void 0,disabled:i},t,h,{style:(0,De.A)({},g$,{direction:a?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=v_(e),n={onMouseDown:(r=t||{},e=>{var t;if(null==(t=r.onMouseDown)||t.call(r,e),i)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const n=pG(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=X({finger:n});vG({sliderRef:$,activeIndex:r,setActive:E}),I(t),R&&!yG(t,C)&&R(e,t,r)}k.current=0;const o=(0,MC.A)($.current);o.addEventListener("mousemove",Q,{passive:!0}),o.addEventListener("mouseup",J)})};var r;const o=(0,De.A)({},t,n);return(0,De.A)({},e,{ref:W},o)},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=v_(e),n={onMouseOver:(r=t||{},e=>{var t;null==(t=r.onMouseOver)||t.call(r,e);const n=Number(e.currentTarget.getAttribute("data-index"));S(n)}),onMouseLeave:re(t||{})};var r;return(0,De.A)({},e,t,n)},marks:P,open:A,range:D,rootRef:W,trackLeap:ne,trackOffset:te,values:L,getThumbStyle:e=>({pointerEvents:-1!==x&&x!==e?"none":void 0})}}const SG=e=>!e||!m_(e);function TG(e){return(0,GT.Ay)("MuiSlider",e)}const _G=(0,Ge.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const kG=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function CG(e){return e}const IG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,zT.A)(n.color)}`],"medium"!==n.size&&t[`size${(0,zT.A)(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((e=>{let{theme:t}=e;var n;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${_G.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${_G.dragging}`]:{[`& .${_G.thumb}, & .${_G.track}`]:{transition:"none"}},variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}})),RG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),DG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;var n;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e,track:"inverted"},style:(0,De.A)({},t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:(0,De.A)({backgroundColor:(0,HT.a)(t.palette[e].main,.62),borderColor:(0,HT.a)(t.palette[e].main,.62)},t.applyStyles("dark",{backgroundColor:(0,HT.e$)(t.palette[e].main,.5)}),t.applyStyles("dark",{borderColor:(0,HT.e$)(t.palette[e].main,.5)})))})))]}})),LG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${(0,zT.A)(n.color)}`],"medium"!==n.size&&t[`thumbSize${(0,zT.A)(n.size)}`]]}})((e=>{let{theme:t}=e;var n;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${_G.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{[`&:hover, &.${_G.focusVisible}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${(0,HT.X4)(t.palette[e].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${_G.active}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${(0,HT.X4)(t.palette[e].main,.16)}`})}})))]}})),PG=(0,WT.Ay)((function(e){const{children:n,className:r,value:i}=e,o=(e=>{const{open:t}=e;return{offset:(0,Pe.A)(t&&_G.valueLabelOpen),circle:_G.valueLabelCircle,label:_G.valueLabelLabel}})(e);return n?t.cloneElement(n,{className:(0,Pe.A)(n.props.className)},(0,Ve.jsxs)(t.Fragment,{children:[n.props.children,(0,Ve.jsx)("span",{className:(0,Pe.A)(o.offset,r),"aria-hidden":!0,children:(0,Ve.jsx)("span",{className:o.circle,children:(0,Ve.jsx)("span",{className:o.label,children:i})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})((e=>{let{theme:t}=e;return(0,De.A)({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${_G.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${_G.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})})),MG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,AL.A)(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}})),OG=(0,WT.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,AL.A)(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})})),NG=e=>{let{children:t}=e;return t},jG=t.forwardRef((function(e,n){var r,i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w,x,E,A,S,T,_;const k=(0,Je.b)({props:e,name:"MuiSlider"}),C=LT(),{"aria-label":I,"aria-valuetext":R,"aria-labelledby":D,component:L="span",components:P={},componentsProps:M={},color:O="primary",classes:N,className:j,disableSwap:F=!1,disabled:U=!1,getAriaLabel:B,getAriaValueText:$,marks:V=!1,max:W=100,min:z=0,orientation:H="horizontal",shiftStep:q=10,size:G="medium",step:K=1,scale:Y=CG,slotProps:X,slots:Q,track:J="normal",valueLabelDisplay:Z="off",valueLabelFormat:ee=CG}=k,te=(0,Le.A)(k,kG),ne=(0,De.A)({},k,{isRtl:C,max:W,min:z,classes:N,disabled:U,disableSwap:F,orientation:H,marks:V,color:O,size:G,step:K,shiftStep:q,scale:Y,track:J,valueLabelDisplay:Z,valueLabelFormat:ee}),{axisProps:re,getRootProps:ie,getHiddenInputProps:oe,getThumbProps:ae,open:se,active:le,axis:ce,focusedThumbIndex:ue,range:de,dragging:he,marks:pe,values:me,trackOffset:fe,trackLeap:ge,getThumbStyle:ve}=AG((0,De.A)({},ne,{rootRef:n}));ne.marked=pe.length>0&&pe.some((e=>e.label)),ne.dragging=he,ne.focusedThumbIndex=ue;const ye=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:a,color:s,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse",s&&`color${(0,zT.A)(s)}`,l&&`size${(0,zT.A)(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${(0,zT.A)(l)}`,s&&`thumbColor${(0,zT.A)(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,VT.A)(c,TG,a)})(ne),be=null!=(r=null!=(i=null==Q?void 0:Q.root)?i:P.Root)?r:IG,we=null!=(o=null!=(a=null==Q?void 0:Q.rail)?a:P.Rail)?o:RG,xe=null!=(s=null!=(l=null==Q?void 0:Q.track)?l:P.Track)?s:DG,Ee=null!=(c=null!=(u=null==Q?void 0:Q.thumb)?u:P.Thumb)?c:LG,Ae=null!=(d=null!=(h=null==Q?void 0:Q.valueLabel)?h:P.ValueLabel)?d:PG,Se=null!=(p=null!=(m=null==Q?void 0:Q.mark)?m:P.Mark)?p:MG,Te=null!=(f=null!=(g=null==Q?void 0:Q.markLabel)?g:P.MarkLabel)?f:OG,_e=null!=(v=null!=(y=null==Q?void 0:Q.input)?y:P.Input)?v:"input",ke=null!=(b=null==X?void 0:X.root)?b:M.root,Ce=null!=(w=null==X?void 0:X.rail)?w:M.rail,Ie=null!=(x=null==X?void 0:X.track)?x:M.track,Re=null!=(E=null==X?void 0:X.thumb)?E:M.thumb,Me=null!=(A=null==X?void 0:X.valueLabel)?A:M.valueLabel,Oe=null!=(S=null==X?void 0:X.mark)?S:M.mark,Ne=null!=(T=null==X?void 0:X.markLabel)?T:M.markLabel,je=null!=(_=null==X?void 0:X.input)?_:M.input,Fe=kk({elementType:be,getSlotProps:ie,externalSlotProps:ke,externalForwardedProps:te,additionalProps:(0,De.A)({},SG(be)&&{as:L}),ownerState:(0,De.A)({},ne,null==ke?void 0:ke.ownerState),className:[ye.root,j]}),Ue=kk({elementType:we,externalSlotProps:Ce,ownerState:ne,className:ye.rail}),Be=kk({elementType:xe,externalSlotProps:Ie,additionalProps:{style:(0,De.A)({},re[ce].offset(fe),re[ce].leap(ge))},ownerState:(0,De.A)({},ne,null==Ie?void 0:Ie.ownerState),className:ye.track}),$e=kk({elementType:Ee,getSlotProps:ae,externalSlotProps:Re,ownerState:(0,De.A)({},ne,null==Re?void 0:Re.ownerState),className:ye.thumb}),We=kk({elementType:Ae,externalSlotProps:Me,ownerState:(0,De.A)({},ne,null==Me?void 0:Me.ownerState),className:ye.valueLabel}),ze=kk({elementType:Se,externalSlotProps:Oe,ownerState:ne,className:ye.mark}),He=kk({elementType:Te,externalSlotProps:Ne,ownerState:ne,className:ye.markLabel}),qe=kk({elementType:_e,getSlotProps:oe,externalSlotProps:je,ownerState:ne});return(0,Ve.jsxs)(be,(0,De.A)({},Fe,{children:[(0,Ve.jsx)(we,(0,De.A)({},Ue)),(0,Ve.jsx)(xe,(0,De.A)({},Be)),pe.filter((e=>e.value>=z&&e.value<=W)).map(((e,n)=>{const r=mG(e.value,z,W),i=re[ce].offset(r);let o;return o=!1===J?-1!==me.indexOf(e.value):"normal"===J&&(de?e.value>=me[0]&&e.value<=me[me.length-1]:e.value<=me[0])||"inverted"===J&&(de?e.value<=me[0]||e.value>=me[me.length-1]:e.value>=me[0]),(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(Se,(0,De.A)({"data-index":n},ze,!m_(Se)&&{markActive:o},{style:(0,De.A)({},i,ze.style),className:(0,Pe.A)(ze.className,o&&ye.markActive)})),null!=e.label?(0,Ve.jsx)(Te,(0,De.A)({"aria-hidden":!0,"data-index":n},He,!m_(Te)&&{markLabelActive:o},{style:(0,De.A)({},i,He.style),className:(0,Pe.A)(ye.markLabel,He.className,o&&ye.markLabelActive),children:e.label})):null]},n)})),me.map(((e,t)=>{const n=mG(e,z,W),r=re[ce].offset(n),i="off"===Z?NG:Ae;return(0,Ve.jsx)(i,(0,De.A)({},!m_(i)&&{valueLabelFormat:ee,valueLabelDisplay:Z,value:"function"===typeof ee?ee(Y(e),t):ee,index:t,open:se===t||le===t||"on"===Z,disabled:U},We,{children:(0,Ve.jsx)(Ee,(0,De.A)({"data-index":t},$e,{className:(0,Pe.A)(ye.thumb,$e.className,le===t&&ye.active,ue===t&&ye.focusVisible),style:(0,De.A)({},r,ve(t),$e.style),children:(0,Ve.jsx)(_e,(0,De.A)({"data-index":t,"aria-label":B?B(t):I,"aria-valuenow":Y(e),"aria-labelledby":D,"aria-valuetext":$?$(Y(e),t):R,value:me[t]},qe))}))}),t)}))]}))})),FG=jG;function UG(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function BG(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const $G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(e,s)=>{let{inputValue:l,getOptionLabel:c}=s,u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=UG(u));const d=u?e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=UG(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):e;return"number"===typeof r?d.slice(0,r):d}}(),VG=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))},WG=[];const zG=function(e){const{unstable_isActiveElementInListbox:n=VG,unstable_classNamePrefix:r="Mui",autoComplete:i=!1,autoHighlight:o=!1,autoSelect:a=!1,blurOnSelect:s=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:c=!1,componentName:u="useAutocomplete",defaultValue:d=(e.multiple?WG:null),disableClearable:h=!1,disableCloseOnSelect:p=!1,disabled:m,disabledItemsFocusable:f=!1,disableListWrap:g=!1,filterOptions:v=$G,filterSelectedOptions:y=!1,freeSolo:b=!1,getOptionDisabled:w,getOptionKey:x,getOptionLabel:E=e=>{var t;return null!=(t=e.label)?t:e},groupBy:A,handleHomeEndKeys:S=!e.freeSolo,id:T,includeInputInList:_=!1,inputValue:k,isOptionEqualToValue:C=(e,t)=>e===t,multiple:I=!1,onChange:R,onClose:D,onHighlightChange:L,onInputChange:P,onOpen:M,open:O,openOnFocus:N=!1,options:j,readOnly:F=!1,selectOnFocus:U=!e.freeSolo,value:B}=e,$=(0,jR.A)(T);let V=E;V=e=>{const t=E(e);return"string"!==typeof t?String(t):t};const W=t.useRef(!1),z=t.useRef(!0),H=t.useRef(null),q=t.useRef(null),[G,K]=t.useState(null),[Y,X]=t.useState(-1),Q=o?0:-1,J=t.useRef(Q),[Z,ee]=(0,iB.A)({controlled:B,default:d,name:u}),[te,ne]=(0,iB.A)({controlled:k,default:"",name:u,state:"inputValue"}),[re,ie]=t.useState(!1),oe=t.useCallback(((e,t)=>{if(!(I?Z.length<t.length:null!==t)&&!l)return;let n;if(I)n="";else if(null==t)n="";else{const e=V(t);n="string"===typeof e?e:""}te!==n&&(ne(n),P&&P(e,n,"reset"))}),[V,te,I,P,ne,l,Z]),[ae,se]=(0,iB.A)({controlled:O,default:!1,name:u,state:"open"}),[le,ce]=t.useState(!0),ue=!I&&null!=Z&&te===V(Z),de=ae&&!F,he=de?v(j.filter((e=>!y||!(I?Z:[Z]).some((t=>null!==t&&C(e,t))))),{inputValue:ue&&le?"":te,getOptionLabel:V}):[],pe=Tk({filteredOptions:he,value:Z,inputValue:te});t.useEffect((()=>{const e=Z!==pe.value;re&&!e||b&&!e||oe(null,Z)}),[Z,oe,re,pe.value,b]);const me=ae&&he.length>0&&!F,fe=(0,QC.A)((e=>{-1===e?H.current.focus():G.querySelector(`[data-tag-index="${e}"]`).focus()}));t.useEffect((()=>{I&&Y>Z.length-1&&(X(-1),fe(-1))}),[Z,I,Y,fe]);const ge=(0,QC.A)((e=>{let{event:t,index:n,reason:i="auto"}=e;if(J.current=n,-1===n?H.current.removeAttribute("aria-activedescendant"):H.current.setAttribute("aria-activedescendant",`${$}-option-${n}`),L&&L(t,-1===n?null:he[n],i),!q.current)return;const o=q.current.querySelector(`[role="option"].${r}-focused`);o&&(o.classList.remove(`${r}-focused`),o.classList.remove(`${r}-focusVisible`));let a=q.current;if("listbox"!==q.current.getAttribute("role")&&(a=q.current.parentElement.querySelector('[role="listbox"]')),!a)return;if(-1===n)return void(a.scrollTop=0);const s=q.current.querySelector(`[data-option-index="${n}"]`);if(s&&(s.classList.add(`${r}-focused`),"keyboard"===i&&s.classList.add(`${r}-focusVisible`),a.scrollHeight>a.clientHeight&&"mouse"!==i&&"touch"!==i)){const e=s,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop-e.offsetHeight*(A?1.3:0)<a.scrollTop&&(a.scrollTop=e.offsetTop-e.offsetHeight*(A?1.3:0))}})),ve=(0,QC.A)((e=>{let{event:t,diff:n,direction:r="next",reason:o="auto"}=e;if(!de)return;const a=function(e,t){if(!q.current||e<0||e>=he.length)return-1;let n=e;for(;;){const r=q.current.querySelector(`[data-option-index="${n}"]`),i=!f&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!i)return n;if(n="next"===t?(n+1)%he.length:(n-1+he.length)%he.length,n===e)return-1}}((()=>{const e=he.length-1;if("reset"===n)return Q;if("start"===n)return 0;if("end"===n)return e;const t=J.current+n;return t<0?-1===t&&_?-1:g&&-1!==J.current||Math.abs(n)>1?0:e:t>e?t===e+1&&_?-1:g||Math.abs(n)>1?e:0:t})(),r);if(ge({index:a,reason:o,event:t}),i&&"reset"!==n)if(-1===a)H.current.value=te;else{const e=V(he[a]);H.current.value=e;0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&H.current.setSelectionRange(te.length,e.length)}})),ye=t.useCallback((()=>{if(!de)return;const e=(()=>{if(-1!==J.current&&pe.filteredOptions&&pe.filteredOptions.length!==he.length&&pe.inputValue===te&&(I?Z.length===pe.value.length&&pe.value.every(((e,t)=>V(Z[t])===V(e))):(e=pe.value,t=Z,(e?V(e):"")===(t?V(t):"")))){const e=pe.filteredOptions[J.current];if(e)return BG(he,(t=>V(t)===V(e)))}var e,t;return-1})();if(-1!==e)return void(J.current=e);const t=I?Z[0]:Z;if(0!==he.length&&null!=t){if(q.current)if(null==t)J.current>=he.length-1?ge({index:he.length-1}):ge({index:J.current});else{const e=he[J.current];if(I&&e&&-1!==BG(Z,(t=>C(e,t))))return;const n=BG(he,(e=>C(e,t)));-1===n?ve({diff:"reset"}):ge({index:n})}}else ve({diff:"reset"})}),[he.length,!I&&Z,y,ve,ge,de,te,I]),be=(0,QC.A)((e=>{(0,BC.A)(q,e),e&&ye()}));t.useEffect((()=>{ye()}),[ye]);const we=e=>{ae||(se(!0),ce(!0),M&&M(e))},xe=(e,t)=>{ae&&(se(!1),D&&D(e,t))},Ee=(e,t,n,r)=>{if(I){if(Z.length===t.length&&Z.every(((e,n)=>e===t[n])))return}else if(Z===t)return;R&&R(e,t,n,r),ee(t)},Ae=t.useRef(!1),Se=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",i=t;if(I){i=Array.isArray(Z)?Z.slice():[];const e=BG(i,(e=>C(t,e)));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),r="removeOption")}oe(e,i),Ee(e,i,r,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||xe(e,r),(!0===s||"touch"===s&&Ae.current||"mouse"===s&&!Ae.current)&&H.current.blur()},Te=(e,t)=>{if(!I)return;""===te&&xe(e,"toggleInput");let n=Y;-1===Y?""===te&&"previous"===t&&(n=Z.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===Z.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===Z.length||"previous"===t&&-1===n)return-1;const e=G.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),X(n),fe(n)},_e=e=>{W.current=!0,ne(""),P&&P(e,"","clear"),Ee(e,I?[]:null,"clear")},ke=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(X(-1),fe(-1)),229!==t.which))switch(t.key){case"Home":de&&S&&(t.preventDefault(),ve({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":de&&S&&(t.preventDefault(),ve({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),ve({diff:-5,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"PageDown":t.preventDefault(),ve({diff:5,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowDown":t.preventDefault(),ve({diff:1,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowUp":t.preventDefault(),ve({diff:-1,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"ArrowLeft":Te(t,"previous");break;case"ArrowRight":Te(t,"next");break;case"Enter":if(-1!==J.current&&de){const e=he[J.current],n=!!w&&w(e);if(t.preventDefault(),n)return;Se(t,e,"selectOption"),i&&H.current.setSelectionRange(H.current.value.length,H.current.value.length)}else b&&""!==te&&!1===ue&&(I&&t.preventDefault(),Se(t,te,"createOption","freeSolo"));break;case"Escape":de?(t.preventDefault(),t.stopPropagation(),xe(t,"escape")):c&&(""!==te||I&&Z.length>0)&&(t.preventDefault(),t.stopPropagation(),_e(t));break;case"Backspace":if(I&&!F&&""===te&&Z.length>0){const e=-1===Y?Z.length-1:Y,n=Z.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:Z[e]})}break;case"Delete":if(I&&!F&&""===te&&Z.length>0&&-1!==Y){const e=Y,n=Z.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:Z[e]})}}},Ce=e=>{ie(!0),N&&!W.current&&we(e)},Ie=e=>{n(q)?H.current.focus():(ie(!1),z.current=!0,W.current=!1,a&&-1!==J.current&&de?Se(e,he[J.current],"blur"):a&&b&&""!==te?Se(e,te,"blur","freeSolo"):l&&oe(e,Z),xe(e,"blur"))},Re=e=>{const t=e.target.value;te!==t&&(ne(t),ce(!1),P&&P(e,t,"input")),""===t?h||I||Ee(e,null,"clear"):we(e)},Le=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));J.current!==t&&ge({event:e,index:t,reason:"mouse"})},Pe=e=>{ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ae.current=!0},Me=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Se(e,he[t],"selectOption"),Ae.current=!1},Oe=e=>t=>{const n=Z.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:Z[e]})},Ne=e=>{ae?xe(e,"toggleInput"):we(e)},je=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==$&&e.preventDefault()},Fe=e=>{e.currentTarget.contains(e.target)&&(H.current.focus(),U&&z.current&&H.current.selectionEnd-H.current.selectionStart===0&&H.current.select(),z.current=!1)},Ue=e=>{m||""!==te&&ae||Ne(e)};let Be=b&&te.length>0;Be=Be||(I?Z.length>0:null!==Z);let $e=he;if(A){new Map;$e=he.reduce(((e,t,n)=>{const r=A(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return m&&re&&Ie(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-owns":me?`${$}-listbox`:null},e,{onKeyDown:ke(e),onMouseDown:je,onClick:Fe})},getInputLabelProps:()=>({id:`${$}-label`,htmlFor:$}),getInputProps:()=>({id:$,value:te,onBlur:Ie,onFocus:Ce,onChange:Re,onMouseDown:Ue,"aria-activedescendant":de?"":null,"aria-autocomplete":i?"both":"list","aria-controls":me?`${$}-listbox`:void 0,"aria-expanded":me,autoComplete:"off",ref:H,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:m}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:_e}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ne}),getTagProps:e=>{let{index:t}=e;return(0,De.A)({key:t,"data-tag-index":t,tabIndex:-1},!F&&{onDelete:Oe(t)})},getListboxProps:()=>({role:"listbox",id:`${$}-listbox`,"aria-labelledby":`${$}-label`,ref:be,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;var r;const i=(I?Z:[Z]).some((e=>null!=e&&C(n,e))),o=!!w&&w(n);return{key:null!=(r=null==x?void 0:x(n))?r:V(n),tabIndex:-1,role:"option",id:`${$}-option-${t}`,onMouseMove:Le,onClick:Me,onTouchStart:Pe,"data-option-index":t,"aria-disabled":o,"aria-selected":i}},id:$,inputValue:te,value:Z,dirty:Be,expanded:de&&G,popupOpen:de,focused:re||-1!==Y,anchorEl:G,setAnchorEl:K,focusedTag:Y,groupedOptions:$e}};function HG(e){return(0,GT.Ay)("MuiListSubheader",e)}(0,Ge.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const qG=["className","color","component","disableGutters","disableSticky","inset"],GG=(0,WT.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,zT.A)(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),KG=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:a=!1,disableSticky:s=!1,inset:l=!1}=n,c=(0,Le.A)(n,qG),u=(0,De.A)({},n,{color:i,component:o,disableGutters:a,disableSticky:s,inset:l}),d=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,a={root:["root","default"!==n&&`color${(0,zT.A)(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,VT.A)(a,HG,t)})(u);return(0,Ve.jsx)(GG,(0,De.A)({as:o,className:(0,Pe.A)(d.root,r),ref:t,ownerState:u},c))}));KG.muiSkipListHighlight=!0;const YG=KG;function XG(e){return(0,GT.Ay)("MuiAutocomplete",e)}const QG=(0,Ge.A)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var JG,ZG;const eK=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],tK=["ref"],nK=["key"],rK=["key"],iK=(0,WT.Ay)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:a,size:s}=n;return[{[`& .${QG.tag}`]:t.tag},{[`& .${QG.tag}`]:t[`tagSize${(0,zT.A)(s)}`]},{[`& .${QG.inputRoot}`]:t.inputRoot},{[`& .${QG.input}`]:t.input},{[`& .${QG.input}`]:a&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})({[`&.${QG.focused} .${QG.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${QG.clearIndicator}`]:{visibility:"visible"}},[`& .${QG.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${QG.inputRoot}`]:{[`.${QG.hasPopupIcon}&, .${QG.hasClearIcon}&`]:{paddingRight:30},[`.${QG.hasPopupIcon}.${QG.hasClearIcon}&`]:{paddingRight:56},[`& .${QG.input}`]:{width:0,minWidth:30}},[`& .${bD.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${bD.root}.${cD.sizeSmall}`]:{[`& .${bD.input}`]:{padding:"2px 4px 3px 0"}},[`& .${jD.root}`]:{padding:9,[`.${QG.hasPopupIcon}&, .${QG.hasClearIcon}&`]:{paddingRight:39},[`.${QG.hasPopupIcon}.${QG.hasClearIcon}&`]:{paddingRight:65},[`& .${QG.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${QG.endAdornment}`]:{right:9}},[`& .${jD.root}.${cD.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${QG.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${_D.root}`]:{paddingTop:19,paddingLeft:8,[`.${QG.hasPopupIcon}&, .${QG.hasClearIcon}&`]:{paddingRight:39},[`.${QG.hasPopupIcon}.${QG.hasClearIcon}&`]:{paddingRight:65},[`& .${_D.input}`]:{padding:"7px 4px"},[`& .${QG.endAdornment}`]:{right:9}},[`& .${_D.root}.${cD.sizeSmall}`]:{paddingBottom:1,[`& .${_D.input}`]:{padding:"2.5px 4px"}},[`& .${cD.hiddenLabel}`]:{paddingTop:8},[`& .${_D.root}.${cD.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${QG.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${_D.root}.${cD.hiddenLabel}.${cD.sizeSmall}`]:{[`& .${QG.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${QG.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${QG.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${QG.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${QG.inputRoot}`]:{flexWrap:"wrap"}}}]}),oK=(0,WT.Ay)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),aK=(0,WT.Ay)(Sk,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),sK=(0,WT.Ay)(Sk,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),lK=(0,WT.Ay)(WU,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${QG.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}})),cK=(0,WT.Ay)(JT,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body1,{overflow:"auto"})})),uK=(0,WT.Ay)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),dK=(0,WT.Ay)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),hK=(0,WT.Ay)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${QG.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${QG.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${QG.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${QG.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${QG.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,HT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}})),pK=(0,WT.Ay)(YG,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),mK=(0,WT.Ay)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${QG.option}`]:{paddingLeft:24}}),fK=t.forwardRef((function(e,n){var r,i,o,a;const s=(0,Je.b)({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:h,className:p,clearIcon:m=JG||(JG=(0,Ve.jsx)(FP,{fontSize:"small"})),clearOnBlur:f=!s.freeSolo,clearOnEscape:g=!1,clearText:v="Clear",closeText:y="Close",componentsProps:b={},defaultValue:w=(s.multiple?[]:null),disableClearable:x=!1,disableCloseOnSelect:E=!1,disabled:A=!1,disabledItemsFocusable:S=!1,disableListWrap:T=!1,disablePortal:_=!1,filterSelectedOptions:k=!1,forcePopupIcon:C="auto",freeSolo:I=!1,fullWidth:R=!1,getLimitTagsText:D=e=>`+${e}`,getOptionLabel:L,groupBy:P,handleHomeEndKeys:M=!s.freeSolo,includeInputInList:O=!1,limitTags:N=-1,ListboxComponent:j="ul",ListboxProps:F,loading:U=!1,loadingText:B="Loading\u2026",multiple:$=!1,noOptionsText:V="No options",openOnFocus:W=!1,openText:z="Open",PaperComponent:H=JT,PopperComponent:q=WU,popupIcon:G=ZG||(ZG=(0,Ve.jsx)(NL,{})),readOnly:K=!1,renderGroup:Y,renderInput:X,renderOption:Q,renderTags:J,selectOnFocus:Z=!s.freeSolo,size:ee="medium",slotProps:te={}}=s,ne=(0,Le.A)(s,eK),{getRootProps:re,getInputProps:ie,getInputLabelProps:oe,getPopupIndicatorProps:ae,getClearProps:se,getTagProps:le,getListboxProps:ce,getOptionProps:ue,value:de,dirty:he,expanded:pe,id:me,popupOpen:fe,focused:ge,focusedTag:ve,anchorEl:ye,setAnchorEl:be,inputValue:we,groupedOptions:xe}=zG((0,De.A)({},s,{componentName:"Autocomplete"})),Ee=!x&&!A&&he&&!K,Ae=(!I||!0===C)&&!1!==C,{onMouseDown:Se}=ie(),{ref:Te}=null!=F?F:{},_e=ce(),{ref:ke}=_e,Ce=(0,Le.A)(_e,tK),Ie=(0,j_.A)(ke,Te),Re=L||(e=>{var t;return null!=(t=e.label)?t:e}),Me=(0,De.A)({},s,{disablePortal:_,expanded:pe,focused:ge,fullWidth:R,getOptionLabel:Re,hasClearIcon:Ee,hasPopupIcon:Ae,inputFocused:-1===ve,popupOpen:fe,size:ee}),Oe=(e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:a,hasPopupIcon:s,inputFocused:l,popupOpen:c,size:u}=e,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",a&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${(0,zT.A)(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,VT.A)(d,XG,t)})(Me);let Ne;if($&&de.length>0){const e=e=>(0,De.A)({className:Oe.tag,disabled:A},le(e));Ne=J?J(de,e,Me):de.map(((t,n)=>{const r=e({index:n}),{key:i}=r,o=(0,Le.A)(r,nK);return(0,Ve.jsx)(CB,(0,De.A)({label:Re(t),size:ee},o,h),i)}))}if(N>-1&&Array.isArray(Ne)){const e=Ne.length-N;!ge&&e>0&&(Ne=Ne.splice(0,N),Ne.push((0,Ve.jsx)("span",{className:Oe.tag,children:D(e)},Ne.length)))}const je=Y||(e=>(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)(pK,{className:Oe.groupLabel,ownerState:Me,component:"div",children:e.group}),(0,Ve.jsx)(mK,{className:Oe.groupUl,ownerState:Me,children:e.children})]},e.key)),Fe=Q||((e,t)=>{const{key:n}=e,r=(0,Le.A)(e,rK);return(0,Ve.jsx)("li",(0,De.A)({},r,{children:Re(t)}),n)}),Ue=(e,t)=>{const n=ue({option:e,index:t});return Fe((0,De.A)({},n,{className:Oe.option}),e,{selected:n["aria-selected"],index:t,inputValue:we},Me)},Be=null!=(r=te.clearIndicator)?r:b.clearIndicator,$e=null!=(i=te.paper)?i:b.paper,We=null!=(o=te.popper)?o:b.popper,ze=null!=(a=te.popupIndicator)?a:b.popupIndicator;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(iK,(0,De.A)({ref:n,className:(0,Pe.A)(Oe.root,p),ownerState:Me},re(ne),{children:X({id:me,disabled:A,fullWidth:!0,size:"small"===ee?"small":void 0,InputLabelProps:oe(),InputProps:(0,De.A)({ref:be,className:Oe.inputRoot,startAdornment:Ne,onClick:e=>{e.target===e.currentTarget&&Se(e)}},(Ee||Ae)&&{endAdornment:(0,Ve.jsxs)(oK,{className:Oe.endAdornment,ownerState:Me,children:[Ee?(0,Ve.jsx)(aK,(0,De.A)({},se(),{"aria-label":v,title:v,ownerState:Me},Be,{className:(0,Pe.A)(Oe.clearIndicator,null==Be?void 0:Be.className),children:m})):null,Ae?(0,Ve.jsx)(sK,(0,De.A)({},ae(),{disabled:A,"aria-label":fe?y:z,title:fe?y:z,ownerState:Me},ze,{className:(0,Pe.A)(Oe.popupIndicator,null==ze?void 0:ze.className),children:G})):null]})}),inputProps:(0,De.A)({className:Oe.input,disabled:A,readOnly:K},ie())})})),ye?(0,Ve.jsx)(lK,(0,De.A)({as:q,disablePortal:_,style:{width:ye?ye.clientWidth:null},ownerState:Me,role:"presentation",anchorEl:ye,open:fe},We,{className:(0,Pe.A)(Oe.popper,null==We?void 0:We.className),children:(0,Ve.jsxs)(cK,(0,De.A)({ownerState:Me,as:H},$e,{className:(0,Pe.A)(Oe.paper,null==$e?void 0:$e.className),children:[U&&0===xe.length?(0,Ve.jsx)(uK,{className:Oe.loading,ownerState:Me,children:B}):null,0!==xe.length||I||U?null:(0,Ve.jsx)(dK,{className:Oe.noOptions,ownerState:Me,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:V}),xe.length>0?(0,Ve.jsx)(hK,(0,De.A)({as:j,className:Oe.listbox,ownerState:Me},Ce,F,{ref:Ie,children:xe.map(((e,t)=>P?je({key:e.key,group:e.group,children:e.options.map(((t,n)=>Ue(t,e.index+n)))}):Ue(e,t)))})):null]}))})):null]})})),gK=fK,vK=(0,u_.A)((0,Ve.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff"),yK=(0,u_.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),bK=(0,u_.A)([(0,Ve.jsx)("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07z"},"0"),(0,Ve.jsx)("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52"},"1")],"LocalFireDepartment"),wK=(0,u_.A)((0,Ve.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop"),xK=(0,u_.A)((0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),EK=(0,u_.A)((0,Ve.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),AK=(0,u_.A)((0,Ve.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),SK={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},TK={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},_K={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_WIDTH:"mediaWidth"},kK=Object.entries(_K),CK=kK.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{}),IK=kK.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"}),RK=(Object.entries(IK).reduce(((e,t)=>{let[n,r]=t;const i=CK[n];return i&&(e[r]=i),e}),{userinactivechange:"userinactive"}),Object.entries(CK).reduce(((e,t)=>{let[n,r]=t;const i=IK[n];return i&&(e[r]=i),e}),{userinactive:"userinactivechange"})),DK={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},LK="disabled",PK="showing",MK="mouse",OK="touch",NK="unavailable",jK="unsupported",FK={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},UK="fullscreen";function BK(e){if(e){const{id:t,width:n,height:r}=e;return[t,n,r].filter((e=>null!=e)).join(":")}}function $K(e){if(e){const[t,n,r]=e.split(":");return{id:t,width:+n,height:+r}}}function VK(e){if(e){const{id:t,kind:n,language:r,label:i}=e;return[t,n,r,i].filter((e=>null!=e)).join(":")}}function WK(e){if(e){const[t,n,r,i]=e.split(":");return{id:t,kind:n,language:r,label:i}}}function zK(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function HK(e){return"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}function qK(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}const GK=e=>new Promise((t=>setTimeout(t,e))),KK=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],YK=e=>{if(!HK(e))return"";const t=Math.abs(e),n=t!==e,r=new Date(0,0,0,0,0,t,0),i=[r.getHours(),r.getMinutes(),r.getSeconds()].map(((e,t)=>e&&((e,t)=>`${e} ${1===e?KK[t].singular:KK[t].plural}`)(e,t))).filter((e=>e)).join(", ");return`${i}${n?" remaining":""}`};function XK(e,t){let n=!1;e<0&&(n=!0,e=0-e),e=e<0?0:e;let r=Math.floor(e%60),i=Math.floor(e/60%60),o=Math.floor(e/3600);const a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(o=i=r="0"),o=o>0||s>0?o+":":"",i=((o||a>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,(n?"-":"")+o+i+r}Object.freeze({length:0,start(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});const QK={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute",live:"live","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var JK;const ZK={en:QK};let eY=(null==(JK=globalThis.navigator)?void 0:JK.language.split("-")[0])||"en";const tY=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return((null==(n=ZK[eY])?void 0:n[e])||QK[e]).replace(/\{(\w+)\}/g,((e,n)=>void 0!==t[n]?String(t[n]):`{${n}}`))};class nY{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}class rY extends nY{}class iY extends rY{constructor(){super(...arguments),this.role=null}}const oY={createElement:function(){return new aY.HTMLElement},createElementNS:function(){return new aY.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent:e=>!1},aY={ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},document:oY,Node:rY,Element:iY,HTMLElement:class extends iY{constructor(){super(...arguments),this.innerHTML=""}get content(){return new aY.DocumentFragment}},DocumentFragment:class extends nY{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem:e=>null,setItem(e,t){},removeItem(e){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia:e=>({matches:!1,media:e})},sY="undefined"===typeof window||"undefined"===typeof window.customElements,lY=Object.keys(aY).every((e=>e in globalThis)),cY=sY&&!lY?aY:globalThis,uY=sY&&!lY?oY:globalThis.document,dY=new WeakMap,hY=e=>{let t=dY.get(e);return t||dY.set(e,t=new Set),t},pY=new cY.ResizeObserver((e=>{for(const t of e)for(const e of hY(t.target))e(t)}));function mY(e,t){hY(e).add(t),pY.observe(e)}function fY(e,t){const n=hY(e);n.delete(t),n.size||pY.unobserve(e)}function gY(e){var t;return null!=(t=vY(e))?t:xY(e,"media-controller")}function vY(e){var t;const{MEDIA_CONTROLLER:n}=TK,r=e.getAttribute(n);if(r)return null==(t=AY(e))?void 0:t.getElementById(r)}const yY=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".value";const r=e.querySelector(n);r&&(r.textContent=t)},bY=(e,t)=>((e,t)=>{const n=`slot[name="${t}"]`,r=e.shadowRoot.querySelector(n);return r?r.children:[]})(e,t)[0],wY=(e,t)=>!(!e||!t)&&(!!(null==e?void 0:e.contains(t))||wY(e,t.getRootNode().host)),xY=(e,t)=>{if(!e)return null;const n=e.closest(t);return n||xY(e.getRootNode().host,t)};function EY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var t;const n=null==e?void 0:e.activeElement;return n?null!=(t=EY(n.shadowRoot))?t:n:null}function AY(e){var t;const n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e);return n instanceof ShadowRoot||n instanceof Document?n:null}function SY(e){let{depth:t=3,checkOpacity:n=!0,checkVisibilityCSS:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.checkVisibility)return e.checkVisibility({checkOpacity:n,checkVisibilityCSS:r});let i=e;for(;i&&t>0;){const e=getComputedStyle(i);if(n&&"0"===e.opacity||r&&"hidden"===e.visibility||"none"===e.display)return!1;i=i.parentElement,t--}return!0}function TY(e,t){const n=function(e,t){var n,r;let i;for(i of null!=(n=e.querySelectorAll("style:not([media])"))?n:[]){let e;try{e=null==(r=i.sheet)?void 0:r.cssRules}catch{continue}for(const n of null!=e?e:[])if(t(n.selectorText))return n}}(e,(e=>e===t));return n||_Y(e,t)}function _Y(e,t){var n,r;const i=null!=(n=e.querySelectorAll("style:not([media])"))?n:[],o=null==i?void 0:i[i.length-1];return(null==o?void 0:o.sheet)?(null==o||o.sheet.insertRule(`${t}{}`,o.sheet.cssRules.length),null==(r=o.sheet.cssRules)?void 0:r[o.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",e),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function kY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;const r=e.getAttribute(t);return null!=r?+r:n}function CY(e,t,n){const r=+n;null==n||Number.isNaN(r)?e.hasAttribute(t)&&e.removeAttribute(t):kY(e,t,void 0)!==r&&e.setAttribute(t,`${r}`)}function IY(e,t){return e.hasAttribute(t)}function RY(e,t,n){null!=n?IY(e,t)!=n&&e.toggleAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function DY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var r;return null!=(r=e.getAttribute(t))?r:n}function LY(e,t,n){if(null==n)return void(e.hasAttribute(t)&&e.removeAttribute(t));const r=`${n}`;DY(e,t,void 0)!==r&&e.setAttribute(t,r)}var PY,MY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},OY=(e,t,n)=>(MY(e,t,"read from private field"),n?n.call(e):t.get(e)),NY=(e,t,n,r)=>(MY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const jY=uY.createElement("template");jY.innerHTML="\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n";class FY extends cY.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,PY,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=jY.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=uY.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(r.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[TK.MEDIA_CONTROLLER,CK.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===TK.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=OY(this,PY))?void 0:r.unassociateElement)||i.call(r,this),NY(this,PY,null)),n&&this.isConnected&&(NY(this,PY,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=OY(this,PY))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n,r;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),NY(this,PY,function(e){var t;const n=e.getAttribute(TK.MEDIA_CONTROLLER);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return xY(e,"media-controller")}(this)),this.getAttribute(TK.MEDIA_CONTROLLER)&&(null==(t=null==(e=OY(this,PY))?void 0:e.associateElement)||t.call(e,this)),null==(n=OY(this,PY))||n.addEventListener("pointerdown",this),null==(r=OY(this,PY))||r.addEventListener("click",this)}disconnectedCallback(){var e,t,n,r;this.getAttribute(TK.MEDIA_CONTROLLER)&&(null==(t=null==(e=OY(this,PY))?void 0:e.unassociateElement)||t.call(e,this)),null==(n=OY(this,PY))||n.removeEventListener("pointerdown",this),null==(r=OY(this,PY))||r.removeEventListener("click",this),NY(this,PY,null)}handleEvent(e){var t;const n=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==n?void 0:n.localName))if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){const{clientX:t,clientY:n}=e,{left:r,top:i,width:o,height:a}=this.getBoundingClientRect(),s=t-r,l=n-i;if(s<0||l<0||s>o||l>a||0===o&&0===a)return;const{pointerType:c=this._pointerType}=e;if(this._pointerType=void 0,c===OK)return void this.handleTap(e);if(c===MK)return void this.handleMouseClick(e)}}get mediaPaused(){return IY(this,CK.MEDIA_PAUSED)}set mediaPaused(e){RY(this,CK.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?SK.MEDIA_PLAY_REQUEST:SK.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new cY.CustomEvent(t,{composed:!0,bubbles:!0}))}}PY=new WeakMap,cY.customElements.get("media-gesture-receiver")||cY.customElements.define("media-gesture-receiver",FY);var UY,BY,$Y,VY,WY,zY,HY,qY,GY,KY,YY,XY,QY,JY,ZY,eX,tX,nX,rX,iX=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},oX=(e,t,n)=>(iX(e,t,"read from private field"),n?n.call(e):t.get(e)),aX=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},sX=(e,t,n,r)=>(iX(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),lX=(e,t,n)=>(iX(e,t,"access private method"),n);const cX={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"},uX=uY.createElement("template");uX.innerHTML=`\n  <style>\n    \n    :host([${CK.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([${cX.AUDIO}])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    slot[name=media] {\n      display: var(--media-slot-display, contents);\n    }\n\n    \n    :host([${cX.AUDIO}]) slot[name=media] {\n      display: var(--media-slot-display, none);\n    }\n\n    \n    :host([${cX.AUDIO}]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    \n    :host(:not([${cX.AUDIO}])[${cX.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),\n    :host(:not([${cX.AUDIO}])[${cX.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {\n      pointer-events: auto;\n    }\n\n    :host(:not([${cX.AUDIO}])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([${cX.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([${cX.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    \n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    \n    :host(:not([${cX.AUDIO}])) .spacer {\n      flex-grow: 1;\n    }\n\n    \n    :host(:-webkit-full-screen) {\n      \n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not([${cX.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {\n      opacity: 1;\n      transition: var(--media-control-transition-in, opacity 0.25s);\n    }\n\n    \n    :host([${cX.USER_INACTIVE}]:not([${CK.MEDIA_PAUSED}]):not([${CK.MEDIA_IS_AIRPLAYING}]):not([${CK.MEDIA_IS_CASTING}]):not([${cX.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${cX.NO_AUTOHIDE}]):not([role=dialog])) {\n      opacity: 0;\n      transition: var(--media-control-transition-out, opacity 1s);\n    }\n\n    :host([${cX.USER_INACTIVE}]:not([${cX.NO_AUTOHIDE}]):not([${CK.MEDIA_PAUSED}]):not([${CK.MEDIA_IS_CASTING}]):not([${cX.AUDIO}])) ::slotted([slot=media]) {\n      cursor: none;\n    }\n\n    :host([${cX.USER_INACTIVE}][${cX.AUTOHIDE_OVER_CONTROLS}]:not([${cX.NO_AUTOHIDE}]):not([${CK.MEDIA_PAUSED}]):not([${CK.MEDIA_IS_CASTING}]):not([${cX.AUDIO}])) * {\n     --media-cursor: none;\n     cursor: none;\n    }\n\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    \n    :host(:not([${cX.AUDIO}])[${CK.MEDIA_HAS_PLAYED}]) slot[name=poster] {\n      display: none;\n    }\n\n    ::slotted([role=dialog]) {\n      width: 100%;\n      height: 100%;\n      align-self: center;\n    }\n\n    ::slotted([role=menu]) {\n      align-self: end;\n    }\n  </style>\n\n  <slot name="media" part="layer media-layer"></slot>\n  <slot name="poster" part="layer poster-layer"></slot>\n  <slot name="gestures-chrome" part="layer gesture-layer">\n    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>\n  </slot>\n  <span part="layer vertical-layer">\n    <slot name="top-chrome" part="top chrome"></slot>\n    <slot name="middle-chrome" part="middle chrome"></slot>\n    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>\n    \n    <slot part="bottom chrome"></slot>\n  </span>\n  <slot name="dialog" part="layer dialog-layer"></slot>\n`;const dX=Object.values(CK);function hX(e,t){var n;if(!e.isConnected)return;const r=function(e){const t=e.split(/\s+/);return Object.fromEntries(t.map((e=>e.split(":"))))}(null!=(n=e.getAttribute(cX.BREAKPOINTS))?n:"sm:384 md:576 lg:768 xl:960"),i=function(e,t){return Object.keys(e).filter((n=>t>=parseInt(e[n])))}(r,t);let o=!1;if(Object.keys(r).forEach((t=>{i.includes(t)?e.hasAttribute(`breakpoint${t}`)||(e.setAttribute(`breakpoint${t}`,""),o=!0):e.hasAttribute(`breakpoint${t}`)&&(e.removeAttribute(`breakpoint${t}`),o=!0)})),o){const t=new CustomEvent(IK.BREAKPOINTS_CHANGE,{detail:i});e.dispatchEvent(t)}e.breakpointsComputed||(e.breakpointsComputed=!0,e.dispatchEvent(new CustomEvent(IK.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}class pX extends cY.HTMLElement{constructor(){super(),aX(this,zY),aX(this,KY),aX(this,XY),aX(this,JY),aX(this,eX),aX(this,nX),aX(this,UY,0),aX(this,BY,null),aX(this,$Y,null),aX(this,VY,void 0),this.breakpointsComputed=!1,aX(this,WY,new MutationObserver(lX(this,zY,HY).bind(this))),aX(this,qY,!1),aX(this,GY,(e=>{oX(this,qY)||(setTimeout((()=>{!function(e){hX(e.target,e.contentRect.width)}(e),sX(this,qY,!1)}),0),sX(this,qY,!0))})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(uX.content.cloneNode(!0)));const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",(()=>{e.assignedElements({flatten:!0}).length?this.handleMediaUpdated(this.media):oX(this,BY)&&this.mediaUnsetCallback(oX(this,BY))}))}static get observedAttributes(){return[cX.AUTOHIDE,cX.GESTURES_DISABLED].concat(dX).filter((e=>![CK.MEDIA_RENDITION_LIST,CK.MEDIA_AUDIO_TRACK_LIST,CK.MEDIA_CHAPTERS_CUES,CK.MEDIA_WIDTH,CK.MEDIA_HEIGHT,CK.MEDIA_ERROR,CK.MEDIA_ERROR_MESSAGE].includes(e)))}attributeChangedCallback(e,t,n){e.toLowerCase()==cX.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return"SLOT"==(null==e?void 0:e.nodeName)&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(sX(this,BY,e),e.localName.includes("-")&&await cY.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;oX(this,WY).observe(this,{childList:!0,subtree:!0}),mY(this,oX(this,GY));const t=null!=this.getAttribute(cX.AUDIO),n=tY(t?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(cX.USER_INACTIVE,""),hX(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),null==(e=cY.window)||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;oX(this,WY).disconnect(),fY(this,oX(this,GY)),this.media&&this.mediaUnsetCallback(this.media),null==(e=cY.window)||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){sX(this,BY,null)}handleEvent(e){switch(e.type){case"pointerdown":sX(this,UY,e.timeStamp);break;case"pointermove":lX(this,KY,YY).call(this,e);break;case"pointerup":lX(this,XY,QY).call(this,e);break;case"mouseleave":lX(this,JY,ZY).call(this);break;case"mouseup":this.removeAttribute(cX.KEYBOARD_CONTROL);break;case"keyup":lX(this,nX,rX).call(this),this.setAttribute(cX.KEYBOARD_CONTROL,"")}}set autohide(e){const t=Number(e);sX(this,VY,isNaN(t)?0:t)}get autohide(){return(void 0===oX(this,VY)?2:oX(this,VY)).toString()}get breakpoints(){return DY(this,cX.BREAKPOINTS)}set breakpoints(e){LY(this,cX.BREAKPOINTS,e)}get audio(){return IY(this,cX.AUDIO)}set audio(e){RY(this,cX.AUDIO,e)}get gesturesDisabled(){return IY(this,cX.GESTURES_DISABLED)}set gesturesDisabled(e){RY(this,cX.GESTURES_DISABLED,e)}get keyboardControl(){return IY(this,cX.KEYBOARD_CONTROL)}set keyboardControl(e){RY(this,cX.KEYBOARD_CONTROL,e)}get noAutohide(){return IY(this,cX.NO_AUTOHIDE)}set noAutohide(e){RY(this,cX.NO_AUTOHIDE,e)}get autohideOverControls(){return IY(this,cX.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){RY(this,cX.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return IY(this,cX.USER_INACTIVE)}set userInteractive(e){RY(this,cX.USER_INACTIVE,e)}}UY=new WeakMap,BY=new WeakMap,$Y=new WeakMap,VY=new WeakMap,WY=new WeakMap,zY=new WeakSet,HY=function(e){const t=this.media;for(const n of e){if("childList"!==n.type)continue;const e=n.removedNodes;for(const r of e){if("media"!=r.slot||n.target!=this)continue;let e=n.previousSibling&&n.previousSibling.previousElementSibling;if(e&&t){let t="media"!==e.slot;for(;null!==(e=e.previousSibling);)"media"==e.slot&&(t=!1);t&&this.mediaUnsetCallback(r)}else this.mediaUnsetCallback(r)}if(t)for(const r of n.addedNodes)r===t&&this.handleMediaUpdated(t)}},qY=new WeakMap,GY=new WeakMap,KY=new WeakSet,YY=function(e){if("mouse"!==e.pointerType){const t=250;if(e.timeStamp-oX(this,UY)<t)return}lX(this,eX,tX).call(this),clearTimeout(oX(this,$Y));const t=this.hasAttribute(cX.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(e.target)||t)&&lX(this,nX,rX).call(this)},XY=new WeakSet,QY=function(e){if("touch"===e.pointerType){const t=!this.hasAttribute(cX.USER_INACTIVE);[this,this.media].includes(e.target)&&t?lX(this,JY,ZY).call(this):lX(this,nX,rX).call(this)}else e.composedPath().some((e=>["media-play-button","media-fullscreen-button"].includes(null==e?void 0:e.localName)))&&lX(this,nX,rX).call(this)},JY=new WeakSet,ZY=function(){if(oX(this,VY)<0)return;if(this.hasAttribute(cX.USER_INACTIVE))return;this.setAttribute(cX.USER_INACTIVE,"");const e=new cY.CustomEvent(IK.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},eX=new WeakSet,tX=function(){if(!this.hasAttribute(cX.USER_INACTIVE))return;this.removeAttribute(cX.USER_INACTIVE);const e=new cY.CustomEvent(IK.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},nX=new WeakSet,rX=function(){lX(this,eX,tX).call(this),clearTimeout(oX(this,$Y));const e=parseInt(this.autohide);e<0||sX(this,$Y,setTimeout((()=>{lX(this,JY,ZY).call(this)}),1e3*e))},cY.customElements.get("media-container")||cY.customElements.define("media-container",pX);var mX,fX,gX,vX,yX,bX,wX=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xX=(e,t,n)=>(wX(e,t,"read from private field"),n?n.call(e):t.get(e)),EX=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},AX=(e,t,n,r)=>(wX(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class SX{constructor(e,t){let{defaultValue:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{defaultValue:void 0};EX(this,yX),EX(this,mX,void 0),EX(this,fX,void 0),EX(this,gX,void 0),EX(this,vX,new Set),AX(this,mX,e),AX(this,fX,t),AX(this,gX,new Set(n))}[Symbol.iterator](){return xX(this,yX,bX).values()}get length(){return xX(this,yX,bX).size}get value(){var e;return null!=(e=[...xX(this,yX,bX)].join(" "))?e:""}set value(e){var t;e!==this.value&&(AX(this,vX,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...xX(this,yX,bX)][e]}values(){return xX(this,yX,bX).values()}forEach(e,t){xX(this,yX,bX).forEach(e,t)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>xX(this,vX).add(e))),(""!==this.value||(null==(e=xX(this,mX))?void 0:e.hasAttribute(`${xX(this,fX)}`)))&&(null==(t=xX(this,mX))||t.setAttribute(`${xX(this,fX)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>xX(this,vX).delete(e))),null==(e=xX(this,mX))||e.setAttribute(`${xX(this,fX)}`,`${this.value}`)}contains(e){return xX(this,yX,bX).has(e)}toggle(e,t){return"undefined"!==typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}mX=new WeakMap,fX=new WeakMap,gX=new WeakMap,vX=new WeakMap,yX=new WeakSet,bX=function(){return xX(this,vX).size?xX(this,vX):xX(this,gX)};const TX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,n,r]=e.split(":"),i=r?decodeURIComponent(r):void 0;return{kind:"cc"===t?DK.CAPTIONS:DK.SUBTITLES,language:n,label:i}},_X=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s+/)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").map((t=>{const n=TX(t);return{...e,...n}}))},kX=e=>e?Array.isArray(e)?e.map((e=>"string"===typeof e?TX(e):e)):"string"===typeof e?_X(e):[e]:[],CX=function(){let{kind:e,label:t,language:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{kind:"subtitles"};return t?`${"captions"===e?"cc":"sb"}:${n}:${encodeURIComponent(t)}`:n},IX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.prototype.map.call(e,CX).join(" ")},RX=e=>{const t=Object.entries(e).map((e=>{let[t,n]=e;return((e,t)=>n=>n[e]===t)(t,n)}));return e=>t.every((t=>t(e)))},DX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=kX(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(RX);Array.from(t).filter((e=>n.some((t=>t(e))))).forEach((t=>{t.mode=e}))},LX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(!(null==e?void 0:e.textTracks))return[];const n="function"===typeof t?t:RX(t);return Array.from(e.textTracks).filter(n)},PX=e=>{var t;return!!(null==(t=e.mediaSubtitlesShowing)?void 0:t.length)||e.hasAttribute(CK.MEDIA_SUBTITLES_SHOWING)},MX="exitFullscreen"in uY?"exitFullscreen":"webkitExitFullscreen"in uY?"webkitExitFullscreen":"webkitCancelFullScreen"in uY?"webkitCancelFullScreen":void 0,OX="fullscreenElement"in uY?"fullscreenElement":"webkitFullscreenElement"in uY?"webkitFullscreenElement":void 0,NX=e=>{var t;const{media:n,documentElement:r,fullscreenElement:i=n}=e;if(!n||!r)return!1;const o=(e=>{const{documentElement:t,media:n}=e,r=null==t?void 0:t[OX];return!r&&"webkitDisplayingFullscreen"in n&&"webkitPresentationMode"in n&&n.webkitDisplayingFullscreen&&n.webkitPresentationMode===UK?n:r})(e);if(!o)return!1;if(o===i||o===n)return!0;if(o.localName.includes("-")){let e=o.shadowRoot;if(!(OX in e))return wY(o,i);for(;null==e?void 0:e[OX];){if(e[OX]===i)return!0;e=null==(t=e[OX])?void 0:t.shadowRoot}}return!1},jX="fullscreenEnabled"in uY?"fullscreenEnabled":"webkitFullscreenEnabled"in uY?"webkitFullscreenEnabled":void 0;let FX;const UX=()=>{var e,t;return FX||(FX=null==(t=null==(e=uY)?void 0:e.createElement)?void 0:t.call(e,"video"),FX)},BX=(e,t)=>new Promise((n=>{e.addEventListener("volumechange",(()=>n(!0)),{signal:t})})),$X=async(e,t)=>{for(let n=0;n<10;n++){if(e.volume===t)return!1;await GK(10)}return e.volume!==t},VX=/.*Version\/.*Safari\/.*/.test(cY.navigator.userAgent),WX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UX();return(!cY.matchMedia("(display-mode: standalone)").matches||!VX)&&"function"===typeof(null==e?void 0:e.requestPictureInPicture)},zX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UX();return(e=>{const{documentElement:t,media:n}=e;return!!(null==t?void 0:t[jX])||n&&"webkitSupportsFullscreen"in n})({documentElement:uY,media:e})},HX=zX(),qX=WX(),GX=!!cY.WebKitPlaybackTargetAvailabilityEvent,KX=!!cY.chrome,YX=e=>LX(e.media,(e=>[DK.SUBTITLES,DK.CAPTIONS].includes(e.kind))).sort(((e,t)=>e.kind>=t.kind?1:-1)),XX=e=>LX(e.media,(e=>e.mode===PK&&[DK.SUBTITLES,DK.CAPTIONS].includes(e.kind))),QX=(e,t)=>{const n=YX(e),r=XX(e),i=!!r.length;if(n.length)if(!1===t||i&&!0!==t)DX(LK,n,r);else if(!0===t||!i&&!1!==t){let t=n[0];const{options:i}=e;if(!(null==i?void 0:i.noSubtitlesLangPref)){const e=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),r=e?[e,...globalThis.navigator.languages]:globalThis.navigator.languages,i=n.filter((e=>r.some((t=>e.language.toLowerCase().startsWith(t.split("-")[0]))))).sort(((e,t)=>r.findIndex((t=>e.language.toLowerCase().startsWith(t.split("-")[0])))-r.findIndex((e=>t.language.toLowerCase().startsWith(e.split("-")[0])))));i[0]&&(t=i[0])}const{language:o,label:a,kind:s}=t;DX(LK,n,r),DX(PK,n,[{language:o,label:a,kind:s}])}},JX=(e,t)=>e===t||null!=e&&null!=t&&(typeof e===typeof t&&(!("number"!==typeof e||!Number.isNaN(e)||!Number.isNaN(t))||"object"===typeof e&&(Array.isArray(e)?ZX(e,t):Object.entries(e).every((e=>{let[n,r]=e;return n in t&&JX(r,t[n])}))))),ZX=(e,t)=>{const n=Array.isArray(e),r=Array.isArray(t);return n===r&&(!n&&!r||e.length===t.length&&e.every(((e,n)=>JX(e,t[n]))))},eQ=Object.values(FK);let tQ;const nQ=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UX();if(!e)return!1;const t=e.volume;e.volume=t/2+.1;const n=new AbortController,r=await Promise.race([BX(e,n.signal),$X(e,t)]);return n.abort(),r}().then((e=>(tQ=e,tQ))),rQ={mediaError:{get(e,t){const{media:n}=e;if("playing"!==(null==t?void 0:t.type))return null==n?void 0:n.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(e,t){var n;const{media:r}=e;if("playing"!==(null==t?void 0:t.type))return null==(n=null==r?void 0:r.error)?void 0:n.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(e,t){var n,r;const{media:i}=e;if("playing"!==(null==t?void 0:t.type))return null!=(r=null==(n=null==i?void 0:i.error)?void 0:n.message)?r:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoWidth)?t:0},mediaEvents:["resize"]},mediaHeight:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoHeight)?t:0},mediaEvents:["resize"]},mediaPaused:{get(e){var t;const{media:n}=e;return null==(t=null==n?void 0:n.paused)||t},set(e,t){var n;const{media:r}=t;r&&(e?r.pause():null==(n=r.play())||n.catch((()=>{})))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(e,t){const{media:n}=e;return!!n&&(t?"playing"===t.type:!n.paused)},mediaEvents:["playing","emptied"]},mediaEnded:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.ended)&&t},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.playbackRate)?t:1},set(e,t){const{media:n}=t;n&&Number.isFinite(+e)&&(n.playbackRate=+e)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.muted)&&t},set(e,t){const{media:n}=t;if(n){try{cY.localStorage.setItem("media-chrome-pref-muted",e?"true":"false")}catch(XA){console.debug("Error setting muted pref",XA)}n.muted=e}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noMutedPref:n}}=t,{media:r}=t;if(r&&!r.muted&&!n)try{const n="true"===cY.localStorage.getItem("media-chrome-pref-muted");rQ.mediaMuted.set(n,t),e(n)}catch(XA){console.debug("Error getting muted pref",XA)}}]},mediaVolume:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.volume)?t:1},set(e,t){const{media:n}=t;if(n){try{null==e?cY.localStorage.removeItem("media-chrome-pref-volume"):cY.localStorage.setItem("media-chrome-pref-volume",e.toString())}catch(XA){console.debug("Error setting volume pref",XA)}Number.isFinite(+e)&&(n.volume=+e)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noVolumePref:n}}=t;if(!n)try{const{media:n}=t;if(!n)return;const r=cY.localStorage.getItem("media-chrome-pref-volume");if(null==r)return;rQ.mediaVolume.set(+r,t),e(+r)}catch(XA){console.debug("Error getting volume pref",XA)}}]},mediaVolumeLevel:{get(e){const{media:t}=e;return"undefined"==typeof(null==t?void 0:t.volume)?"high":t.muted||0===t.volume?"off":t.volume<.5?"low":t.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.currentTime)?t:0},set(e,t){const{media:n}=t;n&&HK(e)&&(n.currentTime=e)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(e){const{media:t,options:{defaultDuration:n}={}}=e;return!n||t&&t.duration&&!Number.isNaN(t.duration)&&Number.isFinite(t.duration)?Number.isFinite(null==t?void 0:t.duration)?t.duration:Number.NaN:n},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(e){const{media:t}=e;return(null==t?void 0:t.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(e){var t;const{media:n}=e;if(!(null==(t=null==n?void 0:n.seekable)?void 0:t.length))return;const r=n.seekable.start(0),i=n.seekable.end(n.seekable.length-1);return r||i?[Number(r.toFixed(3)),Number(i.toFixed(3))]:void 0},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(e){var t;const{media:n}=e,r=null!=(t=null==n?void 0:n.buffered)?t:[];return Array.from(r).map(((e,t)=>[Number(r.start(t).toFixed(3)),Number(r.end(t).toFixed(3))]))},mediaEvents:["progress","emptied"]},mediaStreamType:{get(e){const{media:t,options:{defaultStreamType:n}={}}=e,r=[FK.LIVE,FK.ON_DEMAND].includes(n)?n:void 0;if(!t)return r;const{streamType:i}=t;if(eQ.includes(i))return i===FK.UNKNOWN?r:i;const o=t.duration;return o===1/0?FK.LIVE:Number.isFinite(o)?FK.ON_DEMAND:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(e){const{media:t}=e;if(!t)return Number.NaN;const{targetLiveWindow:n}=t,r=rQ.mediaStreamType.get(e);return null!=n&&!Number.isNaN(n)||r!==FK.LIVE?n:0},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(e){const{media:t,options:{liveEdgeOffset:n=10}={}}=e;if(!t)return!1;if("number"===typeof t.liveEdgeStart)return!Number.isNaN(t.liveEdgeStart)&&t.currentTime>=t.liveEdgeStart;if(!(rQ.mediaStreamType.get(e)===FK.LIVE))return!1;const r=t.seekable;if(!r)return!0;if(!r.length)return!1;const i=r.end(r.length-1)-n;return t.currentTime>=i},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get:e=>YX(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get:e=>XX(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n,r;const{media:i,options:o}=t;if(!i)return;const a=e=>{var n;if(!o.defaultSubtitles)return;e&&![DK.CAPTIONS,DK.SUBTITLES].includes(null==(n=null==e?void 0:e.track)?void 0:n.kind)||QX(t,!0)};return i.addEventListener("loadstart",a),null==(n=i.textTracks)||n.addEventListener("addtrack",a),null==(r=i.textTracks)||r.addEventListener("removetrack",a),()=>{var e,t;i.removeEventListener("loadstart",a),null==(e=i.textTracks)||e.removeEventListener("addtrack",a),null==(t=i.textTracks)||t.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(e){var t;const{media:n}=e;if(!n)return[];const[r]=LX(n,{kind:DK.CHAPTERS});return Array.from(null!=(t=null==r?void 0:r.cues)?t:[]).map((e=>{let{text:t,startTime:n,endTime:r}=e;return{text:t,startTime:n,endTime:r}}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;const i=r.querySelector('track[kind="chapters"][default][src]'),o=null==(n=r.shadowRoot)?void 0:n.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return null==i||i.addEventListener("load",e),null==o||o.addEventListener("load",e),()=>{null==i||i.removeEventListener("load",e),null==o||o.removeEventListener("load",e)}}]},mediaIsPip:{get(e){var t,n;const{media:r,documentElement:i}=e;if(!r||!i)return!1;if(!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===r)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return!!(null==(t=r.localName)?void 0:t.includes("-"))&&wY(r,i.pictureInPictureElement);if(i.pictureInPictureElement.localName.includes("-")){let e=i.pictureInPictureElement.shadowRoot;for(;null==e?void 0:e.pictureInPictureElement;){if(e.pictureInPictureElement===r)return!0;e=null==(n=e.pictureInPictureElement)?void 0:n.shadowRoot}}return!1},set(e,t){const{media:n}=t;if(n)if(e){if(!uY.pictureInPictureEnabled)return void console.warn("MediaChrome: Picture-in-picture is not enabled");if(!n.requestPictureInPicture)return void console.warn("MediaChrome: The current media does not support picture-in-picture");const e=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};n.requestPictureInPicture().catch((t=>{if(11!==t.code)throw t;if(n.src){if(0!==n.readyState||"none"!==n.preload)throw t;{const t=()=>{n.removeEventListener("loadedmetadata",r),n.preload="none"},r=()=>{n.requestPictureInPicture().catch(e),t()};n.addEventListener("loadedmetadata",r),n.preload="metadata",setTimeout((()=>{0===n.readyState&&e(),t()}),1e3)}}else console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.")}))}else uY.pictureInPictureElement&&uY.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.videoRenditions)?t:[]].map((e=>({...e})))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(e){var t,n,r;const{media:i}=e;return null==(r=null==(n=null==i?void 0:i.videoRenditions)?void 0:n[null==(t=i.videoRenditions)?void 0:t.selectedIndex])?void 0:r.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.videoRenditions))return void console.warn("MediaController: Rendition selection not supported by this media.");const r=e,i=Array.prototype.findIndex.call(n.videoRenditions,(e=>e.id==r));n.videoRenditions.selectedIndex!=i&&(n.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.audioTracks)?t:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(e){var t,n;const{media:r}=e;return null==(n=[...null!=(t=null==r?void 0:r.audioTracks)?t:[]].find((e=>e.enabled)))?void 0:n.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.audioTracks))return void console.warn("MediaChrome: Audio track selection not supported by this media.");const r=e;for(const i of n.audioTracks)i.enabled=r==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get:e=>NX(e),set(e,t){e?(e=>{var t;const{media:n,fullscreenElement:r}=e,i=r&&"requestFullscreen"in r?"requestFullscreen":r&&"webkitRequestFullScreen"in r?"webkitRequestFullScreen":void 0;if(i){const e=null==(t=r[i])?void 0:t.call(r);if(e instanceof Promise)e.catch((()=>{}))}else(null==n?void 0:n.webkitEnterFullscreen)?n.webkitEnterFullscreen():(null==n?void 0:n.requestFullscreen)&&n.requestFullscreen()})(t):(e=>{var t;const{documentElement:n}=e;if(MX){const e=null==(t=null==n?void 0:n[MX])?void 0:t.call(n);if(e instanceof Promise)e.catch((()=>{}))}})(t)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(e){var t;const{media:n}=e;return!(!(null==n?void 0:n.remote)||"disconnected"===(null==(t=n.remote)?void 0:t.state))&&!!n.remote.state},set(e,t){var n,r;const{media:i}=t;i&&(e&&"disconnected"!==(null==(n=i.remote)?void 0:n.state)||(e||"connected"===(null==(r=i.remote)?void 0:r.state))&&("function"===typeof i.remote.prompt?i.remote.prompt().catch((()=>{})):console.warn("MediaChrome: Casting is not supported in this environment")))},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get:()=>!1,set(e,t){const{media:n}=t;n&&(n.webkitShowPlaybackTargetPicker&&cY.WebKitPlaybackTargetAvailabilityEvent?n.webkitShowPlaybackTargetPicker():console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment"))},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(e){const{media:t}=e;if(!HX||!zX(t))return jK}},mediaPipUnavailable:{get(e){const{media:t}=e;if(!qX||!WX(t))return jK}},mediaVolumeUnavailable:{get(e){const{media:t}=e;if(!1===tQ||void 0==(null==t?void 0:t.volume))return jK},stateOwnersUpdateHandlers:[e=>{null==tQ&&nQ.then((t=>e(t?void 0:jK)))}]},mediaCastUnavailable:{get(e){let{availability:t="not-available"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{media:r}=e;return KX&&(null==(n=null==r?void 0:r.remote)?void 0:n.state)?null!=t&&"available"!==t?NK:void 0:jK},stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaAirplayUnavailable:{get:(e,t)=>GX?"not-available"===(null==t?void 0:t.availability)?NK:void 0:jK,mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaRenditionUnavailable:{get(e){var t;const{media:n}=e;return(null==n?void 0:n.videoRenditions)?(null==(t=n.videoRenditions)?void 0:t.length)?void 0:NK:jK},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(e){var t,n;const{media:r}=e;return(null==r?void 0:r.audioTracks)?(null!=(n=null==(t=r.audioTracks)?void 0:t.length)?n:0)<=1?NK:void 0:jK},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},iQ={[SK.MEDIA_PREVIEW_REQUEST](e,t,n){let{detail:r}=n;var i,o,a;const{media:s}=t,l=null!=r?r:void 0;let c,u;if(s&&null!=l){const[e]=LX(s,{kind:DK.METADATA,label:"thumbnails"}),t=Array.prototype.find.call(null!=(i=null==e?void 0:e.cues)?i:[],((e,t,n)=>0===t?e.endTime>l:t===n.length-1?e.startTime<=l:e.startTime<=l&&e.endTime>l));if(t){const e=/'^(?:[a-z]+:)?\/\//i.test(t.text)||null==(o=null==s?void 0:s.querySelector('track[label="thumbnails"]'))?void 0:o.src,n=new URL(t.text,e);u=new URLSearchParams(n.hash).get("#xywh").split(",").map((e=>+e)),c=n.href}}const d=e.mediaDuration.get(t);let h=null==(a=e.mediaChaptersCues.get(t).find(((e,t,n)=>t===n.length-1&&d===e.endTime?e.startTime<=l&&e.endTime>=l:e.startTime<=l&&e.endTime>l)))?void 0:a.text;return null!=r&&null==h&&(h=""),{mediaPreviewTime:l,mediaPreviewImage:c,mediaPreviewCoords:u,mediaPreviewChapter:h}},[SK.MEDIA_PAUSE_REQUEST](e,t){e.mediaPaused.set(!0,t)},[SK.MEDIA_PLAY_REQUEST](e,t){var n,r,i,o;const a=e.mediaStreamType.get(t)===FK.LIVE,s=!(null==(n=t.options)?void 0:n.noAutoSeekToLive),l=e.mediaTargetLiveWindow.get(t)>0;if(a&&s&&!l){const n=null==(r=e.mediaSeekable.get(t))?void 0:r[1];if(n){const r=n-(null!=(o=null==(i=t.options)?void 0:i.seekToLiveOffset)?o:0);e.mediaCurrentTime.set(r,t)}}e.mediaPaused.set(!1,t)},[SK.MEDIA_PLAYBACK_RATE_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaPlaybackRate.set(i,t)},[SK.MEDIA_MUTE_REQUEST](e,t){e.mediaMuted.set(!0,t)},[SK.MEDIA_UNMUTE_REQUEST](e,t){e.mediaVolume.get(t)||e.mediaVolume.set(.25,t),e.mediaMuted.set(!1,t)},[SK.MEDIA_VOLUME_REQUEST](e,t,n){let{detail:r}=n;const i=r;i&&e.mediaMuted.get(t)&&e.mediaMuted.set(!1,t),e.mediaVolume.set(i,t)},[SK.MEDIA_SEEK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaCurrentTime.set(i,t)},[SK.MEDIA_SEEK_TO_LIVE_REQUEST](e,t){var n,r,i;const o=null==(n=e.mediaSeekable.get(t))?void 0:n[1];if(Number.isNaN(Number(o)))return;const a=o-(null!=(i=null==(r=t.options)?void 0:r.seekToLiveOffset)?i:0);e.mediaCurrentTime.set(a,t)},[SK.MEDIA_SHOW_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;var i;const{options:o}=t,a=YX(t),s=kX(r),l=null==(i=s[0])?void 0:i.language;l&&!o.noSubtitlesLangPref&&cY.localStorage.setItem("media-chrome-pref-subtitles-lang",l),DX(PK,a,s)},[SK.MEDIA_DISABLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;const i=YX(t);DX(LK,i,null!=r?r:[])},[SK.MEDIA_TOGGLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;QX(t,r)},[SK.MEDIA_RENDITION_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaRenditionSelected.set(i,t)},[SK.MEDIA_AUDIO_TRACK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaAudioTrackEnabled.set(i,t)},[SK.MEDIA_ENTER_PIP_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsPip.set(!0,t)},[SK.MEDIA_EXIT_PIP_REQUEST](e,t){e.mediaIsPip.set(!1,t)},[SK.MEDIA_ENTER_FULLSCREEN_REQUEST](e,t){e.mediaIsPip.get(t)&&e.mediaIsPip.set(!1,t),e.mediaIsFullscreen.set(!0,t)},[SK.MEDIA_EXIT_FULLSCREEN_REQUEST](e,t){e.mediaIsFullscreen.set(!1,t)},[SK.MEDIA_ENTER_CAST_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsCasting.set(!0,t)},[SK.MEDIA_EXIT_CAST_REQUEST](e,t){e.mediaIsCasting.set(!1,t)},[SK.MEDIA_AIRPLAY_REQUEST](e,t){e.mediaIsAirplaying.set(!0,t)}},oQ=e=>{let{media:t,fullscreenElement:n,documentElement:r,stateMediator:i=rQ,requestMap:o=iQ,options:a={},monitorStateOwnersOnlyWithSubscriptions:s=!0}=e;const l=[],c={options:{...a}};let u=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const d=e=>{void 0!=e&&(JX(e,u)||(u=Object.freeze({...u,...e}),l.forEach((e=>e(u)))))},h=()=>{const e=Object.entries(i).reduce(((e,t)=>{let[n,{get:r}]=t;return e[n]=r(c),e}),{});d(e)},p={};let m;const f=async(e,t)=>{var n,r,o,a,u,f,g,v,y,b,w,x,E,A,S,T;const _=!!m;if(m={...c,...null!=m?m:{},...e},_)return;await async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];await Promise.all(t.filter((e=>e)).map((async e=>{if(!("localName"in e&&e instanceof cY.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const n=cY.customElements.get(t);n&&e instanceof n||(await cY.customElements.whenDefined(t),cY.customElements.upgrade(e))})))}(...Object.values(e));const k=l.length>0&&0===t&&s,C=c.media!==m.media,I=(null==(n=c.media)?void 0:n.textTracks)!==(null==(r=m.media)?void 0:r.textTracks),R=(null==(o=c.media)?void 0:o.videoRenditions)!==(null==(a=m.media)?void 0:a.videoRenditions),D=(null==(u=c.media)?void 0:u.audioTracks)!==(null==(f=m.media)?void 0:f.audioTracks),L=(null==(g=c.media)?void 0:g.remote)!==(null==(v=m.media)?void 0:v.remote),P=c.documentElement!==m.documentElement,M=!!c.media&&(C||k),O=!!(null==(y=c.media)?void 0:y.textTracks)&&(I||k),N=!!(null==(b=c.media)?void 0:b.videoRenditions)&&(R||k),j=!!(null==(w=c.media)?void 0:w.audioTracks)&&(D||k),F=!!(null==(x=c.media)?void 0:x.remote)&&(L||k),U=!!c.documentElement&&(P||k),B=M||O||N||j||F||U,$=0===l.length&&1===t&&s,V=!!m.media&&(C||$),W=!!(null==(E=m.media)?void 0:E.textTracks)&&(I||$),z=!!(null==(A=m.media)?void 0:A.videoRenditions)&&(R||$),H=!!(null==(S=m.media)?void 0:S.audioTracks)&&(D||$),q=!!(null==(T=m.media)?void 0:T.remote)&&(L||$),G=!!m.documentElement&&(P||$),K=V||W||z||H||q||G;if(!(B||K))return Object.entries(m).forEach((e=>{let[t,n]=e;c[t]=n})),h(),void(m=void 0);Object.entries(i).forEach((e=>{let[t,{get:n,mediaEvents:r=[],textTracksEvents:i=[],videoRenditionsEvents:o=[],audioTracksEvents:a=[],remoteEvents:s=[],rootEvents:l=[],stateOwnersUpdateHandlers:u=[]}]=e;p[t]||(p[t]={});const h=e=>{const r=n(c,e);d({[t]:r})};let f;f=p[t].mediaEvents,r.forEach((e=>{f&&M&&(c.media.removeEventListener(e,f),p[t].mediaEvents=void 0),V&&(m.media.addEventListener(e,h),p[t].mediaEvents=h)})),f=p[t].textTracksEvents,i.forEach((e=>{var n,r;f&&O&&(null==(n=c.media.textTracks)||n.removeEventListener(e,f),p[t].textTracksEvents=void 0),W&&(null==(r=m.media.textTracks)||r.addEventListener(e,h),p[t].textTracksEvents=h)})),f=p[t].videoRenditionsEvents,o.forEach((e=>{var n,r;f&&N&&(null==(n=c.media.videoRenditions)||n.removeEventListener(e,f),p[t].videoRenditionsEvents=void 0),z&&(null==(r=m.media.videoRenditions)||r.addEventListener(e,h),p[t].videoRenditionsEvents=h)})),f=p[t].audioTracksEvents,a.forEach((e=>{var n,r;f&&j&&(null==(n=c.media.audioTracks)||n.removeEventListener(e,f),p[t].audioTracksEvents=void 0),H&&(null==(r=m.media.audioTracks)||r.addEventListener(e,h),p[t].audioTracksEvents=h)})),f=p[t].remoteEvents,s.forEach((e=>{var n,r;f&&F&&(null==(n=c.media.remote)||n.removeEventListener(e,f),p[t].remoteEvents=void 0),q&&(null==(r=m.media.remote)||r.addEventListener(e,h),p[t].remoteEvents=h)})),f=p[t].rootEvents,l.forEach((e=>{f&&U&&(c.documentElement.removeEventListener(e,f),p[t].rootEvents=void 0),G&&(m.documentElement.addEventListener(e,h),p[t].rootEvents=h)}));const g=p[t].stateOwnersUpdateHandlers;u.forEach((e=>{g&&B&&g(),K&&(p[t].stateOwnersUpdateHandlers=e(h,m))}))})),Object.entries(m).forEach((e=>{let[t,n]=e;c[t]=n})),h(),m=void 0};return f({media:t,fullscreenElement:n,documentElement:r,options:a}),{dispatch(e){const{type:t,detail:n}=e;o[t]&&null==u.mediaErrorCode?d(o[t](i,c,e)):"mediaelementchangerequest"===t?f({media:n}):"fullscreenelementchangerequest"===t?f({fullscreenElement:n}):"documentelementchangerequest"===t?f({documentElement:n}):"optionschangerequest"===t&&Object.entries(null!=n?n:{}).forEach((e=>{let[t,n]=e;c.options[t]=n}))},getState:()=>u,subscribe:e=>(f({},l.length+1),l.push(e),e(u),()=>{const t=l.indexOf(e);t>=0&&(f({},l.length-1),l.splice(t,1))})}};var aQ,sQ,lQ,cQ,uQ,dQ,hQ,pQ,mQ,fQ,gQ,vQ,yQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},bQ=(e,t,n)=>(yQ(e,t,"read from private field"),n?n.call(e):t.get(e)),wQ=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},xQ=(e,t,n,r)=>(yQ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),EQ=(e,t,n)=>(yQ(e,t,"access private method"),n);const AQ=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],SQ="defaultsubtitles",TQ="defaultstreamtype",_Q="defaultduration",kQ="fullscreenelement",CQ="hotkeys",IQ="keysused",RQ="liveedgeoffset",DQ="seektoliveoffset",LQ="noautoseektolive",PQ="nohotkeys",MQ="novolumepref",OQ="nosubtitleslangpref",NQ="nodefaultstore",jQ="keyboardforwardseekoffset",FQ="keyboardbackwardseekoffset",UQ="lang";class BQ extends pX{constructor(){super(),wQ(this,hQ),wQ(this,mQ),wQ(this,gQ),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,wQ(this,aQ,new SX(this,CQ)),wQ(this,sQ,void 0),wQ(this,lQ,void 0),wQ(this,cQ,void 0),wQ(this,uQ,void 0),wQ(this,dQ,(e=>{var t;null==(t=bQ(this,lQ))||t.dispatch(e)})),this.associateElement(this);let e={};xQ(this,cQ,(t=>{Object.entries(t).forEach((t=>{let[n,r]=t;if(n in e&&e[n]===r)return;this.propagateMediaState(n,r);const i=n.toLowerCase(),o=new cY.CustomEvent(RK[i],{composed:!0,detail:r});this.dispatchEvent(o)})),e=t})),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(PQ,CQ,TQ,SQ,_Q,UQ)}get mediaStore(){return bQ(this,lQ)}set mediaStore(e){var t,n;bQ(this,lQ)&&(null==(t=bQ(this,uQ))||t.call(this),xQ(this,uQ,void 0)),xQ(this,lQ,e),bQ(this,lQ)||this.hasAttribute(NQ)?xQ(this,uQ,null==(n=bQ(this,lQ))?void 0:n.subscribe(bQ(this,cQ))):EQ(this,hQ,pQ).call(this)}get fullscreenElement(){var e;return null!=(e=bQ(this,sQ))?e:this}set fullscreenElement(e){var t;this.hasAttribute(kQ)&&this.removeAttribute(kQ),xQ(this,sQ,e),null==(t=bQ(this,lQ))||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return IY(this,SQ)}set defaultSubtitles(e){RY(this,SQ,e)}get defaultStreamType(){return DY(this,TQ)}set defaultStreamType(e){LY(this,TQ,e)}get defaultDuration(){return kY(this,_Q)}set defaultDuration(e){CY(this,_Q,e)}get noHotkeys(){return IY(this,PQ)}set noHotkeys(e){RY(this,PQ,e)}get keysUsed(){return DY(this,IQ)}set keysUsed(e){LY(this,IQ,e)}get liveEdgeOffset(){return kY(this,RQ)}set liveEdgeOffset(e){CY(this,RQ,e)}get noAutoSeekToLive(){return IY(this,LQ)}set noAutoSeekToLive(e){RY(this,LQ,e)}get noVolumePref(){return IY(this,MQ)}set noVolumePref(e){RY(this,MQ,e)}get noSubtitlesLangPref(){return IY(this,OQ)}set noSubtitlesLangPref(e){RY(this,OQ,e)}get noDefaultStore(){return IY(this,NQ)}set noDefaultStore(e){RY(this,NQ,e)}attributeChangedCallback(e,t,n){var r,i,o,a,s,l,c,u;if(super.attributeChangedCallback(e,t,n),e===PQ)n!==t&&""===n?(this.hasAttribute(CQ)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&null===n&&this.enableHotkeys();else if(e===CQ)bQ(this,aQ).value=n;else if(e===SQ&&n!==t)null==(r=bQ(this,lQ))||r.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(SQ)}});else if(e===TQ)null==(o=bQ(this,lQ))||o.dispatch({type:"optionschangerequest",detail:{defaultStreamType:null!=(i=this.getAttribute(TQ))?i:void 0}});else if(e===RQ)null==(a=bQ(this,lQ))||a.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(RQ)?+this.getAttribute(RQ):void 0,seekToLiveOffset:this.hasAttribute(DQ)?void 0:+this.getAttribute(RQ)}});else if(e===DQ)null==(s=bQ(this,lQ))||s.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(DQ)?+this.getAttribute(DQ):void 0}});else if(e===LQ)null==(l=bQ(this,lQ))||l.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(LQ)}});else if(e===kQ){const e=n?null==(c=this.getRootNode())?void 0:c.getElementById(n):void 0;xQ(this,sQ,e),null==(u=bQ(this,lQ))||u.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===UQ&&n!==t&&(eY=n)}connectedCallback(){var e,t;bQ(this,lQ)||this.hasAttribute(NQ)||EQ(this,hQ,pQ).call(this),null==(e=bQ(this,lQ))||e.dispatch({type:"documentelementchangerequest",detail:uY}),super.connectedCallback(),bQ(this,lQ)&&!bQ(this,uQ)&&xQ(this,uQ,null==(t=bQ(this,lQ))?void 0:t.subscribe(bQ(this,cQ))),this.enableHotkeys()}disconnectedCallback(){var e,t,n,r;null==(e=super.disconnectedCallback)||e.call(this),bQ(this,lQ)&&(null==(t=bQ(this,lQ))||t.dispatch({type:"documentelementchangerequest",detail:void 0}),null==(n=bQ(this,lQ))||n.dispatch({type:SK.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),bQ(this,uQ)&&(null==(r=bQ(this,uQ))||r.call(this),xQ(this,uQ,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),null==(t=bQ(this,lQ))||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),null==(t=bQ(this,lQ))||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){KQ(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),r=this.unregisterMediaStateReceiver.bind(this),i=YQ(e,n,r);Object.values(SK).forEach((t=>{e.addEventListener(t,bQ(this,dQ))})),t.set(e,i)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(SK).forEach((t=>{e.removeEventListener(t,bQ(this,dQ))}))}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),bQ(this,lQ)&&Object.entries(bQ(this,lQ).getState()).forEach((t=>{let[n,r]=t;KQ([e],n,r)})))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",EQ(this,gQ,vQ))}disableHotkeys(){this.removeEventListener("keydown",EQ(this,gQ,vQ)),this.removeEventListener("keyup",EQ(this,mQ,fQ))}get hotkeys(){return DY(this,CQ)}set hotkeys(e){LY(this,CQ,e)}keyboardShortcutHandler(e){var t,n,r,i,o;const a=e.target;if((null!=(r=null!=(n=null==(t=a.getAttribute(IQ))?void 0:t.split(" "))?n:null==a?void 0:a.keysUsed)?r:[]).map((e=>"Space"===e?" ":e)).filter(Boolean).includes(e.key))return;let s,l,c;if(!bQ(this,aQ).contains(`no${e.key.toLowerCase()}`)&&(" "!==e.key||!bQ(this,aQ).contains("nospace")))switch(e.key){case" ":case"k":s=bQ(this,lQ).getState().mediaPaused?SK.MEDIA_PLAY_REQUEST:SK.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new cY.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"m":s="off"===this.mediaStore.getState().mediaVolumeLevel?SK.MEDIA_UNMUTE_REQUEST:SK.MEDIA_MUTE_REQUEST,this.dispatchEvent(new cY.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"f":s=this.mediaStore.getState().mediaIsFullscreen?SK.MEDIA_EXIT_FULLSCREEN_REQUEST:SK.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new cY.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new cY.CustomEvent(SK.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const e=this.hasAttribute(FQ)?+this.getAttribute(FQ):10;l=Math.max((null!=(i=this.mediaStore.getState().mediaCurrentTime)?i:0)-e,0),c=new cY.CustomEvent(SK.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}case"ArrowRight":{const e=this.hasAttribute(jQ)?+this.getAttribute(jQ):10;l=Math.max((null!=(o=this.mediaStore.getState().mediaCurrentTime)?o:0)+e,0),c=new cY.CustomEvent(SK.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}}}}aQ=new WeakMap,sQ=new WeakMap,lQ=new WeakMap,cQ=new WeakMap,uQ=new WeakMap,dQ=new WeakMap,hQ=new WeakSet,pQ=function(){var e;this.mediaStore=oQ({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(SQ),defaultDuration:this.hasAttribute(_Q)?+this.getAttribute(_Q):void 0,defaultStreamType:null!=(e=this.getAttribute(TQ))?e:void 0,liveEdgeOffset:this.hasAttribute(RQ)?+this.getAttribute(RQ):void 0,seekToLiveOffset:this.hasAttribute(DQ)?+this.getAttribute(DQ):this.hasAttribute(RQ)?+this.getAttribute(RQ):void 0,noAutoSeekToLive:this.hasAttribute(LQ),noVolumePref:this.hasAttribute(MQ),noSubtitlesLangPref:this.hasAttribute(OQ)}})},mQ=new WeakSet,fQ=function(e){const{key:t}=e;AQ.includes(t)?this.keyboardShortcutHandler(e):this.removeEventListener("keyup",EQ(this,mQ,fQ))},gQ=new WeakSet,vQ=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!AQ.includes(r)?this.removeEventListener("keyup",EQ(this,mQ,fQ)):([" ","ArrowLeft","ArrowRight"].includes(r)&&!(bQ(this,aQ).contains(`no${r.toLowerCase()}`)||" "===r&&bQ(this,aQ).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",EQ(this,mQ,fQ),{once:!0}))};const $Q=Object.values(CK),VQ=Object.values(_K),WQ=e=>{var t,n,r,i;let{observedAttributes:o}=e.constructor;!o&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(cY.customElements.upgrade(e),({observedAttributes:o}=e.constructor));const a=null==(i=null==(r=null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,TK.MEDIA_CHROME_ATTRIBUTES))?void 0:r.split)?void 0:i.call(r,/\s+/);return Array.isArray(o||a)?(o||a).filter((e=>$Q.includes(e))):[]},zQ=e=>(e=>{var t,n;return!(null==(t=e.nodeName)?void 0:t.includes("-"))||!cY.customElements.get(null==(n=e.nodeName)?void 0:n.toLowerCase())||e instanceof cY.customElements.get(e.nodeName.toLowerCase())||cY.customElements.upgrade(e),VQ.some((t=>t in e))})(e)||!!WQ(e).length,HQ=e=>{var t;return null==(t=null==e?void 0:e.join)?void 0:t.call(e,":")},qQ={[CK.MEDIA_SUBTITLES_LIST]:IX,[CK.MEDIA_SUBTITLES_SHOWING]:IX,[CK.MEDIA_SEEKABLE]:HQ,[CK.MEDIA_BUFFERED]:e=>null==e?void 0:e.map(HQ).join(" "),[CK.MEDIA_PREVIEW_COORDS]:e=>null==e?void 0:e.join(" "),[CK.MEDIA_RENDITION_LIST]:function(e){return null==e?void 0:e.map(BK).join(" ")},[CK.MEDIA_AUDIO_TRACK_LIST]:function(e){return null==e?void 0:e.map(VK).join(" ")}},GQ=(e,t)=>{if((e=>{var t;return!!(null==(t=e.closest)?void 0:t.call(e,'*[slot="media"]'))})(e))return;const n=(e,t)=>{var n,r;zQ(e)&&t(e);const{children:i=[]}=null!=e?e:{};[...i,...null!=(r=null==(n=null==e?void 0:e.shadowRoot)?void 0:n.children)?r:[]].forEach((e=>GQ(e,t)))},r=null==e?void 0:e.nodeName.toLowerCase();!r.includes("-")||zQ(e)?n(e,t):cY.customElements.whenDefined(r).then((()=>{n(e,t)}))},KQ=(e,t,n)=>{e.forEach((e=>{if(t in e)return void(e[t]=n);const r=WQ(e),i=t.toLowerCase();r.includes(i)&&(async(e,t,n)=>{var r,i;if(e.isConnected||await GK(0),"boolean"===typeof n||null==n)return RY(e,t,n);if("number"===typeof n)return CY(e,t,n);if("string"===typeof n)return LY(e,t,n);if(Array.isArray(n)&&!n.length)return e.removeAttribute(t);const o=null!=(i=null==(r=qQ[t])?void 0:r.call(qQ,n))?i:n;e.setAttribute(t,o)})(e,i,n)}))},YQ=(e,t,n)=>{GQ(e,t);const r=e=>{var n;const r=null!=(n=null==e?void 0:e.composedPath()[0])?n:e.target;t(r)},i=e=>{var t;const r=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;n(r)};e.addEventListener(SK.REGISTER_MEDIA_STATE_RECEIVER,r),e.addEventListener(SK.UNREGISTER_MEDIA_STATE_RECEIVER,i);let o=[];const a=e=>{const r=e.target;"media"!==r.name&&(o.forEach((e=>GQ(e,n))),o=[...r.assignedElements({flatten:!0})],o.forEach((e=>GQ(e,t))))};e.addEventListener("slotchange",a);const s=new MutationObserver((e=>{e.forEach((e=>{const{addedNodes:r=[],removedNodes:i=[],type:o,target:a,attributeName:s}=e;"childList"===o?(Array.prototype.forEach.call(r,(e=>GQ(e,t))),Array.prototype.forEach.call(i,(e=>GQ(e,n)))):"attributes"===o&&s===TK.MEDIA_CHROME_ATTRIBUTES&&(zQ(a)?t(a):n(a))}))}));s.observe(e,{childList:!0,attributes:!0,subtree:!0});return()=>{GQ(e,n),e.removeEventListener("slotchange",a),s.disconnect(),e.removeEventListener(SK.REGISTER_MEDIA_STATE_RECEIVER,r),e.removeEventListener(SK.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};cY.customElements.get("media-controller")||cY.customElements.define("media-controller",BQ);var XQ,QQ,JQ,ZQ,eJ,tJ,nJ,rJ=BQ,iJ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},oJ=(e,t,n)=>(iJ(e,t,"read from private field"),n?n.call(e):t.get(e)),aJ=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},sJ=(e,t,n,r)=>(iJ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const lJ="tooltipplacement",cJ="disabled",uJ="notooltip",dJ=uY.createElement("template");dJ.innerHTML='\n<style>\n  :host {\n    position: relative;\n    font: var(--media-font,\n      var(--media-font-weight, bold)\n      var(--media-font-size, 14px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n    padding: var(--media-button-padding, var(--media-control-padding, 10px));\n    justify-content: var(--media-button-justify-content, center);\n    display: inline-flex;\n    align-items: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    transition: background .15s linear;\n    pointer-events: auto;\n    cursor: var(--media-cursor, pointer);\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  \n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n    outline: 0;\n  }\n  \n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50 50 70 / .7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n\n  media-tooltip {\n    \n    max-width: 0;\n    overflow-x: clip;\n    opacity: 0;\n    transition: opacity .3s, max-width 0s 9s;\n  }\n\n  :host(:hover) media-tooltip,\n  :host(:focus-visible) media-tooltip {\n    max-width: 100vw;\n    opacity: 1;\n    transition: opacity .3s;\n  }\n\n  :host([notooltip]) slot[name="tooltip"] {\n    display: none;\n  }\n</style>\n\n<slot name="tooltip">\n  <media-tooltip part="tooltip" aria-hidden="true">\n    <slot name="tooltip-content"></slot>\n  </media-tooltip>\n</slot>\n';class hJ extends cY.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(super(),aJ(this,tJ),aJ(this,XQ,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",aJ(this,QQ,(e=>{this.preventClick||this.handleClick(e),setTimeout(oJ(this,JQ),0)})),aJ(this,JQ,(()=>{var e,t;null==(t=null==(e=this.tooltipEl)?void 0:e.updateXOffset)||t.call(e)})),aJ(this,ZQ,(e=>{const{key:t}=e;this.keysUsed.includes(t)?this.preventClick||this.handleClick(e):this.removeEventListener("keyup",oJ(this,ZQ))})),aJ(this,eJ,(e=>{const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",oJ(this,ZQ)):this.addEventListener("keyup",oJ(this,ZQ),{once:!0})})),!this.shadowRoot){this.attachShadow({mode:"open"});const n=dJ.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=uY.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),e.tooltipContent&&(n.querySelector('slot[name="tooltip-content"]').innerHTML=null!=(t=e.tooltipContent)?t:"",this.tooltipContent=e.tooltipContent),this.nativeEl.appendChild(r.content.cloneNode(!0)),this.shadowRoot.appendChild(n)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",lJ,TK.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",oJ(this,QQ)),this.addEventListener("keydown",oJ(this,eJ)),this.tabIndex=0}disable(){this.removeEventListener("click",oJ(this,QQ)),this.removeEventListener("keydown",oJ(this,eJ)),this.removeEventListener("keyup",oJ(this,ZQ)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===TK.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=oJ(this,XQ))?void 0:r.unassociateElement)||i.call(r,this),sJ(this,XQ,null)),n&&this.isConnected&&(sJ(this,XQ,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=oJ(this,XQ))?void 0:a.associateElement)||s.call(a,this))):"disabled"===e&&n!==t?null==n?this.enable():this.disable():e===lJ&&this.tooltipEl&&n!==t&&(this.tooltipEl.placement=n),oJ(this,JQ).call(this)}connectedCallback(){var e,t,n;const{style:r}=TY(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const i=this.getAttribute(TK.MEDIA_CONTROLLER);i&&(sJ(this,XQ,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=oJ(this,XQ))?void 0:t.associateElement)||n.call(t,this)),cY.customElements.whenDefined("media-tooltip").then((()=>{return(e=this,t=tJ,n=nJ,iJ(e,t,"access private method"),n).call(this);var e,t,n}))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=oJ(this,XQ))?void 0:e.unassociateElement)||t.call(e,this),sJ(this,XQ,null),this.removeEventListener("mouseenter",oJ(this,JQ)),this.removeEventListener("focus",oJ(this,JQ)),this.removeEventListener("click",oJ(this,QQ))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return DY(this,lJ)}set tooltipPlacement(e){LY(this,lJ,e)}get mediaController(){return DY(this,TK.MEDIA_CONTROLLER)}set mediaController(e){LY(this,TK.MEDIA_CONTROLLER,e)}get disabled(){return IY(this,cJ)}set disabled(e){RY(this,cJ,e)}get noTooltip(){return IY(this,uJ)}set noTooltip(e){RY(this,uJ,e)}handleClick(e){}}XQ=new WeakMap,QQ=new WeakMap,JQ=new WeakMap,ZQ=new WeakMap,eJ=new WeakMap,tJ=new WeakSet,nJ=function(){this.addEventListener("mouseenter",oJ(this,JQ)),this.addEventListener("focus",oJ(this,JQ)),this.addEventListener("click",oJ(this,QQ));const e=this.tooltipPlacement;e&&this.tooltipEl&&(this.tooltipEl.placement=e)},cY.customElements.get("media-chrome-button")||cY.customElements.define("media-chrome-button",hJ);const pJ='<svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>\n</svg>\n',mJ=uY.createElement("template");mJ.innerHTML=`\n  <style>\n    :host([${CK.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${CK.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${CK.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],\n    :host(:not([${CK.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${pJ}</slot>\n    <slot name="exit">${pJ}</slot>\n  </slot>\n`;const fJ=`\n  <slot name="tooltip-enter">${tY("start airplay")}</slot>\n  <slot name="tooltip-exit">${tY("stop airplay")}</slot>\n`,gJ=e=>{const t=e.mediaIsAirplaying?tY("stop airplay"):tY("start airplay");e.setAttribute("aria-label",t)};class vJ extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_IS_AIRPLAYING,CK.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(){super({slotTemplate:mJ,tooltipContent:fJ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),gJ(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_IS_AIRPLAYING&&gJ(this)}get mediaIsAirplaying(){return IY(this,CK.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){RY(this,CK.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return DY(this,CK.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){LY(this,CK.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new cY.CustomEvent(SK.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}cY.customElements.get("media-airplay-button")||cY.customElements.define("media-airplay-button",vJ);const yJ=uY.createElement("template");yJ.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-checked="true"]) slot[name=tooltip-enable],\n    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const bJ=`\n  <slot name="tooltip-enable">${tY("Enable captions")}</slot>\n  <slot name="tooltip-disable">${tY("Disable captions")}</slot>\n`,wJ=e=>{e.setAttribute("aria-checked",PX(e).toString())};class xJ extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_SUBTITLES_LIST,CK.MEDIA_SUBTITLES_SHOWING]}constructor(){super({slotTemplate:yJ,tooltipContent:bJ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",tY("closed captions")),wJ(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_SUBTITLES_SHOWING&&wJ(this)}get mediaSubtitlesList(){return EJ(this,CK.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){AJ(this,CK.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return EJ(this,CK.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){AJ(this,CK.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new cY.CustomEvent(SK.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const EJ=(e,t)=>{const n=e.getAttribute(t);return n?_X(n):[]},AJ=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=IX(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};cY.customElements.get("media-captions-button")||cY.customElements.define("media-captions-button",xJ);const SJ=uY.createElement("template");SJ.innerHTML=`\n  <style>\n  :host([${CK.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${CK.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${CK.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],\n    :host(:not([${CK.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>\n  </slot>\n`;const TJ=`\n  <slot name="tooltip-enter">${tY("Start casting")}</slot>\n  <slot name="tooltip-exit">${tY("Stop casting")}</slot>\n`,_J=e=>{const t=e.mediaIsCasting?tY("stop casting"):tY("start casting");e.setAttribute("aria-label",t)};class kJ extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_IS_CASTING,CK.MEDIA_CAST_UNAVAILABLE]}constructor(){super({slotTemplate:SJ,tooltipContent:TJ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),_J(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_IS_CASTING&&_J(this)}get mediaIsCasting(){return IY(this,CK.MEDIA_IS_CASTING)}set mediaIsCasting(e){RY(this,CK.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return DY(this,CK.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){LY(this,CK.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?SK.MEDIA_EXIT_CAST_REQUEST:SK.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new cY.CustomEvent(e,{composed:!0,bubbles:!0}))}}cY.customElements.get("media-cast-button")||cY.customElements.define("media-cast-button",kJ);var CJ,IJ,RJ,DJ,LJ,PJ,MJ,OJ,NJ,jJ,FJ,UJ,BJ,$J,VJ,WJ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zJ=(e,t,n)=>(WJ(e,t,"read from private field"),n?n.call(e):t.get(e)),HJ=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qJ=(e,t,n,r)=>(WJ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),GJ=(e,t,n)=>(WJ(e,t,"access private method"),n);const KJ="open",YJ="anchor";class XJ extends cY.HTMLElement{constructor(){super(),HJ(this,DJ),HJ(this,PJ),HJ(this,OJ),HJ(this,jJ),HJ(this,UJ),HJ(this,$J),HJ(this,CJ,!1),HJ(this,IJ,null),HJ(this,RJ,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[KJ,YJ]}get open(){return IY(this,KJ)}set open(e){RY(this,KJ,e)}handleEvent(e){switch(e.type){case"invoke":GJ(this,jJ,FJ).call(this,e);break;case"focusout":GJ(this,UJ,BJ).call(this,e);break;case"keydown":GJ(this,$J,VJ).call(this,e)}}connectedCallback(){GJ(this,DJ,LJ).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,t,n){GJ(this,DJ,LJ).call(this),e===KJ&&n!==t&&(this.open?GJ(this,PJ,MJ).call(this):GJ(this,OJ,NJ).call(this))}focus(){qJ(this,IJ,EY());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),t=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||t)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==n||n.focus()}get keysUsed(){return["Escape","Tab"]}}CJ=new WeakMap,IJ=new WeakMap,RJ=new WeakMap,DJ=new WeakSet,LJ=function(){if(!zJ(this,CJ)&&(qJ(this,CJ,!0),!this.shadowRoot)){this.attachShadow({mode:"open"});const e=function(e){const t={};for(const n of e)t[n.name]=n.value;return t}(this.attributes);this.shadowRoot.innerHTML=`\n        ${this.constructor.getTemplateHTML(e)}\n      `,queueMicrotask((()=>{const{style:e}=TY(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")}))}},PJ=new WeakSet,MJ=function(){var e;null==(e=zJ(this,RJ))||e.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",(()=>this.focus()),{once:!0})},OJ=new WeakSet,NJ=function(){var e;null==(e=zJ(this,RJ))||e.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))},jJ=new WeakSet,FJ=function(e){qJ(this,RJ,e.relatedTarget),wY(this,e.relatedTarget)||(this.open=!this.open)},UJ=new WeakSet,BJ=function(e){var t;wY(this,e.relatedTarget)||(null==(t=zJ(this,IJ))||t.focus(),zJ(this,RJ)&&zJ(this,RJ)!==e.relatedTarget&&this.open&&(this.open=!1))},$J=new WeakSet,VJ=function(e){var t,n,r,i,o;const{key:a,ctrlKey:s,altKey:l,metaKey:c}=e;s||l||c||this.keysUsed.includes(a)&&(e.preventDefault(),e.stopPropagation(),"Tab"===a?(e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()):"Escape"===a&&(null==(o=zJ(this,IJ))||o.focus(),this.open=!1))},XJ.getTemplateHTML=function(e){return`\n    <style>\n      :host {\n        font: var(--media-font,\n          var(--media-font-weight, normal)\n          var(--media-font-size, 14px) /\n          var(--media-text-content-height, var(--media-control-height, 24px))\n          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n        display: var(--media-dialog-display, inline-flex);\n        justify-content: center;\n        align-items: center;\n        \n        transition-behavior: allow-discrete;\n        visibility: hidden;\n        opacity: 0;\n        transform: translateY(2px) scale(.99);\n        pointer-events: none;\n      }\n\n      :host([open]) {\n        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;\n        visibility: visible;\n        opacity: 1;\n        transform: translateY(0) scale(1);\n        pointer-events: auto;\n      }\n\n      #content {\n        display: flex;\n        position: relative;\n        box-sizing: border-box;\n        width: min(320px, 100%);\n        word-wrap: break-word;\n        max-height: 100%;\n        overflow: auto;\n        text-align: center;\n        line-height: 1.4;\n      }\n    </style>\n    ${this.getSlotTemplateHTML(e)}\n  `},XJ.getSlotTemplateHTML=function(e){return'\n    <slot id="content"></slot>\n  '},cY.customElements.get("media-chrome-dialog")||cY.customElements.define("media-chrome-dialog",XJ);var QJ,JJ,ZJ,eZ,tZ,nZ,rZ,iZ,oZ,aZ,sZ,lZ,cZ,uZ,dZ,hZ,pZ,mZ,fZ,gZ,vZ,yZ,bZ,wZ,xZ,EZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},AZ=(e,t,n)=>(EZ(e,t,"read from private field"),n?n.call(e):t.get(e)),SZ=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},TZ=(e,t,n,r)=>(EZ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_Z=(e,t,n)=>(EZ(e,t,"access private method"),n);const kZ=uY.createElement("template");kZ.innerHTML='\n  <style>\n    :host {\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      box-shadow: var(--_focus-visible-box-shadow, none);\n      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      display: inline-flex;\n      align-items: center;\n      \n      vertical-align: middle;\n      box-sizing: border-box;\n      position: relative;\n      width: 100px;\n      transition: background .15s linear;\n      cursor: var(--media-cursor, pointer);\n      pointer-events: auto;\n      touch-action: none; \n    }\n\n    \n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgb(50 50 70 / .7));\n    }\n\n    #leftgap {\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n    }\n\n    #rightgap {\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n    }\n\n    #startpoint,\n    #endpoint {\n      position: absolute;\n    }\n\n    #endpoint {\n      right: 0;\n    }\n\n    #container {\n      \n      width: var(--media-range-track-width, 100%);\n      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));\n      position: relative;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      min-width: 40px;\n    }\n\n    #range {\n      \n      display: var(--media-time-range-hover-display, block);\n      bottom: var(--media-time-range-hover-bottom, -7px);\n      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));\n      width: 100%;\n      position: absolute;\n      cursor: var(--media-cursor, pointer);\n\n      -webkit-appearance: none; \n      -webkit-tap-highlight-color: transparent;\n      background: transparent; \n      margin: 0;\n      z-index: 1;\n    }\n\n    @media (hover: hover) {\n      #range {\n        bottom: var(--media-time-range-hover-bottom, -5px);\n        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));\n      }\n    }\n\n    \n    \n    #range::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      background: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    \n    #range::-moz-range-thumb {\n      background: transparent;\n      border: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    #appearance {\n      height: var(--media-range-track-height, 4px);\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      width: 100%;\n      position: absolute;\n      \n      will-change: transform;\n    }\n\n    #track {\n      background: var(--media-range-track-background, rgb(255 255 255 / .2));\n      border-radius: var(--media-range-track-border-radius, 1px);\n      border: var(--media-range-track-border, none);\n      outline: var(--media-range-track-outline);\n      outline-offset: var(--media-range-track-outline-offset);\n      backdrop-filter: var(--media-range-track-backdrop-filter);\n      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);\n      box-shadow: var(--media-range-track-box-shadow, none);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    #progress,\n    #pointer {\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #progress {\n      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));\n      transition: var(--media-range-track-transition);\n    }\n\n    #pointer {\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    @media (hover: hover) {\n      :host(:hover) #pointer {\n        transition: visibility .5s, opacity .5s;\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    #thumb,\n    ::slotted([slot=thumb]) {\n      width: var(--media-range-thumb-width, 10px);\n      height: var(--media-range-thumb-height, 10px);\n      transition: var(--media-range-thumb-transition);\n      transform: var(--media-range-thumb-transform, none);\n      opacity: var(--media-range-thumb-opacity, 1);\n      translate: -50%;\n      position: absolute;\n      left: 0;\n      cursor: var(--media-cursor, pointer);\n    }\n\n    #thumb {\n      border-radius: var(--media-range-thumb-border-radius, 10px);\n      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));\n      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n      border: var(--media-range-thumb-border, none);\n    }\n\n    :host([disabled]) #thumb {\n      background-color: #777;\n    }\n\n    .segments #appearance {\n      height: var(--media-range-segment-hover-height, 7px);\n    }\n\n    #track {\n      clip-path: url(#segments-clipping);\n    }\n\n    #segments {\n      --segments-gap: var(--media-range-segments-gap, 2px);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n\n    #segments-clipping {\n      transform: translateX(calc(var(--segments-gap) / 2));\n    }\n\n    #segments-clipping:empty {\n      display: none;\n    }\n\n    #segments-clipping rect {\n      height: var(--media-range-track-height, 4px);\n      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);\n      transition: var(--media-range-segment-transition, transform .1s ease-in-out);\n      transform: var(--media-range-segment-transform, scaleY(1));\n      transform-origin: center;\n    }\n  </style>\n  <div id="leftgap"></div>\n  <div id="container">\n    <div id="startpoint"></div>\n    <div id="endpoint"></div>\n    <div id="appearance">\n      <div id="track" part="track">\n        <div id="pointer"></div>\n        <div id="progress" part="progress"></div>\n      </div>\n      <slot name="thumb">\n        <div id="thumb" part="thumb"></div>\n      </slot>\n      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>\n    </div>\n    <input id="range" type="range" min="0" max="1" step="any" value="0">\n  </div>\n  <div id="rightgap"></div>\n';class CZ extends cY.HTMLElement{constructor(){super(),SZ(this,aZ),SZ(this,lZ),SZ(this,uZ),SZ(this,hZ),SZ(this,mZ),SZ(this,gZ),SZ(this,yZ),SZ(this,wZ),SZ(this,QJ,void 0),SZ(this,JJ,void 0),SZ(this,ZJ,void 0),SZ(this,eZ,void 0),SZ(this,tZ,{}),SZ(this,nZ,[]),SZ(this,rZ,(()=>{if(this.range.matches(":focus-visible")){const{style:e}=TY(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}})),SZ(this,iZ,(()=>{const{style:e}=TY(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")})),SZ(this,oZ,(()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(kZ.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),TZ(this,ZJ,this.shadowRoot.querySelector("#startpoint")),TZ(this,eZ,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",TK.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===TK.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=AZ(this,QJ))?void 0:r.unassociateElement)||i.call(r,this),TZ(this,QJ,null)),n&&this.isConnected&&(TZ(this,QJ,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=AZ(this,QJ))?void 0:a.associateElement)||s.call(a,this))):("disabled"===e||"aria-disabled"===e&&t!==n)&&(null==n?(this.range.removeAttribute(e),_Z(this,lZ,cZ).call(this)):(this.range.setAttribute(e,n),_Z(this,uZ,dZ).call(this)))}connectedCallback(){var e,t,n;const{style:r}=TY(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),AZ(this,tZ).pointer=TY(this.shadowRoot,"#pointer"),AZ(this,tZ).progress=TY(this.shadowRoot,"#progress"),AZ(this,tZ).thumb=TY(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),AZ(this,tZ).activeSegment=TY(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const i=this.getAttribute(TK.MEDIA_CONTROLLER);i&&(TZ(this,QJ,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=AZ(this,QJ))?void 0:t.associateElement)||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",AZ(this,rZ)),this.shadowRoot.addEventListener("focusout",AZ(this,iZ)),_Z(this,lZ,cZ).call(this),mY(this.container,AZ(this,oZ))}disconnectedCallback(){var e,t;_Z(this,uZ,dZ).call(this),null==(t=null==(e=AZ(this,QJ))?void 0:e.unassociateElement)||t.call(e,this),TZ(this,QJ,null),this.shadowRoot.removeEventListener("focusin",AZ(this,rZ)),this.shadowRoot.removeEventListener("focusout",AZ(this,iZ)),fY(this.container,AZ(this,oZ))}updatePointerBar(e){var t;null==(t=AZ(this,tZ).pointer)||t.style.setProperty("width",100*this.getPointerRatio(e)+"%")}updateBar(){var e,t;const n=100*this.range.valueAsNumber;null==(e=AZ(this,tZ).progress)||e.style.setProperty("width",`${n}%`),null==(t=AZ(this,tZ).thumb)||t.style.setProperty("left",`${n}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(null==e?void 0:e.length)),!(null==e?void 0:e.length))return;const n=[...new Set([+this.range.min,...e.flatMap((e=>[e.start,e.end])),+this.range.max])];TZ(this,nZ,[...n]);const r=n.pop();for(const[i,o]of n.entries()){const[e,a]=[0===i,i===n.length-1],s=e?"calc(var(--segments-gap) / -1)":100*o+"%",l=`calc(${100*((a?r:n[i+1])-o)}%${e||a?"":" - var(--segments-gap)"})`,c=uY.createElementNS("http://www.w3.org/2000/svg","rect"),u=TY(this.shadowRoot,`#segments-clipping rect:nth-child(${i+1})`);u.style.setProperty("x",s),u.style.setProperty("width",l),t.append(c)}}getPointerRatio(e){return function(e,t,n,r){const i=r.x-n.x,o=r.y-n.y,a=i*i+o*o;if(0===a)return 0;const s=((e-n.x)*i+(t-n.y)*o)/a;return Math.max(0,Math.min(1,s))}(e.clientX,e.clientY,AZ(this,ZJ).getBoundingClientRect(),AZ(this,eZ).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":_Z(this,wZ,xZ).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":_Z(this,mZ,fZ).call(this,e);break;case"pointerdown":_Z(this,hZ,pZ).call(this,e);break;case"pointerup":_Z(this,gZ,vZ).call(this);break;case"pointerleave":_Z(this,yZ,bZ).call(this)}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}QJ=new WeakMap,JJ=new WeakMap,ZJ=new WeakMap,eZ=new WeakMap,tZ=new WeakMap,nZ=new WeakMap,rZ=new WeakMap,iZ=new WeakMap,oZ=new WeakMap,aZ=new WeakSet,sZ=function(e){const t=AZ(this,tZ).activeSegment;if(!t)return;const n=this.getPointerRatio(e),r=AZ(this,nZ).findIndex(((e,t,r)=>{const i=r[t+1];return null!=i&&n>=e&&n<=i})),i=`#segments-clipping rect:nth-child(${r+1})`;t.selectorText==i&&t.style.transform||(t.selectorText=i,t.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))},lZ=new WeakSet,cZ=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))},uZ=new WeakSet,dZ=function(){var e,t;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),null==(e=cY.window)||e.removeEventListener("pointerup",this),null==(t=cY.window)||t.removeEventListener("pointermove",this)},hZ=new WeakSet,pZ=function(e){var t;TZ(this,JJ,e.composedPath().includes(this.range)),null==(t=cY.window)||t.addEventListener("pointerup",this)},mZ=new WeakSet,fZ=function(e){var t;"mouse"!==e.pointerType&&_Z(this,hZ,pZ).call(this,e),this.addEventListener("pointerleave",this),null==(t=cY.window)||t.addEventListener("pointermove",this)},gZ=new WeakSet,vZ=function(){var e;null==(e=cY.window)||e.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")},yZ=new WeakSet,bZ=function(){var e,t;this.removeEventListener("pointerleave",this),null==(e=cY.window)||e.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),null==(t=AZ(this,tZ).activeSegment)||t.style.removeProperty("transform")},wZ=new WeakSet,xZ=function(e){this.toggleAttribute("dragging",1===e.buttons||"mouse"!==e.pointerType),this.updatePointerBar(e),_Z(this,aZ,sZ).call(this,e),!this.dragging||"mouse"===e.pointerType&&AZ(this,JJ)||(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(e),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))},cY.customElements.get("media-chrome-range")||cY.customElements.define("media-chrome-range",CZ);var IZ,RZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},DZ=(e,t,n)=>(RZ(e,t,"read from private field"),n?n.call(e):t.get(e)),LZ=(e,t,n,r)=>(RZ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const PZ=uY.createElement("template");PZ.innerHTML='\n  <style>\n    :host {\n      \n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --media-loading-indicator-icon-height: 44px;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-volume-range) {\n      min-height: 100%;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n\n    ::slotted([role="menu"]) {\n      position: absolute;\n    }\n  </style>\n\n  <slot></slot>\n';class MZ extends cY.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,IZ,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(PZ.content.cloneNode(!0)))}static get observedAttributes(){return[TK.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===TK.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=DZ(this,IZ))?void 0:r.unassociateElement)||i.call(r,this),LZ(this,IZ,null)),n&&this.isConnected&&(LZ(this,IZ,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=DZ(this,IZ))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(TK.MEDIA_CONTROLLER);r&&(LZ(this,IZ,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=DZ(this,IZ))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=DZ(this,IZ))?void 0:e.unassociateElement)||t.call(e,this),LZ(this,IZ,null)}}IZ=new WeakMap,cY.customElements.get("media-control-bar")||cY.customElements.define("media-control-bar",MZ);var OZ,NZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},jZ=(e,t,n)=>(NZ(e,t,"read from private field"),n?n.call(e):t.get(e)),FZ=(e,t,n,r)=>(NZ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const UZ=uY.createElement("template");UZ.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));\n      padding: var(--media-control-padding, 10px);\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      text-align: center;\n      pointer-events: auto;\n    }\n\n    \n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n      outline: 0;\n    }\n\n    \n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <slot></slot>\n";class BZ extends cY.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,OZ,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(UZ.content.cloneNode(!0)))}static get observedAttributes(){return[TK.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===TK.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=jZ(this,OZ))?void 0:r.unassociateElement)||i.call(r,this),FZ(this,OZ,null)),n&&this.isConnected&&(FZ(this,OZ,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=jZ(this,OZ))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const{style:r}=TY(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const i=this.getAttribute(TK.MEDIA_CONTROLLER);i&&(FZ(this,OZ,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=jZ(this,OZ))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=jZ(this,OZ))?void 0:e.unassociateElement)||t.call(e,this),FZ(this,OZ,null)}}OZ=new WeakMap,cY.customElements.get("media-text-display")||cY.customElements.define("media-text-display",BZ);var $Z,VZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},WZ=(e,t,n)=>(VZ(e,t,"read from private field"),n?n.call(e):t.get(e));class zZ extends BZ{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,$Z,void 0),e=this,t=$Z,n=this.shadowRoot.querySelector("slot"),VZ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),WZ(this,$Z).textContent=XK(0)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===CK.MEDIA_DURATION&&(WZ(this,$Z).textContent=XK(+n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return kY(this,CK.MEDIA_DURATION)}set mediaDuration(e){CY(this,CK.MEDIA_DURATION,e)}}$Z=new WeakMap,cY.customElements.get("media-duration-display")||cY.customElements.define("media-duration-display",zZ);const HZ={2:tY("Network Error"),3:tY("Decode Error"),4:tY("Source Not Supported"),5:tY("Encryption Error")},qZ={2:tY("A network error caused the media download to fail."),3:tY("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:tY("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:tY("The media is encrypted and there are no keys to decrypt it.")},GZ=e=>{var t,n;return 1===e.code?null:{title:null!=(t=HZ[e.code])?t:`Error ${e.code}`,message:null!=(n=qZ[e.code])?n:e.message}};var KZ,YZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};function XZ(e){var t;const{title:n,message:r}=null!=(t=GZ(e))?t:{};let i="";return n&&(i+=`<slot name="error-${e.code}-title"><h3>${n}</h3></slot>`),r&&(i+=`<slot name="error-${e.code}-message"><p>${r}</p></slot>`),i}const QZ=[CK.MEDIA_ERROR_CODE,CK.MEDIA_ERROR_MESSAGE];class JZ extends XJ{constructor(){super(...arguments),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,KZ,null)}static get observedAttributes(){return[...super.observedAttributes,...QZ]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,t,n){var r;if(super.attributeChangedCallback(e,t,n),!QZ.includes(e))return;const i=null!=(r=this.mediaError)?r:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=function(e){return e.code&&null!==GZ(e)}(i),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(i))}get mediaError(){return YZ(e=this,t=KZ,"read from private field"),n?n.call(e):t.get(e);var e,t,n}set mediaError(e){((e,t,n,r)=>{YZ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,KZ,e)}get mediaErrorCode(){return kY(this,"mediaerrorcode")}set mediaErrorCode(e){CY(this,"mediaerrorcode",e)}get mediaErrorMessage(){return DY(this,"mediaerrormessage")}set mediaErrorMessage(e){LY(this,"mediaerrormessage",e)}}KZ=new WeakMap,JZ.getSlotTemplateHTML=function(e){return`\n    <style>\n      :host {\n        background: rgb(20 20 30 / .8);\n      }\n\n      #content {\n        display: block;\n        padding: 1.2em 1.5em;\n      }\n\n      h3,\n      p {\n        margin-block: 0 .3em;\n      }\n    </style>\n    <slot name="error-${e.mediaerrorcode}" id="content">\n      ${XZ({code:+e.mediaerrorcode,message:e.mediaerrormessage})}\n    </slot>\n  `},JZ.formatErrorMessage=XZ,cY.customElements.get("media-error-dialog")||cY.customElements.define("media-error-dialog",JZ);var ZZ=JZ;const e0=uY.createElement("template");e0.innerHTML=`\n  <style>\n    :host([${CK.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${CK.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${CK.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],\n    :host(:not([${CK.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>\n</svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>\n</svg></slot>\n  </slot>\n`;const t0=`\n  <slot name="tooltip-enter">${tY("Enter fullscreen mode")}</slot>\n  <slot name="tooltip-exit">${tY("Exit fullscreen mode")}</slot>\n`,n0=e=>{const t=e.mediaIsFullscreen?tY("exit fullscreen mode"):tY("enter fullscreen mode");e.setAttribute("aria-label",t)};class r0 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_IS_FULLSCREEN,CK.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(){super({slotTemplate:e0,tooltipContent:t0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),n0(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_IS_FULLSCREEN&&n0(this)}get mediaFullscreenUnavailable(){return DY(this,CK.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){LY(this,CK.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return IY(this,CK.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){RY(this,CK.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?SK.MEDIA_EXIT_FULLSCREEN_REQUEST:SK.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new cY.CustomEvent(e,{composed:!0,bubbles:!0}))}}cY.customElements.get("media-fullscreen-button")||cY.customElements.define("media-fullscreen-button",r0);const{MEDIA_TIME_IS_LIVE:i0,MEDIA_PAUSED:o0}=CK,{MEDIA_SEEK_TO_LIVE_REQUEST:a0,MEDIA_PLAY_REQUEST:s0}=SK,l0=uY.createElement("template");l0.innerHTML=`\n  <style>\n  :host { --media-tooltip-display: none; }\n  \n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    \n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${i0}]:not([${o0}])) slot[name=indicator] > *,\n  :host([${i0}]:not([${o0}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${i0}]:not([${o0}])) {\n    cursor: var(--media-cursor, not-allowed);\n  }\n\n  slot[name=text]{\n    text-transform: uppercase;\n  }\n\n  </style>\n\n  <slot name="indicator"><svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg></slot>\n  \n  <slot name="spacer">&nbsp;</slot><slot name="text">${tY("live")}</slot>\n`;const c0=e=>{const t=e.mediaPaused||!e.mediaTimeIsLive,n=tY(t?"seek to live":"playing live");e.setAttribute("aria-label",n),t?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true")};class u0 extends hJ{static get observedAttributes(){return[...super.observedAttributes,o0,i0]}constructor(){super({slotTemplate:l0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){c0(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),c0(this)}get mediaPaused(){return IY(this,CK.MEDIA_PAUSED)}set mediaPaused(e){RY(this,CK.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return IY(this,CK.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){RY(this,CK.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new cY.CustomEvent(a0,{composed:!0,bubbles:!0})),this.hasAttribute(o0)&&this.dispatchEvent(new cY.CustomEvent(s0,{composed:!0,bubbles:!0})))}}cY.customElements.get("media-live-button")||cY.customElements.define("media-live-button",u0);var d0,h0,p0=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},m0=(e,t,n)=>(p0(e,t,"read from private field"),n?n.call(e):t.get(e)),f0=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},g0=(e,t,n,r)=>(p0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const v0="loadingdelay",y0="noautohide",b0=uY.createElement("template");b0.innerHTML=`\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, 500ms);\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=icon] > *,\n:host ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 0);\n  transition: opacity 0.15s;\n}\n\n:host([${CK.MEDIA_LOADING}]:not([${CK.MEDIA_PAUSED}])) slot[name=icon] > *,\n:host([${CK.MEDIA_LOADING}]:not([${CK.MEDIA_PAUSED}])) ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 1);\n  transition: opacity 0.15s var(--_loading-indicator-delay);\n}\n\n:host #status {\n  visibility: var(--media-loading-indicator-opacity, hidden);\n  transition: visibility 0.15s;\n}\n\n:host([${CK.MEDIA_LOADING}]:not([${CK.MEDIA_PAUSED}])) #status {\n  visibility: var(--media-loading-indicator-opacity, visible);\n  transition: visibility 0.15s var(--_loading-indicator-delay);\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-indicator-icon-width);\n  height: var(--media-loading-indicator-icon-height, 100px);\n  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n  vertical-align: middle;\n}\n</style>\n\n<slot name="icon">\n<svg aria-hidden="true" viewBox="0 0 100 100">\n  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n    <animateTransform\n       attributeName="transform"\n       attributeType="XML"\n       type="rotate"\n       dur="1s"\n       from="0 50 50"\n       to="360 50 50"\n       repeatCount="indefinite" />\n  </path>\n</svg>\n</slot>\n<div id="status" role="status" aria-live="polite">${tY("media loading")}</div>\n`;class w0 extends cY.HTMLElement{constructor(){if(super(),f0(this,d0,void 0),f0(this,h0,500),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=b0.content.cloneNode(!0);e.appendChild(t)}}static get observedAttributes(){return[TK.MEDIA_CONTROLLER,CK.MEDIA_PAUSED,CK.MEDIA_LOADING,v0]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===v0&&t!==n?this.loadingDelay=Number(n):e===TK.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=m0(this,d0))?void 0:r.unassociateElement)||i.call(r,this),g0(this,d0,null)),n&&this.isConnected&&(g0(this,d0,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=m0(this,d0))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(TK.MEDIA_CONTROLLER);r&&(g0(this,d0,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=m0(this,d0))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=m0(this,d0))?void 0:e.unassociateElement)||t.call(e,this),g0(this,d0,null)}get loadingDelay(){return m0(this,h0)}set loadingDelay(e){g0(this,h0,e);const{style:t}=TY(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return IY(this,CK.MEDIA_PAUSED)}set mediaPaused(e){RY(this,CK.MEDIA_PAUSED,e)}get mediaLoading(){return IY(this,CK.MEDIA_LOADING)}set mediaLoading(e){RY(this,CK.MEDIA_LOADING,e)}get mediaController(){return DY(this,TK.MEDIA_CONTROLLER)}set mediaController(e){LY(this,TK.MEDIA_CONTROLLER,e)}get noAutohide(){return IY(this,y0)}set noAutohide(e){RY(this,y0,e)}}d0=new WeakMap,h0=new WeakMap,cY.customElements.get("media-loading-indicator")||cY.customElements.define("media-loading-indicator",w0);const{MEDIA_VOLUME_LEVEL:x0}=CK,E0='<svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>\n</svg>',A0=uY.createElement("template");A0.innerHTML=`\n  <style>\n  \n  :host(:not([${x0}])) slot[name=icon] slot:not([name=high]), \n  :host([${x0}=high]) slot[name=icon] slot:not([name=high]) {\n    display: none !important;\n  }\n\n  :host([${x0}=off]) slot[name=icon] slot:not([name=off]) {\n    display: none !important;\n  }\n\n  :host([${x0}=low]) slot[name=icon] slot:not([name=low]) {\n    display: none !important;\n  }\n\n  :host([${x0}=medium]) slot[name=icon] slot:not([name=medium]) {\n    display: none !important;\n  }\n\n  :host(:not([${x0}=off])) slot[name=tooltip-unmute],\n  :host([${x0}=off]) slot[name=tooltip-mute] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>\n</svg></slot>\n    <slot name="low">${E0}</slot>\n    <slot name="medium">${E0}</slot>\n    <slot name="high"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>\n</svg></slot>\n  </slot>\n`;const S0=`\n  <slot name="tooltip-mute">${tY("Mute")}</slot>\n  <slot name="tooltip-unmute">${tY("Unmute")}</slot>\n`,T0=e=>{const t="off"===e.mediaVolumeLevel,n=tY(t?"unmute":"mute");e.setAttribute("aria-label",n)};class _0 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_VOLUME_LEVEL]}constructor(){super({slotTemplate:A0,tooltipContent:S0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){T0(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===CK.MEDIA_VOLUME_LEVEL&&T0(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return DY(this,CK.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){LY(this,CK.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e="off"===this.mediaVolumeLevel?SK.MEDIA_UNMUTE_REQUEST:SK.MEDIA_MUTE_REQUEST;this.dispatchEvent(new cY.CustomEvent(e,{composed:!0,bubbles:!0}))}}cY.customElements.get("media-mute-button")||cY.customElements.define("media-mute-button",_0);const k0='<svg aria-hidden="true" viewBox="0 0 28 24">\n  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>\n</svg>',C0=uY.createElement("template");C0.innerHTML=`\n  <style>\n  :host([${CK.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${CK.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${CK.MEDIA_IS_PIP}]) slot[name=tooltip-enter],\n  :host(:not([${CK.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${k0}</slot>\n    <slot name="exit">${k0}</slot>\n  </slot>\n`;const I0=`\n  <slot name="tooltip-enter">${tY("Enter picture in picture mode")}</slot>\n  <slot name="tooltip-exit">${tY("Exit picture in picture mode")}</slot>\n`,R0=e=>{const t=e.mediaIsPip?tY("exit picture in picture mode"):tY("enter picture in picture mode");e.setAttribute("aria-label",t)};class D0 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_IS_PIP,CK.MEDIA_PIP_UNAVAILABLE]}constructor(){super({slotTemplate:C0,tooltipContent:I0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){R0(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===CK.MEDIA_IS_PIP&&R0(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return DY(this,CK.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){LY(this,CK.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return IY(this,CK.MEDIA_IS_PIP)}set mediaIsPip(e){RY(this,CK.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?SK.MEDIA_EXIT_PIP_REQUEST:SK.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new cY.CustomEvent(e,{composed:!0,bubbles:!0}))}}cY.customElements.get("media-pip-button")||cY.customElements.define("media-pip-button",D0);var L0,P0=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const M0="rates",O0=[1,1.2,1.5,1.7,2],N0=uY.createElement("template");N0.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n  </style>\n  <slot name="icon"></slot>\n';class j0 extends hJ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:N0,tooltipContent:tY("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,L0,new SX(this,M0,{defaultValue:O0})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PLAYBACK_RATE,M0]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===M0&&(P0(this,L0).value=n),e===CK.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",tY("Playback rate {playbackRate}",{playbackRate:t}))}}get rates(){return P0(this,L0)}set rates(e){e?Array.isArray(e)&&(P0(this,L0).value=e.join(" ")):P0(this,L0).value=""}get mediaPlaybackRate(){return kY(this,CK.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){CY(this,CK.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),(e=>+e)).sort(((e,t)=>e-t)),r=null!=(t=null!=(e=n.find((e=>e>this.mediaPlaybackRate)))?e:n[0])?t:1,i=new cY.CustomEvent(SK.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(i)}}L0=new WeakMap,cY.customElements.get("media-playback-rate-button")||cY.customElements.define("media-playback-rate-button",j0);const F0=uY.createElement("template");F0.innerHTML=`\n  <style>\n    :host([${CK.MEDIA_PAUSED}]) slot[name=pause],\n    :host(:not([${CK.MEDIA_PAUSED}])) slot[name=play] {\n      display: none !important;\n    }\n\n    :host([${CK.MEDIA_PAUSED}]) slot[name=tooltip-pause],\n    :host(:not([${CK.MEDIA_PAUSED}])) slot[name=tooltip-play] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="play"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="m6 21 15-9L6 3v18Z"/>\n</svg></slot>\n    <slot name="pause"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>\n</svg></slot>\n  </slot>\n`;const U0=`\n  <slot name="tooltip-play">${tY("Play")}</slot>\n  <slot name="tooltip-pause">${tY("Pause")}</slot>\n`,B0=e=>{const t=e.mediaPaused?tY("play"):tY("pause");e.setAttribute("aria-label",t)};class $0 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PAUSED,CK.MEDIA_ENDED]}constructor(){super({slotTemplate:F0,tooltipContent:U0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){B0(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===CK.MEDIA_PAUSED&&B0(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return IY(this,CK.MEDIA_PAUSED)}set mediaPaused(e){RY(this,CK.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?SK.MEDIA_PLAY_REQUEST:SK.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new cY.CustomEvent(e,{composed:!0,bubbles:!0}))}}cY.customElements.get("media-play-button")||cY.customElements.define("media-play-button",$0);const V0="placeholdersrc",W0="src",z0=uY.createElement("template");z0.innerHTML='\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));\n      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img part="poster img" aria-hidden="true" id="image"/>\n';class H0 extends cY.HTMLElement{static get observedAttributes(){return[V0,W0]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(z0.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===W0&&(null==n?this.image.removeAttribute(W0):this.image.setAttribute(W0,n)),e===V0&&(null==n?this.image.style.removeProperty("background-image"):((e,t)=>{e.style["background-image"]=`url('${t}')`})(this.image,n))}get placeholderSrc(){return DY(this,V0)}set placeholderSrc(e){LY(this,W0,e)}get src(){return DY(this,W0)}set src(e){LY(this,W0,e)}}cY.customElements.get("media-poster-image")||cY.customElements.define("media-poster-image",H0);var q0,G0=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};class K0 extends BZ{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,q0,void 0),e=this,t=q0,n=this.shadowRoot.querySelector("slot"),G0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,n){var r,i,o;super.attributeChangedCallback(e,t,n),e===CK.MEDIA_PREVIEW_CHAPTER&&n!==t&&null!=n&&((r=this,i=q0,G0(r,i,"read from private field"),o?o.call(r):i.get(r)).textContent=n,""!==n?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return DY(this,CK.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){LY(this,CK.MEDIA_PREVIEW_CHAPTER,e)}}q0=new WeakMap,cY.customElements.get("media-preview-chapter-display")||cY.customElements.define("media-preview-chapter-display",K0);var Y0,X0=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Q0=(e,t,n)=>(X0(e,t,"read from private field"),n?n.call(e):t.get(e)),J0=(e,t,n,r)=>(X0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Z0=uY.createElement("template");Z0.innerHTML='\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading="eager" decoding="async">\n';class e1 extends cY.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Y0,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Z0.content.cloneNode(!0)))}static get observedAttributes(){return[TK.MEDIA_CONTROLLER,CK.MEDIA_PREVIEW_IMAGE,CK.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const r=this.getAttribute(TK.MEDIA_CONTROLLER);r&&(J0(this,Y0,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=Q0(this,Y0))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=Q0(this,Y0))?void 0:e.unassociateElement)||t.call(e,this),J0(this,Y0,null)}attributeChangedCallback(e,t,n){var r,i,o,a,s;[CK.MEDIA_PREVIEW_IMAGE,CK.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===TK.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=Q0(this,Y0))?void 0:r.unassociateElement)||i.call(r,this),J0(this,Y0,null)),n&&this.isConnected&&(J0(this,Y0,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=Q0(this,Y0))?void 0:a.associateElement)||s.call(a,this)))}get mediaPreviewImage(){return DY(this,CK.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){LY(this,CK.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(CK.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map((e=>+e))}set mediaPreviewCoords(e){e?this.setAttribute(CK.MEDIA_PREVIEW_COORDS,e.join(" ")):this.removeAttribute(CK.MEDIA_PREVIEW_COORDS)}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!e||!t)return;const[n,r,i,o]=e,a=t.split("#")[0],s=getComputedStyle(this),{maxWidth:l,maxHeight:c,minWidth:u,minHeight:d}=s,h=Math.min(parseInt(l)/i,parseInt(c)/o),p=Math.max(parseInt(u)/i,parseInt(d)/o),m=h<1,f=m?h:p>1?p:1,{style:g}=TY(this.shadowRoot,":host"),v=TY(this.shadowRoot,"img").style,y=this.shadowRoot.querySelector("img"),b=m?"min":"max";g.setProperty(`${b}-width`,"initial","important"),g.setProperty(`${b}-height`,"initial","important"),g.width=i*f+"px",g.height=o*f+"px";const w=()=>{v.width=this.imgWidth*f+"px",v.height=this.imgHeight*f+"px",v.display="block"};y.src!==a&&(y.onload=()=>{this.imgWidth=y.naturalWidth,this.imgHeight=y.naturalHeight,w()},y.src=a,w()),w(),v.transform=`translate(-${n*f}px, -${r*f}px)`}}Y0=new WeakMap,cY.customElements.get("media-preview-thumbnail")||cY.customElements.define("media-preview-thumbnail",e1);var t1,n1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},r1=(e,t,n)=>(n1(e,t,"read from private field"),n?n.call(e):t.get(e));class i1 extends BZ{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,t1,void 0),e=this,t=t1,n=this.shadowRoot.querySelector("slot"),n1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),r1(this,t1).textContent=XK(0)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_PREVIEW_TIME&&null!=n&&(r1(this,t1).textContent=XK(parseFloat(n)))}get mediaPreviewTime(){return kY(this,CK.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){CY(this,CK.MEDIA_PREVIEW_TIME,e)}}t1=new WeakMap,cY.customElements.get("media-preview-time-display")||cY.customElements.define("media-preview-time-display",i1);const o1="seekoffset",a1=uY.createElement("template");a1.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>\n';class s1 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_CURRENT_TIME,o1]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:a1,tooltipContent:tY("Seek backward"),...e})}connectedCallback(){this.seekOffset=kY(this,o1,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===o1&&(this.seekOffset=kY(this,o1,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return kY(this,o1,30)}set seekOffset(e){CY(this,o1,e),this.setAttribute("aria-label",tY("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),yY(bY(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return kY(this,CK.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){CY(this,CK.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new cY.CustomEvent(SK.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}cY.customElements.get("media-seek-backward-button")||cY.customElements.define("media-seek-backward-button",s1);const l1="seekoffset",c1=uY.createElement("template");c1.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>\n';class u1 extends hJ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_CURRENT_TIME,l1]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:c1,tooltipContent:tY("Seek forward"),...e})}connectedCallback(){this.seekOffset=kY(this,l1,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===l1&&(this.seekOffset=kY(this,l1,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return kY(this,l1,30)}set seekOffset(e){CY(this,l1,e),this.setAttribute("aria-label",tY("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),yY(bY(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return kY(this,CK.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){CY(this,CK.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new cY.CustomEvent(SK.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}cY.customElements.get("media-seek-forward-button")||cY.customElements.define("media-seek-forward-button",u1);var d1,h1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},p1=(e,t,n)=>(h1(e,t,"read from private field"),n?n.call(e):t.get(e));const m1={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},f1=[...Object.values(m1),CK.MEDIA_CURRENT_TIME,CK.MEDIA_DURATION,CK.MEDIA_SEEKABLE],g1=["Enter"," "],v1="&nbsp;/&nbsp;",y1=function(e){let{timesSep:t=v1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;const i=e.hasAttribute(m1.REMAINING),o=e.hasAttribute(m1.SHOW_DURATION),a=null!=(n=e.mediaCurrentTime)?n:0,[,s]=null!=(r=e.mediaSeekable)?r:[];let l=0;Number.isFinite(e.mediaDuration)?l=e.mediaDuration:Number.isFinite(s)&&(l=s);const c=XK(i?0-(l-a):a);return o?`${c}${t}${XK(l)}`:c};class b1 extends BZ{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,d1,void 0),e=this,t=d1,n=this.shadowRoot.querySelector("slot"),h1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),p1(this,d1).innerHTML=`${y1(this)}`}static get observedAttributes(){return[...super.observedAttributes,...f1,"disabled"]}connectedCallback(){const{style:e}=TY(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",tY("playback time"));const t=e=>{const{key:n}=e;g1.includes(n)?this.toggleTimeDisplay():this.removeEventListener("keyup",t)};this.addEventListener("keydown",(e=>{const{metaKey:n,altKey:r,key:i}=e;n||r||!g1.includes(i)?this.removeEventListener("keyup",t):this.addEventListener("keyup",t)})),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){f1.includes(e)?this.update():"disabled"===e&&n!==t&&(null==n?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return IY(this,m1.REMAINING)}set remaining(e){RY(this,m1.REMAINING,e)}get showDuration(){return IY(this,m1.SHOW_DURATION)}set showDuration(e){RY(this,m1.SHOW_DURATION,e)}get noToggle(){return IY(this,m1.NO_TOGGLE)}set noToggle(e){RY(this,m1.NO_TOGGLE,e)}get mediaDuration(){return kY(this,CK.MEDIA_DURATION)}set mediaDuration(e){CY(this,CK.MEDIA_DURATION,e)}get mediaCurrentTime(){return kY(this,CK.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){CY(this,CK.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(CK.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(CK.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(CK.MEDIA_SEEKABLE)}update(){const e=y1(this);(e=>{var t;const n=e.mediaCurrentTime,[,r]=null!=(t=e.mediaSeekable)?t:[];let i=null;if(Number.isFinite(e.mediaDuration)?i=e.mediaDuration:Number.isFinite(r)&&(i=r),null==n||null===i)return void e.setAttribute("aria-valuetext","video not loaded, unknown time.");const o=e.hasAttribute(m1.REMAINING),a=e.hasAttribute(m1.SHOW_DURATION),s=YK(o?0-(i-n):n);if(!a)return void e.setAttribute("aria-valuetext",s);const l=`${s} of ${YK(i)}`;e.setAttribute("aria-valuetext",l)})(this),e!==p1(this,d1).innerHTML&&(p1(this,d1).innerHTML=e)}}d1=new WeakMap,cY.customElements.get("media-time-display")||cY.customElements.define("media-time-display",b1);var w1,x1,E1,A1,S1,T1,_1,k1,C1,I1,R1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},D1=(e,t,n)=>(R1(e,t,"read from private field"),n?n.call(e):t.get(e)),L1=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},P1=(e,t,n,r)=>(R1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class M1{constructor(e,t,n){var r=this;L1(this,w1,void 0),L1(this,x1,void 0),L1(this,E1,void 0),L1(this,A1,void 0),L1(this,S1,void 0),L1(this,T1,void 0),L1(this,_1,void 0),L1(this,k1,void 0),L1(this,C1,0),L1(this,I1,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();P1(r,C1,requestAnimationFrame(D1(r,I1))),P1(r,A1,performance.now()-D1(r,E1));const t=1e3/r.fps;if(D1(r,A1)>t){P1(r,E1,e-D1(r,A1)%t);const s=1e3/((e-D1(r,x1))/++(n=r,i=S1,{set _(e){P1(n,i,e,o)},get _(){return D1(n,i,a)}})._),l=(e-D1(r,T1))/1e3/r.duration;let c=D1(r,_1)+l*r.playbackRate;c-D1(r,w1).valueAsNumber>0?P1(r,k1,r.playbackRate/r.duration/s):(P1(r,k1,.995*D1(r,k1)),c=D1(r,w1).valueAsNumber+D1(r,k1)),r.callback(c)}var n,i,o,a})),P1(this,w1,e),this.callback=t,this.fps=n}start(){0===D1(this,C1)&&(P1(this,E1,performance.now()),P1(this,x1,D1(this,E1)),P1(this,S1,0),D1(this,I1).call(this))}stop(){0!==D1(this,C1)&&(cancelAnimationFrame(D1(this,C1)),P1(this,C1,0))}update(e){let{start:t,duration:n,playbackRate:r}=e;const i=t-D1(this,w1).valueAsNumber,o=Math.abs(n-this.duration);(i>0||i<-.03||o>=.5)&&this.callback(t),P1(this,_1,t),P1(this,T1,performance.now()),this.duration=n,this.playbackRate=r}}w1=new WeakMap,x1=new WeakMap,E1=new WeakMap,A1=new WeakMap,S1=new WeakMap,T1=new WeakMap,_1=new WeakMap,k1=new WeakMap,C1=new WeakMap,I1=new WeakMap;var O1,N1,j1,F1,U1,B1,$1,V1,W1,z1,H1,q1,G1,K1,Y1,X1,Q1,J1,Z1,e2,t2,n2,r2,i2,o2,a2,s2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},l2=(e,t,n)=>(s2(e,t,"read from private field"),n?n.call(e):t.get(e)),c2=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},u2=(e,t,n,r)=>(s2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),d2=(e,t,n)=>(s2(e,t,"access private method"),n);const h2=uY.createElement("template");h2.innerHTML=`\n  <style>\n    :host {\n      --media-box-border-radius: 4px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n      --media-preview-border-radius: var(--media-box-border-radius);\n      --media-box-arrow-offset: var(--media-box-border-radius);\n      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      --_preview-background: var(--media-preview-background, var(--_control-background));\n\n      \n      contain: layout;\n    }\n\n    #buffered {\n      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #preview-rail,\n    #current-rail {\n      width: 100%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n      will-change: transform;\n    }\n\n    [part~="box"] {\n      width: min-content;\n      \n      position: absolute;\n      bottom: 100%;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~="current-box"] {\n      display: var(--media-current-box-display, var(--media-box-display, flex));\n      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n      visibility: hidden;\n    }\n\n    [part~="preview-box"] {\n      display: var(--media-preview-box-display, var(--media-box-display, flex));\n      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:is([${CK.MEDIA_PREVIEW_IMAGE}], [${CK.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    @media (hover: hover) {\n      :host(:is([${CK.MEDIA_PREVIEW_IMAGE}], [${CK.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      \n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-thumbnail-background, var(--_preview-background));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${CK.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n    :host([${CK.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    @media (hover: hover) {\n      :host([${CK.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n      :host([${CK.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      :host([${CK.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n    }\n\n    media-preview-chapter-display,\n    ::slotted(media-preview-chapter-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      visibility: hidden;\n      \n      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-chapter-background, var(--_preview-background));\n      border-radius: var(--media-preview-chapter-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-chapter-padding, 3.5px 9px);\n      margin: var(--media-preview-chapter-margin, 0 0 5px);\n      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n    }\n\n    :host([${CK.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n    :host([${CK.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-chapter-border-radius, 0);\n      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n      margin: var(--media-preview-chapter-margin, 0);\n      min-width: 100%;\n    }\n\n    media-preview-chapter-display[${CK.MEDIA_PREVIEW_CHAPTER}],\n    ::slotted(media-preview-chapter-display[${CK.MEDIA_PREVIEW_CHAPTER}]) {\n      visibility: visible;\n    }\n\n    media-preview-chapter-display:not([aria-valuetext]),\n    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n      display: none;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display),\n    media-time-display,\n    ::slotted(media-time-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      \n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--_preview-background));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 3.5px 9px);\n      margin: var(--media-preview-time-margin, 0);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50%)\n      ));\n    }\n\n    :host([${CK.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${CK.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n      min-width: 100%;\n    }\n\n    :host([${CK.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n\n    [part~="arrow"],\n    ::slotted([part~="arrow"]) {\n      display: var(--media-box-arrow-display, inline-block);\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n      ));\n      \n      border-color: transparent;\n      border-top-color: var(--media-box-arrow-background, var(--_control-background));\n      border-width: var(--media-box-arrow-border-width,\n        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n      border-style: solid;\n      justify-content: center;\n      height: 0;\n    }\n  </style>\n  <div id="preview-rail">\n    <slot name="preview" part="box preview-box">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-chapter-display></media-preview-chapter-display>\n      <media-preview-time-display></media-preview-time-display>\n      <slot name="preview-arrow"><div part="arrow"></div></slot>\n    </slot>\n  </div>\n  <div id="current-rail">\n    <slot name="current" part="box current-box">\n      \n    </slot>\n  </div>\n`;const p2=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.mediaCurrentTime;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;if(Number.isNaN(r))return 0;const i=(t-n)/(r-n);return Math.max(0,Math.min(i,1))},m2=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.range.valueAsNumber;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;return Number.isNaN(r)?0:t*(r-n)+n};class f2 extends CZ{constructor(){super(),c2(this,z1),c2(this,q1),c2(this,Y1),c2(this,Q1),c2(this,Z1),c2(this,t2),c2(this,r2),c2(this,o2),c2(this,O1,void 0),c2(this,N1,void 0),c2(this,j1,void 0),c2(this,F1,void 0),c2(this,U1,void 0),c2(this,B1,void 0),c2(this,$1,void 0),c2(this,V1,void 0),c2(this,W1,void 0),c2(this,K1,(e=>{this.dragging||(HK(e)&&(this.range.valueAsNumber=e),this.updateBar())})),this.container.appendChild(h2.content.cloneNode(!0));this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),u2(this,j1,this.shadowRoot.querySelectorAll('[part~="box"]')),u2(this,U1,this.shadowRoot.querySelector('[part~="preview-box"]')),u2(this,B1,this.shadowRoot.querySelector('[part~="current-box"]'));const e=getComputedStyle(this);u2(this,$1,parseInt(e.getPropertyValue("--media-box-padding-left"))),u2(this,V1,parseInt(e.getPropertyValue("--media-box-padding-right"))),u2(this,N1,new M1(this.range,l2(this,K1),60))}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PAUSED,CK.MEDIA_DURATION,CK.MEDIA_SEEKABLE,CK.MEDIA_CURRENT_TIME,CK.MEDIA_PREVIEW_IMAGE,CK.MEDIA_PREVIEW_TIME,CK.MEDIA_PREVIEW_CHAPTER,CK.MEDIA_BUFFERED,CK.MEDIA_PLAYBACK_RATE,CK.MEDIA_LOADING,CK.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",tY("seek")),d2(this,z1,H1).call(this),u2(this,O1,this.getRootNode()),null==(e=l2(this,O1))||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),d2(this,z1,H1).call(this),null==(e=l2(this,O1))||e.removeEventListener("transitionstart",this),u2(this,O1,null)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),t!=n&&(e===CK.MEDIA_CURRENT_TIME||e===CK.MEDIA_PAUSED||e===CK.MEDIA_ENDED||e===CK.MEDIA_LOADING||e===CK.MEDIA_DURATION||e===CK.MEDIA_SEEKABLE?(l2(this,N1).update({start:p2(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),d2(this,z1,H1).call(this),(e=>{const t=e.range,n=YK(+m2(e)),r=YK(+e.mediaSeekableEnd),i=n&&r?`${n} of ${r}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",i)})(this)):e===CK.MEDIA_BUFFERED&&this.updateBufferedBar(),e!==CK.MEDIA_DURATION&&e!==CK.MEDIA_SEEKABLE||(this.mediaChaptersCues=l2(this,W1),this.updateBar()))}get mediaChaptersCues(){return l2(this,W1)}set mediaChaptersCues(e){var t;u2(this,W1,e),this.updateSegments(null==(t=l2(this,W1))?void 0:t.map((e=>({start:p2(this,e.startTime),end:p2(this,e.endTime)}))))}get mediaPaused(){return IY(this,CK.MEDIA_PAUSED)}set mediaPaused(e){RY(this,CK.MEDIA_PAUSED,e)}get mediaLoading(){return IY(this,CK.MEDIA_LOADING)}set mediaLoading(e){RY(this,CK.MEDIA_LOADING,e)}get mediaDuration(){return kY(this,CK.MEDIA_DURATION)}set mediaDuration(e){CY(this,CK.MEDIA_DURATION,e)}get mediaCurrentTime(){return kY(this,CK.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){CY(this,CK.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return kY(this,CK.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){CY(this,CK.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(CK.MEDIA_BUFFERED);return e?e.split(" ").map((e=>e.split(":").map((e=>+e)))):[]}set mediaBuffered(e){if(!e)return void this.removeAttribute(CK.MEDIA_BUFFERED);const t=e.map((e=>e.join(":"))).join(" ");this.setAttribute(CK.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(CK.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(CK.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(CK.MEDIA_SEEKABLE)}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaPreviewImage(){return DY(this,CK.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){LY(this,CK.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return kY(this,CK.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){CY(this,CK.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return IY(this,CK.MEDIA_ENDED)}set mediaEnded(e){RY(this,CK.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let n;if(this.mediaEnded)n=1;else{const r=this.mediaCurrentTime,[,i=this.mediaSeekableStart]=null!=(e=t.find((e=>{let[t,n]=e;return t<=r&&r<=n})))?e:[];n=p2(this,i)}const{style:r}=TY(this.shadowRoot,"#buffered");r.setProperty("width",100*n+"%")}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const e=TY(this.shadowRoot,"#current-rail"),t=TY(this.shadowRoot,'[part~="current-box"]'),n=d2(this,Y1,X1).call(this,l2(this,B1)),r=d2(this,Q1,J1).call(this,n,this.range.valueAsNumber),i=d2(this,Z1,e2).call(this,n,this.range.valueAsNumber);e.style.transform=`translateX(${r})`,e.style.setProperty("--_range-width",`${n.range.width}`),t.style.setProperty("--_box-shift",`${i}`),t.style.setProperty("--_box-width",`${n.box.width}px`),t.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":d2(this,o2,a2).call(this);break;case"pointermove":d2(this,t2,n2).call(this,e);break;case"pointerup":case"pointerleave":d2(this,r2,i2).call(this,null);break;case"transitionstart":wY(e.target,this)&&setTimeout((()=>d2(this,z1,H1).call(this)),0)}}}O1=new WeakMap,N1=new WeakMap,j1=new WeakMap,F1=new WeakMap,U1=new WeakMap,B1=new WeakMap,$1=new WeakMap,V1=new WeakMap,W1=new WeakMap,z1=new WeakSet,H1=function(){d2(this,q1,G1).call(this)?l2(this,N1).start():l2(this,N1).stop()},q1=new WeakSet,G1=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&SY(this)},K1=new WeakMap,Y1=new WeakSet,X1=function(e){var t;const n=(null!=(t=this.getAttribute("bounds")?xY(this,`#${this.getAttribute("bounds")}`):this.parentElement)?t:this).getBoundingClientRect(),r=this.range.getBoundingClientRect(),i=e.offsetWidth;return{box:{width:i,min:-(r.left-n.left-i/2),max:n.right-r.left-i/2},bounds:n,range:r}},Q1=new WeakSet,J1=function(e,t){let n=100*t+"%";const{width:r,min:i,max:o}=e.box;if(!r)return n;if(!Number.isNaN(i)){n=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + ${"var(--media-box-padding-left)"})`}, ${n})`}if(!Number.isNaN(o)){n=`min(${n}, ${`calc(1 / var(--_range-width) * 100 * ${o}% - ${"var(--media-box-padding-right)"})`})`}return n},Z1=new WeakSet,e2=function(e,t){const{width:n,min:r,max:i}=e.box,o=t*e.range.width;if(o<r+l2(this,$1)){return`${o-n/2+(e.range.left-e.bounds.left-l2(this,$1))}px`}if(o>i-l2(this,V1)){return o+n/2-(e.bounds.right-e.range.right-l2(this,V1))-e.range.width+"px"}return 0},t2=new WeakSet,n2=function(e){const t=[...l2(this,j1)].some((t=>e.composedPath().includes(t)));if(!this.dragging&&(t||!e.composedPath().includes(this)))return void d2(this,r2,i2).call(this,null);const n=this.mediaSeekableEnd;if(!n)return;const r=TY(this.shadowRoot,"#preview-rail"),i=TY(this.shadowRoot,'[part~="preview-box"]'),o=d2(this,Y1,X1).call(this,l2(this,U1));let a=(e.clientX-o.range.left)/o.range.width;a=Math.max(0,Math.min(1,a));const s=d2(this,Q1,J1).call(this,o,a),l=d2(this,Z1,e2).call(this,o,a);r.style.transform=`translateX(${s})`,r.style.setProperty("--_range-width",`${o.range.width}`),i.style.setProperty("--_box-shift",`${l}`),i.style.setProperty("--_box-width",`${o.box.width}px`);const c=Math.round(l2(this,F1))-Math.round(a*n);Math.abs(c)<1&&a>.01&&a<.99||(u2(this,F1,a*n),d2(this,r2,i2).call(this,l2(this,F1)))},r2=new WeakSet,i2=function(e){this.dispatchEvent(new cY.CustomEvent(SK.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:e}))},o2=new WeakSet,a2=function(){l2(this,N1).stop();const e=m2(this);this.dispatchEvent(new cY.CustomEvent(SK.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e}))},cY.customElements.get("media-time-range")||cY.customElements.define("media-time-range",f2);const g2="placement",v2="bounds",y2=uY.createElement("template");y2.innerHTML='\n  <style>\n    :host {\n      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));\n      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));\n      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);\n      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);\n      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));\n      position: relative;\n      pointer-events: none;\n      display: var(--media-tooltip-display, inline-flex);\n      justify-content: center;\n      align-items: center;\n      box-sizing: border-box;\n      z-index: var(--media-tooltip-z-index, 1);\n      background: var(--_tooltip-background);\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      font: var(--media-font,\n        var(--media-font-weight, 400)\n        var(--media-font-size, 13px) /\n        var(--media-text-content-height, var(--media-control-height, 18px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      padding: var(--media-tooltip-padding, .35em .7em);\n      border: var(--media-tooltip-border, none);\n      border-radius: var(--media-tooltip-border-radius, 5px);\n      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));\n      white-space: var(--media-tooltip-white-space, nowrap);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    img, svg {\n      display: inline-block;\n    }\n\n    #arrow {\n      position: absolute;\n      width: 0px;\n      height: 0px;\n      border-style: solid;\n      display: var(--media-tooltip-arrow-display, block);\n    }\n\n    :host(:not([placement])),\n    :host([placement="top"]) {\n      position: absolute;\n      bottom: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host(:not([placement])) #arrow,\n    :host([placement="top"]) #arrow {\n      top: 100%;\n      left: 50%;\n      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);\n      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="right"]) {\n      position: absolute;\n      left: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="right"]) #arrow {\n      top: 50%;\n      right: 100%;\n      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;\n      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;\n      transform: translate(0, -50%);\n    }\n\n    :host([placement="bottom"]) {\n      position: absolute;\n      top: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host([placement="bottom"]) #arrow {\n      bottom: 100%;\n      left: 50%;\n      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);\n      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="left"]) {\n      position: absolute;\n      right: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="left"]) #arrow {\n      top: 50%;\n      left: 100%;\n      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);\n      border-color: transparent transparent transparent var(--_tooltip-arrow-background);\n      transform: translate(0, -50%);\n    }\n    \n    :host([placement="none"]) #arrow {\n      display: none;\n    }\n\n  </style>\n  <slot></slot>\n  <div id="arrow"></div>\n';class b2 extends cY.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!SY(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if("left"===t||"right"===t)return void this.style.removeProperty("--media-tooltip-offset-x");const n=getComputedStyle(this),r=null!=(e=xY(this,"#"+this.bounds))?e:gY(this);if(!r)return;const{x:i,width:o}=r.getBoundingClientRect(),{x:a,width:s}=this.getBoundingClientRect(),l=a+s,c=i+o,u=n.getPropertyValue("--media-tooltip-offset-x"),d=u?parseFloat(u.replace("px","")):0,h=n.getPropertyValue("--media-tooltip-container-margin"),p=h?parseFloat(h.replace("px","")):0,m=a-i+d-p,f=l-c+d+p;m<0?this.style.setProperty("--media-tooltip-offset-x",`${m}px`):f>0?this.style.setProperty("--media-tooltip-offset-x",`${f}px`):this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(y2.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[g2,v2]}get placement(){return DY(this,g2)}set placement(e){LY(this,g2,e)}get bounds(){return DY(this,v2)}set bounds(e){LY(this,v2,e)}}cY.customElements.get("media-tooltip")||cY.customElements.define("media-tooltip",b2);class w2 extends CZ{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_VOLUME,CK.MEDIA_MUTED,CK.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",(()=>{const e=this.range.value,t=new cY.CustomEvent(SK.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}))}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",tY("volume"))}attributeChangedCallback(e,t,n){var r,i;super.attributeChangedCallback(e,t,n),e!==CK.MEDIA_VOLUME&&e!==CK.MEDIA_MUTED||(this.range.valueAsNumber=(i=this).mediaMuted?0:i.mediaVolume,this.range.setAttribute("aria-valuetext",(r=this.range.valueAsNumber,`${Math.round(100*r)}%`)),this.updateBar())}get mediaVolume(){return kY(this,CK.MEDIA_VOLUME,1)}set mediaVolume(e){CY(this,CK.MEDIA_VOLUME,e)}get mediaMuted(){return IY(this,CK.MEDIA_MUTED)}set mediaMuted(e){RY(this,CK.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return DY(this,CK.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){LY(this,CK.MEDIA_VOLUME_UNAVAILABLE,e)}}cY.customElements.get("media-volume-range")||cY.customElements.define("media-volume-range",w2);var x2=Object.create,E2=Object.defineProperty,A2=Object.getOwnPropertyDescriptor,S2=Object.getOwnPropertyNames,T2=Object.getPrototypeOf,_2=Object.prototype.hasOwnProperty,k2=function(e,t){return function(){return e&&(t=e(e=0)),t}},C2=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},I2=function(e,t,n){return n=null!=e?x2(T2(e)):{},function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t)for(var i,o=S2(t),a=0,s=o.length;a<s;a++)i=o[a],!_2.call(e,i)&&i!==n&&E2(e,i,{get:function(e){return t[e]}.bind(null,i),enumerable:!(r=A2(t,i))||r.enumerable});return e}(!t&&e&&e.__esModule?n:E2(n,"default",{value:e,enumerable:!0}),e)},R2=C2((function(e,t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n}));function D2(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):D2(e,t)}var L2=k2((function(){L2()}));function P2(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var M2=k2((function(){})),O2=C2((function(e,t){var n=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=n.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=n.call(r.childNodes).concat(e))}}})),N2=C2((function(e,t){function n(e,t){if(!D2(this,n))return new n(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}L2(),t.exports=n,n.prototype.nodeType=8,n.prototype.nodeName="#comment",n.prototype.toString=function(){return"[object Comment]"}})),j2=C2((function(e,t){function n(e,t){if(!D2(this,n))return new n(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}L2(),t.exports=n,n.prototype.type="DOMTextNode",n.prototype.nodeType=3,n.prototype.nodeName="#text",n.prototype.toString=function(){return this.data},n.prototype.replaceData=function(e,t,n){var r=this.data,i=r.substring(0,e),o=r.substring(e+t,r.length);this.data=i+n+o,this.length=this.data.length}})),F2=C2((function(e,t){t.exports=function(e){var t=this,n=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[n];if(r)return r.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),U2=C2((function(e,t){t.exports=function(e,t){var n=this;n.listeners||(n.listeners={}),n.listeners[e]||(n.listeners[e]=[]),-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)}})),B2=C2((function(e,t){t.exports=function(e,t){var n=this;if(n.listeners&&n.listeners[e]){var r=n.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),$2=C2((function(e,t){M2(),t.exports=r;var n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return a(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var n in e)i(e,n)&&t.push({name:n,value:e[n]});for(var r in e._attributes)for(var a in e._attributes[r]){var s=e._attributes[r][a],l=(s.prefix?s.prefix+":":"")+a;t.push({name:l,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?o(t):""}(e)+function(e){var t=e.dataset,n=[];for(var r in t)n.push({name:"data-"+r,value:t[r]});return n.length?o(n):""}(e)),n.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(a(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var n=P2(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function o(e){var t=[];return e.forEach((function(e){var n=e.name,r=e.value;"style"===n&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var r=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+r+";"})),t}(r)),t.push(n+'="'+function(e){return a(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function a(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),V2=C2((function(e,t){L2();var n=O2(),r=F2(),i=U2(),o=B2(),a=$2(),s="http://www.w3.org/1999/xhtml";function l(e,t,n){if(!D2(this,l))return new l(e);var r=void 0===n?s:n||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,n){var r=null,i=t,o=t.indexOf(":");(o>-1&&(r=t.substr(0,o),i=t.substr(o+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[i]={value:n,prefix:r}},l.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],r=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},l.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},l.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=o,l.prototype.addEventListener=i,l.prototype.dispatchEvent=r,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return n(this,(function(e){if(1===e.nodeType){var n=(e.className||"").split(" ");t.every((function(e){return-1!==n.indexOf(e)}))&&r.push(e)}})),r},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return n(this.childNodes,(function(n){1===n.nodeType&&("*"===e||n.tagName.toLowerCase()===e)&&t.push(n)})),t},l.prototype.contains=function(e){return n(this,(function(t){return e===t}))||!1}})),W2=C2((function(e,t){L2();var n=V2();function r(e){if(!D2(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=n.prototype.appendChild,r.prototype.replaceChild=n.prototype.replaceChild,r.prototype.removeChild=n.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),z2=C2((function(e,t){function n(e){}t.exports=n,n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.preventDefault=function(){}})),H2=C2((function(e,t){L2();var n=O2(),r=N2(),i=j2(),o=V2(),a=W2(),s=z2(),l=F2(),c=U2(),u=B2();function d(){if(!D2(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=d;var h=d.prototype;h.createTextNode=function(e){return new i(e,this)},h.createElementNS=function(e,t){var n=null===e?null:String(e);return new o(t,this,n)},h.createElement=function(e){return new o(e,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(e){return new s(e)},h.createComment=function(e){return new r(e,this)},h.getElementById=function(e){e=String(e);var t=n(this.childNodes,(function(t){if(String(t.id)===e)return t}));return t||null},h.getElementsByClassName=o.prototype.getElementsByClassName,h.getElementsByTagName=o.prototype.getElementsByTagName,h.contains=o.prototype.contains,h.removeEventListener=u,h.addEventListener=c,h.dispatchEvent=l})),q2=C2((function(e,t){var n=H2();t.exports=new n})),G2=C2((function(e,t){var n,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=q2();"undefined"!=typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"])||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=n}));function K2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y2(e,t){if(e){if("string"==typeof e)return K2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K2(e,t)}}function X2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(oS){s=!0,i=oS}finally{try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}return o}}(e,t)||Y2(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q2=I2(R2()),J2=I2(R2()),Z2=I2(R2()),e3={now:function(){var e=Z2.default.performance,t=e&&e.timing,n=t&&t.navigationStart,r="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(r)}},t3=e3,n3=function(){var e,t,n;if("function"==typeof(null===(e=J2.default.crypto)||void 0===e?void 0:e.getRandomValues)){n=new Uint8Array(32),J2.default.crypto.getRandomValues(n);for(var r=0;r<32;r++)n[r]=n[r]%16}else{n=[];for(var i=0;i<32;i++)n[i]=16*Math.random()|0}var o=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t="x"===e?n[o]:3&n[o]|8;return o++,t.toString(16)}));var a=t3.now(),s=null==a?void 0:a.toString(16).substring(3);return s?t.substring(0,28)+s:t},r3=function(){return("000000"+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)},i3=function(e){if(e&&"undefined"!=typeof e.nodeName)return e.muxId||(e.muxId=r3()),e.muxId;var t;try{t=document.querySelector(e)}catch(iS){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},o3=function(e){var t;e&&"undefined"!=typeof e.nodeName?e=i3(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]};function a3(e){return function(e){if(Array.isArray(e))return K2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y2(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s3=0,l3=1,c3=2,u3=3,d3=4,h3=function(e){var t,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],l=(t=console.trace).bind.apply(t,a3(s)),c=(n=console.info).bind.apply(n,a3(s)),u=(r=console.debug).bind.apply(r,a3(s)),d=(i=console.warn).bind.apply(i,a3(s)),h=(o=console.error).bind.apply(o,a3(s)),p=a;return{trace:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>s3))return l.apply(void 0,a3(t))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>l3))return u.apply(void 0,a3(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>c3))return c.apply(void 0,a3(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>u3))return d.apply(void 0,a3(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>d3))return h.apply(void 0,a3(t))},get level(){return p},set level(e){e!==this.level&&(p=null!=e?e:a)}}}("[mux]"),p3=I2(R2());function m3(){return"1"===(p3.default.doNotTrack||p3.default.navigator&&p3.default.navigator.doNotTrack)}function f3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g3(e,t){if(!D2(e,t))throw new TypeError("Cannot call a class as a function")}function v3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y3(e,t,n){return t&&v3(e.prototype,t),n&&v3(e,n),e}function b3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w3(e){return w3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w3(e)}function x3(e,t,n){return x3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w3(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}},x3(e,t,n||e)}function E3(e,t){return E3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E3(e,t)}function A3(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w3(e);if(t){var i=w3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==P2(t)&&"function"!=typeof t?f3(e):t}(this,n)}}L2(),M2();var S3=function(e){return T3(e)[0]},T3=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},_3=I2(R2()),k3={exists:function(){var e=_3.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=_3.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=_3.default.performance,t=e&&e.timing;return t&&t.navigationStart}},C3=k3;function I3(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}function R3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b3(e,t,n[t])}))}return e}function D3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var L3=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],P3=["x-cdn","content-type"].concat(L3);function M3(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),r=n.shift();r&&(P3.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=n.join(": "))}})),t}function O3(e){if(e){var t=L3.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var N3=function(e){var t={};for(var n in e){var r=e[n];if(-1!==r["DATA-ID"].search("io.litix.data."))t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE}return t},j3=function(e){if(!e)return{};var t=C3.navigationStart(),n=e.loading,r=n?n.start:e.trequest,i=n?n.first:e.tfirst,o=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+o)}},F3=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return M3(e.getAllResponseHeaders())},U3=function(e,t){if(!e||!e.requestEndDate)return{};var n,r=S3(e.url),i=e.url,o=e.bytesLoaded,a=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),c=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return u.length>0&&(n=M3(u[u.length-1]._responseHeaders||"")),{requestStart:a,requestResponseStart:s,requestResponseEnd:l,requestBytesLoaded:o,requestResponseHeaders:n,requestMediaDuration:c,requestHostname:r,requestUrl:i,requestId:n?O3(n):void 0}},B3=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},$3=function(e,t,n){var r=e.log;if(n&&n.on){var i=function(e){try{var t,n,r=null===(n=e.getVersion)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0];return r}catch(i){return!1}}(n),o=function(n,r){return e.emit(t,n,r)},a=function(e){var t=e.type,n=(e.data||{}).url;o("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:S3(n),request_url:n})};n.on("manifestLoaded",a);var s={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},c=function(e){var t=e.type,r=e.chunk,i=e.request,a=(r||{}).mediaInfo||{},l=a.type,c=a.bitrateList,u={};(c=c||[]).forEach((function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}})),"video"===l?s.video=u:"audio"===l?s.audio=u:s.media=u;var d=U3(i,n),h=d.requestStart,p=d.requestResponseStart,m=d.requestResponseEnd,f=d.requestResponseHeaders,g=d.requestMediaDuration,v=d.requestHostname,y=d.requestUrl,b=d.requestId;o("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:m,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:f,request_hostname:v,request_id:b,request_url:y,request_media_duration:g,request_rendition_lists:s})};i>=4?n.on("initFragmentLoaded",c):n.on("initFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);c({type:t,request:i,chunk:r})}));var u=function(e){var t=e.type,r=e.chunk,i=e.request,a=r||{},s=a.mediaInfo,l=a.start,c=(s||{}).type,u=U3(i,n),d=u.requestStart,h=u.requestResponseStart,p=u.requestResponseEnd,m=u.requestBytesLoaded,f=u.requestResponseHeaders,g=u.requestMediaDuration,v=u.requestHostname,y=u.requestUrl,b=u.requestId,w=function(e,t){var n=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:n,renditionWidth:r[n].width||null,renditionHeight:r[n].height||null,renditionBitrate:r[n].bandwidth}:{}}(c,n),x=w.currentLevel,E=w.renditionWidth,A=w.renditionHeight,S=w.renditionBitrate;o("requestcompleted",{request_event_type:t,request_start:d,request_response_start:h,request_response_end:p,request_bytes_loaded:m,request_type:c,request_response_headers:f,request_hostname:v,request_id:b,request_url:y,request_media_start_time:l,request_media_duration:g,request_current_level:x,request_labeled_bitrate:S,request_video_width:E,request_video_height:A})};i>=4?n.on("mediaFragmentLoaded",u):n.on("mediaFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);u({type:t,request:i,chunk:r})}));var d={video:void 0,audio:void 0,totalBitrate:void 0},h=function(e,t,i){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var s=n.getBitrateInfoListFor(a).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(a));d[a]=D3(R3({},s),{codec:n.getCurrentTrackFor(a).codec});var l=function(){if(d.video&&"number"==typeof d.video.bitrate){if(!d.video.width||!d.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=d.video.bitrate;if(d.audio&&"number"==typeof d.audio.bitrate&&(e+=d.audio.bitrate),e!==d.totalBitrate)return d.totalBitrate=e,{video_source_bitrate:e,video_source_height:d.video.height,video_source_width:d.video.width,video_source_codec:B3(d.video.codec)}}}();l&&o("renditionchange",l)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",h);var p=function(e){var t=e.request,n=e.mediaType;o("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:S3(t.url)})};n.on("fragmentLoadingAbandoned",p);var m=function(e){var t,n,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},a=(null==r||null===(n=r.data)||void 0===n?void 0:n.response)||{};27===(null==r?void 0:r.code)&&o("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:S3(i.url),request_type:i.mediaType,request_error_code:a.status,request_error_text:a.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");o("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};n.on("error",m),n._stopMuxMonitor=function(){n.off("manifestLoaded",a),n.off("initFragmentLoaded",c),n.off("mediaFragmentLoaded",u),n.off("qualityChangeRendered",h),n.off("error",m),n.off("fragmentLoadingAbandoned",p),delete n._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")},V3=0,W3=function(){function e(){g3(this,e),b3(this,"_listeners",void 0)}return y3(e,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++V3,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(r,1)}))}},{key:"one",value:function(e,t,n){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++V3;var i=function(){r.off(e,i),t.apply(n||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],o=this._listeners["after"+e]||[],a=function(t,r){(t=t.slice()).forEach((function(t){t.call(n,{type:e},r)}))};a(r,t),a(i,t),a(o,t)}}}]),e}(),z3=W3,H3=I2(R2()),q3=function(){function e(t){var n=this;g3(this,e),b3(this,"_playbackHeartbeatInterval",void 0),b3(this,"_playheadShouldBeProgressing",void 0),b3(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==n._playbackHeartbeatInterval&&(H3.default.clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),n._playbackHeartbeatInterval=null)}))}return y3(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=H3.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(H3.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),G3=q3,K3=function e(t){var n=this;g3(this,e),b3(this,"viewErrored",void 0),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,n.viewErrored=!0)}catch(tS){t.mux.log.warn("Exception in error translator callback.",tS),n.viewErrored=!0}})),t.on("aftererror",(function(){var e,n,r,i,o;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(n=t.data)||void 0===n||delete n.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(o=t.data)||void 0===o||delete o.player_error_business_exception}))},Y3=function(){function e(t){g3(this,e),b3(this,"_watchTimeTrackerLastCheckedTime",void 0),b3(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return y3(e,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),I3(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),X3=Y3,Q3=function(){function e(t){var n=this;g3(this,e),b3(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),b3(this,"_lastTime",void 0),b3(this,"_isAdPlaying",void 0),b3(this,"_callbackUpdatePlaybackTime",void 0),b3(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=t3.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=t3.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}return y3(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=t3.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&I3(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),J3=Q3,Z3=function(){function e(t){g3(this,e),b3(this,"pm",void 0),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}return y3(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position="undefined"==typeof this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,r=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();"undefined"!=typeof i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),e4=Z3,t4=3e5,n4=function e(t){if(g3(this,e),!t.disableRebufferTracking){var n,r=function(e,t){i(t),n=void 0},i=function(e){if(n){var r=e.viewer_time-n;I3(t.data,"view_rebuffer_duration",r),n=e.viewer_time,t.data.view_rebuffer_duration>t4&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(t4,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){n||(I3(t.data,"view_rebuffer_count",1),n=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",r)}))}},r4=function(){function e(t){var n=this;g3(this,e),b3(this,"_lastCheckedTime",void 0),b3(this,"_lastPlayheadTime",void 0),b3(this,"_lastPlayheadTimeUpdatedTime",void 0),b3(this,"_rebuffering",void 0),b3(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:t3.now()})})))}return y3(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),i4=r4,o4=function(){function e(t){var n=this;g3(this,e),b3(this,"NAVIGATION_START",void 0),b3(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var o=i.viewer_time;("playing"===e.type&&"undefined"==typeof t.data.view_time_to_first_frame||"adplaying"===e.type&&("undefined"==typeof t.data.view_time_to_first_frame||n._inPrerollPosition()))&&n.calculateTimeToFirstFrame(o||t3.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return y3(e,[{key:"_inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),a4=o4,s4=function e(t){var n=this;g3(this,e),b3(this,"_lastPlayerHeight",void 0),b3(this,"_lastPlayerWidth",void 0),b3(this,"_lastPlayheadPosition",void 0),b3(this,"_lastSourceHeight",void 0),b3(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){n._lastPlayheadPosition=-1}));["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var r=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),i=Math.max(0,r-1),o=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,o),I3(t.data,"view_total_content_playback_time",e),I3(t.data,"view_total_upscaling",i*e),I3(t.data,"view_total_downscaling",o*e)}n._lastPlayheadPosition=-1}))})),["playing","hb","renditionchange","orientationchange"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))},l4=function e(t){var n=this;g3(this,e),b3(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=t3.now(),i=(t.data.viewer_time||e)-(r||e);I3(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),n.isSeeking=!1,r=-1};t.on("seeking",(function(e,o){Object.assign(t.data,o),n.isSeeking&&o.viewer_time-r<=2e3?r=o.viewer_time:(n.isSeeking&&i(),n.isSeeking=!0,r=o.viewer_time,I3(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){n.isSeeking&&(i(),t.send("seeked")),n.isSeeking=!1,r=-1}))},c4=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},u4=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],d4=function(){function e(t){var n=this;g3(this,e),b3(this,"_adHasPlayed",void 0),b3(this,"_adRequests",void 0),b3(this,"_adResponses",void 0),b3(this,"_currentAdRequestNumber",void 0),b3(this,"_currentAdResponseNumber",void 0),b3(this,"_prerollPlayTime",void 0),b3(this,"_wouldBeNewAdPlay",void 0),b3(this,"isAdBreak",void 0),b3(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),u4.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var r=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},r),c4(n._adRequests,r),I3(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||I3(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},r),c4(n._adResponses,r);var i=n.findAdRequest(r.ad_request_id);i&&I3(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,I3(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),n._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){n.inPrerollPosition()&&"undefined"==typeof t.data.view_preroll_load_time&&"undefined"!=typeof n._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,r){n._wouldBeNewAdPlay||I3(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){n._wouldBeNewAdPlay||I3(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}return y3(e,[{key:"inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=X2(T3(t.ad_tag_url),2),r=n[0],i=n[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var o=X2(T3(t.ad_asset_url),2),a=o[0],s=o[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),h4=d4,p4=I2(R2()),m4=function e(t){g3(this,e);var n,r,i=function(){t.disableRebufferTracking||n&&(I3(t.data,"view_waiting_rebuffer_duration",t3.now()-n),n=!1,p4.default.clearInterval(r))},o=!1,a=function(){o=!1,i()};t.on("waiting",(function(){o&&(t.disableRebufferTracking||(I3(t.data,"view_waiting_rebuffer_count",1),n=t3.now(),r=p4.default.setInterval((function(){if(n){var e=t3.now();I3(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){i(),o=!0})),t.on("pause",a),t.on("seeking",a)},f4=function e(t){var n=this;g3(this,e),b3(this,"lastWallClockTime",void 0);var r=function(){n.lastWallClockTime=t3.now(),t.on("before*",i)},i=function(e){var r=t3.now(),i=n.lastWallClockTime;n.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},g4=I2(R2()),v4=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(cde){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var d=l[u].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=d[0].replace(c,decodeURIComponent);if(h=n.read?n.read(h,p):n(h,p)||h.replace(c,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(cde){}if(t===p){a=h;break}t||(a[p]=h)}catch(cde){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),y4="muxData",b4=function(){var e;try{e=function(e){return e.split("&").reduce((function(e,t){var n=X2(t.split("="),2),r=n[0],i=n[1],o=+i,a=i&&o==i?o:i;return e[r]=a,e}),{})}(v4.get(y4)||"")}catch(QA){e={}}return e},w4=function(e){try{v4.set(y4,function(e){return Object.entries(e).map((function(e){var t=X2(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&")}(e),{expires:365})}catch(QA){}};var x4=I2(R2()),E4=function(){var e;switch(A4()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},A4=function(){var e=x4.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};E4.getConnectionFromAPI=A4;var S4=E4,T4=k4({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),_4=k4({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function k4(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function C4(e){var t={},n={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var o=r.split("_"),a=o[0],s=T4[a];s||(h3.info("Data key word `"+o[0]+"` not expected in "+r),s=a+"_"),o.splice(1).forEach((function(e){"url"===e&&(i=!0),_4[e]?s+=_4[e]:Number.isInteger(Number(e))?s+=e:(h3.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?n[s]=e[r]:t[s]=e[r]}})),Object.assign(t,n)}var I4=I2(R2()),R4=I2(G2()),D4={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},L4=["hb","requestcompleted","requestfailed","requestcanceled"],P4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},D4,t)};P4.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},P4.prototype.flushEvents=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},P4.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),I4.default.clearTimeout(this._sendTimeout)},P4.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],C4({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);O4(this._beaconUrl,n,!0,(function(){}))},P4.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight)this._resendAfterPost=!0;else{var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),r=t3.now();O4(this._beaconUrl,n,!1,(function(n,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,h3.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=t3.now()-r,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())}))}},P4.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},P4.prototype._startBeaconSending=function(){var e=this;I4.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=I4.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},P4.prototype._createPayload=function(e){var t=this,n={transmission_timestamp:Math.round(t3.now())};this._roundTripTime&&(n.rtt_ms=Math.round(this._roundTripTime));var r,i,o,a=function(){r=JSON.stringify({metadata:n,events:i||e}),o=r.length/1024},s=function(){return o<=t._options.maxPayloadKBSize};return a(),s()||(h3.info("Payload size is too big ("+o+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===L4.indexOf(e.e)})),a()),s()||(h3.info("Payload size still too big ("+o+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),a()),r};var M4="function"==typeof R4.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},O4=function(e,t,n,r){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(I4.default.fetch)I4.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:M4(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(I4.default.XMLHttpRequest){var i=new I4.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},N4=P4,j4=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],F4=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],U4=["ad_id","ad_creative_id","ad_universal_id"],B4=["viewstart","error","ended","viewend"],$4=function(){function e(t,n){var r,i,o,a,s,l,c,u,d,h,p,m,f,g,v,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g3(this,e),b3(this,"mux",void 0),b3(this,"envKey",void 0),b3(this,"options",void 0),b3(this,"eventQueue",void 0),b3(this,"sampleRate",void 0),b3(this,"disableCookies",void 0),b3(this,"respectDoNotTrack",void 0),b3(this,"previousBeaconData",void 0),b3(this,"lastEventTime",void 0),b3(this,"rateLimited",void 0),b3(this,"pageLevelData",void 0),b3(this,"viewerData",void 0),this.mux=t,this.envKey=n,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new N4(function(e,t){var n=t.beaconCollectionDomain,r=t.beaconDomain;if(n)return"https://"+n;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}(this.envKey,this.options)),this.sampleRate=null!==(f=this.options.sampleRate)&&void 0!==f?f:1,this.disableCookies=null!==(g=this.options.disableCookies)&&void 0!==g&&g,this.respectDoNotTrack=null!==(v=this.options.respectDoNotTrack)&&void 0!==v&&v,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(o=this.options.platform)||void 0===o?void 0:o.layout,viewer_device_name:null===(a=this.options.platform)||void 0===a?void 0:a.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.family,viewer_os_architecture:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.architecture,viewer_os_version:null===(p=this.options.platform)||void 0===p||null===(h=p.os)||void 0===h?void 0:h.version,viewer_connection_type:S4(),page_url:null===g4.default||void 0===g4.default||null===(m=g4.default.location)||void 0===m?void 0:m.href},this.viewerData=this.disableCookies?{}:function(){var e=b4();return e.mux_viewer_id=e.mux_viewer_id||n3(),e.msn=e.msn||Math.random(),w4(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}}()}return y3(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&m3())return h3.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return h3.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:function(){var e=b4(),t=t3.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=n3(),e.sst=t),e.sex=t+15e5,w4(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=D3(R3({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,o=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,a=C4(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),o)return h3.info("Not sending event due to sample rate restriction",e,r,a);if(this.envKey||h3.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,a),!this.rateLimited)if(h3.info("Sending event",e,r,a),this.rateLimited=!this.eventQueue.queueEvent(e,a),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):B4.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",a=C4(r),this.eventQueue.queueEvent(r.event,a),h3.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=R3({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var o=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=X2(t,2),a=i[0],s=i[1];n.previousBeaconData&&(s!==n.previousBeaconData[a]||j4.indexOf(a)>-1||n.objectHasChanged(o,a,s,n.previousBeaconData[a])||n.eventRequiresKey(e,a))&&(r[a]=s,n.previousBeaconData[a]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,n,r){return!(!e||0!==t.indexOf("request_"))&&("request_response_headers"===t||"object"!=typeof n||"object"!=typeof r||Object.keys(n||{}).length!==Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||U4.includes(t)&&F4.includes(e))}}]),e}(),V4=function e(t){g3(this,e);var n=0,r=0,i=0,o=0,a=0,s=0,l=0;t.on("requestcompleted",(function(e,s){var l,c,u=s.request_start,d=s.request_response_start,h=s.request_response_end,p=s.request_bytes_loaded;if(o++,d?(l=d-(null!=u?u:0),c=(null!=h?h:0)-d):c=(null!=h?h:0)-(null!=u?u:0),c>0&&p&&p>0){var m=p/c*8e3;a++,r+=p,i+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,m),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=o,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/a)}})),t.on("requestfailed",(function(e,n){o++,s++,t.data.view_request_count=o,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,n){o++,l++,t.data.view_request_count=o,t.data.view_request_canceled_count=l}))},W4=function e(t){var n=this;g3(this,e),b3(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,o=t3.now(),a=n._lastEventTime;if(n._lastEventTime=o,a&&o-a>36e5){var s=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,b3({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=l,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))},z4=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],H4=new Set(["requestcompleted","requestfailed","requestcanceled"]),q4=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E3(e,t)}(n,e);var t=A3(n);function n(e,r,i){var o;g3(this,n),b3(f3(o=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),b3(f3(o),"NAVIGATION_START",void 0),b3(f3(o),"_destroyed",void 0),b3(f3(o),"_heartBeatTimeout",void 0),b3(f3(o),"adTracker",void 0),b3(f3(o),"dashjs",void 0),b3(f3(o),"data",void 0),b3(f3(o),"disablePlayheadRebufferTracking",void 0),b3(f3(o),"disableRebufferTracking",void 0),b3(f3(o),"errorTracker",void 0),b3(f3(o),"errorTranslator",void 0),b3(f3(o),"emitTranslator",void 0),b3(f3(o),"getAdData",void 0),b3(f3(o),"getPlayheadTime",void 0),b3(f3(o),"getStateData",void 0),b3(f3(o),"stateDataTranslator",void 0),b3(f3(o),"hlsjs",void 0),b3(f3(o),"id",void 0),b3(f3(o),"longResumeTracker",void 0),b3(f3(o),"minimumRebufferDuration",void 0),b3(f3(o),"mux",void 0),b3(f3(o),"playbackEventDispatcher",void 0),b3(f3(o),"playbackHeartbeat",void 0),b3(f3(o),"playbackHeartbeatTime",void 0),b3(f3(o),"playheadTime",void 0),b3(f3(o),"seekingTracker",void 0),b3(f3(o),"sustainedRebufferThreshold",void 0),b3(f3(o),"watchTimeTracker",void 0),b3(f3(o),"currentFragmentPDT",void 0),b3(f3(o),"currentFragmentStart",void 0),o.DOM_CONTENT_LOADED_EVENT_END=C3.domContentLoadedEventEnd(),o.NAVIGATION_START=C3.navigationStart();var a={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},stateDataTranslator:function(e){return e}};o.mux=e,o.id=r,null!=i&&i.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign(a,i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),h3.level=i.debug?l3:u3,o.getPlayheadTime=i.getPlayheadTime,o.getStateData=i.getStateData||function(){return{}},o.getAdData=i.getAdData||function(){},o.minimumRebufferDuration=i.minimumRebufferDuration,o.sustainedRebufferThreshold=i.sustainedRebufferThreshold,o.playbackHeartbeatTime=i.playbackHeartbeatTime,o.disableRebufferTracking=i.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,o.errorTranslator=i.errorTranslator,o.emitTranslator=i.emitTranslator,o.stateDataTranslator=i.stateDataTranslator,o.playbackEventDispatcher=new $4(e,i.data.env_key,i),o.data={player_instance_id:n3(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1;var s=function(){"undefined"==typeof this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(f3(o));if(o.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)})),o.on("videochange",(function(e,t){this._resetView(t)})),o.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),o.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),o.on("destroy",o.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e="undefined"!=typeof o.data.view_start;o.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var c=function(e){e.persisted||o.destroy()};window.addEventListener("pagehide",c,!1),o.on("destroy",(function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",c)}))}o.on("playerready",(function(e,t){Object.assign(this.data,t)})),z4.forEach((function(e){o.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),o.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),o.on("viewend",(function(e,t){Object.assign(o.data,t)}));return o.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),o.longResumeTracker=new W4(f3(o)),o.errorTracker=new K3(f3(o)),new f4(f3(o)),o.seekingTracker=new l4(f3(o)),o.playheadTime=new e4(f3(o)),o.playbackHeartbeat=new G3(f3(o)),new s4(f3(o)),o.watchTimeTracker=new X3(f3(o)),new J3(f3(o)),o.adTracker=new h4(f3(o)),new i4(f3(o)),new n4(f3(o)),new a4(f3(o)),new m4(f3(o)),new V4(f3(o)),i.hlsjs&&o.addHLSJS(i),i.dashjs&&o.addDashJS(i),o.emit("viewinit",i.data),o}return y3(n,[{key:"emit",value:function(e,t){var r,i=Object.assign({viewer_time:this.mux.utils.now()},t),o=[e,i];if(this.emitTranslator)try{o=this.emitTranslator(e,i)}catch(a){this.mux.log.warn("Exception in emit translator callback.",a)}null!=o&&o.length&&(r=x3(w3(n.prototype),"emit",this)).call.apply(r,[this].concat(a3(o)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,"undefined"!=typeof this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=X2(T3(t.video_source_url),2),r=n[0],i=n[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,H4.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e=this.getStateData();if("function"==typeof this.stateDataTranslator)try{e=this.stateDataTranslator(e)}catch(eS){this.mux.log.warn("Exception in stateDataTranslator translator callback.",eS)}Object.assign(this.data,e),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}));["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();(0===n.indexOf("data:")||0===n.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=n3(),n=function(){t===e.data.view_id&&I3(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var r=arguments.length>4?arguments[4]:void 0,i=e.log,o=e.utils.secondsToMs,a=function(e){var t,n=parseInt(r.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(C3.exists()){var s=function(n,r){return e.emit(t,n,r)},l=function(e,t){var n=t.levels,r=t.audioTracks,i=t.url,o=t.stats,a=t.networkDetails,l=t.sessionData,c={},u={};n.forEach((function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var d=j3(o),h=d.bytesLoaded,p=d.requestStart,m=d.responseStart,f=d.responseEnd;s("requestcompleted",D3(R3({},N3(l)),{request_event_type:e,request_bytes_loaded:h,request_start:p,request_response_start:m,request_response_end:f,request_type:"manifest",request_hostname:S3(i),request_response_headers:F3(a),request_rendition_lists:{media:c,audio:u,video:{}}}))};n.on(r.Events.MANIFEST_LOADED,l);var c=function(e,t){var n=t.details,r=t.level,i=t.networkDetails,l=t.stats,c=j3(l),u=c.bytesLoaded,d=c.requestStart,h=c.responseStart,p=c.responseEnd,m=n.fragments[n.fragments.length-1],f=a(m)+o(m.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:h,request_response_end:p,request_current_level:r,request_type:"manifest",request_hostname:S3(n.url),request_response_headers:F3(i),video_holdback:n.holdBack&&o(n.holdBack),video_part_holdback:n.partHoldBack&&o(n.partHoldBack),video_part_target_duration:n.partTarget&&o(n.partTarget),video_target_duration:n.targetduration&&o(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(f)?void 0:f})};n.on(r.Events.LEVEL_LOADED,c);var u=function(e,t){var n=t.details,r=t.networkDetails,i=t.stats,o=j3(i),a=o.bytesLoaded,l=o.requestStart,c=o.responseStart,u=o.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:a,request_start:l,request_response_start:c,request_response_end:u,request_type:"manifest",request_hostname:S3(n.url),request_response_headers:F3(r)})};n.on(r.Events.AUDIO_TRACK_LOADED,u);var d=function(e,t){var r=t.stats,i=t.networkDetails,o=t.frag;r=r||o.stats;var a=j3(r),l=a.bytesLoaded,c=a.requestStart,u=a.responseStart,d=a.responseEnd,h=i?F3(i):void 0,p={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:d,request_hostname:i?S3(i.responseURL):void 0,request_id:h?O3(h):void 0,request_response_headers:h,request_media_duration:o.duration,request_url:null==i?void 0:i.responseURL};"main"===o.type?(p.request_type="media",p.request_current_level=o.level,p.request_video_width=(n.levels[o.level]||{}).width,p.request_video_height=(n.levels[o.level]||{}).height,p.request_labeled_bitrate=(n.levels[o.level]||{}).bitrate):p.request_type=o.type,s("requestcompleted",p)};n.on(r.Events.FRAG_LOADED,d);var h=function(e,t){var n=t.frag,r=n.start,i={currentFragmentPDT:a(n),currentFragmentStart:o(r)};s("fragmentchange",i)};n.on(r.Events.FRAG_CHANGED,h);var p=function(e,t){var n=t.type,i=t.details,o=t.response,a=t.fatal,l=t.frag,c=t.networkDetails,u=(null==l?void 0:l.url)||t.url||"",d=c?F3(c):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:u,request_hostname:S3(u),request_id:d?O3(d):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),a){var h,p="".concat(u?"url: ".concat(u,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");s("error",{player_error_code:n,player_error_message:i,player_error_context:p})}};n.on(r.Events.ERROR,p);var m=function(e,t){var n=t.frag,r=n&&n._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:S3(r)})};n.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var f=function(e,t){var r=t.level,o=n.levels[r];if(o&&o.attrs&&o.attrs.BANDWIDTH){var a,l=o.attrs.BANDWIDTH,c=parseFloat(o.attrs["FRAME-RATE"]);isNaN(c)||(a=c),l?s("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:o.width,video_source_height:o.height,video_source_rendition_name:o.name,video_source_codec:null==o?void 0:o.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(r.Events.LEVEL_SWITCHED,f),n._stopMuxMonitor=function(){n.off(r.Events.MANIFEST_LOADED,l),n.off(r.Events.LEVEL_LOADED,c),n.off(r.Events.AUDIO_TRACK_LOADED,u),n.off(r.Events.FRAG_LOADED,d),n.off(r.Events.FRAG_CHANGED,h),n.off(r.Events.ERROR,p),n.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),n.off(r.Events.LEVEL_SWITCHED,f),n.off(r.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(r.Events.DESTROYING,n._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,$3(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),n}(z3),G4=q4,K4=I2(G2());var Y4=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],X4={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};var Q4,J4=I2(R2());J4.default&&J4.default.WeakMap&&(Q4=new WeakMap);var Z4="#EXT-X-TARGETDURATION",e5="#EXT-X-PART-INF",t5="#EXT-X-SERVER-CONTROL",n5="#EXTINF",r5="#EXT-X-PROGRAM-DATE-TIME",i5="#EXT-X-VERSION",o5="#EXT-X-SESSION-DATA",a5=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};a5.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},a5.prototype.processLine=function(e){var t=e.indexOf(":"),n=p5(e,t),r=n[0],i=2===n.length?c5(n[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case Z4:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case e5:s5(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case t5:s5(this.manifest,n),this.setHoldBack();break;case n5:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case r5:var o=i,a=new Date(o);this.manifest.dateTimeString||(this.manifest.dateTimeString=o,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=o,this.currentUri.dateTimeObject=a;break;case i5:s5(this.manifest,n);break;case o5:var s=m5(n[1]),l=N3(s);Object.assign(this.manifest.sessionData,l)}},a5.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",o="partHoldBack",a=n&&3*n,s=r&&2*r;n&&!t.hasOwnProperty(i)&&(t[i]=a),a&&t[i]<a&&(t[i]=a),r&&!t.hasOwnProperty(o)&&(t[o]=3*r),r&&t[o]<s&&(t[o]=s)}};var s5=function(e,t){var n,r=l5(t[0].replace("#EXT-X-",""));h5(t[1])?(n={},n=Object.assign(d5(t[1]),n)):n=c5(t[1]),e[r]=n},l5=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},c5=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},u5=function(e){var t={},n=e.split("=");n.length>1&&(t[l5(n[0])]=c5(n[1]));return t},d5=function(e){for(var t=e.split(","),n={},r=0;t.length>r;r++){var i=t[r],o=u5(i);n=Object.assign(o,n)}return n},h5=function(e){return e.indexOf("=")>-1},p5=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},m5=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},f5=a5,g5={safeCall:function(e,t,n,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,n)}catch(eS){h3.info("safeCall error",eS)}return i},safeIncrement:I3,getComputedStyle:function(e,t){return e&&t&&J4.default&&"function"==typeof J4.default.getComputedStyle?(Q4&&Q4.has(e)&&(n=Q4.get(e)),n||(n=J4.default.getComputedStyle(e,null),Q4&&Q4.set(e,n)),n.getPropertyValue(t)):"";var n},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:M3,cdnHeadersToRequestId:O3,extractHostnameAndDomain:T3,extractHostname:S3,manifestParser:f5,generateShortID:r3,generateUUID:n3,now:t3.now,findMediaElement:o3},v5=g5,y5={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},b5={},w5=function(e){var t=arguments;"string"==typeof e?w5.hasOwnProperty(e)?Q2.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),w5[e].apply(null,t)}),0):h3.warn("`"+e+"` is an unknown task"):"function"==typeof e?Q2.default.setTimeout((function(){e(w5)}),0):h3.warn("`"+e+"` is invalid.")},x5={loaded:t3.now(),NAME:"mux-embed",VERSION:"5.9.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var r=X2(o3(t),3),i=r[0],o=r[1],a=r[2],s=e.log,l=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+o+"` query selector.");if("video"!==a&&"audio"!==a)return s.error("The element of `"+o+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var u={getPlayheadTime:function(){return c(i.currentTime)},getStateData:function(){var e,t,n=(null===(e=this.getPlayheadTime)||void 0===e?void 0:e.call(this))||c(i.currentTime),r=this.hlsjs&&this.hlsjs.url,o=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),a={player_is_paused:i.paused,player_width:parseInt(l(i,"width")),player_height:parseInt(l(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:K4.default&&!!(K4.default.fullscreenElement||K4.default.webkitFullscreenElement||K4.default.mozFullScreenElement||K4.default.msFullscreenElement),video_poster_url:i.poster,video_source_url:r||o||i.currentSrc,video_source_duration:c(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(t=i.getVideoPlaybackQuality)||void 0===t?void 0:t.call(i).droppedVideoFrames};if(i.getStartDate&&n>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var u=s.getTime();if(a.player_program_time=u+n,i.seekable.length>0){var d=u+i.seekable.end(i.seekable.length-1);a.player_live_edge_program_time=d}}}return a}};(n=Object.assign({automaticErrorTracking:!0},n,u)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,n){e.emit(o,t,n)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var d=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=d,i.mux.swapElement=d,i.mux.emit=d,i.mux.addHLSJS=d,i.mux.addDashJS=d,i.mux.removeHLSJS=d,i.mux.removeDashJS=d,i.mux.updateData=d,i.mux.setEmitTranslator=d,i.mux.setStateDataTranslator=d,i.mux.setGetPlayheadTime=d,i.mux.deleted=!0,e.emit(o,"destroy")},i.mux.swapElement=function(t){var n=X2(o3(t),3),r=n[0],o=n[1],a=n[2];return r?"video"!==a&&"audio"!==a?e.log.error("The element of `"+o+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+o+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(o,t)},i.mux.addDashJS=function(t){e.addDashJS(o,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(o)},i.mux.removeDashJS=function(){e.removeDashJS(o)},i.mux.setEmitTranslator=function(t){e.setEmitTranslator(o,t)},i.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(o,t)},i.mux.setGetPlayheadTime=function(t){t||(t=n.getPlayheadTime),e.setGetPlayheadTime(o,t)},e.init(o,n),e.emit(o,"playerready"),i.paused||(e.emit(o,"play"),i.readyState>2&&e.emit(o,"playing")),i.mux.listeners={},Y4.forEach((function(t){"error"===t&&!n.automaticErrorTracking||(i.mux.listeners[t]=function(){var n={};if("error"===t){if(!i.error||1===i.error.code)return;n.player_error_code=i.error.code,n.player_error_message=X4[i.error.code]||i.error.message}e.emit(o,t,n)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(w5,e,t)},destroyMonitor:function(e){var t=X2(o3(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():h3.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=i3(e);b5[n]?b5[n].addHLSJS(t):h3.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=i3(e);b5[n]?b5[n].addDashJS(t):h3.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=i3(e);b5[t]?b5[t].removeHLSJS():h3.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=i3(e);b5[t]?b5[t].removeDashJS():h3.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){m3()&&t&&t.respectDoNotTrack&&h3.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=i3(e);b5[n]=new G4(w5,n,t)},emit:function(e,t,n){var r=i3(e);b5[r]?(b5[r].emit(t,n),"destroy"===t&&delete b5[r]):h3.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var n=i3(e);b5[n]?b5[n].emit("hb",t):h3.error("A monitor for `"+n+"` has not been initialized.")},setEmitTranslator:function(e,t){var n=i3(e);b5[n]?b5[n].emitTranslator=t:h3.error("A monitor for `"+n+"` has not been initialized.")},setStateDataTranslator:function(e,t){var n=i3(e);b5[n]?b5[n].stateDataTranslator=t:h3.error("A monitor for `"+n+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var n=i3(e);b5[n]?b5[n].getPlayheadTime=t:h3.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:m3,log:h3,utils:v5,events:y5,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(w5,x5),"undefined"!=typeof Q2.default&&"function"==typeof Q2.default.addEventListener&&Q2.default.addEventListener("pagehide",(function(e){e.persisted||(w5.WINDOW_UNLOADING=!0)}),!1);var E5=w5;function A5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S5,T5={exports:{}};S5=T5,function(){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(e,n,r){if(r=r||{},e=e.trim(),!(n=n.trim())){if(!r.alwaysNormalize)return e;var o=i.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return o.path=i.normalizePath(o.path),i.buildURLFromParts(o)}var a=i.parseURL(n);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=i.normalizePath(a.path),i.buildURLFromParts(a)):n;var s=i.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=t.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=i.normalizePath(d)}else c.path=s.path,a.params||(c.params=s.params,a.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?i.normalizePath(a.path):a.path),i.buildURLFromParts(c)},parseURL:function(t){var n=e.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};S5.exports=i}();var _5=T5.exports;function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k5(Object(n),!0).forEach((function(t){R5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I5(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function R5(e,t,n){return(t=I5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D5(){return D5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D5.apply(this,arguments)}const L5=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},P5=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=M5},M5=Number.MAX_SAFE_INTEGER||9007199254740991;let O5=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),N5=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),j5=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const F5=function(){},U5={trace:F5,debug:F5,log:F5,warn:F5,info:F5,error:F5};let B5=U5;function $5(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){B5[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):F5}(t)}))}const V5=B5,W5=/^(\d+)x(\d+)$/,z5=/(.+?)=(".*?"|.*?)(?:,|$)/g;class H5{constructor(e){"string"===typeof e&&(e=H5.parseAttrList(e)),D5(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=W5.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(z5.lastIndex=0;null!==(t=z5.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function q5(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class G5{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){V5.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=D5(new H5({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);L5(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(L5(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&L5(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class K5{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Y5="audio",X5="video",Q5="audiovideo";class J5{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Y5]:null,[X5]:null,[Q5]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=_5.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Z5 extends J5{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new K5,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!L5(this.programDateTime))return null;const e=L5(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:a}=this,s=a[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):a[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:o}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Y5]=null,e[X5]=null,e[Q5]=null}}class e9 extends J5{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new K5,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class t9{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&L5(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function n9(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function r9(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=n9(i)):n=function(e){const t=i9(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}function i9(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const o9="undefined"!==typeof self?self:void 0;var a9={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},s9="org.w3.clearkey",l9="com.apple.streamingkeydelivery",c9="com.microsoft.playready",u9="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function d9(e){switch(e){case l9:return a9.FAIRPLAY;case c9:return a9.PLAYREADY;case u9:return a9.WIDEVINE;case s9:return a9.CLEARKEY}}var h9="1077efecc0b24d02ace33c1e52e2fb4b",p9="e2719d58a985b3c9781ab030af78d30e",m9="9a04f07998404286ab92e65be0885f95",f9="edef8ba979d64acea3c827dcd51d21ed";function g9(e){return e===f9?a9.WIDEVINE:e===m9?a9.PLAYREADY:e===h9||e===p9?a9.CLEARKEY:void 0}function v9(e){switch(e){case a9.FAIRPLAY:return l9;case a9.PLAYREADY:return c9;case a9.WIDEVINE:return u9;case a9.CLEARKEY:return s9}}function y9(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[a9.FAIRPLAY,a9.WIDEVINE,a9.PLAYREADY,a9.CLEARKEY].filter((e=>!!t[e])):[];return!r[a9.WIDEVINE]&&n&&r.push(a9.WIDEVINE),r}const b9=null!=o9&&null!=(w9=o9.navigator)&&w9.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var w9;function x9(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=n9(e).subarray(0,16);return function(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}function E9(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const A9=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,S9=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,T9=(e,t)=>{const n=t;let r=0;for(;A9(e,t);){r+=10;r+=_9(e,t+6),S9(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},_9=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},k9=(e,t)=>A9(e,t)&&_9(e,t+6)+10<=e.length-t,C9=e=>{const t=D9(e);for(let n=0;n<t.length;n++){const e=t[n];if(I9(e))return N9(e)}},I9=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,R9=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=_9(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},D9=e=>{let t=0;const n=[];for(;A9(e,t);){const r=_9(e,t+6);t+=10;const i=t+r;for(;t+8<i;){const r=R9(e.subarray(t)),i=L9(r);i&&n.push(i),t+=r.size+10}S9(e,t)&&(t+=10)}return n},L9=e=>"PRIV"===e.type?P9(e):"W"===e.type[0]?O9(e):M9(e),P9=e=>{if(e.size<2)return;const t=j9(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},M9=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=j9(e.data.subarray(t),!0);t+=n.length+1;const r=j9(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=j9(e.data.subarray(1));return{key:e.type,data:t}},O9=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=j9(e.data.subarray(t),!0);t+=n.length+1;const r=j9(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=j9(e.data);return{key:e.type,data:t}},N9=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},j9=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=U9();if(n){const r=n.decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let i,o,a,s="",l=0;for(;l<r;){if(i=e[l++],0===i&&t)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:o=e[l++],s+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[l++],a=e[l++],s+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return s};let F9;function U9(){if(!navigator.userAgent.includes("PlayStation 4"))return F9||"undefined"===typeof self.TextDecoder||(F9=new self.TextDecoder("utf-8")),F9}const B9=function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t},$9=Math.pow(2,32)-1,V9=[].push,W9={video:1,audio:2,id3:3,text:4};function z9(e){return String.fromCharCode.apply(null,e)}function H9(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function q9(e,t){const n=K9(e,t);return n<0?4294967296+n:n}function G9(e,t){let n=q9(e,t);return n*=Math.pow(2,32),n+=q9(e,t+4),n}function K9(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Y9(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function X9(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const o=q9(e,i),a=o>1?i+o:r;if(z9(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,a));else{const r=X9(e.subarray(i+8,a),t.slice(1));r.length&&V9.apply(n,r)}i=a}return n}function Q9(e){const t=[],n=e[0];let r=8;const i=q9(e,r);r+=4;let o=0,a=0;0===n?(o=q9(e,r),a=q9(e,r+4),r+=8):(o=G9(e,r),a=G9(e,r+8),r+=16),r+=2;let s=e.length+a;const l=H9(e,r);r+=2;for(let c=0;c<l;c++){let n=r;const o=q9(e,n);n+=4;const a=2147483647&o;if(1===(2147483648&o)>>>31)return V5.warn("SIDX has hierarchical references (not supported)"),null;const l=q9(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:s,end:s+a-1}}),s+=a,n+=4,r=n}return{earliestPresentationTime:o,timescale:i,version:n,referencesCount:l,references:t}}function J9(e){const t=[],n=X9(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=X9(e,["tkhd"])[0];if(i){let n=i[0];const r=q9(i,0===n?12:20),o=X9(e,["mdia","mdhd"])[0];if(o){n=o[0];const i=q9(o,0===n?12:20),a=X9(e,["mdia","hdlr"])[0];if(a){const n=z9(a.subarray(8,12)),o={soun:Y5,vide:X5}[n];if(o){const n=Z9(X9(e,["mdia","minf","stbl","stsd"])[0]);t[r]={timescale:i,type:o},t[o]=C5({timescale:i,id:r},n)}}}}}return X9(e,["moov","mvex","trex"]).forEach((e=>{const n=q9(e,4),r=t[n];r&&(r.default={duration:q9(e,12),flags:q9(e,20)})})),t}function Z9(e){const t=e.subarray(8),n=t.subarray(86),r=z9(t.subarray(4,8));let i=r;const o="enca"===r||"encv"===r;if(o){const e=X9(t,[r])[0];X9(e.subarray("enca"===r?28:78),["sinf"]).forEach((e=>{const t=X9(e,["schm"])[0];if(t){const n=z9(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=X9(e,["frma"])[0];t&&(i=z9(t))}}}))}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const e=X9(n,["avcC"])[0];i+="."+t6(e[1])+t6(e[2])+t6(e[3]);break}case"mp4a":{const e=X9(t,[r])[0],n=X9(e.subarray(28),["esds"])[0];if(n&&n.length>12){let e=4;if(3!==n[e++])break;e=e6(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=e6(n,e);const r=n[e++];if(64!==r)break;if(i+="."+t6(r),e+=12,5!==n[e++])break;e=e6(n,e);const o=n[e++];let a=(248&o)>>3;31===a&&(a+=1+((7&o)<<3)+((224&n[e])>>5)),i+="."+a}break}case"hvc1":case"hev1":{const e=X9(n,["hvcC"])[0],t=e[1],r=["","A","B","C"][t>>6],o=31&t,a=q9(e,2),s=(32&t)>>5?"H":"L",l=e[12],c=e.subarray(6,12);i+="."+r+o,i+="."+a.toString(16).toUpperCase(),i+="."+s+l;let u="";for(let n=c.length;n--;){const e=c[n];if(e||u){u="."+e.toString(16).toUpperCase()+u}}i+=u;break}case"dvh1":case"dvhe":{const e=X9(n,["dvcC"])[0],t=e[2]>>1&127,r=e[2]<<5&32|e[3]>>3&31;i+="."+n6(t)+"."+n6(r);break}case"vp09":{const e=X9(n,["vpcC"])[0],t=e[4],r=e[5],o=e[6]>>4&15;i+="."+n6(t)+"."+n6(r)+"."+n6(o);break}case"av01":{const e=X9(n,["av1C"])[0],t=e[1]>>>5,r=31&e[1],o=e[2]>>>7?"H":"M",a=(64&e[2])>>6,s=(32&e[2])>>5,l=2===t&&a?s?12:10:a?10:8,c=(16&e[2])>>4,u=(8&e[2])>>3,d=(4&e[2])>>2,h=3&e[2],p=1,m=1,f=1,g=0;i+="."+t+"."+n6(r)+o+"."+n6(l)+"."+c+"."+u+d+h+"."+n6(p)+"."+n6(m)+"."+n6(f)+"."+g;break}}return{codec:i,encrypted:o}}function e6(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function t6(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function n6(e){return(e<10?"0":"")+e}function r6(e){const t=X9(e,["schm"])[0];if(t){const n=z9(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return X9(e,["schi","tenc"])[0]}return null}function i6(e){const t=q9(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let r=0;const i=q9(e,4);for(let o=0;o<i;o++){if(256&t){r+=q9(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return r}function o6(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function a6(e,t){const n=[],r=t.samples,i=t.timescale,o=t.id;let a=!1;return X9(r,["moof"]).map((s=>{const l=s.byteOffset-8;X9(s,["traf"]).map((s=>{const c=X9(s,["tfdt"]).map((e=>{const t=e[0];let n=q9(e,4);return 1===t&&(n*=Math.pow(2,32),n+=q9(e,8)),n/i}))[0];return void 0!==c&&(e=c),X9(s,["tfhd"]).map((c=>{const u=q9(c,4),d=16777215&q9(c,0);let h=0;const p=0!==(16&d);let m=0;const f=0!==(32&d);let g=8;u===o&&(0!==(1&d)&&(g+=8),0!==(2&d)&&(g+=4),0!==(8&d)&&(h=q9(c,g),g+=4),p&&(m=q9(c,g),g+=4),f&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),X9(s,["trun"]).map((o=>{const s=o[0],c=16777215&q9(o,0),u=0!==(1&c);let d=0;const p=0!==(4&c),f=0!==(256&c);let g=0;const v=0!==(512&c);let y=0;const b=0!==(1024&c),w=0!==(2048&c);let x=0;const E=q9(o,4);let A=8;u&&(d=q9(o,A),A+=4),p&&(A+=4);let S=d+l;for(let l=0;l<E;l++){if(f?(g=q9(o,A),A+=4):g=h,v?(y=q9(o,A),A+=4):y=m,b&&(A+=4),w&&(x=0===s?q9(o,A):K9(o,A),A+=4),t.type===X5){let t=0;for(;t<y;){const o=q9(r,S);if(S+=4,s6(a,r[S])){l6(r.subarray(S,S+o),a?2:1,e+x/i,n)}S+=o,t+=o+4}}e+=g/i}})))}))}))})),n}function s6(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function l6(e,t,n,r){const i=c6(e);let o=0;o+=t;let a=0,s=0,l=0;for(;o<i.length;){a=0;do{if(o>=i.length)break;l=i[o++],a+=l}while(255===l);s=0;do{if(o>=i.length)break;l=i[o++],s+=l}while(255===l);const e=i.length-o;let t=o;if(s<e)o+=s;else if(s>e){V5.error(`Malformed SEI payload. ${s} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===i[t++]){const e=H9(i,t);if(t+=2,49===e){const e=q9(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const o=i[t++],s=64&o,l=s?2+3*(31&o):0,c=new Uint8Array(l);if(s){c[0]=o;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:a,pts:n,bytes:c})}}}}}else if(5===a&&s>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const o=s-16,l=new Uint8Array(o);for(let n=0;n<o;n++)l[n]=i[t++];r.push({payloadType:a,pts:n,uuid:e.join(""),userData:j9(l),userDataBytes:l})}}}function c6(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,o=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),o[r]=e[a];return o}function u6(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,o;if(t){r=1,i=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");i.set(n,16*e)}}else r=0,i=new Uint8Array;r>0?(o=new Uint8Array(4),t.length>0&&new DataView(o.buffer).setUint32(0,t.length,!1)):o=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.length;let o=8,a=i;for(;a--;)o+=n[a].byteLength;const s=new Uint8Array(o);for(s[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=255&o,s.set(e,4),a=0,o=8;a<i;a++)s.set(n[a],o),o+=n[a].byteLength;return s}([112,115,115,104],new Uint8Array([r,0,0,0]),e,o,i,a,n||new Uint8Array)}function d6(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const o=e.buffer,a=B9(new Uint8Array(o,n+12,16)),s=e.getUint32(28);let l=null,c=null;if(0===i){if(t-32<s||s<22)return{offset:n,size:t};c=new Uint8Array(o,n+32,s)}else if(1===i){if(!s||r<n+32+16*s+16)return{offset:n,size:t};l=[];for(let e=0;e<s;e++)l.push(new Uint8Array(o,n+32+16*e,16))}return{version:i,systemId:a,kids:l,data:c,offset:n,size:t}}let h6={};class p6{static clearKeyUriToKeyIdMap(){h6={}}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case l9:case u9:case c9:case s9:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||V5.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new p6(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=r9(this.uri);if(t)switch(this.keyFormat){case u9:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case c9:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=u6(e,null,t),this.keyId=x9(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=h6[this.uri];if(!e){const t=Object.keys(h6).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),h6[this.uri]=e}this.keyId=e}return this}}const m6=/\{\$([a-zA-Z0-9-_]+)\}/g;function f6(e){return m6.test(e)}function g6(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let r=n.length;r--;){const i=n[r],o=t[i];o&&(t[i]=v6(e,o))}}function v6(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(m6,(t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i}))}return t}function y6(e,t,n){let r,i,o=e.variableList;if(o||(e.variableList=o={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(Rb){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${Rb.message}`))}}else r=t.NAME,i=t.VALUE;r in o?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):o[r]=i||""}function b6(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function w6(){if("undefined"===typeof self)return;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const x6={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function E6(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!e.split(",").some((e=>!A6(e,t,n)))}function A6(e,t){var n;const r=w6(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return null!=(n=null==r?void 0:r.isTypeSupported(S6(e,t)))&&n}function S6(e,t){return`${t}/mp4;codecs="${e}"`}function T6(e){if(e){const t=e.substring(0,4);return x6.video[t]}return 2}function _6(e){return e.split(",").reduce(((e,t)=>{const n=x6.video[t];return n?(2*n+e)/(e?3:2):(x6.audio[t]+e)/(e?2:1)}),0)}const k6={};const C6=/flac|opus/i;function I6(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(C6,(e=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(k6[e])return k6[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let r=0;r<n.length;r++)if(A6(n[r],"audio",t))return k6[e]=n[r],n[r];return e}(e.toLowerCase(),t)))}function R6(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}const D6=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,L6=/#EXT-X-MEDIA:(.*)/g,P6=/^#EXT(?:INF|-X-TARGETDURATION):/m,M6=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),O6=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class N6{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return _5.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return P6.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:f6(e)},r=[];let i;for(D6.lastIndex=0;null!=(i=D6.exec(e));)if(i[1]){var o;const e=new H5(i[1]);g6(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=v6(n,i[2]),s={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:N6.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(s.width=l.width,s.height=l.height),U6(e.CODECS,s),null!=(o=s.unknownCodecs)&&o.length||r.push(s),n.levels.push(s)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new H5(r);g6(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=j6(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):V5.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":{const e=new H5(r);g6(n,e,["NAME","VALUE","QUERYPARAM"]),y6(n,e,t)}break;case"CONTENT-STEERING":{const e=new H5(r);g6(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:N6.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=F6(r)}}const a=r.length>0&&r.length<n.levels.length;return n.levels=a?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},o=n.levels,a={AUDIO:o.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:o.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let s=0;for(L6.lastIndex=0;null!==(r=L6.exec(e));){const e=new H5(r[1]),o=e.TYPE;if(o){const r=a[o],l=i[o]||[];i[o]=l,g6(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],d=e.CHANNELS,h=e.CHARACTERISTICS,p=e["INSTREAM-ID"],m={attrs:e,bitrate:0,id:s++,groupId:e["GROUP-ID"]||"",name:e.NAME||c||"",type:o,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:c,url:e.URI?N6.resolve(e.URI,t):""};if(u&&(m.assocLang=u),d&&(m.channels=d),h&&(m.characteristics=h),p&&(m.instreamId=p),null!=r&&r.length){const e=N6.findGroup(r,m.groupId)||r[0];B6(m,e,"audioCodec"),B6(m,e,"textCodec")}l.push(m)}}return i}static parseLevelPlaylist(e,t,n,r,i,o){const a=new t9(t),s=a.fragments;let l,c,u,d=null,h=0,p=0,m=0,f=0,g=null,v=new Z5(r,t),y=-1,b=!1,w=null;for(M6.lastIndex=0,a.m3u8=e,a.hasVariableRefs=f6(e);null!==(l=M6.exec(e));){b&&(b=!1,v=new Z5(r,t),v.start=m,v.sn=h,v.cc=f,v.level=n,d&&(v.initSegment=d,v.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null,w&&(v.setByteRange(w),w=null)));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(L5(v.duration)){v.start=m,u&&W6(v,u,a),v.sn=h,v.level=n,v.cc=f,s.push(v);const e=(" "+l[3]).slice(1);v.relurl=v6(a,e),$6(v,g),g=v,m+=v.duration,h++,p=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=s.length);else{if(l=l[0].match(O6),!l){V5.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&"undefined"===typeof l[c];c++);const e=(" "+l[c]).slice(1),i=(" "+l[c+1]).slice(1),m=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(i);break;case"SKIP":{const e=new H5(i);g6(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(L5(t)){a.skippedSegments=t;for(let e=t;e--;)s.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(a.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(i),1);break;case"VERSION":a.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(i||m)&&v.tagList.push(m?[i,m]:[i]);break;case"DISCONTINUITY":f++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,i]);break;case"DATERANGE":{const e=new H5(i);g6(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),g6(a,e,e.clientAttrs);const t=new G5(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:V5.warn(`Ignoring invalid DATERANGE tag: "${i}"`),v.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new H5(i);g6(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?b6(a,e,o):y6(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":f=parseInt(i);break;case"KEY":{const e=j6(i,t,a);if(e.isSupported()){if("NONE"===e.method){u=void 0;break}u||(u={}),u[e.keyFormat]&&(u=D5({},u)),u[e.keyFormat]=e}else V5.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${i}"`);break}case"START":a.startTimeOffset=F6(i);break;case"MAP":{const e=new H5(i);if(g6(a,e,["BYTERANGE","URI"]),v.duration){const i=new Z5(r,t);V6(i,e,n,u),d=i,v.initSegment=d,d.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=d.rawProgramDateTime)}else{const t=v.byteRangeEndOffset;if(t){const e=v.byteRangeStartOffset;w=`${t-e}@${e}`}else w=null;V6(v,e,n,u),d=v,b=!0}break}case"SERVER-CONTROL":{const e=new H5(i);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new H5(i);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const n=p>0?e[e.length-1]:void 0,r=p++,o=new H5(i);g6(a,o,["BYTERANGE","URI"]);const s=new e9(o,v,t,r,n);e.push(s),v.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new H5(i);g6(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new H5(i);g6(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:V5.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(s.pop(),m-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&($6(v,g),v.cc=f,a.fragmentHint=v,u&&W6(v,u,a));const x=s.length,E=s[0],A=s[x-1];if(m+=a.skippedSegments*a.targetduration,m>0&&x&&A){a.averagetargetduration=m/x;const e=A.sn;a.endSN="initSegment"!==e?e:0,a.live||(A.endList=!0),E&&(a.startCC=E.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(m+=a.fragmentHint.duration),a.totalduration=m,a.endCC=f,y>0&&function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(s,y),a}}function j6(e,t,n){var r,i;const o=new H5(e);g6(n,o,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(r=o.METHOD)?r:"",s=o.URI,l=o.hexadecimalInteger("IV"),c=o.KEYFORMATVERSIONS,u=null!=(i=o.KEYFORMAT)?i:"identity";s&&o.IV&&!l&&V5.error(`Invalid IV: ${o.IV}`);const d=s?N6.resolve(s,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new p6(a,d,u,h,l)}function F6(e){const t=new H5(e).decimalFloatingPoint("TIME-OFFSET");return L5(t)?t:null}function U6(e,t){let n=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const r=n.filter((t=>function(e,t){const n=x6[t];return!!n&&!!n[e.slice(0,4)]}(t,e)));r.length&&(t[`${e}Codec`]=r.join(","),n=n.filter((e=>-1===r.indexOf(e))))})),t.unknownCodecs=n}function B6(e,t,n){const r=t[n];r&&(e[n]=r)}function $6(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),L5(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function V6(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function W6(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||r.push(e)}var z6="manifest",H6="level",q6="audioTrack",G6="subtitleTrack",K6="main",Y6="audio",X6="subtitle";function Q6(e){const{type:t}=e;switch(t){case q6:return Y6;case G6:return X6;default:return K6}}function J6(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class Z6{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.LEVEL_LOADING,this.onLevelLoading,this),e.on(O5.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(O5.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.LEVEL_LOADING,this.onLevelLoading,this),e.off(O5.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(O5.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:z6,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:o,deliveryDirectives:a}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:H6,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:q6,url:i,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:G6,url:i,deliveryDirectives:o})}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=i.context;if(t&&t.url===e.url&&t.level===e.level)return void V5.trace("[playlist-loader]: playlist request ongoing");V5.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(r=e.type===z6?n.manifestLoadPolicy.default:D5({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),L5(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===H6&&null!==e.level?t=this.hls.levels[e.level].details:e.type===q6&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===G6&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=D5({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const o=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},s={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const o=e.data;0===o.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),N6.isMediaPlaylist(o)?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,t)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,a,s)}handleMasterPlaylist(e,t,n,r){const i=this.hls,o=e.data,a=J6(e,n),s=N6.parseMasterPlaylist(o,a);if(s.playlistParsingError)return void this.handleManifestParsingError(e,n,s.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p}=s;this.variableList=p;const{AUDIO:m=[],SUBTITLES:f,"CLOSED-CAPTIONS":g}=N6.parseMasterPlaylistMedia(o,a,s);if(m.length){m.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(V5.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new H5({}),bitrate:0,url:""}))}i.trigger(O5.MANIFEST_LOADED,{levels:c,audioTracks:m,subtitles:f,captions:g,contentSteering:l,url:a,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,t,n,r,i){const o=this.hls,{id:a,level:s,type:l}=n,c=J6(e,n),u=L5(s)?s:L5(a)?a:0,d=Q6(n),h=N6.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===z6){const e={attrs:new H5({}),bitrate:0,details:h,name:"",url:c};o.trigger(O5.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(O5.ERROR,{type:N5.NETWORK_ERROR,details:j5.MANIFEST_PARSING_ERROR,fatal:t.type===z6,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===H6?o+=`: ${e.level} id: ${e.id}`:e.type!==q6&&e.type!==G6||(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);V5.warn(`[playlist-loader]: ${o}`);let s=j5.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case z6:s=n?j5.MANIFEST_LOAD_TIMEOUT:j5.MANIFEST_LOAD_ERROR,l=!0;break;case H6:s=n?j5.LEVEL_LOAD_TIMEOUT:j5.LEVEL_LOAD_ERROR,l=!1;break;case q6:s=n?j5.AUDIO_TRACK_LOAD_TIMEOUT:j5.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case G6:s=n?j5.SUBTITLE_TRACK_LOAD_TIMEOUT:j5.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:N5.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=C5({url:n,data:void 0},r)}this.hls.trigger(O5.ERROR,u)}handlePlaylistLoaded(e,t,n,r,i,o){const a=this.hls,{type:s,level:l,id:c,groupId:u,deliveryDirectives:d}=r,h=J6(t,r),p=Q6(r),m="number"===typeof r.level&&p===K6?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger(O5.ERROR,{type:N5.NETWORK_ERROR,details:j5.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:r,level:m,parent:p,networkDetails:i,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const f=e.playlistParsingError;if(f)a.trigger(O5.ERROR,{type:N5.NETWORK_ERROR,details:j5.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:f,reason:f.message,response:t,context:r,level:m,parent:p,networkDetails:i,stats:n});else switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),o.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case z6:case H6:a.trigger(O5.LEVEL_LOADED,{details:e,level:m||0,id:c||0,stats:n,networkDetails:i,deliveryDirectives:d});break;case q6:a.trigger(O5.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d});break;case G6:a.trigger(O5.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d})}}}function e8(e,t){let n;try{n=new Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function t8(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(r){V5.debug(`[texttrack-utils]: ${r}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(i){V5.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}"disabled"===n&&(e.mode=n)}function n8(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function r8(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r=0,i=n;for(;r<=i;){const o=Math.floor((i+r)/2);if(t<e[o].startTime)i=o-1;else{if(!(t>e[o].startTime&&r<n))return o;r=o+1}}return e[r].startTime-t<t-e[i].startTime?r:i}(e,t);if(i>-1)for(let o=i,a=e.length;o<a;o++){const i=e[o];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function i8(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}var o8="org.id3",a8="com.apple.quicktime.HLS",s8="https://aomedia.org/emsg/ID3";function l8(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function c8(e,t,n,r,i){let o=new e(t,n,"");try{o.value=r,i&&(o.type=i)}catch(XA){o=new e(t,n,JSON.stringify(i?C5({type:i},r):r))}return o}const u8=(()=>{const e=l8();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(XA){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function d8(e,t){return e.getTime()/1e3-t}class h8{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(O5.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(O5.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(n8(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return e8(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=l8();if(o)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===s8&&!n||!r)continue;const t=D9(i[a].data);if(t){const n=i[a].pts;let r=n+i[a].duration;r>u8&&(r=u8);r-n<=0&&(r=n+.25);for(let i=0;i<t.length;i++){const a=t[i];if(!I9(a)){this.updateId3CueEnds(n,e);const t=c8(o,n,r,a,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===u8&&(n.endTime=e)}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,type:i}=t;const{id3Track:o,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:l}}=a;if(o&&(s||l)){let e;e="audio"===i?e=>e.type===o8&&l:"video"===i?e=>e.type===s8&&s:e=>e.type===o8&&l||e.type===s8&&s,r8(o,n,r,e)}}onLevelUpdated(e,t){let{details:n}=t;if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:o}=n,a=Object.keys(o);if(i){const e=Object.keys(r).filter((e=>!a.includes(e)));for(let t=e.length;t--;){const n=e[t];Object.keys(r[n].cues).forEach((e=>{i.removeCue(r[n].cues[e])})),delete r[n]}}const s=n.fragments[n.fragments.length-1];if(0===a.length||!L5(null==s?void 0:s.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=s.programDateTime/1e3-s.start,c=l8();for(let h=0;h<a.length;h++){const e=a[h],t=o[e],n=d8(t.startDate,l),i=r[e],s=(null==i?void 0:i.cues)||{};let p=(null==i?void 0:i.durationKnown)||!1,m=u8;const f=t.endDate;if(f)m=d8(f,l),p=!0;else if(t.endOnNext&&!p){const e=a.reduce(((e,n)=>{if(n!==t.id){const r=o[n];if(r.class===t.class&&r.startDate>t.startDate&&(!e||t.startDate<e.startDate))return r}return e}),null);e&&(m=d8(e.startDate,l),p=!0)}const g=Object.keys(t.attr);for(let r=0;r<g.length;r++){const o=g[r];if("ID"===(d=o)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;const a=s[o];if(a)p&&!i.durationKnown&&(a.endTime=m);else if(c){let r=t.attr[o];q5(o)&&(u=r,r=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const i=c8(c,n,m,{key:o,data:r},a8);i&&(i.id=e,this.id3Track.addCue(i),s[o]=i)}}r[e]={cues:s,dateRange:t,durationKnown:p}}var u,d}}class p8{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,s=this.hls.userConfig;let l=a&&n||t;(s.liveSyncDuration||s.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:o*r);const c=r;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,o=r-n.totalduration,a=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(O5.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(O5.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(O5.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(O5.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:n}=t;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===j5.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&V5.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const o=this.targetLatency;if(null===o)return;const a=n-o;if(a<Math.min(this.maxLatency,o+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const m8=["NONE","TYPE-0","TYPE-1",null];const f8=["SDR","PQ","HLG"];var g8="",v8="YES",y8="v2";function b8(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?y8:v8:g8}class w8{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class x8{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return E8(this._audioGroups,e)}hasSubtitleGroup(e){return E8(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function E8(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function A8(e,t){const n=t.startPTS;if(L5(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&(r.duration=i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function S8(e,t,n,r,i,o){r-n<=0&&(V5.warn("Fragment should have a positive duration",t),r=n+t.duration,o=i+t.duration);let a=n,s=r;const l=t.startPTS,c=t.endPTS;if(L5(l)){const e=Math.abs(l-n);L5(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(n,l),n=Math.min(n,l),i=Math.min(i,t.startDTS),s=Math.min(r,c),r=Math.max(r,c),o=Math.max(o,t.endDTS)}const u=n-t.start;0!==t.start&&(t.start=n),t.duration=r-t.start,t.startPTS=n,t.maxStartPTS=a,t.startDTS=i,t.endPTS=r,t.minEndPTS=s,t.endDTS=o;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const p=d-e.startSN,m=e.fragments;for(m[p]=t,h=p;h>0;h--)A8(m[h],m[h-1]);for(h=p;h<m.length-1;h++)A8(m[h],m[h+1]);return e.fragmentHint&&A8(m[m.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function T8(e,t){let n=null;const r=e.fragments;for(let s=r.length-1;s>=0;s--){const e=r[s].initSegment;if(e){n=e;break}}let i;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,o=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=o;c++){const e=l[a+c];let i=s[c];r&&!i&&c<r&&(i=t.fragments[c]=e),e&&i&&n(e,i,c,s)}}(e,t,((e,r,o,a)=>{if(t.skippedSegments&&r.cc!==e.cc){const t=e.cc-r.cc;for(let e=o;e<a.length;e++)a[e].cc+=t}L5(e.startPTS)&&L5(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(i=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)}));const o=t.fragments;if(n){(t.fragmentHint?o.concat(t.fragmentHint):o).forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments){if(t.deltaUpdateFailed=o.some((e=>!e)),t.deltaUpdateFailed){V5.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)o.shift();t.startSN=o[0].sn}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const r=D5({},e);n&&n.forEach((e=>{delete r[e]}));return Object.keys(t).forEach((e=>{const n=new G5(t[e].attr,r[e]);n.isValid?r[e]=n:V5.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),r}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));t.startCC=t.fragments[0].cc,t.endCC=o[o.length-1].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,o=e.length;i<=o;i++){const o=e[i],a=t[i+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),i?S8(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):_8(e,t),o.length&&(t.totalduration=t.edge-o[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const a=t.advancedDateTime;if(t.advanced&&a){const e=t.edge;t.driftStart||(t.driftStartTime=a,t.driftStart=e),t.driftEndTime=a,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function _8(e,t){const n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||k8(t,r[n].start)}function k8(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function C8(e,t,n){var r;return null!=e&&e.details?I8(null==(r=e.details)?void 0:r.partList,t,n):null}function I8(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function R8(e){e.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))}))}function D8(e){switch(e.details){case j5.FRAG_LOAD_TIMEOUT:case j5.KEY_LOAD_TIMEOUT:case j5.LEVEL_LOAD_TIMEOUT:case j5.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function L8(e,t){const n=D8(t);return e.default[(n?"timeout":"error")+"Retry"]}function P8(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function M8(e){return C5(C5({},e),{errorRetry:null,timeoutRetry:null})}function O8(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,o=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,o):o}const N8=function(e,t){let n=0,r=e.length-1,i=null,o=null;for(;n<=r;){i=(n+r)/2|0,o=e[i];const a=t(o);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null};function j8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,o=null;if(e){o=t[e.sn-t[0].sn+1]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7)}else 0===n&&0===t[0].start&&(o=t[0]);if(o&&((!e||e.level===o.level)&&0===F8(n,r,o)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),n);return e.start<=r}return!1}(o,e,Math.min(i,r))))return o;const a=N8(t,F8.bind(null,n,r));return!a||a===e&&o?o:a}function F8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function U8(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var B8=0,$8=2,V8=3,W8=5,z8=0,H8=1,q8=2;class G8{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=V5.log.bind(V5,`${t}:`),this.warn=V5.warn.bind(V5,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let i=-1;for(let n=0;n<r.length;n++){const o=r[n];let a;try{a=new self.URL(o.URI,t.url).href}catch(Rb){V5.warn(`Could not construct new URL for Rendition Report: ${Rb}`),a=o.URI||""}if(a===e){i=n;break}a===e.substring(0,a.length)&&(i=n)}if(-1!==i){const e=r[i],o=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let a=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const s=n&&b8(n);return new w8(o,a>=0?a:void 0,s)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:r,stats:i}=t,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;if(r.advancedDateTime=Date.now()-a,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),n&&r.fragments.length>0&&T8(n,r),!this.canLoad||!r.live)return;let a,s,l;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,o=r.endSN,c=r.lastPartIndex,u=i===o;-1!==c?(s=u?o+1:i,l=u?e?0:c:c+1):s=o+1;const d=r.age,h=d+r.ageHeader;let p=Math.min(h-r.partTarget,1.5*r.targetduration);if(p>0){if(n&&p>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${p} with playlist age: ${r.age}`),p=0;else{const e=Math.floor(p/r.targetduration);if(s+=e,void 0!==l){l+=Math.round(p%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${d.toFixed(2)}s goal: ${p} skip sn ${e} to part ${l}`)}r.tuneInGoal=p}if(a=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l),e||!u)return void this.loadPlaylist(a)}else(r.canBlockReload||r.canSkipUntil)&&(a=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l));const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(r,1e3*(r.edge-u));r.updated&&o>this.requestScheduled+d&&(this.requestScheduled=i.loading.start),void 0!==s&&r.canBlockReload?this.requestScheduled=i.loading.first+d-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=d);let h=this.requestScheduled-o;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,r){let i=b8(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=g8),new w8(n,r,i)}checkRetry(e){const t=e.details,n=D8(e),r=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=r||{},s=!!r&&!!a&&(i===W8||!r.resolved&&i===$8);if(s){var l;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=P8(a,o);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return s}}class K8{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Y8{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new K8(e),this.fast_=new K8(t),this.defaultTTFB_=r,this.ttfb_=new K8(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new K8(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new K8(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new K8(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const X8={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Q8={};function J8(e,t,n,r,i,o){const a=e.audioCodec?e.audioGroups:null,s=null==o?void 0:o.audioCodec,l=null==o?void 0:o.channels,c=l?parseInt(l):s?1/0:2;let u=null;if(null!=a&&a.length)try{u=1===a.length&&a[0]?t.groups[a[0]].channels:a.reduce(((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach((t=>{e[t]=(e[t]||0)+r.channels[t]}))}return e}),{2:0})}catch(Rb){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!u&&L5(c)&&Object.keys(u).some((e=>parseInt(e)>c))}function Z8(e,t,n){const r=e.videoCodec,i=e.audioCodec;if(!r||!i||!n)return Promise.resolve(X8);const o={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},a=e.videoRange;"SDR"!==a&&(o.transferFunction=a.toLowerCase());const s=r.split(",").map((e=>({type:"media-source",video:C5(C5({},o),{},{contentType:S6(e,"video")})})));return i&&e.audioGroups&&e.audioGroups.forEach((e=>{var n;e&&(null==(n=t.groups[e])||n.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",n=parseFloat(e);L5(n)&&n>2&&s.push.apply(s,i.split(",").map((e=>({type:"media-source",audio:{contentType:S6(e,"audio"),channels:""+n}}))))}})))})),Promise.all(s.map((e=>{const t=function(e){const{audio:t,video:n}=e,r=n||t;if(r){const e=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${e}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return Q8[t]||(Q8[t]=n.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:s,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e})))}function e7(e,t){let n=!1,r=[];return e&&(n="SDR"!==e,r=[e]),t&&(r=t.allowedVideoRanges||f8.slice(0),n=void 0!==t.preferHDR?t.preferHDR:function(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),r=n?r.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function t7(e,t){V5.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function n7(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(r7(e,t[r],n))return r}return-1}function r7(e,t,n){const{groupId:r,name:i,lang:o,assocLang:a,default:s}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===o||t.lang===o)&&(void 0===o||t.assocLang===a)&&(void 0===s||t.default===s)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some((e=>-1===r.indexOf(e)))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function i7(e,t){const{audioCodec:n,channels:r}=e;return(void 0===n||(t.audioCodec||"").substring(0,4)===n.substring(0,4))&&(void 0===r||r===(t.channels||"2"))}function o7(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}class a7{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var s7="NOT_LOADED",l7="APPENDING",c7="PARTIAL",u7="OK";class d7{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(O5.BUFFER_APPENDED,this.onBufferAppended,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.on(O5.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.BUFFER_APPENDED,this.onBufferAppended,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.off(O5.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;const i=t.end;if(t.start<=e&&null!==i&&e<=i)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,r=Object.keys(n);for(let i=r.length;i--;){const o=n[r[i]];if((null==o?void 0:o.body.type)===t&&o.buffered){const t=o.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r){this.timeRanges&&(this.timeRanges[e]=t);const i=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach((r=>{const o=this.fragments[r];if(!o)return;if(i>=o.body.sn)return;if(!o.buffered&&!o.loaded)return void(o.body.type===n&&this.removeFragment(o.body));const a=o.range[e];a&&a.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(o.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:r}=e;if(!t||"initSegment"===n.sn)return;const i=p7(n),o=this.fragments[i];if(!o||o.buffered&&n.gap)return;const a=!n.relurl;if(Object.keys(t).forEach((e=>{const i=n.elementaryStreams[e];if(!i)return;const s=t[e],l=a||!0===i.partial;o.range[e]=this.getBufferedTimes(n,r,l,s)})),o.loaded=null,Object.keys(o.range).length){o.buffered=!0;(o.body.endList=n.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),h7(o)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(o.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=p7(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},o=e.start,a=e.end,s=e.minEndPTS||a,l=e.maxStartPTS||o;for(let c=0;c<r.length;c++){const e=r.start(c)-this.bufferPadding,t=r.end(c)+this.bufferPadding;if(l>=e&&s<=t){i.time.push({startPTS:Math.max(o,r.start(c)),endPTS:Math.min(a,r.end(c))});break}if(o<t&&a>e){const e=Math.max(o,r.start(c)),t=Math.min(a,r.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,o=0;const{bufferPadding:a,fragments:s}=this;return Object.keys(s).forEach((l=>{const c=s[l];c&&h7(c)&&(n=c.body.start-a,r=c.body.end+a,e>=n&&e<=r&&(t=Math.min(e-n,r-e),o<=t&&(i=c.body,o=t)))})),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||h7(t))}getState(e){const t=p7(e),n=this.fragments[t];return n?n.buffered?h7(n)?c7:u7:l7:s7}isTimeBuffered(e,t,n){let r,i;for(let o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:r}=t;if("initSegment"===n.sn||n.bitrateTest)return;const i=r?null:t,o=p7(n);this.fragments[o]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i}=t;if("initSegment"===n.sn)return;const o=n.type;if(r){let e=this.activePartLists[o];e||(this.activePartLists[o]=e=[]),e.push(r)}this.timeRanges=i,Object.keys(i).forEach((e=>{const t=i[e];this.detectEvictedFragments(e,t,o,r)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=p7(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach((o=>{const a=this.fragments[o];if(!a)return;const s=a.body;s.type!==n||r&&!s.gap||s.start<t&&s.end>e&&(a.buffered||i)&&this.removeFragment(s)}))}removeFragment(e){const t=p7(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function h7(e){var t,n,r;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(r=e.range.audiovideo)?void 0:r.partial))}function p7(e){return`${e.type}_${e.level}_${e.sn}`}const m7={length:0,start:()=>0,end:()=>0};class f7{static isBuffered(e,t){try{if(e){const n=f7.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(Rb){}return!1}static bufferInfo(e,t,n){try{if(e){const r=f7.getBuffered(e),i=[];let o;for(o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(Rb){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let r=[];if(n)for(let l=0;l<e.length;l++){const t=r.length;if(t){const i=r[t-1].end;e[l].start-i<n?e[l].end>i&&(r[t-1].end=e[l].end):r.push(e[l])}else r.push(e[l])}else r=e;let i,o=0,a=t,s=t;for(let l=0;l<r.length;l++){const e=r[l].start,c=r[l].end;if(t+n>=e&&t<c)a=e,s=c,o=s-t;else if(t+n<e){i=e;break}}return{len:o,start:a||0,end:s||0,nextStart:i}}static getBuffered(e){try{return e.buffered}catch(XA){return V5.log("failed to get media.buffered",XA),m7}}}class g7{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=o}}function v7(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function y7(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function b7(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)y7(n[r],e);t.fragmentHint&&y7(t.fragmentHint,e),t.alignedSliding=!0}function w7(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t){const n=e.fragments,r=t.fragments;if(!r.length||!n.length)return void V5.log("No fragments to align");const i=v7(n,r[0].cc);if(i&&(!i||i.startPTS))return i;V5.log("No frag in previous level to align on")}(n,t);e&&L5(e.start)&&(V5.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),b7(e.start,t))}}(e,n,t),!n.alignedSliding&&t&&x7(n,t),n.alignedSliding||!t||n.skippedSegments||_8(t,n))}function x7(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,o;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=v7(r,a),o=v7(n,a)),i&&o||(i=r[Math.floor(r.length/2)],o=v7(n,i.cc)||n[Math.floor(n.length/2)]);const s=i.programDateTime,l=o.programDateTime;if(!s||!l)return;b7((l-s)/1e3-(o.start-i.start),e)}const E7=Math.pow(2,17);class A7{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new _7({type:N5.NETWORK_ERROR,details:j5.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,o=r.loader;return new Promise(((a,s)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void s(T7(e));e.gap=!1}const l=this.loader=e.loader=i?new i(r):new o(r),c=S7(e),u=M8(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:E7};e.stats=l.stats,l.load(c,d,{onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let o=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(o.slice(0,16)),o=o.slice(16)),a({frag:e,part:null,payload:o,networkDetails:i})},onError:(t,r,i,o)=>{this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:C5({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:o}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:r,stats:t}))},onProgress:(n,r,i,o)=>{t&&t({frag:e,part:null,payload:i,networkDetails:o})}})}))}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,o=r.loader;return new Promise(((a,s)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void s(T7(e,t));const l=this.loader=e.loader=i?new i(r):new o(r),c=S7(e,t),u=M8(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:E7};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,o,s)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:s};n(c),a(c)},onError:(n,r,i,o)=>{this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:C5({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:o}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),s(new _7({type:N5.NETWORK_ERROR,details:j5.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/i),r),a=(r-o)*Math.round(n.loaded/o);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const o=n.loading,a=r.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function S7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,o=n.byteRangeEndOffset;if(L5(i)&&L5(o)){var a;let t=i,n=o;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=o-i;e%16&&(n=o+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}return r}function T7(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:N5.MEDIA_ERROR,details:j5.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new _7(r)}class _7 extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class k7{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class C7{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class I7{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256);let p=0,m=0,f=0;for(f=0;f<256;f++)h[f]=f<128?f<<1:f<<1^283;for(f=0;f<256;f++){let n=m^m<<1^m<<2^m<<3^m<<4;n=n>>>8^255&n^99,e[p]=n,t[n]=p;const s=h[p],f=h[s],g=h[f];let v=257*h[n]^16843008*n;r[p]=v<<24|v>>>8,i[p]=v<<16|v>>>16,o[p]=v<<8|v>>>24,a[p]=v,v=16843009*g^65537*f^257*s^16843008*p,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,p?(p=s^h[h[h[g^s]]],m^=h[h[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const o=this.ksRows=4*(i+6+1);let a,s;const l=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],m=h[1],f=h[2],g=h[3];let v,y;for(a=0;a<o;a++)a<i?v=l[a]=t[a]:(y=v,a%i===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[a/i|0]<<24):i>6&&a%i===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-i]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],c[s]=s<4||a<=4?y:p[u[y>>>24]]^m[u[y>>>16&255]]^f[u[y>>>8&255]]^g[u[255&y]],c[s]=c[s]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,s=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],p=d[1],m=d[2],f=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,b,w,x,E,A,S,T,_,k,C,I,R,D;const L=this.networkToHostOrderSwap;for(;t<g.length;){for(_=L(g[t]),k=L(g[t+1]),C=L(g[t+2]),I=L(g[t+3]),E=_^i[0],A=I^i[1],S=C^i[2],T=k^i[3],R=4,D=1;D<r;D++)y=s[E>>>24]^l[A>>16&255]^c[S>>8&255]^u[255&T]^i[R],b=s[A>>>24]^l[S>>16&255]^c[T>>8&255]^u[255&E]^i[R+1],w=s[S>>>24]^l[T>>16&255]^c[E>>8&255]^u[255&A]^i[R+2],x=s[T>>>24]^l[E>>16&255]^c[A>>8&255]^u[255&S]^i[R+3],E=y,A=b,S=w,T=x,R+=4;y=o[E>>>24]<<24^o[A>>16&255]<<16^o[S>>8&255]<<8^o[255&T]^i[R],b=o[A>>>24]<<24^o[S>>16&255]<<16^o[T>>8&255]<<8^o[255&E]^i[R+1],w=o[S>>>24]<<24^o[T>>16&255]<<16^o[E>>8&255]<<8^o[255&A]^i[R+2],x=o[T>>>24]<<24^o[E>>16&255]<<16^o[A>>8&255]<<8^o[255&S]^i[R+3],v[t]=L(y^h),v[t+1]=L(x^p),v[t+2]=L(w^m),v[t+3]=L(b^f),h=_,p=k,m=C,f=I,t+=4}return v.buffer}}class R7{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(XA){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?E9(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((r,i)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const o=this.flush();o?r(o.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:r,currentResult:i,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=o6(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;r&&(n=r);let s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new I7),s.expandKey(t);const l=i;return this.currentResult=s.decrypt(a.buffer,0,n),this.currentIV=E9(a,-16).buffer,l||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new C7(this.subtle,t)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new k7(this.subtle,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((r=>(V5.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=E9(e,0,n),this.remainderData=E9(e,n)),t}logOnce(e){this.logEnabled&&(V5.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const D7=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t},L7="STOPPED",P7="IDLE",M7="KEY_LOADING",O7="FRAG_LOADING",N7="FRAG_LOADING_WAITING_RETRY",j7="WAITING_TRACK",F7="PARSING",U7="PARSED",B7="ENDED",$7="ERROR",V7="WAITING_INIT_PTS",W7="WAITING_LEVEL";class z7 extends a7{constructor(e,t,n,r,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=L7,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=r,this.log=V5.log.bind(V5,`${r}:`),this.warn=V5.warn.bind(V5,`${r}:`),this.hls=e,this.fragmentLoader=new A7(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new R7(e.config),e.on(O5.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=L7}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return f7.isBuffered(this.media,e.start+e.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===L7&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,o=n?n.currentTime:0,a=f7.bufferInfo(r||n,o,e.maxBufferHole);if(this.log(`media seeking to ${L5(o)?o.toFixed(3):o}, state: ${i}`),this.state===B7)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(!a.len||i<a.start||r>a.end){const e=o>i;(o<r||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(O5.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=L7,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===O7||!this.fragCurrent&&n===F7)&&(this.fragmentTracker.removeFragment(e),this.state=P7):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(O5.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==L7&&this.state!==$7&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===l7){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),o=this.backtrackFragment;(1===(o?e.sn-o.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===c7&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(O5.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:r}=t,i=e.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch((t=>{throw n.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((r=>{const i=self.performance.now();return n.trigger(O5.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:o,tdecrypt:i}}),t.payload=r,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==L7&&this.state!==$7&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=P7,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,r,i,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===K6?"level":"track"} ${e.level} (frag:[${(null!=(n=e.startPTS)?n:NaN).toFixed(3)}-${(null!=(r=e.endPTS)?r:NaN).toFixed(3)}] > buffer:${a?D7(f7.getBuffered(a)):"(detached)"})`),"initSegment"!==e.sn){var s;if(e.type!==X6){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=P7)}const t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=P7,a&&(!this.loadedmetadata&&e.type==K6&&a.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(o=this.fragPrevious)?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,o=!i||0===i.length||i.some((e=>!e)),a=new g7(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!o);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;var i;const o=null==t?void 0:t.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key?!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=M7,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(O5.KEY_LOADED,e),this.state===M7&&(this.state=P7),e})),this.hls.trigger(O5.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const i=o.partList;if(i&&r){n>e.end&&o.fragmentHint&&(e=o.fragmentHint);const s=this.getNextPart(i,e,n);if(s>-1){const l=i[s];let c;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${s}-${i.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=O7,c=a?a.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,r).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(O5.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),L5(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=O7;const s=this.config.progressive;let l;return l=s&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,r))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,s?r:void 0),a]).then((e=>{let[t]=e;return!s&&t&&r&&r(t),t})).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(O5.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,r){return new Promise(((i,o)=>{var a;const s=[],l=null==(a=n.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then((r=>{s[t.index]=r;const o=r.part;this.hls.trigger(O5.FRAG_LOADED,r);const a=C8(n,e.sn,t.index+1)||I8(l,e.sn,t.index+1);if(!a)return i({frag:e,part:o,partsLoaded:s});c(a)})).catch(o)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===j5.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(O5.ERROR,t)}else this.hls.trigger(O5.ERROR,{type:N5.OTHER_ERROR,details:j5.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==F7)return void(this.fragCurrent||this.state===L7||this.state===$7||(this.state=P7));const{frag:n,part:r,level:i}=t,o=self.performance.now();n.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(n,r,i,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:o}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of level ${r}. The current chunk will not be buffered.`),null;const a=t[r],s=o>-1?C8(a,i,o):null,l=s?s.fragment:function(e,t,n){if(null==e||!e.details)return null;const r=e.details;let i=r.fragments[t-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}(a,i,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:s,level:a}):null}bufferFragmentData(e,t,n,r,i){var o;if(!e||this.state!==F7)return;const{data1:a,data2:s}=e;let l=a;if(a&&s&&(l=o6(a,s)),null==(o=l)||!o.length)return;const c={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:l};if(this.hls.trigger(O5.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!f7.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=f7.bufferInfo(t,n,0),i=e.duration,o=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-o,r.end-o),n+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return L5(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:r}}=this,i=f7.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const o=this.fragmentTracker.getBufferedFrag(t,n);if(o&&i.nextStart<o.end)return f7.bufferInfo(e,t,Math.max(i.nextStart,r))}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e){const t=this.fragmentTracker.getAppendedFrag(e,K6);return t&&"fragment"in t?t.fragment:t}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,o=n[0].start;let a;if(t.live){const s=i.initialLiveManifestSize;if(r<s)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${s})`),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<o)&&(a=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=n[0]);if(!a){const n=i.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===u7||n===c7&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,o&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r);if(null!==t&&n.len+t.len>=i)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,o=!0;for(let a=0,s=e.length;a<s;a++){const s=e[a];if(o=o&&!s.independent,r>-1&&n<s.start)break;const l=s.loaded;l?r=-1:(i||s.independent||o)&&s.fragment===t&&(r=a),i=l}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!L5(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let r=0;r<e.length;++r){const i=e[r];if(U8(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=t[i-e.startSN];n.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=function(e,t){return N8(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=n;const{fragmentHint:s}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(r.lowLatencyMode&&null!=c&&c.length&&s);let d;if(u&&s&&!this.bitrateTest&&(o=o.concat(s),a=s.sn),e<t){d=j8(i,o,e,e>t-l?0:l)}else d=o[o.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===u7||t===c7&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn)){if(i&&d.level===i.level){const t=o[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==u7?t:null}}}return d}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=n.currentTime,o=e.fragments[0].start,a=e.edge,s=i>=o-t.maxFragLookUpTolerance&&i<=a;if(null!==r&&n.duration>r&&(i<r||!s)){const o=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||i<a-o)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),n.currentTime=r))}}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,o=!t,a=e.alignedSliding&&L5(i);if(o||!a&&!i){const{fragPrevious:i}=this;w7(i,n,e);const o=e.fragments[0].start;return this.log(`Live playlist sliding: ${o.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${i?i.sn:"na"} fragments: ${r}`),o}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const r=null!==this.startTimeOffset,i=r?this.startTimeOffset:e.startTimeOffset;null!==i&&L5(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${i} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===N7)||(this.state=P7)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var r;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(r=this.fragCurrent)?void 0:r.url}`);const i=t.details===j5.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(n,!0);const o=t.errorAction,{action:a,retryCount:s=0,retryConfig:l}=o||{};if(o&&a===W8&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const r=P8(l,s);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${s+1}/${l.maxNumRetry} in ${r}ms`),o.resolved=!0,this.retryDate=self.performance.now()+r,this.state=N7}else if(l&&o){if(this.resetFragmentErrors(e),!(s<l.maxNumRetry))return void V5.warn(`${t.details} reached or exceeded max retry (${s})`);i||a===V8||(o.resolved=!0)}else(null==o?void 0:o.action)===$8?this.state=W7:this.state=$7;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===F7||this.state===U7){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const o=!i;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===Y6&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==L7&&(this.state=P7)}afterBufferFlushed(e,t,n){if(!e)return;const r=f7.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===B7&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=P7}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){var i;const o=n.details;if(!o)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,i)=>{const a=e.elementaryStreams[i];if(a){const s=a.endPTS-a.startPTS;if(s<=0)return this.warn(`Could not parse fragment ${e.sn} ${i} duration reliably (${s})`),t||!1;const l=r?0:S8(o,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(O5.LEVEL_PTS_UPDATED,{details:o,level:n,drift:l,type:i,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1)&&null===(null==(i=this.transmuxer)?void 0:i.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=U7,this.hls.trigger(O5.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class H7{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function q7(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class G7{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=o6(this.cachedData,e),this.cachedData=null);let n,r=T9(e,0),i=r?r.length:0;const o=this._audioTrack,a=this._id3Track,s=r?C9(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&L5(s))&&(this.basePTS=K7(s,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:o8,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(o,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else k9(e,i)?(r=T9(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:o8,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=E9(e,n);this.cachedData?this.cachedData=o6(this.cachedData,t):this.cachedData=t}}return{audioTrack:o,videoTrack:q7(),id3Track:a,textTrack:q7()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:q7(),id3Track:this._id3Track,textTrack:q7()}}destroy(){}}const K7=(e,t,n)=>{if(L5(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function Y7(e,t){return 255===e[t]&&240===(246&e[t+1])}function X7(e,t){return 1&e[t+1]?7:9}function Q7(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function J7(e,t){return t+1<e.length&&Y7(e,t)}function Z7(e,t){if(J7(e,t)){const n=X7(e,t);if(t+n>=e.length)return!1;const r=Q7(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||J7(e,i)}return!1}function eee(e,t,n,r,i){if(!e.samplerate){const o=function(e,t,n,r){let i,o,a,s;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&t[n+2])>>>6);const d=(60&t[n+2])>>>2;if(!(d>u.length-1))return a=(1&t[n+2])<<2,a|=(192&t[n+3])>>>6,V5.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,s=new Array(4),o=d-3):(i=2,s=new Array(2),o=d):-1!==l.indexOf("android")?(i=2,s=new Array(2),o=d):(i=5,s=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&d>=6?o=d-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(d>=6&&1===a||/vivaldi/i.test(l))||!r&&1===a)&&(i=2,s=new Array(2)),o=d)),s[0]=i<<3,s[0]|=(14&d)>>1,s[1]|=(1&d)<<7,s[1]|=a<<3,5===i&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c};{const t=new Error(`invalid ADTS sampling index:${d}`);e.emit(O5.ERROR,O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}(t,n,r,i);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,V5.log(`parsed codec:${e.codec}, rate:${o.samplerate}, channels:${o.channelCount}`)}}function tee(e){return 9216e4/e}function nee(e,t,n,r,i){const o=r+i*tee(e.samplerate),a=function(e,t){const n=X7(e,t);if(t+n<=e.length){const r=Q7(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let s;if(a){const{frameLength:r,headerLength:i}=a,l=i+r,c=Math.max(0,n+l-t.length);c?(s=new Uint8Array(l-i),s.set(t.subarray(n+i,t.length),0)):s=t.subarray(n+i,n+l);const u={unit:s,pts:o};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;s=new Uint8Array(l),s.set(t.subarray(n,t.length),0);return{sample:{unit:s,pts:o},length:l,missing:-1}}let ree=null;const iee=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],oee=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],aee=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],see=[0,1,1,4];function lee(e,t,n,r,i){if(n+24>t.length)return;const o=cee(t,n);if(o&&n+o.frameLength<=t.length){const a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{sample:s,length:o.frameLength,missing:0}}}function cee(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==o){const a=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*iee[14*(3===n?3-r:3===r?3:4)+i-1],c=oee[3*(3===n?0:2===n?1:2)+o],u=3===s?1:2,d=aee[n][r],h=see[r],p=8*d*h,m=Math.floor(d*l/c+a)*h;if(null===ree){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ree=e?parseInt(e[1]):0}return!!ree&&ree<=87&&2===r&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:m,samplesPerFrame:p}}}function uee(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function dee(e,t){return t+1<e.length&&uee(e,t)}function hee(e,t){if(t+1<e.length&&uee(e,t)){const n=4,r=cee(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const o=t+i;return o===e.length||dee(e,o)}return!1}const pee=/\/emsg[-/]ID3/i;const mee=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),o=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=e[t];const s=Math.min(r,8),l=8-s;o[0]=4278190080>>>24+l<<l,i[0]=(a[0]&o[0])>>l,n=n?n<<s|i[0]:i[0],t+=1,r-=s}return n};class fee extends G7{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=gee(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=T9(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==C9(t)&&mee(e,n)<16}}function gee(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const o=t[n+4]>>6;if(o>=3)return-1;const a=[48e3,44100,32e3][o],s=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+o];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,p=t[n+5]>>3,m=7&t[n+5],f=new Uint8Array([o<<6|p<<1|m>>2,(3&m)<<6|c<<3|d<<2|s>>4,s<<4&224]),g=r+i*(1536/a*9e4),v=t.subarray(n,n+l);return e.config=f,e.channelCount=h,e.samplerate=a,e.samples.push({unit:v,pts:g}),l}class vee{constructor(){this.VideoSample=null}createVideoSample(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&V5.log(e.pts+"/"+e.dts+":"+e.debug)}}class yee{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&V5.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,r=8;for(let i=0;i<e;i++)0!==r&&(t=this.readEG(),r=(n+t+256)%256),n=0===r?n:r}readSPS(){let e,t,n,r=0,i=0,o=0,a=0;const s=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);s();const f=s();if(l(5),d(3),s(),p(),100===f||110===f||122===f||244===f||44===f||83===f||86===f||118===f||128===f){const e=c();if(3===e&&d(1),p(),p(),d(1),u())for(t=3!==e?8:12,n=0;n<t;n++)u()&&m(n<6?16:64)}p();const g=c();if(0===g)c();else if(1===g)for(d(1),h(),h(),e=c(),n=0;n<e;n++)h();p(),d(1);const v=c(),y=c(),b=l(1);0===b&&d(1),d(1),u()&&(r=c(),i=c(),o=c(),a=c());let w=[1,1];if(u()&&u()){switch(s()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[s()<<8|s(),s()<<8|s()]}}return{width:Math.ceil(16*(v+1)-2*r-2*i),height:(2-b)*(y+1)*16-(b?2:4)*(o+a),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class bee extends vee{parseAVCPES(e,t,n,r,i){const o=this.parseAVCNALu(e,n.data);let a,s=this.VideoSample,l=!1;n.data=null,s&&o.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),o.forEach((r=>{var o;switch(r.type){case 1:{let t=!1;a=!0;const i=r.data;if(l&&i.length>4){const e=new yee(i).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=s)&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null);s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.frame=!0,s.key=t;break}case 5:a=!0,null!=(o=s)&&o.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.key=!0,s.frame=!0;break;case 6:a=!0,l6(r.data,1,n.pts,t.samples);break;case 7:{var u,d;a=!0,l=!0;const t=r.data,n=new yee(t).readSPS();if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=i;const r=t.subarray(1,4);let o="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),o+=t}e.codec=o}break}case 8:a=!0,e.pps=[r.data];break;case 9:a=!0,e.audFound=!0,s&&this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:a=!0;break;default:a=!1,s&&(s.debug+="unknown NAL "+r.type+" ")}if(s&&a){s.units.push(r)}})),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let r=e.naluState||0;const i=r,o=[];let a,s,l,c=0,u=-1,d=0;for(-1===r&&(u=0,d=31&t[0],r=0,c=1);c<n;)if(a=t[c++],r)if(1!==r)if(a)if(1===a){if(s=c-r-1,u>=0){const e={data:t.subarray(u,s),type:d};o.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(i&&c<=4-i&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-i)),s>0&&(n.data=o6(n.data,t.subarray(0,s)),n.state=0))}c<n?(l=31&t[c],u=c,d=l,r=0):r=-1}else r=0;else r=3;else r=a?0:2;else r=a?0:1;if(u>=0&&r>=0){const e={data:t.subarray(u,n),type:d,state:r};o.push(e)}if(0===o.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=o6(n.data,t))}return e.naluState=r,o}}class wee{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new R7(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then((i=>{const o=new Uint8Array(i);r.set(o,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const o=c6(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then((a=>{i.data=this.getAvcDecryptedUnit(o,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}))}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const o=i[n];if(!(o.data.length<=48||1!==o.type&&5!==o.type)&&(this.decryptAvcSample(e,t,n,r,o),!this.decrypter.isSync()))return}}}}const xee=188;class Eee{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new bee}static probe(e){const t=Eee.syncOffset(e);return t>0&&V5.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,t-xee)+1,r=0;for(;r<n;){let i=!1,o=-1,a=0;for(let s=r;s<t;s+=xee){if(71!==e[s]||t-s!==xee&&71!==e[s+xee]){if(a)return-1;break}if(a++,-1===o&&(o=s,0!==o&&(n=Math.min(o+18612,e.length-xee)+1)),i||(i=0===Aee(e,s)),i&&a>1&&(0===o&&a>2||s+xee>n))return o}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:W9[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Eee.createTrack("video"),this._audioTrack=Eee.createTrack("audio",r),this._id3Track=Eee.createTrack("id3"),this._txtTrack=Eee.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(this.sampleAes=null);const o=this._videoTrack,a=this._audioTrack,s=this._id3Track,l=this._txtTrack;let c=o.pid,u=o.pesData,d=a.pid,h=s.pid,p=a.pesData,m=s.pesData,f=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=o6(this.remainderData,e)).length,this.remainderData=null),y<xee&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:s,textTrack:l};const b=Math.max(0,Eee.syncOffset(e));y-=(y-b)%xee,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let w=0;for(let E=b;E<y;E+=xee)if(71===e[E]){const t=!!(64&e[E+1]),i=Aee(e,E);let y;if((48&e[E+3])>>4>1){if(y=E+5+e[E+4],y===E+xee)continue}else y=E+4;switch(i){case c:t&&(u&&(n=Cee(u))&&this.videoParser.parseAVCPES(o,l,n,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(y,E+xee)),u.size+=E+xee-y);break;case d:if(t){if(p&&(n=Cee(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,n);break;case"mp3":this.parseMPEGPES(a,n);break;case"ac3":this.parseAC3PES(a,n)}p={data:[],size:0}}p&&(p.data.push(e.subarray(y,E+xee)),p.size+=E+xee-y);break;case h:t&&(m&&(n=Cee(m))&&this.parseID3PES(s,n),m={data:[],size:0}),m&&(m.data.push(e.subarray(y,E+xee)),m.size+=E+xee-y);break;case 0:t&&(y+=e[y]+1),v=this._pmtId=See(e,y);break;case v:{t&&(y+=e[y]+1);const n=Tee(e,y,this.typeSupported,r,this.observer);c=n.videoPid,c>0&&(o.pid=c,o.segmentCodec=n.segmentVideoCodec),d=n.audioPid,d>0&&(a.pid=d,a.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(s.pid=h),null===f||g||(V5.warn(`MPEG-TS PMT found at ${E} after unknown PID '${f}'. Backtracking to sync byte @${b} to parse all TS packets.`),f=null,E=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:f=i}}else w++;w>0&&_ee(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),o.pesData=u,a.pesData=p,s.pesData=m;const x={audioTrack:a,videoTrack:o,id3Track:s,textTrack:l};return i&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,o=n.pesData,a=t.pesData,s=r.pesData;let l;if(o&&(l=Cee(o))?(this.videoParser.parseAVCPES(n,i,l,!0,this._duration),n.pesData=null):n.pesData=o,a&&(l=Cee(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&V5.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;s&&(l=Cee(s))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=s}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new wee(this.observer,this.config,t);return this.decrypt(r,i)}decrypt(e,t){return new Promise((n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,(()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)})):n(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,o,a,s=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)s=o6(r.sample.unit,s);else{const o=i-t;r.sample.unit.set(s.subarray(0,t),o),e.samples.push(r.sample),n=r.missing}}for(i=n,o=s.length;i<o-1&&!J7(s,i);i++);if(i!==n){let e;const t=i<o-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",_ee(this.observer,new Error(e),t),!t)return}if(eee(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!r)return void V5.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=tee(e.samplerate);a=r.sample.pts+t}}let l,c=0;for(;i<o;){if(l=nee(e,s,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<o-1&&!J7(s,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,o=0;const a=t.pts;if(void 0!==a)for(;o<r;)if(dee(n,o)){const t=lee(e,n,o,a,i);if(!t)break;o+=t.length,i++}else o++;else V5.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void V5.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let o,a=0,s=0;for(;s<i&&(o=gee(e,n,s,r,a++))>0;)s+=o}}parseID3PES(e,t){if(void 0===t.pts)return void V5.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=D5({},t,{type:this._videoTrack?s8:o8,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Aee(e,t){return((31&e[t+1])<<8)+e[t+2]}function See(e,t){return(31&e[t+10])<<8|e[t+11]}function Tee(e,t,n,r,i){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){const a=Aee(e,t),s=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){kee("ADTS AAC");break}case 15:-1===o.audioPid&&(o.audioPid=a);break;case 21:-1===o.id3Pid&&(o.id3Pid=a);break;case 219:if(!r){kee("H.264");break}case 27:-1===o.videoPid&&(o.videoPid=a,o.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="mp3"):V5.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){kee("AC-3");break}case 129:n.ac3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="ac3"):V5.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&s>0){let r=t+5,i=s;for(;i>2;){if(106===e[r])!0!==n.ac3?V5.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=a,o.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return _ee(i,new Error("Unsupported EC-3 in M2TS found")),o;case 36:return _ee(i,new Error("Unsupported HEVC in M2TS found")),o}t+=s+5}return o}function _ee(e,t,n){V5.warn(`parsing error: ${t.message}`),e.emit(O5.ERROR,O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function kee(e){V5.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function Cee(e){let t,n,r,i,o,a=0;const s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;)s[0]=o6(s[0],s[1]),s.splice(1,1);t=s[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,i-o>54e5&&(V5.warn(`${Math.round((i-o)/9e4)}s delta between PTS and DTS, align them`),i=o)):o=i),r=t[8];let c=r+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,n=s.length;e<n;e++){t=s[e];let n=t.byteLength;if(c){if(c>n){c-=n;continue}t=t.subarray(c),n-=c,c=0}u.set(t,a),a+=n}return n&&(n-=r+3),{data:u,pts:i,dts:o,len:n}}return null}class Iee{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Ree=Math.pow(2,32)-1;class Dee{static init(){let e;for(e in Dee.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Dee.types)Dee.types.hasOwnProperty(e)&&(Dee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Dee.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Dee.STTS=Dee.STSC=Dee.STCO=i,Dee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Dee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Dee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Dee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);Dee.FTYP=Dee.box(Dee.types.ftyp,o,s,o,a),Dee.DINF=Dee.box(Dee.types.dinf,Dee.box(Dee.types.dref,r))}static box(e){let t=8;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];let o=r.length;const a=o;for(;o--;)t+=r[o].byteLength;const s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),o=0,t=8;o<a;o++)s.set(r[o],t),t+=r[o].byteLength;return s}static hdlr(e){return Dee.box(Dee.types.hdlr,Dee.HDLR_TYPES[e])}static mdat(e){return Dee.box(Dee.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Ree+1)),r=Math.floor(t%(Ree+1));return Dee.box(Dee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Dee.box(Dee.types.mdia,Dee.mdhd(e.timescale,e.duration),Dee.hdlr(e.type),Dee.minf(e))}static mfhd(e){return Dee.box(Dee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Dee.box(Dee.types.minf,Dee.box(Dee.types.smhd,Dee.SMHD),Dee.DINF,Dee.stbl(e)):Dee.box(Dee.types.minf,Dee.box(Dee.types.vmhd,Dee.VMHD),Dee.DINF,Dee.stbl(e))}static moof(e,t,n){return Dee.box(Dee.types.moof,Dee.mfhd(e),Dee.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Dee.trak(e[t]);return Dee.box.apply(null,[Dee.types.moov,Dee.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(Dee.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Dee.trex(e[t]);return Dee.box.apply(null,[Dee.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Ree+1)),r=Math.floor(t%(Ree+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Dee.box(Dee.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Dee.box(Dee.types.sdtp,n)}static stbl(e){return Dee.box(Dee.types.stbl,Dee.stsd(e),Dee.box(Dee.types.stts,Dee.STTS),Dee.box(Dee.types.stsc,Dee.STSC),Dee.box(Dee.types.stsz,Dee.STSZ),Dee.box(Dee.types.stco,Dee.STCO))}static avc1(e){let t,n,r,i=[],o=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(n));const a=Dee.box(Dee.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(o))),s=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Dee.box(Dee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Dee.box(Dee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Dee.box(Dee.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Dee.box(Dee.types.mp4a,Dee.audioStsd(e),Dee.box(Dee.types.esds,Dee.esds(e)))}static mp3(e){return Dee.box(Dee.types[".mp3"],Dee.audioStsd(e))}static ac3(e){return Dee.box(Dee.types["ac-3"],Dee.audioStsd(e),Dee.box(Dee.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?Dee.box(Dee.types.stsd,Dee.STSD,Dee.mp3(e)):"ac3"===e.segmentCodec?Dee.box(Dee.types.stsd,Dee.STSD,Dee.ac3(e)):Dee.box(Dee.types.stsd,Dee.STSD,Dee.mp4a(e)):Dee.box(Dee.types.stsd,Dee.STSD,Dee.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,o=Math.floor(n/(Ree+1)),a=Math.floor(n%(Ree+1));return Dee.box(Dee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=Dee.sdtp(e),r=e.id,i=Math.floor(t/(Ree+1)),o=Math.floor(t%(Ree+1));return Dee.box(Dee.types.traf,Dee.box(Dee.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Dee.box(Dee.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),Dee.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Dee.box(Dee.types.trak,Dee.tkhd(e),Dee.mdia(e))}static trex(e){const t=e.id;return Dee.box(Dee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,o=new Uint8Array(i);let a,s,l,c,u,d;for(t+=8+i,o.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<r;a++)s=n[a],l=s.duration,c=s.size,u=s.flags,d=s.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return Dee.box(Dee.types.trun,o)}static initSegment(e){Dee.types||Dee.init();const t=Dee.moov(e);return o6(Dee.FTYP,t)}}Dee.types=void 0,Dee.HDLR_TYPES=void 0,Dee.STTS=void 0,Dee.STSC=void 0,Dee.STCO=void 0,Dee.STSZ=void 0,Dee.VMHD=void 0,Dee.SMHD=void 0,Dee.STSD=void 0,Dee.FTYP=void 0,Dee.DINF=void 0;function Lee(e,t){const n=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(n):n}function Pee(e){return Lee(e,1e3,1/9e4,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}let Mee,Oee=null,Nee=null;class jee{constructor(e,t,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Oee){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Oee=e?parseInt(e[1]):0}if(null===Nee){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Nee=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){V5.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){V5.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){V5.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce(((e,r)=>{let i=r.pts,o=i-e;return o<-4294967296&&(t=!0,i=Fee(i,n),o=i-e),o>0?e:i}),n);return t&&V5.debug("PTS rollover detected"),r}remux(e,t,n,r,i,o,a,s){let l,c,u,d,h,p,m=i,f=i;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,w=a&&y>0||y>1;if((!g||b)&&(!v||w)||this.ISGenerated||a){if(this.ISGenerated){var x,E,A,S;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(x=t.pixelRatio)?void 0:x[0])===(null==(E=e.pixelRatio)?void 0:E[0])&&(null==(A=t.pixelRatio)?void 0:A[1])===(null==(S=e.pixelRatio)?void 0:S[1])||this.resetInitSegment()}else u=this.generateIS(e,t,i,o);const n=this.isVideoContiguous;let r,a=-1;if(w&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){V5.warn(`[mp4-remuxer]: Dropped ${a} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,f+=(t.samples[0].pts-e)/t.inputTimeScale,r=f}else-1===a&&(V5.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(b&&w){const n=this.getVideoStartPts(t.samples),r=(Fee(e.samples[0].pts,n)-n)/t.inputTimeScale;m+=Math.max(0,r),f+=Math.max(0,-r)}if(b){if(e.samplerate||(V5.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,o)),c=this.remuxAudio(e,m,this.isAudioContiguous,o,v||w||s===Y6?f:void 0),w){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(V5.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,o)),l=this.remuxVideo(t,f,n,r)}}else w&&(l=this.remuxVideo(t,f,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Uee(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=Bee(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:p,text:d,id3:h}}generateIS(e,t,n,r){const i=e.samples,o=t.samples,a=this.typeSupported,s={},l=this._initPTS;let c,u,d,h=!l||r,p="audio/mp4";if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(p="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}s.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Dee.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=i[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,s.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Dee.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(o),t=Math.round(d*n);u=Math.min(u,Fee(o[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(s).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:s,initPTS:c,timescale:d}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,o=e.samples,a=[],s=o.length,l=this._initPTS;let c,u,d=this.nextAvcDts,h=8,p=this.videoSampleDuration,m=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===d){const e=t*i,r=o[0].pts-Fee(o[0].dts,o[0].pts);Oee&&null!==d&&Math.abs(e-r-d)<15e3?n=!0:d=e-r}const v=l.baseTime*i/l.timescale;for(let P=0;P<s;P++){const e=o[P];e.pts=Fee(e.pts-v,d),e.dts=Fee(e.dts-v,d),e.dts<o[P>0?P-1:P].dts&&(g=!0)}g&&o.sort((function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),c=o[0].dts,u=o[o.length-1].dts;const y=u-c,b=y?Math.round(y/(s-1)):p||e.inputTimeScale/30;if(n){const e=c-d,n=e>b,r=e<-1;if((n||r)&&(n?V5.warn(`AVC: ${Pee(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):V5.warn(`AVC: ${Pee(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!r||d>=o[0].pts||Oee)){c=d;const t=o[0].pts-e;if(n)o[0].dts=c,o[0].pts=t;else for(let n=0;n<o.length&&!(o[n].dts>t);n++)o[n].dts-=e,o[n].pts-=e;V5.log(`Video: Initial PTS/DTS adjusted: ${Pee(t,!0)}/${Pee(c,!0)}, delta: ${Pee(e,!0)} ms`)}}c=Math.max(0,c);let w=0,x=0,E=c;for(let P=0;P<s;P++){const e=o[P],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;x+=r,w+=n,e.length=r,e.dts<E?(e.dts=E,E+=b/4|0||1):E=e.dts,m=Math.min(e.pts,m),f=Math.max(e.pts,f)}u=o[s-1].dts;const A=x+4*w+8;let S;try{S=new Uint8Array(A)}catch(L){return void this.observer.emit(O5.ERROR,O5.ERROR,{type:N5.MUX_ERROR,details:j5.REMUX_ALLOC_ERROR,fatal:!1,error:L,bytes:A,reason:`fail allocating video mdat ${A}`})}const T=new DataView(S.buffer);T.setUint32(0,A),S.set(Dee.types.mdat,4);let _=!1,k=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let P=0;P<s;P++){const e=o[P],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;T.setUint32(h,i),h+=4,S.set(n,h),h+=i,l+=4+i}if(P<s-1)p=o[P+1].dts-e.dts,n=o[P+1].pts-e.pts;else{const t=this.config,a=P>0?e.dts-o[P-1].dts:b;if(n=P>0?e.pts-o[P-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const n=Math.floor(t.maxBufferHole*i),o=(r?m+r*i:this.nextAudioPts)-e.pts;o>n?(p=o-a,p<0?p=a:_=!0,V5.log(`[mp4-remuxer]: It is approximately ${o/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=a}else p=a}const c=Math.round(e.pts-e.dts);k=Math.min(k,p),I=Math.max(I,p),C=Math.min(C,n),R=Math.max(R,n),a.push(new $ee(e.key,p,l,c))}if(a.length)if(Oee){if(Oee<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Nee&&R-C<I-k&&b/I<.025&&0===a[0].cts){V5.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=a.length;t<n;t++){const r=e+a[t].duration,i=e+a[t].cts;if(t<n-1){const e=r+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:b;a[t].cts=0,e=r}}p=_||!p?b:p,this.nextAvcDts=d=u+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const D={data1:Dee.moof(e.sequenceNumber++,c,D5({},e,{samples:a})),data2:S,startPTS:m/i,endPTS:(f+p)/i,startDTS:c/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),s=this.getSamplesPerFrame(e),l=s*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let p=e.samples,m=u?0:8,f=this.nextAudioPts||-1;const g=t*o,v=c.baseTime*o/c.timescale;if(this.isAudioContiguous=n=n||p.length&&f>0&&(r&&Math.abs(g-f)<9e3||Math.abs(Fee(p[0].pts-v,g)-f)<20*l),p.forEach((function(e){e.pts=Fee(e.pts-v,g)})),!n||f<0){if(p=p.filter((e=>e.pts>=0)),!p.length)return;f=0===i?0:r&&!h?Math.max(0,g):p[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=f;n<p.length;n++){const i=p[n],a=i.pts,s=a-r,c=Math.abs(1e3*s/o);if(s<=-t*l&&h)0===n&&(V5.warn(`Audio frame @ ${(a/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*s/o)} ms.`),this.nextAudioPts=f=r=a);else if(s>=t*l&&c<1e4&&h){let t=Math.round(s/l);r=a-t*l,r<0&&(t--,r+=l),0===n&&(this.nextAudioPts=f=r),V5.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(r/o).toFixed(3)}s due to ${Math.round(1e3*s/o)} ms gap.`);for(let o=0;o<t;o++){const t=Math.max(r,0);let o=Iee.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);o||(V5.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),o=i.unit.subarray()),p.splice(n,0,{unit:o,pts:t}),r+=l,n++}}i.pts=r,r+=l}}let y,b=null,w=null,x=0,E=p.length;for(;E--;)x+=p[E].unit.byteLength;for(let R=0,D=p.length;R<D;R++){const t=p[R],r=t.unit;let i=t.pts;if(null!==w){d[R-1].duration=Math.round((i-w)/a)}else{if(n&&"aac"===e.segmentCodec&&(i=f),b=i,!(x>0))return;x+=m;try{y=new Uint8Array(x)}catch(I){return void this.observer.emit(O5.ERROR,O5.ERROR,{type:N5.MUX_ERROR,details:j5.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:x,reason:`fail allocating audio mdat ${x}`})}if(!u){new DataView(y.buffer).setUint32(0,x),y.set(Dee.types.mdat,4)}}y.set(r,m);const o=r.byteLength;m+=o,d.push(new $ee(!0,s,o,0)),w=i}const A=d.length;if(!A)return;const S=d[d.length-1];this.nextAudioPts=f=w+a*S.duration;const T=u?new Uint8Array(0):Dee.moof(e.sequenceNumber++,b/a,D5({},e,{samples:d}));e.samples=[];const _=b/o,k=f/o,C={data1:T,data2:y,startPTS:_,endPTS:k,startDTS:_,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,C}remuxEmptyAudio(e,t,n,r){const i=e.inputTimeScale,o=i/(e.samplerate?e.samplerate:i),a=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,c=(null!==a?a:r.startDTS*i)+l,u=r.endDTS*i+l,d=1024*o,h=Math.ceil((u-c)/d),p=Iee.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(V5.warn("[mp4-remuxer]: remux empty Audio"),!p)return void V5.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const m=[];for(let f=0;f<h;f++){const e=c+f*d;m.push({unit:p,pts:e,dts:e})}return e.samples=m,this.remuxAudio(e,t,n,!1)}}function Fee(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function Uee(e,t,n,r){const i=e.samples.length;if(!i)return;const o=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=Fee(i.pts-n.baseTime*o/n.timescale,t*o)/o,i.dts=Fee(i.dts-r.baseTime*o/r.timescale,t*o)/o}const a=e.samples;return e.samples=[],{samples:a}}function Bee(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=Fee(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort(((e,t)=>e.pts-t.pts));const o=e.samples;return e.samples=[],{samples:o}}class $ee{constructor(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}function Vee(e,t){const n=null==e?void 0:e.codec;if(n&&n.length>4)return n;if(t===Y5){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n){return I6(n,!1)}const e="mp4a.40.5";return V5.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${e}"`),e}return V5.warn(`Unhandled video codec "${n}"`),"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1.42e01e"}try{Mee=self.performance.now.bind(self.performance)}catch(wye){V5.debug("Unable to use Performance API on this environment"),Mee=null==o9?void 0:o9.Date.now}const Wee=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=q7("video",1),o=this.audioTrack=q7("audio",1),a=this.txtTrack=q7("text",1);if(this.id3Track=q7("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const s=J9(e);if(s.video){const{id:e,timescale:t,codec:n}=s.video;i.id=e,i.timescale=a.timescale=t,i.codec=n}if(s.audio){const{id:e,timescale:t,codec:n}=s.audio;o.id=e,o.timescale=t,o.codec=n}a.id=W9.text,i.sampleDuration=0,i.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=q9(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=o6(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=X9(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=E9(e,0,r.byteOffset-8),t.remainder=E9(e,r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const o=this.extractID3Track(r,t);return i.samples=a6(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=a6(e,t),{videoTrack:t,audioTrack:q7(),id3Track:r,textTrack:q7()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=X9(e.samples,["emsg"]);r&&r.forEach((e=>{const r=function(e){const t=e[0];let n="",r="",i=0,o=0,a=0,s=0,l=0,c=0;if(0===t){for(;"\0"!==z9(e.subarray(c,c+1));)n+=z9(e.subarray(c,c+1)),c+=1;for(n+=z9(e.subarray(c,c+1)),c+=1;"\0"!==z9(e.subarray(c,c+1));)r+=z9(e.subarray(c,c+1)),c+=1;r+=z9(e.subarray(c,c+1)),c+=1,i=q9(e,12),o=q9(e,16),s=q9(e,20),l=q9(e,24),c=28}else if(1===t){c+=4,i=q9(e,c),c+=4;const t=q9(e,c);c+=4;const o=q9(e,c);for(c+=4,a=2**32*t+o,P5(a)||(a=Number.MAX_SAFE_INTEGER,V5.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=q9(e,c),c+=4,l=q9(e,c),c+=4;"\0"!==z9(e.subarray(c,c+1));)n+=z9(e.subarray(c,c+1)),c+=1;for(n+=z9(e.subarray(c,c+1)),c+=1;"\0"!==z9(e.subarray(c,c+1));)r+=z9(e.subarray(c,c+1)),c+=1;r+=z9(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:o,eventDuration:s,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(pee.test(r.schemeIdUri)){const e=L5(r.presentationTime)?r.presentationTime/r.timeScale:t+r.presentationTimeDelta/r.timeScale;let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const o=r.payload;n.samples.push({data:o,len:o.byteLength,dts:e,pts:e,type:s8,duration:i})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&X9(e,["moov","trak"]).forEach((e=>{const t=X9(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=X9(t,["enca"]);const i=r.length>0;i||(r=X9(t,["encv"])),r.forEach((e=>{X9(i?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=r6(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(V5.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${B9(e)} -> ${B9(n)}`),t.set(n,8))}}))}))}));return e}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=J9(e);r.audio&&(t=Vee(r.audio,Y5)),r.video&&(n=Vee(r.video,X5));const i={};r.audio&&r.video?i.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?i.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:V5.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,n,r,i,o){var a,s;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};L5(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(null==d||!d.length)return u;const h={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(d),p=this.initData),null==(s=p)||!s.length)return V5.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const m=function(e,t){let n=0,r=0,i=0;const o=X9(e,["moof","traf"]);for(let a=0;a<o.length;a++){const e=o[a],s=X9(e,["tfhd"])[0],l=t[q9(s,4)];if(!l)continue;const c=l.default,u=q9(s,0)|(null==c?void 0:c.flags);let d=null==c?void 0:c.duration;8&u&&(d=q9(s,2&u?12:8));const h=l.timescale||9e4,p=X9(e,["trun"]);for(let t=0;t<p.length;t++)n=i6(p[t]),!n&&d&&(n=d*q9(p[t],4)),l.type===X5?r+=n/h:l.type===Y5&&(i+=n/h)}if(0===r&&0===i){let t=1/0,n=0,r=0;const i=X9(e,["sidx"]);for(let e=0;e<i.length;e++){const o=Q9(i[e]);if(null!=o&&o.references){t=Math.min(t,o.earliestPresentationTime/o.timescale);const e=o.references.reduce(((e,t)=>e+t.info.duration||0),0);n=Math.max(n,e+o.earliestPresentationTime/o.timescale),r=n-t}}if(r&&L5(r))return r}return r||i}(d,p),f=function(e,t){return X9(t,["moof","traf"]).reduce(((t,n)=>{const r=X9(n,["tfdt"])[0],i=r[0],o=X9(n,["tfhd"]).reduce(((t,n)=>{const o=q9(n,4),a=e[o];if(a){let e=q9(r,4);if(1===i){if(e===$9)return V5.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=$9+1,e+=q9(r,8)}const n=e/(a.timescale||9e4);if(L5(n)&&(null===t||n<t))return n}return t}),null);return null!==o&&L5(o)&&(null===t||o<t)?o:t}),null)}(p,d),g=null===f?i:f;(function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),o=t-e.baseTime/e.timescale;return Math.abs(o-n)>i}(l,g,i,m)||h.timescale!==l.timescale&&o)&&(h.initPTS=g-i,l&&1===l.timescale&&V5.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:c,y=v+m;!function(e,t,n){X9(t,["moof","traf"]).forEach((t=>{X9(t,["tfhd"]).forEach((r=>{const i=q9(r,4),o=e[i];if(!o)return;const a=o.timescale||9e4;X9(t,["tfdt"]).forEach((e=>{const t=e[0],r=n*a;if(r){let n=q9(e,4);if(0===t)n-=r,n=Math.max(n,0),Y9(e,4,n);else{n*=Math.pow(2,32),n+=q9(e,8),n-=r,n=Math.max(n,0);const t=Math.floor(n/($9+1)),i=Math.floor(n%($9+1));Y9(e,4,t),Y9(e,8,i)}}}))}))}))}(p,d,l.baseTime/l.timescale),m>0?this.lastEndTime=y:(V5.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,w=!!p.video;let x="";b&&(x+="audio"),w&&(x+="video");const E={data1:d,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:x,hasAudio:b,hasVideo:w,nb:1,dropped:0};return u.audio="audio"===E.type?E:void 0,u.video="audio"!==E.type?E:void 0,u.initSegment=h,u.id3=Uee(n,i,l,l),r.samples.length&&(u.text=Bee(r,i,l)),u}}},{demux:Eee,remux:jee},{demux:class extends G7{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=T9(e,0);let n=(null==t?void 0:t.length)||0;if(hee(e,n))return!1;for(let r=e.length;n<r;n++)if(Z7(e,n))return V5.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&Y7(e,t)&&Q7(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){eee(e,this.observer,t,n,e.manifestCodec);const r=nee(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:jee},{demux:class extends G7{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=T9(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==C9(t)&&mee(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(hee(e,n))return V5.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return uee(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return lee(e,t,n,this.basePTS,this.frameIndex)}},remux:jee}];Wee.splice(2,0,{demux:fee,remux:jee});class zee{constructor(e,t,n,r,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=Mee();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:s}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:p}=r||a,{audioCodec:m,videoCodec:f,defaultInitPts:g,duration:v,initSegmentData:y}=s,b=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(o,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(o,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(o,b.key.buffer,b.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return i.executeEnd=Mee(),Hee(n);o=new Uint8Array(t)}}const w=this.needsProbing(c,u);if(w){const e=this.configureTransmuxer(o);if(e)return V5.warn(`[transmuxer] ${e.message}`),this.observer.emit(O5.ERROR,O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Mee(),Hee(n)}(c||u||p||w)&&this.resetInitSegment(y,m,f,v,t),(c||p||w)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const x=this.transmux(o,b,h,d,n),E=this.currentTransmuxState;return E.contiguous=!0,E.discontinuity=!1,E.trackSwitch=!1,i.executeEnd=Mee(),x}flush(e){const t=e.transmuxing;t.executeStart=Mee();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return i.then((()=>this.flush(e)));const o=[],{timeOffset:a}=r;if(n){const t=n.flush();t&&o.push(this.push(t,null,e))}const{demuxer:s,remuxer:l}=this;if(!s||!l)return t.executeEnd=Mee(),[Hee(e)];const c=s.flush(a);return qee(c)?c.then((t=>(this.flushRemux(o,t,e),o))):(this.flushRemux(o,c,e),o)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:o,textTrack:a}=t,{accurateTimeOffset:s,timeOffset:l}=this.currentTransmuxState;V5.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const c=this.remuxer.remux(r,i,o,a,l,s,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=Mee()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:o,remuxer:a}=this;o&&a&&(o.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let o;return o=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),o}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:s}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,s,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r,vendor:i}=this;let o;for(let d=0,h=Wee.length;d<h;d++){var a;if(null!=(a=Wee[d].demux)&&a.probe(e)){o=Wee[d];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,l=this.remuxer,c=o.remux,u=o.demux;l&&l instanceof c||(this.remuxer=new c(n,t,r,i)),s&&s instanceof u||(this.demuxer=new u(n,t,r),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new R7(this.config)),e}}const Hee=e=>({remuxResult:{},chunkMeta:e});function qee(e){return"then"in e&&e.then instanceof Function}class Gee{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class Kee{constructor(e,t,n,r,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=o}}var Yee={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Yee);var Xee=A5(Yee.exports);class Qee{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const o=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===O5.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new Xee,this.observer.on(O5.FRAG_DECRYPTED,o),this.observer.on(O5.ERROR,o);const a=w6(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},s={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!==typeof Worker){if(i.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(V5.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(i.workerPath)):(V5.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error(`${e.message}  (${e.filename}:${e.lineno})`);i.enableWorker=!1,V5.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(O5.ERROR,{type:N5.OTHER_ERROR,details:j5.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:s,vendor:"",id:t,config:JSON.stringify(i)})}catch(wye){V5.warn(`Error setting up "${t}" Web Worker, fallback to inline`,wye),this.resetWorker(),this.error=null,this.transmuxer=new zee(this.observer,s,i,"",t)}return}}this.transmuxer=new zee(this.observer,s,i,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,r,i,o,a,s,l,c){var u,d;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=o?o.start:i.start,m=i.decryptdata,f=this.frag,g=!(f&&i.cc===f.cc),v=!(f&&l.level===f.level),y=f?l.sn-f.sn:-1,b=this.part?l.part-this.part.index:-1,w=0===y&&l.id>1&&l.id===(null==f?void 0:f.stats.chunkCount),x=!v&&(1===y||0===y&&(1===b||w&&b<=0)),E=self.performance.now();(v||y||0===i.stats.parsing.start)&&(i.stats.parsing.start=E),!o||!b&&x||(o.stats.parsing.start=E);const A=!(f&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=f.initSegment)?void 0:d.url)),S=new Kee(g,x,s,v,p,A);if(!x||g||A){V5.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${v}\n        contiguous: ${x}\n        accurateTimeOffset: ${s}\n        timeOffset: ${p}\n        initSegmentChange: ${A}`);const e=new Gee(n,r,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,m,l,S);qee(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);qee(n)||t.async?(qee(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(null==t||!t.event)return void V5.warn("worker message received with no "+(t?"event name":"data"));const n=this.hls;if(this.hls)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":V5[t.data.logType]&&V5[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function Jee(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Zee(e[n].attrs,t[n].attrs))return!1;return!0}function Zee(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((n=>e[n]!==t[n]))}function ete(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class tte{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}class nte{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(Rb){V5.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${Rb}`),n.onError(Rb);const r=this.buffers[e];null!=r&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const rte=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function ite(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}const ote={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ate=e=>String.fromCharCode(ote[e]||e),ste=15,lte=100,cte={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ute={17:2,18:4,21:6,22:8,23:10,19:13,20:15},dte={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},hte={25:2,26:4,29:6,30:8,31:10,27:13,28:15},pte=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class mte{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"===typeof t?t():t;V5.log(`${this.time} [${e}] ${n}`)}}}const fte=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class gte{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class vte{constructor(){this.uchar=" ",this.penState=new gte}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class yte{constructor(e){this.chars=[],this.pos=0,this.currPenState=new gte,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<lte;t++)this.chars.push(new vte);this.logger=e}equals(e){for(let t=0;t<lte;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<lte;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<lte;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>lte&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=lte)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=ate(e);this.pos>=lte?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<lte;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<lte;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class bte{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ste;t++)this.rows.push(new yte(e));this.logger=e}reset(){for(let e=0;e<ste;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<ste;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<ste;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ste;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<ste;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(n.rows[e+o])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<ste;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class wte{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new bte(n),this.nonDisplayedMemory=new bte(n),this.lastOutputScreen=new bte(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class xte{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new mte;this.channels=[null,new wte(e,t,r),new wte(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,o=null;if(0===e&&0===r)continue;this.logger.log(3,(()=>"["+fte([t[n],t[n+1]])+"] -> ("+fte([e,r])+")"));const a=this.cmdHistory;if(e>=16&&e<=31){if(Ate(e,r,a)){Ete(null,null,a),this.logger.log(3,(()=>"Repeated command ("+fte([e,r])+") is dropped"));continue}Ete(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else Ete(null,null,a);if(!i&&(o=this.parseChars(e,r),o)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(o)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||o||this.logger.log(2,(()=>"Couldn't parse cleaned data "+fte([e,r])+" orig: "+fte([t[n],t[n+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+fte([e,t])+")")),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?cte[e]:dte[e]:1===r?ute[e]:hte[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,(()=>"Special char '"+ate(e)+"' in channel "+n)),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,(()=>"Char codes =  "+fte(r).join(","))),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=pte[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Ete(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Ete(e,t,n){n.a=e,n.b=t}function Ate(e,t,n){return n.a===e&&n.b===t}class Ste{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Tte=function(){if(null!=o9&&o9.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const n in t)e[n]=t[n]}return e}function o(t,o,a){const s=this,l={enumerable:!0};s.hasBeenReset=!1;let c="",u=!1,d=t,h=o,p=a,m=null,f="",g=!0,v="auto",y="start",b=50,w="middle",x=50,E="middle";Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return f},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");f=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return x},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class _te{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function kte(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class Cte{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Ite(e,t,n,r){const i=r?e.split(r):[e];for(const o in i){if("string"!==typeof i[o])continue;const e=i[o].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const Rte=new Tte(0,0,""),Dte="middle"===Rte.align?"middle":"center";function Lte(e,t,n){const r=e;function i(){const t=kte(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),o(),t.endTime=i(),o(),function(e,t){const r=new Cte;Ite(e,(function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",Dte,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",Dte,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",Dte,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===Rte.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",Dte);let o=r.get("position","auto");"auto"===o&&50===Rte.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function Pte(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Mte{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new _te,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=Pte(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=n(),t.state){case"HEADER":/:/.test(e)?Ite(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new Tte(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Lte(e,t.cue,t.regionList)}catch(XA){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(XA){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(XA){e.onparsingerror&&e.onparsingerror(XA)}return e.onflush&&e.onflush(),this}}const Ote=/\r\n|\n\r|\n|\r/g,Nte=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(n,n+t.length)===t},jte=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function Fte(e,t,n){return jte(e.toString())+jte(t.toString())+jte(n)}function Ute(e,t,n,r,i,o,a){const s=new Mte,l=j9(new Uint8Array(e)).trim().replace(Ote,"\n").split("\n"),c=[],u=t?function(e){return Lee(e,9e4,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,h="00:00.000",p=0,m=0,f=!0;s.oncue=function(e){const o=n[r];let a=n.ccOffset;const s=(p-u)/9e4;if(null!=o&&o.new&&(void 0!==m?a=n.ccOffset=o.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(o=i)&&o.new;){var o;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,s)),s){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=s-n.presentationOffset}const l=e.endTime-e.startTime,h=Fee(9e4*(e.startTime+a-m),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const f=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(f)),e.id||(e.id=Fte(e.startTime,e.endTime,f)),e.endTime>0&&c.push(e)},s.onparsingerror=function(e){d=e},s.onflush=function(){d?a(d):o(c)},l.forEach((e=>{if(f){if(Nte(e,"X-TIMESTAMP-MAP=")){f=!1,e.slice(16).split(",").forEach((e=>{Nte(e,"LOCAL:")?h=e.slice(6):Nte(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{m=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!L5(t)||!L5(n)||!L5(r)||!L5(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(h)/1e3}catch(Rb){d=Rb}return}""===e&&(f=!1)}s.parse(e+"\n")})),s.flush()}const Bte="stpp.ttml.im1t",$te=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Vte=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Wte={left:"start",center:"center",right:"end",start:"start",end:"end"};function zte(e,t,n,r){const i=X9(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const o=i.map((e=>j9(e))),a=function(e,t){return Lee(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{o.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(i).reduce(((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e)),{}),a="preserve"!==r.getAttribute("xml:space"),s=qte(Hte(r,"styling","style")),l=qte(Hte(r,"layout","region")),c=Hte(r,"body","[begin]");return[].map.call(c,(e=>{const n=Gte(e,a);if(!n||!e.hasAttribute("begin"))return null;const r=Xte(e.getAttribute("begin"),o),i=Xte(e.getAttribute("dur"),o);let c=Xte(e.getAttribute("end"),o);if(null===r)throw Yte(e);if(null===c){if(null===i)throw Yte(e);c=r+i}const u=new Tte(r-t,c-t,n);u.id=Fte(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(i=n[a]);return o.reduce(((n,o)=>{const a=Kte(t,r,o)||Kte(e,r,o)||Kte(i,r,o);return a&&(n[o]=a),n}),{})}(l[e.getAttribute("region")],s[e.getAttribute("style")],s),{textAlign:h}=d;if(h){const e=Wte[h];e&&(u.lineAlign=e),u.align=h}return D5(u,d),u})).filter((e=>null!==e))}(e,a))))}catch(Rb){r(Rb)}}function Hte(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function qte(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function Gte(e,t){return[].slice.call(e.childNodes).reduce(((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?Gte(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function Kte(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Yte(e){return new Error(`Could not parse ttml timestamp ${e}`)}function Xte(e,t){if(!e)return null;let n=kte(e);return null===n&&($te.test(e)?n=function(e,t){const n=$te.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):Vte.test(e)&&(n=function(e,t){const n=Vte.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}function Qte(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Jte(e,t){return!!e&&e.kind===Qte(t)&&ete(t,e)}class Zte{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(O5.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(O5.BUFFER_CODECS,this.onBufferCodecs,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(O5.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(O5.BUFFER_CODECS,this.onBufferCodecs,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&L5(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&V5.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,Zte.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(XA){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let r=e.length-1;const i=Math.max(t,n);for(let s=0;s<e.length;s+=1){const t=e[s];if((t.width>=i||t.height>=i)&&(o=t,!(a=e[s+1])||o.width!==a.width||o.height!==a.height)){r=s;break}}var o,a;return r}}const ene="[eme]";class tne{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=tne.CDMCleanupPromise?[tne.CDMCleanupPromise]:[],this.debug=V5.debug.bind(V5,ene),this.log=V5.log.bind(V5,ene),this.warn=V5.warn.bind(V5,ene),this.error=V5.error.bind(V5,ene),this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=y9(this.config));const t=e.map(v9).filter((e=>!!e));this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then((i=>{const o=d9(i);let a,s;if("sinf"===t){if(o!==a9.FAIRPLAY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${o}`);const i=z9(new Uint8Array(n));try{const e=r6(n9(JSON.parse(i).sinf));if(!e)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=e.subarray(8,24),s=a9.FAIRPLAY}catch(Rb){return void this.warn(`${r} Failed to parse sinf: ${Rb}`)}}else{if(o!==a9.WIDEVINE&&o!==a9.PLAYREADY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${o}`);const i=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=d6(new DataView(e,r));t.push(n),r+=n.size}}return t}(n),l=i.filter((e=>!!e.systemId&&g9(e.systemId)===o));l.length>1&&this.warn(`${r} Using first of ${l.length} pssh found for selected key-system ${o}`);const c=l[0];if(!c)return void(0===i.length||i.some((e=>!e.systemId))?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${i.map((e=>g9(e.systemId))).join(",")} pssh data in favor of playlist keys`));if(s=g9(c.systemId),0===c.version&&c.data)if(s===a9.WIDEVINE){const e=c.data.length-22;a=c.data.subarray(e,e+16)}else s===a9.PLAYREADY&&(a=x9(c.data))}if(!s||!a)return void this.log(`Unable to handle ${r} with key-system ${o}`);const l=B9(a),{keyIdToKeySessionPromise:c,mediaKeySessions:u}=this;let d=c[l];for(let e=0;e<u.length;e++){const r=u[e],i=r.decryptdata;if(!i.keyId)continue;const o=B9(i.keyId);if(l===o||-1!==i.uri.replace(/-/g,"").indexOf(l)){if(d=c[o],i.pssh)break;delete c[o],i.pssh=new Uint8Array(n),i.keyId=a,d=c[l]=d.then((()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match"))),d.catch((e=>this.handleError(e)));break}}if(!d){if(s!==o)return void this.log(`Ignoring "${r}" with ${s} init data for selected key-system ${o}`);d=c[l]=this.getKeySystemSelectionPromise([s]).then((e=>{let{keySystem:r,mediaKeys:i}=e;var o;this.throwIfDestroyed();const s=new p6("ISO-23001-7",l,null!=(o=v9(r))?o:"");return s.pssh=new Uint8Array(n),s.keyId=a,this.attemptSetMediaKeys(r,i).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({decryptdata:s,keySystem:r,mediaKeys:i});return this.generateRequestWithPreferredKeySession(e,t,n,"encrypted-event-no-match")}))})),d.catch((e=>this.handleError(e)))}}))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(O5.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(O5.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(O5.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(O5.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];return r?r.licenseUrl:e===a9.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map((e=>e.audioCodec)).filter(n),i=t.map((e=>e.videoCodec)).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise(((t,n)=>{const o=e=>{const a=e.shift();this.getMediaKeysPromise(a,r,i).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?o(e):n(t instanceof nne?t:new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};o(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!==typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===b9&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=function(e,t,n,r){let i;switch(e){case a9.FAIRPLAY:i=["cenc","sinf"];break;case a9.WIDEVINE:case a9.PLAYREADY:i=["cenc"];break;case a9.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null})))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=null==i?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),o=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),o.then((n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),r.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return o.then((()=>i.mediaKeys))}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:n,mediaKeys:r}=e;this.log(`Creating key-system session "${n}" keyId: ${B9(t.keyId||[])}`);const i=r.createSession(),o={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return B9(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${B9((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const r=y9(this.config),i=e.map(d9).filter((e=>!!e&&-1!==r.indexOf(e)));return this.getKeySystemSelectionPromise(i).then((e=>{let{keySystem:r}=e;const i=v9(r);i?t(i):n(new Error(`Unable to find format for key-system "${r}"`))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let i=this.keyIdToKeySessionPromise[n];return i||(i=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((n=>{let{keySystem:i,mediaKeys:o}=n;return this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(i,o).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:o,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))})),i.catch((e=>this.handleError(e)))),i}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof nne?this.hls.trigger(O5.ERROR,e.data):this.hls.trigger(O5.ERROR,{type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=d9(e.keyFormat),n=t?[t]:y9(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=y9(this.config)),0===e.length)throw new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,r){var i,o;const a=null==(i=this.config.drmSystems)||null==(o=i[e.keySystem])?void 0:o.generateRequest;if(a)try{const r=a.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=e.decryptdata.pssh=r.initData?new Uint8Array(r.initData):null}catch(Rb){var s;if(this.warn(Rb.message),null!=(s=this.hls)&&s.config.debug)throw Rb}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const c=new Xee,u=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void c.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===r?e.keySystem===a9.FAIRPLAY&&(this.updateKeySession(e,i9("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${r}"`)},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;c.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",d);const h=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>h)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${B9("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${B9(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise(((i,o)=>{const a={responseType:"arraybuffer",url:r},s=t.certLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,s)=>{o(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:C5({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{o(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{o(new Error("aborted"))}};n.load(a,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((r,i)=>{e.setServerCertificate(n).then((i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),r(e)})).catch((e=>{i(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var o,a;t=i[n];const r=null==(o=t.querySelector("name"))?void 0:o.textContent,s=null==(a=t.querySelector("value"))?void 0:a.textContent;r&&s&&e.setRequestHeader(r,s)}}const s=r.querySelector("Challenge"),l=null==s?void 0:s.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return i9(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)})).catch((o=>{if(!n.decryptdata)throw o;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((r,i)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,o,e)}catch(Rb){this.error(Rb)}r(t)}else{const s=n.errorRetry,l=s?s.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new nne({type:N5.KEY_SYSTEM_ERROR,details:j5.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,t).then((t=>{let{xhr:n,licenseChallenge:r}=t;e.keySystem==a9.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(n,r)),n.send(r)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},p6.clearKeyUriToKeyIdMap();const n=t.length;tne.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log(`Could not clear media keys: ${e}`)})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,t){let{sessionKeys:n}=t;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){const e=n.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}tne.CDMCleanupPromise=void 0;class nne extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var rne,ine,one;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(rne||(rne={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(ine||(ine={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(one||(one={}));const ane={[one.OBJECT]:["br","d","ot","tb"],[one.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[one.SESSION]:["cid","pr","sf","sid","st","v"],[one.STATUS]:["bs","rtp"]};class sne{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof sne?e:new sne(e)))),this.value=e,this.params=t}}class lne{constructor(e){this.description=void 0,this.description=e}}function cne(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"===typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}const une="Bare Item";const dne=/[\x00-\x1f\x7f]+/;function hne(e,t,n){return cne("serialize",e,t,n)}function pne(e){if(!1===ArrayBuffer.isView(e))throw hne(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function mne(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw hne(e,"Integer");return e.toString()}function fne(e,t){if(e<0)return-fne(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2===0?t:t+1)/n}return Math.round(e*n)/n}function gne(e){const t=fne(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw hne(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}function vne(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw hne(t,"Token");return t}function yne(e){switch(typeof e){case"number":if(!L5(e))throw hne(e,une);return Number.isInteger(e)?mne(e):gne(e);case"string":return function(e){if(dne.test(e))throw hne(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return vne(e);case"boolean":return function(e){if("boolean"!==typeof e)throw hne(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${mne(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return pne(e);if(e instanceof lne)return vne(e);default:throw hne(e,une)}}function bne(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw hne(e,"Key");return e}function wne(e){return null==e?"":Object.entries(e).map((e=>{let[t,n]=e;return!0===n?`;${bne(t)}`:`;${bne(t)}=${yne(n)}`})).join("")}function xne(e){return e instanceof sne?`${yne(e.value)}${wne(e.params)}`:yne(e)}function Ene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!==typeof e)throw hne(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=null!=t&&t.whitespace?" ":"";return Array.from(n).map((e=>{let[t,n]=e;n instanceof sne===!1&&(n=new sne(n));let r=bne(t);var i;return!0===n.value?r+=wne(n.params):(r+="=",Array.isArray(n.value)?r+=`(${(i=n).value.map(xne).join(" ")})${wne(i.params)}`:r+=xne(n)),r})).join(`,${r}`)}const Ane=e=>Math.round(e),Sne=e=>100*Ane(e/100),Tne={br:Ane,d:Ane,bl:Sne,dl:Sne,mtp:Sne,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:Sne,tb:Ane};function _ne(e,t){const n={};if(null==e||"object"!==typeof e)return n;const r=Object.keys(e).sort(),i=D5({},Tne,null==t?void 0:t.formatters),o=null==t?void 0:t.filter;return r.forEach((r=>{if(null!=o&&o(r))return;let a=e[r];const s=i[r];s&&(a=s(a,t)),"v"===r&&1===a||"pr"==r&&1===a||(e=>"number"===typeof e?L5(e):null!=e&&""!==e&&!1!==e)(a)&&((e=>"ot"===e||"sf"===e||"st"===e)(r)&&"string"===typeof a&&(a=new lne(a)),n[r]=a)})),n}function kne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?function(e,t){return Ene(e,t)}(_ne(e,t),D5({whitespace:!1},t)):""}function Cne(e,t,n){return D5(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};const n=Object.entries(e),r=Object.entries(ane).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),i=n.reduce(((e,t)=>{var n;const[i,o]=t,a=(null==(n=r.find((e=>e[1].includes(i))))?void 0:n[0])||one.REQUEST;return null!=e[a]||(e[a]={}),e[a][i]=o,e}),{});return Object.entries(i).reduce(((e,n)=>{let[r,i]=n;return e[r]=kne(i,t),e}),{})}(t,n))}const Ine=/CMCD=[^&#]+/;function Rne(e,t,n){const r=function(e){if(!e)return"";const t=kne(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return`CMCD=${encodeURIComponent(t)}`}(t,n);if(!r)return e;if(Ine.test(e))return e.replace(Ine,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}function Dne(e,t,n,r){e&&Object.keys(t).forEach((i=>{const o=e.filter((e=>e.groupId===i)).map((e=>{const o=D5({},e);return o.details=void 0,o.attrs=new H5(o.attrs),o.url=o.attrs.URI=Lne(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=t[i],o.attrs["PATHWAY-ID"]=r,o}));e.push(...o)}))}function Lne(e,t,n,r){const{HOST:i,PARAMS:o,[n]:a}=r;let s;t&&(s=null==a?void 0:a[t],s&&(e=s));const l=new self.URL(e);return i&&!s&&(l.host=i),o&&Object.keys(o).sort().forEach((e=>{e&&l.searchParams.set(e,o[e])})),l.href}const Pne=/^age:\s*[\d.]+\s*$/im;class Mne{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new K5,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then((()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)})).catch((e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)})).then((()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,r)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&L5(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,o="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=o?o:t.response;if(null!=i){n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;if(n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const a=this.callbacks.onProgress;if(a&&a(n,e,i,t),!this.callbacks)return;const s={url:t.responseURL,data:i,code:r};return void this.callbacks.onSuccess(s,n,e,t)}}const a=i.loadPolicy.errorRetry;O8(a,n.retry,!1,{url:e.url,data:void 0,code:r})?this.retry(a):(V5.error(`${r} while loading ${e.url}`),this.callbacks.onError({code:r,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(O8(e,this.stats.retry,!0))this.retry(e);else{var t;V5.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=P8(e,n.retry),n.retry++,V5.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Pne.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const One=/(\d+)-(\d+)\/(\d+)/;class Nne{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||jne,this.controller=new self.AbortController,this.stats=new K5}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(D5({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),o=n.onProgress,a="arraybuffer"===e.responseType,s=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=l&&L5(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),t.timeout),self.fetch(this.request).then((i=>{this.response=this.loader=i;const s=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),c-(s-r.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new Fne(t||"fetch, bad network response",e,i)}return r.loading.first=s,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=One.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(L5(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(i.headers)||r.total,o&&L5(t.highWaterMark)?this.loadProgressively(i,r,e,t.highWaterMark,o):a?i.arrayBuffer():"json"===e.responseType?i.json():i.text()})).then((i=>{const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=i[s];l&&(r.loaded=r.total=l);const c={url:a.url,data:i,code:a.status};o&&!L5(t.highWaterMark)&&o(r,e,i,a),n.onSuccess(c,r,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,o=t?t.message:null;n.onError({code:i,text:o},e,t?t.details:null,r)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const o=new H7,a=e.body.getReader(),s=()=>a.read().then((a=>{if(a.done)return o.dataLength&&i(t,n,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<r||o.dataLength?(o.push(l),o.dataLength>=r&&i(t,n,o.flush(),e)):i(t,n,l,e),s()})).catch((()=>Promise.reject()));return s()}}function jne(e,t){return new self.Request(e.url,t)}class Fne extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Une=/\s/,Bne={newCue(e,t,n,r){const i=[];let o,a,s,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(o=r.rows[h],s=!0,l=0,c="",!o.isEmpty()){var d;for(let e=0;e<o.chars.length;e++)Une.test(o.chars[e].uchar)&&s?l++:(c+=o.chars[e].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=Pte(c.trim()),p=Fte(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||(a=new u(t,n,r),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),i.forEach((t=>t8(e,t)))),i}},$ne=C5(C5({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Mne,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:r,media:i}=n;if(!e||!i)return;const o=performance.now(),a=t?t.stats:e.stats,s=t?t.duration:e.duration,l=o-a.loading.start,c=n.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||e.level<=c)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r||i.paused||!i.playbackRate||!i.readyState)return;const u=n.mainForwardBufferInfo;if(null===u)return;const d=this.bwEstimator.getEstimateTTFB(),h=Math.abs(i.playbackRate);if(l<=Math.max(d,s/(2*h)*1e3))return;const p=u.len/h,m=a.loading.first?a.loading.first-a.loading.start:-1,f=a.loaded&&m>-1,g=this.getBwEstimate(),v=n.levels,y=v[e.level],b=a.total||Math.max(a.loaded,Math.round(s*y.averageBitrate/8));let w=f?l-m:l;w<1&&f&&(w=Math.min(l,8*a.loaded/g));const x=f?1e3*a.loaded/w:0,E=x?(b-a.loaded)/x:8*b/g+d/1e3;if(E<=p)return;const A=x?8*x:g;let S,T=Number.POSITIVE_INFINITY;for(S=e.level-1;S>c;S--){const e=v[S].maxBitrate;if(T=this.getTimeToLoadFrag(d/1e3,A,s*e,!v[S].details),T<p)break}if(T>=E)return;if(T>10*s)return;n.nextLoadLevel=n.nextAutoLevel=S,f?this.bwEstimator.sample(l-Math.min(d,m),a.loaded):this.bwEstimator.sampleTTFB(l);const _=v[S].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>_&&this.resetEstimator(_),this.clearTimer(),V5.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${p.toFixed(3)} s\n      Estimated load time for current fragment: ${E.toFixed(3)} s\n      Estimated load time for down switch fragment: ${T.toFixed(3)} s\n      TTFB estimate: ${0|m} ms\n      Current BW estimate: ${L5(g)?0|g:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${S} @ ${0|_} bps`),n.trigger(O5.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(V5.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Y8(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.FRAG_LOADING,this.onFragLoading,this),e.on(O5.FRAG_LOADED,this.onFragLoaded,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.on(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.on(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(O5.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(O5.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.FRAG_LOADING,this.onFragLoading,this),e.off(O5.FRAG_LOADED,this.onFragLoaded,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.off(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.off(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(O5.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(O5.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case j5.BUFFER_ADD_CODEC_ERROR:case j5.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case j5.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,o=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&o>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,o),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.start;L5(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,t){let{frag:n,part:r}=t;const i=r?r.stats:n.stats;if(n.type===K6&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:n.duration,t=this.hls.levels[n.level],o=(t.loaded?t.loaded.bytes:0)+i.loaded,a=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:o,duration:a},t.realBitrate=Math.round(8*o/a)}if(n.bitrateTest){const e={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(O5.FRAG_BUFFERED,e),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==K6||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const o=this.hls.firstLevel,a=Math.min(Math.max(o,t),e);return V5.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:r,config:i,minAutoLevel:o}=n,a=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(s,o,r,l,0,c,u);if(e>=0)return e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,V5.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1}}const h=this.findBestLevel(s,o,r,l,d,c,u);if(V5.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const p=n.levels[o],m=n.levels[n.loadLevel];return(null==p?void 0:p.bitrate)<(null==m?void 0:m.bitrate)?o:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,o,a){var s;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:p,allAudioTracks:m,loadLevel:f,config:g}=this.hls;if(1===p.length)return 0;const v=p[u],y=!(null==v||null==(s=v.details)||!s.live),b=-1===f||-1===c;let w,x="SDR",E=(null==v?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:S}=g,T=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(m));if(b){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce(((e,n)=>{if(!n.codecSet)return e;const r=n.audioGroups;let i=e[n.codecSet];i||(e[n.codecSet]=i={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!r,fragmentError:0}),i.minBitrate=Math.min(i.minBitrate,n.bitrate);const o=Math.min(n.height,n.width);return i.minHeight=Math.min(i.minHeight,o),i.minFramerate=Math.min(i.minFramerate,n.frameRate),i.maxScore=Math.max(i.maxScore,n.score),i.fragmentError+=n.fragmentError,i.videoRanges[n.videoRange]=(i.videoRanges[n.videoRange]||0)+1,r&&r.forEach((e=>{if(!e)return;const n=t.groups[e];n&&(i.hasDefaultAudio=i.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach((e=>{i.channels[e]=(i.channels[e]||0)+n.channels[e]})))})),e}),{})}(p,T,t,n)),i=function(e,t,n,r,i){const o=Object.keys(e),a=null==r?void 0:r.channels,s=null==r?void 0:r.audioCodec,l=a&&2===parseInt(a);let c=!0,u=!1,d=1/0,h=1/0,p=1/0,m=0,f=[];const{preferHDR:g,allowedVideoRanges:v}=e7(t,i);for(let w=o.length;w--;){const t=e[o[w]];c=t.channels[2]>0,d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),p=Math.min(p,t.minBitrate);const n=v.filter((e=>t.videoRanges[e]>0));n.length>0&&(u=!0,f=n)}d=L5(d)?d:0,h=L5(h)?h:0;const y=Math.max(1080,d),b=Math.max(30,h);return p=L5(p)?p:n,n=Math.max(p,n),u||(t=void 0,f=[]),{codecSet:o.reduce(((t,r)=>{const i=e[r];if(r===t)return t;if(i.minBitrate>n)return t7(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return t7(r,"no renditions with default or auto-select sound found"),t;if(s&&r.indexOf(s.substring(0,4))%5!==0)return t7(r,`audio codec preference "${s}" not found`),t;if(a&&!l){if(!i.channels[a])return t7(r,`no renditions with ${a} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!s||l)&&c&&0===i.channels[2])return t7(r,"no renditions with stereo sound found"),t;return i.minHeight>y?(t7(r,`min resolution of ${i.minHeight} > maximum of ${y}`),t):i.minFramerate>b?(t7(r,`min framerate of ${i.minFramerate} > maximum of ${b}`),t):f.some((e=>i.videoRanges[e]>0))?i.maxScore<m?(t7(r,`max score of ${i.maxScore} < selected max of ${m}`),t):t&&(_6(r)>=_6(t)||i.fragmentError>e[t].fragmentError)?t:(m=i.maxScore,r):(t7(r,`no variants with VIDEO-RANGE of ${JSON.stringify(f)} found`),t)}),void 0),videoRanges:f,preferHDR:g,minFramerate:h,minBitrate:p}}(r,x,e,A,S),{codecSet:o,videoRanges:a,minFramerate:s,minBitrate:l,preferHDR:c}=i;w=o,x=c?a[a.length-1]:a[0],E=s,e=Math.max(e,l),V5.log(`[abr] picked start tier ${JSON.stringify(i)}`)}else w=null==v?void 0:v.codecSet,x=null==v?void 0:v.videoRange;const _=h?h.duration:d?d.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,C=[];for(let R=n;R>=t;R--){var I;const t=p[R],s=R>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"===typeof(null==n?void 0:n.decodingInfo)&&J8(t,T,x,E,e,A)?(t.supportedPromise=Z8(t,T,n),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?V5.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${JSON.stringify(e)}`):e.supported||(V5.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${r} ${JSON.stringify(e)}`),r>-1&&n.length>1&&(V5.log(`[abr] Removing unsupported level ${r}`),this.hls.removeLevel(r)))}))):t.supportedResult=X8}if(w&&t.codecSet!==w||x&&t.videoRange!==x||s&&E>t.frameRate||!s&&E>0&&E<t.frameRate||t.supportedResult&&(null==(I=t.supportedResult.decodingInfoResults)||!I[0].smooth)){C.push(R);continue}const d=t.details,m=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||_;let S;S=s?a*e:o*e;const D=_&&r>=2*_&&0===i?p[R].averageBitrate:p[R].maxBitrate,L=this.getTimeToLoadFrag(k,S,D*m,void 0===d);if(S>=D&&(R===c||0===t.loadError&&0===t.fragmentError)&&(L<=k||!L5(L)||y&&!this.bitrateTestDelay||L<l)){const e=this.forcedAutoLevel;return R===f||-1!==e&&e===f||(C.length&&V5.trace(`[abr] Skipped level(s) ${C.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[C[0]].codecs}" ${p[C[0]].videoRange}; not compatible with "${v.codecs}" ${x}`),V5.info(`[abr] switch candidate:${u}->${R} adjustedbw(${Math.round(S)})-bitrate=${Math.round(S-D)} ttfb:${k.toFixed(1)} avgDuration:${m.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${L.toFixed(1)} firstSelection:${b} codecSet:${w} videoRange:${x} hls.loadLevel:${f}`)),b&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,r=Math.min(Math.max(e,n),t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(O5.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&V5.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;const t="[buffer-controller]";var n;this.appendSource=(n=w6(e.config.preferManagedMediaSource),"undefined"!==typeof self&&n===self.ManagedMediaSource),this.log=V5.log.bind(V5,t),this.warn=V5.warn.bind(V5,t),this.error=V5.error.bind(V5,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.BUFFER_RESET,this.onBufferReset,this),e.on(O5.BUFFER_APPENDING,this.onBufferAppending,this),e.on(O5.BUFFER_CODECS,this.onBufferCodecs,this),e.on(O5.BUFFER_EOS,this.onBufferEos,this),e.on(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(O5.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(O5.FRAG_PARSED,this.onFragParsed,this),e.on(O5.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.BUFFER_RESET,this.onBufferReset,this),e.off(O5.BUFFER_APPENDING,this.onBufferAppending,this),e.off(O5.BUFFER_CODECS,this.onBufferCodecs,this),e.off(O5.BUFFER_EOS,this.onBufferEos,this),e.off(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(O5.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(O5.FRAG_PARSED,this.onFragParsed,this),e.off(O5.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new nte(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,r=w6(this.appendSource);if(n&&r){var i;const e=this.mediaSource=new r;this.log(`created media source: ${null==(i=e.constructor)?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{n.removeAttribute("src");const r=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||r&&e instanceof r,ite(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,t),n.load()}catch(Rb){n.src=t}else n.src=t;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(wye){this.warn(`onMediaDetaching: ${wye.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&ite(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(O5.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{var n;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(wye){this.warn(`onBufferReset ${e}`,wye)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"===typeof n.buffer.changeType){var r;const{id:i,codec:o,levelCodec:a,container:s,metadata:l}=t[e],c=R6(n.codec,n.levelCodec),u=null==c?void 0:c.replace(rte,"$1");let d=R6(o,a);const h=null==(r=d)?void 0:r.replace(rte,"$1");if(d&&u!==h){"audio"===e.slice(0,5)&&(d=I6(d,this.appendSource));const t=`${s};codecs=${d}`;this.appendChangeType(e,t),this.log(`switching codec ${c} to ${d}`),this.tracks[e]={buffer:n.buffer,codec:o,container:s,levelCodec:a,metadata:l,id:i}}}}else this.pendingTracks[e]=t[e]})),n)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(`${i} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,r={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log(`changing ${e} sourceBuffer type to ${t}`),r.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};n.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:r,tracks:i}=this,{data:o,type:a,frag:s,part:l,chunkMeta:c}=t,u=c.buffering[a],d=self.performance.now();u.start=d;const h=s.stats.buffering,p=l?l.stats.buffering:null;0===h.start&&(h.start=d),p&&0===p.start&&(p.start=d);const m=i.audio;let f=!1;"audio"===a&&"audio/mpeg"===(null==m?void 0:m.container)&&(f=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=s.start,v={execute:()=>{if(u.executeStart=self.performance.now(),f){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${s.sn})`),e.timestampOffset=g)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,n={};for(const r in t)n[r]=f7.getBuffered(t[r]);this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(O5.BUFFER_APPENDED,{type:a,frag:s,part:l,chunkMeta:c,parent:s.type,timeRanges:n})},onError:e=>{const t={type:N5.MEDIA_ERROR,parent:s.type,details:j5.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:s,part:l,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=j5.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[a];t.details=j5.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${n.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),e>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger(O5.ERROR,t)}};r.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:n}=this,r=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(O5.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?n.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(r(e),e)}))}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],o=r?r.elementaryStreams:n.elementaryStreams;o[Q5]?i.push("audiovideo"):(o[Y5]&&i.push("audio"),o[X5]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(O5.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})}),i)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const r=this.sourceBuffer[n];return!r||t.type&&t.type!==n||(r.ending=!0,r.ended||(r.ended=!0,this.log(`${n} sourceBuffer now EOS`))),e&&!(r&&!r.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,t){let{details:n}=t;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.getSourceBufferTypes().length)return;const r=e.config,i=n.currentTime,o=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(L5(a)&&a>0){const e=Math.max(a,o),t=Math.floor(i/o)*o-e;this.flushBackBuffer(i,o,t)}if(L5(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const e=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),t=Math.max(e,o),n=Math.floor(i/o)*o+t;this.flushFrontBuffer(i,o,n)}}flushBackBuffer(e,t,n){const{details:r,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((o=>{const a=i[o];if(a){const i=f7.getBuffered(a);if(i.length>0&&n>i.start(0)){if(this.hls.trigger(O5.BACK_BUFFER_REACHED,{bufferEnd:n}),null!=r&&r.live)this.hls.trigger(O5.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(a.ended&&i.end(i.length-1)-e<2*t)return void this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);this.hls.trigger(O5.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}}))}flushFrontBuffer(e,t,n){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach((i=>{const o=r[i];if(o){const r=f7.getBuffered(o),a=r.length;if(a<2)return;const s=r.start(a-1),l=r.end(a-1);if(n>s||e>=s&&e<=l)return;if(o.ended&&e-l<2*t)return void this.log(`Cannot flush ${i} front buffer while SourceBuffer is in ended state`);this.hls.trigger(O5.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:i})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:r}=this,i=e.fragments[0].start+e.totalduration,o=n.duration,a=L5(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>o||!L5(o))&&(this.log(`Updating Media Source duration to ${i.toFixed(3)}`),r.duration=i)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${r}-${i}.`),t.setLiveSeekableRange(r,i)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,r=Object.keys(n).length;if(r&&(!e||2===r||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(O5.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){var r;const o=e[i];if(!o)throw Error(`source buffer exists for track ${i}, however track does not`);let a=-1===(null==(r=o.levelCodec)?void 0:r.indexOf(","))?o.levelCodec:o.codec;a&&"audio"===i.slice(0,5)&&(a=I6(a,this.appendSource));const s=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${s})`);try{const e=t[i]=n.addSourceBuffer(s),r=i;this.addBufferListener(r,"updatestart",this._onSBUpdateStart),this.addBufferListener(r,"updateend",this._onSBUpdateEnd),this.addBufferListener(r,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(r,"bufferedchange",((e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(O5.BUFFER_FLUSHED,{type:i})})),this.tracks[i]={buffer:e,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(wye){this.error(`error while trying to add sourceBuffer: ${wye.message}`),this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:wye,sourceBufferName:i,mimeType:s})}}}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(r)}removeExecutor(e,t,n){const{media:r,mediaSource:i,operationQueue:o,sourceBuffer:a}=this,s=a[e];if(!r||!i||!s)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void o.shiftAndExecuteNext(e);const l=L5(r.duration)?r.duration:1/0,c=L5(i.duration)?i.duration:1/0,u=Math.max(0,t),d=Math.min(n,l,c);d>u&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),s.remove(u,d)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`)}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSourceBufferTypes();if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map((e=>n.appendBlocker(e)));Promise.all(r).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const r=this.sourceBuffer[e];if(!r)return;const i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:Zte,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=V5.log.bind(V5,"[info]:"),this.warn=V5.warn.bind(V5,"[warning]:"),this.error=V5.error.bind(V5,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(O5.ERROR,this.onError,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(O5.ERROR,this.onError,this),e.off(O5.ERROR,this.onErrorOut,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===K6?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,r;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case j5.FRAG_LOAD_ERROR:case j5.FRAG_LOAD_TIMEOUT:case j5.KEY_LOAD_ERROR:case j5.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case j5.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:B8,flags:z8});case j5.FRAG_GAP:case j5.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=$8);case j5.LEVEL_EMPTY_ERROR:case j5.LEVEL_PARSING_ERROR:{var a,s;const e=t.parent===K6?t.level:i.loadLevel;t.details===j5.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case j5.LEVEL_LOAD_ERROR:case j5.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==o?void 0:o.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level)));case j5.AUDIO_TRACK_LOAD_ERROR:case j5.AUDIO_TRACK_LOAD_TIMEOUT:case j5.SUBTITLE_LOAD_ERROR:case j5.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const e=i.levels[i.loadLevel];if(e&&(o.type===q6&&e.hasAudioGroup(o.groupId)||o.type===G6&&e.hasSubtitleGroup(o.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=$8,void(t.errorAction.flags=H8)}return;case j5.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=i.levels[i.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:$8,flags:q8,hdcpLevel:n}:this.keySystemError(t)}return;case j5.BUFFER_ADD_CODEC_ERROR:case j5.REMUX_ALLOC_ERROR:case j5.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:i.loadLevel));case j5.INTERNAL_EXCEPTION:case j5.BUFFER_APPENDING_ERROR:case j5.BUFFER_FULL_ERROR:case j5.LEVEL_SWITCH_ERROR:case j5.BUFFER_STALLED_ERROR:case j5.BUFFER_SEEK_OVER_HOLE:case j5.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:B8,flags:z8})}t.type===N5.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=L8(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(O8(n,r,D8(e),e.response))return{action:W8,flags:z8,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:o}=t.config,a=L8(e.details.startsWith("key")?o:i,e),s=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(r){e.details!==j5.FRAG_GAP&&r.fragmentError++;if(O8(a,s,D8(e),e.response))return{action:W8,flags:z8,retryConfig:a,retryCount:s}}const l=this.getLevelSwitchAction(e,n);return a&&(l.retryConfig=a,l.retryCount=s),l}getLevelSwitchAction(e,t){const n=this.hls;null!==t&&void 0!==t||(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,o;const t=e.details;r.loadError++,t===j5.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||(n.loadLevel=-1);const p=null==(i=e.frag)?void 0:i.type,m=(p===Y6&&t===j5.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===j5.BUFFER_ADD_CODEC_ERROR||t===j5.BUFFER_APPEND_ERROR))&&c.some((e=>{let{audioCodec:t}=e;return r.audioCodec!==t})),f="video"===e.sourceBufferName&&(t===j5.BUFFER_ADD_CODEC_ERROR||t===j5.BUFFER_APPEND_ERROR)&&c.some((e=>{let{codecSet:t,audioCodec:n}=e;return r.codecSet!==t&&r.audioCodec===n})),{type:g,groupId:v}=null!=(o=e.context)?o:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var a,s;const n=c[i];if(t===j5.FRAG_GAP&&p===K6&&e.frag){const t=c[i].details;if(t){const n=j8(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===q6&&n.hasAudioGroup(v)||g===G6&&n.hasSubtitleGroup(v))continue;if(p===Y6&&null!=(a=r.audioGroups)&&a.some((e=>n.hasAudioGroup(e)))||p===X6&&null!=(s=r.subtitleGroups)&&s.some((e=>n.hasSubtitleGroup(e)))||m&&r.audioCodec===n.audioCodec||!m&&r.audioCodec!==n.audioCodec||f&&r.codecSet===n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:$8,flags:z8,nextAutoLevel:l}}return{action:$8,flags:H8}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case B8:break;case $8:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===j5.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:i,nextAutoLevel:o}=n;switch(r){case z8:this.switchLevel(e,o);break;case q8:i&&(t.maxHdcpLevel=m8[m8.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,o)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(O5.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(O5.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,a=1e3*i/e,s=this.hls;if(s.trigger(O5.FPS_DROP,{currentDropped:i,currentDecoded:o,totalDroppedFrames:n}),a>0&&i>s.config.fpsDroppedMonitoringThreshold*o){let e=s.currentLevel;V5.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===s.autoLevelCapping||s.autoLevelCapping>=e)&&(e-=1,s.trigger(O5.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:s.currentLevel}),s.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:b9,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Bne,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends z7{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",X6),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.on(O5.ERROR,this.onError,this),e.on(O5.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(O5.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(O5.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(O5.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.off(O5.ERROR,this.onError,this),e.off(O5.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(O5.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(O5.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(O5.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=P7,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragPrevious=n,this.state=P7,!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=n.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){o=i[l];break}const s=n.start+n.duration;o?o.end=s:(o={start:a,end:s},i.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,X6)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==K6||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===X6&&(t.details===j5.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==L7&&(this.state=P7))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:n}=t;this.levels&&Jee(this.levels,n)?this.levels=n.map((e=>new x8(e))):(this.tracksBuffered=[],this.levels=n.map((e=>{const t=new x8(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,X6),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:o,id:a}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const s=i[a];if(a>=i.length||!s)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(o.live||null!=(n=s.details)&&n.live){const e=this.mainDetails;if(o.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;if(s.details)l=this.alignPlaylists(o,s.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,k8(o,l));else o.hasProgramDateTime&&e.hasProgramDateTime?(x7(o,e),l=o.fragments[0].start):t&&(l=t.start,k8(o,l))}if(s.details=o,this.levelLastLoaded=s,a===r&&(this.startFragRequested||!this.mainDetails&&o.live||this.setStartPosition(this.mainDetails||o,l),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===P7)){j8(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch((e=>{throw i.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const r=performance.now();i.trigger(O5.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=P7}))}}doTick(){if(this.media){if(this.state===P7){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:r}=this,i=this.getLoadPosition(),o=f7.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:a,len:s}=o,l=this.getFwdBufferInfo(this.media,K6),c=n.details;if(s>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const u=c.fragments,d=u.length,h=c.edge;let p=null;const m=this.fragPrevious;if(a<h){const e=r.maxFragLookUpTolerance,t=a>h-e?0:e;p=j8(m,u,Math.max(u[0].start,a),t),!p&&m&&m.start<u[0].start&&(p=u[0])}else p=u[d-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),"initSegment"!==p.sn){const e=u[p.sn-c.startSN-1];e&&e.cc===p.cc&&this.fragmentTracker.getState(e)===s7&&(p=e)}this.fragmentTracker.getState(p)===s7&&this.loadFragment(p,n,a)}}else this.state=P7}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new tte(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends G8{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=i8(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.LEVEL_LOADING,this.onLevelLoading,this),e.on(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(O5.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(O5.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.LEVEL_LOADING,this.onLevelLoading,this),e.off(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(O5.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(O5.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);i8(this.media.textTracks).forEach((e=>{n8(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==o?void 0:o.groupId}`);const a=o.details;o.details=t.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=n7(t,e);if(n>-1)i=e[n];else{const e=n7(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const o={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(O5.SUBTITLE_TRACKS_UPDATED,o),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||r7(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(Zee(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(Zee(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(ete(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==G6||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&r7(e,n))return n;const r=n7(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=n7(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(O5.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=i8(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter((e=>ete(n,e)))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")})),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!L5(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(O5.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:o,groupId:a="",name:s,type:l,url:c}=r;this.hls.trigger(O5.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:s,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(O5.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(O5.FRAG_LOADING,this.onFragLoading,this),e.on(O5.FRAG_LOADED,this.onFragLoaded,this),e.on(O5.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(O5.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(O5.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(O5.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(O5.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(O5.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(O5.FRAG_LOADING,this.onFragLoading,this),e.off(O5.FRAG_LOADED,this.onFragLoaded,this),e.off(O5.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(O5.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(O5.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(O5.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Ste(this,"textTrack1"),t=new Ste(this,"textTrack2"),n=new Ste(this,"textTrack3"),r=new Ste(this,"textTrack4");this.cea608Parser1=new xte(1,e,t),this.cea608Parser2=new xte(3,n,r)}}addCues(e,t,n,r,i){let o=!1;for(let u=i.length;u--;){const e=i[u],r=(a=e[0],s=e[1],l=t,c=n,Math.min(s,c)-Math.max(a,l));if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),o=!0,r/(n-t)>.5))return}var a,s,l,c;if(o||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(O5.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:o}=t;const{unparsedVttFrags:a}=this;"main"===r&&(this.initPTS[n.cc]={baseTime:i,timescale:o}),a.length&&(this.unparsedVttFrags=[],a.forEach((e=>{this.onFragLoaded(O5.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(Jte(i,{name:e,lang:t,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:o}=t[e],a=this.getExistingTrack(i,o);if(a)n[e]=a,n8(n[e]),e8(n[e],r);else{const t=this.createTextTrack("captions",i,o);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(O5.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{n8(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)n8(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some((e=>e.textCodec===Bte));if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Jee(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?i8(e.textTracks):null;if(this.tracks.forEach(((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&Jte(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)n8(r);else{const t=Qte(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&V5.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(O5.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===K6){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:o}=this,{cc:a,sn:s}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(s!==o+1||s===o&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=s,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===X6)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===Bte?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(O5.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;zte(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger(O5.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{V5.log(`Failed to parse IMSC1: ${t}`),n.trigger(O5.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[n.cc]&&-1===a)return void o.push(e);const s=this.hls;Ute(null!=(t=n.initSegment)&&t.data?o6(n.initSegment.data,new Uint8Array(r)):r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),s.trigger(O5.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?o.push(e):this._fallbackToIMSC1(n,r),V5.log(`Failed to parse VTT cue: ${t}`),i&&a>n.cc||s.trigger(O5.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||zte(t,this.initPTS[e.cc],(()=>{n.textCodec=Bte,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>t8(n,e)))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(O5.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===X6&&this.onFragLoaded(O5.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:r}=this;if(!this.enabled||!n||!r)return;const{frag:i,samples:o}=t;if(i.type!==K6||"NONE"!==this.closedCaptionsForLevel(i))for(let a=0;a<o.length;a++){const e=o[a].bytes;if(e){const t=this.extractCea608Data(e);n.addData(o[a].pts,t[0]),r.addData(o[a].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:o}=t;const{media:a}=this;if(a&&!(a.currentTime<r)){if(!o||"video"===o){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>r8(e[t],n,r)))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((t=>r8(e[t],n,i)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],o=127&e[r++];if(0===i&&0===o)continue;if(0!==(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(o))}}return t}},audioStreamController:class extends z7{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",Y6),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.on(O5.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(O5.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(O5.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(O5.ERROR,this.onError,this),e.on(O5.BUFFER_RESET,this.onBufferReset,this),e.on(O5.BUFFER_CREATED,this.onBufferCreated,this),e.on(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(O5.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(O5.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.off(O5.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(O5.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(O5.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(O5.ERROR,this.onError,this),e.off(O5.BUFFER_RESET,this.onBufferReset,this),e.off(O5.BUFFER_CREATED,this.onBufferCreated,this),e.off(O5.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(O5.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(O5.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:o}=t;if("main"===r){const e=n.cc;this.initPTS[n.cc]={baseTime:i,timescale:o},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===V7&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=L7);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=P7):(this.loadedmetadata=!1,this.state=j7),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case P7:this.doTickIdle();break;case j7:{var e;const{levels:t,trackId:n}=this,r=null==t||null==(e=t[n])?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=V7}break}case N7:{var t;const e=performance.now(),n=this.retryDate;if(!n||e>=n||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=P7}break}case V7:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=O7;const e={frag:t,part:n,payload:r.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=f7.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);F8(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${n.end} is needed`),this.clearWaitingFragment())}}else this.state=P7}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=P7)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:r}=this,i=e.config;if(!this.buffering||!n&&(this.startFragRequested||!i.startFragPrefetch)||null==t||!t[r])return;const o=t[r],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a))return void(this.state=j7);const s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,Y5,Y6));const l=this.getFwdBufferInfo(s,Y6);if(null===l)return;if(!this.switchingTrack&&this._streamEnded(l,a))return e.trigger(O5.BUFFER_EOS,{type:"audio"}),void(this.state=B7);const c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,K6),u=l.len,d=this.getMaxBufferLength(null==c?void 0:c.len),h=a.fragments,p=h[0].start,m=this.getLoadPosition(),f=this.flushing?m:l.end;if(this.switchingTrack&&n){const e=m;a.PTSKnown&&e<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}if(u>=d&&!this.switchingTrack&&f<h[h.length-1].start)return;let g=this.getNextFragment(f,a),v=!1;if(g&&this.isLoopLoading(g,f)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,a,l,K6,d)),!g)return void(this.bufferFlushed=!0);const y=c&&g.start>c.end+a.targetduration;if(y||(null==c||!c.len)&&l.len){const e=this.getAppendedFrag(g.start,K6);if(null===e)return;if(v||(v=!!e.gap||!!y&&0===c.len),y&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,o,f)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,t){let{audioTracks:n}=t;this.resetTransmuxer(),this.levels=n.map((e=>new x8(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=P7,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=L7),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(O5.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:r}=this,{details:i,id:o}=t;if(!r)return void this.warn(`Audio tracks were reset while loading level ${o}`);this.log(`Audio track ${o} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const a=r[o];let s=0;if(i.live||null!=(n=a.details)&&n.live){this.checkLiveUpdate(i);const e=this.mainDetails;if(i.deltaUpdateFailed||!e)return;var l;if(!a.details&&i.hasProgramDateTime&&e.hasProgramDateTime)x7(i,e),s=i.fragments[0].start;else s=this.alignPlaylists(i,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=i,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(this.mainDetails||i,s),this.state!==j7||this.waitForCdnTuneIn(i)||(this.state=P7),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{config:o,trackId:a,levels:s}=this;if(!s)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=s[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new Qee(this.hls,Y6,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,o=-1!==t,a=new g7(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,o);d.push(i,p,u,"",n,r,c.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new H7,complete:!1};e.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=V7}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===Y6)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(O5.AUDIO_TRACK_SWITCHED,C5({},e)))}this.fragBufferedComplete(n,r)}else if(!this.loadedmetadata&&n.type===K6){const e=this.videoBuffer||this.media;if(e){f7.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=$7;else switch(t.details){case j5.FRAG_GAP:case j5.FRAG_PARSING_ERROR:case j5.FRAG_DECRYPT_ERROR:case j5.FRAG_LOAD_ERROR:case j5.FRAG_LOAD_TIMEOUT:case j5.KEY_LOAD_ERROR:case j5.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Y6,t);break;case j5.AUDIO_TRACK_LOAD_ERROR:case j5.AUDIO_TRACK_LOAD_TIMEOUT:case j5.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==j7||(null==(n=t.context)?void 0:n.type)!==q6||(this.state=P7);break;case j5.BUFFER_APPEND_ERROR:case j5.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===j5.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case j5.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,t){let{type:n}=t;n!==X5&&(this.flushing=!0)}onBufferFlushed(e,t){let{type:n}=t;if(n!==X5){this.flushing=!1,this.bufferFlushed=!0,this.state===B7&&(this.state=P7);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,n,Y6),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a)return void this.resetWhenMissingContext(o);const{frag:s,part:l,level:c}=a,{details:u}=c,{audio:d,text:h,id3:p,initSegment:m}=i;if(!this.fragContextChanged(s)&&u){if(this.state=F7,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=m&&m.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,m.tracks,e,o),r.trigger(O5.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:m.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[Y5]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(Y5,e,t,n,r),this.bufferFragmentData(d,s,l,o)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=D5({id:n,frag:s,details:u},p);r.trigger(O5.FRAG_PARSING_METADATA,e)}if(h){const e=D5({id:n,frag:s,details:u},h);r.trigger(O5.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(s)}_bufferInitSegment(e,t,n,r){if(this.state!==F7)return;t.video&&delete t.video;const i=t.audio;if(!i)return;i.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${o}/${i.codec}]`),o&&1===o.split(",").length&&(i.levelCodec=o),this.hls.trigger(O5.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(O5.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.fragCurrent=e,this.switchingTrack||r===s7||r===c7)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=V7;const n=this.mainDetails;n&&n.fragments[0].start!==t.details.fragments[0].start&&x7(t.details,n)}else this.startFragRequested=!0,super.loadFragment(e,t,n);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:o,channels:a}=this.bufferedTrack;r7({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:o,channels:a},e,i7)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(O5.AUDIO_TRACK_SWITCHED,C5({},e))}},audioTrackController:class extends G8{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.LEVEL_LOADING,this.onLevelLoading,this),e.on(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(O5.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(O5.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.LEVEL_LOADING,this.onLevelLoading,this),e.off(O5.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(O5.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(O5.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==o?void 0:o.groupId}`);const a=o.details;o.details=t.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=n7(t,e,i7);if(n>-1)i=e[n];else{const e=n7(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(O5.AUDIO_TRACKS_UPDATED,a);const s=this.trackId;if(-1!==r&&-1===s)this.setAudioTrack(r);else if(e.length&&-1===s){var o;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(o=this.groupIds)?void 0:o.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==q6||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&r7(e,r,i7))return r;const i=n7(e,this.tracksInGroup,i7);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const o=t[r],a=t.reduce(((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e}),{})[o.uri];a.length>1&&(r=Math.max.apply(Math,a));const s=o.videoRange,l=o.frameRate,c=o.codecSet.substring(0,4),u=o7(t,r,(t=>{if(t.videoRange!==s||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const r=t.audioGroups,o=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return n7(e,o,i)>-1}));return u>-1?u:o7(t,r,(t=>{const r=t.audioGroups,o=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return n7(e,o,i)>-1}))}(e,t.levels,n,r,i7);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=n7(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(O5.AUDIO_TRACK_SWITCHING,C5({},r)),i)return;const o=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||r7(e,r,i7)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:o,audioCodec:a,channels:s}=e;for(let e=0;e<t.length;e++){if(r7({name:n,lang:r,assocLang:i,characteristics:o,audioCodec:a,channels:s},t[e],i7))return e}for(let l=0;l<t.length;l++){const n=t[l];if(Zee(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(Zee(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(O5.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}},emeController:tne,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:rne.MANIFEST,su:!this.initialized})}catch(Rb){V5.warn("Could not generate manifest CMCD data.",Rb)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],r=this.getObjectType(t),i={d:1e3*t.duration,ot:r};r!==rne.VIDEO&&r!==rne.AUDIO&&r!=rne.MUXED||(i.br=n.bitrate/1e3,i.tb=this.getTopBandwidth(r)/1e3,i.bl=this.getBufferLength(r)),this.apply(e,i)}catch(Rb){V5.warn("Could not generate segment CMCD data.",Rb)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||function(){try{return crypto.randomUUID()}catch(Rb){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(Rb){let t=(new Date).getTime();const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}));return n}}}(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHED,this.onMediaDetached,this),e.on(O5.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHED,this.onMediaDetached,this),e.off(O5.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:ine.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D5(t,this.createData());const n=t.ot===rne.INIT||t.ot===rne.VIDEO||t.ot===rne.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce(((e,n)=>(r.includes(n)&&(e[n]=t[n]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),Cne(e.headers,t)):e.url=Rne(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?rne.TIMED_TEXT:"initSegment"===e.sn?rne.INIT:"audio"===t?rne.AUDIO:"main"===t?this.hls.audioTracks.length?rne.VIDEO:rne.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===rne.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}for(const i of t)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===rne.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*f7.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=V5.log.bind(V5,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===$8&&n.flags===H8){const e=this.levels;let r=this.pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:o}=t.context;n&&e?i=this.getPathwayForGroupId(n,o,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),n.resolved||V5.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${JSON.stringify(r)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach((e=>{r-n[e]>3e5&&delete n[e]}));for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const o=this.hls.nextLoadLevel,a=this.hls.levels[o];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,R8(t),this.hls.trigger(O5.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[o];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===q6&&r[i].hasAudioGroup(e)||t===G6&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach((e=>{const{ID:i,"BASE-ID":o,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===i)))return;const s=this.getLevelsForPathway(o).map((e=>{const t=new H5(e.attrs);t["PATHWAY-ID"]=i;const o=t.AUDIO&&`${t.AUDIO}_clone_${i}`,s=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;o&&(n[t.AUDIO]=o,t.AUDIO=o),s&&(r[t.SUBTITLES]=s,t.SUBTITLES=s);const l=Lne(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new x8({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)c.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)c.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return c}));t.push(...s),Dne(this.audioTracks,n,a,i),Dne(this.subtitleTracks,r,a,i)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(Rb){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},s={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const o=e.data;if(1!==o.VERSION)return void this.log(`Steering VERSION ${o.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=o.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":s,"PATHWAY-PRIORITY":l}=o;if(a)try{this.uri=new self.URL(a,r).href}catch(Rb){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),s&&this.clonePathways(s);const c={steeringManifest:o,url:r.toString()};this.hls.trigger(O5.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,i);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,s,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}});function Vne(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(Vne):Object.keys(e).reduce(((t,n)=>(t[n]=Vne(e[n]),t)),{}):e}function Wne(e){const t=e.loader;if(t!==Nne&&t!==Mne)V5.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(XA){}return!1})()&&(e.loader=Nne,e.progressive=!0,e.enableSoftwareAES=!0,V5.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let zne;class Hne extends G8{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.on(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.on(O5.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.off(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this),e.off(O5.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},o={};let a=!1,s=!1,l=!1;t.levels.forEach((e=>{var t,c;const u=e.attrs;let{audioCodec:d,videoCodec:h}=e;-1!==(null==(t=d)?void 0:t.indexOf("mp4a.40.34"))&&(zne||(zne=/chrome|firefox/i.test(navigator.userAgent)),zne&&(e.audioCodec=d=void 0)),d&&(e.audioCodec=d=I6(d,n)),0===(null==(c=h)?void 0:c.indexOf("avc1"))&&(h=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");if(e.length>2){let r=e.shift()+".";r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t[n]=r}}return t.join(",")}(h));const{width:p,height:m,unknownCodecs:f}=e;if(a||(a=!(!p||!m)),s||(s=!!h),l||(l=!!d),null!=f&&f.length||d&&!E6(d,"audio",n)||h&&!E6(h,"video",n))return;const{CODECS:g,"FRAME-RATE":v,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":x}=u,E=`${`${b||"."}-`}${e.bitrate}-${w}-${v}-${g}-${x}-${y}`;if(i[E])if(i[E].uri===e.url||e.attrs["PATHWAY-ID"])i[E].addGroupId("audio",u.AUDIO),i[E].addGroupId("text",u.SUBTITLES);else{const t=o[E]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=new x8(e);i[E]=n,r.push(n)}else{const t=new x8(e);i[E]=t,o[E]=1,r.push(t)}})),this.filterAndSortMediaOptions(r,t,a,s,l)}filterAndSortMediaOptions(e,t,n,r,i){let o=[],a=[],s=e;if((n||r)&&i&&(s=s.filter((e=>{let{videoCodec:t,videoRange:n,width:r,height:i}=e;return(!!t||!(!r||!i))&&(!!(o=n)&&f8.indexOf(o)>-1);var o}))),0===s.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;o=t.audioTracks.filter((t=>!t.audioCodec||E6(t.audioCodec,"audio",e))),qne(o)}t.subtitles&&(a=t.subtitles,qne(a));const l=s.slice(0);s.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return f8.indexOf(e.videoRange)-f8.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=T6(e.videoCodec),r=T6(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=_6(e.codecSet),r=_6(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let c=l[0];if(this.steering&&(s=this.steering.filterParsedLevels(s),s.length!==l.length))for(let p=0;p<l.length;p++)if(l[p].pathwayId===s[0].pathwayId){c=l[p];break}this._levels=s;for(let p=0;p<s.length;p++)if(s[p]===c){var u;this._firstLevel=p;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${s.length} level(s) found, first bitrate: ${e}`),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===$ne.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const d=i&&!r,h={levels:s,audioTracks:o,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:!d&&o.some((e=>!!e.url))};this.hls.trigger(O5.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(O5.ERROR,{type:N5.OTHER_ERROR,details:j5.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,o=t[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&o.details&&r&&i===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${n}${i?" with Pathway "+i:""}`);const s={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(O5.LEVEL_SWITCHING,s);const l=o.details;if(!l||l.live){const e=this.switchParams(o.uri,null==r?void 0:r.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===H6&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,t){let{frag:n}=t;if(void 0!==n&&n.type===K6){const e=n.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const t=this._levels[n.level];null!=t&&t.loadError&&(this.log(`Resetting level error count of ${t.loadError} on frag buffered`),t.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,o=this._levels[r];var a;if(!o)return this.warn(`Invalid level index ${r}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let r=n.uri;if(e)try{r=e.addDirectives(r)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}const i=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${i?" Pathway "+i:""} ${r}`),this.clearTimer(),this.hls.trigger(O5.LEVEL_LOADING,{url:r,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter(((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));R8(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(O5.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,t){let{levels:n}=t;this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(O5.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function qne(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}class Gne{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j5.KEY_LOAD_ERROR,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return new _7({type:N5.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:r}=e;for(let e=0;e<t.length;e++){const i=t[e];if(r<=i.cc&&("initSegment"===n||"initSegment"===i.sn||n<i.sn)){this.emeController.selectKeySystemFormat(i).then((e=>{i.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,j5.KEY_LOAD_ERROR,n))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,j5.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if(null!=(n=a)&&n.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var s;if(null!=(r=a)&&r.keyLoadPromise)switch(null==(s=a.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,j5.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise(((i,o)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},s=n.keyLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:a,keyInfo:s,url:l}=n;if(!a.decryptdata||s!==this.keyUriToKeyInfo[l])return o(this.createKeyLoadError(a,j5.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));s.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,s.loader=null,i({frag:a,keyInfo:s})},onError:(e,n,r,i)=>{this.resetLoader(n),o(this.createKeyLoadError(t,j5.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,C5({url:a.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),o(this.createKeyLoadError(t,j5.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),o(this.createKeyLoadError(t,j5.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(a,l,c)}))}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],i&&i.destroy()}}function Kne(){return self.SourceBuffer||self.WebKitSourceBuffer}function Yne(){if(!w6())return!1;const e=Kne();return!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove}class Xne{constructor(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:r,stalled:i}=this;if(null===r)return;const{currentTime:o,seeking:a}=r,s=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),null!==i){if(this.stallReported){const e=self.performance.now()-i;V5.warn(`playback not stuck anymore @${o}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||s)return void(this.stalled=null);if(r.paused&&!a||r.ended||0===r.playbackRate||!f7.getBuffered(r).length)return void(this.nudgeRetry=0);const c=f7.bufferInfo(r,o,0),u=c.nextStart||0;if(a){const e=c.len>2,n=!u||t&&t.start<=o||u-o>2&&!this.fragmentTracker.getPartialFragment(o);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var d;if(!(c.len>0)&&!u)return;const e=Math.max(u,c.start||0)-o,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(d=t.details)?void 0:d.live)?2*t.details.targetduration:2,i=this.fragmentTracker.getPartialFragment(o);if(e>0&&(e<=n||i))return void(r.paused||this._trySkipBufferHole(i))}const h=self.performance.now();if(null===i)return void(this.stalled=h);const p=h-i;if(!a&&p>=250&&(this._reportStall(c),!this.media))return;const m=f7.bufferInfo(r,o,n.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:r,media:i}=this;if(null===i)return;const o=i.currentTime,a=r.getPartialFragment(o);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-o<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(V5.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:r}=this;if(!r&&n){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);V5.warn(r.message),t.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:r}=this;if(null===r)return 0;const i=r.currentTime,o=f7.bufferInfo(r,i,0),a=i<o.start?o.start:o.nextStart;if(a){const s=o.len<=t.maxBufferHole,l=o.len>0&&o.len<1&&r.readyState<3,c=a-i;if(c>0&&(s||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===i){const e=t.getAppendedFrag(0,K6);e&&a<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(i,K6);if(n){let e=!1,r=n.end;for(;r<a;){const n=t.getPartialFragment(r);if(!n){e=!0;break}r+=n.duration}if(e)return 0}}}const o=Math.max(a+.05,i+.1);if(V5.warn(`skipping hole, adjusting currentTime from ${i} to ${o}`),this.moved=!0,this.stalled=null,r.currentTime=o,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${o}`);n.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return o}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:r}=this;if(null===n)return;const i=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=i+(r+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${i} to ${o}`);V5.warn(a.message),n.currentTime=o,t.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const n=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);V5.error(n.message),t.trigger(O5.ERROR,{type:N5.MEDIA_ERROR,details:j5.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class Qne extends z7{constructor(e,t,n){super(e,t,n,"[stream-controller]",K6),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.on(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.on(O5.LEVEL_LOADING,this.onLevelLoading,this),e.on(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.on(O5.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(O5.ERROR,this.onError,this),e.on(O5.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(O5.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(O5.BUFFER_CREATED,this.onBufferCreated,this),e.on(O5.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(O5.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(O5.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(O5.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(O5.MANIFEST_LOADING,this.onManifestLoading,this),e.off(O5.MANIFEST_PARSED,this.onManifestParsed,this),e.off(O5.LEVEL_LOADED,this.onLevelLoaded,this),e.off(O5.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(O5.ERROR,this.onError,this),e.off(O5.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(O5.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(O5.BUFFER_CREATED,this.onBufferCreated,this),e.off(O5.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(O5.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(O5.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=P7,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=L7}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case W7:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n)){if(this.waitForCdnTuneIn(r))break;this.state=P7;break}if(this.hls.nextLoadLevel!==this.level){this.state=P7;break}break}case N7:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,n=null==e?void 0:e[t];this.resetStartWhenNotLoaded(n||null),this.state=P7}}}this.state===P7&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const o=n[i],a=this.getMainFwdBufferInfo();if(null===a)return;const s=this.getLevelDetails();if(s&&this._streamEnded(a,s)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(O5.BUFFER_EOS,e),void(this.state=B7)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=o.details;if(!l||this.state===W7||l.live&&this.levelLastLoaded!==o)return this.level=i,void(this.state=W7);const c=a.len,u=this.getMaxBufferLength(o.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==u7){var p;const e=(null!=(p=this.backtrackFragment)?p:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?Y5:X5,t=(e===X5?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,K6)}h=this.getNextFragmentLoopLoading(h,l,a,K6,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,o,d))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===s7||r===c7?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,K6)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const o=this.getBufferedFrag(t.currentTime+n);if(o){const e=this.followingBufferedFrag(o);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(o.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case M7:case O7:case N7:case F7:case U7:this.state=P7}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new Xne(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;L5(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(O5.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,r=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),r=r||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=n&&r&&!function(){var e;const t=Kne();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==P7)return;const r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=W7)}onLevelLoaded(e,t){var n;const{levels:r}=this,i=t.level,o=t.details,a=o.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${i}`);this.log(`Level ${i} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const s=r[i],l=this.fragCurrent;!l||this.state!==O7&&this.state!==N7||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(o.live||null!=(n=s.details)&&n.live){var u;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,s.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(s.details=o,this.levelLastLoaded=s,this.hls.trigger(O5.LEVEL_UPDATED,{details:o,level:i}),this.state===W7){if(this.waitForCdnTuneIn(o))return;this.state=P7}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{levels:o}=this;if(!o)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const a=o[n.level],s=a.details;if(!s)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=a.videoCodec,c=s.PTSKnown||!s.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new Qee(this.hls,K6,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,m=-1!==p,f=new g7(n.level,n.sn,n.stats.chunkCount,i.byteLength,p,m),g=this.initPTS[n.cc];h.push(i,u,d,l,n,r,s.totalduration,c,f,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger(O5.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(O5.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,r=!!this.hls.audioTracks[n].url;if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,o=!1;for(const a in n){const e=n[a];if("main"===e.id){if(i=a,r=e,"video"===a){const e=n[a];e&&(this.videoBuffer=e.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n&&n.type!==K6)return;if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===U7&&(this.state=P7));const i=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal)this.state=$7;else switch(t.details){case j5.FRAG_GAP:case j5.FRAG_PARSING_ERROR:case j5.FRAG_DECRYPT_ERROR:case j5.FRAG_LOAD_ERROR:case j5.FRAG_LOAD_TIMEOUT:case j5.KEY_LOAD_ERROR:case j5.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(K6,t);break;case j5.LEVEL_LOAD_ERROR:case j5.LEVEL_LOAD_TIMEOUT:case j5.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==W7||(null==(n=t.context)?void 0:n.type)!==H6||(this.state=P7);break;case j5.BUFFER_APPEND_ERROR:case j5.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===j5.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case j5.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!f7.getBuffered(e).length){const e=this.state!==P7?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=P7,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,t){let{type:n}=t;if(n!==Y5||this.audioOnly&&!this.altAudio){const e=(n===X5?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,n,K6),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=f7.getBuffered(e),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${i} to match buffer start`),n+=i,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:r}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=P7,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(O5.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a)return void this.resetWhenMissingContext(o);const{frag:s,part:l,level:c}=a,{video:u,text:d,id3:h,initSegment:p}=i,{details:m}=c,f=this.altAudio?void 0:i.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=F7,p){if(null!=p&&p.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,p.tracks,e,o),r.trigger(O5.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;L5(e)&&(this.initPTS[s.cc]={baseTime:e,timescale:t},r.trigger(O5.INIT_PTS_FOUND,{frag:s,id:n,initPTS:e,timescale:t}))}if(u&&m&&"initSegment"!==s.sn){const e=m.fragments[s.sn-1-m.startSN],t=s.sn===m.startSN,n=!e||s.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:r,startDTS:i,endDTS:a}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:r,startDTS:i,endDTS:a};else if(u.firstKeyFrame&&u.independent&&1===o.id&&!n&&(this.couldBacktrack=!0),u.dropped&&u.independent){const i=this.getMainFwdBufferInfo(),o=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&o<l-this.config.maxBufferHole&&!n)return void this.backtrack(s);n&&(s.gap=!0),s.setElementaryStreamInfo(u.type,s.start,r,s.start,a,!0)}else t&&e>2&&(s.gap=!0);s.setElementaryStreamInfo(u.type,e,r,i,a),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(u,s,l,o,t||n)}else{if(!t&&!n)return void this.backtrack(s);s.gap=!0}}if(f){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=f;l&&(l.elementaryStreams[Y5]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(Y5,e,t,n,r),this.bufferFragmentData(f,s,l,o)}if(m&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:s,details:m,samples:h.samples};r.trigger(O5.FRAG_PARSING_METADATA,e)}if(m&&d){const e={id:n,frag:s,details:m,samples:d.samples};r.trigger(O5.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,r){if(this.state!==F7)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:i,video:o,audiovideo:a}=t;if(i){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==n.indexOf("android")&&"audio/mpeg"!==i.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),i.levelCodec=t,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${i.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(O5.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(O5.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,K6)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=P7}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(f7.isBuffered(e,n)?t=this.getAppendedFrag(n):f7.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(O5.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(O5.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&L5(t)&&L5(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Jne{static get version(){return"1.5.20"}static isMSESupported(){return Yne()}static isSupported(){return function(){if(!Yne())return!1;const e=w6();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(S6(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(S6(t,"audio")))))}()}static getMediaSource(){return w6()}static get Events(){return O5}static get ErrorTypes(){return N5}static get ErrorDetails(){return j5}static get DefaultConfig(){return Jne.defaultConfig?Jne.defaultConfig:$ne}static set DefaultConfig(e){Jne.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Xee,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"===typeof console&&!0===e||"object"===typeof e){$5(e,"debug","log","info","warn","error");try{B5.log(`Debug logs enabled for "${t}" in hls.js version 1.5.20`)}catch(XA){B5=U5}}else B5=U5}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Vne(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const i=`${"level"===e?"playlist":e}LoadPolicy`,o=void 0===t[i],a=[];r.forEach((r=>{const s=`${e}Loading${r}`,l=t[s];if(void 0!==l&&o){a.push(s);const e=n[i].default;switch(t[i]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&V5.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${i}": ${JSON.stringify(t[i])}`)})),C5(C5({},n),t)}(Jne.DefaultConfig,e);this.userConfig=e,t.progressive&&Wne(t);const{abrController:n,bufferController:r,capLevelController:i,errorController:o,fpsController:a}=t,s=new o(this),l=this.abrController=new n(this),c=this.bufferController=new r(this),u=this.capLevelController=new i(this),d=new a(this),h=new Z6(this),p=new h8(this),m=t.contentSteeringController,f=m?new m(this):null,g=this.levelController=new Hne(this,f),v=new d7(this),y=new Gne(this.config),b=this.streamController=new Qne(this,v,y);u.setStreamController(b),d.setStreamController(b);const w=[h,g,b];f&&w.splice(1,0,f),this.networkControllers=w;const x=[l,c,u,d,p,v];this.audioTrackController=this.createController(t.audioTrackController,w);const E=t.audioStreamController;E&&w.push(new E(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const A=t.subtitleStreamController;A&&w.push(new A(this,v,y)),this.createController(t.timelineController,x),y.emeController=this.emeController=this.createController(t.emeController,x),this.cmcdController=this.createController(t.cmcdController,x),this.latencyController=this.createController(p8,x),this.coreComponents=x,w.push(s);const S=s.onErrorOut;"function"===typeof S&&this.on(O5.ERROR,S,s)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,n)}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(Rb){if(V5.error("An internal error happened while handling event "+e+'. Error message: "'+Rb.message+'". Here is a stacktrace:',Rb),!this.triggeringException){this.triggeringException=!0;const n=e===O5.ERROR;this.trigger(O5.ERROR,{type:N5.OTHER_ERROR,details:j5.INTERNAL_EXCEPTION,fatal:n,event:e,error:Rb}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){V5.log("destroy"),this.trigger(O5.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){V5.log("attachMedia"),this._media=e,this.trigger(O5.MEDIA_ATTACHING,{media:e})}detachMedia(){V5.log("detachMedia"),this.trigger(O5.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,r=this.url=_5.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,V5.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(O5.MANIFEST_LOADING,{url:e})}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;V5.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),this.started&&this.networkControllers);t++);}stopLoad(){V5.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}resumeBuffering(){V5.log("resume buffering"),this.networkControllers.forEach((e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){V5.log("pause buffering"),this.networkControllers.forEach((e=>{e.pauseBuffering&&e.pauseBuffering()}))}swapAudioCodec(){V5.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){V5.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){V5.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){V5.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){V5.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){V5.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){V5.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(V5.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return m8.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Jne.defaultConfig=void 0;var Zne=Jne,ere="video",tre="drm",nre={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},rre=e=>e===ere?"playback":e,ire=class e extends Error{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.MEDIA_ERR_CUSTOM,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;var o;super(t),this.name="MediaError",this.code=n,this.context=i,this.fatal=null!=r?r:n>=e.MEDIA_ERR_NETWORK&&n<=e.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(o=e.defaultMessages[this.code])?o:"")}};ire.MEDIA_ERR_ABORTED=1,ire.MEDIA_ERR_NETWORK=2,ire.MEDIA_ERR_DECODE=3,ire.MEDIA_ERR_SRC_NOT_SUPPORTED=4,ire.MEDIA_ERR_ENCRYPTED=5,ire.MEDIA_ERR_CUSTOM=100,ire.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var ore=ire,are=(e,t)=>!(e=>null==e)(t)&&e in t,sre={ANY:"any",MUTED:"muted"},lre={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},cre="mse",ure="native",dre={HEADER:"header",QUERY:"query",NONE:"none"},hre=Object.values(dre),pre={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},mre={HLS:pre.M3U8},fre=(Object.keys(mre),Object.values(pre),{code:"en"}),gre=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e;i.addEventListener(t,n,r),e.addEventListener("teardown",(()=>{i.removeEventListener(t,n)}),{once:!0})};var vre=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},yre=e=>{let{type:t}=e;if(t){let e=t.toUpperCase();return are(e,mre)?mre[e]:t}return xre(e)},bre=e=>"VOD"===e?lre.ON_DEMAND:lre.LIVE,wre=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,xre=e=>{let{src:t}=e;if(!t)return"";let n="";try{n=new URL(t).pathname}catch{console.error("invalid url")}let r=n.lastIndexOf(".");if(r<0)return Are(e)?pre.M3U8:"";let i=n.slice(r+1).toUpperCase();return are(i,pre)?pre[i]:""},Ere="mux.com",Are=e=>{let t,{src:n,customDomain:r=Ere}=e;try{t=new URL(`${n}`)}catch{return!1}let i="https:"===t.protocol,o=t.hostname===`stream.${r}`.toLowerCase(),a=t.pathname.split("/"),s=2===a.length,l=!(null!=a&&a[1].includes("."));return i&&o&&s&&l},Sre=e=>{let t=(null!=e?e:"").split(".")[1];if(t)try{let e=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}catch{return}};function Tre(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n,r;let i=t&&null!=(r=null==(n=fre)?void 0:n[e])?r:e;return new _re(i,t?fre.code:"en")}var _re=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e=>null!=(e=fre)?e:"en")();this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,((t,n)=>{var r;return null!=(r=e[n])?r:""}))}toString(){return this.message}},kre=Object.values(sre),Cre=e=>"boolean"==typeof e||"string"==typeof e&&kre.includes(e),Ire=(e,t)=>{if(!t)return;let n=e.muted,r=()=>e.muted=n;switch(t){case sre.ANY:e.play().catch((()=>{e.muted=!0,e.play().catch(r)}));break;case sre.MUTED:e.muted=!0,e.play().catch(r);break;default:e.play().catch((()=>{}))}};function Rre(e,t){var n;if(!("videoTracks"in e))return;let r=new WeakMap;t.on(Zne.Events.MANIFEST_PARSED,(function(t,n){a();let i=e.addVideoTrack("main");i.selected=!0;for(let[e,o]of n.levels.entries()){let t=i.addRendition(o.url[0],o.width,o.height,o.videoCodec,o.bitrate);r.set(o,`${e}`),t.id=`${e}`}})),t.on(Zne.Events.AUDIO_TRACKS_UPDATED,(function(t,n){o();for(let r of n.audioTracks){let t=r.default?"main":"alternative",n=e.addAudioTrack(t,r.name,r.lang);n.id=`${r.id}`,r.default&&(n.enabled=!0)}})),e.audioTracks.addEventListener("change",(()=>{var n;let r=+(null==(n=[...e.audioTracks].find((e=>e.enabled)))?void 0:n.id),i=t.audioTracks.map((e=>e.id));r!=t.audioTrack&&i.includes(r)&&(t.audioTrack=r)})),t.on(Zne.Events.LEVELS_UPDATED,(function(t,n){var i;let o=e.videoTracks[null!=(i=e.videoTracks.selectedIndex)?i:0];if(!o)return;let a=n.levels.map((e=>r.get(e)));for(let r of e.videoRenditions)r.id&&!a.includes(r.id)&&o.removeRendition(r)}));let i=n=>{let r=e.currentTime,i=!1,o=(e,t)=>{i||(i=!Number.isFinite(t.endOffset))};t.on(Zne.Events.BUFFER_FLUSHING,o),t.nextLevel=n,t.off(Zne.Events.BUFFER_FLUSHING,o),i||t.trigger(Zne.Events.BUFFER_FLUSHING,{startOffset:r+10,endOffset:1/0,type:"video"})};null==(n=e.videoRenditions)||n.addEventListener("change",(e=>{let n=e.target.selectedIndex;n!=t.nextLevel&&i(n)}));let o=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},a=()=>{(()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)})(),o()};t.once(Zne.Events.DESTROYING,a)}var Dre=e=>"time"in e?e.time:e.startTime;function Lre(e,t,n,r,i,o){let a=document.createElement("track");return a.kind=t,a.label=n,r&&(a.srclang=r),i&&(a.id=i),o&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),e.append(a),a.track}function Pre(e,t,n){var r;return null==(r=Array.from(e.querySelectorAll("track")).find((e=>e.track.label===t&&e.track.kind===n)))?void 0:r.track}async function Mre(e,t,n,r){let i=Pre(e,n,r);return i||(i=Lre(e,r,n),i.mode="hidden",await new Promise((e=>setTimeout((()=>e(void 0)),0)))),"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort(((e,t)=>Dre(t)-Dre(e))).forEach((t=>{var n,o;let a=t.value,s=Dre(t);if("endTime"in t&&null!=t.endTime)null==i||i.addCue(new VTTCue(s,t.endTime,"chapters"===r?a:JSON.stringify(null!=a?a:null)));else{let t=Array.prototype.findIndex.call(null==i?void 0:i.cues,(e=>e.startTime>=s)),l=null==(n=null==i?void 0:i.cues)?void 0:n[t],c=l?l.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(o=null==i?void 0:i.cues)?void 0:o[t-1];u&&(u.endTime=s),null==i||i.addCue(new VTTCue(s,c,"chapters"===r?a:JSON.stringify(null!=a?a:null)))}})),e.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var Ore="cuepoints",Nre=Object.freeze({label:Ore});async function jre(e,t){return Mre(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nre).label,"metadata")}var Fre=e=>({time:e.startTime,value:JSON.parse(e.text)});function Ure(e){var t,n;let r=Pre(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Ore}).label,"metadata");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return Fre(r.activeCues[0]);let{currentTime:i}=e,o=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return Fre(o||r.activeCues[0])}var Bre="chapters",$re=Object.freeze({label:Bre}),Vre=e=>({startTime:e.startTime,endTime:e.endTime,value:e.text});async function Wre(e,t){return Mre(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:$re).label,"chapters")}function zre(e){var t,n;let r=Pre(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Bre}).label,"chapters");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return Vre(r.activeCues[0]);let{currentTime:i}=e,o=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return Vre(o||r.activeCues[0])}var Hre="v",qre="t",Gre="s",Kre="d",Yre=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!(e=>null==(e=globalThis.navigator)?void 0:e.onLine)();var a,s;if(o){let n,r=Tre("Your device appears to be offline",i),o=ore.MEDIA_ERR_NETWORK,a=new ore(r,o,!1,n);return a.errorCategory=t,a.muxCode=nre.NETWORK_OFFLINE,a.data=e,a}let l="status"in e?e.status:e.code,c=Date.now(),u=ore.MEDIA_ERR_NETWORK;if(200===l)return;let d=rre(t),h=((e,t)=>{var n,r;let i=rre(e),o=`${i}Token`;return null!=(n=t.tokens)&&n[i]?null==(r=t.tokens)?void 0:r[i]:are(o,t)?t[o]:void 0})(t,n),p=(e=>e===ere?Hre:e===tre?Kre:void 0)(t),[m]=vre(null!=(a=n.playbackId)?a:"");if(!l||!m)return;let f=Sre(h);if(h&&!f){let n=Tre("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:d}),r=Tre("Compact JWT string: {token}",i).format({token:h}),o=new ore(n,u,!0,r);return o.errorCategory=t,o.muxCode=nre.NETWORK_TOKEN_MALFORMED,o.data=e,o}if(l>=500){let e=new ore("",u,null==r||r);return e.errorCategory=t,e.muxCode=nre.NETWORK_UNKNOWN_ERROR,e}if(403===l){if(!f){let n=Tre("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d,category:t}),o=Tre("Specified playback ID: {playbackId}",i).format({playbackId:m}),a=new ore(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=nre.NETWORK_TOKEN_MISSING,a.data=e,a}if(function(e){let{exp:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!t||1e3*t<n}(f,c)){let n={timeStyle:"medium",dateStyle:"medium"},r=Tre("The video\u2019s secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:d}),o=Tre("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",n).format(null!=(s=f.exp)?s:0),currentDate:new Intl.DateTimeFormat("en",n).format(c)}),a=new ore(r,u,!0,o);return a.errorCategory=t,a.muxCode=nre.NETWORK_TOKEN_EXPIRED,a.data=e,a}if(((e,t)=>{let{sub:n}=e;return n!==t})(f,m)){let n=Tre("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d}),r=Tre("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:d,playbackId:m,tokenPlaybackId:f.sub}),o=new ore(n,u,!0,r);return o.errorCategory=t,o.muxCode=nre.NETWORK_TOKEN_SUB_MISMATCH,o.data=e,o}if((e=>{let{aud:t}=e;return!t})(f)){let n=Tre("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=Tre("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p}),o=new ore(n,u,!0,r);return o.errorCategory=t,o.muxCode=nre.NETWORK_TOKEN_AUD_MISSING,o.data=e,o}if(((e,t)=>{let{aud:n}=e;return n!==t})(f,p)){let n=Tre("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=Tre("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p,aud:f.aud}),o=new ore(n,u,!0,r);return o.errorCategory=t,o.muxCode=nre.NETWORK_TOKEN_AUD_MISMATCH,o.data=e,o}}if(412===l){let n=Tre("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),o=Tre("Specified playback ID: {playbackId}",i).format({playbackId:m}),a=new ore(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=nre.NETWORK_NOT_READY,a.data=e,a}if(404===l){let n=Tre("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),o=Tre("Specified playback ID: {playbackId}",i).format({playbackId:m}),a=new ore(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=nre.NETWORK_NOT_FOUND,a.data=e,a}if(400===l){let n=Tre("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),o=Tre("Specified playback ID: {playbackId}",i).format({playbackId:m}),a=new ore(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=nre.NETWORK_INVALID_URL,a.data=e,a}let g=new ore("",u,null==r||r);return g.errorCategory=t,g.muxCode=nre.NETWORK_UNKNOWN_ERROR,g.data=e,g},Xre=Zne.DefaultConfig.capLevelController,Qre=class e extends Xre{constructor(e){super(e)}get levels(){var e;return null!=(e=this.hls.levels)?e:[]}getValidLevels(e){return this.levels.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e))}getMaxLevel(t){let n=super.getMaxLevel(t),r=this.getValidLevels(t);if(!r[n])return n;let i=Math.min(r[n].width,r[n].height),o=e.minMaxResolution;return i>=o?n:Xre.getMaxLevelByMediaSize(r,o*(16/9),o)}};Qre.minMaxResolution=720;var Jre,Zre,eie,tie,nie,rie,iie,oie=Qre,aie="fairplay",sie="playready",lie="widevine",cie=async(e,t)=>{if(t===pre.MP4)return{streamType:lre.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(t===pre.M3U8){let t=await(async e=>fetch(e).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>{let t=e.split("\n").find(((e,t,n)=>t&&n[t-1].startsWith("#EXT-X-STREAM-INF")));return fetch(t).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>e.split("\n")))})))(e);return(e=>{var t,n,r;let i,o=null==(n=(null!=(t=e.find((e=>e.startsWith("#EXT-X-PLAYLIST-TYPE"))))?t:"").split(":")[1])?void 0:n.trim(),a=bre(o),s=wre(o);if(a===lre.LIVE){let t=e.find((e=>e.startsWith("#EXT-X-PART-INF")));if(t)i=2*+t.split(":")[1].split("=")[1];else{let t=e.find((e=>e.startsWith("#EXT-X-TARGETDURATION"))),n=null==(r=null==t?void 0:t.split(":"))?void 0:r[1];i=3*+(null!=n?n:6)}}return{streamType:a,targetLiveWindow:s,liveEdgeStartOffset:i}})(t)}return console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},uie=(e,t,n)=>{var r,i,o,a,s,l,c,u;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:p,lowLatency:m}=(e=>{var t;let n,r=e.type,i=bre(r),o=wre(r),a=!(null==(t=e.partList)||!t.length);return i===lre.LIVE&&(n=a?2*e.partTarget:3*e.targetduration),{streamType:i,targetLiveWindow:o,liveEdgeStartOffset:n,lowLatency:a}})(e);if(d===lre.LIVE){m?(n.config.backBufferLength=null!=(r=n.userConfig.backBufferLength)?r:4,n.config.maxFragLookUpTolerance=null!=(i=n.userConfig.maxFragLookUpTolerance)?i:.001,n.config.abrBandWidthUpFactor=null!=(o=n.userConfig.abrBandWidthUpFactor)?o:n.config.abrBandWidthFactor):n.config.backBufferLength=null!=(a=n.userConfig.backBufferLength)?a:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var r;return e>this.length||e<0||Number.isFinite(t.duration)?t.seekable.end(e):null!=(r=n.liveSyncPosition)?r:t.seekable.end(e)}});(null!=(s=mie.get(t))?s:{}).seekable=e}(null!=(l=mie.get(t))?l:{}).liveEdgeStartOffset=p,(null!=(c=mie.get(t))?c:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(u=mie.get(t))?u:{}).streamType=d,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},die=null!=(Zre=null==(Jre=null==globalThis?void 0:globalThis.navigator)?void 0:Jre.userAgent)?Zre:"",hie=null!=(nie=null==(tie=null==(eie=null==globalThis?void 0:globalThis.navigator)?void 0:eie.userAgentData)?void 0:tie.platform)?nie:"",pie=die.toLowerCase().includes("android")||["x11","android"].some((e=>hie.toLowerCase().includes(e))),mie=new WeakMap,fie="mux.com",gie=null==(iie=(rie=Zne).isSupported)?void 0:iie.call(rie),vie=pie,yie=()=>E5.utils.now(),bie=E5.utils.generateUUID,wie=function(){let{playbackId:e,customDomain:t=fie,maxResolution:n,minResolution:r,renditionOrder:i,programStartTime:o,programEndTime:a,assetStartTime:s,assetEndTime:l,playbackToken:c,tokens:{playback:u=c}={},extraSourceParams:d={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return;let[h,p=""]=vre(e),m=new URL(`https://stream.${t}/${h}.m3u8${p}`);return u||m.searchParams.has("token")?(m.searchParams.forEach(((e,t)=>{"token"!=t&&m.searchParams.delete(t)})),u&&m.searchParams.set("token",u)):(n&&m.searchParams.set("max_resolution",n),r&&(m.searchParams.set("min_resolution",r),n&&+n.slice(0,-1)<+r.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",r,"maxResolution",n)),i&&m.searchParams.set("rendition_order",i),o&&m.searchParams.set("program_start_time",`${o}`),a&&m.searchParams.set("program_end_time",`${a}`),s&&m.searchParams.set("asset_start_time",`${s}`),l&&m.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach((e=>{let[t,n]=e;null!=n&&m.searchParams.set(t,n)}))),m.toString()},xie=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},Eie=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},Aie=e=>{var t;return null==(t=mie.get(e))?void 0:t.error},Sie=e=>{var t,n;return null!=(n=null==(t=mie.get(e))?void 0:t.streamType)?n:lre.UNKNOWN},Tie=e=>{var t,n;return null!=(n=null==(t=mie.get(e))?void 0:t.seekable)?n:e.seekable},_ie=.034,kie=function(e,t){return e>t||function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_ie;return Math.abs(e-t)<=n}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:_ie)},Cie=(e,t)=>{var n,r,i;if(!t||!e.buffered.length)return;if(e.readyState>2)return!1;let o=t.currentLevel>=0?null==(r=null==(n=t.levels)?void 0:n[t.currentLevel])?void 0:r.details:null==(i=t.levels.find((e=>!!e.details)))?void 0:i.details;if(!o||o.live)return;let{fragments:a}=o;if(null==a||!a.length)return;if(e.currentTime<e.duration-(o.targetduration+.5))return!1;let s=a[a.length-1];if(e.currentTime<=s.start)return!1;let l=s.start+s.duration/2,c=e.buffered.start(e.buffered.length-1),u=e.buffered.end(e.buffered.length-1);return l>c&&l<u},Iie=(e,t)=>e.ended||e.loop?e.ended:!(!t||!Cie(e,t))||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_ie;return e.paused&&kie(e.currentTime,e.duration,t)}(e),Rie=(e,t,n)=>{Die(t,n);let{metadata:r={}}=e,{view_session_id:i=bie()}=r,o=(e=>{var t,n,r;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:Uie(e)&&null!=(r=null!=(n=xie(e.playbackId))?n:Eie(e.src))?r:e.src})(e);r.view_session_id=i,r.video_id=o,e.metadata=r;e.drmTypeCb=e=>{var n;null==(n=t.mux)||n.emit("hb",{view_drm_type:e})},mie.set(t,{});let a=Pie(e,t),s=((e,t,n)=>{let{preload:r,src:i}=e,o=e=>{null!=e&&["","none","metadata","auto"].includes(e)?t.setAttribute("preload",e):t.removeAttribute("preload")};if(!n)return o(r),o;let a=!1,s=!1,l=n.config.maxBufferLength,c=n.config.maxBufferSize,u=e=>{o(e);let r=null!=e?e:t.preload;s||"none"===r||("metadata"===r?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=l,n.config.maxBufferSize=c),d())},d=()=>{!a&&i&&(a=!0,n.loadSource(i))};return gre(t,"play",(()=>{s=!0,n.config.maxBufferLength=l,n.config.maxBufferSize=c,d()}),{once:!0}),u(r),u})(e,t,a);Bie(e,t,a),$ie(e,t,a),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nre;new Promise((n=>{gre(e,"loadstart",(async()=>{let r=await jre(e,[],t);gre(e,"cuechange",(()=>{let t=Ure(e);if(t){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$re;new Promise((n=>{gre(e,"loadstart",(async()=>{let r=await Wre(e,[],t);gre(e,"cuechange",(()=>{let t=zre(e);if(t){let n=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t);let l=((e,t,n)=>{let{autoplay:r}=e,i=!1,o=!1,a=Cre(r)?r:!!r,s=()=>{i||gre(t,"playing",(()=>{i=!0}),{once:!0})};if(s(),gre(t,"loadstart",(()=>{i=!1,s(),Ire(t,a)}),{once:!0}),gre(t,"loadstart",(()=>{n||(o=e.streamType&&e.streamType!==lre.UNKNOWN?e.streamType===lre.LIVE:!Number.isFinite(t.duration)),Ire(t,a)}),{once:!0}),n&&n.once(Zne.Events.LEVEL_LOADED,((t,n)=>{var r;o=e.streamType&&e.streamType!==lre.UNKNOWN?e.streamType===lre.LIVE:null!=(r=n.details.live)&&r})),!a){let r=()=>{!o||Number.isFinite(e.startTime)||(null!=n&&n.liveSyncPosition?t.currentTime=n.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};n&&gre(t,"play",(()=>{"metadata"===t.preload?n.once(Zne.Events.LEVEL_UPDATED,r):r()}),{once:!0})}return e=>{i||(a=Cre(e)?e:!!e,Ire(t,a))}})(e,t,a);return{engine:a,setAutoplay:l,setPreload:s}},Die=(e,t)=>{let n=null==t?void 0:t.engine;n&&(n.detachMedia(),n.destroy()),null!=e&&e.mux&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",Wie),e.removeEventListener("error",Hie),e.removeEventListener("durationchange",Vie),mie.delete(e),e.dispatchEvent(new Event("teardown")))};function Lie(e,t){var n;let r=yre(e);if(r!==pre.M3U8)return!0;let i=!r||null==(n=t.canPlayType(r))||n,{preferPlayback:o}=e;return i&&(o===ure||!(gie&&(o===cre||vie)))}var Pie=(e,t)=>{let{debug:n,streamType:r,startTime:i=-1,metadata:o,preferCmcd:a,_hlsConfig:s={}}=e,l=yre(e)===pre.M3U8,c=Lie(e,t);if(l&&!c&&gie){let t={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},l=Mie(r),c=Oie(e),u=a!==dre.NONE?{useHeaders:a===dre.HEADER,sessionId:null==o?void 0:o.view_session_id,contentId:null==o?void 0:o.video_id}:void 0;return new Zne({debug:n,startPosition:i,cmcd:u,xhrSetup:(e,t)=>{var n,r;if(a&&a!==dre.QUERY)return;let i=new URL(t);if(!i.searchParams.has("CMCD"))return;let o=(null!=(r=null==(n=i.searchParams.get("CMCD"))?void 0:n.split(","))?r:[]).filter((e=>e.startsWith("sid")||e.startsWith("cid"))).join(",");i.searchParams.set("CMCD",o),e.open("GET",i)},capLevelController:oie,...t,...l,...c,...s})}},Mie=e=>e===lre.LIVE?{backBufferLength:8}:{},Oie=e=>{let{tokens:{drm:t}={},playbackId:n,drmTypeCb:r}=e,i=xie(n);return t&&i?{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:jie(e,"fairplay"),serverCertificateUrl:Fie(e,"fairplay")},"com.widevine.alpha":{licenseUrl:jie(e,"widevine")},"com.microsoft.playready":{licenseUrl:jie(e,"playready")}},requestMediaKeySystemAccessFunc:(e,t)=>("com.widevine.alpha"===e&&(t=[...t.map((e=>{var t;let n=null==(t=e.videoCapabilities)?void 0:t.map((e=>({...e,robustness:"HW_SECURE_ALL"})));return{...e,videoCapabilities:n}})),...t]),navigator.requestMediaKeySystemAccess(e,t).then((t=>{let n=(e=>e.includes("fps")?aie:e.includes("playready")?sie:e.includes("widevine")?lie:void 0)(e);return null==r||r(n),t})))}:{}},Nie=(e,t)=>{gre(t,"encrypted",(async n=>{try{let r=n.initDataType;if("skd"!==r)return void console.error(`Received unexpected initialization data type "${r}"`);if(!t.mediaKeys){let n=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[r],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then((t=>{var n;return null==(n=e.drmTypeCb)||n.call(e,aie),t})).catch((()=>{let e=Tre("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),n=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=tre,n.muxCode=nre.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,zie(t,n)}));if(!n)return;let i=await n.createMediaKeys();try{let t=await(async e=>{let t=await fetch(e);return 200!==t.status?Promise.reject(t):await t.arrayBuffer()})(Fie(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=Yre(t,tre,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(t)}));await i.setServerCertificate(t).catch((()=>{let e=Tre("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),t=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=tre,t.muxCode=nre.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(t)}))}catch(aS){return void zie(t,aS)}await t.setMediaKeys(i)}let i=n.initData;if(null==i)return void console.error(`Could not start encrypted playback due to missing initData in ${n.type} event`);let o=t.mediaKeys.createSession();o.addEventListener("keystatuseschange",(()=>{o.keyStatuses.forEach((e=>{let n;if("internal-error"===e){let e=Tre("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");n=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0),n.errorCategory=tre,n.muxCode=nre.ENCRYPTED_CDM_ERROR}else if("output-restricted"===e||"output-downscaled"===e){let e=Tre("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");n=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!1),n.errorCategory=tre,n.muxCode=nre.ENCRYPTED_OUTPUT_RESTRICTED}n&&zie(t,n)}))}));let a=await Promise.all([o.generateRequest(r,i).catch((()=>{let e=Tre("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),n=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=tre,n.muxCode=nre.ENCRYPTED_GENERATE_REQUEST_FAILED,zie(t,n)})),new Promise((e=>{o.addEventListener("message",(t=>{e(t.message)}),{once:!0})}))]).then((e=>{let[,t]=e;return t})),s=await(async(e,t)=>{let n=await fetch(t,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:e});if(200!==n.status)return Promise.reject(n);let r=await n.arrayBuffer();return new Uint8Array(r)})(a,jie(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=Yre(t,tre,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(t)}));await o.update(s).catch((()=>{let e=Tre("Failed to update DRM license. This may be an issue with the player or your protected content."),t=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=tre,t.muxCode=nre.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(t)}))}catch(tS){return void zie(t,tS)}}))},jie=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=fie}=e,o=xie(n);return`https://license.${i.toLocaleLowerCase().endsWith(fie)?i:fie}/license/${t}/${o}?token=${r}`},Fie=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=fie}=e,o=xie(n);return`https://license.${i.toLocaleLowerCase().endsWith(fie)?i:fie}/appcert/${t}/${o}?token=${r}`},Uie=e=>{let{playbackId:t,src:n,customDomain:r}=e;if(t)return!0;if("string"!=typeof n)return!1;let i=null==window?void 0:window.location.href,o=new URL(n,i).hostname.toLocaleLowerCase();return o.includes(fie)||!!r&&o.includes(r.toLocaleLowerCase())},Bie=(e,t,n)=>{var r;let{envKey:i,disableTracking:o}=e,a=Uie(e);if(!o&&(i||a)){let{playerInitTime:o,playerSoftwareName:a,playerSoftwareVersion:s,beaconCollectionDomain:l,debug:c,disableCookies:u}=e,d={...e.metadata,video_title:(null==(r=null==e?void 0:e.metadata)?void 0:r.video_title)||void 0},h=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);E5.monitor(t,{debug:c,beaconCollectionDomain:l,hlsjs:n,Hls:n?Zne:void 0,automaticErrorTracking:!1,errorTranslator:h,disableCookies:u,data:{...i?{env_key:i}:{},player_software_name:a,player_software:a,player_software_version:s,player_init_time:o,...d}})}},$ie=(e,t,n)=>{var r,i;let o,a,s=Lie(e,t),{src:l}=e,c=()=>{t.ended||!Iie(t,n)||(Cie(t,n)?t.currentTime=t.buffered.end(t.buffered.length-1):t.dispatchEvent(new Event("ended")))},u=()=>{let e,n,r=Tie(t);r.length>0&&(e=r.start(0),n=r.end(0)),(a!==n||o!==e)&&t.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),o=e,a=n};if(gre(t,"durationchange",u),t&&s){let n=yre(e);if("string"==typeof l){let o=()=>{if(Sie(t)!==lre.LIVE||Number.isFinite(t.duration))return;let e=setInterval(u,1e3);t.addEventListener("teardown",(()=>{clearInterval(e)}),{once:!0}),gre(t,"durationchange",(()=>{Number.isFinite(t.duration)&&clearInterval(e)}))},a=async()=>async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yre({src:e});var r,i,o;let{streamType:a,targetLiveWindow:s,liveEdgeStartOffset:l}=await cie(e,n);(null!=(r=mie.get(t))?r:{}).liveEdgeStartOffset=l,(null!=(i=mie.get(t))?i:{}).targetLiveWindow=s,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(o=mie.get(t))?o:{}).streamType=a,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))}(l,t,n).then(o).catch((n=>{if(n instanceof Response){let r=Yre(n,ere,e);if(r)return void zie(t,r)}else Error}));if("none"===t.preload){let e=()=>{a(),t.removeEventListener("loadedmetadata",n)},n=()=>{a(),t.removeEventListener("play",e)};gre(t,"play",e,{once:!0}),gre(t,"loadedmetadata",n,{once:!0})}else a();null!=(r=e.tokens)&&r.drm?Nie(e,t):gre(t,"encrypted",(()=>{let e=Tre("Attempting to play DRM-protected content without providing a DRM token."),n=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=tre,n.muxCode=nre.ENCRYPTED_MISSING_TOKEN,zie(t,n)}),{once:!0}),t.setAttribute("src",l),e.startTime&&((null!=(i=mie.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",Vie,{once:!0}))}else t.removeAttribute("src");t.addEventListener("error",Wie),t.addEventListener("error",Hie),t.addEventListener("emptied",(()=>{t.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}),{once:!0}),gre(t,"pause",c),gre(t,"seeked",c),gre(t,"play",(()=>{t.ended||kie(t.currentTime,t.duration)&&(t.currentTime=t.seekable.length?t.seekable.start(0):0)}))}else n&&l?(n.once(Zne.Events.LEVEL_LOADED,((e,r)=>{uie(r.details,t,n),u(),Sie(t)===lre.LIVE&&!Number.isFinite(t.duration)&&(n.on(Zne.Events.LEVEL_UPDATED,u),gre(t,"durationchange",(()=>{Number.isFinite(t.duration)&&n.off(Zne.Events.LEVELS_UPDATED,u)})))})),n.on(Zne.Events.ERROR,((n,r)=>{zie(t,qie(r,e))})),t.addEventListener("error",Hie),gre(t,"waiting",c),Rre(e,n),function(e,t){t.on(Zne.Events.NON_NATIVE_TEXT_TRACKS_FOUND,((n,r)=>{let{tracks:i}=r;i.forEach((n=>{var r,i;let o=null!=(r=n.subtitleTrack)?r:n.closedCaptions,a=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i}=e;return t==(null==o?void 0:o.lang)&&r===n.label&&i.toLowerCase()===n.kind})),s=(null!=(i=n._id)?i:n.default)?"default":`${n.kind}${a}`;Lre(e,n.kind,n.label,null==o?void 0:o.lang,s,n.default)}))}));let n=()=>{if(!t.subtitleTracks.length)return;let n=Array.from(e.textTracks).find((e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)));if(!n)return;let r=t.subtitleTracks[t.subtitleTrack],i=r?r.default?"default":`${t.subtitleTracks[t.subtitleTrack].type.toLowerCase()}${t.subtitleTrack}`:void 0;if(t.subtitleTrack<0||(null==n?void 0:n.id)!==i){let e=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i,default:o}=e;return"default"===n.id&&o||t==n.language&&r===n.label&&i.toLowerCase()===n.kind}));t.subtitleTrack=e}(null==n?void 0:n.id)===i&&n.cues&&Array.from(n.cues).forEach((e=>{n.addCue(e)}))};e.textTracks.addEventListener("change",n),t.on(Zne.Events.CUES_PARSED,((t,n)=>{let{track:r,cues:i}=n,o=e.textTracks.getTrackById(r);if(!o)return;let a="disabled"===o.mode;a&&(o.mode="hidden"),i.forEach((e=>{var t;null!=(t=o.cues)&&t.getCueById(e.id)||o.addCue(e)})),a&&(o.mode="disabled")})),t.once(Zne.Events.DESTROYING,(()=>{e.textTracks.removeEventListener("change",n),e.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}));let r=()=>{Array.from(e.textTracks).forEach((t=>{var n,r;if(!["subtitles","caption"].includes(t.kind)&&("thumbnails"===t.label||"chapters"===t.kind)){if(null==(n=t.cues)||!n.length){let n="track";t.kind&&(n+=`[kind="${t.kind}"]`),t.label&&(n+=`[label="${t.label}"]`);let i=e.querySelector(n),o=null!=(r=null==i?void 0:i.getAttribute("src"))?r:"";null==i||i.removeAttribute("src"),setTimeout((()=>{null==i||i.setAttribute("src",o)}),0)}"hidden"!==t.mode&&(t.mode="hidden")}}))};t.once(Zne.Events.MANIFEST_LOADED,r),t.once(Zne.Events.MEDIA_ATTACHED,r)}(t,n),n.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function Vie(e){var t;let n=e.target,r=null==(t=mie.get(n))?void 0:t.startTime;if(r&&function(e,t,n){t&&n>t&&(n=t);for(let r=0;r<e.length;r++)if(e.start(r)<=n&&e.end(r)>=n)return!0;return!1}(n.seekable,n.duration,r)){let e="auto"===n.preload;e&&(n.preload="none"),n.currentTime=r,e&&(n.preload="auto")}}async function Wie(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(null==t||!t.error)return;let{message:n,code:r}=t.error,i=new ore(n,r);if(t.src&&r===ore.MEDIA_ERR_SRC_NOT_SUPPORTED&&t.readyState===HTMLMediaElement.HAVE_NOTHING)setTimeout((()=>{var e;let n=null!=(e=Aie(t))?e:t.error;(null==n?void 0:n.code)===ore.MEDIA_ERR_SRC_NOT_SUPPORTED&&zie(t,i)}),500);else{if(t.src&&(r!==ore.MEDIA_ERR_DECODE||void 0!==r))try{let{status:e}=await fetch(t.src);i.data={response:{code:e}}}catch{}zie(t,i)}}function zie(e,t){var n;t.fatal&&((null!=(n=mie.get(e))?n:{}).error=t,e.dispatchEvent(new CustomEvent("error",{detail:t})))}function Hie(e){var t,n;if(!(e instanceof CustomEvent)||!(e.detail instanceof ore))return;let r=e.target,i=e.detail;!i||!i.fatal||((null!=(t=mie.get(r))?t:{}).error=i,null==(n=r.mux)||n.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var qie=(e,t)=>{var n,r,i;console.error("getErrorFromHlsErrorData()",e);let o,a={[Zne.ErrorTypes.NETWORK_ERROR]:ore.MEDIA_ERR_NETWORK,[Zne.ErrorTypes.MEDIA_ERROR]:ore.MEDIA_ERR_DECODE,[Zne.ErrorTypes.KEY_SYSTEM_ERROR]:ore.MEDIA_ERR_ENCRYPTED},s=(e=>[Zne.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Zne.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(e.details)?ore.MEDIA_ERR_NETWORK:a[e.type])(e);if(s===ore.MEDIA_ERR_NETWORK&&e.response){let i=null!=(n=(e=>e.type===Zne.ErrorTypes.KEY_SYSTEM_ERROR?tre:e.type===Zne.ErrorTypes.NETWORK_ERROR?ere:void 0)(e))?n:ere;o=null!=(r=Yre(e.response,i,t,e.fatal))?r:new ore("",s,e.fatal)}else if(s===ore.MEDIA_ERR_ENCRYPTED)if(e.details===Zne.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let t=Tre("Attempting to play DRM-protected content without providing a DRM token.");o=new ore(t,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_MISSING_TOKEN}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let t=Tre("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");o=new ore(t,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_NO_SESSION){let e=Tre("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");o=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!0),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let t=Tre("Failed to update DRM license. This may be an issue with the player or your protected content.");o=new ore(t,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let t=Tre("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");o=new ore(t,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let t=Tre("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");o=new ore(t,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_CDM_ERROR}else if(e.details===Zne.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let e=Tre("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");o=new ore(e,ore.MEDIA_ERR_ENCRYPTED,!1),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_OUTPUT_RESTRICTED}else o=new ore(e.error.message,ore.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=tre,o.muxCode=nre.ENCRYPTED_ERROR;else o=new ore("",s,e.fatal);return o.context||(o.context=`${e.url?`url: ${e.url}\n`:""}${e.response&&(e.response.code||e.response.text)?`response: ${e.response.code}, ${e.response.text}\n`:""}${e.reason?`failure reason: ${e.reason}\n`:""}${e.level?`level: ${e.level}\n`:""}${e.parent?`parent stream controller: ${e.parent}\n`:""}${e.buffer?`buffer length: ${e.buffer}\n`:""}${e.error?`error: ${e.error}\n`:""}${e.event?`event: ${e.event}\n`:""}${e.err?`error message: ${null==(i=e.err)?void 0:i.message}\n`:""}`),o.data=e,o},Gie=Object.defineProperty,Kie=Object.getPrototypeOf,Yie=Reflect.get,Xie=e=>{throw TypeError(e)},Qie=(e,t,n)=>((e,t,n)=>t in e?Gie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Jie=(e,t,n)=>t.has(e)||Xie("Cannot "+n),Zie=(e,t,n)=>(Jie(e,t,"read from private field"),n?n.call(e):t.get(e)),eoe=(e,t,n)=>t.has(e)?Xie("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),toe=(e,t,n,r)=>(Jie(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),noe=(e,t,n)=>(Jie(e,t,"access private method"),n),roe=(e,t,n)=>Yie(Kie(e),n,t),ioe=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends ioe{}globalThis.DocumentFragment=e}var ooe,aoe=class extends ioe{},soe={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(aoe)};ooe=new WeakMap;var loe={document:{createElement:function(e,t){return new aoe}},DocumentFragment:DocumentFragment,customElements:soe,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eoe(this,ooe),toe(this,ooe,null==t?void 0:t.detail)}get detail(){return Zie(this,ooe)}initCustomEvent(){}},EventTarget:ioe,HTMLElement:aoe,HTMLVideoElement:class extends ioe{}},coe="undefined"==typeof window||"undefined"==typeof globalThis.customElements,uoe=coe?loe:globalThis,doe=(coe||globalThis.document,(()=>{try{return"0.25.1"}catch{}return"UNKNOWN"})()),hoe=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],poe=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function moe(e){return`\n    <style>\n      :host {\n        display: inline-flex;\n        line-height: 0;\n        flex-direction: column;\n        justify-content: end;\n      }\n\n      audio {\n        width: 100%;\n      }\n    </style>\n    <slot name="media">\n      <audio${voe(e)}></audio>\n    </slot>\n    <slot></slot>\n  `}function foe(e){return`\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot name="media">\n      <video${voe(e)}></video>\n    </slot>\n    <slot></slot>\n  `}function goe(e,t){let{tag:n,is:r}=t;var i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w;let x=null==(o=null==(i=globalThis.document)?void 0:i.createElement)?void 0:o.call(i,n,{is:r}),E=x?function(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n)){let e=Object.getOwnPropertyNames(n);t.push(...e)}return t}(x):[];return a=class extends e{constructor(){super(...arguments),eoe(this,m),eoe(this,u,!1),eoe(this,d,null),eoe(this,h,new Map),eoe(this,p),Qie(this,"get"),Qie(this,"set"),Qie(this,"call")}static get observedAttributes(){var e,t,n;return noe(e=a,l,c).call(e),[...null!=(n=null==(t=null==x?void 0:x.constructor)?void 0:t.observedAttributes)?n:[],...poe]}get nativeEl(){var e,t,r,i,o;return noe(this,m,f).call(this),null!=(o=null!=(i=null!=(t=null!=(e=Zie(this,d))?e:this.querySelector(":scope > [slot=media]"))?t:this.querySelector(n))?i:null==(r=this.shadowRoot)?void 0:r.querySelector(n))?o:null}set nativeEl(e){toe(this,d,e)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",e)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){var e,t;return null!=(t=this.getAttribute("preload"))?t:null==(e=this.nativeEl)?void 0:e.preload}set preload(e){this.setAttribute("preload",`${e}`)}init(){var e;if(!this.shadowRoot){this.attachShadow({mode:"open"});let e=function(e){let t={};for(let n of e)t[n.name]=n.value;return t}(this.attributes);r&&(e.is=r),n&&(e.part=n),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.nativeEl.muted=this.hasAttribute("muted");for(let t of E)noe(this,m,b).call(this,t);toe(this,p,new MutationObserver(noe(this,m,v).bind(this))),this.shadowRoot.addEventListener("slotchange",this),noe(this,m,g).call(this);for(let t of this.constructor.Events)null==(e=this.shadowRoot)||e.addEventListener(t,this,!0)}handleEvent(e){"slotchange"!==e.type?e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail})):noe(this,m,g).call(this)}attributeChangedCallback(e,t,n){noe(this,m,f).call(this),noe(this,m,w).call(this,e,t,n)}connectedCallback(){noe(this,m,f).call(this)}},s=new WeakMap,l=new WeakSet,c=function(){if(Zie(this,s))return;toe(this,s,!0);let e=new Set(this.observedAttributes);e.delete("muted");for(let t of E)if(!(t in this.prototype))if("function"==typeof x[t])this.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return noe(this,m,f).call(this),(()=>{var e;if(this.call)return this.call(t,...n);let r=null==(e=this.nativeEl)?void 0:e[t];return null==r?void 0:r.apply(this.nativeEl,n)})()};else{let n={get(){var n,r,i;noe(this,m,f).call(this);let o=t.toLowerCase();if(e.has(o)){let e=this.getAttribute(o);return null!==e&&(""===e||e)}return null!=(i=null==(n=this.get)?void 0:n.call(this,t))?i:null==(r=this.nativeEl)?void 0:r[t]}};t!==t.toUpperCase()&&(n.set=function(n){noe(this,m,f).call(this);let r=t.toLowerCase();e.has(r)?!0===n||!1===n||null==n?this.toggleAttribute(r,!!n):this.setAttribute(r,n):this.set?this.set(t,n):this.nativeEl&&(this.nativeEl[t]=n)}),Object.defineProperty(this.prototype,t,n)}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakSet,f=function(){Zie(this,u)||(toe(this,u,!0),this.init())},g=function(){var e;let t=new Map(Zie(this,h)),n=null==(e=this.shadowRoot)?void 0:e.querySelector("slot:not([name])");(null==n?void 0:n.assignedElements({flatten:!0}).filter((e=>["track","source"].includes(e.localName)))).forEach((e=>{var n,r;t.delete(e);let i=Zie(this,h).get(e);i||(i=e.cloneNode(),Zie(this,h).set(e,i),null==(n=Zie(this,p))||n.observe(e,{attributes:!0})),null==(r=this.nativeEl)||r.append(i),noe(this,m,y).call(this,i)})),t.forEach(((e,t)=>{e.remove(),Zie(this,h).delete(t)}))},v=function(e){var t;for(let n of e)if("attributes"===n.type){let{target:e,attributeName:r}=n,i=Zie(this,h).get(e);i&&r&&(i.setAttribute(r,null!=(t=e.getAttribute(r))?t:""),noe(this,m,y).call(this,i))}},y=function(e){e&&"track"===e.localName&&e.default&&("chapters"===e.kind||"metadata"===e.kind)&&"disabled"===e.track.mode&&(e.track.mode="hidden")},b=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}},w=function(e,t,n){var r,i,o;["id","class"].includes(e)||!a.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(null===n?null==(r=this.nativeEl)||r.removeAttribute(e):(null==(i=this.nativeEl)?void 0:i.getAttribute(e))!==n&&(null==(o=this.nativeEl)||o.setAttribute(e,n)))},eoe(a,l),Qie(a,"getTemplateHTML",n.endsWith("audio")?moe:foe),Qie(a,"shadowRootOptions",{mode:"open"}),Qie(a,"Events",hoe),eoe(a,s,!1),a}function voe(e){let t="";for(let n in e){if(!poe.includes(n))continue;let r=e[n];t+=""===r?` ${n}`:` ${n}="${r}"`}return t}var yoe,boe,woe=goe(null!=(yoe=globalThis.HTMLElement)?yoe:class{},{tag:"video"}),xoe=(goe(null!=(boe=globalThis.HTMLElement)?boe:class{},{tag:"audio"}),new WeakMap),Eoe=class extends Error{},Aoe=class extends Error{},Soe=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],Toe=globalThis.WeakRef?class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach((t=>{let n=t.deref();n&&e(n)}))}}:Set;function _oe(){var e,t;return null==(t=null==(e=globalThis.cast)?void 0:e.framework)?void 0:t.CastContext.getInstance()}function koe(){var e;return null==(e=_oe())?void 0:e.getCurrentSession()}function Coe(){var e;return null==(e=koe())?void 0:e.getSessionObj().media[0]}function Ioe(e){return _oe().setOptions({receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})}var Roe,Doe=new Toe,Loe=new WeakSet;!function(e){var t,n,r;null!=(n=null==(t=globalThis.chrome)?void 0:t.cast)&&n.isAvailable?null!=(r=globalThis.cast)&&r.framework?e():customElements.whenDefined("google-cast-button").then(e):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(e)}}((()=>{var e,t,n,r;null!=(t=null==(e=globalThis.chrome)?void 0:e.cast)&&t.isAvailable?Roe||(Roe=cast.framework,_oe().addEventListener(Roe.CastContextEventType.CAST_STATE_CHANGED,(e=>{Doe.forEach((t=>{var n,r;return null==(r=(n=xoe.get(t)).onCastStateChanged)?void 0:r.call(n,e)}))})),_oe().addEventListener(Roe.CastContextEventType.SESSION_STATE_CHANGED,(e=>{Doe.forEach((t=>{var n,r;return null==(r=(n=xoe.get(t)).onSessionStateChanged)?void 0:r.call(n,e)}))})),Doe.forEach((e=>{var t,n;return null==(n=(t=xoe.get(e)).init)?void 0:n.call(t)}))):console.debug("chrome.cast.isAvailable",null==(r=null==(n=globalThis.chrome)?void 0:n.cast)?void 0:r.isAvailable)}));var Poe,Moe,Ooe,Noe,joe,Foe,Uoe,Boe,$oe,Voe,Woe,zoe,Hoe,qoe,Goe,Koe,Yoe=0,Xoe=class extends EventTarget{constructor(e){super(),eoe(this,$oe),eoe(this,Poe),eoe(this,Moe),eoe(this,Ooe),eoe(this,Noe),eoe(this,joe,"disconnected"),eoe(this,Foe,!1),eoe(this,Uoe,new Set),eoe(this,Boe,new WeakMap),toe(this,Poe,e),Doe.add(this),xoe.set(this,{init:()=>noe(this,$oe,qoe).call(this),onCastStateChanged:()=>noe(this,$oe,zoe).call(this),onSessionStateChanged:()=>noe(this,$oe,Hoe).call(this),getCastPlayer:()=>Zie(this,$oe,Voe)}),noe(this,$oe,qoe).call(this)}get state(){return Zie(this,joe)}async watchAvailability(e){if(Zie(this,Poe).disableRemotePlayback)throw new Eoe("disableRemotePlayback attribute is present.");return Zie(this,Boe).set(e,++Yoe),Zie(this,Uoe).add(e),Yoe}async cancelWatchAvailability(e){if(Zie(this,Poe).disableRemotePlayback)throw new Eoe("disableRemotePlayback attribute is present.");e?Zie(this,Uoe).delete(e):Zie(this,Uoe).clear()}async prompt(){var e,t,n,r;if(Zie(this,Poe).disableRemotePlayback)throw new Eoe("disableRemotePlayback attribute is present.");if(null==(t=null==(e=globalThis.chrome)?void 0:e.cast)||!t.isAvailable)throw new Aoe("The RemotePlayback API is disabled on this platform.");let i=Loe.has(Zie(this,Poe));Loe.add(Zie(this,Poe)),Ioe(Zie(this,Poe).castOptions),Object.entries(Zie(this,Noe)).forEach((e=>{let[t,n]=e;Zie(this,Ooe).controller.addEventListener(t,n)}));try{await _oe().requestSession()}catch(aS){if("cancel"===aS)return void(i||Loe.delete(Zie(this,Poe)));throw new Error(aS)}null==(r=null==(n=xoe.get(Zie(this,Poe)))?void 0:n.loadOnPrompt)||r.call(n)}};Poe=new WeakMap,Moe=new WeakMap,Ooe=new WeakMap,Noe=new WeakMap,joe=new WeakMap,Foe=new WeakMap,Uoe=new WeakMap,Boe=new WeakMap,$oe=new WeakSet,Voe=function(){if(Loe.has(Zie(this,Poe)))return Zie(this,Ooe)},Woe=function(){Loe.has(Zie(this,Poe))&&(Object.entries(Zie(this,Noe)).forEach((e=>{let[t,n]=e;Zie(this,Ooe).controller.removeEventListener(t,n)})),Loe.delete(Zie(this,Poe)),Zie(this,Poe).muted=Zie(this,Ooe).isMuted,Zie(this,Poe).currentTime=Zie(this,Ooe).savedPlayerState.currentTime,!1===Zie(this,Ooe).savedPlayerState.isPaused&&Zie(this,Poe).play())},zoe=function(){let e=_oe().getCastState();if(Loe.has(Zie(this,Poe))&&"CONNECTING"===e&&(toe(this,joe,"connecting"),this.dispatchEvent(new Event("connecting"))),!Zie(this,Foe)&&null!=e&&e.includes("CONNECT")){toe(this,Foe,!0);for(let e of Zie(this,Uoe))e(!0)}else if(Zie(this,Foe)&&(!e||"NO_DEVICES_AVAILABLE"===e)){toe(this,Foe,!1);for(let e of Zie(this,Uoe))e(!1)}},Hoe=async function(){var e;let{SESSION_RESUMED:t}=Roe.SessionState;if(_oe().getSessionState()===t&&Zie(this,Poe).castSrc===(null==(e=Coe())?void 0:e.media.contentId)){Loe.add(Zie(this,Poe)),Object.entries(Zie(this,Noe)).forEach((e=>{let[t,n]=e;Zie(this,Ooe).controller.addEventListener(t,n)}));try{await function(e){return new Promise(((t,n)=>{Coe().getStatus(e,t,n)}))}(new chrome.cast.media.GetStatusRequest)}catch(eS){console.error(eS)}Zie(this,Noe)[Roe.RemotePlayerEventType.IS_PAUSED_CHANGED](),Zie(this,Noe)[Roe.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},qoe=function(){!Roe||Zie(this,Moe)||(toe(this,Moe,!0),Ioe(Zie(this,Poe).castOptions),Zie(this,Poe).textTracks.addEventListener("change",(()=>noe(this,$oe,Koe).call(this))),noe(this,$oe,zoe).call(this),toe(this,Ooe,new Roe.RemotePlayer),new Roe.RemotePlayerController(Zie(this,Ooe)),toe(this,Noe,{[Roe.RemotePlayerEventType.IS_CONNECTED_CHANGED]:e=>{let{value:t}=e;!0===t?(toe(this,joe,"connected"),this.dispatchEvent(new Event("connect"))):(noe(this,$oe,Woe).call(this),toe(this,joe,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[Roe.RemotePlayerEventType.DURATION_CHANGED]:()=>{Zie(this,Poe).dispatchEvent(new Event("durationchange"))},[Roe.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{Zie(this,Poe).dispatchEvent(new Event("volumechange"))},[Roe.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{Zie(this,Poe).dispatchEvent(new Event("volumechange"))},[Roe.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var e;null!=(e=Zie(this,$oe,Voe))&&e.isMediaLoaded&&Zie(this,Poe).dispatchEvent(new Event("timeupdate"))},[Roe.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{Zie(this,Poe).dispatchEvent(new Event("resize"))},[Roe.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{Zie(this,Poe).dispatchEvent(new Event(this.paused?"pause":"play"))},[Roe.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=Zie(this,$oe,Voe))?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&Zie(this,Poe).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=Zie(this,$oe,Voe))?void 0:t.playerState]))},[Roe.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var e;null!=(e=Zie(this,$oe,Voe))&&e.isMediaLoaded&&(await Promise.resolve(),noe(this,$oe,Goe).call(this))}}))},Goe=function(){noe(this,$oe,Koe).call(this)},Koe=async function(){var e,t,n,r,i;if(!Zie(this,$oe,Voe))return;let o=(null!=(t=null==(e=Zie(this,Ooe).mediaInfo)?void 0:e.tracks)?t:[]).filter((e=>{let{type:t}=e;return t===chrome.cast.media.TrackType.TEXT})),a=[...Zie(this,Poe).textTracks].filter((e=>{let{kind:t}=e;return"subtitles"===t||"captions"===t})),s=o.map((e=>{let{language:t,name:n,trackId:r}=e;var i;let{mode:o}=null!=(i=a.find((e=>e.language===t&&e.label===n)))?i:{};return!!o&&{mode:o,trackId:r}})).filter(Boolean),l=s.filter((e=>{let{mode:t}=e;return"showing"!==t})).map((e=>{let{trackId:t}=e;return t})),c=s.find((e=>{let{mode:t}=e;return"showing"===t})),u=null!=(i=null==(r=null==(n=koe())?void 0:n.getSessionObj().media[0])?void 0:r.activeTrackIds)?i:[],d=u;if(u.length&&(d=d.filter((e=>!l.includes(e)))),null!=c&&c.trackId&&(d=[...d,c.trackId]),d=[...new Set(d)],!((e,t)=>e.length===t.length&&e.every((e=>t.includes(e))))(u,d))try{let e=new chrome.cast.media.EditTracksInfoRequest(d);await function(e){return new Promise(((t,n)=>{Coe().editTracksInfo(e,t,n)}))}(e)}catch(Ns){console.error(Ns)}};var Qoe=e=>{var t,n,r,i,o,a,s,l,c;return n=class extends e{constructor(){super(...arguments),eoe(this,s),eoe(this,r,{paused:!1}),eoe(this,i,{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}),eoe(this,o),eoe(this,a)}get remote(){return Zie(this,a)?Zie(this,a):globalThis.chrome?(this.disableRemotePlayback||function(){var e;let t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(null!=(e=globalThis.chrome)&&e.cast||document.querySelector(`script[src="${t}"]`))return;let n=document.createElement("script");n.src=t,document.head.append(n)}(),xoe.set(this,{loadOnPrompt:()=>noe(this,s,c).call(this)}),toe(this,a,new Xoe(this))):super.remote}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),"cast-receiver"===e&&n)Zie(this,i).receiverApplicationId=n;else if(Zie(this,s,l))switch(e){case"cast-stream-type":case"cast-src":this.load()}}async load(){var e,n;if(!Zie(this,s,l))return super.load();let i=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);i.customData=this.castCustomData;let o=[...this.querySelectorAll("track")].filter((e=>{let{kind:t,src:n}=e;return n&&("subtitles"===t||"captions"===t)})),a=[],c=0;if(o.length&&(i.tracks=o.map((e=>{let t=++c;0===a.length&&"showing"===e.track.mode&&a.push(t);let n=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return n.trackContentId=e.src,n.trackContentType="text/vtt",n.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,n.name=e.label,n.language=e.srclang,n}))),"live"===this.castStreamType?i.streamType=chrome.cast.media.StreamType.LIVE:i.streamType=chrome.cast.media.StreamType.BUFFERED,i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.title=this.title,i.metadata.images=[{url:this.poster}],async function(e){try{let t=(await fetch(e,{method:"HEAD"})).headers.get("Content-Type");return Soe.some((e=>t===e))}catch(t){return console.error("Error while trying to get the Content-Type of the manifest",t),!1}}(this.castSrc)){let e=await async function(e){try{let t=await(await fetch(e)).text(),n=t,r=function(e){let t=e.split("\n"),n=[];for(let r=0;r<t.length;r++)if(t[r].trim().startsWith("#EXT-X-STREAM-INF")){let e=t[r+1]?t[r+1].trim():"";e&&!e.startsWith("#")&&n.push(e)}return n}(t);if(r.length>0){let t=new URL(r[0],e).toString();n=await(await fetch(t)).text()}let i=function(e){return e.split("\n").find((e=>!e.trim().startsWith("#")&&""!==e.trim()))}(n);return function(e){if(!e)return;let t=e.match(/\.([a-zA-Z0-9]+)(?:\?.*)?$/);return t?t[1]:null}(i)}catch(t){return void console.error("Error while trying to parse the manifest playlist",t)}}(this.castSrc);((null==e?void 0:e.includes("m4s"))||(null==e?void 0:e.includes("mp4")))&&(i.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,i.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4)}let u=new chrome.cast.media.LoadRequest(i);u.currentTime=null!=(e=super.currentTime)?e:0,u.autoplay=!Zie(this,r).paused,u.activeTrackIds=a,await(null==(n=koe())?void 0:n.loadMedia(u)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(!Zie(this,s,l))return super.play();Zie(this,s,l).isPaused&&(null==(e=Zie(this,s,l).controller)||e.playOrPause())}pause(){var e;Zie(this,s,l)?Zie(this,s,l).isPaused||null==(e=Zie(this,s,l).controller)||e.playOrPause():super.pause()}get castOptions(){return Zie(this,i)}get castReceiver(){var e;return null!=(e=this.getAttribute("cast-receiver"))?e:void 0}set castReceiver(e){this.castReceiver!=e&&this.setAttribute("cast-receiver",`${e}`)}get castSrc(){var e,t,n;return null!=(n=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?n:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e,t;return null!=(t=null!=(e=this.getAttribute("cast-stream-type"))?e:this.streamType)?t:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get castCustomData(){return Zie(this,o)}set castCustomData(e){let t=typeof e;["object","undefined"].includes(t)?toe(this,o,e):console.error(`castCustomData must be nullish or an object but value was of type ${t}`)}get readyState(){if(Zie(this,s,l))switch(Zie(this,s,l).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return Zie(this,s,l)?Zie(this,s,l).isPaused:super.paused}get muted(){var e;return Zie(this,s,l)?null==(e=Zie(this,s,l))?void 0:e.isMuted:super.muted}set muted(e){var t;Zie(this,s,l)?(e&&!Zie(this,s,l).isMuted||!e&&Zie(this,s,l).isMuted)&&(null==(t=Zie(this,s,l).controller)||t.muteOrUnmute()):super.muted=e}get volume(){var e,t;return Zie(this,s,l)?null!=(t=null==(e=Zie(this,s,l))?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(Zie(this,s,l))return Zie(this,s,l).volumeLevel=+e,void(null==(t=Zie(this,s,l).controller)||t.setVolumeLevel());super.volume=e}get duration(){var e,t,n;return Zie(this,s,l)&&null!=(e=Zie(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=Zie(this,s,l))?void 0:t.duration)?n:NaN:super.duration}get currentTime(){var e,t,n;return Zie(this,s,l)&&null!=(e=Zie(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=Zie(this,s,l))?void 0:t.currentTime)?n:0:super.currentTime}set currentTime(e){var t;if(Zie(this,s,l))return Zie(this,s,l).currentTime=e,void(null==(t=Zie(this,s,l).controller)||t.seek());super.currentTime=e}},r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakSet,l=function(){var e,t;return null==(t=null==(e=xoe.get(this.remote))?void 0:e.getCastPlayer)?void 0:t.call(e)},c=async function(){Zie(this,r).paused=roe(n.prototype,this,"paused"),roe(n.prototype,this,"pause").call(this),this.muted=roe(n.prototype,this,"muted");try{await this.load()}catch(ZA){console.error(ZA)}},Qie(n,"observedAttributes",[...null!=(t=e.observedAttributes)?t:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),n},Joe=class extends Event{constructor(e,t){super(e),Qie(this,"track"),this.track=t.track}},Zoe=new WeakMap;function eae(e){var t;return null!=(t=Zoe.get(e))?t:function(e,t){let n=Zoe.get(e);return n||Zoe.set(e,n={}),Object.assign(n,t)}(e,{})}function tae(e,t){let n=e.videoTracks;eae(t).media=e,eae(t).renditionSet||(eae(t).renditionSet=new Set);let r=eae(n).trackSet;r.add(t);let i=r.size-1;i in lae.prototype||Object.defineProperty(lae.prototype,i,{get(){return[...eae(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new Joe("addtrack",{track:t}))}))}function nae(e){var t;let n=null==(t=eae(e).media)?void 0:t.videoTracks;n&&(eae(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new Joe("removetrack",{track:e}))})))}var rae,iae,oae,aae,sae,lae=class extends EventTarget{constructor(){super(),eoe(this,aae),eoe(this,rae),eoe(this,iae),eoe(this,oae),eae(this).trackSet=new Set}[Symbol.iterator](){return Zie(this,aae,sae).values()}get length(){return Zie(this,aae,sae).size}getTrackById(e){var t;return null!=(t=[...Zie(this,aae,sae)].find((t=>t.id===e)))?t:null}get selectedIndex(){return[...Zie(this,aae,sae)].findIndex((e=>e.selected))}get onaddtrack(){return Zie(this,rae)}set onaddtrack(e){Zie(this,rae)&&(this.removeEventListener("addtrack",Zie(this,rae)),toe(this,rae,void 0)),"function"==typeof e&&(toe(this,rae,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Zie(this,iae)}set onremovetrack(e){Zie(this,iae)&&(this.removeEventListener("removetrack",Zie(this,iae)),toe(this,iae,void 0)),"function"==typeof e&&(toe(this,iae,e),this.addEventListener("removetrack",e))}get onchange(){return Zie(this,oae)}set onchange(e){Zie(this,oae)&&(this.removeEventListener("change",Zie(this,oae)),toe(this,oae,void 0)),"function"==typeof e&&(toe(this,oae,e),this.addEventListener("change",e))}};rae=new WeakMap,iae=new WeakMap,oae=new WeakMap,aae=new WeakSet,sae=function(){return eae(this).trackSet};var cae=class extends Event{constructor(e,t){super(e),Qie(this,"rendition"),this.rendition=t.rendition}};function uae(e){return[...eae(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...eae(e).renditionSet]))}var dae,hae,pae,mae=class extends EventTarget{constructor(){super(...arguments),eoe(this,dae),eoe(this,hae),eoe(this,pae)}[Symbol.iterator](){return uae(this).values()}get length(){return uae(this).length}getRenditionById(e){var t;return null!=(t=uae(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return uae(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of uae(this).entries())n.selected=t===e}get onaddrendition(){return Zie(this,dae)}set onaddrendition(e){Zie(this,dae)&&(this.removeEventListener("addrendition",Zie(this,dae)),toe(this,dae,void 0)),"function"==typeof e&&(toe(this,dae,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Zie(this,hae)}set onremoverendition(e){Zie(this,hae)&&(this.removeEventListener("removerendition",Zie(this,hae)),toe(this,hae,void 0)),"function"==typeof e&&(toe(this,hae,e),this.addEventListener("removerendition",e))}get onchange(){return Zie(this,pae)}set onchange(e){Zie(this,pae)&&(this.removeEventListener("change",Zie(this,pae)),toe(this,pae,void 0)),"function"==typeof e&&(toe(this,pae,e),this.addEventListener("change",e))}};dae=new WeakMap,hae=new WeakMap,pae=new WeakMap;var fae,gae=class{constructor(){Qie(this,"src"),Qie(this,"id"),Qie(this,"width"),Qie(this,"height"),Qie(this,"bitrate"),Qie(this,"frameRate"),Qie(this,"codec"),eoe(this,fae,!1)}get selected(){return Zie(this,fae)}set selected(e){Zie(this,fae)!==e&&(toe(this,fae,e),function(e){let t=eae(e).media.videoRenditions;!t||eae(t).changeRequested||(eae(t).changeRequested=!0,queueMicrotask((()=>{delete eae(t).changeRequested,eae(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}};fae=new WeakMap;var vae,yae=class{constructor(){Qie(this,"id"),Qie(this,"kind"),Qie(this,"label",""),Qie(this,"language",""),Qie(this,"sourceBuffer"),eoe(this,vae,!1)}addRendition(e,t,n,r,i,o){let a=new gae;return a.src=e,a.width=t,a.height=n,a.frameRate=o,a.bitrate=i,a.codec=r,function(e,t){let n=eae(e).media.videoRenditions;eae(t).media=eae(e).media,eae(t).track=e;let r=eae(e).renditionSet;r.add(t);let i=r.size-1;i in mae.prototype||Object.defineProperty(mae.prototype,i,{get(){return uae(this)[i]}}),queueMicrotask((()=>{e.selected&&n.dispatchEvent(new cae("addrendition",{rendition:t}))}))}(this,a),a}removeRendition(e){!function(e){let t=eae(e).media.videoRenditions,n=eae(e).track;eae(n).renditionSet.delete(e),queueMicrotask((()=>{eae(e).track.selected&&t.dispatchEvent(new cae("removerendition",{rendition:e}))}))}(e)}get selected(){return Zie(this,vae)}set selected(e){Zie(this,vae)!==e&&(toe(this,vae,e),!0===e&&function(e){var t;let n=null!=(t=eae(e).media.videoTracks)?t:[],r=!1;for(let i of n)i!==e&&(i.selected=!1,r=!0);if(r){if(eae(n).changeRequested)return;eae(n).changeRequested=!0,queueMicrotask((()=>{delete eae(n).changeRequested,n.dispatchEvent(new Event("change"))}))}}(this))}};function bae(e){return[...eae(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...eae(e).renditionSet]))}vae=new WeakMap;var wae,xae,Eae,Aae=class extends EventTarget{constructor(){super(...arguments),eoe(this,wae),eoe(this,xae),eoe(this,Eae)}[Symbol.iterator](){return bae(this).values()}get length(){return bae(this).length}getRenditionById(e){var t;return null!=(t=bae(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return bae(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of bae(this).entries())n.selected=t===e}get onaddrendition(){return Zie(this,wae)}set onaddrendition(e){Zie(this,wae)&&(this.removeEventListener("addrendition",Zie(this,wae)),toe(this,wae,void 0)),"function"==typeof e&&(toe(this,wae,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Zie(this,xae)}set onremoverendition(e){Zie(this,xae)&&(this.removeEventListener("removerendition",Zie(this,xae)),toe(this,xae,void 0)),"function"==typeof e&&(toe(this,xae,e),this.addEventListener("removerendition",e))}get onchange(){return Zie(this,Eae)}set onchange(e){Zie(this,Eae)&&(this.removeEventListener("change",Zie(this,Eae)),toe(this,Eae,void 0)),"function"==typeof e&&(toe(this,Eae,e),this.addEventListener("change",e))}};wae=new WeakMap,xae=new WeakMap,Eae=new WeakMap;var Sae,Tae=class{constructor(){Qie(this,"src"),Qie(this,"id"),Qie(this,"bitrate"),Qie(this,"codec"),eoe(this,Sae,!1)}get selected(){return Zie(this,Sae)}set selected(e){Zie(this,Sae)!==e&&(toe(this,Sae,e),function(e){let t=eae(e).media.audioRenditions;!t||eae(t).changeRequested||(eae(t).changeRequested=!0,queueMicrotask((()=>{delete eae(t).changeRequested,eae(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}};function _ae(e,t){let n=e.audioTracks;eae(t).media=e,eae(t).renditionSet||(eae(t).renditionSet=new Set);let r=eae(n).trackSet;r.add(t);let i=r.size-1;i in Pae.prototype||Object.defineProperty(Pae.prototype,i,{get(){return[...eae(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new Joe("addtrack",{track:t}))}))}function kae(e){var t;let n=null==(t=eae(e).media)?void 0:t.audioTracks;n&&(eae(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new Joe("removetrack",{track:e}))})))}Sae=new WeakMap;var Cae,Iae,Rae,Dae,Lae,Pae=class extends EventTarget{constructor(){super(),eoe(this,Dae),eoe(this,Cae),eoe(this,Iae),eoe(this,Rae),eae(this).trackSet=new Set}[Symbol.iterator](){return Zie(this,Dae,Lae).values()}get length(){return Zie(this,Dae,Lae).size}getTrackById(e){var t;return null!=(t=[...Zie(this,Dae,Lae)].find((t=>t.id===e)))?t:null}get onaddtrack(){return Zie(this,Cae)}set onaddtrack(e){Zie(this,Cae)&&(this.removeEventListener("addtrack",Zie(this,Cae)),toe(this,Cae,void 0)),"function"==typeof e&&(toe(this,Cae,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Zie(this,Iae)}set onremovetrack(e){Zie(this,Iae)&&(this.removeEventListener("removetrack",Zie(this,Iae)),toe(this,Iae,void 0)),"function"==typeof e&&(toe(this,Iae,e),this.addEventListener("removetrack",e))}get onchange(){return Zie(this,Rae)}set onchange(e){Zie(this,Rae)&&(this.removeEventListener("change",Zie(this,Rae)),toe(this,Rae,void 0)),"function"==typeof e&&(toe(this,Rae,e),this.addEventListener("change",e))}};Cae=new WeakMap,Iae=new WeakMap,Rae=new WeakMap,Dae=new WeakSet,Lae=function(){return eae(this).trackSet};var Mae,Oae=class{constructor(){Qie(this,"id"),Qie(this,"kind"),Qie(this,"label",""),Qie(this,"language",""),Qie(this,"sourceBuffer"),eoe(this,Mae,!1)}addRendition(e,t,n){let r=new Tae;return r.src=e,r.codec=t,r.bitrate=n,function(e,t){let n=eae(e).media.audioRenditions;eae(t).media=eae(e).media,eae(t).track=e;let r=eae(e).renditionSet;r.add(t);let i=r.size-1;i in Aae.prototype||Object.defineProperty(Aae.prototype,i,{get(){return bae(this)[i]}}),queueMicrotask((()=>{e.enabled&&n.dispatchEvent(new cae("addrendition",{rendition:t}))}))}(this,r),r}removeRendition(e){!function(e){let t=eae(e).media.audioRenditions,n=eae(e).track;eae(n).renditionSet.delete(e),queueMicrotask((()=>{eae(e).track.enabled&&t.dispatchEvent(new cae("removerendition",{rendition:e}))}))}(e)}get enabled(){return Zie(this,Mae)}set enabled(e){Zie(this,Mae)!==e&&(toe(this,Mae,e),function(e){let t=eae(e).media.audioTracks;!t||eae(t).changeRequested||(eae(t).changeRequested=!0,queueMicrotask((()=>{delete eae(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}};Mae=new WeakMap;var Nae=Uae(globalThis.HTMLMediaElement,"video"),jae=Uae(globalThis.HTMLMediaElement,"audio");function Fae(e){if(null==e||!e.prototype)return e;let t=Uae(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){var t;let n=eae(e).videoTracks;if(!n&&(n=new lae,eae(e).videoTracks=n,Nae)){let r=Nae.call(null!=(t=e.nativeEl)?t:e);for(let t of r)tae(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof yae)))for(let e of r)nae(e);else tae(e,t.track)})),r.addEventListener("removetrack",(e=>{nae(e.track)}))}return n}(this)}});let n=Uae(e,"audio");(!n||`${n}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){var t;let n=eae(e).audioTracks;if(!n&&(n=new Pae,eae(e).audioTracks=n,jae)){let r=jae.call(null!=(t=e.nativeEl)?t:e);for(let t of r)_ae(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof Oae)))for(let e of r)kae(e);else _ae(e,t.track)})),r.addEventListener("removetrack",(e=>{kae(e.track)}))}return n}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new yae;return r.kind=e,r.label=t,r.language=n,tae(this,r),r}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=nae),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Oae;return r.kind=e,r.label=t,r.language=n,_ae(this,r),r}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=kae),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return r(this)}});let r=e=>{let t=eae(e).videoRenditions;return t||(t=new mae,eae(t).media=e,eae(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return i(this)}});let i=e=>{let t=eae(e).audioRenditions;return t||(t=new Aae,eae(t).media=e,eae(e).audioRenditions=t),t};return e}function Uae(e,t){var n;if(null!=e&&e.prototype)return null==(n=Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`))?void 0:n.get}hoe.push("castchange","entercast","leavecast");var Bae,$ae,Vae,Wae,zae,Hae,qae,Gae,Kae,Yae,Xae,Qae={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},Jae=Object.values(Qae),Zae=doe,ese="mux-video",tse=class extends woe{constructor(){super(),eoe(this,Yae),eoe(this,Bae),eoe(this,$ae),eoe(this,Vae),eoe(this,Wae,{}),eoe(this,zae,{}),eoe(this,Hae),eoe(this,qae),eoe(this,Gae),eoe(this,Kae),toe(this,Vae,yie())}static get NAME(){return ese}static get VERSION(){return Zae}static get observedAttributes(){var e;return[...Jae,...null!=(e=woe.observedAttributes)?e:[]]}static getTemplateHTML(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=super.getTemplateHTML(e),n="false"!==e.logo&&void 0!==e.logo,r=e.logo&&""!==e.logo,i=e.logo;return`\n      ${t}\n      ${n?`\n      <style>\n        :host {\n          position: relative;\n        }\n        :host slot[name="logo"] {\n          display: flex;\n          justify-content: end;\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n\n        }\n         :host slot[name="logo"] .logo{\n          width: 5rem;\n          pointer-events: none;\n          user-select: none;\n         }\n      </style>\n      <slot name="logo">\n        ${r?`<img class="logo" part="logo" src="${i}" />`:'\n<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="logo" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>'}\n      </slot>\n    `:""}\n    `}get preferCmcd(){var e;return null!=(e=this.getAttribute(Qae.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?hre.includes(e)?this.setAttribute(Qae.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${hre.join()}`):this.removeAttribute(Qae.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(Qae.PLAYER_INIT_TIME)?+this.getAttribute(Qae.PLAYER_INIT_TIME):Zie(this,Vae)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(Qae.PLAYER_INIT_TIME):this.setAttribute(Qae.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=Zie(this,Gae))?e:ese}set playerSoftwareName(e){toe(this,Gae,e)}get playerSoftwareVersion(){var e;return null!=(e=Zie(this,qae))?e:Zae}set playerSoftwareVersion(e){toe(this,qae,e)}get _hls(){var e;return null==(e=Zie(this,Bae))?void 0:e.engine}get mux(){var e;return null==(e=this.nativeEl)?void 0:e.mux}get error(){var e;return null!=(e=Aie(this.nativeEl))?e:null}get errorTranslator(){return Zie(this,Kae)}set errorTranslator(e){toe(this,Kae,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(Qae.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(Qae.TYPE,e):this.removeAttribute(Qae.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(Qae.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(Qae.DEBUG,""):this.removeAttribute(Qae.DEBUG))}get disableTracking(){return this.hasAttribute(Qae.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(Qae.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(Qae.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(Qae.DISABLE_COOKIES,""):this.removeAttribute(Qae.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(Qae.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(Qae.START_TIME):this.setAttribute(Qae.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(Qae.PLAYBACK_ID)?this.getAttribute(Qae.PLAYBACK_ID):null!=(e=Eie(this.src))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(Qae.PLAYBACK_ID,e):this.removeAttribute(Qae.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(Qae.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(Qae.MAX_RESOLUTION,e):this.removeAttribute(Qae.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(Qae.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(Qae.MIN_RESOLUTION,e):this.removeAttribute(Qae.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(Qae.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(Qae.RENDITION_ORDER,e):this.removeAttribute(Qae.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(Qae.PROGRAM_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programStartTime(e){null==e?this.removeAttribute(Qae.PROGRAM_START_TIME):this.setAttribute(Qae.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(Qae.PROGRAM_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programEndTime(e){null==e?this.removeAttribute(Qae.PROGRAM_END_TIME):this.setAttribute(Qae.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(Qae.ASSET_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetStartTime(e){null==e?this.removeAttribute(Qae.ASSET_START_TIME):this.setAttribute(Qae.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(Qae.ASSET_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetEndTime(e){null==e?this.removeAttribute(Qae.ASSET_END_TIME):this.setAttribute(Qae.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return null!=(e=this.getAttribute(Qae.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(Qae.CUSTOM_DOMAIN,e):this.removeAttribute(Qae.CUSTOM_DOMAIN))}get drmToken(){var e;return null!=(e=this.getAttribute(Qae.DRM_TOKEN))?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(Qae.DRM_TOKEN,e):this.removeAttribute(Qae.DRM_TOKEN))}get playbackToken(){var e,t,n,r;if(this.hasAttribute(Qae.PLAYBACK_TOKEN))return null!=(e=this.getAttribute(Qae.PLAYBACK_TOKEN))?e:void 0;if(this.hasAttribute(Qae.PLAYBACK_ID)){let[,e]=vre(null!=(t=this.playbackId)?t:"");return null!=(n=new URLSearchParams(e).get("token"))?n:void 0}return this.src&&null!=(r=new URLSearchParams(this.src).get("token"))?r:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(Qae.PLAYBACK_TOKEN,e):this.removeAttribute(Qae.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(Qae.PLAYBACK_TOKEN),t=this.getAttribute(Qae.DRM_TOKEN);return{...Zie(this,zae),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{}}}set tokens(e){toe(this,zae,null!=e?e:{})}get ended(){return Iie(this.nativeEl,this._hls)}get envKey(){var e;return null!=(e=this.getAttribute(Qae.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(Qae.ENV_KEY,e):this.removeAttribute(Qae.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(Qae.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(Qae.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(Qae.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(Qae.STREAM_TYPE))?e:Sie(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(Qae.STREAM_TYPE,e):this.removeAttribute(Qae.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(Qae.TARGET_LIVE_WINDOW)?+this.getAttribute(Qae.TARGET_LIVE_WINDOW):(e=>{var t,n;return null!=(n=null==(t=mie.get(e))?void 0:t.targetLiveWindow)?n:Number.NaN})(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(Qae.TARGET_LIVE_WINDOW):this.setAttribute(Qae.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e,t;if(this.hasAttribute(Qae.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,r=null!=(e=this.nativeEl.seekable.end(0))?e:0,i=null!=(t=this.nativeEl.seekable.start(0))?t:0;return Math.max(i,r-n)}return(e=>{var t;let n=null==(t=mie.get(e))?void 0:t.liveEdgeStartOffset;if("number"!=typeof n)return Number.NaN;let r=Tie(e);return r.length?r.end(r.length-1)-n:Number.NaN})(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(Qae.LIVE_EDGE_OFFSET))return+this.getAttribute(Qae.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(null==e?this.removeAttribute(Qae.LIVE_EDGE_OFFSET):this.setAttribute(Qae.LIVE_EDGE_OFFSET,""+ +e))}get seekable(){return Tie(this.nativeEl)}async addCuePoints(e){return jre(this.nativeEl,e)}get activeCuePoint(){return Ure(this.nativeEl)}get cuePoints(){return function(e){let t=Pre(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Ore}).label,"metadata");return null!=t&&t.cues?Array.from(t.cues,(e=>Fre(e))):[]}(this.nativeEl)}async addChapters(e){return Wre(this.nativeEl,e)}get activeChapter(){return zre(this.nativeEl)}get chapters(){return function(e){var t;let n=Pre(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Bre}).label,"chapters");return null!=(t=null==n?void 0:n.cues)&&t.length?Array.from(n.cues,(e=>Vre(e))):[]}(this.nativeEl)}getStartDate(){return function(e,t){if(t){let n=t.playingDate;if(null!=n)return new Date(n.getTime()-1e3*e.currentTime)}return"function"==typeof e.getStartDate?e.getStartDate():new Date(NaN)}(this.nativeEl,this._hls)}get currentPdt(){return function(e,t){if(t&&t.playingDate)return t.playingDate;if("function"==typeof e.getStartDate){let t=e.getStartDate();return new Date(t.getTime()+1e3*e.currentTime)}return new Date(NaN)}(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(Qae.PREFER_PLAYBACK);if(e===cre||e===ure)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===cre||e===ure?this.setAttribute(Qae.PREFER_PLAYBACK,e):this.removeAttribute(Qae.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter((e=>e.startsWith("metadata-")&&![Qae.METADATA_URL].includes(e))).reduce(((e,t)=>{let n=this.getAttribute(t);return null!=n&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e}),{}),...Zie(this,Wae)}}set metadata(e){toe(this,Wae,null!=e?e:{}),this.mux&&this.mux.emit("hb",Zie(this,Wae))}get _hlsConfig(){return Zie(this,Hae)}set _hlsConfig(e){toe(this,Hae,e)}get logo(){return this.getAttribute(Qae.LOGO)}set logo(e){e?this.setAttribute(Qae.LOGO,e):this.removeAttribute(Qae.LOGO)}load(){toe(this,Bae,Rie(this,this.nativeEl,Zie(this,Bae)))}unload(){Die(this.nativeEl,Zie(this,Bae)),toe(this,Bae,void 0)}attributeChangedCallback(e,t,n){var r,i;switch(woe.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case Qae.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=n?n:void 0;break;case Qae.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=n?n:void 0;break;case"src":{let e=!!t,r=!!n;!e&&r?noe(this,Yae,Xae).call(this):e&&!r?this.unload():e&&r&&(this.unload(),noe(this,Yae,Xae).call(this));break}case"autoplay":if(n===t)break;null==(r=Zie(this,Bae))||r.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;null==(i=Zie(this,Bae))||i.setPreload(n);break;case Qae.PLAYBACK_ID:this.src=wie(this);break;case Qae.DEBUG:{let e=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=e);break}case Qae.METADATA_URL:n&&fetch(n).then((e=>e.json())).then((e=>this.metadata=e)).catch((()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`)));break;case Qae.STREAM_TYPE:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case Qae.TARGET_LIVE_WINDOW:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}))}}connectedCallback(){var e;null==(e=super.connectedCallback)||e.call(this),this.nativeEl&&this.src&&!Zie(this,Bae)&&noe(this,Yae,Xae).call(this)}disconnectedCallback(){this.unload()}};Bae=new WeakMap,$ae=new WeakMap,Vae=new WeakMap,Wae=new WeakMap,zae=new WeakMap,Hae=new WeakMap,qae=new WeakMap,Gae=new WeakMap,Kae=new WeakMap,Yae=new WeakSet,Xae=async function(){Zie(this,$ae)||(await toe(this,$ae,Promise.resolve()),toe(this,$ae,null),this.load())};var nse,rse=class extends(Qoe(Fae(tse))){constructor(){super(...arguments),eoe(this,nse)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return null!=(e=Zie(this,nse))?e:this.muxCastCustomData}set castCustomData(e){toe(this,nse,e)}};nse=new WeakMap,uoe.customElements.get("mux-video")||(uoe.customElements.define("mux-video",rse),uoe.MuxVideoElement=rse);var ise,ose,ase,sse,lse,cse,use,dse,hse,pse,mse,fse=rse,gse=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},vse=(e,t,n)=>(gse(e,t,"read from private field"),n?n.call(e):t.get(e)),yse=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bse=(e,t,n,r)=>(gse(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const wse={processCallback(e,t,n){if(n)for(const[r,i]of t)if(r in n){const e=n[r];"boolean"===typeof e&&i instanceof Cse&&"boolean"===typeof i.element[i.attributeName]?i.booleanValue=e:"function"===typeof e&&i instanceof Cse?i.element[i.attributeName]=e:i.value=e}}};class xse extends cY.DocumentFragment{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wse;var r;super(),yse(this,ise,void 0),yse(this,ose,void 0),this.append(e.content.cloneNode(!0)),bse(this,ise,Ese(this)),bse(this,ose,n),null==(r=n.createCallback)||r.call(n,this,vse(this,ise),t),n.processCallback(this,vse(this,ise),t)}update(e){vse(this,ose).processCallback(this,vse(this,ise),e)}}ise=new WeakMap,ose=new WeakMap;const Ese=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of e.attributes||[])if(i.value.includes("{{")){const o=new kse;for([t,n]of Sse(i.value))if(t){const t=new Cse(e,i.name,i.namespaceURI);o.append(t),r.push([n,t])}else o.append(n);i.value=o.toString()}for(const i of e.childNodes)if(1!==i.nodeType||i instanceof HTMLTemplateElement){const o=i.data;if(1===i.nodeType||o.includes("{{")){const a=[];if(o)for([t,n]of Sse(o))if(t){const t=new Ise(e);a.push(t),r.push([n,t])}else a.push(new Text(n));else if(i instanceof HTMLTemplateElement){const t=new Rse(e,i);a.push(t),r.push([t.expression,t])}i.replaceWith(...a.flatMap((e=>e.replacementNodes||[e])))}}else Ese(i,r);return r},Ase={},Sse=e=>{let t,n="",r=0,i=Ase[e],o=0;if(i)return i;for(i=[];t=e[o];o++)"{"===t&&"{"===e[o+1]&&"\\"!==e[o-1]&&e[o+2]&&1==++r?(n&&i.push([0,n]),n="",o++):"}"!==t||"}"!==e[o+1]||"\\"===e[o-1]||--r?n+=t||"":(i.push([1,n.trim()]),n="",o++);return n&&i.push([0,(r>0?"{{":"")+n]),Ase[e]=i};class Tse{get value(){return""}set value(e){}toString(){return this.value}}const _se=new WeakMap;class kse{constructor(){yse(this,ase,[])}[Symbol.iterator](){return vse(this,ase).values()}get length(){return vse(this,ase).length}item(e){return vse(this,ase)[e]}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)r instanceof Cse&&_se.set(r,this),vse(this,ase).push(r)}toString(){return vse(this,ase).join("")}}ase=new WeakMap;class Cse extends Tse{constructor(e,t,n){super(),yse(this,dse),yse(this,sse,""),yse(this,lse,void 0),yse(this,cse,void 0),yse(this,use,void 0),bse(this,lse,e),bse(this,cse,t),bse(this,use,n)}get attributeName(){return vse(this,cse)}get attributeNamespace(){return vse(this,use)}get element(){return vse(this,lse)}get value(){return vse(this,sse)}set value(e){vse(this,sse)!==e&&(bse(this,sse,e),vse(this,dse,hse)&&1!==vse(this,dse,hse).length?vse(this,lse).setAttributeNS(vse(this,use),vse(this,cse),vse(this,dse,hse).toString()):null==e?vse(this,lse).removeAttributeNS(vse(this,use),vse(this,cse)):vse(this,lse).setAttributeNS(vse(this,use),vse(this,cse),e))}get booleanValue(){return vse(this,lse).hasAttributeNS(vse(this,use),vse(this,cse))}set booleanValue(e){if(vse(this,dse,hse)&&1!==vse(this,dse,hse).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}sse=new WeakMap,lse=new WeakMap,cse=new WeakMap,use=new WeakMap,dse=new WeakSet,hse=function(){return _se.get(this)};class Ise extends Tse{constructor(e,t){super(),yse(this,pse,void 0),yse(this,mse,void 0),bse(this,pse,e),bse(this,mse,t?[...t]:[new Text])}get replacementNodes(){return vse(this,mse)}get parentNode(){return vse(this,pse)}get nextSibling(){return vse(this,mse)[vse(this,mse).length-1].nextSibling}get previousSibling(){return vse(this,mse)[0].previousSibling}get value(){return vse(this,mse).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}replace(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.flat().flatMap((e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]));r.length||r.push(new Text),bse(this,mse,function(e,t,n){let r,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0,l=n.length,c=t.length;for(;s<l&&s<c&&t[s]==n[s];)s++;for(;s<l&&s<c&&n[l-1]==t[c-1];)a=n[(--c,--l)];if(s==c)for(;s<l;)e.insertBefore(n[s++],a);if(s==l)for(;s<c;)e.removeChild(t[s++]);else{for(r=t[s];s<l;)o=n[s++],i=r?r.nextSibling:a,r==o?r=i:s<l&&n[s]==i?(e.replaceChild(o,r),r=i):e.insertBefore(o,r);for(;r!=a;)i=r.nextSibling,e.removeChild(r),r=i}return n}(vse(this,mse)[0].parentNode,vse(this,mse),r,this.nextSibling))}}pse=new WeakMap,mse=new WeakMap;class Rse extends Ise{constructor(e,t){const n=t.getAttribute("directive")||t.getAttribute("type");let r=t.getAttribute("expression")||t.getAttribute(n)||"";r.startsWith("{{")&&(r=r.trim().slice(2,-2).trim()),super(e),this.expression=r,this.template=t,this.directive=n}}const Dse={string:e=>String(e)};class Lse{constructor(e){this.template=e,this.state=void 0}}const Pse=new WeakMap,Mse=new WeakMap,Ose={partial:(e,t)=>{t[e.expression]=new Lse(e.template)},if:(e,t)=>{var n;if(Use(e.expression,t))if(Pse.get(e)!==e.template){Pse.set(e,e.template);const n=new xse(e.template,t,jse);e.replace(n),Mse.set(e,n)}else null==(n=Mse.get(e))||n.update(t);else e.replace(""),Pse.delete(e),Mse.delete(e)}},Nse=Object.keys(Ose),jse={processCallback(e,t,n){var r,i;if(n)for(const[o,a]of t){if(a instanceof Rse){if(!a.directive){const e=Nse.find((e=>a.template.hasAttribute(e)));e&&(a.directive=e,a.expression=a.template.getAttribute(e))}null==(r=Ose[a.directive])||r.call(Ose,a,n);continue}let e=Use(o,n);e instanceof Lse?Pse.get(a)!==e.template?(Pse.set(a,e.template),e=new xse(e.template,e.state,jse),a.value=e,Mse.set(a,e)):null==(i=Mse.get(a))||i.update(e.state):e?(a instanceof Cse&&a.attributeName.startsWith("aria-")&&(e=String(e)),a instanceof Cse?"boolean"===typeof e?a.booleanValue=e:"function"===typeof e?a.element[a.attributeName]=e:a.value=e:(a.value=e,Pse.delete(a),Mse.delete(a))):a instanceof Cse?a.value=void 0:(a.value=void 0,Pse.delete(a),Mse.delete(a))}}},Fse={"!":e=>!e,"!!":e=>!!e,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"??":(e,t)=>null!=e?e:t,"|":(e,t)=>{var n;return null==(n=Dse[t])?void 0:n.call(Dse,e)}};function Use(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,o,a,s,l;const c=function(e){return function(e,t){let n,r,i;const o=[];for(;e;){i=null,n=e.length;for(const o in t)r=t[o].exec(e),r&&r.index<n&&(i={token:r[0],type:o,matches:r.slice(1)},n=r.index);n&&o.push({token:e.substr(0,n),type:void 0}),i&&o.push(i),e=e.substr(n+(i?i.token.length:0))}return o}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter((e=>{let{type:t}=e;return"ws"!==t}))}(e);if(0===c.length||c.some((e=>{let{type:t}=e;return!t})))return Bse(e);if(">"===(null==(n=c[0])?void 0:n.token)){const n=t[null==(r=c[1])?void 0:r.token];if(!n)return Bse(e);const s={...t};n.state=s;const l=c.slice(2);for(let e=0;e<l.length;e+=3){const n=null==(i=l[e])?void 0:i.token,r=null==(o=l[e+1])?void 0:o.token,c=null==(a=l[e+2])?void 0:a.token;n&&"="===r&&(s[n]=Vse(c,t))}return n}if(1===c.length)return $se(c[0])?Vse(c[0].token,t):Bse(e);if(2===c.length){const n=null==(s=c[0])?void 0:s.token,r=Fse[n];if(!r||!$se(c[1]))return Bse(e);return r(Vse(c[1].token,t))}if(3===c.length){const n=null==(l=c[1])?void 0:l.token,r=Fse[n];if(!r||!$se(c[0])||!$se(c[2]))return Bse(e);const i=Vse(c[0].token,t);if("|"===n)return r(i,c[2].token);return r(i,Vse(c[2].token,t))}}function Bse(e){return console.warn(`Warning: invalid expression \`${e}\``),!1}function $se(e){let{type:t}=e;return["number","boolean","string","param"].includes(t)}function Vse(e,t){const n=e[0],r=e.slice(-1);return"true"===e||"false"===e?"true"===e:n===r&&["'",'"'].includes(n)?e.slice(1,-1):qK(e)?parseFloat(e):t[e]}var Wse,zse,Hse,qse,Gse,Kse,Yse,Xse=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Qse=(e,t,n)=>(Xse(e,t,"read from private field"),n?n.call(e):t.get(e)),Jse=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Zse=(e,t,n,r)=>(Xse(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ele=(e,t,n)=>(Xse(e,t,"access private method"),n);const tle={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},nle=uY.createElement("template");nle.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 0;\n    }\n\n    media-controller {\n      width: 100%;\n      height: 100%;\n    }\n\n    media-captions-button:not([mediasubtitleslist]),\n    media-captions-menu:not([mediasubtitleslist]),\n    media-captions-menu-button:not([mediasubtitleslist]),\n    media-audio-track-menu[mediaaudiotrackunavailable],\n    media-audio-track-menu-button[mediaaudiotrackunavailable],\n    media-rendition-menu[mediarenditionunavailable],\n    media-rendition-menu-button[mediarenditionunavailable],\n    media-volume-range[mediavolumeunavailable],\n    media-airplay-button[mediaairplayunavailable],\n    media-fullscreen-button[mediafullscreenunavailable],\n    media-cast-button[mediacastunavailable],\n    media-pip-button[mediapipunavailable] {\n      display: none;\n    }\n  </style>\n";class rle extends cY.HTMLElement{constructor(){super(),Jse(this,qse),Jse(this,Kse),Jse(this,Wse,void 0),Jse(this,zse,void 0),Jse(this,Hse,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver((e=>{var t;this.mediaController&&!(null==(t=this.mediaController)?void 0:t.breakpointsComputed)||e.some((e=>{const t=e.target;return t===this||"media-controller"===t.localName&&(!!tle[e.attributeName]||!!e.attributeName.startsWith("breakpoint"))}))&&this.render()}));e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(IK.BREAKPOINTS_COMPUTED,this.render),ele(this,qse,Gse).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return null!=(e=Qse(this,Wse))?e:this.constructor.template}set template(e){Zse(this,Hse,null),Zse(this,Wse,e),this.createRenderer()}get props(){var e,t,n;const r=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter((e=>{let{name:t}=e;return tle[t]||t.startsWith("breakpoint")})),...Array.from(this.attributes)],i={};for(const o of r){const e=null!=(n=tle[o.name])?n:zK(o.name);let{value:t}=o;null!=t?(qK(t)&&(t=parseFloat(t)),i[e]=""===t||t):i[e]=!1}return i}attributeChangedCallback(e,t,n){"template"===e&&t!=n&&ele(this,Kse,Yse).call(this)}connectedCallback(){ele(this,Kse,Yse).call(this)}createRenderer(){this.template&&this.template!==Qse(this,zse)&&(Zse(this,zse,this.template),this.renderer=new xse(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(nle.content.cloneNode(!0),this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}function ile(e){let{anchor:t,floating:n,placement:r}=e;const i=function(e){let{anchor:t,floating:n}=e;return{anchor:ole(t,n.offsetParent),floating:{x:0,y:0,width:n.offsetWidth,height:n.offsetHeight}}}({anchor:t,floating:n}),{x:o,y:a}=function(e,t){let{anchor:n,floating:r}=e;const i="x"===function(e){return["top","bottom"].includes(ale(e))?"y":"x"}(t)?"y":"x",o="y"===i?"height":"width",a=ale(t),s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,c=n[o]/2-r[o]/2;let u;switch(a){case"top":u={x:s,y:n.y-r.height};break;case"bottom":u={x:s,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:l};break;case"left":u={x:n.x-r.width,y:l};break;default:u={x:n.x,y:n.y}}switch(t.split("-")[1]){case"start":u[i]-=c;break;case"end":u[i]+=c}return u}(i,r);return{x:o,y:a}}function ole(e,t){var n;const r=e.getBoundingClientRect(),i=null!=(n=null==t?void 0:t.getBoundingClientRect())?n:{x:0,y:0};return{x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}function ale(e){return e.split("-")[0]}Wse=new WeakMap,zse=new WeakMap,Hse=new WeakMap,qse=new WeakSet,Gse=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},Kse=new WeakSet,Yse=function(){var e;const t=this.getAttribute("template");if(!t||t===Qse(this,Hse))return;const n=this.getRootNode(),r=null==(e=null==n?void 0:n.getElementById)?void 0:e.call(n,t);if(r)return Zse(this,Hse,t),Zse(this,Wse,r),void this.createRenderer();(function(e){if(!/^(\/|\.\/|https?:\/\/)/.test(e))return!1;const t=/^https?:\/\//.test(e)?void 0:location.origin;try{new URL(e,t)}catch(XA){return!1}return!0})(t)&&(Zse(this,Hse,t),async function(e){const t=await fetch(e);if(200!==t.status)throw new Error(`Failed to load resource: the server responded with a status of ${t.status}`);return t.text()}(t).then((e=>{const t=uY.createElement("template");t.innerHTML=e,Zse(this,Wse,t),this.createRenderer()})).catch(console.error))},rle.observedAttributes=["template"],rle.processor=jse,cY.customElements.get("media-theme")||cY.customElements.define("media-theme",rle);class sle extends Event{constructor(e){let{action:t="auto",relatedTarget:n,...r}=e;super("invoke",r),this.action=t,this.relatedTarget=n}}class lle extends Event{constructor(e){let{newState:t,oldState:n,...r}=e;super("toggle",r),this.newState=t,this.oldState=n}}var cle,ule,dle,hle,ple,mle,fle,gle,vle,yle,ble,wle,xle,Ele,Ale,Sle,Tle,_le,kle,Cle,Ile,Rle,Dle,Lle,Ple,Mle,Ole,Nle,jle,Fle,Ule,Ble,$le,Vle,Wle,zle,Hle,qle,Gle,Kle,Yle,Xle,Qle,Jle,Zle=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ece=(e,t,n)=>(Zle(e,t,"read from private field"),n?n.call(e):t.get(e)),tce=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},nce=(e,t,n,r)=>(Zle(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),rce=(e,t,n)=>(Zle(e,t,"access private method"),n);function ice(e){let{type:t,text:n,value:r,checked:i}=e;const o=uY.createElement("media-chrome-menu-item");o.type=null!=t?t:"",o.part.add("menu-item"),t&&o.part.add(t),o.value=r,o.checked=i;const a=uY.createElement("span");return a.textContent=n,o.append(a),o}function oce(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);if("SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n)return n=n.cloneNode(!0),n;const r=e.shadowRoot.querySelector(`[name="${t}"] > svg`);return r?r.cloneNode(!0):""}const ace=uY.createElement("template");ace.innerHTML='\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));\n      border-radius: var(--media-menu-border-radius);\n      border: var(--media-menu-border, none);\n      display: var(--media-menu-display, inline-flex);\n      transition: var(--media-menu-transition-in,\n        visibility 0s,\n        opacity .2s ease-out,\n        transform .15s ease-out,\n        left .2s ease-in-out,\n        min-width .2s ease-in-out,\n        min-height .2s ease-in-out\n      ) !important;\n      \n      visibility: var(--media-menu-visibility, visible);\n      opacity: var(--media-menu-opacity, 1);\n      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));\n      transform: var(--media-menu-transform-in, translateY(0) scale(1));\n      flex-direction: column;\n      \n      min-height: 0;\n      position: relative;\n      bottom: var(--_menu-bottom);\n      box-sizing: border-box;\n    } \n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([hidden]) {\n      transition: var(--media-menu-transition-out,\n        visibility .15s ease-in,\n        opacity .15s ease-in,\n        transform .15s ease-in\n      ) !important;\n      visibility: var(--media-menu-hidden-visibility, hidden);\n      opacity: var(--media-menu-hidden-opacity, 0);\n      max-height: var(--media-menu-hidden-max-height,\n        var(--media-menu-max-height, var(--_menu-max-height, 300px)));\n      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));\n      pointer-events: none;\n    }\n\n    :host([slot="submenu"]) {\n      background: none;\n      width: 100%;\n      min-height: 100%;\n      position: absolute;\n      bottom: 0;\n      right: -100%;\n    }\n\n    #container {\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      transition: transform .2s ease-out;\n      transform: translate(0, 0);\n    }\n\n    #container.has-expanded {\n      transition: transform .2s ease-in;\n      transform: translate(-100%, 0);\n    }\n\n    button {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      outline: inherit;\n      display: inline-flex;\n      align-items: center;\n    }\n\n    slot[name="header"][hidden] {\n      display: none;\n    }\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .7em;\n      border-bottom: 1px solid rgb(255 255 255 / .25);\n      cursor: var(--media-cursor, default);\n    }\n\n    slot[name="header"] > button[part~="back"],\n    slot[name="header"]::slotted(button[part~="back"]) {\n      cursor: var(--media-cursor, pointer);\n    }\n\n    svg[part~="back"] {\n      height: var(--media-menu-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n      margin-right: .5ch;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap);\n      flex-direction: var(--media-menu-flex-direction, column);\n      overflow: var(--media-menu-overflow, hidden auto);\n      display: flex;\n      min-height: 0;\n    }\n\n    :host([role="menu"]) slot:not([name]) {\n      padding-block: .4em;\n    }\n\n    slot:not([name])::slotted([role="menu"]) {\n      background: none;\n    }\n\n    media-chrome-menu-item > span {\n      margin-right: .5ch;\n      max-width: var(--media-menu-item-max-width);\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  </style>\n  <style id="layout-row" media="width:0">\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .5em;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap, .25em);\n      flex-direction: var(--media-menu-flex-direction, row);\n      padding-inline: .5em;\n    }\n\n    media-chrome-menu-item {\n      padding: .3em .5em;\n    }\n\n    media-chrome-menu-item[aria-checked="true"] {\n      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));\n    }\n\n    \n    media-chrome-menu-item::part(checked-indicator) {\n      display: var(--media-menu-item-checked-indicator-display, none);\n    }\n  </style>\n  <div id="container">\n    <slot name="header" hidden>\n      <button part="back button" aria-label="Back to previous menu">\n        <slot name="back-icon">\n          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">\n            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>\n          </svg>\n        </slot>\n        <slot name="title"></slot>\n      </button>\n    </slot>\n    <slot></slot>\n  </div>\n  <slot name="checked-indicator" hidden></slot>\n';const sce="style",lce="hidden",cce="disabled",uce="anchor";class dce extends cY.HTMLElement{constructor(){super(),tce(this,gle),tce(this,ble),tce(this,xle),tce(this,Ale),tce(this,Tle),tce(this,Ile),tce(this,Dle),tce(this,Ple),tce(this,Ole),tce(this,jle),tce(this,Ule),tce(this,$le),tce(this,Wle),tce(this,Hle),tce(this,Gle),tce(this,Yle),tce(this,Qle),tce(this,cle,null),tce(this,ule,null),tce(this,dle,null),tce(this,hle,new Set),tce(this,ple,void 0),tce(this,mle,!1),tce(this,fle,null),tce(this,yle,(()=>{const e=ece(this,hle),t=new Set(this.items);for(const n of e)t.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of t)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));nce(this,hle,t)})),tce(this,kle,(()=>{rce(this,Ile,Rle).call(this),rce(this,Dle,Lle).call(this,!1)})),tce(this,Cle,(()=>{rce(this,Ile,Rle).call(this)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),nce(this,ple,new MutationObserver(ece(this,yle))),ece(this,ple).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[cce,lce,sce,uce,TK.MEDIA_CONTROLLER]}static formatMenuItemText(e,t){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":rce(this,gle,vle).call(this,e);break;case"invoke":rce(this,xle,Ele).call(this,e);break;case"click":rce(this,Ple,Mle).call(this,e);break;case"toggle":rce(this,jle,Fle).call(this,e);break;case"focusout":rce(this,$le,Vle).call(this,e);break;case"keydown":rce(this,Wle,zle).call(this,e)}}connectedCallback(){var e,t;nce(this,fle,_Y(this.shadowRoot,":host")),rce(this,ble,wle).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),nce(this,cle,vY(this)),null==(t=null==(e=ece(this,cle))?void 0:e.associateElement)||t.call(e,this),this.hidden||(mY(pce(this),ece(this,kle)),mY(this,ece(this,Cle)))}disconnectedCallback(){var e,t;fY(pce(this),ece(this,kle)),fY(this,ece(this,Cle)),this.disable(),null==(t=null==(e=ece(this,cle))?void 0:e.unassociateElement)||t.call(e,this),nce(this,cle,null)}attributeChangedCallback(e,t,n){var r,i,o,a;e===lce&&n!==t?(ece(this,mle)||nce(this,mle,!0),this.hidden?rce(this,Tle,_le).call(this):rce(this,Ale,Sle).call(this),this.dispatchEvent(new lle({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===TK.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=ece(this,cle))?void 0:r.unassociateElement)||i.call(r,this),nce(this,cle,null)),n&&this.isConnected&&(nce(this,cle,vY(this)),null==(a=null==(o=ece(this,cle))?void 0:o.associateElement)||a.call(o,this))):e===cce&&n!==t?null==n?this.enable():this.disable():e===sce&&n!==t&&rce(this,ble,wle).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?null==(e=AY(this))?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(hce)}get radioGroupItems(){return this.items.filter((e=>"menuitemradio"===e.role))}get checkedItems(){return this.items.filter((e=>e.checked))}get value(){var e,t;return null!=(t=null==(e=this.checkedItems[0])?void 0:e.value)?t:""}set value(e){const t=this.items.find((t=>t.value===e));t&&rce(this,Qle,Jle).call(this,t)}focus(){if(nce(this,ule,EY()),this.items.length)return rce(this,Yle,Xle).call(this,this.items[0]),void this.items[0].focus();const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==e||e.focus()}handleSelect(e){var t;const n=rce(this,Hle,qle).call(this,e);n&&(rce(this,Qle,Jle).call(this,n,"checkbox"===n.type),ece(this,dle)&&!this.hidden&&(null==(t=ece(this,ule))||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,n;const{key:r}=e,i=this.items,o=null!=(n=null!=(t=rce(this,Hle,qle).call(this,e))?t:rce(this,Gle,Kle).call(this))?n:i[0],a=i.indexOf(o);let s=Math.max(0,a);"ArrowDown"===r?s++:"ArrowUp"===r?s--:"Home"===e.key?s=0:"End"===e.key&&(s=i.length-1),s<0&&(s=i.length-1),s>i.length-1&&(s=0),rce(this,Yle,Xle).call(this,i[s]),i[s].focus()}}function hce(e){return["menuitem","menuitemradio","menuitemcheckbox"].includes(null==e?void 0:e.role)}function pce(e){var t;return null!=(t=e.getAttribute("bounds")?xY(e,`#${e.getAttribute("bounds")}`):gY(e)||e.parentElement)?t:e}cle=new WeakMap,ule=new WeakMap,dle=new WeakMap,hle=new WeakMap,ple=new WeakMap,mle=new WeakMap,fle=new WeakMap,gle=new WeakSet,vle=function(e){const t=e.target;for(const n of t.assignedNodes({flatten:!0}))3===n.nodeType&&""===n.textContent.trim()&&n.remove();if(["header","title"].includes(t.name)){this.shadowRoot.querySelector('slot[name="header"]').hidden=0===t.assignedNodes().length}t.name||ece(this,yle).call(this)},yle=new WeakMap,ble=new WeakSet,wle=function(){var e;const t=this.shadowRoot.querySelector("#layout-row"),n=null==(e=getComputedStyle(this).getPropertyValue("--media-menu-layout"))?void 0:e.trim();t.setAttribute("media","row"===n?"":"width:0")},xle=new WeakSet,Ele=function(e){nce(this,dle,e.relatedTarget),wY(this,e.relatedTarget)||(this.hidden=!this.hidden)},Ale=new WeakSet,Sle=function(){var e;null==(e=ece(this,dle))||e.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",(()=>this.focus()),{once:!0}),mY(pce(this),ece(this,kle)),mY(this,ece(this,Cle))},Tle=new WeakSet,_le=function(){var e;null==(e=ece(this,dle))||e.setAttribute("aria-expanded","false"),fY(pce(this),ece(this,kle)),fY(this,ece(this,Cle))},kle=new WeakMap,Cle=new WeakMap,Ile=new WeakSet,Rle=function(e){if(this.hasAttribute("mediacontroller")&&!this.anchor)return;if(this.hidden||!this.anchorElement)return;const{x:t,y:n}=ile({anchor:this.anchorElement,floating:this,placement:"top-start"});null!=e||(e=this.offsetWidth);const r=pce(this).getBoundingClientRect(),i=r.width-t-e,o=r.height-n-this.offsetHeight,{style:a}=ece(this,fle);a.setProperty("position","absolute"),a.setProperty("right",`${Math.max(0,i)}px`),a.setProperty("--_menu-bottom",`${o}px`);const s=getComputedStyle(this),l=a.getPropertyValue("--_menu-bottom")===s.bottom?o:parseFloat(s.bottom),c=r.height-l-parseFloat(s.marginBottom);this.style.setProperty("--_menu-max-height",`${c}px`)},Dle=new WeakSet,Lle=function(e){const t=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),n=null==t?void 0:t.querySelector('[role="menu"]'),{style:r}=ece(this,fle);if(e||r.setProperty("--media-menu-transition-in","none"),n){const e=n.offsetHeight,r=Math.max(n.offsetWidth,t.offsetWidth);this.style.setProperty("min-width",`${r}px`),this.style.setProperty("min-height",`${e}px`),rce(this,Ile,Rle).call(this,r)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),rce(this,Ile,Rle).call(this);r.removeProperty("--media-menu-transition-in")},Ple=new WeakSet,Mle=function(e){var t;if(e.stopPropagation(),e.composedPath().includes(ece(this,Ole,Nle)))return null==(t=ece(this,ule))||t.focus(),void(this.hidden=!0);const n=rce(this,Hle,qle).call(this,e);n&&!n.hasAttribute("disabled")&&(rce(this,Yle,Xle).call(this,n),this.handleSelect(e))},Ole=new WeakSet,Nle=function(){var e;return null==(e=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))?void 0:e.find((e=>e.matches('button[part~="back"]')))},jle=new WeakSet,Fle=function(e){if(e.target===this)return;rce(this,Ule,Ble).call(this);const t=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const n of t)n.invokeTargetElement!=e.target&&("open"!=e.newState||"true"!=n.getAttribute("aria-expanded")||n.invokeTargetElement.hidden||n.invokeTargetElement.dispatchEvent(new sle({relatedTarget:n})));for(const n of t)n.setAttribute("aria-expanded",`${!n.submenuElement.hidden}`);rce(this,Dle,Lle).call(this,!0)},Ule=new WeakSet,Ble=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)},$le=new WeakSet,Vle=function(e){var t;wY(this,e.relatedTarget)||(ece(this,mle)&&(null==(t=ece(this,ule))||t.focus()),ece(this,dle)&&ece(this,dle)!==e.relatedTarget&&!this.hidden&&(this.hidden=!0))},Wle=new WeakSet,zle=function(e){var t,n,r,i,o;const{key:a,ctrlKey:s,altKey:l,metaKey:c}=e;if(!(s||l||c)&&this.keysUsed.includes(a))if(e.preventDefault(),e.stopPropagation(),"Tab"===a){if(ece(this,mle))return void(this.hidden=!0);e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()}else"Escape"===a?(null==(o=ece(this,ule))||o.focus(),ece(this,mle)&&(this.hidden=!0)):"Enter"===a||" "===a?this.handleSelect(e):this.handleMove(e)},Hle=new WeakSet,qle=function(e){return e.composedPath().find((e=>["menuitemradio","menuitemcheckbox"].includes(e.role)))},Gle=new WeakSet,Kle=function(){return this.items.find((e=>0===e.tabIndex))},Yle=new WeakSet,Xle=function(e){for(const t of this.items)t.tabIndex=t===e?0:-1},Qle=new WeakSet,Jle=function(e,t){const n=[...this.checkedItems];"radio"===e.type&&this.radioGroupItems.forEach((e=>e.checked=!1)),e.checked=!t||!e.checked,this.checkedItems.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))},dce.template=ace,cY.customElements.get("media-chrome-menu")||cY.customElements.define("media-chrome-menu",dce);var mce,fce,gce,vce,yce,bce,wce,xce,Ece,Ace,Sce,Tce,_ce,kce,Cce,Ice=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Rce=(e,t,n)=>(Ice(e,t,"read from private field"),n?n.call(e):t.get(e)),Dce=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Lce=(e,t,n,r)=>(Ice(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Pce=(e,t,n)=>(Ice(e,t,"access private method"),n);const Mce=uY.createElement("template");Mce.innerHTML='\n  <style>\n    :host {\n      transition: var(--media-menu-item-transition,\n        background .15s linear,\n        opacity .2s ease-in-out\n      );\n      outline: var(--media-menu-item-outline, 0);\n      outline-offset: var(--media-menu-item-outline-offset, -1px);\n      cursor: var(--media-cursor, pointer);\n      display: flex;\n      align-items: center;\n      align-self: stretch;\n      justify-self: stretch;\n      white-space: nowrap;\n      white-space-collapse: collapse;\n      text-wrap: nowrap;\n      padding: .4em .8em .4em 1em;\n    }\n\n    :host(:focus-visible) {\n      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      outline: var(--media-menu-item-hover-outline, 0);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host(:hover) {\n      cursor: var(--media-cursor, pointer);\n      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));\n      outline: var(--media-menu-item-hover-outline);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host([aria-checked="true"]) {\n      background: var(--media-menu-item-checked-background);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    :host([disabled]) {\n      pointer-events: none;\n      color: rgba(255, 255, 255, .3);\n    }\n\n    slot:not([name]) {\n      width: 100%;\n    }\n\n    slot:not([name="submenu"]) {\n      display: inline-flex;\n      align-items: center;\n      transition: inherit;\n      opacity: var(--media-menu-item-opacity, 1);\n    }\n\n    slot[name="description"] {\n      justify-content: end;\n    }\n\n    slot[name="description"] > span {\n      display: inline-block;\n      margin-inline: 1em .2em;\n      max-width: var(--media-menu-item-description-max-width, 100px);\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-size: .8em;\n      font-weight: 400;\n      text-align: right;\n      position: relative;\n      top: .04em;\n    }\n\n    slot[name="checked-indicator"] {\n      display: none;\n    }\n\n    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {\n      display: var(--media-menu-item-checked-indicator-display, inline-block);\n    }\n\n    \n    svg, img, ::slotted(svg), ::slotted(img) {\n      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n    }\n\n    \n    [part~="indicator"],\n    ::slotted([part~="indicator"]) {\n      fill: var(--media-menu-item-indicator-fill,\n        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n      height: var(--media-menu-item-indicator-height, 1.25em);\n      margin-right: .5ch;\n    }\n\n    [part~="checked-indicator"] {\n      visibility: hidden;\n    }\n\n    :host([aria-checked="true"]) [part~="checked-indicator"] {\n      visibility: visible;\n    }\n  </style>\n  <slot name="checked-indicator">\n    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">\n      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n    </svg>\n  </slot>\n  <slot name="prefix"></slot>\n  <slot></slot>\n  <slot name="description"></slot>\n  <slot name="suffix"></slot>\n  <slot name="submenu"></slot>\n';const Oce="type",Nce="value",jce="checked",Fce="disabled";class Uce extends cY.HTMLElement{constructor(){super(),Dce(this,gce),Dce(this,yce),Dce(this,wce),Dce(this,Ace),Dce(this,Tce),Dce(this,kce),Dce(this,mce,!1),Dce(this,fce,void 0),Dce(this,Ece,(()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),r=null==(e=this.submenuElement.checkedItems)?void 0:e[0],i=null!=(t=null==r?void 0:r.dataset.description)?t:null==r?void 0:r.text,o=uY.createElement("span");o.textContent=null!=i?i:"",n.replaceChildren(o)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[Oce,Fce,jce,Nce]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),Bce(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":Pce(this,gce,vce).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":Pce(this,Tce,_ce).call(this,e);break;case"keyup":Pce(this,Ace,Sce).call(this,e)}}attributeChangedCallback(e,t,n){e===jce&&Bce(this)&&!Rce(this,mce)?this.setAttribute("aria-checked",null!=n?"true":"false"):e===Oce&&n!==t?this.role="menuitem"+n:e===Fce&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){this.hasAttribute(Fce)||this.enable(),this.role="menuitem"+this.type,Lce(this,fce,$ce(this,this.parentNode)),Pce(this,kce,Cce).call(this)}disconnectedCallback(){this.disable(),Pce(this,kce,Cce).call(this),Lce(this,fce,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=AY(this))?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return null!=(e=this.getAttribute(Oce))?e:""}set type(e){this.setAttribute(Oce,`${e}`)}get value(){var e;return null!=(e=this.getAttribute(Nce))?e:this.text}set value(e){this.setAttribute(Nce,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get checked(){if(Bce(this))return"true"===this.getAttribute("aria-checked")}set checked(e){Bce(this)&&(Lce(this,mce,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){Bce(this)||this.invokeTargetElement&&wY(this,e.target)&&this.invokeTargetElement.dispatchEvent(new sle({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}function Bce(e){return"radio"===e.type||"checkbox"===e.type}function $ce(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?$ce(e,n):(null==t?void 0:t.items)?t:$ce(t,null==t?void 0:t.parentNode)}mce=new WeakMap,fce=new WeakMap,gce=new WeakSet,vce=function(e){const t=e.target;if(!(null==t?void 0:t.name))for(const n of t.assignedNodes({flatten:!0}))n instanceof Text&&""===n.textContent.trim()&&n.remove();"submenu"===t.name&&(this.submenuElement?Pce(this,yce,bce).call(this):Pce(this,wce,xce).call(this))},yce=new WeakSet,bce=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",Rce(this,Ece)),this.submenuElement.addEventListener("addmenuitem",Rce(this,Ece)),this.submenuElement.addEventListener("removemenuitem",Rce(this,Ece)),Rce(this,Ece).call(this)},wce=new WeakSet,xce=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",Rce(this,Ece)),this.submenuElement.removeEventListener("addmenuitem",Rce(this,Ece)),this.submenuElement.removeEventListener("removemenuitem",Rce(this,Ece)),Rce(this,Ece).call(this)},Ece=new WeakMap,Ace=new WeakSet,Sce=function(e){const{key:t}=e;this.keysUsed.includes(t)?this.handleClick(e):this.removeEventListener("keyup",Pce(this,Ace,Sce))},Tce=new WeakSet,_ce=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",Pce(this,Ace,Sce)):this.addEventListener("keyup",Pce(this,Ace,Sce),{once:!0})},kce=new WeakSet,Cce=function(){var e;const t=null==(e=Rce(this,fce))?void 0:e.radioGroupItems;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-checked"))).pop();n||(n=t[0]);for(const r of t)r.setAttribute("aria-checked","false");null==n||n.setAttribute("aria-checked","true")},Uce.template=Mce,cY.customElements.get("media-chrome-menu-item")||cY.customElements.define("media-chrome-menu-item",Uce);const Vce=uY.createElement("template");Vce.innerHTML=dce.template.innerHTML+'\n  <style>\n    :host {\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-settings-menu-background,\n          var(--media-menu-background,\n            var(--media-control-background,\n              var(--media-secondary-color, var(--_menu-bg)))));\n      min-width: var(--media-settings-menu-min-width, 170px);\n      border-radius: 2px 2px 0 0;\n      overflow: hidden;\n    }\n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([role="menu"]) {\n      \n      justify-content: end;\n    }\n\n    slot:not([name]) {\n      justify-content: var(--media-settings-menu-justify-content);\n      flex-direction: var(--media-settings-menu-flex-direction, column);\n      overflow: visible;\n    }\n\n    #container.has-expanded {\n      --media-settings-menu-item-opacity: 0;\n    }\n  </style>\n';class Wce extends dce{get anchorElement(){return"auto"!==this.anchor?super.anchorElement:gY(this).querySelector("media-settings-menu-button")}}Wce.template=Vce,cY.customElements.get("media-settings-menu")||cY.customElements.define("media-settings-menu",Wce);var zce;const Hce=uY.createElement("template");Hce.innerHTML=Uce.template.innerHTML+'\n  <style>\n    slot:not([name="submenu"]) {\n      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));\n    }\n\n    :host([aria-expanded="true"]:hover) {\n      background: transparent;\n    }\n  </style>\n',(null==(zce=Hce.content)?void 0:zce.querySelector)&&(Hce.content.querySelector('slot[name="suffix"]').innerHTML='\n    <svg aria-hidden="true" viewBox="0 0 20 24">\n      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>\n    </svg>\n  ');class qce extends Uce{}qce.template=Hce,cY.customElements.get("media-settings-menu-item")||cY.customElements.define("media-settings-menu-item",qce);class Gce extends hJ{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=AY(this))?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;null==(e=this.invokeTargetElement)||e.dispatchEvent(new sle({relatedTarget:this}))}}cY.customElements.get("media-chrome-menu-button")||cY.customElements.define("media-chrome-menu-button",Gce);const Kce=uY.createElement("template");Kce.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon">\n    <svg aria-hidden="true" viewBox="0 0 24 24">\n      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>\n    </svg>\n  </slot>\n';class Yce extends Gce{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:Kce,tooltipContent:tY("Settings")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",tY("settings"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:gY(this).querySelector("media-settings-menu")}}cY.customElements.get("media-settings-menu-button")||cY.customElements.define("media-settings-menu-button",Yce);var Xce,Qce,Jce,Zce,eue,tue,nue=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rue=(e,t,n)=>(nue(e,t,"read from private field"),n?n.call(e):t.get(e)),iue=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oue=(e,t,n,r)=>(nue(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),aue=(e,t,n)=>(nue(e,t,"access private method"),n);class sue extends dce{constructor(){super(...arguments),iue(this,Jce),iue(this,eue),iue(this,Xce,[]),iue(this,Qce,void 0)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_AUDIO_TRACK_LIST,CK.MEDIA_AUDIO_TRACK_ENABLED,CK.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===CK.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===CK.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(oue(this,Xce,null==(r=null!=n?n:"")?void 0:r.split(/\s+/).map(WK)),aue(this,Jce,Zce).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",aue(this,eue,tue))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",aue(this,eue,tue))}get anchorElement(){var e;return"auto"!==this.anchor?super.anchorElement:null==(e=gY(this))?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return rue(this,Xce)}set mediaAudioTrackList(e){oue(this,Xce,e),aue(this,Jce,Zce).call(this)}get mediaAudioTrackEnabled(){var e;return null!=(e=DY(this,CK.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){LY(this,CK.MEDIA_AUDIO_TRACK_ENABLED,e)}}Xce=new WeakMap,Qce=new WeakMap,Jce=new WeakSet,Zce=function(){if(rue(this,Qce)===JSON.stringify(this.mediaAudioTrackList))return;oue(this,Qce,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const t of e){const e=ice({type:"radio",text:this.formatMenuItemText(t.label,t),value:`${t.id}`,checked:t.enabled});e.prepend(oce(this,"checked-indicator")),this.defaultSlot.append(e)}},eue=new WeakSet,tue=function(){if(null==this.value)return;const e=new cY.CustomEvent(SK.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},cY.customElements.get("media-audio-track-menu")||cY.customElements.define("media-audio-track-menu",sue);const lue=uY.createElement("template");lue.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class cue extends Gce{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_AUDIO_TRACK_ENABLED,CK.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:lue,tooltipContent:tY("Audio")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",tY("Audio"))}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=gY(this))?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return null!=(e=DY(this,CK.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){LY(this,CK.MEDIA_AUDIO_TRACK_ENABLED,e)}}cY.customElements.get("media-audio-track-menu-button")||cY.customElements.define("media-audio-track-menu-button",cue);var uue,due,hue,pue,mue,fue=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},gue=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},vue=(e,t,n)=>(fue(e,t,"access private method"),n);const yue=uY.createElement("template");yue.innerHTML=dce.template.innerHTML+'\n  <slot name="captions-indicator" hidden>\n  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n  </svg></slot>';class bue extends dce{constructor(){super(...arguments),gue(this,due),gue(this,pue),gue(this,uue,void 0)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_SUBTITLES_LIST,CK.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_SUBTITLES_LIST&&t!==n?vue(this,due,hue).call(this):e===CK.MEDIA_SUBTITLES_SHOWING&&t!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",vue(this,pue,mue))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",vue(this,pue,mue))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:gY(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return wue(this,CK.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){xue(this,CK.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return wue(this,CK.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){xue(this,CK.MEDIA_SUBTITLES_SHOWING,e)}}uue=new WeakMap,due=new WeakSet,hue=function(){var e,t,n,r;if(fue(t=this,n=uue,"read from private field"),(r?r.call(t):n.get(t))===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,r)=>{fue(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,uue,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const i=!this.value,o=ice({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:i});o.prepend(oce(this,"checked-indicator")),this.defaultSlot.append(o);const a=this.mediaSubtitlesList;for(const s of a){const t=ice({type:"radio",text:this.formatMenuItemText(s.label,s),value:CX(s),checked:this.value==CX(s)});t.prepend(oce(this,"checked-indicator"));"captions"===(null!=(e=s.kind)?e:"subs")&&t.append(oce(this,"captions-indicator")),this.defaultSlot.append(t)}},pue=new WeakSet,mue=function(){const e=this.mediaSubtitlesShowing,t=this.getAttribute(CK.MEDIA_SUBTITLES_SHOWING),n=this.value!==t;if((null==e?void 0:e.length)&&n&&this.dispatchEvent(new cY.CustomEvent(SK.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:e})),!this.value||!n)return;const r=new cY.CustomEvent(SK.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)},bue.template=yue;const wue=(e,t)=>{const n=e.getAttribute(t);return n?_X(n):[]},xue=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=IX(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};cY.customElements.get("media-captions-menu")||cY.customElements.define("media-captions-menu",bue);var Eue,Aue=(e,t,n,r)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Sue=uY.createElement("template");Sue.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const Tue=e=>{e.setAttribute("aria-checked",PX(e).toString())};class _ue extends Gce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:Sue,tooltipContent:tY("Captions"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Eue,void 0),Aue(this,Eue,!1)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_SUBTITLES_LIST,CK.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",tY("closed captions")),Tue(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_SUBTITLES_SHOWING&&Tue(this)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=gY(this))?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return kue(this,CK.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Cue(this,CK.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return kue(this,CK.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Cue(this,CK.MEDIA_SUBTITLES_SHOWING,e)}}Eue=new WeakMap;const kue=(e,t)=>{const n=e.getAttribute(t);return n?_X(n):[]},Cue=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=IX(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};cY.customElements.get("media-captions-menu-button")||cY.customElements.define("media-captions-menu-button",_ue);var Iue,Rue,Due,Lue,Pue,Mue=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Oue=(e,t,n)=>(Mue(e,t,"read from private field"),n?n.call(e):t.get(e)),Nue=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},jue=(e,t,n)=>(Mue(e,t,"access private method"),n);const Fue="rates";class Uue extends dce{constructor(){super(),Nue(this,Rue),Nue(this,Lue),Nue(this,Iue,new SX(this,Fue,{defaultValue:O0})),jue(this,Rue,Due).call(this)}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PLAYBACK_RATE,Fue]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===CK.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===Fue&&t!=n&&(Oue(this,Iue).value=n,jue(this,Rue,Due).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",jue(this,Lue,Pue))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",jue(this,Lue,Pue))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:gY(this).querySelector("media-playback-rate-menu-button")}get rates(){return Oue(this,Iue)}set rates(e){e?Array.isArray(e)&&(Oue(this,Iue).value=e.join(" ")):Oue(this,Iue).value="",jue(this,Rue,Due).call(this)}get mediaPlaybackRate(){return kY(this,CK.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){CY(this,CK.MEDIA_PLAYBACK_RATE,e)}}Iue=new WeakMap,Rue=new WeakSet,Due=function(){this.defaultSlot.textContent="";for(const e of this.rates){const t=ice({type:"radio",text:this.formatMenuItemText(`${e}x`,e),value:e,checked:this.mediaPlaybackRate==e});t.prepend(oce(this,"checked-indicator")),this.defaultSlot.append(t)}},Lue=new WeakSet,Pue=function(){if(!this.value)return;const e=new cY.CustomEvent(SK.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},cY.customElements.get("media-playback-rate-menu")||cY.customElements.define("media-playback-rate-menu",Uue);var Bue,$ue=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const Vue="rates",Wue=[1,1.2,1.5,1.7,2],zue=uY.createElement("template");zue.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n    \n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"></slot>\n';class Hue extends Gce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:zue,tooltipContent:tY("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Bue,new SX(this,Vue,{defaultValue:Wue})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_PLAYBACK_RATE,Vue]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===Vue&&($ue(this,Bue).value=n),e===CK.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",tY("Playback rate {playbackRate}",{playbackRate:t}))}}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:gY(this).querySelector("media-playback-rate-menu")}get rates(){return $ue(this,Bue)}set rates(e){e?Array.isArray(e)&&($ue(this,Bue).value=e.join(" ")):$ue(this,Bue).value=""}get mediaPlaybackRate(){return kY(this,CK.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){CY(this,CK.MEDIA_PLAYBACK_RATE,e)}}Bue=new WeakMap,cY.customElements.get("media-playback-rate-menu-button")||cY.customElements.define("media-playback-rate-menu-button",Hue);var que,Gue,Kue,Yue,Xue,Que,Jue=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Zue=(e,t,n)=>(Jue(e,t,"read from private field"),n?n.call(e):t.get(e)),ede=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},tde=(e,t,n,r)=>(Jue(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),nde=(e,t,n)=>(Jue(e,t,"access private method"),n);class rde extends dce{constructor(){super(...arguments),ede(this,Kue),ede(this,Xue),ede(this,que,[]),ede(this,Gue,{})}static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_RENDITION_LIST,CK.MEDIA_RENDITION_SELECTED,CK.MEDIA_RENDITION_UNAVAILABLE,CK.MEDIA_HEIGHT]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===CK.MEDIA_RENDITION_SELECTED&&t!==n?(this.value=null!=n?n:"auto",nde(this,Kue,Yue).call(this)):e===CK.MEDIA_RENDITION_LIST&&t!==n?(tde(this,que,null==(r=n)?void 0:r.split(/\s+/).map($K)),nde(this,Kue,Yue).call(this)):e===CK.MEDIA_HEIGHT&&t!==n&&nde(this,Kue,Yue).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",nde(this,Xue,Que))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",nde(this,Xue,Que))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:gY(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Zue(this,que)}set mediaRenditionList(e){tde(this,que,e),nde(this,Kue,Yue).call(this)}get mediaRenditionSelected(){return DY(this,CK.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){LY(this,CK.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return kY(this,CK.MEDIA_HEIGHT)}set mediaHeight(e){CY(this,CK.MEDIA_HEIGHT,e)}}que=new WeakMap,Gue=new WeakMap,Kue=new WeakSet,Yue=function(){if(Zue(this,Gue).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Zue(this,Gue).mediaHeight===this.mediaHeight)return;Zue(this,Gue).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Zue(this,Gue).mediaHeight=this.mediaHeight;const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height));for(const i of e)i.selected=i.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const t=!this.mediaRenditionSelected;for(const i of e){const e=ice({type:"radio",text:this.formatMenuItemText(`${Math.min(i.width,i.height)}p`,i),value:`${i.id}`,checked:i.selected&&!t});e.prepend(oce(this,"checked-indicator")),this.defaultSlot.append(e)}const n=ice({type:"radio",text:t?this.formatMenuItemText(`Auto (${this.mediaHeight}p)`):this.formatMenuItemText("Auto"),value:"auto",checked:t}),r=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";n.dataset.description=r,n.prepend(oce(this,"checked-indicator")),this.defaultSlot.append(n)},Xue=new WeakSet,Que=function(){if(null==this.value)return;const e=new cY.CustomEvent(SK.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},cY.customElements.get("media-rendition-menu")||cY.customElements.define("media-rendition-menu",rde);const ide=uY.createElement("template");ide.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class ode extends Gce{static get observedAttributes(){return[...super.observedAttributes,CK.MEDIA_RENDITION_SELECTED,CK.MEDIA_RENDITION_UNAVAILABLE,CK.MEDIA_HEIGHT]}constructor(){super({slotTemplate:ide,tooltipContent:tY("Quality")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",tY("quality"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:gY(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return DY(this,CK.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){LY(this,CK.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return kY(this,CK.MEDIA_HEIGHT)}set mediaHeight(e){CY(this,CK.MEDIA_HEIGHT,e)}}cY.customElements.get("media-rendition-menu-button")||cY.customElements.define("media-rendition-menu-button",ode);var ade=e=>{throw TypeError(e)},sde=(e,t,n)=>t.has(e)||ade("Cannot "+n),lde=(e,t,n)=>(sde(e,t,"read from private field"),n?n.call(e):t.get(e)),cde=(e,t,n)=>t.has(e)?ade("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ude=(e,t,n,r)=>(sde(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),dde=(e,t,n)=>(sde(e,t,"access private method"),n),hde=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends hde{}globalThis.DocumentFragment=e}var pde,mde=class extends hde{},fde={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(mde)};pde=new WeakMap;var gde={document:{createElement:function(e,t){return new mde}},DocumentFragment:DocumentFragment,customElements:fde,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cde(this,pde),ude(this,pde,null==t?void 0:t.detail)}get detail(){return lde(this,pde)}initCustomEvent(){}},EventTarget:hde,HTMLElement:mde,HTMLVideoElement:class extends hde{}},vde="undefined"==typeof window||"undefined"==typeof globalThis.customElements,yde=vde?gde:globalThis,bde=vde?gde.document:globalThis.document;function wde(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xde(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function Ede(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function Ade(e){let t=function(e){let t={};for(let n in e)null!=e[n]&&(t[n]=e[n]);return new URLSearchParams(t)}(e).toString();return t?"?"+t:""}var Sde=(e,t)=>!(!e||!t)&&(!!e.contains(t)||Sde(e,t.getRootNode().host)),Tde="mux.com",_de=(()=>{try{return"3.3.4"}catch{}return"UNKNOWN"})(),kde=()=>_de,Cde=e=>{if(e){if([lre.LIVE,lre.ON_DEMAND].includes(e))return e;if(null!=e&&e.includes("live"))return lre.LIVE}},Ide={crossorigin:"crossOrigin",playsinline:"playsInline"};function Rde(e){var t;return null!=(t=Ide[e])?t:xde(e)}var Dde,Lde,Pde,Mde=class{constructor(e,t){cde(this,Dde),cde(this,Lde),cde(this,Pde,[]),ude(this,Dde,e),ude(this,Lde,t)}[Symbol.iterator](){return lde(this,Pde).values()}get length(){return lde(this,Pde).length}get value(){var e;return null!=(e=lde(this,Pde).join(" "))?e:""}set value(e){var t;e!==this.value&&(ude(this,Pde,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return lde(this,Pde)[e]}values(){return lde(this,Pde).values()}keys(){return lde(this,Pde).keys()}forEach(e){lde(this,Pde).forEach(e)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>{this.contains(e)||lde(this,Pde).push(e)})),(""!==this.value||null!=(e=lde(this,Dde))&&e.hasAttribute(`${lde(this,Lde)}`))&&(null==(t=lde(this,Dde))||t.setAttribute(`${lde(this,Lde)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>{lde(this,Pde).splice(lde(this,Pde).indexOf(e),1)})),null==(e=lde(this,Dde))||e.setAttribute(`${lde(this,Lde)}`,`${this.value}`)}contains(e){return lde(this,Pde).includes(e)}toggle(e,t){return"undefined"!=typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};Dde=new WeakMap,Lde=new WeakMap,Pde=new WeakMap;var Ode=`[mux-player ${kde()}]`;function Nde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(Ode,...t)}function jde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(Ode,...t)}function Fde(e){var t;let n=null!=(t=e.message)?t:"";e.context&&(n+=` ${e.context}`),e.file&&(n+=` ${Tre("Read more: ")}\nhttps://github.com/muxinc/elements/blob/main/errors/${e.file}`),Nde(n)}var Ude={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Bde={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},$de=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),Vde=hoe.filter((e=>"error"!==e)),Wde=Object.values(Ude).filter((e=>![Ude.PLAYSINLINE].includes(e))),zde=Object.values(Bde),Hde=class extends yde.HTMLElement{static get observedAttributes(){return[...Wde,...zde]}constructor(){super()}init(){Vde.forEach((e=>{var t;null==(t=this.media)||t.addEventListener(e,(e=>{this.dispatchEvent(new Event(e.type))}))}))}attributeChangedCallback(e,t,n){var r,i;switch(e){case Bde.MUTED:return void(this.media&&(this.media.muted=null!=n,this.media.defaultMuted=null!=n));case Bde.VOLUME:{let e=null!=(r=Ede(n))?r:1;return void(this.media&&(this.media.volume=e))}case Bde.PLAYBACKRATE:{let e=null!=(i=Ede(n))?i:1;return void(this.media&&(this.media.playbackRate=e,this.media.defaultPlaybackRate=e))}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}load(){var e;null==(e=this.media)||e.load()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:$de}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:$de}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentSrc(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentSrc)?t:""}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=Ede(this.getAttribute(Bde.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(Bde.PLAYBACKRATE,`${e}`):this.removeAttribute(Bde.PLAYBACKRATE)}get crossOrigin(){return qde(this,Ude.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(Ude.CROSSORIGIN,`${e}`)}get autoplay(){return null!=qde(this,Ude.AUTOPLAY)}set autoplay(e){e?this.setAttribute(Ude.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(Ude.AUTOPLAY)}get loop(){return null!=qde(this,Ude.LOOP)}set loop(e){e?this.setAttribute(Ude.LOOP,""):this.removeAttribute(Ude.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=!!e)}get defaultMuted(){return null!=qde(this,Ude.MUTED)}set defaultMuted(e){e?this.setAttribute(Ude.MUTED,""):this.removeAttribute(Ude.MUTED)}get playsInline(){return null!=qde(this,Ude.PLAYSINLINE)}set playsInline(e){jde("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(Ude.PRELOAD,e):this.removeAttribute(Ude.PRELOAD)}};function qde(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var Gde=Hde,Kde=new WeakMap,Yde=class e{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=Kde.get(this.element);n&&n.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let e=Kde.get(this.element);e&&e.delete(this.type)}}static for(t){Kde.has(t.element)||Kde.set(t.element,new Map);let n=t.attributeName.slice(2),r=Kde.get(t.element);return r&&r.has(n)?r.get(n):new e(t.element,n)}};function Xde(e,t){(function(e,t){if(e instanceof Cse&&t instanceof Element){let n=e.element;return n[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),n[e.attributeName]=t),!0}return!1})(e,t)||function(e,t){if("boolean"==typeof t&&e instanceof Cse){let n=e.attributeNamespace;return t!==e.element.hasAttributeNS(n,e.attributeName)&&(e.booleanValue=t),!0}return!1}(e,t)||function(e,t){return!!(e instanceof Cse&&e.attributeName.startsWith("on"))&&(Yde.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}(e,t)||function(e,t){return!1===t&&e instanceof Ise&&(e.replace(""),!0)}(e,t)||function(e,t){return t instanceof ehe&&e instanceof Ise&&(t.renderInto(e),!0)}(e,t)||function(e,t){return t instanceof DocumentFragment&&e instanceof Ise&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}(e,t)||function(e,t){if(e instanceof Cse){let n=e.attributeNamespace,r=e.element.getAttributeNS(n,e.attributeName);return String(t)!==r&&(e.value=String(t)),!0}e.value=String(t)}(e,t)}var Qde=new Map,Jde=new WeakMap,Zde=new WeakMap,ehe=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("\x01")}get template(){if(Qde.has(this.stringsKey))return Qde.get(this.stringsKey);{let e=bde.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,r)=>e+n+(r<t?`{{ ${r} }}`:"")),""),Qde.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(Jde.get(e)!==n){Jde.set(e,n);let t=new xse(n,this.values,this.processor);return Zde.set(e,t),void(e instanceof Ise?e.replace(...t.children):e.appendChild(t))}let r=Zde.get(e);null==(t=null==r?void 0:r.update)||t.call(r,this.values)}},the={processCallback(e,t,n){var r;if(n)for(let[i,o]of t)if(i in n){Xde(o,null!=(r=n[i])?r:"")}}};function nhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new ehe(e,n,the)}var rhe=Object.values({TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"}).join(", "),ihe=e=>{var t,n,r,i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w,x,E,A,S,T,_,k,C,I,R,D,L,P,M;return nhe`
  <media-theme
    template="${e.themeTemplate||!1}"
    defaultstreamtype="${null!=(t=e.defaultStreamType)&&t}"
    hotkeys="${(e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return"live"===Cde(e.streamType)&&(t+=" noarrowleft noarrowright"),t})(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||!1}"
    noautoseektolive="${!(null==(n=e.streamType)||!n.includes(lre.LIVE))&&0!==e.targetLiveWindow}"
    novolumepref="${e.novolumepref||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(r=e.audio)&&r}"
    style="${null!=(i=function(e){let t="";return Object.entries(e).forEach((e=>{let[n,r]=e;null!=r&&(t+=`${wde(n)}: ${r}; `)})),t?t.trim():void 0}({"--media-primary-color":e.primaryColor,"--media-secondary-color":e.secondaryColor,"--media-accent-color":e.accentColor}))&&i}"
    defaultsubtitles="${!e.defaultHiddenCaptions}"
    forwardseekoffset="${null!=(o=e.forwardSeekOffset)&&o}"
    backwardseekoffset="${null!=(a=e.backwardSeekOffset)&&a}"
    playbackrates="${null!=(s=e.playbackRates)&&s}"
    defaultshowremainingtime="${null!=(l=e.defaultShowRemainingTime)&&l}"
    defaultduration="${null!=(c=e.defaultDuration)&&c}"
    hideduration="${null!=(u=e.hideDuration)&&u}"
    title="${null!=(d=e.title)&&d}"
    proudlydisplaymuxbadge="${null!=(h=e.proudlyDisplayMuxBadge)&&h}"
    exportparts="${rhe}"
    onclose="${e.onCloseErrorDialog}"
    onfocusin="${e.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      target-live-window="${null!=(p=e.targetLiveWindow)&&p}"
      stream-type="${null!=(m=Cde(e.streamType))&&m}"
      crossorigin="${null!=(f=e.crossOrigin)?f:""}"
      playsinline
      autoplay="${null!=(g=e.autoplay)&&g}"
      muted="${null!=(v=e.muted)&&v}"
      loop="${null!=(y=e.loop)&&y}"
      preload="${null!=(b=e.preload)&&b}"
      debug="${null!=(w=e.debug)&&w}"
      prefer-cmcd="${null!=(x=e.preferCmcd)&&x}"
      disable-tracking="${null!=(E=e.disableTracking)&&E}"
      disable-cookies="${null!=(A=e.disableCookies)&&A}"
      prefer-playback="${null!=(S=e.preferPlayback)&&S}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(T=e.beaconCollectionDomain)&&T}"
      player-init-time="${null!=(_=e.playerInitTime)&&_}"
      player-software-name="${null!=(k=e.playerSoftwareName)&&k}"
      player-software-version="${null!=(C=e.playerSoftwareVersion)&&C}"
      env-key="${null!=(I=e.envKey)&&I}"
      custom-domain="${null!=(R=e.customDomain)&&R}"
      src="${e.src?e.src:!!e.playbackId&&wie(e)}"
      cast-src="${e.src?e.src:!!e.playbackId&&wie(e)}"
      cast-receiver="${null!=(D=e.castReceiver)&&D}"
      drm-token="${null!=(P=null==(L=e.tokens)?void 0:L.drm)&&P}"
      exportparts="video"
    >
      ${e.storyboard?nhe`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:nhe``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${!!e.poster&&e.poster}"
        placeholdersrc="${null!=(M=e.placeholder)&&M}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},ohe=e=>e.charAt(0).toUpperCase()+e.slice(1),ahe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=ohe(null!=(n=e.errorCategory)?n:"video"),o=rre(null!=(r=e.errorCategory)?r:ere);if(e.muxCode===nre.NETWORK_OFFLINE)return Tre("Your device appears to be offline",t);if(e.muxCode===nre.NETWORK_TOKEN_EXPIRED)return Tre("{category} URL has expired",t).format({category:i});if([nre.NETWORK_TOKEN_SUB_MISMATCH,nre.NETWORK_TOKEN_AUD_MISMATCH,nre.NETWORK_TOKEN_AUD_MISSING,nre.NETWORK_TOKEN_MALFORMED].includes(e.muxCode))return Tre("{category} URL is formatted incorrectly",t).format({category:i});if(e.muxCode===nre.NETWORK_TOKEN_MISSING)return Tre("Invalid {categoryName} URL",t).format({categoryName:o});if(e.muxCode===nre.NETWORK_NOT_FOUND)return Tre("{category} does not exist",t).format({category:i});if(e.muxCode===nre.NETWORK_NOT_READY)return Tre("{category} is not currently available",t).format({category:i})}if(e.code){if(e.code===ore.MEDIA_ERR_NETWORK)return Tre("Network Error",t);if(e.code===ore.MEDIA_ERR_DECODE)return Tre("Media Error",t);if(e.code===ore.MEDIA_ERR_SRC_NOT_SUPPORTED)return Tre("Source Not Supported",t)}return Tre("Error",t)}(e,t),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=ohe(null!=(n=e.errorCategory)?n:"video"),o=rre(null!=(r=e.errorCategory)?r:ere);return e.muxCode===nre.NETWORK_OFFLINE?Tre("Check your internet connection and try reloading this video.",t):e.muxCode===nre.NETWORK_TOKEN_EXPIRED?Tre("The video\u2019s secured {tokenNamePrefix}-token has expired.",t).format({tokenNamePrefix:o}):e.muxCode===nre.NETWORK_TOKEN_SUB_MISMATCH?Tre("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",t).format({tokenNamePrefix:o}):e.muxCode===nre.NETWORK_TOKEN_MALFORMED?Tre("{category} URL is formatted incorrectly",t).format({category:i}):[nre.NETWORK_TOKEN_AUD_MISMATCH,nre.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode)?Tre("The {tokenNamePrefix}-token is formatted with incorrect information.",t).format({tokenNamePrefix:o}):[nre.NETWORK_TOKEN_MISSING,nre.NETWORK_INVALID_URL].includes(e.muxCode)?Tre("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",t).format({tokenNamePrefix:o}):e.muxCode===nre.NETWORK_NOT_FOUND?"":e.muxCode===nre.NETWORK_NOT_READY?Tre("The live stream or video file are not yet ready.",t):e.message}return e.code&&(e.code===ore.MEDIA_ERR_NETWORK||e.code===ore.MEDIA_ERR_DECODE||(e.code,ore.MEDIA_ERR_SRC_NOT_SUPPORTED)),e.message}(e,t);return{title:n,message:r}},she=(e,t)=>{let n=(e=>{if(e.muxCode){if(e.muxCode===nre.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(e.muxCode===nre.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([nre.NETWORK_TOKEN_AUD_MISMATCH,nre.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode))return"403-incorrect-aud-value.md";if(e.muxCode===nre.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(e.muxCode===nre.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(e.muxCode===nre.NETWORK_NOT_FOUND)return"404-not-found.md";if(e.muxCode===nre.NETWORK_NOT_READY)return"412-not-playable.md"}if(e.code){if(e.code===ore.MEDIA_ERR_NETWORK)return"";if(e.code===ore.MEDIA_ERR_DECODE)return"media-decode-error.md";if(e.code===ore.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""})(e);return{message:e.message,context:e.context,file:n}},lhe=bde.createElement("template");"innerHTML"in lhe&&(lhe.innerHTML='<template id="media-theme-gerwig">\n  <style>\n    @keyframes pre-play-hide {\n      0% {\n        transform: scale(1);\n        opacity: 1;\n      }\n\n      30% {\n        transform: scale(0.7);\n      }\n\n      100% {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    :host {\n      --_primary-color: var(--media-primary-color, #fff);\n      --_secondary-color: var(--media-secondary-color, transparent);\n      --_accent-color: var(--media-accent-color, #fa50b5);\n      --_text-color: var(--media-text-color, #000);\n\n      --media-icon-color: var(--_primary-color);\n      --media-control-background: var(--_secondary-color);\n      --media-control-hover-background: var(--_accent-color);\n      --media-time-buffered-color: rgba(255, 255, 255, 0.4);\n      --media-preview-time-text-shadow: none;\n      --media-control-height: 14px;\n      --media-control-padding: 6px;\n      --media-tooltip-container-margin: 6px;\n      --media-tooltip-distance: 18px;\n\n      color: var(--_primary-color);\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([audio]) {\n      --_secondary-color: var(--media-secondary-color, black);\n      --media-preview-time-text-shadow: none;\n    }\n\n    :host([audio]) ::slotted([slot=\'media\']) {\n      height: 0px;\n    }\n\n    :host([audio]) media-loading-indicator {\n      display: none;\n    }\n\n    :host([audio]) media-controller {\n      background: transparent;\n    }\n\n    :host([audio]) media-controller::part(vertical-layer) {\n      background: transparent;\n    }\n\n    :host([audio]) media-control-bar {\n      width: 100%;\n      background-color: var(--media-control-background);\n    }\n\n    /*\n     * 0.433s is the transition duration for VTT Regions.\n     * Borrowed here, so the captions don\'t move too fast.\n     */\n    media-controller {\n      --media-webkit-text-track-transform: translateY(0) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;\n    }\n    media-controller:is([mediapaused], :not([userinactive])) {\n      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.15s ease;\n    }\n\n    /*\n     * CSS specific to iOS devices.\n     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757\n     */\n    @supports (-webkit-touch-callout: none) {\n      /* Disable subtitle adjusting for iOS Safari */\n      media-controller[mediaisfullscreen] {\n        --media-webkit-text-track-transform: unset;\n        --media-webkit-text-track-transition: unset;\n      }\n    }\n\n    media-time-range {\n      --media-box-padding-left: 6px;\n      --media-box-padding-right: 6px;\n      --media-range-bar-color: var(--_accent-color);\n      --media-time-range-buffered-color: var(--_primary-color);\n      --media-range-track-color: transparent;\n      --media-range-track-background: rgba(255, 255, 255, 0.4);\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_accent-color) 25%,\n        var(--_accent-color)\n      );\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-transform: scale(0);\n      --media-range-thumb-transition: transform 0.3s;\n      --media-range-thumb-opacity: 1;\n      --media-preview-background: var(--_primary-color);\n      --media-box-arrow-background: var(--_primary-color);\n      --media-preview-thumbnail-border: 5px solid var(--_primary-color);\n      --media-preview-border-radius: 5px;\n      --media-text-color: var(--_text-color);\n      --media-control-hover-background: transparent;\n      --media-preview-chapter-text-shadow: none;\n      color: var(--_accent-color);\n      padding: 0 6px;\n    }\n\n    :host([audio]) media-time-range {\n      --media-preview-time-padding: 1.5px 6px;\n      --media-preview-box-margin: 0 0 -5px;\n    }\n\n    media-time-range:hover {\n      --media-range-thumb-transform: scale(1);\n    }\n\n    media-preview-thumbnail {\n      border-bottom-width: 0;\n    }\n\n    [part~=\'menu\'] {\n      border-radius: 2px;\n      border: 1px solid rgba(0, 0, 0, 0.1);\n      bottom: 50px;\n      padding: 2.5px 10px;\n    }\n\n    [part~=\'menu\']::part(indicator) {\n      fill: var(--_accent-color);\n    }\n\n    [part~=\'menu\']::part(menu-item) {\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 6px 10px;\n      min-height: 34px;\n    }\n\n    [part~=\'menu\']::part(checked) {\n      font-weight: 700;\n    }\n\n    media-captions-menu,\n    media-rendition-menu,\n    media-audio-track-menu,\n    media-playback-rate-menu {\n      position: absolute; /* ensure they don\'t take up space in DOM on load */\n      --media-menu-background: var(--_primary-color);\n      --media-menu-item-checked-background: transparent;\n      --media-text-color: var(--_text-color);\n      --media-menu-item-hover-background: transparent;\n      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;\n    }\n\n    /* The icon is a circle so make it 16px high instead of 14px for more balance. */\n    media-audio-track-menu-button {\n      --media-control-padding: 5px;\n      --media-control-height: 16px;\n    }\n\n    media-playback-rate-menu-button {\n      --media-control-padding: 6px 3px;\n      min-width: 4.4ch;\n    }\n\n    media-playback-rate-menu {\n      --media-menu-flex-direction: row;\n      --media-menu-item-checked-background: var(--_accent-color);\n      --media-menu-item-checked-indicator-display: none;\n      margin-right: 6px;\n      padding: 0;\n      --media-menu-gap: 0.25em;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(menu-item) {\n      padding: 6px 6px 6px 8px;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(checked) {\n      color: #fff;\n    }\n\n    :host(:not([audio])) media-time-range {\n      /* Adding px is required here for calc() */\n      --media-range-padding: 0px;\n      background: transparent;\n      z-index: 10;\n      height: 10px;\n      bottom: -3px;\n      width: 100%;\n    }\n\n    media-control-bar :is([role=\'button\'], [role=\'switch\'], button) {\n      line-height: 0;\n    }\n\n    media-control-bar :is([part*=\'button\'], [part*=\'range\'], [part*=\'display\']) {\n      border-radius: 3px;\n    }\n\n    .spacer {\n      flex-grow: 1;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] {\n      min-height: 42px;\n      pointer-events: none;\n    }\n\n    media-control-bar {\n      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,\n        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,\n        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,\n        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,\n        hsl(0 0% 0%) 100%;\n    }\n\n    :host([title]:not([audio])) media-control-bar[slot=\'top-chrome\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to top, var(--gradient-steps));\n      opacity: 0.8;\n      pointer-events: none;\n    }\n\n    :host(:not([audio])) media-control-bar[part~=\'bottom\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to bottom, var(--gradient-steps));\n      opacity: 0.8;\n      z-index: 1;\n      pointer-events: none;\n    }\n\n    media-control-bar[part~=\'bottom\'] > * {\n      z-index: 20;\n    }\n\n    media-control-bar[part~=\'bottom\'] {\n      padding: 6px 6px;\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] > * {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      position: relative;\n    }\n\n    media-controller::part(vertical-layer) {\n      transition: background-color 1s;\n    }\n\n    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {\n      background-color: var(--controls-backdrop-color, var(--controls, transparent));\n      transition: background-color 0.25s;\n    }\n\n    .center-controls {\n      --media-button-icon-width: 100%;\n      --media-button-icon-height: auto;\n      --media-tooltip-display: none;\n      pointer-events: none;\n      width: 100%;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n      paint-order: stroke;\n      stroke: rgba(102, 102, 102, 1);\n      stroke-width: 0.3px;\n      text-shadow:\n        0 0 2px rgb(0 0 0 / 0.25),\n        0 0 6px rgb(0 0 0 / 0.25);\n    }\n\n    .center-controls media-play-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      --media-control-padding: 0;\n      width: 40px;\n    }\n\n    [breakpointsm] .center-controls media-play-button {\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      transition: background 0.4s;\n      padding: 24px;\n      --media-control-background: #000;\n      --media-control-hover-background: var(--_accent-color);\n    }\n\n    .center-controls media-seek-backward-button,\n    .center-controls media-seek-forward-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      margin: 0 20px;\n      width: max(33px, min(8%, 40px));\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback {\n      display: grid;\n      align-items: initial;\n      justify-content: initial;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {\n      place-self: var(--_pre-playback-place, center);\n      grid-area: 1 / 1;\n      margin: 16px;\n    }\n\n    /* Show and hide controls or pre-playback state */\n\n    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])\n      .center-controls.pre-playback\n      media-play-button {\n      /* Using `forwards` would lead to a laggy UI after the animation got in the end state */\n      animation: 0.3s linear pre-play-hide;\n      opacity: 0;\n      pointer-events: none;\n    }\n\n    .autoplay-unmute {\n      --media-control-hover-background: transparent;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n    }\n\n    .autoplay-unmute-btn {\n      --media-control-height: 16px;\n      border-radius: 8px;\n      background: #000;\n      color: var(--_primary-color);\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      font-size: 18px;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    .autoplay-unmute-btn:hover {\n      background: var(--_accent-color);\n    }\n\n    [breakpointsm] .autoplay-unmute-btn {\n      --media-control-height: 30px;\n      padding: 14px 24px;\n      font-size: 26px;\n    }\n\n    .autoplay-unmute-btn svg {\n      margin: 0 6px 0 0;\n    }\n\n    [breakpointsm] .autoplay-unmute-btn svg {\n      margin: 0 10px 0 0;\n    }\n\n    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {\n      display: none;\n    }\n\n    media-error-dialog:not([mediaerrorcode]) {\n      opacity: 0;\n    }\n\n    media-loading-indicator {\n      --media-loading-icon-width: 100%;\n      --media-button-icon-height: auto;\n      display: var(--media-control-display, var(--media-loading-indicator-display, flex));\n      pointer-events: none;\n      position: absolute;\n      width: min(15%, 150px);\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Intentionally don\'t target the div for transition but the children\n     of the div. Prevents messing with media-chrome\'s autohide feature. */\n    media-loading-indicator + div * {\n      transition: opacity 0.15s;\n      opacity: 1;\n    }\n\n    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {\n      opacity: 0;\n      transition-delay: 400ms;\n    }\n\n    media-volume-range {\n      width: min(100%, 100px);\n      --media-range-padding-left: 10px;\n      --media-range-padding-right: 10px;\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_primary-color) 25%,\n        var(--_primary-color)\n      );\n      --media-control-hover-background: none;\n    }\n\n    media-time-display {\n      white-space: nowrap;\n    }\n\n    /* Generic style for explicitly disabled controls */\n    media-control-bar[part~=\'bottom\'] [disabled],\n    media-control-bar[part~=\'bottom\'] [aria-disabled=\'true\'] {\n      opacity: 60%;\n      cursor: not-allowed;\n    }\n\n    media-text-display {\n      --media-font-size: 16px;\n      --media-control-padding: 14px;\n      font-weight: 500;\n    }\n\n    media-play-button.animated *:is(g, path) {\n      transition: all 0.3s;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt1 {\n      opacity: 0;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt2 {\n      transform-origin: center center;\n      transform: scaleY(0);\n    }\n\n    media-play-button.animated[mediapaused] .play-icon {\n      clip-path: inset(0 0 0 0);\n    }\n\n    media-play-button.animated:not([mediapaused]) .play-icon {\n      clip-path: inset(0 0 0 100%);\n    }\n\n    media-seek-forward-button,\n    media-seek-backward-button {\n      --media-font-weight: 400;\n    }\n\n    .mute-icon {\n      display: inline-block;\n    }\n\n    .mute-icon :is(path, g) {\n      transition: opacity 0.5s;\n    }\n\n    .muted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'low\'] :is(.volume-medium, .volume-high),\n    media-mute-button[mediavolumelevel=\'medium\'] :is(.volume-high) {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .unmuted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .muted {\n      opacity: 1;\n    }\n\n    /**\n     * Our defaults for these buttons are to hide them at small sizes\n     * users can override this with CSS\n     */\n    media-controller:not([breakpointsm]):not([audio]) {\n      --bottom-play-button: none;\n      --bottom-seek-backward-button: none;\n      --bottom-seek-forward-button: none;\n      --bottom-time-display: none;\n      --bottom-playback-rate-menu-button: none;\n      --bottom-pip-button: none;\n    }\n\n    [part=\'mux-badge\'] {\n      position: absolute;\n      bottom: 10px;\n      right: 10px;\n      z-index: 2;\n      opacity: 0.6;\n      transition:\n        opacity 0.2s ease-in-out,\n        bottom 0.2s ease-in-out;\n    }\n\n    [part=\'mux-badge\']:hover {\n      opacity: 1;\n    }\n\n    [part=\'mux-badge\'] a {\n      font-size: 14px;\n      font-family: var(--_font-family);\n      color: var(--_primary-color);\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      gap: 5px;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-text {\n      transition: opacity 0.5s ease-in-out;\n      opacity: 0;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo {\n      width: 40px;\n      height: auto;\n      display: inline-block;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo svg {\n      width: 100%;\n      height: 100%;\n      fill: white;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'],\n    media-controller:not([userinactive]) [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      transition: bottom 0.1s ease-in-out;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      transition: bottom 0.2s ease-in-out 0.62s;\n    }\n\n    media-controller:not([userinactive]) [part=\'mux-badge\'] .mux-badge-text,\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 1;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 0;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive])[mediahasplayed] [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);\n    }\n  </style>\n\n  <template partial="TitleDisplay">\n    <template if="title">\n      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>\n    </template>\n  </template>\n\n  <template partial="PlayButton">\n    <media-play-button\n      part="{{section ?? \'bottom\'}} play button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      class="animated"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">\n        <g class="play-icon">\n          <path\n            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n          />\n        </g>\n        <g class="pause-icon">\n          <path\n            class="pause-icon-pt1"\n            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"\n          />\n          <path\n            class="pause-icon-pt2"\n            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"\n          />\n        </g>\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="PrePlayButton">\n    <media-play-button\n      part="{{section ?? \'center\'}} play button pre-play"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">\n        <path\n          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n        />\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="SeekBackwardButton">\n    <media-seek-backward-button\n      seekoffset="{{backwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-backward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <path\n          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"\n        />\n        <text transform="translate(6 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n          {{backwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-backward-button>\n  </template>\n\n  <template partial="SeekForwardButton">\n    <media-seek-forward-button\n      seekoffset="{{forwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-forward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <g>\n          <text transform="translate(-1 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n            {{forwardseekoffset}}\n          </text>\n          <path\n            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"\n          />\n        </g>\n      </svg>\n    </media-seek-forward-button>\n  </template>\n\n  <template partial="MuteButton">\n    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">\n        <g class="unmuted">\n          <path\n            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"\n          />\n          <path\n            class="volume-low"\n            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"\n          />\n          <path\n            class="volume-medium"\n            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"\n          />\n          <path\n            class="volume-high"\n            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"\n          />\n        </g>\n        <g class="muted">\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"\n          />\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"\n          />\n        </g>\n      </svg>\n    </media-mute-button>\n  </template>\n\n  <template partial="PipButton">\n    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"\n        />\n        <path\n          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"\n        />\n      </svg>\n    </media-pip-button>\n  </template>\n\n  <template partial="CaptionsMenu">\n    <media-captions-menu-button part="bottom captions button">\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">\n        <path\n          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">\n        <path\n          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"\n        />\n        <path\n          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"\n        />\n        <path\n          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"\n        />\n      </svg>\n    </media-captions-menu-button>\n    <media-captions-menu\n      hidden\n      anchor="auto"\n      part="bottom captions menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg></div\n    ></media-captions-menu>\n  </template>\n\n  <template partial="AirplayButton">\n    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"\n        />\n        <path\n          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"\n        />\n      </svg>\n    </media-airplay-button>\n  </template>\n\n  <template partial="FullscreenButton">\n    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"\n        />\n        <path\n          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"\n        />\n        <path\n          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"\n        />\n        <path\n          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"\n        />\n        <path\n          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"\n        />\n        <path\n          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"\n        />\n        <path\n          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"\n        />\n      </svg>\n    </media-fullscreen-button>\n  </template>\n\n  <template partial="CastButton">\n    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"\n        />\n        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />\n      </svg>\n    </media-cast-button>\n  </template>\n\n  <template partial="LiveButton">\n    <media-live-button part="{{section ?? \'top\'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <span slot="text">Live</span>\n    </media-live-button>\n  </template>\n\n  <template partial="PlaybackRateMenu">\n    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>\n    <media-playback-rate-menu\n      hidden\n      anchor="auto"\n      rates="{{playbackrates}}"\n      exportparts="menu-item"\n      part="bottom playback-rate menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-playback-rate-menu>\n  </template>\n\n  <template partial="VolumeRange">\n    <media-volume-range\n      part="bottom volume range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-volume-range>\n  </template>\n\n  <template partial="TimeDisplay">\n    <media-time-display\n      remaining="{{defaultshowremainingtime}}"\n      showduration="{{!hideduration}}"\n      part="bottom time display"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-display>\n  </template>\n\n  <template partial="TimeRange">\n    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>\n      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>\n      <media-preview-time-display slot="preview"></media-preview-time-display>\n      <div slot="preview" part="arrow"></div>\n    </media-time-range>\n  </template>\n\n  <template partial="AudioTrackMenu">\n    <media-audio-track-menu-button part="bottom audio-track button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">\n        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />\n        <path\n          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"\n        />\n      </svg>\n    </media-audio-track-menu-button>\n    <media-audio-track-menu\n      hidden\n      anchor="auto"\n      part="bottom audio-track menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-audio-track-menu>\n  </template>\n\n  <template partial="RenditionMenu">\n    <media-rendition-menu-button part="bottom rendition button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">\n        <path\n          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"\n        />\n      </svg>\n    </media-rendition-menu-button>\n    <media-rendition-menu\n      hidden\n      anchor="auto"\n      part="bottom rendition menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-rendition-menu>\n  </template>\n\n  <template partial="MuxBadge">\n    <div part="mux-badge">\n      <a href="https://www.mux.com/player" target="_blank">\n        <span class="mux-badge-text">Powered by</span>\n        <div class="mux-badge-logo">\n          <svg\n            viewBox="0 0 1600 500"\n            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"\n          >\n            <g>\n              <path\n                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"\n                style="fill-rule: nonzero"\n              ></path>\n            </g>\n          </svg>\n        </div>\n      </a>\n    </div>\n  </template>\n\n  <media-controller\n    part="controller"\n    defaultstreamtype="{{defaultstreamtype ?? \'on-demand\'}}"\n    breakpoints="sm:470"\n    gesturesdisabled="{{disabled}}"\n    hotkeys="{{hotkeys}}"\n    nohotkeys="{{nohotkeys}}"\n    novolumepref="{{novolumepref}}"\n    audio="{{audio}}"\n    noautoseektolive="{{noautoseektolive}}"\n    defaultsubtitles="{{defaultsubtitles}}"\n    defaultduration="{{defaultduration ?? false}}"\n    keyboardforwardseekoffset="{{forwardseekoffset}}"\n    keyboardbackwardseekoffset="{{backwardseekoffset}}"\n    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"\n    style="--_pre-playback-place:{{preplaybackplace ?? \'center\'}}"\n  >\n    <slot name="media" slot="media"></slot>\n    <slot name="poster" slot="poster"></slot>\n\n    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>\n    <media-error-dialog slot="dialog" noautohide></media-error-dialog>\n\n    <template if="!audio">\n      \x3c!-- Pre-playback UI --\x3e\n      \x3c!-- same for both on-demand and live --\x3e\n      <div slot="centered-chrome" class="center-controls pre-playback">\n        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>\n        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>\n      </div>\n\n      \x3c!-- Mux Badge --\x3e\n      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>\n\n      \x3c!-- Autoplay centered unmute button --\x3e\n      \x3c!--\n        todo: figure out how show this with available state variables\n        needs to show when:\n        - autoplay is enabled\n        - playback has been successful\n        - audio is muted\n        - in place / instead of the pre-plaback play button\n        - not to show again after user has interacted with this button\n          - OR user has interacted with the mute button in the control bar\n      --\x3e\n      \x3c!--\n        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug\n        makes it appear even if commented out in the markup, add it back when code is un-commented\n      --\x3e\n      \x3c!-- <div slot="centered-chrome" class="autoplay-unmute">\n        <div role="button" class="autoplay-unmute-btn">Unmute</div>\n      </div> --\x3e\n\n      <template if="streamtype == \'on-demand\'">\n        <template if="breakpointsm">\n          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>\n        </template>\n        {{>TimeRange}}\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}\n          {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}\n          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <media-control-bar part="control-bar top" slot="top-chrome">\n          {{>LiveButton}}\n          <template if="breakpointsm"> {{>TitleDisplay}} </template>\n        </media-control-bar>\n        <template if="targetlivewindow > 0">{{>TimeRange}}</template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>\n          {{>MuteButton}} {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}\n          {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <template if="audio">\n      <template if="streamtype == \'on-demand\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          {{>MuteButton}}\n          <template if="breakpointsm">{{>VolumeRange}}</template>\n          {{>TimeDisplay}} {{>TimeRange}}\n          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}\n          <template if="breakpointsm">\n            {{>VolumeRange}}\n            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          </template>\n          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>\n          <template if="!targetlivewindow"><div class="spacer"></div></template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <slot></slot>\n  </media-controller>\n</template>\n');var che,uhe,dhe=class extends rle{};dhe.template=null==(uhe=null==(che=lhe.content)?void 0:che.children)?void 0:uhe[0],yde.customElements.get("media-theme-gerwig")||yde.customElements.define("media-theme-gerwig",dhe);var hhe={SRC:"src",POSTER:"poster"},phe={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge"},mhe=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref","proudlydisplaymuxbadge"];var fhe=ZZ.formatErrorMessage;function ghe(e){var t,n;let r=e.theme;if(r){let i=null==(n=null==(t=e.getRootNode())?void 0:t.getElementById)?void 0:n.call(t,r);if(i&&i instanceof HTMLTemplateElement)return i;r.startsWith("media-theme-")||(r=`media-theme-${r}`);let o=yde.customElements.get(r);if(null!=o&&o.template)return o.template}}function vhe(e){var t;let n=null==(t=e.mediaController)?void 0:t.querySelector("media-time-display");return n&&"none"===getComputedStyle(n).getPropertyValue("--media-duration-display-display").trim()}function yhe(e){let t=e.hasAttribute(phe.TITLE)?{video_title:e.getAttribute(phe.TITLE)}:{};return e.getAttributeNames().filter((e=>e.startsWith("metadata-"))).reduce(((t,n)=>{let r=e.getAttribute(n);return null!==r&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=r),t}),t)}ZZ.formatErrorMessage=e=>{var t,n;if(e instanceof ore){let r=ahe(e,!1);return`\n      ${null!=r&&r.title?`<h3>${r.title}</h3>`:""}\n      ${null!=r&&r.message||null!=r&&r.linkUrl?`<p>\n        ${null==r?void 0:r.message}\n        ${null!=r&&r.linkUrl?`<a\n              href="${r.linkUrl}"\n              target="_blank"\n              rel="external noopener"\n              aria-label="${null!=(t=r.linkText)?t:""} ${Tre("(opens in a new window)")}"\n              >${null!=(n=r.linkText)?n:r.linkUrl}</a\n            >`:""}\n      </p>`:""}\n    `}return fhe(e)};var bhe,whe,xhe,Ehe,Ahe,She,The,_he,khe,Che,Ihe,Rhe,Dhe,Lhe,Phe,Mhe=Object.values(Qae),Ohe=Object.values(hhe),Nhe=Object.values(phe),jhe=kde(),Fhe="mux-player",Uhe={isDialogOpen:!1},Bhe={redundant_streams:!0},$he=class extends Gde{constructor(){super(),cde(this,The),cde(this,bhe),cde(this,whe,!1),cde(this,xhe,{}),cde(this,Ehe,!0),cde(this,Ahe,new Mde(this,"hotkeys")),cde(this,She,{...Uhe,onCloseErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&dde(this,The,Che).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&(Sde(this,bde.activeElement)||e.preventDefault())}}),ude(this,bhe,yie()),this.attachShadow({mode:"open"}),dde(this,The,khe).call(this),this.isConnected&&dde(this,The,_he).call(this)}static get NAME(){return Fhe}static get VERSION(){return jhe}static get observedAttributes(){var e;return[...null!=(e=Gde.observedAttributes)?e:[],...Ohe,...Mhe,...Nhe]}get mediaTheme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.mediaTheme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=yhe(this))}attributeChangedCallback(e,t,n){switch(dde(this,The,_he).call(this),super.attributeChangedCallback(e,t,n),e){case phe.HOTKEYS:lde(this,Ahe).value=n;break;case phe.THUMBNAIL_TIME:null!=n&&this.tokens.thumbnail&&Nde(Tre("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break;case phe.THUMBNAIL_TOKEN:if(n){let e=Sre(n);if(e){let{aud:t}=e,n=qre;t!==n&&Nde(Tre("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"thumbnail"}))}}break;case phe.STORYBOARD_TOKEN:if(n){let e=Sre(n);if(e){let{aud:t}=e,n=Gre;t!==n&&Nde(Tre("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"storyboard"}))}}break;case phe.DRM_TOKEN:if(n){let e=Sre(n);if(e){let{aud:t}=e,n=Kre;t!==n&&Nde(Tre("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"drm"}))}}break;case Qae.PLAYBACK_ID:null!=n&&n.includes("?token")&&jde(Tre("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break;case Qae.STREAM_TYPE:n&&![lre.LIVE,lre.ON_DEMAND,lre.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:Fde({file:"invalid-stream-type.md",message:Tre("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===lre.LIVE?null==this.getAttribute(phe.TARGET_LIVE_WINDOW)&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[Qae.PLAYBACK_ID,hhe.SRC,phe.PLAYBACK_TOKEN].includes(e)&&t!==n&&ude(this,She,{...lde(this,She),...Uhe}),dde(this,The,Ihe).call(this,{[Rde(e)]:n})}get preferCmcd(){var e;return null!=(e=this.getAttribute(Qae.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?hre.includes(e)?this.setAttribute(Qae.PREFER_CMCD,e):Nde(`Invalid value for preferCmcd. Must be one of ${hre.join()}`):this.removeAttribute(Qae.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(CK.MEDIA_HAS_PLAYED))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute(CK.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get theme(){var e;return null!=(e=this.getAttribute(phe.THEME))?e:"gerwig"}set theme(e){this.setAttribute(phe.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(mhe.includes(n))continue;let r=e.getAttribute(n);t[xde(n)]=""===r||r}return t}set themeProps(e){var t,n;dde(this,The,_he).call(this);let r={...this.themeProps,...e};for(let i in r){if(mhe.includes(i))continue;let r=null==e?void 0:e[i];"boolean"==typeof r||null==r?null==(t=this.mediaTheme)||t.toggleAttribute(wde(i),!!r):null==(n=this.mediaTheme)||n.setAttribute(wde(i),r)}}get playbackId(){var e;return null!=(e=this.getAttribute(Qae.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(Qae.PLAYBACK_ID,e):this.removeAttribute(Qae.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=Vhe(this,hhe.SRC))?e:void 0:null!=(t=this.getAttribute(hhe.SRC))?t:void 0}set src(e){e?this.setAttribute(hhe.SRC,e):this.removeAttribute(hhe.SRC)}get poster(){var e;let t=this.getAttribute(hhe.POSTER);if(null!=t)return t;let{tokens:n}=this;if(!n.playback||n.thumbnail)return this.playbackId&&!this.audio?function(e){let{token:t,customDomain:n=Tde,thumbnailTime:r,programTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;let a=null==t?r:void 0,{aud:s}=null!=(o=Sre(t))?o:{};if(!t||"t"===s)return`https://image.${n}/${e}/thumbnail.webp${Ade({token:t,time:a,program_time:i})}`}(this.playbackId,{customDomain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,programTime:this.programStartTime,token:n.thumbnail}):void 0;Nde("Missing expected thumbnail token. No poster image will be shown")}set poster(e){e||""===e?this.setAttribute(hhe.POSTER,e):this.removeAttribute(hhe.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(phe.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(phe.STORYBOARD_SRC,e):this.removeAttribute(phe.STORYBOARD_SRC)}get storyboard(){let{tokens:e}=this;return this.storyboardSrc&&!e.storyboard?this.storyboardSrc:this.audio||!this.playbackId||!this.streamType||[lre.LIVE,lre.UNKNOWN].includes(this.streamType)||e.playback&&!e.storyboard?void 0:function(e){let{token:t,customDomain:n=Tde,programStartTime:r,programEndTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;let{aud:a}=null!=(o=Sre(t))?o:{};if(!t||"s"===a)return`https://image.${n}/${e}/storyboard.vtt${Ade({token:t,format:"webp",program_start_time:r,program_end_time:i})}`}(this.playbackId,{customDomain:this.customDomain,token:e.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(phe.AUDIO)}set audio(e){e?this.setAttribute(phe.AUDIO,""):this.removeAttribute(phe.AUDIO)}get hotkeys(){return lde(this,Ahe)}get nohotkeys(){return this.hasAttribute(phe.NOHOTKEYS)}set nohotkeys(e){e?this.setAttribute(phe.NOHOTKEYS,""):this.removeAttribute(phe.NOHOTKEYS)}get thumbnailTime(){return Ede(this.getAttribute(phe.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(phe.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(phe.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(phe.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=Vhe(this,phe.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(phe.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(phe.PRIMARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=yde.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_primary-color"))?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(phe.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(phe.SECONDARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=yde.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_secondary-color"))?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(phe.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,t;let n=this.getAttribute(phe.ACCENT_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=yde.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_accent-color"))?void 0:t.trim(),n))return n}set accentColor(e){this.setAttribute(phe.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(phe.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(phe.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(phe.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(phe.PLAYBACK_RATES))return this.getAttribute(phe.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map((e=>Number(e))).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t))}set playbackRates(e){e?this.setAttribute(phe.PLAYBACK_RATES,e.join(" ")):this.removeAttribute(phe.PLAYBACK_RATES)}get forwardSeekOffset(){var e;return null!=(e=Ede(this.getAttribute(phe.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(phe.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=Ede(this.getAttribute(phe.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(phe.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(phe.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(phe.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(phe.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return Ede(this.getAttribute(phe.DEFAULT_DURATION))}set defaultDuration(e){null==e?this.removeAttribute(phe.DEFAULT_DURATION):this.setAttribute(phe.DEFAULT_DURATION,`${e}`)}get playerInitTime(){return this.hasAttribute(Qae.PLAYER_INIT_TIME)?Ede(this.getAttribute(Qae.PLAYER_INIT_TIME)):lde(this,bhe)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(Qae.PLAYER_INIT_TIME):this.setAttribute(Qae.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(Qae.PLAYER_SOFTWARE_NAME))?e:Fhe}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(Qae.PLAYER_SOFTWARE_VERSION))?e:jhe}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(Qae.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(Qae.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(Qae.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(Qae.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(Qae.MAX_RESOLUTION,e):this.removeAttribute(Qae.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(Qae.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(Qae.MIN_RESOLUTION,e):this.removeAttribute(Qae.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(Qae.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(Qae.RENDITION_ORDER,e):this.removeAttribute(Qae.RENDITION_ORDER))}get programStartTime(){return Ede(this.getAttribute(Qae.PROGRAM_START_TIME))}set programStartTime(e){null==e?this.removeAttribute(Qae.PROGRAM_START_TIME):this.setAttribute(Qae.PROGRAM_START_TIME,`${e}`)}get programEndTime(){return Ede(this.getAttribute(Qae.PROGRAM_END_TIME))}set programEndTime(e){null==e?this.removeAttribute(Qae.PROGRAM_END_TIME):this.setAttribute(Qae.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){return Ede(this.getAttribute(Qae.ASSET_START_TIME))}set assetStartTime(e){null==e?this.removeAttribute(Qae.ASSET_START_TIME):this.setAttribute(Qae.ASSET_START_TIME,`${e}`)}get assetEndTime(){return Ede(this.getAttribute(Qae.ASSET_END_TIME))}set assetEndTime(e){null==e?this.removeAttribute(Qae.ASSET_END_TIME):this.setAttribute(Qae.ASSET_END_TIME,`${e}`)}get extraSourceParams(){return this.hasAttribute(phe.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(phe.EXTRA_SOURCE_PARAMS)).entries()].reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{}):Bhe}set extraSourceParams(e){null==e?this.removeAttribute(phe.EXTRA_SOURCE_PARAMS):this.setAttribute(phe.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return null!=(e=this.getAttribute(Qae.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(Qae.CUSTOM_DOMAIN,e):this.removeAttribute(Qae.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=Vhe(this,Qae.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(Qae.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(phe.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(phe.NO_VOLUME_PREF,""):this.removeAttribute(phe.NO_VOLUME_PREF)}get debug(){return null!=Vhe(this,Qae.DEBUG)}set debug(e){e?this.setAttribute(Qae.DEBUG,""):this.removeAttribute(Qae.DEBUG)}get disableTracking(){return null!=Vhe(this,Qae.DISABLE_TRACKING)}set disableTracking(e){this.toggleAttribute(Qae.DISABLE_TRACKING,!!e)}get disableCookies(){return null!=Vhe(this,Qae.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(Qae.DISABLE_COOKIES,""):this.removeAttribute(Qae.DISABLE_COOKIES)}get streamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(Qae.STREAM_TYPE))?t:null==(e=this.media)?void 0:e.streamType)?n:lre.UNKNOWN}set streamType(e){this.setAttribute(Qae.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(phe.DEFAULT_STREAM_TYPE))?t:null==(e=this.mediaController)?void 0:e.getAttribute(phe.DEFAULT_STREAM_TYPE))?n:lre.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(phe.DEFAULT_STREAM_TYPE,e):this.removeAttribute(phe.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(phe.TARGET_LIVE_WINDOW)?+this.getAttribute(phe.TARGET_LIVE_WINDOW):null!=(t=null==(e=this.media)?void 0:e.targetLiveWindow)?t:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(null==e?this.removeAttribute(phe.TARGET_LIVE_WINDOW):this.setAttribute(phe.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e;return null==(e=this.media)?void 0:e.liveEdgeStart}get startTime(){return Ede(Vhe(this,Qae.START_TIME))}set startTime(e){this.setAttribute(Qae.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(Qae.PREFER_PLAYBACK);if(e===cre||e===ure)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===cre||e===ure?this.setAttribute(Qae.PREFER_PLAYBACK,e):this.removeAttribute(Qae.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){dde(this,The,_he).call(this),this.media?this.media.metadata={...yhe(this),...e}:jde("underlying media element missing when trying to set metadata. metadata will not be set.")}get _hlsConfig(){var e;return null==(e=this.media)?void 0:e._hlsConfig}set _hlsConfig(e){dde(this,The,_he).call(this),this.media?this.media._hlsConfig=e:jde("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.")}async addCuePoints(e){var t;if(dde(this,The,_he).call(this),this.media)return null==(t=this.media)?void 0:t.addCuePoints(e);jde("underlying media element missing when trying to addCuePoints. cuePoints will not be added.")}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}addChapters(e){var t;if(dde(this,The,_he).call(this),this.media)return null==(t=this.media)?void 0:t.addChapters(e);jde("underlying media element missing when trying to addChapters. chapters will not be added.")}get activeChapter(){var e;return null==(e=this.media)?void 0:e.activeChapter}get chapters(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.chapters)?t:[]}getStartDate(){var e;return null==(e=this.media)?void 0:e.getStartDate()}get currentPdt(){var e;return null==(e=this.media)?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(phe.PLAYBACK_TOKEN),t=this.getAttribute(phe.DRM_TOKEN),n=this.getAttribute(phe.THUMBNAIL_TOKEN),r=this.getAttribute(phe.STORYBOARD_TOKEN);return{...lde(this,xhe),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{},...null!=n?{thumbnail:n}:{},...null!=r?{storyboard:r}:{}}}set tokens(e){ude(this,xhe,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(phe.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(phe.PLAYBACK_TOKEN,`${e}`)}get drmToken(){var e;return null!=(e=this.getAttribute(phe.DRM_TOKEN))?e:void 0}set drmToken(e){this.setAttribute(phe.DRM_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(phe.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(phe.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(phe.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(phe.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,r){var i;let o=null==(i=this.media)?void 0:i.nativeEl;if(o)return Lre(o,e,t,n,r)}removeTextTrack(e){var t;let n=null==(t=this.media)?void 0:t.nativeEl;if(n)return function(e,t){let n=Array.prototype.find.call(e.querySelectorAll("track"),(e=>e.track===t));null==n||n.remove()}(n,e)}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}get castReceiver(){var e;return null!=(e=this.getAttribute(phe.CAST_RECEIVER))?e:void 0}set castReceiver(e){e!==this.castReceiver&&(e?this.setAttribute(phe.CAST_RECEIVER,e):this.removeAttribute(phe.CAST_RECEIVER))}get castCustomData(){var e;return null==(e=this.media)?void 0:e.castCustomData}set castCustomData(e){this.media?this.media.castCustomData=e:jde("underlying media element missing when trying to set castCustomData. castCustomData will not be set.")}get noTooltips(){return this.hasAttribute(phe.NO_TOOLTIPS)}set noTooltips(e){e?this.setAttribute(phe.NO_TOOLTIPS,""):this.removeAttribute(phe.NO_TOOLTIPS)}get proudlyDisplayMuxBadge(){return this.hasAttribute(phe.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(e){e?this.setAttribute(phe.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(phe.PROUDLY_DISPLAY_MUX_BADGE)}};function Vhe(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}bhe=new WeakMap,whe=new WeakMap,xhe=new WeakMap,Ehe=new WeakMap,Ahe=new WeakMap,She=new WeakMap,The=new WeakSet,_he=function(){var e,t,n,r;if(!lde(this,whe)){ude(this,whe,!0),dde(this,The,Ihe).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof yde.HTMLElement))throw""}catch{jde("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof fse))throw""}catch{jde("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof rJ))throw""}catch{jde("<media-controller> failed to upgrade!")}this.init(),dde(this,The,Rhe).call(this),dde(this,The,Dhe).call(this),dde(this,The,Lhe).call(this),ude(this,Ehe,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(cX.USER_INACTIVE))||t),dde(this,The,Phe).call(this),null==(n=this.media)||n.addEventListener("streamtypechange",(()=>dde(this,The,Ihe).call(this))),null==(r=this.media)||r.addEventListener("loadstart",(()=>dde(this,The,Ihe).call(this)))}},khe=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},Che=function(e){Object.assign(lde(this,She),e),dde(this,The,Ihe).call(this)},Ihe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){e.renderInto(t)}((e=>nhe`
  <style>
    ${(e=>{let{tokens:t}=e;return t.drm?":host { --_cast-button-drm-display: none; }":""})(e)}
    ${":host {\n  --media-control-display: var(--controls);\n  --media-loading-indicator-display: var(--loading-indicator);\n  --media-dialog-display: var(--dialog);\n  --media-play-button-display: var(--play-button);\n  --media-live-button-display: var(--live-button);\n  --media-seek-backward-button-display: var(--seek-backward-button);\n  --media-seek-forward-button-display: var(--seek-forward-button);\n  --media-mute-button-display: var(--mute-button);\n  --media-captions-button-display: var(--captions-button);\n  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));\n  --media-rendition-menu-button-display: var(--rendition-menu-button);\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button);\n  --media-airplay-button-display: var(--airplay-button);\n  --media-pip-button-display: var(--pip-button);\n  --media-fullscreen-button-display: var(--fullscreen-button);\n  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));\n  --media-playback-rate-button-display: var(--playback-rate-button);\n  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);\n  --media-volume-range-display: var(--volume-range);\n  --media-time-range-display: var(--time-range);\n  --media-time-display-display: var(--time-display);\n  --media-duration-display-display: var(--duration-display);\n  --media-title-display-display: var(--title-display);\n\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n}\n\na {\n  color: #fff;\n  font-size: 0.9em;\n  text-decoration: underline;\n}\n\nmedia-theme {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n  direction: ltr;\n}\n\nmedia-poster-image {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n}\n\nmedia-poster-image:not([src]):not([placeholdersrc]) {\n  display: none;\n}\n\n::part(top),\n[part~='top'] {\n  --media-control-display: var(--controls, var(--top-controls));\n  --media-play-button-display: var(--play-button, var(--top-play-button));\n  --media-live-button-display: var(--live-button, var(--top-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--top-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--top-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--top-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--top-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--top-volume-range));\n  --media-time-range-display: var(--time-range, var(--top-time-range));\n  --media-time-display-display: var(--time-display, var(--top-time-display));\n  --media-duration-display-display: var(--duration-display, var(--top-duration-display));\n  --media-title-display-display: var(--title-display, var(--top-title-display));\n}\n\n::part(center),\n[part~='center'] {\n  --media-control-display: var(--controls, var(--center-controls));\n  --media-play-button-display: var(--play-button, var(--center-play-button));\n  --media-live-button-display: var(--live-button, var(--center-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--center-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--center-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--center-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--center-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--center-volume-range));\n  --media-time-range-display: var(--time-range, var(--center-time-range));\n  --media-time-display-display: var(--time-display, var(--center-time-display));\n  --media-duration-display-display: var(--duration-display, var(--center-duration-display));\n}\n\n::part(bottom),\n[part~='bottom'] {\n  --media-control-display: var(--controls, var(--bottom-controls));\n  --media-play-button-display: var(--play-button, var(--bottom-play-button));\n  --media-live-button-display: var(--live-button, var(--bottom-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--bottom-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));\n  --media-time-range-display: var(--time-range, var(--bottom-time-range));\n  --media-time-display-display: var(--time-display, var(--bottom-time-display));\n  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));\n  --media-title-display-display: var(--title-display, var(--bottom-title-display));\n}\n\n:host([no-tooltips]) {\n  --media-tooltip-display: none;\n}\n"}
  </style>
  ${ihe(e)}
`)(function(e,t){var n;return{src:!e.playbackId&&e.src,playbackId:e.playbackId,hasSrc:!!e.playbackId||!!e.src||!!e.currentSrc,poster:e.poster,storyboard:e.storyboard,storyboardSrc:e.getAttribute(phe.STORYBOARD_SRC),placeholder:e.getAttribute("placeholder"),themeTemplate:ghe(e),thumbnailTime:!e.tokens.thumbnail&&e.thumbnailTime,autoplay:e.autoplay,crossOrigin:e.crossOrigin,loop:e.loop,noHotKeys:e.hasAttribute(phe.NOHOTKEYS),hotKeys:e.getAttribute(phe.HOTKEYS),muted:e.muted,paused:e.paused,preload:e.preload,envKey:e.envKey,preferCmcd:e.preferCmcd,debug:e.debug,disableTracking:e.disableTracking,disableCookies:e.disableCookies,tokens:e.tokens,beaconCollectionDomain:e.beaconCollectionDomain,maxResolution:e.maxResolution,minResolution:e.minResolution,programStartTime:e.programStartTime,programEndTime:e.programEndTime,assetStartTime:e.assetStartTime,assetEndTime:e.assetEndTime,renditionOrder:e.renditionOrder,metadata:e.metadata,playerInitTime:e.playerInitTime,playerSoftwareName:e.playerSoftwareName,playerSoftwareVersion:e.playerSoftwareVersion,startTime:e.startTime,preferPlayback:e.preferPlayback,audio:e.audio,defaultStreamType:e.defaultStreamType,targetLiveWindow:e.getAttribute(Qae.TARGET_LIVE_WINDOW),streamType:Cde(e.getAttribute(Qae.STREAM_TYPE)),primaryColor:e.getAttribute(phe.PRIMARY_COLOR),secondaryColor:e.getAttribute(phe.SECONDARY_COLOR),accentColor:e.getAttribute(phe.ACCENT_COLOR),forwardSeekOffset:e.forwardSeekOffset,backwardSeekOffset:e.backwardSeekOffset,defaultHiddenCaptions:e.defaultHiddenCaptions,defaultDuration:e.defaultDuration,defaultShowRemainingTime:e.defaultShowRemainingTime,hideDuration:vhe(e),playbackRates:e.getAttribute(phe.PLAYBACK_RATES),customDomain:null!=(n=e.getAttribute(Qae.CUSTOM_DOMAIN))?n:void 0,title:e.getAttribute(phe.TITLE),novolumepref:e.hasAttribute(phe.NO_VOLUME_PREF),castReceiver:e.castReceiver,proudlyDisplayMuxBadge:e.hasAttribute(phe.PROUDLY_DISPLAY_MUX_BADGE),...t,extraSourceParams:e.extraSourceParams}}(this,{...lde(this,She),...e})),this.shadowRoot)},Rhe=function(){let e=e=>{var t,n;if(null==e||!e.startsWith("theme-"))return;let r=e.replace(/^theme-/,"");if(mhe.includes(r))return;let i=this.getAttribute(e);null!=i?null==(t=this.mediaTheme)||t.setAttribute(r,i):null==(n=this.mediaTheme)||n.removeAttribute(r)};new MutationObserver((t=>{for(let{attributeName:n}of t)e(n)})).observe(this,{attributes:!0}),this.getAttributeNames().forEach(e)},Dhe=function(){var e,t=this;this.addEventListener("error",(e=>{let{detail:t}=e;if(t instanceof ore||(t=new ore(t.message,t.code,t.fatal)),null==t||!t.fatal)return Nde(t),void(t.data&&Nde(`${t.name} data:`,t.data));let n=she(t);n.message&&Fde(n),jde(t),t.data&&jde(`${t.name} data:`,t.data),dde(this,The,Che).call(this,{isDialogOpen:!0})})),this.media&&(this.media.errorTranslator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n,r,i;if(!((null==(n=t.media)?void 0:n.error)instanceof ore))return e;let o=she(null==(r=t.media)?void 0:r.error);return{player_error_code:null==(i=t.media)?void 0:i.error.code,player_error_message:o.message?String(o.message):e.player_error_message,player_error_context:o.context?String(o.context):e.player_error_context}}),null==(e=this.media)||e.addEventListener("error",(e=>{var t,n;let{detail:r}=e;if(!r){let{message:e,code:i}=null!=(n=null==(t=this.media)?void 0:t.error)?n:{};r=new ore(e,i)}null!=r&&r.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:r}))}))},Lhe=function(){var e,t,n,r;let i=()=>dde(this,The,Ihe).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",i),null==(r=null==(n=this.media)?void 0:n.textTracks)||r.addEventListener("removetrack",i)},Phe=function(){var e,t,n=this;if(!/Firefox/i.test(navigator.userAgent))return;let r,i=new WeakMap,o=()=>this.streamType===lre.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,a=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o()||Array.from(e&&e.activeCues||[]).forEach((e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10))if(!t||n.paused){let t=e.text.split("\n").length,o=-3;n.streamType===lre.LIVE&&(o=-2);let a=o-t;if(e.line===a&&!r)return;i.has(e)||i.set(e,e.line),e.line=a}else setTimeout((()=>{e.line=i.get(e)||"auto"}),500)}))},s=()=>{var e,t;a(r,null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(cX.USER_INACTIVE))&&t)},l=()=>{var e,t;let n=Array.from((null==(t=null==(e=this.mediaController)?void 0:e.media)?void 0:t.textTracks)||[]).filter((e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode))[0];n!==r&&(null==r||r.removeEventListener("cuechange",s)),r=n,null==r||r.addEventListener("cuechange",s),a(r,lde(this,Ehe))};l(),null==(e=this.textTracks)||e.addEventListener("change",l),null==(t=this.textTracks)||t.addEventListener("addtrack",l),this.addEventListener("userinactivechange",(()=>{var e,t;let n=null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(cX.USER_INACTIVE))||t;lde(this,Ehe)!==n&&(ude(this,Ehe,n),a(r,lde(this,Ehe)))}))},yde.customElements.get("mux-player")||(yde.customElements.define("mux-player",$he),yde.MuxPlayerElement=$he);const Whe="http://localhost:3001",zhe=e=>{let{isOwner:n,roomId:r}=e;const[i,o]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[m,f]=(0,t.useState)(!1),g=(0,t.useRef)(null),v=(0,t.useRef)();(0,t.useEffect)((()=>(n&&r?b():r&&(y(),v.current=setInterval(y,5e3)),()=>{v.current&&clearInterval(v.current)})),[n,r]);const y=async()=>{try{const e=await fetch(`${Whe}/api/streams/${r}/status`);if(404===e.status)return n?(console.log("No stream found, creating new stream..."),void await b()):(console.log("No stream found for this room"),void c("Stream is not available. Please wait for the owner to start streaming."));if(!e.ok)throw new Error("Failed to check stream status");const t=await e.json();f(t.isActive),t.playbackId&&p(t.playbackId),t.streamId&&o(t.streamId),c(null)}catch(wye){console.error("Error checking stream status:",wye),f(!1),c("Failed to check stream status. Please try again later.")}},b=async()=>{try{if(d(!0),c(null),!r)throw new Error("Room ID is required");console.log("Creating stream for room:",r);const e=await fetch(`${Whe}/api/create-stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:r})});if(!e.ok){const t=await e.json();throw console.error("Server error:",t),new Error(t.details||t.error||`Server error: ${e.status}`)}const t=await e.json();if(console.log("Stream created successfully:",t),!t.streamKey||!t.playbackId)throw console.error("Invalid stream data:",t),new Error("Invalid stream data received from server");o(t.streamId),s(t.streamKey),p(t.playbackId),f(!1),v.current&&clearInterval(v.current),v.current=setInterval(y,5e3)}catch(wye){throw console.error("Error initializing stream:",wye),c(wye instanceof Error?wye.message:"Failed to initialize streaming. Please try again."),wye}finally{d(!1)}};return(0,Ve.jsxs)(Qe,{sx:{p:2},children:[l&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:l}),u&&(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,Ve.jsx)(dP,{})}),n&&(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:2,mb:2},children:[(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");f(!0)}catch(wye){console.error("Error starting stream:",wye),c("Failed to start streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||m,children:"Start Streaming"}),(0,Ve.jsx)(Kk,{variant:"contained",color:"secondary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");f(!1)}catch(wye){console.error("Error stopping stream:",wye),c("Failed to stop streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||!m,children:"Stop Streaming"})]}),n&&i&&(0,Ve.jsxs)(Qe,{sx:{mb:2,p:3,bgcolor:"background.paper",borderRadius:1},children:[(0,Ve.jsx)(N_,{variant:"h6",sx:{mb:2},children:"Stream Setup Instructions"}),(0,Ve.jsxs)(Qe,{sx:{mb:2},children:[(0,Ve.jsx)(N_,{variant:"subtitle1",color:"primary",children:"Stream Key (Required for OBS):"}),(0,Ve.jsx)(N_,{variant:"body2",sx:{wordBreak:"break-all",p:1,bgcolor:"action.hover",borderRadius:1,fontFamily:"monospace"},children:a})]}),(0,Ve.jsx)(N_,{variant:"subtitle1",sx:{mb:1},children:"How to Start Streaming:"}),(0,Ve.jsxs)("ol",{style:{marginLeft:"20px"},children:[(0,Ve.jsx)("li",{children:"Open OBS Studio"}),(0,Ve.jsxs)("li",{children:["Go to Settings ",">"," Stream"]}),(0,Ve.jsx)("li",{children:'Select "Custom..." as Service'}),(0,Ve.jsxs)("li",{children:["Set Server URL to: ",(0,Ve.jsx)(N_,{component:"span",sx:{fontFamily:"monospace"},children:"rtmps://global-live.mux.com:443/app"})]}),(0,Ve.jsx)("li",{children:'Copy the Stream Key shown above and paste it into the "Stream Key" field'}),(0,Ve.jsx)("li",{children:'Click "OK" to save settings'}),(0,Ve.jsx)("li",{children:'Click "Start Streaming" in OBS when ready'})]}),(0,Ve.jsx)(qP,{severity:"info",sx:{mt:2},children:"Keep your stream key private! Anyone with this key can stream to your channel."})]}),h&&(0,Ve.jsx)(Qe,{sx:{mt:2},children:m?(0,Ve.jsx)("mux-player",{ref:g,"stream-type":"live","playback-id":h,"metadata-video-title":"Live Stream","metadata-viewer-user-id":r,style:{width:"100%",maxHeight:"500px"}}):(0,Ve.jsx)(Qe,{sx:{textAlign:"center",p:3,bgcolor:"background.paper",borderRadius:1},children:(0,Ve.jsxs)(qP,{severity:"info",children:["The stream is not currently active. ",n?"Use the stream key above to start streaming.":"Please wait for the streamer to start broadcasting."]})})})]})},Hhe=[{label:"Default",value:"inherit"},{label:"Arial",value:"Arial, sans-serif"},{label:"Times New Roman",value:"Times New Roman, serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"Open Sans",value:"Open Sans, sans-serif"},{label:"Montserrat",value:"Montserrat, sans-serif"},{label:"Playfair Display",value:"Playfair Display, serif"},{label:"Comic Sans MS",value:"Comic Sans MS, cursive"},{label:"Poppins",value:"Poppins, sans-serif"},{label:"Dancing Script",value:"Dancing Script, cursive"},{label:"Pacifico",value:"Pacifico, cursive"},{label:"Quicksand",value:"Quicksand, sans-serif"},{label:"Lato",value:"Lato, sans-serif"},{label:"Raleway",value:"Raleway, sans-serif"},{label:"Nunito",value:"Nunito, sans-serif"},{label:"Source Sans Pro",value:"Source Sans Pro, sans-serif"},{label:"Ubuntu",value:"Ubuntu, sans-serif"},{label:"Oswald",value:"Oswald, sans-serif"},{label:"Merriweather",value:"Merriweather, serif"},{label:"Noto Sans",value:"Noto Sans, sans-serif"}],qhe=[{name:"Default",value:"#ffffff"},{name:"Ocean Blue",value:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"},{name:"Sunset",value:"linear-gradient(135deg, #ff6b6b 0%, #556270 100%)"},{name:"Forest",value:"linear-gradient(135deg, #134e5e 0%, #71b280 100%)"},{name:"Purple Rain",value:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)"},{name:"Glitter Gold",value:"linear-gradient(135deg, #f6d365 0%, #fda085 100%)"},{name:"Neon Pink",value:"linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%)"},{name:"Electric Blue",value:"linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)"},{name:"Mint Fresh",value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{name:"Glitter Purple",value:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)"},{name:"Midnight",value:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)"},{name:"Sunrise",value:"linear-gradient(135deg, #ff512f 0%, #f09819 100%)"},{name:"Emerald",value:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{name:"Rose",value:"linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)"},{name:"Sky",value:"linear-gradient(135deg, #56ccf2 0%, #2f80ed 100%)"},{name:"Autumn",value:"linear-gradient(135deg, #f2994a 0%, #f2c94c 100%)"},{name:"Crystal",value:"linear-gradient(135deg, #159957 0%, #155799 100%)"},{name:"Neon",value:"linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)"},{name:"Royal",value:"linear-gradient(135deg, #141e30 0%, #243b55 100%)"},{name:"Cotton Candy",value:"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"}],Ghe=[{name:"Star",value:"\u2b50"},{name:"Heart",value:"\u2764\ufe0f"},{name:"Fire",value:"\ud83d\udd25"},{name:"Sparkles",value:"\u2728"},{name:"Rocket",value:"\ud83d\ude80"},{name:"Party",value:"\ud83c\udf89"},{name:"Music",value:"\ud83c\udfb5"},{name:"Gaming",value:"\ud83c\udfae"},{name:"Art",value:"\ud83c\udfa8"},{name:"Sports",value:"\u26bd"},{name:"Food",value:"\ud83c\udf55"},{name:"Travel",value:"\u2708\ufe0f"},{name:"Tech",value:"\ud83d\udcbb"},{name:"Nature",value:"\ud83c\udf3f"},{name:"Weather",value:"\u2600\ufe0f"}],Khe=()=>{var e,n,r,i,o,a,s,l,c,u,d,h,p,m;const{roomId:f}=Z(),{user:g,loading:v}=xT(),y=J(),[b,w]=(0,t.useState)(null),[x,E]=(0,t.useState)(!0),[A,S]=(0,t.useState)(null),[T,_]=(0,t.useState)(!1),[k,C]=(0,t.useState)(""),[I,R]=(0,t.useState)(!1),[D,L]=(0,t.useState)([]),[P,M]=(0,t.useState)(""),[O,N]=(0,t.useState)(!1),[j,F]=(0,t.useState)(!1),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(!1),[W,z]=(0,t.useState)(null),[H,q]=(0,t.useState)(!1),[G,K]=(0,t.useState)(!1),[Y,X]=(0,t.useState)(""),[Q,ee]=(0,t.useState)([]),[te,ne]=(0,t.useState)([]),[re,ie]=(0,t.useState)(!1),[oe,ae]=(0,t.useState)([]),[se,le]=((0,t.useRef)(null),(0,t.useRef)(null),(0,t.useState)(!1)),[ce,ue]=(0,t.useState)(""),[de,he]=(0,t.useState)(!1),[pe,me]=(0,t.useState)(""),[fe,ge]=(0,t.useState)(!1),[ve,ye]=(0,t.useState)({headerColor:(null===b||void 0===b||null===(e=b.style)||void 0===e?void 0:e.headerColor)||"#ffffff",backgroundColor:(null===b||void 0===b||null===(n=b.style)||void 0===n?void 0:n.backgroundColor)||"#ffffff",textColor:(null===b||void 0===b||null===(r=b.style)||void 0===r?void 0:r.textColor)||"#000000",accentColor:(null===b||void 0===b||null===(i=b.style)||void 0===i?void 0:i.accentColor)||"#000000",font:(null===b||void 0===b||null===(o=b.style)||void 0===o?void 0:o.font)||"",customCss:(null===b||void 0===b||null===(a=b.style)||void 0===a?void 0:a.customCss)||"",headerGradient:(null===b||void 0===b||null===(s=b.style)||void 0===s?void 0:s.headerGradient)||!1,backgroundGradient:(null===b||void 0===b||null===(l=b.style)||void 0===l?void 0:l.backgroundGradient)||!1,glitterEffect:(null===b||void 0===b||null===(c=b.style)||void 0===c?void 0:c.glitterEffect)||!1,headerFontSize:(null===b||void 0===b||null===(u=b.style)||void 0===u?void 0:u.headerFontSize)||24,stickers:(null===b||void 0===b||null===(d=b.style)||void 0===d?void 0:d.stickers)||[]}),[be,we]=(0,t.useState)(!1),[xe,Ee]=(0,t.useState)([]),[Ae,Se]=(0,t.useState)(!1),Te=(0,t.useRef)(!0),_e=(0,t.useRef)(null),ke=(0,t.useMemo)((()=>(null===b||void 0===b?void 0:b.ownerId)===(null===g||void 0===g?void 0:g.uid)),[null===b||void 0===b?void 0:b.ownerId,null===g||void 0===g?void 0:g.uid]),Ce=g&&(null===b||void 0===b||null===(h=b.members)||void 0===h?void 0:h.some((e=>e.userId===g.uid)));(0,t.useEffect)((()=>()=>{Te.current=!1}),[]);const Ie=(0,t.useCallback)(((e,t)=>{console.error(t,e),Te.current&&(e instanceof js?S(`Firestore error: ${e.message}`):e instanceof Error?S(e.message):S(t))}),[]);(0,t.useEffect)((()=>{if(!g||!f)return;(async()=>{try{if(!f||!KA)return;console.log("Current user:",g),console.log("Display name:",g.displayName),console.log("Photo URL:",g.photoURL);Zf(KA,"sideRooms",f);const e=Jf(KA,"sideRooms",f,"messages"),t=fv(Wg(e,Kg("timestamp","asc")),(e=>{var t;const n=e.docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username,avatar:t.avatar,content:t.content,timestamp:t.timestamp,photoURL:t.photoURL||t.avatar||"",displayName:t.displayName||t.username||"Anonymous"}}));console.log("Messages:",n),L(n),null===(t=_e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"});const r=Zf(KA,"sideRooms",f),i=oe.filter((e=>e.isOnline)).length;hv(r,{activeUsers:i,lastActive:Sv()})}));return()=>t()}catch(wye){console.error("Error setting up room listener:",wye),S("Failed to setup room listener")}})()}),[g,f,oe]),(0,t.useEffect)((()=>{if(v)return;if(!g)return void y("/login");let e,t,n;const r=()=>{try{if(!f||!KA)return;const e=Wg(Jf(KA,"sideRooms",f,"messages"),Kg("timestamp","desc"),Xg(50));t=fv(e,(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}}));L(t.reverse())}),(e=>{console.error("Error listening to messages:",e),e instanceof js&&"permission-denied"===e.code&&S("You need to be a member of this room to view messages")}))}catch(wye){console.error("Error setting up messages listener:",wye)}},i=()=>{try{if(!f||!KA)return;const e=Jf(KA,"sideRooms",f,"presence");n=fv(e,(e=>{const t=e.docs.map((e=>{var t;return{...e.data(),lastSeen:(null===(t=e.data().lastSeen)||void 0===t?void 0:t.toDate())||new Date}}));ae(t);const n=Zf(KA,"sideRooms",f),r=t.filter((e=>e.isOnline)).length;hv(n,{activeUsers:r,lastActive:Sv()})}),(e=>{console.error("Error listening to presence:",e),e instanceof js&&"permission-denied"===e.code&&S("You need to be a member of this room to view presence")}))}catch(wye){console.error("Error setting up presence listener:",wye)}};return(async()=>{try{if(!f||!KA)return;const o=Zf(KA,"sideRooms",f);e=fv(o,(async e=>{if(e.exists()){var o;const a=e.data();w(a),E(!1);const s=null===(o=a.members)||void 0===o?void 0:o.some((e=>e.userId===g.uid)),l=a.ownerId===g.uid;s||l?(r(),i()):(t&&t(),n&&n(),t=void 0,n=void 0,S("You need to be a member of this room to view messages and presence"))}else S("Room not found"),E(!1)}),(e=>{console.error("Error listening to room:",e),S("Failed to load room data"),E(!1)}))}catch(wye){console.error("Error setting up room listener:",wye),S("Failed to setup room listener"),E(!1)}})(),()=>{e&&e(),t&&t(),n&&n()}}),[g,v,f,y,oe]);const Re=(0,t.useCallback)((async()=>{if(b&&g&&f&&!I)try{R(!0);const e=Zf(KA,"sideRooms",f),t=Jf(KA,"users",g.uid,"sideRooms");await Av(KA,(async n=>{const r=await n.get(e);if(!r.exists())throw new Error("Room not found");const i=r.data();if((i.members||[]).some((e=>e.userId===g.uid)))n.update(e,{activeUsers:kv(1),lastActive:Sv()});else{var o;n.update(e,{members:Tv({userId:g.uid,username:g.displayName||"Anonymous",avatar:g.photoURL||"",role:"member",joinedAt:Sv()}),memberCount:kv(1),activeUsers:kv(1),lastActive:Sv()});const r=Zf(t,f);n.set(r,{roomId:f,name:i.name,description:i.description,role:"member",joinedAt:Sv(),lastActive:Sv(),memberCount:i.memberCount,isPrivate:i.isPrivate,isOwner:!1,thumbnailUrl:(null===(o=i.style)||void 0===o?void 0:o.thumbnailUrl)||null,category:i.category||"General"})}})),Te.current&&(wS.success("Joined room successfully"),_(!1))}catch(wye){console.error("Error joining room:",wye),wye instanceof Error?wS.error(wye.message):wS.error("Failed to join room"),Te.current&&_(!1)}finally{Te.current&&R(!1)}}),[b,g,f,I,KA,_,R]),De=((0,t.useCallback)((()=>{b?k.trim()?k===b.password?Re():wS.error("Incorrect password"):wS.error("Please enter a password"):wS.error("Room not found")}),[b,k,Re]),(0,t.useCallback)((async()=>{if(b&&g&&f&&!I)try{R(!0);const e=Zf(KA,"sideRooms",f),t=Zf(KA,"users",g.uid,"sideRooms",f);await Av(KA,(async n=>{const r=await n.get(e);if(!r.exists())throw new Error("Room not found");const i=r.data(),o={userId:g.uid,username:g.displayName||"Anonymous",avatar:g.photoURL||"",role:"member",joinedAt:new Date};n.update(e,{members:_v(o),memberCount:Math.max(0,(i.memberCount||0)-1),style:i.style||ve,lastActive:Sv()}),n.delete(t)})),Te.current&&(wS.success("Left room successfully"),setTimeout((()=>{Te.current&&y("/side-rooms")}),100))}catch(wye){Ie(wye,"Failed to leave room")}finally{Te.current&&R(!1)}}),[b,g,f,I,y,Ie,ve]),async()=>{if(b&&g&&f)try{R(!0);const e=Zf(KA,"sideRooms",f);await hv(e,{isLive:!b.isLive,lastActivity:Sv()}),N(!b.isLive),wS.success(b.isLive?"Stopped live session":"Started live session")}catch(wye){Ie(wye,"Failed to update live status")}finally{R(!1)}}),Le=async e=>{if(e.preventDefault(),f&&g&&P.trim())try{var t;const e=Jf(KA,"sideRooms",f,"messages"),n={userId:g.uid,username:g.displayName||"Anonymous",avatar:g.photoURL||"",content:P.trim(),timestamp:Sv(),photoURL:g.photoURL||"",displayName:g.displayName||"Anonymous"};await mv(e,n),M(""),null===(t=_e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})}catch(wye){Ie(wye,"Failed to send message")}},Pe=e=>{z(e.currentTarget)},Me=()=>{z(null)},Oe=async()=>{if(b&&f&&g&&0!==te.length)try{ie(!0);const e=Cv(KA);for(const t of te){const n=Zf(Jf(KA,"sideRooms",f,"invitations"));e.set(n,{userId:t.id,invitedBy:g.uid,inviterName:g.displayName||"Anonymous",inviterAvatar:g.photoURL||"",roomId:f,roomName:b.name,timestamp:Sv(),status:"pending"});const r=Zf(Jf(KA,"users",t.id,"notifications"));e.set(r,{type:"room_invitation",roomId:f,roomName:b.name,invitedBy:g.uid,inviterName:g.displayName||"Anonymous",inviterAvatar:g.photoURL||"",timestamp:Sv(),status:"unread",message:`${g.displayName||"Someone"} invited you to join "${b.name}"`})}await e.commit(),wS.success("Invitations sent successfully"),K(!1),ne([]),ee([])}catch(wye){console.error("Error sending invitations:",wye),wS.error("Failed to send invitations")}finally{ie(!1)}},Ne=async()=>{if(KA&&g&&f)try{R(!0);const e=await fetch("http://localhost:3001/api/mux/create-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:g.uid})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to create stream")}const{streamKey:t,playbackId:n,streamId:r}=await e.json(),i=Zf(KA,"sideRooms",f);await hv(i,{isMobileStreaming:!0,mobileStreamKey:t,mobilePlaybackId:n,mobileStreamerId:g.uid,lastActive:Sv()}),ue(`https://stream.mux.com/${n}`),me(t),le(!0),he(!0),wS.success("Mobile streaming ready")}catch(A){console.error("Error starting mobile stream:",A),wS.error("Failed to start mobile stream")}finally{R(!1)}},je=async()=>{if(KA&&g&&f)try{R(!0);const e=await fetch("http://localhost:3001/api/mux/delete-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:g.uid})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to stop stream")}const t=Zf(KA,"sideRooms",f);await hv(t,{isMobileStreaming:!1,mobileStreamKey:null,mobilePlaybackId:null,mobileStreamerId:null,lastActive:Sv()}),le(!1),ue(""),me(""),he(!1),wS.success("Mobile streaming stopped")}catch(A){console.error("Error stopping mobile stream:",A),wS.error("Failed to stop mobile stream")}finally{R(!1)}},Fe=async()=>{if(!b||!g||!f||!b.isLive)return void wS.error("Room must be live to start recording");const e=b.mobilePlaybackId||b.currentStreamId;if(e)try{R(!0);const t=await fetch("http://localhost:3001/api/mux/start-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:g.uid,streamId:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to start recording")}const{recordingId:n}=await t.json(),r=Zf(KA,"sideRooms",f);await hv(r,{isRecording:!0,currentRecordingId:n,lastActive:Sv()}),we(!0),wS.success("Recording started")}catch(A){console.error("Error starting recording:",A),wS.error(A instanceof Error?A.message:"Failed to start recording")}finally{R(!1)}else wS.error("No active stream found. Please start streaming first.")},Ue=async()=>{if(b&&g&&f)try{R(!0);if(!(await fetch("http://localhost:3001/api/mux/stop-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:g.uid,recordingId:b.currentRecordingId})})).ok)throw new Error("Failed to stop recording");const e=Zf(KA,"sideRooms",f);await hv(e,{isRecording:!1,currentRecordingId:null,lastActive:Sv()}),we(!1),wS.success("Recording stopped")}catch(A){console.error("Error stopping recording:",A),wS.error("Failed to stop recording")}finally{R(!1)}};if(v||x)return(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(dP,{})});if(A)return(0,Ve.jsx)(Qe,{sx:{p:2},children:(0,Ve.jsx)(qP,{severity:"error",children:A})});if(!b)return null;null===(p=b.members)||void 0===p||p.some((e=>e.userId===(null===g||void 0===g?void 0:g.uid)&&"owner"===e.role)),null===(m=b.members)||void 0===m||m.find((e=>"owner"===e.role));return(0,Ve.jsxs)(Qe,{sx:{display:"flex",height:"100vh",overflow:"hidden",...null!==b&&void 0!==b&&b.style?{bgcolor:b.style.backgroundColor,background:b.style.backgroundGradient?b.style.backgroundColor:void 0,color:b.style.textColor||"text.primary",fontFamily:b.style.font||"inherit",...b.style.glitterEffect&&{"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M11 0h2v2h-2zM13 2h2v2h-2zM15 4h2v2h-2zM17 6h2v2h-2zM19 8h2v2h-2zM21 10h2v2h-2zM23 12h2v2h-2zM25 14h2v2h-2zM27 16h2v2h-2zM29 18h2v2h-2zM31 20h2v2h-2zM33 22h2v2h-2zM35 24h2v2h-2zM37 26h2v2h-2zM39 28h2v2h-2zM41 30h2v2h-2zM43 32h2v2h-2zM45 34h2v2h-2zM47 36h2v2h-2zM49 38h2v2h-2zM51 40h2v2h-2zM53 42h2v2h-2zM55 44h2v2h-2zM57 46h2v2h-2zM59 48h2v2h-2zM61 50h2v2h-2zM63 52h2v2h-2zM65 54h2v2h-2zM67 56h2v2h-2zM69 58h2v2h-2zM71 60h2v2h-2zM73 62h2v2h-2zM75 64h2v2h-2zM77 66h2v2h-2zM79 68h2v2h-2zM81 70h2v2h-2zM83 72h2v2h-2zM85 74h2v2h-2zM87 76h2v2h-2zM89 78h2v2h-2zM91 80h2v2h-2zM93 82h2v2h-2zM95 84h2v2h-2zM97 86h2v2h-2zM99 88h2v2h-2zM101 90h2v2h-2zM103 92h2v2h-2zM105 94h2v2h-2zM107 96h2v2h-2zM109 98h2v2h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",opacity:.5,zIndex:1,pointerEvents:"none"}},...b.style.customCss?{...JSON.parse(b.style.customCss)}:{}}:{}},children:[(0,Ve.jsxs)(Qe,{sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,Ve.jsx)(Qe,{sx:{position:"relative",p:2,borderBottom:1,borderColor:"divider",background:(ve.headerGradient,ve.headerColor),minHeight:"auto",display:"flex",flexDirection:"column",...ve.glitterEffect&&{"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M11 0h2v2h-2zM13 2h2v2h-2zM15 4h2v2h-2zM17 6h2v2h-2zM19 8h2v2h-2zM21 10h2v2h-2zM23 12h2v2h-2zM25 14h2v2h-2zM27 16h2v2h-2zM29 18h2v2h-2zM31 20h2v2h-2zM33 22h2v2h-2zM35 24h2v2h-2zM37 26h2v2h-2zM39 28h2v2h-2zM41 30h2v2h-2zM43 32h2v2h-2zM45 34h2v2h-2zM47 36h2v2h-2zM49 38h2v2h-2zM51 40h2v2h-2zM53 42h2v2h-2zM55 44h2v2h-2zM57 46h2v2h-2zM59 48h2v2h-2zM61 50h2v2h-2zM63 52h2v2h-2zM65 54h2v2h-2zM67 56h2v2h-2zM69 58h2v2h-2zM71 60h2v2h-2zM73 62h2v2h-2zM75 64h2v2h-2zM77 66h2v2h-2zM79 68h2v2h-2zM81 70h2v2h-2zM83 72h2v2h-2zM85 74h2v2h-2zM87 76h2v2h-2zM89 78h2v2h-2zM91 80h2v2h-2zM93 82h2v2h-2zM95 84h2v2h-2zM97 86h2v2h-2zM99 88h2v2h-2zM101 90h2v2h-2zM103 92h2v2h-2zM105 94h2v2h-2zM107 96h2v2h-2zM109 98h2v2h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",opacity:.5,zIndex:1,pointerEvents:"none"}}},children:(0,Ve.jsxs)(Qe,{sx:{position:"relative",zIndex:2,display:"flex",justifyContent:"space-between",alignItems:"center",color:ve.textColor},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",sx:{fontFamily:ve.font,textShadow:"2px 2px 4px rgba(0,0,0,0.3)",fontSize:`${ve.headerFontSize}px`},children:null===b||void 0===b?void 0:b.name}),(0,Ve.jsxs)(N_,{variant:"subtitle1",sx:{fontFamily:ve.font,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:["Created by ",(null===b||void 0===b?void 0:b.ownerId)===(null===g||void 0===g?void 0:g.uid)?"You":"Anonymous"]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[(0,Ve.jsx)($H,{fontSize:"small",sx:{color:ve.accentColor}}),(0,Ve.jsxs)(N_,{variant:"body2",sx:{fontFamily:ve.font,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:[(null===b||void 0===b?void 0:b.activeUsers)||0," ",1===(null===b||void 0===b?void 0:b.activeUsers)?"person":"people"," viewing"]})]})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[ke&&(0,Ve.jsx)(Sk,{onClick:Pe,sx:{color:ve.accentColor},children:(0,Ve.jsx)(TO,{})}),ke&&(0,Ve.jsx)(Kk,{variant:"outlined",startIcon:(0,Ve.jsx)(OH,{}),onClick:()=>K(!0),children:"Add Member"}),(ke||Ce)&&(0,Ve.jsx)(Kk,{variant:"contained",color:se?"error":"primary",startIcon:se?(0,Ve.jsx)(vK,{}):(0,Ve.jsx)(mO,{}),onClick:se?je:Ne,disabled:I,sx:{mr:1},children:se?"Stop Mobile Stream":"Start Mobile Stream"}),(0,Ve.jsx)(Wq,{title:"Chat",children:(0,Ve.jsx)(Sk,{onClick:()=>B(!U),color:U?"primary":"default",children:(0,Ve.jsx)(yK,{})})}),ke&&(0,Ve.jsx)(Wq,{title:null!==b&&void 0!==b&&b.isLive?"Stop Live":"Go Live",children:(0,Ve.jsx)(Sk,{color:null!==b&&void 0!==b&&b.isLive?"error":"primary",onClick:De,disabled:I,children:(0,Ve.jsx)(bK,{})})}),ke&&(null===b||void 0===b?void 0:b.isLive)&&(0,Ve.jsx)(Wq,{title:be?"Stop Recording":"Start Recording",children:(0,Ve.jsx)(Sk,{onClick:be?Ue:Fe,color:be?"error":"primary",disabled:I,children:be?(0,Ve.jsx)(wK,{}):(0,Ve.jsx)(xK,{})})}),(0,Ve.jsx)(Wq,{title:"Members",children:(0,Ve.jsx)(Sk,{onClick:()=>F(!j),color:j?"primary":"default",children:(0,Ve.jsx)($H,{})})})]})]})}),(0,Ve.jsx)(Qe,{sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:(null===b||void 0===b?void 0:b.isLive)&&(b?(0,Ve.jsx)(Qe,{sx:{mb:3},children:(0,Ve.jsx)(zhe,{isOwner:b.ownerId===(null===g||void 0===g?void 0:g.uid),roomId:f||""})}):null)})]}),(j||U)&&(0,Ve.jsxs)(Qe,{sx:{width:{xs:"100%",sm:300},height:"100%",position:{xs:"fixed",sm:"relative"},right:0,top:0,bgcolor:"background.paper",borderLeft:1,borderColor:"divider",display:"flex",flexDirection:"column",zIndex:1200},children:[j&&(()=>{var e;return(0,Ve.jsx)(tC,{children:null===b||void 0===b||null===(e=b.members)||void 0===e?void 0:e.map((e=>{var t;return(0,Ve.jsxs)(DR,{sx:{borderRadius:1,mb:1,"&:hover":{bgcolor:"action.hover"}},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.avatar,alt:e.username,sx:{width:40,height:40,border:t=>"owner"===e.role?`2px solid ${t.palette.primary.main}`:"none"},children:!e.avatar&&(null===(t=e.username)||void 0===t?void 0:t.charAt(0))})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",children:e.username||"Anonymous"}),"owner"===e.role&&(0,Ve.jsx)(CB,{label:"Owner",size:"small",color:"primary",sx:{height:20}})]}),secondary:(0,Ve.jsxs)(N_,{variant:"caption",color:"text.secondary",children:["Joined ",e.joinedAt instanceof nl?e.joinedAt.toDate().toLocaleDateString():e.joinedAt.toLocaleDateString()]})}),ke&&"owner"!==e.role&&(0,Ve.jsx)(Sk,{edge:"end","aria-label":"remove member",onClick:()=>{window.confirm(`Are you sure you want to remove ${e.username||"this member"}?`)&&(async e=>{if(b&&g&&f&&g.uid===b.ownerId)try{R(!0);const t=Zf(KA,"sideRooms",f);await hv(t,{members:_v(e),memberCount:kv(-1)});const n=Zf(Jf(KA,"users",e.userId,"notifications"));await dv(n,{type:"room_removal",roomId:f,roomName:b.name,removedBy:g.uid,removerName:g.displayName||"Anonymous",timestamp:Sv(),status:"unread",message:`You have been removed from "${b.name}"`}),wS.success("Member removed successfully")}catch(wye){console.error("Error removing member:",wye),wye instanceof Error?wS.error(wye.message):wS.error("Failed to remove member")}finally{R(!1)}else wS.error("Only room owners can remove members")})(e)},color:"error",disabled:I,children:(0,Ve.jsx)(oM,{})})]},e.userId)}))})})(),U&&(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,Ve.jsx)(Qe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(N_,{variant:"h6",children:"Chat"})}),(0,Ve.jsxs)(Qe,{sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:[D.map((e=>{var t,n,r;return(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1,alignItems:"flex-start",bgcolor:e.userId===(null===g||void 0===g?void 0:g.uid)?"primary.light":"background.paper",p:2,borderRadius:2,boxShadow:1},children:[(0,Ve.jsx)(I_,{src:e.avatar||e.photoURL,alt:e.username||e.displayName,sx:{width:40,height:40,border:t=>e.userId===(null===g||void 0===g?void 0:g.uid)?`2px solid ${t.palette.primary.main}`:"none"},children:!e.avatar&&!e.photoURL&&(e.username||e.displayName||"A").charAt(0).toUpperCase()}),(0,Ve.jsxs)(Qe,{sx:{flex:1},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",sx:{fontWeight:"bold",color:e.userId===(null===g||void 0===g?void 0:g.uid)?"primary.dark":"text.primary"},children:e.displayName||e.username||"Anonymous"}),(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:e.timestamp instanceof Date?e.timestamp.toLocaleTimeString():(null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleTimeString())||""})]}),(0,Ve.jsx)(N_,{variant:"body1",sx:{wordBreak:"break-word",color:e.userId===(null===g||void 0===g?void 0:g.uid)?"primary.contrastText":"text.primary",mt:.5},children:e.content})]})]},e.id)})),(0,Ve.jsx)("div",{ref:_e})]}),(0,Ve.jsx)(Qe,{component:"form",onSubmit:Le,sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(vD,{fullWidth:!0,placeholder:"Type a message...",value:P,onChange:e=>M(e.target.value),sx:{px:2,py:1,bgcolor:"action.hover",borderRadius:2}}),(0,Ve.jsx)(Sk,{type:"submit",color:"primary",disabled:!P.trim(),sx:{flexShrink:0},children:(0,Ve.jsx)(EK,{})})]})})]})]}),(0,Ve.jsxs)(GR,{open:G,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Invite Members"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(XL,{fullWidth:!0,label:"Search users",variant:"outlined",onChange:e=>{const t=e.target.value;X(t),t.trim()?(async e=>{if(e.trim()&&KA)try{const t=Wg(Jf(KA,"users"),Hg("username",">=",e.toLowerCase()),Hg("username","<=",e.toLowerCase()+"\uf8ff"),Xg(10)),n=(await uv(t)).docs.map((e=>({id:e.id,...e.data(),username:e.data().username||"Anonymous",avatar:e.data().avatar||""}))).filter((e=>{var t;return e.id!==(null===(t=GA.currentUser)||void 0===t?void 0:t.uid)}));ee(n)}catch(wye){console.error("Error searching users:",wye),wS.error("Failed to search users")}})(t):ee([])},InputProps:{startAdornment:(0,Ve.jsx)(GN,{position:"start",children:(0,Ve.jsx)(Tq,{})})}}),(0,Ve.jsx)(Qe,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:te.map((e=>{var t;return(0,Ve.jsx)(CB,{avatar:(0,Ve.jsx)(I_,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]}),label:e.username,onDelete:()=>ne((t=>t.filter((t=>t.id!==e.id))))},e.id)}))}),(0,Ve.jsx)(tC,{children:Q.map((e=>{var t;return(0,Ve.jsxs)(DR,{sx:{borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>{te.some((t=>t.id===e.id))||ne((t=>[...t,e]))},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]})}),(0,Ve.jsx)(eR,{primary:e.username})]},e.id)}))})]})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>K(!1),children:"Cancel"}),(0,Ve.jsx)(Kk,{variant:"contained",onClick:Oe,disabled:re||0===te.length,children:re?"Sending...":"Send Invitations"})]})]}),(0,Ve.jsxs)(GR,{open:de,onClose:()=>he(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Mobile Streaming Setup"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(N_,{variant:"body1",gutterBottom:!0,children:"To stream from your mobile device:"}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",paragraph:!0,children:["1. Open your mobile browser and go to: ",(0,Ve.jsx)(UN,{href:"https://broadcast.mux.com",target:"_blank",rel:"noopener noreferrer",children:"broadcast.mux.com"})]}),(0,Ve.jsx)(Qe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:(0,Ve.jsx)(XL,{fullWidth:!0,label:"Stream Key",value:pe,InputProps:{readOnly:!0,endAdornment:(0,Ve.jsx)(GN,{position:"end",children:(0,Ve.jsx)(Sk,{onClick:()=>{navigator.clipboard.writeText(pe),wS.success("Stream key copied to clipboard")},children:(0,Ve.jsx)(AK,{})})})},variant:"outlined"})}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"2. Enter the stream key shown above"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"3. Allow camera and microphone access when prompted"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:'4. Click "Start Broadcasting"'}),ce&&(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",gutterBottom:!0,children:"Stream URL (for viewers):"}),(0,Ve.jsx)(XL,{fullWidth:!0,value:ce,InputProps:{readOnly:!0,endAdornment:(0,Ve.jsx)(GN,{position:"end",children:(0,Ve.jsx)(Sk,{onClick:()=>{navigator.clipboard.writeText(ce),wS.success("Stream URL copied to clipboard")},children:(0,Ve.jsx)(AK,{})})})},variant:"outlined",size:"small"})]}),(0,Ve.jsx)(Qe,{sx:{mt:2},children:(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:"Note: Make sure your mobile device has a stable internet connection for the best streaming experience."})})]})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>he(!1),children:"Close"})})]}),(0,Ve.jsxs)(GR,{open:fe,onClose:()=>!I&&ge(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Customize Room Style"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:3,pt:2},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Colors"}),(0,Ve.jsxs)(RN,{container:!0,spacing:2,children:[(0,Ve.jsx)(RN,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Header Color"}),(0,Ve.jsx)(zL,{value:ve.headerColor,onChange:e=>ye((t=>({...t,headerColor:e.target.value}))),children:qhe.map((e=>(0,Ve.jsx)(qI,{value:e.value,children:e.name},e.name)))}),(0,Ve.jsx)(pL,{children:"Choose a color or gradient for the header"})]})}),(0,Ve.jsx)(RN,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Background Color"}),(0,Ve.jsx)(zL,{value:ve.backgroundColor,onChange:e=>ye((t=>({...t,backgroundColor:e.target.value}))),children:qhe.map((e=>(0,Ve.jsx)(qI,{value:e.value,children:e.name},e.name)))}),(0,Ve.jsx)(pL,{children:"Choose a color or gradient for the background"})]})}),(0,Ve.jsx)(RN,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Text Color"}),(0,Ve.jsx)(XL,{type:"color",value:ve.textColor,onChange:e=>ye((t=>({...t,textColor:e.target.value}))),fullWidth:!0,sx:{"& input":{height:"50px",cursor:"pointer"}}}),(0,Ve.jsx)(pL,{children:"Color for all text"})]})}),(0,Ve.jsx)(RN,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Accent Color"}),(0,Ve.jsx)(XL,{type:"color",value:ve.accentColor,onChange:e=>ye((t=>({...t,accentColor:e.target.value}))),fullWidth:!0,sx:{"& input":{height:"50px",cursor:"pointer"}}}),(0,Ve.jsx)(pL,{children:"Color for buttons and icons"})]})})]}),(0,Ve.jsxs)(Qe,{sx:{mt:2},children:[(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:ve.headerGradient,onChange:e=>ye((t=>({...t,headerGradient:e.target.checked})))}),label:"Enable Header Gradient Effect"}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:ve.backgroundGradient,onChange:e=>ye((t=>({...t,backgroundGradient:e.target.checked})))}),label:"Enable Background Gradient Effect"}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:ve.glitterEffect,onChange:e=>ye((t=>({...t,glitterEffect:e.target.checked})))}),label:"Enable Glitter Effect"})]})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Font"}),(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Font Style"}),(0,Ve.jsx)(zL,{value:ve.font,onChange:e=>ye((t=>({...t,font:e.target.value}))),sx:{fontFamily:ve.font},children:Hhe.map((e=>(0,Ve.jsx)(qI,{value:e.value,sx:{fontFamily:e.value},children:e.label},e.value)))}),(0,Ve.jsx)(pL,{children:"Choose a font for your room"})]})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Header Size"}),(0,Ve.jsx)(Qe,{sx:{px:2},children:(0,Ve.jsx)(FG,{value:ve.headerFontSize,onChange:(e,t)=>ye((e=>({...e,headerFontSize:t}))),min:16,max:48,step:1,marks:[{value:16,label:"Small"},{value:24,label:"Medium"},{value:36,label:"Large"},{value:48,label:"X-Large"}],valueLabelDisplay:"auto"})})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Stickers"}),(0,Ve.jsx)(Qe,{sx:{display:"flex",flexWrap:"wrap",gap:1,p:2},children:Ghe.map((e=>(0,Ve.jsx)(CB,{label:e.value,onClick:()=>{ye((t=>({...t,stickers:t.stickers.includes(e.value)?t.stickers.filter((t=>t!==e.value)):[...t.stickers,e.value]})))},color:ve.stickers.includes(e.value)?"primary":"default",sx:{fontSize:"1.5rem",cursor:"pointer"}},e.name)))})]})]})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>ge(!1),disabled:I,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(b&&f)try{R(!0);const e=Zf(KA,"sideRooms",f);await hv(e,{style:ve,updatedAt:new Date}),wS.success("Room style updated successfully"),ge(!1)}catch(wye){console.error("Error updating room style:",wye),Ie(wye,"Failed to update room style")}finally{R(!1)}},variant:"contained",disabled:I,children:I?(0,Ve.jsx)(dP,{size:24}):"Save Style"})]})]}),(0,Ve.jsx)(MI,{anchorEl:W,open:Boolean(W),onClose:Me,children:ke&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(qI,{onClick:()=>{Me(),V(!0)},disabled:I,children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(BH,{fontSize:"small"})}),"Edit Room"]}),(0,Ve.jsxs)(qI,{onClick:()=>{Me(),ge(!0)},disabled:I,children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(lR,{fontSize:"small"})}),"Customize Style"]}),(0,Ve.jsxs)(qI,{onClick:()=>Se(!0),children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(mO,{fontSize:"small"})}),"View Recordings"]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(qI,{onClick:async()=>{if(Me(),b&&g&&f&&g.uid===b.ownerId){if(window.confirm("Are you sure you want to delete this room? This action cannot be undone."))try{q(!0);const e=Zf(KA,"sideRooms",f),t=Jf(KA,"sideRooms",f,"presence"),n=Jf(KA,"sideRooms",f,"messages"),r=Cv(KA),i=Zf(KA,"users",g.uid,"trash",f),o=await lv(e);o.exists()&&r.set(i,{...o.data(),deletedAt:Sv(),originalPath:`sideRooms/${f}`}),r.delete(e);(await uv(t)).docs.forEach((e=>{r.delete(e.ref)}));(await uv(n)).docs.forEach((e=>{r.delete(e.ref)})),await r.commit(),wS.success("Room deleted successfully"),y("/side-rooms")}catch(wye){console.error("Error deleting room:",wye),wS.error("Failed to delete room")}finally{q(!1)}}else wS.error("You do not have permission to delete this room")},disabled:H||I,sx:{color:"error.main"},children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(oM,{fontSize:"small",color:"error"})}),"Delete Room"]})]})}),(0,Ve.jsxs)(GR,{open:$,onClose:()=>!I&&V(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Edit Room"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(XL,{fullWidth:!0,label:"Room Name",defaultValue:null===b||void 0===b?void 0:b.name,onChange:e=>{const t={...b,name:e.target.value};w(t)}}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Description",multiline:!0,rows:4,defaultValue:null===b||void 0===b?void 0:b.description,onChange:e=>{const t={...b,description:e.target.value};w(t)}}),(0,Ve.jsxs)(aL,{fullWidth:!0,children:[(0,Ve.jsx)(tL,{children:"Category"}),(0,Ve.jsxs)(zL,{value:(null===b||void 0===b?void 0:b.category)||"",label:"Category",onChange:e=>{const t={...b,category:e.target.value};w(t)},children:[(0,Ve.jsx)(qI,{value:"Gaming",children:"Gaming"}),(0,Ve.jsx)(qI,{value:"Music",children:"Music"}),(0,Ve.jsx)(qI,{value:"Art",children:"Art"}),(0,Ve.jsx)(qI,{value:"Technology",children:"Technology"}),(0,Ve.jsx)(qI,{value:"Sports",children:"Sports"}),(0,Ve.jsx)(qI,{value:"Education",children:"Education"}),(0,Ve.jsx)(qI,{value:"Entertainment",children:"Entertainment"}),(0,Ve.jsx)(qI,{value:"Social",children:"Social"}),(0,Ve.jsx)(qI,{value:"Other",children:"Other"})]})]}),(0,Ve.jsx)(XL,{fullWidth:!0,label:"Maximum Members",type:"number",defaultValue:null===b||void 0===b?void 0:b.maxMembers,onChange:e=>{const t={...b,maxMembers:parseInt(e.target.value)};w(t)},InputProps:{inputProps:{min:1}}}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:(null===b||void 0===b?void 0:b.isPrivate)||!1,onChange:e=>{const t={...b,isPrivate:e.target.checked};w(t)}}),label:"Private Room"}),(null===b||void 0===b?void 0:b.isPrivate)&&(0,Ve.jsx)(XL,{fullWidth:!0,label:"Room Password",type:"password",defaultValue:null===b||void 0===b?void 0:b.password,onChange:e=>{const t={...b,password:e.target.value};w(t)}}),(0,Ve.jsx)(gK,{multiple:!0,freeSolo:!0,options:[],defaultValue:(null===b||void 0===b?void 0:b.tags)||[],renderInput:e=>(0,Ve.jsx)(XL,{...e,label:"Tags",placeholder:"Add tags"}),onChange:(e,t)=>{const n={...b,tags:t};w(n)}})]})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>V(!1),disabled:I,children:"Cancel"}),(0,Ve.jsx)(Kk,{variant:"contained",onClick:()=>{(async e=>{if(b&&f&&g&&g.uid===b.ownerId)try{R(!0);const t=Zf(KA,"sideRooms",f),n=Zf(KA,"users",g.uid,"sideRooms",f),r={...e,updatedAt:Sv(),lastActive:Sv()};Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),await Av(KA,(async i=>{var o;i.update(t,r),i.update(n,{name:e.name||b.name,description:e.description||b.description,category:e.category||b.category,updatedAt:Sv(),lastActive:Sv(),thumbnailUrl:(null===(o=b.style)||void 0===o?void 0:o.thumbnailUrl)||null})})),wS.success("Room updated successfully"),V(!1)}catch(wye){console.error("Error updating room:",wye),wS.error("Failed to update room")}finally{R(!1)}else wS.error("You do not have permission to edit this room")})({name:null===b||void 0===b?void 0:b.name,description:null===b||void 0===b?void 0:b.description,category:null===b||void 0===b?void 0:b.category,maxMembers:null===b||void 0===b?void 0:b.maxMembers,isPrivate:null===b||void 0===b?void 0:b.isPrivate,password:null===b||void 0===b?void 0:b.password,tags:null===b||void 0===b?void 0:b.tags})},disabled:I,children:I?(0,Ve.jsx)(dP,{size:24}):"Save Changes"})]})]}),(0,Ve.jsxs)(GR,{open:Ae,onClose:()=>Se(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(JP,{children:"Recorded Streams"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(tC,{children:[xe.map((e=>(0,Ve.jsx)(DR,{secondaryAction:(0,Ve.jsx)(Sk,{edge:"end",onClick:()=>window.open(`https://stream.mux.com/${e.playbackId}`),children:(0,Ve.jsx)(mO,{})}),children:(0,Ve.jsx)(eR,{primary:e.title||`Recording from ${e.startedAt.toLocaleDateString()}`,secondary:`Duration: ${e.duration?Math.floor(e.duration/60):"?"} minutes`})},e.id))),0===xe.length&&(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No recordings available"})]})}),(0,Ve.jsx)(pO,{children:(0,Ve.jsx)(Kk,{onClick:()=>Se(!1),children:"Close"})})]})]})},Yhe=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=fv(Wg(Jf(KA,"messages"),Kg("timestamp","asc")),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()}}));n(t)}));return()=>e()}),[]);return(0,Ve.jsx)(DP,{maxWidth:"md",children:(0,Ve.jsxs)(Qe,{sx:{mt:4,mb:4},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",gutterBottom:!0,children:"Chat Room"}),(0,Ve.jsx)(tC,{sx:{maxHeight:"60vh",overflow:"auto",bgcolor:"background.paper",borderRadius:1},children:e.map((e=>{var t;return(0,Ve.jsxs)(DR,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",color:"primary",children:e.username}),(0,Ve.jsx)(N_,{variant:"body1",children:e.text}),(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]},e.id)}))}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""!==r.trim()&&KA)try{var t;await mv(Jf(KA,"messages"),{text:r,userId:null===(t=GA.currentUser)||void 0===t?void 0:t.uid,username:o||"Anonymous",timestamp:Sv()}),i("")}catch(s){console.error("Error sending message:",s)}},sx:{mt:2},children:[(0,Ve.jsx)(XL,{fullWidth:!0,variant:"outlined",placeholder:"Type your message...",value:r,onChange:e=>i(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(Kk,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})})};const Xhe=t.createContext({});function Qhe(e){return(0,GT.Ay)("MuiAccordion",e)}const Jhe=(0,Ge.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Zhe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],epe=(0,WT.Ay)(JT,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Jhe.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Jhe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Jhe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Jhe.expanded}`]:{margin:"16px 0"}}}]}})),tpe=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:a=!1,disabled:s=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,slots:h={},slotProps:p={},TransitionComponent:m,TransitionProps:f}=r,g=(0,Le.A)(r,Zhe),[v,y]=(0,SL.A)({controlled:c,default:a,name:"Accordion",state:"expanded"}),b=t.useCallback((e=>{y(!v),u&&u(e,!v)}),[v,u,y]),[w,...x]=t.Children.toArray(i),E=t.useMemo((()=>({expanded:v,disabled:s,disableGutters:l,toggle:b})),[v,s,l,b]),A=(0,De.A)({},r,{square:d,disabled:s,disableGutters:l,expanded:v}),S=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,a={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,VT.A)(a,Qhe,t)})(A),T=(0,De.A)({transition:m},h),_=(0,De.A)({transition:f},p),[k,C]=A_("transition",{elementType:SO,externalForwardedProps:{slots:T,slotProps:_},ownerState:A});return(0,Ve.jsxs)(epe,(0,De.A)({className:(0,Pe.A)(S.root,o),ref:n,ownerState:A,square:d},g,{children:[(0,Ve.jsx)(Xhe.Provider,{value:E,children:w}),(0,Ve.jsx)(k,(0,De.A)({in:v,timeout:"auto"},C,{children:(0,Ve.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:S.region,children:x})}))]}))})),npe=tpe;function rpe(e){return(0,GT.Ay)("MuiAccordionSummary",e)}const ipe=(0,Ge.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ope=["children","className","expandIcon","focusVisibleClassName","onClick"],ape=(0,WT.Ay)(yk,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${ipe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ipe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${ipe.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${ipe.expanded}`]:{minHeight:64}}}]}})),spe=(0,WT.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${ipe.expanded}`]:{margin:"20px 0"}}}]}})),lpe=(0,WT.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${ipe.expanded}`]:{transform:"rotate(180deg)"}}})),cpe=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:a,focusVisibleClassName:s,onClick:l}=r,c=(0,Le.A)(r,ope),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=t.useContext(Xhe),m=(0,De.A)({},r,{expanded:h,disabled:u,disableGutters:d}),f=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,VT.A)(o,rpe,t)})(m);return(0,Ve.jsxs)(ape,(0,De.A)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,Pe.A)(f.root,o),focusVisibleClassName:(0,Pe.A)(f.focusVisible,s),onClick:e=>{p&&p(e),l&&l(e)},ref:n,ownerState:m},c,{children:[(0,Ve.jsx)(spe,{className:f.content,ownerState:m,children:i}),a&&(0,Ve.jsx)(lpe,{className:f.expandIconWrapper,ownerState:m,children:a})]}))})),upe=cpe;function dpe(e){return(0,GT.Ay)("MuiAccordionDetails",e)}(0,Ge.A)("MuiAccordionDetails",["root"]);const hpe=["className"],ppe=(0,WT.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),mpe=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,Le.A)(n,hpe),o=n,a=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},dpe,t)})(o);return(0,Ve.jsx)(ppe,(0,De.A)({className:(0,Pe.A)(a.root,r),ref:t,ownerState:o},i))})),fpe=mpe,gpe=(0,u_.A)([(0,Ve.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,Ve.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),vpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),ype=(0,u_.A)((0,Ve.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),bpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),wpe=(0,u_.A)((0,Ve.jsx)("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),xpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),Epe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline"),Ape=(0,u_.A)((0,Ve.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport"),Spe=(0,u_.A)((0,Ve.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report"),Tpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),_pe=()=>(0,Ve.jsxs)(Qe,{sx:{mx:"auto"},children:[(0,Ve.jsx)(N_,{variant:"body1",sx:{mb:3},children:"These guidelines help ensure SideEye remains a platform where users can express themselves freely while maintaining a respectful and safe environment for all."}),(0,Ve.jsxs)(N_,{variant:"body1",sx:{mb:3,bgcolor:"info.light",p:2,borderRadius:1},children:[(0,Ve.jsx)("strong",{children:"Important Notice:"}),' SideEye uses an AI-powered moderation system that automatically scans all content against our community guidelines. Violations will result in strike points on your account, which can lead to warnings, restrictions, or account suspension. See the "Strike System" section below for more details.']}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(sq,{}),children:(0,Ve.jsx)(N_,{children:"Our Commitment to Safety"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"We are committed to maintaining a safe and respectful environment for all users. Our platform encourages healthy banter and shade while strictly prohibiting harassment, bullying, harmful content, misinformation, fraud, and cybercrime."}),(0,Ve.jsx)(N_,{paragraph:!0,children:"We believe in:"}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(cq,{})}),(0,Ve.jsx)(eR,{primary:"Protecting User Privacy",secondary:"We implement strict data protection measures and transparent privacy policies"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(gpe,{})}),(0,Ve.jsx)(eR,{primary:"Mental Health Support",secondary:"We provide resources and tools to support users' wellbeing"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(vpe,{})}),(0,Ve.jsx)(eR,{primary:"Inclusive Community",secondary:"We foster an environment that welcomes diverse perspectives and experiences"})]})]})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(ype,{}),children:(0,Ve.jsx)(N_,{children:"Prohibited Content"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"The following content is not permitted on our platform and may result in content removal, account restrictions, or termination:"}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Harassment & Bullying",secondary:"Targeted attacks, threats, persistent unwanted attention, or content designed to degrade or shame others"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Hate Speech",secondary:"Content that promotes discrimination, hostility, or violence against protected characteristics including race, ethnicity, national origin, religious affiliation, sexual orientation, gender, gender identity, or disability"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Misinformation",secondary:"Deliberate spreading of false information about health, science, elections, or current events that may cause public harm"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Fraud & Scams",secondary:"Financial scams, phishing attempts, pyramid schemes, deceptive business practices, or unauthorized promotions"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Cybercrime",secondary:"Hacking attempts, malware distribution, unauthorized access, or other illegal online activities"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Adult Content & Exploitation",secondary:"Sexually explicit content, non-consensual intimate imagery, sexual exploitation, or content that sexualizes minors"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Violence & Gore",secondary:"Gratuitous violence, content promoting self-harm, suicide, eating disorders, or graphic injury"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Copyright Infringement",secondary:"Content that violates copyright laws, including unauthorized use of intellectual property, especially in Vibits videos"})]})]})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(wpe,{}),children:(0,Ve.jsx)(N_,{children:"Vibits Community Guidelines"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"Our Vibits video sharing feature has specific guidelines to ensure a safe and enjoyable experience for all users:"}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(xpe,{})}),(0,Ve.jsx)(eR,{primary:"Content Ownership",secondary:"Only upload videos that you've created or have permission to use. Respect copyright and intellectual property rights"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Appropriate Content",secondary:"Videos must not contain nudity, pornography, violence, hate speech, dangerous activities, or illegal substances"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Epe,{})}),(0,Ve.jsx)(eR,{primary:"Privacy & Consent",secondary:"Get consent before featuring identifiable individuals in your videos, especially in private settings"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(uq,{})}),(0,Ve.jsx)(eR,{primary:"Disclosure",secondary:"Clearly disclose if your content is sponsored, contains affiliate links, or is otherwise commercial in nature"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(cq,{})}),(0,Ve.jsx)(eR,{primary:"Music & Audio",secondary:"Only use music and audio that you have rights to use or that is available through our platform's licensed library"})]})]}),(0,Ve.jsx)(N_,{paragraph:!0,children:"Vibits content is subject to both human and AI-powered moderation. Videos that violate these guidelines may be removed, and repeated violations may result in account restrictions or termination."})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(wpe,{}),children:(0,Ve.jsx)(N_,{children:"Content Moderation"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"Our content moderation approach combines technology and human review to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(xpe,{})}),(0,Ve.jsx)(eR,{primary:"AI-Powered Detection",secondary:"Advanced algorithms detect harmful content, misinformation, and suspicious activities in real-time"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Ape,{})}),(0,Ve.jsx)(eR,{primary:"Automated Checks",secondary:"Real-time scanning for fraud, cybercrime, and policy violations using pattern recognition"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Epe,{})}),(0,Ve.jsx)(eR,{primary:"Human Review",secondary:"Trained moderators review flagged content and complex cases with cultural and contextual awareness"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(uq,{})}),(0,Ve.jsx)(eR,{primary:"Educational Approach",secondary:"First-time or minor violations may result in warnings with educational resources"})]})]}),(0,Ve.jsx)(oR,{sx:{my:2}}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Enforcement Actions"}),(0,Ve.jsx)(N_,{paragraph:!0,children:"Depending on the severity and frequency of violations, we may take the following actions:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Content removal"}),(0,Ve.jsx)("li",{children:"Warning notifications"}),(0,Ve.jsx)("li",{children:"Temporary feature restrictions"}),(0,Ve.jsx)("li",{children:"Temporary account suspension"}),(0,Ve.jsx)("li",{children:"Permanent account termination"})]})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(ype,{}),children:(0,Ve.jsx)(N_,{children:"Strike System"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"SideEye employs a strike system to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Strike Points"}),(0,Ve.jsx)(N_,{paragraph:!0,children:"Violations of our guidelines result in strike points based on severity:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Standard violations:"})," 1 strike point"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Serious violations"})," (misinformation, fraud, violence): 1.5 strike points"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Severe violations"})," (harmful content, cybercrime, exploitation): 2 strike points"]})]}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Consequences"}),(0,Ve.jsx)(N_,{paragraph:!0,children:"As strike points accumulate, the following actions will be taken:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"3+ points:"})," Warning and educational resources"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"6+ points:"})," Temporary feature restrictions for 3 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"9+ points:"})," Account suspension for 7 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"12+ points:"})," Permanent account suspension"]})]}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Appeals"}),(0,Ve.jsx)(N_,{paragraph:!0,children:"If you believe a strike was issued in error, you can appeal through your account settings or by contacting support@sideeye.com."}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Expiration"}),(0,Ve.jsx)(N_,{paragraph:!0,children:"Strike points remain on your account for 6 months before beginning to expire."})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(Spe,{}),children:(0,Ve.jsx)(N_,{children:"Reporting & Moderation"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"We rely on our community to help maintain a safe environment. If you encounter content that violates our guidelines, please report it immediately."}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Spe,{})}),(0,Ve.jsx)(eR,{primary:"How to Report",secondary:"Click the three dots menu on any post, comment, or profile and select 'Report' to flag content that violates our guidelines"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Spe,{})}),(0,Ve.jsx)(eR,{primary:"What Happens Next",secondary:"Our team reviews reports promptly, typically within 24-48 hours, and takes appropriate action based on our guidelines"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Spe,{})}),(0,Ve.jsx)(eR,{primary:"Appeals Process",secondary:"If you believe a moderation decision was made in error, you can appeal through your account settings or by contacting support@sideeye.com"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Spe,{})}),(0,Ve.jsx)(eR,{primary:"Transparency",secondary:"We publish regular reports on content moderation actions and policy enforcement to maintain accountability"})]})]})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(Tpe,{}),children:(0,Ve.jsx)(N_,{children:"Getting Help"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"We're committed to supporting our users' wellbeing and safety both on and off the platform."}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Tpe,{})}),(0,Ve.jsx)(eR,{primary:"Support Resources",secondary:"Access to mental health resources, crisis helplines, and support services through our Help Center"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Tpe,{})}),(0,Ve.jsx)(eR,{primary:"Safety Tips",secondary:"Guidelines for protecting your privacy, recognizing potential scams, and staying safe online"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Tpe,{})}),(0,Ve.jsx)(eR,{primary:"Contact Us",secondary:"Reach out to our support team at support@sideeye.com for assistance with safety concerns"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Tpe,{})}),(0,Ve.jsx)(eR,{primary:"Emergency Situations",secondary:"If you're experiencing an emergency or believe someone is in immediate danger, please contact local emergency services immediately"})]})]}),(0,Ve.jsx)(N_,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:"SideEye is committed to continuously improving our safety measures and community guidelines. We regularly update our policies based on emerging threats, user feedback, and industry best practices."})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(sq,{}),children:(0,Ve.jsx)(N_,{children:"Vibits Security & Privacy"})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{paragraph:!0,children:"We take the security and privacy of your Vibits videos seriously. Here's how we protect your content:"}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(cq,{})}),(0,Ve.jsx)(eR,{primary:"Secure Storage",secondary:"All videos are stored using industry-standard encryption and secure cloud storage protocols"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Epe,{})}),(0,Ve.jsx)(eR,{primary:"Privacy Controls",secondary:"You can delete your videos at any time, and you control who can view, comment on, and share your content"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(xpe,{})}),(0,Ve.jsx)(eR,{primary:"Content Protection",secondary:"We implement measures to prevent unauthorized downloading and redistribution of your videos"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Ape,{})}),(0,Ve.jsx)(eR,{primary:"Metadata Stripping",secondary:"We remove sensitive metadata from videos that could reveal your location or device information"})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(bpe,{})}),(0,Ve.jsx)(eR,{primary:"Report & Remove",secondary:"We provide tools to report videos that violate our guidelines, and we respond quickly to removal requests"})]})]}),(0,Ve.jsx)(N_,{paragraph:!0,children:"To enhance your privacy when using Vibits:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Be mindful of what's visible in your videos (addresses, personal documents, etc.)"}),(0,Ve.jsx)("li",{children:"Consider the environment you're filming in and who might be visible in the background"}),(0,Ve.jsx)("li",{children:"Review your videos before posting to ensure you're comfortable with all content"}),(0,Ve.jsx)("li",{children:"Use the reporting tools if you see content that violates our guidelines"})]})]})]})]}),kpe=()=>(0,Ve.jsx)(DP,{maxWidth:"lg",children:(0,Ve.jsxs)(Qe,{sx:{py:4},children:[(0,Ve.jsx)(N_,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Safety & Community Guidelines"}),(0,Ve.jsx)(JT,{elevation:3,sx:{p:{xs:2,md:4},borderRadius:2},children:(0,Ve.jsx)(_pe,{})})]})}),Cpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Ipe=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),Rpe=(0,u_.A)((0,Ve.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),Dpe=()=>{const{currentUser:e,userProfile:n}=xT(),{canViewProfile:r,canViewContent:i}=AT(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)({emailVerified:!1,deviceVerified:!1,lastSecurityUpdate:null});(0,t.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return;const t=fv(Zf(KA,"users",e.uid),(t=>{if(t.exists()){const n=t.data();a(n.isPrivate||!1),l({emailVerified:e.emailVerified||!1,deviceVerified:n.sourceCodeSetupComplete||!1,lastSecurityUpdate:n.lastSecurityUpdate||null})}}));return()=>t()}),[null===e||void 0===e?void 0:e.uid,null===e||void 0===e?void 0:e.emailVerified]);return(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(JT,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(N_,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(sq,{color:"primary"})," Security & Authentication"]}),(0,Ve.jsx)(qP,{severity:"info",sx:{mt:2,mb:4},children:"SideEye takes your security and privacy seriously. Our multi-layer authentication system helps protect your account and data from unauthorized access."}),(0,Ve.jsxs)(Qe,{sx:{mb:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Security Status"}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsxs)(Jq,{direction:"row",spacing:2,sx:{mb:3},children:[(0,Ve.jsx)(CB,{icon:s.emailVerified?(0,Ve.jsx)(Cpe,{}):(0,Ve.jsx)(Ipe,{}),label:s.emailVerified?"Email Verified":"Email Not Verified",color:s.emailVerified?"success":"error",variant:"outlined"}),(0,Ve.jsx)(CB,{icon:s.deviceVerified?(0,Ve.jsx)(Cpe,{}):(0,Ve.jsx)(Ipe,{}),label:s.deviceVerified?"Device Verified":"Device Not Verified",color:s.deviceVerified?"success":"error",variant:"outlined"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mb:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Account Privacy"}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsxs)(JT,{elevation:1,sx:{p:3},children:[(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(oq,{checked:o,onChange:async()=>{if(null!==e&&void 0!==e&&e.uid)try{await hv(Zf(KA,"users",e.uid),{isPrivate:!o,lastSecurityUpdate:Sv()}),wS.success("Account is now "+(o?"public":"private"))}catch(Rb){console.error("Error updating privacy settings:",Rb),wS.error("Failed to update privacy settings")}},color:"primary"}),label:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:o?"Only approved followers can see your content":"Anyone can see your content"})]})}),(0,Ve.jsx)(qP,{severity:"info",sx:{mt:2},children:o?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."})]})]}),(0,Ve.jsxs)(Qe,{sx:{mb:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Authentication Flow"}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsxs)(tC,{children:[(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Rpe,{color:"primary"})}),(0,Ve.jsx)(eR,{primary:"Step 1: Email & Password Authentication",secondary:"First, you log in with your email and password. This provides the initial layer of account security."})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(xpe,{color:"primary"})}),(0,Ve.jsx)(eR,{primary:"Step 2: Email Verification",secondary:"New accounts must verify their email address before gaining full access to all features."})]}),(0,Ve.jsxs)(DR,{children:[(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(fq,{color:"primary"})}),(0,Ve.jsx)(eR,{primary:"Step 3: Source Code Authentication",secondary:"When logging in from a new device, you must enter your 8-digit source code as an additional security measure."})]})]})]}),(0,Ve.jsxs)(npe,{children:[(0,Ve.jsx)(upe,{expandIcon:(0,Ve.jsx)(DO,{}),children:(0,Ve.jsxs)(N_,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(uq,{fontSize:"small"})," Browser Privacy Settings"]})}),(0,Ve.jsxs)(fpe,{children:[(0,Ve.jsx)(N_,{variant:"body2",paragraph:!0,children:"Some browsers have strict privacy settings that can affect device registration:"}),(0,Ve.jsxs)(tC,{dense:!0,children:[(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(eR,{primary:"\u2022 Safari users may need to enable website data storage",secondary:"Safari > Preferences > Privacy > Website Data"})}),(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(eR,{primary:"\u2022 Private/Incognito browsing may require re-authentication",secondary:"Devices won't be persistently registered in private browsing modes"})}),(0,Ve.jsx)(DR,{children:(0,Ve.jsx)(eR,{primary:"\u2022 Clearing browser data will remove device registration",secondary:"You'll need to re-authenticate with your Source Code"})})]})]})]})]})})},Lpe=()=>(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(JT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",gutterBottom:!0,children:"Privacy Policy"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"1. Information We Collect"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We collect information that you provide directly to us, including:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Account information (username, email, display name)"}),(0,Ve.jsx)("li",{children:"Profile information (bio, profile picture, custom avatars)"}),(0,Ve.jsx)("li",{children:"Content you post (posts, comments, likes, reposts)"}),(0,Ve.jsx)("li",{children:"Videos you upload to Vibits (including metadata and engagement data)"}),(0,Ve.jsx)("li",{children:"Connection data (followers, following relationships)"}),(0,Ve.jsx)("li",{children:"Messages and communications between users"}),(0,Ve.jsx)("li",{children:"Usage information and interaction with the platform"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"2. How We Use Your Information"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Provide and maintain our services"}),(0,Ve.jsx)("li",{children:"Improve and personalize your experience"}),(0,Ve.jsx)("li",{children:"Facilitate connections between users"}),(0,Ve.jsx)("li",{children:"Display relevant content in your feed"}),(0,Ve.jsx)("li",{children:"Process and deliver messages between users"}),(0,Ve.jsx)("li",{children:"Recommend relevant videos in Vibits based on your preferences"}),(0,Ve.jsx)("li",{children:"Monitor and enforce our community guidelines"}),(0,Ve.jsx)("li",{children:"Communicate with you about updates and changes"}),(0,Ve.jsx)("li",{children:"Ensure platform safety and security"}),(0,Ve.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"3. Sharing Your Information"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We may share your information in the following ways:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"With Other Users:"})," Your profile information, posts, videos, and content are shared with other users according to your privacy settings."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Service Providers:"})," We may share information with third-party vendors who provide services on our behalf, including video hosting and processing."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect rights, safety, and security."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets."]})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"4. Data Security"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We implement appropriate security measures to protect your personal information, including encryption of sensitive data, secure storage protocols, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"5. Your Rights"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You have the right to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Access your personal information"}),(0,Ve.jsx)("li",{children:"Correct inaccurate information"}),(0,Ve.jsx)("li",{children:"Delete your account and associated data"}),(0,Ve.jsx)("li",{children:"Delete videos you've uploaded to Vibits"}),(0,Ve.jsx)("li",{children:"Control your privacy settings and follower relationships"}),(0,Ve.jsx)("li",{children:"Restrict processing of your information"}),(0,Ve.jsx)("li",{children:"Request a data export of your content"}),(0,Ve.jsx)("li",{children:"Opt-out of marketing communications"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"6. Content Removal and Retention"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"When you delete content, it may remain in our backup systems for a limited time. Deleted content is moved to a temporary storage for 24 hours before permanent deletion, allowing for potential recovery if accidentally deleted. For Vibits videos, we may retain non-personally identifiable analytics data even after video deletion."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"7. Cookies and Tracking"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to improve your experience, maintain login sessions, and analyze usage patterns. Please see our Cookie Policy for more details on how we use these technologies."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"8. Third-Party Links"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Our service may contain links to third-party websites or services that are not owned or controlled by us. We have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party services."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"9. Vibits Video Information"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"When you upload videos to Vibits, we collect:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Video Content:"})," The actual video file you upload"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Metadata:"})," Information such as upload time, duration, and format"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"User Association:"})," Connection between your account and the video"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Engagement Data:"})," Likes, comments, shares, and viewing statistics"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Device Information:"})," Information about the device used to upload the video"]})]}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We use this information to provide the Vibits service, recommend videos to other users, and improve our platform. You maintain ownership of your videos and can delete them at any time, though we may retain anonymized analytics data."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"10. Children's Privacy"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Our services are not intended for use by children under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"11. Changes to This Policy"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last updated" date.'})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"12. Contact Us"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["If you have any questions about this Privacy Policy, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Ppe=()=>(0,Ve.jsxs)(DP,{maxWidth:"lg",sx:{py:12},children:[(0,Ve.jsxs)(JT,{elevation:3,sx:{p:{xs:3,md:6},mb:6},children:[(0,Ve.jsx)(N_,{variant:"h1",component:"h1",sx:{textAlign:"center",fontWeight:"bold",mb:6,fontSize:{xs:"2.5rem",md:"3.5rem"},color:"primary.main",textTransform:"uppercase",letterSpacing:2},children:"About SideEye"}),(0,Ve.jsx)(oR,{sx:{my:6}}),(0,Ve.jsxs)(Qe,{sx:{mb:8},children:[(0,Ve.jsx)(N_,{variant:"h2",sx:{fontWeight:"medium",mb:4,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Our Mission"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"SideEye is a moderated social media platform dedicated to creating a safe and engaging space for users to share their thoughts, connect with others, and express themselves through various forms of content. We believe in fostering meaningful conversations while maintaining a respectful and inclusive environment through our comprehensive moderation system that ensures all users can interact authentically within clear community guidelines."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h2",sx:{fontWeight:"medium",mb:6,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Features"}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:6},children:[(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Side Rooms"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Create or join interactive discussion rooms where you can connect with other users in real-time. Side Rooms support live streaming, allowing you to go live and interact directly with your audience. These rooms can be public or private, with customizable settings for membership, moderation, and content focus. Each room provides a dedicated space for conversations around specific interests or topics."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Feed"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Stay connected with content from users you follow through our personalized Feed. See posts, updates, and activities from your network in real-time. Our Feed is designed to show you the most relevant content based on your interests and connections, creating a tailored experience that keeps you engaged with your community."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Discover"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Explore new content, find interesting users to follow, and discover trending Side Rooms through our Discover feature. This curated exploration space helps you find content aligned with your interests and introduces you to new communities within the platform. Discover makes it easy to expand your network and find engaging discussions to join."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"AI Moderation"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Our advanced AI moderation system automatically scans all content against our community guidelines, detecting potential violations across multiple categories including harmful content, misinformation, fraud, cybercrime, adult content, and violence. This system helps maintain a safe environment by issuing appropriate warnings or restrictions when needed, while protecting users from harmful interactions."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"User Expression"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Express yourself through various reaction types including sideEye, tea, shade, and petty. Our platform encourages authentic communication with features designed for meaningful social interaction. Whether you're sharing thoughts, connecting with others, or participating in discussions, SideEye provides the tools for genuine self-expression within a respectful framework."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Vibits"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Share and discover short-form videos through our Vibits feature. Create, upload, and engage with captivating video content in a vertical scrolling format. Interact with videos through likes, comments, and sharing, or follow content creators you enjoy. Vibits offers a dynamic way to express yourself creatively and connect with others through visual storytelling, with built-in moderation to ensure a safe viewing experience."})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Live Streaming"}),(0,Ve.jsx)(N_,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Go live in Side Rooms to engage with your audience in real-time through video streaming. Host discussions, Q&A sessions, or casual hangouts with followers and community members. Our streaming feature supports interactive elements like viewer comments and reactions, creating an immersive and engaging experience for both hosts and viewers."})]})]})]})]}),(0,Ve.jsx)(Qe,{sx:{textAlign:"center",mt:8},children:(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",children:["\xa9 ",(new Date).getFullYear()," SideEye | Created by Enoch Asekomhe | All Rights Reserved"]})})]}),Mpe=()=>(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(JT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",gutterBottom:!0,children:"Terms of Service"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"1. Acceptance of Terms"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"By accessing or using SideEye, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"2. User Accounts"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"To use certain features of SideEye, you must create an account. You are responsible for:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Maintaining the confidentiality of your account information"}),(0,Ve.jsx)("li",{children:"All activities that occur under your account"}),(0,Ve.jsx)("li",{children:"Providing accurate and complete profile information"}),(0,Ve.jsx)("li",{children:"Securing your login credentials"}),(0,Ve.jsx)("li",{children:"Notifying us immediately of any unauthorized use"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"3. User Conduct"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You agree not to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Post or transmit any content that is unlawful, harmful, threatening, abusive, harassing, defamatory, vulgar, obscene, or otherwise objectionable"}),(0,Ve.jsx)("li",{children:"Upload videos to Vibits that contain inappropriate content, copyright infringement, or violate our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Harass, bully, intimidate, or stalk other users"}),(0,Ve.jsx)("li",{children:"Impersonate any person or entity or falsely state or misrepresent your affiliation with a person or entity"}),(0,Ve.jsx)("li",{children:"Interfere with or disrupt the proper functioning of the service or servers"}),(0,Ve.jsx)("li",{children:"Attempt to gain unauthorized access to any portion of the service or other systems"}),(0,Ve.jsx)("li",{children:"Use the service for any illegal purpose or in violation of any local, state, national, or international law"}),(0,Ve.jsx)("li",{children:"Collect or store personal data about other users without their consent"}),(0,Ve.jsx)("li",{children:"Create multiple accounts to evade restrictions or limitations"}),(0,Ve.jsx)("li",{children:"Engage in spamming, phishing, or other deceptive practices"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"4. Content Ownership and License"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You retain ownership of any content you post on SideEye, including videos uploaded to Vibits. By posting content, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, reproduce, process, adapt, modify, publish, transmit, display, and distribute your content in any and all media or distribution methods."}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"This license allows us to make your content available to the rest of the world and to let others do the same. The license continues even if you stop using our services, but you can delete content from public view at any time."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"5. Vibits Video Sharing"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Vibits is our video sharing feature that allows users to upload, view, like, comment on, and share short videos. When using Vibits, you agree to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Only upload videos that you have created or for which you have the necessary rights and permissions"}),(0,Ve.jsx)("li",{children:"Not upload videos that infringe on others' intellectual property rights"}),(0,Ve.jsx)("li",{children:"Not upload videos containing explicit content, hate speech, violence, or any content that violates our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Allow other users to view, like, comment on, and share your videos according to your privacy settings"}),(0,Ve.jsx)("li",{children:"Grant us the license as described in Section 4 for videos you upload to Vibits"}),(0,Ve.jsx)("li",{children:"Understand that we may remove videos that violate our policies without prior notice"})]}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We may provide tools to enhance or edit your videos, but we do not claim ownership of your original content. We reserve the right to display advertisements alongside or within Vibits content without providing compensation to you."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"6. Follower Relationships"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"SideEye allows users to follow other users and be followed by others. When you follow someone, you'll see their posts and activity on your feed. Users you follow will be able to see that you follow them. Similarly, users who follow you will be visible to you and others. You can unfollow users at any time."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"7. Direct Messages"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"SideEye provides a direct messaging feature for users to communicate privately. You are responsible for the content of your messages. While we strive to protect the privacy of your messages, we reserve the right to review content in the case of reported violations. We may take action if messages violate our guidelines."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"8. Content Moderation"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We reserve the right to moderate content posted on our platform, including Vibits videos. We may remove, restrict, or disable access to any content or account that we determine violates these Terms or our Community Guidelines. Content moderation decisions are made in our sole discretion. Users can appeal moderation decisions through our support channels."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"9. Intellectual Property"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"The SideEye service and its original content, features, and functionality are and will remain the exclusive property of SideEye and its licensors. The service is protected by copyright, trademark, and other laws. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of SideEye."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"10. Termination"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We reserve the right to terminate or suspend your account and access to the service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties, or for any other reason. Upon termination, your right to use the service will immediately cease."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"11. Content Removal and Recovery"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"When you delete content, including Vibits videos, it will be moved to a trash area for 24 hours before permanent deletion, allowing for recovery if accidentally deleted. We reserve the right to retain certain information as required by law or for legitimate business purposes."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"12. Disclaimer"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:'The service is provided "as is" without any warranties, express or implied. We do not guarantee that the service will be uninterrupted, timely, secure, or error-free. We make no warranties or representations about the accuracy or completeness of the content provided by our users.'})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"13. Limitation of Liability"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"In no event shall SideEye be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or related to your use of the service, including but not limited to damages for loss of profits, goodwill, use, data, or other intangible losses."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"14. Indemnification"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You agree to indemnify and hold harmless SideEye and its officers, directors, employees, and agents from any claims, damages, liabilities, costs, or expenses (including reasonable attorney fees) arising from your use of the service or your violation of these Terms."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"15. DMCA Compliance"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"SideEye respects the intellectual property rights of others. If you believe that your work has been copied in a way that constitutes copyright infringement on Vibits or elsewhere on our platform, please provide our copyright agent with the following information:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"An electronic or physical signature of the person authorized to act on behalf of the copyright owner"}),(0,Ve.jsx)("li",{children:"A description of the copyrighted work that you claim has been infringed"}),(0,Ve.jsx)("li",{children:"A description of where the material that you claim is infringing is located on the site"}),(0,Ve.jsx)("li",{children:"Your address, telephone number, and email address"}),(0,Ve.jsx)("li",{children:"A statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law"}),(0,Ve.jsx)("li",{children:"A statement by you, made under penalty of perjury, that the above information is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf"})]}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Our copyright agent can be reached at: dmca@sideeye.com"})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"16. Changes to Terms"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on the service and updating the "Last updated" date. Your continued use of the service after such changes constitutes your acceptance of the new Terms.'})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"17. Governing Law"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These Terms shall be governed by and construed in accordance with the laws of the jurisdiction in which we operate, without regard to its conflict of law provisions."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"18. Contact Information"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["If you have any questions about these Terms, please contact us at:",(0,Ve.jsx)("br",{}),"Email: legal@sideeye.com"]})]})]})}),Ope=()=>(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(JT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cookie Policy"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Introduction"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"SideEye uses cookies and similar technologies to provide, improve, and secure our services. This Cookie Policy explains how we use cookies, what types we use, their purposes, and how you can control them."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"What Are Cookies?"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:'Cookies are small text files that are stored on your device when you visit a website. They are widely used to make websites work more efficiently and provide information to the website owners. Cookies can be "persistent" or "session" cookies. Persistent cookies remain on your device after you close your browser, while session cookies are deleted when you close your browser.'})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Types of Cookies We Use"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We use the following types of cookies for the purposes explained below:"}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"1. Essential Cookies"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These cookies are necessary for the functioning of our platform and cannot be switched off. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Authentication cookies to recognize you when you log in"}),(0,Ve.jsx)("li",{children:"Security cookies to prevent fraudulent activities"}),(0,Ve.jsx)("li",{children:"Session cookies to maintain your active session"})]}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"2. Performance Cookies"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These cookies help us understand how visitors interact with our platform by collecting information anonymously. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Analytics cookies to measure user interactions with content"}),(0,Ve.jsx)("li",{children:"Error monitoring cookies to identify and fix platform issues"}),(0,Ve.jsx)("li",{children:"Load balancing cookies to distribute traffic to our servers"})]}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"3. Functional Cookies"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These cookies enable enhanced functionality and personalization. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Preference cookies to remember your settings and choices"}),(0,Ve.jsx)("li",{children:"Interface customization cookies for personalized layouts"}),(0,Ve.jsx)("li",{children:"Language preference cookies"})]}),(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"4. Targeting/Advertising Cookies"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These cookies may be set through our site by our advertising partners to build a profile of your interests. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Social media cookies for content sharing and network integration"}),(0,Ve.jsx)("li",{children:"Recommendation cookies to suggest relevant content"})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Specific Cookies Used by SideEye"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Below are some of the key cookies we use on SideEye:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_session"}),": Authentication and session management"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_preferences"}),": Stores user preferences like theme and layout settings"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_auth"}),": Maintains login state and authentication details"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_analytics"}),": Collects anonymous usage data to improve our services"]})]})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Third-Party Cookies"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We may allow third parties to place cookies on your device when you visit our platform. These third parties include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Analytics providers"})," (such as Google Analytics) to help us understand user behavior"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Social media platforms"})," (such as Twitter, Facebook) when you use social sharing features"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Security services"})," to protect against malicious activities"]})]}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"These third parties may use cookies, web beacons, and similar technologies to collect information about your use of our platform and other websites. We do not control these third-party technologies and their use is governed by the privacy policies of these third parties."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Managing Your Cookie Preferences"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You can control and/or delete cookies as you wish. You can delete all cookies that are already on your device and you can set most browsers to prevent them from being placed. However, if you do this, you may have to manually adjust some preferences every time you visit our platform, and some services and functionalities may not work."}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"You can manage your cookie preferences through your browser settings:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:["Chrome: Settings ","->"," Privacy and Security ","->"," Cookies and other site data"]}),(0,Ve.jsxs)("li",{children:["Firefox: Options ","->"," Privacy & Security ","->"," Cookies and Site Data"]}),(0,Ve.jsxs)("li",{children:["Safari: Preferences ","->"," Privacy ","->"," Cookies and website data"]}),(0,Ve.jsxs)("li",{children:["Edge: Settings ","->"," Cookies and site permissions ","->"," Cookies and site data"]})]}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"For more information about cookies and how to disable them, please visit www.allaboutcookies.org"})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Do Not Track"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:'Some browsers have a "Do Not Track" feature that signals to websites that you visit that you do not want to have your online activity tracked. Given the diverse and evolving state of "Do Not Track" implementations, we may or may not respond to "Do Not Track" signals.'})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Changes to Our Cookie Policy"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We may update our Cookie Policy from time to time. Any changes will be posted on this page with an updated revision date. We encourage you to review this Cookie Policy periodically to stay informed about our use of cookies."})]}),(0,Ve.jsxs)(Qe,{sx:{mt:4},children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Contact Us"}),(0,Ve.jsxs)(N_,{variant:"body1",paragraph:!0,children:["If you have any questions about our use of cookies, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Npe=()=>{const e=J(),{currentUser:n,user:r,loading:i,sendEmailVerification:o,forceCheckEmailVerification:a}=(X(),xT()),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!i&&(n||r)){const t=n||r;try{const n=await a(t);console.log("Email verification status on page load:",n),n&&(console.log("User email is verified, redirecting to setup source code..."),e("/setup-source-code",{replace:!0}))}catch(wye){console.error("Error checking verification status:",wye)}}})()}),[n,r,i,e,a]);const v=async()=>{if(!(n||r))return u("Not logged in. Cannot resend verification email."),void e("/login");try{l(!0),u(null),h(!1),await o(),h(!0),u(null)}catch(c){console.error("Error sending verification email:",c),u(c.message||"Failed to send verification email. Please try again."),h(!1)}finally{l(!1)}};if(i)return(0,Ve.jsx)(DP,{maxWidth:"sm",children:(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,Ve.jsx)(dP,{})})});const y=n||r,b=(null===y||void 0===y?void 0:y.email)||"your registered email";return(0,Ve.jsx)(DP,{maxWidth:"sm",children:(0,Ve.jsxs)(JT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{variant:"h4",gutterBottom:!0,align:"center",children:"Verify Your Email"}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,align:"center",children:"A verification email has been sent to:"}),(0,Ve.jsx)(N_,{variant:"h6",align:"center",gutterBottom:!0,sx:{fontWeight:"bold"},children:b}),(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Please check your inbox (and spam folder) and click the verification link."}),c&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:c}),d&&(0,Ve.jsx)(qP,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox (and spam folder)."}),f&&!c&&(0,Ve.jsxs)(qP,{severity:"info",sx:{mb:2},children:["Verification status checked at ",f.toLocaleTimeString(),". Email is not yet verified."]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:3},children:[(0,Ve.jsx)(Kk,{variant:"outlined",onClick:async()=>{const t=n||r;if(!t)return u("Not logged in. Cannot check verification status."),void e("/login");try{m(!0),u(null);const n=await a(t);g(new Date),console.log("Manual verification check result:",n),n?e("/setup-source-code",{replace:!0}):u("Email not verified yet. Please check your email and click the verification link.")}catch(c){console.error("Error checking verification status:",c),u(c.message||"Failed to check verification status. Please try again.")}finally{m(!1)}},disabled:s||p,color:"primary",fullWidth:!0,children:p?(0,Ve.jsx)(dP,{size:24,color:"inherit"}):"I've Verified My Email"}),(0,Ve.jsx)(Kk,{variant:"text",onClick:v,disabled:s||p,color:"secondary",fullWidth:!0,children:s?(0,Ve.jsx)(dP,{size:24,color:"inherit"}):"Resend Verification Email"})]}),(0,Ve.jsx)(oR,{sx:{my:3}}),(0,Ve.jsxs)(N_,{variant:"body2",color:"text.secondary",align:"center",children:["Having trouble? Try ",(0,Ve.jsx)(UN,{component:"button",onClick:v,children:"sending the email again"})," or ",(0,Ve.jsx)(UN,{component:"button",onClick:()=>e("/login"),children:"login with a different account"}),"."]})]})})};var jpe=n(5433),Fpe=n(7813);const Upe=()=>{const{currentUser:e}=xT(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{e&&h()}),[e]);const h=async()=>{if(e)try{const t=Wg(Jf(KA,"deleted_posts"),Hg("userId","==",e.uid)),n=(await uv(t)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),deletedAt:null===(t=e.data().deletedAt)||void 0===t?void 0:t.toDate(),scheduledForDeletion:null===(n=e.data().scheduledForDeletion)||void 0===n?void 0:n.toDate()}}));r(n)}catch(u){console.error("Error fetching deleted posts:",u),d("Failed to fetch deleted posts")}finally{o(!1)}};return i?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(dP,{})}):0===n.length?(0,Ve.jsx)(N_,{sx:{mt:4,textAlign:"center"},children:"No deleted posts found"}):(0,Ve.jsx)(Qe,{sx:{mt:4},children:n.map((t=>(0,Ve.jsxs)(JT,{sx:{p:2,mb:2,borderRadius:2},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(I_,{src:t.authorAvatar,alt:t.authorName||"Anonymous",sx:{mr:2},children:t.authorName?t.authorName.charAt(0):"A"}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"subtitle1",fontWeight:"bold",children:t.authorName||"Anonymous"}),(0,Ve.jsxs)(N_,{variant:"caption",color:"text.secondary",children:["Deleted ",rN(t.deletedAt)," ago"]})]})]}),(0,Ve.jsx)(N_,{sx:{mb:2},children:t.content}),t.imageUrl&&(0,Ve.jsx)(Qe,{component:"img",src:t.imageUrl,alt:"Post content",sx:{maxWidth:"100%",maxHeight:300,borderRadius:1,mb:2}}),t.tags&&t.tags.length>0&&(0,Ve.jsx)(Qe,{sx:{mb:2},children:t.tags.map((e=>(0,Ve.jsx)(CB,{label:`#${e}`,size:"small",sx:{mr:1,mb:1}},e)))}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,Ve.jsx)(Kk,{variant:"outlined",startIcon:(0,Ve.jsx)(jpe.A,{}),onClick:()=>(async t=>{if(e){s(t);try{const n=Zf(KA,"deleted_posts",t),i=(await lv(n)).data();if(!i)throw new Error("Post not found");const o=Zf(KA,"posts",t);await hv(o,{...i,deletedAt:null,scheduledForDeletion:null}),await pv(n),await hv(Zf(KA,"users",e.uid),{postCount:kv(1)}),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error restoring post:",u)}finally{s(null)}}})(t.id),disabled:!!a,children:a===t.id?(0,Ve.jsx)(dP,{size:24}):"Restore"}),(0,Ve.jsx)(Kk,{variant:"outlined",color:"error",startIcon:(0,Ve.jsx)(Fpe.A,{}),onClick:()=>(async t=>{if(e){c(t);try{const e=Zf(KA,"deleted_posts",t);await pv(e),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error permanently deleting post:",u),d("Failed to permanently delete post")}finally{c(null)}}})(t.id),disabled:!!l,children:l===t.id?(0,Ve.jsx)(dP,{size:24}):"Delete Forever"})]})]},t.id)))})},Bpe=()=>(0,Ve.jsx)(DP,{maxWidth:"md",children:(0,Ve.jsxs)(Qe,{sx:{py:4},children:[(0,Ve.jsx)(N_,{variant:"h4",sx:{mb:4},children:"Trash"}),(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Posts in the trash will be automatically deleted after 24 hours. You can restore them before then."}),(0,Ve.jsx)(Upe,{})]})}),$pe=()=>{const{userId:e}=Z(),{db:n}=sN(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),{currentUser:c}=xT();return(0,t.useEffect)((()=>{(async()=>{if(n&&e){console.log("Firestore database initialized:",n),console.log("User ID:",e);try{const t=await lv(Zf(n,"users",e));if(!t.exists())return void l("User not found");const r=t.data().isPrivate||!1;if(!(!r||c&&c.uid===e))return void l("This account is private. Follow to see their followers.");const o=Jf(n,"users",e,"followers"),a=await uv(o);console.log("Followers snapshot size:",a.size);const s=a.docs.map((async e=>{const t=e.id,r=await lv(Zf(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),u=await Promise.all(s);i(u.filter(Boolean))}catch(wye){l("Failed to fetch followers"),console.error("Error fetching followers:",wye)}finally{a(!1)}}else console.error("Firestore database or userId is not initialized")})()}),[n,e,c]),o?(0,Ve.jsx)(Qe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(dP,{})}):s?(0,Ve.jsx)(Qe,{p:3,children:(0,Ve.jsx)(N_,{color:"error",children:s})}):(0,Ve.jsxs)(Qe,{p:3,children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Followers"}),(0,Ve.jsxs)(tC,{children:[r.map((e=>(0,Ve.jsxs)(DR,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(eR,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"No followers yet"})]})]})},Vpe=()=>{const{userId:e}=Z(),{db:n}=sN(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(n&&e)try{const t=Jf(n,"users",e,"following"),r=await uv(t);console.log("Following snapshot size:",r.size);const o=r.docs.map((async e=>{const t=e.id,r=await lv(Zf(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),a=await Promise.all(o);i(a.filter(Boolean))}catch(wye){l("Failed to fetch following"),console.error("Error fetching following:",wye)}finally{a(!1)}})()}),[n,e]),o?(0,Ve.jsx)(Qe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(dP,{})}):s?(0,Ve.jsx)(Qe,{p:3,children:(0,Ve.jsx)(N_,{color:"error",children:s})}):(0,Ve.jsxs)(Qe,{p:3,children:[(0,Ve.jsx)(N_,{variant:"h5",gutterBottom:!0,children:"Following"}),(0,Ve.jsxs)(tC,{children:[r.map((e=>(0,Ve.jsxs)(DR,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(eR,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"Not following anyone yet"})]})]})};function Wpe(e){return(0,GT.Ay)("MuiDialogContentText",e)}(0,Ge.A)("MuiDialogContentText",["root"]);const zpe=["children","className"],Hpe=(0,WT.Ay)(N_,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qpe=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiDialogContentText"}),{className:r}=n,i=(0,Le.A)(n,zpe),o=(e=>{const{classes:t}=e,n=(0,VT.A)({root:["root"]},Wpe,t);return(0,De.A)({},t,n)})(i);return(0,Ve.jsx)(Hpe,(0,De.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,Pe.A)(o.root,r)},n,{classes:o}))})),Gpe=qpe,Kpe=(0,u_.A)([(0,Ve.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,Ve.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber"),Ype=(0,u_.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),Xpe=()=>{const{currentUser:e,logout:n}=xT(),r=J(),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)(null);return(0,Ve.jsxs)(DP,{maxWidth:"md",sx:{py:4},children:[(0,Ve.jsxs)(JT,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(N_,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(Kpe,{color:"warning"})," Account Management"]}),(0,Ve.jsx)(qP,{severity:"info",sx:{mt:2,mb:4},children:"You have the right to control your data. You can deactivate your account temporarily or delete it permanently."}),m&&(0,Ve.jsx)(qP,{severity:"error",sx:{mt:2,mb:2},children:m}),(0,Ve.jsxs)(Qe,{sx:{mb:5},children:[(0,Ve.jsxs)(N_,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(IO,{})," Deactivate Account"]}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Deactivating your account will temporarily hide your profile, posts, and comments from other users. Your account will remain in our systems, and you can reactivate it at any time by simply logging in again."}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you deactivate:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile becomes hidden from other users"}),(0,Ve.jsx)("li",{children:"Your posts and comments are hidden but not deleted"}),(0,Ve.jsx)("li",{children:"You won't receive notifications"}),(0,Ve.jsx)("li",{children:"You can reactivate by logging in at any time"})]}),(0,Ve.jsx)(Kk,{variant:"outlined",color:"warning",startIcon:(0,Ve.jsx)(IO,{}),onClick:()=>o(!0),sx:{mt:2},disabled:h,children:"Deactivate Account"})]}),(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsxs)(N_,{variant:"h5",gutterBottom:!0,sx:{color:"error.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(Ype,{})," Delete Account Permanently"]}),(0,Ve.jsx)(oR,{sx:{mb:3}}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"Deleting your account is permanent. All your data will be wiped from our systems and cannot be recovered."}),(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you delete your account:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile, posts, comments, and all other data are permanently deleted"}),(0,Ve.jsx)("li",{children:"You will lose access to your account history and connections"}),(0,Ve.jsx)("li",{children:"This action cannot be undone"}),(0,Ve.jsx)("li",{children:"If you want to use SideEye again, you'll need to create a new account"})]}),(0,Ve.jsx)(Kk,{variant:"contained",color:"error",startIcon:(0,Ve.jsx)(Ype,{}),onClick:()=>s(!0),sx:{mt:2},disabled:h,children:"Delete Account Permanently"})]})]}),(0,Ve.jsxs)(GR,{open:i,onClose:()=>o(!1),children:[(0,Ve.jsx)(JP,{children:"Confirm Account Deactivation"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(Gpe,{children:"Are you sure you want to deactivate your account? Your profile and content will be hidden until you log in again."})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>o(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(e){p(!0),f(null);try{const t=Zf(KA,"users",e.uid);await hv(t,{isActive:!1,deactivatedAt:(new Date).toISOString()}),await n(),wS.success("Your account has been deactivated. You can reactivate it by logging in again."),r("/login")}catch(wye){console.error("Error deactivating account:",wye),f("Failed to deactivate account. Please try again.")}finally{p(!1),o(!1)}}else f("You must be logged in to deactivate your account")},color:"warning",disabled:h,startIcon:h?(0,Ve.jsx)(dP,{size:20}):null,children:h?"Deactivating...":"Deactivate Account"})]})]}),(0,Ve.jsxs)(GR,{open:a,onClose:()=>s(!1),children:[(0,Ve.jsx)(JP,{children:"Delete Account"}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsx)(Gpe,{sx:{mb:2},children:"To confirm account deletion, please enter your password. This will permanently delete your account and all associated data."}),(0,Ve.jsx)(XL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u,onChange:e=>d(e.target.value),variant:"outlined"})]}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>s(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(Kk,{onClick:()=>c(!0),color:"error",disabled:h||!u,children:"Proceed"})]})]}),(0,Ve.jsxs)(GR,{open:l,onClose:()=>c(!1),children:[(0,Ve.jsxs)(JP,{children:[(0,Ve.jsx)(Kpe,{color:"error"})," Final Warning"]}),(0,Ve.jsx)(rM,{children:(0,Ve.jsxs)(Gpe,{children:[(0,Ve.jsx)("strong",{children:"This action cannot be undone."})," Your account and all your data will be permanently deleted from our servers. Are you absolutely sure you want to proceed?"]})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>c(!1),disabled:h,children:"No, Keep My Account"}),(0,Ve.jsx)(Kk,{onClick:async()=>{if(e)if(u){p(!0),f(null);try{const t=bo.credential(e.email||"",u);await Oo(e,t);const n=Zf(KA,"users",e.uid);await pv(n),await async function(e){return Zt(e).delete()}(e),wS.success("Your account has been permanently deleted."),r("/login")}catch(wye){console.error("Error deleting account:",wye),"auth/wrong-password"===wye.code?f("Incorrect password. Please try again."):f("Failed to delete account. Please try again.")}finally{p(!1),c(!1),s(!1)}}else f("Please enter your password to confirm deletion");else f("You must be logged in to delete your account")},color:"error",disabled:h,startIcon:h?(0,Ve.jsx)(dP,{size:20}):(0,Ve.jsx)(Ype,{}),children:h?"Deleting...":"Yes, Delete Permanently"})]})]})]})},Qpe=e=>{let{message:t="Loading..."}=e;return(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(dP,{size:60,thickness:4}),(0,Ve.jsx)(N_,{variant:"h6",sx:{mt:2},children:t})]})},Jpe=e=>{let{children:t,requireAuth:n=!0,requireEmailVerification:r=!0,requireDeviceSetup:i=!0}=e;const{currentUser:o,userProfile:a,loading:s}=xT();return s?(0,Ve.jsx)(Qpe,{message:"Checking authentication..."}):n&&!o?(0,Ve.jsx)(me,{to:"/login",replace:!0}):r&&o&&!o.emailVerified?(0,Ve.jsx)(me,{to:"/verify-email",replace:!0}):i&&o&&a&&!a.sourceCodeSetupComplete?(0,Ve.jsx)(me,{to:"/setup-source-code",replace:!0}):(0,Ve.jsx)(Ve.Fragment,{children:t})};class Zpe extends t.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(N_,{variant:"h4",gutterBottom:!0,children:"Oops! Something went wrong"}),(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,Ve.jsx)(Kk,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]}):this.props.children}}const eme=Zpe;const tme=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:n=null,disableWindowBlurListener:r=!1,onClose:i,open:o,resumeHideDuration:a}=e,s=(0,Q_.A)();t.useEffect((()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[o,i]);const l=(0,QC.A)(((e,t)=>{null==i||i(e,t)})),c=(0,QC.A)((e=>{i&&null!=e&&s.start(e,(()=>{l(null,"timeout")}))}));t.useEffect((()=>(o&&c(n),s.clear)),[o,n,c,s]);const u=s.clear,d=t.useCallback((()=>{null!=n&&c(null!=a?a:.5*n)}),[n,a,c]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},m=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return t.useEffect((()=>{if(!r&&o)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[r,o,d,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,De.A)({},v_(e),v_(t));return(0,De.A)({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),d()}),onFocus:h(n),onMouseEnter:p(n),onMouseLeave:m(n)});var r},onClickAway:e=>{null==i||i(e,"clickaway")}}};function nme(e){return e.substring(2).toLowerCase()}function rme(e){const{children:n,disableReactTree:r=!1,mouseEvent:i="onClick",onClickAway:o,touchEvent:a="onTouchEnd"}=e,s=t.useRef(!1),l=t.useRef(null),c=t.useRef(!1),u=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,p_.A)(mC(n),l),h=(0,QC.A)((e=>{const t=u.current;u.current=!1;const n=(0,MC.A)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(s.current)return void(s.current=!1);let i;i=e.composedPath?e.composedPath().indexOf(l.current)>-1:!n.documentElement.contains(e.target)||l.current.contains(e.target),i||!r&&t||o(e)})),p=e=>t=>{u.current=!0;const r=n.props[e];r&&r(t)},m={ref:d};return!1!==a&&(m[a]=p(a)),t.useEffect((()=>{if(!1!==a){const e=nme(a),t=(0,MC.A)(l.current),n=()=>{s.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,a]),!1!==i&&(m[i]=p(i)),t.useEffect((()=>{if(!1!==i){const e=nme(i),t=(0,MC.A)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,i]),(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(n,m)})}function ime(e){return(0,GT.Ay)("MuiSnackbarContent",e)}(0,Ge.A)("MuiSnackbarContent",["root","message","action"]);const ome=["action","className","message","role"],ame=(0,WT.Ay)(JT,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,HT.tL)(t.palette.background.default,n);return(0,De.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),sme=(0,WT.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),lme=(0,WT.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),cme=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:o,role:a="alert"}=n,s=(0,Le.A)(n,ome),l=n,c=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"],action:["action"],message:["message"]},ime,t)})(l);return(0,Ve.jsxs)(ame,(0,De.A)({role:a,square:!0,elevation:6,className:(0,Pe.A)(c.root,i),ownerState:l,ref:t},s,{children:[(0,Ve.jsx)(sme,{className:c.message,ownerState:l,children:o}),r?(0,Ve.jsx)(lme,{className:c.action,ownerState:l,children:r}):null]}))})),ume=cme;function dme(e){return(0,GT.Ay)("MuiSnackbar",e)}(0,Ge.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const hme=["onEnter","onExited"],pme=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],mme=(0,WT.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,zT.A)(n.anchorOrigin.vertical)}${(0,zT.A)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,De.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),fme=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiSnackbar"}),i=TC(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:m=!1,message:f,open:g,TransitionComponent:v=PC,transitionDuration:y=o,TransitionProps:{onEnter:b,onExited:w}={}}=r,x=(0,Le.A)(r.TransitionProps,hme),E=(0,Le.A)(r,pme),A=(0,De.A)({},r,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:m,TransitionComponent:v,transitionDuration:y}),S=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,zT.A)(n.vertical)}${(0,zT.A)(n.horizontal)}`]};return(0,VT.A)(r,dme,t)})(A),{getRootProps:T,onClickAway:_}=tme((0,De.A)({},A)),[k,C]=t.useState(!0),I=kk({elementType:mme,getSlotProps:T,externalForwardedProps:E,ownerState:A,additionalProps:{ref:n},className:[S.root,d]});return!g&&k?null:(0,Ve.jsx)(rme,(0,De.A)({onClickAway:_},h,{children:(0,Ve.jsx)(mme,(0,De.A)({},I,{children:(0,Ve.jsx)(v,(0,De.A)({appear:!0,in:g,timeout:y,direction:"top"===s?"down":"up",onEnter:(e,t)=>{C(!1),b&&b(e,t)},onExited:e=>{C(!0),w&&w(e)}},x,{children:u||(0,Ve.jsx)(ume,(0,De.A)({message:f,action:a},p))}))}))}))})),gme=fme,vme=e=>{let{children:n,maxRequests:r=10,timeWindow:i=6e4}=e;const[o,a]=(0,t.useState)(null),s=(0,t.useRef)(0),l=(0,t.useRef)(Date.now()),c=(0,t.useCallback)((()=>{const e=Date.now();return e-l.current>=i&&(s.current=0,l.current=e),s.current>=r?(a(`Rate limit exceeded. Please try again in ${Math.ceil((i-(e-l.current))/1e3)} seconds.`),!1):(s.current++,!0)}),[r,i]),u=()=>{a(null)};return(0,Ve.jsxs)(Ve.Fragment,{children:[t.Children.map(n,(e=>t.isValidElement(e)?t.cloneElement(e,{checkRateLimit:c}):e)),(0,Ve.jsx)(gme,{open:!!o,autoHideDuration:6e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Ve.jsx)(qP,{onClose:u,severity:"error",sx:{width:"100%"},children:o})})]})},yme=()=>{const{notifications:e,markAsRead:n,deleteNotification:r,markAllAsRead:i}=(()=>{const e=(0,t.useContext)(ST);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e})(),o=J(),a=e=>{switch(e){case"follow":return"\ud83d\udc65";case"like":return"\u2764\ufe0f";case"comment":return"\ud83d\udcac";case"tag":return"#\ufe0f\u20e3";case"mention":return"@\ufe0f";case"room_invite":return"\ud83d\udeaa";default:return"\ud83d\udce2"}};return(0,Ve.jsx)(DP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(JT,{elevation:0,sx:{p:3},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(N_,{variant:"h4",component:"h1",children:"Notifications"}),e.some((e=>!e.isRead))&&(0,Ve.jsx)(Kk,{onClick:()=>i(),children:"Mark all as read"})]}),(0,Ve.jsx)(tC,{children:0===e.length?(0,Ve.jsx)(Qe,{sx:{textAlign:"center",py:4},children:(0,Ve.jsx)(N_,{variant:"body1",color:"text.secondary",children:"No notifications yet"})}):e.map(((e,i)=>(0,Ve.jsxs)(t.Fragment,{children:[i>0&&(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(DR,{button:!0,onClick:()=>(async e=>{e.isRead||await n(e.id);let t="/";"follow"===e.type?t=`/profile/${e.senderId}`:"like"===e.type||"comment"===e.type?t=`/post/${e.postId}`:"room_invite"===e.type&&(t=`/side-room/${e.roomId}`),o(t)})(e),sx:{backgroundColor:e.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.hover"},mb:1,borderRadius:1},children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{sx:{bgcolor:"primary.main"},children:a(e.type)})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsx)(N_,{variant:"body1",sx:{fontWeight:e.isRead?"normal":"bold"},children:e.content}),secondary:rN(e.createdAt,{addSuffix:!0})}),(0,Ve.jsx)(Sk,{edge:"end",onClick:t=>(async(e,t)=>{e.stopPropagation(),await r(t)})(t,e.id),sx:{ml:2},children:(0,Ve.jsx)(oM,{})})]})]},e.id)))})]})})};var bme,wme=new Uint8Array(16);function xme(){if(!bme&&!(bme="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bme(wme)}const Eme=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Ame=function(e){return"string"===typeof e&&Eme.test(e)};for(var Sme=[],Tme=0;Tme<256;++Tme)Sme.push((Tme+256).toString(16).substr(1));const _me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Sme[e[t+0]]+Sme[e[t+1]]+Sme[e[t+2]]+Sme[e[t+3]]+"-"+Sme[e[t+4]]+Sme[e[t+5]]+"-"+Sme[e[t+6]]+Sme[e[t+7]]+"-"+Sme[e[t+8]]+Sme[e[t+9]]+"-"+Sme[e[t+10]]+Sme[e[t+11]]+Sme[e[t+12]]+Sme[e[t+13]]+Sme[e[t+14]]+Sme[e[t+15]]).toLowerCase();if(!Ame(n))throw TypeError("Stringified UUID is invalid");return n};const kme=function(e,t,n){var r=(e=e||{}).random||(e.rng||xme)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return _me(r)},Cme=()=>{const{currentUser:e,user:n,loading:r,userProfile:i}=xT(),o=J(),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(!1),[g,v]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{let t="";try{t=localStorage.getItem("deviceId")||""}catch(XA){console.log("localStorage access blocked, generating new device ID")}if(!t){t=kme();try{localStorage.setItem("deviceId",t)}catch(XA){console.log("Failed to store device ID in localStorage")}}if(v(t),r)return;if(!(e||n))return void o("/login");null!==i&&void 0!==i&&i.sourceCodeSetupComplete&&o("/")}catch(wye){console.error("Device initialization error:",wye),d("Failed to initialize device")}})()}),[e,n,r,o,i]);return r?(0,Ve.jsx)(DP,{maxWidth:"sm",children:(0,Ve.jsx)(Qe,{display:"flex",justifyContent:"center",mt:8,children:(0,Ve.jsx)(dP,{})})}):(0,Ve.jsx)(DP,{maxWidth:"xs",children:(0,Ve.jsxs)(JT,{elevation:3,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{variant:"h5",align:"center",gutterBottom:!0,children:"Device Registration"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:g?`Device ID: ${g.slice(0,8)}...`:"Generating device ID..."}),u&&(0,Ve.jsx)(qP,{severity:"error",sx:{mb:2},children:u}),h&&(0,Ve.jsx)(qP,{severity:"success",sx:{mb:2},children:h}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),!(/^\d{8}$/.test(a)?a===l||(d("Codes do not match"),0):(d("Source code must be exactly 8 digits"),0)))return;if(!g)return void d("Device identification failed. Please refresh the page.");const r=e||n;if(r&&KA){f(!0),d(null);try{const e=yT.genSaltSync(10),t=yT.hashSync(a,e);if(!g||"string"!==typeof g)throw new Error("Invalid device ID");await hv(Zf(KA,"users",r.uid),{sourceCodeHash:t,sourceCodeSetupComplete:!0,registeredDevices:Tv(g),lastUpdated:Sv()}),localStorage.setItem("deviceId",g),p("Device registration successful! Redirecting..."),setTimeout((()=>o("/")),1500)}catch(wye){console.error("Setup error:",wye),d("permission-denied"===wye.code?"Permission denied. Please contact support.":wye.message.includes("device")?"Device registration failed. Please try again.":"Setup failed. Please try again.")}finally{f(!1)}}else d("Authentication error")},sx:{mt:2},children:[(0,Ve.jsx)(XL,{fullWidth:!0,margin:"normal",label:"8-Digit Security Code",value:a,type:"password",onChange:e=>s(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(XL,{fullWidth:!0,margin:"normal",label:"Confirm Security Code",value:l,type:"password",onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(Kk,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3},disabled:m||!g,children:m?(0,Ve.jsx)(dP,{size:24}):"Register This Device"})]})]})})},Ime=()=>{const{verifySourceCodeAndCompleteLogin:e,loading:n,error:r,setError:i,tempUserForSourceCode:o,currentUser:a}=xT(),s=J(),[l,c]=(0,t.useState)("");(0,t.useEffect)((()=>{if(!a&&!o&&!n)return console.log("No temporary or current user found, redirecting to login."),void s("/login",{replace:!0});i(null)}),[a,o,s,n,i]);return(0,Ve.jsx)(DP,{maxWidth:"xs",children:(0,Ve.jsxs)(JT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Enter Source Code"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your 8-digit source code to complete login."}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async t=>{t.preventDefault(),i(null),/^[0-9]{8}$/.test(l)?await e(l):i("Source code must be exactly 8 digits.")},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(XL,{margin:"normal",required:!0,fullWidth:!0,id:"source-code",label:"8-Digit Source Code",name:"source-code",type:"password",inputProps:{maxLength:8,pattern:"[0-9]*",inputMode:"numeric"},value:l,onChange:e=>c(e.target.value.replace(/\\D/g,"").slice(0,8)),autoFocus:!0}),r&&(0,Ve.jsx)(qP,{severity:"error",sx:{mt:2},children:r}),(0,Ve.jsx)(Kk,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?(0,Ve.jsx)(dP,{size:24}):"Verify Code"}),(0,Ve.jsx)(Qe,{textAlign:"center",children:(0,Ve.jsx)(UN,{component:Ce,to:"/reset-source-code",variant:"body2",sx:{mt:1},children:"Forgot Source Code?"})})]})]})})},Rme=()=>{J();const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null);return(0,Ve.jsx)(DP,{maxWidth:"xs",children:(0,Ve.jsxs)(JT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(N_,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Source Code"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your account email address to receive a link to reset your 8-digit source code."}),(0,Ve.jsxs)(Qe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),i(!0),a(null),l(null),!e)return a("Email is required."),void i(!1);try{await(async e=>{console.log(`Placeholder: Sending source code reset email to ${e}`),await new Promise((e=>setTimeout(e,1500)))})(e),l("If an account exists for this email, a reset link has been sent. Please check your inbox.")}catch(wye){console.error("Error sending source code reset email:",wye),a("Failed to send reset email. Please try again later.")}finally{i(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(XL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e,onChange:e=>n(e.target.value),autoFocus:!0}),o&&(0,Ve.jsx)(qP,{severity:"error",sx:{mt:2},children:o}),s&&(0,Ve.jsx)(qP,{severity:"success",sx:{mt:2},children:s}),(0,Ve.jsx)(Kk,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,Ve.jsx)(dP,{size:24}):"Send Reset Link"})]})]})})};function Dme(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Lme(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Pme(e,t){OO(2,arguments);var n=NO(e).getTime(),r=Dme(t);return new Date(n+r)}function Mme(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());return o.setMonth(n.getMonth()+r+1,0),i>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function Ome(e){OO(1,arguments);var t=NO(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Nme(e){if(OO(1,arguments),!function(e){return OO(1,arguments),e instanceof Date||"object"===MO(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=NO(e);return!isNaN(Number(t))}function jme(e,t){return OO(2,arguments),Pme(e,-Dme(t))}function Fme(e){OO(1,arguments);var t=NO(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Ume(e){OO(1,arguments);var t=NO(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Fme(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=Fme(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Bme(e){OO(1,arguments);var t=NO(e),n=Fme(t).getTime()-function(e){OO(1,arguments);var t=Ume(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Fme(n)}(t).getTime();return Math.round(n/6048e5)+1}function $me(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=PO(),d=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=NO(e),p=h.getUTCDay(),m=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-m),h.setUTCHours(0,0,0,0),h}function Vme(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=NO(e),d=u.getUTCFullYear(),h=PO(),p=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(d+1,0,p),m.setUTCHours(0,0,0,0);var f=$me(m,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var v=$me(g,t);return u.getTime()>=f.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function Wme(e,t){OO(1,arguments);var n=NO(e),r=$me(n,t).getTime()-function(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=PO(),d=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=Vme(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),$me(p,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function zme(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Hme={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return zme("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):zme(n+1,2)},d:function(e,t){return zme(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return zme(e.getUTCHours()%12||12,t.length)},H:function(e,t){return zme(e.getUTCHours(),t.length)},m:function(e,t){return zme(e.getUTCMinutes(),t.length)},s:function(e,t){return zme(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return zme(Math.floor(r*Math.pow(10,n-3)),t.length)}};var qme="midnight",Gme="noon",Kme="morning",Yme="afternoon",Xme="evening",Qme="night",Jme={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Hme.y(e,t)},Y:function(e,t,n,r){var i=Vme(e,r),o=i>0?i:1-i;return"YY"===t?zme(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):zme(o,t.length)},R:function(e,t){return zme(Ume(e),t.length)},u:function(e,t){return zme(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return zme(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return zme(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Hme.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return zme(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Wme(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):zme(i,t.length)},I:function(e,t,n){var r=Bme(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):zme(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Hme.d(e,t)},D:function(e,t,n){var r=function(e){OO(1,arguments);var t=NO(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):zme(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return zme(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return zme(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return zme(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Gme:0===i?qme:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?Xme:i>=12?Yme:i>=4?Kme:Qme,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Hme.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Hme.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):zme(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):zme(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Hme.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Hme.s(e,t)},S:function(e,t){return Hme.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return efe(i);case"XXXX":case"XX":return tfe(i);default:return tfe(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return efe(i);case"xxxx":case"xx":return tfe(i);default:return tfe(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Zme(i,":");default:return"GMT"+tfe(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Zme(i,":");default:return"GMT"+tfe(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return zme(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return zme((r._originalDate||e).getTime(),t.length)}};function Zme(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+zme(o,2)}function efe(e,t){return e%60===0?(e>0?"-":"+")+zme(Math.abs(e)/60,2):tfe(e,t)}function tfe(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+zme(Math.floor(i/60),2)+n+zme(i%60,2)}const nfe=Jme;var rfe=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ife=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ofe={p:ife,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return rfe(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",rfe(i,t)).replace("{{time}}",ife(o,t))}};const afe=ofe;var sfe=["D","DD"],lfe=["YY","YYYY"];function cfe(e){return-1!==sfe.indexOf(e)}function ufe(e){return-1!==lfe.indexOf(e)}function dfe(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hfe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pfe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mfe=/^'([^]*?)'?$/,ffe=/''/g,gfe=/[a-zA-Z]/;function vfe(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w;OO(2,arguments);var x=String(t),E=PO(),A=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:E.locale)&&void 0!==r?r:JO,S=Dme(null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:E.firstWeekContainsDate)&&void 0!==a?a:null===(d=E.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=Dme(null!==(p=null!==(m=null!==(f=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==f?f:E.weekStartsOn)&&void 0!==m?m:null===(b=E.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var _=NO(e);if(!Nme(_))throw new RangeError("Invalid time value");var k=jme(_,eN(_)),C={firstWeekContainsDate:S,weekStartsOn:T,locale:A,_originalDate:_};return x.match(pfe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,afe[t])(e,A.formatLong):e})).join("").match(hfe).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(mfe);if(!t)return e;return t[1].replace(ffe,"'")}(r);var o=nfe[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!ufe(r)||dfe(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!cfe(r)||dfe(r,t,String(e)),o(k,r,A.localize,C);if(i.match(gfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function yfe(e){OO(1,arguments);var t=NO(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function bfe(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=PO(),d=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=NO(e),p=h.getDay(),m=(p<d?7:0)+p-d;return h.setDate(h.getDate()-m),h.setHours(0,0,0,0),h}function wfe(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=PO(),d=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=function(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=NO(e),d=u.getFullYear(),h=PO(),p=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(d+1,0,p),m.setHours(0,0,0,0);var f=bfe(m,t),g=new Date(0);g.setFullYear(d,0,p),g.setHours(0,0,0,0);var v=bfe(g,t);return u.getTime()>=f.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}(e,t),p=new Date(0);return p.setFullYear(h,0,d),p.setHours(0,0,0,0),bfe(p,t)}function xfe(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return n.getTime()>r.getTime()}function Efe(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return n.getTime()<r.getTime()}function Afe(e){OO(1,arguments);var t=NO(e);return t.setHours(0,0,0,0),t}function Sfe(e){OO(1,arguments);var t=NO(e);return t.setMinutes(0,0,0),t}function Tfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _fe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tfe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tfe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function kfe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function Cfe(e){return Cfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cfe(e)}function Ife(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ife=function(){return!!e})()}function Rfe(e){var t=Ife();return function(){var n,r=Cfe(e);if(t){var i=Cfe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==MO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B_(e)}(this,n)}}function Dfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lfe(e){var t=function(e,t){if("object"!=MO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=MO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MO(t)?t:t+""}function Pfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lfe(r.key),r)}}function Mfe(e,t,n){return t&&Pfe(e.prototype,t),n&&Pfe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ofe(e,t,n){return(t=Lfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nfe=function(){function e(){Dfe(this,e),Ofe(this,"priority",void 0),Ofe(this,"subPriority",0)}return Mfe(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),jfe=function(e){kfe(n,e);var t=Rfe(n);function n(e,r,i,o,a){var s;return Dfe(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return Mfe(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(Nfe),Ffe=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",10),Ofe(B_(e),"subPriority",-1),e}return Mfe(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(Nfe),Ufe=function(){function e(){Dfe(this,e),Ofe(this,"incompatibleTokens",void 0),Ofe(this,"priority",void 0),Ofe(this,"subPriority",void 0)}return Mfe(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new jfe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),Bfe=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",140),Ofe(B_(e),"incompatibleTokens",["R","u","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),$fe=(Math.pow(10,8),/^(1[0-2]|0?\d)/),Vfe=/^(3[0-1]|[0-2]?\d)/,Wfe=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,zfe=/^(5[0-3]|[0-4]?\d)/,Hfe=/^(2[0-3]|[0-1]?\d)/,qfe=/^(2[0-4]|[0-1]?\d)/,Gfe=/^(1[0-1]|0?\d)/,Kfe=/^(1[0-2]|0?\d)/,Yfe=/^[0-5]?\d/,Xfe=/^[0-5]?\d/,Qfe=/^\d/,Jfe=/^\d{1,2}/,Zfe=/^\d{1,3}/,ege=/^\d{1,4}/,tge=/^-?\d+/,nge=/^-?\d/,rge=/^-?\d{1,2}/,ige=/^-?\d{1,3}/,oge=/^-?\d{1,4}/,age=/^([+-])(\d{2})(\d{2})?|Z/,sge=/^([+-])(\d{2})(\d{2})|Z/,lge=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,cge=/^([+-])(\d{2}):(\d{2})|Z/,uge=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function dge(e,t){return e?{value:t(e.value),rest:e.rest}:e}function hge(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function pge(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function mge(e){return hge(tge,e)}function fge(e,t){switch(e){case 1:return hge(Qfe,t);case 2:return hge(Jfe,t);case 3:return hge(Zfe,t);case 4:return hge(ege,t);default:return hge(new RegExp("^\\d{1,"+e+"}"),t)}}function gge(e,t){switch(e){case 1:return hge(nge,t);case 2:return hge(rge,t);case 3:return hge(ige,t);case 4:return hge(oge,t);default:return hge(new RegExp("^-?\\d{1,"+e+"}"),t)}}function vge(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function yge(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function bge(e){return e%400===0||e%4===0&&e%100!==0}var wge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",130),Ofe(B_(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return dge(fge(4,e),r);case"yo":return dge(n.ordinalNumber(e,{unit:"year"}),r);default:return dge(fge(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=yge(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),xge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",130),Ofe(B_(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return dge(fge(4,e),r);case"Yo":return dge(n.ordinalNumber(e,{unit:"year"}),r);default:return dge(fge(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=Vme(e,r);if(n.isTwoDigitYear){var o=yge(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),$me(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),$me(e,r)}}]),n}(Ufe),Ege=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",130),Ofe(B_(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t){return gge("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Fme(r)}}]),n}(Ufe),Age=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",130),Ofe(B_(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t){return gge("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),Sge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",120),Ofe(B_(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return fge(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),Tge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",120),Ofe(B_(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return fge(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),_ge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Ofe(B_(e),"priority",110),e}return Mfe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return dge(hge($fe,e),r);case"MM":return dge(fge(2,e),r);case"Mo":return dge(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),kge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",110),Ofe(B_(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return dge(hge($fe,e),r);case"LL":return dge(fge(2,e),r);case"Lo":return dge(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe);var Cge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",100),Ofe(B_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return hge(zfe,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return $me(function(e,t,n){OO(2,arguments);var r=NO(e),i=Dme(t),o=Wme(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(Ufe);var Ige=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",100),Ofe(B_(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return hge(zfe,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return Fme(function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t),i=Bme(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(Ufe),Rge=[31,28,31,30,31,30,31,31,30,31,30,31],Dge=[31,29,31,30,31,30,31,31,30,31,30,31],Lge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"subPriority",1),Ofe(B_(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return hge(Vfe,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){var n=bge(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Dge[r]:t>=1&&t<=Rge[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),Pge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"subpriority",1),Ofe(B_(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return hge(Wfe,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return bge(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe);function Mge(e,t,n){var r,i,o,a,s,l,c,u;OO(2,arguments);var d=PO(),h=Dme(null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=NO(e),m=Dme(t),f=((m%7+7)%7<h?7:0)+m-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+f),p}var Oge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Mge(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Ufe),Nge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return dge(fge(t.length,e),i);case"eo":return dge(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Mge(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Ufe),jge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return dge(fge(t.length,e),i);case"co":return dge(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Mge(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Ufe);var Fge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",90),Ofe(B_(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return fge(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return dge(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return dge(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return dge(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return dge(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){OO(2,arguments);var n=Dme(t);n%7===0&&(n-=7);var r=NO(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),Uge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",80),Ofe(B_(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(vge(n),0,0,0),e}}]),n}(Ufe),Bge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",80),Ofe(B_(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(vge(n),0,0,0),e}}]),n}(Ufe),$ge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",80),Ofe(B_(e),"incompatibleTokens",["a","b","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(vge(n),0,0,0),e}}]),n}(Ufe),Vge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",70),Ofe(B_(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return hge(Kfe,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(Ufe),Wge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",70),Ofe(B_(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return hge(Hfe,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(Ufe),zge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",70),Ofe(B_(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return hge(Gfe,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(Ufe),Hge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",70),Ofe(B_(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return hge(qfe,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(Ufe),qge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",60),Ofe(B_(e),"incompatibleTokens",["t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return hge(Yfe,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(Ufe),Gge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",50),Ofe(B_(e),"incompatibleTokens",["t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return hge(Xfe,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return fge(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(Ufe),Kge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",30),Ofe(B_(e),"incompatibleTokens",["t","T"]),e}return Mfe(n,[{key:"parse",value:function(e,t){return dge(fge(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(Ufe),Yge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",10),Ofe(B_(e),"incompatibleTokens",["t","T","x"]),e}return Mfe(n,[{key:"parse",value:function(e,t){switch(t){case"X":return pge(age,e);case"XX":return pge(sge,e);case"XXXX":return pge(lge,e);case"XXXXX":return pge(uge,e);default:return pge(cge,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Ufe),Xge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",10),Ofe(B_(e),"incompatibleTokens",["t","T","X"]),e}return Mfe(n,[{key:"parse",value:function(e,t){switch(t){case"x":return pge(age,e);case"xx":return pge(sge,e);case"xxxx":return pge(lge,e);case"xxxxx":return pge(uge,e);default:return pge(cge,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Ufe),Qge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",40),Ofe(B_(e),"incompatibleTokens","*"),e}return Mfe(n,[{key:"parse",value:function(e){return mge(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(Ufe),Jge=function(e){kfe(n,e);var t=Rfe(n);function n(){var e;Dfe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ofe(B_(e=t.call.apply(t,[this].concat(i))),"priority",20),Ofe(B_(e),"incompatibleTokens","*"),e}return Mfe(n,[{key:"parse",value:function(e){return mge(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(Ufe),Zge={G:new Bfe,y:new wge,Y:new xge,R:new Ege,u:new Age,Q:new Sge,q:new Tge,M:new _ge,L:new kge,w:new Cge,I:new Ige,d:new Lge,D:new Pge,E:new Oge,e:new Nge,c:new jge,i:new Fge,a:new Uge,b:new Bge,B:new $ge,h:new Vge,H:new Wge,K:new zge,k:new Hge,m:new qge,s:new Gge,S:new Kge,X:new Yge,x:new Xge,t:new Qge,T:new Jge},eve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nve=/^'([^]*?)'?$/,rve=/''/g,ive=/\S/,ove=/[a-zA-Z]/;function ave(e,t,n,r){var i,o,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w,x;OO(3,arguments);var E=String(e),A=String(t),S=PO(),T=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:S.locale)&&void 0!==i?i:JO;if(!T.match)throw new RangeError("locale must contain match property");var _=Dme(null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:S.firstWeekContainsDate)&&void 0!==s?s:null===(h=S.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==a?a:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Dme(null!==(m=null!==(f=null!==(g=null!==(v=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==v?v:null===r||void 0===r||null===(y=r.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==g?g:S.weekStartsOn)&&void 0!==f?f:null===(w=S.locale)||void 0===w||null===(x=w.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==m?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===A)return""===E?NO(n):new Date(NaN);var C,I={firstWeekContainsDate:_,weekStartsOn:k,locale:T},R=[new Ffe],D=A.match(tve).map((function(e){var t=e[0];return t in afe?(0,afe[t])(e,T.formatLong):e})).join("").match(eve),L=[],P=_fe(D);try{var M=function(){var t=C.value;null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!ufe(t)||dfe(t,A,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!cfe(t)||dfe(t,A,e);var n=t[0],i=Zge[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var a=L.find((function(e){return o.includes(e.token)||e.token===n}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));L.push({token:n,fullToken:t});var s=i.run(E,t,T.match,I);if(!s)return{v:new Date(NaN)};R.push(s.setter),E=s.rest}else{if(n.match(ove))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(nve)[1].replace(rve,"'")),0!==E.indexOf(t))return{v:new Date(NaN)};E=E.slice(t.length)}};for(P.s();!(C=P.n()).done;){var O=M();if("object"===MO(O))return O.v}}catch(wye){P.e(wye)}finally{P.f()}if(E.length>0&&ive.test(E))return new Date(NaN);var N=R.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return R.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=NO(n);if(isNaN(j.getTime()))return new Date(NaN);var F,U=jme(j,eN(j)),B={},$=_fe(N);try{for($.s();!(F=$.n()).done;){var V=F.value;if(!V.validate(U,I))return new Date(NaN);var W=V.set(U,B,I);Array.isArray(W)?(U=W[0],ZO(B,W[1])):U=W}}catch(wye){$.e(wye)}finally{$.f()}return U}var sve=n(4894),lve=n.n(sve);const cve={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},uve={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class dve{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=cve,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=e=>"undefined"===typeof e?new Date:null===e?null:new Date(e),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=e=>e,this.toJsDate=e=>e,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=e=>e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,this.longFormatters[t])(e,this.locale.formatLong)}return e})).join(""),this.formatNumber=e=>e,this.getDayOfWeek=e=>e.getDay()+1;const{locale:t,formats:n,longFormatters:r,lib:i}=e;this.locale=t,this.formats=(0,De.A)({},uve,n),this.longFormatters=r,this.lib=i||"date-fns"}}class hve extends dve{constructor(){let{locale:e,formats:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({locale:e??QO,formats:t,longFormatters:lve()}),this.parse=(e,t)=>""===e?null:ave(e,t,new Date,{locale:this.locale}),this.isValid=e=>null!=e&&Nme(e),this.format=(e,t)=>this.formatByString(e,this.formats[t]),this.formatByString=(e,t)=>vfe(e,t,{locale:this.locale}),this.isEqual=(e,t)=>null===e&&null===t||null!==e&&null!==t&&function(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return n.getTime()===r.getTime()}(e,t),this.isSameYear=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return n.getFullYear()===r.getFullYear()}(e,t),this.isSameMonth=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=NO(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t),this.isSameDay=(e,t)=>function(e,t){OO(2,arguments);var n=Afe(e),r=Afe(t);return n.getTime()===r.getTime()}(e,t),this.isSameHour=(e,t)=>function(e,t){OO(2,arguments);var n=Sfe(e),r=Sfe(t);return n.getTime()===r.getTime()}(e,t),this.isAfter=(e,t)=>xfe(e,t),this.isAfterYear=(e,t)=>xfe(e,Ome(t)),this.isAfterDay=(e,t)=>xfe(e,FO(t)),this.isBefore=(e,t)=>Efe(e,t),this.isBeforeYear=(e,t)=>Efe(e,this.startOfYear(t)),this.isBeforeDay=(e,t)=>Efe(e,this.startOfDay(t)),this.isWithinRange=(e,t)=>{let[n,r]=t;return function(e,t){OO(2,arguments);var n=NO(e).getTime(),r=NO(t.start).getTime(),i=NO(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(e,{start:n,end:r})},this.startOfYear=e=>function(e){OO(1,arguments);var t=NO(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(e),this.startOfMonth=e=>function(e){OO(1,arguments);var t=NO(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e),this.startOfWeek=e=>bfe(e,{locale:this.locale}),this.startOfDay=e=>Afe(e),this.endOfYear=e=>Ome(e),this.endOfMonth=e=>UO(e),this.endOfWeek=e=>function(e,t){var n,r,i,o,a,s,l,c;OO(1,arguments);var u=PO(),d=Dme(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=NO(e),p=h.getDay(),m=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+m),h.setHours(23,59,59,999),h}(e,{locale:this.locale}),this.endOfDay=e=>FO(e),this.addYears=(e,t)=>function(e,t){return OO(2,arguments),Mme(e,12*Dme(t))}(e,t),this.addMonths=(e,t)=>Mme(e,t),this.addWeeks=(e,t)=>function(e,t){return OO(2,arguments),Lme(e,7*Dme(t))}(e,t),this.addDays=(e,t)=>Lme(e,t),this.addHours=(e,t)=>function(e,t){return OO(2,arguments),Pme(e,36e5*Dme(t))}(e,t),this.addMinutes=(e,t)=>function(e,t){return OO(2,arguments),Pme(e,6e4*Dme(t))}(e,t),this.addSeconds=(e,t)=>function(e,t){return OO(2,arguments),Pme(e,1e3*Dme(t))}(e,t),this.getYear=e=>function(e){return OO(1,arguments),NO(e).getFullYear()}(e),this.getMonth=e=>function(e){return OO(1,arguments),NO(e).getMonth()}(e),this.getDate=e=>function(e){return OO(1,arguments),NO(e).getDate()}(e),this.getHours=e=>function(e){return OO(1,arguments),NO(e).getHours()}(e),this.getMinutes=e=>function(e){return OO(1,arguments),NO(e).getMinutes()}(e),this.getSeconds=e=>function(e){return OO(1,arguments),NO(e).getSeconds()}(e),this.getMilliseconds=e=>function(e){return OO(1,arguments),NO(e).getMilliseconds()}(e),this.setYear=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}(e,t),this.setMonth=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=yfe(a);return n.setMonth(r,Math.min(o,s)),n}(e,t),this.setDate=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return n.setDate(r),n}(e,t),this.setHours=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return n.setHours(r),n}(e,t),this.setMinutes=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return n.setMinutes(r),n}(e,t),this.setSeconds=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return n.setSeconds(r),n}(e,t),this.setMilliseconds=(e,t)=>function(e,t){OO(2,arguments);var n=NO(e),r=Dme(t);return n.setMilliseconds(r),n}(e,t),this.getDaysInMonth=e=>yfe(e),this.getWeekArray=e=>{const t=this.startOfWeek(this.startOfMonth(e)),n=this.endOfWeek(this.endOfMonth(e));let r=0,i=t;const o=[];for(;this.isBefore(i,n);){const e=Math.floor(r/7);o[e]=o[e]||[],o[e].push(i),i=this.addDays(i,1),r+=1}return o},this.getWeekNumber=e=>function(e,t){OO(1,arguments);var n=NO(e),r=bfe(n,t).getTime()-wfe(n,t).getTime();return Math.round(r/6048e5)+1}(e,{locale:this.locale}),this.getYearRange=e=>{let[t,n]=e;const r=this.startOfYear(t),i=this.endOfYear(n),o=[];let a=r;for(;this.isBefore(a,i);)o.push(a),a=this.addYears(a,1);return o}}}const pve=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),mve=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),fve=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function gve(e){return(0,GT.Ay)("MuiCheckbox",e)}const vve=(0,Ge.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),yve=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],bve=(0,WT.Ay)(XH,{shouldForwardProp:e=>(0,jk.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${(0,zT.A)(n.size)}`],"default"!==n.color&&t[`color${(0,zT.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,HT.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${vve.checked}, &.${vve.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${vve.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),wve=(0,Ve.jsx)(mve,{}),xve=(0,Ve.jsx)(pve,{}),Eve=(0,Ve.jsx)(fve,{}),Ave=t.forwardRef((function(e,n){var r,i;const o=(0,Je.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=wve,color:s="primary",icon:l=xve,indeterminate:c=!1,indeterminateIcon:u=Eve,inputProps:d,size:h="medium",className:p}=o,m=(0,Le.A)(o,yve),f=c?u:l,g=c?u:a,v=(0,De.A)({},o,{color:s,indeterminate:c,size:h}),y=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate",`color${(0,zT.A)(r)}`,`size${(0,zT.A)(i)}`]},a=(0,VT.A)(o,gve,t);return(0,De.A)({},t,a)})(v);return(0,Ve.jsx)(bve,(0,De.A)({type:"checkbox",inputProps:(0,De.A)({"data-indeterminate":c},d),icon:t.cloneElement(f,{fontSize:null!=(r=f.props.fontSize)?r:h}),checkedIcon:t.cloneElement(g,{fontSize:null!=(i=g.props.fontSize)?i:h}),ownerState:v,ref:n,className:(0,Pe.A)(y.root,p)},m,{classes:y}))})),Sve=Ave,Tve=()=>{const e=J(),[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)({necessary:!0,functionality:!1,analytics:!1});(0,t.useEffect)((()=>{localStorage.getItem("cookiePreferences")||r(!0)}),[]);const a=e=>t=>{o({...i,[e]:t.target.checked})};return(0,Ve.jsxs)(GR,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{style:{position:"fixed",bottom:20,right:20,margin:0,maxWidth:"500px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[(0,Ve.jsxs)(JP,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsx)(N_,{variant:"h6",component:"div",children:"Cookie Preferences"}),(0,Ve.jsx)(Sk,{onClick:()=>r(!1),size:"small",sx:{color:"text.secondary"},children:(0,Ve.jsx)(hN.A,{})})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(rM,{children:[(0,Ve.jsx)(N_,{variant:"body1",paragraph:!0,children:"We use cookies to enhance your experience. Please select your preferences:"}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(Sve,{checked:i.necessary,disabled:!0,color:"primary"}),label:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body2",fontWeight:"bold",children:"Necessary Cookies"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Required for the app to function properly. Cannot be disabled."})]})}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(Sve,{checked:i.functionality,onChange:a("functionality"),color:"primary"}),label:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body2",fontWeight:"bold",children:"Functionality Cookies"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Remember your preferences and settings."})]})}),(0,Ve.jsx)(oG,{control:(0,Ve.jsx)(Sve,{checked:i.analytics,onChange:a("analytics"),color:"primary"}),label:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body2",fontWeight:"bold",children:"Analytics Cookies"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Help us understand how you use our app."})]})})]}),(0,Ve.jsx)(Qe,{sx:{mt:2},children:(0,Ve.jsx)(UN,{component:"button",variant:"body2",onClick:()=>{e("/cookies"),r(!1)},sx:{color:"primary.main"},children:"Learn more about how we use cookies"})})]}),(0,Ve.jsx)(oR,{}),(0,Ve.jsxs)(pO,{sx:{p:2,gap:1},children:[(0,Ve.jsx)(Kk,{onClick:()=>{localStorage.setItem("cookiePreferences",JSON.stringify(i)),r(!1)},variant:"outlined",color:"primary",sx:{minWidth:"120px"},children:"Save Preferences"}),(0,Ve.jsx)(Kk,{onClick:()=>{const e={necessary:!0,functionality:!0,analytics:!0};o(e),localStorage.setItem("cookiePreferences",JSON.stringify(e)),r(!1)},variant:"contained",color:"primary",sx:{minWidth:"120px"},children:"Accept All"})]})]})};function _ve(e){return(0,GT.Ay)("MuiBottomNavigation",e)}(0,Ge.A)("MuiBottomNavigation",["root"]);const kve=["children","className","component","onChange","showLabels","value"],Cve=(0,WT.Ay)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}})),Ive=t.forwardRef((function(e,n){const r=(0,Je.b)({props:e,name:"MuiBottomNavigation"}),{children:i,className:o,component:a="div",onChange:s,showLabels:l=!1,value:c}=r,u=(0,Le.A)(r,kve),d=(0,De.A)({},r,{component:a,showLabels:l}),h=(e=>{const{classes:t}=e;return(0,VT.A)({root:["root"]},_ve,t)})(d);return(0,Ve.jsx)(Cve,(0,De.A)({as:a,className:(0,Pe.A)(h.root,o),ref:n,ownerState:d},u,{children:t.Children.map(i,((e,n)=>{if(!t.isValidElement(e))return null;const r=void 0===e.props.value?n:e.props.value;return t.cloneElement(e,{selected:r===c,showLabel:void 0!==e.props.showLabel?e.props.showLabel:l,value:r,onChange:s})}))}))})),Rve=Ive;function Dve(e){return(0,GT.Ay)("MuiBottomNavigationAction",e)}const Lve=(0,Ge.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Pve=["className","icon","label","onChange","onClick","selected","showLabel","value"],Mve=(0,WT.Ay)(yk,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{[`&.${Lve.selected}`]:{color:(t.vars||t).palette.primary.main}})})),Ove=(0,WT.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${Lve.selected}`]:{fontSize:t.typography.pxToRem(14)}})})),Nve=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:o,onChange:a,onClick:s,value:l}=n,c=(0,Le.A)(n,Pve),u=n,d=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,VT.A)(i,Dve,t)})(u);return(0,Ve.jsxs)(Mve,(0,De.A)({ref:t,className:(0,Pe.A)(d.root,r),focusRipple:!0,onClick:e=>{a&&a(e,l),s&&s(e)},ownerState:u},c,{children:[i,(0,Ve.jsx)(Ove,{className:d.label,ownerState:u,children:o})]}))})),jve=Nve,Fve=(0,u_.A)((0,Ve.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),Uve=(0,u_.A)((0,Ve.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6zm-4 5v2h2v-2z"}),"MeetingRoom"),Bve=(0,u_.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),$ve=()=>{const e=J(),n=X(),[r,i]=(0,t.useState)(!1),{currentUser:o}=xT();return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(Rve,{value:n.pathname,onChange:(t,n)=>{"create-post"===n?i(!0):e(n)},sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",zIndex:1e3},children:[(0,Ve.jsx)(jve,{label:"Home",value:"/",icon:(0,Ve.jsx)(Fve,{})}),(0,Ve.jsx)(jve,{label:"Side Rooms",value:"/side-rooms",icon:(0,Ve.jsx)(Uve,{})}),(0,Ve.jsx)(jve,{label:"Vibits",value:"/vibits",icon:(0,Ve.jsx)(Cq,{})}),(0,Ve.jsx)(jve,{label:"Post",value:"create-post",icon:(0,Ve.jsx)(CM,{})}),(0,Ve.jsx)(jve,{label:"Discover",value:"/discover",icon:(0,Ve.jsx)(Sq,{})}),(0,Ve.jsx)(jve,{label:"Profile",value:`/profile/${null===o||void 0===o?void 0:o.uid}`,icon:(0,Ve.jsx)(Bve,{})})]}),(0,Ve.jsx)(GR,{open:r,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:o&&(0,Ve.jsx)(lM,{open:r,onClose:()=>i(!1)})})]})};function Vve(e){return(0,GT.Ay)("MuiLinearProgress",e)}(0,Ge.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Wve=["className","color","value","valueBuffer","variant"];let zve,Hve,qve,Gve,Kve,Yve,Xve=e=>e;const Qve=(0,X_.i7)(zve||(zve=Xve`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Jve=(0,X_.i7)(Hve||(Hve=Xve`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Zve=(0,X_.i7)(qve||(qve=Xve`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),eye=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,HT.a)(e.palette[t].main,.62):(0,HT.e$)(e.palette[t].main,.5),tye=(0,WT.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,zT.A)(n.color)}`],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:eye(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),nye=(0,WT.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,zT.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;const r=eye(n,t.color);return(0,De.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,X_.AH)(Gve||(Gve=Xve`
    animation: ${0} 3s infinite linear;
  `),Zve)),rye=(0,WT.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,zT.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .4s linear"},"buffer"===t.variant&&{zIndex:1,transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,X_.AH)(Kve||(Kve=Xve`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Qve)})),iye=(0,WT.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,zT.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:eye(n,t.color),transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,X_.AH)(Yve||(Yve=Xve`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Jve)})),oye=t.forwardRef((function(e,t){const n=(0,Je.b)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:a,variant:s="indeterminate"}=n,l=(0,Le.A)(n,Wve),c=(0,De.A)({},n,{color:i,variant:s}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,zT.A)(r)}`,n],dashed:["dashed",`dashedColor${(0,zT.A)(r)}`],bar1:["bar",`barColor${(0,zT.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,zT.A)(r)}`,"buffer"===n&&`color${(0,zT.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,VT.A)(i,Vve,t)})(c),d=LT(),h={},p={bar1:{},bar2:{}};if("determinate"===s||"buffer"===s)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;d&&(e=-e),p.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===s)if(void 0!==a){let e=(a||0)-100;d&&(e=-e),p.bar2.transform=`translateX(${e}%)`}else 0;return(0,Ve.jsxs)(tye,(0,De.A)({className:(0,Pe.A)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:t},l,{children:["buffer"===s?(0,Ve.jsx)(nye,{className:u.dashed,ownerState:c}):null,(0,Ve.jsx)(rye,{className:u.bar1,ownerState:c,style:p.bar1}),"determinate"===s?null:(0,Ve.jsx)(iye,{className:u.bar2,ownerState:c,style:p.bar2})]}))})),aye=oye,sye=(0,u_.A)((0,Ve.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),lye=(0,u_.A)((0,Ve.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}),"VolumeOff"),cye=(0,u_.A)((0,Ve.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp"),uye=(0,u_.A)((0,Ve.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m2 2v2h3v3h2v-3h3v-2h-3V7h-2v3zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonAddAlt1"),dye=(0,u_.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark"),hye=(0,u_.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder"),pye=(0,u_.A)((0,Ve.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),mye=(0,u_.A)((0,Ve.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1zm-3.5-.5h2v-3h-2z"}),"HighQuality"),fye=(0,u_.A)((0,Ve.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),gye=()=>{var e,n,r,i,o,a,s,l,c,u,d,h,p;const{currentUser:m}=xT(),[f,g]=(0,t.useState)([]),[v,y]=(0,t.useState)(0),[b,w]=(0,t.useState)(!0),[x,E]=(0,t.useState)(!1),[A,S]=(0,t.useState)(new Set),[T,_]=(0,t.useState)(new Set),[k,C]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[D,L]=(0,t.useState)(""),[P,M]=(0,t.useState)(!1),O=(0,t.useRef)(null),N=(0,t.useRef)(0),[j,F]=((0,t.useRef)(0),(0,t.useState)(0)),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(null),[W,z]=(0,t.useState)(new Set),[H,q]=(0,t.useState)("auto"),[G,K]=(0,t.useState)(null),[Y,X]=(0,t.useState)(null),[Q,J]=(0,t.useState)({duration:"0:00",resolution:"Unknown"}),[Z,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(.5),[re,ie]=(0,t.useState)(!0),oe=(0,t.useRef)(null),[ae,se]=(0,t.useState)(null),[le,ce]=(0,t.useState)(0),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),me=((0,t.useRef)(null),(0,t.useRef)(0)),[fe,ge]=(0,t.useState)(0),[ve,ye]=(QN(TC().breakpoints.down("sm")),(0,t.useState)(!1));(0,t.useEffect)((()=>{O.current&&(O.current.volume=te,re?O.current.play():O.current.pause())}),[te,re]),(0,t.useEffect)((()=>{we(),m&&(xe(),Ee(),Ae())}),[m]),(0,t.useEffect)((()=>{const e=e=>{"VolumeUp"!==e.key&&"VolumeDown"!==e.key||console.log("Volume button pressed")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]);const be=(0,t.useCallback)((()=>{console.log("Double tap detected")}),[]),we=async()=>{try{const e=Wg(Jf(KA,"videos"),Kg("timestamp","desc"),Xg(10)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));g(t)}catch(Rb){console.error("Error fetching videos:",Rb),wS.error("Failed to load videos")}finally{w(!1)}},xe=async()=>{if(m)try{const e=Wg(Jf(KA,`users/${m.uid}/likes`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));S(n)}catch(Rb){console.error("Error fetching liked videos:",Rb)}},Ee=async()=>{if(m)try{const e=Wg(Jf(KA,`users/${m.uid}/favorites`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));_(n)}catch(Rb){console.error("Error fetching favorite videos:",Rb)}},Ae=async()=>{if(m)try{const e=Wg(Jf(KA,`users/${m.uid}/following`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));z(n)}catch(Rb){console.error("Error fetching following:",Rb)}},Se=async e=>{if(e)try{const t=Wg(Jf(KA,`videos/${e}/comments`),Kg("timestamp","desc")),n=await uv(t),r=await Promise.all(n.docs.map((async e=>{const t=e.data(),n=Zf(KA,"users",t.userId),r=(await lv(n)).data();return console.log("Fetched user data:",r),{id:e.id,...t,userPhotoURL:(null===r||void 0===r?void 0:r.photoURL)||"",username:(null===r||void 0===r?void 0:r.username)||(null===r||void 0===r?void 0:r.displayName)||t.username||t.photoURL||"Anonymous"}})));R((e=>e?{...e,commentsList:r}:null))}catch(Rb){console.error("Error fetching comments:",Rb),wS.error("Failed to load comments")}},Te=async e=>{if(m&&D.trim()&&e){M(!0);try{const t=Zf(KA,"videos",e),n=(await lv(t)).data(),r=await mv(Jf(KA,`videos/${e}/comments`),{content:D.trim(),userId:m.uid,username:m.displayName||"Anonymous",userPhotoURL:m.photoURL||"",timestamp:Sv()});if(await hv(t,{comments:kv(1)}),n&&n.userId!==m.uid){const t={type:"comment",senderId:m.uid,senderName:m.displayName||"Anonymous",senderAvatar:m.photoURL||"",recipientId:n.userId,postId:e,commentId:r.id,content:`${m.displayName||"Someone"} commented on your video: "${D.trim()}"`,createdAt:Sv(),isRead:!1};await mv(Jf(KA,"users",n.userId,"notifications"),t)}const i={id:r.id,content:D.trim(),userId:m.uid,username:m.displayName||"Anonymous",userPhotoURL:m.photoURL||"",timestamp:new Date};R((e=>{var t;return e?{...e,comments:(null!==(t=e.comments)&&void 0!==t?t:0)+1,commentsList:[...e.commentsList||[],i]}:null})),L(""),wS.success("Comment added successfully")}catch(Rb){console.error("Error adding comment:",Rb),wS.error("Failed to add comment")}finally{M(!1)}}else wS.error("Please enter a comment and make sure you are logged in")},_e=()=>{K(null)},ke=e=>{q(e),_e(),wS.success(`Resolution changed to ${e}`)},Ie=async()=>{if(m)try{const e=new Set(W);e.add(m.uid);const t=Wg(Jf(KA,"videos"),Hg("userId","in",Array.from(e)),Kg("timestamp","desc"),Xg(10)),n=(await uv(t)).docs.map((e=>({id:e.id,...e.data()})));g(n)}catch(Rb){console.error("Error fetching following videos:",Rb),wS.error("Failed to load following videos")}},Re=e=>{if(!e)return"";try{if(e.toDate)return rN(e.toDate(),{addSuffix:!0});if(e instanceof Date)return rN(e,{addSuffix:!0});const t=new Date(e);return isNaN(t.getTime())?"":rN(t,{addSuffix:!0})}catch(Rb){return console.error("Error formatting timestamp:",Rb),""}},De=()=>(0,Ve.jsx)(uH,{anchor:"bottom",open:k,onClose:()=>C(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16}},children:(0,Ve.jsxs)(Qe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(N_,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(Sk,{onClick:()=>C(!1),children:(0,Ve.jsx)(iM,{})})]}),(0,Ve.jsx)(Qe,{sx:{flex:1,overflow:"auto",mb:2},children:null!==I&&void 0!==I&&I.commentsList&&I.commentsList.length>0?(0,Ve.jsx)(tC,{children:I.commentsList.map((e=>(0,Ve.jsxs)(DR,{alignItems:"flex-start",children:[(0,Ve.jsx)(NR,{children:(0,Ve.jsx)(I_,{src:e.userPhotoURL,alt:e.username,sx:{width:40,height:40},children:!e.userPhotoURL&&e.username.charAt(0)})}),(0,Ve.jsx)(eR,{primary:(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(N_,{variant:"subtitle2",component:"span",children:e.username}),(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:Re(e.timestamp)}),e.userId===(null===m||void 0===m?void 0:m.uid)&&(0,Ve.jsx)(Sk,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{if(m&&I)try{await pv(Zf(KA,`videos/${I.id}/comments/${e}`)),R((t=>{var n,r;return t?{...t,comments:(null!==(n=t.comments)&&void 0!==n?n:0)-1,commentsList:null===(r=t.commentsList)||void 0===r?void 0:r.filter((t=>t.id!==e))}:null})),wS.success("Comment deleted successfully"),Se(I.id)}catch(Rb){console.error("Error deleting comment:",Rb),wS.error("Failed to delete comment")}})(e.id),children:(0,Ve.jsx)(oM,{fontSize:"small"})})]}),secondary:(0,Ve.jsxs)(Qe,{children:[(0,Ve.jsx)(N_,{variant:"body2",color:"text.primary",children:e.content}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>(async e=>{if(m&&I)try{(await lv(Zf(KA,`videos/${I.id}/comments/${e}`))).data(),await hv(Zf(KA,`videos/${I.id}/comments/${e}/likes`),{likes:kv(1)}),R((t=>{var n;return t?{...t,commentsList:null===(n=t.commentsList)||void 0===n?void 0:n.map((t=>{var n;return t.id===e?{...t,likes:(null!==(n=t.likes)&&void 0!==n?n:0)+1}:t}))}:null})),wS.success("Comment liked successfully"),Se(I.id)}catch(Rb){console.error("Error liking comment:",Rb),wS.error("Failed to like comment")}})(e.id),children:(0,Ve.jsx)(sye,{fontSize:"small"})}),(0,Ve.jsx)(N_,{variant:"caption",color:"text.secondary",children:e.likes||0}),(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{return t=e.id,void console.log("Reply to comment:",t);var t},children:(0,Ve.jsx)(jH,{fontSize:"small"})})]})]})})]},e.id)))}):(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50%"},children:[(0,Ve.jsx)(jH,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,Ve.jsx)(N_,{color:"text.secondary",children:"No comments yet"})]})}),(0,Ve.jsx)(Qe,{sx:{p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider"},children:(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(XL,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:D,onChange:e=>L(e.target.value),size:"small",onKeyDown:e=>{"Enter"===e.key&&null!==I&&void 0!==I&&I.id&&!e.shiftKey&&(e.preventDefault(),Te(I.id))},multiline:!0,maxRows:4,InputProps:{sx:{"& .MuiInputBase-input":{padding:"8px 12px"}}}}),(0,Ve.jsx)(Kk,{variant:"contained",onClick:()=>(null===I||void 0===I?void 0:I.id)&&Te(I.id),disabled:!D.trim()||P||!(null!==I&&void 0!==I&&I.id),startIcon:(0,Ve.jsx)(EK,{}),children:P?(0,Ve.jsx)(dP,{size:20}):"Send"})]})})]})});return b?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(dP,{})}):(0,Ve.jsxs)(Qe,{sx:{height:"calc(100vh - 56px)",position:"relative",overflow:"hidden",bgcolor:"black",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Qe,{sx:{position:"relative",width:"100%",bgcolor:"background.default",height:"48px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Ve.jsxs)(nO,{value:fe,onChange:(e,t)=>{ge(t),0===t?we():Ie()},indicatorColor:"primary",textColor:"primary",centered:!0,sx:{width:"100%",height:"100%","& .MuiTab-root":{color:"text.primary",fontSize:"1.1rem",fontWeight:500,textTransform:"none",minHeight:"48px","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:"3px"}},children:[(0,Ve.jsx)(lO,{label:"DISCOVER",sx:{flex:1,maxWidth:"none"}}),(0,Ve.jsx)(lO,{label:"FOLLOWING",sx:{flex:1,maxWidth:"none"}})]}),(0,Ve.jsx)(Qe,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",bgcolor:"primary.main",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,boxShadow:2,cursor:"pointer"},children:(0,Ve.jsx)(Cq,{sx:{color:"#fff",fontSize:20}})})]}),b?(0,Ve.jsx)(Qe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,Ve.jsx)(dP,{})}):f.length>0?(0,Ve.jsxs)(Qe,{sx:{height:"100%",width:"100%",position:"relative",overflow:"hidden",mt:"0"},onTouchStart:e=>{const t=(new Date).getTime(),n=t-me.current;n<300&&n>0&&be(),me.current=t,N.current=e.touches[0].clientY},onTouchMove:e=>{const t=e.touches[0].clientY,n=N.current-t;Math.abs(n)>10&&(se(n>0?"up":"down"),ce(Math.abs(n)))},onTouchEnd:()=>{ae&&le>100?(de(!0),"up"===ae&&v<f.length-1?y((e=>e+1)):"down"===ae&&v>0&&y((e=>e-1)),setTimeout((()=>{de(!1),se(null),ce(0)}),500)):(se(null),ce(0))},children:[(0,Ve.jsx)("video",{ref:O,src:null===(e=f[v])||void 0===e?void 0:e.url,autoPlay:!0,loop:!0,muted:Z,playsInline:!0,preload:"metadata",poster:null===(n=f[v])||void 0===n?void 0:n.thumbnailUrl,style:{width:"100%",height:"100%",objectFit:"contain",position:"absolute",top:0,left:0,zIndex:1,transition:"transform 0.5s ease-in-out",transform:ue?"up"===ae?"translateY(-100%)":"translateY(100%)":"translateY(0)",backgroundColor:"black"},onClick:()=>ie(!re)}),v>0&&(0,Ve.jsx)("video",{src:f[v-1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"down"===ae?"translateY(0)":"translateY(-100%)"}}),v<f.length-1&&(0,Ve.jsx)("video",{src:f[v+1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"up"===ae?"translateY(0)":"translateY(100%)"}}),(0,Ve.jsxs)(Qe,{sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>ie(!re),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:re?(0,Ve.jsx)(IO,{}):(0,Ve.jsx)(CO,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>ee(!Z),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:Z?(0,Ve.jsx)(lye,{}):(0,Ve.jsx)(cye,{})}),!Z&&(0,Ve.jsx)(Qe,{sx:{display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:1,px:1,py:.5},children:(0,Ve.jsx)(FG,{value:te,onChange:(e,t)=>{ne(t)},min:0,max:1,step:.1,sx:{width:100,color:"white","& .MuiSlider-thumb":{width:12,height:12},"& .MuiSlider-track":{height:4},"& .MuiSlider-rail":{height:4}}})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:e=>{if(!I)return;const t=I.duration||0,n=`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`;J({duration:n,resolution:I.resolution||"Unknown"}),X(e.currentTarget)},sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Ve.jsx)(TO,{})})]}),(0,Ve.jsxs)(MI,{anchorEl:Y,open:Boolean(Y),onClose:()=>{X(null)},children:[(0,Ve.jsx)(qI,{disabled:!0,children:(0,Ve.jsx)(N_,{variant:"subtitle2",children:"Video Information"})}),(0,Ve.jsxs)(qI,{disabled:!0,children:[(0,Ve.jsx)(uq,{fontSize:"small",sx:{mr:1}}),"Duration: ",Q.duration]}),(0,Ve.jsxs)(qI,{disabled:!0,children:[(0,Ve.jsx)(uq,{fontSize:"small",sx:{mr:1}}),"Resolution: ",Q.resolution]})]}),(0,Ve.jsx)(De,{}),x&&(0,Ve.jsx)(GR,{open:x,maxWidth:"sm",fullWidth:!0,children:(0,Ve.jsxs)(rM,{children:[(0,Ve.jsx)(N_,{variant:"h6",gutterBottom:!0,children:"Uploading Video..."}),(0,Ve.jsx)(aye,{variant:"determinate",value:j,sx:{height:10,borderRadius:5}}),(0,Ve.jsxs)(N_,{variant:"body2",align:"center",sx:{mt:1},children:[Math.round(j),"%"]})]})}),(0,Ve.jsxs)(Qe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:2,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",zIndex:10},children:[(0,Ve.jsxs)(Qe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,mb:1,width:"100%"},children:[(0,Ve.jsx)(Ce,{to:`/profile/${null===(r=f[v])||void 0===r?void 0:r.userId}`,style:{textDecoration:"none",color:"white"},children:(0,Ve.jsxs)(N_,{variant:"h6",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer"}},children:["@",null===(i=f[v])||void 0===i?void 0:i.username]})}),m&&(null===(o=f[v])||void 0===o?void 0:o.userId)!==m.uid&&(0,Ve.jsx)(Kk,{variant:"contained",size:"small",onClick:()=>{var e;return(async e=>{if(m&&e!==m.uid)try{const t=Zf(KA,`users/${m.uid}/following`,e),n=Zf(KA,`users/${e}/followers`,m.uid);if(W.has(e))await pv(t),await pv(n),z((t=>{const n=new Set(t);return n.delete(e),n})),wS.success("Unfollowed user");else{await dv(t,{timestamp:Sv()}),await dv(n,{timestamp:Sv()}),z((t=>new Set(t).add(e)));const r={type:"follow",senderId:m.uid,senderName:m.displayName||"Anonymous",senderAvatar:m.photoURL||"",recipientId:e,content:`${m.displayName||"Someone"} started following you`,createdAt:Sv(),isRead:!1};await mv(Jf(KA,"users",e,"notifications"),r),wS.success("Followed user")}}catch(Rb){console.error("Error toggling follow:",Rb),wS.error("Failed to update follow status")}})(null===(e=f[v])||void 0===e?void 0:e.userId)},startIcon:W.has(null===(a=f[v])||void 0===a?void 0:a.userId)?(0,Ve.jsx)(uye,{}):(0,Ve.jsx)(OH,{}),color:W.has(null===(s=f[v])||void 0===s?void 0:s.userId)?"primary":"secondary",sx:{fontWeight:"bold",borderRadius:"20px",px:2,minWidth:"100px"},children:W.has(null===(l=f[v])||void 0===l?void 0:l.userId)?"Following":"Follow"})]}),(0,Ve.jsxs)(Qe,{sx:{display:"flex",gap:2},children:[(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{var e;return(async e=>{if(m)try{const t=Zf(KA,"videos",e),n=Zf(KA,`users/${m.uid}/likes`,e);if(A.has(e))await pv(n),await hv(t,{likes:kv(-1)}),S((t=>{const n=new Set(t);return n.delete(e),n}));else{await mv(Jf(KA,`users/${m.uid}/likes`),{videoId:e,timestamp:Sv()}),await hv(t,{likes:kv(1)}),S((t=>new Set(t).add(e)));const n=(await lv(t)).data();if(n&&n.userId!==m.uid){const t={type:"like",senderId:m.uid,senderName:m.displayName||"Anonymous",senderAvatar:m.photoURL||"",recipientId:n.userId,postId:e,content:`${m.displayName||"Someone"} liked your video`,createdAt:Sv(),isRead:!1};await mv(Jf(KA,"users",n.userId,"notifications"),t)}}}catch(Rb){console.error("Error toggling like:",Rb),wS.error("Failed to update like")}})(null===(e=f[v])||void 0===e?void 0:e.id)},children:A.has(null===(c=f[v])||void 0===c?void 0:c.id)?(0,Ve.jsx)(NH,{}):(0,Ve.jsx)(sye,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{return e=f[v],R(e),C(!0),void Se(e.id);var e},children:(0,Ve.jsx)(jH,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{var e;return(async e=>{if(m)try{const t=Zf(KA,`users/${m.uid}/favorites`,e);T.has(e)?(await pv(t),_((t=>{const n=new Set(t);return n.delete(e),n}))):(await mv(Jf(KA,`users/${m.uid}/favorites`),{videoId:e,timestamp:Sv()}),_((t=>new Set(t).add(e))))}catch(Rb){console.error("Error toggling favorite:",Rb),wS.error("Failed to update favorites")}})(null===(e=f[v])||void 0===e?void 0:e.id)},children:T.has(null===(u=f[v])||void 0===u?void 0:u.id)?(0,Ve.jsx)(dye,{}):(0,Ve.jsx)(hye,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:()=>{var e;return(async e=>{try{const t=`${window.location.origin}/vibits/${e}`;await navigator.clipboard.writeText(t),wS.success("Video link copied to clipboard")}catch(Rb){console.error("Error sharing video:",Rb),wS.error("Failed to share video")}})(null===(e=f[v])||void 0===e?void 0:e.id)},children:(0,Ve.jsx)(pye,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:e=>{K(e.currentTarget)},children:(0,Ve.jsx)(mye,{})}),(null===m||void 0===m?void 0:m.uid)===(null===(d=f[v])||void 0===d?void 0:d.userId)&&(0,Ve.jsx)(Sk,{color:"error",onClick:()=>{V(f[v]),B(!0)},children:(0,Ve.jsx)(oM,{})}),(0,Ve.jsx)(Sk,{color:"primary",onClick:async()=>{try{if(null===I||void 0===I||!I.url)throw new Error("No video selected");const e=I.url.split("/"),t=e.indexOf("videos"),n=decodeURIComponent(e.slice(t).join("/").split("?")[0]),r=cb(ub(),n),i=await sb(r),o=document.createElement("a");o.href=i,o.download=`vibit_${Date.now()}.mp4`,document.body.appendChild(o),o.click(),document.body.removeChild(o),wS.success("Video download started!")}catch(Rb){console.error("Error saving video:",Rb),wS.error("Failed to save video. Please try again.")}},children:(0,Ve.jsx)(fye,{})})]})]})]}):(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",gap:2},children:[(0,Ve.jsx)(N_,{variant:"h6",children:"No videos yet"}),(0,Ve.jsx)(N_,{variant:"body2",color:"text.secondary",children:"Be the first to share a video!"})]}),(0,Ve.jsxs)(MI,{anchorEl:G,open:Boolean(G),onClose:_e,children:[(0,Ve.jsx)(qI,{disabled:!0,children:(0,Ve.jsx)(N_,{variant:"subtitle2",children:"Select Quality"})}),(0,Ve.jsx)(qI,{onClick:()=>ke("auto"),children:"Auto (Recommended)"}),null===(h=f[v])||void 0===h||null===(p=h.resolutions)||void 0===p?void 0:p.map((e=>(0,Ve.jsx)(qI,{onClick:()=>ke(e),children:e},e)))]}),(0,Ve.jsxs)(GR,{open:U,onClose:()=>{B(!1),V(null)},children:[(0,Ve.jsx)(JP,{children:"Delete Video"}),(0,Ve.jsx)(rM,{children:(0,Ve.jsx)(N_,{children:"Are you sure you want to delete this video? This action cannot be undone."})}),(0,Ve.jsxs)(pO,{children:[(0,Ve.jsx)(Kk,{onClick:()=>{B(!1),V(null)},children:"Cancel"}),(0,Ve.jsx)(Kk,{color:"error",onClick:()=>$&&(async e=>{if(m&&e.userId===m.uid)try{const t=ub(),n=e.url.split("/"),r=n.indexOf("videos"),i=cb(t,decodeURIComponent(n.slice(r).join("/").split("?")[0]));await lb(i),await pv(Zf(KA,"videos",e.id));const o=Wg(Jf(KA,`users/${m.uid}/likes`));(await uv(o)).forEach((async t=>{t.id===e.id&&await pv(t.ref)}));const a=Wg(Jf(KA,`videos/${e.id}/comments`));(await uv(a)).forEach((async e=>{await pv(e.ref)})),wS.success("Video deleted successfully"),we()}catch(Rb){console.error("Error deleting video:",Rb),wS.error("Failed to delete video")}finally{B(!1),V(null)}})($),children:"Delete"})]})]}),(0,Ve.jsx)("input",{type:"file",accept:"video/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n&&m)try{E(!0),F(0);const e=URL.createObjectURL(n),t=document.createElement("video");t.src=e,await new Promise(((e,n)=>{t.onloadedmetadata=e,t.onerror=n,t.load()}));const r=t.duration;if(URL.revokeObjectURL(e),r<5||r>180)return wS.error("Videos must be between 5 seconds and 3 minutes long"),void E(!1);const i=ub(),o=Date.now(),a=`${o}_${n.name}`,s=cb(i,`videos/${m.uid}/${a}`),l=document.createElement("canvas"),c=l.getContext("2d");l.width=t.videoWidth,l.height=t.videoHeight,c&&c.drawImage(t,0,0,l.width,l.height);const u=await new Promise((e=>{l.toBlob((t=>{t&&e(t)}),"image/jpeg",.7)})),d=cb(i,`thumbnails/${m.uid}/${o}.jpg`);await ob(d,u);const h=await sb(d);ab(s,n).on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;F(t)}),(e=>{console.error("Upload error:",e),wS.error("Upload failed"),E(!1)}),(async()=>{try{const e=await sb(s),n=(await lv(Zf(KA,"users",m.uid))).data(),i=(null===n||void 0===n?void 0:n.username)||m.displayName||"Anonymous";await mv(Jf(KA,"videos"),{url:e,thumbnailUrl:h,userId:m.uid,username:i,likes:0,comments:0,timestamp:Sv(),duration:r,resolution:`${t.videoWidth}x${t.videoHeight}`}),wS.success("Video uploaded successfully!"),we()}catch(Rb){console.error("Error saving video data:",Rb),wS.error("Failed to save video data")}finally{E(!1),F(0)}}))}catch(Rb){console.error("Error uploading video:",Rb),wS.error("Failed to upload video. Please try again."),E(!1),F(0)}},style:{display:"none"},id:"video-upload",ref:oe}),(0,Ve.jsx)("label",{htmlFor:"video-upload",children:(0,Ve.jsx)(Sk,{color:"primary",component:"span",sx:{position:"fixed",bottom:140,right:16,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},boxShadow:3,width:56,height:56,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{wS("Videos must be between 5 seconds and 3 minutes long"),setTimeout((()=>{var e;null===(e=oe.current)||void 0===e||e.click()}),1e3)},children:x?(0,Ve.jsx)(dP,{size:24,color:"inherit",sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}):(0,Ve.jsx)(CM,{sx:{fontSize:32}})})})]})},vye=()=>{const{currentUser:e}=xT(),t=X();return!e||["/login","/register"].includes(t.pathname)?null:(0,Ve.jsx)($ve,{})},yye=()=>{const e="/vibits"===X().pathname;return(0,Ve.jsxs)(Qe,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[!e&&(0,Ve.jsx)(dR,{}),(0,Ve.jsx)(Qe,{component:"main",sx:{flexGrow:1,pt:{xs:2,sm:3}},children:(0,Ve.jsxs)(ve,{children:[(0,Ve.jsx)(fe,{path:"/login",element:(0,Ve.jsx)(BN,{})}),(0,Ve.jsx)(fe,{path:"/register",element:(0,Ve.jsx)(Zz,{})}),(0,Ve.jsx)(fe,{path:"/reset-password",element:(0,Ve.jsx)(eH,{})}),(0,Ve.jsx)(fe,{path:"/verify-email",element:(0,Ve.jsx)(Npe,{})}),(0,Ve.jsx)(fe,{path:"/setup-source-code",element:(0,Ve.jsx)(Cme,{})}),(0,Ve.jsx)(fe,{path:"/enter-source-code",element:(0,Ve.jsx)(Ime,{})}),(0,Ve.jsx)(fe,{path:"/reset-source-code",element:(0,Ve.jsx)(Rme,{})}),(0,Ve.jsx)(fe,{path:"/",element:(0,Ve.jsx)(Jpe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(vN,{})})}),(0,Ve.jsx)(fe,{path:"/vibits",element:(0,Ve.jsx)(Jpe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(gye,{})})}),(0,Ve.jsx)(fe,{path:"/profile/:userId",element:(0,Ve.jsx)(Jpe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(zH,{})})}),(0,Ve.jsx)(fe,{path:"/settings",element:(0,Ve.jsx)(Jpe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(yq,{})})}),(0,Ve.jsx)(fe,{path:"/security",element:(0,Ve.jsx)(Jpe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(Dpe,{})})}),(0,Ve.jsx)(fe,{path:"/search",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Aq,{})})}),(0,Ve.jsx)(fe,{path:"/discover",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Iq,{})})}),(0,Ve.jsx)(fe,{path:"/messages",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Rq,{})})}),(0,Ve.jsx)(fe,{path:"/side-rooms",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(lG,{})})}),(0,Ve.jsx)(fe,{path:"/side-room/:roomId",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Khe,{})})}),(0,Ve.jsx)(fe,{path:"/chat/:userId",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Yhe,{})})}),(0,Ve.jsx)(fe,{path:"/safety",element:(0,Ve.jsx)(kpe,{})}),(0,Ve.jsx)(fe,{path:"/privacy-policy",element:(0,Ve.jsx)(Lpe,{})}),(0,Ve.jsx)(fe,{path:"/about",element:(0,Ve.jsx)(Ppe,{})}),(0,Ve.jsx)(fe,{path:"/terms",element:(0,Ve.jsx)(Mpe,{})}),(0,Ve.jsx)(fe,{path:"/cookies",element:(0,Ve.jsx)(Ope,{})}),(0,Ve.jsx)(fe,{path:"/trash",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Bpe,{})})}),(0,Ve.jsx)(fe,{path:"/profile/:userId/followers",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)($pe,{})})}),(0,Ve.jsx)(fe,{path:"/profile/:userId/following",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Vpe,{})})}),(0,Ve.jsx)(fe,{path:"/notifications",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(yme,{})})}),(0,Ve.jsx)(fe,{path:"/account-management",element:(0,Ve.jsx)(Jpe,{children:(0,Ve.jsx)(Xpe,{})})})]})}),(0,Ve.jsx)(Tve,{}),(0,Ve.jsx)(qS,{position:"bottom-right"}),(0,Ve.jsx)(vye,{})]})},bye=()=>(0,Ve.jsx)(eme,{children:(0,Ve.jsx)(Te,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Ve.jsxs)($T,{children:[(0,Ve.jsx)(ot,{}),(0,Ve.jsx)(Vj,{dateAdapter:hve,children:(0,Ve.jsx)(wT,{children:(0,Ve.jsx)(lN,{children:(0,Ve.jsx)(TT,{children:(0,Ve.jsx)(vme,{children:(0,Ve.jsx)(yye,{})})})})})})]})})});i.createRoot(document.getElementById("root")).render((0,Ve.jsx)(bye,{}))})()})();