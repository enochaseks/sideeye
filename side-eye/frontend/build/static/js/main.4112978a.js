/*! For license information please see main.4112978a.js.LICENSE.txt */
(()=>{var e={195:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(4436).A)()},304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(5501)},423:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o});var r=n(4501);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?`${n}-${o}`:`${r.A.generate(e)}-${t}`}},630:(e,t,n)=>{"use strict";e.exports=n(2138)},782:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>b});var r=n(9629),i=n(5060),o=n(7509);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var o;const a=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),a=e[n];return(0,r.NI)(e,a,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h},827:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(8635).A},1014:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3539).A},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1927).A},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1375:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9950),i=n(1824);let o=!0,a=!1;const s=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function p(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,s.start(100,(()=>{a=!1})),t.current=!1,!0)},ref:e}}},1397:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",h]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",E="[object Error]",A="[object Function]",_="[object GeneratorFunction]",S="[object Map]",T="[object Number]",k="[object Object]",C="[object Promise]",I="[object RegExp]",R="[object Set]",D="[object String]",L="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",N="[object DataView]",O="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",$="[object Uint8Array]",V="[object Uint8ClampedArray]",W="[object Uint16Array]",z="[object Uint32Array]",H=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,Q=RegExp(K.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,Ae=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Re="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",De="['\u2019]",Le="["+_e+"]",Pe="["+Re+"]",Me="["+Se+"]",Ne="\\d+",Oe="["+Te+"]",je="["+ke+"]",Fe="[^"+_e+Re+Ne+Te+ke+Ce+"]",Ue="\\ud83c[\\udffb-\\udfff]",Be="[^"+_e+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Ce+"]",ze="\\u200d",He="(?:"+je+"|"+Fe+")",qe="(?:"+We+"|"+Fe+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ke="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Me+"|"+Ue+")"+"?",Qe="["+Ie+"]?",Xe=Qe+Ye+("(?:"+ze+"(?:"+[Be,$e,Ve].join("|")+")"+Qe+Ye+")*"),Ze="(?:"+[Oe,$e,Ve].join("|")+")"+Xe,Je="(?:"+[Be+Me+"?",Me,$e,Ve,Le].join("|")+")",et=RegExp(De,"g"),tt=RegExp(Me,"g"),nt=RegExp(Ue+"(?="+Ue+")|"+Je+Xe,"g"),rt=RegExp([We+"?"+je+"+"+Ge+"(?="+[Pe,We,"$"].join("|")+")",qe+"+"+Ke+"(?="+[Pe,We+He,"$"].join("|")+")",We+"?"+He+"+"+Ge,We+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Ze].join("|"),"g"),it=RegExp("["+ze+_e+Se+Ie+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[O]=lt[j]=lt[F]=lt[U]=lt[B]=lt[$]=lt[V]=lt[W]=lt[z]=!0,lt[y]=lt[b]=lt[M]=lt[w]=lt[N]=lt[x]=lt[E]=lt[A]=lt[S]=lt[T]=lt[k]=lt[I]=lt[R]=lt[D]=lt[P]=!1;var ct={};ct[y]=ct[b]=ct[M]=ct[N]=ct[w]=ct[x]=ct[O]=ct[j]=ct[F]=ct[U]=ct[B]=ct[S]=ct[T]=ct[k]=ct[I]=ct[R]=ct[D]=ct[L]=ct[$]=ct[V]=ct[W]=ct[z]=!0,ct[E]=ct[A]=ct[P]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,bt=yt&&pt.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),xt=wt&&wt.isArrayBuffer,Et=wt&&wt.isDate,At=wt&&wt.isMap,_t=wt&&wt.isRegExp,St=wt&&wt.isSet,Tt=wt&&wt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Pt(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Ot(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Gt("length");function $t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Wt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,Ht,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function qt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Gt(e){return function(t){return null==t?i:t[e]}}function Kt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,gn(e)+1).replace(ae,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Wt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Wt(t,e[n],0)>-1;);return n}var on=Kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,at))).Array,r=t.Date,se=t.Error,_e=t.Function,Se=t.Math,Te=t.Object,ke=t.RegExp,Ce=t.String,Ie=t.TypeError,Re=n.prototype,De=_e.prototype,Le=Te.prototype,Pe=t["__core-js_shared__"],Me=De.toString,Ne=Le.hasOwnProperty,Oe=0,je=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Le.toString,Ue=Me.call(Te),Be=mt._,$e=ke("^"+Me.call(Ne).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:i,We=t.Symbol,ze=t.Uint8Array,He=Ve?Ve.allocUnsafe:i,qe=un(Te.getPrototypeOf,Te),Ge=Te.create,Ke=Le.propertyIsEnumerable,Ye=Re.splice,Qe=We?We.isConcatSpreadable:i,Xe=We?We.iterator:i,Ze=We?We.toStringTag:i,Je=function(){try{var e=ho(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,ut=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Se.ceil,ft=Se.floor,gt=Te.getOwnPropertySymbols,vt=Ve?Ve.isBuffer:i,bt=t.isFinite,wt=Re.join,Bt=un(Te.keys,Te),Kt=Se.max,bn=Se.min,wn=r.now,xn=t.parseInt,En=Se.random,An=Re.reverse,_n=ho(t,"DataView"),Sn=ho(t,"Map"),Tn=ho(t,"Promise"),kn=ho(t,"Set"),Cn=ho(t,"WeakMap"),In=ho(Te,"create"),Rn=Cn&&new Cn,Dn={},Ln=Fo(_n),Pn=Fo(Sn),Mn=Fo(Tn),Nn=Fo(kn),On=Fo(Cn),jn=We?We.prototype:i,Fn=jn?jn.valueOf:i,Un=jn?jn.toString:i;function Bn(e){if(ts(e)&&!za(e)&&!(e instanceof zn)){if(e instanceof Wn)return e;if(Ne.call(e,"__wrapped__"))return Uo(e)}return new Wn(e)}var $n=function(){function e(){}return function(t){if(!es(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new qn(e);this.size=t.size}function Qn(e,t){var n=za(e),r=!n&&Wa(e),i=!n&&!r&&Ka(e),o=!n&&!r&&!i&&cs(e),a=n||r||i||o,s=a?Xt(e.length,Ce):[],l=s.length;for(var c in e)!t&&!Ne.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bo(c,l))||s.push(c);return s}function Xn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Zn(e,t){return No(Ii(e),sr(t,0,e.length))}function Jn(e){return No(Ii(e))}function er(e,t,n){(n!==i&&!Ba(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function tr(e,t,n){var r=e[t];Ne.call(e,t)&&Ba(r,n)&&(n!==i||t in e)||or(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Ba(e[n][0],t))return n;return-1}function rr(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ir(e,t){return e&&Ri(t,Ds(t),e)}function or(e,t,n){"__proto__"==t&&Je?Je(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,o=t.length,a=n(o),s=null==e;++r<o;)a[r]=s?i:Ts(e,t[r]);return a}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,a){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!es(e))return e;var d=za(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ii(e,s)}else{var h=mo(e),p=h==A||h==_;if(Ka(e))return Ai(e,l);if(h==k||h==y||p&&!o){if(s=c||p?{}:vo(e),!l)return c?function(e,t){return Ri(e,fo(e),t)}(e,function(e,t){return e&&Ri(t,Ls(t),e)}(s,e)):function(e,t){return Ri(e,po(e),t)}(e,ir(s,e))}else{if(!ct[h])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case M:return _i(e);case w:case x:return new r(+e);case N:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case j:case F:case U:case B:case $:case V:case W:case z:return Si(e,n);case S:return new r;case T:case D:return new r(e);case I:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case L:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,h,l)}}a||(a=new Yn);var f=a.get(e);if(f)return f;a.set(e,s),as(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):ns(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,a))}));var m=d?i:(u?c?io:ro:c?Ls:Ds)(e);return It(m||e,(function(r,i){m&&(r=e[i=r]),tr(s,i,lr(r,t,n,i,e,a))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new Ie(o);return Do((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,o=Pt,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Nt(t,Jt(n))),r?(o=Mt,a=!1):t.length>=200&&(o=tn,a=!1,t=new Kn(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d===d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}Bn.templateSettings={escape:Z,evaluate:J,interpolate:ee,variable:"",imports:{_:Bn}},Bn.prototype=Vn.prototype,Bn.prototype.constructor=Bn,Wn.prototype=$n(Vn.prototype),Wn.prototype.constructor=Wn,zn.prototype=$n(Vn.prototype),zn.prototype.constructor=zn,Hn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===a?i:n}return Ne.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==i:Ne.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===i?a:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},qn.prototype.has=function(e){return nr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Sn||qn),string:new Hn}},Gn.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return co(this,e).get(e)},Gn.prototype.has=function(e){return co(this,e).has(e)},Gn.prototype.set=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,a),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new qn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var hr=Pi(wr),pr=Pi(xr,!0);function fr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(l===i?s===s&&!ls(s):n(s,l)))var l=s,c=a}return c}function gr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?vr(s,t-1,n,r,i):Ot(i,s):r||(i[i.length]=s)}return i}var yr=Mi(),br=Mi(!0);function wr(e,t){return e&&yr(e,t,Ds)}function xr(e,t){return e&&br(e,t,Ds)}function Er(e,t){return Lt(t,(function(t){return Xa(e[t])}))}function Ar(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[jo(t[n++])];return n&&n==r?e:i}function _r(e,t,n){var r=t(e);return za(e)?r:Ot(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Te(e)?function(e){var t=Ne.call(e,Ze),n=e[Ze];try{e[Ze]=i;var r=!0}catch(a){}var o=Fe.call(e);r&&(t?e[Ze]=n:delete e[Ze]);return o}(e):function(e){return Fe.call(e)}(e)}function Tr(e,t){return e>t}function kr(e,t){return null!=e&&Ne.call(e,t)}function Cr(e,t){return null!=e&&t in Te(e)}function Ir(e,t,r){for(var o=r?Mt:Pt,a=e[0].length,s=e.length,l=s,c=n(s),u=1/0,d=[];l--;){var h=e[l];l&&t&&(h=Nt(h,Jt(t))),u=bn(h.length,u),c[l]=!r&&(t||a>=120&&h.length>=120)?new Kn(l&&h):i}h=e[0];var p=-1,f=c[0];e:for(;++p<a&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?tn(f,g):o(d,g,r))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):o(e[l],g,r)))continue e}f&&f.push(g),d.push(m)}}return d}function Rr(e,t,n){var r=null==(e=Co(e,t=bi(t,e)))?e:e[jo(Qo(t))];return null==r?i:kt(r,e,n)}function Dr(e){return ts(e)&&Sr(e)==y}function Lr(e,t,n,r,o){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,o,a){var s=za(e),l=za(t),c=s?b:mo(e),u=l?b:mo(t),d=(c=c==y?k:c)==k,h=(u=u==y?k:u)==k,p=c==u;if(p&&Ka(e)){if(!Ka(t))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new Yn),s||cs(e)?to(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case w:case x:case T:return Ba(+e,+t);case E:return e.name==t.name&&e.message==t.message;case I:case D:return e==t+"";case S:var s=cn;case R:var l=1&r;if(s||(s=hn),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=to(s(e),s(t),r,i,o,a);return a.delete(e),u;case L:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var f=d&&Ne.call(e,"__wrapped__"),m=h&&Ne.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return a||(a=new Yn),o(g,v,n,r,a)}}if(!p)return!1;return a||(a=new Yn),function(e,t,n,r,o,a){var s=1&n,l=ro(e),c=l.length,u=ro(t),d=u.length;if(c!=d&&!s)return!1;var h=c;for(;h--;){var p=l[h];if(!(s?p in t:Ne.call(t,p)))return!1}var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var g=!0;a.set(e,t),a.set(t,e);var v=s;for(;++h<c;){var y=e[p=l[h]],b=t[p];if(r)var w=s?r(b,y,p,t,e,a):r(y,b,p,e,t,a);if(!(w===i?y===b||o(y,b,n,r,a):w)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var x=e.constructor,E=t.constructor;x==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof E&&E instanceof E||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,r,o,a)}(e,t,n,r,Lr,o))}function Pr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Te(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var c=(l=n[o])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var h=new Yn;if(r)var p=r(u,d,c,e,t,h);if(!(p===i?Lr(d,u,3,r,h):p))return!1}}return!0}function Mr(e){return!(!es(e)||(t=e,je&&je in t))&&(Xa(e)?$e:ye).test(Fo(e));var t}function Nr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?za(e)?$r(e[0],e[1]):Br(e):hl(e)}function Or(e){if(!_o(e))return Bt(e);var t=[];for(var n in Te(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Ur(e,t){var r=-1,i=qa(e)?n(e.length):[];return hr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Br(e){var t=uo(e);return 1==t.length&&t[0][2]?To(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function $r(e,t){return xo(e)&&So(t)?To(jo(e),t):function(n){var r=Ts(n,e);return r===i&&r===t?ks(n,e):Lr(t,r,3)}}function Vr(e,t,n,r,o){e!==t&&yr(t,(function(a,s){if(o||(o=new Yn),es(a))!function(e,t,n,r,o,a,s){var l=Io(e,n),c=Io(t,n),u=s.get(c);if(u)return void er(e,n,u);var d=a?a(l,c,n+"",e,t,s):i,h=d===i;if(h){var p=za(c),f=!p&&Ka(c),m=!p&&!f&&cs(c);d=c,p||f||m?za(l)?d=l:Ga(l)?d=Ii(l):f?(h=!1,d=Ai(c,!0)):m?(h=!1,d=Si(c,!0)):d=[]:is(c)||Wa(c)?(d=l,Wa(l)?d=vs(l):es(l)&&!Xa(l)||(d=vo(c))):h=!1}h&&(s.set(c,d),o(d,c,r,a,s),s.delete(c));er(e,n,d)}(e,t,s,n,Vr,r,o);else{var l=r?r(Io(e,s),a,s+"",e,t,o):i;l===i&&(l=a),er(e,s,l)}}),Ls)}function Wr(e,t){var n=e.length;if(n)return bo(t+=t<0?n:0,n)?e[t]:i}function zr(e,t,n){t=t.length?Nt(t,(function(e){return za(e)?function(t){return Ar(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Nt(t,Jt(lo()));var i=Ur(e,(function(e,n,i){var o=Nt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var l=Ti(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Ar(e,a);n(s,a)&&Jr(o,bi(a,e),s)}return o}function qr(e,t,n,r){var i=r?zt:Wt,o=-1,a=t.length,s=e;for(e===t&&(t=Ii(t)),n&&(s=Nt(e,Jt(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bo(i)?Ye.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+ft(En()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Lo(ko(e,t,rl),e+"")}function Xr(e){return Xn(Bs(e))}function Zr(e,t){var n=Bs(e);return No(n,sr(t,0,n.length))}function Jr(e,t,n,r){if(!es(e))return e;for(var o=-1,a=(t=bi(t,e)).length,s=a-1,l=e;null!=l&&++o<a;){var c=jo(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var d=l[c];(u=r?r(d,c,l):i)===i&&(u=es(d)?d:bo(t[o+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ei=Rn?function(e,t){return Rn.set(e,t),e}:rl,ti=Je?function(e,t){return Je(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return No(Bs(e))}function ri(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function ii(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ai(e,t,rl,n)}function ai(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,l=null===t,c=ls(t),u=t===i;o<a;){var d=ft((o+a)/2),h=n(e[d]),p=h!==i,f=null===h,m=h===h,g=ls(h);if(s)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?o=d+1:a=d}return bn(a,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ba(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function li(e){return"number"==typeof e?e:ls(e)?m:+e}function ci(e){if("string"==typeof e)return e;if(za(e))return Nt(e,ci)+"";if(ls(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Pt,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Mt;else if(o>=200){var c=t?null:Yi(e);if(c)return hn(c);a=!1,i=tn,l=new Kn}else l=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function di(e,t){return null==(e=Co(e,t=bi(t,e)))||delete e[jo(Qo(t))]}function hi(e,t,n,r){return Jr(e,t,n(Ar(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ri(e,r?0:o,r?o+1:i):ri(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof zn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],l=-1;++l<i;)l!=o&&(a[o]=dr(a[o]||s,e[l],t,r));return ui(vr(a,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var l=r<a?t[r]:i;n(s,e[r],l)}return s}function vi(e){return Ga(e)?e:[]}function yi(e){return"function"==typeof e?e:rl}function bi(e,t){return za(e)?e:xo(e,t)?[e]:Oo(ys(e))}var wi=Qr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var Ei=nt||function(e){return mt.clearTimeout(e)};function Ai(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Si(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,a=ls(e),s=t!==i,l=null===t,c=t===t,u=ls(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!u&&e<t||u&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function ki(e,t,r,i){for(var o=-1,a=e.length,s=r.length,l=-1,c=t.length,u=Kt(a-s,0),d=n(c+u),h=!i;++l<c;)d[l]=t[l];for(;++o<s;)(h||o<a)&&(d[r[o]]=e[o]);for(;u--;)d[l++]=e[o++];return d}function Ci(e,t,r,i){for(var o=-1,a=e.length,s=-1,l=r.length,c=-1,u=t.length,d=Kt(a-l,0),h=n(d+u),p=!i;++o<d;)h[o]=e[o];for(var f=o;++c<u;)h[f+c]=t[c];for(;++s<l;)(p||o<a)&&(h[f+r[s]]=e[o++]);return h}function Ii(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ri(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),o?or(n,l,c):tr(n,l,c)}return n}function Di(e,t){return function(n,r){var i=za(n)?Ct:rr,o=t?t():{};return i(n,e,lo(r,2),o)}}function Li(e){return Qr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&wo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Te(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Te(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Mi(e){return function(t,n,r){for(var i=-1,o=Te(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Ni(e){return function(t){var n=ln(t=ys(t))?mn(t):i,r=n?n[0]:t.charAt(0),o=n?xi(n,1).join(""):t.slice(1);return r[e]()+o}}function Oi(e){return function(t){return jt(Xs(Ws(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function Fi(e){return function(t,n,r){var o=Te(t);if(!qa(t)){var a=lo(n,3);t=Ds(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Ui(e){return no((function(t){var n=t.length,r=n,a=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ie(o);if(a&&!l&&"wrapper"==ao(s))var l=new Wn([],!0)}for(r=l?r:n;++r<n;){var c=ao(s=t[r]),u="wrapper"==c?oo(s):i;l=u&&Eo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ao(u[0])].apply(l,u[3]):1==s.length&&Eo(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&za(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Bi(e,t,r,o,a,s,l,c,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:ji(e);return function d(){for(var b=arguments.length,w=n(b),x=b;x--;)w[x]=arguments[x];if(g)var E=so(d),A=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(w,E);if(o&&(w=ki(w,o,a,g)),s&&(w=Ci(w,s,l,g)),b-=A,g&&b<h){var _=dn(w,E);return Gi(e,t,Bi,d.placeholder,r,w,_,c,u,h-b)}var S=f?r:this,T=m?S[e]:e;return b=w.length,c?w=function(e,t){var n=e.length,r=bn(t.length,n),o=Ii(e);for(;r--;){var a=t[r];e[r]=bo(a,n)?o[a]:i}return e}(w,c):v&&b>1&&w.reverse(),p&&u<b&&(w.length=u),this&&this!==mt&&this instanceof d&&(T=y||ji(T)),T.apply(S,w)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function Wi(e){return no((function(t){return t=Nt(t,Jt(lo())),Qr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function zi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/fn(t)));return ln(t)?xi(mn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,o){return o&&"number"!=typeof o&&wo(t,r,o)&&(r=o=i),t=ps(t),r===i?(r=t,t=0):r=ps(r),function(e,t,r,i){for(var o=-1,a=Kt(pt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,o=o===i?t<r?1:-1:ps(o),e)}}function qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function Gi(e,t,n,r,o,a,s,l,d,h){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,o,p?a:i,p?s:i,p?i:a,p?i:s,l,d,h],m=n.apply(i,f);return Eo(e)&&Ro(m,f),m.placeholder=r,Po(m,e,t)}function Ki(e){var t=Se[e];return function(e,n){if(e=gs(e),(n=null==n?0:bn(fs(n),292))&&bt(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=kn&&1/hn(new kn([,-0]))[1]==p?function(e){return new kn(e)}:ll;function Qi(e){return function(t){var n=mo(t);return n==S?cn(t):n==R?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,a,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(o);var y=a?a.length:0;if(y||(t&=-97,a=p=i),m=m===i?m:Kt(fs(m),0),g=g===i?g:fs(g),y-=p?p.length:0,t&u){var b=a,w=p;a=p=i}var x=v?i:oo(e),E=[e,t,r,a,p,b,w,f,m,g];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==d&&8==n||r==d&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?ki(c,l,t[4]):l,e[4]=c?dn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ci(c,l,t[6]):l,e[6]=c?dn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,x),e=E[0],t=E[1],r=E[2],a=E[3],p=E[4],!(g=E[9]=E[9]===i?v?0:e.length:Kt(E[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)A=8==t||t==l?function(e,t,r){var o=ji(e);return function a(){for(var s=arguments.length,l=n(s),c=s,u=so(a);c--;)l[c]=arguments[c];var d=s<3&&l[0]!==u&&l[s-1]!==u?[]:dn(l,u);return(s-=d.length)<r?Gi(e,t,Bi,a.placeholder,i,l,d,i,i,r-s):kt(this&&this!==mt&&this instanceof a?o:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?Bi.apply(i,E):function(e,t,r,i){var o=1&t,a=ji(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,d=n(u+l),h=this&&this!==mt&&this instanceof t?a:e;++c<u;)d[c]=i[c];for(;l--;)d[c++]=arguments[++s];return kt(h,o?r:this,d)}}(e,t,r,a);else var A=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Po((x?ei:Ro)(A,E),e,t)}function Zi(e,t,n,r){return e===i||Ba(e,Le[n])&&!Ne.call(r,n)?t:e}function Ji(e,t,n,r,o,a){return es(e)&&es(t)&&(a.set(t,e),Vr(e,t,i,Ji,a),a.delete(t)),e}function eo(e){return is(e)?i:e}function to(e,t,n,r,o,a){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Kn:i;for(a.set(e,t),a.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,a):r(m,g,h,e,t,a);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!tn(f,t)&&(m===e||o(m,e,n,r,a)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function no(e){return Lo(ko(e,i,Ho),e+"")}function ro(e){return _r(e,Ds,po)}function io(e){return _r(e,Ls,fo)}var oo=Rn?function(e){return Rn.get(e)}:ll;function ao(e){for(var t=e.name+"",n=Dn[t],r=Ne.call(Dn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function so(e){return(Ne.call(Bn,"placeholder")?Bn:e).placeholder}function lo(){var e=Bn.iteratee||il;return e=e===il?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function uo(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,So(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Mr(n)?n:i}var po=gt?function(e){return null==e?[]:(e=Te(e),Lt(gt(e),(function(t){return Ke.call(e,t)})))}:ml,fo=gt?function(e){for(var t=[];e;)Ot(t,po(e)),e=qe(e);return t}:ml,mo=Sr;function go(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,o=!1;++r<i;){var a=jo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ja(i)&&bo(a,i)&&(za(e)||Wa(e))}function vo(e){return"function"!=typeof e.constructor||_o(e)?{}:$n(qe(e))}function yo(e){return za(e)||Wa(e)||!!(Qe&&e&&e[Qe])}function bo(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&bo(t,n.length):"string"==r&&t in n)&&Ba(n[t],e)}function xo(e,t){if(za(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function Eo(e){var t=ao(e),n=Bn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=oo(n);return!!r&&e===r[0]}(_n&&mo(new _n(new ArrayBuffer(1)))!=N||Sn&&mo(new Sn)!=S||Tn&&mo(Tn.resolve())!=C||kn&&mo(new kn)!=R||Cn&&mo(new Cn)!=P)&&(mo=function(e){var t=Sr(e),n=t==k?e.constructor:i,r=n?Fo(n):"";if(r)switch(r){case Ln:return N;case Pn:return S;case Mn:return C;case Nn:return R;case On:return P}return t});var Ao=Pe?Xa:gl;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function So(e){return e===e&&!es(e)}function To(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function ko(e,t,r){return t=Kt(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=Kt(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=i[o];return l[t]=r(s),kt(e,this,l)}}function Co(e,t){return t.length<2?e:Ar(e,ri(t,0,-1))}function Io(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ro=Mo(ei),Do=ut||function(e,t){return mt.setTimeout(e,t)},Lo=Mo(ti);function Po(e,t,n){var r=t+"";return Lo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(v,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Mo(e){var t=0,n=0;return function(){var r=wn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function No(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Kr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Oo=function(e){var t=Ma(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Me.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Uo(e){if(e instanceof zn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Qr((function(e,t){return Ga(e)?dr(e,vr(t,1,Ga,!0)):[]})),$o=Qr((function(e,t){var n=Qo(t);return Ga(n)&&(n=i),Ga(e)?dr(e,vr(t,1,Ga,!0),lo(n,2)):[]})),Vo=Qr((function(e,t){var n=Qo(t);return Ga(n)&&(n=i),Ga(e)?dr(e,vr(t,1,Ga,!0),i,n):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Kt(r+i,0)),Vt(e,lo(t,3),i)}function zo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?Kt(r+o,0):bn(o,r-1)),Vt(e,lo(t,3),o,!0)}function Ho(e){return(null==e?0:e.length)?vr(e,1):[]}function qo(e){return e&&e.length?e[0]:i}var Go=Qr((function(e){var t=Nt(e,vi);return t.length&&t[0]===e[0]?Ir(t):[]})),Ko=Qr((function(e){var t=Qo(e),n=Nt(e,vi);return t===Qo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ir(n,lo(t,2)):[]})),Yo=Qr((function(e){var t=Qo(e),n=Nt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ir(n,i,t):[]}));function Qo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xo=Qr(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var Jo=no((function(e,t){var n=null==e?0:e.length,r=ar(e,t);return Gr(e,Nt(t,(function(e){return bo(e,n)?+e:e})).sort(Ti)),r}));function ea(e){return null==e?e:An.call(e)}var ta=Qr((function(e){return ui(vr(e,1,Ga,!0))})),na=Qr((function(e){var t=Qo(e);return Ga(t)&&(t=i),ui(vr(e,1,Ga,!0),lo(t,2))})),ra=Qr((function(e){var t=Qo(e);return t="function"==typeof t?t:i,ui(vr(e,1,Ga,!0),i,t)}));function ia(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(Ga(e))return t=Kt(e.length,t),!0})),Xt(t,(function(t){return Nt(e,Gt(t))}))}function oa(e,t){if(!e||!e.length)return[];var n=ia(e);return null==t?n:Nt(n,(function(e){return kt(t,i,e)}))}var aa=Qr((function(e,t){return Ga(e)?dr(e,t):[]})),sa=Qr((function(e){return mi(Lt(e,Ga))})),la=Qr((function(e){var t=Qo(e);return Ga(t)&&(t=i),mi(Lt(e,Ga),lo(t,2))})),ca=Qr((function(e){var t=Qo(e);return t="function"==typeof t?t:i,mi(Lt(e,Ga),i,t)})),ua=Qr(ia);var da=Qr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oa(e,n)}));function ha(e){var t=Bn(e);return t.__chain__=!0,t}function pa(e,t){return t(e)}var fa=no((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&bo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ma=Di((function(e,t,n){Ne.call(e,n)?++e[n]:or(e,n,1)}));var ga=Fi(Wo),va=Fi(zo);function ya(e,t){return(za(e)?It:hr)(e,lo(t,3))}function ba(e,t){return(za(e)?Rt:pr)(e,lo(t,3))}var wa=Di((function(e,t,n){Ne.call(e,n)?e[n].push(t):or(e,n,[t])}));var xa=Qr((function(e,t,r){var i=-1,o="function"==typeof t,a=qa(e)?n(e.length):[];return hr(e,(function(e){a[++i]=o?kt(t,e,r):Rr(e,t,r)})),a})),Ea=Di((function(e,t,n){or(e,n,t)}));function Aa(e,t){return(za(e)?Nt:Ur)(e,lo(t,3))}var _a=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Sa=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wo(e,t[0],t[1])?t=[]:n>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,vr(t,1),[])})),Ta=it||function(){return mt.Date.now()};function ka(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,d,i,i,i,i,t)}function Ca(e,t){var n;if("function"!=typeof t)throw new Ie(o);return e=fs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ia=Qr((function(e,t,n){var r=1;if(n.length){var i=dn(n,so(Ia));r|=c}return Xi(e,r,t,n,i)})),Ra=Qr((function(e,t,n){var r=3;if(n.length){var i=dn(n,so(Ra));r|=c}return Xi(t,r,e,n,i)}));function Da(e,t,n){var r,a,s,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ie(o);function m(t){var n=r,o=a;return r=a=i,d=t,l=e.apply(o,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-d>=s}function v(){var e=Ta();if(g(e))return y(e);c=Do(v,function(e){var n=t-(e-u);return p?bn(n,s-(e-d)):n}(e))}function y(e){return c=i,f&&r?m(e):(r=a=i,l)}function b(){var e=Ta(),n=g(e);if(r=arguments,a=this,u=e,n){if(c===i)return function(e){return d=e,c=Do(v,t),h?m(e):l}(u);if(p)return Ei(c),c=Do(v,t),m(u)}return c===i&&(c=Do(v,t)),l}return t=gs(t)||0,es(n)&&(h=!!n.leading,s=(p="maxWait"in n)?Kt(gs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),b.cancel=function(){c!==i&&Ei(c),d=0,r=u=a=c=i},b.flush=function(){return c===i?l:y(Ta())},b}var La=Qr((function(e,t){return ur(e,1,t)})),Pa=Qr((function(e,t,n){return ur(e,gs(t)||0,n)}));function Ma(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ma.Cache||Gn),n}function Na(e){if("function"!=typeof e)throw new Ie(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ma.Cache=Gn;var Oa=wi((function(e,t){var n=(t=1==t.length&&za(t[0])?Nt(t[0],Jt(lo())):Nt(vr(t,1),Jt(lo()))).length;return Qr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),ja=Qr((function(e,t){var n=dn(t,so(ja));return Xi(e,c,i,t,n)})),Fa=Qr((function(e,t){var n=dn(t,so(Fa));return Xi(e,u,i,t,n)})),Ua=no((function(e,t){return Xi(e,h,i,i,i,t)}));function Ba(e,t){return e===t||e!==e&&t!==t}var $a=qi(Tr),Va=qi((function(e,t){return e>=t})),Wa=Dr(function(){return arguments}())?Dr:function(e){return ts(e)&&Ne.call(e,"callee")&&!Ke.call(e,"callee")},za=n.isArray,Ha=xt?Jt(xt):function(e){return ts(e)&&Sr(e)==M};function qa(e){return null!=e&&Ja(e.length)&&!Xa(e)}function Ga(e){return ts(e)&&qa(e)}var Ka=vt||gl,Ya=Et?Jt(Et):function(e){return ts(e)&&Sr(e)==x};function Qa(e){if(!ts(e))return!1;var t=Sr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Xa(e){if(!es(e))return!1;var t=Sr(e);return t==A||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Za(e){return"number"==typeof e&&e==fs(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=At?Jt(At):function(e){return ts(e)&&mo(e)==S};function rs(e){return"number"==typeof e||ts(e)&&Sr(e)==T}function is(e){if(!ts(e)||Sr(e)!=k)return!1;var t=qe(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Me.call(n)==Ue}var os=_t?Jt(_t):function(e){return ts(e)&&Sr(e)==I};var as=St?Jt(St):function(e){return ts(e)&&mo(e)==R};function ss(e){return"string"==typeof e||!za(e)&&ts(e)&&Sr(e)==D}function ls(e){return"symbol"==typeof e||ts(e)&&Sr(e)==L}var cs=Tt?Jt(Tt):function(e){return ts(e)&&Ja(e.length)&&!!lt[Sr(e)]};var us=qi(Fr),ds=qi((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(qa(e))return ss(e)?mn(e):Ii(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=mo(e);return(t==S?cn:t==R?hn:Bs)(e)}function ps(e){return e?(e=gs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fs(e){var t=ps(e),n=t%1;return t===t?n?t-n:t:0}function ms(e){return e?sr(fs(e),0,g):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return m;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||be.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function vs(e){return Ri(e,Ls(e))}function ys(e){return null==e?"":ci(e)}var bs=Li((function(e,t){if(_o(t)||qa(t))Ri(t,Ds(t),e);else for(var n in t)Ne.call(t,n)&&tr(e,n,t[n])})),ws=Li((function(e,t){Ri(t,Ls(t),e)})),xs=Li((function(e,t,n,r){Ri(t,Ls(t),e,r)})),Es=Li((function(e,t,n,r){Ri(t,Ds(t),e,r)})),As=no(ar);var _s=Qr((function(e,t){e=Te(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&wo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Ls(a),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===i||Ba(d,Le[u])&&!Ne.call(e,u))&&(e[u]=a[u])}return e})),Ss=Qr((function(e){return e.push(i,Ji),kt(Ms,i,e)}));function Ts(e,t,n){var r=null==e?i:Ar(e,t);return r===i?n:r}function ks(e,t){return null!=e&&go(e,t,Cr)}var Cs=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(rl)),Is=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Rs=Qr(Rr);function Ds(e){return qa(e)?Qn(e):Or(e)}function Ls(e){return qa(e)?Qn(e,!0):jr(e)}var Ps=Li((function(e,t,n){Vr(e,t,n)})),Ms=Li((function(e,t,n,r){Vr(e,t,n,r)})),Ns=no((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Ri(e,io(e),n),r&&(n=lr(n,7,eo));for(var i=t.length;i--;)di(n,t[i]);return n}));var Os=no((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return ks(e,n)}))}(e,t)}));function js(e,t){if(null==e)return{};var n=Nt(io(e),(function(e){return[e]}));return t=lo(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Fs=Qi(Ds),Us=Qi(Ls);function Bs(e){return null==e?[]:en(e,Ds(e))}var $s=Oi((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Qs(ys(e).toLowerCase())}function Ws(e){return(e=ys(e))&&e.replace(xe,on).replace(tt,"")}var zs=Oi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Hs=Oi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ni("toLowerCase");var Gs=Oi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ks=Oi((function(e,t,n){return e+(n?" ":"")+Qs(t)}));var Ys=Oi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qs=Ni("toUpperCase");function Xs(e,t,n){return e=ys(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Zs=Qr((function(e,t){try{return kt(e,i,t)}catch(n){return Qa(n)?n:new se(n)}})),Js=no((function(e,t){return It(t,(function(t){t=jo(t),or(e,t,Ia(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Ui(),nl=Ui(!0);function rl(e){return e}function il(e){return Nr("function"==typeof e?e:lr(e,1))}var ol=Qr((function(e,t){return function(n){return Rr(n,e,t)}})),al=Qr((function(e,t){return function(n){return Rr(e,n,t)}}));function sl(e,t,n){var r=Ds(t),i=Er(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Er(t,Ds(t)));var o=!(es(n)&&"chain"in n)||!!n.chain,a=Xa(e);return It(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function ll(){}var cl=Wi(Nt),ul=Wi(Dt),dl=Wi(Ut);function hl(e){return xo(e)?Gt(jo(e)):function(e){return function(t){return Ar(t,e)}}(e)}var pl=Hi(),fl=Hi(!0);function ml(){return[]}function gl(){return!1}var vl=Vi((function(e,t){return e+t}),0),yl=Ki("ceil"),bl=Vi((function(e,t){return e/t}),1),wl=Ki("floor");var xl=Vi((function(e,t){return e*t}),1),El=Ki("round"),Al=Vi((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Ie(o);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=ka,Bn.assign=bs,Bn.assignIn=ws,Bn.assignInWith=xs,Bn.assignWith=Es,Bn.at=As,Bn.before=Ca,Bn.bind=Ia,Bn.bindAll=Js,Bn.bindKey=Ra,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return za(e)?e:[e]},Bn.chain=ha,Bn.chunk=function(e,t,r){t=(r?wo(e,t,r):t===i)?1:Kt(fs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,l=n(pt(o/t));a<o;)l[s++]=ri(e,a,a+=t);return l},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ot(za(r)?Ii(r):[r],vr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Ie(o);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Ds(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Bn.constant=el,Bn.countBy=ma,Bn.create=function(e,t){var n=$n(e);return null==t?n:ir(n,t)},Bn.curry=function e(t,n,r){var o=Xi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.curryRight=function e(t,n,r){var o=Xi(t,l,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.debounce=Da,Bn.defaults=_s,Bn.defaultsDeep=Ss,Bn.defer=La,Bn.delay=Pa,Bn.difference=Bo,Bn.differenceBy=$o,Bn.differenceWith=Vo,Bn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:fs(t))<0?0:t,r):[]},Bn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:fs(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0):[]},Bn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Bn.filter=function(e,t){return(za(e)?Lt:gr)(e,lo(t,3))},Bn.flatMap=function(e,t){return vr(Aa(e,t),1)},Bn.flatMapDeep=function(e,t){return vr(Aa(e,t),p)},Bn.flatMapDepth=function(e,t,n){return n=n===i?1:fs(n),vr(Aa(e,t),n)},Bn.flatten=Ho,Bn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,p):[]},Bn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:fs(t)):[]},Bn.flip=function(e){return Xi(e,512)},Bn.flow=tl,Bn.flowRight=nl,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Bn.functions=function(e){return null==e?[]:Er(e,Ds(e))},Bn.functionsIn=function(e){return null==e?[]:Er(e,Ls(e))},Bn.groupBy=wa,Bn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Bn.intersection=Go,Bn.intersectionBy=Ko,Bn.intersectionWith=Yo,Bn.invert=Cs,Bn.invertBy=Is,Bn.invokeMap=xa,Bn.iteratee=il,Bn.keyBy=Ea,Bn.keys=Ds,Bn.keysIn=Ls,Bn.map=Aa,Bn.mapKeys=function(e,t){var n={};return t=lo(t,3),wr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Bn.mapValues=function(e,t){var n={};return t=lo(t,3),wr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Bn.matches=function(e){return Br(lr(e,1))},Bn.matchesProperty=function(e,t){return $r(e,lr(t,1))},Bn.memoize=Ma,Bn.merge=Ps,Bn.mergeWith=Ms,Bn.method=ol,Bn.methodOf=al,Bn.mixin=sl,Bn.negate=Na,Bn.nthArg=function(e){return e=fs(e),Qr((function(t){return Wr(t,e)}))},Bn.omit=Ns,Bn.omitBy=function(e,t){return js(e,Na(lo(t)))},Bn.once=function(e){return Ca(2,e)},Bn.orderBy=function(e,t,n,r){return null==e?[]:(za(t)||(t=null==t?[]:[t]),za(n=r?i:n)||(n=null==n?[]:[n]),zr(e,t,n))},Bn.over=cl,Bn.overArgs=Oa,Bn.overEvery=ul,Bn.overSome=dl,Bn.partial=ja,Bn.partialRight=Fa,Bn.partition=_a,Bn.pick=Os,Bn.pickBy=js,Bn.property=hl,Bn.propertyOf=function(e){return function(t){return null==e?i:Ar(e,t)}},Bn.pull=Xo,Bn.pullAll=Zo,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,lo(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,i,n):e},Bn.pullAt=Jo,Bn.range=pl,Bn.rangeRight=fl,Bn.rearg=Ua,Bn.reject=function(e,t){return(za(e)?Lt:gr)(e,Na(lo(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Gr(e,i),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Ie(o);return Qr(e,t=t===i?t:fs(t))},Bn.reverse=ea,Bn.sampleSize=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:fs(t),(za(e)?Zn:Zr)(e,t)},Bn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Bn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Jr(e,t,n,r)},Bn.shuffle=function(e){return(za(e)?Jn:ni)(e)},Bn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wo(e,t,n)?(t=0,n=r):(t=null==t?0:fs(t),n=n===i?r:fs(n)),ri(e,t,n)):[]},Bn.sortBy=Sa,Bn.sortedUniq=function(e){return e&&e.length?si(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?si(e,lo(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&wo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ci(t))&&ln(e)?xi(mn(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Ie(o);return t=null==t?0:Kt(fs(t),0),Qr((function(n){var r=n[t],i=xi(n,0,t);return r&&Ot(i,r),kt(e,this,i)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:fs(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:fs(t)))<0?0:t,r):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?pi(e,lo(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ie(o);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Da(e,t,{leading:r,maxWait:t,trailing:i})},Bn.thru=pa,Bn.toArray=hs,Bn.toPairs=Fs,Bn.toPairsIn=Us,Bn.toPath=function(e){return za(e)?Nt(e,jo):ls(e)?[e]:Ii(Oo(ys(e)))},Bn.toPlainObject=vs,Bn.transform=function(e,t,n){var r=za(e),i=r||Ka(e)||cs(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:es(e)&&Xa(o)?$n(qe(e)):{}}return(i?It:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Bn.unary=function(e){return ka(e,1)},Bn.union=ta,Bn.unionBy=na,Bn.unionWith=ra,Bn.uniq=function(e){return e&&e.length?ui(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?ui(e,lo(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},Bn.unset=function(e,t){return null==e||di(e,t)},Bn.unzip=ia,Bn.unzipWith=oa,Bn.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},Bn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,yi(n),r)},Bn.values=Bs,Bn.valuesIn=function(e){return null==e?[]:en(e,Ls(e))},Bn.without=aa,Bn.words=Xs,Bn.wrap=function(e,t){return ja(yi(t),e)},Bn.xor=sa,Bn.xorBy=la,Bn.xorWith=ca,Bn.zip=ua,Bn.zipObject=function(e,t){return gi(e||[],t||[],tr)},Bn.zipObjectDeep=function(e,t){return gi(e||[],t||[],Jr)},Bn.zipWith=da,Bn.entries=Fs,Bn.entriesIn=Us,Bn.extend=ws,Bn.extendWith=xs,sl(Bn,Bn),Bn.add=vl,Bn.attempt=Zs,Bn.camelCase=$s,Bn.capitalize=Vs,Bn.ceil=yl,Bn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))===n?n:0),t!==i&&(t=(t=gs(t))===t?t:0),sr(gs(e),t,n)},Bn.clone=function(e){return lr(e,4)},Bn.cloneDeep=function(e){return lr(e,5)},Bn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Bn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Bn.conformsTo=function(e,t){return null==t||cr(e,t,Ds(t))},Bn.deburr=Ws,Bn.defaultTo=function(e,t){return null==e||e!==e?t:e},Bn.divide=bl,Bn.endsWith=function(e,t,n){e=ys(e),t=ci(t);var r=e.length,o=n=n===i?r:sr(fs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Bn.eq=Ba,Bn.escape=function(e){return(e=ys(e))&&X.test(e)?e.replace(Y,an):e},Bn.escapeRegExp=function(e){return(e=ys(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Bn.every=function(e,t,n){var r=za(e)?Dt:fr;return n&&wo(e,t,n)&&(t=i),r(e,lo(t,3))},Bn.find=ga,Bn.findIndex=Wo,Bn.findKey=function(e,t){return $t(e,lo(t,3),wr)},Bn.findLast=va,Bn.findLastIndex=zo,Bn.findLastKey=function(e,t){return $t(e,lo(t,3),xr)},Bn.floor=wl,Bn.forEach=ya,Bn.forEachRight=ba,Bn.forIn=function(e,t){return null==e?e:yr(e,lo(t,3),Ls)},Bn.forInRight=function(e,t){return null==e?e:br(e,lo(t,3),Ls)},Bn.forOwn=function(e,t){return e&&wr(e,lo(t,3))},Bn.forOwnRight=function(e,t){return e&&xr(e,lo(t,3))},Bn.get=Ts,Bn.gt=$a,Bn.gte=Va,Bn.has=function(e,t){return null!=e&&go(e,t,kr)},Bn.hasIn=ks,Bn.head=qo,Bn.identity=rl,Bn.includes=function(e,t,n,r){e=qa(e)?e:Bs(e),n=n&&!r?fs(n):0;var i=e.length;return n<0&&(n=Kt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Kt(r+i,0)),Wt(e,t,i)},Bn.inRange=function(e,t,n){return t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n){return e>=bn(t,n)&&e<Kt(t,n)}(e=gs(e),t,n)},Bn.invoke=Rs,Bn.isArguments=Wa,Bn.isArray=za,Bn.isArrayBuffer=Ha,Bn.isArrayLike=qa,Bn.isArrayLikeObject=Ga,Bn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Sr(e)==w},Bn.isBuffer=Ka,Bn.isDate=Ya,Bn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&(za(e)||"string"==typeof e||"function"==typeof e.splice||Ka(e)||cs(e)||Wa(e)))return!e.length;var t=mo(e);if(t==S||t==R)return!e.size;if(_o(e))return!Or(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Lr(e,t)},Bn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Lr(e,t,i,n):!!r},Bn.isError=Qa,Bn.isFinite=function(e){return"number"==typeof e&&bt(e)},Bn.isFunction=Xa,Bn.isInteger=Za,Bn.isLength=Ja,Bn.isMap=ns,Bn.isMatch=function(e,t){return e===t||Pr(e,t,uo(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,uo(t),n)},Bn.isNaN=function(e){return rs(e)&&e!=+e},Bn.isNative=function(e){if(Ao(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=rs,Bn.isObject=es,Bn.isObjectLike=ts,Bn.isPlainObject=is,Bn.isRegExp=os,Bn.isSafeInteger=function(e){return Za(e)&&e>=-9007199254740991&&e<=f},Bn.isSet=as,Bn.isString=ss,Bn.isSymbol=ls,Bn.isTypedArray=cs,Bn.isUndefined=function(e){return e===i},Bn.isWeakMap=function(e){return ts(e)&&mo(e)==P},Bn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Sr(e)},Bn.join=function(e,t){return null==e?"":wt.call(e,t)},Bn.kebabCase=zs,Bn.last=Qo,Bn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?Kt(r+o,0):bn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Vt(e,Ht,o,!0)},Bn.lowerCase=Hs,Bn.lowerFirst=qs,Bn.lt=us,Bn.lte=ds,Bn.max=function(e){return e&&e.length?mr(e,rl,Tr):i},Bn.maxBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Tr):i},Bn.mean=function(e){return qt(e,rl)},Bn.meanBy=function(e,t){return qt(e,lo(t,2))},Bn.min=function(e){return e&&e.length?mr(e,rl,Fr):i},Bn.minBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Fr):i},Bn.stubArray=ml,Bn.stubFalse=gl,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=xl,Bn.nth=function(e,t){return e&&e.length?Wr(e,fs(t)):i},Bn.noConflict=function(){return mt._===this&&(mt._=Be),this},Bn.noop=ll,Bn.now=Ta,Bn.pad=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(ft(i),n)+e+zi(pt(i),n)},Bn.padEnd=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?e+zi(t-r,n):e},Bn.padStart=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?zi(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ys(e).replace(ae,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ps(e),t===i?(t=e,e=0):t=ps(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=En();return bn(e+o*(t-e+dt("1e-"+((o+"").length-1))),t)}return Kr(e,t)},Bn.reduce=function(e,t,n){var r=za(e)?jt:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,hr)},Bn.reduceRight=function(e,t,n){var r=za(e)?Ft:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},Bn.repeat=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:fs(t),Yr(ys(e),t)},Bn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var r=-1,o=(t=bi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[jo(t[r])];a===i&&(r=o,a=n),e=Xa(a)?a.call(e):a}return e},Bn.round=El,Bn.runInContext=e,Bn.sample=function(e){return(za(e)?Xn:Xr)(e)},Bn.size=function(e){if(null==e)return 0;if(qa(e))return ss(e)?fn(e):e.length;var t=mo(e);return t==S||t==R?e.size:Or(e).length},Bn.snakeCase=Gs,Bn.some=function(e,t,n){var r=za(e)?Ut:ii;return n&&wo(e,t,n)&&(t=i),r(e,lo(t,3))},Bn.sortedIndex=function(e,t){return oi(e,t)},Bn.sortedIndexBy=function(e,t,n){return ai(e,t,lo(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Ba(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return ai(e,t,lo(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Ba(e[n],t))return n}return-1},Bn.startCase=Ks,Bn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(fs(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Bn.subtract=Al,Bn.sum=function(e){return e&&e.length?Qt(e,rl):0},Bn.sumBy=function(e,t){return e&&e.length?Qt(e,lo(t,2)):0},Bn.template=function(e,t,n){var r=Bn.templateSettings;n&&wo(e,t,n)&&(t=i),e=ys(e),t=xs({},t,r,Zi);var o,a,s=xs({},t.imports,r.imports,Zi),l=Ds(s),c=en(s,l),u=0,d=t.interpolate||Ee,h="__p += '",p=ke((t.escape||Ee).source+"|"+d.source+"|"+(d===ee?fe:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),f="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,l){return r||(r=i),h+=e.slice(u,l).replace(Ae,sn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),h+="';\n";var m=Ne.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(H,""):h).replace(q,"$1").replace(G,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Zs((function(){return _e(l,f+"return "+h).apply(i,c)}));if(g.source=h,Qa(g))throw g;return g},Bn.times=function(e,t){if((e=fs(e))<1||e>f)return[];var n=g,r=bn(e,g);t=lo(t),e-=g;for(var i=Xt(r,t);++n<e;)t(n);return i},Bn.toFinite=ps,Bn.toInteger=fs,Bn.toLength=ms,Bn.toLower=function(e){return ys(e).toLowerCase()},Bn.toNumber=gs,Bn.toSafeInteger=function(e){return e?sr(fs(e),-9007199254740991,f):0===e?e:0},Bn.toString=ys,Bn.toUpper=function(e){return ys(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=ys(e))&&(n||t===i))return Zt(e);if(!e||!(t=ci(t)))return e;var r=mn(e),o=mn(t);return xi(r,nn(r,o),rn(r,o)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var r=mn(e);return xi(r,0,rn(r,mn(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ci(t)))return e;var r=mn(e);return xi(r,nn(r,mn(t))).join("")},Bn.truncate=function(e,t){var n=30,r="...";if(es(t)){var o="separator"in t?t.separator:o;n="length"in t?fs(t.length):n,r="omission"in t?ci(t.omission):r}var a=(e=ys(e)).length;if(ln(e)){var s=mn(e);a=s.length}if(n>=a)return e;var l=n-fn(r);if(l<1)return r;var c=s?xi(s,0,l).join(""):e.slice(0,l);if(o===i)return c+r;if(s&&(l+=c.length-l),os(o)){if(e.slice(l).search(o)){var u,d=c;for(o.global||(o=ke(o.source,ys(me.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(e.indexOf(ci(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Bn.unescape=function(e){return(e=ys(e))&&Q.test(e)?e.replace(K,vn):e},Bn.uniqueId=function(e){var t=++Oe;return ys(e)+t},Bn.upperCase=Ys,Bn.upperFirst=Qs,Bn.each=ya,Bn.eachRight=ba,Bn.first=qo,sl(Bn,function(){var e={};return wr(Bn,(function(t,n){Ne.call(Bn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Bn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),It(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===i?1:Kt(fs(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(rl)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Rr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Na(lo(e)))},zn.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(g)},wr(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Bn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Bn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof zn,c=s[0],u=l||za(t),d=function(e){var t=o.apply(Bn,Ot([e],s));return r&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=a&&!h,m=l&&!p;if(!a&&u){t=m?t:new zn(this);var g=e.apply(t,s);return g.__actions__.push({func:pa,args:[d],thisArg:i}),new Wn(g,h)}return f&&m?e.apply(this,s):(g=this.thru(d),f?r?g.value()[0]:g.value():g)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(za(i)?i:[],e)}return this[n]((function(n){return t.apply(za(n)?n:[],e)}))}})),wr(zn.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";Ne.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Bi(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=za(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=Kt(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,d=u.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return fi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,b=v.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}f[h++]=g}return f},Bn.prototype.at=fa,Bn.prototype.chain=function(){return ha(this)},Bn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=Uo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:pa,args:[ea],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(ea)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Xe&&(Bn.prototype[Xe]=function(){return this}),Bn}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},1399:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1506:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5393).A},1573:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1375).A},1676:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5501).A},1735:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8587),i=n(8168);const o=["values","unit","step"],a=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,l=(0,r.A)(e,o),c=a(t),u=Object.keys(c);function d(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-s/100}${n})`}function p(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-s/100}${n})`}return(0,i.A)({keys:u,values:c,up:d,down:h,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&M(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var o=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(x,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,_=!1,S=null,T=-1,k=5,C=-1;function I(){return!(t.unstable_now()-C<k)}function R(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?A():(_=!1,S=null)}}else _=!1}if("function"===typeof b)A=function(){b(R)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,L=D.port2;D.port1.onmessage=R,A=function(){L.postMessage(null)}}else A=function(){v(R,0)};function P(e){S=e,_||(_=!0,A())}function M(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,M(x,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,P(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1763:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(423);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},1783:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1824:(e,t,n)=>{"use strict";n.d(t,{E:()=>a,A:()=>s});var r=n(9950);const i={};const o=[];class a{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new a}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function s(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(a.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},1927:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},1942:(e,t,n)=>{e.exports=n(3488)()},1960:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},1976:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2529).A},2004:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,A={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:A.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+C(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+C(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},M={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:A};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=A.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},2138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return E(e)||x(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},2183:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},2529:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(1399);const o=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},3488:(e,t,n)=>{"use strict";var r=n(3959);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3539:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>s});var i=n(9950);let o=0;const a=(r||(r=n.t(i,2)))["useId".toString()];function s(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n(`mui-${o}`))}),[t]),r}(e)}},3699:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(5708),i=n(1735),o=n(4033)},3828:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},3876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},3931:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:a}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[a?t:s,r.useCallback((e=>{a||l(e)}),[])]}},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4033:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4168:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,b:()=>s});var r=n(9950),i=n(5537),o=n(4414);const a=r.createContext(void 0);function s(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?(0,i.A)(o.defaultProps,r):o.styleOverrides||o.variants?r:(0,i.A)(o,r)}({props:t,name:n,theme:{components:r.useContext(a)}})}const l=function(e){let{value:t,children:n}=e;return(0,o.jsx)(a.Provider,{value:t,children:n})}},4222:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(5501),i=n(7509),o=n(5060),a=n(9629),s=n(8329);function l(){function e(e,t,n,i){const s={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(h)return h(s);return(0,a.NI)(s,t,(t=>{let n=(0,o.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,d,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:s.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,a.EU)(l.breakpoints),s=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(s=r[n],d=l,"function"===typeof s?s(d):s);var s,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,a.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,a.vf)(s,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4436:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(8168),i=n(8587),o=n(8099),a=n(7483),s=n(8329),l=n(4222),c=n(5708);var u=n(9240);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function E(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function A(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),A=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),_=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),S=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),k=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function C(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:w.text.primary}const I=e=>{let{color:t,name:n,mainShade:i=500,lightShade:a=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?` (${n})`:"",JSON.stringify(t.main)));return E(t,"light",a,s),E(t,"dark",l,s),t.contrastText||(t.contrastText=C(t.main)),t},R={dark:x,light:w};return(0,a.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:I({color:c,name:"primary"}),secondary:I({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:_,name:"error"}),warning:I({color:k,name:"warning"}),info:I({color:S,name:"info"}),success:I({color:T,name:"success"}),grey:h,contrastThreshold:n,getContrastText:C,augmentColor:I,tonalOffset:s},R[t]),l)}const _=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const S={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function k(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=T,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=n,m=(0,i.A)(n,_);const g=s/14,v=f||(e=>e/h*g+"rem"),y=(e,t,n,i,a)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:v(t),lineHeight:n},o===T?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},a,p);var s},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,S),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,S),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,a.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function C(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const I=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(5361);const D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.A)(e,L);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,o.A)(18));const p=A(n),f=(0,c.A)(e);let m=(0,a.A)(f,{mixins:(g=f.breakpoints,v=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:p,shadows:I.slice(),typography:k(p,d),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},D)});var g,v;m=(0,a.A)(m,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return m=b.reduce(((e,t)=>(0,a.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},s.A,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},m}const M=P},4453:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},4501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(s,t))}};t.default=i,e.exports=t.default},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5060:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>a,Yn:()=>o});var r=n(5501),i=n(9629);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function a(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,i.NI)(e,c,(e=>{let i=a(u,l,e);return e===i&&"string"===typeof e&&(i=a(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},5260:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(4222),i=n(8620),o=n(8329)},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5361:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>s});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},a,e.easing),n=(0,i.A)({},s,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=n.standard,easing:s=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof a?a:l(a)} ${s} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},5393:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(5587);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},5433:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore")},5471:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8168),i=n(9950),o=n(9360),a=n(4414);function s(e,t){function n(n,i){return(0,a.jsx)(o.A,(0,r.A)({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return n.muiName=o.A.muiName,i.memo(i.forwardRef(n))}},5501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8099);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},5511:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},5537:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const a=e[o]||{},s=t[o];n[o]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[o]=(0,r.A)({},s),Object.keys(a).forEach((e=>{n[o][e]=i(a[e],s[e])}))):n[o]=s:n[o]=a}else void 0===n[o]&&(n[o]=e[o])})),n}},5587:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},5708:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(7483),a=n(1735);const s={borderRadius:4};var l=n(782);var c=n(4222),u=n(8329),d=n(4033);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,a.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(p);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},s,f)},m);y.applyStyles=d.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return y=w.reduce(((e,t)=>(0,o.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},6204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>E.A,StyledEngineProvider:()=>x,ThemeContext:()=>i.T,css:()=>v.AH,default:()=>A,internal_processStyles:()=>_,keyframes:()=>v.i7});var r=n(8168),i=n(7370),o=n(9015),a=n(6477),s=n(1783),l=n(9950),c=n(7923),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=(0,c.A)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),h=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:h},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,s.SF)(t,n,r),(0,a.s)((function(){return(0,s.sk)(t,n,r)})),null},g=function e(t,n){var a,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(a=n.label,c=n.target);var h=f(t,n,u),g=h||p(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&b.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var x=y.length,E=1;E<x;E++)b.push(y[E],w[E])}var A=(0,i.w)((function(e,t,n){var r=v&&e.as||d,a="",u=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=l.useContext(i.T)}"string"===typeof e.className?a=(0,s.Rk)(t.registered,u,e.className):null!=e.className&&(a=e.className+" ");var w=(0,o.J)(b.concat(u),t.registered,f);a+=t.key+"-"+w.name,void 0!==c&&(a+=" "+c);var x=v&&void 0===h?p(r):g,E={};for(var A in e)v&&"as"===A||x(A)&&(E[A]=e[A]);return E.className=a,n&&(E.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:w,isStringTag:"string"===typeof r}),l.createElement(r,E))}));return A.displayName=void 0!==a?a:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",A.defaultProps=t.defaultProps,A.__emotion_real=A,A.__emotion_base=d,A.__emotion_styles=b,A.__emotion_forwardProp=h,Object.defineProperty(A,"toString",{value:function(){return"."+c}}),A.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:f(A,i,!0)})).apply(void 0,b)},A}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=n(8283),y=n(8603),b=n(4414);let w;function x(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(i.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));var E=n(8219);function A(e,t){return g(e,t)}const _=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},6319:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},6477:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>s,s:()=>a});var i=n(9950),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()},s=o||i.useLayoutEffect},6688:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(9950)),i=n(6204);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},6747:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},6832:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat")},6879:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case u:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case s:return e;default:return t}}case r:return t}}}t.vM=c,t.lD=h,t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===o||e===u||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===s||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)}},6907:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},7034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o,createSvgIcon:()=>a.A,debounce:()=>s.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m.A,unsupportedProp:()=>g,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>b.A,useIsFocusVisible:()=>w.A});var r=n(4501),i=n(1676);const o=n(5511).A;var a=n(5471),s=n(1209);const l=function(e,t){return()=>null};var c=n(3828),u=n(7402),d=n(827);const h=function(e,t){return()=>null};const p=n(5587).A;var f=n(9044),m=n(1014);const g=function(e,t,n,r,i){return null};var v=n(8733),y=n(1976),b=n(1506),w=n(1573);const x={configure:e=>{r.A.configure(e)}}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7355:()=>{},7370:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>d,c:()=>f,h:()=>h,w:()=>u});var r=n(9950),i=n(8603),o=n(1783),a=n(9015),s=n(6477),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},d=r.createContext({});var h={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,s.s)((function(){return(0,o.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e[p],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,a.J)(l,void 0,r.useContext(d));c+=t.key+"-"+u.name;var f={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),r.createElement(r.Fragment,null,r.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof s}),r.createElement(s,f))}))},7402:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6907).A},7483:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>o});var r=n(8168),i=n(9950);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function a(e){if(i.isValidElement(e)||!o(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=a(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((r=>{i.isValidElement(t[r])?l[r]=t[r]:o(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&o(e[r])?l[r]=s(e[r],t[r],n):n.clone?l[r]=o(t[r])?a(t[r]):t[r]:l[r]=t[r]})),l}},7509:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7483);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},7550:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},7785:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(7483)},7813:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")},7923:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},7988:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},8099:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},8154:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment")},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8219:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(9950);var r=n(8283),i=n(4414);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},8283:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>d,mL:()=>c});var r=n(7370),i=n(9950),o=n(1783),a=n(6477),s=n(9015),l=(n(8603),n(3876),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,a=new Array(o);a[0]=r.E,a[1]=(0,r.c)(e,t);for(var s=2;s<o;s++)a[s]=n[s];return i.createElement.apply(null,a)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)((function(e,t){var n=e.styles,l=(0,s.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,a.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,a.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.J)(t)}function d(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8329:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(782),i=n(5060),o=n(7509);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var s=n(9629);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),x=c("outlineColor"),E=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};E.propTypes={},E.filterProps=["borderRadius"];a(u,d,h,p,f,m,g,v,y,b,E,w,x);const A=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};A.propTypes={},A.filterProps=["gap"];const _=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};_.propTypes={},_.filterProps=["columnGap"];const S=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};S.propTypes={},S.filterProps=["rowGap"];a(A,_,S,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function T(e,t){return"grey"===t?t:e}a((0,i.Ay)({prop:"color",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:T}));function k(e){return e<=1&&0!==e?100*e+"%":e}const C=(0,i.Ay)({prop:"width",transform:k}),I=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:k(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};I.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:k}),D=(0,i.Ay)({prop:"height",transform:k}),L=(0,i.Ay)({prop:"maxHeight",transform:k}),P=(0,i.Ay)({prop:"minHeight",transform:k}),M=((0,i.Ay)({prop:"size",cssProperty:"width",transform:k}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:k}),a(C,I,R,D,L,P,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:E},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:A},rowGap:{style:S},columnGap:{style:_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:k},maxWidth:{style:I},minWidth:{transform:k},height:{transform:k},maxHeight:{transform:k},minHeight:{transform:k},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var O,j=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case E:return"Portal";case S:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function oe(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ae=null,_e=null;function Se(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function Te(e){Ae?_e?_e.push(e):_e=[e]:Ae=e}function ke(){if(Ae){var e=Ae,t=_e;if(_e=Ae=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Re=!1;function De(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Ae||null!==_e)&&(Ie(),ke())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Pe=!1}function Ne(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,je=null,Fe=!1,Ue=null,Be={onError:function(e){Oe=!0,je=e}};function $e(e,t,n,r,i,o,a,s,l){Oe=!1,je=null,Ne.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return ze(i),e;if(a===r)return ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,At,_t,St,Tt=!1,kt=[],Ct=null,It=null,Rt=null,Dt=new Map,Lt=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Dt.forEach(Ut),Lt.forEach(Ut)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return $t(t,e)}if(0<kt.length){$t(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&$t(Ct,e),null!==It&&$t(It,e),null!==Rt&&$t(Rt,e),Dt.forEach(t),Lt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Wt=w.ReactCurrentBatchConfig,zt=!0;function Ht(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function qt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Kt,n),Nt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return It=Ot(It,e,t,n,r,i),!0;case"mouseover":return Rt=Ot(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,Ot(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lt.set(o,Ot(Lt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Nt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&zr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=j({},cn,{view:0,detail:0}),hn=on(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(j({},pn,{dataTransfer:0})),gn=on(j({},dn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(j({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Sn(){return _n}var Tn=j({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(Tn),Cn=on(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Dn),Pn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var On=u&&"TextEvent"in window&&!Nn,jn=u&&(!Mn||Nn&&8<Nn&&11>=Nn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),De(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Ar={},_r={};function Sr(e){if(Ar[e])return Ar[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Ar[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Tr=Sr("animationend"),kr=Sr("animationiteration"),Cr=Sr("animationstart"),Ir=Sr("transitionend"),Rr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Mr=Dr[Pr];Lr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(kr,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if($e.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var u=je;Oe=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[$r]){e[$r]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}De((function(){var r=o,i=xe(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case kr:case Cr:l=vn;break;case Ir:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Le(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:wi(l),p=null==c?s:wi(c),(s=new u(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,s,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(zn(s))if(Xn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=$n(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Jt=Zt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Le(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Le(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Le(n,o))&&a.unshift(Hr(n,l,s)):i||null!=(l=Le(n,o))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var Ei=[],Ai=-1;function _i(e){return{current:e}}function Si(e){0>Ai||(e.current=Ei[Ai],Ei[Ai]=null,Ai--)}function Ti(e,t){Ai++,Ei[Ai]=e.current,e.current=t}var ki={},Ci=_i(ki),Ii=_i(!1),Ri=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ii),Si(Ci)}function Mi(e,t,n){if(Ci.current!==ki)throw Error(o(168));Ti(Ci,t),Ti(Ii,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return j({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ri=Ci.current,Ti(Ci,e),Ti(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ni(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Si(Ii),Si(Ci),Ti(Ci,e)):Si(Ii),Ti(Ii,n)}var Fi=null,Ui=!1,Bi=!1;function $i(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Je,Vi),i}finally{bt=t,Bi=!1}}return null}var Wi=[],zi=0,Hi=null,qi=0,Gi=[],Ki=0,Yi=null,Qi=1,Xi="";function Zi(e,t){Wi[zi++]=qi,Wi[zi++]=Hi,Hi=e,qi=t}function Ji(e,t,n){Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Yi=e;var r=Qi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Xi=o+e}else Qi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--zi],Wi[zi]=null,qi=Wi[--zi],Wi[zi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===A?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Nc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case L:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||N(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||N(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),io&&Zi(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Zi(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Zi(i,m),c}function g(i,s,l,c){var u=N(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Zi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return io&&Zi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===A){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===A?((o=Nc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case E:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case L:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(N(a))return g(r,o,a,l);yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=jc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var xo=wo(!0),Eo=wo(!1),Ao=_i(null),_o=null,So=null,To=null;function ko(){To=So=_o=null}function Co(e){var t=Ao.current;Si(Ao),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){_o=e,To=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Do(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===_o)throw Error(o(308));So=e,_o.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Lo=null;function Po(e){null===Lo?Lo=[e]:Lo.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Oo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},qo=_i(Ho),Go=_i(Ho),Ko=_i(Ho);function Yo(e){if(e===Ho)throw Error(o(174));return e}function Qo(e,t){switch(Ti(Ko,t),Ti(Go,e),Ti(qo,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(qo),Ti(qo,t)}function Xo(){Si(qo),Si(Go),Si(Ko)}function Zo(e){Yo(Ko.current);var t=Yo(qo.current),n=le(t,e.type);t!==n&&(Ti(Go,e),Ti(qo,n))}function Jo(e){Go.current===e&&(Si(qo),Si(Go))}var ea=_i(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=w.ReactCurrentDispatcher,oa=w.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function _a(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Oa(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Da(9,Ta.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ia(e)}function ka(e,t,n){return n((function(){Ca(t)&&Ia(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ia(e){var t=No(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function La(){return ba().memoizedState}function Pa(e,t,n,r){var i=ya();sa.flags|=e,i.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Da(t,n,o,r))}sa.flags|=e,i.memoizedState=Da(1|t,n,o,r)}function Na(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Ma(2048,8,e,t)}function ja(e,t){return Ma(4,2,e,t)}function Fa(e,t){return Ma(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Ua.bind(null,t,e),n)}function $a(){}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function qa(){return ba().memoizedState}function Ga(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Qa(t,n);else if(null!==(n=Mo(e,t,n,r))){nc(n,e,r,ec()),Xa(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Qa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Mo(e,t,i,r))&&(nc(n,e,r,i=ec()),Xa(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Qa(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Do,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Do,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Do,useEffect:Na,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ra,useDebugValue:$a,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Na(ka.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Do,useCallback:Va,useContext:Do,useEffect:Oa,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:xa,useRef:La,useState:function(){return xa(wa)},useDebugValue:$a,useDeferredValue:function(e){return za(ba(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:Aa,useSyncExternalStore:_a,useId:qa,unstable_isNewReconciler:!1},ts={readContext:Do,useCallback:Va,useContext:Do,useEffect:Oa,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:Ea,useRef:La,useState:function(){return Ea(wa)},useDebugValue:$a,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:za(t,la.memoizedState,e)},useTransition:function(){return[Ea(wa)[0],ba().memoizedState]},useMutableSource:Aa,useSyncExternalStore:_a,useId:qa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),$o(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),$o(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bo(e,i,r))&&(nc(t,e,r,n),$o(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Do(o):(i=Li(t)?Ri:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Do(o):(o=Li(t)?Ri:Ci.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Hl=r),ds(0,t)},n}function fs(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Eo(t,null,n,r):xo(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ga(e,t,n,r,o,i),n=va(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Pc(o,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function _s(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Pl,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Pl,Ll),Ll|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Li(n)?Ri:Ci.current;return o=Di(t,o),Ro(t,i),n=ga(e,t,n,r,o,i),r=va(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function ks(e,t,n,r,i){if(Li(n)){var o=!0;Oi(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Do(c):c=Di(t,c=Li(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Oo=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ii.current||Oo?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Oo||os(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Do(l):l=Di(t,l=Li(n)?Ri:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),Oo=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var f=t.memoizedState;s!==d||h!==f||Ii.current||Oo?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(c=Oo||os(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,o,i)}function Cs(e,t,n,r,i,o){Ss(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),zs(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Qo(e,t.containerInfo)}function Rs(e,t,n,r,i){return fo(),mo(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Ls,Ps,Ms,Ns={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Nc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ns,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(a=Nc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ns,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,No(e,i),nc(r,e,i,-1))}return mc(),Us(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Qi=e.id,Xi=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pc(r,s):(s=Nc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function $s(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$s(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$s(t,!0,n,null,o);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Li(t.type)&&Pi(),qs(t),null;case 3:return r=t.stateNode,Xo(),Si(Ii),Si(Ci),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ls(e,t),qs(t),null;case 5:Jo(t);var i=Yo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=Yo(qo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Ur(Nr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),J(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Ur(Nr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Ko.current),Yo(qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Si(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Xo(),Ls(e,t),null===e&&Vr(t.stateNode.containerInfo),qs(t),null;case 10:return Co(t.type._context),qs(t),null;case 19:if(Si(ea),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Hs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return qs(t),null}else 2*Xe()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ti(ea,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Li(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Si(Ii),Si(Ci),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Si(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ea),null;case 4:return Xo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(qo.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Qs=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||Js(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){_c(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hl(e,t,n),Qs=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Z(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){_c(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){_c(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||d,ml(t,e),Qs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(f=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Zs=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){_c(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ys;var c=Qs;if(Ys=a,(Qs=l)&&!c)for(Zs=i;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Zs=l):El(i);for(;null!==o;)Zs=o,bl(o,t,n),o=o.sibling;Zs=i,Ys=s,Qs=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):wl(e)}}function wl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&il(t)}catch(p){_c(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function El(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var o=t.return;try{il(t)}catch(l){_c(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){_c(t,a,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Al,_l=Math.ceil,Sl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,kl=w.ReactCurrentBatchConfig,Cl=0,Il=null,Rl=null,Dl=0,Ll=0,Pl=_i(0),Ml=0,Nl=null,Ol=0,jl=0,Fl=0,Ul=null,Bl=null,$l=0,Vl=1/0,Wl=null,zl=!1,Hl=null,ql=null,Gl=!1,Kl=null,Yl=0,Ql=0,Xl=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Zl?Zl:Zl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Dl?Dl&-Dl:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(jl|=n),4===Ml&&sc(e,Dl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Xe()+500,Ui&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Il?Dl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(lc.bind(null,e)):$i(lc.bind(null,e)),ai((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,Jl=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var a=fc();for(Il===e&&Dl===t||(Wl=null,Vl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}ko(),Sl.current=a,Cl=i,null!==Rl?t=0:(Il=null,Dl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Nl,hc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=ft(e))&&(r=a,t=oc(e,a))),1===t))throw n=Nl,hc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Bl,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,Wl),t);break}xc(e,Bl,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,Wl),r);break}xc(e,Bl,Wl);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(o(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Nl,hc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Wl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Xe()+500,Ui&&Vi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Cl=t))&&Vi()}}function dc(){Ll=Pl.current,Si(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xo(),Si(Ii),Si(Ci),ra();break;case 5:Jo(r);break;case 4:Xo();break;case 13:case 19:Si(ea);break;case 10:Co(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Pc(e.current,null),Dl=Ll=t,Ml=0,Nl=null,Fl=jl=Ol=0,Bl=Ul=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(r=(n=Lo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Lo=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(ko(),ia.current=Za,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,Tl.current=null,null===n||null===n.return){Ml=1,Nl=t,Rl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[a]:Ul.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Za,null===e?Za:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Il||0===(268435455&Ol)&&0===(268435455&jl)||sc(Il,Dl)}function gc(e,t){var n=Cl;Cl|=2;var r=fc();for(Il===e&&Dl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(ko(),Cl=n,Sl.current=r,null!==Rl)throw Error(o(261));return Il=null,Dl=0,Ml}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Al(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ll)))return void(Rl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ml=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Kl);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Rl=Il=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,(function(){return Ec(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=kl.transition,kl.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,Tl.current=null,function(e,t){if(ei=zt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),zt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Cl=l,bt=s,kl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Vi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function Ec(){if(null!==Kl){var e=wt(Yl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var p=(d=Zs).sibling,f=d.return;if(ol(d),d===u){Zs=null;break}if(null!==p){p.return=f,Zs=p;break}Zs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){_c(l,l.return,E)}if(l===s){Zs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zs=x;break e}Zs=l.return}}if(Cl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function Ac(e,t,n){e=Bo(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bo(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Dl&n)===n&&(4===Ml||3===Ml&&(130023424&Dl)===Dl&&500>Xe()-$l?hc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=No(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case A:return Nc(n.children,i,a,t);case _:s=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=a,e;case I:return(e=Dc(13,n,t,i)).elementType=I,e.lanes=a,e;case R:return(e=Dc(19,n,t,i)).elementType=R,e.lanes=a,e;case P:return Oc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case k:s=9;break e;case C:s=11;break e;case D:s=14;break e;case L:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Dc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Dc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function $c(e){if(!e)return ki;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ni(e,n,t)}return t}function Vc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=$c(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(i,t,a))&&(nc(e,i,a,o),$o(e,i,a)),a}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fo();break;case 5:Zo(t);break;case 1:Li(t.type)&&Oi(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Ao,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ti(ea,1&ea.current),null!==(e=zs(e,t,n))?e.sibling:null);Ti(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Ji(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ro(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,Oi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=zs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return js(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(Ao,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=zs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Do(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Es(e,t,r,i=ns(r.type,i),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Li(r)?(e=!0,Oi(t)):e=!1,Ro(t,n),as(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return _s(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=zc(a);s.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=zc(a);o.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fi]=a.current,Vr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return zc(a)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(Vl=Xe()+500,Vi()))}break;case 13:uc((function(){var t=No(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},Et=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},At=function(e){if(13===e.tag){var t=tc(e),n=No(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},_t=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));G(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,a,s),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8399:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(6879);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t=`${e}`.match(i);return t&&t[1]||""}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function s(e,t,n){const r=a(t);return e.displayName||(""!==r?`${n}(${r})`:n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return a(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.vM:return s(e,e.render,"ForwardRef");case r.lD:return s(e,e.type,"memo");default:return}}}},8463:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(9950);var r=n(4168);n(4414);function i(e){return(0,r.b)(e)}},8465:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},8603:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function x(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:a,return:""}}function E(e,t){return a(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function A(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function _(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function S(){return u(w,y)}function T(){return y}function k(e,t){return d(w,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return m=g=1,v=h(w=e),y=0,[]}function R(e){return w="",e}function D(e){return s(k(y-1,M(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(b=S())&&b<33;)_();return C(e)>2||C(b)>3?"":" "}function P(e,t){for(;--t&&_()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return k(e,T()+(t<6&&32==S()&&32==_()))}function M(e){for(;_();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&M(b);break;case 40:41===e&&M(e);break;case 92:_()}return y}function N(e,t){for(;_()&&e+b!==57&&(e+b!==84||47!==S()););return"/*"+k(t,y-1)+"*"+o(47===e?e:_())}function O(e){for(;!C(S());)_();return k(e,y)}var j="-ms-",F="-moz-",U="-webkit-",B="comm",$="rule",V="decl",W="@keyframes";function z(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case B:return"";case W:return e.return=e.value+"{"+z(e.children,r)+"}";case $:e.value=e.props.join(",")}return h(n=z(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return R(G("",null,null,null,[""],e=I(e),0,[0],e))}function G(e,t,n,r,i,a,s,d,p){for(var m=0,g=0,v=s,y=0,b=0,w=0,x=1,E=1,k=1,C=0,I="",R=i,M=a,j=r,F=I;E;)switch(w=C,C=_()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(D(C),"&","&\f"),"&\f")&&(k=-1);break}case 34:case 39:case 91:F+=D(C);break;case 9:case 10:case 13:case 32:F+=L(w);break;case 92:F+=P(T()-1,7);continue;case 47:switch(S()){case 42:case 47:f(Y(N(_(),T()),t,n),p);break;default:F+="/"}break;case 123*x:d[m++]=h(F)*k;case 125*x:case 59:case 0:switch(C){case 0:case 125:E=0;case 59+g:-1==k&&(F=l(F,/\f/g,"")),b>0&&h(F)-v&&f(b>32?Q(F+";",r,n,v-1):Q(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(f(j=K(F,t,n,m,g,i,d,I,R=[],M=[],v),a),123===C)if(0===g)G(F,t,j,j,R,a,v,d,M);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:G(e,j,j,r&&f(K(e,j,j,0,0,i,d,I,i,R=[],v),M),i,M,v,d,r?R:M);break;default:G(F,j,j,j,[""],M,0,d,M)}}m=g=b=0,x=k=1,I=F="",v=s;break;case 58:v=1+h(F),b=w;default:if(x<1)if(123==C)--x;else if(125==C&&0==x++&&125==A())continue;switch(F+=o(C),C*x){case 38:k=g>0?1:(F+="\f",-1);break;case 44:d[m++]=(h(F)-1)*k,k=1;break;case 64:45===S()&&(F+=D(_())),y=S(),g=v=h(I=F+=O(T())),C++;break;case 45:45===w&&2==h(F)&&(x=0)}}return a}function K(e,t,n,r,o,a,c,u,h,f,m){for(var g=o-1,v=0===o?a:[""],y=p(v),b=0,w=0,E=0;b<r;++b)for(var A=0,_=d(e,g+1,g=i(w=c[b])),S=e;A<y;++A)(S=s(w>0?v[A]+" "+_:l(_,/&\f/g,v[A])))&&(h[E++]=S);return x(e,t,n,0===o?$:u,h,f,m)}function Y(e,t,n){return x(e,t,n,B,o(b),d(e,2,-2),0)}function Q(e,t,n,r){return x(e,t,n,V,d(e,0,r),d(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,i=0;r=i,i=S(),38===r&&12===i&&(t[n]=1),!C(i);)_();return k(e,y)},Z=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=X(y-1,t,n);break;case 2:e[n]+=D(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=_());return e}(I(e),t))},J=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||J.get(n))&&!r){J.set(e,!0);for(var i=[],o=Z(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+F+e+j+e+e;case 6828:case 4268:return U+e+j+e+e;case 6165:return U+e+j+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+j+"flex-$1$2")+e;case 5443:return U+e+j+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+j+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+j+l(e,"shrink","negative")+e;case 5292:return U+e+j+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+j+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+j+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+j+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case W:return z([E(e,{value:l(e.value,"@","@"+U)})],r);case $:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return z([E(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return z([E(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),E(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),E(e,{props:[l(t,/:(plac\w+)/,j+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,o,a=e.stylisPlugins||re,s={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,d=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(a,d));o=function(e,t,n,r){c=n,z(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return f.sheet.hydrate(l),f}},8620:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(7483),a=n(8329);const s=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:a.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,s),{systemProps:a,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[a,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},a,e):a}:(0,r.A)({},a,t),(0,r.A)({},c,{sx:u})}},8635:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6907);function i(e){return(0,r.A)(e).defaultView||window}},8733:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3931).A},9015:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(7923),o=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)f={name:s.name,styles:s.styles,next:f},s=s.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var a in n){var s=n[a];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?r+=a+"{"+t[l]+"}":c(l)&&(r+=u(a)+":"+d(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&o)throw new Error(h);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var f=p(e,t,s);switch(a){case"animation":case"animationName":r+=u(a)+":"+f+";";break;default:r+=a+"{"+f+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(r+=u(a)+":"+d(a,s[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";f=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=p(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=p(n,t,e[a]),r)i+=o[a]}m.lastIndex=0;for(var s,l="";null!==(s=m.exec(i));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:f}}},9044:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1399).A},9234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(8099)},9240:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.tL=g,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(9234)),o=r(n(9344));function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function s(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(s(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),u({type:s,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):m(e,t)}},9254:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var r=n(9634),i=n(195),o=n(7550),a=n(9608);const s=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:a.A})},9344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6747)},9360:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(8168),i=n(8587),o=n(9950),a=n(2004),s=n(8465),l=n(1676),c=n(8463),u=n(9254),d=n(1763),h=n(423);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(4414);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.A)(n.color)}`],t[`fontSize${(0,l.A)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,a,s,l,c,u,d,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),v=o.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:x,viewBox:E="0 0 24 24"}=n,A=(0,i.A)(n,m),_=o.isValidElement(u)&&"svg"===u.type,S=(0,r.A)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:E,hasSvgAsChild:_}),T={};w||(T.viewBox=E);const k=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.A)(t)}`,`fontSize${(0,l.A)(n)}`]};return(0,s.A)(i,p,r)})(S);return(0,f.jsxs)(g,(0,r.A)({as:v,className:(0,a.A)(k.root,d),focusable:"false",color:b,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},T,A,_&&u.props,{ownerState:S,children:[_?u.props.children:u,x?(0,f.jsx)("title",{children:x}):null]}))}));v.muiName="SvgIcon";const y=v},9526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7034)},9608:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1960);const i=e=>(0,r.A)(e)&&"classes"!==e},9629:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>a,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(7483);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`};function a(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=s(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),a)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}},9634:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:p,skipVariantsResolver:m,skipSx:w,overridesResolver:x=y(g(p))}=c,E=(0,o.default)(c,h),A=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,_=w||!1;let S=f;"Root"===p||"root"===p?S=r:p?S=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(S=void 0);const T=(0,a.default)(e,(0,i.default)({shouldForwardProp:S,label:undefined},E)),k=e=>"function"===typeof e&&e.__emotion_real!==e||(0,s.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,C=function(r){let o=k(r);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];const c=s?s.map(k):[];d&&x&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,a={};return Object.entries(o).forEach((t=>{let[n,o]=t;a[n]=b(o,(0,i.default)({},e,{theme:r}))})),x(e,a)})),d&&!A&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),_||c.push(u);const h=c.length-s.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=T(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return T.withConfig&&(C.withConfig=T.withConfig),C}};var i=r(n(4634)),o=r(n(4893)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6204)),s=n(7785),l=(r(n(304)),r(n(8399)),r(n(3699))),c=r(n(5260));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const a="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(a))return a.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(a&&"object"===typeof a&&Array.isArray(a.variants)){const{variants:e=[]}=a;let t=(0,o.default)(a,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return a}},9693:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e,t=n(9950),r=n.t(t,2),i=n(1352);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ok){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,p=l.history,f=e.Pop,m=null,g=v();function v(){return(p.state||{idx:null}).idx}function y(){f=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:f,location:w.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(o({},p.state,{idx:g}),""));let w={get action(){return f},get location(){return t(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(a,y),m=e,()=>{l.removeEventListener(a,y),m=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=u(w.location,t,n);r&&r(i,t),g=v()+1;let o=c(i,g),a=w.createHref(i);try{p.pushState(o,"",a)}catch(WE){if(WE instanceof DOMException&&"DataCloneError"===WE.name)throw WE;l.location.assign(a)}h&&m&&m({action:f,location:w.location,delta:1})},replace:function(t,n){f=e.Replace;let i=u(w.location,t,n);r&&r(i,t),g=v();let o=c(i,g),a=w.createHref(i);p.replaceState(o,"",a),h&&m&&m({action:f,location:w.location,delta:0})},go:e=>p.go(e)};return w}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=R(("string"===typeof t?h(t):t).pathname||"/",n);if(null==i)return null;let o=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=I(i);a=k(o[s],e,r)}return a}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=N([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:T(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=y(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,x=2,E=1,A=10,_=-2,S=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(S)&&(r+=_),t&&(r+=x),n.filter((e=>!S(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?E:A)),r)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:N([o,u.pathname]),pathnameBase:O(N([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=N([o,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(WE){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+WE+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=h(e):(i=o({},e),s(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let a,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)a=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:F(i)}}(i,a),d=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!p||(u.pathname+="/"),u}const N=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const W=t.createContext(null);const z=t.createContext(null);const H=t.createContext(null);const q=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const K=t.createContext(null);function Y(){return null!=t.useContext(q)}function Q(){return Y()||s(!1),t.useContext(q).location}function X(e){t.useContext(H).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=ce(se.UseNavigateStable),n=de(le.UseNavigateStable),r=t.useRef(!1);return X((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},i)))}),[e,n])}():function(){Y()||s(!1);let e=t.useContext(W),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:o}=t.useContext(G),{pathname:a}=Q(),l=JSON.stringify(P(o,r.v7_relativeSplatPath)),c=t.useRef(!1);return X((()=>{c.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let o=M(t,JSON.parse(l),a,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:N([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[n,i,l,a,e])}()}function J(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(H),{matches:o}=t.useContext(G),{pathname:a}=Q(),s=JSON.stringify(P(o,i.v7_relativeSplatPath));return t.useMemo((()=>M(e,JSON.parse(s),a,"path"===r)),[e,s,a,r])}function te(n,r,i,o){Y()||s(!1);let{navigator:a,static:l}=t.useContext(H),{matches:c}=t.useContext(G),u=c[c.length-1],d=u?u.params:{},p=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let f,g=Q();if(r){var v;let e="string"===typeof r?h(r):r;"/"===p||(null==(v=e.pathname)?void 0:v.startsWith(p))||s(!1),f=e}else f=g;let y=f.pathname||"/",b=y;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!l&&i&&i.matches&&i.matches.length>0?i.matches:m(n,{pathname:b});let x=ae(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:N([p,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:N([p,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,i,o);return r&&x?t.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},x):x}function ne(){let e=function(){var e;let n=t.useContext(K),r=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(W);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},i)}function ae(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(o=r)?void 0:o.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,i,o)=>{let a,s=!1,h=null,p=null;var f;r&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||re,u&&(d<0&&0===o?(f="route-fallback",!1||he[f]||(he[f]=!0),s=!0,p=null):d===o&&(s=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,o+1)),g=()=>{let n;return n=a?h:s?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(oe,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(W);return n||s(!1),n}function ue(e){let n=t.useContext(z);return n||s(!1),n}function de(e){let n=function(){let e=t.useContext(G);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function fe(e){let{to:n,replace:r,state:i,relative:o}=e;Y()||s(!1);let{future:a,static:l}=t.useContext(H),{matches:c}=t.useContext(G),{pathname:u}=Q(),d=Z(),h=M(n,P(c,a.v7_relativeSplatPath),u,"path"===o),p=JSON.stringify(h);return t.useEffect((()=>d(JSON.parse(p),{replace:r,state:i,relative:o})),[d,p,o,r,i]),null}function me(e){s(!1)}function ge(n){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:l,static:c=!1,future:u}=n;Y()&&s(!1);let d=r.replace(/^\/*/,"/"),p=t.useMemo((()=>({basename:d,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},u)})),[d,u,l,c]);"string"===typeof o&&(o=h(o));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=o,b=t.useMemo((()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:a}}),[d,f,m,g,v,y,a]);return null==b?null:t.createElement(H.Provider,{value:p},t.createElement(q.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise((()=>{}));t.Component;function ye(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ye(e.props.children,o));e.type!==me&&s(!1),e.props.index&&e.props.children&&s(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,o)),r.push(a)})),r}var be=n(7119),we=n.t(be,2);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ok){}new Map;const _e=r.startTransition;we.flushSync,r.useId;function Se(e){let{basename:n,children:r,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,s)));let l=a.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=t.useCallback((e=>{f&&_e?_e((()=>h(e))):h(e)}),[h,f]);return t.useLayoutEffect((()=>l.listen(m)),[l,m]),t.useEffect((()=>pe(i)),[i]),t.createElement(ge,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=t.forwardRef((function(e,n){let r,{onClick:i,relative:o,reloadDocument:a,replace:l,state:c,target:u,to:h,preventScrollReset:p,viewTransition:f}=e,m=Ee(e,Ae),{basename:g}=t.useContext(H),v=!1;if("string"===typeof h&&ke.test(h)&&(r=h,Te))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(ok){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||s(!1);let{basename:i,navigator:o}=t.useContext(H),{hash:a,pathname:l,search:c}=ee(e,{relative:r}),u=l;return"/"!==i&&(u="/"===l?i:N([i,l])),o.createHref({pathname:u,search:c,hash:a})}(h,{relative:o}),b=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===n?{}:n,c=Z(),u=Q(),h=ee(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:d(u)===d(h);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}}),[u,c,h,i,o,r,e,a,s,l])}(h,{replace:l,state:c,target:u,preventScrollReset:p,relative:o,viewTransition:f});return t.createElement("a",xe({},m,{href:r||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Ie,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var De=n(8168),Le=n(8587),Pe=n(2004),Me=n(6204),Ne=n(4222),Oe=n(8620),je=n(5708),Fe=n(7370);const Ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Fe.T);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},Be=(0,je.A)();const $e=function(){return Ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be)};var Ve=n(4414);const We=["className","component"];var ze=n(4501),He=n(4436),qe=n(7550),Ge=n(1763);const Ke=(0,Ge.A)("MuiBox",["root"]),Ye=(0,He.A)(),Qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:o}=e,a=(0,Me.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ne.A),s=t.forwardRef((function(e,t){const s=$e(r),l=(0,Oe.A)(e),{className:c,component:u="div"}=l,d=(0,Le.A)(l,We);return(0,Ve.jsx)(a,(0,De.A)({as:u,ref:t,className:(0,Pe.A)(c,o?o(i):i),theme:n&&s[n]||s},d))}));return s}({themeId:qe.A,defaultTheme:Ye,defaultClassName:Ke.root,generateClassName:ze.A.generate}),Xe=Qe;var Ze=n(8463),Je=n(8219);const et=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=$e(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Ve.jsx)(Je.A,{styles:o})};var tt=n(195);const nt=function(e){return(0,Ve.jsx)(et,(0,De.A)({},e,{defaultTheme:tt.A,themeId:qe.A}))},rt=(e,t)=>(0,De.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),it=e=>(0,De.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const ot=function(e){const n=(0,Ze.b)({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=n;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(nt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var o;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,De.A)({html:rt(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,De.A)({margin:0},it(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(e,i)}),r]})},at=!1,st=!1,lt="${JSCORE_VERSION}",ct=function(e,t){if(!e)throw ut(t)},ut=function(e){return new Error("Firebase Database ("+lt+") INTERNAL ASSERT FAILED: "+e)},dt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new pt;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ft=function(e){const t=dt(e);return ht.encodeByteArray(t,!0)},mt=function(e){return ft(e).replace(/\./g,"")},gt=function(e){try{return ht.decodeString(e,!0)}catch(ok){console.error("base64Decode failed: ",ok)}return null};function vt(e){return yt(void 0,e)}function yt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=yt(e[n],t[n]));return e}const bt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wt=()=>{try{return bt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ok){return}const t=e&&gt(e[1]);return t&&JSON.parse(t)})()}catch(ok){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ok}`)}},xt=e=>{var t,n;return null===(n=null===(t=wt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Et=e=>{const t=xt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},At=()=>{var e;return null===(e=wt())||void 0===e?void 0:e.config},_t=e=>{var t;return null===(t=wt())||void 0===t?void 0:t[`_${e}`]};class St{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Tt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mt(JSON.stringify({alg:"none",type:"JWT"})),mt(JSON.stringify(o)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function It(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Rt(){return!0===at||!0===st}function Dt(){return!function(){var e;const t=null===(e=wt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ok){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lt(){try{return"object"===typeof indexedDB}catch(ok){return!1}}function Pt(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(WE){t(WE)}}))}class Mt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}}class Nt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Ot,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Mt(n,o,t)}}const Ot=/\{\$([^}]+)}/g;function jt(e){return JSON.parse(e)}function Ft(e){return JSON.stringify(e)}const Ut=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=jt(gt(o[0])||""),n=jt(gt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(ok){}return{header:t,claims:n,data:r,signature:i}};function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $t(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Vt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Wt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function zt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Ht(n)&&Ht(o)){if(!zt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ht(e){return null!==e&&"object"===typeof e}function qt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Gt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Kt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Yt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(s^l),i=1518500249):(r=a^s^l,i=1859775393):u<60?(r=a&s|l&(a|s),i=2400959708):(r=a^s^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=s,s=4294967295&(a<<30|a>>>2),a=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Qt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xt),void 0===r.error&&(r.error=Xt),void 0===r.complete&&(r.complete=Xt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(ok){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(ok){"undefined"!==typeof console&&console.error&&console.error(ok)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xt(){}function Zt(e,t){return`${e} failed: ${t} argument `}const Jt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function en(e){return e&&e._delegate?e._delegate:e}class tn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const nn="[DEFAULT]";class rn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new St;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(ok){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ok){if(r)return null;throw ok}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:nn})}catch(ok){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(ok){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(h1){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:on(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(h1){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.component?this.component.multipleInstances?e:nn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function on(e){return e===nn?void 0:e}class an{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const sn=[];var ln;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ln||(ln={}));const cn={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},un=ln.INFO,dn={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},hn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=dn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class pn{constructor(e){this.name=e,this._logLevel=un,this._logHandler=hn,this._userLogHandler=null,sn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?cn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...t),this._logHandler(this,ln.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...t),this._logHandler(this,ln.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.INFO,...t),this._logHandler(this,ln.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.WARN,...t),this._logHandler(this,ln.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...t),this._logHandler(this,ln.ERROR,...t)}}let fn,mn;const gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,bn=new WeakMap,wn=new WeakMap;let xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||yn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function En(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(mn||(mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Sn(this),n),_n(gn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _n(e.apply(Sn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Sn(this),t,...r);return yn.set(o,t.sort?t.sort():[t]),_n(o)}}function An(e){return"function"===typeof e?En(e):(e instanceof IDBTransaction&&function(e){if(vn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));vn.set(e,t)}(e),t=e,(fn||(fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,xn):e);var t}function _n(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(_n(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&gn.set(t,e)})).catch((()=>{})),wn.set(t,e),t}(e);if(bn.has(e))return bn.get(e);const t=An(e);return t!==e&&(bn.set(e,t),wn.set(t,e)),t}const Sn=e=>wn.get(e);function Tn(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=_n(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(_n(a.result),e.oldVersion,e.newVersion,_n(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const kn=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],In=new Map;function Rn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(In.get(t))return In.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Cn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!kn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return In.set(t,o),o}xn=(e=>({...e,get:(t,n,r)=>Rn(t,n)||e.get(t,n,r),has:(t,n)=>!!Rn(t,n)||e.has(t,n)}))(xn);class Dn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ln="@firebase/app",Pn="0.11.4",Mn=new pn("@firebase/app"),Nn="@firebase/app-compat",On="@firebase/analytics-compat",jn="@firebase/analytics",Fn="@firebase/app-check-compat",Un="@firebase/app-check",Bn="@firebase/auth",$n="@firebase/auth-compat",Vn="@firebase/database",Wn="@firebase/data-connect",zn="@firebase/database-compat",Hn="@firebase/functions",qn="@firebase/functions-compat",Gn="@firebase/installations",Kn="@firebase/installations-compat",Yn="@firebase/messaging",Qn="@firebase/messaging-compat",Xn="@firebase/performance",Zn="@firebase/performance-compat",Jn="@firebase/remote-config",er="@firebase/remote-config-compat",tr="@firebase/storage",nr="@firebase/storage-compat",rr="@firebase/firestore",ir="@firebase/vertexai",or="@firebase/firestore-compat",ar="firebase",sr="[DEFAULT]",lr={[Ln]:"fire-core",[Nn]:"fire-core-compat",[jn]:"fire-analytics",[On]:"fire-analytics-compat",[Un]:"fire-app-check",[Fn]:"fire-app-check-compat",[Bn]:"fire-auth",[$n]:"fire-auth-compat",[Vn]:"fire-rtdb",[Wn]:"fire-data-connect",[zn]:"fire-rtdb-compat",[Hn]:"fire-fn",[qn]:"fire-fn-compat",[Gn]:"fire-iid",[Kn]:"fire-iid-compat",[Yn]:"fire-fcm",[Qn]:"fire-fcm-compat",[Xn]:"fire-perf",[Zn]:"fire-perf-compat",[Jn]:"fire-rc",[er]:"fire-rc-compat",[tr]:"fire-gcs",[nr]:"fire-gcs-compat",[rr]:"fire-fst",[or]:"fire-fst-compat",[ir]:"fire-vertex","fire-js":"fire-js",[ar]:"fire-js-all"},cr=new Map,ur=new Map,dr=new Map;function hr(e,t){try{e.container.addComponent(t)}catch(ok){Mn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,ok)}}function pr(e){const t=e.name;if(dr.has(t))return Mn.debug(`There were multiple attempts to register component ${t}.`),!1;dr.set(t,e);for(const n of cr.values())hr(n,e);for(const n of ur.values())hr(n,e);return!0}function fr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const gr=new Nt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const yr="11.6.0";function br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:sr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw gr.create("bad-app-name",{appName:String(i)});if(n||(n=At()),!n)throw gr.create("no-options");const o=cr.get(i);if(o){if(zt(n,o.options)&&zt(r,o.config))return o;throw gr.create("duplicate-app",{appName:i})}const a=new an(i);for(const l of dr.values())a.addComponent(l);const s=new vr(n,r,a);return cr.set(i,s),s}function wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;const t=cr.get(e);if(!t&&e===sr&&At())return br();if(!t)throw gr.create("no-app",{appName:e});return t}function xr(e,t,n){var r;let i=null!==(r=lr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Mn.warn(e.join(" "))}pr(new tn(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Er="firebase-heartbeat-store";let Ar=null;function _r(){return Ar||(Ar=Tn("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Er)}catch(ok){console.warn(ok)}}}).catch((e=>{throw gr.create("idb-open",{originalErrorMessage:e.message})}))),Ar}async function Sr(e,t){try{const n=(await _r()).transaction(Er,"readwrite"),r=n.objectStore(Er);await r.put(t,Tr(e)),await n.done}catch(ok){if(ok instanceof Mt)Mn.warn(ok.message);else{const t=gr.create("idb-set",{originalErrorMessage:null===ok||void 0===ok?void 0:ok.message});Mn.warn(t.message)}}}function Tr(e){return`${e.name}!${e.options.appId}`}class kr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ir(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(ok){Mn.warn(ok)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Cr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Rr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Rr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=mt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(ok){return Mn.warn(ok),""}}}function Cr(){return(new Date).toISOString().substring(0,10)}class Ir{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Lt()&&Pt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await _r()).transaction(Er),n=await t.objectStore(Er).get(Tr(e));return await t.done,n}catch(ok){if(ok instanceof Mt)Mn.warn(ok.message);else{const t=gr.create("idb-get",{originalErrorMessage:null===ok||void 0===ok?void 0:ok.message});Mn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Sr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Sr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Rr(e){return mt(JSON.stringify({version:2,heartbeats:e})).length}var Dr;Dr="",pr(new tn("platform-logger",(e=>new Dn(e)),"PRIVATE")),pr(new tn("heartbeat",(e=>new kr(e)),"PRIVATE")),xr(Ln,Pn,Dr),xr(Ln,Pn,"esm2017"),xr("fire-js","");xr("firebase","11.6.0","app");function Lr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Pr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mr=Pr,Nr=new Nt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Or=new pn("@firebase/auth");function jr(e){if(Or.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Or.error(`Auth (${yr}): ${e}`,...n)}}function Fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vr(e,...n)}function Ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vr(e,...n)}function Br(e,t,n){const r=Object.assign(Object.assign({},Mr()),{[t]:n});return new Nt("auth","Firebase",r).create(t,{appName:e.name})}function $r(e){return Br(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Nr.create(e,...n)}function Wr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vr(t,...r)}}function zr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jr(t),new Error(t)}function Hr(e,t){e||zr(t)}function qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gr(){return"http:"===Kr()||"https:"===Kr()}function Kr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Yr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Qr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ct()||It()}get(){return Yr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xr(e,t){Hr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Zr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ei=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ti=new Qr(3e4,6e4);function ni(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ri(e,t,n,r){return ii(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=qt(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Zr.fetch()(await ai(e,e.config.apiHost,n,a),l)}))}async function ii(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jr),t);try{const t=new li(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ci(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ci(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ci(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ci(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Br(e,s,a);Fr(e,s)}}catch(ok){if(ok instanceof Mt)throw ok;Fr(e,"network-request-failed",{message:String(ok)})}}async function oi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await ri(e,t,n,r,i);return"mfaPendingCredential"in o&&Fr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function ai(e,t,n,r){const i=`${t}${n}?${r}`,o=e,a=o.config.emulator?Xr(e.config,i):`${e.config.apiScheme}://${i}`;if(ei.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function si(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class li{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ur(this.auth,"network-request-failed"))),ti.get())}))}}function ci(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ur(e,t,r);return i.customData._tokenResponse=n,i}function ui(e){return void 0!==e&&void 0!==e.enterprise}class di{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return si(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hi(e,t){return ri(e,"GET","/v2/recaptchaConfig",ni(e,t))}async function pi(e,t){return ri(e,"POST","/v1/accounts:lookup",t)}function fi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(ok){}}function mi(e){return 1e3*Number(e)}function gi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return jr("JWT malformed, contained fewer than 3 sections"),null;try{const e=gt(n);return e?JSON.parse(e):(jr("Failed to decode base64 JWT payload"),null)}catch(ok){return jr("Caught error parsing JWT payload as JSON",null===ok||void 0===ok?void 0:ok.toString()),null}}function vi(e){const t=gi(e);return Wr(t,"internal-error"),Wr("undefined"!==typeof t.exp,"internal-error"),Wr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function yi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(ok){throw ok instanceof Mt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(ok)&&e.auth.currentUser===e&&await e.auth.signOut(),ok}}class bi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(ok){return void("auth/network-request-failed"===(null===ok||void 0===ok?void 0:ok.code)&&this.schedule(!0))}this.schedule()}}class wi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yi(e,pi(n,{idToken:r}));Wr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Ei(o.providerUserInfo):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new wi(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Ei(e){return e.map((e=>{var{providerId:t}=e,n=Lr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wr(e.idToken,"internal-error"),Wr("undefined"!==typeof e.idToken,"internal-error"),Wr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):vi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wr(0!==e.length,"internal-error");const t=vi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Wr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ii(e,{},(async()=>{const n=qt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await ai(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zr.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Ai;return n&&(Wr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Wr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Wr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return zr("not implemented")}}function _i(e,t){Wr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Si{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Lr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yi(this,this.stsTokenManager.getToken(this.auth,e));return Wr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=en(e),r=await n.getIdToken(t),i=gi(r);Wr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:fi(mi(i.auth_time)),issuedAtTime:fi(mi(i.iat)),expirationTime:fi(mi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=en(e);await xi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await xi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await yi(this,async function(e,t){return ri(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:E}=t;Wr(y&&E,e,"internal-error");const A=Ai.fromJSON(this.name,E);Wr("string"===typeof y,e,"internal-error"),_i(u,e.name),_i(d,e.name),Wr("boolean"===typeof b,e,"internal-error"),Wr("boolean"===typeof w,e,"internal-error"),_i(h,e.name),_i(p,e.name),_i(f,e.name),_i(m,e.name),_i(g,e.name),_i(v,e.name);const _=new Si({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:A,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(_.providerData=x.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ai;r.updateFromServerResponse(t);const i=new Si({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await xi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Wr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ei(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Ai;a.updateFromIdToken(n);const s=new Si({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new wi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const Ti=new Map;function ki(e){Hr(e instanceof Function,"Expected a class definition");let t=Ti.get(e);return t?(Hr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ti.set(e,t),t)}class Ci{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ci.type="NONE";const Ii=Ci;function Ri(e,t,n){return`firebase:${e}:${t}:${n}`}class Di{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ri(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ri("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await pi(this.auth,{idToken:e}).catch((()=>{}));return t?Si._fromGetAccountInfoResponse(this.auth,t,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Di(ki(Ii),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ki(Ii);const o=Ri(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){let n;if("string"===typeof t){const r=await pi(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Si._fromGetAccountInfoResponse(e,r,t)}else n=Si._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(h1){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(h1){}}))),new Di(i,e,n)):new Di(i,e,n)}}function Li(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Oi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fi(t))return"Blackberry";if(Ui(t))return"Webos";if(Mi(t))return"Safari";if((t.includes("chrome/")||Ni(t))&&!t.includes("edge/"))return"Chrome";if(ji(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(e)}function Mi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(e)}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(e)}function ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(e)}function Fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(e)}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(e)}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $i(){return function(){const e=kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return Bi(e)||ji(e)||Ui(e)||Fi(e)||/windows phone/i.test(e)||Oi(e)}function Wi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Li(kt());break;case"Worker":t=`${Li(kt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${yr}/${r}`}class zi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(ok){r(ok)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(ok){t.reverse();for(const n of t)try{n()}catch(Gk){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===ok||void 0===ok?void 0:ok.message})}}}class Hi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new zi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Di.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(ok){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pi(this,{idToken:e}),n=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(ok){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(ok)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(ok){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xi(e)}catch(ok){if("auth/network-request-failed"!==(null===ok||void 0===ok?void 0:ok.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject($r(this));const t=e?en(e):null;return t&&Wr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Wr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return mr(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject($r(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ki(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ri(e,"GET","/v2/passwordPolicy",ni(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Hi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ri(e,"POST","/v2/accounts:revokeToken",ni(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;Wr(t,this,"argument-error"),this.redirectPersistenceManager=await Di.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wr(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Or.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Or.warn(`Auth (${yr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Gi(e){return en(e)}class Ki{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Qt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qi(e){return Yi.loadJS(e)}function Xi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Zi{constructor(){this.enterprise=new Ji}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ji{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eo="NO_RECAPTCHA";class to{constructor(e){this.type="recaptcha-enterprise",this.auth=Gi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ui(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(eo)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Zi).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{hi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new di(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ui(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Yi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Qi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function no(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new to(e);let a;if(i)a=eo;else try{a=await o.verify(n)}catch(WE){a=await o.verify(n,!0)}const s=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function ro(e,t,n,r,i){var o,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await no(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await no(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await no(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await no(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await no(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function io(e){const t=Gi(e),n=await hi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new di(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new to(t).verify()}}function oo(e,t,n){const r=Gi(e);Wr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=ao(t),{host:a,port:s}=function(e){const t=ao(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:so(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:so(t)}}}(t),l={url:`${o}//${a}${null===s?"":`:${s}`}/`},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Wr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Wr(zt(l,r.config.emulator)&&zt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ao(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function so(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class lo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}async function co(e,t){return ri(e,"POST","/v1/accounts:signUp",t)}async function uo(e,t){return oi(e,"POST","/v1/accounts:signInWithPassword",ni(e,t))}async function ho(e,t){return ri(e,"POST","/v1/accounts:sendOobCode",ni(e,t))}async function po(e,t){return ho(e,t)}class fo extends lo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fo(e,t,"password")}static _fromEmailAndCode(e,t){return new fo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ro(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",uo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return oi(e,"POST","/v1/accounts:signInWithEmailLink",ni(e,t))}(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ro(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",co,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return oi(e,"POST","/v1/accounts:signInWithEmailLink",ni(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mo(e,t){return oi(e,"POST","/v1/accounts:signInWithIdp",ni(e,t))}class go extends lo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Lr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new go(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return mo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qt(t)}return e}}async function vo(e,t){return ri(e,"POST","/v1/accounts:sendVerificationCode",ni(e,t))}const yo={USER_NOT_FOUND:"user-not-found"};class bo extends lo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new bo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new bo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return oi(e,"POST","/v1/accounts:signInWithPhoneNumber",ni(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await oi(e,"POST","/v1/accounts:signInWithPhoneNumber",ni(e,t));if(n.temporaryProof)throw ci(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return oi(e,"POST","/v1/accounts:signInWithPhoneNumber",ni(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),yo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new bo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class wo{constructor(e){var t,n,r,i,o,a;const s=Gt(Kt(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Wr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Gt(Kt(e)).link,n=t?Gt(Kt(t)).deep_link_id:null,r=Gt(Kt(e)).deep_link_id;return(r?Gt(Kt(r)).link:null)||r||n||t||e}(e);try{return new wo(t)}catch(h1){return null}}}class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,t){return fo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=wo.parseLink(t);return Wr(n,"argument-error"),fo._fromEmailAndCode(e,n.code,n.tenantId)}}xo.PROVIDER_ID="password",xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ao extends Eo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _o extends Ao{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _o.credential(t.oauthAccessToken)}catch(h1){return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com",_o.PROVIDER_ID="facebook.com";class So extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return go._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return So.credential(n,r)}catch(h1){return null}}}So.GOOGLE_SIGN_IN_METHOD="google.com",So.PROVIDER_ID="google.com";class To extends Ao{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch(h1){return null}}}To.GITHUB_SIGN_IN_METHOD="github.com",To.PROVIDER_ID="github.com";class ko extends Ao{constructor(){super("twitter.com")}static credential(e,t){return go._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ko.credential(n,r)}catch(h1){return null}}}async function Co(e,t){return oi(e,"POST","/v1/accounts:signUp",ni(e,t))}ko.TWITTER_SIGN_IN_METHOD="twitter.com",ko.PROVIDER_ID="twitter.com";class Io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Si._fromIdTokenResponse(e,n,r),o=Ro(n);return new Io({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ro(n);return new Io({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ro(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Do extends Mt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Do(e,t,n,r)}}function Lo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Do._fromErrorAndOperation(e,n,t,r);throw n}))}async function Po(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await yi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Io._forOperation(e,"link",r)}async function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(mr(r.app))return Promise.reject($r(r));const i="reauthenticate";try{const o=await yi(e,Lo(r,i,t,e),n);Wr(o.idToken,r,"internal-error");const a=gi(o.idToken);Wr(a,r,"internal-error");const{sub:s}=a;return Wr(e.uid===s,r,"user-mismatch"),Io._forOperation(e,i,o)}catch(ok){throw"auth/user-not-found"===(null===ok||void 0===ok?void 0:ok.code)&&Fr(r,"user-mismatch"),ok}}async function No(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(mr(e.app))return Promise.reject($r(e));const r="signIn",i=await Lo(e,r,t),o=await Io._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Oo(e,t){return No(Gi(e),t)}async function jo(e,t){return Mo(en(e),t)}function Fo(e,t,n){var r;Wr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Wr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Wr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Wr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Wr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Uo(e){const t=Gi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bo(e,t){const n=en(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Fo(n.auth,r,t);const{email:i}=await async function(e,t){return ho(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function $o(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=en(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await yi(i,async function(e,t){return ri(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const s=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));s&&(s.displayName=i.displayName,s.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Vo(e,t,n,r){return en(e).onAuthStateChanged(t,n,r)}function Wo(e){return en(e).signOut()}function zo(e,t){return ri(e,"POST","/v2/accounts/mfaEnrollment:start",ni(e,t))}new WeakMap;const Ho="__sak";class qo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ho,"1"),this.storage.removeItem(Ho),Promise.resolve(!0)):Promise.resolve(!1)}catch(h1){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Go extends qo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);$i()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Go.type="LOCAL";const Ko=Go;function Yo(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Qo(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Xo{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Qo(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Yo(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Qo(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Qo(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Yo(n);const i=setInterval((()=>{const e=Yo(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Xo.type="COOKIE";class Zo extends qo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zo.type="SESSION";const Jo=Zo;class ea{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ea(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ea.receivers=[];class na{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=ta("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function ra(){return window}function ia(){return"undefined"!==typeof ra().WorkerGlobalScope&&"function"===typeof ra().importScripts}const oa="firebaseLocalStorageDb",aa="firebaseLocalStorage",sa="fbase_key";class la{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ca(e,t){return e.transaction([aa],t?"readwrite":"readonly").objectStore(aa)}function ua(){const e=indexedDB.open(oa,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(aa,{keyPath:sa})}catch(ok){n(ok)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(aa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(oa);return new la(e).toPromise()}(),t(await ua()))}))}))}async function da(e,t,n){const r=ca(e,!0).put({[sa]:t,value:n});return new la(r).toPromise()}function ha(e,t){const n=ca(e,!0).delete(t);return new la(n).toPromise()}class pa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ua()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(ok){if(t++>3)throw ok;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ia()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ea._getInstance(ia()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new na(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(h1){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ua();return await da(e,Ho,"1"),await ha(e,Ho),!0}catch(h1){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>da(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ca(e,!1).get(t),r=await new la(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ha(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ca(e,!1).getAll();return new la(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pa.type="LOCAL";const fa=pa;function ma(e,t){return ri(e,"POST","/v2/accounts/mfaSignIn:start",ni(e,t))}Xi("rcb"),new Qr(3e4,6e4);const ga="recaptcha";async function va(e,t,n){var r;if(!e._getRecaptchaConfig())try{await io(e)}catch(WE){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Wr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===eo){Wr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return zo(e,await ya(e,t,n))}return zo(e,t)},a=ro(e,r,"mfaSmsEnrollment",o,"PHONE_PROVIDER"),s=await a.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{Wr("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Wr(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===eo){Wr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return ma(e,await ya(e,t,n))}return ma(e,t)},l=ro(e,a,"mfaSmsSignIn",s,"PHONE_PROVIDER"),c=await l.catch((e=>Promise.reject(e)));return c.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===eo){Wr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return vo(e,await ya(e,t,n))}return vo(e,t)},o=ro(e,t,"sendVerificationCode",r,"PHONE_PROVIDER"),a=await o.catch((e=>Promise.reject(e)));return a.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ya(e,t,n){Wr(n.type===ga,e,"argument-error");const r=await n.verify();Wr("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ba{constructor(e){this.providerId=ba.PROVIDER_ID,this.auth=Gi(e)}verifyPhoneNumber(e,t){return va(this.auth,e,en(t))}static credential(e,t){return bo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ba.credentialFromTaggedObject(t)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?bo._fromTokenResponse(n,r):null}}function wa(e,t){return t?ki(t):(Wr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ba.PROVIDER_ID="phone",ba.PHONE_SIGN_IN_METHOD="phone";class xa extends lo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ea(e){return No(e.auth,new xa(e),e.bypassAuthState)}function Aa(e){const{auth:t,user:n}=e;return Wr(n,t,"internal-error"),Mo(n,new xa(e),e.bypassAuthState)}async function _a(e){const{auth:t,user:n}=e;return Wr(n,t,"internal-error"),Po(n,new xa(e),e.bypassAuthState)}class Sa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(ok){this.reject(ok)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(ok){this.reject(ok)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ea;case"linkViaPopup":case"linkViaRedirect":return _a;case"reauthViaPopup":case"reauthViaRedirect":return Aa;default:Fr(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ta=new Qr(2e3,1e4);class ka extends Sa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wr(e,this.auth,"internal-error"),e}async onExecution(){Hr(1===this.filter.length,"Popup operations only handle one event");const e=ta();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ur(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ta.get())};e()}}ka.currentPopupAction=null;const Ca=new Map;class Ia extends Sa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ca.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=La(t),r=Da(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(ok){e=()=>Promise.reject(ok)}Ca.set(this.auth._key(),e)}return this.bypassAuthState||Ca.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ra(e,t){Ca.set(e._key(),t)}function Da(e){return ki(e._redirectPersistence)}function La(e){return Ri("pendingRedirect",e.config.apiKey,e.name)}async function Pa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(mr(e.app))return Promise.reject($r(e));const r=Gi(e),i=wa(r,t),o=new Ia(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ma{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Oa(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ur(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Na(e))}saveEventToCache(e){this.cachedEventUids.add(Na(e)),this.lastProcessedEventTime=Date.now()}}function Na(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Oa(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fa=/^https?/;async function Ua(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ri(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(Ba(n))return}catch(h1){}Fr(e,"unauthorized-domain")}function Ba(e){const t=qr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Fa.test(n))return!1;if(ja.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const $a=new Qr(3e4,6e4);function Va(){const e=ra().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Wa(e){return new Promise(((t,n)=>{var r,i,o;function a(){Va(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Va(),n(Ur(e,"network-request-failed"))},timeout:$a.get()})}if(null===(i=null===(r=ra().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ra().gapi)||void 0===o?void 0:o.load)){const t=Xi("iframefcb");return ra()[t]=()=>{gapi.load?a():n(Ur(e,"network-request-failed"))},Qi(`${Yi.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw za=null,e}))}let za=null;const Ha=new Qr(5e3,15e3),qa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ka(e){const t=e.config;Wr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:yr},i=Ga.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qt(r).slice(1)}`}async function Ya(e){const t=await function(e){return za=za||Wa(e),za}(e),n=ra().gapi;return Wr(n,e,"internal-error"),t.open({where:document.body,url:Ka(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ur(e,"network-request-failed"),o=ra().setTimeout((()=>{r(i)}),Ha.get());function a(){ra().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(ok){}}}function Za(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Qa),{width:r.toString(),height:i.toString(),top:o,left:a}),c=kt().toLowerCase();n&&(s=Ni(c)?"_blank":n),Pi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Bi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Xa(null);const d=window.open(t||"",s,u);Wr(d,e,"popup-blocked");try{d.focus()}catch(ok){}return new Xa(d)}const Ja="__/auth/handler",es="emulator/auth/handler",ts=encodeURIComponent("fac");async function ns(e,t,n,r,i,o){Wr(e.config.authDomain,e,"auth-domain-config-required"),Wr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yr,eventId:i};if(t instanceof Eo){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",Vt(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof Ao){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?`#${ts}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ja}`;return Xr(t,es)}(e)}?${qt(s).slice(1)}${c}`}const rs="webStorageSupport";const is=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jo,this._completeRedirectFn=Pa,this._overrideRedirectResult=Ra}async _openPopup(e,t,n,r){var i;Hr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Za(e,await ns(e,t,n,qr(),r),ta())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ra().location.href=e}(await ns(e,t,n,qr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Hr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ya(e),n=new Ma(e);return t.register("authEvent",(t=>{Wr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rs,{type:rs},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[rs];void 0!==i&&t(!!i),Fr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ua(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vi()||Mi()||Bi()}};var os="@firebase/auth",as="1.10.0";class ss{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ls=_t("authIdTokenMaxAge")||300;let cs=null;var us;!function(e){Yi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ur("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),us="Browser",pr(new tn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Wr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:us,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wi(us)},c=new qi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ki);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pr(new tn("auth-internal",(e=>(e=>new ss(e))(Gi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),xr(os,as,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(us)),xr(os,as,"esm2017");var ds,hs,ps="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=a(n)).j(t);d(c)||0<c.l(e);)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=p*g,f(n,2*i+2*o),n[2*i+2*o+1]+=l*g,f(n,2*i+2*o+1),n[2*i+2*o+1]+=p*m,f(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,f(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,hs=fs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},ds=fs.Integer=r}).apply("undefined"!==typeof ps?ps:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ms,gs,vs,ys,bs,ws,xs,Es,As="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_s={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof As&&As];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function A(e){i.setTimeout((()=>{throw e}),0)}function _(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(D)}};var D=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(dk){A(dk)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function L(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(dk){}return e}();function N(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(fk){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&N.aa.h.call(this)}}d(N,P);var O={2:"touch",3:"pen",4:"mouse"};N.prototype.h=function(){N.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}$.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function q(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=J(e);if(l||(e[z]=l=new $(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(o=e.g[t],n,r,i))&&(B(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(V(n,e),0==n.h&&(n.src=null,t[z]=null)):B(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new N(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function J(e){return(e=e[z])instanceof $?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){L.call(this),this.i=new $(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;x(t=new P(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,L),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){L.call(this),this.h=e,this.g={}}d(le,L);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var we={},xe=null;function Ee(){return xe=xe||new ne}function Ae(e){P.call(this,we.La,e)}function _e(e){const t=Ee();re(t,new Ae(t))}function Se(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ee();re(t,new Se(t,e))}function ke(e,t){P.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(vk){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Ae,P),we.STAT_EVENT="statevent",d(Se,P),we.Ma="timingevent",d(ke,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var De,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Ne(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Me,fe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},De=new Me;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=q(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(gk){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(gk){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(He(s),We(s)),r.g=a}else tn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(gk){}}Ne.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Ne.prototype.Y=function(e){try{if(e==this.g)e:{const h=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=Ht(this.g);e="";var o=r.length,a=4==zt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),qe(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ve(this,s),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Te(15),Re(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ke(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(d),d.M=!0,Te(11))}}else Re(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Re(this.i,this.l,s,null),Ke(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),qe(this)}}}catch(h){}},Ne.prototype.cancel=function(){this.J=!0,Ge(this)},Ne.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Te(17)),Ge(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),_t(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){xt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function At(e,t){return xt(e),t=St(e,t),e.g.has(t)}function _t(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(fk){}}function kt(){this.g=new pe}function Ct(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(ok){throw t.push(r+"type="+encodeURIComponent("_badmap")),ok}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Nt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ot(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)At(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,At(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(It,fe),It.prototype.g=function(){return new Rt(this.l,this.j)},It.prototype.i=function(e){return function(){return e}}({}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ot,ne);var jt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),Vt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!jt.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<zt(e)?e.g.statusText:""}catch(vk){s=""}e.l=s+" ["+e.Z()+"]",Bt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(ok){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ts){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Qt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new Ne(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(mk){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Qt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||R(),C||(k(),C=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Nt(r,e.m,e.o),n=new Ne(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Jt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let s=0;s<n;s++){let n=i[s].g;const l=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),a=!1;else try{Ct(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||R(),C||(k(),C=!0),I.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Ne(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Nt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new ke(r,n)),Xt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new It({eb:n})):new Ot(e.pa)).Ha(e.J),t}function pn(){}function fn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(fk){return void Ut(this,fk)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(fk){Ut(this,fk)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(ck){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ck){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ne(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Mt(o)))+"&"+t:this.m&&Nt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Es=_s.createWebChannelTransport=function(){return new fn},xs=_s.getStatEventTarget=function(){return Ee()},ws=_s.Event=we,bs=_s.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,ys=_s.ErrorCode=Le,Pe.COMPLETE="complete",vs=_s.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,gs=_s.WebChannel=ge,_s.FetchXmlHttpFactory=It,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,ms=_s.XhrIo=Ot}).apply("undefined"!==typeof As?As:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ss="@firebase/firestore",Ts="4.7.10";class ks{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ks.UNAUTHENTICATED=new ks(null),ks.GOOGLE_CREDENTIALS=new ks("google-credentials-uid"),ks.FIRST_PARTY=new ks("first-party-uid"),ks.MOCK_USER=new ks("mock-user");let Cs="11.5.0";const Is=new pn("@firebase/firestore");function Rs(){return Is.logLevel}function Ds(e){if(Is.logLevel<=ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Is.debug(`Firestore (${Cs}): ${e}`,...i)}}function Ls(e){if(Is.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Is.error(`Firestore (${Cs}): ${e}`,...i)}}function Ps(e){if(Is.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Is.warn(`Firestore (${Cs}): ${e}`,...i)}}function Ms(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(ik){return e}}function Ns(){const e=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ls(e),new Error(e)}function Os(e,t){e||Ns()}function js(e,t){return e}const Fs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Us extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $s{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ks.UNAUTHENTICATED)))}shutdown(){}}class Ws{constructor(e){this.t=e,this.currentUser=ks.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Os(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Ds("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ds("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bs)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ds("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Os("string"==typeof t.accessToken),new $s(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Os(null===e||"string"==typeof e),new ks(e)}}class zs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ks.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Hs{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new zs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ks.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gs{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,mr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Os(void 0===this.o);const n=e=>{null!=e.error&&Ds("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ds("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ds("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ds("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new qs(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Os("string"==typeof e.token),this.R=e.token,new qs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ks(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Ys(){return new TextEncoder}class Qs{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ks(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Xs(e,t){return e<t?-1:e>t?1:0}function Zs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Xs(r,i);{const o=Ys(),a=el(o.encode(Js(e,n)),o.encode(Js(t,n)));return 0!==a?a:Xs(r,i)}}n+=r>65535?2:1}return Xs(e.length,t.length)}function Js(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function el(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Xs(e[n],t[n]);return Xs(e.length,t.length)}function tl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function nl(e){return e+"\0"}const rl=-62135596800,il=1e6;class ol{static now(){return ol.fromMillis(Date.now())}static fromDate(e){return ol.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*il);return new ol(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Us(Fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Us(Fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rl)throw new Us(Fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Us(Fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/il}_compareTo(e){return this.seconds===e.seconds?Xs(this.nanoseconds,e.nanoseconds):Xs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-rl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class al{static fromTimestamp(e){return new al(e)}static min(){return new al(new ol(0,0))}static max(){return new al(new ol(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sl="__name__";class ll{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ns(),void 0===n?n=e.length-t:n>e.length-t&&Ns(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ll.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ll.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Xs(e.length,t.length)}static compareSegments(e,t){const n=ll.isNumericId(e),r=ll.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ll.extractNumericId(e).compare(ll.extractNumericId(t)):Zs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class cl extends ll{construct(e,t,n){return new cl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Us(Fs.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new cl(e)}static emptyPath(){return new cl([])}}const ul=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dl extends ll{construct(e,t,n){return new dl(e,t,n)}static isValidIdentifier(e){return ul.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===sl}static keyField(){return new dl([sl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Us(Fs.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Us(Fs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Us(Fs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Us(Fs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dl(t)}static emptyPath(){return new dl([])}}class hl{constructor(e){this.path=e}static fromPath(e){return new hl(cl.fromString(e))}static fromName(e){return new hl(cl.fromString(e).popFirst(5))}static empty(){return new hl(cl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hl(new cl(e.slice()))}}const pl=-1;class fl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ml(e){return e.fields.find((e=>2===e.kind))}function gl(e){return e.fields.filter((e=>2!==e.kind))}fl.UNKNOWN_ID=-1;class vl{constructor(e,t){this.fieldPath=e,this.kind=t}}class yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yl(0,xl.min())}}function bl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=al.fromTimestamp(1e9===r?new ol(n+1,0):new ol(n,r));return new xl(i,hl.empty(),t)}function wl(e){return new xl(e.readTime,e.key,pl)}class xl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xl(al.min(),hl.empty(),pl)}static max(){return new xl(al.max(),hl.empty(),pl)}}function El(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hl.comparator(e.documentKey,t.documentKey),0!==n?n:Xs(e.largestBatchId,t.largestBatchId))}const Al="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _l{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sl(e){if(e.code!==Fs.FAILED_PRECONDITION||e.message!==Al)throw e;Ds("LocalStore","Unexpectedly lost primary lease")}class Tl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ns(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Tl?t:Tl.resolve(t)}catch(e){return Tl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Tl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Tl.reject(t)}static resolve(e){return new Tl(((t,n)=>{t(e)}))}static reject(e){return new Tl(((t,n)=>{n(e)}))}static waitFor(e){return new Tl(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Tl.resolve(!1);for(const n of e)t=t.next((e=>e?Tl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Tl(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Tl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const kl="SimpleDb";class Cl{static open(e,t,n,r){try{return new Cl(t,e.transaction(r,n))}catch(e){throw new Ll(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Bs,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Ll(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=jl(t.target.error);this.m.reject(new Ll(e,n))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Ds(kl,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ml(t)}}class Il{static delete(e){return Ds(kl,"Removing database:",e),Nl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lt())return!1;if(Il.v())return!0;const e=kt(),t=Il.C(e),n=0<t&&t<10,r=Rl(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,12.2===Il.C(kt())&&Ls("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(Ds(kl,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ll(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Us(Fs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Us(Fs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ll(e,r))},r.onupgradeneeded=e=>{Ds(kl,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.O.B(t,r.transaction,e.oldVersion,this.version).next((()=>{Ds(kl,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.N(e);const t=Cl.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.S(),e))).catch((e=>(t.abort(e),Tl.reject(e)))).toPromise();return o.catch((()=>{})),await t.p,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Ds(kl,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Rl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Dl{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Nl(this.q.delete())}}class Ll extends Us{constructor(e,t){super(Fs.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pl(e){return"IndexedDbTransactionError"===e.name}class Ml{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ds(kl,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ds(kl,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Nl(n)}add(e){return Ds(kl,"ADD",this.store.name,e,e),Nl(this.store.add(e))}get(e){return Nl(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ds(kl,"GET",this.store.name,e,t),t)))}delete(e){return Ds(kl,"DELETE",this.store.name,e),Nl(this.store.delete(e))}count(){return Ds(kl,"COUNT",this.store.name),Nl(this.store.count())}G(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Tl(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Tl(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Ds(kl,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.j(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.j(r,t)}X(e){const t=this.cursor({});return new Tl(((n,r)=>{t.onerror=e=>{const t=jl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}j(e,t){const n=[];return new Tl(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Dl(i),a=t(i.primaryKey,i.value,o);if(a instanceof Tl){const e=a.catch((e=>(o.done(),Tl.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>Tl.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nl(e){return new Tl(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=jl(e.target.error);n(t)}}))}let Ol=!1;function jl(e){const t=Il.C(kt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Us("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ol||(Ol=!0,setTimeout((()=>{throw e}),0)),e}}return e}const Fl="IndexBackfiller";class Ul{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){Ds(Fl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.ee.ne();Ds(Fl,`Documents written: ${e}`)}catch(e){Pl(e)?Ds(Fl,"Ignoring IndexedDB error during index backfill: ",e):await Sl(e)}await this.te(6e4)}))}}class Bl{constructor(e,t){this.localStore=e,this.persistence=t}async ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let r=t,i=!0;return Tl.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ds(Fl,`Processing collection: ${t}`),this.ie(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.se(r,n))).next((n=>(Ds(Fl,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=wl(t);El(r,n)>0&&(n=r)})),new xl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $l{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}$l.ae=-1;const Vl=-1;function Wl(e){return null==e}function zl(e){return 0===e&&1/e==-1/0}function Hl(e){return"number"==typeof e&&Number.isInteger(e)&&!zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ql="\x01";function Gl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Yl(t)),t=Kl(e.get(n),t);return Yl(t)}function Kl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ql:n+="\x01\x11";break;default:n+=t}}return n}function Yl(e){return e+ql+"\x01"}function Ql(e){const t=e.length;if(Os(t>=2),2===t)return Os(e.charAt(0)===ql&&"\x01"===e.charAt(1)),cl.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf(ql,o);switch((t<0||t>n)&&Ns(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Ns()}o=t+2}return new cl(r)}const Xl="remoteDocuments",Zl="owner",Jl="owner",ec="mutationQueues",tc="mutations",nc="batchId",rc="userMutationsIndex",ic=["userId","batchId"];function oc(e,t){return[e,Gl(t)]}function ac(e,t,n){return[e,Gl(t),n]}const sc={},lc="documentMutations",cc="remoteDocumentsV14",uc=["prefixPath","collectionGroup","readTime","documentId"],dc="documentKeyIndex",hc=["prefixPath","collectionGroup","documentId"],pc="collectionGroupIndex",fc=["collectionGroup","readTime","prefixPath","documentId"],mc="remoteDocumentGlobal",gc="remoteDocumentGlobalKey",vc="targets",yc="queryTargetsIndex",bc=["canonicalId","targetId"],wc="targetDocuments",xc=["targetId","path"],Ec="documentTargetsIndex",Ac=["path","targetId"],_c="targetGlobalKey",Sc="targetGlobal",Tc="collectionParents",kc=["collectionId","parent"],Cc="clientMetadata",Ic="bundles",Rc="namedQueries",Dc="indexConfiguration",Lc="collectionGroupIndex",Pc="indexState",Mc=["indexId","uid"],Nc="sequenceNumberIndex",Oc=["uid","sequenceNumber"],jc="indexEntries",Fc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Uc="documentKeyIndex",Bc=["indexId","uid","orderedDocumentKey"],$c="documentOverlays",Vc=["userId","collectionPath","documentId"],Wc="collectionPathOverlayIndex",zc=["userId","collectionPath","largestBatchId"],Hc="collectionGroupOverlayIndex",qc=["userId","collectionGroup","largestBatchId"],Gc="globals",Kc=[ec,tc,lc,Xl,vc,Zl,Sc,wc,Cc,mc,Tc,Ic,Rc],Yc=[...Kc,$c],Qc=[ec,tc,lc,cc,vc,Zl,Sc,wc,Cc,mc,Tc,Ic,Rc,$c],Xc=Qc,Zc=[...Xc,Dc,Pc,jc],Jc=Zc,eu=[...Zc,Gc];class tu extends _l{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function nu(e,t){const n=js(e);return Il.M(n.ue,t)}function ru(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function iu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ou(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class au{constructor(e,t){this.comparator=e,this.root=t||lu.EMPTY}insert(e,t){return new au(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lu.BLACK,null,null))}remove(e){return new au(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lu.RED,this.left=null!=r?r:lu.EMPTY,this.right=null!=i?i:lu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new lu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return lu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ns();if(this.right.isRed())throw Ns();const e=this.left.check();if(e!==this.right.check())throw Ns();return e+(this.isRed()?0:1)}}lu.EMPTY=null,lu.RED=!0,lu.BLACK=!1,lu.EMPTY=new class{constructor(){this.size=0}get key(){throw Ns()}get value(){throw Ns()}get color(){throw Ns()}get left(){throw Ns()}get right(){throw Ns()}copy(e,t,n,r,i){return this}insert(e,t,n){return new lu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cu{constructor(e){this.comparator=e,this.data=new au(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uu(this.data.getIterator())}getIteratorFrom(e){return new uu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof cu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cu(this.comparator);return t.data=e,t}}class uu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function du(e){return e.hasNext()?e.getNext():void 0}class hu{constructor(e){this.fields=e,e.sort(dl.comparator)}static empty(){return new hu([])}unionWith(e){let t=new cu(dl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class pu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pu("Invalid base64 string: "+e):e}}(e);return new fu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new fu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fu.EMPTY_BYTE_STRING=new fu("");const mu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gu(e){if(Os(!!e),"string"==typeof e){let t=0;const n=mu.exec(e);if(Os(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vu(e.seconds),nanos:vu(e.nanos)}}function vu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yu(e){return"string"==typeof e?fu.fromBase64String(e):fu.fromUint8Array(e)}const bu="server_timestamp",wu="__type__",xu="__previous_value__",Eu="__local_write_time__";function Au(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[wu])||void 0===n?void 0:n.stringValue)===bu}function _u(e){const t=e.mapValue.fields[xu];return Au(t)?_u(t):t}function Su(e){const t=gu(e.mapValue.fields[Eu].timestampValue);return new ol(t.seconds,t.nanos)}class Tu{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}const ku="(default)";class Cu{constructor(e,t){this.projectId=e,this.database=t||ku}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===ku}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}const Iu="__type__",Ru="__max__",Du={mapValue:{fields:{__type__:{stringValue:Ru}}}},Lu="__vector__",Pu="value",Mu={nullValue:"NULL_VALUE"};function Nu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Au(e)?4:Zu(e)?9007199254740991:Qu(e)?10:11:Ns()}function Ou(e,t){if(e===t)return!0;const n=Nu(e);if(n!==Nu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Su(e).isEqual(Su(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gu(e.timestampValue),r=gu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yu(e.bytesValue).isEqual(yu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vu(e.geoPointValue.latitude)===vu(t.geoPointValue.latitude)&&vu(e.geoPointValue.longitude)===vu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vu(e.integerValue)===vu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vu(e.doubleValue),r=vu(t.doubleValue);return n===r?zl(n)===zl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tl(e.arrayValue.values||[],t.arrayValue.values||[],Ou);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ru(n)!==ru(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ou(n[i],r[i])))return!1;return!0}(e,t);default:return Ns()}}function ju(e,t){return void 0!==(e.values||[]).find((e=>Ou(e,t)))}function Fu(e,t){if(e===t)return 0;const n=Nu(e),r=Nu(t);if(n!==r)return Xs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vu(e.integerValue||e.doubleValue),r=vu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uu(e.timestampValue,t.timestampValue);case 4:return Uu(Su(e),Su(t));case 5:return Zs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=yu(e),r=yu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Xs(n[i],r[i]);if(0!==e)return e}return Xs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Xs(vu(e.latitude),vu(t.latitude));return 0!==n?n:Xs(vu(e.longitude),vu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a[Pu])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Pu])||void 0===r?void 0:r.arrayValue,u=Xs((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Bu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Du.mapValue&&t===Du.mapValue)return 0;if(e===Du.mapValue)return 1;if(t===Du.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Zs(r[a],o[a]);if(0!==e)return e;const t=Fu(n[r[a]],i[o[a]]);if(0!==t)return t}return Xs(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ns()}}function Uu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xs(e,t);const n=gu(e),r=gu(t),i=Xs(n.seconds,r.seconds);return 0!==i?i:Xs(n.nanos,r.nanos)}function Bu(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fu(n[i],r[i]);if(e)return e}return Xs(n.length,r.length)}function $u(e){return Vu(e)}function Vu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return yu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return hl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Vu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Vu(e.fields[i])}`;return n+"}"}(e.mapValue):Ns()}function Wu(e){switch(Nu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_u(e);return t?16+Wu(t):16;case 5:return 2*e.stringValue.length;case 6:return yu(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Wu(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return iu(e.fields,((e,n)=>{t+=e.length+Wu(n)})),t}(e.mapValue);default:throw Ns()}}function zu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Hu(e){return!!e&&"integerValue"in e}function qu(e){return!!e&&"arrayValue"in e}function Gu(e){return!!e&&"nullValue"in e}function Ku(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Yu(e){return!!e&&"mapValue"in e}function Qu(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Iu])||void 0===n?void 0:n.stringValue)===Lu}function Xu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return iu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Xu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zu(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ru}const Ju={mapValue:{fields:{[Iu]:{stringValue:Lu},[Pu]:{arrayValue:{}}}}};function ed(e){return"nullValue"in e?Mu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?zu(Cu.empty(),hl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Qu(e)?Ju:{mapValue:{}}:Ns()}function td(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?zu(Cu.empty(),hl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Ju:"mapValue"in e?Qu(e)?{mapValue:{}}:Du:Ns()}function nd(e,t){const n=Fu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function rd(e,t){const n=Fu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class id{constructor(e){this.value=e}static empty(){return new id({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=dl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Xu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ou(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Yu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){iu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new id(Xu(this.value))}}function od(e){const t=[];return iu(e.fields,((e,n)=>{const r=new dl([e]);if(Yu(n)){const e=od(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new hu(t)}class ad{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ad(e,0,al.min(),al.min(),al.min(),id.empty(),0)}static newFoundDocument(e,t,n,r){return new ad(e,1,t,al.min(),n,r,0)}static newNoDocument(e,t){return new ad(e,2,t,al.min(),al.min(),id.empty(),0)}static newUnknownDocument(e,t){return new ad(e,3,t,al.min(),al.min(),id.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(al.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=id.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=id.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=al.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ad&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ad(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sd{constructor(e,t){this.position=e,this.inclusive=t}}function ld(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?hl.comparator(hl.fromName(a.referenceValue),n.key):Fu(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function cd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ou(e.position[n],t.position[n]))return!1;return!0}class ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hd{}class pd extends hd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ad(e,t,n):"array-contains"===t?new kd(e,n):"in"===t?new Cd(e,n):"not-in"===t?new Id(e,n):"array-contains-any"===t?new Rd(e,n):new pd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _d(e,n):new Sd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fu(t,this.value)):null!==t&&Nu(this.value)===Nu(t)&&this.matchesComparison(Fu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ns()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fd extends hd{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new fd(e,t)}matches(e){return md(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function md(e){return"and"===e.op}function gd(e){return"or"===e.op}function vd(e){return yd(e)&&md(e)}function yd(e){for(const t of e.filters)if(t instanceof fd)return!1;return!0}function bd(e){if(e instanceof pd)return e.field.canonicalString()+e.op.toString()+$u(e.value);if(vd(e))return e.filters.map((e=>bd(e))).join(",");{const t=e.filters.map((e=>bd(e))).join(",");return`${e.op}(${t})`}}function wd(e,t){return e instanceof pd?function(e,t){return t instanceof pd&&e.op===t.op&&e.field.isEqual(t.field)&&Ou(e.value,t.value)}(e,t):e instanceof fd?function(e,t){return t instanceof fd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&wd(n,t.filters[r])),!0)}(e,t):void Ns()}function xd(e,t){const n=e.filters.concat(t);return fd.create(n,e.op)}function Ed(e){return e instanceof pd?function(e){return`${e.field.canonicalString()} ${e.op} ${$u(e.value)}`}(e):e instanceof fd?function(e){return e.op.toString()+" {"+e.getFilters().map(Ed).join(" ,")+"}"}(e):"Filter"}class Ad extends pd{constructor(e,t,n){super(e,t,n),this.key=hl.fromName(n.referenceValue)}matches(e){const t=hl.comparator(e.key,this.key);return this.matchesComparison(t)}}class _d extends pd{constructor(e,t){super(e,"in",t),this.keys=Td("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sd extends pd{constructor(e,t){super(e,"not-in",t),this.keys=Td("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Td(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>hl.fromName(e.referenceValue)))}class kd extends pd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qu(t)&&ju(t.arrayValue,this.value)}}class Cd extends pd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ju(this.value.arrayValue,t)}}class Id extends pd{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ju(this.value.arrayValue,t)}}class Rd extends pd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ju(this.value.arrayValue,e)))}}class Dd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function Ld(e){return new Dd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pd(e){const t=js(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>bd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Wl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>$u(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>$u(e))).join(",")),t.le=e}return t.le}function Md(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cd(e.startAt,t.startAt)&&cd(e.endAt,t.endAt)}function Nd(e){return hl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Od(e,t){return e.filters.filter((e=>e instanceof pd&&e.field.isEqual(t)))}function jd(e,t,n){let r=Mu,i=!0;for(const o of Od(e,t)){let e=Mu,t=!0;switch(o.op){case"<":case"<=":e=ed(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Mu}nd({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];nd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Fd(e,t,n){let r=Du,i=!0;for(const o of Od(e,t)){let e=Du,t=!0;switch(o.op){case">=":case">":e=td(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Du}rd({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];rd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Bd(e,t,n,r,i,o,a,s){return new Ud(e,t,n,r,i,o,a,s)}function $d(e){return new Ud(e)}function Vd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wd(e){return null!==e.collectionGroup}function zd(e){const t=js(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new cu(dl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new ud(r,n))})),e.has(dl.keyField().canonicalString())||t.he.push(new ud(dl.keyField(),n))}return t.he}function Hd(e){const t=js(e);return t.Pe||(t.Pe=qd(t,zd(e))),t.Pe}function qd(e,t){if("F"===e.limitType)return Ld(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ud(e.field,t)}));const n=e.endAt?new sd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sd(e.startAt.position,e.startAt.inclusive):null;return Ld(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Gd(e,t){const n=e.filters.concat([t]);return new Ud(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Kd(e,t,n){return new Ud(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yd(e,t){return Md(Hd(e),Hd(t))&&e.limitType===t.limitType}function Qd(e){return`${Pd(Hd(e))}|lt:${e.limitType}`}function Xd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Ed(e))).join(", ")}]`),Wl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>$u(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>$u(e))).join(",")),`Target(${t})`}(Hd(e))}; limitType=${e.limitType})`}function Zd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ld(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zd(e),t))&&!(e.endAt&&!function(e,t,n){const r=ld(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zd(e),t))}(e,t)}function Jd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function eh(e){return(t,n)=>{let r=!1;for(const i of zd(e)){const e=th(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function th(e,t,n){const r=e.field.isKeyField()?hl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fu(r,i):Ns()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ns()}}class nh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ou(this.inner)}size(){return this.innerSize}}const rh=new au(hl.comparator);function ih(){return rh}const oh=new au(hl.comparator);function ah(){let e=oh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function sh(e){let t=oh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function lh(){return uh()}function ch(){return uh()}function uh(){return new nh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const dh=new au(hl.comparator),hh=new cu(hl.comparator);function ph(){let e=hh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const fh=new cu(Xs);function mh(){return fh}function gh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(t)?"-0":t}}function vh(e){return{integerValue:""+e}}function yh(e,t){return Hl(t)?vh(t):gh(e,t)}class bh{constructor(){this._=void 0}}function wh(e,t,n){return e instanceof Ah?function(e,t){const n={fields:{[wu]:{stringValue:bu},[Eu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Au(t)&&(t=_u(t)),t&&(n.fields[xu]=t),{mapValue:n}}(n,t):e instanceof _h?Sh(e,t):e instanceof Th?kh(e,t):function(e,t){const n=Eh(e,t),r=Ih(n)+Ih(e.Ie);return Hu(n)&&Hu(e.Ie)?vh(r):gh(e.serializer,r)}(e,t)}function xh(e,t,n){return e instanceof _h?Sh(e,t):e instanceof Th?kh(e,t):n}function Eh(e,t){return e instanceof Ch?function(e){return Hu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ah extends bh{}class _h extends bh{constructor(e){super(),this.elements=e}}function Sh(e,t){const n=Rh(t);for(const r of e.elements)n.some((e=>Ou(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Th extends bh{constructor(e){super(),this.elements=e}}function kh(e,t){let n=Rh(t);for(const r of e.elements)n=n.filter((e=>!Ou(e,r)));return{arrayValue:{values:n}}}class Ch extends bh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ih(e){return vu(e.integerValue||e.doubleValue)}function Rh(e){return qu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Dh{constructor(e,t){this.field=e,this.transform=t}}class Lh{constructor(e,t){this.version=e,this.transformResults=t}}class Ph{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ph}static exists(e){return new Ph(void 0,e)}static updateTime(e){return new Ph(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Nh{}function Oh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qh(e.key,Ph.none()):new $h(e.key,e.data,Ph.none());{const n=e.data,r=id.empty();let i=new cu(dl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Vh(e.key,r,new hu(i.toArray()),Ph.none())}}function jh(e,t,n){e instanceof $h?function(e,t,n){const r=e.value.clone(),i=zh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vh?function(e,t,n){if(!Mh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=zh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fh(e,t,n,r){return e instanceof $h?function(e,t,n,r){if(!Mh(e.precondition,t))return n;const i=e.value.clone(),o=Hh(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vh?function(e,t,n,r){if(!Mh(e.precondition,t))return n;const i=Hh(e.fieldTransforms,r,t),o=t.data;return o.setAll(Wh(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Mh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Uh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Eh(r.transform,e||null);null!=i&&(null===n&&(n=id.empty()),n.set(r.field,i))}return n||null}function Bh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _h&&t instanceof _h||e instanceof Th&&t instanceof Th?tl(e.elements,t.elements,Ou):e instanceof Ch&&t instanceof Ch?Ou(e.Ie,t.Ie):e instanceof Ah&&t instanceof Ah}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $h extends Nh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vh extends Nh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function zh(e,t,n){const r=new Map;Os(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,xh(a,s,n[i]))}return r}function Hh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,wh(e,o,t))}return r}class qh extends Nh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gh extends Nh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&jh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ch();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Oh(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(al.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ph())}isEqual(e){return this.batchId===e.batchId&&tl(this.mutations,e.mutations,((e,t)=>Bh(e,t)))&&tl(this.baseMutations,e.baseMutations,((e,t)=>Bh(e,t)))}}class Yh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Os(e.mutations.length===n.length);let r=dh;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Yh(e,t,n,r)}}class Qh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zh,Jh;function ep(e){switch(e){case Fs.OK:return Ns();case Fs.CANCELLED:case Fs.UNKNOWN:case Fs.DEADLINE_EXCEEDED:case Fs.RESOURCE_EXHAUSTED:case Fs.INTERNAL:case Fs.UNAVAILABLE:case Fs.UNAUTHENTICATED:return!1;case Fs.INVALID_ARGUMENT:case Fs.NOT_FOUND:case Fs.ALREADY_EXISTS:case Fs.PERMISSION_DENIED:case Fs.FAILED_PRECONDITION:case Fs.ABORTED:case Fs.OUT_OF_RANGE:case Fs.UNIMPLEMENTED:case Fs.DATA_LOSS:return!0;default:return Ns()}}function tp(e){if(void 0===e)return Ls("GRPC error has no .code"),Fs.UNKNOWN;switch(e){case Zh.OK:return Fs.OK;case Zh.CANCELLED:return Fs.CANCELLED;case Zh.UNKNOWN:return Fs.UNKNOWN;case Zh.DEADLINE_EXCEEDED:return Fs.DEADLINE_EXCEEDED;case Zh.RESOURCE_EXHAUSTED:return Fs.RESOURCE_EXHAUSTED;case Zh.INTERNAL:return Fs.INTERNAL;case Zh.UNAVAILABLE:return Fs.UNAVAILABLE;case Zh.UNAUTHENTICATED:return Fs.UNAUTHENTICATED;case Zh.INVALID_ARGUMENT:return Fs.INVALID_ARGUMENT;case Zh.NOT_FOUND:return Fs.NOT_FOUND;case Zh.ALREADY_EXISTS:return Fs.ALREADY_EXISTS;case Zh.PERMISSION_DENIED:return Fs.PERMISSION_DENIED;case Zh.FAILED_PRECONDITION:return Fs.FAILED_PRECONDITION;case Zh.ABORTED:return Fs.ABORTED;case Zh.OUT_OF_RANGE:return Fs.OUT_OF_RANGE;case Zh.UNIMPLEMENTED:return Fs.UNIMPLEMENTED;case Zh.DATA_LOSS:return Fs.DATA_LOSS;default:return Ns()}}(Jh=Zh||(Zh={}))[Jh.OK=0]="OK",Jh[Jh.CANCELLED=1]="CANCELLED",Jh[Jh.UNKNOWN=2]="UNKNOWN",Jh[Jh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jh[Jh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jh[Jh.NOT_FOUND=5]="NOT_FOUND",Jh[Jh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jh[Jh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jh[Jh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jh[Jh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jh[Jh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jh[Jh.ABORTED=10]="ABORTED",Jh[Jh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jh[Jh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jh[Jh.INTERNAL=13]="INTERNAL",Jh[Jh.UNAVAILABLE=14]="UNAVAILABLE",Jh[Jh.DATA_LOSS=15]="DATA_LOSS";let np=null;const rp=new ds([4294967295,4294967295],0);function ip(e){const t=Ys().encode(e),n=new hs;return n.update(t),new Uint8Array(n.digest())}function op(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ds([n,r],0),new ds([i,o],0)]}class ap{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sp(`Invalid padding: ${t}`);if(n<0)throw new sp(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new sp(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new sp(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ds.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(ds.fromNumber(n)));return 1===r.compare(rp)&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=ip(e),[n,r]=op(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ap(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ee)return;const t=ip(e),[n,r]=op(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,cp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lp(al.min(),r,new au(Xs),ih(),ph())}}class cp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cp(n,t,ph(),ph(),ph())}}class up{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class dp{constructor(e,t){this.targetId=e,this.ge=t}}class hp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class pp{constructor(){this.pe=0,this.ye=gp(),this.we=fu.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ph(),t=ph(),n=ph();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ns()}})),new cp(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=gp()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Os(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class fp{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ih(),this.$e=mp(),this.Ue=mp(),this.Ke=new au(Xs)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Ns()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(Nd(i))if(0===n){const e=new hl(i.path);this.ze(t,e,ad.newNoDocument(e,al.min()))}else Os(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==np||np.rt(function(e,t,n,r,i){var o,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=yu(n).toUint8Array()}catch(e){if(e instanceof pu)return Ps("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ap(o,r,i)}catch(e){return Ps(e instanceof sp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ee?null:a}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Nd(i.target)){const t=new hl(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,ad.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=ph();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new lp(e,t,this.Ke,this.Qe,n);return this.Qe=ih(),this.$e=mp(),this.Ue=mp(),this.Ke=new au(Xs),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new pp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new cu(Xs),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new cu(Xs),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Ds("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new pp),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function mp(){return new au(hl.comparator)}function gp(){return new au(hl.comparator)}const vp={asc:"ASCENDING",desc:"DESCENDING"},yp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bp={and:"AND",or:"OR"};class wp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xp(e,t){return e.useProto3Json||Wl(t)?t:{value:t}}function Ep(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ap(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _p(e,t){return Ep(e,t.toTimestamp())}function Sp(e){return Os(!!e),al.fromTimestamp(function(e){const t=gu(e);return new ol(t.seconds,t.nanos)}(e))}function Tp(e,t){return kp(e,t).canonicalString()}function kp(e,t){const n=function(e){return new cl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Cp(e){const t=cl.fromString(e);return Os(Qp(t)),t}function Ip(e,t){return Tp(e.databaseId,t.path)}function Rp(e,t){const n=Cp(t);if(n.get(1)!==e.databaseId.projectId)throw new Us(Fs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Us(Fs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hl(Mp(n))}function Dp(e,t){return Tp(e.databaseId,t)}function Lp(e){const t=Cp(e);return 4===t.length?cl.emptyPath():Mp(t)}function Pp(e){return new cl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mp(e){return Os(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Np(e,t,n){return{name:Ip(e,t),fields:n.value.mapValue.fields}}function Op(e,t,n){const r=Rp(e,t.name),i=Sp(t.updateTime),o=t.createTime?Sp(t.createTime):al.min(),a=new id({mapValue:{fields:t.fields}}),s=ad.newFoundDocument(r,i,o,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function jp(e,t){let n;if(t instanceof $h)n={update:Np(e,t.key,t.value)};else if(t instanceof qh)n={delete:Ip(e,t.key)};else if(t instanceof Vh)n={update:Np(e,t.key,t.data),updateMask:Yp(t.fieldMask)};else{if(!(t instanceof Gh))return Ns();n={verify:Ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ah)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _h)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Th)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ch)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ns()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_p(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ns()}(e,t.precondition)),n}function Fp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ph.updateTime(Sp(e.updateTime)):void 0!==e.exists?Ph.exists(e.exists):Ph.none()}(t.currentDocument):Ph.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Os("REQUEST_TIME"===t.setToServerValue),n=new Ah;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new _h(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Th(e)}else"increment"in t?n=new Ch(e,t.increment):Ns();const r=dl.fromServerFormat(t.fieldPath);return new Dh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Rp(e,t.update.name),o=new id({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new hu(t.map((e=>dl.fromServerFormat(e))))}(t.updateMask);return new Vh(i,o,e,n,r)}return new $h(i,o,n,r)}if(t.delete){const r=Rp(e,t.delete);return new qh(r,n)}if(t.verify){const r=Rp(e,t.verify);return new Gh(r,n)}return Ns()}function Up(e,t){return{documents:[Dp(e,t.path)]}}function Bp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Dp(e,i);const o=function(e){if(0!==e.length)return Kp(fd.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:qp(e.field),direction:Wp(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=xp(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function $p(e){let t=Lp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Os(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Vp(e);return t instanceof fd&&vd(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new ud(Gp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Wl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new sd(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new sd(n,t)}(n.endAt)),Bd(t,i,a,o,s,"F",l,c)}function Vp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gp(e.unaryFilter.field);return pd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gp(e.unaryFilter.field);return pd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gp(e.unaryFilter.field);return pd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gp(e.unaryFilter.field);return pd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ns()}}(e):void 0!==e.fieldFilter?function(e){return pd.create(Gp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ns()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fd.create(e.compositeFilter.filters.map((e=>Vp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ns()}}(e.compositeFilter.op))}(e):Ns()}function Wp(e){return vp[e]}function zp(e){return yp[e]}function Hp(e){return bp[e]}function qp(e){return{fieldPath:e.canonicalString()}}function Gp(e){return dl.fromServerFormat(e.fieldPath)}function Kp(e){return e instanceof pd?function(e){if("=="===e.op){if(Ku(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NAN"}};if(Gu(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ku(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NOT_NAN"}};if(Gu(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qp(e.field),op:zp(e.op),value:e.value}}}(e):e instanceof fd?function(e){const t=e.getFilters().map((e=>Kp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Hp(e.op),filters:t}}}(e):Ns()}function Yp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:al.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:al.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Xp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zp{constructor(e){this.Tt=e}}function Jp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ef(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ip(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ep(e,t.version.toTimestamp()),createTime:Ep(e,t.createTime.toTimestamp())}}(e.Tt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tf(t.version)};else{if(!t.isUnknownDocument())return Ns();r.unknownDocument={path:n.path.toArray(),version:tf(t.version)}}return r}function ef(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function nf(e){const t=new ol(e.seconds,e.nanoseconds);return al.fromTimestamp(t)}function rf(e,t){const n=(t.baseMutations||[]).map((t=>Fp(e.Tt,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Fp(e.Tt,t))),i=ol.fromMillis(t.localWriteTimeMs);return new Kh(t.batchId,i,n,r)}function of(e){const t=nf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?nf(e.lastLimboFreeSnapshotVersion):al.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Os(1===e.documents.length),Hd($d(Lp(e.documents[0])))}(e.query):function(e){return Hd($p(e))}(e.query),new Xp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,fu.fromBase64String(e.resumeToken))}function af(e,t){const n=tf(t.snapshotVersion),r=tf(t.lastLimboFreeSnapshotVersion);let i;i=Nd(t.target)?Up(e.Tt,t.target):Bp(e.Tt,t.target).ht;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pd(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sf(e){const t=$p({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kd(t,t.limit,"L"):t}function lf(e,t){return new Qh(t.largestBatchId,Fp(e.Tt,t.overlayMutation))}function cf(e,t){const n=t.path.lastSegment();return[e,Gl(t.path.popLast()),n]}function uf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:tf(r.readTime),documentKey:Gl(r.documentKey.path),largestBatchId:r.largestBatchId}}class df{getBundleMetadata(e,t){return hf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:nf(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return hf(e).put(function(e){return{bundleId:e.id,createTime:tf(Sp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return pf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:sf(e.bundledQuery),readTime:nf(e.readTime)}}(e)}))}saveNamedQuery(e,t){return pf(e).put(function(e){return{name:e.name,readTime:tf(Sp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function hf(e){return nu(e,Ic)}function pf(e){return nu(e,Rc)}class ff{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new ff(e,n)}getOverlay(e,t){return mf(e).get(cf(this.userId,t)).next((e=>e?lf(this.serializer,e):null))}getOverlays(e,t){const n=lh();return Tl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Qh(t,i);r.push(this.Et(e,o))})),Tl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Gl(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(mf(e).J(Wc,r))})),Tl.waitFor(i)}getOverlaysForCollection(e,t,n){const r=lh(),i=Gl(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return mf(e).G(Wc,o).next((e=>{for(const t of e){const e=lf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=lh();let o;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mf(e).Z({index:Hc,range:a},((e,t,n)=>{const a=lf(this.serializer,t);i.size()<r||a.largestBatchId===o?(i.set(a.getKey(),a),o=a.largestBatchId):n.done()})).next((()=>i))}Et(e,t){return mf(e).put(function(e,t,n){const[r,i,o]=cf(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:jp(e.Tt,n.mutation)}}(this.serializer,this.userId,t))}}function mf(e){return nu(e,$c)}class gf{dt(e){return nu(e,Gc)}getSessionToken(e){return this.dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?fu.fromUint8Array(t):fu.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vf{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(vu(e.integerValue));else if("doubleValue"in e){const n=vu(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),zl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=gu(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(yu(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Zu(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Qu(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Ns()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const o=Pu,a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(vu(a)),this.wt(o,t),this.Rt(i[o],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),hl.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}vf.xt=new vf;const yf=255;function bf(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function wf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=bf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class xf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Nt(e);else if(e<2048)this.Nt(960|e>>>6),this.Nt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Nt(480|e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e);else{const e=t.codePointAt(0);this.Nt(240|e>>>18),this.Nt(128|63&e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e)}}this.Bt()}$t(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.kt(e);else if(e<2048)this.kt(960|e>>>6),this.kt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.kt(480|e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e);else{const e=t.codePointAt(0);this.kt(240|e>>>18),this.kt(128|63&e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e)}}this.qt()}Ut(e){const t=this.Kt(e),n=wf(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Gt(e){const t=this.Kt(e),n=wf(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}zt(){this.jt(yf),this.jt(255)}Ht(){this.Jt(yf),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Nt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):t===yf?(this.jt(yf),this.jt(0)):this.jt(t)}kt(e){const t=255&e;0===t?(this.Jt(0),this.Jt(255)):t===yf?(this.Jt(yf),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ef{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class Af{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class _f{constructor(){this.Zt=new xf,this.Xt=new Ef(this.Zt),this.en=new Af(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return 0===e?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}class Sf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}nn(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Sf(this.indexId,this.documentKey,this.arrayValue,n)}}function Tf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=kf(e.arrayValue,t.arrayValue),0!==n?n:(n=kf(e.directionalValue,t.directionalValue),0!==n?n:hl.comparator(e.documentKey,t.documentKey)))}function kf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Cf{constructor(e){this.rn=new cu(((e,t)=>dl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const e=t;e.isInequality()?this.rn=this.rn.add(e):this._n.push(e)}}get an(){return this.rn.size>1}un(e){if(Os(e.collectionGroup===this.collectionId),this.an)return!1;const t=ml(e);if(void 0!==t&&!this.cn(t))return!1;const n=gl(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.cn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const e=this.rn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.ln(e,t)||!this.hn(this.sn[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.sn.length||!this.hn(this.sn[o++],e))return!1}return!0}Pn(){if(this.an)return null;let e=new cu(dl.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new vl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new vl(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new vl(n.field,"asc"===n.dir?0:1)));return new fl(fl.UNKNOWN_ID,this.collectionId,t,yl.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function If(e){var t,n;if(Os(e instanceof pd||e instanceof fd),e instanceof pd){if(e instanceof Cd){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>pd.create(e.field,"==",t))))||[];return fd.create(r,"or")}return e}const r=e.filters.map((e=>If(e)));return fd.create(r,e.op)}function Rf(e){if(0===e.getFilters().length)return[];const t=Mf(If(e));return Os(Pf(t)),Df(t)||Lf(t)?[t]:t.getFilters()}function Df(e){return e instanceof pd}function Lf(e){return e instanceof fd&&vd(e)}function Pf(e){return Df(e)||Lf(e)||function(e){if(e instanceof fd&&gd(e)){for(const t of e.getFilters())if(!Df(t)&&!Lf(t))return!1;return!0}return!1}(e)}function Mf(e){if(Os(e instanceof pd||e instanceof fd),e instanceof pd)return e;if(1===e.filters.length)return Mf(e.filters[0]);const t=e.filters.map((e=>Mf(e)));let n=fd.create(t,e.op);return n=jf(n),Pf(n)?n:(Os(n instanceof fd),Os(md(n)),Os(n.filters.length>1),n.filters.reduce(((e,t)=>Nf(e,t))))}function Nf(e,t){let n;return Os(e instanceof pd||e instanceof fd),Os(t instanceof pd||t instanceof fd),n=e instanceof pd?t instanceof pd?function(e,t){return fd.create([e,t],"and")}(e,t):Of(e,t):t instanceof pd?Of(t,e):function(e,t){if(Os(e.filters.length>0&&t.filters.length>0),md(e)&&md(t))return xd(e,t.getFilters());const n=gd(e)?e:t,r=gd(e)?t:e,i=n.filters.map((e=>Nf(e,r)));return fd.create(i,"or")}(e,t),jf(n)}function Of(e,t){if(md(t))return xd(t,e.getFilters());{const n=t.filters.map((t=>Nf(e,t)));return fd.create(n,"or")}}function jf(e){if(Os(e instanceof pd||e instanceof fd),e instanceof pd)return e;const t=e.getFilters();if(1===t.length)return jf(t[0]);if(yd(e))return e;const n=t.map((e=>jf(e))),r=[];return n.forEach((t=>{t instanceof pd?r.push(t):t instanceof fd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:fd.create(r,e.op)}class Ff{constructor(){this.Tn=new Uf}addToCollectionParentIndex(e,t){return this.Tn.add(t),Tl.resolve()}getCollectionParents(e,t){return Tl.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Tl.resolve()}deleteFieldIndex(e,t){return Tl.resolve()}deleteAllFieldIndexes(e){return Tl.resolve()}createTargetIndexes(e,t){return Tl.resolve()}getDocumentsMatchingTarget(e,t){return Tl.resolve(null)}getIndexType(e,t){return Tl.resolve(0)}getFieldIndexes(e,t){return Tl.resolve([])}getNextCollectionGroupToUpdate(e){return Tl.resolve(null)}getMinOffset(e,t){return Tl.resolve(xl.min())}getMinOffsetFromCollectionGroup(e,t){return Tl.resolve(xl.min())}updateCollectionGroup(e,t,n){return Tl.resolve()}updateIndexEntries(e,t){return Tl.resolve()}}class Uf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cu(cl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new cu(cl.comparator)).toArray()}}const Bf="IndexedDbIndexManager",$f=new Uint8Array(0);class Vf{constructor(e,t){this.databaseId=t,this.In=new Uf,this.En=new nh((e=>Pd(e)),((e,t)=>Md(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const i={collectionId:n,parent:Gl(r)};return Wf(e).put(i)}return Tl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[nl(t),""],!1,!0);return Wf(e).G(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ql(r.parent))}return n}))}addFieldIndex(e,t){const n=Hf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=qf(e);return i.next((e=>{n.put(uf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Hf(e),r=qf(e),i=zf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hf(e),n=zf(e),r=qf(e);return t.J().next((()=>n.J())).next((()=>r.J()))}createTargetIndexes(e,t){return Tl.forEach(this.dn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Cf(t).Pn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=zf(e);let r=!0;const i=new Map;return Tl.forEach(this.dn(t),(t=>this.An(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ph();const r=[];return Tl.forEach(i,((i,o)=>{Ds(Bf,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Pd(t)}`);const a=function(e,t){const n=ml(t);if(void 0===n)return null;for(const r of Od(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),s=function(e,t){const n=new Map;for(const r of gl(t))for(const t of Od(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of gl(t)){const t=0===i.kind?jd(e,i.fieldPath,e.startAt):Fd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new sd(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of gl(t)){const t=0===i.kind?Fd(e,i.fieldPath,e.endAt):jd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new sd(n,r)}(o,i),u=this.Rn(i,o,l),d=this.Rn(i,o,c),h=this.Vn(i,o,s),p=this.mn(i.indexId,a,u,l.inclusive,d,c.inclusive,h);return Tl.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=hl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Tl.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(t=0===e.filters.length?[e]:Rf(fd.create(e.filters,"and")).map((t=>Ld(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,r,i,o,a){const s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),c=[];for(let u=0;u<s;++u){const s=t?this.fn(t[u/l]):$f,d=this.gn(e,s,n[u%l],r),h=this.pn(e,s,i[u%l],o),p=a.map((t=>this.gn(e,s,t,!0)));c.push(...this.createRange(d,h,p))}return c}gn(e,t,n,r){const i=new Sf(e,hl.empty(),t,n);return r?i:i.nn()}pn(e,t,n,r){const i=new Sf(e,hl.empty(),t,n);return r?i.nn():i}An(e,t){const n=new Cf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.un(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.dn(t);return Tl.forEach(r,(t=>this.An(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new cu(dl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}yn(e,t){const n=new _f;for(const r of gl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.tn(r.kind);vf.xt.At(e,i)}return n.Yt()}fn(e){const t=new _f;return vf.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new _f;return vf.xt.At(zu(this.databaseId,t),n.tn(function(e){const t=gl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(null===n)return[];let r=[];r.push(new _f);let i=0;for(const o of gl(e)){const e=n[i++];for(const n of r)if(this.Sn(t,o.fieldPath)&&qu(e))r=this.bn(r,o,e);else{const t=n.tn(o.kind);vf.xt.At(e,t)}}return this.Dn(r)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new _f;n.seed(e.Yt()),vf.xt.At(o,n.tn(t.kind)),i.push(n)}return i}Sn(e,t){return!!e.filters.find((e=>e instanceof pd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Hf(e),r=qf(e);return(t?n.G(Lc,IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return Tl.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new yl(t.sequenceNumber,new xl(nf(t.readTime),new hl(Ql(t.documentKey)),t.largestBatchId)):yl.empty(),r=e.fields.map((e=>{let[t,n]=e;return new vl(dl.fromServerFormat(t),n)}));return new fl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Xs(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Hf(e),i=qf(e);return this.vn(e).next((e=>r.G(Lc,IDBKeyRange.bound(t,t)).next((t=>Tl.forEach(t,(t=>i.put(uf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Tl.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Tl.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Tl.forEach(i,(n=>this.Cn(e,t,n).next((t=>{const i=this.Fn(r,n);return t.isEqual(i)?Tl.resolve():this.Mn(e,r,n,t,i)})))))))}))}xn(e,t,n,r){return zf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,r){return zf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const r=zf(e);let i=new cu(Tf);return r.Z({index:Uc,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((e,r)=>{i=i.add(new Sf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Fn(e,t){let n=new cu(Tf);const r=this.yn(t,e);if(null==r)return n;const i=ml(t);if(null!=i){const o=e.data.field(i.fieldPath);if(qu(o))for(const i of o.arrayValue.values||[])n=n.add(new Sf(t.indexId,e.key,this.fn(i),r))}else n=n.add(new Sf(t.indexId,e.key,$f,r));return n}Mn(e,t,n,r,i){Ds(Bf,"Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),a=t.getIterator();let s=du(o),l=du(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const r=n(s,l);r<0?t=!0:r>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(r(l),l=du(a)):t?(i(s),s=du(o)):(s=du(o),l=du(a))}}(r,i,Tf,(r=>{o.push(this.xn(e,t,n,r))}),(r=>{o.push(this.On(e,t,n,r))})),Tl.waitFor(o)}vn(e){let t=1;return qf(e).Z({index:Nc,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Tf(e,t))).filter(((e,t,n)=>!t||0!==Tf(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Tf(o,e),i=Tf(o,t);if(0===n)r[0]=e.nn();else if(n>0&&i<0)r.push(o),r.push(o.nn());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Nn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,$f,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,$f,[]];i.push(IDBKeyRange.bound(e,t))}return i}Nn(e,t){return Tf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gf)}getMinOffset(e,t){return Tl.mapArray(this.dn(t),(t=>this.An(e,t).next((e=>e||Ns())))).next(Gf)}}function Wf(e){return nu(e,Tc)}function zf(e){return nu(e,jc)}function Hf(e){return nu(e,Dc)}function qf(e){return nu(e,Pc)}function Gf(e){Os(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;El(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xl(t.readTime,t.documentKey,n)}const Kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yf=41943040;class Qf{static withCacheSize(e){return new Qf(e,Qf.DEFAULT_COLLECTION_PERCENTILE,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Xf(e,t,n){const r=e.store(tc),i=e.store(lc),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=r.Z({range:a},((e,t,n)=>(s++,n.delete())));o.push(l.next((()=>{Os(1===s)})));const c=[];for(const u of n.mutations){const e=ac(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return Tl.waitFor(o).next((()=>c))}function Zf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ns();t=e.noDocument}return JSON.stringify(t).length}Qf.DEFAULT_COLLECTION_PERCENTILE=10,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qf.DEFAULT=new Qf(Yf,Qf.DEFAULT_COLLECTION_PERCENTILE,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qf.DISABLED=new Qf(-1,0,0);class Jf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Bn={}}static It(e,t,n,r){Os(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Jf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tm(e).Z({index:rc,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=nm(e),o=tm(e);return o.add({}).next((a=>{Os("number"==typeof a);const s=new Kh(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>jp(e.Tt,t))),i=n.mutations.map((t=>jp(e.Tt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),c=[];let u=new cu(((e,t)=>Xs(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ac(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,sc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Bn[a]=s.keys()})),Tl.waitFor(c).next((()=>s))}))}lookupMutationBatch(e,t){return tm(e).get(t).next((e=>e?(Os(e.userId===this.userId),rf(this.serializer,e)):null))}Ln(e,t){return this.Bn[t]?Tl.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return tm(e).Z({index:rc,range:r},((e,t,r)=>{t.userId===this.userId&&(Os(t.batchId>=n),i=rf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Vl;return tm(e).Z({index:rc,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Vl],[this.userId,Number.POSITIVE_INFINITY]);return tm(e).G(rc,t).next((e=>e.map((e=>rf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=oc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return nm(e).Z({range:r},((n,r,o)=>{const[a,s,l]=n,c=Ql(s);if(a===this.userId&&t.path.isEqual(c))return tm(e).get(l).next((e=>{if(!e)throw Ns();Os(e.userId===this.userId),i.push(rf(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cu(Xs);const r=[];return t.forEach((t=>{const i=oc(this.userId,t.path),o=IDBKeyRange.lowerBound(i),a=nm(e).Z({range:o},((e,r,i)=>{const[o,a,s]=e,l=Ql(a);o===this.userId&&t.path.isEqual(l)?n=n.add(s):i.done()}));r.push(a)})),Tl.waitFor(r).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=oc(this.userId,n),o=IDBKeyRange.lowerBound(i);let a=new cu(Xs);return nm(e).Z({range:o},((e,t,i)=>{const[o,s,l]=e,c=Ql(s);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):i.done()})).next((()=>this.kn(e,a)))}kn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(tm(e).get(t).next((e=>{if(null===e)throw Ns();Os(e.userId===this.userId),n.push(rf(this.serializer,e))})))})),Tl.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Xf(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),Tl.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Tl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return nm(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ql(e[1]);r.push(t)}else n.done()})).next((()=>{Os(0===r.length)}))}))}containsKey(e,t){return em(e,this.userId,t)}Qn(e){return rm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Vl,lastStreamToken:""}))}}function em(e,t,n){const r=oc(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return nm(e).Z({range:o,Y:!0},((e,n,r)=>{const[o,s,l]=e;o===t&&s===i&&(a=!0),r.done()})).next((()=>a))}function tm(e){return nu(e,tc)}function nm(e){return nu(e,lc)}function rm(e){return nu(e,ec)}class im{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new im(0)}static Kn(){return new im(-1)}}class om{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new im(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((e=>al.fromTimestamp(new ol(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Gn(e,r))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>am(e).delete(t.targetId))).next((()=>this.Wn(e))).next((t=>(Os(t.targetCount>0),t.targetCount-=1,this.Gn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return am(e).Z(((o,a)=>{const s=of(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>Tl.waitFor(i))).next((()=>r))}forEachTarget(e,t){return am(e).Z(((e,n)=>{const r=of(n);t(r)}))}Wn(e){return sm(e).get(_c).next((e=>(Os(null!==e),e)))}Gn(e,t){return sm(e).put(_c,t)}zn(e,t){return am(e).put(af(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Pd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return am(e).Z({range:r,index:yc},((e,n,r)=>{const o=of(n);Md(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=lm(e);return t.forEach((t=>{const o=Gl(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Tl.waitFor(r)}removeMatchingKeys(e,t,n){const r=lm(e);return Tl.forEach(t,(t=>{const i=Gl(t.path);return Tl.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=lm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lm(e);let i=ph();return r.Z({range:n,Y:!0},((e,t,n)=>{const r=Ql(e[1]),o=new hl(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Gl(t.path),r=IDBKeyRange.bound([n],[nl(n)],!1,!0);let i=0;return lm(e).Z({index:Ec,Y:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}lt(e,t){return am(e).get(t).next((e=>e?of(e):null))}}function am(e){return nu(e,vc)}function sm(e){return nu(e,Sc)}function lm(e){return nu(e,wc)}const cm="LruGarbageCollector",um=1048576;function dm(e,t){let[n,r]=e,[i,o]=t;const a=Xs(n,i);return 0===a?Xs(r,o):a}class hm{constructor(e){this.Hn=e,this.buffer=new cu(dm),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();dm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Ds(cm,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pl(e)?Ds(cm,"Ignoring IndexedDB error during garbage collection: ",e):await Sl(e)}await this.er(3e5)}))}}class fm{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Tl.resolve($l.ae);const n=new hm(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ds("LruGarbageCollector","Garbage collection skipped; disabled"),Tl.resolve(Kf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ds("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kf):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,o,a,s,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ds("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Rs()<=ln.DEBUG&&Ds("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(s-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-c}ms`),Tl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function mm(e,t){return new fm(e,t)}class gm{constructor(e,t){this.db=e,this.garbageCollector=mm(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((e,n)=>t(n)))}addReference(e,t,n){return vm(e,n)}removeReference(e,t,n){return vm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return vm(e,t)}ar(e,t){return function(e,t){let n=!1;return rm(e).X((r=>em(e,r,t).next((e=>(e&&(n=!0),Tl.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this._r(e,((o,a)=>{if(a<=t){const t=this.ar(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,al.min()),lm(e).delete(function(e){return[0,Gl(e.path)]}(o)))))}));r.push(t)}})).next((()=>Tl.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return vm(e,t)}_r(e,t){const n=lm(e);let r,i=$l.ae;return n.Z({index:Ec},((e,n)=>{let[o,a]=e,{path:s,sequenceNumber:l}=n;0===o?(i!==$l.ae&&t(new hl(Ql(r)),i),i=l,r=s):i=$l.ae})).next((()=>{i!==$l.ae&&t(new hl(Ql(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vm(e,t){return lm(e).put(function(e,t){return{targetId:0,path:Gl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ym{constructor(){this.changes=new nh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ad.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Am(e).put(n)}removeEntry(e,t,n){return Am(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ef(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=ad.newInvalidDocument(t);return Am(e).Z({index:dc,range:IDBKeyRange.only(_m(t))},((e,r)=>{n=this.cr(t,r)})).next((()=>n))}lr(e,t){let n={size:0,document:ad.newInvalidDocument(t)};return Am(e).Z({index:dc,range:IDBKeyRange.only(_m(t))},((e,r)=>{n={document:this.cr(t,r),size:Zf(r)}})).next((()=>n))}getEntries(e,t){let n=ih();return this.hr(e,t,((e,t)=>{const r=this.cr(e,t);n=n.insert(e,r)})).next((()=>n))}Pr(e,t){let n=ih(),r=new au(hl.comparator);return this.hr(e,t,((e,t)=>{const i=this.cr(e,t);n=n.insert(e,i),r=r.insert(e,Zf(t))})).next((()=>({documents:n,Tr:r})))}hr(e,t,n){if(t.isEmpty())return Tl.resolve();let r=new cu(Tm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(_m(r.first()),_m(r.last())),o=r.getIterator();let a=o.getNext();return Am(e).Z({index:dc,range:i},((e,t,r)=>{const i=hl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Tm(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.W(_m(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ef(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Am(e).G(IDBKeyRange.bound(a,s,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=ih();for(const i of e){const e=this.cr(hl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Zd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ih();const o=Sm(t,n),a=Sm(t,xl.max());return Am(e).Z({index:pc,range:IDBKeyRange.bound(o,a,!0)},((e,t,n)=>{const o=this.cr(hl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new xm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Em(e).get(gc).next((e=>(Os(!!e),e)))}ur(e,t){return Em(e).put(gc,t)}cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Op(e.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=hl.fromSegments(t.noDocument.path),r=nf(t.noDocument.readTime);n=ad.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ns();{const e=hl.fromSegments(t.unknownDocument.path),r=nf(t.unknownDocument.version);n=ad.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ol(e[0],e[1]);return al.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(al.min()))return e}return ad.newInvalidDocument(e)}}function wm(e){return new bm(e)}class xm extends ym{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new nh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new cu(((e,t)=>Xs(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Er.get(i);if(t.push(this.Ir.removeEntry(e,i,a.readTime)),o.isValidDocument()){const s=Jp(this.Ir.serializer,o);r=r.add(i.path.popLast());const l=Zf(s);n+=l-a.size,t.push(this.Ir.addEntry(e,i,s))}else if(n-=a.size,this.trackRemovals){const n=Jp(this.Ir.serializer,o.convertToNoDocument(al.min()));t.push(this.Ir.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Ir.updateMetadata(e,n)),Tl.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((e=>(this.Er.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((e=>{let{documents:t,Tr:n}=e;return n.forEach(((e,n)=>{this.Er.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Em(e){return nu(e,mc)}function Am(e){return nu(e,cc)}function _m(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Sm(e,t){const n=t.documentKey.path.toArray();return[e,ef(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Xs(n[o],r[o]),i)return i;return i=Xs(n.length,r.length),i||(i=Xs(n[n.length-2],r[r.length-2]),i||Xs(n[n.length-1],r[r.length-1]))}class km{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fh(n.mutation,e,hu.empty(),ol.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ph()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ph();const r=lh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ah();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=lh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ph())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ih();const o=uh(),a=uh();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Vh)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Fh(a.mutation,t,a.mutation.getFieldMask(),ol.now())):o.set(t.key,hu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new km(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=uh();let r=new au(((e,t)=>e-t)),i=ph();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||hu.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||ph()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=ch();l.forEach((e=>{if(!i.has(e)){const r=Oh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return Tl.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return hl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Tl.resolve(lh());let a=pl,s=i;return o.next((t=>Tl.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Tl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,ph()))).next((e=>({batchId:a,changes:sh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hl(t)).next((e=>{let t=ah();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=ah();return this.indexManager.getCollectionParents(e,i).next((a=>Tl.forEach(a,(a=>{const s=function(e,t){return new Ud(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ad.newInvalidDocument(r)))}));let n=ah();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Fh(o.mutation,r,hu.empty(),ol.now()),Zd(t,r)&&(n=n.insert(e,r))})),n}))}}class Im{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Tl.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Sp(e.createTime)}}(t)),Tl.resolve()}getNamedQuery(e,t){return Tl.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:sf(e.bundledQuery),readTime:Sp(e.readTime)}}(t)),Tl.resolve()}}class Rm{constructor(){this.overlays=new au(hl.comparator),this.Rr=new Map}getOverlay(e,t){return Tl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=lh();return Tl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),Tl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),Tl.resolve()}getOverlaysForCollection(e,t,n){const r=lh(),i=t.length+1,o=new hl(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new au(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=lh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=lh(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Tl.resolve(a)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Qh(t,n));let i=this.Rr.get(t);void 0===i&&(i=ph(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class Dm{constructor(){this.sessionToken=fu.EMPTY_BYTE_STRING}getSessionToken(e){return Tl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Tl.resolve()}}class Lm{constructor(){this.Vr=new cu(Pm.mr),this.gr=new cu(Pm.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Pm(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new Pm(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new hl(new cl([])),n=new Pm(t,e),r=new Pm(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new hl(new cl([])),n=new Pm(t,e),r=new Pm(t,e+1);let i=ph();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Pm(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Pm{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return hl.comparator(e.key,t.key)||Xs(e.Cr,t.Cr)}static pr(e,t){return Xs(e.Cr,t.Cr)||hl.comparator(e.key,t.key)}}class Mm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new cu(Pm.mr)}checkEmpty(e){return Tl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Kh(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new Pm(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Tl.resolve(o)}lookupMutationBatch(e,t){return Tl.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return Tl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Tl.resolve(0===this.mutationQueue.length?Vl:this.Fr-1)}getAllMutationBatches(e){return Tl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Pm(t,0),r=new Pm(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),Tl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cu(Xs);return t.forEach((e=>{const t=new Pm(e,0),r=new Pm(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),Tl.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;hl.isDocumentKey(i)||(i=i.child(""));const o=new Pm(new hl(i),0);let a=new cu(Xs);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Cr)),!0)}),o),Tl.resolve(this.Br(a))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Os(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Tl.forEach(t.mutations,(r=>{const i=new Pm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new Pm(t,0),r=this.Mr.firstAfterOrEqual(n);return Tl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tl.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nm{constructor(e){this.kr=e,this.docs=new au(hl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tl.resolve(n?n.document.mutableCopy():ad.newInvalidDocument(t))}getEntries(e,t){let n=ih();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ad.newInvalidDocument(e))})),Tl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ih();const o=t.path,a=new hl(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||El(wl(a),n)<=0||(r.has(a.key)||Zd(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Tl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ns()}qr(e,t){return Tl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Om(this)}getSize(e){return Tl.resolve(this.size)}}class Om extends ym{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),Tl.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class jm{constructor(e){this.persistence=e,this.Qr=new nh((e=>Pd(e)),Md),this.lastRemoteSnapshotVersion=al.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Lm,this.targetCount=0,this.Kr=im.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),Tl.resolve()}getLastRemoteSnapshotVersion(e){return Tl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tl.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Tl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Tl.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new im(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Tl.resolve()}updateTargetData(e,t){return this.zn(t),Tl.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Tl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Tl.waitFor(i).next((()=>r))}getTargetCount(e){return Tl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Tl.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),Tl.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Tl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Tl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return Tl.resolve(n)}containsKey(e,t){return Tl.resolve(this.Ur.containsKey(t))}}class Fm{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new $l(0),this.zr=!1,this.zr=!0,this.jr=new Dm,this.referenceDelegate=e(this),this.Hr=new jm(this),this.indexManager=new Ff,this.remoteDocumentCache=function(e){return new Nm(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Zp(t),this.Yr=new Im(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Mm(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ds("MemoryPersistence","Starting transaction:",e);const r=new Um(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return Tl.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Um extends _l{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.ti=new Lm,this.ni=null}static ri(e){return new Bm(e)}get ii(){if(this.ni)return this.ni;throw Ns()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Tl.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Tl.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Tl.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tl.forEach(this.ii,(n=>{const r=hl.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,al.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return Tl.or([()=>Tl.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class $m{constructor(e,t){this.persistence=e,this.oi=new nh((e=>Gl(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=mm(this,t)}static ri(e,t){return new $m(e,t)}Zr(){}Xr(e){return Tl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return Tl.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?Tl.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,al.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Tl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Tl.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Tl.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Tl.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wu(e.data.value)),t}ar(e,t,n){return Tl.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return Tl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vm{constructor(e){this.serializer=e}B(e,t,n,r){const i=new Cl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Zl)}(e),function(e){e.createObjectStore(ec,{keyPath:"userId"});e.createObjectStore(tc,{keyPath:nc,autoIncrement:!0}).createIndex(rc,ic,{unique:!0}),e.createObjectStore(lc)}(e),Wm(e),function(e){e.createObjectStore(Xl)}(e));let o=Tl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(wc),e.deleteObjectStore(vc),e.deleteObjectStore(Sc)}(e),Wm(e)),o=o.next((()=>function(e){const t=e.store(Sc),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:al.min().toTimestamp(),targetCount:0};return t.put(_c,n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store(tc).G().next((n=>{e.deleteObjectStore(tc),e.createObjectStore(tc,{keyPath:nc,autoIncrement:!0}).createIndex(rc,ic,{unique:!0});const r=t.store(tc),i=n.map((e=>r.put(e)));return Tl.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore(Cc,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this._i(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore(mc)}(e),this.ai(i))))),n<7&&r>=7&&(o=o.next((()=>this.ui(i)))),n<8&&r>=8&&(o=o.next((()=>this.ci(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.li(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore(Ic,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Rc,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore($c,{keyPath:Vc});t.createIndex(Wc,zc,{unique:!1}),t.createIndex(Hc,qc,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore(cc,{keyPath:uc});t.createIndex(dc,hc),t.createIndex(pc,fc)}(e))).next((()=>this.hi(e,i))).next((()=>e.deleteObjectStore(Xl)))),n<14&&r>=14&&(o=o.next((()=>this.Pi(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore(Dc,{keyPath:"indexId",autoIncrement:!0}).createIndex(Lc,"collectionGroup",{unique:!1});e.createObjectStore(Pc,{keyPath:Mc}).createIndex(Nc,Oc,{unique:!1});e.createObjectStore(jc,{keyPath:Fc}).createIndex(Uc,Bc,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore(Pc).clear()})).next((()=>{t.objectStore(jc).clear()}))),n<17&&r>=17&&(o=o.next((()=>{!function(e){e.createObjectStore(Gc,{keyPath:"name"})}(e)}))),o}ai(e){let t=0;return e.store(Xl).Z(((e,n)=>{t+=Zf(n)})).next((()=>{const n={byteSize:t};return e.store(mc).put(gc,n)}))}_i(e){const t=e.store(ec),n=e.store(tc);return t.G().next((t=>Tl.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,Vl],[t.userId,t.lastAcknowledgedBatchId]);return n.G(rc,r).next((n=>Tl.forEach(n,(n=>{Os(n.userId===t.userId);const r=rf(this.serializer,n);return Xf(e,t.userId,r).next((()=>{}))}))))}))))}ui(e){const t=e.store(wc),n=e.store(Xl);return e.store(Sc).get(_c).next((e=>{const r=[];return n.Z(((n,i)=>{const o=new cl(n),a=function(e){return[0,Gl(e)]}(o);r.push(t.get(a).next((n=>n?Tl.resolve():(n=>t.put({targetId:0,path:Gl(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Tl.waitFor(r)))}))}ci(e,t){e.createObjectStore(Tc,{keyPath:kc});const n=t.store(Tc),r=new Uf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Gl(r)})}};return t.store(Xl).Z({Y:!0},((e,t)=>{const n=new cl(e);return i(n.popLast())})).next((()=>t.store(lc).Z({Y:!0},((e,t)=>{let[n,r,o]=e;const a=Ql(r);return i(a.popLast())}))))}li(e){const t=e.store(vc);return t.Z(((e,n)=>{const r=of(n),i=af(this.serializer,r);return t.put(i)}))}hi(e,t){const n=t.store(Xl),r=[];return n.Z(((e,n)=>{const i=t.store(cc),o=function(e){return e.document?new hl(cl.fromString(e.document.name).popFirst(5)):e.noDocument?hl.fromSegments(e.noDocument.path):e.unknownDocument?hl.fromSegments(e.unknownDocument.path):Ns()}(n).path.toArray(),a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Tl.waitFor(r)))}Pi(e,t){const n=t.store(tc),r=wm(this.serializer),i=new Fm(Bm.ri,this.serializer.Tt);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ph();rf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Tl.forEach(n,((e,n)=>{const o=new ks(n),a=ff.It(this.serializer,o),s=i.getIndexManager(o),l=Jf.It(o,this.serializer,s,i.referenceDelegate);return new Cm(r,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new tu(t,$l.ae),e).next()}))}))}}function Wm(e){e.createObjectStore(wc,{keyPath:xc}).createIndex(Ec,Ac,{unique:!0}),e.createObjectStore(vc,{keyPath:"targetId"}).createIndex(yc,bc,{unique:!0}),e.createObjectStore(Sc)}const zm="IndexedDbPersistence",Hm=18e5,qm=5e3,Gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Km="main";class Ym{constructor(e,t,n,r,i,o,a,s,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=i,this.window=o,this.document=a,this.Ii=l,this.Ei=c,this.di=u,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Ym.D())throw new Us(Fs.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gm(this,r),this.gi=t+Km,this.serializer=new Zp(s),this.pi=new Il(this.gi,this.di,new Vm(this.serializer)),this.jr=new gf,this.Hr=new om(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wm(this.serializer),this.Yr=new df,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,!1===c&&Ls(zm,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Us(Fs.FAILED_PRECONDITION,Gm);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new $l(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(Pl(e))return Ds(zm,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ds(zm,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return Qm(e).get(Jl).next((e=>Tl.resolve(this.Ni(e))))}Bi(e){return Xm(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Hm)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=nu(e,Cc);return t.G().next((e=>{const n=this.qi(e,Hm),r=e.filter((e=>-1===n.indexOf(e)));return Tl.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?Tl.resolve(!0):Qm(e).get(Jl).next((t=>{if(null!==t&&this.ki(t.leaseTimestampMs,qm)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Us(Fs.FAILED_PRECONDITION,Gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xm(e).G().next((e=>void 0===this.qi(e,qm).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ds(zm,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Zl,Cc],(e=>{const t=new tu(e,$l.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((e=>this.ki(e.updateTimeMs,t)&&!this.$i(e.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>Xm(e).G().next((e=>this.qi(e,Hm).map((e=>e.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Jf.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Vf(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return ff.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ds(zm,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?eu:16===e?Jc:15===e?Zc:14===e?Xc:13===e?Qc:12===e?Yc:11===e?Kc:void Ns()}(this.di);let o;return this.pi.runTransaction(e,r,i,(r=>(o=new tu(r,this.Gr?this.Gr.next():$l.ae),"readwrite-primary"===t?this.Fi(o).next((e=>!!e||this.Mi(o))).next((t=>{if(!t)throw Ls(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new Us(Fs.FAILED_PRECONDITION,Al);return n(o)})).next((e=>this.Oi(o).next((()=>e)))):this.ji(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ji(e){return Qm(e).get(Jl).next((e=>{if(null!==e&&this.ki(e.leaseTimestampMs,qm)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Us(Fs.FAILED_PRECONDITION,Gm)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qm(e).put(Jl,t)}static D(){return Il.D()}xi(e){const t=Qm(e);return t.get(Jl).next((e=>this.Ni(e)?(Ds(zm,"Releasing primary lease."),t.delete(Jl)):Tl.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ls(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground="visible"===this.document.visibilityState)}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;Dt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=null!==(null===(t=this.yi)||void 0===t?void 0:t.getItem(this.Qi(e)));return Ds(zm,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ls(zm,"Failed to get zombied client id.",e),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(ok){Ls("Failed to set zombie client id.",ok)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch(ok){}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qm(e){return nu(e,Zl)}function Xm(e){return nu(e,Cc)}function Zm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=ph(),r=ph();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jm(e,t.fromCache,n,r)}}class eg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tg{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Dt()?8:Rl(kt())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new eg;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(Rs()<=ln.DEBUG&&Ds("QueryEngine","SDK will not create cache indexes for query:",Xd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Tl.resolve()):(Rs()<=ln.DEBUG&&Ds("QueryEngine","Query:",Xd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Rs()<=ln.DEBUG&&Ds("QueryEngine","The SDK decides to create cache indexes for query:",Xd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hd(t))):Tl.resolve())}rs(e,t){if(Vd(t))return Tl.resolve(null);let n=Hd(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Kd(t,null,"F"),n=Hd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ph(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.cs(t,r);return this.ls(t,o,i,n.readTime)?this.rs(e,Kd(t,null,"F")):this.hs(e,o,t,n)}))))})))))}ss(e,t,n,r){return Vd(t)||r.isEqual(al.min())?Tl.resolve(null):this.ns.getDocuments(e,n).next((i=>{const o=this.cs(t,i);return this.ls(t,o,n,r)?Tl.resolve(null):(Rs()<=ln.DEBUG&&Ds("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xd(t)),this.hs(e,o,t,bl(r,pl)).next((e=>e)))}))}cs(e,t){let n=new cu(eh(e));return t.forEach(((t,r)=>{Zd(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return Rs()<=ln.DEBUG&&Ds("QueryEngine","Using full collection scan to execute query:",Xd(t)),this.ns.getDocumentsMatchingQuery(e,t,xl.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const ng="LocalStore";class rg{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new au(Xs),this.Is=new nh((e=>Pd(e)),Md),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cm(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function ig(e,t,n,r){return new rg(e,t,n,r)}async function og(e,t){const n=js(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=ph();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function ag(e){const t=js(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function sg(e,t,n){let r=ph(),i=ph();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ih();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(al.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Ds(ng,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Vs:r,fs:i}}))}function lg(e,t){const n=js(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Vl),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function cg(e,t){const n=js(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,Tl.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Xp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function ug(e,t,n){const r=js(e),i=r.Ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Pl(e))throw e;Ds(ng,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function dg(e,t,n){const r=js(e);let i=al.min(),o=ph();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=js(e),i=r.Is.get(n);return void 0!==i?Tl.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Hd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:al.min(),n?o:ph()))).next((e=>(fg(r,Jd(t),e),{documents:e,gs:o})))))}function hg(e,t){const n=js(e),r=js(n.Hr),i=n.Ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.lt(e,t).next((e=>e?e.target:null))))}function pg(e,t){const n=js(e),r=n.Es.get(t)||al.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ds.getAllFromCollectionGroup(e,t,bl(r,pl),Number.MAX_SAFE_INTEGER))).then((e=>(fg(n,t,e),e)))}function fg(e,t,n){let r=e.Es.get(t)||al.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}const mg="firestore_clients";function gg(e,t){return`${mg}_${e}_${t}`}const vg="firestore_mutations";function yg(e,t,n){let r=`${vg}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const bg="firestore_targets";function wg(e,t){return`${bg}_${e}_${t}`}const xg="SharedClientState";class Eg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ss(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Us(r.error.code,r.error.message))),o?new Eg(e,t,r.state,i):(Ls(xg,`Failed to parse mutation state for ID '${t}': ${n}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ag{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ss(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Us(n.error.code,n.error.message))),i?new Ag(e,n.state,r):(Ls(xg,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=mh();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Hl(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new _g(e,i):(Ls(xg,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sg{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Sg(t.clientId,t.onlineState):(Ls(xg,`Failed to parse online state: ${e}`),null)}}class Tg{constructor(){this.activeTargetIds=mh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kg{constructor(e,t,n,r,i){this.window=e,this.Ti=t,this.persistenceKey=n,this.Cs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new au(Xs),this.started=!1,this.Os=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ns=gg(this.persistenceKey,this.Cs),this.Bs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Tg),this.Ls=new RegExp(`^${mg}_${o}_([^_]*)$`),this.ks=new RegExp(`^${vg}_${o}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${bg}_${o}_(\\d+)$`),this.Qs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.$s=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const n of e){if(n===this.Cs)continue;const e=this.getItem(gg(this.persistenceKey,n));if(e){const t=_g.Ss(n,e);t&&(this.xs=this.xs.insert(t.clientId,t))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const e=this.Ks(t);e&&this.Ws(e)}for(const n of this.Os)this.Ms(n);this.Os=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,n){this.zs(e,t,n),this.js(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(wg(this.persistenceKey,e));if(t){const r=Ag.Ss(e,t);r&&(n=r.state)}}return t&&this.Hs.Ds(e),this.Us(),n}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wg(this.persistenceKey,e))}updateQueryState(e,t,n){this.Js(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.js(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ds(xg,"READ",e,t),t}setItem(e,t){Ds(xg,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ds(xg,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(Ds(xg,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Ls("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ls.test(t.key)){if(null==t.newValue){const e=this.Xs(t.key);return this.eo(e,null)}{const e=this.no(t.key,t.newValue);if(e)return this.eo(e.clientId,e)}}else if(this.ks.test(t.key)){if(null!==t.newValue){const e=this.ro(t.key,t.newValue);if(e)return this.io(e)}}else if(this.qs.test(t.key)){if(null!==t.newValue){const e=this.so(t.key,t.newValue);if(e)return this.oo(e)}}else if(t.key===this.Qs){if(null!==t.newValue){const e=this.Ks(t.newValue);if(e)return this.Ws(e)}}else if(t.key===this.Bs){const e=function(e){let t=$l.ae;if(null!=e)try{const n=JSON.parse(e);Os("number"==typeof n),t=n}catch(e){Ls(xg,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==$l.ae&&this.sequenceNumberHandler(e)}else if(t.key===this.$s){const e=this._o(t.newValue);await Promise.all(e.map((e=>this.syncEngine.ao(e))))}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,n){const r=new Eg(this.currentUser,e,t,n),i=yg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.bs())}js(e){const t=yg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,n){const r=wg(this.persistenceKey,e),i=new Ag(e,t,n);this.setItem(r,i.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const n=this.Xs(e);return _g.Ss(n,t)}ro(e,t){const n=this.ks.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Eg.Ss(new ks(i),r,t)}so(e,t){const n=this.qs.exec(e),r=Number(n[1]);return Ag.Ss(r,t)}Ks(e){return Sg.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);Ds(xg,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const n=t?this.xs.insert(e,t):this.xs.remove(e),r=this.Gs(this.xs),i=this.Gs(n),o=[],a=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||a.push(e)})),this.syncEngine.lo(o,a).then((()=>{this.xs=n}))}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=mh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Cg{constructor(){this.ho=new Tg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Tg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ig{To(e){}shutdown(){}}const Rg="ConnectivityMonitor";class Dg{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ds(Rg,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ds(Rg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Lg=null;function Pg(){return null===Lg?Lg=268435456+Math.round(2147483648*Math.random()):Lg++,"0x"+Lg.toString(16)}const Mg="RestConnection",Ng={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Og{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===ku?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const o=Pg(),a=this.bo(e,t.toUriEncodedString());Ds(Mg,`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(s,r,i),this.vo(e,a,s,n).then((t=>(Ds(Mg,`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw Ps(Mg,`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}Co(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Ng[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class jg{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Fg="WebChannelConnection";class Ug extends Og{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Pg();return new Promise(((o,a)=>{const s=new ms;s.setWithCredentials(!0),s.listenOnce(vs.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case ys.NO_ERROR:const t=s.getResponseJson();Ds(Fg,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case ys.TIMEOUT:Ds(Fg,`RPC '${e}' ${i} timed out`),a(new Us(Fs.DEADLINE_EXCEEDED,"Request time out"));break;case ys.HTTP_ERROR:const n=s.getStatus();if(Ds(Fg,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fs).indexOf(t)>=0?t:Fs.UNKNOWN}(t.status);a(new Us(e,t.message))}else a(new Us(Fs.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Us(Fs.UNAVAILABLE,"Connection failed."));break;default:Ns()}}finally{Ds(Fg,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Ds(Fg,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Pg(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Es(),a=xs(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");Ds(Fg,`Creating RPC '${e}' stream ${r}: ${c}`,s);const u=o.createWebChannel(c,s);let d=!1,h=!1;const p=new jg({Fo:t=>{h?Ds(Fg,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Ds(Fg,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Ds(Fg,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,gs.EventType.OPEN,(()=>{h||(Ds(Fg,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),f(u,gs.EventType.CLOSE,(()=>{h||(h=!0,Ds(Fg,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),f(u,gs.EventType.ERROR,(t=>{h||(h=!0,Ps(Fg,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new Us(Fs.UNAVAILABLE,"The operation could not be completed")))})),f(u,gs.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Os(!!i);const o=i,a=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Ds(Fg,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Zh[e];if(void 0!==t)return tp(t)}(t),i=a.message;void 0===n&&(n=Fs.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.Uo(new Us(n,i)),u.close()}else Ds(Fg,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),f(a,ws.STAT_EVENT,(t=>{t.stat===bs.PROXY?Ds(Fg,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===bs.NOPROXY&&Ds(Fg,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Bg(){return"undefined"!=typeof window?window:null}function $g(){return"undefined"!=typeof document?document:null}function Vg(e){return new wp(e,!0)}class Wg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Ds("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const zg="PersistentStream";class Hg{constructor(e,t,n,r,i,o,a,s){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Wg(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===Fs.RESOURCE_EXHAUSTED?(Ls(t.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Fs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new Us(Fs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Ds(zg,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Ds(zg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qg extends Hg{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ns()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Os(void 0===t||"string"==typeof t),fu.fromBase64String(t||"")):(Os(void 0===t||t instanceof Buffer||t instanceof Uint8Array),fu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Fs.UNKNOWN:tp(e.code);return new Us(t,e.message||"")}(a);n=new hp(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rp(e,r.document.name),o=Sp(r.document.updateTime),a=r.document.createTime?Sp(r.document.createTime):al.min(),s=new id({mapValue:{fields:r.document.fields}}),l=ad.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new up(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Rp(e,r.document),o=r.readTime?Sp(r.readTime):al.min(),a=ad.newNoDocument(i,o),s=r.removedTargetIds||[];n=new up([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Rp(e,r.document),o=r.removedTargetIds||[];n=new up([],o,i,null)}else{if(!("filter"in t))return Ns();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Xh(r,i),a=e.targetId;n=new dp(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return al.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?al.min():t.readTime?Sp(t.readTime):al.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Pp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nd(r)?{documents:Up(e,r)}:{query:Bp(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ap(e,t.resumeToken);const r=xp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(al.min())>0){n.readTime=Ep(e,t.snapshotVersion.toTimestamp());const r=xp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ns()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Pp(this.serializer),t.removeTarget=e,this.I_(t)}}class Gg extends Hg{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Os(!!e.streamToken),this.lastStreamToken=e.streamToken,Os(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Os(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Os(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Sp(e.updateTime):Sp(t);return n.isEqual(al.min())&&(n=Sp(t)),new Lh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Sp(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Pp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>jp(this.serializer,e)))};this.I_(t)}}class Kg{}class Yg extends Kg{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Us(Fs.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection.So(e,kp(t,n),r,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Us(Fs.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[a,s]=o;return this.connection.Co(e,kp(t,n),r,a,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Us(Fs.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Qg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ls(t),this.N_=!1):Ds("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Xg="RemoteStore";class Zg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{sv(this)&&(Ds(Xg,"Restarting streams for network reachability change."),await async function(e){const t=js(e);t.W_.add(4),await ev(t),t.j_.set("Unknown"),t.W_.delete(4),await Jg(t)}(this))}))})),this.j_=new Qg(n,r)}}async function Jg(e){if(sv(e))for(const t of e.G_)await t(!0)}async function ev(e){for(const t of e.G_)await t(!1)}function tv(e,t){const n=js(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),av(n)?ov(n):Tv(n).c_()&&rv(n,t))}function nv(e,t){const n=js(e),r=Tv(n);n.K_.delete(t),r.c_()&&iv(n,t),0===n.K_.size&&(r.c_()?r.P_():sv(n)&&n.j_.set("Unknown"))}function rv(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(al.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tv(e).y_(t)}function iv(e,t){e.H_.Ne(t),Tv(e).w_(t)}function ov(e){e.H_=new fp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Tv(e).start(),e.j_.B_()}function av(e){return sv(e)&&!Tv(e).u_()&&e.K_.size>0}function sv(e){return 0===js(e).W_.size}function lv(e){e.H_=void 0}async function cv(e){e.j_.set("Online")}async function uv(e){e.K_.forEach(((t,n)=>{rv(e,t)}))}async function dv(e,t){lv(e),av(e)?(e.j_.q_(t),ov(e)):e.j_.set("Unknown")}async function hv(e,t,n){if(e.j_.set("Online"),t instanceof hp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){Ds(Xg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await pv(e,n)}else if(t instanceof up?e.H_.We(t):t instanceof dp?e.H_.Ze(t):e.H_.je(t),!n.isEqual(al.min()))try{const t=await ag(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(fu.EMPTY_BYTE_STRING,r.snapshotVersion)),iv(e,t);const i=new Xp(r.target,t,n,r.sequenceNumber);rv(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ds(Xg,"Failed to raise snapshot:",t),await pv(e,t)}}async function pv(e,t,n){if(!Pl(t))throw t;e.W_.add(1),await ev(e),e.j_.set("Offline"),n||(n=()=>ag(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ds(Xg,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Jg(e)}))}function fv(e,t){return t().catch((n=>pv(e,n,t)))}async function mv(e){const t=js(e),n=kv(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Vl;for(;gv(t);)try{const e=await lg(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,vv(t,e)}catch(e){await pv(t,e)}yv(t)&&bv(t)}function gv(e){return sv(e)&&e.U_.length<10}function vv(e,t){e.U_.push(t);const n=kv(e);n.c_()&&n.S_&&n.b_(t.mutations)}function yv(e){return sv(e)&&!kv(e).u_()&&e.U_.length>0}function bv(e){kv(e).start()}async function wv(e){kv(e).C_()}async function xv(e){const t=kv(e);for(const n of e.U_)t.b_(n.mutations)}async function Ev(e,t,n){const r=e.U_.shift(),i=Yh.from(r,t,n);await fv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await mv(e)}async function Av(e,t){t&&kv(e).S_&&await async function(e,t){if(function(e){return ep(e)&&e!==Fs.ABORTED}(t.code)){const n=e.U_.shift();kv(e).h_(),await fv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await mv(e)}}(e,t),yv(e)&&bv(e)}async function _v(e,t){const n=js(e);n.asyncQueue.verifyOperationInProgress(),Ds(Xg,"RemoteStore received new credentials");const r=sv(n);n.W_.add(3),await ev(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Jg(n)}async function Sv(e,t){const n=js(e);t?(n.W_.delete(2),await Jg(n)):t||(n.W_.add(2),await ev(n),n.j_.set("Unknown"))}function Tv(e){return e.J_||(e.J_=function(e,t,n){const r=js(e);return r.M_(),new qg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:cv.bind(null,e),No:uv.bind(null,e),Lo:dv.bind(null,e),p_:hv.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),av(e)?ov(e):e.j_.set("Unknown")):(await e.J_.stop(),lv(e))}))),e.J_}function kv(e){return e.Y_||(e.Y_=function(e,t,n){const r=js(e);return r.M_(),new Gg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:wv.bind(null,e),Lo:Av.bind(null,e),D_:xv.bind(null,e),v_:Ev.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await mv(e)):(await e.Y_.stop(),e.U_.length>0&&(Ds(Xg,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class Cv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Cv(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Us(Fs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(e,t){if(Ls("AsyncQueue",`${t}: ${e}`),Pl(e))return new Us(Fs.UNAVAILABLE,`${t}: ${e}`);throw e}class Rv{static emptySet(e){return new Rv(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||hl.comparator(t.key,n.key):(e,t)=>hl.comparator(e.key,t.key),this.keyedMap=ah(),this.sortedSet=new au(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Rv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Dv{constructor(){this.Z_=new au(hl.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ns():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Lv{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Lv(e,t,Rv.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pv{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Mv{constructor(){this.queries=Nv(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=js(e),r=n.queries;n.queries=Nv(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new Us(Fs.ABORTED,"Firestore shutting down"))}}function Nv(){return new nh((e=>Qd(e)),Yd)}async function Ov(e,t){const n=js(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.na()&&t.ra()&&(r=2):(o=new Pv,r=t.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(i,!0);break;case 1:o.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Iv(e,`Initialization of query '${Xd(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.ta.push(t),t.sa(n.onlineState),o.ea&&t.oa(o.ea)&&Bv(n)}async function jv(e,t){const n=js(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.ta.indexOf(t);e>=0&&(o.ta.splice(e,1),0===o.ta.length?i=t.ra()?0:1:!o.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fv(e,t){const n=js(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&Bv(n)}function Uv(e,t,n){const r=js(e),i=r.queries.get(t);if(i)for(const o of i.ta)o.onError(n);r.queries.delete(t)}function Bv(e){e.ia.forEach((e=>{e.next()}))}var $v,Vv;(Vv=$v||($v={}))._a="default",Vv.Cache="cache";class Wv{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Lv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Lv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==$v.Cache}}class zv{constructor(e){this.key=e}}class Hv{constructor(e){this.key=e}}class qv{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ph(),this.mutatedKeys=ph(),this.ya=eh(e),this.wa=new Rv(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Dv,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Zd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.va(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.ya(u,s)>0||l&&this.ya(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:o,Da:n,ls:a,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ns()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const a=t&&!r?this.Fa():[],s=0===this.pa.size&&this.current&&!r?1:0,l=s!==this.ga;return this.ga=s,0!==o.length||l?{snapshot:new Lv(this.query,e.wa,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Dv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ph(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new Hv(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new zv(n))})),t}Oa(e){this.fa=e.gs,this.pa=ph();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Lv.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const Gv="SyncEngine";class Kv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yv{constructor(e){this.key=e,this.Ba=!1}}class Qv{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new nh((e=>Qd(e)),Yd),this.qa=new Map,this.Qa=new Set,this.$a=new au(hl.comparator),this.Ua=new Map,this.Ka=new Lm,this.Wa={},this.Ga=new Map,this.za=im.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Xv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ty(e);let i;const o=r.ka.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await Jv(r,t,n,!0),i}async function Zv(e,t){const n=Ty(e);await Jv(n,t,!0,!1)}async function Jv(e,t,n,r){const i=await cg(e.localStore,Hd(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await ey(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&tv(e.remoteStore,i),s}async function ey(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await dg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return hy(e,t.targetId,s.Ma),s.snapshot}(e,t,n,r);const o=await dg(e.localStore,t,!0),a=new qv(t,o.gs),s=a.ba(o.documents),l=cp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);hy(e,n,c.Ma);const u=new Kv(t,n,a);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function ty(e,t,n){const r=js(e),i=r.ka.get(t),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter((e=>!Yd(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ug(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nv(r.remoteStore,i.targetId),uy(r,i.targetId)})).catch(Sl)):(uy(r,i.targetId),await ug(r.localStore,i.targetId,!0))}async function ny(e,t){const n=js(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nv(n.remoteStore,r.targetId))}async function ry(e,t){const n=js(e);try{const e=await function(e,t){const n=js(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Hr.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Hr.addMatchingKeys(e,o.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(fu.EMPTY_BYTE_STRING,al.min()).withLastLimboFreeSnapshotVersion(al.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&a.push(n.Hr.updateTargetData(e,c))}));let s=ih(),l=ph();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(sg(e,o,t.documentUpdates).next((e=>{s=e.Vs,l=e.fs}))),!r.isEqual(al.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Tl.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(Os(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?Os(r.Ba):e.removedDocuments.size>0&&(Os(r.Ba),r.Ba=!1))})),await my(n,e,t)}catch(e){await Sl(e)}}function iy(e,t,n){const r=js(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=js(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Bv(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function oy(e,t,n){const r=js(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),o=i&&i.key;if(o){let e=new au(hl.comparator);e=e.insert(o,ad.newNoDocument(o,al.min()));const n=ph().add(o),i=new lp(al.min(),new Map,new au(Xs),e,n);await ry(r,i),r.$a=r.$a.remove(o),r.Ua.delete(t),fy(r)}else await ug(r.localStore,t,!1).then((()=>uy(r,t,n))).catch(Sl)}async function ay(e,t){const n=js(e),r=t.batch.batchId;try{const e=await function(e,t){const n=js(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Tl.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Os(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ph();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);cy(n,r,null),ly(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await my(n,e)}catch(e){await Sl(e)}}async function sy(e,t,n){const r=js(e);try{const e=await function(e,t){const n=js(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Os(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);cy(r,t,n),ly(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await my(r,e)}catch(n){await Sl(n)}}function ly(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function cy(e,t,n){const r=js(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function uy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||dy(e,t)}))}function dy(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(nv(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),fy(e))}function hy(e,t,n){for(const r of n)r instanceof zv?(e.Ka.addReference(r.key,t),py(e,r)):r instanceof Hv?(Ds(Gv,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||dy(e,r.key)):Ns()}function py(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Ds(Gv,"New document in limbo: "+n),e.Qa.add(r),fy(e))}function fy(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new hl(cl.fromString(t)),r=e.za.next();e.Ua.set(r,new Yv(n)),e.$a=e.$a.insert(n,r),tv(e.remoteStore,new Xp(Hd($d(n.path)),r,"TargetPurposeLimboResolution",$l.ae))}}async function my(e,t,n){const r=js(e),i=[],o=[],a=[];r.ka.isEmpty()||(r.ka.forEach(((e,s)=>{a.push(r.Ha(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Jm.Yi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.La.p_(i),await async function(e,t){const n=js(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Tl.forEach(t,(t=>Tl.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Tl.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Pl(e))throw e;Ds(ng,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,o))}async function gy(e,t){const n=js(e);if(!n.currentUser.isEqual(t)){Ds(Gv,"User change. New user:",t.toKey());const e=await og(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new Us(Fs.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await my(n,e.Rs)}}function vy(e,t){const n=js(e),r=n.Ua.get(t);if(r&&r.Ba)return ph().add(r.key);{let e=ph();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}async function yy(e,t){const n=js(e),r=await dg(n.localStore,t.query,!0),i=t.view.Oa(r);return n.isPrimaryClient&&hy(n,t.targetId,i.Ma),i}async function by(e,t){const n=js(e);return pg(n.localStore,t).then((e=>my(n,e)))}async function wy(e,t,n,r){const i=js(e),o=await function(e,t){const n=js(e),r=js(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Ln(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Tl.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await mv(i.remoteStore):"acknowledged"===n||"rejected"===n?(cy(i,t,r||null),ly(i,t),function(e,t){js(js(e).mutationQueue).qn(t)}(i.localStore,t)):Ns(),await my(i,o)):Ds(Gv,"Cannot apply mutation batch with id: "+t)}async function xy(e,t,n){const r=js(e),i=[],o=[];for(const a of t){let e;const t=r.qa.get(a);if(t&&0!==t.length){e=await cg(r.localStore,Hd(t[0]));for(const e of t){const t=r.ka.get(e),n=await yy(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await hg(r.localStore,a);e=await cg(r.localStore,t),await ey(r,Ey(t),a,!1,e.resumeToken)}i.push(e)}return r.La.p_(o),i}function Ey(e){return Bd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ay(e){return function(e){return js(js(e).persistence).zi()}(js(e).localStore)}async function _y(e,t,n,r){const i=js(e);if(i.ja)return void Ds(Gv,"Ignoring unexpected query state notification.");const o=i.qa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await pg(i.localStore,Jd(o[0])),r=lp.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,fu.EMPTY_BYTE_STRING);await my(i,e,r);break}case"rejected":await ug(i.localStore,t,!0),uy(i,t,r);break;default:Ns()}}async function Sy(e,t,n){const r=Ty(e);if(r.ja){for(const e of t){if(r.qa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ds(Gv,"Adding an already active target "+e);continue}const t=await hg(r.localStore,e),n=await cg(r.localStore,t);await ey(r,Ey(t),n.targetId,!1,n.resumeToken),tv(r.remoteStore,n)}for(const e of n)r.qa.has(e)&&await ug(r.localStore,e,!1).then((()=>{nv(r.remoteStore,e),uy(r,e)})).catch(Sl)}}function Ty(e){const t=js(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ry.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oy.bind(null,t),t.La.p_=Fv.bind(null,t.eventManager),t.La.Ja=Uv.bind(null,t.eventManager),t}function ky(e){const t=js(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ay.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sy.bind(null,t),t}class Cy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ig(this.persistence,new tg,e.initialUser,this.serializer)}Xa(e){return new Fm(Bm.ri,this.serializer)}Za(e){return new Cg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cy.provider={build:()=>new Cy};class Iy extends Cy{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Os(this.persistence.referenceDelegate instanceof $m);const n=this.persistence.referenceDelegate.garbageCollector;return new pm(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Qf.withCacheSize(this.cacheSizeBytes):Qf.DEFAULT;return new Fm((e=>$m.ri(e,t)),this.serializer)}}class Ry extends Cy{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await ky(this.ru.syncEngine),await mv(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return ig(this.persistence,new tg,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new pm(n,e.asyncQueue,t)}nu(e,t){const n=new Bl(t,this.persistence);return new Ul(e.asyncQueue,n)}Xa(e){const t=Zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qf.withCacheSize(this.cacheSizeBytes):Qf.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bg(),$g(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Cg}}class Dy extends Ry{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof kg&&(this.sharedClientState.syncEngine={uo:wy.bind(null,t),co:_y.bind(null,t),lo:Sy.bind(null,t),zi:Ay.bind(null,t),ao:by.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci((async e=>{await async function(e,t){const n=js(e);if(Ty(n),ky(n),!0===t&&!0!==n.ja){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await xy(n,e.toArray());n.ja=!0,await Sv(n.remoteStore,!0);for(const r of t)tv(n.remoteStore,r)}else if(!1===t&&!1!==n.ja){const e=[];let t=Promise.resolve();n.qa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(uy(n,i),ug(n.localStore,i,!0)))),nv(n.remoteStore,i)})),await t,await xy(n,e),function(e){const t=js(e);t.Ua.forEach(((e,n)=>{nv(t.remoteStore,n)})),t.Ka.Dr(),t.Ua=new Map,t.$a=new au(hl.comparator)}(n),n.ja=!1,await Sv(n.remoteStore,!1)}}(this.ru.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Za(e){const t=Bg();if(!kg.D(t))throw new Us(Fs.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ly{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>iy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gy.bind(null,this.syncEngine),await Sv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Mv}createDatastore(e){const t=Vg(e.databaseInfo.databaseId),n=function(e){return new Ug(e)}(e.databaseInfo);return function(e,t,n,r){return new Yg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Zg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>iy(this.syncEngine,e,0)),Dg.D()?new Dg:new Ig)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Qv(e,t,n,r,i,o);return a&&(s.ja=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=js(e);Ds(Xg,"RemoteStore shutting down."),t.W_.add(5),await ev(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ly.provider={build:()=>new Ly};class Py{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class My{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Us(Fs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=js(e),r={documents:t.map((e=>Ip(n.serializer,e)))},i=await n.Co("BatchGetDocuments",n.serializer.databaseId,cl.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Os(!!t.found),t.found.name,t.found.updateTime;const n=Rp(e,t.found.name),r=Sp(t.found.updateTime),i=t.found.createTime?Sp(t.found.createTime):al.min(),o=new id({mapValue:{fields:t.found.fields}});return ad.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Os(!!t.missing),Os(!!t.readTime);const n=Rp(e,t.missing),r=Sp(t.readTime);return ad.newNoDocument(n,r)}(e,t):Ns()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Os(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new qh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=hl.fromPath(t);this.mutations.push(new Gh(n,this.precondition(n)))})),await async function(e,t){const n=js(e),r={writes:t.map((e=>jp(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,cl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ns();t=al.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Us(Fs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(al.min())?Ph.exists(!1):Ph.updateTime(t):Ph.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(al.min()))throw new Us(Fs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ph.updateTime(t)}return Ph.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ny{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new Wg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new My(this.datastore),t=this.du(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Au(e)}))))})).catch((e=>{this.Au(e)}))}))}du(e){try{const t=this.updateFunction(e);return!Wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ep(t)}return!1}}const Oy="FirestoreClient";class jy{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ks.UNAUTHENTICATED,this.clientId=Qs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Ds(Oy,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ds(Oy,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(ik){const n=Iv(ik,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Fy(e,t){e.asyncQueue.verifyOperationInProgress(),Ds(Oy,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await og(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Uy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await By(e);Ds(Oy,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>_v(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_v(t.remoteStore,n))),e._onlineComponents=t}async function By(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ds(Oy,"Using user provided OfflineComponentProvider");try{await Fy(e,e._uninitializedComponentsProvider._offline)}catch(ik){const n=ik;if(!function(e){return"FirebaseError"===e.name?e.code===Fs.FAILED_PRECONDITION||e.code===Fs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ps("Error using user provided cache. Falling back to memory cache: "+n),await Fy(e,new Cy)}}else Ds(Oy,"Using default OfflineComponentProvider"),await Fy(e,new Iy(void 0));return e._offlineComponents}async function $y(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ds(Oy,"Using user provided OnlineComponentProvider"),await Uy(e,e._uninitializedComponentsProvider._online)):(Ds(Oy,"Using default OnlineComponentProvider"),await Uy(e,new Ly))),e._onlineComponents}function Vy(e){return $y(e).then((e=>e.syncEngine))}function Wy(e){return $y(e).then((e=>e.datastore))}async function zy(e){const t=await $y(e),n=t.eventManager;return n.onListen=Xv.bind(null,t.syncEngine),n.onUnlisten=ty.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Zv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ny.bind(null,t.syncEngine),n}function Hy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Bs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Py({next:s=>{o.su(),t.enqueueAndForget((()=>jv(e,a)));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new Us(Fs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new Us(Fs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Wv($d(n.path),o,{includeMetadataChanges:!0,Ta:!0});return Ov(e,a)}(await zy(e),e.asyncQueue,t,n,r))),r.promise}function qy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Bs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Py({next:n=>{o.su(),t.enqueueAndForget((()=>jv(e,a))),n.fromCache&&"server"===r.source?i.reject(new Us(Fs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Wv(n,o,{includeMetadataChanges:!0,Ta:!0});return Ov(e,a)}(await zy(e),e.asyncQueue,t,n,r))),r.promise}function Gy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ky=new Map;function Yy(e,t,n){if(!n)throw new Us(Fs.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Qy(e){if(!hl.isDocumentKey(e))throw new Us(Fs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Xy(e){if(hl.isDocumentKey(e))throw new Us(Fs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ns()}function Jy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Us(Fs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zy(e);throw new Us(Fs.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function eb(e,t){if(t<=0)throw new Us(Fs.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const tb="firestore.googleapis.com",nb=!0;class rb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Us(Fs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tb,this.ssl=nb}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:nb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Yf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<um)throw new Us(Fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Us(Fs.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Us(Fs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Us(Fs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Us(Fs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ib{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Us(Fs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Us(Fs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vs;switch(e.type){case"firstParty":return new Hs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Us(Fs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ky.get(e);t&&(Ds("ComponentProvider","Removing Datastore"),Ky.delete(e),t.terminate())}(this),Promise.resolve()}}class ob{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ob(this.firestore,e,this._query)}}class ab{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ab(this.firestore,e,this._key)}}class sb extends ob{constructor(e,t,n){super(e,t,$d(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ab(this.firestore,null,new hl(e))}withConverter(e){return new sb(this.firestore,e,this._path)}}function lb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=en(e),Yy("collection","path",t),e instanceof ib){const n=cl.fromString(t,...r);return Xy(n),new sb(e,null,n)}{if(!(e instanceof ab||e instanceof sb))throw new Us(Fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cl.fromString(t,...r));return Xy(n),new sb(e.firestore,null,n)}}function cb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=en(e),1===arguments.length&&(t=Qs.newId()),Yy("doc","path",t),e instanceof ib){const n=cl.fromString(t,...r);return Qy(n),new ab(e,null,new hl(n))}{if(!(e instanceof ab||e instanceof sb))throw new Us(Fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cl.fromString(t,...r));return Qy(n),new ab(e.firestore,e instanceof sb?e.converter:null,new hl(n))}}const ub="AsyncQueue";class db{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Wg(this,"async_queue_retry"),this.Su=()=>{const e=$g();e&&Ds(ub,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=$g();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=$g();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Bs;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(ok){if(!Pl(ok))throw ok;Ds(ub,"Operation failed with retryable error: "+ok)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ls("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Cv.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Ns()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function hb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class pb extends ib{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new db,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new db(e),this._firestoreClient=void 0,await e}}}function fb(e){if(e._terminated)throw new Us(Fs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mb(e),e._firestoreClient}function mb(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Tu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Gy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new jy(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function gb(e,t,n){if((e=Jy(e,pb))._firestoreClient||e._terminated)throw new Us(Fs.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Us(Fs.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},mb(e)}class vb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vb(fu.fromBase64String(e))}catch(e){throw new Us(Fs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vb(fu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Us(Fs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bb{constructor(e){this._methodName=e}}class wb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Us(Fs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Us(Fs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xs(this._lat,e._lat)||Xs(this._long,e._long)}}class xb{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Eb=/^__.*__$/;class Ab{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vh(e,this.data,this.fieldMask,t,this.fieldTransforms):new $h(e,this.data,t,this.fieldTransforms)}}class _b{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ns()}}class Tb{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return qb(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Sb(this.Lu)&&Eb.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class kb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vg(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Tb({Lu:e,methodName:t,zu:n,path:dl.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cb(e){const t=e._freezeSettings(),n=Vg(e._databaseId);return new kb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ib(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ju(o.merge||o.mergeFields?2:0,t,n,i);Vb("Data must be an object, but it was:",a,r);const s=Bb(r,a);let l,c;if(o.merge)l=new hu(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Wb(t,r,n);if(!a.contains(i))throw new Us(Fs.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Gb(e,i)||e.push(i)}l=new hu(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Ab(new id(s),l,c)}class Rb extends bb{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rb}}function Db(e,t,n){return new Tb({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Lb extends bb{_toFieldTransform(e){return new Dh(e.path,new Ah)}isEqual(e){return e instanceof Lb}}class Pb extends bb{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Db(this,e,!0),n=this.Hu.map((e=>Ub(e,t))),r=new _h(n);return new Dh(e.path,r)}isEqual(e){return e instanceof Pb&&zt(this.Hu,e.Hu)}}class Mb extends bb{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Db(this,e,!0),n=this.Hu.map((e=>Ub(e,t))),r=new Th(n);return new Dh(e.path,r)}isEqual(e){return e instanceof Mb&&zt(this.Hu,e.Hu)}}class Nb extends bb{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Ch(e.serializer,yh(e.serializer,this.Ju));return new Dh(e.path,t)}isEqual(e){return e instanceof Nb&&this.Ju===e.Ju}}function Ob(e,t,n,r){const i=e.ju(1,t,n);Vb("Data must be an object, but it was:",i,r);const o=[],a=id.empty();iu(r,((e,r)=>{const s=Hb(t,e,n);r=en(r);const l=i.Uu(s);if(r instanceof Rb)o.push(s);else{const e=Ub(r,l);null!=e&&(o.push(s),a.set(s,e))}}));const s=new hu(o);return new _b(a,s,i.fieldTransforms)}function jb(e,t,n,r,i,o){const a=e.ju(1,t,n),s=[Wb(t,r,n)],l=[i];if(o.length%2!=0)throw new Us(Fs.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)s.push(Wb(t,o[h])),l.push(o[h+1]);const c=[],u=id.empty();for(let h=s.length-1;h>=0;--h)if(!Gb(c,s[h])){const e=s[h];let t=l[h];t=en(t);const n=a.Uu(e);if(t instanceof Rb)c.push(e);else{const r=Ub(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new hu(c);return new _b(u,d,a.fieldTransforms)}function Fb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ub(n,e.ju(r?4:3,t))}function Ub(e,t){if($b(e=en(e)))return Vb("Unsupported field value:",t,e),Bb(e,t);if(e instanceof bb)return function(e,t){if(!Sb(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ub(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=en(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ol.fromDate(e);return{timestampValue:Ep(t.serializer,n)}}if(e instanceof ol){const n=new ol(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ep(t.serializer,n)}}if(e instanceof wb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vb)return{bytesValue:Ap(t.serializer,e._byteString)};if(e instanceof ab){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Tp(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xb)return function(e,t){return{mapValue:{fields:{[Iu]:{stringValue:Lu},[Pu]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return gh(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Zy(e)}`)}(e,t)}function Bb(e,t){const n={};return ou(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):iu(e,((e,r)=>{const i=Ub(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $b(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ol||e instanceof wb||e instanceof vb||e instanceof ab||e instanceof bb||e instanceof xb)}function Vb(e,t,n){if(!$b(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Zy(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Wb(e,t,n){if((t=en(t))instanceof yb)return t._internalPath;if("string"==typeof t)return Hb(e,t);throw qb("Field path arguments must be of type string or ",e,!1,void 0,n)}const zb=new RegExp("[~\\*/\\[\\]]");function Hb(e,t,n){if(t.search(zb)>=0)throw qb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new yb(...t.split("."))._internalPath}catch(sk){throw qb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qb(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Us(Fs.INVALID_ARGUMENT,s+e+l)}function Gb(e,t){return e.some((e=>e.isEqual(t)))}class Kb{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ab(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yb extends Kb{data(){return super.data()}}function Qb(e,t){return"string"==typeof t?Hb(e,t):t instanceof yb?t._internalPath:t._delegate._internalPath}function Xb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Us(Fs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zb{}class Jb extends Zb{}function ew(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Zb&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof rw)).length,n=e.filter((e=>e instanceof tw)).length;if(t>1||t>0&&n>0)throw new Us(Fs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class tw extends Jb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new tw(e,t,n)}_apply(e){const t=this._parse(e);return hw(e._query,t),new ob(e.firestore,e.converter,Gd(e._query,t))}_parse(e){const t=Cb(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Us(Fs.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){dw(a,o);const t=[];for(const n of a)t.push(uw(r,e,n));s={arrayValue:{values:t}}}else s=uw(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||dw(a,o),s=Fb(n,t,a,"in"===o||"not-in"===o);return pd.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function nw(e,t,n){const r=t,i=Qb("where",e);return tw._create(i,r,n)}class rw extends Zb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:fd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)hw(n,i),n=Gd(n,i)}(e._query,t),new ob(e.firestore,e.converter,Gd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class iw extends Jb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Us(Fs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Us(Fs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(t,n)}(e._query,this._field,this._direction);return new ob(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ud(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ow(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qb("orderBy",e);return iw._create(n,t)}class aw extends Jb{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new aw(e,t,n)}_apply(e){return new ob(e.firestore,e.converter,Kd(e._query,this._limit,this._limitType))}}function sw(e){return eb("limit",e),aw._create("limit",e,"F")}class lw extends Jb{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new lw(e,t,n)}_apply(e){const t=cw(e,this.type,this._docOrFields,this._inclusive);return new ob(e.firestore,e.converter,function(e,t){return new Ud(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function cw(e,t,n,r){if(n[0]=en(n[0]),n[0]instanceof Kb)return function(e,t,n,r,i){if(!r)throw new Us(Fs.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const a of zd(e))if(a.field.isKeyField())o.push(zu(t,r.key));else{const e=r.data.field(a.field);if(Au(e))throw new Us(Fs.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new sd(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Cb(e.firestore);return function(e,t,n,r,i,o){const a=e.explicitOrderBy;if(i.length>a.length)throw new Us(Fs.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const s=[];for(let l=0;l<i.length;l++){const o=i[l];if(a[l].field.isKeyField()){if("string"!=typeof o)throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof o}`);if(!Wd(e)&&-1!==o.indexOf("/"))throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${o}' contains a slash.`);const n=e.path.child(cl.fromString(o));if(!hl.isDocumentKey(n))throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new hl(n);s.push(zu(t,i))}else{const e=Fb(n,r,o);s.push(e)}}return new sd(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function uw(e,t,n){if("string"==typeof(n=en(n))){if(""===n)throw new Us(Fs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wd(t)&&-1!==n.indexOf("/"))throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(cl.fromString(n));if(!hl.isDocumentKey(r))throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zu(e,new hl(r))}if(n instanceof ab)return zu(e,n._key);throw new Us(Fs.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zy(n)}.`)}function dw(e,t){if(!Array.isArray(e)||0===e.length)throw new Us(Fs.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Us(Fs.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Us(Fs.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class pw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ns()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return iu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Pu].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>vu(e.doubleValue)));return new xb(i)}convertGeoPoint(e){return new wb(vu(e.latitude),vu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_u(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=gu(e);return new ol(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cl.fromString(e);Os(Qp(n));const r=new Cu(n.get(1),n.get(3)),i=new hl(n.popFirst(5));return r.isEqual(t)||Ls(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function fw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mw extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new vb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ab(this.firestore,null,t)}}class gw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vw extends Kb{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class yw extends vw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class bw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new yw(this._firestore,this._userDataWriter,n.key,n,new gw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Us(Fs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new yw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new gw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new yw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:ww(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ww(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ns()}}function xw(e){e=Jy(e,ab);const t=Jy(e.firestore,pb);return Hy(fb(t),e._key).then((n=>Rw(t,e,n)))}class Ew extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new vb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ab(this.firestore,null,t)}}function Aw(e){e=Jy(e,ob);const t=Jy(e.firestore,pb),n=fb(t),r=new Ew(t);return Xb(e._query),qy(n,e._query).then((n=>new bw(t,r,e,n)))}function _w(e,t,n){e=Jy(e,ab);const r=Jy(e.firestore,pb),i=fw(e.converter,t,n);return Iw(r,[Ib(Cb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ph.none())])}function Sw(e,t,n){e=Jy(e,ab);const r=Jy(e.firestore,pb),i=Cb(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=en(t))||t instanceof yb?jb(i,"updateDoc",e._key,t,n,s):Ob(i,"updateDoc",e._key,t),Iw(r,[o.toMutation(e._key,Ph.exists(!0))])}function Tw(e){return Iw(Jy(e.firestore,pb),[new qh(e._key,Ph.none())])}function kw(e,t){const n=Jy(e.firestore,pb),r=cb(e),i=fw(e.converter,t);return Iw(n,[Ib(Cb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ph.exists(!1))]).then((()=>r))}function Cw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=en(e);let s={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||hb(n[l])||(s=n[l],l++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(hb(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof ab)d=Jy(e.firestore,pb),h=$d(e._key.path),u={next:t=>{n[l]&&n[l](Rw(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Jy(e,ob);d=Jy(t.firestore,pb),h=t._query;const r=new Ew(d);u={next:e=>{n[l]&&n[l](new bw(d,r,t,e))},error:n[l+1],complete:n[l+2]},Xb(e._query)}return function(e,t,n,r){const i=new Py(r),o=new Wv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ov(await zy(e),o))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>jv(await zy(e),o)))}}(fb(d),h,c,u)}function Iw(e,t){return function(e,t){const n=new Bs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ky(e);try{const e=await function(e,t){const n=js(e),r=ol.now(),i=t.reduce(((e,t)=>e.add(t.key)),ph());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=ih(),l=ph();return n.ds.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=Uh(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Vh(e.key,t,od(t.value.mapValue),Ph.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:sh(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new au(Xs)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await my(r,e.changes),await mv(r.remoteStore)}catch(e){const t=Iv(e,"Failed to persist write");n.reject(t)}}(await Vy(e),t,n))),n.promise}(fb(e),t)}function Rw(e,t,n){const r=n.docs.get(t._key),i=new Ew(e);return new vw(e,i,t._key,r,new gw(n.hasPendingWrites,n.fromCache),t.converter)}const Dw={maxAttempts:5};class Lw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cb(e)}set(e,t,n){this._verifyNotCommitted();const r=Pw(e,this._firestore),i=fw(r.converter,t,n),o=Ib(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ph.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Pw(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=en(t))||t instanceof yb?jb(this._dataReader,"WriteBatch.update",r._key,t,n,a):Ob(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ph.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pw(e,this._firestore);return this._mutations=this._mutations.concat(new qh(t._key,Ph.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Us(Fs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pw(e,t){if((e=en(e)).firestore!==t)throw new Us(Fs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Mw{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cb(e)}get(e){const t=Pw(e,this._firestore),n=new mw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ns();const r=e[0];if(r.isFoundDocument())return new Kb(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Kb(this._firestore,n,t._key,null,t.converter);throw Ns()}))}set(e,t,n){const r=Pw(e,this._firestore),i=fw(r.converter,t,n),o=Ib(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Pw(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=en(t))||t instanceof yb?jb(this._dataReader,"Transaction.update",r._key,t,n,a):Ob(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Pw(e,this._firestore);return this._transaction.delete(t._key),this}}class Nw extends Mw{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pw(e,this._firestore),n=new Ew(this._firestore);return super.get(e).then((e=>new vw(this._firestore,n,t._key,e._document,new gw(!1,!1),t.converter)))}}function Ow(e,t,n){e=Jy(e,pb);const r=Object.assign(Object.assign({},Dw),n);return function(e){if(e.maxAttempts<1)throw new Us(Fs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Bs;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Wy(e);new Ny(e.asyncQueue,i,n,t,r).Iu()})),r.promise}(fb(e),(n=>t(new Nw(e,n))),r)}function jw(){return new Lb("serverTimestamp")}function Fw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pb("arrayUnion",t)}function Uw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Mb("arrayRemove",t)}function Bw(e){return new Nb("increment",e)}function $w(e){return fb(e=Jy(e,pb)),new Lw(e,(t=>Iw(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cs=e}(yr),pr(new tn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new pb(new Ws(e.getProvider("auth-internal")),new Gs(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Us(Fs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),xr(Ss,Ts,e),xr(Ss,Ts,"esm2017")}();const Vw="firebasestorage.googleapis.com",Ww="storageBucket";class zw extends Mt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Gw(e),`Firebase Storage: ${t} (${Gw(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zw.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hw,qw;function Gw(e){return"storage/"+e}function Kw(){return new zw(Hw.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Yw(){return new zw(Hw.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qw(){return new zw(Hw.CANCELED,"User canceled the upload/download.")}function Xw(){return new zw(Hw.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zw(e){return new zw(Hw.INVALID_ARGUMENT,e)}function Jw(){return new zw(Hw.APP_DELETED,"The Firebase app was deleted.")}function ex(e,t){return new zw(Hw.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function tx(e){throw new zw(Hw.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Hw||(Hw={}));class nx{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=nx.makeFromUrl(e,t)}catch(ok){return new nx(e,"")}if(""===n.path)return n;throw r=e,new zw(Hw.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===Vw?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new nx(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new zw(Hw.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class rx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function ix(e){return"string"===typeof e||e instanceof String}function ox(e){return ax()&&e instanceof Blob}function ax(){return"undefined"!==typeof Blob}function sx(e,t,n,r){if(r<t)throw Zw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Zw(`Invalid value for '${e}'. Expected ${n} or less.`)}function lx(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function cx(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ux(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qw||(qw={}));class dx{constructor(e,t,n,r,i,o,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new hx(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===qw.NO_ERROR,i=n.getStatus();if(!t||ux(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===qw.ABORT;return void e(!1,new hx(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new hx(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(ok){r(ok)}else if(null!==i){const e=Kw();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Jw():Qw())}else{r(Yw())}};this.canceled_?t(0,new hx(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){o&&clearTimeout(o)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hx{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function px(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fx(){const e=px();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ax())return new Blob(n);throw new zw(Hw.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function mx(e){if("undefined"===typeof atob)throw t="base-64",new zw(Hw.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const gx="raw",vx="base64",yx="base64url",bx="data_url";class wx{constructor(e,t){this.data=e,this.contentType=t||null}}function xx(e,t){switch(e){case gx:return new wx(Ex(t));case vx:case yx:return new wx(Ax(e,t));case bx:return new wx(function(e){const t=new _x(e);return t.base64?Ax(vx,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(ok){throw ex(bx,"Malformed data URL.")}return Ex(t)}(t.rest)}(t),new _x(t).contentType)}throw Kw()}function Ex(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ax(e,t){switch(e){case vx:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ex(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case yx:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ex(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mx(t)}catch(ok){if(ok.message.includes("polyfill"))throw ok;throw ex(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class _x{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ex(bx,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Sx{constructor(e,t){let n=0,r="";ox(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ox(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Sx(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Sx(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ax()){const e=t.map((e=>e instanceof Sx?e.data_:e));return new Sx(fx.apply(null,e))}{const e=t.map((e=>ix(e)?xx(gx,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Sx(r,!0)}}uploadData(){return this.data_}}function Tx(e){let t;try{t=JSON.parse(e)}catch(ok){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function kx(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Cx(e,t){return t}class Ix{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Cx}}let Rx=null;function Dx(){if(Rx)return Rx;const e=[];e.push(new Ix("bucket")),e.push(new Ix("generation")),e.push(new Ix("metageneration")),e.push(new Ix("name","fullPath",!0));const t=new Ix("name");t.xform=function(e,t){return function(e){return!ix(e)||e.length<2?e:kx(e)}(t)},e.push(t);const n=new Ix("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ix("timeCreated")),e.push(new Ix("updated")),e.push(new Ix("md5Hash",null,!0)),e.push(new Ix("cacheControl",null,!0)),e.push(new Ix("contentDisposition",null,!0)),e.push(new Ix("contentEncoding",null,!0)),e.push(new Ix("contentLanguage",null,!0)),e.push(new Ix("contentType",null,!0)),e.push(new Ix("metadata","customMetadata",!0)),Rx=e,Rx}function Lx(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new nx(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Px(e,t,n){const r=Tx(t);if(null===r)return null;return Lx(e,r,n)}function Mx(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Nx{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ox(e){if(!e)throw Kw()}function jx(e,t){return function(n,r){const i=Px(e,r,t);return Ox(null!==i),i}}function Fx(e,t){return function(n,r){const i=Px(e,r,t);return Ox(null!==i),function(e,t,n,r){const i=Tx(t);if(null===i)return null;if(!ix(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return lx("/b/"+a(i)+"/o/"+a(o),n,r)+cx({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Ux(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new zw(Hw.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new zw(Hw.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new zw(Hw.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new zw(Hw.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Bx(e){const t=Ux(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new zw(Hw.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function $x(e,t,n){const r=lx(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Nx(r,"GET",jx(e,n),i);return o.errorHandler=Bx(t),o}function Vx(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wx(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=Vx(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mx(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=Sx.getBlob(c,r,u);if(null===d)throw Xw();const h={name:l.fullPath},p=lx(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Nx(p,"POST",jx(e,n),f);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Ux(t),m}class zx{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Hx(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(ok){Ox(!1)}return Ox(!!n&&-1!==(t||["active"]).indexOf(n)),n}const qx=262144;function Gx(e,t,n,r,i,o,a,s){const l=new zx(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new zw(Hw.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(null===m)throw Xw();const g=t.maxUploadRetryTime,v=new Nx(n,"POST",(function(e,n){const i=Hx(e,["active","final"]),a=l.current+u,s=r.size();let c;return c="final"===i?jx(t,o)(e,n):null,new zx(a,s,"final"===i,c)}),g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=s||null,v.errorHandler=Ux(e),v}const Kx="running",Yx="paused",Qx="success",Xx="canceled",Zx="error";function Jx(e){switch(e){case"running":case"pausing":case"canceling":return Kx;case"paused":return Yx;case"success":return Qx;case"canceled":return Xx;default:return Zx}}class eE{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function tE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class nE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qw.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=qw.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=qw.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw tx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ok){return-1}}getResponse(){if(!this.sent_)throw tx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class rE extends nE{initXhr(){this.xhr_.responseType="text"}}function iE(){return new rE}class oE{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Dx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Hw.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(ux(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Yw()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Hw.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a=Vx(t,r,i),s={name:a.fullPath},l=lx(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=Mx(a,n),d=e.maxUploadRetryTime,h=new Nx(l,"POST",(function(e){let t;Hx(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(ok){Ox(!1)}return Ox(ix(t)),t}),d);return h.urlParams=s,h.headers=c,h.body=u,h.errorHandler=Ux(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,iE,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new Nx(n,"POST",(function(e){const t=Hx(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ok){Ox(!1)}n||Ox(!1);const i=Number(n);return Ox(!isNaN(i)),new zx(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ux(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,iE,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=qx*this._chunkMultiplier,t=new zx(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=Gx(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(ok){return this._error=ok,void this._transition("error")}const a=this._ref.storage._makeRequest(o,iE,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(qx*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=$x(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,iE,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Wx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,iE,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Qw(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Jx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new eE(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Jx(this._state)){case Qx:tE(this._resolve.bind(null,this.snapshot))();break;case Xx:case Zx:tE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jx(this._state)){case Kx:case Yx:e.next&&tE(e.next.bind(e,this.snapshot))();break;case Qx:e.complete&&tE(e.complete.bind(e))();break;default:e.error&&tE(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class aE{constructor(e,t){this._service=e,this._location=t instanceof nx?t:nx.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new aE(e,t)}get root(){const e=new nx(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kx(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new nx(this._location.bucket,e);return new aE(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new zw(Hw.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function sE(e,t,n){e._throwIfRoot("uploadBytes");const r=Wx(e.storage,e._location,Dx(),new Sx(t,!0),n);return e.storage.makeRequestWithTokens(r,iE).then((t=>({metadata:t,ref:e})))}function lE(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=lx(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Nx(r,"GET",Fx(e,n),i);return o.errorHandler=Bx(t),o}(e.storage,e._location,Dx());return e.storage.makeRequestWithTokens(t,iE).then((e=>{if(null===e)throw new zw(Hw.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function cE(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=lx(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Nx(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Bx(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iE)}function uE(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new nx(e._location.bucket,n);return new aE(e.storage,r)}function dE(e,t){if(e instanceof fE){const n=e;if(null==n._bucket)throw new zw(Hw.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ww+"' property when initializing the app?");const r=new aE(n,n._bucket);return null!=t?dE(r,t):r}return void 0!==t?uE(e,t):e}function hE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fE)return new aE(e,t);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}return dE(e,t)}function pE(e,t){const n=null===t||void 0===t?void 0:t[Ww];return null==n?null:nx.makeFromBucketSpec(n,e)}class fE{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Vw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?nx.makeFromBucketSpec(r,this._host):pE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=nx.makeFromBucketSpec(this._url,e):this._bucket=pE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new aE(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new rx(Jw());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=cx(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new dx(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const mE="@firebase/storage",gE="0.13.7",vE="storage";function yE(e,t,n){return sE(e=en(e),t,n)}function bE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new oE(e,new Sx(t),n)}(e=en(e),t,n)}function wE(e){return lE(e=en(e))}function xE(e){return cE(e=en(e))}function EE(e,t){return hE(e=en(e),t)}function AE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr(),t=arguments.length>1?arguments[1]:void 0;e=en(e);const n=fr(e,vE).getImmediate({identifier:t}),r=Et("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Tt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function _E(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new fE(r,i,o,n,yr)}pr(new tn(vE,_E,"PUBLIC").setMultipleInstances(!0)),xr(mE,gE,""),xr(mE,gE,"esm2017");const SE="@firebase/database",TE="1.0.14";let kE="";function CE(e){kE=e}class IE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ft(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:jt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class RE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const DE=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new IE(t)}}catch(ok){}return new RE},LE=DE("localStorage"),PE=DE("sessionStorage"),ME=new pn("@firebase/database"),NE=function(){let e=1;return function(){return e++}}(),OE=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Yt;n.update(t);const r=n.digest();return ht.encodeByteArray(r)},jE=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=jE.apply(null,n):e+="object"===typeof n?Ft(n):n,e+=" "}return e};let FE=null,UE=!0;const BE=function(e,t){ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ME.logLevel=ln.VERBOSE,FE=ME.log.bind(ME),t&&PE.set("logging_enabled",!0)):"function"===typeof e?FE=e:(FE=null,PE.remove("logging_enabled"))},$E=function(){if(!0===UE&&(UE=!1,null===FE&&!0===PE.get("logging_enabled")&&BE(!0)),FE){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jE.apply(null,t);FE(r)}},VE=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];$E(e,...n)}},WE=function(){const e="FIREBASE INTERNAL ERROR: "+jE(...arguments);ME.error(e)},zE=function(){const e=`FIREBASE FATAL ERROR: ${jE(...arguments)}`;throw ME.error(e),new Error(e)},HE=function(){const e="FIREBASE WARNING: "+jE(...arguments);ME.warn(e)},qE=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},GE="[MIN_NAME]",KE="[MAX_NAME]",YE=function(e,t){if(e===t)return 0;if(e===GE||t===KE)return-1;if(t===GE||e===KE)return 1;{const n=rA(e),r=rA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},QE=function(e,t){return e===t?0:e<t?-1:1},XE=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ft(t))},ZE=function(e){if("object"!==typeof e||null===e)return Ft(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ft(t[r]),n+=":",n+=ZE(e[t[r]]);return n+="}",n},JE=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function eA(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const tA=function(e){ct(!qE(e),"Invalid JSON number");const t=1023;let n,r,i,o,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const nA=new RegExp("^-?(0*)\\d{1,10}$"),rA=function(e){if(nA.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},iA=function(e){try{e()}catch(ok){setTimeout((()=>{const t=ok.stack||"";throw HE("Exception was thrown by user callback.",t),ok}),Math.floor(0))}},oA=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class aA{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){HE(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sA{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?($E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',HE(e)}}class lA{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}lA.OWNER="owner";const cA="5",uA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dA="ac",hA="websocket",pA="long_polling";class fA{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=LE.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&LE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function mA(e,t,n){let r;if(ct("string"===typeof t,"typeof type must == string"),ct("object"===typeof n,"typeof params must == object"),t===hA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==pA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return eA(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class gA{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Bt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return vt(this.counters_)}}const vA={},yA={};function bA(e){const t=e.toString();return vA[t]||(vA[t]=new gA),vA[t]}class wA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&iA((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const xA="start";class EA{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=VE(e),this.stats_=bA(t),this.urlFn=e=>(this.appCheckToken&&(e[dA]=this.appCheckToken),mA(t,pA,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Rt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new AA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,a,s,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===xA)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[xA]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=cA,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[dA]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&uA.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){EA.forceAllow_=!0}static forceDisallow(){EA.forceDisallow_=!0}static isAvailable(){return!Rt()&&(!!EA.forceAllow_||!EA.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ft(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ft(t),r=JE(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Rt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ft(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class AA{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Rt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=NE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=AA.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(ok){$E("frame writing exception"),ok.stack&&$E(ok.stack),$E(ok)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$E("No IE domain setting required")}catch(ok){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Rt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{$E("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(ok){}}),Math.floor(1))}}let _A=null;"undefined"!==typeof MozWebSocket?_A=MozWebSocket:"undefined"!==typeof WebSocket&&(_A=WebSocket);class SA{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=VE(this.connId),this.stats_=bA(t),this.connURL=SA.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=cA,!Rt()&&"undefined"!==typeof location&&location.hostname&&uA.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[dA]=r),i&&(o.p=i),mA(e,hA,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,LE.set("previous_websocket_failure",!0);try{let e;if(Rt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${cA}/${kE}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new _A(this.connURL,[],e)}catch(ok){this.log_("Error instantiating WebSocket.");const t=ok.message||ok.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){SA.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==_A&&!SA.forceDisallow_}static previouslyFailed(){return LE.isInMemoryStorage||!0===LE.get("previous_websocket_failure")}markConnectionHealthy(){LE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=jt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ct(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ft(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=JE(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(ok){this.log_("Exception thrown from WebSocket.send():",ok.message||ok.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}SA.responsesRequiredToBeHealthy=2,SA.healthyTimeout=3e4;class TA{static get ALL_TRANSPORTS(){return[EA,SA]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=SA&&SA.isAvailable();let n=t&&!SA.previouslyFailed();if(e.webSocketOnly&&(t||HE("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[SA];else{const e=this.transports_=[];for(const t of TA.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);TA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TA.globalTransportInitialized_=!1;class kA{constructor(e,t,n,r,i,o,a,s,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=VE("c:"+this.id+":"),this.transportManager_=new TA(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=oA((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=XE("t",e),n=XE("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=XE("t",e),n=XE("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=XE("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?WE("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cA!==n&&HE("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),oA((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oA((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(LE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class CA{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class IA{constructor(e){this.allowedEvents_=e,this.listeners_={},ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){ct(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class RA extends IA{static getInstance(){return new RA}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ct()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return ct("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class DA{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function LA(){return new DA("")}function PA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function MA(e){return e.pieces_.length-e.pieceNum_}function NA(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new DA(e.pieces_,t)}function OA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function FA(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new DA(t,0)}function UA(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof DA)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new DA(n,0)}function BA(e){return e.pieceNum_>=e.pieces_.length}function $A(e,t){const n=PA(e),r=PA(t);if(null===n)return t;if(n===r)return $A(NA(e),NA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function VA(e,t){if(MA(e)!==MA(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function WA(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(MA(e)>MA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class zA{constructor(e,t){this.errorPrefix_=t,this.parts_=jA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Jt(this.parts_[n]);HA(this)}}function HA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qA(e))}function qA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class GA extends IA{static getInstance(){return new GA}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KA=1e3;class YA extends CA{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=YA.nextPersistentConnectionId_++,this.log_=VE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KA,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s&&!Rt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GA.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&RA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Ft(i)),ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new St,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ct(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;YA.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Bt(e,"w")){const n=$t(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();HE(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ut(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ut(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ft(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):WE("Unrecognized action received from server: "+Ft(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=KA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+YA.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const s=function(){a?a.close():(o=!0,n())},l=function(e){ct(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:s,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?$E("getToken() completed but was canceled"):($E("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,a=new kA(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{HE(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(WE){this.log_("Failed to get token: "+WE),o||(this.repoInfo_.nodeAdmin&&HE(WE),s())}}}interrupt(e){$E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Vt(this.interruptReasons_)&&(this.reconnectDelay_=KA,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>ZE(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new DA(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){$E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){$E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Rt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+kE.replace(/\./g,"-")]=1,Ct()?e["framework.cordova"]=1:It()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=RA.getInstance().currentlyOnline();return Vt(this.interruptReasons_)&&e}}YA.nextPersistentConnectionId_=0,YA.nextConnectionId_=0;class QA{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new QA(e,t)}}class XA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new QA(GE,e),r=new QA(GE,t);return 0!==this.compare(n,r)}minPost(){return QA.MIN}}let ZA;class JA extends XA{static get __EMPTY_NODE(){return ZA}static set __EMPTY_NODE(e){ZA=e}compare(e,t){return YE(e.name,t.name)}isDefinedOn(e){throw ut("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return QA.MIN}maxPost(){return new QA(KE,ZA)}makePost(e,t){return ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new QA(e,ZA)}toString(){return".key"}}const e_=new JA;class t_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class n_{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:n_.RED,this.left=null!=r?r:r_.EMPTY_NODE,this.right=null!=i?i:r_.EMPTY_NODE}copy(e,t,n,r,i){return new n_(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return r_.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return r_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n_.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}n_.RED=!0,n_.BLACK=!1;class r_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r_.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new r_(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,n_.BLACK,null,null))}remove(e){return new r_(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,n_.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new t_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new t_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new t_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new t_(this.root_,null,this.comparator_,!0,e)}}function i_(e,t){return YE(e.name,t.name)}function o_(e,t){return YE(e,t)}let a_;r_.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new n_(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const s_=function(e){return"number"===typeof e?"number:"+tA(e):"string:"+e},l_=function(e){if(e.isLeafNode()){const t=e.val();ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&Bt(t,".sv"),"Priority must be a string or number.")}else ct(e===a_||e.isEmpty(),"priority of unexpected type.");ct(e===a_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let c_,u_,d_;class h_{static set __childrenNodeConstructor(e){c_=e}static get __childrenNodeConstructor(){return c_}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h_.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),l_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new h_(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:h_.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return BA(e)?this:".priority"===PA(e)?this.priorityNode_:h_.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:h_.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=PA(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(ct(".priority"!==n||1===MA(e),".priority must be the last token in a path"),this.updateImmediateChild(n,h_.__childrenNodeConstructor.EMPTY_NODE.updateChild(NA(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+s_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?tA(this.value_):this.value_,this.lazyHash_=OE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===h_.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof h_.__childrenNodeConstructor?-1:(ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=h_.VALUE_TYPE_ORDER.indexOf(t),i=h_.VALUE_TYPE_ORDER.indexOf(n);return ct(r>=0,"Unknown leaf type: "+t),ct(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}h_.VALUE_TYPE_ORDER=["object","boolean","number","string"];const p_=new class extends XA{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?YE(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return QA.MIN}maxPost(){return new QA(KE,new h_("[PRIORITY-POST]",d_))}makePost(e,t){const n=u_(e);return new QA(t,new h_("[PRIORITY-POST]",n))}toString(){return".priority"}},f_=Math.log(2);class m_{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/f_,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const g_=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new n_(s,a.node,n_.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],s=n?n(a):a,new n_(s,a.node,n_.BLACK,c,u)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const c=i(o+1,s),u=e[o],d=n?n(u):u;l(new n_(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,n_.BLACK):(s(r,n_.BLACK),s(r,n_.RED))}return o}(new m_(e.length));return new r_(r||t,o)};let v_;const y_={};class b_{static get Default(){return ct(y_&&p_,"ChildrenNode.ts has not been loaded"),v_=v_||new b_({".priority":y_},{".priority":p_}),v_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=$t(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof r_?t:null}hasIndex(e){return Bt(this.indexSet_,e.toString())}addIndex(e,t){ct(e!==e_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(QA.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?g_(n,e.getCompare()):y_;const s=e.toString(),l=Object.assign({},this.indexSet_);l[s]=e;const c=Object.assign({},this.indexes_);return c[s]=o,new b_(c,l)}addToIndexes(e,t){const n=Wt(this.indexes_,((n,r)=>{const i=$t(this.indexSet_,r);if(ct(i,"Missing index implementation for "+r),n===y_){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(QA.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),g_(n,i.getCompare())}return y_}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new QA(e.name,r))),i.insert(e,e.node)}}));return new b_(n,this.indexSet_)}removeFromIndexes(e,t){const n=Wt(this.indexes_,(n=>{if(n===y_)return n;{const r=t.get(e.name);return r?n.remove(new QA(e.name,r)):n}}));return new b_(n,this.indexSet_)}}let w_;class x_{static get EMPTY_NODE(){return w_||(w_=new x_(new r_(o_),null,b_.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&l_(this.priorityNode_),this.children_.isEmpty()&&ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||w_}updatePriority(e){return this.children_.isEmpty()?this:new x_(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?w_:t}}getChild(e){const t=PA(e);return null===t?this:this.getImmediateChild(t).getChild(NA(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(ct(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new QA(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?w_:this.priorityNode_;return new x_(r,o,i)}}updateChild(e,t){const n=PA(e);if(null===n)return t;{ct(".priority"!==PA(e)||1===MA(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(NA(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(p_,((o,a)=>{t[o]=a.val(e),n++,i&&x_.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+s_(this.getPriority().val())+":"),this.forEachChild(p_,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":OE(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new QA(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new QA(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new QA(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,QA.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,QA.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===E_?-1:0}withIndex(e){if(e===e_||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new x_(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===e_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(p_),n=t.getIterator(p_);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===e_?null:this.indexMap_.get(e.toString())}}x_.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const E_=new class extends x_{constructor(){super(new r_(o_),x_.EMPTY_NODE,b_.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x_.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(QA,{MIN:{value:new QA(GE,x_.EMPTY_NODE)},MAX:{value:new QA(KE,E_)}}),JA.__EMPTY_NODE=x_.EMPTY_NODE,h_.__childrenNodeConstructor=x_,a_=E_,function(e){d_=e}(E_);function A_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return x_.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new h_(e,A_(t))}if(e instanceof Array){let n=x_.EMPTY_NODE;return eA(e,((t,r)=>{if(Bt(e,t)&&"."!==t.substring(0,1)){const e=A_(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(A_(t))}{const n=[];let r=!1;if(eA(e,((e,t)=>{if("."!==e.substring(0,1)){const i=A_(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new QA(e,i)))}})),0===n.length)return x_.EMPTY_NODE;const i=g_(n,i_,(e=>e.name),o_);if(r){const e=g_(n,p_.getCompare());return new x_(i,A_(t),new b_({".priority":e},{".priority":p_}))}return new x_(i,A_(t),b_.Default)}}!function(e){u_=e}(A_);class __ extends XA{constructor(e){super(),this.indexPath_=e,ct(!BA(e)&&".priority"!==PA(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?YE(e.name,t.name):i}makePost(e,t){const n=A_(e),r=x_.EMPTY_NODE.updateChild(this.indexPath_,n);return new QA(t,r)}maxPost(){const e=x_.EMPTY_NODE.updateChild(this.indexPath_,E_);return new QA(KE,e)}toString(){return jA(this.indexPath_,0).join("/")}}const S_=new class extends XA{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?YE(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return QA.MIN}maxPost(){return QA.MAX}makePost(e,t){const n=A_(e);return new QA(t,n)}toString(){return".value"}};function T_(e){return{type:"value",snapshotNode:e}}function k_(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function C_(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function I_(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class R_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=p_}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:GE}hasEnd(){return this.endSet_}getIndexEndValue(){return ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:KE}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===p_}copy(){const e=new R_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function D_(e){const t={};if(e.isDefault())return t;let n;if(e.index_===p_?n="$priority":e.index_===S_?n="$value":e.index_===e_?n="$key":(ct(e.index_ instanceof __,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ft(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ft(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ft(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ft(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ft(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function L_(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==p_&&(t.i=e.index_.toString()),t}class P_ extends CA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=VE("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=P_.getListenId_(e,n),a={};this.listens_[o]=a;const s=D_(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),$t(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=P_.getListenId_(e,t);delete this.listens_[n]}get(e){const t=D_(e._queryParams),n=e._path.toString(),r=new St;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+qt(t);this.log_("Sending REST request for "+a);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=jt(s.responseText)}catch(ok){HE("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&HE("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))}}class M_{constructor(){this.rootNode_=x_.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function N_(){return{value:null,children:new Map}}function O_(e,t,n){if(BA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=PA(t);e.children.has(r)||e.children.set(r,N_());O_(e.children.get(r),t=NA(t),n)}}function j_(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{j_(r,new DA(t.toString()+"/"+e),n)}))}class F_{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&eA(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class U_{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new F_(e);const n=1e4+2e4*Math.random();oA(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;eA(e,((e,r)=>{r>0&&Bt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),oA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var B_;function $_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(B_||(B_={}));class V_{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=B_.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(BA(this.path)){if(null!=this.affectedTree.value)return ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new DA(e));return new V_(LA(),t,this.revert)}}return ct(PA(this.path)===e,"operationForChild called for unrelated child."),new V_(NA(this.path),this.affectedTree,this.revert)}}class W_{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=B_.OVERWRITE}operationForChild(e){return BA(this.path)?new W_(this.source,LA(),this.snap.getImmediateChild(e)):new W_(this.source,NA(this.path),this.snap)}}class z_{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=B_.MERGE}operationForChild(e){if(BA(this.path)){const t=this.children.subtree(new DA(e));return t.isEmpty()?null:t.value?new W_(this.source,LA(),t.value):new z_(this.source,LA(),t)}return ct(PA(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new z_(this.source,NA(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class H_{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(BA(e))return this.isFullyInitialized()&&!this.filtered_;const t=PA(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function q_(e,t,n,r,i,o){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ut("Should only compare child_ events.");const r=new QA(t.childName,t.snapshotNode),i=new QA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function G_(e,t){return{eventCache:e,serverCache:t}}function K_(e,t,n,r){return G_(new H_(t,n,r),e.serverCache)}function Y_(e,t,n,r){return G_(e.eventCache,new H_(t,n,r))}function Q_(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function X_(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Z_;class J_{static fromObject(e){let t=new J_(null);return eA(e,((e,n)=>{t=t.set(new DA(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Z_||(Z_=new r_(QE)),Z_);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:LA(),value:this.value};if(BA(e))return null;{const n=PA(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(NA(e),t);if(null!=i){return{path:UA(new DA(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(BA(e))return this;{const t=PA(e),n=this.children.get(t);return null!==n?n.subtree(NA(e)):new J_(null)}}set(e,t){if(BA(e))return new J_(t,this.children);{const n=PA(e),r=(this.children.get(n)||new J_(null)).set(NA(e),t),i=this.children.insert(n,r);return new J_(this.value,i)}}remove(e){if(BA(e))return this.children.isEmpty()?new J_(null):new J_(null,this.children);{const t=PA(e),n=this.children.get(t);if(n){const r=n.remove(NA(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new J_(null):new J_(this.value,i)}return this}}get(e){if(BA(e))return this.value;{const t=PA(e),n=this.children.get(t);return n?n.get(NA(e)):null}}setTree(e,t){if(BA(e))return t;{const n=PA(e),r=(this.children.get(n)||new J_(null)).setTree(NA(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new J_(this.value,i)}}fold(e){return this.fold_(LA(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(UA(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,LA(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(BA(e))return null;{const r=PA(e),i=this.children.get(r);return i?i.findOnPath_(NA(e),UA(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,LA(),t)}foreachOnPath_(e,t,n){if(BA(e))return this;{this.value&&n(t,this.value);const r=PA(e),i=this.children.get(r);return i?i.foreachOnPath_(NA(e),UA(t,r),n):new J_(null)}}foreach(e){this.foreach_(LA(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(UA(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class eS{constructor(e){this.writeTree_=e}static empty(){return new eS(new J_(null))}}function tS(e,t,n){if(BA(t))return new eS(new J_(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=$A(i,t);return o=o.updateChild(a,n),new eS(e.writeTree_.set(i,o))}{const r=new J_(n),i=e.writeTree_.setTree(t,r);return new eS(i)}}}function nS(e,t,n){let r=e;return eA(n,((e,n)=>{r=tS(r,UA(t,e),n)})),r}function rS(e,t){if(BA(t))return eS.empty();{const n=e.writeTree_.setTree(t,new J_(null));return new eS(n)}}function iS(e,t){return null!=oS(e,t)}function oS(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild($A(n.path,t)):null}function aS(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(p_,((e,n)=>{t.push(new QA(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new QA(e,n.value))})),t}function sS(e,t){if(BA(t))return e;{const n=oS(e,t);return new eS(null!=n?new J_(n):e.writeTree_.subtree(t))}}function lS(e){return e.writeTree_.isEmpty()}function cS(e,t){return uS(LA(),e.writeTree_,t)}function uS(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=uS(UA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(UA(e,".priority"),r)),n}}function dS(e,t){return _S(t,e)}function hS(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));ct(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&pS(t,r.path)?i=!1:WA(r.path,t.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=mS(e.allWrites,fS,LA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=rS(e.visibleWrites,r.path);else{eA(r.children,(t=>{e.visibleWrites=rS(e.visibleWrites,UA(r.path,t))}))}return!0}return!1}function pS(e,t){if(e.snap)return WA(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&WA(UA(e.path,n),t))return!0;return!1}function fS(e){return e.visible}function mS(e,t,n){let r=eS.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)WA(n,e)?(t=$A(n,e),r=tS(r,t,o.snap)):WA(e,n)&&(t=$A(e,n),r=tS(r,LA(),o.snap.getChild(t)));else{if(!o.children)throw ut("WriteRecord should have .snap or .children");if(WA(n,e))t=$A(n,e),r=nS(r,t,o.children);else if(WA(e,n))if(t=$A(e,n),BA(t))r=nS(r,LA(),o.children);else{const e=$t(o.children,PA(t));if(e){const n=e.getChild(NA(t));r=tS(r,LA(),n)}}}}}return r}function gS(e,t,n,r,i){if(r||i){const o=sS(e.visibleWrites,t);if(!i&&lS(o))return n;if(i||null!=n||iS(o,LA())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(WA(e.path,t)||WA(t,e.path))};return cS(mS(e.allWrites,o,t),n||x_.EMPTY_NODE)}return null}{const r=oS(e.visibleWrites,t);if(null!=r)return r;{const r=sS(e.visibleWrites,t);if(lS(r))return n;if(null!=n||iS(r,LA())){return cS(r,n||x_.EMPTY_NODE)}return null}}}function vS(e,t,n,r){return gS(e.writeTree,e.treePath,t,n,r)}function yS(e,t){return function(e,t,n){let r=x_.EMPTY_NODE;const i=oS(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(p_,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=sS(e.visibleWrites,t);return n.forEachChild(p_,((e,t)=>{const n=cS(sS(i,new DA(e)),t);r=r.updateImmediateChild(e,n)})),aS(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return aS(sS(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function bS(e,t,n,r){return function(e,t,n,r,i){ct(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=UA(t,n);if(iS(e.visibleWrites,o))return null;{const t=sS(e.visibleWrites,o);return lS(t)?i.getChild(n):cS(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function wS(e,t){return function(e,t){return oS(e.visibleWrites,t)}(e.writeTree,UA(e.treePath,t))}function xS(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const l=sS(e.visibleWrites,t),c=oS(l,LA());if(null!=c)s=c;else{if(null==n)return[];s=cS(l,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function ES(e,t,n){return function(e,t,n,r){const i=UA(t,n),o=oS(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return cS(sS(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function AS(e,t){return _S(UA(e.treePath,t),e.writeTree)}function _S(e,t){return{treePath:e,writeTree:t}}class SS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ct(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,I_(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,C_(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,k_(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ut("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,I_(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const TS=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class kS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new H_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ES(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:X_(this.viewCache_),i=xS(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function CS(e,t,n,r,i){const o=new SS;let a,s;if(n.type===B_.OVERWRITE){const l=n;l.source.fromUser?a=DS(e,t,l.path,l.snap,r,i,o):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!BA(l.path),a=RS(e,t,l.path,l.snap,r,i,s,o))}else if(n.type===B_.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,l)=>{const c=UA(n,r);LS(t,PA(c))&&(s=DS(e,s,c,l,i,o,a))})),r.foreach(((r,l)=>{const c=UA(n,r);LS(t,PA(c))||(s=DS(e,s,c,l,i,o,a))})),s}(e,t,l.path,l.children,r,i,o):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=MS(e,t,l.path,l.children,r,i,s,o))}else if(n.type===B_.ACK_USER_WRITE){const s=n;a=s.revert?function(e,t,n,r,i,o){let a;if(null!=wS(r,n))return t;{const s=new kS(r,t,i),l=t.eventCache.getNode();let c;if(BA(n)||".priority"===PA(n)){let n;if(t.serverCache.isFullyInitialized())n=vS(r,X_(t));else{const e=t.serverCache.getNode();ct(e instanceof x_,"serverChildren would be complete if leaf node"),n=yS(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=PA(n);let u=ES(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,NA(n),s,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,x_.EMPTY_NODE,NA(n),s,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=vS(r,X_(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=wS(r,LA()),K_(t,c,a,e.filter.filtersNodes())}}(e,t,s.path,r,i,o):function(e,t,n,r,i,o,a){if(null!=wS(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(BA(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return RS(e,t,n,l.getNode().getChild(n),i,o,s,a);if(BA(n)){let r=new J_(null);return l.getNode().forEachChild(e_,((e,t)=>{r=r.set(new DA(e),t)})),MS(e,t,n,r,i,o,s,a)}return t}{let c=new J_(null);return r.foreach(((e,t)=>{const r=UA(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),MS(e,t,n,c,i,o,s,a)}}(e,t,s.path,s.affectedTree,r,i,o)}else{if(n.type!==B_.LISTEN_COMPLETE)throw ut("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const o=t.serverCache,a=Y_(t,o.getNode(),o.isFullyInitialized()||BA(n),o.isFiltered());return IS(e,a,n,r,TS,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Q_(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(T_(Q_(t)))}}(t,a,l),{viewCache:a,changes:l}}function IS(e,t,n,r,i,o){const a=t.eventCache;if(null!=wS(r,n))return t;{let s,l;if(BA(n))if(ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=X_(t),i=yS(r,n instanceof x_?n:x_.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=vS(r,X_(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=PA(n);if(".priority"===c){ct(1===MA(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const o=bS(r,n,i,l);s=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const u=NA(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=bS(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=ES(r,c,t.serverCache);s=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,o):a.getNode()}}return K_(t,s,a.isFullyInitialized()||BA(n),e.filter.filtersNodes())}}function RS(e,t,n,r,i,o,a,s){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(BA(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=PA(n);if(!l.isCompleteForPath(n)&&MA(n)>1)return t;const i=NA(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,TS,null)}const d=Y_(t,c,l.isFullyInitialized()||BA(n),u.filtersNodes());return IS(e,d,n,i,new kS(i,d,o),s)}function DS(e,t,n,r,i,o,a){const s=t.eventCache;let l,c;const u=new kS(i,t,o);if(BA(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=K_(t,c,!0,e.filter.filtersNodes());else{const i=PA(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=K_(t,c,s.isFullyInitialized(),s.isFiltered());else{const o=NA(n),c=s.getNode().getImmediateChild(i);let d;if(BA(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===OA(o)&&e.getChild(FA(o)).isEmpty()?e:e.updateChild(o,r):x_.EMPTY_NODE}if(c.equals(d))l=t;else{l=K_(t,e.filter.updateChild(s.getNode(),i,d,o,u,a),s.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function LS(e,t){return e.eventCache.isCompleteForChild(t)}function PS(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function MS(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=BA(n)?r:new J_(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=PS(0,t.serverCache.getNode().getImmediateChild(n),r);c=RS(e,c,new DA(n),l,i,o,a,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=PS(0,t.serverCache.getNode().getImmediateChild(n),r);c=RS(e,c,new DA(n),l,i,o,a,s)}})),c}function NS(e,t){const n=X_(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!BA(t)&&!n.getImmediateChild(PA(t)).isEmpty())?n.getChild(t):null}function OS(e,t,n,r){t.type===B_.MERGE&&null!==t.source.queryId&&(ct(X_(e.viewCache_),"We should always have a full cache before handling merges"),ct(Q_(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=CS(e.processor_,i,t,n,r);var a,s;return a=e.processor_,s=o.viewCache,ct(s.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),ct(s.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),ct(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,jS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function jS(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),q_(e,i,"child_removed",t,r,n),q_(e,i,"child_added",t,r,n),q_(e,i,"child_moved",o,r,n),q_(e,i,"child_changed",t,r,n),q_(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let FS,US;function BS(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return ct(null!=o,"SyncTree gave us an op for an invalid query."),OS(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(OS(o,t,n,r));return i}}function $S(e,t){let n=null;for(const r of e.views.values())n=n||NS(r,t);return n}class VS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new J_(null),this.pendingWriteTree_={visibleWrites:eS.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WS(e,t,n,r,i){return function(e,t,n,r,i){ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=tS(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?KS(e,new W_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function zS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(hS(e.pendingWriteTree_,t)){let t=new J_(null);return null!=r.snap?t=t.set(LA(),!0):eA(r.children,(e=>{t=t.set(new DA(e),!0)})),KS(e,new V_(r.path,t,n))}return[]}function HS(e,t,n){return KS(e,new W_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function qS(e,t,n,r){const i=XS(e,r);if(null!=i){const r=ZS(i),o=r.path,a=r.queryId,s=$A(o,t);return JS(e,o,new W_($_(a),s,n))}return[]}function GS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=$S(n,$A(e,t));if(r)return r}));return gS(r,t,i,n,!0)}function KS(e,t){return YS(t,e.syncPointTree_,null,dS(e.pendingWriteTree_,LA()))}function YS(e,t,n,r){if(BA(e.path))return QS(e,t,n,r);{const i=t.get(LA());null==n&&null!=i&&(n=$S(i,LA()));let o=[];const a=PA(e.path),s=e.operationForChild(a),l=t.children.get(a);if(l&&s){const e=n?n.getImmediateChild(a):null,t=AS(r,a);o=o.concat(YS(s,l,e,t))}return i&&(o=o.concat(BS(i,e,r,n))),o}}function QS(e,t,n,r){const i=t.get(LA());null==n&&null!=i&&(n=$S(i,LA()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=AS(r,t),l=e.operationForChild(t);l&&(o=o.concat(QS(l,i,a,s)))})),i&&(o=o.concat(BS(i,e,r,n))),o}function XS(e,t){return e.tagToQueryMap.get(t)}function ZS(e){const t=e.indexOf("$");return ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new DA(e.substr(0,t))}}function JS(e,t,n){const r=e.syncPointTree_.get(t);ct(r,"Missing sync point for query tag that we're tracking");return BS(r,n,dS(e.pendingWriteTree_,t),null)}class eT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new eT(t)}node(){return this.node_}}class tT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=UA(this.path_,e);return new tT(this.syncTree_,t)}node(){return GS(this.syncTree_,this.path_)}}const nT=function(e,t,n){return e&&"object"===typeof e?(ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?rT(e[".sv"],t,n):"object"===typeof e[".sv"]?iT(e[".sv"],t):void ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rT=function(e,t,n){if("timestamp"===e)return n.timestamp;ct(!1,"Unexpected server value: "+e)},iT=function(e,t,n){e.hasOwnProperty("increment")||ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&ct(!1,"Unexpected increment value: "+r);const i=t.node();if(ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},oT=function(e,t,n,r){return sT(t,new tT(n,e),r)},aT=function(e,t,n){return sT(e,new eT(t),n)};function sT(e,t,n){const r=e.getPriority().val(),i=nT(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=nT(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new h_(o,A_(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new h_(i))),r.forEachChild(p_,((e,r)=>{const i=sT(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class lT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function cT(e,t){let n=t instanceof DA?t:new DA(t),r=e,i=PA(n);for(;null!==i;){const e=$t(r.node.children,i)||{children:{},childCount:0};r=new lT(i,r,e),n=NA(n),i=PA(n)}return r}function uT(e){return e.node.value}function dT(e,t){e.node.value=t,gT(e)}function hT(e){return e.node.childCount>0}function pT(e,t){eA(e.node.children,((n,r)=>{t(new lT(n,e,r))}))}function fT(e,t,n,r){n&&!r&&t(e),pT(e,(e=>{fT(e,t,!0,r)})),n&&r&&t(e)}function mT(e){return new DA(null===e.parent?e.name:mT(e.parent)+"/"+e.name)}function gT(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===uT(e)&&!hT(e)}(n),i=Bt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gT(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,gT(e))}(e.parent,e.name,e)}const vT=/[\[\].#$\/\u0000-\u001F\u007F]/,yT=/[\[\].#$\u0000-\u001F\u007F]/,bT=10485760,wT=function(e){return"string"===typeof e&&0!==e.length&&!vT.test(e)},xT=function(e){return"string"===typeof e&&0!==e.length&&!yT.test(e)},ET=function(e,t,n){const r=n instanceof DA?new zA(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+qA(r));if("function"===typeof t)throw new Error(e+"contains a function "+qA(r)+" with contents = "+t.toString());if(qE(t))throw new Error(e+"contains "+t.toString()+" "+qA(r));if("string"===typeof t&&t.length>bT/3&&Jt(t)>bT)throw new Error(e+"contains a string greater than "+bT+" utf8 bytes "+qA(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(eA(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!wT(t)))throw new Error(e+" contains an invalid key ("+t+") "+qA(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Jt(t),HA(e)}(r,t),ET(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=Jt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+qA(r)+" in addition to actual children.")}},AT=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!wT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xT(e)}(n))throw new Error(Zt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _T{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ST(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||VA(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function TT(e,t,n){ST(e,n),kT(e,(e=>WA(e,t)||WA(t,e)))}function kT(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(CT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function CT(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();FE&&$E("event: "+n.toString()),iA(r)}}}const IT="repo_interrupt";class RT{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _T,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=N_(),this.transactionQueueTree_=new lT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DT(e,t,n){if(e.stats_=bA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new P_(e.repoInfo_,((t,n,r,i)=>{MT(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>NT(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ft(n)}catch(ok){throw new Error("Invalid authOverride provided: "+ok)}}e.persistentConnection_=new YA(e.repoInfo_,t,((t,n,r,i)=>{MT(e,t,n,r,i)}),(t=>{NT(e,t)}),(t=>{!function(e,t){eA(t,((t,n)=>{OT(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return yA[n]||(yA[n]=t()),yA[n]}(e.repoInfo_,(()=>new U_(e.stats_,e.server_))),e.infoData_=new M_,e.infoSyncTree_=new VS({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=HS(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),OT(e,"connected",!1),e.serverSyncTree_=new VS({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);TT(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function LT(e){const t=e.infoData_.getNode(new DA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function PT(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:LT(e)})}function MT(e,t,n,r,i){e.dataUpdateCount++;const o=new DA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=Wt(n,(e=>A_(e)));a=function(e,t,n,r){const i=XS(e,r);if(i){const r=ZS(i),o=r.path,a=r.queryId,s=$A(o,t),l=J_.fromObject(n);return JS(e,o,new z_($_(a),s,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=A_(n);a=qS(e.serverSyncTree_,o,t,i)}else if(r){const t=Wt(n,(e=>A_(e)));a=function(e,t,n){const r=J_.fromObject(n);return KS(e,new z_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=A_(n);a=HS(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=VT(e,o)),TT(e.eventQueue_,s,a)}function NT(e,t){OT(e,"connected",t),!1===t&&function(e){UT(e,"onDisconnectEvents");const t=PT(e),n=N_();j_(e.onDisconnect_,LA(),((r,i)=>{const o=oT(r,i,e.serverSyncTree_,t);O_(n,r,o)}));let r=[];j_(n,LA(),((t,n)=>{r=r.concat(HS(e.serverSyncTree_,t,n));const i=GT(e,t);VT(e,i)})),e.onDisconnect_=N_(),TT(e.eventQueue_,LA(),r)}(e)}function OT(e,t,n){const r=new DA("/.info/"+t),i=A_(n);e.infoData_.updateSnapshot(r,i);const o=HS(e.infoSyncTree_,r,i);TT(e.eventQueue_,r,o)}function jT(e){return e.nextWriteId_++}function FT(e){e.persistentConnection_&&e.persistentConnection_.interrupt(IT)}function UT(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];$E(t,...r)}function BT(e,t,n){return GS(e.serverSyncTree_,t,n)||x_.EMPTY_NODE}function $T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||qT(e,t),uT(t)){const n=zT(e,t);ct(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=BT(e,t,r);let o=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];ct(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=$A(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const s=o.val(!0),l=t;e.server_.put(l.toString(),s,(r=>{UT(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(zS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();qT(e,cT(e.transactionQueueTree_,t)),$T(e,e.transactionQueueTree_),TT(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)iA(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{HE("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}VT(e,t)}}),a)}(e,mT(t),n)}else hT(t)&&pT(t,(t=>{$T(e,t)}))}function VT(e,t){const n=WT(e,t),r=mT(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),a=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=$A(n,o.path);let u,d=!1;if(ct(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(zS(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(zS(e.serverSyncTree_,o.currentWriteId,!0));else{const n=BT(e,o.path,a);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){ET("transaction failed: Data returned ",r,o.path);let t=A_(r);"object"===typeof r&&null!=r&&Bt(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=o.currentWriteId,l=PT(e),c=aT(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=jT(e),a.splice(a.indexOf(s),1),i=i.concat(WS(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(zS(e.serverSyncTree_,s,!0))}else d=!0,u="nodata",i=i.concat(zS(e.serverSyncTree_,o.currentWriteId,!0))}TT(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,s=t[l].unwatcher,setTimeout(s,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var s;qT(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)iA(r[l]);$T(e,e.transactionQueueTree_)}(e,zT(e,n),r),r}function WT(e,t){let n,r=e.transactionQueueTree_;for(n=PA(t);null!==n&&void 0===uT(r);)r=cT(r,n),n=PA(t=NA(t));return r}function zT(e,t){const n=[];return HT(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function HT(e,t,n){const r=uT(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);pT(t,(t=>{HT(e,t,n)}))}function qT(e,t){const n=uT(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,dT(t,n.length>0?n:void 0)}pT(t,(t=>{qT(e,t)}))}function GT(e,t){const n=mT(WT(e,t)),r=cT(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{KT(e,t)})),KT(e,r),fT(r,(t=>{KT(e,t)})),n}function KT(e,t){const n=uT(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(ct(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(ct(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(zS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?dT(t,void 0):n.length=o+1,TT(e.eventQueue_,mT(t),i);for(let e=0;e<r.length;e++)iA(r[e])}}const YT=function(e,t){const n=QT(e),r=n.namespace;"firebase.com"===n.domain&&zE(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||zE("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&HE("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new fA(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new DA(n.pathString)}},QT=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(ok){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):HE(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},XT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class ZT{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return BA(this._path)?null:OA(this._path)}get ref(){return new JT(this._repo,this._path)}get _queryIdentifier(){const e=L_(this._queryParams),t=ZE(e);return"{}"===t?"default":t}get _queryObject(){return L_(this._queryParams)}isEqual(e){if(!((e=en(e))instanceof ZT))return!1;const t=this._repo===e._repo,n=VA(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class JT extends ZT{constructor(e,t){super(e,t,new R_,!1)}get parent(){const e=FA(this._path);return null===e?null:new JT(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){ct(!FS,"__referenceConstructor has already been defined"),FS=e}(JT),function(e){ct(!US,"__referenceConstructor has already been defined"),US=e}(JT);const ek={};let tk=!1;function nk(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||zE("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$E("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,l=YT(o,i),c=l.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${c.namespace}`,l=YT(o,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new lA(lA.OWNER):new sA(e.name,e.options,t);AT("Invalid Firebase Database URL",l),BA(l.path)||zE("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=ek[t.name];i||(i={},ek[t.name]=i);let o=i[e.toURLString()];o&&zE("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new RT(e,tk,n,r),i[e.toURLString()]=o,o}(c,e,u,new aA(e,n));return new rk(d,e)}class rk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new JT(this._repo,LA())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=ek[t];n&&n[e.key]===e||zE(`Database ${t}(${e.repoInfo_}) has already been deleted.`),FT(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zE("Cannot call "+e+" on a deleted database.")}}YA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},YA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){CE(yr),pr(new tn("database",((e,t)=>{let{instanceIdentifier:n}=t;return nk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),xr(SE,TE,e),xr(SE,TE,"esm2017")}();var ik,ok,ak=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},sk=function(e){if("loading"===document.readyState)return"loading";var t=ak();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},lk=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},ck=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:lk(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},uk=-1,dk=function(){return uk},hk=function(e){addEventListener("pageshow",(function(t){t.persisted&&(uk=t.timeStamp,e(t))}),!0)},pk=function(){var e=ak();return e&&e.activationStart||0},fk=function(e,t){var n=ak(),r="navigate";return dk()>=0?r="back-forward-cache":n&&(document.prerendering||pk()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},mk=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},gk=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},vk=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},yk=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},bk=function(e){var t=!1;return function(){t||(e(),t=!0)}},wk=-1,xk=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ek=function(e){"hidden"===document.visibilityState&&wk>-1&&(wk="visibilitychange"===e.type?e.timeStamp:0,_k())},Ak=function(){addEventListener("visibilitychange",Ek,!0),addEventListener("prerenderingchange",Ek,!0)},_k=function(){removeEventListener("visibilitychange",Ek,!0),removeEventListener("prerenderingchange",Ek,!0)},Sk=function(){return wk<0&&(wk=xk(),Ak(),hk((function(){setTimeout((function(){wk=xk(),Ak()}),0)}))),{get firstHiddenTime(){return wk}}},Tk=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},kk=[1800,3e3],Ck=function(e,t){t=t||{},Tk((function(){var n,r=Sk(),i=fk("FCP"),o=mk("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-pk(),0),i.entries.push(e),n(!0)))}))}));o&&(n=gk(e,i,kk,t.reportAllChanges),hk((function(r){i=fk("FCP"),n=gk(e,i,kk,t.reportAllChanges),vk((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Ik=[.1,.25],Rk=function(e,t){!function(e,t){t=t||{},Ck(bk((function(){var n,r=fk("CLS",0),i=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,n())},s=mk("layout-shift",a);s&&(n=gk(e,r,Ik,t.reportAllChanges),yk((function(){a(s.takeRecords()),n(!0)})),hk((function(){i=0,r=fk("CLS",0),n=gk(e,r,Ik,t.reportAllChanges),vk((function(){return n()}))})),setTimeout(n,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(r&&r.sources&&r.sources.length){var i=(t=r.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];i&&(n={largestShiftTarget:ck(i.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:i,largestShiftEntry:r,loadState:sk(r.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)},Dk=0,Lk=1/0,Pk=0,Mk=function(e){e.forEach((function(e){e.interactionId&&(Lk=Math.min(Lk,e.interactionId),Pk=Math.max(Pk,e.interactionId),Dk=Pk?(Pk-Lk)/7+1:0)}))},Nk=function(){return ik?Dk:performance.interactionCount||0},Ok=function(){"interactionCount"in performance||ik||(ik=mk("event",Mk,{type:"event",buffered:!0,durationThreshold:0}))},jk=[],Fk=new Map,Uk=0,Bk=[],$k=function(e){if(Bk.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=jk[jk.length-1],n=Fk.get(e.interactionId);if(n||jk.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Fk.set(r.id,r),jk.push(r)}jk.sort((function(e,t){return t.latency-e.latency})),jk.length>10&&jk.splice(10).forEach((function(e){return Fk.delete(e.id)}))}}},Vk=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=bk(e),"hidden"===document.visibilityState?e():(n=t(e),yk(e)),n},Wk=[200,500],zk=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Tk((function(){var n;Ok();var r,i=fk("INP"),o=function(e){Vk((function(){e.forEach($k);var t=function(){var e=Math.min(jk.length-1,Math.floor((Nk()-Uk)/50));return jk[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},a=mk("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=gk(e,i,Wk,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),yk((function(){o(a.takeRecords()),r(!0)})),hk((function(){Uk=Nk(),jk.length=0,Fk.clear(),i=fk("INP"),r=gk(e,i,Wk,t.reportAllChanges)})))})))},Hk=[],qk=[],Gk=0,Kk=new WeakMap,Yk=new Map,Qk=-1,Xk=function(e){Hk=Hk.concat(e),Zk()},Zk=function(){Qk<0&&(Qk=Vk(Jk))},Jk=function(){Yk.size>10&&Yk.forEach((function(e,t){Fk.has(t)||Yk.delete(t)}));var e=jk.map((function(e){return Kk.get(e.entries[0])})),t=qk.length-50;qk=qk.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<qk.length;r++){var i=qk[r];eC(i.startTime,i.processingEnd).forEach((function(e){n.add(e)}))}var o=Hk.length-1-50;Hk=Hk.filter((function(e,t){return e.startTime>Gk&&t>o||n.has(e)})),Qk=-1};Bk.push((function(e){e.interactionId&&e.target&&!Yk.has(e.interactionId)&&Yk.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;Gk=Math.max(Gk,e.processingEnd);for(var r=qk.length-1;r>=0;r--){var i=qk[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},qk.push(t)),(e.interactionId||"first-input"===e.entryType)&&Kk.set(e,t),Zk()}));var eC=function(e,t){for(var n,r=[],i=0;n=Hk[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},tC=function(e,t){ok||(ok=mk("long-animation-frame",Xk)),zk((function(t){var n=function(e){var t=e.entries[0],n=Kk.get(t),r=t.processingStart,i=n.processingEnd,o=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),a=eC(t.startTime,i),s=e.entries.find((function(e){return e.target})),l=s&&s.target||Yk.get(t.interactionId),c=[t.startTime+t.duration,i].concat(a.map((function(e){return e.startTime+e.duration}))),u=Math.max.apply(Math,c),d={interactionTarget:ck(l),interactionTargetElement:l,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:u,processedEventEntries:o,longAnimationFrameEntries:a,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(u-i,0),loadState:sk(t.startTime)};return Object.assign(e,{attribution:d})}(t);e(n)}),t)},nC=[2500,4e3],rC={},iC=function(e,t){!function(e,t){t=t||{},Tk((function(){var n,r=Sk(),i=fk("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-pk(),0),i.entries=[e],n())}))},a=mk("largest-contentful-paint",o);if(a){n=gk(e,i,nC,t.reportAllChanges);var s=bk((function(){rC[i.id]||(o(a.takeRecords()),a.disconnect(),rC[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Vk(s)}),{once:!0,capture:!0})})),yk(s),hk((function(r){i=fk("LCP"),n=gk(e,i,nC,t.reportAllChanges),vk((function(){i.value=performance.now()-r.timeStamp,rC[i.id]=!0,n(!0)}))}))}}))}((function(t){var n=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=ak();if(n){var r=n.activationStart||0,i=e.entries[e.entries.length-1],o=i.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===i.url}))[0],a=Math.max(0,n.responseStart-r),s=Math.max(a,o?(o.requestStart||o.startTime)-r:0),l=Math.max(s,o?o.responseEnd-r:0),c=Math.max(l,i.startTime-r);t={element:ck(i.element),timeToFirstByte:a,resourceLoadDelay:s-a,resourceLoadDuration:l-s,elementRenderDelay:c-l,navigationEntry:n,lcpEntry:i},i.url&&(t.url=i.url),o&&(t.lcpResourceEntry=o)}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)};new Date;const oC="@firebase/installations",aC="0.6.13",sC=1e4,lC=`w:${aC}`,cC="FIS_v2",uC=36e5,dC=new Nt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function hC(e){return e instanceof Mt&&e.code.includes("request-failed")}function pC(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function fC(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function mC(e,t){const n=(await t.json()).error;return dC.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function gC(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vC(e,t){let{refreshToken:n}=t;const r=gC(e);return r.append("Authorization",function(e){return`${cC} ${e}`}(n)),r}async function yC(e){const t=await e();return t.status>=500&&t.status<600?e():t}function bC(e){return new Promise((t=>{setTimeout(t,e)}))}const wC=/^[cdef][\w-]{21}$/;function xC(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return wC.test(t)?t:""}catch(h1){return""}}function EC(e){return`${e.appName}!${e.appId}`}const AC=new Map;function _C(e,t){const n=EC(e);SC(n,t),function(e,t){const n=kC();n&&n.postMessage({key:e,fid:t});CC()}(n,t)}function SC(e,t){const n=AC.get(e);if(n)for(const r of n)r(t)}let TC=null;function kC(){return!TC&&"BroadcastChannel"in self&&(TC=new BroadcastChannel("[Firebase] FID Change"),TC.onmessage=e=>{SC(e.data.key,e.data.fid)}),TC}function CC(){0===AC.size&&TC&&(TC.close(),TC=null)}const IC="firebase-installations-store";let RC=null;function DC(){return RC||(RC=Tn("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(IC)}})),RC}async function LC(e,t){const n=EC(e),r=(await DC()).transaction(IC,"readwrite"),i=r.objectStore(IC),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||_C(e,t.fid),t}async function PC(e){const t=EC(e),n=(await DC()).transaction(IC,"readwrite");await n.objectStore(IC).delete(t),await n.done}async function MC(e,t){const n=EC(e),r=(await DC()).transaction(IC,"readwrite"),i=r.objectStore(IC),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||_C(e,a.fid),a}async function NC(e){let t;const n=await MC(e.appConfig,(n=>{const r=function(e){const t=e||{fid:xC(),registrationStatus:0};return FC(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(dC.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=pC(n),a=gC(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:cC,appId:n.appId,sdkVersion:lC},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await yC((()=>fetch(o,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:fC(e.authToken)}}throw await mC("Create Installation",u)}(e,t);return LC(e.appConfig,n)}catch(ok){throw hC(ok)&&409===ok.customData.serverCode?await PC(e.appConfig):await LC(e.appConfig,{fid:t.fid,registrationStatus:0}),ok}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:OC(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function OC(e){let t=await jC(e.appConfig);for(;1===t.registrationStatus;)await bC(100),t=await jC(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await NC(e);return n||t}return t}function jC(e){return MC(e,(e=>{if(!e)throw dC.create("installation-not-found");return FC(e)}))}function FC(e){return 1===(t=e).registrationStatus&&t.registrationTime+sC<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function UC(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${pC(e)}/${n}/authTokens:generate`}(n,t),o=vC(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:lC,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},c=await yC((()=>fetch(i,l)));if(c.ok){return fC(await c.json())}throw await mC("Generate Auth Token",c)}async function BC(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await MC(e.appConfig,(r=>{if(!VC(r))throw dC.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+uC}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await $C(e.appConfig);for(;1===n.authToken.requestStatus;)await bC(100),n=await $C(e.appConfig);const r=n.authToken;return 0===r.requestStatus?BC(e,t):r}(e,n),r;{if(!navigator.onLine)throw dC.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await UC(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await LC(e.appConfig,r),n}catch(ok){if(!hC(ok)||401!==ok.customData.serverCode&&404!==ok.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await LC(e.appConfig,n)}else await PC(e.appConfig);throw ok}}(e,n),n}}));return t?await t:r.authToken}function $C(e){return MC(e,(e=>{if(!VC(e))throw dC.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+sC<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function VC(e){return void 0!==e&&2===e.registrationStatus}async function WC(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await NC(e);t&&await t}(n);return(await BC(n,t)).token}function zC(e){return dC.create("missing-app-config-values",{valueName:e})}const HC="installations",qC=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw zC("App Configuration");if(!e.name)throw zC("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw zC(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:fr(t,"heartbeat"),_delete:()=>Promise.resolve()}},GC=e=>{const t=fr(e.getProvider("app").getImmediate(),HC).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await NC(t);return r?r.catch(console.error):BC(t).catch(console.error),n.fid}(t),getToken:e=>WC(t,e)}};pr(new tn(HC,qC,"PUBLIC")),pr(new tn("installations-internal",GC,"PRIVATE")),xr(oC,aC),xr(oC,aC,"esm2017");const KC="@firebase/performance",YC="0.7.2",QC=YC,XC="FB-PERF-TRACE-MEASURE",ZC="_wt_",JC="_fcp",eI="_fid",tI="_lcp",nI="_inp",rI="_cls",iI="@firebase/performance/config",oI="@firebase/performance/configexpire",aI="Performance",sI=new Nt("performance",aI,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),lI=new pn(aI);let cI,uI,dI,hI;lI.logLevel=ln.INFO;class pI{constructor(e){if(this.window=e,!e)throw sI.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=iC,this.onINP=tC,this.onCLS=Rk}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&"undefined"!==typeof navigator&&navigator.cookieEnabled?!!Lt()||(lI.info("IndexedDB is not supported by current browser"),!1):(lI.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;const n=new this.PerformanceObserver((e=>{for(const n of e.getEntries())t(n)}));n.observe({entryTypes:[e]})}static getInstance(){return void 0===cI&&(cI=new pI(uI)),cI}}function fI(){return dI}function mI(e,t){const n=e.length-t.length;if(n<0||n>1)throw sI.create("invalid String merger input");const r=[];for(let i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}class gI{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=mI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=mI("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===hI&&(hI=new gI),hI}}var vI;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(vI||(vI={}));const yI=["firebase_","google_","ga_"],bI=new RegExp("^[a-zA-Z]\\w*$");function wI(){const e=pI.getInstance().navigator;return(null===e||void 0===e?void 0:e.serviceWorker)?e.serviceWorker.controller?2:3:1}function xI(){switch(pI.getInstance().document.visibilityState){case"visible":return vI.VISIBLE;case"hidden":return vI.HIDDEN;default:return vI.UNKNOWN}}function EI(){const e=pI.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function AI(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw sI.create("no app id");return n}const _I="0.0.1",SI={loggingEnabled:!0},TI="FIREBASE_INSTALLATIONS_AUTH";function kI(e,t){const n=function(){const e=pI.getInstance().localStorage;if(!e)return;const t=e.getItem(oI);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;const r=e.getItem(iI);if(!r)return;try{return JSON.parse(r)}catch(h1){return}}();return n?(II(n),Promise.resolve()):function(e,t){return function(e){const t=e.getToken();return t.then((e=>{})),t}(e.installations).then((n=>{const r=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw sI.create("no project id");return n}(e.app),i=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw sI.create("no api key");return n}(e.app),o=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`${TI} ${n}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:AI(e.app),app_version:QC,sdk_version:_I})});return fetch(o).then((e=>{if(e.ok)return e.json();throw sI.create("RC response not ok")}))})).catch((()=>{lI.info(CI)}))}(e,t).then(II).then((e=>function(e){const t=pI.getInstance().localStorage;if(!e||!t)return;t.setItem(iI,JSON.stringify(e)),t.setItem(oI,String(Date.now()+60*gI.getInstance().configTimeToLive*60*1e3))}(e)),(()=>{}))}const CI="Could not fetch config, will use default configs";function II(e){if(!e)return e;const t=gI.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=SI.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):SI.logSource&&(t.logSource=SI.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:SI.logEndPointUrl&&(t.logEndPointUrl=SI.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:SI.transportKey&&(t.transportKey=SI.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==SI.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=SI.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==SI.tracesSamplingRate&&(t.tracesSamplingRate=SI.tracesSamplingRate),t.logTraceAfterSampling=RI(t.tracesSamplingRate),t.logNetworkAfterSampling=RI(t.networkRequestsSamplingRate),e}function RI(e){return Math.random()<=e}let DI,LI=1;function PI(e){return LI=2,DI=DI||function(e){return function(){const e=pI.getInstance().document;return new Promise((t=>{if(e&&"complete"!==e.readyState){const n=()=>{"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((()=>function(e){const t=e.getId();return t.then((e=>{dI=e})),t}(e.installations))).then((t=>kI(e,t))).then((()=>MI()),(()=>MI()))}(e),DI}function MI(){LI=3}let NI,OI=3,jI=[],FI=!1;function UI(e){setTimeout((()=>{OI<=0||(jI.length>0&&BI(),UI(1e4))}),e)}function BI(){const e=jI.splice(0,1e3),t=e.map((e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)})));(function(e){const t=gI.getInstance().getFlTransportFullUrl(),n=JSON.stringify(e);return navigator.sendBeacon&&navigator.sendBeacon(t,n)?Promise.resolve():fetch(t,{method:"POST",body:n,keepalive:!0}).then()})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:gI.getInstance().logSource,log_event:t}).then((()=>{OI=3})).catch((()=>{jI=[...e,...jI],OI--,lI.info(`Tries left: ${OI}.`),UI(1e4)}))}function $I(e){return function(){!function(e){if(!e.eventTime||!e.message)throw sI.create("invalid cc log");jI=[...jI,e]}({message:e(...arguments),eventTime:Date.now()})}}function VI(){for(;jI.length>0;)BI()}function WI(e,t){NI||(NI={send:$I(qI),flush:VI}),NI.send(e,t)}function zI(e){const t=gI.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&pI.getInstance().requiredApisAvailable()&&(3===LI?HI(e):PI(e.performanceController).then((()=>HI(e)),(()=>HI(e))))}function HI(e){if(!fI())return;const t=gI.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&WI(e,1)}function qI(e,t){return 0===t?function(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:GI(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);const n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);const r={application_info:GI(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function GI(e){return{google_app_id:AI(e),app_instance_id:fI(),web_app_info:{sdk_version:QC,page_url:pI.getInstance().getUrl(),service_worker_status:wI(),visibility_state:xI(),effective_connection_type:EI()},application_process_state:0}}function KI(e,t){const n=t;if(!n||void 0===n.responseStart)return;const r=pI.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),o=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,a=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){const t=gI.getInstance();if(!t.instrumentationEnabled)return;const n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&WI(e,0)}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:a})}const YI=["_fp",JC,eI,tI,rI,nI];class QI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=pI.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`${XC}-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw sI.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw sI.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),zI(this)}record(e,t,n){if(e<=0)throw sI.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw sI.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const r of Object.keys(n.metrics))isNaN(Number(n.metrics[r]))||(this.counters[r]=Math.floor(Number(n.metrics[r])));zI(this)}incrementMetric(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(ZC)&&YI.indexOf(n)>-1)&&n.startsWith("_"))throw sI.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){const t=Math.floor(e);return t<e&&lI.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}(null!==t&&void 0!==t?t:0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=!(0===(r=e).length||r.length>40)&&!yI.some((e=>r.startsWith(e)))&&!!r.match(bI);var r;const i=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&i)this.customAttributes[e]=t;else{if(!n)throw sI.create("invalid attribute name",{attributeName:e});if(!i)throw sI.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,r,i){const o=pI.getInstance().getUrl();if(!o)return;const a=new QI(e,ZC+o,!0),s=Math.floor(1e3*pI.getInstance().getTimeOrigin());a.setStartTime(s),t&&t[0]&&(a.setDuration(Math.floor(1e3*t[0].duration)),a.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),a.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),a.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){const e=n.find((e=>"first-paint"===e.name));e&&e.startTime&&a.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find((e=>"first-contentful-paint"===e.name));t&&t.startTime&&a.putMetric(JC,Math.floor(1e3*t.startTime)),i&&a.putMetric(eI,Math.floor(1e3*i))}this.addWebVitalMetric(a,tI,"lcp_element",r.lcp),this.addWebVitalMetric(a,rI,"cls_largestShiftTarget",r.cls),this.addWebVitalMetric(a,nI,"inp_interactionTarget",r.inp),zI(a),NI&&NI.flush()}static addWebVitalMetric(e,t,n,r){r&&(e.putMetric(t,Math.floor(1e3*r.value)),r.elementAttribution&&e.putAttribute(n,r.elementAttribution))}static createUserTimingTrace(e,t){zI(new QI(e,t,!1,t))}}let XI,ZI={},JI=!1;function eR(e){fI()&&(setTimeout((()=>function(e){const t=pI.getInstance();"onpagehide"in window?t.document.addEventListener("pagehide",(()=>nR(e))):t.document.addEventListener("unload",(()=>nR(e)));t.document.addEventListener("visibilitychange",(()=>{"hidden"===t.document.visibilityState&&nR(e)})),t.onFirstInputDelay&&t.onFirstInputDelay((e=>{XI=e}));t.onLCP((e=>{var t;ZI.lcp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.element}})),t.onCLS((e=>{var t;ZI.cls={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.largestShiftTarget}})),t.onINP((e=>{var t;ZI.inp={value:e.value,elementAttribution:null===(t=e.attribution)||void 0===t?void 0:t.interactionTarget}}))}(e)),0),setTimeout((()=>function(e){const t=pI.getInstance(),n=t.getEntriesByType("resource");for(const r of n)KI(e,r);t.setupObserver("resource",(t=>KI(e,t)))}(e)),0),setTimeout((()=>function(e){const t=pI.getInstance(),n=t.getEntriesByType("measure");for(const r of n)tR(e,r);t.setupObserver("measure",(t=>tR(e,t)))}(e)),0))}function tR(e,t){const n=t.name;n.substring(0,21)!==XC&&QI.createUserTimingTrace(e,n)}function nR(e){if(!JI){JI=!0;const t=pI.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");setTimeout((()=>{QI.createOobTrace(e,n,r,ZI,XI)}),0)}}class rR{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null===e||void 0===e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null===e||void 0===e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),pI.getInstance().requiredApisAvailable()?Pt().then((e=>{e&&(FI||(UI(5500),FI=!0),PI(this).then((()=>eR(this)),(()=>eR(this))),this.initialized=!0)})).catch((e=>{lI.info(`Environment doesn't support IndexedDB: ${e}`)})):lI.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){gI.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return gI.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){gI.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return gI.getInstance().dataCollectionEnabled}}const iR=(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw sI.create("FB not default");if("undefined"===typeof window)throw sI.create("no window");!function(e){uI=e}(window);const o=new rR(r,i);return o._init(n),o};pr(new tn("performance",iR,"PUBLIC")),xr(KC,YC),xr(KC,YC,"esm2017");const oR={apiKey:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",authDomain:"sideeye.uk",projectId:"sideeye-bafda",storageBucket:"sideeye-bafda.firebasestorage.app",messagingSenderId:"864667627333",appId:"1:864667627333:web:1ec087179141d1e91a982c",measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"http://localhost:3001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.REACT_APP_FIREBASE_MEASUREMENT_ID,databaseURL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app"},aR=0===Array.from(cr.values()).length?br(oR):wr();console.log("Initializing Firebase app");!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr();e=en(e),fr(e,"performance").getImmediate()}(aR);const sR=function(e,t,n){n||(n=ku);const r=fr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(zt(r.getOptions(n),t))return e;throw new Us(Fs.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Us(Fs.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<um)throw new Us(Fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(aR,{cacheSizeBytes:-1,experimentalAutoDetectLongPolling:!0});(function(e,t){Ps("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return gb(e,Ly.provider,{build:e=>new Ry(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()})(sR).catch((e=>{"failed-precondition"==e.code?console.warn("Firebase persistence failed - multiple tabs open"):"unimplemented"==e.code&&console.warn("Firebase persistence not supported")})),async function(e){Ps("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();gb(e,Ly.provider,{build:e=>new Dy(e,t.cacheSizeBytes)})}(sR).catch((e=>{console.warn("Multi-tab persistence not supported:",e)}));const lR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr();const t=fr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=fr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(zt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Fr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:is,persistence:[fa,Ko,Jo]}),r=_t("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ls)return;const r=null===t||void 0===t?void 0:t.token;cs!==r&&(cs=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){en(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){en(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=xt("auth");return o&&oo(n,`http://${o}`),n}(aR),cR=AE(aR),uR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr(),t=arguments.length>1?arguments[1]:void 0;const n=fr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Et("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=en(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&zt(r,o.repoInfo_.emulatorOptions))return;zE("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&zE('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new lA(lA.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Tt(r.mockUserToken,e.app.options.projectId);a=new lA(t)}!function(e,t,n,r){e.repoInfo_=new fA(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(o,i,r,a)}(n,...e)}return n}(aR);Vo(lR,(e=>{console.log("Firebase auth state changed:",e?"User logged in":"No user")}));(()=>{{console.log("Checking Firebase configuration in production..."),console.log("Firebase App:",aR.name),console.log("Firebase Auth:",lR.app.name),console.log("Firestore:",sR.app.name),console.log("Realtime Database:",uR.app.name);const e=aR.options.projectId;console.log("Firebase Project ID:",e);const t=aR.options.apiKey;console.log("Firebase API Key:",t?"Present":"Missing");const n=aR.options.authDomain;console.log("Firebase Auth Domain:",n),e&&t&&n||(console.error("Firebase configuration is incomplete!"),console.error("Project ID:",e),console.error("API Key:",t?"Present":"Missing"),console.error("Auth Domain:",n))}})();let dR={data:""},hR=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||dR,pR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fR=/\/\*[^]*?\*\/|  +/g,mR=/\n+/g,gR=(e,t)=>{let n="",r="",i="";for(let o in e){let a=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?gR(a,o):o+"{"+gR(a,"k"==o[1]?"":t)+"}":"object"==typeof a?r+=gR(a,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=gR.p?gR.p(o,a):o+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},vR={},yR=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+yR(e[n]);return t}return e};function bR(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,i)=>{let o=yR(e),a=vR[o]||(vR[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!vR[a]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=pR.exec(e.replace(fR,""));)t[4]?r.shift():t[3]?(n=t[3].replace(mR," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(mR," ").trim();return r[0]})(e);vR[a]=gR(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let s=n&&vR.g?vR.g:null;return n&&(vR.g=vR[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(vR[a],t,r,s),a})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":gR(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,hR(t.target),t.g,t.o,t.k)}bR.bind({g:1});let wR,xR,ER,AR=bR.bind({k:1});function _R(e,t){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),l=s.className||i.className;n.p=Object.assign({theme:xR&&xR()},s),n.o=/ *go\d+/.test(l),s.className=bR.apply(n,r)+(l?" "+l:""),t&&(s.ref=a);let c=e;return e[0]&&(c=s.as||e,delete s.as),ER&&c[0]&&ER(s),wR(c,s)}return t?t(i):i}}var SR=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,TR=(()=>{let e=0;return()=>(++e).toString()})(),kR=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),CR=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return CR(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},IR=[],RR={toasts:[],pausedAt:void 0},DR=e=>{RR=CR(RR,e),IR.forEach((e=>{e(RR)}))},LR={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},PR=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||TR()}}(t,e,n);return DR({type:2,toast:r}),r.id},MR=(e,t)=>PR("blank")(e,t);MR.error=PR("error"),MR.success=PR("success"),MR.loading=PR("loading"),MR.custom=PR("custom"),MR.dismiss=e=>{DR({type:3,toastId:e})},MR.remove=e=>DR({type:4,toastId:e}),MR.promise=(e,t,n)=>{let r=MR.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?SR(t.success,e):void 0;return i?MR.success(i,{id:r,...n,...null==n?void 0:n.success}):MR.dismiss(r),e})).catch((e=>{let i=t.error?SR(t.error,e):void 0;i?MR.error(i,{id:r,...n,...null==n?void 0:n.error}):MR.dismiss(r)})),e};var NR=(e,t)=>{DR({type:1,toast:{id:e,height:t}})},OR=()=>{DR({type:5,time:Date.now()})},jR=new Map,FR=e=>{let{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,t.useState)(RR),i=(0,t.useRef)(RR);(0,t.useEffect)((()=>(i.current!==RR&&r(RR),IR.push(r),()=>{let e=IR.indexOf(r);e>-1&&IR.splice(e,1)})),[]);let o=n.toasts.map((t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||LR[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...n,toasts:o}}(e);(0,t.useEffect)((()=>{if(r)return;let e=Date.now(),t=n.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>MR.dismiss(t.id)),n);t.visible&&MR.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[n,r]);let i=(0,t.useCallback)((()=>{r&&DR({type:6,time:Date.now()})}),[r]),o=(0,t.useCallback)(((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=t||{},a=n.filter((t=>(t.position||o)===(e.position||o)&&t.height)),s=a.findIndex((t=>t.id===e.id)),l=a.filter(((e,t)=>t<s&&e.visible)).length;return a.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[n]);return(0,t.useEffect)((()=>{n.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(jR.has(e))return;let n=setTimeout((()=>{jR.delete(e),DR({type:4,toastId:e})}),t);jR.set(e,n)}(e.id,e.removeDelay);else{let t=jR.get(e.id);t&&(clearTimeout(t),jR.delete(e.id))}}))}),[n]),{toasts:n,handlers:{updateHeight:NR,startPause:OR,endPause:i,calculateOffset:o}}},UR=AR`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,BR=AR`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$R=AR`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,VR=_R("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${BR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$R} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,WR=AR`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zR=_R("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${WR} 1s linear infinite;
`,HR=AR`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qR=AR`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,GR=_R("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,KR=_R("div")`
  position: absolute;
`,YR=_R("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,QR=AR`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XR=_R("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${QR} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZR=e=>{let{toast:n}=e,{icon:r,type:i,iconTheme:o}=n;return void 0!==r?"string"==typeof r?t.createElement(XR,null,r):r:"blank"===i?null:t.createElement(YR,null,t.createElement(zR,{...o}),"loading"!==i&&t.createElement(KR,null,"error"===i?t.createElement(VR,{...o}):t.createElement(GR,{...o})))},JR=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,eD=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,tD=_R("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nD=_R("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,rD=t.memo((e=>{let{toast:n,position:r,style:i,children:o}=e,a=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=kR()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[JR(n),eD(n)];return{animation:t?`${AR(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${AR(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(n.position||r||"top-center",n.visible):{opacity:0},s=t.createElement(ZR,{toast:n}),l=t.createElement(nD,{...n.ariaProps},SR(n.message,n));return t.createElement(tD,{className:n.className,style:{...a,...i,...n.style}},"function"==typeof o?o({icon:s,message:l}):t.createElement(t.Fragment,null,s,l))}));!function(e,t,n,r){gR.p=t,wR=e,xR=n,ER=r}(t.createElement);var iD=e=>{let{id:n,className:r,style:i,onHeightUpdate:o,children:a}=e,s=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;o(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[n,o]);return t.createElement("div",{ref:s,className:r,style:i},a)},oD=bR`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,aD=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:i,gutter:o,children:a,containerStyle:s,containerClassName:l}=e,{toasts:c,handlers:u}=FR(i);return t.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||r,s=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(i,u.calculateOffset(e,{reverseOrder:n,gutter:o,defaultPosition:r}));return t.createElement(iD,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?oD:"",style:s},"custom"===e.type?SR(e.message,e):a?a(e):t.createElement(rD,{toast:e,position:i}))})))},sD=n(7355),lD=null;function cD(e,t){if("number"!==typeof(e=e||xD))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(yD(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return sD.randomBytes(e)}catch{}if(!lD)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return lD(e)}(wD),wD)),n.join("")}function uD(e,t,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0),"undefined"===typeof e)e=xD;else if("number"!==typeof e)throw Error("illegal arguments: "+typeof e);function r(t){fD((function(){try{t(null,cD(e))}catch(n){t(n)}}))}if(!n)return new Promise((function(e,t){r((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);r(n)}function dD(e,t){if("undefined"===typeof t&&(t=xD),"number"===typeof t&&(t=cD(t)),"string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return DD(e,t)}function hD(e,t,n,r){function i(n){"string"===typeof e&&"number"===typeof t?uD(t,(function(t,i){DD(e,i,n,r)})):"string"===typeof e&&"string"===typeof t?DD(e,t,n,r):fD(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)}function pD(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return 0===n}var fD="undefined"!==typeof process&&process&&"function"===typeof process.nextTick?"function"===typeof setImmediate?setImmediate:process.nextTick:setTimeout;function mD(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t}var gD="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),vD=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function yD(e,t){var n,r,i=0,o=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(n=255&e[i++],o.push(gD[n>>2&63]),n=(3&n)<<4,i>=t){o.push(gD[63&n]);break}if(n|=(r=255&e[i++])>>4&15,o.push(gD[63&n]),n=(15&r)<<2,i>=t){o.push(gD[63&n]);break}n|=(r=255&e[i++])>>6&3,o.push(gD[63&n]),o.push(gD[63&r])}return o.join("")}function bD(e,t){var n,r,i,o,a,s=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;s<l-1&&c<t&&(n=(a=e.charCodeAt(s++))<vD.length?vD[a]:-1,r=(a=e.charCodeAt(s++))<vD.length?vD[a]:-1,-1!=n&&-1!=r)&&(o=n<<2>>>0,o|=(48&r)>>4,u.push(String.fromCharCode(o)),!(++c>=t||s>=l))&&-1!=(i=(a=e.charCodeAt(s++))<vD.length?vD[a]:-1)&&(o=(15&r)<<4>>>0,o|=(60&i)>>2,u.push(String.fromCharCode(o)),!(++c>=t||s>=l));)o=(3&i)<<6>>>0,o|=(a=e.charCodeAt(s++))<vD.length?vD[a]:-1,u.push(String.fromCharCode(o)),++c;var d=[];for(s=0;s<c;s++)d.push(u[s].charCodeAt(0));return d}var wD=16,xD=10,ED=16,AD=100,_D=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],SD=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],TD=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function kD(e,t,n,r){var i,o=e[t],a=e[t+1];return i=r[(o^=n[0])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[1])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[2])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[3])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[4])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[5])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[6])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[7])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[8])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[9])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[10])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[11])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[12])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[13])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[14])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[15])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],o^=(i+=r[768|255&a])^n[16],e[t]=a^n[ED+1],e[t+1]=o,e}function CD(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|255&e[t],t=(t+1)%e.length;return{key:r,offp:t}}function ID(e,t,n){for(var r,i=0,o=[0,0],a=t.length,s=n.length,l=0;l<a;l++)i=(r=CD(e,i)).offp,t[l]=t[l]^r.key;for(l=0;l<a;l+=2)o=kD(o,0,t,n),t[l]=o[0],t[l+1]=o[1];for(l=0;l<s;l+=2)o=kD(o,0,t,n),n[l]=o[0],n[l+1]=o[1]}function RD(e,t,n,r,i){var o,a=TD.slice(),s=a.length;if(n<4||n>31){if(o=Error("Illegal number of rounds (4-31): "+n),r)return void fD(r.bind(this,o));throw o}if(t.length!==wD){if(o=Error("Illegal salt length: "+t.length+" != "+wD),r)return void fD(r.bind(this,o));throw o}n=1<<n>>>0;var l,c,u,d=0;function h(){if(i&&i(d/n),!(d<n)){for(d=0;d<64;d++)for(u=0;u<s>>1;u++)kD(a,u<<1,l,c);var o=[];for(d=0;d<s;d++)o.push((a[d]>>24&255)>>>0),o.push((a[d]>>16&255)>>>0),o.push((a[d]>>8&255)>>>0),o.push((255&a[d])>>>0);return r?void r(null,o):o}for(var p=Date.now();d<n&&(d+=1,ID(e,l,c),ID(t,l,c),!(Date.now()-p>AD)););r&&fD(h)}if("function"===typeof Int32Array?(l=new Int32Array(_D),c=new Int32Array(SD)):(l=_D.slice(),c=SD.slice()),function(e,t,n,r){for(var i,o=0,a=[0,0],s=n.length,l=r.length,c=0;c<s;c++)o=(i=CD(t,o)).offp,n[c]=n[c]^i.key;for(o=0,c=0;c<s;c+=2)o=(i=CD(e,o)).offp,a[0]^=i.key,o=(i=CD(e,o)).offp,a[1]^=i.key,a=kD(a,0,n,r),n[c]=a[0],n[c+1]=a[1];for(c=0;c<l;c+=2)o=(i=CD(e,o)).offp,a[0]^=i.key,o=(i=CD(e,o)).offp,a[1]^=i.key,a=kD(a,0,n,r),r[c]=a[0],r[c+1]=a[1]}(t,e,l,c),"undefined"!==typeof r)h();else for(var p;;)if("undefined"!==typeof(p=h()))return p||[]}function DD(e,t,n,r){var i,o,a;if("string"!==typeof e||"string"!==typeof t){if(i=Error("Invalid string / salt: Not a string"),n)return void fD(n.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),n)return void fD(n.bind(this,i));throw i}if("$"===t.charAt(2))o=String.fromCharCode(0),a=3;else{if("a"!==(o=t.charAt(2))&&"b"!==o&&"y"!==o||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),n)return void fD(n.bind(this,i));throw i}a=4}if(t.charAt(a+2)>"$"){if(i=Error("Missing salt rounds"),n)return void fD(n.bind(this,i));throw i}var s=10*parseInt(t.substring(a,a+1),10)+parseInt(t.substring(a+1,a+2),10),l=t.substring(a+3,a+25),c=function(e){for(var t,n,r=0,i=new Array(mD(e)),o=0,a=e.length;o<a;++o)(t=e.charCodeAt(o))<128?i[r++]=t:t<2048?(i[r++]=t>>6|192,i[r++]=63&t|128):55296===(64512&t)&&56320===(64512&(n=e.charCodeAt(o+1)))?(t=65536+((1023&t)<<10)+(1023&n),++o,i[r++]=t>>18|240,i[r++]=t>>12&63|128,i[r++]=t>>6&63|128,i[r++]=63&t|128):(i[r++]=t>>12|224,i[r++]=t>>6&63|128,i[r++]=63&t|128);return i}(e+=o>="a"?"\0":""),u=bD(l,wD);function d(e){var t=[];return t.push("$2"),o>="a"&&t.push(o),t.push("$"),s<10&&t.push("0"),t.push(s.toString()),t.push("$"),t.push(yD(u,u.length)),t.push(yD(e,4*TD.length-1)),t.join("")}if("undefined"==typeof n)return d(RD(c,u,s));RD(c,u,s,(function(e,t){e?n(e,null):n(null,d(t))}),r)}const LD={setRandomFallback:function(e){lD=e},genSaltSync:cD,genSalt:uD,hashSync:dD,hash:hD,compareSync:function(e,t){if("string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&pD(dD(e,t.substring(0,t.length-31)),t)},compare:function(e,t,n,r){function i(n){"string"===typeof e&&"string"===typeof t?60===t.length?hD(e,t.substring(0,29),(function(e,r){e?n(e):n(null,pD(r,t))}),r):fD(n.bind(this,null,!1)):fD(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)},getRounds:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return mD(e)>72},encodeBase64:function(e,t){return yD(e,t)},decodeBase64:function(e,t){return bD(e,t)}},PD=(0,t.createContext)({currentUser:null,user:null,userProfile:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resetPassword:async()=>{},sendEmailVerification:async()=>{},setUserProfile:()=>{},setError:()=>{},tempUserForSourceCode:null,verifySourceCodeAndCompleteLogin:async()=>{},forceCheckEmailVerification:async()=>!1,completeInitialSetupAndLogin:()=>{}}),MD=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),m=Z();(0,t.useEffect)((()=>{console.log("Setting up auth state listener");const e=Vo(lR,(async e=>{if(console.log("Auth state changed:",e?"User logged in":"No user"),e)try{const t=await xw(cb(sR,"users",e.uid));if(t.exists()){const n=t.data();a({...e,...n,uid:e.uid}),console.log("User data loaded successfully:",e.uid)}else console.error("User document not found in Firestore:",e.uid),a(null)}catch(d){console.error("Error loading user data:",d),a(null)}else a(null);u(!1)}));return()=>{console.log("Cleaning up auth state listener"),e()}}),[]),(0,t.useEffect)((()=>{if(null===r||void 0===r||!r.uid||!sR)return;const e=Cw(cb(sR,"users",r.uid),(e=>{if(e.exists()){const t=e.data(),n=null===s||void 0===s?void 0:s.isPrivate;l(t),a((e=>e?{...e,...t,isPrivate:t.isPrivate||!1,followers:t.followers||[],following:t.following||[]}:null)),n!==t.isPrivate&&(MR.success("Account is now "+(t.isPrivate?"private":"public")),window.location.pathname.includes("/profile")&&window.location.reload())}}),(e=>{console.error("Error listening to privacy changes:",e),MR.error("Failed to sync privacy settings")}));return()=>e()}),[null===r||void 0===r?void 0:r.uid,sR,null===s||void 0===s?void 0:s.isPrivate]),(0,t.useEffect)((()=>{r&&!c&&(r.emailVerified||MR.error("Please verify your email to continue",{duration:5e3,id:"email-verification-needed"}),s&&!s.sourceCodeSetupComplete&&MR.error("Please set up your source code to continue",{duration:5e3,id:"source-code-setup-needed"}))}),[r,s,c]);const g=async e=>{try{console.log("Starting forceCheckEmailVerification for user:",e.uid),console.log("Initial emailVerified status:",e.emailVerified),await e.reload();const n=lR.currentUser;if(!n)return console.error("User disappeared after reload"),!1;const r=n.emailVerified;if(console.log("Email verification status after reload:",r),r&&sR)try{const e=cb(sR,"users",n.uid),t=await xw(e);if(t.exists()){if(!t.data().isVerified){const t=await(async e=>{if(!sR)return!1;try{return(await xw(cb(sR,"admins",e))).exists()}catch(d){return console.log("Error checking admin status:",d),!1}})(n.uid);t?(await Sw(e,{isVerified:!0,updatedAt:jw()}),console.log("Updated user profile verification status in Firestore")):console.log("User is not admin, skipping verification status update")}}}catch(d){console.log("Could not access user profile in Firestore")}try{const e=await n.getIdTokenResult(!0);return console.log("Token verification status:",e.claims.email_verified),e.claims.email_verified&&!r?(await n.reload(),n.emailVerified):!0===e.claims.email_verified}catch(t){return console.error("Error checking token verification status:",t),r}}catch(d){return console.error("Failed to check email verification status:",d),!1}},v={currentUser:r,user:o,userProfile:s,loading:c,error:d,login:async(e,t)=>{u(!0),h(null);try{console.log("Starting login process for:",e),await function(e,t){return en(e).setPersistence(t)}(lR,Ko),console.log("Persistence set to LOCAL");const n=await function(e,t,n){return mr(e.app)?Promise.reject($r(e)):Oo(en(e),xo.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Uo(e),t}))}(lR,e,t),r=n.user;console.log("Login successful, checking verification status...");const o=await g(r);if(console.log("Email verification status after login:",o),!o)return console.log("Email not verified, redirecting to verification page..."),h("Please verify your email before logging in."),i(null),a(null),l(null),await Wo(lR),u(!1),void m("/verify-email",{replace:!0});const s=await xw(cb(sR,"users",r.uid));if(!s.exists())throw new Error("User profile not found");const c=s.data();if(!c.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),f(r),u(!1),void m("/setup-source-code",{replace:!0});i(r),a(r),l(c),u(!1),console.log("Login complete, redirecting to feed..."),m("/",{replace:!0})}catch(d){console.error("Login function error:",d);let t="An error occurred during login.";"auth/invalid-credential"===d.code?t="Invalid email or password.":"auth/user-not-found"===d.code?t="No account found with this email.":"auth/wrong-password"===d.code?t="Incorrect password.":"auth/too-many-requests"===d.code?t="Too many failed attempts. Please try again later.":"auth/network-request-failed"===d.code&&(t="Network error. Please check your connection."),h(t),i(null),a(null),l(null),u(!1),((e,t)=>{console.error(`[${t}] Error:`,e)})(d,"Login Function")}},register:async(e,t,n,r)=>{u(!0),h(null);try{const o=await async function(e,t,n){if(mr(e.app))return Promise.reject($r(e));const r=Gi(e),i=ro(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Co,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Uo(e),t})),a=await Io._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(lR,e,t),s=o.user;console.log("User created successfully with UID:",s.uid),await $o(s,{displayName:n}),console.log("User profile updated with username:",n),await Bo(s),console.log("Verification email sent to:",s.email);try{if(sR){const t={theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0},i={name:n,username:n,email:e||"",profilePic:s.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:ol.fromDate(new Date),lastLogin:ol.fromDate(new Date),dateOfBirth:r,settings:{theme:"light",notifications:!0,privacy:"public"},preferences:t};await _w(cb(sR,"users",s.uid),i),console.log("Basic user profile created in Firestore")}}catch(i){console.error("Error creating user profile in Firestore:",i)}a(s)}catch(d){throw console.error("Registration error:",d),h(OD(d.code)),d}finally{u(!1)}},logout:async()=>{try{u(!0),await Wo(lR),i(null),a(null),l(null),m("/login")}catch(d){console.error("Error logging out:",d),MR.error("Failed to log out")}finally{u(!1)}},resetPassword:async e=>{try{u(!0),await async function(e,t,n){const r=Gi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Fo(r,i,n),await ro(r,i,"getOobCode",po,"EMAIL_PASSWORD_PROVIDER")}(lR,e)}catch(d){throw h(d.message),d}finally{u(!1)}},sendEmailVerification:async()=>{const e=r||o;if(!e)throw new Error("No user available to send verification email");try{u(!0),console.log("Sending email verification to:",e.email),await e.reload();const n=lR.currentUser||e;if(n.emailVerified)return console.log("User is already verified"),u(!1),await g(n),void(lR.currentUser&&m("/setup-source-code"));const r={url:`${window.location.origin}/verify-email`,handleCodeInApp:!0};if(await Bo(n,r),console.log("Verification email sent successfully"),sR)try{const e=cb(sR,"users",n.uid);await Sw(e,{lastVerificationAttempt:jw(),verificationStatus:"pending"}),console.log("Updated Firestore with verification attempt timestamp")}catch(t){console.error("Error updating Firestore after sending verification email:",t)}}catch(d){throw console.error("Error sending verification email:",d),h(d.message),d}finally{u(!1)}},setUserProfile:l,setError:h,tempUserForSourceCode:p,verifySourceCodeAndCompleteLogin:async e=>{if(!p)return h("No user logged in"),void console.error("verifySourceCodeAndCompleteLogin: No temporary user found");try{u(!0),h(null);const t=cb(sR,"users",p.uid),n=await xw(t);if(!n.exists())return h("User profile not found"),void console.error("verifySourceCodeAndCompleteLogin: User profile not found");const r=n.data();if(!r.sourceCodeHash)return h("Source code not set up"),void console.error("verifySourceCodeAndCompleteLogin: No source code hash found");if(!await LD.compare(e,r.sourceCodeHash))return void h("Invalid source code");i(p),l(r),f(null),u(!1),setTimeout((()=>{m("/")}),0)}catch(d){console.error("Error verifying source code:",d),h("Failed to verify source code"),u(!1)}},forceCheckEmailVerification:g,completeInitialSetupAndLogin:(e,t)=>{console.log("Initial source code setup complete. Finalizing login directly."),i(e),a(e),l(t),f(null),h(null),u(!1),m("/",{replace:!0})}};return(0,Ve.jsx)(PD.Provider,{value:v,children:n})},ND=()=>{const e=(0,t.useContext)(PD);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},OD=e=>{switch(e){case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email is already in use";case"auth/weak-password":return"Password is too weak";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}},jD=()=>{const{currentUser:e,userProfile:t}=ND();return{canViewProfile:n=>{var r;if(!e||!t)return!1;if(e.uid===n)return!0;const i=null===(r=t.followers)||void 0===r?void 0:r.includes(n);return!t.isPrivate||i},canViewContent:n=>{var r;if(!e||!t)return!1;if(e.uid===n)return!0;const i=null===(r=t.following)||void 0===r?void 0:r.includes(n);return!t.isPrivate||i}}},FD=(0,t.createContext)(void 0),UD=e=>{let{children:n}=e;const{currentUser:r}=ND(),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)(0),[l,c]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(r&&sR){c(!0);const e=Cw(ew(lb(sR,"users",r.uid,"notifications"),ow("createdAt","desc"),sw(50)),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,...t,createdAt:t.createdAt.toDate(),type:t.type,senderId:t.senderId,recipientId:t.recipientId,isRead:t.isRead,senderName:t.senderName,senderAvatar:t.senderAvatar,postId:t.postId,commentId:t.commentId,roomId:t.roomId,content:t.content}}));o(t),s(t.filter((e=>!e.isRead)).length),c(!1)}),(e=>{console.error("Error fetching notifications: ",e),c(!1)}));return()=>e()}o([]),s(0),c(!1)}),[r]);return(0,Ve.jsx)(FD.Provider,{value:{notifications:i,unreadCount:a,markAsRead:async e=>{if(sR&&r)try{const t=cb(sR,"users",r.uid,"notifications",e);await Sw(t,{isRead:!0})}catch(WE){console.error("Error marking notification as read:",WE)}},markAllAsRead:async()=>{if(sR&&r)try{const e=i.filter((e=>!e.isRead)).map((e=>Sw(cb(sR,"users",r.uid,"notifications",e.id),{isRead:!0})));await Promise.all(e)}catch(WE){console.error("Error marking all notifications as read:",WE)}},deleteNotification:async e=>{if(sR&&r)try{const t=cb(sR,"users",r.uid,"notifications",e);await Tw(t)}catch(WE){console.error("Error deleting notification:",WE)}}},children:n})};const BD=t.createContext(null);function $D(){return t.useContext(BD)}const VD="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const WD=function(e){const{children:n,theme:r}=e,i=$D(),o=t.useMemo((()=>{const e=null===i?r:function(e,t){if("function"===typeof t)return t(e);return(0,De.A)({},e,t)}(i,r);return null!=e&&(e[VD]=null!==i),e}),[r,i]);return(0,Ve.jsx)(BD.Provider,{value:o,children:n})},zD=["value"],HD=t.createContext();const qD=()=>{const e=t.useContext(HD);return null!=e&&e},GD=function(e){let{value:t}=e,n=(0,Le.A)(e,zD);return(0,Ve.jsx)(HD.Provider,(0,De.A)({value:null==t||t},n))};var KD=n(4168);const YD={};function QD(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof r){const o=r(t),a=e?(0,De.A)({},n,{[e]:o}):o;return i?()=>a:a}return e?(0,De.A)({},n,{[e]:r}):(0,De.A)({},n,r)}),[e,n,r,i])}const XD=function(e){const{children:t,theme:n,themeId:r}=e,i=Ue(YD),o=$D()||YD,a=QD(r,i,n),s=QD(r,o,n,!0),l="rtl"===a.direction;return(0,Ve.jsx)(WD,{theme:s,children:(0,Ve.jsx)(Fe.T.Provider,{value:a,children:(0,Ve.jsx)(GD,{value:l,children:(0,Ve.jsx)(KD.A,{value:null==a?void 0:a.components,children:t})})})})},ZD=["theme"];function JD(e){let{theme:t}=e,n=(0,Le.A)(e,ZD);const r=t[qe.A];let i=r||t;return"function"!==typeof t&&(r&&!r.vars?i=(0,De.A)({},r,{vars:null}):t&&!t.vars&&(i=(0,De.A)({},t,{vars:null}))),(0,Ve.jsx)(XD,(0,De.A)({},n,{themeId:r?qe.A:void 0,theme:i}))}const eL=(0,t.createContext)(void 0),tL=e=>{let{children:n}=e;const[r,i]=(0,t.useState)((()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)}));(0,t.useEffect)((()=>{localStorage.setItem("darkMode",JSON.stringify(r))}),[r]);const o=(0,He.A)({palette:{mode:r?"dark":"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:r?"#121212":"#ffffff",paper:r?"#1e1e1e":"#ffffff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});return(0,Ve.jsx)(eL.Provider,{value:{isDarkMode:r,toggleDarkMode:()=>{i(!r)}},children:(0,Ve.jsx)(JD,{theme:o,children:n})})};var nL=n(8465),rL=n(9254),iL=n(1676),oL=n(9240);const aL=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var sL=n(423);function lL(e){return(0,sL.Ay)("MuiPaper",e)}(0,Ge.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const cL=["className","component","elevation","square","variant"],uL=(0,rL.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,De.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.divider}`},"elevation"===n.variant&&(0,De.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,oL.X4)("#fff",aL(n.elevation))}, ${(0,oL.X4)("#fff",aL(n.elevation))})`},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),dL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:a=!1,variant:s="elevation"}=n,l=(0,Le.A)(n,cL),c=(0,De.A)({},n,{component:i,elevation:o,square:a,variant:s}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,nL.A)(o,lL,i)})(c);return(0,Ve.jsx)(uL,(0,De.A)({as:i,ownerState:c,className:(0,Pe.A)(u.root,r),ref:t},l))})),hL=dL;function pL(e){return(0,sL.Ay)("MuiAppBar",e)}(0,Ge.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const fL=["className","color","enableColorOnDark","position"],mL=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,gL=(0,rL.Ay)(hL,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,iL.A)(n.position)}`],t[`color${(0,iL.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,De.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,De.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,De.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,De.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:mL(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:mL(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:mL(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:mL(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),vL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:a="fixed"}=n,s=(0,Le.A)(n,fL),l=(0,De.A)({},n,{color:i,position:a,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,iL.A)(t)}`,`position${(0,iL.A)(n)}`]};return(0,nL.A)(i,pL,r)})(l);return(0,Ve.jsx)(gL,(0,De.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,Pe.A)(c.root,r,"fixed"===a&&"mui-fixed"),ref:t},s))})),yL=vL;function bL(e){return(0,sL.Ay)("MuiToolbar",e)}(0,Ge.A)("MuiToolbar",["root","gutters","regular","dense"]);const wL=["className","component","disableGutters","variant"],xL=(0,rL.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),EL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:a="regular"}=n,s=(0,Le.A)(n,wL),l=(0,De.A)({},n,{component:i,disableGutters:o,variant:a}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,nL.A)(i,bL,t)})(l);return(0,Ve.jsx)(xL,(0,De.A)({as:i,className:(0,Pe.A)(c.root,r),ref:t,ownerState:l},s))})),AL=EL;var _L=n(5471);const SL=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function TL(e){return(0,sL.Ay)("MuiAvatar",e)}(0,Ge.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var kL=n(5393);const CL=function(e){return"string"===typeof e};const IL=function(e,t,n){return void 0===e||CL(e)?t:(0,De.A)({},t,{ownerState:(0,De.A)({},t.ownerState,n)})};const RL=function(e,t,n){return"function"===typeof e?e(t,n):e};const DL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const LL=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const PL=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,Pe.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,De.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),a=(0,De.A)({},n,i,r);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=DL((0,De.A)({},i,r)),s=LL(r),l=LL(i),c=t(a),u=(0,Pe.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,De.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,De.A)({},c,n,l,s);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},ML=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],NL=["component","slots","slotProps"],OL=["component"];function jL(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s}=t,l=(0,Le.A)(t,ML),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=o,h=(0,Le.A)(o,NL),p=u[e]||r,f=RL(d[e],i),m=PL((0,De.A)({className:n},l,{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:f})),{props:{component:g},internalRef:v}=m,y=(0,Le.A)(m.props,OL),b=(0,kL.A)(v,null==f?void 0:f.ref,t.ref),w=a?a(y):{},x=(0,De.A)({},i,w),E="root"===e?g||c:g,A=IL(p,(0,De.A)({},"root"===e&&!c&&!u[e]&&s,"root"!==e&&!u[e]&&s,y,E&&{as:E},{ref:b}),x);return Object.keys(w).forEach((e=>{delete A[e]})),[p,A]}const FL=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],UL=(0,rL.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,De.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,De.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),BL=(0,rL.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),$L=(0,rL.Ay)(SL,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const VL=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",slots:l={},slotProps:c={},imgProps:u,sizes:d,src:h,srcSet:p,variant:f="circular"}=r,m=(0,Le.A)(r,FL);let g=null;const v=function(e){let{crossOrigin:n,referrerPolicy:r,src:i,srcSet:o}=e;const[a,s]=t.useState(!1);return t.useEffect((()=>{if(!i&&!o)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,o&&(t.srcset=o),()=>{e=!1}}),[n,r,i,o]),a}((0,De.A)({},u,{src:h,srcSet:p})),y=h||p,b=y&&"error"!==v,w=(0,De.A)({},r,{colorDefault:!b,component:s,variant:f}),x=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,nL.A)(i,TL,t)})(w),[E,A]=jL("img",{className:x.img,elementType:BL,externalForwardedProps:{slots:l,slotProps:{img:(0,De.A)({},u,c.img)}},additionalProps:{alt:i,src:h,srcSet:p,sizes:d},ownerState:w});return g=b?(0,Ve.jsx)(E,(0,De.A)({},A)):o||0===o?o:y&&i?i[0]:(0,Ve.jsx)($L,{ownerState:w,className:x.fallback}),(0,Ve.jsx)(UL,(0,De.A)({as:s,ownerState:w,className:(0,Pe.A)(x.root,a),ref:n},m,{children:g}))})),WL=VL;function zL(e){return(0,sL.Ay)("MuiTypography",e)}(0,Ge.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const HL=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],qL=(0,rL.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,iL.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),GL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},KL={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},YL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiTypography"}),r=(e=>KL[e]||e)(n.color),i=(0,Oe.A)((0,De.A)({},n,{color:r})),{align:o="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=GL}=i,p=(0,Le.A)(i,HL),f=(0,De.A)({},i,{align:o,color:r,className:a,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=s||(u?"p":h[d]||GL[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e,s={root:["root",o,"inherit"!==e.align&&`align${(0,iL.A)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,nL.A)(s,zL,a)})(f);return(0,Ve.jsx)(qL,(0,De.A)({as:m,ref:t,ownerState:f,className:(0,Pe.A)(g.root,a)},p))})),QL=YL;var XL=n(1506),ZL=n(1976),JL=n(1573);function eP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tP(e,t){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tP(e,t)}function nP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tP(e,t)}const rP=t.createContext(null);function iP(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function oP(e,t,n){return null!=n[t]?n[t]:e.props[t]}function aP(e,n,r){var i=iP(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,c=a in i,u=n[a],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:oP(s,"exit",e),enter:oP(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:oP(s,"exit",e),enter:oP(s,"enter",e)})}})),o}var sP=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},lP=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(eP(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}nP(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,iP(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:oP(e,"appear",r),enter:oP(e,"enter",r),exit:oP(e,"exit",r)})}))):aP(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=iP(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,De.A)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,Le.A)(e,["component","childFactory"]),o=this.state.contextValue,a=sP(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(rP.Provider,{value:o},a):t.createElement(rP.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);lP.propTypes={},lP.defaultProps={component:"div",childFactory:function(e){return e}};const cP=lP;var uP=n(8283),dP=n(1824);const hP=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),p=(0,Pe.A)(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+o},m=(0,Pe.A)(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Ve.jsx)("span",{className:p,style:f,children:(0,Ve.jsx)("span",{className:m})})};const pP=(0,Ge.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),fP=["center","classes","className"];let mP,gP,vP,yP,bP=e=>e;const wP=(0,uP.i7)(mP||(mP=bP`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),xP=(0,uP.i7)(gP||(gP=bP`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),EP=(0,uP.i7)(vP||(vP=bP`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),AP=(0,rL.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),_P=(0,rL.Ay)(hP,{name:"MuiTouchRipple",slot:"Ripple"})(yP||(yP=bP`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),pP.rippleVisible,wP,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),pP.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),pP.child,pP.childLeaving,xP,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),pP.childPulsate,EP,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),SP=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=(0,Le.A)(r,fP),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),p=(0,dP.A)(),f=t.useRef(null),m=t.useRef(null),g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;c((e=>[...e,(0,Ve.jsx)(_P,{classes:{ripple:(0,Pe.A)(o.ripple,pP.ripple),rippleVisible:(0,Pe.A)(o.rippleVisible,pP.rippleVisible),ripplePulsate:(0,Pe.A)(o.ripplePulsate,pP.ripplePulsate),child:(0,Pe.A)(o.child,pP.child),childLeaving:(0,Pe.A)(o.childLeaving,pP.childLeaving),childPulsate:(0,Pe.A)(o.childPulsate,pP.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=a}),[o]),v=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const s=a?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,g,p]),y=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),b=t.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[p]);return t.useImperativeHandle(n,(()=>({pulsate:y,start:v,stop:b})),[y,v,b]),(0,Ve.jsx)(AP,(0,De.A)({className:(0,Pe.A)(pP.root,o.root,a),ref:m},s,{children:(0,Ve.jsx)(cP,{component:null,exit:!0,children:l})}))})),TP=SP;function kP(e){return(0,sL.Ay)("MuiButtonBase",e)}const CP=(0,Ge.A)("MuiButtonBase",["root","disabled","focusVisible"]),IP=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],RP=(0,rL.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${CP.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),DP=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:w,onKeyUp:x,onMouseDown:E,onMouseLeave:A,onMouseUp:_,onTouchEnd:S,onTouchMove:T,onTouchStart:k,tabIndex:C=0,TouchRippleProps:I,touchRippleRef:R,type:D}=r,L=(0,Le.A)(r,IP),P=t.useRef(null),M=t.useRef(null),N=(0,XL.A)(M,R),{isFocusVisibleRef:O,onFocus:j,onBlur:F,ref:U}=(0,JL.A)(),[B,$]=t.useState(!1);c&&B&&$(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{$(!0),P.current.focus()}})),[]);const[V,W]=t.useState(!1);t.useEffect((()=>{W(!0)}),[]);const z=V&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,ZL.A)((r=>{t&&t(r);return!n&&M.current&&M.current[e](r),!0}))}t.useEffect((()=>{B&&h&&!u&&V&&M.current.pulsate()}),[u,h,B,V]);const q=H("start",E),G=H("stop",g),K=H("stop",v),Y=H("stop",_),Q=H("stop",(e=>{B&&e.preventDefault(),A&&A(e)})),X=H("start",k),Z=H("stop",S),J=H("stop",T),ee=H("stop",(e=>{F(e),!1===O.current&&$(!1),f&&f(e)}),!1),te=(0,ZL.A)((e=>{P.current||(P.current=e.currentTarget),j(e),!0===O.current&&($(!0),b&&b(e)),y&&y(e)})),ne=()=>{const e=P.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=t.useRef(!1),ie=(0,ZL.A)((e=>{h&&!re.current&&B&&M.current&&" "===e.key&&(re.current=!0,M.current.stop(e,(()=>{M.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=(0,ZL.A)((e=>{h&&" "===e.key&&M.current&&B&&!e.defaultPrevented&&(re.current=!1,M.current.stop(e,(()=>{M.current.pulsate(e)}))),x&&x(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let ae=l;"button"===ae&&(L.href||L.to)&&(ae=p);const se={};"button"===ae?(se.type=void 0===D?"button":D,se.disabled=c):(L.href||L.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=(0,XL.A)(n,U,P);const ce=(0,De.A)({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:C,focusVisible:B}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,nL.A)(o,kP,i);return n&&r&&(a.root+=` ${r}`),a})(ce);return(0,Ve.jsxs)(RP,(0,De.A)({as:ae,className:(0,Pe.A)(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:G,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:q,onMouseLeave:Q,onMouseUp:Y,onDragLeave:K,onTouchEnd:Z,onTouchMove:J,onTouchStart:X,ref:le,tabIndex:c?-1:C,type:D},se,L,{children:[a,z?(0,Ve.jsx)(TP,(0,De.A)({ref:N,center:o},I)):null]}))})),LP=DP;function PP(e){return(0,sL.Ay)("MuiIconButton",e)}const MP=(0,Ge.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),NP=["edge","children","className","color","disabled","disableFocusRipple","size"],OP=(0,rL.Ay)(LP,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,iL.A)(n.color)}`],n.edge&&t[`edge${(0,iL.A)(n.edge)}`],t[`size${(0,iL.A)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,De.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,De.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,De.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${MP.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),jP=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Le.A)(n,NP),d=(0,De.A)({},n,{edge:r,color:a,disabled:s,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,a={root:["root",n&&"disabled","default"!==r&&`color${(0,iL.A)(r)}`,i&&`edge${(0,iL.A)(i)}`,`size${(0,iL.A)(o)}`]};return(0,nL.A)(a,PP,t)})(d);return(0,Ve.jsx)(OP,(0,De.A)({className:(0,Pe.A)(h.root,o),centerRipple:!0,focusRipple:!l,disabled:s,ref:t},u,{ownerState:d,children:i}))})),FP=jP,UP=e=>{const n=t.useRef({});return t.useEffect((()=>{n.current=e})),n.current},BP=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const $P=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,a=(0,Le.A)(e,BP),s=o?{}:RL(r,i),{props:l,internalRef:c}=PL((0,De.A)({},a,{externalSlotProps:s})),u=(0,kL.A)(c,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref);return IL(n,(0,De.A)({},l,{ref:u}),i)};const VP=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=UP({badgeContent:t,max:r});let a=n;!1!==n||0!==t||i||(a=!0);const{badgeContent:s,max:l=r}=a?o:e;return{badgeContent:s,invisible:a,max:l,displayValue:s&&Number(s)>l?`${l}+`:s}};function WP(e){return(0,sL.Ay)("MuiBadge",e)}const zP=(0,Ge.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),HP=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],qP=(0,rL.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),GP=(0,rL.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,iL.A)(n.anchorOrigin.vertical)}${(0,iL.A)(n.anchorOrigin.horizontal)}${(0,iL.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,iL.A)(n.color)}`],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${zP.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),KP=t.forwardRef((function(e,t){var n,r,i,o,a,s;const l=(0,Ze.b)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:w,slotProps:x,showZero:E=!1,variant:A="standard"}=l,_=(0,Le.A)(l,HP),{badgeContent:S,invisible:T,max:k,displayValue:C}=VP({max:y,invisible:v,badgeContent:b,showZero:E}),I=UP({anchorOrigin:c,color:g,overlap:m,variant:A,badgeContent:b}),R=T||null==S&&"dot"!==A,{color:D=g,overlap:L=m,anchorOrigin:P=c,variant:M=A}=R?I:l,N="dot"!==M?C:void 0,O=(0,De.A)({},l,{badgeContent:S,invisible:R,max:k,displayValue:N,showZero:E,anchorOrigin:P,color:D,overlap:L,variant:M}),j=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=e,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${(0,iL.A)(n.vertical)}${(0,iL.A)(n.horizontal)}`,`anchorOrigin${(0,iL.A)(n.vertical)}${(0,iL.A)(n.horizontal)}${(0,iL.A)(i)}`,`overlap${(0,iL.A)(i)}`,"default"!==t&&`color${(0,iL.A)(t)}`]};return(0,nL.A)(s,WP,a)})(O),F=null!=(n=null!=(r=null==w?void 0:w.root)?r:h.Root)?n:qP,U=null!=(i=null!=(o=null==w?void 0:w.badge)?o:h.Badge)?i:GP,B=null!=(a=null==x?void 0:x.root)?a:p.root,$=null!=(s=null==x?void 0:x.badge)?s:p.badge,V=$P({elementType:F,externalSlotProps:B,externalForwardedProps:_,additionalProps:{ref:t,as:d},ownerState:O,className:(0,Pe.A)(null==B?void 0:B.className,j.root,u)}),W=$P({elementType:U,externalSlotProps:$,ownerState:O,className:(0,Pe.A)(j.badge,null==$?void 0:$.className)});return(0,Ve.jsxs)(F,(0,De.A)({},V,{children:[f,(0,Ve.jsx)(U,(0,De.A)({},W,{children:N}))]}))})),YP=KP;var QP=n(5537),XP=n(9608);function ZP(e){return(0,sL.Ay)("MuiButton",e)}const JP=(0,Ge.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const eM=t.createContext({});const tM=t.createContext(void 0),nM=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],rM=e=>(0,De.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),iM=(0,rL.Ay)(LP,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,iL.A)(n.color)}`],t[`size${(0,iL.A)(n.size)}`],t[`${n.variant}Size${(0,iL.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],a="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,De.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,De.A)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:`1px solid ${(t.vars||t).palette[n.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${JP.focusVisible}`]:(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${JP.disabled}`]:(0,De.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${(0,oL.X4)(t.palette[n.color].main,.5)}`},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${JP.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${JP.disabled}`]:{boxShadow:"none"}}})),oM=(0,rL.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,iL.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},rM(t))})),aM=(0,rL.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,iL.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},rM(t))})),sM=t.forwardRef((function(e,n){const r=t.useContext(eM),i=t.useContext(tM),o=(0,QP.A)(r,e),a=(0,Ze.b)({props:o,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,size:v="medium",startIcon:y,type:b,variant:w="text"}=a,x=(0,Le.A)(a,nM),E=(0,De.A)({},a,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:g,size:v,type:b,variant:w}),A=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=e,s={root:["root",o,`${o}${(0,iL.A)(t)}`,`size${(0,iL.A)(i)}`,`${o}Size${(0,iL.A)(i)}`,`color${(0,iL.A)(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,iL.A)(i)}`],endIcon:["icon","endIcon",`iconSize${(0,iL.A)(i)}`]},l=(0,nL.A)(s,ZP,a);return(0,De.A)({},a,l)})(E),_=y&&(0,Ve.jsx)(oM,{className:A.startIcon,ownerState:E,children:y}),S=f&&(0,Ve.jsx)(aM,{className:A.endIcon,ownerState:E,children:f}),T=i||"";return(0,Ve.jsxs)(iM,(0,De.A)({ownerState:E,className:(0,Pe.A)(r.className,A.root,u,T),component:c,disabled:d,focusRipple:!p,focusVisibleClassName:(0,Pe.A)(A.focusVisible,m),ref:n,type:b},x,{classes:A,children:[_,s,S]}))})),lM=sM;var cM=n(7402);const uM=t.createContext({});function dM(e){return(0,sL.Ay)("MuiList",e)}(0,Ge.A)("MuiList",["root","padding","dense","subheader"]);const hM=["children","className","component","dense","disablePadding","subheader"],pM=(0,rL.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,De.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),fM=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,u=(0,Le.A)(r,hM),d=t.useMemo((()=>({dense:s})),[s]),h=(0,De.A)({},r,{component:a,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,nL.A)(o,dM,t)})(h);return(0,Ve.jsx)(uM.Provider,{value:d,children:(0,Ve.jsxs)(pM,(0,De.A)({as:a,className:(0,Pe.A)(p.root,o),ref:n,ownerState:h},u,{children:[c,i]}))})})),mM=fM;function gM(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const vM=gM;var yM=n(9044);const bM=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function wM(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function xM(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function EM(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function AM(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&EM(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const _M=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Le.A)(e,bM),p=t.useRef(null),f=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,yM.A)((()=>{i&&p.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${vM((0,cM.A)(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const m=(0,XL.A)(p,n);let g=-1;t.Children.forEach(a,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=n),g===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=a.length&&(g=-1))):g===n&&(g+=1,g>=a.length&&(g=-1))}));const v=t.Children.map(a,((e,n)=>{if(n===g){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Ve.jsx)(mM,(0,De.A)({role:"menu",ref:m,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,cM.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),AM(t,r,c,l,wM);else if("ArrowUp"===n)e.preventDefault(),AM(t,r,c,l,xM);else if("Home"===n)e.preventDefault(),AM(t,null,c,l,wM);else if("End"===n)e.preventDefault(),AM(t,null,c,l,xM);else if(1===n.length){const i=f.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&EM(r,i);i.previousKeyMatched&&(s||AM(t,r,!1,l,wM,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},h,{children:v}))})),SM=_M;var TM=n(1209),kM=n(827);function CM(e){var n;return parseInt(t.version,10)>=19?(null==e||null==(n=e.props)?void 0:n.ref)||null:(null==e?void 0:e.ref)||null}const IM=!1;var RM=function(e){return e.scrollTop},DM="unmounted",LM="exited",PM="entering",MM="entered",NM="exiting",OM=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=LM,r.appearStatus=PM):i=MM:i=t.unmountOnExit||t.mountOnEnter?DM:LM,r.state={status:i},r.nextCallback=null,r}nP(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===DM?{status:LM}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==PM&&n!==MM&&(t=PM):n!==PM&&n!==MM||(t=NM)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===PM){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this);n&&RM(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===LM&&this.setState({status:DM})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[be.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||IM?this.safeSetState({status:MM},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:PM},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:MM},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:be.findDOMNode(this);t&&!IM?(this.props.onExit(r),this.safeSetState({status:NM},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:LM},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:LM},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===DM)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Le.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(rP.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function jM(){}OM.contextType=rP,OM.propTypes={},OM.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:jM,onEntering:jM,onEntered:jM,onExit:jM,onExiting:jM,onExited:jM},OM.UNMOUNTED=DM,OM.EXITED=LM,OM.ENTERING=PM,OM.ENTERED=MM,OM.EXITING=NM;const FM=OM;function UM(){const e=$e(tt.A);return e[qe.A]||e}const BM=e=>e.scrollTop;function $M(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}const VM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function WM(e){return`scale(${e}, ${e**2})`}const zM={entering:{opacity:1,transform:WM(1)},entered:{opacity:1,transform:"none"}},HM="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),qM=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=FM}=e,v=(0,Le.A)(e,VM),y=(0,dP.A)(),b=t.useRef(),w=UM(),x=t.useRef(null),E=(0,XL.A)(x,CM(o),n),A=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},_=A(u),S=A(((e,t)=>{BM(e);const{duration:n,delay:r,easing:i}=$M({style:f,timeout:m,easing:a},{mode:"enter"});let o;"auto"===m?(o=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:HM?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),T=A(c),k=A(p),C=A((e=>{const{duration:t,delay:n,easing:r}=$M({style:f,timeout:m,easing:a},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:HM?i:.666*i,delay:HM?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=WM(.75),d&&d(e)})),I=A(h);return(0,Ve.jsx)(g,(0,De.A)({appear:i,in:s,nodeRef:x,onEnter:S,onEntered:T,onEntering:_,onExit:C,onExited:I,onExiting:k,addEndListener:e=>{"auto"===m&&y.start(b.current||0,e),r&&r(x.current,e)},timeout:"auto"===m?null:m},v,{children:(e,n)=>t.cloneElement(o,(0,De.A)({style:(0,De.A)({opacity:0,transform:WM(.75),visibility:"exited"!==e||s?void 0:"hidden"},zM[e],f,o.props.style),ref:E},n))}))}));qM.muiSupportAuto=!0;const GM=qM;var KM=n(6907);const YM=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function QM(e){const t=[],n=[];return Array.from(e.querySelectorAll(YM)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function XM(){return!0}const ZM=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:a=QM,isEnabled:s=XM,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),m=t.useRef(null),g=(0,kL.A)(CM(n),m),v=t.useRef(null);t.useEffect((()=>{l&&m.current&&(f.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!m.current)return;const e=(0,KM.A)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!m.current)return;const e=(0,KM.A)(m.current),t=t=>{v.current=t,!i&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=a(m.current)),n.length>0){var r,o;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,o,s,l,a]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var JM=n(1399),eN=n(5587);const tN=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=t.useState(null),l=(0,kL.A)(t.isValidElement(r)?CM(r):null,n);if((0,JM.A)((()=>{o||s(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),(0,JM.A)((()=>{if(a&&!o)return(0,eN.A)(n,a),()=>{(0,eN.A)(n,null)}}),[n,a,o]),o){if(t.isValidElement(r)){const e={ref:l};return t.cloneElement(r,e)}return(0,Ve.jsx)(t.Fragment,{children:r})}return(0,Ve.jsx)(t.Fragment,{children:a?be.createPortal(r,a):a})})),nN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],rN={entering:{opacity:1},entered:{opacity:1}},iN=t.forwardRef((function(e,n){const r=UM(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=i,TransitionComponent:y=FM}=e,b=(0,Le.A)(e,nN),w=t.useRef(null),x=(0,XL.A)(w,CM(s),n),E=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},A=E(h),_=E(((e,t)=>{BM(e);const n=$M({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),u&&u(e,t)})),S=E(d),T=E(m),k=E((e=>{const t=$M({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),p&&p(e)})),C=E(f);return(0,Ve.jsx)(y,(0,De.A)({appear:a,in:c,nodeRef:w,onEnter:_,onEntered:S,onEntering:A,onExit:k,onExited:C,onExiting:T,addEndListener:e=>{o&&o(w.current,e)},timeout:v},b,{children:(e,n)=>t.cloneElement(s,(0,De.A)({style:(0,De.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},rN[e],g,s.props.style),ref:x},n))}))})),oN=iN;function aN(e){return(0,sL.Ay)("MuiBackdrop",e)}(0,Ge.A)("MuiBackdrop",["root","invisible"]);const sN=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],lN=(0,rL.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),cN=t.forwardRef((function(e,t){var n,r,i;const o=(0,Ze.b)({props:e,name:"MuiBackdrop"}),{children:a,className:s,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:m=oN,transitionDuration:g}=o,v=(0,Le.A)(o,sN),y=(0,De.A)({},o,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,nL.A)(r,aN,t)})(y),w=null!=(n=p.root)?n:u.root;return(0,Ve.jsx)(m,(0,De.A)({in:h,timeout:g},v,{children:(0,Ve.jsx)(lN,(0,De.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=f.root)?i:c.Root)?r:l,className:(0,Pe.A)(b.root,s,null==w?void 0:w.className),ownerState:(0,De.A)({},y,null==w?void 0:w.ownerState),classes:b,ref:t,children:a}))}))})),uN=cN;var dN=n(2529),hN=n(5511),pN=n(8635);function fN(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function mN(e){return parseInt((0,pN.A)(e).getComputedStyle(e).paddingRight,10)||0}function gN(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&fN(e,i)}))}function vN(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function yN(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,KM.A)(e);return t.body===e?(0,pN.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=gM((0,KM.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${mN(r)+e}px`;const t=(0,KM.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${mN(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,KM.A)(r).body;else{const t=r.parentElement,n=(0,pN.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const bN=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&fN(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);gN(t,e.mount,e.modalRef,r,!0);const i=vN(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=vN(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=yN(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=vN(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&fN(e.modalRef,t),gN(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&fN(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const wN=function(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,manager:o=bN,closeAfterTransition:a=!1,onTransitionEnter:s,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,p=t.useRef({}),f=t.useRef(null),m=t.useRef(null),g=(0,kL.A)(m,h),[v,y]=t.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const x=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),E=()=>{o.mount(x(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},A=(0,dN.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||(0,KM.A)(f.current).body;o.add(x(),e),m.current&&E()})),_=t.useCallback((()=>o.isTopModal(x())),[o]),S=(0,dN.A)((e=>{f.current=e,e&&(d&&_()?E():m.current&&fN(m.current,w))})),T=t.useCallback((()=>{o.remove(x(),w)}),[w,o]);t.useEffect((()=>()=>{T()}),[T]),t.useEffect((()=>{d?A():b&&a||T()}),[d,T,b,a,A]);const k=e=>t=>{var n;null==(n=e.onKeyDown)||n.call(e,t),"Escape"===t.key&&229!==t.which&&_()&&(r||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},C=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=DL(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,De.A)({},n,t);return(0,De.A)({role:"presentation"},r,{onKeyDown:k(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-hidden":!0},e,{onClick:C(e),open:d})},getTransitionProps:()=>({onEnter:(0,hN.A)((()=>{y(!1),s&&s()}),null==c?void 0:c.props.onEnter),onExited:(0,hN.A)((()=>{y(!0),l&&l(),a&&T()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:S,isTopModal:_,exited:v,hasTransition:b}};function xN(e){return(0,sL.Ay)("MuiModal",e)}(0,Ge.A)("MuiModal",["root","hidden","backdrop"]);const EN=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],AN=(0,rL.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),_N=(0,rL.Ay)(uN,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),SN=t.forwardRef((function(e,n){var r,i,o,a,s,l;const c=(0,Ze.b)({name:"MuiModal",props:e}),{BackdropComponent:u=_N,BackdropProps:d,className:h,closeAfterTransition:p=!1,children:f,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:x=!1,disablePortal:E=!1,disableRestoreFocus:A=!1,disableScrollLock:_=!1,hideBackdrop:S=!1,keepMounted:T=!1,onBackdropClick:k,open:C,slotProps:I,slots:R}=c,D=(0,Le.A)(c,EN),L=(0,De.A)({},c,{closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:x,disablePortal:E,disableRestoreFocus:A,disableScrollLock:_,hideBackdrop:S,keepMounted:T}),{getRootProps:P,getBackdropProps:M,getTransitionProps:N,portalRef:O,isTopModal:j,exited:F,hasTransition:U}=wN((0,De.A)({},L,{rootRef:n})),B=(0,De.A)({},L,{exited:F}),$=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,nL.A)(i,xN,r)})(B),V={};if(void 0===f.props.tabIndex&&(V.tabIndex="-1"),U){const{onEnter:e,onExited:t}=N();V.onEnter=e,V.onExited=t}const W=null!=(r=null!=(i=null==R?void 0:R.root)?i:v.Root)?r:AN,z=null!=(o=null!=(a=null==R?void 0:R.backdrop)?a:v.Backdrop)?o:u,H=null!=(s=null==I?void 0:I.root)?s:y.root,q=null!=(l=null==I?void 0:I.backdrop)?l:y.backdrop,G=$P({elementType:W,externalSlotProps:H,externalForwardedProps:D,getSlotProps:P,additionalProps:{ref:n,as:g},ownerState:B,className:(0,Pe.A)(h,null==H?void 0:H.className,null==$?void 0:$.root,!B.open&&B.exited&&(null==$?void 0:$.hidden))}),K=$P({elementType:z,externalSlotProps:q,additionalProps:d,getSlotProps:e=>M((0,De.A)({},e,{onClick:t=>{k&&k(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,Pe.A)(null==q?void 0:q.className,null==d?void 0:d.className,null==$?void 0:$.backdrop),ownerState:B});return T||C||U&&!F?(0,Ve.jsx)(tN,{ref:O,container:m,disablePortal:E,children:(0,Ve.jsxs)(W,(0,De.A)({},G,{children:[!S&&u?(0,Ve.jsx)(z,(0,De.A)({},K)):null,(0,Ve.jsx)(ZM,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:A,isEnabled:j,open:C,children:t.cloneElement(f,V)})]}))}):null})),TN=SN;function kN(e){return(0,sL.Ay)("MuiPopover",e)}(0,Ge.A)("MuiPopover",["root","paper"]);const CN=["onEntering"],IN=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],RN=["slotProps"];function DN(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function LN(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function PN(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function MN(e){return"function"===typeof e?e():e}const NN=(0,rL.Ay)(TN,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ON=(0,rL.Ay)(hL,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),jN=t.forwardRef((function(e,n){var r,i,o;const a=(0,Ze.b)({props:e,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:b,slotProps:w,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:E=GM,transitionDuration:A="auto",TransitionProps:{onEntering:_}={},disableScrollLock:S=!1}=a,T=(0,Le.A)(a.TransitionProps,CN),k=(0,Le.A)(a,IN),C=null!=(r=null==w?void 0:w.paper)?r:y,I=t.useRef(),R=(0,XL.A)(I,C.ref),D=(0,De.A)({},a,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:C,transformOrigin:x,TransitionComponent:E,transitionDuration:A,TransitionProps:T}),L=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],paper:["paper"]},kN,t)})(D),P=t.useCallback((()=>{if("anchorPosition"===d)return u;const e=MN(l),t=(e&&1===e.nodeType?e:(0,cM.A)(I.current).body).getBoundingClientRect();return{top:t.top+DN(t,c.vertical),left:t.left+LN(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),M=t.useCallback((e=>({vertical:DN(e,x.vertical),horizontal:LN(e,x.horizontal)})),[x.horizontal,x.vertical]),N=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=M(t);if("none"===d)return{top:null,left:null,transformOrigin:PN(n)};const r=P();let i=r.top-n.vertical,o=r.left-n.horizontal;const a=i+t.height,s=o+t.width,c=(0,kM.A)(MN(l)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&a>u){const e=a-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(s>h){const e=s-h;o-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(o)}px`,transformOrigin:PN(n)}}),[l,d,P,M,g]),[O,j]=t.useState(v),F=t.useCallback((()=>{const e=I.current;if(!e)return;const t=N(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,j(!0)}),[N]);t.useEffect((()=>(S&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F))),[l,S,F]);t.useEffect((()=>{v&&F()})),t.useImperativeHandle(s,(()=>v?{updatePosition:()=>{F()}}:null),[v,F]),t.useEffect((()=>{if(!v)return;const e=(0,TM.A)((()=>{F()})),t=(0,kM.A)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,v,F]);let U=A;"auto"!==A||E.muiSupportAuto||(U=void 0);const B=f||(l?(0,cM.A)(MN(l)).body:void 0),$=null!=(i=null==b?void 0:b.root)?i:NN,V=null!=(o=null==b?void 0:b.paper)?o:ON,W=$P({elementType:V,externalSlotProps:(0,De.A)({},C,{style:O?C.style:(0,De.A)({},C.style,{opacity:0})}),additionalProps:{elevation:m,ref:R},ownerState:D,className:(0,Pe.A)(L.paper,null==C?void 0:C.className)}),z=$P({elementType:$,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:k,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:B,open:v},ownerState:D,className:(0,Pe.A)(L.root,p)}),{slotProps:H}=z,q=(0,Le.A)(z,RN);return(0,Ve.jsx)($,(0,De.A)({},q,!CL($)&&{slotProps:H,disableScrollLock:S},{children:(0,Ve.jsx)(E,(0,De.A)({appear:!0,in:v,onEntering:(e,t)=>{_&&_(e,t),F()},onExited:()=>{j(!1)},timeout:U},T,{children:(0,Ve.jsx)(V,(0,De.A)({},W,{children:h}))}))}))})),FN=jN;function UN(e){return(0,sL.Ay)("MuiMenu",e)}(0,Ge.A)("MuiMenu",["root","paper","list"]);const BN=["onEntering"],$N=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],VN={vertical:"top",horizontal:"right"},WN={vertical:"top",horizontal:"left"},zN=(0,rL.Ay)(FN,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),HN=(0,rL.Ay)(ON,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),qN=(0,rL.Ay)(SM,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),GN=t.forwardRef((function(e,n){var r,i;const o=(0,Ze.b)({props:e,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:b={}}=o,w=(0,Le.A)(o.TransitionProps,BN),x=(0,Le.A)(o,$N),E=qD(),A=(0,De.A)({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:w,variant:v}),_=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],paper:["paper"],list:["list"]},UN,t)})(A),S=a&&!c&&h,T=t.useRef(null);let k=-1;t.Children.map(s,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===k)&&(k=n))}));const C=null!=(r=y.paper)?r:HN,I=null!=(i=b.paper)?i:p,R=$P({elementType:y.root,externalSlotProps:b.root,ownerState:A,className:[_.root,l]}),D=$P({elementType:C,externalSlotProps:I,ownerState:A,className:_.paper});return(0,Ve.jsx)(zN,(0,De.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?VN:WN,slots:{paper:C,root:y.root},slotProps:{root:R,paper:D},open:h,ref:n,transitionDuration:m,TransitionProps:(0,De.A)({onEntering:(e,t)=>{T.current&&T.current.adjustStyleForScrollbar(e,{direction:E?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:A},x,{classes:f,children:(0,Ve.jsx)(qN,(0,De.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:T,autoFocus:a&&(-1===k||c),autoFocusItem:S,variant:v},u,{className:(0,Pe.A)(_.list,u.className),children:s}))}))})),KN=GN;function YN(e){return(0,sL.Ay)("MuiDivider",e)}const QN=(0,Ge.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function XN(e){return(0,sL.Ay)("MuiListItemIcon",e)}const ZN=(0,Ge.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function JN(e){return(0,sL.Ay)("MuiListItemText",e)}const eO=(0,Ge.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function tO(e){return(0,sL.Ay)("MuiMenuItem",e)}const nO=(0,Ge.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),rO=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],iO=(0,rL.Ay)(LP,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${nO.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${nO.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${nO.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${nO.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${nO.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${QN.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${QN.inset}`]:{marginLeft:52},[`& .${eO.root}`]:{marginTop:0,marginBottom:0},[`& .${eO.inset}`]:{paddingLeft:36},[`& .${ZN.root}`]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,De.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${ZN.root} svg`]:{fontSize:"1.25rem"}}))})),oO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,p=(0,Le.A)(r,rO),f=t.useContext(uM),m=t.useMemo((()=>({dense:a||f.dense||!1,disableGutters:l})),[f.dense,a,l]),g=t.useRef(null);(0,yM.A)((()=>{i&&g.current&&g.current.focus()}),[i]);const v=(0,De.A)({},r,{dense:m.dense,divider:s,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,s={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,nL.A)(s,tO,a);return(0,De.A)({},a,l)})(r),b=(0,XL.A)(g,n);let w;return r.disabled||(w=void 0!==d?d:-1),(0,Ve.jsx)(uM.Provider,{value:m,children:(0,Ve.jsx)(iO,(0,De.A)({ref:b,role:u,tabIndex:w,component:o,focusVisibleClassName:(0,Pe.A)(y.focusVisible,c),className:(0,Pe.A)(y.root,h)},p,{ownerState:v,classes:y}))})})),aO=oO,sO=["className"],lO=(0,rL.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),cO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemIcon"}),{className:i}=r,o=(0,Le.A)(r,sO),a=t.useContext(uM),s=(0,De.A)({},r,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,nL.A)(r,XN,n)})(s);return(0,Ve.jsx)(lO,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))})),uO=cO,dO=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],hO=(0,rL.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${eO.primary}`]:t.primary},{[`& .${eO.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,De.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),pO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=(0,Le.A)(r,dO),{dense:p}=t.useContext(uM);let f=null!=l?l:i,m=u;const g=(0,De.A)({},r,{disableTypography:a,inset:s,primary:!!f,secondary:!!m,dense:p}),v=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,a={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,nL.A)(a,JN,t)})(g);return null==f||f.type===QL||a||(f=(0,Ve.jsx)(QL,(0,De.A)({variant:p?"body2":"body1",className:v.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:f}))),null==m||m.type===QL||a||(m=(0,Ve.jsx)(QL,(0,De.A)({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:m}))),(0,Ve.jsxs)(hO,(0,De.A)({className:(0,Pe.A)(v.root,o),ownerState:g,ref:n},h,{children:[f,m]}))})),fO=pO,mO=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],gO=(0,rL.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,oL.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),vO=(0,rL.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===n.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})})),yO=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:a=(i?"div":"hr"),flexItem:s=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==a?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Le.A)(n,mO),f=(0,De.A)({},n,{absolute:r,component:a,flexItem:s,light:l,orientation:c,role:u,textAlign:d,variant:h}),m=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===a&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,nL.A)(c,YN,r)})(f);return(0,Ve.jsx)(gO,(0,De.A)({as:a,className:(0,Pe.A)(m.root,o),role:u,ref:t,ownerState:f},p,{children:i?(0,Ve.jsx)(vO,{className:m.wrapper,ownerState:f,children:i}):null}))}));yO.muiSkipListHighlight=!0;const bO=yO,wO=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),xO=(0,_L.A)((0,Ve.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),EO=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),AO=(0,_L.A)((0,Ve.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),_O=(0,_L.A)((0,Ve.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),SO=()=>{const e=Z(),[n,r]=(0,t.useState)(null),{currentUser:i,logout:o}=ND(),a=()=>{r(null)},s=t=>{a(),setTimeout((()=>{e(t,{replace:!0})}),50)};return(0,Ve.jsx)(Ve.Fragment,{children:(0,Ve.jsx)(yL,{position:"static",elevation:0,sx:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none",borderBottom:"none",padding:"0 24px"},children:(0,Ve.jsxs)(AL,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",minHeight:"auto"},disableGutters:!0,children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,Ve.jsx)(WL,{src:"/logo.png",alt:"Side Eye",sx:{width:40,height:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>e("/")}),(0,Ve.jsx)(QL,{variant:"h5",component:"div",sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main","&:hover":{opacity:.8}},onClick:()=>e("/"),children:"SideEye"})]}),(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:i?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(FP,{color:"inherit",onClick:()=>e("/notifications"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(YP,{badgeContent:0,color:"error",children:(0,Ve.jsx)(wO,{})})}),(0,Ve.jsx)(FP,{color:"inherit",onClick:e=>{r(e.currentTarget)},sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(xO,{})})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(lM,{color:"inherit",onClick:()=>e("/login"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Login"}),(0,Ve.jsx)(lM,{color:"inherit",onClick:()=>e("/register"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Register"})]})}),(0,Ve.jsxs)(KN,{anchorEl:n,open:Boolean(n),onClose:a,sx:{"& .MuiPaper-root":{borderRadius:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",minWidth:200,border:"none"}},children:[(0,Ve.jsxs)(aO,{onClick:()=>s("/creators-hub"),children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(EO,{})}),(0,Ve.jsx)(fO,{primary:"Creators Hub"})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(aO,{onClick:()=>s("/settings"),children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(AO,{})}),(0,Ve.jsx)(fO,{primary:"Settings"})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(aO,{onClick:async()=>{await o(),a()},children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(_O,{})}),(0,Ve.jsx)(fO,{children:"Logout"})]})]})]})})})},TO=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function kO(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,kM.A)(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=o.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+s-r.left}px)`:`translateX(${o.innerWidth+s-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const CO=t.forwardRef((function(e,n){const r=UM(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:d=i,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:v,onExiting:y,style:b,timeout:w=o,TransitionComponent:x=FM}=e,E=(0,Le.A)(e,TO),A=t.useRef(null),_=(0,XL.A)(CM(l),A,n),S=e=>t=>{e&&(void 0===t?e(A.current):e(A.current,t))},T=S(((e,t)=>{kO(u,e,c),BM(e),p&&p(e,t)})),k=S(((e,t)=>{const n=$M({timeout:w,style:b,easing:d},{mode:"enter"});e.style.webkitTransition=r.transitions.create("-webkit-transform",(0,De.A)({},n)),e.style.transition=r.transitions.create("transform",(0,De.A)({},n)),e.style.webkitTransform="none",e.style.transform="none",m&&m(e,t)})),C=S(f),I=S(y),R=S((e=>{const t=$M({timeout:w,style:b,easing:d},{mode:"exit"});e.style.webkitTransition=r.transitions.create("-webkit-transform",t),e.style.transition=r.transitions.create("transform",t),kO(u,e,c),g&&g(e)})),D=S((e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)})),L=t.useCallback((()=>{A.current&&kO(u,A.current,c)}),[u,c]);return t.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=(0,TM.A)((()=>{A.current&&kO(u,A.current,c)})),t=(0,kM.A)(A.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),t.useEffect((()=>{h||L()}),[h,L]),(0,Ve.jsx)(x,(0,De.A)({nodeRef:A,onEnter:T,onEntered:C,onEntering:k,onExit:R,onExited:D,onExiting:I,addEndListener:e=>{a&&a(A.current,e)},appear:s,in:h,timeout:w},E,{children:(e,n)=>t.cloneElement(l,(0,De.A)({ref:_,style:(0,De.A)({visibility:"exited"!==e||h?void 0:"hidden"},b,l.props.style)},n))}))})),IO=CO;var RO=n(3828);function DO(e){return(0,sL.Ay)("MuiListItem",e)}const LO=(0,Ge.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function PO(e){return(0,sL.Ay)("MuiListItemButton",e)}const MO=(0,Ge.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function NO(e){return(0,sL.Ay)("MuiListItemSecondaryAction",e)}(0,Ge.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const OO=["className"],jO=(0,rL.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),FO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=(0,Le.A)(r,OO),a=t.useContext(uM),s=(0,De.A)({},r,{disableGutters:a.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,nL.A)(r,NO,n)})(s);return(0,Ve.jsx)(jO,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))}));FO.muiName="ListItemSecondaryAction";const UO=FO,BO=["className"],$O=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],VO=(0,rL.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,De.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${MO.root}`]:{paddingRight:48}},{[`&.${LO.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${LO.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${LO.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${LO.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${LO.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),WO=(0,rL.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),zO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:a=!1,children:s,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:w,selected:x=!1,slotProps:E={},slots:A={}}=r,_=(0,Le.A)(r.ContainerProps,BO),S=(0,Le.A)(r,$O),T=t.useContext(uM),k=t.useMemo((()=>({dense:f||T.dense||!1,alignItems:i,disableGutters:g})),[i,T.dense,f,g]),C=t.useRef(null);(0,yM.A)((()=>{o&&C.current&&C.current.focus()}),[o]);const I=t.Children.toArray(s),R=I.length&&(0,RO.A)(I[I.length-1],["ListItemSecondaryAction"]),D=(0,De.A)({},r,{alignItems:i,autoFocus:o,button:a,dense:k.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:R,selected:x}),L=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,nL.A)(d,DO,r)})(D),P=(0,XL.A)(C,n),M=A.root||u.Root||VO,N=E.root||d.root||{},O=(0,De.A)({className:(0,Pe.A)(L.root,N.className,l),disabled:m},S);let j=c||"li";return a&&(O.component=c||"div",O.focusVisibleClassName=(0,Pe.A)(LO.focusVisible,b),j=LP),R?(j=O.component||c?j:"div","li"===h&&("li"===j?j="div":"li"===O.component&&(O.component="div")),(0,Ve.jsx)(uM.Provider,{value:k,children:(0,Ve.jsxs)(WO,(0,De.A)({as:h,className:(0,Pe.A)(L.container,p),ref:P,ownerState:D},_,{children:[(0,Ve.jsx)(M,(0,De.A)({},N,!CL(M)&&{as:j,ownerState:(0,De.A)({},D,N.ownerState)},O,{children:I})),I.pop()]}))})):(0,Ve.jsx)(uM.Provider,{value:k,children:(0,Ve.jsxs)(M,(0,De.A)({},N,{as:j,ref:P},!CL(M)&&{ownerState:(0,De.A)({},D,N.ownerState)},O,{children:[I,w&&(0,Ve.jsx)(UO,{children:w})]}))})})),HO=zO;function qO(e){return(0,sL.Ay)("MuiListItemAvatar",e)}(0,Ge.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const GO=["className"],KO=(0,rL.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,De.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),YO=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemAvatar"}),{className:i}=r,o=(0,Le.A)(r,GO),a=t.useContext(uM),s=(0,De.A)({},r,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,nL.A)(r,qO,n)})(s);return(0,Ve.jsx)(KO,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},o))})),QO=YO;var XO=n(3539);function ZO(e){return(0,sL.Ay)("MuiDialog",e)}const JO=(0,Ge.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const ej=t.createContext({}),tj=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],nj=(0,rL.Ay)(uN,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),rj=(0,rL.Ay)(TN,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),ij=(0,rL.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,iL.A)(n.scroll)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),oj=(0,rL.Ay)(hL,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,iL.A)(n.scroll)}`],t[`paperWidth${(0,iL.A)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${JO.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`,[`&.${JO.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${JO.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),aj=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDialog"}),i=UM(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:v,onClose:y,open:b,PaperComponent:w=hL,PaperProps:x={},scroll:E="paper",TransitionComponent:A=oN,transitionDuration:_=o,TransitionProps:S}=r,T=(0,Le.A)(r,tj),k=(0,De.A)({},r,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:E}),C=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,a={root:["root"],container:["container",`scroll${(0,iL.A)(n)}`],paper:["paper",`paperScroll${(0,iL.A)(n)}`,`paperWidth${(0,iL.A)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,nL.A)(a,ZO,t)})(k),I=t.useRef(),R=(0,XO.A)(s),D=t.useMemo((()=>({titleId:R})),[R]);return(0,Ve.jsx)(rj,(0,De.A)({className:(0,Pe.A)(C.root,d),closeAfterTransition:!0,components:{Backdrop:nj},componentsProps:{backdrop:(0,De.A)({transitionDuration:_,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:b,ref:n,onClick:e=>{v&&v(e),I.current&&(I.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:k},T,{children:(0,Ve.jsx)(A,(0,De.A)({appear:!0,in:b,timeout:_,role:"presentation"},S,{children:(0,Ve.jsx)(ij,{className:(0,Pe.A)(C.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:k,children:(0,Ve.jsx)(oj,(0,De.A)({as:w,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":R},x,{className:(0,Pe.A)(C.paper,x.className),ownerState:k,children:(0,Ve.jsx)(ej.Provider,{value:D,children:u})}))})}))}))})),sj=aj;var lj=n(7483),cj=n(8099),uj=n(1927);const dj=["onChange","maxRows","minRows","style","value"];function hj(e){return parseInt(e,10)||0}const pj={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function fj(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const mj=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s}=e,l=(0,Le.A)(e,dj),{current:c}=t.useRef(null!=s),u=t.useRef(null),d=(0,kL.A)(n,u),h=t.useRef(null),p=t.useRef(null),f=t.useCallback((()=>{const t=u.current,n=p.current;if(!t||!n)return;const r=(0,pN.A)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=r.boxSizing,s=hj(r.paddingBottom)+hj(r.paddingTop),l=hj(r.borderBottomWidth)+hj(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;o&&(h=Math.max(Number(o)*d,h)),i&&(h=Math.min(Number(i)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===a?s+l:0),overflowing:Math.abs(h-c)<=1}}),[i,o,e.placeholder]),m=(0,dN.A)((()=>{const e=u.current,t=f();if(!e||!t||fj(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=t.useCallback((()=>{const e=u.current,t=f();if(!e||!t||fj(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[f]),v=t.useRef(-1);(0,JM.A)((()=>{const e=(0,uj.A)(g),t=null==u?void 0:u.current;if(!t)return;const n=(0,pN.A)(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{m()&&(r.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[f,g,m]),(0,JM.A)((()=>{g()}));return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("textarea",(0,De.A)({value:s,onChange:e=>{c||g(),r&&r(e)},ref:d,rows:o,style:a},l)),(0,Ve.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,De.A)({},pj,a,{paddingTop:0,paddingBottom:0})})]})})),gj=mj;function vj(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const yj=t.createContext(void 0);function bj(){return t.useContext(yj)}function wj(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function xj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(wj(e.value)&&""!==e.value||t&&wj(e.defaultValue)&&""!==e.defaultValue)}function Ej(e){return(0,sL.Ay)("MuiInputBase",e)}const Aj=(0,Ge.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),_j=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Sj=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,iL.A)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Tj=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},kj=(0,rL.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Sj})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Aj.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,De.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Cj=(0,rL.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Tj})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,De.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},a=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,De.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Aj.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Aj.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Ij=(0,Ve.jsx)(nt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Rj=t.forwardRef((function(e,n){var r;const i=(0,Ze.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:w,minRows:x,multiline:E=!1,name:A,onBlur:_,onChange:S,onClick:T,onFocus:k,onKeyDown:C,onKeyUp:I,placeholder:R,readOnly:D,renderSuffix:L,rows:P,slotProps:M={},slots:N={},startAdornment:O,type:j="text",value:F}=i,U=(0,Le.A)(i,_j),B=null!=y.value?y.value:F,{current:$}=t.useRef(null!=B),V=t.useRef(),W=t.useCallback((e=>{0}),[]),z=(0,XL.A)(V,b,y.ref,W),[H,q]=t.useState(!1),G=bj();const K=vj({props:i,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});K.focused=G?G.focused:H,t.useEffect((()=>{!G&&h&&H&&(q(!1),_&&_())}),[G,h,H,_]);const Y=G&&G.onFilled,Q=G&&G.onEmpty,X=t.useCallback((e=>{xj(e)?Y&&Y():Q&&Q()}),[Y,Q]);(0,yM.A)((()=>{$&&X({value:B})}),[B,X,$]);t.useEffect((()=>{X(V.current)}),[]);let Z=v,J=y;E&&"input"===Z&&(J=P?(0,De.A)({type:void 0,minRows:P,maxRows:P},J):(0,De.A)({type:void 0,maxRows:w,minRows:x},J),Z=gj);t.useEffect((()=>{G&&G.setAdornedStart(Boolean(O))}),[G,O]);const ee=(0,De.A)({},i,{color:K.color||"primary",disabled:K.disabled,endAdornment:f,error:K.error,focused:K.focused,formControl:G,fullWidth:m,hiddenLabel:K.hiddenLabel,multiline:E,size:K.size,startAdornment:O,type:j}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,m={root:["root",`color${(0,iL.A)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",h&&"medium"!==h&&`size${(0,iL.A)(h)}`,u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,nL.A)(m,Ej,t)})(ee),ne=N.root||c.Root||kj,re=M.root||u.root||{},ie=N.input||c.Input||Cj;return J=(0,De.A)({},J,null!=(r=M.input)?r:u.input),(0,Ve.jsxs)(t.Fragment,{children:[!p&&Ij,(0,Ve.jsxs)(ne,(0,De.A)({},re,!CL(ne)&&{ownerState:(0,De.A)({},ee,re.ownerState)},{ref:n,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),T&&T(e)}},U,{className:(0,Pe.A)(te.root,re.className,l,D&&"MuiInputBase-readOnly"),children:[O,(0,Ve.jsx)(yj.Provider,{value:null,children:(0,Ve.jsx)(ie,(0,De.A)({ownerState:ee,"aria-invalid":K.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:d,disabled:K.disabled,id:g,onAnimationStart:e=>{X("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:A,placeholder:R,readOnly:D,required:K.required,rows:P,value:B,onKeyDown:C,onKeyUp:I,type:j},J,!CL(ie)&&{as:Z,ownerState:(0,De.A)({},ee,J.ownerState)},{ref:z,className:(0,Pe.A)(te.input,J.className,D&&"MuiInputBase-readOnly"),onBlur:e=>{_&&_(e),y.onBlur&&y.onBlur(e),G&&G.onBlur?G.onBlur(e):q(!1)},onChange:function(e){if(!$){const t=e.target||V.current;if(null==t)throw new Error((0,cj.A)(1));X({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),S&&S(e,...n)},onFocus:e=>{K.disabled?e.stopPropagation():(k&&k(e),y.onFocus&&y.onFocus(e),G&&G.onFocus?G.onFocus(e):q(!0))}}))}),f,L?L((0,De.A)({},K,{startAdornment:O})):null]}))]})})),Dj=Rj;function Lj(e){return(0,sL.Ay)("MuiInput",e)}const Pj=(0,De.A)({},Aj,(0,Ge.A)("MuiInput",["root","underline","input"])),Mj=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Nj=(0,rL.Ay)(kj,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Sj(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),(0,De.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pj.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pj.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pj.disabled}, .${Pj.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Pj.disabled}:before`]:{borderBottomStyle:"dotted"}})})),Oj=(0,rL.Ay)(Cj,{name:"MuiInput",slot:"Input",overridesResolver:Tj})({}),jj=t.forwardRef((function(e,t){var n,r,i,o;const a=(0,Ze.b)({props:e,name:"MuiInput"}),{disableUnderline:s,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=a,g=(0,Le.A)(a,Mj),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,nL.A)(r,Lj,t);return(0,De.A)({},t,i)})(a),y={root:{ownerState:{disableUnderline:s}}},b=(null!=p?p:c)?(0,lj.A)(null!=p?p:c,y):y,w=null!=(n=null!=(r=f.root)?r:l.Root)?n:Nj,x=null!=(i=null!=(o=f.input)?o:l.Input)?i:Oj;return(0,Ve.jsx)(Dj,(0,De.A)({slots:{root:w,input:x},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:v}))}));jj.muiName="Input";const Fj=jj;function Uj(e){return(0,sL.Ay)("MuiFilledInput",e)}const Bj=(0,De.A)({},Aj,(0,Ge.A)("MuiFilledInput",["root","underline","input"])),$j=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Vj=(0,rL.Ay)(kj,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Sj(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,De.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a}},[`&.${Bj.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a},[`&.${Bj.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Bj.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Bj.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Bj.disabled}, .${Bj.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Bj.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,De.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),Wj=(0,rL.Ay)(Cj,{name:"MuiFilledInput",slot:"Input",overridesResolver:Tj})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),zj=t.forwardRef((function(e,t){var n,r,i,o;const a=(0,Ze.b)({props:e,name:"MuiFilledInput"}),{components:s={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=a,m=(0,Le.A)(a,$j),g=(0,De.A)({},a,{fullWidth:c,inputComponent:u,multiline:d,type:f}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,nL.A)(r,Uj,t);return(0,De.A)({},t,i)})(a),y={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,lj.A)(y,null!=h?h:l):y,w=null!=(n=null!=(r=p.root)?r:s.Root)?n:Vj,x=null!=(i=null!=(o=p.input)?o:s.Input)?i:Wj;return(0,Ve.jsx)(Dj,(0,De.A)({slots:{root:w,input:x},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},m,{classes:v}))}));zj.muiName="Input";const Hj=zj;var qj;const Gj=["children","classes","className","label","notched"],Kj=(0,rL.Ay)("fieldset",{shouldForwardProp:XP.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Yj=(0,rL.Ay)("legend",{shouldForwardProp:XP.A})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,De.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Qj(e){return(0,sL.Ay)("MuiOutlinedInput",e)}const Xj=(0,De.A)({},Aj,(0,Ge.A)("MuiOutlinedInput",["root","notchedOutline","input"])),Zj=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Jj=(0,rL.Ay)(kj,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Sj})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,De.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Xj.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Xj.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${Xj.focused} .${Xj.notchedOutline}`]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},[`&.${Xj.error} .${Xj.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Xj.disabled} .${Xj.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,De.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),eF=(0,rL.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,Le.A)(e,Gj),o=null!=n&&""!==n,a=(0,De.A)({},e,{notched:r,withLabel:o});return(0,Ve.jsx)(Kj,(0,De.A)({"aria-hidden":!0,className:t,ownerState:a},i,{children:(0,Ve.jsx)(Yj,{ownerState:a,children:o?(0,Ve.jsx)("span",{children:n}):qj||(qj=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),tF=(0,rL.Ay)(Cj,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Tj})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),nF=t.forwardRef((function(e,n){var r,i,o,a,s;const l=(0,Ze.b)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,v=(0,Le.A)(l,Zj),y=(e=>{const{classes:t}=e,n=(0,nL.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Qj,t);return(0,De.A)({},t,n)})(l),b=bj(),w=vj({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=(0,De.A)({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:g}),E=null!=(r=null!=(i=m.root)?i:c.Root)?r:Jj,A=null!=(o=null!=(a=m.input)?a:c.Input)?o:tF;return(0,Ve.jsx)(Dj,(0,De.A)({slots:{root:E,input:A},renderSuffix:e=>(0,Ve.jsx)(eF,{ownerState:x,className:y.notchedOutline,label:null!=h&&""!==h&&w.required?s||(s=(0,Ve.jsxs)(t.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:n,type:g},v,{classes:(0,De.A)({},y,{notchedOutline:null})}))}));nF.muiName="Input";const rF=nF;function iF(e){return(0,sL.Ay)("MuiFormLabel",e)}const oF=(0,Ge.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),aF=["children","className","color","component","disabled","error","filled","focused","required"],sF=(0,rL.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${oF.focused}`]:{color:(t.vars||t).palette[n.color].main},[`&.${oF.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${oF.error}`]:{color:(t.vars||t).palette.error.main}})})),lF=(0,rL.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${oF.error}`]:{color:(t.vars||t).palette.error.main}}})),cF=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,a=(0,Le.A)(n,aF),s=vj({props:n,muiFormControl:bj(),states:["color","required","focused","disabled","error","filled"]}),l=(0,De.A)({},n,{color:s.color||"primary",component:o,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e,l={root:["root",`color${(0,iL.A)(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,nL.A)(l,iF,t)})(l);return(0,Ve.jsxs)(sF,(0,De.A)({as:o,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},a,{children:[r,s.required&&(0,Ve.jsxs)(lF,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),uF=cF;function dF(e){return(0,sL.Ay)("MuiInputLabel",e)}(0,Ge.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const hF=["disableAnimation","margin","shrink","variant","className"],pF=(0,rL.Ay)(uF,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${oF.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,De.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),fF=t.forwardRef((function(e,t){const n=(0,Ze.b)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,a=(0,Le.A)(n,hF),s=bj();let l=i;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);const c=vj({props:n,muiFormControl:s,states:["size","variant","required","focused"]}),u=(0,De.A)({},n,{disableAnimation:r,formControl:s,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${(0,iL.A)(r)}`,a],asterisk:[s&&"asterisk"]},c=(0,nL.A)(l,dF,t);return(0,De.A)({},t,c)})(u);return(0,Ve.jsx)(pF,(0,De.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,Pe.A)(d.root,o)},a,{classes:d}))})),mF=fF;function gF(e){return(0,sL.Ay)("MuiFormControl",e)}(0,Ge.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const vF=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],yF=(0,rL.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,t[`margin${(0,iL.A)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),bF=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=r,v=(0,Le.A)(r,vF),y=(0,De.A)({},r,{color:a,component:s,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,iL.A)(n)}`,r&&"fullWidth"]};return(0,nL.A)(i,gF,t)})(y),[w,x]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!(0,RO.A)(t,["Input","Select"]))return;const n=(0,RO.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[E,A]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{(0,RO.A)(t,["Input","Select"])&&(xj(t.props,!0)||xj(t.props.inputProps,!0))&&(e=!0)})),e})),[_,S]=t.useState(!1);l&&_&&S(!1);const T=void 0===u||l?_:u;let k;const C=t.useMemo((()=>({adornedStart:w,setAdornedStart:x,color:a,disabled:l,error:c,filled:E,focused:T,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{S(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{S(!0)},registerEffect:k,required:f,variant:g})),[w,a,l,c,E,T,d,h,k,f,m,g]);return(0,Ve.jsx)(yj.Provider,{value:C,children:(0,Ve.jsx)(yF,(0,De.A)({as:s,ownerState:y,className:(0,Pe.A)(b.root,o),ref:n},v,{children:i}))})})),wF=bF;function xF(e){return(0,sL.Ay)("MuiFormHelperText",e)}const EF=(0,Ge.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var AF;const _F=["children","className","component","disabled","error","filled","focused","margin","required","variant"],SF=(0,rL.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,iL.A)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${EF.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${EF.error}`]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),TF=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,a=(0,Le.A)(n,_F),s=vj({props:n,muiFormControl:bj(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,De.A)({},n,{component:o,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${(0,iL.A)(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,nL.A)(c,xF,t)})(l);return(0,Ve.jsx)(SF,(0,De.A)({as:o,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},a,{children:" "===r?AF||(AF=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),kF=TF;function CF(e){return(0,sL.Ay)("MuiNativeSelect",e)}const IF=(0,Ge.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),RF=["className","disabled","error","IconComponent","inputRef","variant"],DF=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,De.A)({},n.vars?{backgroundColor:`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${IF.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},LF=(0,rL.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:XP.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${IF.multiple}`]:t.multiple}]}})(DF),PF=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${IF.disabled}`]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},MF=(0,rL.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,iL.A)(n.variant)}`],n.open&&t.iconOpen]}})(PF),NF=t.forwardRef((function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=e,c=(0,Le.A)(e,RF),u=(0,De.A)({},e,{disabled:i,variant:l,error:o}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${(0,iL.A)(n)}`,o&&"iconOpen",r&&"disabled"]};return(0,nL.A)(s,CF,t)})(u);return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(LF,(0,De.A)({ownerState:u,className:(0,Pe.A)(d.select,r),disabled:i,ref:s||n},c)),e.multiple?null:(0,Ve.jsx)(MF,{as:a,ownerState:u,className:d.icon})]})})),OF=NF;var jF=n(1960),FF=n(8733);function UF(e){return(0,sL.Ay)("MuiSelect",e)}const BF=(0,Ge.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var $F;const VF=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],WF=(0,rL.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${BF.select}`]:t.select},{[`&.${BF.select}`]:t[n.variant]},{[`&.${BF.error}`]:t.error},{[`&.${BF.multiple}`]:t.multiple}]}})(DF,{[`&.${BF.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zF=(0,rL.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,iL.A)(n.variant)}`],n.open&&t.iconOpen]}})(PF),HF=(0,rL.Ay)("input",{shouldForwardProp:e=>(0,jF.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qF(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function GF(e){return null==e||"string"===typeof e&&!e.trim()}const KF=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:s,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:p,error:f=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:b,name:w,onBlur:x,onChange:E,onClose:A,onFocus:_,onOpen:S,open:T,readOnly:k,renderValue:C,SelectDisplayProps:I={},tabIndex:R,value:D,variant:L="standard"}=e,P=(0,Le.A)(e,VF),[M,N]=(0,FF.A)({controlled:D,default:d,name:"Select"}),[O,j]=(0,FF.A)({controlled:T,default:u,name:"Select"}),F=t.useRef(null),U=t.useRef(null),[B,$]=t.useState(null),{current:V}=t.useRef(null!=T),[W,z]=t.useState(),H=(0,XL.A)(n,g),q=t.useCallback((e=>{U.current=e,e&&$(e)}),[]),G=null==B?void 0:B.parentNode;t.useImperativeHandle(H,(()=>({focus:()=>{U.current.focus()},node:F.current,value:M})),[M]),t.useEffect((()=>{u&&O&&B&&!V&&(z(s?null:G.clientWidth),U.current.focus())}),[B,s]),t.useEffect((()=>{a&&U.current.focus()}),[a]),t.useEffect((()=>{if(!v)return;const e=(0,cM.A)(U.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const K=(e,t)=>{e?S&&S(t):A&&A(t),V||(z(s?null:G.clientWidth),j(e))},Y=t.Children.toArray(l),Q=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(N(n),E)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),E(i,e)}b||K(!1,t)}},X=null!==B&&O;let Z,J;delete P["aria-invalid"];const ee=[];let te=!1,ne=!1;(xj({value:M})||p)&&(C?Z=C(M):te=!0);const re=Y.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(M))throw new Error((0,cj.A)(2));n=M.some((t=>qF(t,e.props.value))),n&&te&&ee.push(e.props.children)}else n=qF(M,e.props.value),n&&te&&(J=e.props.children);return n&&(ne=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:Q(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));te&&(Z=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):J);let ie,oe=W;!s&&V&&B&&(oe=G.clientWidth),ie="undefined"!==typeof R?R:h?null:0;const ae=I.id||(w?`mui-component-select-${w}`:void 0),se=(0,De.A)({},e,{variant:L,value:M,open:X,error:f}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${(0,iL.A)(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,nL.A)(s,UF,t)})(se),ce=(0,De.A)({},y.PaperProps,null==(r=y.slotProps)?void 0:r.paper),ue=(0,XO.A)();return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(WF,(0,De.A)({ref:q,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!k){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||k?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),K(!0,e))},onBlur:e=>{!X&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:w}}),x(e))},onFocus:_},I,{ownerState:se,className:(0,Pe.A)(I.className,le.select,c),id:ae,children:GF(Z)?$F||($F=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):Z})),(0,Ve.jsx)(HF,(0,De.A)({"aria-invalid":f,value:Array.isArray(M)?M.join(","):M,name:w,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(N(t.props.value),E&&E(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:a,ownerState:se},P)),(0,Ve.jsx)(zF,{as:m,className:le.icon,ownerState:se}),(0,Ve.jsx)(KN,(0,De.A)({id:`menu-${w||""}`,anchorEl:G,open:X,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,De.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,De.A)({},y.slotProps,{paper:(0,De.A)({},ce,{style:(0,De.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),YF=KF,QF=(0,_L.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),XF=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],ZF=["root"],JF={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,XP.A)(e)&&"variant"!==e,slot:"Root"},eU=(0,rL.Ay)(Fj,JF)(""),tU=(0,rL.Ay)(rF,JF)(""),nU=(0,rL.Ay)(Hj,JF)(""),rU=t.forwardRef((function(e,n){const r=(0,Ze.b)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=QF,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:w,open:x,renderValue:E,SelectDisplayProps:A,variant:_="outlined"}=r,S=(0,Le.A)(r,XF),T=y?OF:YF,k=vj({props:r,muiFormControl:bj(),states:["variant","error"]}),C=k.variant||_,I=(0,De.A)({},r,{variant:C,classes:a}),R=(e=>{const{classes:t}=e;return t})(I),D=(0,Le.A)(R,ZF),L=h||{standard:(0,Ve.jsx)(eU,{ownerState:I}),outlined:(0,Ve.jsx)(tU,{label:f,ownerState:I}),filled:(0,Ve.jsx)(nU,{ownerState:I})}[C],P=(0,XL.A)(n,CM(L));return(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(L,(0,De.A)({inputComponent:T,inputProps:(0,De.A)({children:o,error:k.error,IconComponent:u,variant:C,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:x,renderValue:E,SelectDisplayProps:(0,De.A)({id:d},A)},p,{classes:p?(0,lj.A)(D,p.classes):D},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===C?{notched:!0}:{},{ref:P,className:(0,Pe.A)(L.props.className,s,R.root)},!h&&{variant:C},S))})}));rU.muiName="Select";const iU=rU;function oU(e){return(0,sL.Ay)("MuiTextField",e)}(0,Ge.A)("MuiTextField",["root"]);const aU=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],sU={standard:Fj,filled:Hj,outlined:rF},lU=(0,rL.Ay)(wF,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),cU=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:b,maxRows:w,minRows:x,multiline:E=!1,name:A,onBlur:_,onChange:S,onFocus:T,placeholder:k,required:C=!1,rows:I,select:R=!1,SelectProps:D,type:L,value:P,variant:M="outlined"}=n,N=(0,Le.A)(n,aU),O=(0,De.A)({},n,{autoFocus:i,color:s,disabled:c,error:u,fullWidth:h,multiline:E,required:C,select:R,variant:M}),j=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},oU,t)})(O);const F={};"outlined"===M&&(m&&"undefined"!==typeof m.shrink&&(F.notched=m.shrink),F.label=b),R&&(D&&D.native||(F.id=void 0),F["aria-describedby"]=void 0);const U=(0,XO.A)(f),B=p&&U?`${U}-helper-text`:void 0,$=b&&U?`${U}-label`:void 0,V=sU[M],W=(0,Ve.jsx)(V,(0,De.A)({"aria-describedby":B,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:E,name:A,rows:I,maxRows:w,minRows:x,type:L,value:P,id:U,inputRef:y,onBlur:_,onChange:S,onFocus:T,placeholder:k,inputProps:g},F,v));return(0,Ve.jsxs)(lU,(0,De.A)({className:(0,Pe.A)(j.root,a),disabled:c,error:u,fullWidth:h,ref:t,required:C,color:s,variant:M,ownerState:O},N,{children:[null!=b&&""!==b&&(0,Ve.jsx)(mF,(0,De.A)({htmlFor:U,id:$},m,{children:b})),R?(0,Ve.jsx)(iU,(0,De.A)({"aria-describedby":B,id:U,labelId:$,value:P,input:W},D,{children:o})):W,p&&(0,Ve.jsx)(kF,(0,De.A)({id:B},d,{children:p}))]}))})),uU=cU;function dU(e){return(0,sL.Ay)("MuiCircularProgress",e)}(0,Ge.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const hU=["className","color","disableShrink","size","style","thickness","value","variant"];let pU,fU,mU,gU,vU=e=>e;const yU=44,bU=(0,uP.i7)(pU||(pU=vU`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),wU=(0,uP.i7)(fU||(fU=vU`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),xU=(0,rL.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,iL.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,uP.AH)(mU||(mU=vU`
      animation: ${0} 1.4s linear infinite;
    `),bU)})),EU=(0,rL.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),AU=(0,rL.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,iL.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,uP.AH)(gU||(gU=vU`
      animation: ${0} 1.4s ease-in-out infinite;
    `),wU)})),_U=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Le.A)(n,hU),h=(0,De.A)({},n,{color:i,disableShrink:o,size:a,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${(0,iL.A)(r)}`],svg:["svg"],circle:["circle",`circle${(0,iL.A)(n)}`,i&&"circleDisableShrink"]};return(0,nL.A)(o,dU,t)})(h),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((yU-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,Ve.jsx)(xU,(0,De.A)({className:(0,Pe.A)(p.root,r),style:(0,De.A)({width:a,height:a},m,s),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,Ve.jsx)(EU,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Ve.jsx)(AU,{className:p.circle,style:f,ownerState:h,cx:yU,cy:yU,r:(yU-l)/2,fill:"none",strokeWidth:l})})}))})),SU=_U;var TU=n(5501);function kU(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,QP.A)(t.components[n].defaultProps,r):r}function CU(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=$e(r);i&&(o=o[i]||o);return kU({theme:o,name:n,props:t})}const IU=["ownerState"],RU=["variants"],DU=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function LU(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const PU=(0,je.A)(),MU=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function NU(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function OU(e){return e?(t,n)=>n[e]:null}function jU(e,t){let{ownerState:n}=t,r=(0,Le.A)(t,IU);const i="function"===typeof e?e((0,De.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>jU(e,(0,De.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Le.A)(i,RU);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,De.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,De.A)({ownerState:n},r,n)):e.style))})),t}return i}const FU=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=PU,rootShouldForwardProp:r=LU,slotShouldForwardProp:i=LU}=e,o=e=>(0,Ne.A)((0,De.A)({},e,{theme:NU((0,De.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Me.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=OU(MU(l))}=a,h=(0,Le.A)(a,DU),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,f=u||!1;let m=LU;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,Me.default)(e,(0,De.A)({shouldForwardProp:m,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,lj.Q)(e)?r=>jU(e,(0,De.A)({},r,{theme:NU({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];s&&d&&u.push((e=>{const r=NU((0,De.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[s]||!r.components[s].styleOverrides)return null;const i=r.components[s].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=jU(i,(0,De.A)({},e,{theme:r}))})),d(e,o)})),s&&!p&&u.push((e=>{var r;const i=NU((0,De.A)({},e,{defaultTheme:n,themeId:t}));return jU({variants:null==i||null==(r=i.components)||null==(r=r[s])?void 0:r.variants},(0,De.A)({},e,{theme:i}))})),f||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),UU=FU,BU=["className","component","disableGutters","fixed","maxWidth","classes"],$U=(0,je.A)(),VU=UU("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,TU.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),WU=e=>CU({props:e,name:"MuiContainer",defaultTheme:$U});const zU=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=VU,useThemeProps:r=WU,componentName:i="MuiContainer"}=e,o=n((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),a=t.forwardRef((function(e,t){const n=r(e),{className:a,component:s="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=n,d=(0,Le.A)(n,BU),h=(0,De.A)({},n,{component:s,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,a={root:["root",o&&`maxWidth${(0,TU.A)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,nL.A)(a,(e=>(0,sL.Ay)(t,e)),n)})(h,i);return(0,Ve.jsx)(o,(0,De.A)({as:s,ownerState:h,className:(0,Pe.A)(p.root,a),ref:t},d))}));return a}({createStyledComponent:(0,rL.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,iL.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,Ze.b)({props:e,name:"MuiContainer"})}),HU=zU;function qU(e){return(0,sL.Ay)("MuiAlert",e)}const GU=(0,Ge.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),KU=(0,_L.A)((0,Ve.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),YU=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),QU=(0,_L.A)((0,Ve.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),XU=(0,_L.A)((0,Ve.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ZU=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),JU=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],eB=(0,rL.Ay)(hL,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,iL.A)(n.color||n.severity)}`]]}})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?oL.e$:oL.a,r="light"===t.palette.mode?oL.a:oL.e$;return(0,De.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${GU.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${GU.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,De.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})})),tB=(0,rL.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),nB=(0,rL.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),rB=(0,rL.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),iB={success:(0,Ve.jsx)(KU,{fontSize:"inherit"}),warning:(0,Ve.jsx)(YU,{fontSize:"inherit"}),error:(0,Ve.jsx)(QU,{fontSize:"inherit"}),info:(0,Ve.jsx)(XU,{fontSize:"inherit"})},oB=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:a="Close",color:s,components:l={},componentsProps:c={},icon:u,iconMapping:d=iB,onClose:h,role:p="alert",severity:f="success",slotProps:m={},slots:g={},variant:v="standard"}=n,y=(0,Le.A)(n,JU),b=(0,De.A)({},n,{color:s,severity:f,variant:v,colorSeverity:s||f}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`color${(0,iL.A)(n||r)}`,`${t}${(0,iL.A)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,nL.A)(o,qU,i)})(b),x={slots:(0,De.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,De.A)({},c,m)},[E,A]=jL("closeButton",{elementType:FP,externalForwardedProps:x,ownerState:b}),[_,S]=jL("closeIcon",{elementType:ZU,externalForwardedProps:x,ownerState:b});return(0,Ve.jsxs)(eB,(0,De.A)({role:p,elevation:0,ownerState:b,className:(0,Pe.A)(w.root,o),ref:t},y,{children:[!1!==u?(0,Ve.jsx)(tB,{ownerState:b,className:w.icon,children:u||d[f]||iB[f]}):null,(0,Ve.jsx)(nB,{ownerState:b,className:w.message,children:i}),null!=r?(0,Ve.jsx)(rB,{ownerState:b,className:w.action,children:r}):null,null==r&&h?(0,Ve.jsx)(rB,{ownerState:b,className:w.action,children:(0,Ve.jsx)(E,(0,De.A)({size:"small","aria-label":a,title:a,color:"inherit",onClick:h},A,{children:(0,Ve.jsx)(_,(0,De.A)({fontSize:"small"},S))}))}):null]}))})),aB=oB;function sB(e){return(0,sL.Ay)("MuiDialogTitle",e)}const lB=(0,Ge.A)("MuiDialogTitle",["root"]),cB=["className","id"],uB=(0,rL.Ay)(QL,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),dB=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDialogTitle"}),{className:i,id:o}=r,a=(0,Le.A)(r,cB),s=r,l=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},sB,t)})(s),{titleId:c=o}=t.useContext(ej);return(0,Ve.jsx)(uB,(0,De.A)({component:"h2",className:(0,Pe.A)(l.root,i),ownerState:s,ref:n,variant:"h6",id:null!=o?o:c},a))})),hB=dB;function pB(e){return(0,sL.Ay)("MuiDialogContent",e)}(0,Ge.A)("MuiDialogContent",["root","dividers"]);const fB=["className","dividers"],mB=(0,rL.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${lB.root} + &`]:{paddingTop:0}})})),gB=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,Le.A)(n,fB),a=(0,De.A)({},n,{dividers:i}),s=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,nL.A)(r,pB,t)})(a);return(0,Ve.jsx)(mB,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),vB=gB,yB=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),bB=(0,_L.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),wB=(0,_L.A)([(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,Ve.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),xB=(0,_L.A)((0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8M12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4m3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"EmojiEmotions"),EB=e=>{var n;let{open:r,onClose:i}=e;const[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(0),b=280,w=(0,t.useRef)(null),{currentUser:x,userProfile:E}=ND();return(0,Ve.jsxs)(sj,{open:r,onClose:i,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:[(0,Ve.jsxs)(hB,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(WL,{src:(null===E||void 0===E?void 0:E.profilePic)||(null===x||void 0===x?void 0:x.photoURL)||"",alt:(null===E||void 0===E?void 0:E.name)||(null===x||void 0===x?void 0:x.displayName)||"User",sx:{width:40,height:40}}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",fontWeight:"bold",children:(null===E||void 0===E?void 0:E.name)||(null===x||void 0===x?void 0:x.displayName)||"Anonymous"}),(0,Ve.jsxs)(QL,{variant:"caption",color:"text.secondary",children:["@",(null===E||void 0===E?void 0:E.username)||(null===x||void 0===x||null===(n=x.email)||void 0===n?void 0:n.split("@")[0])||"user"]})]})]}),(0,Ve.jsx)(FP,{onClick:i,size:"small",children:(0,Ve.jsx)(yB,{})})]}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x&&sR&&E)if(o.trim()){h(!0),f(null);try{var t;let e=null;if(s){const t=EE(cR,`posts/${x.uid}/${Date.now()}_${s.name}`);await yE(t,s),e=await wE(t)}const n={content:o.trim(),authorId:x.uid,userId:x.uid,timestamp:jw(),likes:0,likedBy:[],authorName:E.name||x.displayName||"Anonymous",authorAvatar:E.profilePic||x.photoURL||"",authorUsername:E.username||(null===(t=x.email)||void 0===t?void 0:t.split("@")[0])||"user",...e&&{imageUrl:e},comments:[],tags:o.match(/#[a-zA-Z0-9_]+/g)||[],isPrivate:!1,reposts:0,repostedBy:[],views:0,isPinned:!1,isEdited:!1,isArchived:!1,deleted:!1};await kw(lb(sR,"posts"),n),MR.success("Post created successfully"),a(""),l(null),u(null),y(0),i()}catch(p){console.error("Error creating post:",p),f("Failed to create post. Please try again.")}finally{h(!1)}}else f("Please enter some content");else f("Please sign in and ensure profile is loaded to create a post")},children:[(0,Ve.jsx)(uU,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"What's on your mind?",value:o,onChange:e=>{const t=e.target.value;a(t),y(t.length),t.length>b?f("Post cannot exceed 280 characters"):f(null)},sx:{mb:2}}),c&&(0,Ve.jsxs)(Xe,{sx:{position:"relative",mb:2},children:[(0,Ve.jsx)("img",{src:c,alt:"Preview",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px",objectFit:"contain"}}),(0,Ve.jsx)(FP,{onClick:()=>{l(null),u(null),w.current&&(w.current.value=""),f(null)},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:(0,Ve.jsx)(bB,{sx:{color:"white"}})})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void f("Image size should be less than 5MB");if(!t.type.match(/image\/(jpeg|png|gif)/))return void f("Only JPEG, PNG, and GIF images are allowed");l(t),u(URL.createObjectURL(t)),f(null)}},style:{display:"none"},ref:w}),(0,Ve.jsx)(FP,{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:(0,Ve.jsx)(wB,{})}),(0,Ve.jsx)(FP,{onClick:e=>{g(!0)},children:(0,Ve.jsx)(xB,{})})]}),(0,Ve.jsx)(lM,{variant:"contained",type:"submit",disabled:!o.trim()&&!s||d,children:d?(0,Ve.jsx)(SU,{size:24}):"Post"})]})]}),p&&(0,Ve.jsx)(aB,{severity:"error",sx:{mt:2},children:p})]})]})};function AB(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function _B(e){return parseFloat(e)}var SB=n(6747);function TB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,SB.A)(e,t,n)}function kB(e){if(e.type)return e;if("#"===e.charAt(0))return kB(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,cj.A)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,cj.A)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function CB(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function IB(e,t){return e=kB(e),t=TB(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,CB(e)}function RB(e){return(0,sL.Ay)("MuiSkeleton",e)}(0,Ge.A)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const DB=["animation","className","component","height","style","variant","width"];let LB,PB,MB,NB,OB=e=>e;const jB=(0,uP.i7)(LB||(LB=OB`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),FB=(0,uP.i7)(PB||(PB=OB`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),UB=(0,rL.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const r=AB(t.shape.borderRadius)||"px",i=_B(t.shape.borderRadius);return(0,De.A)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:IB(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,uP.AH)(MB||(MB=OB`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),jB)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,uP.AH)(NB||(NB=OB`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),FB,(n.vars||n).palette.action.hover)})),BB=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:o="span",height:a,style:s,variant:l="text",width:c}=n,u=(0,Le.A)(n,DB),d=(0,De.A)({},n,{animation:r,component:o,variant:l,hasChildren:Boolean(u.children)}),h=(e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:a}=e,s={root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]};return(0,nL.A)(s,RB,t)})(d);return(0,Ve.jsx)(UB,(0,De.A)({as:o,ref:t,className:(0,Pe.A)(h.root,i),ownerState:d},u,{style:(0,De.A)({width:c,height:a},s)}))})),$B=BB,VB=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");let WB;function zB(){if(WB)return WB;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),WB="reverse",e.scrollLeft>0?WB="default":(e.scrollLeft=1,0===e.scrollLeft&&(WB="negative")),document.body.removeChild(e),WB}function HB(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(zB()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function qB(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const GB=["onChange"],KB={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const YB=(0,_L.A)((0,Ve.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),QB=(0,_L.A)((0,Ve.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function XB(e){return(0,sL.Ay)("MuiTabScrollButton",e)}const ZB=(0,Ge.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),JB=["className","slots","slotProps","direction","orientation","disabled"],e$=(0,rL.Ay)(LP,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({width:40,flexShrink:0,opacity:.8,[`&.${ZB.disabled}`]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})})),t$=t.forwardRef((function(e,t){var n,r;const i=(0,Ze.b)({props:e,name:"MuiTabScrollButton"}),{className:o,slots:a={},slotProps:s={},direction:l}=i,c=(0,Le.A)(i,JB),u=qD(),d=(0,De.A)({isRtl:u},i),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,nL.A)(i,XB,t)})(d),p=null!=(n=a.StartScrollButtonIcon)?n:YB,f=null!=(r=a.EndScrollButtonIcon)?r:QB,m=$P({elementType:p,externalSlotProps:s.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=$P({elementType:f,externalSlotProps:s.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,Ve.jsx)(e$,(0,De.A)({component:"div",className:(0,Pe.A)(h.root,o),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,Ve.jsx)(p,(0,De.A)({},m)):(0,Ve.jsx)(f,(0,De.A)({},g))}))})),n$=t$;function r$(e){return(0,sL.Ay)("MuiTabs",e)}const i$=(0,Ge.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),o$=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],a$=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,s$=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,l$=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},c$=(0,rL.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${i$.scrollButtons}`]:t.scrollButtons},{[`& .${i$.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${i$.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),u$=(0,rL.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),d$=(0,rL.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),h$=(0,rL.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),p$=(0,rL.Ay)((function(e){const{onChange:n}=e,r=(0,Le.A)(e,GB),i=t.useRef(),o=t.useRef(null),a=()=>{i.current=o.current.offsetHeight-o.current.clientHeight};return(0,yM.A)((()=>{const e=(0,TM.A)((()=>{const e=i.current;a(),e!==i.current&&n(i.current)})),t=(0,kM.A)(o.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[n]),t.useEffect((()=>{a(),n(i.current)}),[n]),(0,Ve.jsx)("div",(0,De.A)({style:KB},r,{ref:o}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),f$={};const m$=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTabs"}),i=UM(),o=qD(),{"aria-label":a,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:v=n$,scrollButtons:y="auto",selectionFollowsFocus:b,slots:w={},slotProps:x={},TabIndicatorProps:E={},TabScrollButtonProps:A={},textColor:_="primary",value:S,variant:T="standard",visibleScrollbar:k=!1}=r,C=(0,Le.A)(r,o$),I="scrollable"===T,R="vertical"===g,D=R?"scrollTop":"scrollLeft",L=R?"top":"left",P=R?"bottom":"right",M=R?"clientHeight":"clientWidth",N=R?"height":"width",O=(0,De.A)({},r,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:R,scrollButtons:y,textColor:_,variant:T,visibleScrollbar:k,fixed:!I,hideScrollbar:I&&!k,scrollableX:I&&!R,scrollableY:I&&R,centered:c&&!I,scrollButtonsHideMobile:!p}),j=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,nL.A)(c,r$,l)})(O),F=$P({elementType:w.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:O}),U=$P({elementType:w.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:O});const[B,$]=t.useState(!1),[V,W]=t.useState(f$),[z,H]=t.useState(!1),[q,G]=t.useState(!1),[K,Y]=t.useState(!1),[Q,X]=t.useState({overflow:"hidden",scrollbarWidth:0}),Z=new Map,J=t.useRef(null),ee=t.useRef(null),te=()=>{const e=J.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:HB(e,o?"rtl":"ltr"),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==S){const e=ee.current.children;if(e.length>0){const t=e[Z.get(S)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=(0,ZL.A)((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;if(R)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=o?"right":"left",t&&e){const i=o?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(o?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[N]:t?t[N]:0};if(isNaN(V[n])||isNaN(V[N]))W(i);else{const e=Math.abs(V[n]-i[n]),t=Math.abs(V[N]-i[N]);(e>=1||t>=1)&&W(i)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=qB,duration:a=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===s&&(s=r);const u=Math.min(1,(r-s)/a);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(D,J.current,e,{duration:i.transitions.duration.standard}):J.current[D]=e},ie=e=>{let t=J.current[D];R?t+=e:(t+=e*(o?-1:1),t*=o&&"reverse"===zB()?-1:1),re(t)},oe=()=>{const e=J.current[M];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[M]>e){0===r&&(t=e);break}t+=i[M]}return t},ae=()=>{ie(-1*oe())},se=()=>{ie(oe())},le=t.useCallback((e=>{X({overflow:null,scrollbarWidth:e})}),[]),ce=(0,ZL.A)((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[L]<t[L]){const r=t[D]+(n[L]-t[L]);re(r,{animation:e})}else if(n[P]>t[P]){const r=t[D]+(n[P]-t[P]);re(r,{animation:e})}})),ue=(0,ZL.A)((()=>{I&&!1!==y&&Y(!K)}));t.useEffect((()=>{const e=(0,TM.A)((()=>{J.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null==(n=t)||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null==(n=t)||n.observe(e)}))})),e(),ue()},r=(0,kM.A)(J.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{var n,o;e.clear(),r.removeEventListener("resize",e),null==(n=i)||n.disconnect(),null==(o=t)||o.disconnect()}}),[ne,ue]),t.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&I&&!1!==y){const n=e[0],r=e[t-1],i={root:J.current,threshold:.99},o=new IntersectionObserver((e=>{H(!e[0].isIntersecting)}),i);o.observe(n);const a=new IntersectionObserver((e=>{G(!e[0].isIntersecting)}),i);return a.observe(r),()=>{o.disconnect(),a.disconnect()}}}),[I,y,K,null==u?void 0:u.length]),t.useEffect((()=>{$(!0)}),[]),t.useEffect((()=>{ne()})),t.useEffect((()=>{ce(f$!==V)}),[ce,V]),t.useImperativeHandle(l,(()=>({updateIndicator:ne,updateScrollButtons:ue})),[ne,ue]);const de=(0,Ve.jsx)(h$,(0,De.A)({},E,{className:(0,Pe.A)(j.indicator,E.className),ownerState:O,style:(0,De.A)({},V,E.style)}));let he=0;const pe=t.Children.map(u,(e=>{if(!t.isValidElement(e))return null;const n=void 0===e.props.value?he:e.props.value;Z.set(n,he);const r=n===S;return he+=1,t.cloneElement(e,(0,De.A)({fullWidth:"fullWidth"===T,indicator:r&&!B&&de,selected:r,selectionFollowsFocus:b,onChange:m,textColor:_,value:n},1!==he||!1!==S||e.props.tabIndex?{}:{tabIndex:0}))})),fe=(()=>{const e={};e.scrollbarSizeListener=I?(0,Ve.jsx)(p$,{onChange:le,className:(0,Pe.A)(j.scrollableX,j.hideScrollbar)}):null;const t=I&&("auto"===y&&(z||q)||!0===y);return e.scrollButtonStart=t?(0,Ve.jsx)(v,(0,De.A)({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:F},orientation:g,direction:o?"right":"left",onClick:ae,disabled:!z},A,{className:(0,Pe.A)(j.scrollButtons,A.className)})):null,e.scrollButtonEnd=t?(0,Ve.jsx)(v,(0,De.A)({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:U},orientation:g,direction:o?"left":"right",onClick:se,disabled:!q},A,{className:(0,Pe.A)(j.scrollButtons,A.className)})):null,e})();return(0,Ve.jsxs)(c$,(0,De.A)({className:(0,Pe.A)(j.root,d),ownerState:O,ref:n,as:h},C,{children:[fe.scrollButtonStart,fe.scrollbarSizeListener,(0,Ve.jsxs)(u$,{className:j.scroller,ownerState:O,style:{overflow:Q.overflow,[R?"margin"+(o?"Left":"Right"):"marginBottom"]:k?void 0:-Q.scrollbarWidth},ref:J,children:[(0,Ve.jsx)(d$,{"aria-label":a,"aria-labelledby":s,"aria-orientation":"vertical"===g?"vertical":null,className:j.flexContainer,ownerState:O,onKeyDown:e=>{const t=ee.current,n=(0,cM.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",i="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&o&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),l$(t,n,s$);break;case i:e.preventDefault(),l$(t,n,a$);break;case"Home":e.preventDefault(),l$(t,null,a$);break;case"End":e.preventDefault(),l$(t,null,s$)}},ref:ee,role:"tablist",children:pe}),B&&de]}),fe.scrollButtonEnd]}))})),g$=m$;function v$(e){return(0,sL.Ay)("MuiTab",e)}const y$=(0,Ge.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),b$=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],w$=(0,rL.Ay)(LP,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,iL.A)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${y$.iconWrapper}`]:t.iconWrapper}]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${y$.iconWrapper}`]:(0,De.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,[`&.${y$.selected}`]:{opacity:1},[`&.${y$.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${y$.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${y$.disabled}`]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${y$.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${y$.disabled}`]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),x$=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:a=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=r,w=(0,Le.A)(r,b$),x=(0,De.A)({},r,{disabled:o,disableFocusRipple:a,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:s,textColor:v,wrapped:b}),E=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:l}=e,c={root:["root",o&&a&&"labelIcon",`textColor${(0,iL.A)(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,nL.A)(c,v$,t)})(x),A=l&&d&&t.isValidElement(l)?t.cloneElement(l,{className:(0,Pe.A)(E.iconWrapper,l.props.className)}):l;return(0,Ve.jsxs)(w$,(0,De.A)({focusRipple:!a,className:(0,Pe.A)(E.root,i),ref:n,role:"tab","aria-selected":m,disabled:o,onClick:e=>{!m&&h&&h(e,y),p&&p(e)},onFocus:e=>{g&&!m&&h&&h(e,y),f&&f(e)},ownerState:x,tabIndex:m?0:-1},w,{children:["top"===c||"start"===c?(0,Ve.jsxs)(t.Fragment,{children:[A,d]}):(0,Ve.jsxs)(t.Fragment,{children:[d,A]}),u]}))})),E$=x$;function A$(e){return(0,sL.Ay)("MuiDialogActions",e)}(0,Ge.A)("MuiDialogActions",["root","spacing"]);const _$=["className","disableSpacing"],S$=(0,rL.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),T$=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,Le.A)(n,_$),a=(0,De.A)({},n,{disableSpacing:i}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,nL.A)(r,A$,t)})(a);return(0,Ve.jsx)(S$,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),k$=T$,C$=(0,_L.A)((0,Ve.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),I$=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate"),R$=e=>{let{open:n,onClose:r}=e;const{currentUser:i}=ND(),[o,a]=(0,t.useState)(0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)([]),b=(0,t.useRef)(null),w=(0,t.useRef)(null);(0,t.useEffect)((()=>{n&&(a(0),l(null),f(null),u(!1),y([]))}),[n]),(0,t.useEffect)((()=>()=>{m&&m.getTracks().forEach((e=>e.stop()))}),[m]);return(0,Ve.jsxs)(sj,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsxs)(hB,{children:["Create New Story",(0,Ve.jsx)(FP,{onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,Ve.jsx)(yB,{})})]}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsxs)(g$,{value:o,onChange:(e,t)=>{a(t),l(null),f(null),u(!1),y([]),m&&(m.getTracks().forEach((e=>e.stop())),g(null))},sx:{mb:2},children:[(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(C$,{}),label:"Record Video"}),(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(wB,{}),label:"Take Photo"}),(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(I$,{}),label:"Upload"})]}),p&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:p}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[0===o&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("video",{ref:b,autoPlay:!0,muted:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}),(0,Ve.jsx)(Xe,{sx:{mt:2},children:c?(0,Ve.jsx)(lM,{variant:"contained",color:"secondary",onClick:()=>{w.current&&c&&(w.current.stop(),u(!1),m&&m.getTracks().forEach((e=>e.stop())))},disabled:d,children:"Stop Recording"}):(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});g(e),b.current&&(b.current.srcObject=e);const t=new MediaRecorder(e);w.current=t;const n=[];t.ondataavailable=e=>{e.data.size>0&&n.push(e.data)},t.onstop=()=>{const e=new Blob(n,{type:"video/webm"});y(n),l(URL.createObjectURL(e))},t.start(),u(!0)}catch(p){console.error("Error accessing camera:",p),f("Failed to access camera")}},disabled:d,children:"Start Recording"})})]}),1===o&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("video",{ref:b,autoPlay:!0,muted:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}),(0,Ve.jsx)(Xe,{sx:{mt:2},children:(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:async()=>{if(b.current){const e=document.createElement("canvas");e.width=b.current.videoWidth,e.height=b.current.videoHeight;const t=e.getContext("2d");t&&(t.drawImage(b.current,0,0),l(e.toDataURL("image/jpeg")))}},disabled:d,children:"Take Photo"})})]}),2===o&&(0,Ve.jsxs)(Xe,{sx:{width:"100%",textAlign:"center"},children:[(0,Ve.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>10485760)return void f("File size should be less than 10MB");if(!t.type.match(/^(image\/(jpeg|png|gif)|video\/mp4|video\/webm)$/))return void f("Only JPEG, PNG, GIF images and MP4, WebM videos are allowed");l(URL.createObjectURL(t)),f(null)}},style:{display:"none"},id:"file-upload"}),(0,Ve.jsx)("label",{htmlFor:"file-upload",children:(0,Ve.jsx)(lM,{variant:"contained",component:"span",disabled:d,children:"Choose File"})})]}),s&&(0,Ve.jsx)(Xe,{sx:{mt:2,width:"100%"},children:s.startsWith("data:video")?(0,Ve.jsx)("video",{src:s,controls:!0,style:{width:"100%",maxHeight:"400px",objectFit:"contain"}}):(0,Ve.jsx)("img",{src:s,alt:"Preview",style:{width:"100%",maxHeight:"400px",objectFit:"contain"}})})]})]}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:r,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(i&&(s||0!==v.length))try{let e,t;if(h(!0),f(null),v.length>0)e=new Blob(v,{type:"video/webm"}),t="video";else{if(!s)throw new Error("No media to upload");{const n=await fetch(s);e=await n.blob(),t=s.startsWith("data:video")?"video":"image"}}const n=EE(cR,`stories/${i.uid}/${Date.now()}_${t}`);await yE(n,e);const o=await wE(n),a=new Date;a.setHours(a.getHours()+24),await kw(lb(sR,"stories"),{authorId:i.uid,mediaUrl:o,mediaType:t,timestamp:jw(),expiresAt:ol.fromDate(a),views:[],viewDetails:[]}),r()}catch(p){console.error("Error uploading story:",p),f("Failed to upload story")}finally{h(!1)}},variant:"contained",disabled:!s||d,children:d?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(SU,{size:24,sx:{mr:1}}),"Uploading..."]}):"Upload Story"})]})]})};var D$=n(5361);function L$(e){return(0,sL.Ay)("MuiCollapse",e)}(0,Ge.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const P$=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],M$=(0,rL.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,De.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),N$=(0,rL.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),O$=(0,rL.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,De.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),j$=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:f,onExited:m,onExiting:g,orientation:v="vertical",style:y,timeout:b=D$.p0.standard,TransitionComponent:w=FM}=r,x=(0,Le.A)(r,P$),E=(0,De.A)({},r,{orientation:v,collapsedSize:s}),A=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,nL.A)(r,L$,n)})(E),_=UM(),S=(0,dP.A)(),T=t.useRef(null),k=t.useRef(),C="number"===typeof s?`${s}px`:s,I="horizontal"===v,R=I?"width":"height",D=t.useRef(null),L=(0,XL.A)(n,D),P=e=>t=>{if(e){const n=D.current;void 0===t?e(n):e(n,t)}},M=()=>T.current?T.current[I?"clientWidth":"clientHeight"]:0,N=P(((e,t)=>{T.current&&I&&(T.current.style.position="absolute"),e.style[R]=C,d&&d(e,t)})),O=P(((e,t)=>{const n=M();T.current&&I&&(T.current.style.position="");const{duration:r,easing:i}=$M({style:y,timeout:b,easing:c},{mode:"enter"});if("auto"===b){const t=_.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,k.current=t}else e.style.transitionDuration="string"===typeof r?r:`${r}ms`;e.style[R]=`${n}px`,e.style.transitionTimingFunction=i,p&&p(e,t)})),j=P(((e,t)=>{e.style[R]="auto",h&&h(e,t)})),F=P((e=>{e.style[R]=`${M()}px`,f&&f(e)})),U=P(m),B=P((e=>{const t=M(),{duration:n,easing:r}=$M({style:y,timeout:b,easing:c},{mode:"exit"});if("auto"===b){const n=_.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,k.current=n}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[R]=C,e.style.transitionTimingFunction=r,g&&g(e)}));return(0,Ve.jsx)(w,(0,De.A)({in:u,onEnter:N,onEntered:j,onEntering:O,onExit:F,onExited:U,onExiting:B,addEndListener:e=>{"auto"===b&&S.start(k.current||0,e),i&&i(D.current,e)},nodeRef:D,timeout:"auto"===b?null:b},x,{children:(e,t)=>(0,Ve.jsx)(M$,(0,De.A)({as:l,className:(0,Pe.A)(A.root,a,{entered:A.entered,exited:!u&&"0px"===C&&A.hidden}[e]),style:(0,De.A)({[I?"minWidth":"minHeight"]:C},y),ref:L},t,{ownerState:(0,De.A)({},E,{state:e}),children:(0,Ve.jsx)(N$,{ownerState:(0,De.A)({},E,{state:e}),className:A.wrapper,ref:T,children:(0,Ve.jsx)(O$,{ownerState:(0,De.A)({},E,{state:e}),className:A.wrapperInner,children:o})})}))}))}));j$.muiSupportAuto=!0;const F$=j$,U$=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),B$=(0,_L.A)((0,Ve.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),$$=(0,_L.A)((0,Ve.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),V$=(0,_L.A)((0,Ve.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),W$=(0,_L.A)((0,Ve.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),z$=(0,_L.A)((0,Ve.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),H$=(0,_L.A)((0,Ve.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var q$={};function G$(){return q$}function K$(e){return K$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K$(e)}function Y$(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Q$(e){Y$(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===K$(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function X$(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Z$(e){Y$(1,arguments);var t=Q$(e);return t.setHours(23,59,59,999),t}function J$(e){Y$(1,arguments);var t=Q$(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function eV(e,t){Y$(2,arguments);var n,r=Q$(e),i=Q$(t),o=X$(r,i),a=Math.abs(function(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(a<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*a);var s=X$(r,i)===-o;(function(e){Y$(1,arguments);var t=Q$(e);return Z$(t).getTime()===J$(t).getTime()})(Q$(e))&&1===a&&1===X$(e,i)&&(s=!1),n=o*(a-Number(s))}return 0===n?0:n}var tV={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function nV(e,t,n){Y$(2,arguments);var r,i=function(e,t){return Y$(2,arguments),Q$(e).getTime()-Q$(t).getTime()}(e,t)/1e3;return((r=null===n||void 0===n?void 0:n.roundingMethod)?tV[r]:tV.trunc)(i)}var rV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const iV=function(e,t,n){var r,i=rV[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function oV(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var aV={date:oV({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:oV({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:oV({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var sV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function lV(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function cV(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(s)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}var uV;const dV={code:"en-US",formatDistance:iV,formatLong:aV,formatRelative:function(e,t,n,r){return sV[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:lV({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:lV({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:lV({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:lV({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:lV({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(uV={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(uV.matchPattern);if(!n)return null;var r=n[0],i=e.match(uV.parsePattern);if(!i)return null;var o=uV.valueCallback?uV.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:cV({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:cV({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:cV({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:cV({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:cV({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},hV=dV;function pV(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function fV(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var mV=43200;function gV(e,t,n){var r,i;Y$(2,arguments);var o=G$(),a=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:o.locale)&&void 0!==r?r:hV;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=X$(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var l,c,u=pV(pV({},n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:s});s>0?(l=Q$(t),c=Q$(e)):(l=Q$(e),c=Q$(t));var d,h=nV(c,l),p=(fV(c)-fV(l))/1e3,f=Math.round((h-p)/60);if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?a.formatDistance("lessThanXSeconds",5,u):h<10?a.formatDistance("lessThanXSeconds",10,u):h<20?a.formatDistance("lessThanXSeconds",20,u):h<40?a.formatDistance("halfAMinute",0,u):h<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):0===f?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",f,u);if(f<45)return a.formatDistance("xMinutes",f,u);if(f<90)return a.formatDistance("aboutXHours",1,u);if(f<1440){var m=Math.round(f/60);return a.formatDistance("aboutXHours",m,u)}if(f<2520)return a.formatDistance("xDays",1,u);if(f<mV){var g=Math.round(f/1440);return a.formatDistance("xDays",g,u)}if(f<86400)return d=Math.round(f/mV),a.formatDistance("aboutXMonths",d,u);if((d=eV(c,l))<12){var v=Math.round(f/mV);return a.formatDistance("xMonths",v,u)}var y=d%12,b=Math.floor(d/12);return y<3?a.formatDistance("aboutXYears",b,u):y<9?a.formatDistance("overXYears",b,u):a.formatDistance("almostXYears",b+1,u)}function vV(e,t){return Y$(1,arguments),gV(e,Date.now(),t)}const yV=e=>{let{stories:n,initialIndex:r,open:i,onClose:o}=e;const{currentUser:a}=ND(),[s,l]=(0,t.useState)(r),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),b=(0,t.useRef)(),w=(0,t.useRef)(null),[x,E]=((0,t.useRef)(null),(0,t.useState)(0)),[A,_]=(0,t.useState)(!1),[S,T]=(0,t.useState)(!1),k=(0,t.useRef)(),C=Z(),I=n[s];(0,t.useEffect)((()=>{i&&(l(r),E(0),_(!1),g(!1))}),[i,r]),(0,t.useEffect)((()=>{if(!I||!a)return;(async()=>{try{const e=cb(sR,"stories",I.id);await Sw(e,{views:Fw(a.uid)})}catch(d){console.error("Error marking story as viewed:",d)}})()}),[I,a]),(0,t.useEffect)((()=>{if(!I)return;(async()=>{try{const e=Cw(cb(sR,"stories",I.id),(e=>{if(e.exists()){const t=e.data();y(t.viewDetails||[])}}));return()=>e()}catch(e){console.error("Error fetching viewers:",e)}})()}),[I]),(0,t.useEffect)((()=>{if(!i||!I||A)return;const e=Date.now();return b.current=setInterval((()=>{const t=(Date.now()-e)/5e3*100;t>=100?(clearInterval(b.current),R()):E(t)}),50),()=>{b.current&&clearInterval(b.current)}}),[i,I,A]),(0,t.useEffect)((()=>{w.current&&(A?w.current.pause():w.current.play())}),[A]);const R=()=>{s<n.length-1?(l(s+1),E(0)):o()},D=()=>{_(!0),b.current&&clearInterval(b.current)},L=()=>{_(!1)},P=()=>{b.current&&clearInterval(b.current),o()},M=()=>{k.current&&clearTimeout(k.current),S&&(T(!1),L())};(0,t.useEffect)((()=>()=>{k.current&&clearTimeout(k.current)}),[]);return I?(0,Ve.jsx)(sj,{fullScreen:!0,open:i,onClose:P,PaperProps:{sx:{bgcolor:"black",color:"white"}},children:(0,Ve.jsxs)(Xe,{sx:{position:"relative",height:"100%",display:"flex",flexDirection:"column"},onTouchStart:()=>{k.current=setTimeout((()=>{T(!0),D()}),300)},onTouchEnd:()=>{k.current&&clearTimeout(k.current),S&&(T(!1),L())},onMouseDown:()=>{k.current=setTimeout((()=>{T(!0),D()}),300)},onMouseUp:M,onMouseLeave:M,children:[(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,p:1,position:"absolute",top:0,left:0,right:0,zIndex:1},children:n.map(((e,t)=>(0,Ve.jsx)(Xe,{sx:{flex:1,height:2,bgcolor:"rgba(255, 255, 255, 0.3)",borderRadius:1,overflow:"hidden"},children:(0,Ve.jsx)(Xe,{sx:{width:`${t===s?x:t<s?100:0}%`,height:"100%",bgcolor:"white",transition:"width 0.05s linear"}})},t)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",p:2,position:"absolute",top:0,left:0,right:0,zIndex:1},children:[(0,Ve.jsx)(WL,{src:I.author.avatar}),(0,Ve.jsxs)(Xe,{sx:{ml:2,flex:1},children:[(0,Ve.jsx)(QL,{variant:"subtitle1",children:I.author.name}),(0,Ve.jsx)(QL,{variant:"caption",children:new Date(I.timestamp).toLocaleTimeString()})]}),I.authorId===(null===a||void 0===a?void 0:a.uid)&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(FP,{onClick:e=>f(e.currentTarget),color:"inherit",children:(0,Ve.jsx)(U$,{})}),(0,Ve.jsx)(KN,{anchorEl:p,open:Boolean(p),onClose:()=>f(null),children:(0,Ve.jsx)(aO,{onClick:async()=>{if(I&&a&&I.authorId===a.uid)try{await Tw(cb(sR,"stories",I.id)),f(null),R()}catch(d){console.error("Error deleting story:",d),h("Failed to delete story")}},children:"Delete Story"})})]}),(0,Ve.jsx)(FP,{onClick:P,color:"inherit",children:(0,Ve.jsx)(yB,{})})]}),(0,Ve.jsx)(Xe,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},onClick:()=>_(!A),children:"video"===I.mediaType?(0,Ve.jsx)("video",{ref:w,src:I.mediaUrl,autoPlay:!0,loop:!0,style:{width:"100%",height:"100%",objectFit:"contain"}}):(0,Ve.jsx)("img",{src:I.mediaUrl,alt:"Story",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[(0,Ve.jsx)(FP,{onClick:()=>{s>0&&(l(s-1),E(0))},color:"inherit",sx:{visibility:s>0?"visible":"hidden"},children:(0,Ve.jsx)(B$,{})}),(0,Ve.jsx)(FP,{onClick:R,color:"inherit",sx:{visibility:s<n.length-1?"visible":"hidden"},children:(0,Ve.jsx)($$,{})})]}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",top:16,right:16,display:"flex",alignItems:"center",gap:1},children:[S&&(0,Ve.jsx)(QL,{variant:"caption",sx:{color:"white"},children:"Holding to pause"}),(0,Ve.jsx)(FP,{onClick:A?L:D,sx:{color:"white",bgcolor:"rgba(0, 0, 0, 0.3)","&:hover":{bgcolor:"rgba(0, 0, 0, 0.5)"}},children:A?(0,Ve.jsx)(V$,{}):(0,Ve.jsx)(W$,{})})]}),(0,Ve.jsxs)(Xe,{onClick:e=>((e,t)=>{e.stopPropagation(),o(),C(`/profile/${t}`)})(e,I.authorId),sx:{position:"absolute",top:16,left:16,display:"flex",alignItems:"center",gap:1,bgcolor:"rgba(0, 0, 0, 0.3)",p:1,borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"rgba(0, 0, 0, 0.5)"}},children:[(0,Ve.jsx)(WL,{src:I.author.avatar,sx:{width:32,height:32,border:"2px solid white"}}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",sx:{fontWeight:"bold"},children:I.author.name}),(0,Ve.jsxs)(QL,{variant:"caption",sx:{opacity:.8},children:["@",I.author.username]})]})]}),(0,Ve.jsxs)(hL,{sx:{position:"absolute",bottom:0,left:0,right:0,bgcolor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:0},children:[(0,Ve.jsxs)(Xe,{onClick:()=>g(!m),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,cursor:"pointer"},children:[(0,Ve.jsxs)(QL,{variant:"subtitle1",children:[v.length," ",1===v.length?"view":"views"]}),m?(0,Ve.jsx)(z$,{}):(0,Ve.jsx)(H$,{})]}),(0,Ve.jsxs)(F$,{in:m,children:[(0,Ve.jsx)(bO,{sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,Ve.jsx)(mM,{sx:{maxHeight:200,overflow:"auto"},children:v.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.userAvatar||""})}),(0,Ve.jsx)(fO,{primary:e.userName||"Anonymous User",secondary:vV(e.timestamp,{addSuffix:!0}),secondaryTypographyProps:{color:"rgba(255, 255, 255, 0.7)"}})]}),n<v.length-1&&(0,Ve.jsx)(bO,{sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}})]},e.userId)))})]})]})]})}):null},bV=e=>{let{following:n}=e;const[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),{currentUser:v,userProfile:y}=ND(),b=e=>{g(e),f(!0)};(0,t.useEffect)((()=>{if(!v)return;const e=lb(sR,"stories"),t=Array.from(new Set([...n,v.uid]));if(0===t.length)return a([]),i([]),void l(!1);const r=Cw(ew(e,nw("authorId","in",t),nw("expiresAt",">",ol.now()),ow("authorId"),ow("timestamp","desc")),(e=>{const t=[],n=new Set,r=[];e.forEach((e=>{const i=e.data();if(!i.authorId||!i.timestamp||!i.expiresAt)return;xw(cb(sR,"users",i.authorId)).then((o=>{const a=o.data();if(a){var s;const o={id:e.id,mediaUrl:i.mediaUrl,mediaType:i.mediaType,author:{name:a.name||"",avatar:a.avatar||"",username:a.username||""},authorId:i.authorId,timestamp:i.timestamp.toDate(),expiresAt:i.expiresAt.toDate(),views:i.views||[],viewDetails:(null===(s=i.viewDetails)||void 0===s?void 0:s.map((e=>({userId:e.userId,timestamp:e.timestamp.toDate()}))))||[]};t.push(o),i.authorId===v.uid||n.has(i.authorId)||(r.push(o),n.add(i.authorId))}}))})),a(t),i(r),l(!1)}),(e=>{console.error("Error fetching stories:",e),u("Failed to fetch stories."),l(!1)}));return()=>r()}),[v,n]);const w=o.some((e=>e.authorId===(null===v||void 0===v?void 0:v.uid))),x=o.filter((e=>e.authorId===(null===v||void 0===v?void 0:v.uid))),E=x.some((e=>e.views.includes((null===v||void 0===v?void 0:v.uid)||"")));return(0,Ve.jsxs)(Xe,{sx:{p:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2,overflowX:"auto",pb:2,"&::-webkit-scrollbar":{display:"none"}},children:[v&&(0,Ve.jsxs)(Xe,{onClick:()=>{if(!v)return;const e=o.some((e=>e.authorId===v.uid));e?b(v.uid):h(!0)},sx:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",minWidth:80,textAlign:"center"},children:[(0,Ve.jsxs)(Xe,{sx:{position:"relative",width:64,height:64,mb:1},children:[(0,Ve.jsx)(WL,{src:(null===y||void 0===y?void 0:y.profilePic)||v.photoURL||"",sx:{width:"100%",height:"100%",border:"2px solid",borderColor:w?E?"grey.400":"primary.main":"#e0e0e0","&:hover":{opacity:.8}}}),(0,Ve.jsx)(FP,{onClick:()=>h(!0),size:"small",sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"white",border:"2px solid white","&:hover":{bgcolor:"primary.dark"},width:22,height:22},children:(0,Ve.jsx)(VB,{sx:{fontSize:"1rem"}})})]}),(0,Ve.jsx)(QL,{variant:"caption",sx:{mt:.5},children:w?"Your Story":"Add Story"})]}),s?Array(5).fill(0).map(((e,t)=>(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80},children:[(0,Ve.jsx)($B,{variant:"circular",width:64,height:64}),(0,Ve.jsx)($B,{variant:"text",width:60,sx:{mt:1}})]},t))):c?(0,Ve.jsx)(aB,{severity:"error",sx:{flexGrow:1},children:c}):0!==r.length||s||w?(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:2,overflowX:"auto",p:2,bgcolor:"background.paper"},children:r.map((e=>(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80,textAlign:"center"},children:[(0,Ve.jsx)(WL,{src:e.author.avatar,onClick:()=>b(e.authorId),sx:{width:64,height:64,cursor:"pointer",mb:1,border:"2px solid",borderColor:e.views.includes((null===v||void 0===v?void 0:v.uid)||"")?"grey.400":"primary.main","&:hover":{opacity:.8}}}),(0,Ve.jsx)(QL,{variant:"caption",component:Ce,to:`/profile/${e.authorId}`,sx:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:e.author.name})]},e.authorId)))}):(0,Ve.jsx)(QL,{variant:"body2",sx:{color:"text.secondary",alignSelf:"center",mx:2},children:"No stories to show."})]}),(0,Ve.jsx)(R$,{open:d,onClose:()=>{h(!1)}}),p&&m&&(0,Ve.jsx)(yV,{stories:o.filter((e=>e.authorId===m)),initialIndex:0,open:p,onClose:()=>{f(!1),g(null)}})]})},wV=(0,t.createContext)({db:null,loading:!1,error:null}),xV=()=>{const e=(0,t.useContext)(wV);if(void 0===e)throw new Error("useFirestore must be used within a FirestoreProvider");return null===e.db&&console.warn("useFirestore called before db was initialized or initialization failed"),e},EV=e=>{let{children:t}=e;const n={db:sR,loading:!1,error:null};return(0,Ve.jsx)(wV.Provider,{value:n,children:t})};var AV=n(2183),_V=n(6832),SV=n(8154),TV=n(6319),kV=n(9693),CV=n(4453),IV=n(7988);const RV=t.forwardRef((function(e,t){return(0,Ve.jsx)(IO,{direction:"up",ref:t,...e})})),DV=()=>{const{currentUser:e,loading:n}=ND(),{db:r}=xV(),[i,o]=(Z(),(0,t.useState)([])),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[w,x]=(0,t.useState)(""),E=(0,t.useRef)(null),[A,_]=(0,t.useState)([]),[S,T]=(0,t.useState)(!1),[k,C]=(0,t.useState)(null),[I,R]=(0,t.useState)(null),D=Boolean(k),[L,P]=(0,t.useState)(!1),[M,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n||!e||!r)return;console.log("Feed: Auth finished, currentUser exists. Loading user profile...");(async()=>{try{const t=await xw(cb(r,"users",e.uid));if(!t.exists())return c("User profile not found"),void s(!1);const n=t.data();p(n),d(n.connections||[]),m(!0),s(!1)}catch(l){console.error("Error loading user profile:",l),c("Failed to load user profile"),s(!1)}})()}),[e,r,n]),(0,t.useEffect)((()=>{if(!r||!e)return void s(!1);(async()=>{try{N(!0);const t=lb(r,"users",e.uid,"following"),n=(await Aw(t)).docs.map((e=>e.id)).filter(Boolean),i=[...n,e.uid].filter(Boolean);if(0===i.length)return o([]),s(!1),void N(!1);const a=Cw(ew(lb(r,"posts"),nw("authorId","in",i),ow("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));o(t),N(!1),s(!1)}),(e=>{console.error("Error fetching posts:",e),c("Failed to load posts"),N(!1),s(!1)}));return()=>a()}catch(l){console.error("Error setting up posts listener:",l),c("Failed to load posts"),N(!1),s(!1)}})()}),[r,e]);const O=async t=>{if(r&&e)try{var n;const i=cb(r,"posts",t),o=await xw(i);if(!o.exists())throw new Error("Post not found");const a=o.data(),s=null===(n=a.likedBy)||void 0===n?void 0:n.includes(e.uid),l=a.likes||0;if(s)await Sw(i,{likedBy:Uw(e.uid),likes:Math.max(0,l-1)});else if(await Sw(i,{likedBy:Fw(e.uid),likes:l+1}),a.authorId!==e.uid){const n={type:"like",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:a.authorId,postId:t,content:`${e.displayName||"Someone"} liked your post`,createdAt:jw(),isRead:!1};await kw(lb(r,"users",a.authorId,"notifications"),n)}}catch(l){console.error("Error toggling like:",l),MR.error("Failed to update like")}},j=async t=>{if(!e||!r)return void MR.error("You must be logged in to repost");const n=i.find((e=>e.id===t));if(!n)return void MR.error("Post not found");const a=i.some((n=>n.isRepost&&n.id===t&&n.repostedById===e.uid));try{if(a)_((e=>[...e,{postId:t,added:!1}])),o((n=>n.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:Math.max(0,(e.reposts||0)-1)})).filter((n=>!(n.isRepost&&n.id===t&&n.repostedById===e.uid))))),MR.success("Repost removed");else{if(_((e=>[...e,{postId:t,added:!0}])),o((r=>[{...n,timestamp:ol.now(),isRepost:!0,repostedById:e.uid,reposts:(n.reposts||0)+1},...r.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:(e.reposts||0)+1}))])),n.authorId!==e.uid){const i={type:"repost",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:n.authorId,postId:t,content:`${e.displayName||"Someone"} reposted your post`,createdAt:jw(),isRead:!1};await kw(lb(r,"users",n.authorId,"notifications"),i)}MR.success("Post reposted!")}await U()}catch(l){console.error("Error handling repost:",l),MR.error("Failed to process repost. Changes will sync later.")}},F=()=>{C(null),R(null)},U=async()=>{if(r&&e&&0!==A.length){T(!0);try{const t=$w(r),n=lb(r,"reposts");for(const r of A){const{postId:i,added:o}=r,a=cb(n,`${e.uid}_${i}`);o?t.set(a,{originalPostId:i,userId:e.uid,timestamp:ol.now()}):t.delete(a)}await t.commit(),_([]),MR.success("Reposts synced successfully!")}catch(l){console.error("Error syncing reposts:",l),MR.error("Failed to sync reposts. Try again later.")}finally{T(!1)}}};return n?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(SU,{})}):e?l?(0,Ve.jsx)(Xe,{sx:{p:3,textAlign:"center"},children:(0,Ve.jsx)(QL,{color:"error",children:l})}):(0,Ve.jsxs)(HU,{maxWidth:"lg",children:[(0,Ve.jsxs)(Xe,{sx:{mb:4,pt:3,display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1,textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em",position:"relative","&::after":{content:'""',position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",width:"60px",height:"4px",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",borderRadius:"2px"}},children:"Your Feed"}),(0,Ve.jsx)(QL,{variant:"subtitle1",color:"text.secondary",sx:{textAlign:"center",fontStyle:"italic",mb:2},children:"Stay updated with your friends and community"})]}),l&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:l}),a?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(SU,{})}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Xe,{sx:{mb:4},children:(0,Ve.jsx)(bV,{following:(null===h||void 0===h?void 0:h.following)||[]})}),(0,Ve.jsx)(hL,{elevation:3,sx:{mb:4,borderRadius:2,p:2,position:"relative",zIndex:10},children:(0,Ve.jsx)(EB,{open:L,onClose:()=>P(!1)})}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:0===i.length?(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",align:"center",children:"No posts yet. Follow some users to see their posts!"}):(0,Ve.jsx)(mM,{children:i.map((t=>{var n,r,i,o;return(0,Ve.jsxs)(HO,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"},mb:2,borderRadius:2,backgroundColor:"background.paper",boxShadow:1},onClick:()=>{v(t),b(!0)},children:[t.isRepost&&(0,Ve.jsx)(Xe,{sx:{position:"absolute",top:-12,left:20,backgroundColor:"primary.main",color:"white",borderRadius:1,px:1,py:.5,fontSize:"0.75rem",zIndex:1},children:"Reposted"}),(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:t.authorAvatar||void 0})})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(QL,{variant:"subtitle1",component:"span",sx:{"&:hover":{textDecoration:"underline"}},children:t.authorName})}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[vV((null===(n=t.timestamp)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date)," ago"]}),!t.isRepost&&t.reposts>0&&(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:["\u2022 ",t.reposts," repost",1!==t.reposts?"s":""]})]}),t.authorId===(null===e||void 0===e?void 0:e.uid)&&(0,Ve.jsx)(FP,{size:"small",onClick:e=>{return n=e,r=t.id,n.stopPropagation(),C(n.currentTarget),void R(r);var n,r},children:(0,Ve.jsx)(CV.A,{})})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mt:1},children:t.content}),t.isEdited&&(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:"(edited)"}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[t.comments&&t.comments.length>0&&(0,Ve.jsxs)(Xe,{sx:{backgroundColor:"background.default",borderRadius:1,p:1,mt:1},children:[t.comments.slice(0,2).map(((e,t)=>(0,Ve.jsxs)(Xe,{sx:{mb:1},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",component:"span",children:e.authorName}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:e.content})]},t))),t.comments.length>2&&(0,Ve.jsxs)(QL,{variant:"body2",color:"primary",sx:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),v(t),b(!0)},children:["View all ",t.comments.length," comments"]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,mt:1},children:[(0,Ve.jsxs)(FP,{edge:"end","aria-label":"likes",onClick:e=>{e.stopPropagation(),O(t.id)},children:[(0,Ve.jsx)(AV.A,{color:null!==(i=t.likedBy)&&void 0!==i&&i.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:t.likes||0})]}),(0,Ve.jsxs)(FP,{edge:"end","aria-label":"repost",onClick:e=>{e.stopPropagation(),j(t.id)},children:[(0,Ve.jsx)(_V.A,{color:t.isRepost&&t.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:t.reposts||0})]}),(0,Ve.jsxs)(FP,{edge:"end","aria-label":"comment",onClick:e=>{e.stopPropagation(),v(t),b(!0)},children:[(0,Ve.jsx)(SV.A,{}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:(null===(o=t.comments)||void 0===o?void 0:o.length)||0})]})]})]})]})})]},`${t.id}-${t.isRepost?"repost":"post"}`)}))})})]}),(()=>{var t,n,i,o;return g?(0,Ve.jsxs)(sj,{fullScreen:!0,open:y,onClose:()=>b(!1),TransitionComponent:RV,children:[(0,Ve.jsx)(yL,{sx:{position:"relative"},children:(0,Ve.jsxs)(AL,{children:[(0,Ve.jsx)(FP,{edge:"start",color:"inherit",onClick:()=>b(!1),"aria-label":"close",children:(0,Ve.jsx)(TV.A,{})}),(0,Ve.jsx)(QL,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:g.isRepost?"Reposted Post":"Post"})]})}),(0,Ve.jsxs)(Xe,{sx:{p:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(Ce,{to:`/profile/${g.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:g.authorAvatar||void 0,sx:{width:48,height:48,mr:2}})}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${g.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(QL,{variant:"h6",sx:{"&:hover":{textDecoration:"underline"}},children:g.authorName})}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",children:[vV((null===(t=g.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]})]}),(0,Ve.jsx)(QL,{variant:"body1",sx:{mb:3},children:g.content}),g.imageUrl&&(0,Ve.jsx)(Xe,{sx:{mb:3,display:"flex",justifyContent:"center"},children:(0,Ve.jsx)("img",{src:g.imageUrl,alt:"Post attachment",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px"}})}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,Ve.jsxs)(lM,{startIcon:(0,Ve.jsx)(AV.A,{color:null!==(i=g.likedBy)&&void 0!==i&&i.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),onClick:()=>O(g.id),children:[g.likes||0," Likes"]}),(0,Ve.jsxs)(lM,{startIcon:(0,Ve.jsx)(_V.A,{color:g.isRepost&&g.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),onClick:()=>j(g.id),children:[g.reposts||0," Reposts"]}),(0,Ve.jsxs)(lM,{startIcon:(0,Ve.jsx)(SV.A,{}),onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},children:[(null===(o=g.comments)||void 0===o?void 0:o.length)||0," Comments"]})]}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsx)(QL,{variant:"h6",sx:{mb:2},children:"Comments"}),g.comments&&g.comments.length>0?(0,Ve.jsx)(mM,{children:g.comments.map(((e,t)=>(0,Ve.jsxs)(HO,{alignItems:"flex-start",divider:!0,children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.authorAvatar||void 0})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",children:e.authorName}),(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:e.timestamp?vV(e.timestamp.toDate())+" ago":""})]}),secondary:(0,Ve.jsx)(QL,{component:"span",variant:"body2",color:"text.primary",sx:{display:"inline",mt:1},children:e.content})})]},t)))}):(0,Ve.jsx)(QL,{color:"text.secondary",sx:{mb:2},children:"No comments yet. Be the first to comment!"}),(0,Ve.jsxs)(Xe,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",boxShadow:3,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(uU,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:w,onChange:e=>x(e.target.value),inputRef:E,InputProps:{sx:{borderRadius:4}}}),(0,Ve.jsx)(FP,{color:"primary",disabled:!w.trim(),onClick:()=>{w.trim()&&((async(t,n)=>{if(r&&e)try{const i=cb(r,"posts",t),o=(await xw(i)).data(),a={content:n,authorId:e.uid,authorName:e.displayName||"Anonymous",authorAvatar:e.photoURL||"",timestamp:jw(),likes:0};if(await Sw(i,{comments:Fw(a)}),o&&o.authorId!==e.uid){const i={type:"comment",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:o.authorId,postId:t,content:`${e.displayName||"Someone"} commented on your post: "${n}"`,createdAt:jw(),isRead:!1};await kw(lb(r,"users",o.authorId,"notifications"),i)}const s=n.match(/@(\w+)/g);if(s){const i=Array.from(new Set(s));for(const a of i){const i=a.slice(1),s=ew(lb(r,"users"),nw("username","==",i),sw(1)),l=await Aw(s);if(!l.empty){const i=l.docs[0];if(o&&i.id!==e.uid&&i.id!==o.authorId){const o={type:"mention",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:i.id,postId:t,content:`${e.displayName||"Someone"} mentioned you in a comment: "${n}"`,createdAt:jw(),isRead:!1};await kw(lb(r,"users",i.id,"notifications"),o)}}}}}catch(l){console.error("Error adding comment:",l),c("Failed to add comment")}})(g.id,w.trim()),x(""))},children:(0,Ve.jsx)(kV.A,{})})]}),(0,Ve.jsx)(Xe,{sx:{height:"64px"}})]})]}):null})(),0===A.length?null:(0,Ve.jsx)(Xe,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:(0,Ve.jsxs)(lM,{variant:"contained",color:"primary",onClick:U,startIcon:(0,Ve.jsx)(_V.A,{}),children:["Sync ",A.length," Repost",1!==A.length?"s":""]})}),(0,Ve.jsx)(KN,{anchorEl:k,open:D,onClose:F,onClick:e=>e.stopPropagation(),children:(0,Ve.jsxs)(aO,{onClick:()=>{I&&(async t=>{if(r&&e)try{const n=cb(r,"posts",t),i=await xw(n);if(i.exists()){const r=i.data();if(r.authorId!==e.uid)throw new Error("You can only delete your own posts");if(r.imageUrl)try{const e=EE(cR,r.imageUrl);await xE(e)}catch(l){console.error("Error deleting image:",l)}await Tw(n),o((e=>e.filter((e=>e.id!==t)))),MR.success("Post deleted successfully")}}catch(l){console.error("Error deleting post:",l),c("Failed to delete post"),MR.error("Failed to delete post")}})(I),F()},children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(IV.A,{fontSize:"small"})}),"Delete Post"]})})]}):(0,Ve.jsx)(HU,{maxWidth:"md",children:(0,Ve.jsx)(Xe,{sx:{py:4,textAlign:"center"},children:(0,Ve.jsx)(QL,{variant:"h6",children:"Please sign in to view your feed"})})})};var LV=n(9629);const PV=t.createContext();function MV(e){return(0,sL.Ay)("MuiGrid",e)}const NV=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],OV=(0,Ge.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...NV.map((e=>`grid-xs-${e}`)),...NV.map((e=>`grid-sm-${e}`)),...NV.map((e=>`grid-md-${e}`)),...NV.map((e=>`grid-lg-${e}`)),...NV.map((e=>`grid-xl-${e}`))]),jV=OV,FV=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function UV(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function BV(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const $V=(0,rL.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(a,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...d]}})((e=>{let{ownerState:t}=e;return(0,De.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,LV.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,LV.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${jV.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,LV.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=BV({breakpoints:t.breakpoints.values,values:e})),o=(0,LV.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:`-${UV(o)}`,[`& > .${jV.item}`]:{paddingTop:UV(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${jV.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,LV.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=BV({breakpoints:t.breakpoints.values,values:e})),o=(0,LV.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:`calc(100% + ${UV(o)})`,marginLeft:`-${UV(o)}`,[`& > .${jV.item}`]:{paddingLeft:UV(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${jV.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=(0,LV.kW)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;const l=Math.round(t/s*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${UV(e)})`;c={flexBasis:t,maxWidth:t}}}o=(0,De.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const VV=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)}));const d={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==a&&`wrap-xs-${String(a)}`,...u]};return(0,nL.A)(d,MV,t)},WV=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiGrid"}),{breakpoints:i}=UM(),o=(0,Oe.A)(r),{className:a,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=o,v=(0,Le.A)(o,FV),y=p||f,b=l||f,w=t.useContext(PV),x=u?s||12:w,E={},A=(0,De.A)({},v);i.keys.forEach((e=>{null!=v[e]&&(E[e]=v[e],delete A[e])}));const _=(0,De.A)({},o,{columns:x,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},E,{breakpoints:i.keys}),S=VV(_);return(0,Ve.jsx)(PV.Provider,{value:x,children:(0,Ve.jsx)($V,(0,De.A)({ownerState:_,className:(0,Pe.A)(S.root,a),as:c,ref:n},A))})}));const zV=WV;function HV(e){return(0,sL.Ay)("MuiLink",e)}const qV=(0,Ge.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var GV=n(5060);const KV={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},YV=e=>{let{theme:t,ownerState:n}=e;const r=(e=>KV[e]||e)(n.color),i=(0,GV.Yn)(t,`palette.${r}`,!1)||n.color,o=(0,GV.Yn)(t,`palette.${r}Channel`);return"vars"in t&&o?`rgba(${o} / 0.4)`:(0,oL.X4)(i,.4)},QV=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],XV=(0,rL.Ay)(QL,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${(0,iL.A)(n.underline)}`],"button"===n.component&&t.button]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,De.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:YV({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${qV.focusVisible}`]:{outline:"auto"}})})),ZV=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiLink"}),{className:i,color:o="primary",component:a="a",onBlur:s,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:h}=r,p=(0,Le.A)(r,QV),{isFocusVisibleRef:f,onBlur:m,onFocus:g,ref:v}=(0,JL.A)(),[y,b]=t.useState(!1),w=(0,XL.A)(n,v),x=(0,De.A)({},r,{color:o,component:a,focusVisible:y,underline:u,variant:d}),E=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${(0,iL.A)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,nL.A)(o,HV,t)})(x);return(0,Ve.jsx)(XV,(0,De.A)({color:o,className:(0,Pe.A)(E.root,i),classes:c,component:a,onBlur:e=>{m(e),!1===f.current&&b(!1),s&&s(e)},onFocus:e=>{g(e),!0===f.current&&b(!0),l&&l(e)},ref:w,ownerState:x,variant:d,sx:[...Object.keys(KV).includes(o)?[]:[{color:o}],...Array.isArray(h)?h:[h]]},p))})),JV=ZV,eW=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),{login:c,loading:u,error:d,setError:h,currentUser:p,userProfile:f}=ND(),m=Z();(0,t.useEffect)((()=>{l(null)}),[e,r]),(0,t.useEffect)((()=>{p&&f&&f.sourceCodeSetupComplete&&m("/")}),[p,f,m]),(0,t.useEffect)((()=>{d&&l({type:"error",message:d})}),[d]);const g=u||o;return(0,Ve.jsx)(HU,{maxWidth:"xs",children:(0,Ve.jsxs)(hL,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:"Login to Side Eye"}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),h&&h(null),l(null),e.trim())if(r)try{a(!0),l({type:"info",message:"Logging in..."}),await c(e,r),l({type:"success",message:"Login successful! Redirecting..."})}catch(n){console.error("Login component caught error:",n),"auth/too-many-requests"===n.code?l({type:"error",message:"Too many failed login attempts. Please try again later or reset your password."}):"auth/invalid-credential"===n.code?l({type:"error",message:"Invalid email or password. Please try again."}):l({type:"error",message:"Login failed. Please try again."})}finally{a(!1)}else l({type:"error",message:"Password is required"});else l({type:"error",message:"Email is required"})},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(uU,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>n(e.target.value),disabled:g}),(0,Ve.jsx)(uU,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:r,onChange:e=>i(e.target.value),disabled:g}),s&&(0,Ve.jsx)(aB,{severity:s.type,sx:{mt:2},children:s.message}),(0,Ve.jsx)(lM,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?(0,Ve.jsx)(SU,{size:24}):"Sign In"}),(0,Ve.jsxs)(zV,{container:!0,justifyContent:"space-between",children:[(0,Ve.jsx)(zV,{item:!0,children:(0,Ve.jsx)(JV,{component:Ce,to:"/reset-password",variant:"body2",children:"Forgot password?"})}),(0,Ve.jsx)(zV,{item:!0,children:(0,Ve.jsx)(JV,{component:Ce,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})};function tW(e){return(0,sL.Ay)("MuiInputAdornment",e)}const nW=(0,Ge.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var rW;const iW=["children","className","component","disablePointerEvents","disableTypography","position","variant"],oW=(0,rL.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,iL.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${nW.positionStart}&:not(.${nW.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),aW=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=r,d=(0,Le.A)(r,iW),h=bj()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=(0,De.A)({},r,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=e,s={root:["root",n&&"disablePointerEvents",i&&`position${(0,iL.A)(i)}`,a,r&&"hiddenLabel",o&&`size${(0,iL.A)(o)}`]};return(0,nL.A)(s,tW,t)})(f);return(0,Ve.jsx)(yj.Provider,{value:null,children:(0,Ve.jsx)(oW,(0,De.A)({as:a,ownerState:f,className:(0,Pe.A)(m.root,o),ref:n},d,{children:"string"!==typeof i||l?(0,Ve.jsxs)(t.Fragment,{children:["start"===c?rW||(rW=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,Ve.jsx)(QL,{color:"text.secondary",children:i})}))})})),sW=aW;function lW(e,n,r,i,o){const[a,s]=t.useState((()=>o&&r?r(e).matches:i?i(e).matches:n));return(0,JM.A)((()=>{let t=!0;if(!r)return;const n=r(e),i=()=>{t&&s(n.matches)};return i(),n.addListener(i),()=>{t=!1,n.removeListener(i)}}),[e,r]),a}const cW=r.useSyncExternalStore;function uW(e,n,r,i,o){const a=t.useCallback((()=>n),[n]),s=t.useMemo((()=>{if(o&&r)return()=>r(e).matches;if(null!==i){const{matches:t}=i(e);return()=>t}return a}),[a,e,i,o,r]),[l,c]=t.useMemo((()=>{if(null===r)return[a,()=>()=>{}];const t=r(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[a,r,e]);return cW(c,l,s)}function dW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ue(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:o=(r?window.matchMedia:null),ssrMatchMedia:a=null,noSsr:s=!1}=kU({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");return(void 0!==cW?uW:lW)(l,i,o,a,s)}function hW(e){let{props:t,name:n}=e;return CU({props:t,name:n,defaultTheme:tt.A,themeId:qe.A})}var pW=n(1942),fW=n.n(pW);const mW=fW().oneOfType([fW().func,fW().object]),gW=(e,t)=>e.length===t.length&&t.every((t=>e.includes(t))),vW=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r=e.setMilliseconds(r,e.getMilliseconds(n)),r},yW=e=>{let{date:t,disableFuture:n,disablePast:r,maxDate:i,minDate:o,isDateDisabled:a,utils:s,timezone:l}=e;const c=vW(s,s.date(void 0,l),t);r&&s.isBefore(o,c)&&(o=c),n&&s.isAfter(i,c)&&(i=c);let u=t,d=t;for(s.isBefore(t,o)&&(u=o,d=null),s.isAfter(t,i)&&(d&&(d=i),u=null);u||d;){if(u&&s.isAfter(u,i)&&(u=null),d&&s.isBefore(d,o)&&(d=null),u){if(!a(u))return u;u=s.addDays(u,1)}if(d){if(!a(d))return d;d=s.addDays(d,-1)}}return null},bW=(e,t,n)=>null!=t&&e.isValid(t)?t:n,wW=(e,t)=>{const n=[e.startOfYear(t)];for(;n.length<12;){const t=n[n.length-1];n.push(e.addMonths(t,1))}return n},xW=(e,t,n)=>"date"===n?e.startOfDay(e.date(void 0,t)):e.date(void 0,t),EW=["year","month","day"],AW=e=>EW.includes(e),_W=(e,t,n)=>{let{format:r,views:i}=t;if(null!=r)return r;const o=e.formats;return gW(i,["year"])?o.year:gW(i,["month"])?o.month:gW(i,["day"])?o.dayOfMonth:gW(i,["month","year"])?`${o.month} ${o.year}`:gW(i,["day","month"])?`${o.month} ${o.dayOfMonth}`:n?/en/.test(e.getCurrentLocaleCode())?o.normalDateWithWeekday:o.normalDate:o.keyboardDate},SW=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map((t=>e.addDays(n,t)))},TW=["hours","minutes","seconds"],kW=(e,t)=>3600*t.getHours(e)+60*t.getMinutes(e)+t.getSeconds(e),CW={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},IW=(e,t,n)=>{if(t===CW.year)return e.startOfYear(n);if(t===CW.month)return e.startOfMonth(n);if(t===CW.day)return e.startOfDay(n);let r=n;return t<CW.minutes&&(r=e.setMinutes(r,0)),t<CW.seconds&&(r=e.setSeconds(r,0)),t<CW.milliseconds&&(r=e.setMilliseconds(r,0)),r},RW=e=>{let{props:t,utils:n,granularity:r,timezone:i,getTodayDate:o}=e,a=o?o():IW(n,r,xW(n,i));null!=t.minDate&&n.isAfterDay(t.minDate,a)&&(a=IW(n,r,t.minDate)),null!=t.maxDate&&n.isBeforeDay(t.maxDate,a)&&(a=IW(n,r,t.maxDate));const s=((e,t)=>(n,r)=>e?t.isAfter(n,r):kW(n,t)>kW(r,t))(t.disableIgnoringDatePartForTimeValidation??!1,n);return null!=t.minTime&&s(t.minTime,a)&&(a=IW(n,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:vW(n,a,t.minTime))),null!=t.maxTime&&s(a,t.maxTime)&&(a=IW(n,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:vW(n,a,t.maxTime))),a},DW=(e,t)=>{const n=e.formatTokenMap[t];if(null==n)throw new Error([`MUI X: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"===typeof n?{type:n,contentType:"meridiem"===n?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},LW=(e,t)=>{const n=[],r=e.date(void 0,"default"),i=e.startOfWeek(r),o=e.endOfWeek(r);let a=i;for(;e.isBefore(a,o);)n.push(a),a=e.addDays(a,1);return n.map((n=>e.formatByString(n,t)))},PW=(e,t,n,r)=>{switch(n){case"month":return wW(e,e.date(void 0,t)).map((t=>e.formatByString(t,r)));case"weekDay":return LW(e,r);case"meridiem":{const n=e.date(void 0,t);return[e.startOfDay(n),e.endOfDay(n)].map((t=>e.formatByString(t,r)))}default:return[]}},MW=["0","1","2","3","4","5","6","7","8","9"],NW=(e,t)=>{if("0"===t[0])return e;const n=[];let r="";for(let i=0;i<e.length;i+=1){r+=e[i];const o=t.indexOf(r);o>-1&&(n.push(o.toString()),r="")}return n.join("")},OW=(e,t)=>"0"===t[0]?e:e.split("").map((e=>t[Number(e)])).join(""),jW=(e,t)=>{const n=NW(e,t);return" "!==n&&!Number.isNaN(Number(n))},FW=(e,t)=>{let n=e;for(n=Number(n).toString();n.length<t;)n=`0${n}`;return n},UW=(e,t,n,r,i)=>{if("day"===i.type&&"digit-with-letter"===i.contentType){const r=e.setDate(n.longestMonth,t);return e.formatByString(r,i.format)}let o=t.toString();return i.hasLeadingZerosInInput&&(o=FW(o,i.maxLength)),OW(o,r)},BW=(e,t,n,r,i,o,a,s)=>{const l=(e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(r),c="Home"===r,u="End"===r,d=""===n.value||c||u;return"digit"===n.contentType||"digit-with-letter"===n.contentType?(()=>{const r=i[n.type]({currentDate:a,format:n.format,contentType:n.contentType}),h=t=>UW(e,t,r,o,n),p="minutes"===n.type&&s?.minutesStep?s.minutesStep:1;let f;if(d){if("year"===n.type&&!u&&!c)return e.formatByString(e.date(void 0,t),n.format);f=l>0||c?r.minimum:r.maximum}else f=parseInt(NW(n.value,o),10)+l*p;return f%p!==0&&((l<0||c)&&(f+=p-(p+f)%p),(l>0||u)&&(f-=f%p)),f>r.maximum?h(r.minimum+(f-r.maximum-1)%(r.maximum-r.minimum+1)):f<r.minimum?h(r.maximum-(r.minimum-f-1)%(r.maximum-r.minimum+1)):h(f)})():(()=>{const r=PW(e,t,n.type,n.format);if(0===r.length)return n.value;if(d)return l>0||c?r[0]:r[r.length-1];const i=r.indexOf(n.value);return r[((i+l)%r.length+r.length)%r.length]})()},$W=(e,t,n)=>{let r=e.value||e.placeholder;const i="non-input"===t?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;"non-input"===t&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(r=Number(NW(r,n)).toString());return["input-rtl","input-ltr"].includes(t)&&"digit"===e.contentType&&!i&&1===r.length&&(r=`${r}\u200e`),"input-rtl"===t&&(r=`\u2068${r}\u2069`),r},VW=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),WW=(e,t)=>4===e.formatByString(e.date(void 0,"system"),t).length,zW=(e,t,n,r)=>{if("digit"!==t)return!1;const i=e.date(void 0,"default");switch(n){case"year":return"dayjs"===e.lib&&"YY"===r||e.formatByString(e.setYear(i,1),r).startsWith("0");case"month":return e.formatByString(e.startOfYear(i),r).length>1;case"day":return e.formatByString(e.startOfMonth(i),r).length>1;case"weekDay":return e.formatByString(e.startOfWeek(i),r).length>1;case"hours":return e.formatByString(e.setHours(i,1),r).length>1;case"minutes":return e.formatByString(e.setMinutes(i,1),r).length>1;case"seconds":return e.formatByString(e.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}};const HW=(e,t)=>{0},qW={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},GW=(e,t,n,r,i)=>[...n].sort(((e,t)=>qW[e.type]-qW[t.type])).reduce(((n,r)=>!i||r.modified?((e,t,n,r)=>{switch(t.type){case"year":return e.setYear(r,e.getYear(n));case"month":return e.setMonth(r,e.getMonth(n));case"weekDay":{const r=LW(e,t.format),i=e.formatByString(n,t.format),o=r.indexOf(i),a=r.indexOf(t.value)-o;return e.addDays(n,a)}case"day":return e.setDate(r,e.getDate(n));case"meridiem":{const t=e.getHours(n)<12,i=e.getHours(r);return t&&i>=12?e.addHours(r,-12):!t&&i<12?e.addHours(r,12):r}case"hours":return e.setHours(r,e.getHours(n));case"minutes":return e.setMinutes(r,e.getMinutes(n));case"seconds":return e.setSeconds(r,e.getSeconds(n));default:return r}})(e,r,t,n):n),r),KW=(e,t)=>{if(null==e)return null;if("all"===e)return"all";if("string"===typeof e){const n=t.findIndex((t=>t.type===e));return-1===n?null:n}return e},YW=(e,t)=>{if(e.value)switch(e.type){case"month":{if("digit"===e.contentType)return t.format(t.setMonth(t.date(),Number(e.value)-1),"month");const n=t.parse(e.value,e.format);return n?t.format(n,"month"):void 0}case"day":return"digit"===e.contentType?t.format(t.setDate(t.startOfYear(t.date()),Number(e.value)),"dayOfMonthFull"):e.value;default:return}},QW=(e,t)=>{if(e.value)switch(e.type){case"weekDay":if("letter"===e.contentType)return;return Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return"digit-with-letter"===e.contentType?parseInt(e.value,10):Number(e.value);case"month":{if("digit"===e.contentType)return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return"letter"!==e.contentType?Number(e.value):void 0}},XW=["value","referenceDate"],ZW={emptyValue:null,getTodayValue:xW,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=(0,Le.A)(e,XW);return null!=t&&r.utils.isValid(t)?t:null!=n?n:RW(r)},cleanValue:(e,t)=>null!=t&&e.isValid(t)?t:null,areValuesEqual:(e,t,n)=>!e.isValid(t)&&null!=t&&!e.isValid(n)&&null!=n||e.isEqual(t,n),isSameError:(e,t)=>e===t,hasError:e=>null!=e,defaultErrorState:null,getTimezone:(e,t)=>null!=t&&e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>null==n?null:e.setTimezone(n,t)},JW={updateReferenceValue:(e,t,n)=>null!=t&&e.isValid(t)?t:n,getSectionsFromValue:(e,t,n,r)=>!e.isValid(t)&&!!n?n:r(t),getV7HiddenInputValueFromSections:e=>e.map((e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`)).join(""),getV6InputValueFromSections:(e,t,n)=>{const r=e.map((e=>{const r=$W(e,n?"input-rtl":"input-ltr",t);return`${e.startSeparator}${r}${e.endSeparator}`})).join("");return n?`\u2066${r}\u2069`:r},getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:e=>e,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:null!=n&&e.isValid(n)?n:t.referenceValue})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},ez=["localeText"],tz=t.createContext(null);const nz=function(e){const{localeText:n}=e,r=(0,Le.A)(e,ez),{utils:i,localeText:o}=t.useContext(tz)??{utils:void 0,localeText:void 0},a=hW({props:r,name:"MuiLocalizationProvider"}),{children:s,dateAdapter:l,dateFormats:c,dateLibInstance:u,adapterLocale:d,localeText:h}=a,p=t.useMemo((()=>(0,De.A)({},h,o,n)),[h,o,n]),f=t.useMemo((()=>{if(!l)return i||null;const e=new l({locale:d,formats:c,instance:u});if(!e.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join("\n"));return e}),[l,d,c,u,i]),m=t.useMemo((()=>f?{minDate:f.date("1900-01-01T00:00:00.000"),maxDate:f.date("2099-12-31T00:00:00.000")}:null),[f]),g=t.useMemo((()=>({utils:f,defaultDates:m,localeText:p})),[m,f,p]);return(0,Ve.jsx)(tz.Provider,{value:g,children:s})},rz=e=>{const{utils:t,formatKey:n,contextTranslation:r,propsTranslation:i}=e;return e=>{const o=null!==e&&t.isValid(e)?t.format(e,n):null;return(i??r)(e,t,o)}},iz={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n,r)=>`Select ${e}. ${r||null!==t&&n.isValid(t)?`Selected time is ${r??n.format(t,"fullTime")}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t,n)=>n||null!==e&&t.isValid(e)?`Choose date, selected date is ${n??t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t,n)=>n||null!==e&&t.isValid(e)?`Choose time, selected time is ${n??t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>"letter"===e.contentType?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>"letter"===e.contentType?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},oz=iz;az=iz,(0,De.A)({},az);var az;const sz=()=>{const e=t.useContext(tz);if(null===e)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join("\n"));if(null===e.utils)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join("\n"));const n=t.useMemo((()=>(0,De.A)({},oz,e.localeText)),[e.localeText]);return t.useMemo((()=>(0,De.A)({},e,{localeText:n})),[e,n])},lz=()=>sz().utils,cz=()=>sz().defaultDates,uz=e=>{const n=lz(),r=t.useRef(void 0);return void 0===r.current&&(r.current=n.date(void 0,e)),r.current};function dz(e){return(0,sL.Ay)("MuiPickersToolbar",e)}(0,Ge.A)("MuiPickersToolbar",["root","content"]);const hz=["children","className","toolbarTitle","hidden","titleId","isLandscape","classes","landscapeDirection"],pz=(0,rL.Ay)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{isLandscape:!0},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]}})),fz=(0,rL.Ay)("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{isLandscape:!0},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{isLandscape:!0,landscapeDirection:"row"},style:{flexDirection:"row"}}]}),mz=t.forwardRef((function(e,t){const n=hW({props:e,name:"MuiPickersToolbar"}),{children:r,className:i,toolbarTitle:o,hidden:a,titleId:s}=n,l=(0,Le.A)(n,hz),c=n,u=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],content:["content"]},dz,t)})(c);return a?null:(0,Ve.jsxs)(pz,(0,De.A)({ref:t,className:(0,Pe.A)(u.root,i),ownerState:c},l,{children:[(0,Ve.jsx)(QL,{color:"text.secondary",variant:"overline",id:s,children:o}),(0,Ve.jsx)(fz,{className:u.content,ownerState:c,children:r})]}))})),gz=()=>sz().localeText;function vz(e){return(0,sL.Ay)("MuiDatePickerToolbar",e)}(0,Ge.A)("MuiDatePickerToolbar",["root","title"]);const yz=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className","onViewChange","view"],bz=(0,rL.Ay)(mz,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),wz=(0,rL.Ay)(QL,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})({variants:[{props:{isLandscape:!0},style:{margin:"auto 16px auto auto"}}]}),xz=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiDatePickerToolbar"}),{value:i,isLandscape:o,toolbarFormat:a,toolbarPlaceholder:s="\u2013\u2013",views:l,className:c}=r,u=(0,Le.A)(r,yz),d=lz(),h=gz(),p=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],title:["title"]},vz,t)})(r),f=t.useMemo((()=>{if(!i)return s;const e=_W(d,{format:a,views:l},!0);return d.formatByString(i,e)}),[i,a,s,d,l]),m=r;return(0,Ve.jsx)(bz,(0,De.A)({ref:n,toolbarTitle:h.datePickerToolbarTitle,isLandscape:o,className:(0,Pe.A)(p.root,c)},u,{children:(0,Ve.jsx)(wz,{variant:"h4",align:o?"left":"center",ownerState:m,className:p.title,children:f})}))}));function Ez(e,n){const r=lz(),i=cz(),o=hW({props:e,name:n}),a=t.useMemo((()=>null==o.localeText?.toolbarTitle?o.localeText:(0,De.A)({},o.localeText,{datePickerToolbarTitle:o.localeText.toolbarTitle})),[o.localeText]);return(0,De.A)({},o,{localeText:a},(e=>{let{openTo:t,defaultOpenTo:n,views:r,defaultViews:i}=e;const o=r??i;let a;if(null!=t)a=t;else if(o.includes(n))a=n;else{if(!(o.length>0))throw new Error("MUI X: The `views` prop must contain at least one view.");a=o[0]}return{views:o,openTo:a}})({views:o.views,openTo:o.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:o.disableFuture??!1,disablePast:o.disablePast??!1,minDate:bW(r,o.minDate,i.minDate),maxDate:bW(r,o.maxDate,i.maxDate),slots:(0,De.A)({toolbar:xz},o.slots)})}const Az=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],_z=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],Sz=["minDateTime","maxDateTime"],Tz=[...Az,..._z,...Sz],kz=e=>Tz.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),Cz=e=>{let{props:t,value:n,timezone:r,adapter:i}=e;if(null===n)return null;const{shouldDisableDate:o,shouldDisableMonth:a,shouldDisableYear:s,disablePast:l,disableFuture:c}=t,u=i.utils.date(void 0,r),d=bW(i.utils,t.minDate,i.defaultDates.minDate),h=bW(i.utils,t.maxDate,i.defaultDates.maxDate);switch(!0){case!i.utils.isValid(n):return"invalidDate";case Boolean(o&&o(n)):return"shouldDisableDate";case Boolean(a&&a(n)):return"shouldDisableMonth";case Boolean(s&&s(n)):return"shouldDisableYear";case Boolean(c&&i.utils.isAfterDay(n,u)):return"disableFuture";case Boolean(l&&i.utils.isBeforeDay(n,u)):return"disablePast";case Boolean(d&&i.utils.isBeforeDay(n,d)):return"minDate";case Boolean(h&&i.utils.isAfterDay(n,h)):return"maxDate";default:return null}};Cz.valueManager=ZW;var Iz=n(6688);function Rz(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Dz(e){return e instanceof Rz(e).Element||e instanceof Element}function Lz(e){return e instanceof Rz(e).HTMLElement||e instanceof HTMLElement}function Pz(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Rz(e).ShadowRoot||e instanceof ShadowRoot)}var Mz=Math.max,Nz=Math.min,Oz=Math.round;function jz(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Fz(){return!/^((?!chrome|android).)*safari/i.test(jz())}function Uz(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Lz(e)&&(i=e.offsetWidth>0&&Oz(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Oz(r.height)/e.offsetHeight||1);var a=(Dz(e)?Rz(e):window).visualViewport,s=!Fz()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Bz(e){var t=Rz(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function $z(e){return e?(e.nodeName||"").toLowerCase():null}function Vz(e){return((Dz(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wz(e){return Uz(Vz(e)).left+Bz(e).scrollLeft}function zz(e){return Rz(e).getComputedStyle(e)}function Hz(e){var t=zz(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function qz(e,t,n){void 0===n&&(n=!1);var r=Lz(t),i=Lz(t)&&function(e){var t=e.getBoundingClientRect(),n=Oz(t.width)/e.offsetWidth||1,r=Oz(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=Vz(t),a=Uz(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==$z(t)||Hz(o))&&(s=function(e){return e!==Rz(e)&&Lz(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Bz(e);var t}(t)),Lz(t)?((l=Uz(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Wz(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Gz(e){var t=Uz(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Kz(e){return"html"===$z(e)?e:e.assignedSlot||e.parentNode||(Pz(e)?e.host:null)||Vz(e)}function Yz(e){return["html","body","#document"].indexOf($z(e))>=0?e.ownerDocument.body:Lz(e)&&Hz(e)?e:Yz(Kz(e))}function Qz(e,t){var n;void 0===t&&(t=[]);var r=Yz(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Rz(r),a=i?[o].concat(o.visualViewport||[],Hz(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(Qz(Kz(a)))}function Xz(e){return["table","td","th"].indexOf($z(e))>=0}function Zz(e){return Lz(e)&&"fixed"!==zz(e).position?e.offsetParent:null}function Jz(e){for(var t=Rz(e),n=Zz(e);n&&Xz(n)&&"static"===zz(n).position;)n=Zz(n);return n&&("html"===$z(n)||"body"===$z(n)&&"static"===zz(n).position)?t:n||function(e){var t=/firefox/i.test(jz());if(/Trident/i.test(jz())&&Lz(e)&&"fixed"===zz(e).position)return null;var n=Kz(e);for(Pz(n)&&(n=n.host);Lz(n)&&["html","body"].indexOf($z(n))<0;){var r=zz(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var eH="top",tH="bottom",nH="right",rH="left",iH="auto",oH=[eH,tH,nH,rH],aH="start",sH="end",lH="viewport",cH="popper",uH=oH.reduce((function(e,t){return e.concat([t+"-"+aH,t+"-"+sH])}),[]),dH=[].concat(oH,[iH]).reduce((function(e,t){return e.concat([t,t+"-"+aH,t+"-"+sH])}),[]),hH=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function pH(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function fH(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var mH={placement:"bottom",modifiers:[],strategy:"absolute"};function gH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function vH(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?mH:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},mH,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:Dz(e)?Qz(e):e.contextElement?Qz(e.contextElement):[],popper:Qz(t)};var u=function(e){var t=pH(e);return hH.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(gH(t,n)){i.rects={reference:qz(t,Jz(n),"fixed"===i.options.strategy),popper:Gz(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:fH((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!gH(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var yH={passive:!0};function bH(e){return e.split("-")[0]}function wH(e){return e.split("-")[1]}function xH(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function EH(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?bH(i):null,a=i?wH(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case eH:t={x:s,y:n.y-r.height};break;case tH:t={x:s,y:n.y+n.height};break;case nH:t={x:n.x+n.width,y:l};break;case rH:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?xH(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case aH:t[c]=t[c]-(n[u]/2-r[u]/2);break;case sH:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var AH={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _H(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,p=void 0===h?0:h,f=a.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=rH,w=eH,x=window;if(c){var E=Jz(n),A="clientHeight",_="clientWidth";if(E===Rz(n)&&"static"!==zz(E=Vz(n)).position&&"absolute"===s&&(A="scrollHeight",_="scrollWidth"),i===eH||(i===rH||i===nH)&&o===sH)w=tH,m-=(d&&E===x&&x.visualViewport?x.visualViewport.height:E[A])-r.height,m*=l?1:-1;if(i===rH||(i===eH||i===tH)&&o===sH)b=nH,p-=(d&&E===x&&x.visualViewport?x.visualViewport.width:E[_])-r.width,p*=l?1:-1}var S,T=Object.assign({position:s},c&&AH),k=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Oz(n*i)/i||0,y:Oz(r*i)/i||0}}({x:p,y:m},Rz(n)):{x:p,y:m};return p=k.x,m=k.y,l?Object.assign({},T,((S={})[w]=y?"0":"",S[b]=v?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",S)):Object.assign({},T,((t={})[w]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const SH={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Lz(i)&&$z(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Lz(r)&&$z(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const TH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=dH.reduce((function(e,n){return e[n]=function(e,t,n){var r=bH(e),i=[rH,eH].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[rH,nH].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var kH={left:"right",right:"left",bottom:"top",top:"bottom"};function CH(e){return e.replace(/left|right|bottom|top/g,(function(e){return kH[e]}))}var IH={start:"end",end:"start"};function RH(e){return e.replace(/start|end/g,(function(e){return IH[e]}))}function DH(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Pz(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function LH(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function PH(e,t,n){return t===lH?LH(function(e,t){var n=Rz(e),r=Vz(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=Fz();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Wz(e),y:l}}(e,n)):Dz(t)?function(e,t){var n=Uz(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):LH(function(e){var t,n=Vz(e),r=Bz(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Mz(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Mz(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Wz(e),l=-r.scrollTop;return"rtl"===zz(i||n).direction&&(s+=Mz(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Vz(e)))}function MH(e,t,n,r){var i="clippingParents"===t?function(e){var t=Qz(Kz(e)),n=["absolute","fixed"].indexOf(zz(e).position)>=0&&Lz(e)?Jz(e):e;return Dz(n)?t.filter((function(e){return Dz(e)&&DH(e,n)&&"body"!==$z(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=PH(e,n,r);return t.top=Mz(i.top,t.top),t.right=Nz(i.right,t.right),t.bottom=Nz(i.bottom,t.bottom),t.left=Mz(i.left,t.left),t}),PH(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function NH(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function OH(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function jH(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?lH:c,d=n.elementContext,h=void 0===d?cH:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=NH("number"!==typeof g?g:OH(g,oH)),y=h===cH?"reference":cH,b=e.rects.popper,w=e.elements[f?y:h],x=MH(Dz(w)?w:w.contextElement||Vz(e.elements.popper),l,u,a),E=Uz(e.elements.reference),A=EH({reference:E,element:b,strategy:"absolute",placement:i}),_=LH(Object.assign({},b,A)),S=h===cH?_:E,T={top:x.top-S.top+v.top,bottom:S.bottom-x.bottom+v.bottom,left:x.left-S.left+v.left,right:S.right-x.right+v.right},k=e.modifiersData.offset;if(h===cH&&k){var C=k[i];Object.keys(T).forEach((function(e){var t=[nH,tH].indexOf(e)>=0?1:-1,n=[eH,tH].indexOf(e)>=0?"y":"x";T[e]+=C[n]*t}))}return T}const FH={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=bH(g),y=l||(v===g||!f?[CH(g)]:function(e){if(bH(e)===iH)return[];var t=CH(e);return[RH(e),t,RH(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(bH(n)===iH?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?dH:l,u=wH(r),d=u?s?uH:uH.filter((function(e){return wH(e)===u})):oH,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=jH(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[bH(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,E=new Map,A=!0,_=b[0],S=0;S<b.length;S++){var T=b[S],k=bH(T),C=wH(T)===aH,I=[eH,tH].indexOf(k)>=0,R=I?"width":"height",D=jH(t,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),L=I?C?nH:rH:C?tH:eH;w[R]>x[R]&&(L=CH(L));var P=CH(L),M=[];if(o&&M.push(D[k]<=0),s&&M.push(D[L]<=0,D[P]<=0),M.every((function(e){return e}))){_=T,A=!1;break}E.set(T,M)}if(A)for(var N=function(e){var t=b.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},O=f?3:1;O>0;O--){if("break"===N(O))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function UH(e,t,n){return Mz(e,Nz(t,n))}const BH={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=jH(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=bH(t.placement),y=wH(t.placement),b=!y,w=xH(v),x="x"===w?"y":"x",E=t.modifiersData.popperOffsets,A=t.rects.reference,_=t.rects.popper,S="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(E){if(o){var I,R="y"===w?eH:rH,D="y"===w?tH:nH,L="y"===w?"height":"width",P=E[w],M=P+g[R],N=P-g[D],O=p?-_[L]/2:0,j=y===aH?A[L]:_[L],F=y===aH?-_[L]:-A[L],U=t.elements.arrow,B=p&&U?Gz(U):{width:0,height:0},$=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=$[R],W=$[D],z=UH(0,A[L],B[L]),H=b?A[L]/2-O-z-V-T.mainAxis:j-z-V-T.mainAxis,q=b?-A[L]/2+O+z+W+T.mainAxis:F+z+W+T.mainAxis,G=t.elements.arrow&&Jz(t.elements.arrow),K=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Y=null!=(I=null==k?void 0:k[w])?I:0,Q=P+q-Y,X=UH(p?Nz(M,P+H-Y-K):M,P,p?Mz(N,Q):N);E[w]=X,C[w]=X-P}if(s){var Z,J="x"===w?eH:rH,ee="x"===w?tH:nH,te=E[x],ne="y"===x?"height":"width",re=te+g[J],ie=te-g[ee],oe=-1!==[eH,rH].indexOf(v),ae=null!=(Z=null==k?void 0:k[x])?Z:0,se=oe?re:te-A[ne]-_[ne]-ae+T.altAxis,le=oe?te+A[ne]+_[ne]-ae-T.altAxis:ie,ce=p&&oe?function(e,t,n){var r=UH(e,t,n);return r>n?n:r}(se,te,le):UH(p?se:re,te,p?le:ie);E[x]=ce,C[x]=ce-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};const $H={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=bH(n.placement),l=xH(s),c=[rH,nH].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return NH("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:OH(e,oH))}(i.padding,n),d=Gz(o),h="y"===l?eH:rH,p="y"===l?tH:nH,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=Jz(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[h],w=v-d[c]-u[p],x=v/2-d[c]/2+y,E=UH(b,x,w),A=l;n.modifiersData[r]=((t={})[A]=E,t.centerOffset=E-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&DH(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function VH(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function WH(e){return[eH,nH,tH,rH].some((function(t){return e[t]>=0}))}var zH=vH({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Rz(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,yH)})),s&&l.addEventListener("resize",n.update,yH),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,yH)})),s&&l.removeEventListener("resize",n.update,yH)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=EH({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:bH(t.placement),variation:wH(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,_H(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,_H(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},SH,TH,FH,BH,$H,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=jH(t,{elementContext:"reference"}),s=jH(t,{altBoundary:!0}),l=VH(a,r),c=VH(s,i,o),u=WH(l),d=WH(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function HH(e){return(0,sL.Ay)("MuiPopper",e)}(0,Ge.A)("MuiPopper",["root"]);const qH=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],GH=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function KH(e){return"function"===typeof e?e():e}function YH(e){return void 0!==e.nodeType}const QH={},XH=t.forwardRef((function(e,n){var r;const{anchorEl:i,children:o,direction:a,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,Le.A)(e,qH),v=t.useRef(null),y=(0,kL.A)(v,n),b=t.useRef(null),w=(0,kL.A)(b,h),x=t.useRef(w);(0,JM.A)((()=>{x.current=w}),[w]),t.useImperativeHandle(h,(()=>b.current),[]);const E=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,a),[A,_]=t.useState(E),[S,T]=t.useState(KH(i));t.useEffect((()=>{b.current&&b.current.forceUpdate()})),t.useEffect((()=>{i&&T(KH(i))}),[i]),(0,JM.A)((()=>{if(!S||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{_(e.placement)})(t)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=zH(S,v.current,(0,De.A)({placement:E},d,{modifiers:e}));return x.current(t),()=>{t.destroy(),x.current(null)}}),[S,s,l,c,d,E]);const k={placement:A};null!==m&&(k.TransitionProps=m);const C=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},HH,t)})(e),I=null!=(r=f.root)?r:"div",R=$P({elementType:I,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:C.root});return(0,Ve.jsx)(I,(0,De.A)({},R,{children:"function"===typeof o?o(k):o}))})),ZH=t.forwardRef((function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=QH,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=(0,Le.A)(e,GH),[b,w]=t.useState(!0);if(!l&&!u&&(!m||b))return null;let x;if(o)x=o;else if(r){const e=KH(r);x=e&&YH(e)?(0,KM.A)(e).body:(0,KM.A)(null).body}const E=u||!l||m&&!b?void 0:"none",A=m?{in:u,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,Ve.jsx)(tN,{disablePortal:s,container:x,children:(0,Ve.jsx)(XH,(0,De.A)({anchorEl:r,direction:a,disablePortal:s,modifiers:c,ref:n,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:(0,De.A)({position:"fixed",top:0,left:0,display:E},f),TransitionProps:A,children:i}))})})),JH=ZH,eq=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],tq=(0,rL.Ay)(JH,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nq=t.forwardRef((function(e,t){var n;const r=(0,Iz.A)(),i=(0,Ze.b)({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:s,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v,slots:y,slotProps:b}=i,w=(0,Le.A)(i,eq),x=null!=(n=null==y?void 0:y.root)?n:null==s?void 0:s.Root,E=(0,De.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v},w);return(0,Ve.jsx)(tq,(0,De.A)({as:a,direction:null==r?void 0:r.direction,slots:{root:x},slotProps:null!=b?b:l},E,{ref:t}))})),rq=nq;function iq(e){return(0,sL.Ay)("MuiPickersPopper",e)}(0,Ge.A)("MuiPickersPopper",["root","paper"]);const oq=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).activeElement;return e?e.shadowRoot?oq(e.shadowRoot):e:null},aq="@media (pointer: fine)",sq="undefined"!==typeof navigator&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),lq=sq&&sq[1]?parseInt(sq[1],10):null,cq=sq&&sq[2]?parseInt(sq[2],10):null,uq=lq&&lq<10||cq&&cq<13||!1,dq=()=>dW("@media (prefers-reduced-motion: reduce)",{defaultMatches:!1})||uq,hq=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],pq=(0,rL.Ay)(rq,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{zIndex:t.zIndex.modal}})),fq=(0,rL.Ay)(hL,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})({outline:0,transformOrigin:"top center",variants:[{props:e=>{let{placement:t}=e;return["top","top-start","top-end"].includes(t)},style:{transformOrigin:"bottom center"}}]});const mq=t.forwardRef(((e,t)=>{const{PaperComponent:n,popperPlacement:r,ownerState:i,children:o,paperSlotProps:a,paperClasses:s,onPaperClick:l,onPaperTouchStart:c}=e,u=(0,Le.A)(e,hq),d=(0,De.A)({},i,{placement:r}),h=$P({elementType:n,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:s,ownerState:d});return(0,Ve.jsx)(n,(0,De.A)({},u,h,{onClick:e=>{l(e),h.onClick?.(e)},onTouchStart:e=>{c(e),h.onTouchStart?.(e)},ownerState:d,children:o}))}));function gq(e){const n=hW({props:e,name:"MuiPickersPopper"}),{anchorEl:r,children:i,containerRef:o=null,shouldRestoreFocus:a,onBlur:s,onDismiss:l,open:c,role:u,placement:d,slots:h,slotProps:p,reduceAnimations:f}=n;t.useEffect((()=>{function e(e){c&&"Escape"===e.key&&l()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[l,c]);const m=t.useRef(null);t.useEffect((()=>{"tooltip"===u||a&&!a()||(c?m.current=oq(document):m.current&&m.current instanceof HTMLElement&&setTimeout((()=>{m.current instanceof HTMLElement&&m.current.focus()})))}),[c,u,a]);const[g,v,y]=function(e,n){const r=t.useRef(!1),i=t.useRef(!1),o=t.useRef(null),a=t.useRef(!1);t.useEffect((()=>{if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),a.current=!1};function t(){a.current=!0}}),[e]);const s=(0,dN.A)((e=>{if(!a.current)return;const t=i.current;i.current=!1;const s=(0,KM.A)(o.current);if(!o.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,s))return;if(r.current)return void(r.current=!1);let l;l=e.composedPath?e.composedPath().indexOf(o.current)>-1:!s.documentElement.contains(e.target)||o.current.contains(e.target),l||t||n(e)})),l=()=>{i.current=!0};return t.useEffect((()=>{if(e){const e=(0,KM.A)(o.current),t=()=>{r.current=!0};return e.addEventListener("touchstart",s),e.addEventListener("touchmove",t),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",t)}}}),[e,s]),t.useEffect((()=>{if(e){const e=(0,KM.A)(o.current);return e.addEventListener("click",s),()=>{e.removeEventListener("click",s),i.current=!1}}}),[e,s]),[o,l,l]}(c,s??l),b=t.useRef(null),w=(0,kL.A)(b,o),x=(0,kL.A)(w,g),E=n,A=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],paper:["paper"]},iq,t)})(E),_=dq(),S=f??_,T=h?.desktopTransition??S?oN:GM,k=h?.desktopTrapFocus??ZM,C=h?.desktopPaper??fq,I=h?.popper??pq,R=$P({elementType:I,externalSlotProps:p?.popper,additionalProps:{transition:!0,role:u,open:c,anchorEl:r,placement:d,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),l())}},className:A.root,ownerState:n});return(0,Ve.jsx)(I,(0,De.A)({},R,{children:e=>{let{TransitionProps:t,placement:n}=e;return(0,Ve.jsx)(k,(0,De.A)({open:c,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===u,isEnabled:()=>!0},p?.desktopTrapFocus,{children:(0,Ve.jsx)(T,(0,De.A)({},t,p?.desktopTransition,{children:(0,Ve.jsx)(mq,{PaperComponent:C,ownerState:E,popperPlacement:n,ref:x,onPaperClick:v,onPaperTouchStart:y,paperClasses:A.paper,paperSlotProps:p?.desktopPaper,children:i})}))}))}}))}function vq(e){const{props:n,validator:r,value:i,timezone:o,onError:a}=e,s=sz(),l=t.useRef(r.valueManager.defaultErrorState),c=r({adapter:s,value:i,timezone:o,props:n}),u=r.valueManager.hasError(c);t.useEffect((()=>{a&&!r.valueManager.isSameError(c,l.current)&&a(c,i),l.current=c}),[r,a,c,i]);const d=(0,dN.A)((e=>r({adapter:s,value:e,timezone:o,props:n})));return{validationError:c,hasValidationError:u,getValidationErrorForNewValue:d}}var yq=n(3931);const bq=e=>{let{timezone:n,value:r,defaultValue:i,referenceDate:o,onChange:a,valueManager:s}=e;const l=lz(),c=t.useRef(i),u=r??c.current??s.emptyValue,d=t.useMemo((()=>s.getTimezone(l,u)),[l,s,u]),h=(0,dN.A)((e=>null==d?e:s.setTimezone(l,d,e)));let p;p=n||(d||(o?l.getTimezone(o):"default"));const f=t.useMemo((()=>s.setTimezone(l,p,u)),[s,l,p,u]),m=(0,dN.A)((function(e){const t=h(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];a?.(t,...r)}));return{value:f,handleValueChange:m,timezone:p}},wq=e=>{let{name:t,timezone:n,value:r,defaultValue:i,referenceDate:o,onChange:a,valueManager:s}=e;const[l,c]=(0,yq.A)({name:t,state:"value",controlled:r,default:i??s.emptyValue}),u=(0,dN.A)((function(e){c(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a?.(e,...n)}));return bq({timezone:n,value:l,defaultValue:void 0,referenceDate:o,onChange:u,valueManager:s})},xq=e=>{let{props:n,valueManager:r,valueType:i,wrapperVariant:o,validator:a}=e;const{onAccept:s,onChange:l,value:c,defaultValue:u,closeOnSelect:d="desktop"===o,timezone:h,referenceDate:p}=n,{current:f}=t.useRef(u),{current:m}=t.useRef(void 0!==c),[g,v]=t.useState(h);const y=lz(),b=sz(),{isOpen:w,setIsOpen:x}=(e=>{let{open:n,onOpen:r,onClose:i}=e;const o=t.useRef("boolean"===typeof n).current,[a,s]=t.useState(!1);return t.useEffect((()=>{if(o){if("boolean"!==typeof n)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(n)}}),[o,n]),{isOpen:a,setIsOpen:t.useCallback((e=>{o||s(e),e&&r&&r(),!e&&i&&i()}),[o,r,i])}})(n),{timezone:E,value:A,handleValueChange:_}=bq({timezone:h,value:c,defaultValue:f,referenceDate:p,onChange:l,valueManager:r}),[S,T]=t.useState((()=>{let e;return e=void 0!==A?A:void 0!==f?f:r.emptyValue,{draft:e,lastPublishedValue:e,lastCommittedValue:e,lastControlledValue:c,hasBeenModifiedSinceMount:!1}})),k=r.getTimezone(y,S.draft);g!==h&&(v(h),h&&k&&h!==k&&T((e=>(0,De.A)({},e,{draft:r.setTimezone(y,h,e.draft)}))));const{getValidationErrorForNewValue:C}=vq({props:n,validator:a,timezone:E,value:S.draft,onError:n.onError}),I=(0,dN.A)((e=>{const t={action:e,dateState:S,hasChanged:t=>!r.areValuesEqual(y,e.value,t),isControlled:m,closeOnSelect:d},n=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i}=e,o=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromField"===t.name||("setValueFromAction"===t.name?!(!o||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastPublishedValue):("setValueFromView"===t.name&&"shallow"!==t.selectionState||"setValueFromShortcut"===t.name)&&(!!o||n(r.lastPublishedValue)))})(t),i=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i,closeOnSelect:o}=e,a=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromAction"===t.name?!(!a||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastCommittedValue):"setValueFromView"===t.name&&"finish"===t.selectionState&&o?!!a||n(r.lastCommittedValue):"setValueFromShortcut"===t.name&&"accept"===t.changeImportance&&n(r.lastCommittedValue)})(t),o=(e=>{const{action:t,closeOnSelect:n}=e;return"setValueFromAction"===t.name||("setValueFromView"===t.name?"finish"===t.selectionState&&n:"setValueFromShortcut"===t.name&&"accept"===t.changeImportance)})(t);T((t=>(0,De.A)({},t,{draft:e.value,lastPublishedValue:n?e.value:t.lastPublishedValue,lastCommittedValue:i?e.value:t.lastCommittedValue,hasBeenModifiedSinceMount:!0})));let a=null;const l=()=>{if(!a){const t="setValueFromField"===e.name?e.context.validationError:C(e.value);a={validationError:t},"setValueFromShortcut"===e.name&&(a.shortcut=e.shortcut)}return a};n&&_(e.value,l()),i&&s&&s(e.value,l()),o&&x(!1)}));if(S.lastControlledValue!==c){const e=r.areValuesEqual(y,S.draft,A);T((t=>(0,De.A)({},t,{lastControlledValue:c},e?{}:{lastCommittedValue:A,lastPublishedValue:A,draft:A,hasBeenModifiedSinceMount:!0})))}const R=(0,dN.A)((()=>{I({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})})),D=(0,dN.A)((()=>{I({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})})),L=(0,dN.A)((()=>{I({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})})),P=(0,dN.A)((()=>{I({value:S.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})})),M=(0,dN.A)((()=>{I({value:r.getTodayValue(y,E,i),name:"setValueFromAction",pickerAction:"today"})})),N=(0,dN.A)((e=>{e.preventDefault(),x(!0)})),O=(0,dN.A)((e=>{e?.preventDefault(),x(!1)})),j=(0,dN.A)((function(e){return I({name:"setValueFromView",value:e,selectionState:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"partial"})})),F=(0,dN.A)(((e,t,n)=>I({name:"setValueFromShortcut",value:e,changeImportance:t,shortcut:n}))),U=(0,dN.A)(((e,t)=>I({name:"setValueFromField",value:e,context:t}))),B={onClear:R,onAccept:D,onDismiss:L,onCancel:P,onSetToday:M,onOpen:N,onClose:O},$={value:S.draft,onChange:U},V=t.useMemo((()=>r.cleanValue(y,S.draft)),[y,r,S.draft]),W={value:V,onChange:j,onClose:O,open:w},z=(0,De.A)({},B,{value:V,onChange:j,onSelectShortcut:F,isValid:e=>{const t=a({adapter:b,value:e,timezone:E,props:n});return!r.hasError(t)}}),H=t.useMemo((()=>({onOpen:N,onClose:O,open:w})),[w,O,N]);return{open:w,fieldProps:$,viewProps:W,layoutProps:z,actions:B,contextValue:H}};function Eq(e){let{onChange:n,onViewChange:r,openTo:i,view:o,views:a,autoFocus:s,focusedView:l,onFocusedViewChange:c}=e;const u=t.useRef(i),d=t.useRef(a),h=t.useRef(a.includes(i)?i:a[0]),[p,f]=(0,yq.A)({name:"useViews",state:"view",controlled:o,default:h.current}),m=t.useRef(s?p:null),[g,v]=(0,yq.A)({name:"useViews",state:"focusedView",controlled:l,default:m.current});t.useEffect((()=>{(u.current&&u.current!==i||d.current&&d.current.some((e=>!a.includes(e))))&&(f(a.includes(i)?i:a[0]),d.current=a,u.current=i)}),[i,f,p,a]);const y=a.indexOf(p),b=a[y-1]??null,w=a[y+1]??null,x=(0,dN.A)(((e,t)=>{v(t?e:t=>e===t?null:t),c?.(e,t)})),E=(0,dN.A)((e=>{x(e,!0),e!==p&&(f(e),r&&r(e))})),A=(0,dN.A)((()=>{w&&E(w)})),_=(0,dN.A)(((e,t,r)=>{const i="finish"===t,o=r?a.indexOf(r)<a.length-1:Boolean(w);if(n(e,i&&o?"partial":t,r),r&&r!==p){const e=a[a.indexOf(r)+1];e&&E(e)}else i&&A()}));return{view:p,setView:E,focusedView:g,setFocusedView:x,nextView:w,previousView:b,defaultView:a.includes(i)?i:a[0],goToNextView:A,setValueAndGoToNextView:_}}const Aq=["className","sx"],_q=e=>{let{props:n,propsFromPickerValue:r,additionalViewProps:i,autoFocusView:o,rendererInterceptor:a,fieldRef:s}=e;const{onChange:l,open:c,onClose:u}=r,{view:d,views:h,openTo:p,onViewChange:f,viewRenderers:m,timezone:g}=n,v=(0,Le.A)(n,Aq),{view:y,setView:b,defaultView:w,focusedView:x,setFocusedView:E,setValueAndGoToNextView:A}=Eq({view:d,views:h,openTo:p,onChange:l,onViewChange:f,autoFocus:o}),{hasUIView:_,viewModeLookup:S}=t.useMemo((()=>h.reduce(((e,t)=>{let n;return n=null!=m[t]?"UI":"field",e.viewModeLookup[t]=n,"UI"===n&&(e.hasUIView=!0),e}),{hasUIView:!1,viewModeLookup:{}})),[m,h]),T=t.useMemo((()=>h.reduce(((e,t)=>null!=m[t]&&(e=>TW.includes(e))(t)?e+1:e),0)),[m,h]),k=S[y],C=(0,dN.A)((()=>"UI"===k)),[I,R]=t.useState("UI"===k?y:null);I!==y&&"UI"===S[y]&&R(y),(0,JM.A)((()=>{"field"===k&&c&&(u(),setTimeout((()=>{s?.current?.setSelectedSections(y),s?.current?.focusField(y)})))}),[y]),(0,JM.A)((()=>{if(!c)return;let e=y;"field"===k&&null!=I&&(e=I),e!==w&&"UI"===S[e]&&"UI"===S[w]&&(e=w),e!==y&&b(e),E(e,!0)}),[c]);return{hasUIView:_,shouldRestoreFocus:C,layoutProps:{views:h,view:I,onViewChange:b},renderCurrentView:()=>{if(null==I)return null;const e=m[I];if(null==e)return null;const t=(0,De.A)({},v,i,r,{views:h,timezone:g,onChange:A,view:I,onViewChange:b,focusedView:x,onFocusedViewChange:E,showViewSwitcher:T>1,timeViewsCount:T});return a?a(m,I,t):e(t)}}},Sq=t.createContext();const Tq=()=>t.useContext(Sq)??!1;function kq(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}const Cq=(e,n)=>{const[r,i]=t.useState(kq);if((0,JM.A)((()=>{const e=()=>{i(kq())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}}),[]),o=e,a=["hours","minutes","seconds"],Array.isArray(a)?a.every((e=>-1!==o.indexOf(e))):-1!==o.indexOf(a))return!1;var o,a;return"landscape"===(n||r)};const Iq=e=>{let{props:n,valueManager:r,valueType:i,wrapperVariant:o,additionalViewProps:a,validator:s,autoFocusView:l,rendererInterceptor:c,fieldRef:u}=e;const d=xq({props:n,valueManager:r,valueType:i,wrapperVariant:o,validator:s}),h=_q({props:n,additionalViewProps:a,autoFocusView:l,fieldRef:u,propsFromPickerValue:d.viewProps,rendererInterceptor:c}),p=(e=>{let{props:t,propsFromPickerValue:n,propsFromPickerViews:r,wrapperVariant:i}=e;const{orientation:o}=t,a=Cq(r.views,o),s=Tq();return{layoutProps:(0,De.A)({},r,n,{isLandscape:a,isRtl:s,wrapperVariant:i,disabled:t.disabled,readOnly:t.readOnly})}})({props:n,wrapperVariant:o,propsFromPickerValue:d.layoutProps,propsFromPickerViews:h.layoutProps}),f=function(e){const{props:n,pickerValueResponse:r}=e;return t.useMemo((()=>({value:r.viewProps.value,open:r.open,disabled:n.disabled??!1,readOnly:n.readOnly??!1})),[r.viewProps.value,r.open,n.disabled,n.readOnly])}({props:n,pickerValueResponse:d});return{open:d.open,actions:d.actions,fieldProps:d.fieldProps,renderCurrentView:h.renderCurrentView,hasUIView:h.hasUIView,shouldRestoreFocus:h.shouldRestoreFocus,layoutProps:p.layoutProps,contextValue:d.contextValue,ownerState:f}};function Rq(e){return(0,sL.Ay)("MuiPickersLayout",e)}const Dq=(0,Ge.A)("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Lq=["onAccept","onClear","onCancel","onSetToday","actions"];function Pq(e){const{onAccept:t,onClear:n,onCancel:r,onSetToday:i,actions:o}=e,a=(0,Le.A)(e,Lq),s=gz();if(null==o||0===o.length)return null;const l=o?.map((e=>{switch(e){case"clear":return(0,Ve.jsx)(lM,{onClick:n,children:s.clearButtonLabel},e);case"cancel":return(0,Ve.jsx)(lM,{onClick:r,children:s.cancelButtonLabel},e);case"accept":return(0,Ve.jsx)(lM,{onClick:t,children:s.okButtonLabel},e);case"today":return(0,Ve.jsx)(lM,{onClick:i,children:s.todayButtonLabel},e);default:return null}}));return(0,Ve.jsx)(k$,(0,De.A)({},a,{children:l}))}const Mq=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Nq(e){return(0,sL.Ay)("MuiChip",e)}const Oq=(0,Ge.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),jq=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Fq=(0,rL.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:l}=n;return[{[`& .${Oq.avatar}`]:t.avatar},{[`& .${Oq.avatar}`]:t[`avatar${(0,iL.A)(s)}`]},{[`& .${Oq.avatar}`]:t[`avatarColor${(0,iL.A)(r)}`]},{[`& .${Oq.icon}`]:t.icon},{[`& .${Oq.icon}`]:t[`icon${(0,iL.A)(s)}`]},{[`& .${Oq.icon}`]:t[`iconColor${(0,iL.A)(i)}`]},{[`& .${Oq.deleteIcon}`]:t.deleteIcon},{[`& .${Oq.deleteIcon}`]:t[`deleteIcon${(0,iL.A)(s)}`]},{[`& .${Oq.deleteIcon}`]:t[`deleteIconColor${(0,iL.A)(r)}`]},{[`& .${Oq.deleteIcon}`]:t[`deleteIcon${(0,iL.A)(l)}Color${(0,iL.A)(r)}`]},t.root,t[`size${(0,iL.A)(s)}`],t[`color${(0,iL.A)(r)}`],o&&t.clickable,o&&"default"!==r&&t[`clickableColor${(0,iL.A)(r)})`],a&&t.deletable,a&&"default"!==r&&t[`deletableColor${(0,iL.A)(r)}`],t[l],t[`${l}${(0,iL.A)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,De.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Oq.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Oq.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},[`& .${Oq.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${Oq.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${Oq.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${Oq.icon}`]:(0,De.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,De.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),[`& .${Oq.deleteIcon}`]:(0,De.A)({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:(0,oL.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:(0,oL.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?`rgba(${t.vars.palette[n.color].contrastTextChannel} / 0.7)`:(0,oL.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{[`&.${Oq.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${Oq.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,oL.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${Oq.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${Oq.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${Oq.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Oq.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${Oq.avatar}`]:{marginLeft:4},[`& .${Oq.avatarSmall}`]:{marginLeft:2},[`& .${Oq.icon}`]:{marginLeft:4},[`& .${Oq.iconSmall}`]:{marginLeft:2},[`& .${Oq.deleteIcon}`]:{marginRight:5},[`& .${Oq.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,oL.X4)(t.palette[n.color].main,.7)}`,[`&.${Oq.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${Oq.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:(0,oL.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${Oq.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,oL.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),Uq=(0,rL.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,iL.A)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function Bq(e){return"Backspace"===e.key||"Delete"===e.key}const $q=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:m,onKeyUp:g,size:v="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:w=!1}=r,x=(0,Le.A)(r,jq),E=t.useRef(null),A=(0,XL.A)(E,n),_=e=>{e.stopPropagation(),f&&f(e)},S=!(!1===a||!p)||a,T=S||f?LP:l||"div",k=(0,De.A)({},r,{component:T,disabled:u,size:v,color:s,iconColor:t.isValidElement(d)&&d.props.color||s,onDelete:!!f,clickable:S,variant:y}),C=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled",`size${(0,iL.A)(r)}`,`color${(0,iL.A)(i)}`,s&&"clickable",s&&`clickableColor${(0,iL.A)(i)}`,a&&"deletable",a&&`deletableColor${(0,iL.A)(i)}`,`${l}${(0,iL.A)(i)}`],label:["label",`label${(0,iL.A)(r)}`],avatar:["avatar",`avatar${(0,iL.A)(r)}`,`avatarColor${(0,iL.A)(i)}`],icon:["icon",`icon${(0,iL.A)(r)}`,`iconColor${(0,iL.A)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,iL.A)(r)}`,`deleteIconColor${(0,iL.A)(i)}`,`deleteIcon${(0,iL.A)(l)}Color${(0,iL.A)(i)}`]};return(0,nL.A)(c,Nq,t)})(k),I=T===LP?(0,De.A)({component:l||"div",focusVisibleClassName:C.focusVisible},f&&{disableRipple:!0}):{};let R=null;f&&(R=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,Pe.A)(c.props.className,C.deleteIcon),onClick:_}):(0,Ve.jsx)(Mq,{className:(0,Pe.A)(C.deleteIcon),onClick:_}));let D=null;i&&t.isValidElement(i)&&(D=t.cloneElement(i,{className:(0,Pe.A)(C.avatar,i.props.className)}));let L=null;return d&&t.isValidElement(d)&&(L=t.cloneElement(d,{className:(0,Pe.A)(C.icon,d.props.className)})),(0,Ve.jsxs)(Fq,(0,De.A)({as:T,className:(0,Pe.A)(C.root,o),disabled:!(!S||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&Bq(e)&&e.preventDefault(),m&&m(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&Bq(e)?f(e):"Escape"===e.key&&E.current&&E.current.blur()),g&&g(e)},ref:A,tabIndex:w&&u?-1:b,ownerState:k},I,x,{children:[D||L,(0,Ve.jsx)(Uq,{className:(0,Pe.A)(C.label),ownerState:k,children:h}),R]}))})),Vq=$q,Wq=320,zq=["items","changeImportance","isLandscape","onChange","isValid"],Hq=["getValue"];function qq(e){const{items:t,changeImportance:n="accept",onChange:r,isValid:i}=e,o=(0,Le.A)(e,zq);if(null==t||0===t.length)return null;const a=t.map((e=>{let{getValue:t}=e,o=(0,Le.A)(e,Hq);const a=t({isValid:i});return(0,De.A)({},o,{label:o.label,onClick:()=>{r(a,n,o)},disabled:!i(a)})}));return(0,Ve.jsx)(mM,(0,De.A)({dense:!0,sx:[{maxHeight:336,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:a.map((e=>(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(Vq,(0,De.A)({},e))},e.id??e.label)))}))}const Gq=e=>{const{wrapperVariant:t,onAccept:n,onClear:r,onCancel:i,onSetToday:o,view:a,views:s,onViewChange:l,value:c,onChange:u,onSelectShortcut:d,isValid:h,isLandscape:p,disabled:f,readOnly:m,children:g,slots:v,slotProps:y}=e,b=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]};return(0,nL.A)(r,Rq,t)})(e),w=v?.actionBar??Pq,x=$P({elementType:w,externalSlotProps:y?.actionBar,additionalProps:{onAccept:n,onClear:r,onCancel:i,onSetToday:o,actions:"desktop"===t?[]:["cancel","accept"]},className:b.actionBar,ownerState:(0,De.A)({},e,{wrapperVariant:t})}),E=(0,Ve.jsx)(w,(0,De.A)({},x)),A=v?.toolbar,_=$P({elementType:A,externalSlotProps:y?.toolbar,additionalProps:{isLandscape:p,onChange:u,value:c,view:a,onViewChange:l,views:s,disabled:f,readOnly:m},className:b.toolbar,ownerState:(0,De.A)({},e,{wrapperVariant:t})}),S=function(e){return null!==e.view}(_)&&A?(0,Ve.jsx)(A,(0,De.A)({},_)):null,T=g,k=v?.tabs,C=a&&k?(0,Ve.jsx)(k,(0,De.A)({view:a,onViewChange:l,className:b.tabs},y?.tabs)):null,I=v?.shortcuts??qq,R=$P({elementType:I,externalSlotProps:y?.shortcuts,additionalProps:{isValid:h,isLandscape:p,onChange:d},className:b.shortcuts,ownerState:{isValid:h,isLandscape:p,onChange:d,wrapperVariant:t}});return{toolbar:S,content:T,tabs:C,actionBar:E,shortcuts:a&&I?(0,Ve.jsx)(I,(0,De.A)({},R)):null}},Kq=(0,rL.Ay)("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Dq.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{isLandscape:!0},style:{[`& .${Dq.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${Dq.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{isLandscape:!0,isRtl:!0},style:{[`& .${Dq.toolbar}`]:{gridColumn:3}}},{props:{isLandscape:!1},style:{[`& .${Dq.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Dq.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{isLandscape:!1,isRtl:!0},style:{[`& .${Dq.shortcuts}`]:{gridColumn:3}}}]}),Yq=(0,rL.Ay)("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),Qq=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:o,tabs:a,actionBar:s,shortcuts:l}=Gq(r),{sx:c,className:u,isLandscape:d,wrapperVariant:h}=r,p=(e=>{const{isLandscape:t,classes:n}=e,r={root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]};return(0,nL.A)(r,Rq,n)})(r);return(0,Ve.jsxs)(Kq,{ref:n,sx:c,className:(0,Pe.A)(p.root,u),ownerState:r,children:[d?l:i,d?i:l,(0,Ve.jsx)(Yq,{className:p.contentWrapper,children:"desktop"===h?(0,Ve.jsxs)(t.Fragment,{children:[o,a]}):(0,Ve.jsxs)(t.Fragment,{children:[a,o]})}),s]})})),Xq=t.createContext(null);function Zq(e){const{contextValue:t,localeText:n,children:r}=e;return(0,Ve.jsx)(Xq.Provider,{value:t,children:(0,Ve.jsx)(nz,{localeText:n,children:r})})}const Jq=["props","getOpenDialogAriaText"],eG=["ownerState"],tG=["ownerState"],nG=(0,_L.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),rG=(0,_L.A)((0,Ve.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),iG=(0,_L.A)((0,Ve.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),oG=(0,_L.A)((0,Ve.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),aG=((0,_L.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),(0,_L.A)((0,Ve.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,_L.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),(0,_L.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")),sG=(e,t,n,r)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),r).length,format:r});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return t.fieldDayPlaceholder({format:r});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return t.fieldHoursPlaceholder({format:r});case"minutes":return t.fieldMinutesPlaceholder({format:r});case"seconds":return t.fieldSecondsPlaceholder({format:r});case"meridiem":return t.fieldMeridiemPlaceholder({format:r});default:return r}},lG=e=>{let{utils:t,date:n,shouldRespectLeadingZeros:r,localeText:i,localizedDigits:o,now:a,token:s,startSeparator:l}=e;if(""===s)throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=DW(t,s),u=zW(t,c.contentType,c.type,s),d=r?u:"digit"===c.contentType,h=null!=n&&t.isValid(n);let p=h?t.formatByString(n,s):"",f=null;if(d)if(u)f=""===p?t.formatByString(a,s).length:p.length;else{if(null==c.maxLength)throw new Error(`MUI X: The token ${s} should have a 'maxDigitNumber' property on it's adapter`);f=c.maxLength,h&&(p=OW(FW(NW(p,o),f),o))}return(0,De.A)({},c,{format:s,maxLength:f,value:p,placeholder:sG(t,i,c,s),hasLeadingZerosInFormat:u,hasLeadingZerosInInput:d,startSeparator:l,endSeparator:"",modified:!1})},cG=e=>{let t=(e=>{let{utils:t,format:n}=e,r=10,i=n,o=t.expandFormat(n);for(;o!==i;)if(i=o,o=t.expandFormat(i),r-=1,r<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the picker component.");return o})(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=(e=>{let{utils:t,expandedFormat:n}=e;const r=[],{start:i,end:o}=t.escapedCharacters,a=new RegExp(`(\\${i}[^\\${o}]*\\${o})+`,"g");let s=null;for(;s=a.exec(n);)r.push({start:s.index,end:a.lastIndex-1});return r})((0,De.A)({},e,{expandedFormat:t})),r=(e=>{const{utils:t,expandedFormat:n,escapedParts:r}=e,i=t.date(void 0),o=[];let a="";const s=Object.keys(t.formatTokenMap).sort(((e,t)=>t.length-e.length)),l=/^([a-zA-Z]+)/,c=new RegExp(`^(${s.join("|")})*$`),u=new RegExp(`^(${s.join("|")})`),d=e=>r.find((t=>t.start<=e&&t.end>=e));let h=0;for(;h<n.length;){const t=d(h),r=null!=t,s=l.exec(n.slice(h))?.[1];if(!r&&null!=s&&c.test(s)){let t=s;for(;t.length>0;){const n=u.exec(t)[1];t=t.slice(n.length),o.push(lG((0,De.A)({},e,{now:i,token:n,startSeparator:a}))),a=""}h+=s.length}else{const e=n[h];r&&t?.start===h||t?.end===h||(0===o.length?a+=e:o[o.length-1].endSeparator+=e),h+=1}}return 0===o.length&&a.length>0&&o.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:a,endSeparator:"",modified:!1}),o})((0,De.A)({},e,{expandedFormat:t,escapedParts:n}));return(e=>{let{isRtl:t,formatDensity:n,sections:r}=e;return r.map((e=>{const r=e=>{let r=e;return t&&null!==r&&r.includes(" ")&&(r=`\u2069${r}\u2066`),"spacious"===n&&["/",".","-"].includes(r)&&(r=` ${r} `),r};return e.startSeparator=r(e.startSeparator),e.endSeparator=r(e.endSeparator),e}))})((0,De.A)({},e,{sections:r}))},uG=e=>{const n=lz(),r=gz(),i=sz(),o=Tq(),{valueManager:a,fieldValueManager:s,valueType:l,validator:c,internalProps:u,internalProps:{value:d,defaultValue:h,referenceDate:p,onChange:f,format:m,formatDensity:g="dense",selectedSections:v,onSelectedSectionsChange:y,shouldRespectLeadingZeros:b=!1,timezone:w,enableAccessibleFieldDOMStructure:x=!1}}=e,{timezone:E,value:A,handleValueChange:_}=bq({timezone:w,value:d,defaultValue:h,referenceDate:p,onChange:f,valueManager:a}),S=t.useMemo((()=>(e=>{const t=e.date(void 0);return"0"===e.formatByString(e.setSeconds(t,0),"s")?MW:Array.from({length:10}).map(((n,r)=>e.formatByString(e.setSeconds(t,r),"s")))})(n)),[n]),T=t.useMemo((()=>((e,t,n)=>{const r=e.date(void 0,n),i=e.endOfYear(r),o=e.endOfDay(r),{maxDaysInMonth:a,longestMonth:s}=wW(e,r).reduce(((t,n)=>{const r=e.getDaysInMonth(n);return r>t.maxDaysInMonth?{maxDaysInMonth:r,longestMonth:n}:t}),{maxDaysInMonth:0,longestMonth:null});return{year:t=>{let{format:n}=t;return{minimum:0,maximum:WW(e,n)?9999:99}},month:()=>({minimum:1,maximum:e.getMonth(i)+1}),day:t=>{let{currentDate:n}=t;return{minimum:1,maximum:null!=n&&e.isValid(n)?e.getDaysInMonth(n):a,longestMonth:s}},weekDay:t=>{let{format:n,contentType:r}=t;if("digit"===r){const t=LW(e,n).map(Number);return{minimum:Math.min(...t),maximum:Math.max(...t)}}return{minimum:1,maximum:7}},hours:n=>{let{format:i}=n;const a=e.getHours(o);return NW(e.formatByString(e.endOfDay(r),i),t)!==a.toString()?{minimum:1,maximum:Number(NW(e.formatByString(e.startOfDay(r),i),t))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:e.getMinutes(o)}),seconds:()=>({minimum:0,maximum:e.getSeconds(o)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}})(n,S,E)),[n,S,E]),k=t.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s.getSectionsFromValue(n,e,t,(e=>cG({utils:n,localeText:r,localizedDigits:S,format:m,date:e,formatDensity:g,shouldRespectLeadingZeros:b,enableAccessibleFieldDOMStructure:x,isRtl:o})))}),[s,m,r,S,o,b,n,g,x]),[C,I]=t.useState((()=>{const e=k(A);HW();const t={sections:e,value:A,referenceValue:a.emptyValue,tempValueStrAndroid:null},r=(e=>Math.max(...e.map((e=>CW[e.type]??1))))(e),i=a.getInitialReferenceValue({referenceDate:p,value:A,utils:n,props:u,granularity:r,timezone:E});return(0,De.A)({},t,{referenceValue:i})})),[R,D]=(0,yq.A)({controlled:v,default:null,name:"useField",state:"selectedSections"}),L=e=>{D(e),y?.(e)},P=t.useMemo((()=>KW(R,C.sections)),[R,C.sections]),M="all"===P?0:P,N=e=>{let{value:t,referenceValue:r,sections:o}=e;if(I((e=>(0,De.A)({},e,{sections:o,value:t,referenceValue:r,tempValueStrAndroid:null}))),a.areValuesEqual(n,C.value,t))return;const s={validationError:c({adapter:i,value:t,timezone:E,props:u})};_(t,s)},O=(e,t)=>{const n=[...C.sections];return n[e]=(0,De.A)({},n[e],{value:t,modified:!0}),n};return t.useEffect((()=>{const e=k(C.value);HW(),I((t=>(0,De.A)({},t,{sections:e})))}),[m,n.locale,o]),t.useEffect((()=>{let e;e=!a.areValuesEqual(n,C.value,A)||a.getTimezone(n,C.value)!==a.getTimezone(n,A),e&&I((e=>(0,De.A)({},e,{value:A,referenceValue:s.updateReferenceValue(n,A,e.referenceValue),sections:k(A)})))}),[A]),{state:C,activeSectionIndex:M,parsedSelectedSections:P,setSelectedSections:L,clearValue:()=>{N({value:a.emptyValue,referenceValue:C.referenceValue,sections:k(a.emptyValue)})},clearActiveSection:()=>{if(null==M)return;const e=C.sections[M],t=s.getActiveDateManager(n,C,e),r=t.getSections(C.sections).filter((e=>""!==e.value)).length===(""===e.value?0:1),i=O(M,""),o=r?null:n.getInvalidDate(),a=t.getNewValuesFromNewActiveDate(o);N((0,De.A)({},a,{sections:i}))},updateSectionValue:e=>{let{activeSection:t,newSectionValue:r,shouldGoToNextSection:i}=e;i&&M<C.sections.length-1&&L(M+1);const o=s.getActiveDateManager(n,C,t),a=O(M,r),l=o.getSections(a),c=((e,t,n)=>{const r=t.some((e=>"day"===e.type)),i=[],o=[];for(let l=0;l<t.length;l+=1){const e=t[l];r&&"weekDay"===e.type||(i.push(e.format),o.push($W(e,"non-input",n)))}const a=i.join(" "),s=o.join(" ");return e.parse(s,a)})(n,l,S);let u,d;if(null!=c&&n.isValid(c)){const e=GW(n,c,l,o.referenceDate,!0);u=o.getNewValuesFromNewActiveDate(e),d=!0}else u=o.getNewValuesFromNewActiveDate(c),d=(null!=c&&!n.isValid(c))!==(null!=o.date&&!n.isValid(o.date));return d?N((0,De.A)({},u,{sections:a})):I((e=>(0,De.A)({},e,u,{sections:a,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const t=s.parseValueStr(e,C.referenceValue,((e,t)=>{const i=n.parse(e,m);if(null==i||!n.isValid(i))return null;const a=cG({utils:n,localeText:r,localizedDigits:S,format:m,date:i,formatDensity:g,shouldRespectLeadingZeros:b,enableAccessibleFieldDOMStructure:x,isRtl:o});return GW(n,i,a,t,!1)})),i=s.updateReferenceValue(n,t,C.referenceValue);N({value:t,referenceValue:i,sections:k(t,C.sections)})},setTempAndroidValueStr:e=>I((t=>(0,De.A)({},t,{tempValueStrAndroid:e}))),getSectionsFromValue:k,sectionsValueBoundaries:T,localizedDigits:S,timezone:E}},dG=e=>null!=e.saveQuery,hG=e=>{let{sections:n,updateSectionValue:r,sectionsValueBoundaries:i,localizedDigits:o,setTempAndroidValueStr:a,timezone:s}=e;const l=lz(),[c,u]=t.useState(null),d=(0,dN.A)((()=>u(null)));t.useEffect((()=>{null!=c&&n[c.sectionIndex]?.type!==c.sectionType&&d()}),[n,c,d]),t.useEffect((()=>{if(null!=c){const e=setTimeout((()=>d()),5e3);return()=>{clearTimeout(e)}}return()=>{}}),[c,d]);const h=(e,t,r)=>{let{keyPressed:i,sectionIndex:o}=e;const a=i.toLowerCase(),s=n[o];if(null!=c&&(!r||r(c.value))&&c.sectionIndex===o){const e=`${c.value}${a}`,n=t(e,s);if(!dG(n))return u({sectionIndex:o,value:e,sectionType:s.type}),n}const l=t(a,s);return dG(l)&&!l.saveQuery?(d(),null):(u({sectionIndex:o,value:a,sectionType:s.type}),dG(l)?null:l)},p=(0,dN.A)((e=>{const t=n[e.sectionIndex],c=jW(e.keyPressed,o)?(e=>{const t=(e,t)=>{const n=NW(e,o),r=Number(n),a=i[t.type]({currentDate:null,format:t.format,contentType:t.contentType});if(r>a.maximum)return{saveQuery:!1};if(r<a.minimum)return{saveQuery:!0};const s=10*r>a.maximum||n.length===a.maximum.toString().length;return{sectionValue:UW(l,r,a,o,t),shouldGoToNextSection:s}};return h(e,((e,n)=>{if("digit"===n.contentType||"digit-with-letter"===n.contentType)return t(e,n);if("month"===n.type){const r=zW(l,"digit","month","MM"),i=t(e,{type:n.type,format:"MM",hasLeadingZerosInFormat:r,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(dG(i))return i;const o=VW(l,i.sectionValue,"MM",n.format);return(0,De.A)({},i,{sectionValue:o})}if("weekDay"===n.type){const r=t(e,n);if(dG(r))return r;const i=LW(l,n.format)[Number(r.sectionValue)-1];return(0,De.A)({},r,{sectionValue:i})}return{saveQuery:!1}}),(e=>jW(e,o)))})((0,De.A)({},e,{keyPressed:OW(e.keyPressed,o)})):(e=>{const t=(e,t,n)=>{const r=t.filter((e=>e.toLowerCase().startsWith(n)));return 0===r.length?{saveQuery:!1}:{sectionValue:r[0],shouldGoToNextSection:1===r.length}},n=(e,n,r,i)=>{const o=e=>PW(l,s,n.type,e);if("letter"===n.contentType)return t(n.format,o(n.format),e);if(r&&null!=i&&"letter"===DW(l,r).contentType){const n=o(r),a=t(0,n,e);return dG(a)?{saveQuery:!1}:(0,De.A)({},a,{sectionValue:i(a.sectionValue,n)})}return{saveQuery:!1}};return h(e,((e,t)=>{switch(t.type){case"month":{const r=e=>VW(l,e,l.formats.month,t.format);return n(e,t,l.formats.month,r)}case"weekDay":{const r=(e,t)=>t.indexOf(e).toString();return n(e,t,l.formats.weekday,r)}case"meridiem":return n(e,t);default:return{saveQuery:!1}}}))})(e);null!=c?r({activeSection:t,newSectionValue:c.sectionValue,shouldGoToNextSection:c.shouldGoToNextSection}):a(null)}));return{applyCharacterEditing:p,resetCharacterQuery:d}},pG=e=>{const{internalProps:{disabled:n,readOnly:r=!1},forwardedProps:{sectionListRef:i,onBlur:o,onClick:a,onFocus:s,onInput:l,onPaste:c,focused:u,autoFocus:d=!1},fieldValueManager:h,applyCharacterEditing:p,resetCharacterQuery:f,setSelectedSections:m,parsedSelectedSections:g,state:v,clearActiveSection:y,clearValue:b,updateSectionValue:w,updateValueFromValueStr:x,sectionOrder:E,areAllSectionsEmpty:A,sectionsValueBoundaries:_}=e,S=t.useRef(null),T=(0,kL.A)(i,S),k=gz(),C=lz(),I=(0,XO.A)(),[R,D]=t.useState(!1),L=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!S.current)return;const e=document.getSelection();if(!e)return;if(null==g)return e.rangeCount>0&&S.current.getRoot().contains(e.getRangeAt(0).startContainer)&&e.removeAllRanges(),void(R&&S.current.getRoot().blur());if(!S.current.getRoot().contains(oq(document)))return;const t=new window.Range;let n;if("all"===g)n=S.current.getRoot();else{n="empty"===v.sections[g].type?S.current.getSectionContainer(g):S.current.getSectionContent(g)}t.selectNodeContents(n),n.focus(),e.removeAllRanges(),e.addRange(t)},getActiveSectionIndexFromDOM:()=>{const e=oq(document);return e&&S.current&&S.current.getRoot().contains(e)?S.current.getSectionIndexFromDOMElement(e):null},focusField:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!S.current||null!=L.getActiveSectionIndexFromDOM())return;const t=KW(e,v.sections);D(!0),S.current.getSectionContent(t).focus()},setSelectedSections:e=>{if(!S.current)return;const t=KW(e,v.sections);D(null!==("all"===t?0:t)),m(e)},isFieldFocused:()=>{const e=oq(document);return!!S.current&&S.current.getRoot().contains(e)}})),[g,m,v.sections,R]),P=(0,dN.A)((e=>{if(!S.current)return;const t=v.sections[e];S.current.getSectionContent(e).innerHTML=t.value||t.placeholder,L.syncSelectionToDOM()})),M=(0,dN.A)((function(e){if(!e.isDefaultPrevented()&&S.current){D(!0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(a?.(e,...n),"all"===g)setTimeout((()=>{const e=document.getSelection().getRangeAt(0).startOffset;if(0===e)return void m(E.startIndex);let t=0,n=0;for(;n<e&&t<v.sections.length;){const e=v.sections[t];t+=1,n+=`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`.length}m(t-1)}));else if(R){S.current.getRoot().contains(e.target)||m(E.startIndex)}else D(!0),m(E.startIndex)}})),N=(0,dN.A)((e=>{if(l?.(e),!S.current||"all"!==g)return;const t=e.target.textContent??"";S.current.getRoot().innerHTML=v.sections.map((e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`)).join(""),L.syncSelectionToDOM(),0===t.length||10===t.charCodeAt(0)?(f(),b(),m("all")):t.length>1?x(t):("all"===g&&m(0),p({keyPressed:t,sectionIndex:0}))})),O=(0,dN.A)((e=>{if(c?.(e),r||"all"!==g)return void e.preventDefault();const t=e.clipboardData.getData("text");e.preventDefault(),f(),x(t)})),j=(0,dN.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s?.(...t),R||!S.current)return;D(!0);null!=S.current.getSectionIndexFromDOMElement(oq(document))||m(E.startIndex)})),F=(0,dN.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o?.(...t),setTimeout((()=>{if(!S.current)return;const e=oq(document);!S.current.getRoot().contains(e)&&(D(!1),m(null))}))})),U=(0,dN.A)((e=>t=>{t.isDefaultPrevented()||m(e)})),B=(0,dN.A)((e=>{e.preventDefault()})),$=(0,dN.A)((e=>()=>{m(e)})),V=(0,dN.A)((e=>{if(e.preventDefault(),r||n||"number"!==typeof g)return;const t=v.sections[g],i=e.clipboardData.getData("text"),o=/^[a-zA-Z]+$/.test(i),a=/^[0-9]+$/.test(i),s=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(i);"letter"===t.contentType&&o||"digit"===t.contentType&&a||"digit-with-letter"===t.contentType&&s?(f(),w({activeSection:t,newSectionValue:i,shouldGoToNextSection:!0})):o||a||(f(),x(i))})),W=(0,dN.A)((e=>{e.preventDefault(),e.dataTransfer.dropEffect="none"})),z=(0,dN.A)((e=>{if(!S.current)return;const t=e.target,n=t.textContent??"",i=S.current.getSectionIndexFromDOMElement(t),o=v.sections[i];if(!r&&S.current){if(0===n.length){if(""===o.value)return void P(i);const t=e.nativeEvent.inputType;return"insertParagraph"===t||"insertLineBreak"===t?void P(i):(f(),void y())}p({keyPressed:n,sectionIndex:i}),P(i)}else P(i)}));(0,JM.A)((()=>{if(R&&S.current)if("all"===g)S.current.getRoot().focus();else if("number"===typeof g){const e=S.current.getSectionContent(g);e&&e.focus()}}),[g,R]);const H=t.useMemo((()=>v.sections.reduce(((e,t)=>(e[t.type]=_[t.type]({currentDate:null,contentType:t.contentType,format:t.format}),e)),{})),[_,v.sections]),q="all"===g,G=t.useMemo((()=>v.sections.map(((e,i)=>{const o=!q&&!n&&!r;return{container:{"data-sectionindex":i,onClick:U(i)},content:{tabIndex:q||i>0?-1:0,contentEditable:!q&&!n&&!r,role:"spinbutton",id:`${I}-${e.type}`,"aria-labelledby":`${I}-${e.type}`,"aria-readonly":r,"aria-valuenow":QW(e,C),"aria-valuemin":H[e.type].minimum,"aria-valuemax":H[e.type].maximum,"aria-valuetext":e.value?YW(e,C):k.empty,"aria-label":k[e.type],"aria-disabled":n,spellCheck:!o&&void 0,autoCapitalize:o?"off":void 0,autoCorrect:o?"off":void 0,[parseInt(t.version,10)>=17?"enterKeyHint":"enterkeyhint"]:o?"next":void 0,children:e.value||e.placeholder,onInput:z,onPaste:V,onFocus:$(i),onDragOver:W,onMouseUp:B,inputMode:"letter"===e.contentType?"text":"numeric"},before:{children:e.startSeparator},after:{children:e.endSeparator}}}))),[v.sections,$,V,W,z,U,B,n,r,q,k,C,H,I]),K=(0,dN.A)((e=>{x(e.target.value)})),Y=t.useMemo((()=>A?"":h.getV7HiddenInputValueFromSections(v.sections)),[A,v.sections,h]);return t.useEffect((()=>{if(null==S.current)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please remove the `enableAccessibleFieldDOMStructure` prop from your picker or field component:","","<DatePicker slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join("\n"));d&&S.current&&S.current.getSectionContent(E.startIndex).focus()}),[]),{interactions:L,returnedValue:{autoFocus:d,readOnly:r,focused:u??R,sectionListRef:T,onBlur:F,onClick:M,onFocus:j,onInput:N,onPaste:O,enableAccessibleFieldDOMStructure:!0,elements:G,tabIndex:0===g?-1:0,contentEditable:q,value:Y,onChange:K,areAllSectionsEmpty:A}}},fG=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),mG=e=>{const n=Tq(),r=t.useRef(void 0),i=t.useRef(void 0),{forwardedProps:{onFocus:o,onClick:a,onPaste:s,onBlur:l,inputRef:c,placeholder:u},internalProps:{readOnly:d=!1,disabled:h=!1},parsedSelectedSections:p,activeSectionIndex:f,state:m,fieldValueManager:g,valueManager:v,applyCharacterEditing:y,resetCharacterQuery:b,updateSectionValue:w,updateValueFromValueStr:x,clearActiveSection:E,clearValue:A,setTempAndroidValueStr:_,setSelectedSections:S,getSectionsFromValue:T,areAllSectionsEmpty:k,localizedDigits:C}=e,I=t.useRef(null),R=(0,kL.A)(c,I),D=t.useMemo((()=>((e,t,n)=>{let r=0,i=n?1:0;const o=[];for(let a=0;a<e.length;a+=1){const s=e[a],l=$W(s,n?"input-rtl":"input-ltr",t),c=`${s.startSeparator}${l}${s.endSeparator}`,u=fG(c).length,d=c.length,h=fG(l),p=i+(""===h?0:l.indexOf(h[0]))+s.startSeparator.length,f=p+h.length;o.push((0,De.A)({},s,{start:r,end:r+u,startInInput:p,endInInput:f})),r+=u,i+=d}return o})(m.sections,C,n)),[m.sections,C,n]),L=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!I.current)return;if(null==p)return void(I.current.scrollLeft&&(I.current.scrollLeft=0));if(I.current!==oq(document))return;const e=I.current.scrollTop;if("all"===p)I.current.select();else{const e=D[p],t="empty"===e.type?e.startInInput-e.startSeparator.length:e.startInInput,n="empty"===e.type?e.endInInput+e.endSeparator.length:e.endInInput;t===I.current.selectionStart&&n===I.current.selectionEnd||I.current===oq(document)&&I.current.setSelectionRange(t,n),clearTimeout(i.current),i.current=setTimeout((()=>{!I.current||I.current!==oq(document)||I.current.selectionStart!==I.current.selectionEnd||I.current.selectionStart===t&&I.current.selectionEnd===n||L.syncSelectionToDOM()}))}I.current.scrollTop=e},getActiveSectionIndexFromDOM:()=>{const e=I.current.selectionStart??0,t=I.current.selectionEnd??0;if(0===e&&0===t)return null;const n=e<=D[0].startInInput?1:D.findIndex((t=>t.startInInput-t.startSeparator.length>e));return-1===n?D.length-1:n-1},focusField:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;oq(document)!==I.current&&(I.current?.focus(),S(e))},setSelectedSections:e=>S(e),isFieldFocused:()=>I.current===oq(document)})),[I,p,D,S]),P=()=>{const e=I.current.selectionStart??0;let t;t=e<=D[0].startInInput||e>=D[D.length-1].endInInput?1:D.findIndex((t=>t.startInInput-t.startSeparator.length>e));const n=-1===t?D.length-1:t-1;S(n)},M=(0,dN.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o?.(...t);const i=I.current;clearTimeout(r.current),r.current=setTimeout((()=>{i&&i===I.current&&null==f&&(i.value.length&&Number(i.selectionEnd)-Number(i.selectionStart)===i.value.length?S("all"):P())}))})),N=(0,dN.A)((function(e){if(!e.isDefaultPrevented()){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a?.(e,...n),P()}})),O=(0,dN.A)((e=>{if(s?.(e),e.preventDefault(),d||h)return;const t=e.clipboardData.getData("text");if("number"===typeof p){const e=m.sections[p],n=/^[a-zA-Z]+$/.test(t),r=/^[0-9]+$/.test(t),i=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(t);if("letter"===e.contentType&&n||"digit"===e.contentType&&r||"digit-with-letter"===e.contentType&&i)return b(),void w({activeSection:e,newSectionValue:t,shouldGoToNextSection:!0});if(n||r)return}b(),x(t)})),j=(0,dN.A)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l?.(...t),S(null)})),F=(0,dN.A)((e=>{if(d)return;const t=e.target.value;if(""===t)return b(),void A();const r=e.nativeEvent.data,i=r&&r.length>1,o=i?r:t,a=fG(o);if("all"===p&&S(f),null==f||i)return void x(i?r:a);let s;if("all"===p&&1===a.length)s=a;else{const e=fG(g.getV6InputValueFromSections(D,C,n));let t=-1,r=-1;for(let n=0;n<e.length;n+=1)-1===t&&e[n]!==a[n]&&(t=n),-1===r&&e[e.length-n-1]!==a[a.length-n-1]&&(r=n);const i=D[f];if(t<i.start||e.length-r-1>i.end)return;const o=a.length-e.length+i.end-fG(i.endSeparator||"").length;s=a.slice(i.start+fG(i.startSeparator||"").length,o)}if(0===s.length)return navigator.userAgent.toLowerCase().includes("android")&&_(o),b(),void E();y({keyPressed:s,sectionIndex:f})})),U=t.useMemo((()=>void 0!==u?u:g.getV6InputValueFromSections(T(v.emptyValue),C,n)),[u,g,T,v.emptyValue,C,n]),B=t.useMemo((()=>m.tempValueStrAndroid??g.getV6InputValueFromSections(m.sections,C,n)),[m.sections,g,m.tempValueStrAndroid,C,n]);t.useEffect((()=>(I.current&&I.current===oq(document)&&S("all"),()=>{clearTimeout(r.current),clearTimeout(i.current)})),[]);const $=t.useMemo((()=>null==f||"letter"===m.sections[f].contentType?"text":"numeric"),[f,m.sections]),V=I.current&&I.current===oq(document);return{interactions:L,returnedValue:{readOnly:d,onBlur:j,onClick:N,onFocus:M,onPaste:O,inputRef:R,enableAccessibleFieldDOMStructure:!1,placeholder:U,inputMode:$,autoComplete:"off",value:!V&&k?"":B,onChange:F}}},gG=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator"],vG=e=>{const n=(e=>{const t=lz(),n=cz();return(0,De.A)({},e,{disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,format:e.format??t.formats.keyboardDate,minDate:bW(t,e.minDate,n.minDate),maxDate:bW(t,e.maxDate,n.maxDate)})})(e),{forwardedProps:r,internalProps:i}=((e,n)=>t.useMemo((()=>{const t=(0,De.A)({},e),r={},i=e=>{t.hasOwnProperty(e)&&(r[e]=t[e],delete t[e])};return gG.forEach(i),"date"===n?Az.forEach(i):"time"===n?_z.forEach(i):"date-time"===n&&(Az.forEach(i),_z.forEach(i),Sz.forEach(i)),{forwardedProps:t,internalProps:r}}),[e,n]))(n,"date");return(e=>{const n=lz(),{internalProps:r,internalProps:{unstableFieldRef:i,minutesStep:o,enableAccessibleFieldDOMStructure:a=!1,disabled:s=!1,readOnly:l=!1},forwardedProps:{onKeyDown:c,error:u,clearable:d,onClear:h},fieldValueManager:p,valueManager:f,validator:m}=e,g=Tq(),v=uG(e),{state:y,activeSectionIndex:b,parsedSelectedSections:w,setSelectedSections:x,clearValue:E,clearActiveSection:A,updateSectionValue:_,setTempAndroidValueStr:S,sectionsValueBoundaries:T,localizedDigits:k,timezone:C}=v,I=hG({sections:y.sections,updateSectionValue:_,sectionsValueBoundaries:T,localizedDigits:k,setTempAndroidValueStr:S,timezone:C}),{resetCharacterQuery:R}=I,D=f.areValuesEqual(n,y.value,f.emptyValue),L=a?pG:mG,P=t.useMemo((()=>((e,t)=>{const n={};if(!t)return e.forEach(((t,r)=>{const i=0===r?null:r-1,o=r===e.length-1?null:r+1;n[r]={leftIndex:i,rightIndex:o}})),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},i={};let o=0,a=0,s=e.length-1;for(;s>=0;){a=e.findIndex(((e,t)=>t>=o&&e.endSeparator?.includes(" ")&&" / "!==e.endSeparator)),-1===a&&(a=e.length-1);for(let e=a;e>=o;e-=1)i[e]=s,r[s]=e,s-=1;o=a+1}return e.forEach(((t,o)=>{const a=i[o],s=0===a?null:r[a-1],l=a===e.length-1?null:r[a+1];n[o]={leftIndex:s,rightIndex:l}})),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}})(y.sections,g&&!a)),[y.sections,g,a]),{returnedValue:M,interactions:N}=L((0,De.A)({},e,v,I,{areAllSectionsEmpty:D,sectionOrder:P})),O=(0,dN.A)((e=>{if(c?.(e),!s)switch(!0){case(e.ctrlKey||e.metaKey)&&"A"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey:e.preventDefault(),x("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==w)x(P.startIndex);else if("all"===w)x(P.endIndex);else{const e=P.neighbors[w].rightIndex;null!==e&&x(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==w)x(P.endIndex);else if("all"===w)x(P.startIndex);else{const e=P.neighbors[w].leftIndex;null!==e&&x(e)}break;case"Delete"===e.key:if(e.preventDefault(),l)break;null==w||"all"===w?E():A(),R();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),l||null==b)break;"all"===w&&x(b);const t=y.sections[b],r=p.getActiveDateManager(n,y,t),i=BW(n,C,t,e.key,T,k,r.date,{minutesStep:o});_({activeSection:t,newSectionValue:i,shouldGoToNextSection:!1});break}}}));(0,JM.A)((()=>{N.syncSelectionToDOM()}));const{hasValidationError:j}=vq({props:r,validator:m,timezone:C,value:y.value,onError:r.onError}),F=t.useMemo((()=>void 0!==u?u:j),[j,u]);t.useEffect((()=>{F||null!=b||R()}),[y.referenceValue,b,F]),t.useEffect((()=>{null!=y.tempValueStrAndroid&&null!=b&&(R(),A())}),[y.sections]),t.useImperativeHandle(i,(()=>({getSections:()=>y.sections,getActiveSectionIndex:N.getActiveSectionIndexFromDOM,setSelectedSections:N.setSelectedSections,focusField:N.focusField,isFieldFocused:N.isFieldFocused})));const U=(0,dN.A)((function(e){e.preventDefault();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];h?.(e,...n),E(),N.isFieldFocused()?x(P.startIndex):N.focusField(0)})),B={onKeyDown:O,onClear:U,error:F,clearable:Boolean(d&&!D&&!l&&!s)},$={disabled:s,readOnly:l};return(0,De.A)({},e.forwardedProps,B,$,M)})({forwardedProps:r,internalProps:i,valueManager:ZW,fieldValueManager:JW,validator:Cz,valueType:"date"})},yG=["clearable","onClear","InputProps","sx","slots","slotProps"],bG=["ownerState"];function wG(e){return(0,sL.Ay)("MuiPickersTextField",e)}(0,Ge.A)("MuiPickersTextField",["root","focused","disabled","error","required"]);function xG(e){return(0,sL.Ay)("MuiPickersInputBase",e)}const EG=(0,Ge.A)("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input"]);function AG(e){return(0,sL.Ay)("MuiPickersOutlinedInput",e)}const _G=(0,De.A)({},EG,(0,Ge.A)("MuiPickersOutlinedInput",["root","notchedOutline","input"])),SG=["children","className","label","notched","shrink"],TG=(0,rL.Ay)("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),kG=(0,rL.Ay)("span")((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,fontSize:"inherit"}})),CG=(0,rL.Ay)("legend")((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:{withLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{withLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{withLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}}));function IG(e){const{className:t,label:n}=e,r=(0,Le.A)(e,SG),i=null!=n&&""!==n,o=(0,De.A)({},e,{withLabel:i});return(0,Ve.jsx)(TG,(0,De.A)({"aria-hidden":!0,className:t},r,{ownerState:o,children:(0,Ve.jsx)(CG,{ownerState:o,children:i?(0,Ve.jsx)(kG,{children:n}):(0,Ve.jsx)(kG,{className:"notranslate",children:"\u200b"})})}))}const RG={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function DG(e){return(0,sL.Ay)("MuiPickersSectionList",e)}const LG=(0,Ge.A)("MuiPickersSectionList",["root","section","sectionContent"]),PG=["slots","slotProps","elements","sectionListRef"],MG=(0,rL.Ay)("div",{name:"MuiPickersSectionList",slot:"Root",overridesResolver:(e,t)=>t.root})({direction:"ltr /*! @noflip */",outline:"none"}),NG=(0,rL.Ay)("span",{name:"MuiPickersSectionList",slot:"Section",overridesResolver:(e,t)=>t.section})({}),OG=(0,rL.Ay)("span",{name:"MuiPickersSectionList",slot:"SectionSeparator",overridesResolver:(e,t)=>t.sectionSeparator})({whiteSpace:"pre"}),jG=(0,rL.Ay)("span",{name:"MuiPickersSectionList",slot:"SectionContent",overridesResolver:(e,t)=>t.sectionContent})({outline:"none"});function FG(e){const{slots:t,slotProps:n,element:r,classes:i}=e,o=t?.section??NG,a=$P({elementType:o,externalSlotProps:n?.section,externalForwardedProps:r.container,className:i.section,ownerState:{}}),s=t?.sectionContent??jG,l=$P({elementType:s,externalSlotProps:n?.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:{}}),c=t?.sectionSeparator??OG,u=$P({elementType:c,externalSlotProps:n?.sectionSeparator,externalForwardedProps:r.before,ownerState:{position:"before"}}),d=$P({elementType:c,externalSlotProps:n?.sectionSeparator,externalForwardedProps:r.after,ownerState:{position:"after"}});return(0,Ve.jsxs)(o,(0,De.A)({},a,{children:[(0,Ve.jsx)(c,(0,De.A)({},u)),(0,Ve.jsx)(s,(0,De.A)({},l)),(0,Ve.jsx)(c,(0,De.A)({},d))]}))}const UG=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:o,elements:a,sectionListRef:s}=r,l=(0,Le.A)(r,PG),c=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],section:["section"],sectionContent:["sectionContent"]},DG,t)})(r),u=t.useRef(null),d=(0,kL.A)(n,u),h=e=>{if(!u.current)throw new Error(`MUI X: Cannot call sectionListRef.${e} before the mount of the component.`);return u.current};t.useImperativeHandle(s,(()=>({getRoot:()=>h("getRoot"),getSectionContainer:e=>h("getSectionContainer").querySelector(`.${LG.section}[data-sectionindex="${e}"]`),getSectionContent:e=>h("getSectionContent").querySelector(`.${LG.section}[data-sectionindex="${e}"] .${LG.sectionContent}`),getSectionIndexFromDOMElement(e){const t=h("getSectionIndexFromDOMElement");if(null==e||!t.contains(e))return null;let n=null;return e.classList.contains(LG.section)?n=e:e.classList.contains(LG.sectionContent)&&(n=e.parentElement),null==n?null:Number(n.dataset.sectionindex)}})));const p=i?.root??MG,f=$P({elementType:p,externalSlotProps:o?.root,externalForwardedProps:l,additionalProps:{ref:d,suppressContentEditableWarning:!0},className:c.root,ownerState:{}});return(0,Ve.jsx)(p,(0,De.A)({},f,{children:f.contentEditable?a.map((e=>{let{content:t,before:n,after:r}=e;return`${n.children}${t.children}${r.children}`})).join(""):(0,Ve.jsx)(t.Fragment,{children:a.map(((e,t)=>(0,Ve.jsx)(FG,{slots:i,slotProps:o,element:e,classes:c},t)))})}))})),BG=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef"],$G=(0,rL.Ay)("div",{name:"MuiPickersInputBase",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:(n=.15/16,Math.round(1e5*n)/1e5)+"em",variants:[{props:{fullWidth:!0},style:{width:"100%"}}]});var n})),VG=(0,rL.Ay)(MG,{name:"MuiPickersInputBase",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})((e=>{let{theme:t}=e;return{padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{isRtl:!0},style:{textAlign:"right /*! @noflip */"}},{props:{size:"small"},style:{paddingTop:1}},{props:{adornedStart:!1,focused:!1,filled:!1},style:{color:"currentColor",opacity:0}},{props:e=>{let{adornedStart:t,focused:n,filled:r,label:i}=e;return!t&&!n&&!r&&null==i},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:"light"===t.palette.mode?.42:.5}}]}})),WG=(0,rL.Ay)(NG,{name:"MuiPickersInputBase",slot:"Section",overridesResolver:(e,t)=>t.section})((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"}})),zG=(0,rL.Ay)(jG,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"}})),HG=(0,rL.Ay)(OG,{name:"MuiPickersInputBase",slot:"Separator",overridesResolver:(e,t)=>t.separator})((()=>({whiteSpace:"pre",letterSpacing:"inherit"}))),qG=(0,rL.Ay)("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})((0,De.A)({},RG)),GG=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:o,value:a,onChange:s,id:l,endAdornment:c,startAdornment:u,renderSuffix:d,slots:h,slotProps:p,contentEditable:f,tabIndex:m,onInput:g,onPaste:v,onKeyDown:y,name:b,readOnly:w,inputProps:x,inputRef:E,sectionListRef:A}=r,_=(0,Le.A)(r,BG),S=t.useRef(null),T=(0,kL.A)(n,S),k=(0,kL.A)(x?.ref,E),C=Tq(),I=bj();if(!I)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");t.useEffect((()=>{I&&I.setAdornedStart(Boolean(u))}),[I,u]),t.useEffect((()=>{I&&(o?I.onEmpty():I.onFilled())}),[I,o]);const R=(0,De.A)({},r,I,{isRtl:C}),D=(e=>{const{focused:t,disabled:n,error:r,classes:i,fullWidth:o,readOnly:a,color:s,size:l,endAdornment:c,startAdornment:u}=e,d={root:["root",t&&!n&&"focused",n&&"disabled",a&&"readOnly",r&&"error",o&&"fullWidth",`color${(0,TU.A)(s)}`,"small"===l&&"inputSizeSmall",Boolean(u)&&"adornedStart",Boolean(c)&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"]};return(0,nL.A)(d,xG,i)})(R),L=h?.root||$G,P=$P({elementType:L,externalSlotProps:p?.root,externalForwardedProps:_,additionalProps:{"aria-invalid":I.error,ref:T},className:D.root,ownerState:R}),M=h?.input||VG;return(0,Ve.jsxs)(L,(0,De.A)({},P,{children:[u,(0,Ve.jsx)(UG,{sectionListRef:A,elements:i,contentEditable:f,tabIndex:m,className:D.sectionsContainer,onFocus:e=>{I.disabled?e.stopPropagation():I.onFocus?.(e)},onBlur:I.onBlur,onInput:g,onPaste:v,onKeyDown:y,slots:{root:M,section:WG,sectionContent:zG,sectionSeparator:HG},slotProps:{root:{ownerState:R},sectionContent:{className:EG.sectionContent},sectionSeparator:e=>{let{position:t}=e;return{className:"before"===t?EG.sectionBefore:EG.sectionAfter}}}}),c,d?d((0,De.A)({},I)):null,(0,Ve.jsx)(qG,(0,De.A)({name:b,className:D.input,value:a,onChange:s,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:w,required:I.required,disabled:I.disabled},x,{ref:k}))]}))})),KG=["label","autoFocus","ownerState","notched"],YG=(0,rL.Ay)($G,{name:"MuiPickersOutlinedInput",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${_G.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${_G.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${_G.focused} .${_G.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${_G.disabled}`]:{[`& .${_G.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${_G.error} .${_G.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e]?.main??!1)).map((e=>({props:{color:e},style:{[`&.${_G.focused}:not(.${_G.error}) .${_G.notchedOutline}`]:{borderColor:(t.vars||t).palette[e].main}}})))}})),QG=(0,rL.Ay)(VG,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({padding:"16.5px 0",variants:[{props:{size:"small"},style:{padding:"8.5px 0"}}]}),XG=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersOutlinedInput"}),{label:i,ownerState:o,notched:a}=r,s=(0,Le.A)(r,KG),l=bj(),c=(0,De.A)({},r,o,l,{color:l?.color||"primary"}),u=(e=>{const{classes:t}=e,n=(0,nL.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},AG,t);return(0,De.A)({},t,n)})(c);return(0,Ve.jsx)(GG,(0,De.A)({slots:{root:YG,input:QG},renderSuffix:e=>(0,Ve.jsx)(IG,{shrink:Boolean(a||e.adornedStart||e.focused||e.filled),notched:Boolean(a||e.adornedStart||e.focused||e.filled),className:u.notchedOutline,label:null!=i&&""!==i&&l?.required?(0,Ve.jsxs)(t.Fragment,{children:[i,"\u2009","*"]}):i,ownerState:c})},s,{label:i,classes:u,ref:n}))}));XG.muiName="Input";var ZG=n(6879);function JG(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eK(e){if(t.isValidElement(e)||(0,ZG.Hy)(e)||!JG(e))return e;const n={};return Object.keys(e).forEach((t=>{n[t]=eK(e[t])})),n}function tK(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?{...e}:e;return JG(e)&&JG(n)&&Object.keys(n).forEach((o=>{t.isValidElement(n[o])||(0,ZG.Hy)(n[o])?i[o]=n[o]:JG(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&JG(e[o])?i[o]=tK(e[o],n[o],r):r.clone?i[o]=JG(n[o])?eK(n[o]):n[o]:i[o]=n[o]})),i}function nK(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),a=Object.keys(o);function s(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=a.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[a[o]]?t[a[o]]:i)-r/100}${n})`}return{keys:a,values:o,up:s,down:l,between:c,only:function(e){return a.indexOf(e)+1<a.length?c(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):c(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const rK={borderRadius:4},iK={xs:0,sm:600,md:900,lg:1200,xl:1536},oK={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${iK[e]}px)`},aK={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:iK[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function sK(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||oK;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||oK;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:aK,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||iK).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function lK(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function cK(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function uK(e){if("string"!==typeof e)throw new Error(function(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}(7));return e.charAt(0).toUpperCase()+e.slice(1)}function dK(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function hK(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:dK(e,n)||i,t&&(r=t(r,i,e)),r}const pK=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=dK(e.theme,r)||{};return sK(e,o,(e=>{let r=hK(a,i,e);return e===r&&"string"===typeof e&&(r=hK(a,i,`${t}${"default"===e?"":uK(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const fK=function(e,t){return t?tK(e,t,{clone:!1}):e};const mK={m:"margin",p:"padding"},gK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},vK={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},yK=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!vK[e])return[e];e=vK[e]}const[t,n]=e.split(""),r=mK[t],i=gK[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),bK=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wK=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],xK=[...bK,...wK];function EK(e,t,n,r){const i=dK(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?i.startsWith("var(")&&0===e?0:i.startsWith("var(")&&1===e?i:`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?`calc(-1 * ${n})`:`-${n}`}:"function"===typeof i?i:()=>{}}function AK(e){return EK(e,"spacing",8)}function _K(e,t){return"string"===typeof t||null==t?t:e(t)}function SK(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=_K(t,n),e)),{})}(yK(n),r);return sK(e,e[n],i)}function TK(e,t){const n=AK(e.theme);return Object.keys(e).map((r=>SK(e,t,r,n))).reduce(fK,{})}function kK(e){return TK(e,bK)}function CK(e){return TK(e,wK)}function IK(e){return TK(e,xK)}kK.propTypes={},kK.filterProps=bK,CK.propTypes={},CK.filterProps=wK,IK.propTypes={},IK.filterProps=xK;const RK=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?fK(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function DK(e){return"number"!==typeof e?e:`${e}px solid`}function LK(e,t){return pK({prop:e,themeKey:"borders",transform:t})}const PK=LK("border",DK),MK=LK("borderTop",DK),NK=LK("borderRight",DK),OK=LK("borderBottom",DK),jK=LK("borderLeft",DK),FK=LK("borderColor"),UK=LK("borderTopColor"),BK=LK("borderRightColor"),$K=LK("borderBottomColor"),VK=LK("borderLeftColor"),WK=LK("outline",DK),zK=LK("outlineColor"),HK=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=EK(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:_K(t,e)});return sK(e,e.borderRadius,n)}return null};HK.propTypes={},HK.filterProps=["borderRadius"];RK(PK,MK,NK,OK,jK,FK,UK,BK,$K,VK,HK,WK,zK);const qK=e=>{if(void 0!==e.gap&&null!==e.gap){const t=EK(e.theme,"spacing",8),n=e=>({gap:_K(t,e)});return sK(e,e.gap,n)}return null};qK.propTypes={},qK.filterProps=["gap"];const GK=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=EK(e.theme,"spacing",8),n=e=>({columnGap:_K(t,e)});return sK(e,e.columnGap,n)}return null};GK.propTypes={},GK.filterProps=["columnGap"];const KK=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=EK(e.theme,"spacing",8),n=e=>({rowGap:_K(t,e)});return sK(e,e.rowGap,n)}return null};KK.propTypes={},KK.filterProps=["rowGap"];RK(qK,GK,KK,pK({prop:"gridColumn"}),pK({prop:"gridRow"}),pK({prop:"gridAutoFlow"}),pK({prop:"gridAutoColumns"}),pK({prop:"gridAutoRows"}),pK({prop:"gridTemplateColumns"}),pK({prop:"gridTemplateRows"}),pK({prop:"gridTemplateAreas"}),pK({prop:"gridArea"}));function YK(e,t){return"grey"===t?t:e}RK(pK({prop:"color",themeKey:"palette",transform:YK}),pK({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:YK}),pK({prop:"backgroundColor",themeKey:"palette",transform:YK}));function QK(e){return e<=1&&0!==e?100*e+"%":e}const XK=pK({prop:"width",transform:QK}),ZK=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||iK[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:QK(t)}};return sK(e,e.maxWidth,t)}return null};ZK.filterProps=["maxWidth"];const JK=pK({prop:"minWidth",transform:QK}),eY=pK({prop:"height",transform:QK}),tY=pK({prop:"maxHeight",transform:QK}),nY=pK({prop:"minHeight",transform:QK}),rY=(pK({prop:"size",cssProperty:"width",transform:QK}),pK({prop:"size",cssProperty:"height",transform:QK}),RK(XK,ZK,JK,eY,tY,nY,pK({prop:"boxSizing"})),{border:{themeKey:"borders",transform:DK},borderTop:{themeKey:"borders",transform:DK},borderRight:{themeKey:"borders",transform:DK},borderBottom:{themeKey:"borders",transform:DK},borderLeft:{themeKey:"borders",transform:DK},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:DK},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:HK},color:{themeKey:"palette",transform:YK},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:YK},backgroundColor:{themeKey:"palette",transform:YK},p:{style:CK},pt:{style:CK},pr:{style:CK},pb:{style:CK},pl:{style:CK},px:{style:CK},py:{style:CK},padding:{style:CK},paddingTop:{style:CK},paddingRight:{style:CK},paddingBottom:{style:CK},paddingLeft:{style:CK},paddingX:{style:CK},paddingY:{style:CK},paddingInline:{style:CK},paddingInlineStart:{style:CK},paddingInlineEnd:{style:CK},paddingBlock:{style:CK},paddingBlockStart:{style:CK},paddingBlockEnd:{style:CK},m:{style:kK},mt:{style:kK},mr:{style:kK},mb:{style:kK},ml:{style:kK},mx:{style:kK},my:{style:kK},margin:{style:kK},marginTop:{style:kK},marginRight:{style:kK},marginBottom:{style:kK},marginLeft:{style:kK},marginX:{style:kK},marginY:{style:kK},marginInline:{style:kK},marginInlineStart:{style:kK},marginInlineEnd:{style:kK},marginBlock:{style:kK},marginBlockStart:{style:kK},marginBlockEnd:{style:kK},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:qK},rowGap:{style:KK},columnGap:{style:GK},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:QK},maxWidth:{style:ZK},minWidth:{transform:QK},height:{transform:QK},maxHeight:{transform:QK},minHeight:{transform:QK},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const iY=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:c}=o;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const u=dK(n,s)||{};if(c)return c(i);return sK(i,t,(t=>{let n=hK(u,l,t);return t===n&&"string"===typeof t&&(n=hK(u,l,`${e}${"default"===t?"":uK(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??rY;function a(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const a=lK(i.breakpoints),s=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=(s=r[n],c=i,"function"===typeof s?s(c):s);var s,c;if(null!==a&&void 0!==a)if("object"===typeof a)if(o[n])l=fK(l,e(n,a,i,o));else{const e=sK({theme:i},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?l=fK(l,e):l[n]=t({sx:a,theme:i})}else l=fK(l,e(n,a,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,cK(s,l))}return Array.isArray(r)?r.map(a):a(r)}}();iY.filterProps=["sx"];const oY=iY;function aY(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const sY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e,a=nK(t),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AK({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(r);let l=tK({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:s,shape:{...rK,...i}},o);l=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(l),l.applyStyles=aY;for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];return l=u.reduce(((e,t)=>tK(e,t)),l),l.unstable_sxConfig={...rY,...o?.unstable_sxConfig},l.unstable_sx=function(e){return oY({sx:e,theme:this})},l};sY();function lY(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function cY(e){return(0,sL.Ay)("MuiPickersFilledInput",e)}const uY=(0,De.A)({},EG,(0,Ge.A)("MuiPickersFilledInput",["root","underline","input"])),dY=["label","autoFocus","disableUnderline","ownerState"],hY=(0,rL.Ay)($G,{name:"MuiPickersFilledInput",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>lY(e)&&"disableUnderline"!==e})((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${uY.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${uY.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e].main)).map((e=>({props:{color:e,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e]?.main}`}}}))),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${uY.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${uY.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${uY.disabled}, .${uY.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${uY.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:e=>{let{startAdornment:t}=e;return!!t},style:{paddingLeft:12}},{props:e=>{let{endAdornment:t}=e;return!!t},style:{paddingRight:12}}]}})),pY=(0,rL.Ay)(VG,{name:"MuiPickersFilledInput",slot:"sectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{startAdornment:t}=e;return!!t},style:{paddingLeft:0}},{props:e=>{let{endAdornment:t}=e;return!!t},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,size:"small"},style:{paddingTop:8,paddingBottom:9}}]}),fY=t.forwardRef((function(e,t){const n=hW({props:e,name:"MuiPickersFilledInput"}),{label:r,disableUnderline:i=!1,ownerState:o}=n,a=(0,Le.A)(n,dY),s=bj(),l=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,nL.A)(r,cY,t);return(0,De.A)({},t,i)})((0,De.A)({},n,o,s,{color:s?.color||"primary"}));return(0,Ve.jsx)(GG,(0,De.A)({slots:{root:hY,input:pY},slotProps:{root:{disableUnderline:i}}},a,{label:r,classes:l,ref:t}))}));function mY(e){return(0,sL.Ay)("MuiPickersFilledInput",e)}fY.muiName="Input";const gY=(0,De.A)({},EG,(0,Ge.A)("MuiPickersInput",["root","input"])),vY=["label","autoFocus","disableUnderline","ownerState"],yY=(0,rL.Ay)($G,{name:"MuiPickersInput",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter((e=>(t.vars??t).palette[e].main)).map((e=>({props:{color:e},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e].main}`}}}))),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${gY.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${gY.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${gY.disabled}, .${gY.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${gY.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}})),bY=t.forwardRef((function(e,t){const n=hW({props:e,name:"MuiPickersInput"}),{label:r,disableUnderline:i=!1,ownerState:o}=n,a=(0,Le.A)(n,vY),s=bj(),l=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,nL.A)(r,mY,t);return(0,De.A)({},t,i)})((0,De.A)({},n,o,s,{disableUnderline:i,color:s?.color||"primary"}));return(0,Ve.jsx)(GG,(0,De.A)({slots:{root:yY}},a,{label:r,classes:l,ref:t}))}));bY.muiName="Input";const wY=["onFocus","onBlur","className","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps"],xY={standard:bY,filled:fY,outlined:XG},EY=(0,rL.Ay)(wF,{name:"MuiPickersTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),AY=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:o,className:a,color:s="primary",disabled:l=!1,error:c=!1,variant:u="outlined",required:d=!1,InputProps:h,inputProps:p,inputRef:f,sectionListRef:m,elements:g,areAllSectionsEmpty:v,onClick:y,onKeyDown:b,onKeyUp:w,onPaste:x,onInput:E,endAdornment:A,startAdornment:_,tabIndex:S,contentEditable:T,focused:k,value:C,onChange:I,fullWidth:R,id:D,name:L,helperText:P,FormHelperTextProps:M,label:N,InputLabelProps:O}=r,j=(0,Le.A)(r,wY),F=t.useRef(null),U=(0,kL.A)(n,F),B=(0,XO.A)(D),$=P&&B?`${B}-helper-text`:void 0,V=N&&B?`${B}-label`:void 0,W=(0,De.A)({},r,{color:s,disabled:l,error:c,focused:k,required:d,variant:u}),z=(e=>{const{focused:t,disabled:n,classes:r,required:i}=e,o={root:["root",t&&!n&&"focused",n&&"disabled",i&&"required"]};return(0,nL.A)(o,wG,r)})(W),H=xY[u];return(0,Ve.jsxs)(EY,(0,De.A)({className:(0,Pe.A)(z.root,a),ref:U,focused:k,onFocus:i,onBlur:o,disabled:l,variant:u,error:c,color:s,fullWidth:R,required:d,ownerState:W},j,{children:[(0,Ve.jsx)(mF,(0,De.A)({htmlFor:B,id:V},O,{children:N})),(0,Ve.jsx)(H,(0,De.A)({elements:g,areAllSectionsEmpty:v,onClick:y,onKeyDown:b,onKeyUp:w,onInput:E,onPaste:x,endAdornment:A,startAdornment:_,tabIndex:S,contentEditable:T,value:C,onChange:I,id:B,fullWidth:R,inputProps:p,inputRef:f,sectionListRef:m,label:N,name:L,role:"group","aria-labelledby":V,"aria-describedby":$,"aria-live":$?"polite":void 0},h)),P&&(0,Ve.jsx)(kF,(0,De.A)({id:$},M,{children:P}))]}))})),_Y=["enableAccessibleFieldDOMStructure"],SY=["InputProps","readOnly"],TY=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef"],kY=["slots","slotProps","InputProps","inputProps"],CY=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiDateField"}),{slots:i,slotProps:o,InputProps:a,inputProps:s}=r,l=(0,Le.A)(r,kY),c=r,u=i?.textField??(e.enableAccessibleFieldDOMStructure?AY:uU),d=$P({elementType:u,externalSlotProps:o?.textField,externalForwardedProps:l,additionalProps:{ref:n},ownerState:c});d.inputProps=(0,De.A)({},s,d.inputProps),d.InputProps=(0,De.A)({},a,d.InputProps);const h=(e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=(0,Le.A)(e,_Y);if(t){const{InputProps:e,readOnly:t}=n,r=(0,Le.A)(n,SY);return(0,De.A)({},r,{InputProps:(0,De.A)({},e??{},{readOnly:t})})}const{onPaste:r,onKeyDown:i,inputMode:o,readOnly:a,InputProps:s,inputProps:l,inputRef:c}=n,u=(0,Le.A)(n,TY);return(0,De.A)({},u,{InputProps:(0,De.A)({},s??{},{readOnly:a}),inputProps:(0,De.A)({},l??{},{inputMode:o,onPaste:r,onKeyDown:i,ref:c})})})(vG(d)),p=(e=>{const n=gz(),{clearable:r,onClear:i,InputProps:o,sx:a,slots:s,slotProps:l}=e,c=(0,Le.A)(e,yG),u=s?.clearButton??FP,d=$P({elementType:u,externalSlotProps:l?.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:n.fieldClearLabel}}),h=(0,Le.A)(d,bG),p=s?.clearIcon??aG,f=$P({elementType:p,externalSlotProps:l?.clearIcon,ownerState:{}});return(0,De.A)({},c,{InputProps:(0,De.A)({},o,{endAdornment:(0,Ve.jsxs)(t.Fragment,{children:[r&&(0,Ve.jsx)(sW,{position:"end",sx:{marginRight:o?.endAdornment?-1:-1.5},children:(0,Ve.jsx)(u,(0,De.A)({},h,{onClick:i,children:(0,Ve.jsx)(p,(0,De.A)({fontSize:"small"},f))}))}),o?.endAdornment]})}),sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(a)?a:[a]]})})((0,De.A)({},h,{slots:i,slotProps:o}));return(0,Ve.jsx)(u,(0,De.A)({},p))})),IY=e=>{let{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:o,maxDate:a,disableFuture:s,disablePast:l,timezone:c}=e;const u=sz();return t.useCallback((e=>null!==Cz({adapter:u,value:e,timezone:c,props:{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:o,maxDate:a,disableFuture:s,disablePast:l}})),[u,n,r,i,o,a,s,l,c])},RY=e=>{const{value:n,referenceDate:r,disableFuture:i,disablePast:o,disableSwitchToMonthOnDayFocus:a=!1,maxDate:s,minDate:l,onMonthChange:c,reduceAnimations:u,shouldDisableDate:d,timezone:h}=e,p=lz(),f=t.useRef(((e,t,n)=>(r,i)=>{switch(i.type){case"changeMonth":return(0,De.A)({},r,{slideDirection:i.direction,currentMonth:i.newMonth,isMonthSwitchingAnimating:!e});case"changeMonthTimezone":{const e=i.newTimezone;if(n.getTimezone(r.currentMonth)===e)return r;let t=n.setTimezone(r.currentMonth,e);return n.getMonth(t)!==n.getMonth(r.currentMonth)&&(t=n.setMonth(t,n.getMonth(r.currentMonth))),(0,De.A)({},r,{currentMonth:t})}case"finishMonthSwitchingAnimation":return(0,De.A)({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(null!=r.focusedDay&&null!=i.focusedDay&&n.isSameDay(i.focusedDay,r.focusedDay))return r;const o=null!=i.focusedDay&&!t&&!n.isSameMonth(r.currentMonth,i.focusedDay);return(0,De.A)({},r,{focusedDay:i.focusedDay,isMonthSwitchingAnimating:o&&!e&&!i.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(i.focusedDay):r.currentMonth,slideDirection:null!=i.focusedDay&&n.isAfterDay(i.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}})(Boolean(u),a,p)).current,m=t.useMemo((()=>ZW.getInitialReferenceValue({value:n,utils:p,timezone:h,props:e,referenceDate:r,granularity:CW.day})),[r,h]),[g,v]=t.useReducer(f,{isMonthSwitchingAnimating:!1,focusedDay:m,currentMonth:p.startOfMonth(m),slideDirection:"left"});t.useEffect((()=>{v({type:"changeMonthTimezone",newTimezone:p.getTimezone(m)})}),[m,p]);const y=t.useCallback((e=>{v((0,De.A)({type:"changeMonth"},e)),c&&c(e.newMonth)}),[c]),b=t.useCallback((e=>{const t=e;p.isSameMonth(t,g.currentMonth)||y({newMonth:p.startOfMonth(t),direction:p.isAfterDay(t,g.currentMonth)?"left":"right"})}),[g.currentMonth,y,p]),w=IY({shouldDisableDate:d,minDate:l,maxDate:s,disableFuture:i,disablePast:o,timezone:h}),x=t.useCallback((()=>{v({type:"finishMonthSwitchingAnimation"})}),[]),E=(0,dN.A)(((e,t)=>{w(e)||v({type:"changeFocusedDay",focusedDay:e,withoutMonthSwitchingAnimation:t})}));return{referenceDate:m,calendarState:g,changeMonth:b,changeFocusedDay:E,isDateDisabled:w,onMonthSwitchingAnimationEnd:x,handleChangeMonth:y}},DY=e=>(0,sL.Ay)("MuiPickersFadeTransitionGroup",e),LY=((0,Ge.A)("MuiPickersFadeTransitionGroup",["root"]),(0,rL.Ay)(cP,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"}));function PY(e){const t=hW({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:r,reduceAnimations:i,transKey:o}=t,a=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},DY,t)})(t),s=UM();return i?n:(0,Ve.jsx)(LY,{className:(0,Pe.A)(a.root,r),children:(0,Ve.jsx)(oN,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:s.transitions.duration.enteringScreen,enter:s.transitions.duration.enteringScreen,exit:0},children:n},o)})}function MY(e){return(0,sL.Ay)("MuiPickersDay",e)}const NY=(0,Ge.A)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),OY=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],jY=e=>{let{theme:t}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:IB(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:IB(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${NY.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${NY.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${NY.disabled}:not(.${NY.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${NY.disabled}&.${NY.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:"0 2px"}},{props:{outsideCurrentMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,today:!0},style:{[`&:not(.${NY.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]})},FY=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},UY=(0,rL.Ay)(LP,{name:"MuiPickersDay",slot:"Root",overridesResolver:FY})(jY),BY=(0,rL.Ay)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:FY})((e=>{let{theme:t}=e;return(0,De.A)({},jY({theme:t}),{opacity:0,pointerEvents:"none"})})),$Y=()=>{},VY=t.forwardRef((function(e,n){const r=hW({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:o,day:a,disabled:s=!1,disableHighlightToday:l=!1,disableMargin:c=!1,isAnimating:u,onClick:d,onDaySelect:h,onFocus:p=$Y,onBlur:f=$Y,onKeyDown:m=$Y,onMouseDown:g=$Y,onMouseEnter:v=$Y,outsideCurrentMonth:y,selected:b=!1,showDaysOutsideCurrentMonth:w=!1,children:x,today:E=!1}=r,A=(0,Le.A)(r,OY),_=(0,De.A)({},r,{autoFocus:i,disabled:s,disableHighlightToday:l,disableMargin:c,selected:b,showDaysOutsideCurrentMonth:w,today:E}),S=(e=>{const{selected:t,disableMargin:n,disableHighlightToday:r,today:i,disabled:o,outsideCurrentMonth:a,showDaysOutsideCurrentMonth:s,classes:l}=e,c=a&&!s,u={root:["root",t&&!c&&"selected",o&&"disabled",!n&&"dayWithMargin",!r&&i&&"today",a&&s&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return(0,nL.A)(u,MY,l)})(_),T=lz(),k=t.useRef(null),C=(0,kL.A)(k,n);(0,JM.A)((()=>{!i||s||u||y||k.current.focus()}),[i,s,u,y]);return y&&!w?(0,Ve.jsx)(BY,{className:(0,Pe.A)(S.root,S.hiddenDaySpacingFiller,o),ownerState:_,role:A.role}):(0,Ve.jsx)(UY,(0,De.A)({className:(0,Pe.A)(S.root,o),ref:C,centerRipple:!0,disabled:s,tabIndex:b?0:-1,onKeyDown:e=>m(e,a),onFocus:e=>p(e,a),onBlur:e=>f(e,a),onMouseEnter:e=>v(e,a),onClick:e=>{s||h(a),y&&e.currentTarget.focus(),d&&d(e)},onMouseDown:e=>{g(e),y&&e.preventDefault()}},A,{ownerState:_,children:x||T.format(a,"dayOfMonth")}))})),WY=t.memo(VY);function zY(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var HY=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=zY(n.className,r):n.setAttribute("class",zY(n.className&&n.className.baseVal||"",r)));var n,r}))},qY=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}nP(n,e);var r=n.prototype;return r.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&RM(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},r.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&HY(e,r),i&&HY(e,i),o&&HY(e,o)},r.render=function(){var e=this.props,n=(e.classNames,(0,Le.A)(e,["classNames"]));return t.createElement(FM,(0,De.A)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(t.Component);qY.defaultProps={classNames:""},qY.propTypes={};const GY=qY,KY=e=>(0,sL.Ay)("MuiPickersSlideTransition",e),YY=(0,Ge.A)("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),QY=["children","className","reduceAnimations","slideDirection","transKey","classes"],XY=(0,rL.Ay)(cP,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${YY["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${YY["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${YY.slideEnterActive}`]:t.slideEnterActive},{[`.${YY.slideExit}`]:t.slideExit},{[`.${YY["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${YY["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})((e=>{let{theme:t}=e;const n=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${YY["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${YY["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${YY.slideEnterActive}`]:{transform:"translate(0%)",transition:n},[`& .${YY.slideExit}`]:{transform:"translate(0%)"},[`& .${YY["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:n,zIndex:0},[`& .${YY["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:n,zIndex:0}}}));const ZY=e=>(0,sL.Ay)("MuiDayCalendar",e),JY=((0,Ge.A)("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]),["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"]),eQ=["ownerState"],tQ=(0,rL.Ay)("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nQ=(0,rL.Ay)("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),rQ=(0,rL.Ay)(QL,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary}})),iQ=(0,rL.Ay)(QL,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled}})),oQ=(0,rL.Ay)(QL,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,padding:0,margin:"0 2px",color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})})),aQ=(0,rL.Ay)("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),sQ=(0,rL.Ay)((function(e){const n=hW({props:e,name:"MuiPickersSlideTransition"}),{children:r,className:i,reduceAnimations:o,transKey:a}=n,s=(0,Le.A)(n,QY),l=(e=>{const{classes:t,slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return(0,nL.A)(r,KY,t)})(n),c=UM();if(o)return(0,Ve.jsx)("div",{className:(0,Pe.A)(l.root,i),children:r});const u={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return(0,Ve.jsx)(XY,{className:(0,Pe.A)(l.root,i),childFactory:e=>t.cloneElement(e,{classNames:u}),role:"presentation",children:(0,Ve.jsx)(GY,(0,De.A)({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:u},s,{children:r}),a)})}),{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:240}),lQ=(0,rL.Ay)("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),cQ=(0,rL.Ay)("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"});function uQ(e){let{parentProps:n,day:r,focusableDay:i,selectedDays:o,isDateDisabled:a,currentMonthNumber:s,isViewFocused:l}=e,c=(0,Le.A)(e,JY);const{disabled:u,disableHighlightToday:d,isMonthSwitchingAnimating:h,showDaysOutsideCurrentMonth:p,slots:f,slotProps:m,timezone:g}=n,v=lz(),y=uz(g),b=null!==i&&v.isSameDay(r,i),w=o.some((e=>v.isSameDay(e,r))),x=v.isSameDay(r,y),E=f?.day??WY,A=$P({elementType:E,externalSlotProps:m?.day,additionalProps:(0,De.A)({disableHighlightToday:d,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:h,"data-timestamp":v.toJsDate(r).valueOf()},c),ownerState:(0,De.A)({},n,{day:r,selected:w})}),_=(0,Le.A)(A,eQ),S=t.useMemo((()=>u||a(r)),[u,a,r]),T=t.useMemo((()=>v.getMonth(r)!==s),[v,r,s]),k=t.useMemo((()=>{const e=v.startOfMonth(v.setMonth(r,s));return p?v.isSameDay(r,v.startOfWeek(e)):v.isSameDay(r,e)}),[s,r,p,v]),C=t.useMemo((()=>{const e=v.endOfMonth(v.setMonth(r,s));return p?v.isSameDay(r,v.endOfWeek(e)):v.isSameDay(r,e)}),[s,r,p,v]);return(0,Ve.jsx)(E,(0,De.A)({},_,{day:r,disabled:S,autoFocus:l&&b,today:x,outsideCurrentMonth:T,isFirstVisibleCell:k,isLastVisibleCell:C,selected:w,tabIndex:b?0:-1,"aria-selected":w,"aria-current":x?"date":void 0}))}function dQ(e){const n=hW({props:e,name:"MuiDayCalendar"}),r=lz(),{onFocusedDayChange:i,className:o,currentMonth:a,selectedDays:s,focusedDay:l,loading:c,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:d,readOnly:h,reduceAnimations:p,renderLoading:f=()=>(0,Ve.jsx)("span",{children:"..."}),slideDirection:m,TransitionProps:g,disablePast:v,disableFuture:y,minDate:b,maxDate:w,shouldDisableDate:x,shouldDisableMonth:E,shouldDisableYear:A,dayOfWeekFormatter:_=e=>r.format(e,"weekdayShort").charAt(0).toUpperCase(),hasFocus:S,onFocusedViewChange:T,gridLabelId:k,displayWeekNumber:C,fixedWeekNumber:I,autoFocus:R,timezone:D}=n,L=uz(D),P=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ZY,t)})(n),M=Tq(),N=IY({shouldDisableDate:x,shouldDisableMonth:E,shouldDisableYear:A,minDate:b,maxDate:w,disablePast:v,disableFuture:y,timezone:D}),O=gz(),[j,F]=(0,yq.A)({name:"DayCalendar",state:"hasFocus",controlled:S,default:R??!1}),[U,B]=t.useState((()=>l||L)),$=(0,dN.A)((e=>{h||u(e)})),V=e=>{N(e)||(i(e),B(e),T?.(!0),F(!0))},W=(0,dN.A)(((e,t)=>{switch(e.key){case"ArrowUp":V(r.addDays(t,-7)),e.preventDefault();break;case"ArrowDown":V(r.addDays(t,7)),e.preventDefault();break;case"ArrowLeft":{const n=r.addDays(t,M?1:-1),i=r.addMonths(t,M?1:-1),o=yW({utils:r,date:n,minDate:M?n:r.startOfMonth(i),maxDate:M?r.endOfMonth(i):n,isDateDisabled:N,timezone:D});V(o||n),e.preventDefault();break}case"ArrowRight":{const n=r.addDays(t,M?-1:1),i=r.addMonths(t,M?-1:1),o=yW({utils:r,date:n,minDate:M?r.startOfMonth(i):n,maxDate:M?n:r.endOfMonth(i),isDateDisabled:N,timezone:D});V(o||n),e.preventDefault();break}case"Home":V(r.startOfWeek(t)),e.preventDefault();break;case"End":V(r.endOfWeek(t)),e.preventDefault();break;case"PageUp":V(r.addMonths(t,1)),e.preventDefault();break;case"PageDown":V(r.addMonths(t,-1)),e.preventDefault()}})),z=(0,dN.A)(((e,t)=>V(t))),H=(0,dN.A)(((e,t)=>{j&&r.isSameDay(U,t)&&T?.(!1)})),q=r.getMonth(a),G=r.getYear(a),K=t.useMemo((()=>s.filter((e=>!!e)).map((e=>r.startOfDay(e)))),[r,s]),Y=`${G}-${q}`,Q=t.useMemo((()=>t.createRef()),[Y]),X=t.useMemo((()=>{const e=r.startOfMonth(a),t=r.endOfMonth(a);return N(U)||r.isAfterDay(U,t)||r.isBeforeDay(U,e)?yW({utils:r,date:U,minDate:e,maxDate:t,disablePast:v,disableFuture:y,isDateDisabled:N,timezone:D}):U}),[a,y,v,U,N,r,D]),Z=t.useMemo((()=>{const e=r.getWeekArray(a);let t=r.addMonths(a,1);for(;I&&e.length<I;){const n=r.getWeekArray(t),i=r.isSameDay(e[e.length-1][0],n[0][0]);n.slice(i?1:0).forEach((t=>{e.length<I&&e.push(t)})),t=r.addMonths(t,1)}return e}),[a,I,r]);return(0,Ve.jsxs)(tQ,{role:"grid","aria-labelledby":k,className:P.root,children:[(0,Ve.jsxs)(nQ,{role:"row",className:P.header,children:[C&&(0,Ve.jsx)(iQ,{variant:"caption",role:"columnheader","aria-label":O.calendarWeekNumberHeaderLabel,className:P.weekNumberLabel,children:O.calendarWeekNumberHeaderText}),SW(r,L).map(((e,t)=>(0,Ve.jsx)(rQ,{variant:"caption",role:"columnheader","aria-label":r.format(e,"weekday"),className:P.weekDayLabel,children:_(e)},t.toString())))]}),c?(0,Ve.jsx)(aQ,{className:P.loadingContainer,children:f()}):(0,Ve.jsx)(sQ,(0,De.A)({transKey:Y,onExited:d,reduceAnimations:p,slideDirection:m,className:(0,Pe.A)(o,P.slideTransition)},g,{nodeRef:Q,children:(0,Ve.jsx)(lQ,{ref:Q,role:"rowgroup",className:P.monthContainer,children:Z.map(((e,t)=>(0,Ve.jsxs)(cQ,{role:"row",className:P.weekContainer,"aria-rowindex":t+1,children:[C&&(0,Ve.jsx)(oQ,{className:P.weekNumber,role:"rowheader","aria-label":O.calendarWeekNumberAriaLabelText(r.getWeekNumber(e[0])),children:O.calendarWeekNumberText(r.getWeekNumber(e[0]))}),e.map(((e,t)=>(0,Ve.jsx)(uQ,{parentProps:n,day:e,selectedDays:K,focusableDay:X,onKeyDown:W,onFocus:z,onBlur:H,onDaySelect:$,isDateDisabled:N,currentMonthNumber:q,isViewFocused:j,"aria-colindex":t+1},e.toString())))]},`week-${e[0]}`)))})}))]})}function hQ(e){return(0,sL.Ay)("MuiPickersMonth",e)}const pQ=(0,Ge.A)("MuiPickersMonth",["root","monthButton","disabled","selected"]),fQ=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow","slots","slotProps"],mQ=(0,rL.Ay)("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{monthsPerRow:4},style:{flexBasis:"25%"}}]}),gQ=(0,rL.Ay)("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${pQ.disabled}`]:t.disabled},{[`&.${pQ.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IB(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IB(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${pQ.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${pQ.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),vQ=t.memo((function(e){const n=hW({props:e,name:"MuiPickersMonth"}),{autoFocus:r,className:i,children:o,disabled:a,selected:s,value:l,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":f,"aria-label":m,slots:g,slotProps:v}=n,y=(0,Le.A)(n,fQ),b=t.useRef(null),w=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]};return(0,nL.A)(i,hQ,r)})(n);(0,JM.A)((()=>{r&&b.current?.focus()}),[r]);const x=g?.monthButton??gQ,E=$P({elementType:x,externalSlotProps:v?.monthButton,additionalProps:{children:o,disabled:a,tabIndex:c,ref:b,type:"button",role:"radio","aria-current":f,"aria-checked":s,"aria-label":m,onClick:e=>u(e,l),onKeyDown:e=>d(e,l),onFocus:e=>h(e,l),onBlur:e=>p(e,l)},ownerState:n,className:w.monthButton});return(0,Ve.jsx)(mQ,(0,De.A)({className:(0,Pe.A)(w.root,i),ownerState:n},y,{children:(0,Ve.jsx)(x,(0,De.A)({},E))}))}));function yQ(e){return(0,sL.Ay)("MuiMonthCalendar",e)}(0,Ge.A)("MuiMonthCalendar",["root"]);const bQ=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"];const wQ=(0,rL.Ay)("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:Wq,boxSizing:"border-box"}),xQ=t.forwardRef((function(e,n){const r=function(e,t){const n=lz(),r=cz(),i=hW({props:e,name:t});return(0,De.A)({disableFuture:!1,disablePast:!1},i,{minDate:bW(n,i.minDate,r.minDate),maxDate:bW(n,i.maxDate,r.maxDate)})}(e,"MuiMonthCalendar"),{className:i,value:o,defaultValue:a,referenceDate:s,disabled:l,disableFuture:c,disablePast:u,maxDate:d,minDate:h,onChange:p,shouldDisableMonth:f,readOnly:m,autoFocus:g=!1,onMonthFocus:v,hasFocus:y,onFocusedViewChange:b,monthsPerRow:w=3,timezone:x,gridLabelId:E,slots:A,slotProps:_}=r,S=(0,Le.A)(r,bQ),{value:T,handleValueChange:k,timezone:C}=wq({name:"MonthCalendar",timezone:x,value:o,defaultValue:a,referenceDate:s,onChange:p,valueManager:ZW}),I=uz(C),R=Tq(),D=lz(),L=t.useMemo((()=>ZW.getInitialReferenceValue({value:T,utils:D,props:r,timezone:C,referenceDate:s,granularity:CW.month})),[]),P=r,M=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},yQ,t)})(P),N=t.useMemo((()=>D.getMonth(I)),[D,I]),O=t.useMemo((()=>null!=T?D.getMonth(T):null),[T,D]),[j,F]=t.useState((()=>O||D.getMonth(L))),[U,B]=(0,yq.A)({name:"MonthCalendar",state:"hasFocus",controlled:y,default:g??!1}),$=(0,dN.A)((e=>{B(e),b&&b(e)})),V=t.useCallback((e=>{const t=D.startOfMonth(u&&D.isAfter(I,h)?I:h),n=D.startOfMonth(c&&D.isBefore(I,d)?I:d),r=D.startOfMonth(e);return!!D.isBefore(r,t)||(!!D.isAfter(r,n)||!!f&&f(r))}),[c,u,d,h,I,f,D]),W=(0,dN.A)(((e,t)=>{if(m)return;const n=D.setMonth(T??L,t);k(n)})),z=(0,dN.A)((e=>{V(D.setMonth(T??L,e))||(F(e),$(!0),v&&v(e))}));t.useEffect((()=>{F((e=>null!==O&&e!==O?O:e))}),[O]);const H=(0,dN.A)(((e,t)=>{const n=12;switch(e.key){case"ArrowUp":z((n+t-3)%n),e.preventDefault();break;case"ArrowDown":z((n+t+3)%n),e.preventDefault();break;case"ArrowLeft":z((n+t+(R?1:-1))%n),e.preventDefault();break;case"ArrowRight":z((n+t+(R?-1:1))%n),e.preventDefault()}})),q=(0,dN.A)(((e,t)=>{z(t)})),G=(0,dN.A)(((e,t)=>{j===t&&$(!1)}));return(0,Ve.jsx)(wQ,(0,De.A)({ref:n,className:(0,Pe.A)(M.root,i),ownerState:P,role:"radiogroup","aria-labelledby":E},S,{children:wW(D,T??L).map((e=>{const t=D.getMonth(e),n=D.format(e,"monthShort"),r=D.format(e,"month"),i=t===O,o=l||V(e);return(0,Ve.jsx)(vQ,{selected:i,value:t,onClick:W,onKeyDown:H,autoFocus:U&&t===j,disabled:o,tabIndex:t!==j||o?-1:0,onFocus:q,onBlur:G,"aria-current":N===t?"date":void 0,"aria-label":r,monthsPerRow:w,slots:A,slotProps:_,children:n},n)}))}))}));function EQ(e){return(0,sL.Ay)("MuiPickersYear",e)}const AQ=(0,Ge.A)("MuiPickersYear",["root","yearButton","selected","disabled"]),_Q=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow","slots","slotProps"],SQ=(0,rL.Ay)("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{yearsPerRow:4},style:{flexBasis:"25%"}}]}),TQ=(0,rL.Ay)("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${AQ.disabled}`]:t.disabled},{[`&.${AQ.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:IB(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IB(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${AQ.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${AQ.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),kQ=t.memo((function(e){const n=hW({props:e,name:"MuiPickersYear"}),{autoFocus:r,className:i,children:o,disabled:a,selected:s,value:l,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":f,slots:m,slotProps:g}=n,v=(0,Le.A)(n,_Q),y=t.useRef(null),b=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]};return(0,nL.A)(i,EQ,r)})(n);(0,JM.A)((()=>{r&&y.current?.focus()}),[r]);const w=m?.yearButton??TQ,x=$P({elementType:w,externalSlotProps:g?.yearButton,additionalProps:{children:o,disabled:a,tabIndex:c,ref:y,type:"button",role:"radio","aria-current":f,"aria-checked":s,onClick:e=>u(e,l),onKeyDown:e=>d(e,l),onFocus:e=>h(e,l),onBlur:e=>p(e,l)},ownerState:n,className:b.yearButton});return(0,Ve.jsx)(SQ,(0,De.A)({className:(0,Pe.A)(b.root,i),ownerState:n},v,{children:(0,Ve.jsx)(w,(0,De.A)({},x))}))}));function CQ(e){return(0,sL.Ay)("MuiYearCalendar",e)}(0,Ge.A)("MuiYearCalendar",["root"]);const IQ=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"];const RQ=(0,rL.Ay)("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:Wq,maxHeight:280,boxSizing:"border-box",position:"relative"}),DQ=t.forwardRef((function(e,n){const r=function(e,t){const n=lz(),r=cz(),i=hW({props:e,name:t});return(0,De.A)({disablePast:!1,disableFuture:!1},i,{yearsPerRow:i.yearsPerRow??3,minDate:bW(n,i.minDate,r.minDate),maxDate:bW(n,i.maxDate,r.maxDate)})}(e,"MuiYearCalendar"),{autoFocus:i,className:o,value:a,defaultValue:s,referenceDate:l,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onChange:f,readOnly:m,shouldDisableYear:g,onYearFocus:v,hasFocus:y,onFocusedViewChange:b,yearsOrder:w="asc",yearsPerRow:x,timezone:E,gridLabelId:A,slots:_,slotProps:S}=r,T=(0,Le.A)(r,IQ),{value:k,handleValueChange:C,timezone:I}=wq({name:"YearCalendar",timezone:E,value:a,defaultValue:s,referenceDate:l,onChange:f,valueManager:ZW}),R=uz(I),D=Tq(),L=lz(),P=t.useMemo((()=>ZW.getInitialReferenceValue({value:k,utils:L,props:r,timezone:I,referenceDate:l,granularity:CW.year})),[]),M=r,N=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},CQ,t)})(M),O=t.useMemo((()=>L.getYear(R)),[L,R]),j=t.useMemo((()=>null!=k?L.getYear(k):null),[k,L]),[F,U]=t.useState((()=>j||L.getYear(P))),[B,$]=(0,yq.A)({name:"YearCalendar",state:"hasFocus",controlled:y,default:i??!1}),V=(0,dN.A)((e=>{$(e),b&&b(e)})),W=t.useCallback((e=>{if(d&&L.isBeforeYear(e,R))return!0;if(u&&L.isAfterYear(e,R))return!0;if(p&&L.isBeforeYear(e,p))return!0;if(h&&L.isAfterYear(e,h))return!0;if(!g)return!1;const t=L.startOfYear(e);return g(t)}),[u,d,h,p,R,g,L]),z=(0,dN.A)(((e,t)=>{if(m)return;const n=L.setYear(k??P,t);C(n)})),H=(0,dN.A)((e=>{W(L.setYear(k??P,e))||(U(e),V(!0),v?.(e))}));t.useEffect((()=>{U((e=>null!==j&&e!==j?j:e))}),[j]);const q="desc"!==w?1*x:-1*x,G=D&&"asc"===w||!D&&"desc"===w?-1:1,K=(0,dN.A)(((e,t)=>{switch(e.key){case"ArrowUp":H(t-q),e.preventDefault();break;case"ArrowDown":H(t+q),e.preventDefault();break;case"ArrowLeft":H(t-G),e.preventDefault();break;case"ArrowRight":H(t+G),e.preventDefault()}})),Y=(0,dN.A)(((e,t)=>{H(t)})),Q=(0,dN.A)(((e,t)=>{F===t&&V(!1)})),X=t.useRef(null),Z=(0,kL.A)(n,X);t.useEffect((()=>{if(i||null===X.current)return;const e=X.current.querySelector('[tabindex="0"]');if(!e)return;const t=e.offsetHeight,n=e.offsetTop,r=X.current.clientHeight,o=X.current.scrollTop,a=n+t;t>r||n<o||(X.current.scrollTop=a-r/2-t/2)}),[i]);const J=L.getYearRange([p,h]);return"desc"===w&&J.reverse(),(0,Ve.jsx)(RQ,(0,De.A)({ref:Z,className:(0,Pe.A)(N.root,o),ownerState:M,role:"radiogroup","aria-labelledby":A},T,{children:J.map((e=>{const t=L.getYear(e),n=t===j,r=c||W(e);return(0,Ve.jsx)(kQ,{selected:n,value:t,onClick:z,onKeyDown:K,autoFocus:B&&t===F,disabled:r,tabIndex:t!==F||r?-1:0,onFocus:Y,onBlur:Q,"aria-current":O===t?"date":void 0,yearsPerRow:x,slots:_,slotProps:S,children:L.format(e,"year")},L.format(e,"year"))}))}))}));function LQ(e){return(0,sL.Ay)("MuiPickersArrowSwitcher",e)}(0,Ge.A)("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const PQ=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId"],MQ=["ownerState"],NQ=["ownerState"],OQ=(0,rL.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),jQ=(0,rL.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((e=>{let{theme:t}=e;return{width:t.spacing(3)}})),FQ=(0,rL.Ay)(FP,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})({variants:[{props:{hidden:!0},style:{visibility:"hidden"}}]}),UQ=t.forwardRef((function(e,t){const n=Tq(),r=hW({props:e,name:"MuiPickersArrowSwitcher"}),{children:i,className:o,slots:a,slotProps:s,isNextDisabled:l,isNextHidden:c,onGoToNext:u,nextLabel:d,isPreviousDisabled:h,isPreviousHidden:p,onGoToPrevious:f,previousLabel:m,labelId:g}=r,v=(0,Le.A)(r,PQ),y=r,b=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},LQ,t)})(y),w={isDisabled:l,isHidden:c,goTo:u,label:d},x={isDisabled:h,isHidden:p,goTo:f,label:m},E=a?.previousIconButton??FQ,A=$P({elementType:E,externalSlotProps:s?.previousIconButton,additionalProps:{size:"medium",title:x.label,"aria-label":x.label,disabled:x.isDisabled,edge:"end",onClick:x.goTo},ownerState:(0,De.A)({},y,{hidden:x.isHidden}),className:(0,Pe.A)(b.button,b.previousIconButton)}),_=a?.nextIconButton??FQ,S=$P({elementType:_,externalSlotProps:s?.nextIconButton,additionalProps:{size:"medium",title:w.label,"aria-label":w.label,disabled:w.isDisabled,edge:"start",onClick:w.goTo},ownerState:(0,De.A)({},y,{hidden:w.isHidden}),className:(0,Pe.A)(b.button,b.nextIconButton)}),T=a?.leftArrowIcon??rG,k=$P({elementType:T,externalSlotProps:s?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:y,className:b.leftArrowIcon}),C=(0,Le.A)(k,MQ),I=a?.rightArrowIcon??iG,R=$P({elementType:I,externalSlotProps:s?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:y,className:b.rightArrowIcon}),D=(0,Le.A)(R,NQ);return(0,Ve.jsxs)(OQ,(0,De.A)({ref:t,className:(0,Pe.A)(b.root,o),ownerState:y},v,{children:[(0,Ve.jsx)(E,(0,De.A)({},A,{children:n?(0,Ve.jsx)(I,(0,De.A)({},D)):(0,Ve.jsx)(T,(0,De.A)({},C))})),i?(0,Ve.jsx)(QL,{variant:"subtitle1",component:"span",id:g,children:i}):(0,Ve.jsx)(jQ,{className:b.spacer,ownerState:y}),(0,Ve.jsx)(_,(0,De.A)({},S,{children:n?(0,Ve.jsx)(T,(0,De.A)({},C)):(0,Ve.jsx)(I,(0,De.A)({},D))}))]}))}));const BQ=e=>(0,sL.Ay)("MuiPickersCalendarHeader",e),$Q=(0,Ge.A)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),VQ=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone","format"],WQ=["ownerState"],zQ=(0,rL.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),HQ=(0,rL.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((e=>{let{theme:t}=e;return(0,De.A)({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})})),qQ=(0,rL.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),GQ=(0,rL.Ay)(FP,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${$Q.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),KQ=(0,rL.Ay)(nG,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})((e=>{let{theme:t}=e;return{willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"}})),YQ=t.forwardRef((function(e,n){const r=gz(),i=lz(),o=hW({props:e,name:"MuiPickersCalendarHeader"}),{slots:a,slotProps:s,currentMonth:l,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onMonthChange:f,onViewChange:m,view:g,reduceAnimations:v,views:y,labelId:b,className:w,timezone:x,format:E=`${i.formats.month} ${i.formats.year}`}=o,A=(0,Le.A)(o,VQ),_=o,S=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},BQ,t)})(o),T=a?.switchViewButton??GQ,k=$P({elementType:T,externalSlotProps:s?.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(g)},ownerState:_,className:S.switchViewButton}),C=a?.switchViewIcon??KQ,I=$P({elementType:C,externalSlotProps:s?.switchViewIcon,ownerState:_,className:S.switchViewIcon}),R=(0,Le.A)(I,WQ),D=function(e,n){let{disableFuture:r,maxDate:i,timezone:o}=n;const a=lz();return t.useMemo((()=>{const t=a.date(void 0,o),n=a.startOfMonth(r&&a.isBefore(t,i)?t:i);return!a.isAfter(n,e)}),[r,i,e,a,o])}(l,{disableFuture:u,maxDate:h,timezone:x}),L=function(e,n){let{disablePast:r,minDate:i,timezone:o}=n;const a=lz();return t.useMemo((()=>{const t=a.date(void 0,o),n=a.startOfMonth(r&&a.isAfter(t,i)?t:i);return!a.isBefore(n,e)}),[r,i,e,a,o])}(l,{disablePast:d,minDate:p,timezone:x});if(1===y.length&&"year"===y[0])return null;const P=i.formatByString(l,E);return(0,Ve.jsxs)(zQ,(0,De.A)({},A,{ownerState:_,className:(0,Pe.A)(S.root,w),ref:n,children:[(0,Ve.jsxs)(HQ,{role:"presentation",onClick:()=>{if(1!==y.length&&m&&!c)if(2===y.length)m(y.find((e=>e!==g))||y[0]);else{const e=0!==y.indexOf(g)?0:1;m(y[e])}},ownerState:_,"aria-live":"polite",className:S.labelContainer,children:[(0,Ve.jsx)(PY,{reduceAnimations:v,transKey:P,children:(0,Ve.jsx)(qQ,{id:b,ownerState:_,className:S.label,children:P})}),y.length>1&&!c&&(0,Ve.jsx)(T,(0,De.A)({},k,{children:(0,Ve.jsx)(C,(0,De.A)({},R))}))]}),(0,Ve.jsx)(oN,{in:"day"===g,appear:!v,enter:!v,children:(0,Ve.jsx)(UQ,{slots:a,slotProps:s,onGoToPrevious:()=>f(i.addMonths(l,-1),"right"),isPreviousDisabled:L,previousLabel:r.previousMonth,onGoToNext:()=>f(i.addMonths(l,1),"left"),isNextDisabled:D,nextLabel:r.nextMonth})})]}))})),QQ=(0,rL.Ay)("div")({overflow:"hidden",width:Wq,maxHeight:336,display:"flex",flexDirection:"column",margin:"0 auto"}),XQ=e=>(0,sL.Ay)("MuiDateCalendar",e),ZQ=((0,Ge.A)("MuiDateCalendar",["root","viewTransitionContainer"]),["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"]);const JQ=(0,rL.Ay)(QQ,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:336}),eX=(0,rL.Ay)(PY,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),tX=t.forwardRef((function(e,n){const r=lz(),i=(0,XO.A)(),o=function(e,t){const n=lz(),r=cz(),i=dq(),o=hW({props:e,name:t});return(0,De.A)({},o,{loading:o.loading??!1,disablePast:o.disablePast??!1,disableFuture:o.disableFuture??!1,openTo:o.openTo??"day",views:o.views??["year","day"],reduceAnimations:o.reduceAnimations??i,renderLoading:o.renderLoading??(()=>(0,Ve.jsx)("span",{children:"..."})),minDate:bW(n,o.minDate,r.minDate),maxDate:bW(n,o.maxDate,r.maxDate)})}(e,"MuiDateCalendar"),{autoFocus:a,onViewChange:s,value:l,defaultValue:c,referenceDate:u,disableFuture:d,disablePast:h,onChange:p,onYearChange:f,onMonthChange:m,reduceAnimations:g,shouldDisableDate:v,shouldDisableMonth:y,shouldDisableYear:b,view:w,views:x,openTo:E,className:A,disabled:_,readOnly:S,minDate:T,maxDate:k,disableHighlightToday:C,focusedView:I,onFocusedViewChange:R,showDaysOutsideCurrentMonth:D,fixedWeekNumber:L,dayOfWeekFormatter:P,slots:M,slotProps:N,loading:O,renderLoading:j,displayWeekNumber:F,yearsOrder:U,yearsPerRow:B,monthsPerRow:$,timezone:V}=o,W=(0,Le.A)(o,ZQ),{value:z,handleValueChange:H,timezone:q}=wq({name:"DateCalendar",timezone:V,value:l,defaultValue:c,referenceDate:u,onChange:p,valueManager:ZW}),{view:G,setView:K,focusedView:Y,setFocusedView:Q,goToNextView:X,setValueAndGoToNextView:Z}=Eq({view:w,views:x,openTo:E,onChange:H,onViewChange:s,autoFocus:a,focusedView:I,onFocusedViewChange:R}),{referenceDate:J,calendarState:ee,changeFocusedDay:te,changeMonth:ne,handleChangeMonth:re,isDateDisabled:ie,onMonthSwitchingAnimationEnd:oe}=RY({value:z,referenceDate:u,reduceAnimations:g,onMonthChange:m,minDate:T,maxDate:k,shouldDisableDate:v,disablePast:h,disableFuture:d,timezone:q}),ae=_&&z||T,se=_&&z||k,le=`${i}-grid-label`,ce=null!==Y,ue=M?.calendarHeader??YQ,de=$P({elementType:ue,externalSlotProps:N?.calendarHeader,additionalProps:{views:x,view:G,currentMonth:ee.currentMonth,onViewChange:K,onMonthChange:(e,t)=>re({newMonth:e,direction:t}),minDate:ae,maxDate:se,disabled:_,disablePast:h,disableFuture:d,reduceAnimations:g,timezone:q,labelId:le},ownerState:o}),he=(0,dN.A)((e=>{const t=r.startOfMonth(e),n=r.endOfMonth(e),i=ie(e)?yW({utils:r,date:e,minDate:r.isBefore(T,t)?t:T,maxDate:r.isAfter(k,n)?n:k,disablePast:h,disableFuture:d,isDateDisabled:ie,timezone:q}):e;i?(Z(i,"finish"),m?.(t)):(X(),ne(t)),te(i,!0)})),pe=(0,dN.A)((e=>{const t=r.startOfYear(e),n=r.endOfYear(e),i=ie(e)?yW({utils:r,date:e,minDate:r.isBefore(T,t)?t:T,maxDate:r.isAfter(k,n)?n:k,disablePast:h,disableFuture:d,isDateDisabled:ie,timezone:q}):e;i?(Z(i,"finish"),f?.(i)):(X(),ne(t)),te(i,!0)})),fe=(0,dN.A)((e=>H(e?vW(r,e,z??J):e,"finish",G)));t.useEffect((()=>{null!=z&&r.isValid(z)&&ne(z)}),[z]);const me=o,ge=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},XQ,t)})(me),ve={disablePast:h,disableFuture:d,maxDate:k,minDate:T},ye={disableHighlightToday:C,readOnly:S,disabled:_,timezone:q,gridLabelId:le,slots:M,slotProps:N},be=t.useRef(G);t.useEffect((()=>{be.current!==G&&(Y===be.current&&Q(G,!0),be.current=G)}),[Y,Q,G]);const we=t.useMemo((()=>[z]),[z]);return(0,Ve.jsxs)(JQ,(0,De.A)({ref:n,className:(0,Pe.A)(ge.root,A),ownerState:me},W,{children:[(0,Ve.jsx)(ue,(0,De.A)({},de,{slots:M,slotProps:N})),(0,Ve.jsx)(eX,{reduceAnimations:g,className:ge.viewTransitionContainer,transKey:G,ownerState:me,children:(0,Ve.jsxs)("div",{children:["year"===G&&(0,Ve.jsx)(DQ,(0,De.A)({},ve,ye,{value:z,onChange:pe,shouldDisableYear:b,hasFocus:ce,onFocusedViewChange:e=>Q("year",e),yearsOrder:U,yearsPerRow:B,referenceDate:J})),"month"===G&&(0,Ve.jsx)(xQ,(0,De.A)({},ve,ye,{hasFocus:ce,className:A,value:z,onChange:he,shouldDisableMonth:y,onFocusedViewChange:e=>Q("month",e),monthsPerRow:$,referenceDate:J})),"day"===G&&(0,Ve.jsx)(dQ,(0,De.A)({},ee,ve,ye,{onMonthSwitchingAnimationEnd:oe,onFocusedDayChange:te,reduceAnimations:g,selectedDays:we,onSelectedDaysChange:fe,shouldDisableDate:v,shouldDisableMonth:y,shouldDisableYear:b,hasFocus:ce,onFocusedViewChange:e=>Q("day",e),showDaysOutsideCurrentMonth:D,fixedWeekNumber:L,dayOfWeekFormatter:P,displayWeekNumber:F,loading:O,renderLoading:j}))]})})]}))})),nX=e=>{let{view:t,onViewChange:n,views:r,focusedView:i,onFocusedViewChange:o,value:a,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:E,yearsOrder:A,yearsPerRow:_,slots:S,slotProps:T,loading:k,renderLoading:C,disableHighlightToday:I,readOnly:R,disabled:D,showDaysOutsideCurrentMonth:L,dayOfWeekFormatter:P,sx:M,autoFocus:N,fixedWeekNumber:O,displayWeekNumber:j,timezone:F}=e;return(0,Ve.jsx)(tX,{view:t,onViewChange:n,views:r.filter(AW),focusedView:i&&AW(i)?i:null,onFocusedViewChange:o,value:a,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:E,yearsOrder:A,yearsPerRow:_,slots:S,slotProps:T,loading:k,renderLoading:C,disableHighlightToday:I,readOnly:R,disabled:D,showDaysOutsideCurrentMonth:L,dayOfWeekFormatter:P,sx:M,autoFocus:N,fixedWeekNumber:O,displayWeekNumber:j,timezone:F})},rX=t.forwardRef((function(e,n){const r=gz(),i=lz(),o=Ez(e,"MuiDesktopDatePicker"),a=(0,De.A)({day:nX,month:nX,year:nX},o.viewRenderers),s=(0,De.A)({},o,{viewRenderers:a,format:_W(i,o,!1),yearsPerRow:o.yearsPerRow??4,slots:(0,De.A)({openPickerIcon:oG,field:CY},o.slots),slotProps:(0,De.A)({},o.slotProps,{field:e=>(0,De.A)({},RL(o.slotProps?.field,e),kz(o),{ref:n}),toolbar:(0,De.A)({hidden:!0},o.slotProps?.toolbar)})}),{renderPicker:l}=(e=>{let{props:n,getOpenDialogAriaText:r}=e,i=(0,Le.A)(e,Jq);const{slots:o,slotProps:a,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:f,name:m,label:g,inputRef:v,readOnly:y,disabled:b,autoFocus:w,localeText:x,reduceAnimations:E}=n,A=t.useRef(null),_=t.useRef(null),S=(0,XO.A)(),T=a?.toolbar?.hidden??!1,{open:k,actions:C,hasUIView:I,layoutProps:R,renderCurrentView:D,shouldRestoreFocus:L,fieldProps:P,contextValue:M,ownerState:N}=Iq((0,De.A)({},i,{props:n,fieldRef:_,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),O=o.inputAdornment??sW,j=$P({elementType:O,externalSlotProps:a?.inputAdornment,additionalProps:{position:"end"},ownerState:n}),F=(0,Le.A)(j,eG),U=o.openPickerButton??FP,B=$P({elementType:U,externalSlotProps:a?.openPickerButton,additionalProps:{disabled:b||y,onClick:k?C.onClose:C.onOpen,"aria-label":r(P.value),edge:F.position},ownerState:n}),$=(0,Le.A)(B,tG),V=o.openPickerIcon,W=$P({elementType:V,externalSlotProps:a?.openPickerIcon,ownerState:N}),z=o.field,H=$P({elementType:z,externalSlotProps:a?.field,additionalProps:(0,De.A)({},P,T&&{id:S},{readOnly:y,disabled:b,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:f,label:g,name:m,autoFocus:w&&!n.open,focused:!!k||void 0},v?{inputRef:v}:{}),ownerState:n});I&&(H.InputProps=(0,De.A)({},H.InputProps,{ref:A},!n.disableOpenPicker&&{[`${F.position}Adornment`]:(0,Ve.jsx)(O,(0,De.A)({},F,{children:(0,Ve.jsx)(U,(0,De.A)({},$,{children:(0,Ve.jsx)(V,(0,De.A)({},W))}))}))}));const q=(0,De.A)({textField:o.textField,clearIcon:o.clearIcon,clearButton:o.clearButton},H.slots),G=o.layout??Qq;let K=S;T&&(K=g?`${S}-label`:void 0);const Y=(0,De.A)({},a,{toolbar:(0,De.A)({},a?.toolbar,{titleId:S}),popper:(0,De.A)({"aria-labelledby":K},a?.popper)}),Q=(0,kL.A)(_,H.unstableFieldRef);return{renderPicker:()=>(0,Ve.jsxs)(Zq,{contextValue:M,localeText:x,children:[(0,Ve.jsx)(z,(0,De.A)({},H,{slots:q,slotProps:Y,unstableFieldRef:Q})),(0,Ve.jsx)(gq,(0,De.A)({role:"dialog",placement:"bottom-start",anchorEl:A.current},C,{open:k,slots:o,slotProps:Y,shouldRestoreFocus:L,reduceAnimations:E,children:(0,Ve.jsx)(G,(0,De.A)({},R,Y?.layout,{slots:o,slotProps:Y,children:D()}))}))]})}})({props:s,valueManager:ZW,valueType:"date",getOpenDialogAriaText:rz({utils:i,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:s.localeText?.openDatePickerDialogue}),validator:Cz});return l()}));rX.propTypes={autoFocus:fW().bool,className:fW().string,closeOnSelect:fW().bool,dayOfWeekFormatter:fW().func,defaultValue:fW().object,disabled:fW().bool,disableFuture:fW().bool,disableHighlightToday:fW().bool,disableOpenPicker:fW().bool,disablePast:fW().bool,displayWeekNumber:fW().bool,enableAccessibleFieldDOMStructure:fW().any,fixedWeekNumber:fW().number,format:fW().string,formatDensity:fW().oneOf(["dense","spacious"]),inputRef:mW,label:fW().node,loading:fW().bool,localeText:fW().object,maxDate:fW().object,minDate:fW().object,monthsPerRow:fW().oneOf([3,4]),name:fW().string,onAccept:fW().func,onChange:fW().func,onClose:fW().func,onError:fW().func,onMonthChange:fW().func,onOpen:fW().func,onSelectedSectionsChange:fW().func,onViewChange:fW().func,onYearChange:fW().func,open:fW().bool,openTo:fW().oneOf(["day","month","year"]),orientation:fW().oneOf(["landscape","portrait"]),readOnly:fW().bool,reduceAnimations:fW().bool,referenceDate:fW().object,renderLoading:fW().func,selectedSections:fW().oneOfType([fW().oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),fW().number]),shouldDisableDate:fW().func,shouldDisableMonth:fW().func,shouldDisableYear:fW().func,showDaysOutsideCurrentMonth:fW().bool,slotProps:fW().object,slots:fW().object,sx:fW().oneOfType([fW().arrayOf(fW().oneOfType([fW().func,fW().object,fW().bool])),fW().func,fW().object]),timezone:fW().string,value:fW().object,view:fW().oneOf(["day","month","year"]),viewRenderers:fW().shape({day:fW().func,month:fW().func,year:fW().func}),views:fW().arrayOf(fW().oneOf(["day","month","year"]).isRequired),yearsOrder:fW().oneOf(["asc","desc"]),yearsPerRow:fW().oneOf([3,4])};const iX=(0,rL.Ay)(sj)({[`& .${JO.container}`]:{outline:0},[`& .${JO.paper}`]:{outline:0,minWidth:Wq}}),oX=(0,rL.Ay)(vB)({"&:first-of-type":{padding:0}});function aX(e){const{children:t,onDismiss:n,open:r,slots:i,slotProps:o}=e,a=i?.dialog??iX,s=i?.mobileTransition??oN;return(0,Ve.jsx)(a,(0,De.A)({open:r,onClose:n},o?.dialog,{TransitionComponent:s,TransitionProps:o?.mobileTransition,PaperComponent:i?.mobilePaper,PaperProps:o?.mobilePaper,children:(0,Ve.jsx)(oX,{children:t})}))}const sX=["props","getOpenDialogAriaText"],lX=t.forwardRef((function(e,n){const r=gz(),i=lz(),o=Ez(e,"MuiMobileDatePicker"),a=(0,De.A)({day:nX,month:nX,year:nX},o.viewRenderers),s=(0,De.A)({},o,{viewRenderers:a,format:_W(i,o,!1),slots:(0,De.A)({field:CY},o.slots),slotProps:(0,De.A)({},o.slotProps,{field:e=>(0,De.A)({},RL(o.slotProps?.field,e),kz(o),{ref:n}),toolbar:(0,De.A)({hidden:!1},o.slotProps?.toolbar)})}),{renderPicker:l}=(e=>{let{props:n,getOpenDialogAriaText:r}=e,i=(0,Le.A)(e,sX);const{slots:o,slotProps:a,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:f,name:m,label:g,inputRef:v,readOnly:y,disabled:b,localeText:w}=n,x=t.useRef(null),E=(0,XO.A)(),A=a?.toolbar?.hidden??!1,{open:_,actions:S,layoutProps:T,renderCurrentView:k,fieldProps:C,contextValue:I}=Iq((0,De.A)({},i,{props:n,fieldRef:x,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),R=o.field,D=$P({elementType:R,externalSlotProps:a?.field,additionalProps:(0,De.A)({},C,A&&{id:E},!(b||y)&&{onClick:S.onOpen,onKeyDown:(L=S.onOpen,e=>{"Enter"!==e.key&&" "!==e.key||(L(e),e.preventDefault(),e.stopPropagation()),P&&P(e)})},{readOnly:y??!0,disabled:b,className:s,sx:l,format:c,formatDensity:u,enableAccessibleFieldDOMStructure:d,selectedSections:h,onSelectedSectionsChange:p,timezone:f,label:g,name:m},v?{inputRef:v}:{}),ownerState:n});var L,P;D.inputProps=(0,De.A)({},D.inputProps,{"aria-label":r(C.value)});const M=(0,De.A)({textField:o.textField},D.slots),N=o.layout??Qq;let O=E;A&&(O=g?`${E}-label`:void 0);const j=(0,De.A)({},a,{toolbar:(0,De.A)({},a?.toolbar,{titleId:E}),mobilePaper:(0,De.A)({"aria-labelledby":O},a?.mobilePaper)}),F=(0,kL.A)(x,D.unstableFieldRef);return{renderPicker:()=>(0,Ve.jsxs)(Zq,{contextValue:I,localeText:w,children:[(0,Ve.jsx)(R,(0,De.A)({},D,{slots:M,slotProps:j,unstableFieldRef:F})),(0,Ve.jsx)(aX,(0,De.A)({},S,{open:_,slots:o,slotProps:j,children:(0,Ve.jsx)(N,(0,De.A)({},T,j?.layout,{slots:o,slotProps:j,children:k()}))}))]})}})({props:s,valueManager:ZW,valueType:"date",getOpenDialogAriaText:rz({utils:i,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:s.localeText?.openDatePickerDialogue}),validator:Cz});return l()}));lX.propTypes={autoFocus:fW().bool,className:fW().string,closeOnSelect:fW().bool,dayOfWeekFormatter:fW().func,defaultValue:fW().object,disabled:fW().bool,disableFuture:fW().bool,disableHighlightToday:fW().bool,disableOpenPicker:fW().bool,disablePast:fW().bool,displayWeekNumber:fW().bool,enableAccessibleFieldDOMStructure:fW().any,fixedWeekNumber:fW().number,format:fW().string,formatDensity:fW().oneOf(["dense","spacious"]),inputRef:mW,label:fW().node,loading:fW().bool,localeText:fW().object,maxDate:fW().object,minDate:fW().object,monthsPerRow:fW().oneOf([3,4]),name:fW().string,onAccept:fW().func,onChange:fW().func,onClose:fW().func,onError:fW().func,onMonthChange:fW().func,onOpen:fW().func,onSelectedSectionsChange:fW().func,onViewChange:fW().func,onYearChange:fW().func,open:fW().bool,openTo:fW().oneOf(["day","month","year"]),orientation:fW().oneOf(["landscape","portrait"]),readOnly:fW().bool,reduceAnimations:fW().bool,referenceDate:fW().object,renderLoading:fW().func,selectedSections:fW().oneOfType([fW().oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),fW().number]),shouldDisableDate:fW().func,shouldDisableMonth:fW().func,shouldDisableYear:fW().func,showDaysOutsideCurrentMonth:fW().bool,slotProps:fW().object,slots:fW().object,sx:fW().oneOfType([fW().arrayOf(fW().oneOfType([fW().func,fW().object,fW().bool])),fW().func,fW().object]),timezone:fW().string,value:fW().object,view:fW().oneOf(["day","month","year"]),viewRenderers:fW().shape({day:fW().func,month:fW().func,year:fW().func}),views:fW().arrayOf(fW().oneOf(["day","month","year"]).isRequired),yearsOrder:fW().oneOf(["asc","desc"]),yearsPerRow:fW().oneOf([3,4])};const cX=["desktopModeMediaQuery"],uX=t.forwardRef((function(e,t){const n=hW({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:r=aq}=n,i=(0,Le.A)(n,cX);return dW(r,{defaultMatches:!0})?(0,Ve.jsx)(rX,(0,De.A)({ref:t},i)):(0,Ve.jsx)(lX,(0,De.A)({ref:t},i))})),dX=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),hX=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),pX=()=>{const[e,n]=(0,t.useState)({username:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",name:""}),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)({}),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),p=Z(),{register:f}=ND(),m=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r}))),o[t]&&a((e=>({...e,[t]:void 0})))};return s?(0,Ve.jsx)(HU,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(SU,{})})}):(0,Ve.jsx)(HU,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{mt:8},children:(0,Ve.jsxs)(hL,{elevation:0,sx:{p:4},children:[(0,Ve.jsx)(QL,{variant:"h4",gutterBottom:!0,align:"center",children:"Create Account"}),(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Join SideEye and start sharing your thoughts with the community"}),d&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:d}),(0,Ve.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(null),(()=>{const t={};if(e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",e.password){const n=e.password;n.length<8?t.password="Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?/[!@#$%^&*(),.?":{}|<>]/.test(n)||(t.password="Password must contain at least one special character"):t.password="Password must contain at least one number":t.password="Password must contain at least one lowercase letter":t.password="Password must contain at least one uppercase letter"}else t.password="Password is required";if(e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),e.username?e.username.length<3?t.username="Username must be at least 3 characters long":/^[a-zA-Z0-9_-]+$/.test(e.username)||(t.username="Username can only contain letters, numbers, underscores, and hyphens"):t.username="Username is required",e.name?e.name.length<2?t.name="Name must be at least 2 characters long":/^[a-zA-Z\s-']+$/.test(e.name)||(t.name="Name can only contain letters, spaces, hyphens, and apostrophes"):t.name="Name is required",r){const e=new Date;let n=e.getFullYear()-r.getFullYear();const i=e.getMonth()-r.getMonth();(i<0||0===i&&e.getDate()<r.getDate())&&n--,n<16?t.dateOfBirth="You must be at least 16 years old":n>120&&(t.dateOfBirth="Please enter a valid date of birth")}else t.dateOfBirth="Date of birth is required";return a(t),0===Object.keys(t).length})())try{if(l(!0),!r||isNaN(r.getTime()))throw new Error("Invalid date of birth");await f(e.email,e.password,e.username,ol.fromDate(r)),p("/verify-email",{replace:!0})}catch(d){console.error("Registration error:",d),"auth/email-already-in-use"===d.code?h("Email is already in use"):"auth/weak-password"===d.code?h("Password is too weak"):"Invalid date of birth"===d.message?h("Please enter a valid date of birth"):h(d.message||"Error creating account. Please try again.")}finally{l(!1)}},children:[(0,Ve.jsx)(uU,{fullWidth:!0,label:"Full Name",name:"name",value:e.name,onChange:m,margin:"normal",required:!0,error:!!o.name,helperText:o.name}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:m,margin:"normal",required:!0,error:!!o.username,helperText:o.username}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:m,margin:"normal",required:!0,error:!!o.email,helperText:o.email}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:e.password,onChange:m,margin:"normal",required:!0,error:!!o.password,helperText:o.password,InputProps:{endAdornment:(0,Ve.jsx)(sW,{position:"end",children:(0,Ve.jsx)(FP,{onClick:()=>u(!c),edge:"end",children:c?(0,Ve.jsx)(dX,{}):(0,Ve.jsx)(hX,{})})})}}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:c?"text":"password",value:e.confirmPassword,onChange:m,margin:"normal",required:!0,error:!!o.confirmPassword,helperText:o.confirmPassword}),(0,Ve.jsx)(uX,{label:"Date of Birth",value:r,onChange:e=>{i(e),e&&!isNaN(e.getTime())?n((t=>({...t,dateOfBirth:e.toISOString()}))):n((e=>({...e,dateOfBirth:""}))),o.dateOfBirth&&a((e=>({...e,dateOfBirth:void 0})))},slotProps:{textField:{margin:"normal",required:!0,fullWidth:!0,error:!!o.dateOfBirth,helperText:o.dateOfBirth}},disableFuture:!0,maxDate:new Date}),(0,Ve.jsx)(lM,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Create Account"}),(0,Ve.jsxs)(QL,{variant:"body2",sx:{mt:2},align:"center",children:["Already have an account? ",(0,Ve.jsx)(Ce,{to:"/login",children:"Log in"})]})]})]})})})},fX=()=>{const{resetPassword:e}=ND(),[n,r]=(Z(),(0,t.useState)("")),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null);return(0,Ve.jsx)(HU,{maxWidth:"xs",children:(0,Ve.jsxs)(hL,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Password"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your email address and we'll send you a link to reset your password."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),o(!0),s(null),c(null),!n)return s("Email is required."),void o(!1);try{await e(n),c("Password reset email sent. Please check your inbox.")}catch(r){console.error("Error sending password reset email:",r),s("Failed to send reset email. Please check the address and try again.")}finally{o(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(uU,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:n,onChange:e=>r(e.target.value),autoFocus:!0}),a&&(0,Ve.jsx)(aB,{severity:"error",sx:{mt:2},children:a}),l&&(0,Ve.jsx)(aB,{severity:"success",sx:{mt:2},children:l}),(0,Ve.jsx)(lM,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?(0,Ve.jsx)(SU,{size:24}):"Send Reset Link"}),(0,Ve.jsx)(Xe,{textAlign:"center",children:(0,Ve.jsx)(JV,{component:Ce,to:"/login",variant:"body2",children:"Back to Login"})})]})]})})};function mX(e){return(0,sL.Ay)("MuiDrawer",e)}(0,Ge.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const gX=["BackdropProps"],vX=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],yX=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},bX=(0,rL.Ay)(TN,{name:"MuiDrawer",slot:"Root",overridesResolver:yX})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),wX=(0,rL.Ay)("div",{shouldForwardProp:XP.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:yX})({flex:"0 0 auto"}),xX=(0,rL.Ay)(hL,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${(0,iL.A)(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${(0,iL.A)(n.anchor)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})})),EX={left:"right",right:"left",top:"down",bottom:"up"};const AX=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDrawer"}),i=UM(),o=qD(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:l,children:c,className:u,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:p}={},onClose:f,open:m=!1,PaperProps:g={},SlideProps:v,TransitionComponent:y=IO,transitionDuration:b=a,variant:w="temporary"}=r,x=(0,Le.A)(r.ModalProps,gX),E=(0,Le.A)(r,vX),A=t.useRef(!1);t.useEffect((()=>{A.current=!0}),[]);const _=function(e,t){let{direction:n}=e;return"rtl"===n&&function(e){return-1!==["left","right"].indexOf(e)}(t)?EX[t]:t}({direction:o?"rtl":"ltr"},s),S=s,T=(0,De.A)({},r,{anchor:S,elevation:d,open:m,variant:w},E),k=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,iL.A)(n)}`,"temporary"!==r&&`paperAnchorDocked${(0,iL.A)(n)}`]};return(0,nL.A)(i,mX,t)})(T),C=(0,Ve.jsx)(xX,(0,De.A)({elevation:"temporary"===w?d:0,square:!0},g,{className:(0,Pe.A)(k.paper,g.className),ownerState:T,children:c}));if("permanent"===w)return(0,Ve.jsx)(wX,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:T,ref:n},E,{children:C}));const I=(0,Ve.jsx)(y,(0,De.A)({in:m,direction:EX[_],timeout:b,appear:A.current},v,{children:C}));return"persistent"===w?(0,Ve.jsx)(wX,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:T,ref:n},E,{children:I})):(0,Ve.jsx)(bX,(0,De.A)({BackdropProps:(0,De.A)({},l,p,{transitionDuration:b}),className:(0,Pe.A)(k.root,k.modal,u),open:m,ownerState:T,onClose:f,hideBackdrop:h,ref:n},E,x,{children:I}))})),_X=AX;function SX(e){return(0,sL.Ay)("MuiCard",e)}(0,Ge.A)("MuiCard",["root"]);const TX=["className","raised"],kX=(0,rL.Ay)(hL,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),CX=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,Le.A)(n,TX),a=(0,De.A)({},n,{raised:i}),s=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},SX,t)})(a);return(0,Ve.jsx)(kX,(0,De.A)({className:(0,Pe.A)(s.root,r),elevation:i?8:void 0,ref:t,ownerState:a},o))})),IX=CX;function RX(e){return(0,sL.Ay)("MuiCardMedia",e)}(0,Ge.A)("MuiCardMedia",["root","media","img"]);const DX=["children","className","component","image","src","style"],LX=(0,rL.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),PX=["video","audio","picture","iframe","img"],MX=["picture","img"],NX=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:a,src:s,style:l}=n,c=(0,Le.A)(n,DX),u=-1!==PX.indexOf(o),d=!u&&a?(0,De.A)({backgroundImage:`url("${a}")`},l):l,h=(0,De.A)({},n,{component:o,isMediaComponent:u,isImageComponent:-1!==MX.indexOf(o)}),p=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,nL.A)(i,RX,t)})(h);return(0,Ve.jsx)(LX,(0,De.A)({className:(0,Pe.A)(p.root,i),as:o,role:!u&&a?"img":void 0,ref:t,style:d,ownerState:h,src:u?a||s:void 0},c,{children:r}))})),OX=NX;function jX(e){return(0,sL.Ay)("MuiCardContent",e)}(0,Ge.A)("MuiCardContent",["root"]);const FX=["className","component"],UX=(0,rL.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),BX=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,Le.A)(n,FX),a=(0,De.A)({},n,{component:i}),s=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},jX,t)})(a);return(0,Ve.jsx)(UX,(0,De.A)({as:i,className:(0,Pe.A)(s.root,r),ownerState:a,ref:t},o))})),$X=BX;function VX(e){return(0,sL.Ay)("MuiCardActions",e)}(0,Ge.A)("MuiCardActions",["root","spacing"]);const WX=["disableSpacing","className"],zX=(0,rL.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),HX=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,o=(0,Le.A)(n,WX),a=(0,De.A)({},n,{disableSpacing:r}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,nL.A)(r,VX,t)})(a);return(0,Ve.jsx)(zX,(0,De.A)({className:(0,Pe.A)(s.root,i),ownerState:a,ref:t},o))})),qX=HX,GX=(0,_L.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),KX=(0,_L.A)((0,Ve.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove"),YX=(0,_L.A)((0,Ve.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),QX=(0,_L.A)((0,Ve.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),XX=(0,_L.A)((0,Ve.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment"),ZX=(0,_L.A)((0,Ve.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat"),JX=(0,_L.A)((0,Ve.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),eZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),tZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group");function nZ(e){const{children:t,value:n,index:r,...i}=e;return(0,Ve.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`profile-tabpanel-${r}`,"aria-labelledby":`profile-tab-${r}`,...i,children:n===r&&(0,Ve.jsx)(Xe,{sx:{p:3},children:t})})}const rZ=e=>{let{open:n,onClose:r,followers:i,followersList:o,followingList:a,connections:s,currentUser:l,isLoading:c,handleUnfollow:u,handleFollow:d,initialTab:h}=e;const[p,f]=(0,t.useState)(h);return(0,t.useEffect)((()=>{f(h)}),[h,n]),(0,Ve.jsxs)(sj,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:(0,Ve.jsxs)(g$,{value:p,onChange:(e,t)=>f(t),variant:"fullWidth",children:[(0,Ve.jsx)(E$,{label:`Followers (${i.length})`}),(0,Ve.jsx)(E$,{label:`Following (${s.length})`})]})}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(mM,{children:0===p?o.length>0?o.map((e=>(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(QL,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(UO,{children:(0,Ve.jsx)(lM,{variant:s.includes(e.id)?"outlined":"contained",color:s.includes(e.id)?"error":"primary",onClick:t=>{t.stopPropagation(),s.includes(e.id)?u(e.id):d()},disabled:c,size:"small",children:c?"Loading...":s.includes(e.id)?"Unfollow":"Follow"})})]},e.id))):(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No followers yet"}):a.length>0?a.map((e=>(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(QL,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(UO,{children:(0,Ve.jsx)(lM,{variant:"outlined",color:"error",onClick:t=>{t.stopPropagation(),u(e.id)},disabled:c,size:"small",children:c?"Loading...":"Unfollow"})})]},e.id))):(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"Not following anyone yet"})})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:r,children:"Close"})})]})},iZ=()=>{var e,n,r,i;dW(UM().breakpoints.down("sm"));const{currentUser:o,user:a,userProfile:s,loading:l,setUserProfile:c}=ND(),{db:u}=xV(),{userId:d}=J(),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(""),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[w,x]=(0,t.useState)(""),[E,A]=(0,t.useState)(!1),[_,S]=(0,t.useState)(0),[T,k]=(0,t.useState)([]),[C,I]=(0,t.useState)([]),[R,D]=(0,t.useState)([]),[L,P]=(0,t.useState)([]),[M,N]=(0,t.useState)(!0),[O,j]=(0,t.useState)(null),[F,U]=(0,t.useState)([]),[B,$]=(0,t.useState)([]),[V,W]=(0,t.useState)(!1),[z,H]=(0,t.useState)(null),[q,G]=(0,t.useState)(!1),[K,Y]=(0,t.useState)([]),[Q,X]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(0),[te,ne]=(0,t.useState)([]),[re,ie]=(0,t.useState)(!1),oe=(0,t.useRef)(null),[ae,se]=(0,t.useState)([]),[le,ce]=(0,t.useState)([]),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(""),[fe,me]=(0,t.useState)(""),[ge,ve]=(0,t.useState)(""),[ye,be]=(0,t.useState)(!1),[we,xe]=(0,t.useState)(!1),[Ee,Ae]=(0,t.useState)(!1),[_e,Se]=(0,t.useState)(null),[Te,ke]=(0,t.useState)(null),[Ie,Re]=(0,t.useState)(!1),[De,Le]=(0,t.useState)(0),[Pe,Me]=(0,t.useState)(!1),[Ne,Oe]=(0,t.useState)(!1),[je,Fe]=(0,t.useState)(!1),[Ue,Be]=(0,t.useState)([]),[$e,We]=(0,t.useState)(null),[ze,He]=(0,t.useState)(""),[qe,Ge]=(0,t.useState)(!1),[Ke,Ye]=(0,t.useState)(!1),[Qe,Ze]=(0,t.useState)(!1),[Je,et]=(0,t.useState)(!1),[tt,nt]=(0,t.useState)([]),[rt,it]=(0,t.useState)(null),[ot,at]=(0,t.useState)([]),[st,lt]=(0,t.useState)([]),[ct,ut]=(0,t.useState)([]),dt=h||(null===o||void 0===o?void 0:o.uid)||"";(0,t.useEffect)((()=>{p(d||((null===o||void 0===o?void 0:o.uid)||null))}),[d,null===o||void 0===o?void 0:o.uid]);const ht=(0,t.useCallback)((async()=>{if(u&&h)try{N(!0),j(null);const e=cb(u,"users",h),t=await xw(e);if(!t.exists())return j("Profile not found"),void N(!1);const n=t.data(),r=n.isPrivate||!1,i=(null===o||void 0===o?void 0:o.uid)===h;if(Me(r),it(n),m(n.username||""),v(n.name||""),x(n.bio||""),H(n.profilePic||null),i||!r)Fe(!0),j(null);else if(null!==o&&void 0!==o&&o.uid){const e=cb(u,`users/${h}/followers/${o.uid}`),t=(await xw(e)).exists();Fe(t),t||j("This profile is private")}else Fe(!1),j("This profile is private");const[a,s]=await Promise.all([Aw(lb(u,`users/${h}/followers`)),Aw(lb(u,`users/${h}/following`))]),l=a.docs.map((e=>e.id)),c=s.docs.map((e=>e.id));if($(l),at(c),U(c),je){const[e,t]=await Promise.all([Promise.all(l.map((e=>xw(cb(u,"users",e))))),Promise.all(c.map((e=>xw(cb(u,"users",e)))))]);se(e.map((e=>({id:e.id,...e.data()})))),ce(t.map((e=>({id:e.id,...e.data()}))));const[n,r,i]=await Promise.all([Aw(ew(lb(u,"posts"),nw("authorId","==",h),ow("timestamp","desc"))),Aw(ew(lb(u,"posts"),nw("likedBy","array-contains",h),ow("timestamp","desc"))),Aw(ew(lb(u,"videos"),nw("userId","==",h),ow("timestamp","desc")))]);k(n.docs.map((e=>({id:e.id,...e.data()})))),P(r.docs.map((e=>({id:e.id,...e.data()})))),Be(i.docs.map((e=>({id:e.id,...e.data()}))))}}catch(O){console.error("Error in fetchUserData:",O),j("Failed to load profile data")}finally{N(!1)}else N(!1)}),[u,h,null===o||void 0===o?void 0:o.uid,je]);(0,t.useEffect)((()=>{if(!u||!h)return;const e=Cw(cb(u,"users",h),(async e=>{if(e.exists()){const t=e.data(),n=t.isPrivate||!1,r=(null===o||void 0===o?void 0:o.uid)===h;if(it(t),Me(n),m(t.username||""),v(t.name||""),x(t.bio||""),H(t.profilePic||null),r||!n)Fe(!0),j(null);else if(null!==o&&void 0!==o&&o.uid){const e=cb(u,`users/${h}/followers/${o.uid}`),t=(await xw(e)).exists();Fe(t),t||j("This profile is private")}else Fe(!1),j("This profile is private");if(!n&&Qe)try{if(null!==o&&void 0!==o&&o.uid){const e=cb(u,"users",h,"followRequests",o.uid);await Tw(e),Ze(!1)}}catch(O){console.error("Error clearing follow request:",O)}}}),(e=>{console.error("Error in privacy settings listener:",e),j("Failed to sync privacy settings")}));return()=>e()}),[u,h,null===o||void 0===o?void 0:o.uid,Qe]),(0,t.useEffect)((()=>{h&&ht()}),[ht,h]),(0,t.useEffect)((()=>{s&&(pe(s.name||""),me(s.bio||""),ve(s.username||""))}),[s]),(0,t.useEffect)((()=>{be(!(null===o||void 0===o||!o.uid)&&B.includes(o.uid))}),[o,B]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h&&Pe){const e=async()=>{if(u)try{const e=cb(u,"users",h,"followRequests",o.uid),t=await xw(e);Ze(t.exists())}catch(O){console.error("Error checking follow request:",O)}};if(e(),u){const e=Cw(cb(u,"users",h,"followRequests",o.uid),(e=>{Ze(e.exists())}));return()=>e()}}}),[null===o||void 0===o?void 0:o.uid,h,Pe,u]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h&&o.uid===h){const e=async()=>{if(u)try{const e=lb(u,"users",h,"followRequests"),t=(await Aw(e)).docs.map((e=>e.id));nt(t)}catch(O){console.error("Error fetching pending requests:",O)}};e()}}),[null===o||void 0===o?void 0:o.uid,h,u]);const pt=async()=>{if(u&&o&&h)try{if(Pe){const e=cb(u,"users",h,"followRequests",o.uid);await _w(e,{timestamp:jw()});const t=cb(lb(u,"users",h,"notifications"));await _w(t,{type:"follow_request",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",timestamp:jw(),read:!1}),Ze(!0)}else{const e=cb(u,"users",o.uid,"following",h),t=cb(u,"users",h,"followers",o.uid);await _w(e,{timestamp:jw()}),await _w(t,{timestamp:jw()}),be(!0)}}catch(O){console.error("Error handling follow:",O),j("Failed to process follow request")}},ft=async e=>{if(!o||!dt||!u)return void j("Database not initialized");const t=e||dt;try{N(!0);const e=cb(u,"users",o.uid,"following",t);await Tw(e);const n=cb(u,"users",t,"followers",o.uid);await Tw(n),be(!1),$((e=>e.filter((e=>e!==o.uid)))),at((e=>e.filter((e=>e!==t)))),await ht()}catch(O){console.error("Error unfollowing user:",O),j("Failed to unfollow user")}finally{N(!1)}};(0,t.useEffect)((()=>{if(!u||!dt)return;const e=Cw(lb(u,"users",dt,"followers"),(e=>{const t=e.docs.map((e=>e.id));$(t)}));return()=>e()}),[u,dt]),(0,t.useEffect)((()=>{if(!u||!dt)return;const e=Cw(lb(u,"users",dt,"following"),(e=>{const t=e.docs.map((e=>e.id));U(t)}));return()=>e()}),[u,dt]),(0,t.useEffect)((()=>{if(!u||!o||!dt)return;const e=Cw(cb(u,"users",o.uid,"following",dt),(e=>{be(e.exists())}));return()=>e()}),[u,o,dt]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.uid&&h){const e=async()=>{if(u)try{const e=cb(u,"users",h,"followers",o.uid),t=await xw(e);Fe(t.exists()||o.uid===h)}catch(O){console.error("Error checking profile visibility:",O)}};e()}}),[null===o||void 0===o?void 0:o.uid,h,u]);const mt=()=>(null===o||void 0===o?void 0:o.uid)!==h&&h?(0,Ve.jsx)(lM,{variant:ye?"outlined":"contained",color:ye?"error":"primary",startIcon:ye?(0,Ve.jsx)(KX,{}):(0,Ve.jsx)(YX,{}),onClick:ye?()=>ft(h):pt,disabled:M||Pe&&Qe,children:M?"Loading...":ye?"Unfollow":Pe&&Qe?"Requested":"Follow"}):null,gt=async()=>{if(o&&dt&&Q.trim()&&!ue&&u)try{de(!0);const e={senderId:o.uid,receiverId:dt,content:Q.trim(),timestamp:jw(),read:!1,senderName:o.displayName||"Anonymous",senderAvatar:(null===s||void 0===s?void 0:s.profilePic)||null};await kw(lb(u,"messages"),e),X("")}catch(O){console.error("Error sending message:",O),j("Failed to send message")}finally{de(!1)}else j("Database not initialized")},vt=async e=>{if(o&&u)try{const t=cb(u,"messages",e);await Sw(t,{read:!0})}catch(O){console.error("Error marking message as read:",O)}else j("Database not initialized")};(0,t.useEffect)((()=>{if(q){const e=(async()=>{if(lR.currentUser&&dt&&u)try{const e=Cw(ew(lb(u,"messages"),nw("receiverId","==",lR.currentUser.uid),ow("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));Y(t),ee(t.filter((e=>!e.read)).length)}));return e}catch(O){console.error("Error fetching messages:",O)}else j("Database not initialized")})();return()=>{e&&e.then((e=>null===e||void 0===e?void 0:e()))}}}),[q]);const yt=async e=>{if(o&&u)try{var t;const n=cb(u,"posts",e),r=await xw(n);if(!r.exists())throw new Error("Post not found");const i=r.data();if(null===(t=i.likedBy)||void 0===t?void 0:t.includes(o.uid))await Sw(n,{likedBy:Uw(o.uid)});else if(await Sw(n,{likedBy:Fw(o.uid)}),i.authorId!==o.uid){const t={type:"like",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,content:`${o.displayName||"Someone"} liked your post`,createdAt:jw(),isRead:!1};await kw(lb(u,"users",i.authorId,"notifications"),t)}}catch(O){console.error("Error toggling like:",O),MR.error("Failed to update like")}},bt=async e=>{if(o&&u)try{var t;const n=cb(u,"posts",e),r=await xw(n);if(!r.exists())throw new Error("Post not found");const i=r.data();if(null===(t=i.repostedBy)||void 0===t?void 0:t.includes(o.uid))await Sw(n,{repostedBy:Uw(o.uid),reposts:Bw(-1)});else if(await Sw(n,{repostedBy:Fw(o.uid),reposts:Bw(1)}),i.authorId!==o.uid){const t={type:"repost",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,content:`${o.displayName||"Someone"} reposted your post`,createdAt:jw(),isRead:!1};await kw(lb(u,"users",i.authorId,"notifications"),t)}}catch(O){console.error("Error toggling repost:",O),MR.error("Failed to update repost")}},wt=()=>{var e;return(0,Ve.jsx)(_X,{anchor:"bottom",open:Ke,onClose:()=>Ye(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16,overflow:"hidden","@media (max-width: 600px)":{height:"90vh"}}},children:(0,Ve.jsxs)(Xe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(QL,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(FP,{onClick:()=>Ye(!1),children:(0,Ve.jsx)(yB,{})})]}),$e&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Xe,{sx:{mb:2},children:(0,Ve.jsx)("video",{src:$e.url,style:{width:"100%",maxHeight:"200px",objectFit:"contain",backgroundColor:"black"},controls:!0,playsInline:!0,muted:!0})}),(0,Ve.jsx)(mM,{sx:{flex:1,overflow:"auto",mb:2},children:null===(e=$e.commentsList)||void 0===e?void 0:e.map((e=>{var t,n;return(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{children:e.username[0]})}),(0,Ve.jsx)(fO,{primary:e.username,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(QL,{variant:"body2",children:e.content}),(0,Ve.jsxs)(QL,{variant:"caption",color:"text.secondary",children:[vV((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]})})]},e.id)}))}),(0,Ve.jsx)(Xe,{sx:{mt:"auto"},children:(0,Ve.jsx)(uU,{fullWidth:!0,size:"small",placeholder:"Add a comment...",value:ze,onChange:e=>He(e.target.value),InputProps:{endAdornment:(0,Ve.jsx)(lM,{size:"small",onClick:()=>$e&&(async(e,t)=>{if(o&&t.trim()&&u)try{const n=cb(u,"posts",e),r=await xw(n);if(!r.exists())throw new Error("Post not found");const i=r.data(),a=await kw(lb(u,`posts/${e}/comments`),{content:t.trim(),userId:o.uid,username:o.displayName||"Anonymous",userPhotoURL:o.photoURL||"",timestamp:jw()});if(await Sw(n,{comments:Bw(1)}),i.authorId!==o.uid){const n={type:"comment",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:i.authorId,postId:e,commentId:a.id,content:`${o.displayName||"Someone"} commented on your post: "${t.trim()}"`,createdAt:jw(),isRead:!1};await kw(lb(u,"users",i.authorId,"notifications"),n)}const s=/@(\w+)/g,l=t.match(s);if(l)for(const c of l){const n=c.substring(1),r=ew(lb(u,"users"),nw("username","==",n),sw(1)),s=await Aw(r);if(!s.empty){const n=s.docs[0];if(n.id!==o.uid&&n.id!==i.authorId){const r={type:"mention",senderId:o.uid,senderName:o.displayName||"Anonymous",senderAvatar:o.photoURL||"",recipientId:n.id,postId:e,commentId:a.id,content:`${o.displayName||"Someone"} mentioned you in a comment: "${t.trim()}"`,createdAt:jw(),isRead:!1};await kw(lb(u,"users",n.id,"notifications"),r)}}}}catch(O){console.error("Error adding comment:",O),MR.error("Failed to add comment")}})($e.id,ze),disabled:!ze.trim()||qe,children:"Post"})}})})]})]})})},xt=()=>{ke(null)};return(0,t.useEffect)((()=>{if(u&&h)try{N(!0),j(null);const e=ew(lb(u,"users",h,"sideRooms"),ow("lastActive","desc")),t=ew(lb(u,"sideRooms"),nw("ownerId","==",h)),n=Cw(e,(e=>{const t=e.docs.map((e=>{var t,n;return{id:e.id,...e.data(),joinedAt:null===(t=e.data().joinedAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate()}}));lt(t)}),(e=>{console.error("Error fetching joined rooms:",e)})),r=Cw(t,(e=>{const t=e.docs.map((e=>{var t,n,r;return{id:e.id,roomId:e.id,name:e.data().name,description:e.data().description,memberCount:e.data().memberCount,isPrivate:e.data().isPrivate,category:e.data().category,role:"owner",joinedAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate(),isOwner:!0,thumbnailUrl:(null===(r=e.data().style)||void 0===r?void 0:r.thumbnailUrl)||null}}));ut(t)}),(e=>{console.error("Error fetching created rooms:",e)}));return()=>{n(),r()}}catch(O){console.error("Error setting up rooms listeners:",O),j("Failed to set up rooms listeners")}finally{N(!1)}else N(!1)}),[u,h]),l||M?(0,Ve.jsx)(HU,{maxWidth:"lg",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(SU,{})})}):(0,Ve.jsxs)(HU,{maxWidth:"lg",sx:{mt:2,mb:4},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,Ve.jsx)(hL,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,alignItems:"center"},children:[(0,Ve.jsx)(Xe,{sx:{position:"relative"},children:(0,Ve.jsx)(YP,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(null===o||void 0===o?void 0:o.uid)===h&&(0,Ve.jsx)(FP,{component:"label",size:"small",onClick:e=>{ke(e.currentTarget)},sx:{bgcolor:"background.paper","&:hover":{bgcolor:"background.default"}},children:(0,Ve.jsx)(wB,{fontSize:"small"})}),children:(0,Ve.jsx)(WL,{src:z||void 0,alt:f,sx:{width:120,height:120}})})}),(0,Ve.jsxs)(Xe,{sx:{flex:1,minWidth:0},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,Ve.jsx)(QL,{variant:"h4",sx:{fontWeight:"bold"},children:g||"No name set"}),Pe&&(0,Ve.jsx)(JX,{color:"action"}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(FP,{onClick:()=>A(!0),size:"small",children:(0,Ve.jsx)(eZ,{fontSize:"small"})})]}),(0,Ve.jsxs)(QL,{variant:"body1",color:"text.secondary",sx:{mb:2},children:["@",f||"No username set"]}),Pe&&!je&&(null===o||void 0===o?void 0:o.uid)!==dt?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(aB,{severity:"info",sx:{mb:2},children:"This account is private. Follow to see their posts and other content."}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:2},children:mt()})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mb:2},children:w||"No bio set"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[mt(),dt?(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{G(!0),K.forEach((e=>{e.read||vt(e.id)}))},sx:{border:"1px solid",borderColor:"primary.main","&:hover":{backgroundColor:"primary.light",opacity:.8},width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ve.jsx)(YP,{badgeContent:Z,color:"error",children:(0,Ve.jsx)(GX,{})})}):null,(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(FP,{color:"error",onClick:()=>xe(!0),sx:{border:"1px solid",borderColor:"error.main","&:hover":{backgroundColor:"error.light",opacity:.8}},children:(0,Ve.jsx)(bB,{})})]})]})]})]})}),!Pe||je||(null===o||void 0===o?void 0:o.uid)===dt?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[(0,Ve.jsx)(hL,{elevation:0,sx:{p:2,borderRadius:2,backgroundColor:"background.paper",flex:{md:1}},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h6",children:T.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{ht(),Le(0),W(!0)},children:[(0,Ve.jsx)(QL,{variant:"h6",children:B.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{ht(),Le(1),W(!0)},children:[(0,Ve.jsx)(QL,{variant:"h6",children:ot.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsx)(rZ,{open:V,onClose:()=>W(!1),followers:B,followersList:ae,followingList:le,connections:F,currentUser:o,isLoading:M,handleUnfollow:ft,handleFollow:pt,initialTab:De}),(0,Ve.jsx)(Xe,{sx:{flex:{md:2}},children:(0,Ve.jsx)(hL,{elevation:0,sx:{borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(g$,{value:_,onChange:(e,t)=>{S(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:"medium"}},children:[(0,Ve.jsx)(E$,{label:"Posts"}),(0,Ve.jsx)(E$,{label:"Vibits"}),(0,Ve.jsx)(E$,{label:"Side Rooms"}),(0,Ve.jsx)(E$,{label:"Liked Posts"}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(E$,{label:"Deleted Items"})]})})})]}):(0,Ve.jsx)(hL,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h6",children:T.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h6",children:B.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h6",children:ot.length||0}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsxs)(Xe,{sx:{flex:1},children:[(0,Ve.jsx)(nZ,{value:_,index:0,children:je?0===T.length?(0,Ve.jsx)(QL,{children:"No posts yet"}):(0,Ve.jsx)(mM,{children:T.map((e=>{var t,n,r,i;return(0,Ve.jsxs)(HO,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{Se(e),Ae(!0)},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(QL,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[vV((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(UO,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(FP,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),yt(e.id)},children:[(0,Ve.jsx)(QX,{color:null!==(r=e.likedBy)&&void 0!==r&&r.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(FP,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),bt(e.id)},children:[(0,Ve.jsx)(ZX,{color:null!==(i=e.repostedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(JX,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(QL,{variant:"h6",color:"text.secondary",children:"This account's posts are private"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their posts"})]})}),(0,Ve.jsx)(nZ,{value:_,index:1,children:je?0===Ue.length?(0,Ve.jsx)(QL,{children:"No videos uploaded yet"}):(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2},children:Ue.map((e=>(0,Ve.jsxs)(IX,{sx:{position:"relative"},children:[(0,Ve.jsx)(OX,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)($X,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(QX,{fontSize:"small",color:"action"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:e.likes}),(0,Ve.jsxs)(FP,{size:"small",onClick:t=>{t.stopPropagation(),(e=>{We(e),Ye(!0)})(e)},children:[(0,Ve.jsx)(XX,{fontSize:"small",color:"action"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:e.comments})]})]})})]},e.id)))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(JX,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(QL,{variant:"h6",color:"text.secondary",children:"This account's videos are private"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their videos"})]})}),(0,Ve.jsx)(nZ,{value:_,index:2,children:je?0===ct.length&&0===st.length?(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"Not a member of any side rooms yet"}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",component:Ce,to:"/side-rooms",sx:{mt:2},children:"Browse Side Rooms"})]}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[ct.length>0&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",sx:{mb:2},children:"Created Rooms"}),(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:ct.map((e=>(0,Ve.jsxs)(IX,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(OX,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)($X,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(QL,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(Vq,{size:"small",label:"Owner",color:"primary"})]}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(Vq,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)(tZ,{})}),e.category&&(0,Ve.jsx)(Vq,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(Vq,{size:"small",icon:(0,Ve.jsx)(JX,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(qX,{children:(0,Ve.jsx)(lM,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]}),st.length>0&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",sx:{mb:2},children:"Joined Rooms"}),(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:st.map((e=>(0,Ve.jsxs)(IX,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(OX,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)($X,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(QL,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(Vq,{size:"small",label:"Member"})]}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(Vq,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)(tZ,{})}),e.category&&(0,Ve.jsx)(Vq,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(Vq,{size:"small",icon:(0,Ve.jsx)(JX,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(qX,{children:(0,Ve.jsx)(lM,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]})]}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(JX,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(QL,{variant:"h6",color:"text.secondary",children:"This account's side rooms are private"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their side rooms"})]})}),(0,Ve.jsx)(nZ,{value:_,index:3,children:je?0===L.length?(0,Ve.jsx)(QL,{children:"No liked posts yet"}):(0,Ve.jsx)(mM,{children:L.map((e=>{var t,n,r,i;return(0,Ve.jsxs)(HO,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{Se(e),Ae(!0)},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(WL,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(QL,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[vV((null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)," ago"]})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(UO,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(FP,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),yt(e.id)},children:[(0,Ve.jsx)(QX,{color:null!==(r=e.likedBy)&&void 0!==r&&r.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(FP,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),bt(e.id)},children:[(0,Ve.jsx)(ZX,{color:null!==(i=e.repostedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(JX,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(QL,{variant:"h6",color:"text.secondary",children:"This account's liked posts are private"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their liked posts"})]})}),(null===o||void 0===o?void 0:o.uid)===dt&&(0,Ve.jsx)(nZ,{value:_,index:4,children:0===te.length?(0,Ve.jsx)(QL,{children:"No deleted items"}):(0,Ve.jsx)(mM,{children:te.map((e=>(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",children:"post"===e.type?"Post":"room"===e.type?"Side Room":"Forum"}),(0,Ve.jsx)(QL,{variant:"body1",children:"post"===e.type?e.content.content:e.content.name})]}),secondary:`Deleted ${vV(e.deletedAt.toDate())} ago`}),(0,Ve.jsxs)(UO,{children:[(0,Ve.jsx)(lM,{variant:"outlined",onClick:()=>(async(e,t)=>{if(u)try{const n=cb(u,"deleted_items",e),r=await xw(n);if(!r.exists())return void j("Item not found in trash");const i=r.data(),o="post"===t?"posts":"room"===t?"sideRooms":"forums";await _w(cb(u,o,e),{...i.content,deletedAt:null,scheduledForPermanentDeletion:null}),await Tw(n),ne((t=>t.filter((t=>t.id!==e)))),j("Item restored successfully")}catch(O){console.error("Error restoring item:",O),j("Failed to restore item")}else j("Database not initialized")})(e.id,e.type),children:"Restore"}),(0,Ve.jsx)(lM,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(u)try{await Tw(cb(u,"deleted_items",e)),ne((t=>t.filter((t=>t.id!==e)))),j("Item permanently deleted")}catch(O){console.error("Error permanently deleting item:",O),j("Failed to delete item permanently")}else j("Database not initialized")})(e.id),sx:{ml:1},children:"Delete Permanently"})]})]},e.id)))})})]})]}),(0,Ve.jsxs)(sj,{open:E,onClose:()=>A(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Edit Profile"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Ve.jsx)(uU,{label:"Name",value:he,onChange:e=>pe(e.target.value),fullWidth:!0,variant:"outlined"}),(0,Ve.jsx)(uU,{label:"Username",value:ge,onChange:e=>ve(e.target.value),fullWidth:!0,variant:"outlined",helperText:"This will be your unique identifier on the platform"}),(0,Ve.jsx)(uU,{label:"Bio",value:fe,onChange:e=>me(e.target.value),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",helperText:"Tell others about yourself (You can use emojis!)",InputProps:{endAdornment:(0,Ve.jsx)(FP,{onClick:()=>{const e=window.prompt("Enter an emoji:");e&&me((t=>t+e))},sx:{color:"primary.main","&:hover":{color:"primary.dark"}},children:(0,Ve.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\ude0a"})})}})]})}),(0,Ve.jsxs)(k$,{sx:{p:3},children:[(0,Ve.jsx)(lM,{variant:"outlined",onClick:()=>A(!1),sx:{minWidth:"120px",borderColor:"text.secondary",color:"text.secondary","&:hover":{borderColor:"text.primary",color:"text.primary"}},children:"Cancel"}),(0,Ve.jsx)(lM,{variant:"contained",onClick:async()=>{if(o&&u)try{const e=he.trim(),t=fe.trim(),n=ge.trim();await Sw(cb(u,"users",o.uid),{name:e,bio:t,username:n}),v(e),x(t),m(n),A(!1),s&&c({...s,name:e,bio:t,username:n})}catch(O){console.error("Error saving profile:",O),j("Failed to save profile")}},disabled:M,sx:{minWidth:"120px",bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:M?"Saving...":"Save Changes"})]})]}),(0,Ve.jsxs)(sj,{open:q,onClose:()=>G(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:(null===o||void 0===o?void 0:o.uid)===dt?"Your Messages":`Message ${f}`}),(0,Ve.jsx)(vB,{children:(null===o||void 0===o?void 0:o.uid)===dt?(0,Ve.jsx)(mM,{children:K.map((e=>{var t;return(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.senderAvatar||void 0})}),(0,Ve.jsx)(fO,{primary:e.senderName,secondary:e.content}),(0,Ve.jsx)(UO,{children:(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString()})})]},e.id)}))}):(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(uU,{fullWidth:!0,multiline:!0,rows:4,label:"Your message",value:Q,onChange:e=>X(e.target.value),variant:"outlined",sx:{mb:2}}),(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,Ve.jsx)(lM,{variant:"contained",onClick:gt,disabled:!Q.trim()||ue,sx:{minWidth:"100px","@media (max-width: 600px)":{width:"100%"}},children:ue?"Sending...":"Send"})})]})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>G(!1),children:"Close"})})]}),(0,Ve.jsxs)(sj,{open:Ee,onClose:()=>Ae(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(WL,{src:(null===_e||void 0===_e?void 0:_e.authorAvatar)||void 0}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",children:null===_e||void 0===_e?void 0:_e.authorName}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:null===_e||void 0===_e||null===(e=_e.timestamp)||void 0===e||null===(n=e.toDate)||void 0===n||null===(r=n.call(e))||void 0===r?void 0:r.toLocaleString()})]})]})}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mt:2},children:null===_e||void 0===_e?void 0:_e.content}),(null===_e||void 0===_e?void 0:_e.isEdited)&&(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:"(edited)"})]}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsxs)(FP,{children:[(0,Ve.jsx)(QX,{color:null!==_e&&void 0!==_e&&null!==(i=_e.likedBy)&&void 0!==i&&i.includes((null===o||void 0===o?void 0:o.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{ml:1},children:(null===_e||void 0===_e?void 0:_e.likes)||0})]}),(0,Ve.jsx)(lM,{onClick:()=>Ae(!1),children:"Close"})]})]}),(0,Ve.jsxs)(KN,{anchorEl:Te,open:Boolean(Te),onClose:xt,children:[(0,Ve.jsx)(aO,{onClick:()=>{var e;xt(),null===(e=oe.current)||void 0===e||e.click()},children:"Change Profile Picture"}),(0,Ve.jsx)(aO,{onClick:()=>{xt(),Re(!0)},children:"Add to Story"})]}),(0,Ve.jsx)(wt,{}),(null===o||void 0===o?void 0:o.uid)!==h||0===tt.length?null:(0,Ve.jsxs)(lM,{variant:"outlined",color:"primary",onClick:()=>et(!0),sx:{ml:2},children:["View Requests (",tt.length,")"]}),(0,Ve.jsxs)(sj,{open:Je,onClose:()=>et(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Follow Requests"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(mM,{children:tt.length>0?tt.map((e=>(0,Ve.jsxs)(HO,{divider:!0,children:[(0,Ve.jsx)(fO,{primary:e}),(0,Ve.jsxs)(UO,{children:[(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(u&&h)try{const t=cb(u,"users",h,"followRequests",e);await Tw(t);const n=cb(u,"users",e,"following",h),r=cb(u,"users",h,"followers",e);await _w(n,{timestamp:jw()}),await _w(r,{timestamp:jw()}),nt((t=>t.filter((t=>t!==e))))}catch(O){console.error("Error accepting follow request:",O),j("Failed to accept follow request")}})(e),sx:{mr:1},children:"Accept"}),(0,Ve.jsx)(lM,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(u&&h)try{const t=cb(u,"users",h,"followRequests",e);await Tw(t),nt((t=>t.filter((t=>t!==e))))}catch(O){console.error("Error rejecting follow request:",O),j("Failed to reject follow request")}})(e),children:"Reject"})]})]},e))):(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No pending follow requests"})})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>et(!1),children:"Close"})})]})]})};function oZ(e){return(0,sL.Ay)("PrivateSwitchBase",e)}(0,Ge.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const aZ=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],sZ=(0,rL.Ay)(LP)((e=>{let{ownerState:t}=e;return(0,De.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),lZ=(0,rL.Ay)("input",{shouldForwardProp:XP.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),cZ=t.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:a,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:w,type:x,value:E}=e,A=(0,Le.A)(e,aZ),[_,S]=(0,FF.A)({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),T=bj();let k=s;T&&"undefined"===typeof k&&(k=T.disabled);const C="checkbox"===x||"radio"===x,I=(0,De.A)({},e,{checked:_,disabled:k,disableFocusRipple:l,edge:c}),R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,iL.A)(i)}`],input:["input"]};return(0,nL.A)(o,oZ,t)})(I);return(0,Ve.jsxs)(sZ,(0,De.A)({component:"span",className:(0,Pe.A)(R.root,o),centerRipple:!0,focusRipple:!l,disabled:k,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{m&&m(e),T&&T.onBlur&&T.onBlur(e)},ownerState:I,ref:t},A,{children:[(0,Ve.jsx)(lZ,(0,De.A)({autoFocus:n,checked:r,defaultChecked:a,className:R.input,disabled:k,id:C?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;S(t),g&&g(e,t)},readOnly:y,ref:p,required:b,ownerState:I,tabIndex:w,type:x},"checkbox"===x&&void 0===E?{}:{value:E},h)),_?i:u]}))})),uZ=cZ;function dZ(e){return(0,sL.Ay)("MuiSwitch",e)}const hZ=(0,Ge.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),pZ=["className","color","edge","size","sx"],fZ=(0,rL.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,iL.A)(n.edge)}`],t[`size${(0,iL.A)(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${hZ.thumb}`]:{width:16,height:16},[`& .${hZ.switchBase}`]:{padding:4,[`&.${hZ.checked}`]:{transform:"translateX(16px)"}}}}]}),mZ=(0,rL.Ay)(uZ,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${hZ.input}`]:t.input},"default"!==n.color&&t[`color${(0,iL.A)(n.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${hZ.checked}`]:{transform:"translateX(20px)"},[`&.${hZ.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${hZ.checked} + .${hZ.track}`]:{opacity:.5},[`&.${hZ.disabled} + .${hZ.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${hZ.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${hZ.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${hZ.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${"light"===t.palette.mode?(0,oL.a)(t.palette[n].main,.62):(0,oL.e$)(t.palette[n].main,.55)}`}},[`&.${hZ.checked} + .${hZ.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),gZ=(0,rL.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),vZ=(0,rL.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),yZ=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:a="medium",sx:s}=n,l=(0,Le.A)(n,pZ),c=(0,De.A)({},n,{color:i,edge:o,size:a}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:a}=e,s={root:["root",n&&`edge${(0,iL.A)(n)}`,`size${(0,iL.A)(r)}`],switchBase:["switchBase",`color${(0,iL.A)(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,nL.A)(s,dZ,t);return(0,De.A)({},t,l)})(c),d=(0,Ve.jsx)(vZ,{className:u.thumb,ownerState:c});return(0,Ve.jsxs)(fZ,{className:(0,Pe.A)(u.root,r),sx:s,ownerState:c,children:[(0,Ve.jsx)(mZ,(0,De.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,De.A)({},u,{root:u.switchBase})})),(0,Ve.jsx)(gZ,{className:u.track,ownerState:c})]})})),bZ=yZ,wZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),xZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),EZ=(0,_L.A)([(0,Ve.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,Ve.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts"),AZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield"),_Z=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),SZ=(0,_L.A)([(0,Ve.jsx)("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07 1.95-1.95 5.12-1.95 7.07 0 1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"Policy"),TZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Cookie"),kZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),CZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen"),IZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),RZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),DZ=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{const e=await navigator.mediaDevices.enumerateDevices();n(e)})()}),[]);return(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("h3",{children:"Select Audio and Video Devices"}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Audio Input:"}),(0,Ve.jsx)("select",{onChange:e=>{i(e.target.value)},value:r,children:e.filter((e=>"audioinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Video Input:"}),(0,Ve.jsx)("select",{onChange:e=>{a(e.target.value)},value:o,children:e.filter((e=>"videoinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Camera ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsx)("button",{onClick:async()=>{const e={audio:{deviceId:r?{exact:r}:void 0},video:{deviceId:o?{exact:o}:void 0}};try{await navigator.mediaDevices.getUserMedia(e)}catch(WE){console.error("Error accessing media devices.",WE)}},children:"Start Stream"})]})},LZ=()=>{dW(UM().breakpoints.down("sm"));const{isDarkMode:e,toggleDarkMode:n}=(()=>{const e=(0,t.useContext)(eL);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e})(),{currentUser:r,userProfile:i}=ND(),{canViewProfile:o,canViewContent:a}=jD(),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),[b,w]=(0,t.useState)({followers:0,following:0,pendingRequests:0}),[x,E]=(0,t.useState)(!1),[A,_]=(0,t.useState)(!1),[S,T]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[I,R]=(0,t.useState)(""),[D,L]=(0,t.useState)(!1),[P,M]=(0,t.useState)(""),N=[{title:"Device Management",icon:(0,Ve.jsx)(wZ,{}),path:"#",description:"Manage your connected devices and appearance settings",onClick:()=>u(!0)},{title:"Security & Authentication",icon:(0,Ve.jsx)(xZ,{}),path:"/security",description:"Learn about our authentication flow and security features"},{title:"Account Management",icon:(0,Ve.jsx)(EZ,{}),path:"/account-management",description:"Deactivate or delete your account"},{title:"Safety & Community Guidelines",icon:(0,Ve.jsx)(AZ,{}),path:"/safety",description:"Review our safety policies and community guidelines"},{title:"About",icon:(0,Ve.jsx)(_Z,{}),path:"/about",description:"Learn more about SideEye and our mission"},{title:"Privacy Policy",icon:(0,Ve.jsx)(SZ,{}),path:"/privacy-policy",description:"Read our privacy policy and data handling practices"},{title:"Terms of Service",icon:(0,Ve.jsx)(SZ,{}),path:"/terms",description:"Review our terms of service and community guidelines"},{title:"Cookie Policy",icon:(0,Ve.jsx)(TZ,{}),path:"/cookies",description:"Learn about how we use cookies and similar technologies"}];(0,t.useEffect)((()=>{if(r){const e=Cw(cb(sR,"users",r.uid),(e=>{if(e.exists()){var t,n;const r=e.data();g(r.isPrivate||!1),w({followers:(null===(t=r.followers)||void 0===t?void 0:t.length)||0,following:(null===(n=r.following)||void 0===n?void 0:n.length)||0,pendingRequests:v.length})}})),t=async()=>{const e=ew(lb(sR,`users/${r.uid}/followRequests`),ow("timestamp","desc")),t=(await Aw(e)).docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username,timestamp:t.timestamp}}));y(t)};return t(),()=>e()}}),[r,v.length]);const O=async(e,t,n)=>{if(r)try{await Tw(cb(sR,`users/${r.uid}/followRequests`,e)),n?(await _w(cb(sR,`users/${r.uid}/followers`,t),{timestamp:jw()}),await _w(cb(sR,`users/${t}/following`,r.uid),{timestamp:jw()}),MR.success("Follow request accepted")):MR.success("Follow request declined"),y((t=>t.filter((t=>t.id!==e))))}catch(p){console.error("Error handling follow request:",p),MR.error("Failed to process follow request")}};return(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(QL,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Settings"}),p&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:p}),(0,Ve.jsx)(hL,{elevation:0,sx:{borderRadius:2},children:(0,Ve.jsx)(mM,{children:N.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(HO,{component:e.path?Ce:"div",to:e.path,onClick:e.onClick,sx:{"&:hover":{backgroundColor:"action.hover"},textDecoration:"none",color:"inherit",cursor:"pointer"},children:[(0,Ve.jsx)(uO,{children:e.icon}),(0,Ve.jsx)(fO,{primary:e.title,secondary:e.description})]}),n<N.length-1&&(0,Ve.jsx)(bO,{})]},e.title)))})}),(0,Ve.jsxs)(sj,{open:c,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Device Management"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(kZ,{})}),(0,Ve.jsx)(fO,{primary:"Dark Mode",secondary:"Toggle between light and dark mode"}),(0,Ve.jsx)(UO,{children:(0,Ve.jsx)(bZ,{checked:e,onChange:n,color:"primary"})})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsx)(QL,{variant:"subtitle1",sx:{px:2,py:1,fontWeight:"bold"},children:"Connected Devices"}),s.map((e=>(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(fO,{primary:e.name,secondary:`Last active: ${e.lastActive}`}),(0,Ve.jsx)(FP,{edge:"end",onClick:()=>{h(e.id),(async e=>{if(r)try{const t=cb(sR,"users",r.uid);await Sw(t,{devices:Uw(e)}),l(s.filter((t=>t.id!==e))),u(!1),h(null)}catch(t){f("Failed to remove device"),console.error("Error removing device:",t)}})(e.id)},children:(0,Ve.jsx)(bB,{})})]},e.id))),0===s.length&&(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{px:2,py:2},children:"No devices connected"}),(0,Ve.jsx)(DZ,{})]})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>u(!1),children:"Close"})})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4,mt:4},children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Privacy Settings"}),(0,Ve.jsxs)(hL,{elevation:2,sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[m?(0,Ve.jsx)(JX,{color:"primary"}):(0,Ve.jsx)(CZ,{color:"primary"}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:m?"Only approved followers can see your content":"Anyone can see your content"})]})]}),(0,Ve.jsx)(bZ,{checked:m,onChange:async()=>{if(null!==r&&void 0!==r&&r.uid)try{if(await Sw(cb(sR,"users",r.uid),{isPrivate:!m,updatedAt:jw()}),!m)for(const e of v)await O(e.id,e.userId,!0)}catch(p){console.error("Error updating privacy settings:",p),MR.error("Failed to update privacy settings")}},color:"primary"})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:3,mt:2,p:2,bgcolor:"background.default",borderRadius:1},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle2",color:"text.secondary",children:"Followers"}),(0,Ve.jsx)(QL,{variant:"h6",children:b.followers})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle2",color:"text.secondary",children:"Following"}),(0,Ve.jsx)(QL,{variant:"h6",children:b.following})]}),m&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle2",color:"text.secondary",children:"Pending Requests"}),(0,Ve.jsx)(QL,{variant:"h6",children:b.pendingRequests})]})]}),(0,Ve.jsx)(aB,{severity:"info",sx:{mt:2},children:m?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(HO,{button:!0,onClick:async()=>{if(r)try{const e=cb(sR,"users",r.uid),t=await xw(e);if(t.exists()){t.data().verificationCode?E(!0):_(!0)}}catch(p){console.error("Error checking verification code:",p),MR.error("Failed to check verification status")}},children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(IZ,{})}),(0,Ve.jsx)(fO,{primary:"View Registration Source Code",secondary:"Verify your code to view your registration source code"})]})]})]}),(0,Ve.jsxs)(sj,{open:A,onClose:()=>_(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Create Verification Code"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(uU,{label:"Create a verification code",value:k,onChange:e=>C(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>_(!1),children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(r&&k)try{const e=cb(sR,"users",r.uid);await Sw(e,{verificationCode:k}),_(!1),E(!0),MR.success("Verification code created successfully")}catch(p){console.error("Error creating verification code:",p),MR.error("Failed to create verification code")}},variant:"contained",children:"Create"})]})]}),(0,Ve.jsxs)(sj,{open:x,onClose:()=>E(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Verify Code"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(uU,{label:"Enter your verification code",value:S,onChange:e=>T(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>E(!1),children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(r)try{const e=cb(sR,"users",r.uid),t=await xw(e);if(t.exists()){const e=t.data();e.verificationCode===S?(M(e.sourceCodeHash?S:""),L(!0),E(!1),MR.success("Code verified successfully")):MR.error("Invalid verification code")}}catch(p){console.error("Error verifying code:",p),MR.error("Failed to verify code")}},variant:"contained",children:"Verify"})]})]}),(0,Ve.jsxs)(sj,{open:D,onClose:()=>L(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Your Registration Source Code"}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:3,color:"info.main"},children:[(0,Ve.jsx)(_Z,{color:"info"}),(0,Ve.jsx)(QL,{sx:{color:"info.main",fontSize:"1rem"},children:"When your account is used on another device, you will need this Source Code to register your account."})]}),(0,Ve.jsx)(Xe,{sx:{p:2,bgcolor:"background.paper",borderRadius:1,fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"60vh",fontSize:"24px",textAlign:"center"},children:P})]}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>L(!1),children:"Close"})})]}),m&&v.length>0&&(0,Ve.jsxs)(Xe,{sx:{mt:3},children:[(0,Ve.jsx)(QL,{variant:"subtitle1",gutterBottom:!0,children:"Follow Requests"}),(0,Ve.jsx)(mM,{children:v.map((e=>{var t;return(0,Ve.jsxs)(HO,{sx:{bgcolor:"background.paper",borderRadius:1,mb:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(WL,{children:e.username[0]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsxs)(QL,{variant:"subtitle1",children:["@",e.username]}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleDateString()})]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(FP,{color:"success",onClick:()=>O(e.id,e.userId,!0),children:(0,Ve.jsx)(RZ,{})}),(0,Ve.jsx)(FP,{color:"error",onClick:()=>O(e.id,e.userId,!1),children:(0,Ve.jsx)(yB,{})})]})]},e.id)}))})]})]})})},PZ=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],MZ=(0,rL.Ay)(LP,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${MO.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${MO.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${MO.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${MO.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${MO.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),NZ=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=r,f=(0,Le.A)(r,PZ),m=t.useContext(uM),g=t.useMemo((()=>({dense:l||m.dense||!1,alignItems:i,disableGutters:c})),[i,m.dense,l,c]),v=t.useRef(null);(0,yM.A)((()=>{o&&v.current&&v.current.focus()}),[o]);const y=(0,De.A)({},r,{alignItems:i,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=e,l={root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",s&&"selected"]},c=(0,nL.A)(l,PO,n);return(0,De.A)({},n,c)})(y),w=(0,XL.A)(v,n);return(0,Ve.jsx)(uM.Provider,{value:g,children:(0,Ve.jsx)(MZ,(0,De.A)({ref:w,href:f.href||f.to,component:(f.href||f.to)&&"div"===a?"button":a,focusVisibleClassName:(0,Pe.A)(b.focusVisible,d),ownerState:y,className:(0,Pe.A)(b.root,p)},f,{classes:b,children:s}))})})),OZ=NZ,jZ=()=>{const e=Z(),{searchQuery:n}=J(),{db:r,loading:i,error:o}=xV(),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(0);dW(UM().breakpoints.down("sm"));(0,t.useEffect)((()=>{(async()=>{if(n&&r)try{c(!0);const e=[],t=ew(lb(r,"users"),nw("username",">=",n.toLowerCase()),nw("username","<=",n.toLowerCase()+"\uf8ff"),sw(20));(await Aw(t)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"user",data:n})}));const i=ew(lb(r,"posts"),nw("content",">=",n.toLowerCase()),nw("content","<=",n.toLowerCase()+"\uf8ff"),ow("content"),sw(20)),o=await Aw(i);for(const n of o.docs){const t=n.data(),i=(await xw(cb(r,"users",t.authorId))).data();e.push({id:n.id,type:"post",data:{...t,author:i}})}const a=ew(lb(r,"forums"),nw("title",">=",n.toLowerCase()),nw("title","<=",n.toLowerCase()+"\uf8ff"),sw(20));(await Aw(a)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"forum",data:n})}));const l=ew(lb(r,"sideRooms"),nw("name",">=",n.toLowerCase()),nw("name","<=",n.toLowerCase()+"\uf8ff"),sw(20));(await Aw(l)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"sideRoom",data:n})})),s(e)}catch(e){console.error("Error searching:",e),d("Failed to search. Please try again later.")}finally{c(!1)}})()}),[n,r]);const f=a.filter((e=>{switch(h){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return i?(0,Ve.jsx)("div",{children:"Loading..."}):o?(0,Ve.jsxs)("div",{children:["Error: ",o.message]}):r?(0,Ve.jsxs)(HU,{maxWidth:"md",sx:{mt:4},children:[(0,Ve.jsxs)(QL,{variant:"h4",gutterBottom:!0,children:['Search Results for "',n,'"']}),u&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:u}),(0,Ve.jsx)(Xe,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,Ve.jsxs)(g$,{value:h,onChange:(e,t)=>p(t),children:[(0,Ve.jsx)(E$,{label:"Users"}),(0,Ve.jsx)(E$,{label:"Posts"}),(0,Ve.jsx)(E$,{label:"Forums"}),(0,Ve.jsx)(E$,{label:"Side Rooms"})]})}),l?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(SU,{})}):0===f.length?(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,Ve.jsx)(mM,{children:f.map((t=>(0,Ve.jsxs)(OZ,{onClick:()=>(t=>{switch(t.type){case"user":e(`/profile/${t.id}`);break;case"post":e(`/post/${t.id}`);break;case"forum":e(`/forum/${t.id}`);break;case"sideRoom":e(`/side-room/${t.id}`)}})(t),sx:{mb:1,borderRadius:1},children:[(0,Ve.jsx)(QO,{children:"user"===t.type?(0,Ve.jsx)(WL,{src:t.data.avatar}):(0,Ve.jsx)(WL,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,Ve.jsx)(fO,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,Ve.jsx)("div",{children:"Error: Database connection failed"})},FZ=(0,_L.A)((0,Ve.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),UZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),BZ=(0,_L.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var $Z=n(9360);const VZ=e=>(0,Ve.jsxs)($Z.A,{...e,viewBox:"0 0 24 24",children:[(0,Ve.jsx)("path",{d:"M6 4h12M12 19L7 8M12 19L17 8",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ve.jsx)("path",{d:"M4 14C8 10 16 10 20 14",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round"})]}),WZ=()=>{const[e,n]=(0,t.useState)(0),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[p,f]=(0,t.useState)(new Set),m=Z(),{currentUser:g}=ND(),[v,y]=(0,t.useState)(null),b=async()=>{try{const e=ew(lb(sR,"users"),ow("createdAt","desc"),sw(20)),t=(await Aw(e)).docs.map((e=>({id:e.id,...e.data()})));a(t)}catch(v){console.error("Error fetching users:",v)}finally{h(!1)}},w=async()=>{try{const e=ew(lb(sR,"rooms"),ow("createdAt","desc"),sw(20)),t=(await Aw(e)).docs.map((e=>({id:e.id,...e.data()})));l(t)}catch(v){console.error("Error fetching rooms:",v)}};(0,t.useEffect)((()=>{b(),w(),x(),g&&E()}),[g]);const x=async()=>{try{const e=ew(lb(sR,"videos"),ow("timestamp","desc"),sw(20)),t=(await Aw(e)).docs.map((e=>({id:e.id,...e.data()})));u(t)}catch(v){console.error("Error fetching videos:",v)}},E=async()=>{if(g)try{const e=ew(lb(sR,`users/${g.uid}/following`)),t=await Aw(e),n=new Set(t.docs.map((e=>e.id)));f(n)}catch(v){console.error("Error fetching following:",v)}};return d?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,Ve.jsx)(SU,{})}):(0,Ve.jsxs)(HU,{maxWidth:"lg",sx:{mt:4},children:[(0,Ve.jsxs)(Xe,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(FZ,{fontSize:"large",color:"primary"}),(0,Ve.jsx)(QL,{variant:"h4",component:"h1",children:"Discover"})]}),(0,Ve.jsx)(hL,{sx:{p:2,mb:4},children:(0,Ve.jsx)(uU,{fullWidth:!0,placeholder:"Search users and rooms...",value:r,onChange:e=>(async e=>{if(i(e),!g||!sR)return a([]),void l([]);if(e.length<2)return b(),void w();h(!0),y(null);try{const t=lb(sR,"users"),n=e.toLowerCase(),r=ew(t,ow("username"),sw(20)),i=(await Aw(r)).docs.map((e=>({id:e.id,...e.data()}))),o=i.filter((e=>{var t,r;return(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(n))}));a(o);const s=ew(lb(sR,"rooms"),ow("name"),sw(20)),c=(await Aw(s)).docs.map((e=>({id:e.id,...e.data()}))),u=c.filter((e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(n))}));l(u)}catch(v){console.error("Search error:",v),y(`Failed to perform search: ${v.message}`),MR.error(`Search failed: ${v.code||v.message}`),b(),w()}finally{h(!1)}})(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(sW,{position:"start",children:(0,Ve.jsx)(UZ,{})}),endAdornment:d&&(0,Ve.jsx)(sW,{position:"end",children:(0,Ve.jsx)(SU,{size:20})})}})}),(0,Ve.jsx)(Xe,{sx:{width:"100%",mb:4},children:(0,Ve.jsxs)(g$,{value:e,onChange:(e,t)=>{n(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",children:[(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(BZ,{}),label:"People"}),(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(tZ,{}),label:"Rooms"}),(0,Ve.jsx)(E$,{icon:(0,Ve.jsx)(VZ,{}),label:"Vibits"})]})}),0===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(hL,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(QL,{variant:"h6",component:"h2",children:"Users"})}),(0,Ve.jsx)(mM,{children:0===o.length?(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(fO,{primary:"No users found",secondary:"Try a different search term"})}):o.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(HO,{secondaryAction:e.id!==(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(FP,{edge:"end",onClick:()=>m(`/messages/${e.id}`),title:"Send message",children:(0,Ve.jsx)(GX,{})}),(0,Ve.jsx)(FP,{edge:"end",onClick:()=>(async e=>{if(g&&e!==g.uid)try{const t=cb(sR,`users/${g.uid}/following`,e),n=cb(sR,`users/${e}/followers`,g.uid);if(p.has(e))await Tw(t),await Tw(n),f((t=>{const n=new Set(t);return n.delete(e),n})),MR.success("Unfollowed user");else{await _w(t,{timestamp:jw()}),await _w(n,{timestamp:jw()}),f((t=>new Set(t).add(e)));const r={type:"follow",senderId:g.uid,senderName:g.displayName||"Anonymous",senderAvatar:g.photoURL||"",recipientId:e,content:`${g.displayName||"Someone"} started following you`,createdAt:jw(),isRead:!1};await kw(lb(sR,"users",e,"notifications"),r),MR.success("Followed user")}}catch(v){console.error("Error toggling follow:",v),MR.error("Failed to update follow status")}})(e.id),title:p.has(e.id)?"Unfollow user":"Follow user",color:p.has(e.id)?"primary":"default",children:(0,Ve.jsx)(YX,{})})]}),children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.profilePic,alt:e.name,children:e.name[0]})}),(0,Ve.jsx)(fO,{primary:e.name,secondary:(0,Ve.jsxs)(t.Fragment,{children:["@",e.username,e.bio&&(0,Ve.jsx)(QL,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.bio.length>100?`${e.bio.substring(0,100)}...`:e.bio})]}),onClick:()=>{return t=e.id,void m(`/profile/${t}`);var t},sx:{cursor:"pointer"}})]}),n<o.length-1&&(0,Ve.jsx)(bO,{})]},e.id)))})]})}),1===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(hL,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(QL,{variant:"h6",component:"h2",children:"Rooms"})}),(0,Ve.jsx)(mM,{children:0===s.length?(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(fO,{primary:"No rooms found",secondary:"Try a different search term"})}):s.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(HO,{secondaryAction:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(Vq,{icon:(0,Ve.jsx)(BZ,{}),label:`${e.memberCount} members`,size:"small"}),e.isPrivate&&(0,Ve.jsx)(Vq,{label:"Private",color:"secondary",size:"small"})]}),children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{children:(0,Ve.jsx)(tZ,{})})}),(0,Ve.jsx)(fO,{primary:e.name,secondary:(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(QL,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description}),(0,Ve.jsxs)(QL,{component:"span",variant:"caption",color:"text.secondary",children:[e.shareCount," shares"]})]}),onClick:()=>{return t=e.id,void m(`/room/${t}`);var t},sx:{cursor:"pointer"}})]}),n<s.length-1&&(0,Ve.jsx)(bO,{})]},e.id)))})]})}),2===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(hL,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsxs)(QL,{variant:"h6",component:"h2",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(VZ,{color:"primary"})," Vibits"]})}),0===c.length?(0,Ve.jsxs)(Xe,{sx:{p:4,textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h6",color:"text.secondary",children:"No videos found"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Check back later or upload your own!"}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",sx:{mt:2},onClick:()=>m("/vibits"),startIcon:(0,Ve.jsx)(VZ,{}),children:"Go to Vibits"})]}):(0,Ve.jsx)(zV,{container:!0,spacing:2,sx:{p:2},children:c.map((e=>(0,Ve.jsx)(zV,{item:!0,xs:12,sm:6,md:4,children:(0,Ve.jsxs)(IX,{sx:{position:"relative"},children:[(0,Ve.jsx)(OX,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)(Xe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:1,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Ve.jsxs)(QL,{variant:"subtitle2",children:["@",e.username]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(QX,{fontSize:"small"}),(0,Ve.jsx)(QL,{variant:"caption",sx:{ml:.5},children:e.likes})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(XX,{fontSize:"small"}),(0,Ve.jsx)(QL,{variant:"caption",sx:{ml:.5},children:e.comments})]})]})]})})]},e.id)},e.id)))})]})})]})},zZ=()=>{const{user:e}=ND(),{db:n}=xV(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(n&&e)try{const t=Cw(ew(lb(n,"messages"),nw("participants","array-contains",e.uid),ow("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t),u(!1)}));return()=>t()}catch(t){h("Failed to fetch messages"),console.error("Error fetching messages:",t),u(!1)}}),[n,e]);return c?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(SU,{})}):d?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(QL,{color:"error",children:d})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(QL,{variant:"h4",gutterBottom:!0,children:"Messages"}),(0,Ve.jsxs)(Xe,{mb:3,children:[(0,Ve.jsx)(uU,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Type your message...",value:o,onChange:e=>a(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:async()=>{if(n&&e&&s&&o.trim())try{await kw(lb(n,"messages"),{text:o,senderId:e.uid,receiverId:s,timestamp:new Date,read:!1,participants:[e.uid,s]}),a("")}catch(t){h("Failed to send message"),console.error("Error sending message:",t)}},disabled:!o.trim()||!s,children:"Send"})]}),(0,Ve.jsxs)(mM,{children:[r.map((n=>{var r;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:n.senderId===(null===e||void 0===e?void 0:e.uid)&&(null===e||void 0===e?void 0:e.photoURL)||void 0})}),(0,Ve.jsx)(fO,{primary:n.text,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(QL,{component:"span",variant:"body2",color:"text.primary",children:n.senderId===(null===e||void 0===e?void 0:e.uid)?"You":"Other User"})," \u2014 ",new Date(null===(r=n.timestamp)||void 0===r?void 0:r.toDate()).toLocaleString()]})})]}),(0,Ve.jsx)(bO,{})]},n.id)})),0===r.length&&(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"No messages yet"})]})]})};var HZ=n(1014);function qZ(e){return(0,sL.Ay)("MuiTooltip",e)}const GZ=(0,Ge.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),KZ=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const YZ=(0,rL.Ay)(rq,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${GZ.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${GZ.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${GZ.arrow}`]:(0,De.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${GZ.arrow}`]:(0,De.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),QZ=(0,rL.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,iL.A)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,oL.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:(r=16/14,Math.round(1e5*r)/1e5)+"em",fontWeight:t.typography.fontWeightRegular},{[`.${GZ.popper}[data-popper-placement*="left"] &`]:(0,De.A)({transformOrigin:"right center"},n.isRtl?(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${GZ.popper}[data-popper-placement*="right"] &`]:(0,De.A)({transformOrigin:"left center"},n.isRtl?(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${GZ.popper}[data-popper-placement*="top"] &`]:(0,De.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${GZ.popper}[data-popper-placement*="bottom"] &`]:(0,De.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),XZ=(0,rL.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,oL.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let ZZ=!1;const JZ=new dP.E;let eJ={x:0,y:0};function tJ(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t&&t(n,...i),e(n,...i)}}const nJ=t.forwardRef((function(e,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w,x;const E=(0,Ze.b)({props:e,name:"MuiTooltip"}),{arrow:A=!1,children:_,components:S={},componentsProps:T={},describeChild:k=!1,disableFocusListener:C=!1,disableHoverListener:I=!1,disableInteractive:R=!1,disableTouchListener:D=!1,enterDelay:L=100,enterNextDelay:P=0,enterTouchDelay:M=700,followCursor:N=!1,id:O,leaveDelay:j=0,leaveTouchDelay:F=1500,onClose:U,onOpen:B,open:$,placement:V="bottom",PopperComponent:W,PopperProps:z={},slotProps:H={},slots:q={},title:G,TransitionComponent:K=GM,TransitionProps:Y}=E,Q=(0,Le.A)(E,KZ),X=t.isValidElement(_)?_:(0,Ve.jsx)("span",{children:_}),Z=UM(),J=qD(),[ee,te]=t.useState(),[ne,re]=t.useState(null),ie=t.useRef(!1),oe=R||N,ae=(0,dP.A)(),se=(0,dP.A)(),le=(0,dP.A)(),ce=(0,dP.A)(),[ue,de]=(0,FF.A)({controlled:$,default:!1,name:"Tooltip",state:"open"});let he=ue;const pe=(0,HZ.A)(O),fe=t.useRef(),me=(0,ZL.A)((()=>{void 0!==fe.current&&(document.body.style.WebkitUserSelect=fe.current,fe.current=void 0),ce.clear()}));t.useEffect((()=>me),[me]);const ge=e=>{JZ.clear(),ZZ=!0,de(!0),B&&!he&&B(e)},ve=(0,ZL.A)((e=>{JZ.start(800+j,(()=>{ZZ=!1})),de(!1),U&&he&&U(e),ae.start(Z.transitions.duration.shortest,(()=>{ie.current=!1}))})),ye=e=>{ie.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),se.clear(),le.clear(),L||ZZ&&P?se.start(ZZ?P:L,(()=>{ge(e)})):ge(e))},be=e=>{se.clear(),le.start(j,(()=>{ve(e)}))},{isFocusVisibleRef:we,onBlur:xe,onFocus:Ee,ref:Ae}=(0,JL.A)(),[,_e]=t.useState(!1),Se=e=>{xe(e),!1===we.current&&(_e(!1),be(e))},Te=e=>{ee||te(e.currentTarget),Ee(e),!0===we.current&&(_e(!0),ye(e))},ke=e=>{ie.current=!0;const t=X.props;t.onTouchStart&&t.onTouchStart(e)},Ce=e=>{ke(e),le.clear(),ae.clear(),me(),fe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(M,(()=>{document.body.style.WebkitUserSelect=fe.current,ye(e)}))},Ie=e=>{X.props.onTouchEnd&&X.props.onTouchEnd(e),me(),le.start(F,(()=>{ve(e)}))};t.useEffect((()=>{if(he)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}}),[ve,he]);const Re=(0,XL.A)(CM(X),Ae,te,n);G||0===G||(he=!1);const Me=t.useRef(),Ne={},Oe="string"===typeof G;k?(Ne.title=he||!Oe||I?null:G,Ne["aria-describedby"]=he?pe:null):(Ne["aria-label"]=Oe?G:null,Ne["aria-labelledby"]=he&&!Oe?pe:null);const je=(0,De.A)({},Ne,Q,X.props,{className:(0,Pe.A)(Q.className,X.props.className),onTouchStart:ke,ref:Re},N?{onMouseMove:e=>{const t=X.props;t.onMouseMove&&t.onMouseMove(e),eJ={x:e.clientX,y:e.clientY},Me.current&&Me.current.update()}}:{});const Fe={};D||(je.onTouchStart=Ce,je.onTouchEnd=Ie),I||(je.onMouseOver=tJ(ye,je.onMouseOver),je.onMouseLeave=tJ(be,je.onMouseLeave),oe||(Fe.onMouseOver=ye,Fe.onMouseLeave=be)),C||(je.onFocus=tJ(Te,je.onFocus),je.onBlur=tJ(Se,je.onBlur),oe||(Fe.onFocus=Te,Fe.onBlur=Se));const Ue=t.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=z.popperOptions)&&e.modifiers&&(t=t.concat(z.popperOptions.modifiers)),(0,De.A)({},z.popperOptions,{modifiers:t})}),[ne,z]),Be=(0,De.A)({},E,{isRtl:J,arrow:A,disableInteractive:oe,placement:V,PopperComponentProp:W,touch:ie.current}),$e=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,iL.A)(o.split("-")[0])}`],arrow:["arrow"]};return(0,nL.A)(a,qZ,t)})(Be),We=null!=(r=null!=(i=q.popper)?i:S.Popper)?r:YZ,ze=null!=(o=null!=(a=null!=(s=q.transition)?s:S.Transition)?a:K)?o:GM,He=null!=(l=null!=(c=q.tooltip)?c:S.Tooltip)?l:QZ,qe=null!=(u=null!=(d=q.arrow)?d:S.Arrow)?u:XZ,Ge=IL(We,(0,De.A)({},z,null!=(h=H.popper)?h:T.popper,{className:(0,Pe.A)($e.popper,null==z?void 0:z.className,null==(p=null!=(f=H.popper)?f:T.popper)?void 0:p.className)}),Be),Ke=IL(ze,(0,De.A)({},Y,null!=(m=H.transition)?m:T.transition),Be),Ye=IL(He,(0,De.A)({},null!=(g=H.tooltip)?g:T.tooltip,{className:(0,Pe.A)($e.tooltip,null==(v=null!=(y=H.tooltip)?y:T.tooltip)?void 0:v.className)}),Be),Qe=IL(qe,(0,De.A)({},null!=(b=H.arrow)?b:T.arrow,{className:(0,Pe.A)($e.arrow,null==(w=null!=(x=H.arrow)?x:T.arrow)?void 0:w.className)}),Be);return(0,Ve.jsxs)(t.Fragment,{children:[t.cloneElement(X,je),(0,Ve.jsx)(We,(0,De.A)({as:null!=W?W:rq,placement:V,anchorEl:N?{getBoundingClientRect:()=>({top:eJ.y,left:eJ.x,right:eJ.x,bottom:eJ.y,width:0,height:0})}:ee,popperRef:Me,open:!!ee&&he,id:pe,transition:!0},Fe,Ge,{popperOptions:Ue,children:e=>{let{TransitionProps:t}=e;return(0,Ve.jsx)(ze,(0,De.A)({timeout:Z.transitions.duration.shorter},t,Ke,{children:(0,Ve.jsxs)(He,(0,De.A)({},Ye,{children:[G,A?(0,Ve.jsx)(qe,(0,De.A)({},Qe,{ref:re})):null]}))}))}}))]})})),rJ=nJ;var iJ=n(782);const oJ=["component","direction","spacing","divider","children","className","useFlexGap"],aJ=(0,je.A)(),sJ=UU("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function lJ(e){return CU({props:e,name:"MuiStack",defaultTheme:aJ})}function cJ(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,o)=>(e.push(i),o<r.length-1&&e.push(t.cloneElement(n,{key:`separator-${o}`})),e)),[])}const uJ=e=>{let{ownerState:t,theme:n}=e,r=(0,De.A)({display:"flex",flexDirection:"column"},(0,LV.NI)({theme:n},(0,LV.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,iJ.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,LV.kW)({values:t.direction,base:i}),a=(0,LV.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const s=(n,r)=>{return t.useFlexGap?{gap:(0,iJ._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,iJ._W)(e,n)}};var i};r=(0,lj.A)(r,(0,LV.NI)({theme:n},a,s))}return r=(0,LV.iZ)(n.breakpoints,r),r};const dJ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=sJ,useThemeProps:r=lJ,componentName:i="MuiStack"}=e,o=n(uJ),a=t.forwardRef((function(e,t){const n=r(e),a=(0,Oe.A)(n),{component:s="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=a,f=(0,Le.A)(a,oJ),m={direction:l,spacing:c,useFlexGap:p},g=(0,nL.A)({root:["root"]},(e=>(0,sL.Ay)(i,e)),{});return(0,Ve.jsx)(o,(0,De.A)({as:s,ownerState:m,ref:t,className:(0,Pe.A)(g.root,h)},f,{children:u?cJ(d,u):d}))}));return a}({createStyledComponent:(0,rL.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,Ze.b)({props:e,name:"MuiStack"})}),hJ=dJ;function pJ(e){return(0,sL.Ay)("MuiFormControlLabel",e)}const fJ=(0,Ge.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),mJ=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],gJ=(0,rL.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${fJ.label}`]:t.label},t.root,t[`labelPlacement${(0,iL.A)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${fJ.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${fJ.label}`]:{[`&.${fJ.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})})),vJ=(0,rL.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${fJ.error}`]:{color:(t.vars||t).palette.error.main}}})),yJ=t.forwardRef((function(e,n){var r,i;const o=(0,Ze.b)({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:f={}}=o,m=(0,Le.A)(o,mJ),g=bj(),v=null!=(r=null!=c?c:l.props.disabled)?r:null==g?void 0:g.disabled,y=null!=p?p:l.props.required,b={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof o[e]&&(b[e]=o[e])}));const w=vj({props:o,muiFormControl:g,states:["error"]}),x=(0,De.A)({},o,{disabled:v,labelPlacement:h,required:y,error:w.error}),E=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,a={root:["root",n&&"disabled",`labelPlacement${(0,iL.A)(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,nL.A)(a,pJ,t)})(x),A=null!=(i=f.typography)?i:s.typography;let _=d;return null==_||_.type===QL||u||(_=(0,Ve.jsx)(QL,(0,De.A)({component:"span"},A,{className:(0,Pe.A)(E.label,null==A?void 0:A.className),children:_}))),(0,Ve.jsxs)(gJ,(0,De.A)({className:(0,Pe.A)(E.root,a),ownerState:x,ref:n},m,{children:[t.cloneElement(l,b),y?(0,Ve.jsxs)(hJ,{display:"block",children:[_,(0,Ve.jsxs)(vJ,{ownerState:x,"aria-hidden":!0,className:E.asterisk,children:["\u2009","*"]})]}):_]}))})),bJ=yJ,wJ=e=>{let{open:n,onClose:r}=e;const{currentUser:i}=ND(),o=Z(),[a,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)([]),[w,x]=(0,t.useState)(""),[E,A]=(0,t.useState)(""),[_,S]=(0,t.useState)(50),[T,k]=(0,t.useState)([]),[C,I]=(0,t.useState)(""),[R,D]=(0,t.useState)(!1),[L,P]=(0,t.useState)(4),[M,N]=(0,t.useState)(!1),[O,j]=(0,t.useState)(2),F=()=>{w.trim()&&!y.includes(w.trim())&&(b([...y,w.trim()]),x(""))},U=()=>{C.trim()&&!T.includes(C.trim())&&(k([...T,C.trim()]),I(""))};return(0,Ve.jsxs)(sj,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Create Side Room"}),(0,Ve.jsxs)(vB,{children:[l&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:l}),(0,Ve.jsx)(uU,{autoFocus:!0,margin:"dense",label:"Room Name",type:"text",fullWidth:!0,value:u,onChange:e=>d(e.target.value),required:!0}),(0,Ve.jsx)(uU,{margin:"dense",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,value:h,onChange:e=>p(e.target.value)}),(0,Ve.jsxs)(wF,{fullWidth:!0,margin:"dense",children:[(0,Ve.jsx)(mF,{children:"Category"}),(0,Ve.jsxs)(iU,{value:E,onChange:e=>A(e.target.value),label:"Category",children:[(0,Ve.jsx)(aO,{value:"general",children:"General"}),(0,Ve.jsx)(aO,{value:"gaming",children:"Gaming"}),(0,Ve.jsx)(aO,{value:"music",children:"Music"}),(0,Ve.jsx)(aO,{value:"movies",children:"Movies & TV"}),(0,Ve.jsx)(aO,{value:"sports",children:"Sports"}),(0,Ve.jsx)(aO,{value:"tech",children:"Technology"}),(0,Ve.jsx)(aO,{value:"art",children:"Art & Design"}),(0,Ve.jsx)(aO,{value:"education",children:"Education"}),(0,Ve.jsx)(aO,{value:"other",children:"Other"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",children:"Tags"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:y.map((e=>(0,Ve.jsx)(Vq,{label:e,onDelete:()=>{return t=e,void b(y.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(uU,{size:"small",value:w,onChange:e=>x(e.target.value),placeholder:"Add tag",onKeyPress:e=>"Enter"===e.key&&F()}),(0,Ve.jsx)(FP,{onClick:F,size:"small",children:(0,Ve.jsx)(VB,{})})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",children:"Rules"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:T.map((e=>(0,Ve.jsx)(Vq,{label:e,onDelete:()=>{return t=e,void k(T.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(uU,{size:"small",value:C,onChange:e=>I(e.target.value),placeholder:"Add rule",onKeyPress:e=>"Enter"===e.key&&U()}),(0,Ve.jsx)(FP,{onClick:U,size:"small",children:(0,Ve.jsx)(VB,{})})]})]}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:f,onChange:e=>m(e.target.checked)}),label:"Private Room"}),f&&(0,Ve.jsx)(uU,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:g,onChange:e=>v(e.target.value),required:!0}),(0,Ve.jsx)(uU,{margin:"dense",label:"Maximum Participants",type:"number",fullWidth:!0,value:_,onChange:e=>S(Number(e.target.value)),inputProps:{min:2,max:100}}),(0,Ve.jsx)(bO,{sx:{my:2}}),(0,Ve.jsx)(QL,{variant:"h6",sx:{mb:2},children:"Live Session Settings"}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:R,onChange:e=>D(e.target.checked)}),label:"Enable Live Sessions"}),R&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(uU,{margin:"dense",label:"Maximum Live Participants",type:"number",fullWidth:!0,value:L,onChange:e=>P(Number(e.target.value)),inputProps:{min:1,max:10},helperText:"Maximum number of people who can join the live session"}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:M,onChange:e=>N(e.target.checked)}),label:"Allow Guest Speakers"}),M&&(0,Ve.jsx)(uU,{margin:"dense",label:"Guest Speaker Limit",type:"number",fullWidth:!0,value:O,onChange:e=>j(Number(e.target.value)),inputProps:{min:1,max:5},helperText:"Maximum number of guest speakers allowed in a session"})]})]}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:r,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(i&&sR)if(u.trim())if(!f||g.trim()){s(!0),c("");try{const e=await xw(cb(sR,"users",i.uid));if(!e.exists())throw new Error("User data not found");const t=e.data(),n={userId:i.uid,username:t.username||i.displayName||"Unknown User",displayName:t.displayName||t.username||i.displayName||"Unknown User",avatar:t.avatar||t.photoURL||i.photoURL||""},a=new Date,s={name:u.trim(),description:h.trim(),ownerId:i.uid,owner:n,members:[{...n,role:"owner",joinedAt:a}],memberCount:1,createdAt:a,isPrivate:f,password:f?g.trim():null,tags:y,category:E,maxParticipants:_,rules:T,isLive:!1,liveParticipants:[],activeUsers:0,bannedUsers:[],enableLiveSessions:R,maxLiveParticipants:L,allowGuestSpeakers:M,guestSpeakerLimit:O,liveSettings:{audioEnabled:!0,videoEnabled:!1,screenSharingEnabled:!1,raiseHandEnabled:!0,chatEnabled:!0,reactionsEnabled:!0}},l=await kw(lb(sR,"sideRooms"),s),c=cb(sR,"users",i.uid);await Sw(c,{sideRooms:Fw(l.id)}),r(),o(`/side-room/${l.id}`)}catch(e){console.error("Error creating room:",e),c("Failed to create room. Please try again.")}finally{s(!1)}}else c("Password is required for private rooms");else c("Room name is required")},variant:"contained",disabled:a,children:a?"Creating...":"Create Room"})]})]})},xJ=["All","Gaming","Music","Art","Technology","Sports","Education","Entertainment","Social","Other"],EJ=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(""),[x,E]=(0,t.useState)("All"),[A,_]=(0,t.useState)("newest"),S=Z(),{currentUser:T}=ND();(0,t.useEffect)((()=>{if(!sR)return l("Firestore not initialized"),void a(!1);try{a(!0);const e=lb(sR,"sideRooms"),t=Cw(ew(e,ow("createdAt","desc")),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",description:t.description,createdAt:t.createdAt,lastActive:t.lastActive,memberCount:t.memberCount||0,maxMembers:t.maxMembers||50,members:t.members,isPrivate:t.isPrivate,password:t.password,genre:t.genre,tags:t.tags,category:t.category}})),r=t.filter((e=>!e.isPrivate));n(r),a(!1),l(null)}),(e=>{console.error("Error fetching side rooms:",e),l("Error fetching rooms. Please check permissions or network."),a(!1)}));return()=>t()}catch(e){console.error("Error setting up side rooms query:",e),l(`Error setting up query: ${e.message}`),a(!1)}}),[sR]),(0,t.useEffect)((()=>{let t=[...e];b&&(t=t.filter((e=>e.name.toLowerCase().includes(b.toLowerCase())||e.description&&e.description.toLowerCase().includes(b.toLowerCase())))),"All"!==x&&(t=t.filter((e=>e.category===x||e.genre===x||e.tags&&e.tags.includes(x)))),t.sort(((e,t)=>{var n,r,i,o;const a=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0,s=(null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0,l=(null===(i=e.lastActive)||void 0===i?void 0:i.toMillis())||0,c=(null===(o=t.lastActive)||void 0===o?void 0:o.toMillis())||0;switch(A){case"newest":return s-a;case"oldest":return a-s;case"members":return(t.memberCount||0)-(e.memberCount||0);case"activity":return c-l;default:return 0}})),i(t)}),[e,b,x,A]);return o?(0,Ve.jsx)("div",{children:"Loading..."}):s?(0,Ve.jsxs)("div",{children:["Error: ",s]}):(0,Ve.jsxs)(Xe,{sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",children:"Side Rooms \ud83c\udfad"}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",startIcon:(0,Ve.jsx)(VB,{}),onClick:()=>u(!0),children:"Create Room"})]}),c&&(0,Ve.jsx)(wJ,{open:c,onClose:()=>u(!1)}),(0,Ve.jsx)(hL,{sx:{p:2,mb:3},children:(0,Ve.jsxs)(zV,{container:!0,spacing:2,alignItems:"center",children:[(0,Ve.jsx)(zV,{item:!0,xs:12,md:4,children:(0,Ve.jsx)(uU,{fullWidth:!0,placeholder:"Search rooms by name or genre...",value:b,onChange:e=>w(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(sW,{position:"start",children:(0,Ve.jsx)(UZ,{})})}})}),(0,Ve.jsx)(zV,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Genre/Category"}),(0,Ve.jsx)(iU,{value:x,label:"Genre/Category",onChange:e=>E(e.target.value),children:xJ.map((e=>(0,Ve.jsx)(aO,{value:e,children:e},e)))})]})}),(0,Ve.jsx)(zV,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Sort by"}),(0,Ve.jsxs)(iU,{value:A,label:"Sort by",onChange:e=>_(e.target.value),children:[(0,Ve.jsx)(aO,{value:"newest",children:"Newest First"}),(0,Ve.jsx)(aO,{value:"oldest",children:"Oldest First"}),(0,Ve.jsx)(aO,{value:"members",children:"Most Members"}),(0,Ve.jsx)(aO,{value:"activity",children:"Most Active"})]})]})})]})}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:0===r.length?(0,Ve.jsx)(QL,{variant:"body1",sx:{width:"100%",textAlign:"center",mt:4},children:"No rooms found matching your criteria"}):r.map((e=>{var t;return(0,Ve.jsxs)(IX,{sx:{width:300,display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)($X,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,Ve.jsx)(QL,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.name}),e.isPrivate&&(0,Ve.jsx)(rJ,{title:"Private Room",children:(0,Ve.jsx)(JX,{fontSize:"small"})})]}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(e.category||e.genre)&&(0,Ve.jsx)(Vq,{size:"small",label:e.category||e.genre,color:"secondary",variant:"outlined"}),null===(t=e.tags)||void 0===t?void 0:t.map((e=>(0,Ve.jsx)(Vq,{size:"small",label:e,variant:"outlined"},e)))]}),(0,Ve.jsx)(Vq,{size:"small",icon:(0,Ve.jsx)(tZ,{}),label:`${e.memberCount||0} members`,variant:"outlined"})]}),(0,Ve.jsx)(qX,{children:(0,Ve.jsx)(lM,{fullWidth:!0,variant:"contained",onClick:()=>(async e=>{if(sR&&T)if(e.isPrivate)f(e),h(!0);else try{y(!0);const t=cb(sR,"sideRooms",e.id);await Ow(sR,(async e=>{const n=await e.get(t);if(!n.exists())throw new Error("Room not found");(n.data().members||[]).some((e=>e.userId===T.uid))?e.update(t,{activeUsers:Bw(1),lastActive:jw()}):e.update(t,{members:Fw({userId:T.uid,username:T.displayName||"Anonymous",avatar:T.photoURL||"",role:"member",joinedAt:new Date}),memberCount:Bw(1),activeUsers:Bw(1),lastActive:jw()})})),MR.success("Joined room successfully"),S(`/side-room/${e.id}`)}catch(s){console.error("Error joining room:",s),s instanceof Error?MR.error(s.message):MR.error("Failed to join room")}finally{y(!1)}else MR.error("Not authenticated")})(e),disabled:v||e.memberCount>=e.maxMembers,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:v?(0,Ve.jsx)(SU,{size:24}):e.memberCount>=e.maxMembers?"Room Full":"Join Room"})})]},e.id)}))}),(0,Ve.jsxs)(sj,{open:d,onClose:()=>!v&&h(!1),children:[(0,Ve.jsx)(hB,{children:"Enter Room Password"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(uU,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:m,onChange:e=>g(e.target.value),disabled:v})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>h(!1),disabled:v,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(p&&sR&&T)if(m===p.password)try{y(!0);const e=cb(sR,"sideRooms",p.id);await Ow(sR,(async t=>{const n=await t.get(e);if(!n.exists())throw new Error("Room not found");(n.data().members||[]).some((e=>e.userId===T.uid))?t.update(e,{activeUsers:Bw(1),lastActive:jw()}):t.update(e,{members:Fw({userId:T.uid,username:T.displayName||"Anonymous",avatar:T.photoURL||"",role:"member",joinedAt:new Date}),memberCount:Bw(1),activeUsers:Bw(1),lastActive:jw()})})),MR.success("Joined room successfully"),h(!1),g(""),f(null),S(`/side-room/${p.id}`)}catch(s){console.error("Error joining room:",s),MR.error("Failed to join room")}finally{y(!1)}else MR.error("Incorrect password")},variant:"contained",disabled:v||!m,children:v?(0,Ve.jsx)(SU,{size:24}):"Join"})]})]})]})};var AJ=n(1375);const _J=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))};function SJ(e,t){return e-t}function TJ(e,t){var n;const{index:r}=null!=(n=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null))?n:{};return r}function kJ(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function CJ(e,t,n){return 100*(e-t)/(n-t)}function IJ(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function RJ(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(SJ)}function DJ(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;var i,o;const a=(0,KM.A)(t.current);var s;null!=(i=t.current)&&i.contains(a.activeElement)&&Number(null==a||null==(o=a.activeElement)?void 0:o.getAttribute("data-index"))===n||(null==(s=t.current)||s.querySelector(`[type="range"][data-index="${n}"]`).focus());r&&r(n)}function LJ(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&_J(e,t)}const PJ={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},MJ=e=>e;let NJ;function OJ(){return void 0===NJ&&(NJ="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),NJ}function jJ(e){const{"aria-labelledby":n,defaultValue:r,disabled:i=!1,disableSwap:o=!1,isRtl:a=!1,marks:s=!1,max:l=100,min:c=0,name:u,onChange:d,onChangeCommitted:h,orientation:p="horizontal",rootRef:f,scale:m=MJ,step:g=1,shiftStep:v=10,tabIndex:y,value:b}=e,w=t.useRef(void 0),[x,E]=t.useState(-1),[A,_]=t.useState(-1),[S,T]=t.useState(!1),k=t.useRef(0),[C,I]=(0,yq.A)({controlled:b,default:null!=r?r:c,name:"Slider"}),R=d&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:u}}),d(i,t,n)}),D=Array.isArray(C);let L=D?C.slice().sort(SJ):[C];L=L.map((e=>null==e?c:(0,SB.A)(e,c,l)));const P=!0===s&&null!==g?[...Array(Math.floor((l-c)/g)+1)].map(((e,t)=>({value:c+g*t}))):s||[],M=P.map((e=>e.value)),{isFocusVisibleRef:N,onBlur:O,onFocus:j,ref:F}=(0,AJ.A)(),[U,B]=t.useState(-1),$=t.useRef(null),V=(0,kL.A)(F,$),W=(0,kL.A)(f,V),z=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));j(t),!0===N.current&&B(r),_(r),null==e||null==(n=e.onFocus)||n.call(e,t)},H=e=>t=>{var n;O(t),!1===N.current&&B(-1),_(-1),null==e||null==(n=e.onBlur)||n.call(e,t)},q=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=L[n],i=M.indexOf(r);let a=t;if(P&&null==g){const e=M[M.length-1];a=a>e?e:a<M[0]?M[0]:a<r?M[i-1]:M[i+1]}if(a=(0,SB.A)(a,c,l),D){o&&(a=(0,SB.A)(a,L[n-1]||-1/0,L[n+1]||1/0));const e=a;a=RJ({values:L,newValue:a,index:n});let t=n;o||(t=a.indexOf(e)),DJ({sliderRef:$,activeIndex:t})}I(a),B(n),R&&!LJ(a,C)&&R(e,a,n),h&&h(e,a)},G=e=>t=>{var n;if(null!==g){const e=Number(t.currentTarget.getAttribute("data-index")),n=L[e];let r=null;("ArrowLeft"===t.key||"ArrowDown"===t.key)&&t.shiftKey||"PageDown"===t.key?r=Math.max(n-v,c):(("ArrowRight"===t.key||"ArrowUp"===t.key)&&t.shiftKey||"PageUp"===t.key)&&(r=Math.min(n+v,l)),null!==r&&(q(t,r),t.preventDefault())}null==e||null==(n=e.onKeyDown)||n.call(e,t)};(0,JM.A)((()=>{var e;i&&$.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[i]),i&&-1!==x&&E(-1),i&&-1!==U&&B(-1);const K=t.useRef(void 0);let Y=p;a&&"horizontal"===p&&(Y+="-reverse");const Q=e=>{let{finger:t,move:n=!1}=e;const{current:r}=$,{width:i,height:a,bottom:s,left:u}=r.getBoundingClientRect();let d,h;if(d=0===Y.indexOf("vertical")?(s-t.y)/a:(t.x-u)/i,-1!==Y.indexOf("-reverse")&&(d=1-d),h=function(e,t,n){return(n-t)*e+t}(d,c,l),g)h=IJ(h,g,c);else{const e=TJ(M,h);h=M[e]}h=(0,SB.A)(h,c,l);let p=0;if(D){p=n?K.current:TJ(L,h),o&&(h=(0,SB.A)(h,L[p-1]||-1/0,L[p+1]||1/0));const e=h;h=RJ({values:L,newValue:h,index:p}),o&&n||(p=h.indexOf(e),K.current=p)}return{newValue:h,activeIndex:p}},X=(0,dN.A)((e=>{const t=kJ(e,w);if(!t)return;if(k.current+=1,"mousemove"===e.type&&0===e.buttons)return void Z(e);const{newValue:n,activeIndex:r}=Q({finger:t,move:!0});DJ({sliderRef:$,activeIndex:r,setActive:E}),I(n),!S&&k.current>2&&T(!0),R&&!LJ(n,C)&&R(e,n,r)})),Z=(0,dN.A)((e=>{const t=kJ(e,w);if(T(!1),!t)return;const{newValue:n}=Q({finger:t,move:!0});E(-1),"touchend"===e.type&&_(-1),h&&h(e,n),w.current=void 0,ee()})),J=(0,dN.A)((e=>{if(i)return;OJ()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(w.current=t.identifier);const n=kJ(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=Q({finger:n});DJ({sliderRef:$,activeIndex:r,setActive:E}),I(t),R&&!LJ(t,C)&&R(e,t,r)}k.current=0;const r=(0,KM.A)($.current);r.addEventListener("touchmove",X,{passive:!0}),r.addEventListener("touchend",Z,{passive:!0})})),ee=t.useCallback((()=>{const e=(0,KM.A)($.current);e.removeEventListener("mousemove",X),e.removeEventListener("mouseup",Z),e.removeEventListener("touchmove",X),e.removeEventListener("touchend",Z)}),[Z,X]);t.useEffect((()=>{const{current:e}=$;return e.addEventListener("touchstart",J,{passive:OJ()}),()=>{e.removeEventListener("touchstart",J),ee()}}),[ee,J]),t.useEffect((()=>{i&&ee()}),[i,ee]);const te=CJ(D?L[0]:c,c,l),ne=CJ(L[L.length-1],c,l)-te,re=e=>t=>{var n;null==(n=e.onMouseLeave)||n.call(e,t),_(-1)};return{active:x,axis:Y,axisProps:PJ,dragging:S,focusedThumbIndex:U,getHiddenInputProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;const o=DL(t),s={onChange:(d=o||{},e=>{var t;null==(t=d.onChange)||t.call(d,e),q(e,e.target.valueAsNumber)}),onFocus:z(o||{}),onBlur:H(o||{}),onKeyDown:G(o||{})};var d;const h=(0,De.A)({},o,s);return(0,De.A)({tabIndex:y,"aria-labelledby":n,"aria-orientation":p,"aria-valuemax":m(l),"aria-valuemin":m(c),name:u,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":null!=(r=e.step)?r:void 0,disabled:i},t,h,{style:(0,De.A)({},RG,{direction:a?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=DL(e),n={onMouseDown:(r=t||{},e=>{var t;if(null==(t=r.onMouseDown)||t.call(r,e),i)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const n=kJ(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=Q({finger:n});DJ({sliderRef:$,activeIndex:r,setActive:E}),I(t),R&&!LJ(t,C)&&R(e,t,r)}k.current=0;const o=(0,KM.A)($.current);o.addEventListener("mousemove",X,{passive:!0}),o.addEventListener("mouseup",Z)})};var r;const o=(0,De.A)({},t,n);return(0,De.A)({},e,{ref:W},o)},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=DL(e),n={onMouseOver:(r=t||{},e=>{var t;null==(t=r.onMouseOver)||t.call(r,e);const n=Number(e.currentTarget.getAttribute("data-index"));_(n)}),onMouseLeave:re(t||{})};var r;return(0,De.A)({},e,t,n)},marks:P,open:A,range:D,rootRef:W,trackLeap:ne,trackOffset:te,values:L,getThumbStyle:e=>({pointerEvents:-1!==x&&x!==e?"none":void 0})}}const FJ=e=>!e||!CL(e);function UJ(e){return(0,sL.Ay)("MuiSlider",e)}const BJ=(0,Ge.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const $J=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function VJ(e){return e}const WJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,iL.A)(n.color)}`],"medium"!==n.size&&t[`size${(0,iL.A)(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((e=>{let{theme:t}=e;var n;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${BJ.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${BJ.dragging}`]:{[`& .${BJ.thumb}, & .${BJ.track}`]:{transition:"none"}},variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}})),zJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),HJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;var n;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e,track:"inverted"},style:(0,De.A)({},t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:(0,De.A)({backgroundColor:(0,oL.a)(t.palette[e].main,.62),borderColor:(0,oL.a)(t.palette[e].main,.62)},t.applyStyles("dark",{backgroundColor:(0,oL.e$)(t.palette[e].main,.5)}),t.applyStyles("dark",{borderColor:(0,oL.e$)(t.palette[e].main,.5)})))})))]}})),qJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${(0,iL.A)(n.color)}`],"medium"!==n.size&&t[`thumbSize${(0,iL.A)(n.size)}`]]}})((e=>{let{theme:t}=e;var n;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${BJ.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{[`&:hover, &.${BJ.focusVisible}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${(0,oL.X4)(t.palette[e].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${BJ.active}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${(0,oL.X4)(t.palette[e].main,.16)}`})}})))]}})),GJ=(0,rL.Ay)((function(e){const{children:n,className:r,value:i}=e,o=(e=>{const{open:t}=e;return{offset:(0,Pe.A)(t&&BJ.valueLabelOpen),circle:BJ.valueLabelCircle,label:BJ.valueLabelLabel}})(e);return n?t.cloneElement(n,{className:(0,Pe.A)(n.props.className)},(0,Ve.jsxs)(t.Fragment,{children:[n.props.children,(0,Ve.jsx)("span",{className:(0,Pe.A)(o.offset,r),"aria-hidden":!0,children:(0,Ve.jsx)("span",{className:o.circle,children:(0,Ve.jsx)("span",{className:o.label,children:i})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})((e=>{let{theme:t}=e;return(0,De.A)({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${BJ.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${BJ.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})})),KJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,jF.A)(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}})),YJ=(0,rL.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,jF.A)(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})})),QJ=e=>{let{children:t}=e;return t},XJ=t.forwardRef((function(e,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w,x,E,A,_,S,T;const k=(0,Ze.b)({props:e,name:"MuiSlider"}),C=qD(),{"aria-label":I,"aria-valuetext":R,"aria-labelledby":D,component:L="span",components:P={},componentsProps:M={},color:N="primary",classes:O,className:j,disableSwap:F=!1,disabled:U=!1,getAriaLabel:B,getAriaValueText:$,marks:V=!1,max:W=100,min:z=0,orientation:H="horizontal",shiftStep:q=10,size:G="medium",step:K=1,scale:Y=VJ,slotProps:Q,slots:X,track:Z="normal",valueLabelDisplay:J="off",valueLabelFormat:ee=VJ}=k,te=(0,Le.A)(k,$J),ne=(0,De.A)({},k,{isRtl:C,max:W,min:z,classes:O,disabled:U,disableSwap:F,orientation:H,marks:V,color:N,size:G,step:K,shiftStep:q,scale:Y,track:Z,valueLabelDisplay:J,valueLabelFormat:ee}),{axisProps:re,getRootProps:ie,getHiddenInputProps:oe,getThumbProps:ae,open:se,active:le,axis:ce,focusedThumbIndex:ue,range:de,dragging:he,marks:pe,values:fe,trackOffset:me,trackLeap:ge,getThumbStyle:ve}=jJ((0,De.A)({},ne,{rootRef:n}));ne.marked=pe.length>0&&pe.some((e=>e.label)),ne.dragging=he,ne.focusedThumbIndex=ue;const ye=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:a,color:s,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse",s&&`color${(0,iL.A)(s)}`,l&&`size${(0,iL.A)(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${(0,iL.A)(l)}`,s&&`thumbColor${(0,iL.A)(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,nL.A)(c,UJ,a)})(ne),be=null!=(r=null!=(i=null==X?void 0:X.root)?i:P.Root)?r:WJ,we=null!=(o=null!=(a=null==X?void 0:X.rail)?a:P.Rail)?o:zJ,xe=null!=(s=null!=(l=null==X?void 0:X.track)?l:P.Track)?s:HJ,Ee=null!=(c=null!=(u=null==X?void 0:X.thumb)?u:P.Thumb)?c:qJ,Ae=null!=(d=null!=(h=null==X?void 0:X.valueLabel)?h:P.ValueLabel)?d:GJ,_e=null!=(p=null!=(f=null==X?void 0:X.mark)?f:P.Mark)?p:KJ,Se=null!=(m=null!=(g=null==X?void 0:X.markLabel)?g:P.MarkLabel)?m:YJ,Te=null!=(v=null!=(y=null==X?void 0:X.input)?y:P.Input)?v:"input",ke=null!=(b=null==Q?void 0:Q.root)?b:M.root,Ce=null!=(w=null==Q?void 0:Q.rail)?w:M.rail,Ie=null!=(x=null==Q?void 0:Q.track)?x:M.track,Re=null!=(E=null==Q?void 0:Q.thumb)?E:M.thumb,Me=null!=(A=null==Q?void 0:Q.valueLabel)?A:M.valueLabel,Ne=null!=(_=null==Q?void 0:Q.mark)?_:M.mark,Oe=null!=(S=null==Q?void 0:Q.markLabel)?S:M.markLabel,je=null!=(T=null==Q?void 0:Q.input)?T:M.input,Fe=$P({elementType:be,getSlotProps:ie,externalSlotProps:ke,externalForwardedProps:te,additionalProps:(0,De.A)({},FJ(be)&&{as:L}),ownerState:(0,De.A)({},ne,null==ke?void 0:ke.ownerState),className:[ye.root,j]}),Ue=$P({elementType:we,externalSlotProps:Ce,ownerState:ne,className:ye.rail}),Be=$P({elementType:xe,externalSlotProps:Ie,additionalProps:{style:(0,De.A)({},re[ce].offset(me),re[ce].leap(ge))},ownerState:(0,De.A)({},ne,null==Ie?void 0:Ie.ownerState),className:ye.track}),$e=$P({elementType:Ee,getSlotProps:ae,externalSlotProps:Re,ownerState:(0,De.A)({},ne,null==Re?void 0:Re.ownerState),className:ye.thumb}),We=$P({elementType:Ae,externalSlotProps:Me,ownerState:(0,De.A)({},ne,null==Me?void 0:Me.ownerState),className:ye.valueLabel}),ze=$P({elementType:_e,externalSlotProps:Ne,ownerState:ne,className:ye.mark}),He=$P({elementType:Se,externalSlotProps:Oe,ownerState:ne,className:ye.markLabel}),qe=$P({elementType:Te,getSlotProps:oe,externalSlotProps:je,ownerState:ne});return(0,Ve.jsxs)(be,(0,De.A)({},Fe,{children:[(0,Ve.jsx)(we,(0,De.A)({},Ue)),(0,Ve.jsx)(xe,(0,De.A)({},Be)),pe.filter((e=>e.value>=z&&e.value<=W)).map(((e,n)=>{const r=CJ(e.value,z,W),i=re[ce].offset(r);let o;return o=!1===Z?-1!==fe.indexOf(e.value):"normal"===Z&&(de?e.value>=fe[0]&&e.value<=fe[fe.length-1]:e.value<=fe[0])||"inverted"===Z&&(de?e.value<=fe[0]||e.value>=fe[fe.length-1]:e.value>=fe[0]),(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(_e,(0,De.A)({"data-index":n},ze,!CL(_e)&&{markActive:o},{style:(0,De.A)({},i,ze.style),className:(0,Pe.A)(ze.className,o&&ye.markActive)})),null!=e.label?(0,Ve.jsx)(Se,(0,De.A)({"aria-hidden":!0,"data-index":n},He,!CL(Se)&&{markLabelActive:o},{style:(0,De.A)({},i,He.style),className:(0,Pe.A)(ye.markLabel,He.className,o&&ye.markLabelActive),children:e.label})):null]},n)})),fe.map(((e,t)=>{const n=CJ(e,z,W),r=re[ce].offset(n),i="off"===J?QJ:Ae;return(0,Ve.jsx)(i,(0,De.A)({},!CL(i)&&{valueLabelFormat:ee,valueLabelDisplay:J,value:"function"===typeof ee?ee(Y(e),t):ee,index:t,open:se===t||le===t||"on"===J,disabled:U},We,{children:(0,Ve.jsx)(Ee,(0,De.A)({"data-index":t},$e,{className:(0,Pe.A)(ye.thumb,$e.className,le===t&&ye.active,ue===t&&ye.focusVisible),style:(0,De.A)({},r,ve(t),$e.style),children:(0,Ve.jsx)(Te,(0,De.A)({"data-index":t,"aria-label":B?B(t):I,"aria-valuenow":Y(e),"aria-labelledby":D,"aria-valuetext":$?$(Y(e),t):R,value:fe[t]},qe))}))}),t)}))]}))})),ZJ=XJ;function JJ(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function e0(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const t0=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(e,s)=>{let{inputValue:l,getOptionLabel:c}=s,u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=JJ(u));const d=u?e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=JJ(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):e;return"number"===typeof r?d.slice(0,r):d}}(),n0=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))},r0=[];const i0=function(e){const{unstable_isActiveElementInListbox:n=n0,unstable_classNamePrefix:r="Mui",autoComplete:i=!1,autoHighlight:o=!1,autoSelect:a=!1,blurOnSelect:s=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:c=!1,componentName:u="useAutocomplete",defaultValue:d=(e.multiple?r0:null),disableClearable:h=!1,disableCloseOnSelect:p=!1,disabled:f,disabledItemsFocusable:m=!1,disableListWrap:g=!1,filterOptions:v=t0,filterSelectedOptions:y=!1,freeSolo:b=!1,getOptionDisabled:w,getOptionKey:x,getOptionLabel:E=e=>{var t;return null!=(t=e.label)?t:e},groupBy:A,handleHomeEndKeys:_=!e.freeSolo,id:S,includeInputInList:T=!1,inputValue:k,isOptionEqualToValue:C=(e,t)=>e===t,multiple:I=!1,onChange:R,onClose:D,onHighlightChange:L,onInputChange:P,onOpen:M,open:N,openOnFocus:O=!1,options:j,readOnly:F=!1,selectOnFocus:U=!e.freeSolo,value:B}=e,$=(0,XO.A)(S);let V=E;V=e=>{const t=E(e);return"string"!==typeof t?String(t):t};const W=t.useRef(!1),z=t.useRef(!0),H=t.useRef(null),q=t.useRef(null),[G,K]=t.useState(null),[Y,Q]=t.useState(-1),X=o?0:-1,Z=t.useRef(X),[J,ee]=(0,yq.A)({controlled:B,default:d,name:u}),[te,ne]=(0,yq.A)({controlled:k,default:"",name:u,state:"inputValue"}),[re,ie]=t.useState(!1),oe=t.useCallback(((e,t)=>{if(!(I?J.length<t.length:null!==t)&&!l)return;let n;if(I)n="";else if(null==t)n="";else{const e=V(t);n="string"===typeof e?e:""}te!==n&&(ne(n),P&&P(e,n,"reset"))}),[V,te,I,P,ne,l,J]),[ae,se]=(0,yq.A)({controlled:N,default:!1,name:u,state:"open"}),[le,ce]=t.useState(!0),ue=!I&&null!=J&&te===V(J),de=ae&&!F,he=de?v(j.filter((e=>!y||!(I?J:[J]).some((t=>null!==t&&C(e,t))))),{inputValue:ue&&le?"":te,getOptionLabel:V}):[],pe=UP({filteredOptions:he,value:J,inputValue:te});t.useEffect((()=>{const e=J!==pe.value;re&&!e||b&&!e||oe(null,J)}),[J,oe,re,pe.value,b]);const fe=ae&&he.length>0&&!F,me=(0,dN.A)((e=>{-1===e?H.current.focus():G.querySelector(`[data-tag-index="${e}"]`).focus()}));t.useEffect((()=>{I&&Y>J.length-1&&(Q(-1),me(-1))}),[J,I,Y,me]);const ge=(0,dN.A)((e=>{let{event:t,index:n,reason:i="auto"}=e;if(Z.current=n,-1===n?H.current.removeAttribute("aria-activedescendant"):H.current.setAttribute("aria-activedescendant",`${$}-option-${n}`),L&&L(t,-1===n?null:he[n],i),!q.current)return;const o=q.current.querySelector(`[role="option"].${r}-focused`);o&&(o.classList.remove(`${r}-focused`),o.classList.remove(`${r}-focusVisible`));let a=q.current;if("listbox"!==q.current.getAttribute("role")&&(a=q.current.parentElement.querySelector('[role="listbox"]')),!a)return;if(-1===n)return void(a.scrollTop=0);const s=q.current.querySelector(`[data-option-index="${n}"]`);if(s&&(s.classList.add(`${r}-focused`),"keyboard"===i&&s.classList.add(`${r}-focusVisible`),a.scrollHeight>a.clientHeight&&"mouse"!==i&&"touch"!==i)){const e=s,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop-e.offsetHeight*(A?1.3:0)<a.scrollTop&&(a.scrollTop=e.offsetTop-e.offsetHeight*(A?1.3:0))}})),ve=(0,dN.A)((e=>{let{event:t,diff:n,direction:r="next",reason:o="auto"}=e;if(!de)return;const a=function(e,t){if(!q.current||e<0||e>=he.length)return-1;let n=e;for(;;){const r=q.current.querySelector(`[data-option-index="${n}"]`),i=!m&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!i)return n;if(n="next"===t?(n+1)%he.length:(n-1+he.length)%he.length,n===e)return-1}}((()=>{const e=he.length-1;if("reset"===n)return X;if("start"===n)return 0;if("end"===n)return e;const t=Z.current+n;return t<0?-1===t&&T?-1:g&&-1!==Z.current||Math.abs(n)>1?0:e:t>e?t===e+1&&T?-1:g||Math.abs(n)>1?e:0:t})(),r);if(ge({index:a,reason:o,event:t}),i&&"reset"!==n)if(-1===a)H.current.value=te;else{const e=V(he[a]);H.current.value=e;0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&H.current.setSelectionRange(te.length,e.length)}})),ye=t.useCallback((()=>{if(!de)return;const e=(()=>{if(-1!==Z.current&&pe.filteredOptions&&pe.filteredOptions.length!==he.length&&pe.inputValue===te&&(I?J.length===pe.value.length&&pe.value.every(((e,t)=>V(J[t])===V(e))):(e=pe.value,t=J,(e?V(e):"")===(t?V(t):"")))){const e=pe.filteredOptions[Z.current];if(e)return e0(he,(t=>V(t)===V(e)))}var e,t;return-1})();if(-1!==e)return void(Z.current=e);const t=I?J[0]:J;if(0!==he.length&&null!=t){if(q.current)if(null==t)Z.current>=he.length-1?ge({index:he.length-1}):ge({index:Z.current});else{const e=he[Z.current];if(I&&e&&-1!==e0(J,(t=>C(e,t))))return;const n=e0(he,(e=>C(e,t)));-1===n?ve({diff:"reset"}):ge({index:n})}}else ve({diff:"reset"})}),[he.length,!I&&J,y,ve,ge,de,te,I]),be=(0,dN.A)((e=>{(0,eN.A)(q,e),e&&ye()}));t.useEffect((()=>{ye()}),[ye]);const we=e=>{ae||(se(!0),ce(!0),M&&M(e))},xe=(e,t)=>{ae&&(se(!1),D&&D(e,t))},Ee=(e,t,n,r)=>{if(I){if(J.length===t.length&&J.every(((e,n)=>e===t[n])))return}else if(J===t)return;R&&R(e,t,n,r),ee(t)},Ae=t.useRef(!1),_e=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",i=t;if(I){i=Array.isArray(J)?J.slice():[];const e=e0(i,(e=>C(t,e)));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),r="removeOption")}oe(e,i),Ee(e,i,r,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||xe(e,r),(!0===s||"touch"===s&&Ae.current||"mouse"===s&&!Ae.current)&&H.current.blur()},Se=(e,t)=>{if(!I)return;""===te&&xe(e,"toggleInput");let n=Y;-1===Y?""===te&&"previous"===t&&(n=J.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===J.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===J.length||"previous"===t&&-1===n)return-1;const e=G.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),Q(n),me(n)},Te=e=>{W.current=!0,ne(""),P&&P(e,"","clear"),Ee(e,I?[]:null,"clear")},ke=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(Q(-1),me(-1)),229!==t.which))switch(t.key){case"Home":de&&_&&(t.preventDefault(),ve({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":de&&_&&(t.preventDefault(),ve({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),ve({diff:-5,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"PageDown":t.preventDefault(),ve({diff:5,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowDown":t.preventDefault(),ve({diff:1,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowUp":t.preventDefault(),ve({diff:-1,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"ArrowLeft":Se(t,"previous");break;case"ArrowRight":Se(t,"next");break;case"Enter":if(-1!==Z.current&&de){const e=he[Z.current],n=!!w&&w(e);if(t.preventDefault(),n)return;_e(t,e,"selectOption"),i&&H.current.setSelectionRange(H.current.value.length,H.current.value.length)}else b&&""!==te&&!1===ue&&(I&&t.preventDefault(),_e(t,te,"createOption","freeSolo"));break;case"Escape":de?(t.preventDefault(),t.stopPropagation(),xe(t,"escape")):c&&(""!==te||I&&J.length>0)&&(t.preventDefault(),t.stopPropagation(),Te(t));break;case"Backspace":if(I&&!F&&""===te&&J.length>0){const e=-1===Y?J.length-1:Y,n=J.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:J[e]})}break;case"Delete":if(I&&!F&&""===te&&J.length>0&&-1!==Y){const e=Y,n=J.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:J[e]})}}},Ce=e=>{ie(!0),O&&!W.current&&we(e)},Ie=e=>{n(q)?H.current.focus():(ie(!1),z.current=!0,W.current=!1,a&&-1!==Z.current&&de?_e(e,he[Z.current],"blur"):a&&b&&""!==te?_e(e,te,"blur","freeSolo"):l&&oe(e,J),xe(e,"blur"))},Re=e=>{const t=e.target.value;te!==t&&(ne(t),ce(!1),P&&P(e,t,"input")),""===t?h||I||Ee(e,null,"clear"):we(e)},Le=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Z.current!==t&&ge({event:e,index:t,reason:"mouse"})},Pe=e=>{ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ae.current=!0},Me=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));_e(e,he[t],"selectOption"),Ae.current=!1},Ne=e=>t=>{const n=J.slice();n.splice(e,1),Ee(t,n,"removeOption",{option:J[e]})},Oe=e=>{ae?xe(e,"toggleInput"):we(e)},je=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==$&&e.preventDefault()},Fe=e=>{e.currentTarget.contains(e.target)&&(H.current.focus(),U&&z.current&&H.current.selectionEnd-H.current.selectionStart===0&&H.current.select(),z.current=!1)},Ue=e=>{f||""!==te&&ae||Oe(e)};let Be=b&&te.length>0;Be=Be||(I?J.length>0:null!==J);let $e=he;if(A){new Map;$e=he.reduce(((e,t,n)=>{const r=A(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return f&&re&&Ie(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-owns":fe?`${$}-listbox`:null},e,{onKeyDown:ke(e),onMouseDown:je,onClick:Fe})},getInputLabelProps:()=>({id:`${$}-label`,htmlFor:$}),getInputProps:()=>({id:$,value:te,onBlur:Ie,onFocus:Ce,onChange:Re,onMouseDown:Ue,"aria-activedescendant":de?"":null,"aria-autocomplete":i?"both":"list","aria-controls":fe?`${$}-listbox`:void 0,"aria-expanded":fe,autoComplete:"off",ref:H,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Te}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Oe}),getTagProps:e=>{let{index:t}=e;return(0,De.A)({key:t,"data-tag-index":t,tabIndex:-1},!F&&{onDelete:Ne(t)})},getListboxProps:()=>({role:"listbox",id:`${$}-listbox`,"aria-labelledby":`${$}-label`,ref:be,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;var r;const i=(I?J:[J]).some((e=>null!=e&&C(n,e))),o=!!w&&w(n);return{key:null!=(r=null==x?void 0:x(n))?r:V(n),tabIndex:-1,role:"option",id:`${$}-option-${t}`,onMouseMove:Le,onClick:Me,onTouchStart:Pe,"data-option-index":t,"aria-disabled":o,"aria-selected":i}},id:$,inputValue:te,value:J,dirty:Be,expanded:de&&G,popupOpen:de,focused:re||-1!==Y,anchorEl:G,setAnchorEl:K,focusedTag:Y,groupedOptions:$e}};function o0(e){return(0,sL.Ay)("MuiListSubheader",e)}(0,Ge.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const a0=["className","color","component","disableGutters","disableSticky","inset"],s0=(0,rL.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,iL.A)(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),l0=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:a=!1,disableSticky:s=!1,inset:l=!1}=n,c=(0,Le.A)(n,a0),u=(0,De.A)({},n,{color:i,component:o,disableGutters:a,disableSticky:s,inset:l}),d=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,a={root:["root","default"!==n&&`color${(0,iL.A)(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,nL.A)(a,o0,t)})(u);return(0,Ve.jsx)(s0,(0,De.A)({as:o,className:(0,Pe.A)(d.root,r),ref:t,ownerState:u},c))}));l0.muiSkipListHighlight=!0;const c0=l0;function u0(e){return(0,sL.Ay)("MuiAutocomplete",e)}const d0=(0,Ge.A)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var h0,p0;const f0=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],m0=["ref"],g0=["key"],v0=["key"],y0=(0,rL.Ay)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:a,size:s}=n;return[{[`& .${d0.tag}`]:t.tag},{[`& .${d0.tag}`]:t[`tagSize${(0,iL.A)(s)}`]},{[`& .${d0.inputRoot}`]:t.inputRoot},{[`& .${d0.input}`]:t.input},{[`& .${d0.input}`]:a&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})({[`&.${d0.focused} .${d0.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${d0.clearIndicator}`]:{visibility:"visible"}},[`& .${d0.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${d0.inputRoot}`]:{[`.${d0.hasPopupIcon}&, .${d0.hasClearIcon}&`]:{paddingRight:30},[`.${d0.hasPopupIcon}.${d0.hasClearIcon}&`]:{paddingRight:56},[`& .${d0.input}`]:{width:0,minWidth:30}},[`& .${Pj.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Pj.root}.${Aj.sizeSmall}`]:{[`& .${Pj.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Xj.root}`]:{padding:9,[`.${d0.hasPopupIcon}&, .${d0.hasClearIcon}&`]:{paddingRight:39},[`.${d0.hasPopupIcon}.${d0.hasClearIcon}&`]:{paddingRight:65},[`& .${d0.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${d0.endAdornment}`]:{right:9}},[`& .${Xj.root}.${Aj.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${d0.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Bj.root}`]:{paddingTop:19,paddingLeft:8,[`.${d0.hasPopupIcon}&, .${d0.hasClearIcon}&`]:{paddingRight:39},[`.${d0.hasPopupIcon}.${d0.hasClearIcon}&`]:{paddingRight:65},[`& .${Bj.input}`]:{padding:"7px 4px"},[`& .${d0.endAdornment}`]:{right:9}},[`& .${Bj.root}.${Aj.sizeSmall}`]:{paddingBottom:1,[`& .${Bj.input}`]:{padding:"2.5px 4px"}},[`& .${Aj.hiddenLabel}`]:{paddingTop:8},[`& .${Bj.root}.${Aj.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${d0.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Bj.root}.${Aj.hiddenLabel}.${Aj.sizeSmall}`]:{[`& .${d0.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${d0.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${d0.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${d0.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${d0.inputRoot}`]:{flexWrap:"wrap"}}}]}),b0=(0,rL.Ay)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),w0=(0,rL.Ay)(FP,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),x0=(0,rL.Ay)(FP,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),E0=(0,rL.Ay)(rq,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${d0.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}})),A0=(0,rL.Ay)(hL,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body1,{overflow:"auto"})})),_0=(0,rL.Ay)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),S0=(0,rL.Ay)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),T0=(0,rL.Ay)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${d0.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${d0.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${d0.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${d0.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${d0.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,oL.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}})),k0=(0,rL.Ay)(c0,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),C0=(0,rL.Ay)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${d0.option}`]:{paddingLeft:24}}),I0=t.forwardRef((function(e,n){var r,i,o,a;const s=(0,Ze.b)({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:h,className:p,clearIcon:f=h0||(h0=(0,Ve.jsx)(ZU,{fontSize:"small"})),clearOnBlur:m=!s.freeSolo,clearOnEscape:g=!1,clearText:v="Clear",closeText:y="Close",componentsProps:b={},defaultValue:w=(s.multiple?[]:null),disableClearable:x=!1,disableCloseOnSelect:E=!1,disabled:A=!1,disabledItemsFocusable:_=!1,disableListWrap:S=!1,disablePortal:T=!1,filterSelectedOptions:k=!1,forcePopupIcon:C="auto",freeSolo:I=!1,fullWidth:R=!1,getLimitTagsText:D=e=>`+${e}`,getOptionLabel:L,groupBy:P,handleHomeEndKeys:M=!s.freeSolo,includeInputInList:N=!1,limitTags:O=-1,ListboxComponent:j="ul",ListboxProps:F,loading:U=!1,loadingText:B="Loading\u2026",multiple:$=!1,noOptionsText:V="No options",openOnFocus:W=!1,openText:z="Open",PaperComponent:H=hL,PopperComponent:q=rq,popupIcon:G=p0||(p0=(0,Ve.jsx)(QF,{})),readOnly:K=!1,renderGroup:Y,renderInput:Q,renderOption:X,renderTags:Z,selectOnFocus:J=!s.freeSolo,size:ee="medium",slotProps:te={}}=s,ne=(0,Le.A)(s,f0),{getRootProps:re,getInputProps:ie,getInputLabelProps:oe,getPopupIndicatorProps:ae,getClearProps:se,getTagProps:le,getListboxProps:ce,getOptionProps:ue,value:de,dirty:he,expanded:pe,id:fe,popupOpen:me,focused:ge,focusedTag:ve,anchorEl:ye,setAnchorEl:be,inputValue:we,groupedOptions:xe}=i0((0,De.A)({},s,{componentName:"Autocomplete"})),Ee=!x&&!A&&he&&!K,Ae=(!I||!0===C)&&!1!==C,{onMouseDown:_e}=ie(),{ref:Se}=null!=F?F:{},Te=ce(),{ref:ke}=Te,Ce=(0,Le.A)(Te,m0),Ie=(0,XL.A)(ke,Se),Re=L||(e=>{var t;return null!=(t=e.label)?t:e}),Me=(0,De.A)({},s,{disablePortal:T,expanded:pe,focused:ge,fullWidth:R,getOptionLabel:Re,hasClearIcon:Ee,hasPopupIcon:Ae,inputFocused:-1===ve,popupOpen:me,size:ee}),Ne=(e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:a,hasPopupIcon:s,inputFocused:l,popupOpen:c,size:u}=e,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",a&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${(0,iL.A)(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,nL.A)(d,u0,t)})(Me);let Oe;if($&&de.length>0){const e=e=>(0,De.A)({className:Ne.tag,disabled:A},le(e));Oe=Z?Z(de,e,Me):de.map(((t,n)=>{const r=e({index:n}),{key:i}=r,o=(0,Le.A)(r,g0);return(0,Ve.jsx)(Vq,(0,De.A)({label:Re(t),size:ee},o,h),i)}))}if(O>-1&&Array.isArray(Oe)){const e=Oe.length-O;!ge&&e>0&&(Oe=Oe.splice(0,O),Oe.push((0,Ve.jsx)("span",{className:Ne.tag,children:D(e)},Oe.length)))}const je=Y||(e=>(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)(k0,{className:Ne.groupLabel,ownerState:Me,component:"div",children:e.group}),(0,Ve.jsx)(C0,{className:Ne.groupUl,ownerState:Me,children:e.children})]},e.key)),Fe=X||((e,t)=>{const{key:n}=e,r=(0,Le.A)(e,v0);return(0,Ve.jsx)("li",(0,De.A)({},r,{children:Re(t)}),n)}),Ue=(e,t)=>{const n=ue({option:e,index:t});return Fe((0,De.A)({},n,{className:Ne.option}),e,{selected:n["aria-selected"],index:t,inputValue:we},Me)},Be=null!=(r=te.clearIndicator)?r:b.clearIndicator,$e=null!=(i=te.paper)?i:b.paper,We=null!=(o=te.popper)?o:b.popper,ze=null!=(a=te.popupIndicator)?a:b.popupIndicator;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(y0,(0,De.A)({ref:n,className:(0,Pe.A)(Ne.root,p),ownerState:Me},re(ne),{children:Q({id:fe,disabled:A,fullWidth:!0,size:"small"===ee?"small":void 0,InputLabelProps:oe(),InputProps:(0,De.A)({ref:be,className:Ne.inputRoot,startAdornment:Oe,onClick:e=>{e.target===e.currentTarget&&_e(e)}},(Ee||Ae)&&{endAdornment:(0,Ve.jsxs)(b0,{className:Ne.endAdornment,ownerState:Me,children:[Ee?(0,Ve.jsx)(w0,(0,De.A)({},se(),{"aria-label":v,title:v,ownerState:Me},Be,{className:(0,Pe.A)(Ne.clearIndicator,null==Be?void 0:Be.className),children:f})):null,Ae?(0,Ve.jsx)(x0,(0,De.A)({},ae(),{disabled:A,"aria-label":me?y:z,title:me?y:z,ownerState:Me},ze,{className:(0,Pe.A)(Ne.popupIndicator,null==ze?void 0:ze.className),children:G})):null]})}),inputProps:(0,De.A)({className:Ne.input,disabled:A,readOnly:K},ie())})})),ye?(0,Ve.jsx)(E0,(0,De.A)({as:q,disablePortal:T,style:{width:ye?ye.clientWidth:null},ownerState:Me,role:"presentation",anchorEl:ye,open:me},We,{className:(0,Pe.A)(Ne.popper,null==We?void 0:We.className),children:(0,Ve.jsxs)(A0,(0,De.A)({ownerState:Me,as:H},$e,{className:(0,Pe.A)(Ne.paper,null==$e?void 0:$e.className),children:[U&&0===xe.length?(0,Ve.jsx)(_0,{className:Ne.loading,ownerState:Me,children:B}):null,0!==xe.length||I||U?null:(0,Ve.jsx)(S0,{className:Ne.noOptions,ownerState:Me,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:V}),xe.length>0?(0,Ve.jsx)(T0,(0,De.A)({as:j,className:Ne.listbox,ownerState:Me},Ce,F,{ref:Ie,children:xe.map(((e,t)=>P?je({key:e.key,group:e.group,children:e.options.map(((t,n)=>Ue(t,e.index+n)))}):Ue(e,t)))})):null]}))})):null]})})),R0=I0,D0=(0,_L.A)([(0,Ve.jsx)("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07z"},"0"),(0,Ve.jsx)("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52"},"1")],"LocalFireDepartment"),L0=(0,_L.A)((0,Ve.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop"),P0=(0,_L.A)((0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),M0=(0,_L.A)((0,Ve.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff"),N0=(0,_L.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),O0=(0,_L.A)((0,Ve.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),j0=(0,_L.A)((0,Ve.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),F0={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},U0={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},B0={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_WIDTH:"mediaWidth"},$0=Object.entries(B0),V0=$0.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{}),W0=$0.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"}),z0=(Object.entries(W0).reduce(((e,t)=>{let[n,r]=t;const i=V0[n];return i&&(e[r]=i),e}),{userinactivechange:"userinactive"}),Object.entries(V0).reduce(((e,t)=>{let[n,r]=t;const i=W0[n];return i&&(e[r]=i),e}),{userinactive:"userinactivechange"})),H0={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},q0="disabled",G0="showing",K0="mouse",Y0="touch",Q0="unavailable",X0="unsupported",Z0={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},J0="fullscreen";function e1(e){if(e){const{id:t,width:n,height:r}=e;return[t,n,r].filter((e=>null!=e)).join(":")}}function t1(e){if(e){const[t,n,r]=e.split(":");return{id:t,width:+n,height:+r}}}function n1(e){if(e){const{id:t,kind:n,language:r,label:i}=e;return[t,n,r,i].filter((e=>null!=e)).join(":")}}function r1(e){if(e){const[t,n,r,i]=e.split(":");return{id:t,kind:n,language:r,label:i}}}function i1(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function o1(e){return"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}function a1(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}const s1=e=>new Promise((t=>setTimeout(t,e))),l1=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],c1=e=>{if(!o1(e))return"";const t=Math.abs(e),n=t!==e,r=new Date(0,0,0,0,0,t,0),i=[r.getHours(),r.getMinutes(),r.getSeconds()].map(((e,t)=>e&&((e,t)=>`${e} ${1===e?l1[t].singular:l1[t].plural}`)(e,t))).filter((e=>e)).join(", ");return`${i}${n?" remaining":""}`};function u1(e,t){let n=!1;e<0&&(n=!0,e=0-e),e=e<0?0:e;let r=Math.floor(e%60),i=Math.floor(e/60%60),o=Math.floor(e/3600);const a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(o=i=r="0"),o=o>0||s>0?o+":":"",i=((o||a>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,(n?"-":"")+o+i+r}Object.freeze({length:0,start(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});const d1={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute",live:"live","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var h1;const p1={en:d1};let f1=(null==(h1=globalThis.navigator)?void 0:h1.language.split("-")[0])||"en";const m1=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return((null==(n=p1[f1])?void 0:n[e])||d1[e]).replace(/\{(\w+)\}/g,((e,n)=>void 0!==t[n]?String(t[n]):`{${n}}`))};class g1{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}class v1 extends g1{}class y1 extends v1{constructor(){super(...arguments),this.role=null}}const b1={createElement:function(){return new w1.HTMLElement},createElementNS:function(){return new w1.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent:e=>!1},w1={ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},document:b1,Node:v1,Element:y1,HTMLElement:class extends y1{constructor(){super(...arguments),this.innerHTML=""}get content(){return new w1.DocumentFragment}},DocumentFragment:class extends g1{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem:e=>null,setItem(e,t){},removeItem(e){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia:e=>({matches:!1,media:e})},x1="undefined"===typeof window||"undefined"===typeof window.customElements,E1=Object.keys(w1).every((e=>e in globalThis)),A1=x1&&!E1?w1:globalThis,_1=x1&&!E1?b1:globalThis.document,S1=new WeakMap,T1=e=>{let t=S1.get(e);return t||S1.set(e,t=new Set),t},k1=new A1.ResizeObserver((e=>{for(const t of e)for(const e of T1(t.target))e(t)}));function C1(e,t){T1(e).add(t),k1.observe(e)}function I1(e,t){const n=T1(e);n.delete(t),n.size||k1.unobserve(e)}function R1(e){var t;return null!=(t=D1(e))?t:N1(e,"media-controller")}function D1(e){var t;const{MEDIA_CONTROLLER:n}=U0,r=e.getAttribute(n);if(r)return null==(t=j1(e))?void 0:t.getElementById(r)}const L1=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".value";const r=e.querySelector(n);r&&(r.textContent=t)},P1=(e,t)=>((e,t)=>{const n=`slot[name="${t}"]`,r=e.shadowRoot.querySelector(n);return r?r.children:[]})(e,t)[0],M1=(e,t)=>!(!e||!t)&&(!!(null==e?void 0:e.contains(t))||M1(e,t.getRootNode().host)),N1=(e,t)=>{if(!e)return null;const n=e.closest(t);return n||N1(e.getRootNode().host,t)};function O1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var t;const n=null==e?void 0:e.activeElement;return n?null!=(t=O1(n.shadowRoot))?t:n:null}function j1(e){var t;const n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e);return n instanceof ShadowRoot||n instanceof Document?n:null}function F1(e){let{depth:t=3,checkOpacity:n=!0,checkVisibilityCSS:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.checkVisibility)return e.checkVisibility({checkOpacity:n,checkVisibilityCSS:r});let i=e;for(;i&&t>0;){const e=getComputedStyle(i);if(n&&"0"===e.opacity||r&&"hidden"===e.visibility||"none"===e.display)return!1;i=i.parentElement,t--}return!0}function U1(e,t){const n=function(e,t){var n,r;let i;for(i of null!=(n=e.querySelectorAll("style:not([media])"))?n:[]){let e;try{e=null==(r=i.sheet)?void 0:r.cssRules}catch{continue}for(const n of null!=e?e:[])if(t(n.selectorText))return n}}(e,(e=>e===t));return n||B1(e,t)}function B1(e,t){var n,r;const i=null!=(n=e.querySelectorAll("style:not([media])"))?n:[],o=null==i?void 0:i[i.length-1];return(null==o?void 0:o.sheet)?(null==o||o.sheet.insertRule(`${t}{}`,o.sheet.cssRules.length),null==(r=o.sheet.cssRules)?void 0:r[o.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",e),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function $1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;const r=e.getAttribute(t);return null!=r?+r:n}function V1(e,t,n){const r=+n;null==n||Number.isNaN(r)?e.hasAttribute(t)&&e.removeAttribute(t):$1(e,t,void 0)!==r&&e.setAttribute(t,`${r}`)}function W1(e,t){return e.hasAttribute(t)}function z1(e,t,n){null!=n?W1(e,t)!=n&&e.toggleAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function H1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var r;return null!=(r=e.getAttribute(t))?r:n}function q1(e,t,n){if(null==n)return void(e.hasAttribute(t)&&e.removeAttribute(t));const r=`${n}`;H1(e,t,void 0)!==r&&e.setAttribute(t,r)}var G1,K1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Y1=(e,t,n)=>(K1(e,t,"read from private field"),n?n.call(e):t.get(e)),Q1=(e,t,n,r)=>(K1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const X1=_1.createElement("template");X1.innerHTML="\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n";class Z1 extends A1.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,G1,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=X1.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=_1.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(r.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[U0.MEDIA_CONTROLLER,V0.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===U0.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=Y1(this,G1))?void 0:r.unassociateElement)||i.call(r,this),Q1(this,G1,null)),n&&this.isConnected&&(Q1(this,G1,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=Y1(this,G1))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n,r;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),Q1(this,G1,function(e){var t;const n=e.getAttribute(U0.MEDIA_CONTROLLER);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return N1(e,"media-controller")}(this)),this.getAttribute(U0.MEDIA_CONTROLLER)&&(null==(t=null==(e=Y1(this,G1))?void 0:e.associateElement)||t.call(e,this)),null==(n=Y1(this,G1))||n.addEventListener("pointerdown",this),null==(r=Y1(this,G1))||r.addEventListener("click",this)}disconnectedCallback(){var e,t,n,r;this.getAttribute(U0.MEDIA_CONTROLLER)&&(null==(t=null==(e=Y1(this,G1))?void 0:e.unassociateElement)||t.call(e,this)),null==(n=Y1(this,G1))||n.removeEventListener("pointerdown",this),null==(r=Y1(this,G1))||r.removeEventListener("click",this),Q1(this,G1,null)}handleEvent(e){var t;const n=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==n?void 0:n.localName))if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){const{clientX:t,clientY:n}=e,{left:r,top:i,width:o,height:a}=this.getBoundingClientRect(),s=t-r,l=n-i;if(s<0||l<0||s>o||l>a||0===o&&0===a)return;const{pointerType:c=this._pointerType}=e;if(this._pointerType=void 0,c===Y0)return void this.handleTap(e);if(c===K0)return void this.handleMouseClick(e)}}get mediaPaused(){return W1(this,V0.MEDIA_PAUSED)}set mediaPaused(e){z1(this,V0.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?F0.MEDIA_PLAY_REQUEST:F0.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new A1.CustomEvent(t,{composed:!0,bubbles:!0}))}}G1=new WeakMap,A1.customElements.get("media-gesture-receiver")||A1.customElements.define("media-gesture-receiver",Z1);var J1,e2,t2,n2,r2,i2,o2,a2,s2,l2,c2,u2,d2,h2,p2,f2,m2,g2,v2,y2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},b2=(e,t,n)=>(y2(e,t,"read from private field"),n?n.call(e):t.get(e)),w2=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},x2=(e,t,n,r)=>(y2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),E2=(e,t,n)=>(y2(e,t,"access private method"),n);const A2={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"},_2=_1.createElement("template");_2.innerHTML=`\n  <style>\n    \n    :host([${V0.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([${A2.AUDIO}])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    slot[name=media] {\n      display: var(--media-slot-display, contents);\n    }\n\n    \n    :host([${A2.AUDIO}]) slot[name=media] {\n      display: var(--media-slot-display, none);\n    }\n\n    \n    :host([${A2.AUDIO}]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    \n    :host(:not([${A2.AUDIO}])[${A2.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),\n    :host(:not([${A2.AUDIO}])[${A2.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {\n      pointer-events: auto;\n    }\n\n    :host(:not([${A2.AUDIO}])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([${A2.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([${A2.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    \n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    \n    :host(:not([${A2.AUDIO}])) .spacer {\n      flex-grow: 1;\n    }\n\n    \n    :host(:-webkit-full-screen) {\n      \n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not([${A2.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {\n      opacity: 1;\n      transition: var(--media-control-transition-in, opacity 0.25s);\n    }\n\n    \n    :host([${A2.USER_INACTIVE}]:not([${V0.MEDIA_PAUSED}]):not([${V0.MEDIA_IS_AIRPLAYING}]):not([${V0.MEDIA_IS_CASTING}]):not([${A2.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${A2.NO_AUTOHIDE}]):not([role=dialog])) {\n      opacity: 0;\n      transition: var(--media-control-transition-out, opacity 1s);\n    }\n\n    :host([${A2.USER_INACTIVE}]:not([${A2.NO_AUTOHIDE}]):not([${V0.MEDIA_PAUSED}]):not([${V0.MEDIA_IS_CASTING}]):not([${A2.AUDIO}])) ::slotted([slot=media]) {\n      cursor: none;\n    }\n\n    :host([${A2.USER_INACTIVE}][${A2.AUTOHIDE_OVER_CONTROLS}]:not([${A2.NO_AUTOHIDE}]):not([${V0.MEDIA_PAUSED}]):not([${V0.MEDIA_IS_CASTING}]):not([${A2.AUDIO}])) * {\n     --media-cursor: none;\n     cursor: none;\n    }\n\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    \n    :host(:not([${A2.AUDIO}])[${V0.MEDIA_HAS_PLAYED}]) slot[name=poster] {\n      display: none;\n    }\n\n    ::slotted([role=dialog]) {\n      width: 100%;\n      height: 100%;\n      align-self: center;\n    }\n\n    ::slotted([role=menu]) {\n      align-self: end;\n    }\n  </style>\n\n  <slot name="media" part="layer media-layer"></slot>\n  <slot name="poster" part="layer poster-layer"></slot>\n  <slot name="gestures-chrome" part="layer gesture-layer">\n    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>\n  </slot>\n  <span part="layer vertical-layer">\n    <slot name="top-chrome" part="top chrome"></slot>\n    <slot name="middle-chrome" part="middle chrome"></slot>\n    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>\n    \n    <slot part="bottom chrome"></slot>\n  </span>\n  <slot name="dialog" part="layer dialog-layer"></slot>\n`;const S2=Object.values(V0);function T2(e,t){var n;if(!e.isConnected)return;const r=function(e){const t=e.split(/\s+/);return Object.fromEntries(t.map((e=>e.split(":"))))}(null!=(n=e.getAttribute(A2.BREAKPOINTS))?n:"sm:384 md:576 lg:768 xl:960"),i=function(e,t){return Object.keys(e).filter((n=>t>=parseInt(e[n])))}(r,t);let o=!1;if(Object.keys(r).forEach((t=>{i.includes(t)?e.hasAttribute(`breakpoint${t}`)||(e.setAttribute(`breakpoint${t}`,""),o=!0):e.hasAttribute(`breakpoint${t}`)&&(e.removeAttribute(`breakpoint${t}`),o=!0)})),o){const t=new CustomEvent(W0.BREAKPOINTS_CHANGE,{detail:i});e.dispatchEvent(t)}e.breakpointsComputed||(e.breakpointsComputed=!0,e.dispatchEvent(new CustomEvent(W0.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}class k2 extends A1.HTMLElement{constructor(){super(),w2(this,i2),w2(this,l2),w2(this,u2),w2(this,h2),w2(this,f2),w2(this,g2),w2(this,J1,0),w2(this,e2,null),w2(this,t2,null),w2(this,n2,void 0),this.breakpointsComputed=!1,w2(this,r2,new MutationObserver(E2(this,i2,o2).bind(this))),w2(this,a2,!1),w2(this,s2,(e=>{b2(this,a2)||(setTimeout((()=>{!function(e){T2(e.target,e.contentRect.width)}(e),x2(this,a2,!1)}),0),x2(this,a2,!0))})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(_2.content.cloneNode(!0)));const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",(()=>{e.assignedElements({flatten:!0}).length?this.handleMediaUpdated(this.media):b2(this,e2)&&this.mediaUnsetCallback(b2(this,e2))}))}static get observedAttributes(){return[A2.AUTOHIDE,A2.GESTURES_DISABLED].concat(S2).filter((e=>![V0.MEDIA_RENDITION_LIST,V0.MEDIA_AUDIO_TRACK_LIST,V0.MEDIA_CHAPTERS_CUES,V0.MEDIA_WIDTH,V0.MEDIA_HEIGHT,V0.MEDIA_ERROR,V0.MEDIA_ERROR_MESSAGE].includes(e)))}attributeChangedCallback(e,t,n){e.toLowerCase()==A2.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return"SLOT"==(null==e?void 0:e.nodeName)&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(x2(this,e2,e),e.localName.includes("-")&&await A1.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;b2(this,r2).observe(this,{childList:!0,subtree:!0}),C1(this,b2(this,s2));const t=null!=this.getAttribute(A2.AUDIO),n=m1(t?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(A2.USER_INACTIVE,""),T2(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),null==(e=A1.window)||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;b2(this,r2).disconnect(),I1(this,b2(this,s2)),this.media&&this.mediaUnsetCallback(this.media),null==(e=A1.window)||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){x2(this,e2,null)}handleEvent(e){switch(e.type){case"pointerdown":x2(this,J1,e.timeStamp);break;case"pointermove":E2(this,l2,c2).call(this,e);break;case"pointerup":E2(this,u2,d2).call(this,e);break;case"mouseleave":E2(this,h2,p2).call(this);break;case"mouseup":this.removeAttribute(A2.KEYBOARD_CONTROL);break;case"keyup":E2(this,g2,v2).call(this),this.setAttribute(A2.KEYBOARD_CONTROL,"")}}set autohide(e){const t=Number(e);x2(this,n2,isNaN(t)?0:t)}get autohide(){return(void 0===b2(this,n2)?2:b2(this,n2)).toString()}get breakpoints(){return H1(this,A2.BREAKPOINTS)}set breakpoints(e){q1(this,A2.BREAKPOINTS,e)}get audio(){return W1(this,A2.AUDIO)}set audio(e){z1(this,A2.AUDIO,e)}get gesturesDisabled(){return W1(this,A2.GESTURES_DISABLED)}set gesturesDisabled(e){z1(this,A2.GESTURES_DISABLED,e)}get keyboardControl(){return W1(this,A2.KEYBOARD_CONTROL)}set keyboardControl(e){z1(this,A2.KEYBOARD_CONTROL,e)}get noAutohide(){return W1(this,A2.NO_AUTOHIDE)}set noAutohide(e){z1(this,A2.NO_AUTOHIDE,e)}get autohideOverControls(){return W1(this,A2.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){z1(this,A2.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return W1(this,A2.USER_INACTIVE)}set userInteractive(e){z1(this,A2.USER_INACTIVE,e)}}J1=new WeakMap,e2=new WeakMap,t2=new WeakMap,n2=new WeakMap,r2=new WeakMap,i2=new WeakSet,o2=function(e){const t=this.media;for(const n of e){if("childList"!==n.type)continue;const e=n.removedNodes;for(const r of e){if("media"!=r.slot||n.target!=this)continue;let e=n.previousSibling&&n.previousSibling.previousElementSibling;if(e&&t){let t="media"!==e.slot;for(;null!==(e=e.previousSibling);)"media"==e.slot&&(t=!1);t&&this.mediaUnsetCallback(r)}else this.mediaUnsetCallback(r)}if(t)for(const r of n.addedNodes)r===t&&this.handleMediaUpdated(t)}},a2=new WeakMap,s2=new WeakMap,l2=new WeakSet,c2=function(e){if("mouse"!==e.pointerType){const t=250;if(e.timeStamp-b2(this,J1)<t)return}E2(this,f2,m2).call(this),clearTimeout(b2(this,t2));const t=this.hasAttribute(A2.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(e.target)||t)&&E2(this,g2,v2).call(this)},u2=new WeakSet,d2=function(e){if("touch"===e.pointerType){const t=!this.hasAttribute(A2.USER_INACTIVE);[this,this.media].includes(e.target)&&t?E2(this,h2,p2).call(this):E2(this,g2,v2).call(this)}else e.composedPath().some((e=>["media-play-button","media-fullscreen-button"].includes(null==e?void 0:e.localName)))&&E2(this,g2,v2).call(this)},h2=new WeakSet,p2=function(){if(b2(this,n2)<0)return;if(this.hasAttribute(A2.USER_INACTIVE))return;this.setAttribute(A2.USER_INACTIVE,"");const e=new A1.CustomEvent(W0.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},f2=new WeakSet,m2=function(){if(!this.hasAttribute(A2.USER_INACTIVE))return;this.removeAttribute(A2.USER_INACTIVE);const e=new A1.CustomEvent(W0.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},g2=new WeakSet,v2=function(){E2(this,f2,m2).call(this),clearTimeout(b2(this,t2));const e=parseInt(this.autohide);e<0||x2(this,t2,setTimeout((()=>{E2(this,h2,p2).call(this)}),1e3*e))},A1.customElements.get("media-container")||A1.customElements.define("media-container",k2);var C2,I2,R2,D2,L2,P2,M2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},N2=(e,t,n)=>(M2(e,t,"read from private field"),n?n.call(e):t.get(e)),O2=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},j2=(e,t,n,r)=>(M2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class F2{constructor(e,t){let{defaultValue:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{defaultValue:void 0};O2(this,L2),O2(this,C2,void 0),O2(this,I2,void 0),O2(this,R2,void 0),O2(this,D2,new Set),j2(this,C2,e),j2(this,I2,t),j2(this,R2,new Set(n))}[Symbol.iterator](){return N2(this,L2,P2).values()}get length(){return N2(this,L2,P2).size}get value(){var e;return null!=(e=[...N2(this,L2,P2)].join(" "))?e:""}set value(e){var t;e!==this.value&&(j2(this,D2,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...N2(this,L2,P2)][e]}values(){return N2(this,L2,P2).values()}forEach(e,t){N2(this,L2,P2).forEach(e,t)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>N2(this,D2).add(e))),(""!==this.value||(null==(e=N2(this,C2))?void 0:e.hasAttribute(`${N2(this,I2)}`)))&&(null==(t=N2(this,C2))||t.setAttribute(`${N2(this,I2)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>N2(this,D2).delete(e))),null==(e=N2(this,C2))||e.setAttribute(`${N2(this,I2)}`,`${this.value}`)}contains(e){return N2(this,L2,P2).has(e)}toggle(e,t){return"undefined"!==typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}C2=new WeakMap,I2=new WeakMap,R2=new WeakMap,D2=new WeakMap,L2=new WeakSet,P2=function(){return N2(this,D2).size?N2(this,D2):N2(this,R2)};const U2=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,n,r]=e.split(":"),i=r?decodeURIComponent(r):void 0;return{kind:"cc"===t?H0.CAPTIONS:H0.SUBTITLES,language:n,label:i}},B2=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s+/)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").map((t=>{const n=U2(t);return{...e,...n}}))},$2=e=>e?Array.isArray(e)?e.map((e=>"string"===typeof e?U2(e):e)):"string"===typeof e?B2(e):[e]:[],V2=function(){let{kind:e,label:t,language:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{kind:"subtitles"};return t?`${"captions"===e?"cc":"sb"}:${n}:${encodeURIComponent(t)}`:n},W2=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.prototype.map.call(e,V2).join(" ")},z2=e=>{const t=Object.entries(e).map((e=>{let[t,n]=e;return((e,t)=>n=>n[e]===t)(t,n)}));return e=>t.every((t=>t(e)))},H2=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=$2(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(z2);Array.from(t).filter((e=>n.some((t=>t(e))))).forEach((t=>{t.mode=e}))},q2=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(!(null==e?void 0:e.textTracks))return[];const n="function"===typeof t?t:z2(t);return Array.from(e.textTracks).filter(n)},G2=e=>{var t;return!!(null==(t=e.mediaSubtitlesShowing)?void 0:t.length)||e.hasAttribute(V0.MEDIA_SUBTITLES_SHOWING)},K2="exitFullscreen"in _1?"exitFullscreen":"webkitExitFullscreen"in _1?"webkitExitFullscreen":"webkitCancelFullScreen"in _1?"webkitCancelFullScreen":void 0,Y2="fullscreenElement"in _1?"fullscreenElement":"webkitFullscreenElement"in _1?"webkitFullscreenElement":void 0,Q2=e=>{var t;const{media:n,documentElement:r,fullscreenElement:i=n}=e;if(!n||!r)return!1;const o=(e=>{const{documentElement:t,media:n}=e,r=null==t?void 0:t[Y2];return!r&&"webkitDisplayingFullscreen"in n&&"webkitPresentationMode"in n&&n.webkitDisplayingFullscreen&&n.webkitPresentationMode===J0?n:r})(e);if(!o)return!1;if(o===i||o===n)return!0;if(o.localName.includes("-")){let e=o.shadowRoot;if(!(Y2 in e))return M1(o,i);for(;null==e?void 0:e[Y2];){if(e[Y2]===i)return!0;e=null==(t=e[Y2])?void 0:t.shadowRoot}}return!1},X2="fullscreenEnabled"in _1?"fullscreenEnabled":"webkitFullscreenEnabled"in _1?"webkitFullscreenEnabled":void 0;let Z2;const J2=()=>{var e,t;return Z2||(Z2=null==(t=null==(e=_1)?void 0:e.createElement)?void 0:t.call(e,"video"),Z2)},e3=(e,t)=>new Promise((n=>{e.addEventListener("volumechange",(()=>n(!0)),{signal:t})})),t3=async(e,t)=>{for(let n=0;n<10;n++){if(e.volume===t)return!1;await s1(10)}return e.volume!==t},n3=/.*Version\/.*Safari\/.*/.test(A1.navigator.userAgent),r3=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J2();return(!A1.matchMedia("(display-mode: standalone)").matches||!n3)&&"function"===typeof(null==e?void 0:e.requestPictureInPicture)},i3=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J2();return(e=>{const{documentElement:t,media:n}=e;return!!(null==t?void 0:t[X2])||n&&"webkitSupportsFullscreen"in n})({documentElement:_1,media:e})},o3=i3(),a3=r3(),s3=!!A1.WebKitPlaybackTargetAvailabilityEvent,l3=!!A1.chrome,c3=e=>q2(e.media,(e=>[H0.SUBTITLES,H0.CAPTIONS].includes(e.kind))).sort(((e,t)=>e.kind>=t.kind?1:-1)),u3=e=>q2(e.media,(e=>e.mode===G0&&[H0.SUBTITLES,H0.CAPTIONS].includes(e.kind))),d3=(e,t)=>{const n=c3(e),r=u3(e),i=!!r.length;if(n.length)if(!1===t||i&&!0!==t)H2(q0,n,r);else if(!0===t||!i&&!1!==t){let t=n[0];const{options:i}=e;if(!(null==i?void 0:i.noSubtitlesLangPref)){const e=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),r=e?[e,...globalThis.navigator.languages]:globalThis.navigator.languages,i=n.filter((e=>r.some((t=>e.language.toLowerCase().startsWith(t.split("-")[0]))))).sort(((e,t)=>r.findIndex((t=>e.language.toLowerCase().startsWith(t.split("-")[0])))-r.findIndex((e=>t.language.toLowerCase().startsWith(e.split("-")[0])))));i[0]&&(t=i[0])}const{language:o,label:a,kind:s}=t;H2(q0,n,r),H2(G0,n,[{language:o,label:a,kind:s}])}},h3=(e,t)=>e===t||null!=e&&null!=t&&(typeof e===typeof t&&(!("number"!==typeof e||!Number.isNaN(e)||!Number.isNaN(t))||"object"===typeof e&&(Array.isArray(e)?p3(e,t):Object.entries(e).every((e=>{let[n,r]=e;return n in t&&h3(r,t[n])}))))),p3=(e,t)=>{const n=Array.isArray(e),r=Array.isArray(t);return n===r&&(!n&&!r||e.length===t.length&&e.every(((e,n)=>h3(e,t[n]))))},f3=Object.values(Z0);let m3;const g3=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J2();if(!e)return!1;const t=e.volume;e.volume=t/2+.1;const n=new AbortController,r=await Promise.race([e3(e,n.signal),t3(e,t)]);return n.abort(),r}().then((e=>(m3=e,m3))),v3={mediaError:{get(e,t){const{media:n}=e;if("playing"!==(null==t?void 0:t.type))return null==n?void 0:n.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(e,t){var n;const{media:r}=e;if("playing"!==(null==t?void 0:t.type))return null==(n=null==r?void 0:r.error)?void 0:n.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(e,t){var n,r;const{media:i}=e;if("playing"!==(null==t?void 0:t.type))return null!=(r=null==(n=null==i?void 0:i.error)?void 0:n.message)?r:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoWidth)?t:0},mediaEvents:["resize"]},mediaHeight:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoHeight)?t:0},mediaEvents:["resize"]},mediaPaused:{get(e){var t;const{media:n}=e;return null==(t=null==n?void 0:n.paused)||t},set(e,t){var n;const{media:r}=t;r&&(e?r.pause():null==(n=r.play())||n.catch((()=>{})))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(e,t){const{media:n}=e;return!!n&&(t?"playing"===t.type:!n.paused)},mediaEvents:["playing","emptied"]},mediaEnded:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.ended)&&t},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.playbackRate)?t:1},set(e,t){const{media:n}=t;n&&Number.isFinite(+e)&&(n.playbackRate=+e)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.muted)&&t},set(e,t){const{media:n}=t;if(n){try{A1.localStorage.setItem("media-chrome-pref-muted",e?"true":"false")}catch(ok){console.debug("Error setting muted pref",ok)}n.muted=e}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noMutedPref:n}}=t,{media:r}=t;if(r&&!r.muted&&!n)try{const n="true"===A1.localStorage.getItem("media-chrome-pref-muted");v3.mediaMuted.set(n,t),e(n)}catch(ok){console.debug("Error getting muted pref",ok)}}]},mediaVolume:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.volume)?t:1},set(e,t){const{media:n}=t;if(n){try{null==e?A1.localStorage.removeItem("media-chrome-pref-volume"):A1.localStorage.setItem("media-chrome-pref-volume",e.toString())}catch(ok){console.debug("Error setting volume pref",ok)}Number.isFinite(+e)&&(n.volume=+e)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noVolumePref:n}}=t;if(!n)try{const{media:n}=t;if(!n)return;const r=A1.localStorage.getItem("media-chrome-pref-volume");if(null==r)return;v3.mediaVolume.set(+r,t),e(+r)}catch(ok){console.debug("Error getting volume pref",ok)}}]},mediaVolumeLevel:{get(e){const{media:t}=e;return"undefined"==typeof(null==t?void 0:t.volume)?"high":t.muted||0===t.volume?"off":t.volume<.5?"low":t.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.currentTime)?t:0},set(e,t){const{media:n}=t;n&&o1(e)&&(n.currentTime=e)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(e){const{media:t,options:{defaultDuration:n}={}}=e;return!n||t&&t.duration&&!Number.isNaN(t.duration)&&Number.isFinite(t.duration)?Number.isFinite(null==t?void 0:t.duration)?t.duration:Number.NaN:n},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(e){const{media:t}=e;return(null==t?void 0:t.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(e){var t;const{media:n}=e;if(!(null==(t=null==n?void 0:n.seekable)?void 0:t.length))return;const r=n.seekable.start(0),i=n.seekable.end(n.seekable.length-1);return r||i?[Number(r.toFixed(3)),Number(i.toFixed(3))]:void 0},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(e){var t;const{media:n}=e,r=null!=(t=null==n?void 0:n.buffered)?t:[];return Array.from(r).map(((e,t)=>[Number(r.start(t).toFixed(3)),Number(r.end(t).toFixed(3))]))},mediaEvents:["progress","emptied"]},mediaStreamType:{get(e){const{media:t,options:{defaultStreamType:n}={}}=e,r=[Z0.LIVE,Z0.ON_DEMAND].includes(n)?n:void 0;if(!t)return r;const{streamType:i}=t;if(f3.includes(i))return i===Z0.UNKNOWN?r:i;const o=t.duration;return o===1/0?Z0.LIVE:Number.isFinite(o)?Z0.ON_DEMAND:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(e){const{media:t}=e;if(!t)return Number.NaN;const{targetLiveWindow:n}=t,r=v3.mediaStreamType.get(e);return null!=n&&!Number.isNaN(n)||r!==Z0.LIVE?n:0},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(e){const{media:t,options:{liveEdgeOffset:n=10}={}}=e;if(!t)return!1;if("number"===typeof t.liveEdgeStart)return!Number.isNaN(t.liveEdgeStart)&&t.currentTime>=t.liveEdgeStart;if(!(v3.mediaStreamType.get(e)===Z0.LIVE))return!1;const r=t.seekable;if(!r)return!0;if(!r.length)return!1;const i=r.end(r.length-1)-n;return t.currentTime>=i},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get:e=>c3(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get:e=>u3(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n,r;const{media:i,options:o}=t;if(!i)return;const a=e=>{var n;if(!o.defaultSubtitles)return;e&&![H0.CAPTIONS,H0.SUBTITLES].includes(null==(n=null==e?void 0:e.track)?void 0:n.kind)||d3(t,!0)};return i.addEventListener("loadstart",a),null==(n=i.textTracks)||n.addEventListener("addtrack",a),null==(r=i.textTracks)||r.addEventListener("removetrack",a),()=>{var e,t;i.removeEventListener("loadstart",a),null==(e=i.textTracks)||e.removeEventListener("addtrack",a),null==(t=i.textTracks)||t.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(e){var t;const{media:n}=e;if(!n)return[];const[r]=q2(n,{kind:H0.CHAPTERS});return Array.from(null!=(t=null==r?void 0:r.cues)?t:[]).map((e=>{let{text:t,startTime:n,endTime:r}=e;return{text:t,startTime:n,endTime:r}}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;const i=r.querySelector('track[kind="chapters"][default][src]'),o=null==(n=r.shadowRoot)?void 0:n.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return null==i||i.addEventListener("load",e),null==o||o.addEventListener("load",e),()=>{null==i||i.removeEventListener("load",e),null==o||o.removeEventListener("load",e)}}]},mediaIsPip:{get(e){var t,n;const{media:r,documentElement:i}=e;if(!r||!i)return!1;if(!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===r)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return!!(null==(t=r.localName)?void 0:t.includes("-"))&&M1(r,i.pictureInPictureElement);if(i.pictureInPictureElement.localName.includes("-")){let e=i.pictureInPictureElement.shadowRoot;for(;null==e?void 0:e.pictureInPictureElement;){if(e.pictureInPictureElement===r)return!0;e=null==(n=e.pictureInPictureElement)?void 0:n.shadowRoot}}return!1},set(e,t){const{media:n}=t;if(n)if(e){if(!_1.pictureInPictureEnabled)return void console.warn("MediaChrome: Picture-in-picture is not enabled");if(!n.requestPictureInPicture)return void console.warn("MediaChrome: The current media does not support picture-in-picture");const e=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};n.requestPictureInPicture().catch((t=>{if(11!==t.code)throw t;if(n.src){if(0!==n.readyState||"none"!==n.preload)throw t;{const t=()=>{n.removeEventListener("loadedmetadata",r),n.preload="none"},r=()=>{n.requestPictureInPicture().catch(e),t()};n.addEventListener("loadedmetadata",r),n.preload="metadata",setTimeout((()=>{0===n.readyState&&e(),t()}),1e3)}}else console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.")}))}else _1.pictureInPictureElement&&_1.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.videoRenditions)?t:[]].map((e=>({...e})))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(e){var t,n,r;const{media:i}=e;return null==(r=null==(n=null==i?void 0:i.videoRenditions)?void 0:n[null==(t=i.videoRenditions)?void 0:t.selectedIndex])?void 0:r.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.videoRenditions))return void console.warn("MediaController: Rendition selection not supported by this media.");const r=e,i=Array.prototype.findIndex.call(n.videoRenditions,(e=>e.id==r));n.videoRenditions.selectedIndex!=i&&(n.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.audioTracks)?t:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(e){var t,n;const{media:r}=e;return null==(n=[...null!=(t=null==r?void 0:r.audioTracks)?t:[]].find((e=>e.enabled)))?void 0:n.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.audioTracks))return void console.warn("MediaChrome: Audio track selection not supported by this media.");const r=e;for(const i of n.audioTracks)i.enabled=r==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get:e=>Q2(e),set(e,t){e?(e=>{var t;const{media:n,fullscreenElement:r}=e,i=r&&"requestFullscreen"in r?"requestFullscreen":r&&"webkitRequestFullScreen"in r?"webkitRequestFullScreen":void 0;if(i){const e=null==(t=r[i])?void 0:t.call(r);if(e instanceof Promise)e.catch((()=>{}))}else(null==n?void 0:n.webkitEnterFullscreen)?n.webkitEnterFullscreen():(null==n?void 0:n.requestFullscreen)&&n.requestFullscreen()})(t):(e=>{var t;const{documentElement:n}=e;if(K2){const e=null==(t=null==n?void 0:n[K2])?void 0:t.call(n);if(e instanceof Promise)e.catch((()=>{}))}})(t)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(e){var t;const{media:n}=e;return!(!(null==n?void 0:n.remote)||"disconnected"===(null==(t=n.remote)?void 0:t.state))&&!!n.remote.state},set(e,t){var n,r;const{media:i}=t;i&&(e&&"disconnected"!==(null==(n=i.remote)?void 0:n.state)||(e||"connected"===(null==(r=i.remote)?void 0:r.state))&&("function"===typeof i.remote.prompt?i.remote.prompt().catch((()=>{})):console.warn("MediaChrome: Casting is not supported in this environment")))},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get:()=>!1,set(e,t){const{media:n}=t;n&&(n.webkitShowPlaybackTargetPicker&&A1.WebKitPlaybackTargetAvailabilityEvent?n.webkitShowPlaybackTargetPicker():console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment"))},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(e){const{media:t}=e;if(!o3||!i3(t))return X0}},mediaPipUnavailable:{get(e){const{media:t}=e;if(!a3||!r3(t))return X0}},mediaVolumeUnavailable:{get(e){const{media:t}=e;if(!1===m3||void 0==(null==t?void 0:t.volume))return X0},stateOwnersUpdateHandlers:[e=>{null==m3&&g3.then((t=>e(t?void 0:X0)))}]},mediaCastUnavailable:{get(e){let{availability:t="not-available"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{media:r}=e;return l3&&(null==(n=null==r?void 0:r.remote)?void 0:n.state)?null!=t&&"available"!==t?Q0:void 0:X0},stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaAirplayUnavailable:{get:(e,t)=>s3?"not-available"===(null==t?void 0:t.availability)?Q0:void 0:X0,mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaRenditionUnavailable:{get(e){var t;const{media:n}=e;return(null==n?void 0:n.videoRenditions)?(null==(t=n.videoRenditions)?void 0:t.length)?void 0:Q0:X0},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(e){var t,n;const{media:r}=e;return(null==r?void 0:r.audioTracks)?(null!=(n=null==(t=r.audioTracks)?void 0:t.length)?n:0)<=1?Q0:void 0:X0},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},y3={[F0.MEDIA_PREVIEW_REQUEST](e,t,n){let{detail:r}=n;var i,o,a;const{media:s}=t,l=null!=r?r:void 0;let c,u;if(s&&null!=l){const[e]=q2(s,{kind:H0.METADATA,label:"thumbnails"}),t=Array.prototype.find.call(null!=(i=null==e?void 0:e.cues)?i:[],((e,t,n)=>0===t?e.endTime>l:t===n.length-1?e.startTime<=l:e.startTime<=l&&e.endTime>l));if(t){const e=/'^(?:[a-z]+:)?\/\//i.test(t.text)||null==(o=null==s?void 0:s.querySelector('track[label="thumbnails"]'))?void 0:o.src,n=new URL(t.text,e);u=new URLSearchParams(n.hash).get("#xywh").split(",").map((e=>+e)),c=n.href}}const d=e.mediaDuration.get(t);let h=null==(a=e.mediaChaptersCues.get(t).find(((e,t,n)=>t===n.length-1&&d===e.endTime?e.startTime<=l&&e.endTime>=l:e.startTime<=l&&e.endTime>l)))?void 0:a.text;return null!=r&&null==h&&(h=""),{mediaPreviewTime:l,mediaPreviewImage:c,mediaPreviewCoords:u,mediaPreviewChapter:h}},[F0.MEDIA_PAUSE_REQUEST](e,t){e.mediaPaused.set(!0,t)},[F0.MEDIA_PLAY_REQUEST](e,t){var n,r,i,o;const a=e.mediaStreamType.get(t)===Z0.LIVE,s=!(null==(n=t.options)?void 0:n.noAutoSeekToLive),l=e.mediaTargetLiveWindow.get(t)>0;if(a&&s&&!l){const n=null==(r=e.mediaSeekable.get(t))?void 0:r[1];if(n){const r=n-(null!=(o=null==(i=t.options)?void 0:i.seekToLiveOffset)?o:0);e.mediaCurrentTime.set(r,t)}}e.mediaPaused.set(!1,t)},[F0.MEDIA_PLAYBACK_RATE_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaPlaybackRate.set(i,t)},[F0.MEDIA_MUTE_REQUEST](e,t){e.mediaMuted.set(!0,t)},[F0.MEDIA_UNMUTE_REQUEST](e,t){e.mediaVolume.get(t)||e.mediaVolume.set(.25,t),e.mediaMuted.set(!1,t)},[F0.MEDIA_VOLUME_REQUEST](e,t,n){let{detail:r}=n;const i=r;i&&e.mediaMuted.get(t)&&e.mediaMuted.set(!1,t),e.mediaVolume.set(i,t)},[F0.MEDIA_SEEK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaCurrentTime.set(i,t)},[F0.MEDIA_SEEK_TO_LIVE_REQUEST](e,t){var n,r,i;const o=null==(n=e.mediaSeekable.get(t))?void 0:n[1];if(Number.isNaN(Number(o)))return;const a=o-(null!=(i=null==(r=t.options)?void 0:r.seekToLiveOffset)?i:0);e.mediaCurrentTime.set(a,t)},[F0.MEDIA_SHOW_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;var i;const{options:o}=t,a=c3(t),s=$2(r),l=null==(i=s[0])?void 0:i.language;l&&!o.noSubtitlesLangPref&&A1.localStorage.setItem("media-chrome-pref-subtitles-lang",l),H2(G0,a,s)},[F0.MEDIA_DISABLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;const i=c3(t);H2(q0,i,null!=r?r:[])},[F0.MEDIA_TOGGLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;d3(t,r)},[F0.MEDIA_RENDITION_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaRenditionSelected.set(i,t)},[F0.MEDIA_AUDIO_TRACK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaAudioTrackEnabled.set(i,t)},[F0.MEDIA_ENTER_PIP_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsPip.set(!0,t)},[F0.MEDIA_EXIT_PIP_REQUEST](e,t){e.mediaIsPip.set(!1,t)},[F0.MEDIA_ENTER_FULLSCREEN_REQUEST](e,t){e.mediaIsPip.get(t)&&e.mediaIsPip.set(!1,t),e.mediaIsFullscreen.set(!0,t)},[F0.MEDIA_EXIT_FULLSCREEN_REQUEST](e,t){e.mediaIsFullscreen.set(!1,t)},[F0.MEDIA_ENTER_CAST_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsCasting.set(!0,t)},[F0.MEDIA_EXIT_CAST_REQUEST](e,t){e.mediaIsCasting.set(!1,t)},[F0.MEDIA_AIRPLAY_REQUEST](e,t){e.mediaIsAirplaying.set(!0,t)}},b3=e=>{let{media:t,fullscreenElement:n,documentElement:r,stateMediator:i=v3,requestMap:o=y3,options:a={},monitorStateOwnersOnlyWithSubscriptions:s=!0}=e;const l=[],c={options:{...a}};let u=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const d=e=>{void 0!=e&&(h3(e,u)||(u=Object.freeze({...u,...e}),l.forEach((e=>e(u)))))},h=()=>{const e=Object.entries(i).reduce(((e,t)=>{let[n,{get:r}]=t;return e[n]=r(c),e}),{});d(e)},p={};let f;const m=async(e,t)=>{var n,r,o,a,u,m,g,v,y,b,w,x,E,A,_,S;const T=!!f;if(f={...c,...null!=f?f:{},...e},T)return;await async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];await Promise.all(t.filter((e=>e)).map((async e=>{if(!("localName"in e&&e instanceof A1.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const n=A1.customElements.get(t);n&&e instanceof n||(await A1.customElements.whenDefined(t),A1.customElements.upgrade(e))})))}(...Object.values(e));const k=l.length>0&&0===t&&s,C=c.media!==f.media,I=(null==(n=c.media)?void 0:n.textTracks)!==(null==(r=f.media)?void 0:r.textTracks),R=(null==(o=c.media)?void 0:o.videoRenditions)!==(null==(a=f.media)?void 0:a.videoRenditions),D=(null==(u=c.media)?void 0:u.audioTracks)!==(null==(m=f.media)?void 0:m.audioTracks),L=(null==(g=c.media)?void 0:g.remote)!==(null==(v=f.media)?void 0:v.remote),P=c.documentElement!==f.documentElement,M=!!c.media&&(C||k),N=!!(null==(y=c.media)?void 0:y.textTracks)&&(I||k),O=!!(null==(b=c.media)?void 0:b.videoRenditions)&&(R||k),j=!!(null==(w=c.media)?void 0:w.audioTracks)&&(D||k),F=!!(null==(x=c.media)?void 0:x.remote)&&(L||k),U=!!c.documentElement&&(P||k),B=M||N||O||j||F||U,$=0===l.length&&1===t&&s,V=!!f.media&&(C||$),W=!!(null==(E=f.media)?void 0:E.textTracks)&&(I||$),z=!!(null==(A=f.media)?void 0:A.videoRenditions)&&(R||$),H=!!(null==(_=f.media)?void 0:_.audioTracks)&&(D||$),q=!!(null==(S=f.media)?void 0:S.remote)&&(L||$),G=!!f.documentElement&&(P||$),K=V||W||z||H||q||G;if(!(B||K))return Object.entries(f).forEach((e=>{let[t,n]=e;c[t]=n})),h(),void(f=void 0);Object.entries(i).forEach((e=>{let[t,{get:n,mediaEvents:r=[],textTracksEvents:i=[],videoRenditionsEvents:o=[],audioTracksEvents:a=[],remoteEvents:s=[],rootEvents:l=[],stateOwnersUpdateHandlers:u=[]}]=e;p[t]||(p[t]={});const h=e=>{const r=n(c,e);d({[t]:r})};let m;m=p[t].mediaEvents,r.forEach((e=>{m&&M&&(c.media.removeEventListener(e,m),p[t].mediaEvents=void 0),V&&(f.media.addEventListener(e,h),p[t].mediaEvents=h)})),m=p[t].textTracksEvents,i.forEach((e=>{var n,r;m&&N&&(null==(n=c.media.textTracks)||n.removeEventListener(e,m),p[t].textTracksEvents=void 0),W&&(null==(r=f.media.textTracks)||r.addEventListener(e,h),p[t].textTracksEvents=h)})),m=p[t].videoRenditionsEvents,o.forEach((e=>{var n,r;m&&O&&(null==(n=c.media.videoRenditions)||n.removeEventListener(e,m),p[t].videoRenditionsEvents=void 0),z&&(null==(r=f.media.videoRenditions)||r.addEventListener(e,h),p[t].videoRenditionsEvents=h)})),m=p[t].audioTracksEvents,a.forEach((e=>{var n,r;m&&j&&(null==(n=c.media.audioTracks)||n.removeEventListener(e,m),p[t].audioTracksEvents=void 0),H&&(null==(r=f.media.audioTracks)||r.addEventListener(e,h),p[t].audioTracksEvents=h)})),m=p[t].remoteEvents,s.forEach((e=>{var n,r;m&&F&&(null==(n=c.media.remote)||n.removeEventListener(e,m),p[t].remoteEvents=void 0),q&&(null==(r=f.media.remote)||r.addEventListener(e,h),p[t].remoteEvents=h)})),m=p[t].rootEvents,l.forEach((e=>{m&&U&&(c.documentElement.removeEventListener(e,m),p[t].rootEvents=void 0),G&&(f.documentElement.addEventListener(e,h),p[t].rootEvents=h)}));const g=p[t].stateOwnersUpdateHandlers;u.forEach((e=>{g&&B&&g(),K&&(p[t].stateOwnersUpdateHandlers=e(h,f))}))})),Object.entries(f).forEach((e=>{let[t,n]=e;c[t]=n})),h(),f=void 0};return m({media:t,fullscreenElement:n,documentElement:r,options:a}),{dispatch(e){const{type:t,detail:n}=e;o[t]&&null==u.mediaErrorCode?d(o[t](i,c,e)):"mediaelementchangerequest"===t?m({media:n}):"fullscreenelementchangerequest"===t?m({fullscreenElement:n}):"documentelementchangerequest"===t?m({documentElement:n}):"optionschangerequest"===t&&Object.entries(null!=n?n:{}).forEach((e=>{let[t,n]=e;c.options[t]=n}))},getState:()=>u,subscribe:e=>(m({},l.length+1),l.push(e),e(u),()=>{const t=l.indexOf(e);t>=0&&(m({},l.length-1),l.splice(t,1))})}};var w3,x3,E3,A3,_3,S3,T3,k3,C3,I3,R3,D3,L3=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},P3=(e,t,n)=>(L3(e,t,"read from private field"),n?n.call(e):t.get(e)),M3=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},N3=(e,t,n,r)=>(L3(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),O3=(e,t,n)=>(L3(e,t,"access private method"),n);const j3=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],F3="defaultsubtitles",U3="defaultstreamtype",B3="defaultduration",$3="fullscreenelement",V3="hotkeys",W3="keysused",z3="liveedgeoffset",H3="seektoliveoffset",q3="noautoseektolive",G3="nohotkeys",K3="novolumepref",Y3="nosubtitleslangpref",Q3="nodefaultstore",X3="keyboardforwardseekoffset",Z3="keyboardbackwardseekoffset",J3="lang";class e4 extends k2{constructor(){super(),M3(this,T3),M3(this,C3),M3(this,R3),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,M3(this,w3,new F2(this,V3)),M3(this,x3,void 0),M3(this,E3,void 0),M3(this,A3,void 0),M3(this,_3,void 0),M3(this,S3,(e=>{var t;null==(t=P3(this,E3))||t.dispatch(e)})),this.associateElement(this);let e={};N3(this,A3,(t=>{Object.entries(t).forEach((t=>{let[n,r]=t;if(n in e&&e[n]===r)return;this.propagateMediaState(n,r);const i=n.toLowerCase(),o=new A1.CustomEvent(z0[i],{composed:!0,detail:r});this.dispatchEvent(o)})),e=t})),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(G3,V3,U3,F3,B3,J3)}get mediaStore(){return P3(this,E3)}set mediaStore(e){var t,n;P3(this,E3)&&(null==(t=P3(this,_3))||t.call(this),N3(this,_3,void 0)),N3(this,E3,e),P3(this,E3)||this.hasAttribute(Q3)?N3(this,_3,null==(n=P3(this,E3))?void 0:n.subscribe(P3(this,A3))):O3(this,T3,k3).call(this)}get fullscreenElement(){var e;return null!=(e=P3(this,x3))?e:this}set fullscreenElement(e){var t;this.hasAttribute($3)&&this.removeAttribute($3),N3(this,x3,e),null==(t=P3(this,E3))||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return W1(this,F3)}set defaultSubtitles(e){z1(this,F3,e)}get defaultStreamType(){return H1(this,U3)}set defaultStreamType(e){q1(this,U3,e)}get defaultDuration(){return $1(this,B3)}set defaultDuration(e){V1(this,B3,e)}get noHotkeys(){return W1(this,G3)}set noHotkeys(e){z1(this,G3,e)}get keysUsed(){return H1(this,W3)}set keysUsed(e){q1(this,W3,e)}get liveEdgeOffset(){return $1(this,z3)}set liveEdgeOffset(e){V1(this,z3,e)}get noAutoSeekToLive(){return W1(this,q3)}set noAutoSeekToLive(e){z1(this,q3,e)}get noVolumePref(){return W1(this,K3)}set noVolumePref(e){z1(this,K3,e)}get noSubtitlesLangPref(){return W1(this,Y3)}set noSubtitlesLangPref(e){z1(this,Y3,e)}get noDefaultStore(){return W1(this,Q3)}set noDefaultStore(e){z1(this,Q3,e)}attributeChangedCallback(e,t,n){var r,i,o,a,s,l,c,u;if(super.attributeChangedCallback(e,t,n),e===G3)n!==t&&""===n?(this.hasAttribute(V3)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&null===n&&this.enableHotkeys();else if(e===V3)P3(this,w3).value=n;else if(e===F3&&n!==t)null==(r=P3(this,E3))||r.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(F3)}});else if(e===U3)null==(o=P3(this,E3))||o.dispatch({type:"optionschangerequest",detail:{defaultStreamType:null!=(i=this.getAttribute(U3))?i:void 0}});else if(e===z3)null==(a=P3(this,E3))||a.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(z3)?+this.getAttribute(z3):void 0,seekToLiveOffset:this.hasAttribute(H3)?void 0:+this.getAttribute(z3)}});else if(e===H3)null==(s=P3(this,E3))||s.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(H3)?+this.getAttribute(H3):void 0}});else if(e===q3)null==(l=P3(this,E3))||l.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(q3)}});else if(e===$3){const e=n?null==(c=this.getRootNode())?void 0:c.getElementById(n):void 0;N3(this,x3,e),null==(u=P3(this,E3))||u.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===J3&&n!==t&&(f1=n)}connectedCallback(){var e,t;P3(this,E3)||this.hasAttribute(Q3)||O3(this,T3,k3).call(this),null==(e=P3(this,E3))||e.dispatch({type:"documentelementchangerequest",detail:_1}),super.connectedCallback(),P3(this,E3)&&!P3(this,_3)&&N3(this,_3,null==(t=P3(this,E3))?void 0:t.subscribe(P3(this,A3))),this.enableHotkeys()}disconnectedCallback(){var e,t,n,r;null==(e=super.disconnectedCallback)||e.call(this),P3(this,E3)&&(null==(t=P3(this,E3))||t.dispatch({type:"documentelementchangerequest",detail:void 0}),null==(n=P3(this,E3))||n.dispatch({type:F0.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),P3(this,_3)&&(null==(r=P3(this,_3))||r.call(this),N3(this,_3,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),null==(t=P3(this,E3))||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),null==(t=P3(this,E3))||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){l4(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),r=this.unregisterMediaStateReceiver.bind(this),i=c4(e,n,r);Object.values(F0).forEach((t=>{e.addEventListener(t,P3(this,S3))})),t.set(e,i)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(F0).forEach((t=>{e.removeEventListener(t,P3(this,S3))}))}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),P3(this,E3)&&Object.entries(P3(this,E3).getState()).forEach((t=>{let[n,r]=t;l4([e],n,r)})))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",O3(this,R3,D3))}disableHotkeys(){this.removeEventListener("keydown",O3(this,R3,D3)),this.removeEventListener("keyup",O3(this,C3,I3))}get hotkeys(){return H1(this,V3)}set hotkeys(e){q1(this,V3,e)}keyboardShortcutHandler(e){var t,n,r,i,o;const a=e.target;if((null!=(r=null!=(n=null==(t=a.getAttribute(W3))?void 0:t.split(" "))?n:null==a?void 0:a.keysUsed)?r:[]).map((e=>"Space"===e?" ":e)).filter(Boolean).includes(e.key))return;let s,l,c;if(!P3(this,w3).contains(`no${e.key.toLowerCase()}`)&&(" "!==e.key||!P3(this,w3).contains("nospace")))switch(e.key){case" ":case"k":s=P3(this,E3).getState().mediaPaused?F0.MEDIA_PLAY_REQUEST:F0.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new A1.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"m":s="off"===this.mediaStore.getState().mediaVolumeLevel?F0.MEDIA_UNMUTE_REQUEST:F0.MEDIA_MUTE_REQUEST,this.dispatchEvent(new A1.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"f":s=this.mediaStore.getState().mediaIsFullscreen?F0.MEDIA_EXIT_FULLSCREEN_REQUEST:F0.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new A1.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new A1.CustomEvent(F0.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const e=this.hasAttribute(Z3)?+this.getAttribute(Z3):10;l=Math.max((null!=(i=this.mediaStore.getState().mediaCurrentTime)?i:0)-e,0),c=new A1.CustomEvent(F0.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}case"ArrowRight":{const e=this.hasAttribute(X3)?+this.getAttribute(X3):10;l=Math.max((null!=(o=this.mediaStore.getState().mediaCurrentTime)?o:0)+e,0),c=new A1.CustomEvent(F0.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}}}}w3=new WeakMap,x3=new WeakMap,E3=new WeakMap,A3=new WeakMap,_3=new WeakMap,S3=new WeakMap,T3=new WeakSet,k3=function(){var e;this.mediaStore=b3({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(F3),defaultDuration:this.hasAttribute(B3)?+this.getAttribute(B3):void 0,defaultStreamType:null!=(e=this.getAttribute(U3))?e:void 0,liveEdgeOffset:this.hasAttribute(z3)?+this.getAttribute(z3):void 0,seekToLiveOffset:this.hasAttribute(H3)?+this.getAttribute(H3):this.hasAttribute(z3)?+this.getAttribute(z3):void 0,noAutoSeekToLive:this.hasAttribute(q3),noVolumePref:this.hasAttribute(K3),noSubtitlesLangPref:this.hasAttribute(Y3)}})},C3=new WeakSet,I3=function(e){const{key:t}=e;j3.includes(t)?this.keyboardShortcutHandler(e):this.removeEventListener("keyup",O3(this,C3,I3))},R3=new WeakSet,D3=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!j3.includes(r)?this.removeEventListener("keyup",O3(this,C3,I3)):([" ","ArrowLeft","ArrowRight"].includes(r)&&!(P3(this,w3).contains(`no${r.toLowerCase()}`)||" "===r&&P3(this,w3).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",O3(this,C3,I3),{once:!0}))};const t4=Object.values(V0),n4=Object.values(B0),r4=e=>{var t,n,r,i;let{observedAttributes:o}=e.constructor;!o&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(A1.customElements.upgrade(e),({observedAttributes:o}=e.constructor));const a=null==(i=null==(r=null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,U0.MEDIA_CHROME_ATTRIBUTES))?void 0:r.split)?void 0:i.call(r,/\s+/);return Array.isArray(o||a)?(o||a).filter((e=>t4.includes(e))):[]},i4=e=>(e=>{var t,n;return!(null==(t=e.nodeName)?void 0:t.includes("-"))||!A1.customElements.get(null==(n=e.nodeName)?void 0:n.toLowerCase())||e instanceof A1.customElements.get(e.nodeName.toLowerCase())||A1.customElements.upgrade(e),n4.some((t=>t in e))})(e)||!!r4(e).length,o4=e=>{var t;return null==(t=null==e?void 0:e.join)?void 0:t.call(e,":")},a4={[V0.MEDIA_SUBTITLES_LIST]:W2,[V0.MEDIA_SUBTITLES_SHOWING]:W2,[V0.MEDIA_SEEKABLE]:o4,[V0.MEDIA_BUFFERED]:e=>null==e?void 0:e.map(o4).join(" "),[V0.MEDIA_PREVIEW_COORDS]:e=>null==e?void 0:e.join(" "),[V0.MEDIA_RENDITION_LIST]:function(e){return null==e?void 0:e.map(e1).join(" ")},[V0.MEDIA_AUDIO_TRACK_LIST]:function(e){return null==e?void 0:e.map(n1).join(" ")}},s4=(e,t)=>{if((e=>{var t;return!!(null==(t=e.closest)?void 0:t.call(e,'*[slot="media"]'))})(e))return;const n=(e,t)=>{var n,r;i4(e)&&t(e);const{children:i=[]}=null!=e?e:{};[...i,...null!=(r=null==(n=null==e?void 0:e.shadowRoot)?void 0:n.children)?r:[]].forEach((e=>s4(e,t)))},r=null==e?void 0:e.nodeName.toLowerCase();!r.includes("-")||i4(e)?n(e,t):A1.customElements.whenDefined(r).then((()=>{n(e,t)}))},l4=(e,t,n)=>{e.forEach((e=>{if(t in e)return void(e[t]=n);const r=r4(e),i=t.toLowerCase();r.includes(i)&&(async(e,t,n)=>{var r,i;if(e.isConnected||await s1(0),"boolean"===typeof n||null==n)return z1(e,t,n);if("number"===typeof n)return V1(e,t,n);if("string"===typeof n)return q1(e,t,n);if(Array.isArray(n)&&!n.length)return e.removeAttribute(t);const o=null!=(i=null==(r=a4[t])?void 0:r.call(a4,n))?i:n;e.setAttribute(t,o)})(e,i,n)}))},c4=(e,t,n)=>{s4(e,t);const r=e=>{var n;const r=null!=(n=null==e?void 0:e.composedPath()[0])?n:e.target;t(r)},i=e=>{var t;const r=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;n(r)};e.addEventListener(F0.REGISTER_MEDIA_STATE_RECEIVER,r),e.addEventListener(F0.UNREGISTER_MEDIA_STATE_RECEIVER,i);let o=[];const a=e=>{const r=e.target;"media"!==r.name&&(o.forEach((e=>s4(e,n))),o=[...r.assignedElements({flatten:!0})],o.forEach((e=>s4(e,t))))};e.addEventListener("slotchange",a);const s=new MutationObserver((e=>{e.forEach((e=>{const{addedNodes:r=[],removedNodes:i=[],type:o,target:a,attributeName:s}=e;"childList"===o?(Array.prototype.forEach.call(r,(e=>s4(e,t))),Array.prototype.forEach.call(i,(e=>s4(e,n)))):"attributes"===o&&s===U0.MEDIA_CHROME_ATTRIBUTES&&(i4(a)?t(a):n(a))}))}));s.observe(e,{childList:!0,attributes:!0,subtree:!0});return()=>{s4(e,n),e.removeEventListener("slotchange",a),s.disconnect(),e.removeEventListener(F0.REGISTER_MEDIA_STATE_RECEIVER,r),e.removeEventListener(F0.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};A1.customElements.get("media-controller")||A1.customElements.define("media-controller",e4);var u4,d4,h4,p4,f4,m4,g4,v4=e4,y4=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},b4=(e,t,n)=>(y4(e,t,"read from private field"),n?n.call(e):t.get(e)),w4=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},x4=(e,t,n,r)=>(y4(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const E4="tooltipplacement",A4="disabled",_4="notooltip",S4=_1.createElement("template");S4.innerHTML='\n<style>\n  :host {\n    position: relative;\n    font: var(--media-font,\n      var(--media-font-weight, bold)\n      var(--media-font-size, 14px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n    padding: var(--media-button-padding, var(--media-control-padding, 10px));\n    justify-content: var(--media-button-justify-content, center);\n    display: inline-flex;\n    align-items: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    transition: background .15s linear;\n    pointer-events: auto;\n    cursor: var(--media-cursor, pointer);\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  \n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n    outline: 0;\n  }\n  \n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50 50 70 / .7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n\n  media-tooltip {\n    \n    max-width: 0;\n    overflow-x: clip;\n    opacity: 0;\n    transition: opacity .3s, max-width 0s 9s;\n  }\n\n  :host(:hover) media-tooltip,\n  :host(:focus-visible) media-tooltip {\n    max-width: 100vw;\n    opacity: 1;\n    transition: opacity .3s;\n  }\n\n  :host([notooltip]) slot[name="tooltip"] {\n    display: none;\n  }\n</style>\n\n<slot name="tooltip">\n  <media-tooltip part="tooltip" aria-hidden="true">\n    <slot name="tooltip-content"></slot>\n  </media-tooltip>\n</slot>\n';class T4 extends A1.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(super(),w4(this,m4),w4(this,u4,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",w4(this,d4,(e=>{this.preventClick||this.handleClick(e),setTimeout(b4(this,h4),0)})),w4(this,h4,(()=>{var e,t;null==(t=null==(e=this.tooltipEl)?void 0:e.updateXOffset)||t.call(e)})),w4(this,p4,(e=>{const{key:t}=e;this.keysUsed.includes(t)?this.preventClick||this.handleClick(e):this.removeEventListener("keyup",b4(this,p4))})),w4(this,f4,(e=>{const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",b4(this,p4)):this.addEventListener("keyup",b4(this,p4),{once:!0})})),!this.shadowRoot){this.attachShadow({mode:"open"});const n=S4.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=_1.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),e.tooltipContent&&(n.querySelector('slot[name="tooltip-content"]').innerHTML=null!=(t=e.tooltipContent)?t:"",this.tooltipContent=e.tooltipContent),this.nativeEl.appendChild(r.content.cloneNode(!0)),this.shadowRoot.appendChild(n)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",E4,U0.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",b4(this,d4)),this.addEventListener("keydown",b4(this,f4)),this.tabIndex=0}disable(){this.removeEventListener("click",b4(this,d4)),this.removeEventListener("keydown",b4(this,f4)),this.removeEventListener("keyup",b4(this,p4)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===U0.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=b4(this,u4))?void 0:r.unassociateElement)||i.call(r,this),x4(this,u4,null)),n&&this.isConnected&&(x4(this,u4,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=b4(this,u4))?void 0:a.associateElement)||s.call(a,this))):"disabled"===e&&n!==t?null==n?this.enable():this.disable():e===E4&&this.tooltipEl&&n!==t&&(this.tooltipEl.placement=n),b4(this,h4).call(this)}connectedCallback(){var e,t,n;const{style:r}=U1(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const i=this.getAttribute(U0.MEDIA_CONTROLLER);i&&(x4(this,u4,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=b4(this,u4))?void 0:t.associateElement)||n.call(t,this)),A1.customElements.whenDefined("media-tooltip").then((()=>{return(e=this,t=m4,n=g4,y4(e,t,"access private method"),n).call(this);var e,t,n}))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=b4(this,u4))?void 0:e.unassociateElement)||t.call(e,this),x4(this,u4,null),this.removeEventListener("mouseenter",b4(this,h4)),this.removeEventListener("focus",b4(this,h4)),this.removeEventListener("click",b4(this,d4))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return H1(this,E4)}set tooltipPlacement(e){q1(this,E4,e)}get mediaController(){return H1(this,U0.MEDIA_CONTROLLER)}set mediaController(e){q1(this,U0.MEDIA_CONTROLLER,e)}get disabled(){return W1(this,A4)}set disabled(e){z1(this,A4,e)}get noTooltip(){return W1(this,_4)}set noTooltip(e){z1(this,_4,e)}handleClick(e){}}u4=new WeakMap,d4=new WeakMap,h4=new WeakMap,p4=new WeakMap,f4=new WeakMap,m4=new WeakSet,g4=function(){this.addEventListener("mouseenter",b4(this,h4)),this.addEventListener("focus",b4(this,h4)),this.addEventListener("click",b4(this,d4));const e=this.tooltipPlacement;e&&this.tooltipEl&&(this.tooltipEl.placement=e)},A1.customElements.get("media-chrome-button")||A1.customElements.define("media-chrome-button",T4);const k4='<svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>\n</svg>\n',C4=_1.createElement("template");C4.innerHTML=`\n  <style>\n    :host([${V0.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${V0.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${V0.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],\n    :host(:not([${V0.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${k4}</slot>\n    <slot name="exit">${k4}</slot>\n  </slot>\n`;const I4=`\n  <slot name="tooltip-enter">${m1("start airplay")}</slot>\n  <slot name="tooltip-exit">${m1("stop airplay")}</slot>\n`,R4=e=>{const t=e.mediaIsAirplaying?m1("stop airplay"):m1("start airplay");e.setAttribute("aria-label",t)};class D4 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_IS_AIRPLAYING,V0.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(){super({slotTemplate:C4,tooltipContent:I4,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),R4(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_IS_AIRPLAYING&&R4(this)}get mediaIsAirplaying(){return W1(this,V0.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){z1(this,V0.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return H1(this,V0.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){q1(this,V0.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new A1.CustomEvent(F0.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}A1.customElements.get("media-airplay-button")||A1.customElements.define("media-airplay-button",D4);const L4=_1.createElement("template");L4.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-checked="true"]) slot[name=tooltip-enable],\n    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const P4=`\n  <slot name="tooltip-enable">${m1("Enable captions")}</slot>\n  <slot name="tooltip-disable">${m1("Disable captions")}</slot>\n`,M4=e=>{e.setAttribute("aria-checked",G2(e).toString())};class N4 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_SUBTITLES_LIST,V0.MEDIA_SUBTITLES_SHOWING]}constructor(){super({slotTemplate:L4,tooltipContent:P4,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",m1("closed captions")),M4(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_SUBTITLES_SHOWING&&M4(this)}get mediaSubtitlesList(){return O4(this,V0.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){j4(this,V0.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return O4(this,V0.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){j4(this,V0.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new A1.CustomEvent(F0.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const O4=(e,t)=>{const n=e.getAttribute(t);return n?B2(n):[]},j4=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=W2(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};A1.customElements.get("media-captions-button")||A1.customElements.define("media-captions-button",N4);const F4=_1.createElement("template");F4.innerHTML=`\n  <style>\n  :host([${V0.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${V0.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${V0.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],\n    :host(:not([${V0.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>\n  </slot>\n`;const U4=`\n  <slot name="tooltip-enter">${m1("Start casting")}</slot>\n  <slot name="tooltip-exit">${m1("Stop casting")}</slot>\n`,B4=e=>{const t=e.mediaIsCasting?m1("stop casting"):m1("start casting");e.setAttribute("aria-label",t)};class $4 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_IS_CASTING,V0.MEDIA_CAST_UNAVAILABLE]}constructor(){super({slotTemplate:F4,tooltipContent:U4,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),B4(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_IS_CASTING&&B4(this)}get mediaIsCasting(){return W1(this,V0.MEDIA_IS_CASTING)}set mediaIsCasting(e){z1(this,V0.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return H1(this,V0.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){q1(this,V0.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?F0.MEDIA_EXIT_CAST_REQUEST:F0.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new A1.CustomEvent(e,{composed:!0,bubbles:!0}))}}A1.customElements.get("media-cast-button")||A1.customElements.define("media-cast-button",$4);var V4,W4,z4,H4,q4,G4,K4,Y4,Q4,X4,Z4,J4,e5,t5,n5,r5=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},i5=(e,t,n)=>(r5(e,t,"read from private field"),n?n.call(e):t.get(e)),o5=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},a5=(e,t,n,r)=>(r5(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),s5=(e,t,n)=>(r5(e,t,"access private method"),n);const l5="open",c5="anchor";class u5 extends A1.HTMLElement{constructor(){super(),o5(this,H4),o5(this,G4),o5(this,Y4),o5(this,X4),o5(this,J4),o5(this,t5),o5(this,V4,!1),o5(this,W4,null),o5(this,z4,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[l5,c5]}get open(){return W1(this,l5)}set open(e){z1(this,l5,e)}handleEvent(e){switch(e.type){case"invoke":s5(this,X4,Z4).call(this,e);break;case"focusout":s5(this,J4,e5).call(this,e);break;case"keydown":s5(this,t5,n5).call(this,e)}}connectedCallback(){s5(this,H4,q4).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,t,n){s5(this,H4,q4).call(this),e===l5&&n!==t&&(this.open?s5(this,G4,K4).call(this):s5(this,Y4,Q4).call(this))}focus(){a5(this,W4,O1());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),t=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||t)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==n||n.focus()}get keysUsed(){return["Escape","Tab"]}}V4=new WeakMap,W4=new WeakMap,z4=new WeakMap,H4=new WeakSet,q4=function(){if(!i5(this,V4)&&(a5(this,V4,!0),!this.shadowRoot)){this.attachShadow({mode:"open"});const e=function(e){const t={};for(const n of e)t[n.name]=n.value;return t}(this.attributes);this.shadowRoot.innerHTML=`\n        ${this.constructor.getTemplateHTML(e)}\n      `,queueMicrotask((()=>{const{style:e}=U1(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")}))}},G4=new WeakSet,K4=function(){var e;null==(e=i5(this,z4))||e.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",(()=>this.focus()),{once:!0})},Y4=new WeakSet,Q4=function(){var e;null==(e=i5(this,z4))||e.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))},X4=new WeakSet,Z4=function(e){a5(this,z4,e.relatedTarget),M1(this,e.relatedTarget)||(this.open=!this.open)},J4=new WeakSet,e5=function(e){var t;M1(this,e.relatedTarget)||(null==(t=i5(this,W4))||t.focus(),i5(this,z4)&&i5(this,z4)!==e.relatedTarget&&this.open&&(this.open=!1))},t5=new WeakSet,n5=function(e){var t,n,r,i,o;const{key:a,ctrlKey:s,altKey:l,metaKey:c}=e;s||l||c||this.keysUsed.includes(a)&&(e.preventDefault(),e.stopPropagation(),"Tab"===a?(e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()):"Escape"===a&&(null==(o=i5(this,W4))||o.focus(),this.open=!1))},u5.getTemplateHTML=function(e){return`\n    <style>\n      :host {\n        font: var(--media-font,\n          var(--media-font-weight, normal)\n          var(--media-font-size, 14px) /\n          var(--media-text-content-height, var(--media-control-height, 24px))\n          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n        display: var(--media-dialog-display, inline-flex);\n        justify-content: center;\n        align-items: center;\n        \n        transition-behavior: allow-discrete;\n        visibility: hidden;\n        opacity: 0;\n        transform: translateY(2px) scale(.99);\n        pointer-events: none;\n      }\n\n      :host([open]) {\n        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;\n        visibility: visible;\n        opacity: 1;\n        transform: translateY(0) scale(1);\n        pointer-events: auto;\n      }\n\n      #content {\n        display: flex;\n        position: relative;\n        box-sizing: border-box;\n        width: min(320px, 100%);\n        word-wrap: break-word;\n        max-height: 100%;\n        overflow: auto;\n        text-align: center;\n        line-height: 1.4;\n      }\n    </style>\n    ${this.getSlotTemplateHTML(e)}\n  `},u5.getSlotTemplateHTML=function(e){return'\n    <slot id="content"></slot>\n  '},A1.customElements.get("media-chrome-dialog")||A1.customElements.define("media-chrome-dialog",u5);var d5,h5,p5,f5,m5,g5,v5,y5,b5,w5,x5,E5,A5,_5,S5,T5,k5,C5,I5,R5,D5,L5,P5,M5,N5,O5=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},j5=(e,t,n)=>(O5(e,t,"read from private field"),n?n.call(e):t.get(e)),F5=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},U5=(e,t,n,r)=>(O5(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),B5=(e,t,n)=>(O5(e,t,"access private method"),n);const $5=_1.createElement("template");$5.innerHTML='\n  <style>\n    :host {\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      box-shadow: var(--_focus-visible-box-shadow, none);\n      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      display: inline-flex;\n      align-items: center;\n      \n      vertical-align: middle;\n      box-sizing: border-box;\n      position: relative;\n      width: 100px;\n      transition: background .15s linear;\n      cursor: var(--media-cursor, pointer);\n      pointer-events: auto;\n      touch-action: none; \n    }\n\n    \n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgb(50 50 70 / .7));\n    }\n\n    #leftgap {\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n    }\n\n    #rightgap {\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n    }\n\n    #startpoint,\n    #endpoint {\n      position: absolute;\n    }\n\n    #endpoint {\n      right: 0;\n    }\n\n    #container {\n      \n      width: var(--media-range-track-width, 100%);\n      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));\n      position: relative;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      min-width: 40px;\n    }\n\n    #range {\n      \n      display: var(--media-time-range-hover-display, block);\n      bottom: var(--media-time-range-hover-bottom, -7px);\n      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));\n      width: 100%;\n      position: absolute;\n      cursor: var(--media-cursor, pointer);\n\n      -webkit-appearance: none; \n      -webkit-tap-highlight-color: transparent;\n      background: transparent; \n      margin: 0;\n      z-index: 1;\n    }\n\n    @media (hover: hover) {\n      #range {\n        bottom: var(--media-time-range-hover-bottom, -5px);\n        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));\n      }\n    }\n\n    \n    \n    #range::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      background: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    \n    #range::-moz-range-thumb {\n      background: transparent;\n      border: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    #appearance {\n      height: var(--media-range-track-height, 4px);\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      width: 100%;\n      position: absolute;\n      \n      will-change: transform;\n    }\n\n    #track {\n      background: var(--media-range-track-background, rgb(255 255 255 / .2));\n      border-radius: var(--media-range-track-border-radius, 1px);\n      border: var(--media-range-track-border, none);\n      outline: var(--media-range-track-outline);\n      outline-offset: var(--media-range-track-outline-offset);\n      backdrop-filter: var(--media-range-track-backdrop-filter);\n      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);\n      box-shadow: var(--media-range-track-box-shadow, none);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    #progress,\n    #pointer {\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #progress {\n      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));\n      transition: var(--media-range-track-transition);\n    }\n\n    #pointer {\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    @media (hover: hover) {\n      :host(:hover) #pointer {\n        transition: visibility .5s, opacity .5s;\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    #thumb,\n    ::slotted([slot=thumb]) {\n      width: var(--media-range-thumb-width, 10px);\n      height: var(--media-range-thumb-height, 10px);\n      transition: var(--media-range-thumb-transition);\n      transform: var(--media-range-thumb-transform, none);\n      opacity: var(--media-range-thumb-opacity, 1);\n      translate: -50%;\n      position: absolute;\n      left: 0;\n      cursor: var(--media-cursor, pointer);\n    }\n\n    #thumb {\n      border-radius: var(--media-range-thumb-border-radius, 10px);\n      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));\n      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n      border: var(--media-range-thumb-border, none);\n    }\n\n    :host([disabled]) #thumb {\n      background-color: #777;\n    }\n\n    .segments #appearance {\n      height: var(--media-range-segment-hover-height, 7px);\n    }\n\n    #track {\n      clip-path: url(#segments-clipping);\n    }\n\n    #segments {\n      --segments-gap: var(--media-range-segments-gap, 2px);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n\n    #segments-clipping {\n      transform: translateX(calc(var(--segments-gap) / 2));\n    }\n\n    #segments-clipping:empty {\n      display: none;\n    }\n\n    #segments-clipping rect {\n      height: var(--media-range-track-height, 4px);\n      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);\n      transition: var(--media-range-segment-transition, transform .1s ease-in-out);\n      transform: var(--media-range-segment-transform, scaleY(1));\n      transform-origin: center;\n    }\n  </style>\n  <div id="leftgap"></div>\n  <div id="container">\n    <div id="startpoint"></div>\n    <div id="endpoint"></div>\n    <div id="appearance">\n      <div id="track" part="track">\n        <div id="pointer"></div>\n        <div id="progress" part="progress"></div>\n      </div>\n      <slot name="thumb">\n        <div id="thumb" part="thumb"></div>\n      </slot>\n      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>\n    </div>\n    <input id="range" type="range" min="0" max="1" step="any" value="0">\n  </div>\n  <div id="rightgap"></div>\n';class V5 extends A1.HTMLElement{constructor(){super(),F5(this,w5),F5(this,E5),F5(this,_5),F5(this,T5),F5(this,C5),F5(this,R5),F5(this,L5),F5(this,M5),F5(this,d5,void 0),F5(this,h5,void 0),F5(this,p5,void 0),F5(this,f5,void 0),F5(this,m5,{}),F5(this,g5,[]),F5(this,v5,(()=>{if(this.range.matches(":focus-visible")){const{style:e}=U1(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}})),F5(this,y5,(()=>{const{style:e}=U1(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")})),F5(this,b5,(()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild($5.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),U5(this,p5,this.shadowRoot.querySelector("#startpoint")),U5(this,f5,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",U0.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===U0.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=j5(this,d5))?void 0:r.unassociateElement)||i.call(r,this),U5(this,d5,null)),n&&this.isConnected&&(U5(this,d5,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=j5(this,d5))?void 0:a.associateElement)||s.call(a,this))):("disabled"===e||"aria-disabled"===e&&t!==n)&&(null==n?(this.range.removeAttribute(e),B5(this,E5,A5).call(this)):(this.range.setAttribute(e,n),B5(this,_5,S5).call(this)))}connectedCallback(){var e,t,n;const{style:r}=U1(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),j5(this,m5).pointer=U1(this.shadowRoot,"#pointer"),j5(this,m5).progress=U1(this.shadowRoot,"#progress"),j5(this,m5).thumb=U1(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),j5(this,m5).activeSegment=U1(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const i=this.getAttribute(U0.MEDIA_CONTROLLER);i&&(U5(this,d5,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=j5(this,d5))?void 0:t.associateElement)||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",j5(this,v5)),this.shadowRoot.addEventListener("focusout",j5(this,y5)),B5(this,E5,A5).call(this),C1(this.container,j5(this,b5))}disconnectedCallback(){var e,t;B5(this,_5,S5).call(this),null==(t=null==(e=j5(this,d5))?void 0:e.unassociateElement)||t.call(e,this),U5(this,d5,null),this.shadowRoot.removeEventListener("focusin",j5(this,v5)),this.shadowRoot.removeEventListener("focusout",j5(this,y5)),I1(this.container,j5(this,b5))}updatePointerBar(e){var t;null==(t=j5(this,m5).pointer)||t.style.setProperty("width",100*this.getPointerRatio(e)+"%")}updateBar(){var e,t;const n=100*this.range.valueAsNumber;null==(e=j5(this,m5).progress)||e.style.setProperty("width",`${n}%`),null==(t=j5(this,m5).thumb)||t.style.setProperty("left",`${n}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(null==e?void 0:e.length)),!(null==e?void 0:e.length))return;const n=[...new Set([+this.range.min,...e.flatMap((e=>[e.start,e.end])),+this.range.max])];U5(this,g5,[...n]);const r=n.pop();for(const[i,o]of n.entries()){const[e,a]=[0===i,i===n.length-1],s=e?"calc(var(--segments-gap) / -1)":100*o+"%",l=`calc(${100*((a?r:n[i+1])-o)}%${e||a?"":" - var(--segments-gap)"})`,c=_1.createElementNS("http://www.w3.org/2000/svg","rect"),u=U1(this.shadowRoot,`#segments-clipping rect:nth-child(${i+1})`);u.style.setProperty("x",s),u.style.setProperty("width",l),t.append(c)}}getPointerRatio(e){return function(e,t,n,r){const i=r.x-n.x,o=r.y-n.y,a=i*i+o*o;if(0===a)return 0;const s=((e-n.x)*i+(t-n.y)*o)/a;return Math.max(0,Math.min(1,s))}(e.clientX,e.clientY,j5(this,p5).getBoundingClientRect(),j5(this,f5).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":B5(this,M5,N5).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":B5(this,C5,I5).call(this,e);break;case"pointerdown":B5(this,T5,k5).call(this,e);break;case"pointerup":B5(this,R5,D5).call(this);break;case"pointerleave":B5(this,L5,P5).call(this)}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}d5=new WeakMap,h5=new WeakMap,p5=new WeakMap,f5=new WeakMap,m5=new WeakMap,g5=new WeakMap,v5=new WeakMap,y5=new WeakMap,b5=new WeakMap,w5=new WeakSet,x5=function(e){const t=j5(this,m5).activeSegment;if(!t)return;const n=this.getPointerRatio(e),r=j5(this,g5).findIndex(((e,t,r)=>{const i=r[t+1];return null!=i&&n>=e&&n<=i})),i=`#segments-clipping rect:nth-child(${r+1})`;t.selectorText==i&&t.style.transform||(t.selectorText=i,t.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))},E5=new WeakSet,A5=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))},_5=new WeakSet,S5=function(){var e,t;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),null==(e=A1.window)||e.removeEventListener("pointerup",this),null==(t=A1.window)||t.removeEventListener("pointermove",this)},T5=new WeakSet,k5=function(e){var t;U5(this,h5,e.composedPath().includes(this.range)),null==(t=A1.window)||t.addEventListener("pointerup",this)},C5=new WeakSet,I5=function(e){var t;"mouse"!==e.pointerType&&B5(this,T5,k5).call(this,e),this.addEventListener("pointerleave",this),null==(t=A1.window)||t.addEventListener("pointermove",this)},R5=new WeakSet,D5=function(){var e;null==(e=A1.window)||e.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")},L5=new WeakSet,P5=function(){var e,t;this.removeEventListener("pointerleave",this),null==(e=A1.window)||e.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),null==(t=j5(this,m5).activeSegment)||t.style.removeProperty("transform")},M5=new WeakSet,N5=function(e){this.toggleAttribute("dragging",1===e.buttons||"mouse"!==e.pointerType),this.updatePointerBar(e),B5(this,w5,x5).call(this,e),!this.dragging||"mouse"===e.pointerType&&j5(this,h5)||(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(e),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))},A1.customElements.get("media-chrome-range")||A1.customElements.define("media-chrome-range",V5);var W5,z5=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},H5=(e,t,n)=>(z5(e,t,"read from private field"),n?n.call(e):t.get(e)),q5=(e,t,n,r)=>(z5(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const G5=_1.createElement("template");G5.innerHTML='\n  <style>\n    :host {\n      \n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --media-loading-indicator-icon-height: 44px;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-volume-range) {\n      min-height: 100%;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n\n    ::slotted([role="menu"]) {\n      position: absolute;\n    }\n  </style>\n\n  <slot></slot>\n';class K5 extends A1.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,W5,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(G5.content.cloneNode(!0)))}static get observedAttributes(){return[U0.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===U0.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=H5(this,W5))?void 0:r.unassociateElement)||i.call(r,this),q5(this,W5,null)),n&&this.isConnected&&(q5(this,W5,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=H5(this,W5))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(U0.MEDIA_CONTROLLER);r&&(q5(this,W5,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=H5(this,W5))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=H5(this,W5))?void 0:e.unassociateElement)||t.call(e,this),q5(this,W5,null)}}W5=new WeakMap,A1.customElements.get("media-control-bar")||A1.customElements.define("media-control-bar",K5);var Y5,Q5=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},X5=(e,t,n)=>(Q5(e,t,"read from private field"),n?n.call(e):t.get(e)),Z5=(e,t,n,r)=>(Q5(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const J5=_1.createElement("template");J5.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));\n      padding: var(--media-control-padding, 10px);\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      text-align: center;\n      pointer-events: auto;\n    }\n\n    \n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n      outline: 0;\n    }\n\n    \n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <slot></slot>\n";class e9 extends A1.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Y5,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(J5.content.cloneNode(!0)))}static get observedAttributes(){return[U0.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===U0.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=X5(this,Y5))?void 0:r.unassociateElement)||i.call(r,this),Z5(this,Y5,null)),n&&this.isConnected&&(Z5(this,Y5,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=X5(this,Y5))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const{style:r}=U1(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const i=this.getAttribute(U0.MEDIA_CONTROLLER);i&&(Z5(this,Y5,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=X5(this,Y5))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=X5(this,Y5))?void 0:e.unassociateElement)||t.call(e,this),Z5(this,Y5,null)}}Y5=new WeakMap,A1.customElements.get("media-text-display")||A1.customElements.define("media-text-display",e9);var t9,n9=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},r9=(e,t,n)=>(n9(e,t,"read from private field"),n?n.call(e):t.get(e));class i9 extends e9{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,t9,void 0),e=this,t=t9,n=this.shadowRoot.querySelector("slot"),n9(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),r9(this,t9).textContent=u1(0)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===V0.MEDIA_DURATION&&(r9(this,t9).textContent=u1(+n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return $1(this,V0.MEDIA_DURATION)}set mediaDuration(e){V1(this,V0.MEDIA_DURATION,e)}}t9=new WeakMap,A1.customElements.get("media-duration-display")||A1.customElements.define("media-duration-display",i9);const o9={2:m1("Network Error"),3:m1("Decode Error"),4:m1("Source Not Supported"),5:m1("Encryption Error")},a9={2:m1("A network error caused the media download to fail."),3:m1("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:m1("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:m1("The media is encrypted and there are no keys to decrypt it.")},s9=e=>{var t,n;return 1===e.code?null:{title:null!=(t=o9[e.code])?t:`Error ${e.code}`,message:null!=(n=a9[e.code])?n:e.message}};var l9,c9=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};function u9(e){var t;const{title:n,message:r}=null!=(t=s9(e))?t:{};let i="";return n&&(i+=`<slot name="error-${e.code}-title"><h3>${n}</h3></slot>`),r&&(i+=`<slot name="error-${e.code}-message"><p>${r}</p></slot>`),i}const d9=[V0.MEDIA_ERROR_CODE,V0.MEDIA_ERROR_MESSAGE];class h9 extends u5{constructor(){super(...arguments),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,l9,null)}static get observedAttributes(){return[...super.observedAttributes,...d9]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,t,n){var r;if(super.attributeChangedCallback(e,t,n),!d9.includes(e))return;const i=null!=(r=this.mediaError)?r:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=function(e){return e.code&&null!==s9(e)}(i),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(i))}get mediaError(){return c9(e=this,t=l9,"read from private field"),n?n.call(e):t.get(e);var e,t,n}set mediaError(e){((e,t,n,r)=>{c9(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,l9,e)}get mediaErrorCode(){return $1(this,"mediaerrorcode")}set mediaErrorCode(e){V1(this,"mediaerrorcode",e)}get mediaErrorMessage(){return H1(this,"mediaerrormessage")}set mediaErrorMessage(e){q1(this,"mediaerrormessage",e)}}l9=new WeakMap,h9.getSlotTemplateHTML=function(e){return`\n    <style>\n      :host {\n        background: rgb(20 20 30 / .8);\n      }\n\n      #content {\n        display: block;\n        padding: 1.2em 1.5em;\n      }\n\n      h3,\n      p {\n        margin-block: 0 .3em;\n      }\n    </style>\n    <slot name="error-${e.mediaerrorcode}" id="content">\n      ${u9({code:+e.mediaerrorcode,message:e.mediaerrormessage})}\n    </slot>\n  `},h9.formatErrorMessage=u9,A1.customElements.get("media-error-dialog")||A1.customElements.define("media-error-dialog",h9);var p9=h9;const f9=_1.createElement("template");f9.innerHTML=`\n  <style>\n    :host([${V0.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${V0.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${V0.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],\n    :host(:not([${V0.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>\n</svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>\n</svg></slot>\n  </slot>\n`;const m9=`\n  <slot name="tooltip-enter">${m1("Enter fullscreen mode")}</slot>\n  <slot name="tooltip-exit">${m1("Exit fullscreen mode")}</slot>\n`,g9=e=>{const t=e.mediaIsFullscreen?m1("exit fullscreen mode"):m1("enter fullscreen mode");e.setAttribute("aria-label",t)};class v9 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_IS_FULLSCREEN,V0.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(){super({slotTemplate:f9,tooltipContent:m9,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),g9(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_IS_FULLSCREEN&&g9(this)}get mediaFullscreenUnavailable(){return H1(this,V0.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){q1(this,V0.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return W1(this,V0.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){z1(this,V0.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?F0.MEDIA_EXIT_FULLSCREEN_REQUEST:F0.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new A1.CustomEvent(e,{composed:!0,bubbles:!0}))}}A1.customElements.get("media-fullscreen-button")||A1.customElements.define("media-fullscreen-button",v9);const{MEDIA_TIME_IS_LIVE:y9,MEDIA_PAUSED:b9}=V0,{MEDIA_SEEK_TO_LIVE_REQUEST:w9,MEDIA_PLAY_REQUEST:x9}=F0,E9=_1.createElement("template");E9.innerHTML=`\n  <style>\n  :host { --media-tooltip-display: none; }\n  \n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    \n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${y9}]:not([${b9}])) slot[name=indicator] > *,\n  :host([${y9}]:not([${b9}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${y9}]:not([${b9}])) {\n    cursor: var(--media-cursor, not-allowed);\n  }\n\n  slot[name=text]{\n    text-transform: uppercase;\n  }\n\n  </style>\n\n  <slot name="indicator"><svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg></slot>\n  \n  <slot name="spacer">&nbsp;</slot><slot name="text">${m1("live")}</slot>\n`;const A9=e=>{const t=e.mediaPaused||!e.mediaTimeIsLive,n=m1(t?"seek to live":"playing live");e.setAttribute("aria-label",n),t?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true")};class _9 extends T4{static get observedAttributes(){return[...super.observedAttributes,b9,y9]}constructor(){super({slotTemplate:E9,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){A9(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),A9(this)}get mediaPaused(){return W1(this,V0.MEDIA_PAUSED)}set mediaPaused(e){z1(this,V0.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return W1(this,V0.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){z1(this,V0.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new A1.CustomEvent(w9,{composed:!0,bubbles:!0})),this.hasAttribute(b9)&&this.dispatchEvent(new A1.CustomEvent(x9,{composed:!0,bubbles:!0})))}}A1.customElements.get("media-live-button")||A1.customElements.define("media-live-button",_9);var S9,T9,k9=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},C9=(e,t,n)=>(k9(e,t,"read from private field"),n?n.call(e):t.get(e)),I9=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},R9=(e,t,n,r)=>(k9(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const D9="loadingdelay",L9="noautohide",P9=_1.createElement("template");P9.innerHTML=`\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, 500ms);\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=icon] > *,\n:host ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 0);\n  transition: opacity 0.15s;\n}\n\n:host([${V0.MEDIA_LOADING}]:not([${V0.MEDIA_PAUSED}])) slot[name=icon] > *,\n:host([${V0.MEDIA_LOADING}]:not([${V0.MEDIA_PAUSED}])) ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 1);\n  transition: opacity 0.15s var(--_loading-indicator-delay);\n}\n\n:host #status {\n  visibility: var(--media-loading-indicator-opacity, hidden);\n  transition: visibility 0.15s;\n}\n\n:host([${V0.MEDIA_LOADING}]:not([${V0.MEDIA_PAUSED}])) #status {\n  visibility: var(--media-loading-indicator-opacity, visible);\n  transition: visibility 0.15s var(--_loading-indicator-delay);\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-indicator-icon-width);\n  height: var(--media-loading-indicator-icon-height, 100px);\n  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n  vertical-align: middle;\n}\n</style>\n\n<slot name="icon">\n<svg aria-hidden="true" viewBox="0 0 100 100">\n  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n    <animateTransform\n       attributeName="transform"\n       attributeType="XML"\n       type="rotate"\n       dur="1s"\n       from="0 50 50"\n       to="360 50 50"\n       repeatCount="indefinite" />\n  </path>\n</svg>\n</slot>\n<div id="status" role="status" aria-live="polite">${m1("media loading")}</div>\n`;class M9 extends A1.HTMLElement{constructor(){if(super(),I9(this,S9,void 0),I9(this,T9,500),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=P9.content.cloneNode(!0);e.appendChild(t)}}static get observedAttributes(){return[U0.MEDIA_CONTROLLER,V0.MEDIA_PAUSED,V0.MEDIA_LOADING,D9]}attributeChangedCallback(e,t,n){var r,i,o,a,s;e===D9&&t!==n?this.loadingDelay=Number(n):e===U0.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=C9(this,S9))?void 0:r.unassociateElement)||i.call(r,this),R9(this,S9,null)),n&&this.isConnected&&(R9(this,S9,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=C9(this,S9))?void 0:a.associateElement)||s.call(a,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(U0.MEDIA_CONTROLLER);r&&(R9(this,S9,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=C9(this,S9))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=C9(this,S9))?void 0:e.unassociateElement)||t.call(e,this),R9(this,S9,null)}get loadingDelay(){return C9(this,T9)}set loadingDelay(e){R9(this,T9,e);const{style:t}=U1(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return W1(this,V0.MEDIA_PAUSED)}set mediaPaused(e){z1(this,V0.MEDIA_PAUSED,e)}get mediaLoading(){return W1(this,V0.MEDIA_LOADING)}set mediaLoading(e){z1(this,V0.MEDIA_LOADING,e)}get mediaController(){return H1(this,U0.MEDIA_CONTROLLER)}set mediaController(e){q1(this,U0.MEDIA_CONTROLLER,e)}get noAutohide(){return W1(this,L9)}set noAutohide(e){z1(this,L9,e)}}S9=new WeakMap,T9=new WeakMap,A1.customElements.get("media-loading-indicator")||A1.customElements.define("media-loading-indicator",M9);const{MEDIA_VOLUME_LEVEL:N9}=V0,O9='<svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>\n</svg>',j9=_1.createElement("template");j9.innerHTML=`\n  <style>\n  \n  :host(:not([${N9}])) slot[name=icon] slot:not([name=high]), \n  :host([${N9}=high]) slot[name=icon] slot:not([name=high]) {\n    display: none !important;\n  }\n\n  :host([${N9}=off]) slot[name=icon] slot:not([name=off]) {\n    display: none !important;\n  }\n\n  :host([${N9}=low]) slot[name=icon] slot:not([name=low]) {\n    display: none !important;\n  }\n\n  :host([${N9}=medium]) slot[name=icon] slot:not([name=medium]) {\n    display: none !important;\n  }\n\n  :host(:not([${N9}=off])) slot[name=tooltip-unmute],\n  :host([${N9}=off]) slot[name=tooltip-mute] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>\n</svg></slot>\n    <slot name="low">${O9}</slot>\n    <slot name="medium">${O9}</slot>\n    <slot name="high"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>\n</svg></slot>\n  </slot>\n`;const F9=`\n  <slot name="tooltip-mute">${m1("Mute")}</slot>\n  <slot name="tooltip-unmute">${m1("Unmute")}</slot>\n`,U9=e=>{const t="off"===e.mediaVolumeLevel,n=m1(t?"unmute":"mute");e.setAttribute("aria-label",n)};class B9 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_VOLUME_LEVEL]}constructor(){super({slotTemplate:j9,tooltipContent:F9,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){U9(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===V0.MEDIA_VOLUME_LEVEL&&U9(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return H1(this,V0.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){q1(this,V0.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e="off"===this.mediaVolumeLevel?F0.MEDIA_UNMUTE_REQUEST:F0.MEDIA_MUTE_REQUEST;this.dispatchEvent(new A1.CustomEvent(e,{composed:!0,bubbles:!0}))}}A1.customElements.get("media-mute-button")||A1.customElements.define("media-mute-button",B9);const $9='<svg aria-hidden="true" viewBox="0 0 28 24">\n  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>\n</svg>',V9=_1.createElement("template");V9.innerHTML=`\n  <style>\n  :host([${V0.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${V0.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${V0.MEDIA_IS_PIP}]) slot[name=tooltip-enter],\n  :host(:not([${V0.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${$9}</slot>\n    <slot name="exit">${$9}</slot>\n  </slot>\n`;const W9=`\n  <slot name="tooltip-enter">${m1("Enter picture in picture mode")}</slot>\n  <slot name="tooltip-exit">${m1("Exit picture in picture mode")}</slot>\n`,z9=e=>{const t=e.mediaIsPip?m1("exit picture in picture mode"):m1("enter picture in picture mode");e.setAttribute("aria-label",t)};class H9 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_IS_PIP,V0.MEDIA_PIP_UNAVAILABLE]}constructor(){super({slotTemplate:V9,tooltipContent:W9,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){z9(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===V0.MEDIA_IS_PIP&&z9(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return H1(this,V0.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){q1(this,V0.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return W1(this,V0.MEDIA_IS_PIP)}set mediaIsPip(e){z1(this,V0.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?F0.MEDIA_EXIT_PIP_REQUEST:F0.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new A1.CustomEvent(e,{composed:!0,bubbles:!0}))}}A1.customElements.get("media-pip-button")||A1.customElements.define("media-pip-button",H9);var q9,G9=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const K9="rates",Y9=[1,1.2,1.5,1.7,2],Q9=_1.createElement("template");Q9.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n  </style>\n  <slot name="icon"></slot>\n';class X9 extends T4{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:Q9,tooltipContent:m1("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,q9,new F2(this,K9,{defaultValue:Y9})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PLAYBACK_RATE,K9]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===K9&&(G9(this,q9).value=n),e===V0.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",m1("Playback rate {playbackRate}",{playbackRate:t}))}}get rates(){return G9(this,q9)}set rates(e){e?Array.isArray(e)&&(G9(this,q9).value=e.join(" ")):G9(this,q9).value=""}get mediaPlaybackRate(){return $1(this,V0.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){V1(this,V0.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),(e=>+e)).sort(((e,t)=>e-t)),r=null!=(t=null!=(e=n.find((e=>e>this.mediaPlaybackRate)))?e:n[0])?t:1,i=new A1.CustomEvent(F0.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(i)}}q9=new WeakMap,A1.customElements.get("media-playback-rate-button")||A1.customElements.define("media-playback-rate-button",X9);const Z9=_1.createElement("template");Z9.innerHTML=`\n  <style>\n    :host([${V0.MEDIA_PAUSED}]) slot[name=pause],\n    :host(:not([${V0.MEDIA_PAUSED}])) slot[name=play] {\n      display: none !important;\n    }\n\n    :host([${V0.MEDIA_PAUSED}]) slot[name=tooltip-pause],\n    :host(:not([${V0.MEDIA_PAUSED}])) slot[name=tooltip-play] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="play"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="m6 21 15-9L6 3v18Z"/>\n</svg></slot>\n    <slot name="pause"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>\n</svg></slot>\n  </slot>\n`;const J9=`\n  <slot name="tooltip-play">${m1("Play")}</slot>\n  <slot name="tooltip-pause">${m1("Pause")}</slot>\n`,e6=e=>{const t=e.mediaPaused?m1("play"):m1("pause");e.setAttribute("aria-label",t)};class t6 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PAUSED,V0.MEDIA_ENDED]}constructor(){super({slotTemplate:Z9,tooltipContent:J9,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){e6(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===V0.MEDIA_PAUSED&&e6(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return W1(this,V0.MEDIA_PAUSED)}set mediaPaused(e){z1(this,V0.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?F0.MEDIA_PLAY_REQUEST:F0.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new A1.CustomEvent(e,{composed:!0,bubbles:!0}))}}A1.customElements.get("media-play-button")||A1.customElements.define("media-play-button",t6);const n6="placeholdersrc",r6="src",i6=_1.createElement("template");i6.innerHTML='\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));\n      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img part="poster img" aria-hidden="true" id="image"/>\n';class o6 extends A1.HTMLElement{static get observedAttributes(){return[n6,r6]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(i6.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===r6&&(null==n?this.image.removeAttribute(r6):this.image.setAttribute(r6,n)),e===n6&&(null==n?this.image.style.removeProperty("background-image"):((e,t)=>{e.style["background-image"]=`url('${t}')`})(this.image,n))}get placeholderSrc(){return H1(this,n6)}set placeholderSrc(e){q1(this,r6,e)}get src(){return H1(this,r6)}set src(e){q1(this,r6,e)}}A1.customElements.get("media-poster-image")||A1.customElements.define("media-poster-image",o6);var a6,s6=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};class l6 extends e9{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,a6,void 0),e=this,t=a6,n=this.shadowRoot.querySelector("slot"),s6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,n){var r,i,o;super.attributeChangedCallback(e,t,n),e===V0.MEDIA_PREVIEW_CHAPTER&&n!==t&&null!=n&&((r=this,i=a6,s6(r,i,"read from private field"),o?o.call(r):i.get(r)).textContent=n,""!==n?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return H1(this,V0.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){q1(this,V0.MEDIA_PREVIEW_CHAPTER,e)}}a6=new WeakMap,A1.customElements.get("media-preview-chapter-display")||A1.customElements.define("media-preview-chapter-display",l6);var c6,u6=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},d6=(e,t,n)=>(u6(e,t,"read from private field"),n?n.call(e):t.get(e)),h6=(e,t,n,r)=>(u6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const p6=_1.createElement("template");p6.innerHTML='\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading="eager" decoding="async">\n';class f6 extends A1.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,c6,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(p6.content.cloneNode(!0)))}static get observedAttributes(){return[U0.MEDIA_CONTROLLER,V0.MEDIA_PREVIEW_IMAGE,V0.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const r=this.getAttribute(U0.MEDIA_CONTROLLER);r&&(h6(this,c6,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=d6(this,c6))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=d6(this,c6))?void 0:e.unassociateElement)||t.call(e,this),h6(this,c6,null)}attributeChangedCallback(e,t,n){var r,i,o,a,s;[V0.MEDIA_PREVIEW_IMAGE,V0.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===U0.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=d6(this,c6))?void 0:r.unassociateElement)||i.call(r,this),h6(this,c6,null)),n&&this.isConnected&&(h6(this,c6,null==(o=this.getRootNode())?void 0:o.getElementById(n)),null==(s=null==(a=d6(this,c6))?void 0:a.associateElement)||s.call(a,this)))}get mediaPreviewImage(){return H1(this,V0.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){q1(this,V0.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(V0.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map((e=>+e))}set mediaPreviewCoords(e){e?this.setAttribute(V0.MEDIA_PREVIEW_COORDS,e.join(" ")):this.removeAttribute(V0.MEDIA_PREVIEW_COORDS)}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!e||!t)return;const[n,r,i,o]=e,a=t.split("#")[0],s=getComputedStyle(this),{maxWidth:l,maxHeight:c,minWidth:u,minHeight:d}=s,h=Math.min(parseInt(l)/i,parseInt(c)/o),p=Math.max(parseInt(u)/i,parseInt(d)/o),f=h<1,m=f?h:p>1?p:1,{style:g}=U1(this.shadowRoot,":host"),v=U1(this.shadowRoot,"img").style,y=this.shadowRoot.querySelector("img"),b=f?"min":"max";g.setProperty(`${b}-width`,"initial","important"),g.setProperty(`${b}-height`,"initial","important"),g.width=i*m+"px",g.height=o*m+"px";const w=()=>{v.width=this.imgWidth*m+"px",v.height=this.imgHeight*m+"px",v.display="block"};y.src!==a&&(y.onload=()=>{this.imgWidth=y.naturalWidth,this.imgHeight=y.naturalHeight,w()},y.src=a,w()),w(),v.transform=`translate(-${n*m}px, -${r*m}px)`}}c6=new WeakMap,A1.customElements.get("media-preview-thumbnail")||A1.customElements.define("media-preview-thumbnail",f6);var m6,g6=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},v6=(e,t,n)=>(g6(e,t,"read from private field"),n?n.call(e):t.get(e));class y6 extends e9{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,m6,void 0),e=this,t=m6,n=this.shadowRoot.querySelector("slot"),g6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),v6(this,m6).textContent=u1(0)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_PREVIEW_TIME&&null!=n&&(v6(this,m6).textContent=u1(parseFloat(n)))}get mediaPreviewTime(){return $1(this,V0.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){V1(this,V0.MEDIA_PREVIEW_TIME,e)}}m6=new WeakMap,A1.customElements.get("media-preview-time-display")||A1.customElements.define("media-preview-time-display",y6);const b6="seekoffset",w6=_1.createElement("template");w6.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>\n';class x6 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_CURRENT_TIME,b6]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:w6,tooltipContent:m1("Seek backward"),...e})}connectedCallback(){this.seekOffset=$1(this,b6,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===b6&&(this.seekOffset=$1(this,b6,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return $1(this,b6,30)}set seekOffset(e){V1(this,b6,e),this.setAttribute("aria-label",m1("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),L1(P1(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return $1(this,V0.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){V1(this,V0.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new A1.CustomEvent(F0.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}A1.customElements.get("media-seek-backward-button")||A1.customElements.define("media-seek-backward-button",x6);const E6="seekoffset",A6=_1.createElement("template");A6.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>\n';class _6 extends T4{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_CURRENT_TIME,E6]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:A6,tooltipContent:m1("Seek forward"),...e})}connectedCallback(){this.seekOffset=$1(this,E6,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===E6&&(this.seekOffset=$1(this,E6,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return $1(this,E6,30)}set seekOffset(e){V1(this,E6,e),this.setAttribute("aria-label",m1("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),L1(P1(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return $1(this,V0.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){V1(this,V0.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new A1.CustomEvent(F0.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}A1.customElements.get("media-seek-forward-button")||A1.customElements.define("media-seek-forward-button",_6);var S6,T6=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},k6=(e,t,n)=>(T6(e,t,"read from private field"),n?n.call(e):t.get(e));const C6={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},I6=[...Object.values(C6),V0.MEDIA_CURRENT_TIME,V0.MEDIA_DURATION,V0.MEDIA_SEEKABLE],R6=["Enter"," "],D6="&nbsp;/&nbsp;",L6=function(e){let{timesSep:t=D6}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;const i=e.hasAttribute(C6.REMAINING),o=e.hasAttribute(C6.SHOW_DURATION),a=null!=(n=e.mediaCurrentTime)?n:0,[,s]=null!=(r=e.mediaSeekable)?r:[];let l=0;Number.isFinite(e.mediaDuration)?l=e.mediaDuration:Number.isFinite(s)&&(l=s);const c=u1(i?0-(l-a):a);return o?`${c}${t}${u1(l)}`:c};class P6 extends e9{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,S6,void 0),e=this,t=S6,n=this.shadowRoot.querySelector("slot"),T6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),k6(this,S6).innerHTML=`${L6(this)}`}static get observedAttributes(){return[...super.observedAttributes,...I6,"disabled"]}connectedCallback(){const{style:e}=U1(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",m1("playback time"));const t=e=>{const{key:n}=e;R6.includes(n)?this.toggleTimeDisplay():this.removeEventListener("keyup",t)};this.addEventListener("keydown",(e=>{const{metaKey:n,altKey:r,key:i}=e;n||r||!R6.includes(i)?this.removeEventListener("keyup",t):this.addEventListener("keyup",t)})),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){I6.includes(e)?this.update():"disabled"===e&&n!==t&&(null==n?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return W1(this,C6.REMAINING)}set remaining(e){z1(this,C6.REMAINING,e)}get showDuration(){return W1(this,C6.SHOW_DURATION)}set showDuration(e){z1(this,C6.SHOW_DURATION,e)}get noToggle(){return W1(this,C6.NO_TOGGLE)}set noToggle(e){z1(this,C6.NO_TOGGLE,e)}get mediaDuration(){return $1(this,V0.MEDIA_DURATION)}set mediaDuration(e){V1(this,V0.MEDIA_DURATION,e)}get mediaCurrentTime(){return $1(this,V0.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){V1(this,V0.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(V0.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(V0.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(V0.MEDIA_SEEKABLE)}update(){const e=L6(this);(e=>{var t;const n=e.mediaCurrentTime,[,r]=null!=(t=e.mediaSeekable)?t:[];let i=null;if(Number.isFinite(e.mediaDuration)?i=e.mediaDuration:Number.isFinite(r)&&(i=r),null==n||null===i)return void e.setAttribute("aria-valuetext","video not loaded, unknown time.");const o=e.hasAttribute(C6.REMAINING),a=e.hasAttribute(C6.SHOW_DURATION),s=c1(o?0-(i-n):n);if(!a)return void e.setAttribute("aria-valuetext",s);const l=`${s} of ${c1(i)}`;e.setAttribute("aria-valuetext",l)})(this),e!==k6(this,S6).innerHTML&&(k6(this,S6).innerHTML=e)}}S6=new WeakMap,A1.customElements.get("media-time-display")||A1.customElements.define("media-time-display",P6);var M6,N6,O6,j6,F6,U6,B6,$6,V6,W6,z6=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},H6=(e,t,n)=>(z6(e,t,"read from private field"),n?n.call(e):t.get(e)),q6=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},G6=(e,t,n,r)=>(z6(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class K6{constructor(e,t,n){var r=this;q6(this,M6,void 0),q6(this,N6,void 0),q6(this,O6,void 0),q6(this,j6,void 0),q6(this,F6,void 0),q6(this,U6,void 0),q6(this,B6,void 0),q6(this,$6,void 0),q6(this,V6,0),q6(this,W6,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();G6(r,V6,requestAnimationFrame(H6(r,W6))),G6(r,j6,performance.now()-H6(r,O6));const t=1e3/r.fps;if(H6(r,j6)>t){G6(r,O6,e-H6(r,j6)%t);const s=1e3/((e-H6(r,N6))/++(n=r,i=F6,{set _(e){G6(n,i,e,o)},get _(){return H6(n,i,a)}})._),l=(e-H6(r,U6))/1e3/r.duration;let c=H6(r,B6)+l*r.playbackRate;c-H6(r,M6).valueAsNumber>0?G6(r,$6,r.playbackRate/r.duration/s):(G6(r,$6,.995*H6(r,$6)),c=H6(r,M6).valueAsNumber+H6(r,$6)),r.callback(c)}var n,i,o,a})),G6(this,M6,e),this.callback=t,this.fps=n}start(){0===H6(this,V6)&&(G6(this,O6,performance.now()),G6(this,N6,H6(this,O6)),G6(this,F6,0),H6(this,W6).call(this))}stop(){0!==H6(this,V6)&&(cancelAnimationFrame(H6(this,V6)),G6(this,V6,0))}update(e){let{start:t,duration:n,playbackRate:r}=e;const i=t-H6(this,M6).valueAsNumber,o=Math.abs(n-this.duration);(i>0||i<-.03||o>=.5)&&this.callback(t),G6(this,B6,t),G6(this,U6,performance.now()),this.duration=n,this.playbackRate=r}}M6=new WeakMap,N6=new WeakMap,O6=new WeakMap,j6=new WeakMap,F6=new WeakMap,U6=new WeakMap,B6=new WeakMap,$6=new WeakMap,V6=new WeakMap,W6=new WeakMap;var Y6,Q6,X6,Z6,J6,e8,t8,n8,r8,i8,o8,a8,s8,l8,c8,u8,d8,h8,p8,f8,m8,g8,v8,y8,b8,w8,x8=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},E8=(e,t,n)=>(x8(e,t,"read from private field"),n?n.call(e):t.get(e)),A8=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_8=(e,t,n,r)=>(x8(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),S8=(e,t,n)=>(x8(e,t,"access private method"),n);const T8=_1.createElement("template");T8.innerHTML=`\n  <style>\n    :host {\n      --media-box-border-radius: 4px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n      --media-preview-border-radius: var(--media-box-border-radius);\n      --media-box-arrow-offset: var(--media-box-border-radius);\n      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      --_preview-background: var(--media-preview-background, var(--_control-background));\n\n      \n      contain: layout;\n    }\n\n    #buffered {\n      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #preview-rail,\n    #current-rail {\n      width: 100%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n      will-change: transform;\n    }\n\n    [part~="box"] {\n      width: min-content;\n      \n      position: absolute;\n      bottom: 100%;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~="current-box"] {\n      display: var(--media-current-box-display, var(--media-box-display, flex));\n      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n      visibility: hidden;\n    }\n\n    [part~="preview-box"] {\n      display: var(--media-preview-box-display, var(--media-box-display, flex));\n      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:is([${V0.MEDIA_PREVIEW_IMAGE}], [${V0.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    @media (hover: hover) {\n      :host(:is([${V0.MEDIA_PREVIEW_IMAGE}], [${V0.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      \n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-thumbnail-background, var(--_preview-background));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${V0.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n    :host([${V0.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    @media (hover: hover) {\n      :host([${V0.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n      :host([${V0.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      :host([${V0.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n    }\n\n    media-preview-chapter-display,\n    ::slotted(media-preview-chapter-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      visibility: hidden;\n      \n      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-chapter-background, var(--_preview-background));\n      border-radius: var(--media-preview-chapter-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-chapter-padding, 3.5px 9px);\n      margin: var(--media-preview-chapter-margin, 0 0 5px);\n      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n    }\n\n    :host([${V0.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n    :host([${V0.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-chapter-border-radius, 0);\n      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n      margin: var(--media-preview-chapter-margin, 0);\n      min-width: 100%;\n    }\n\n    media-preview-chapter-display[${V0.MEDIA_PREVIEW_CHAPTER}],\n    ::slotted(media-preview-chapter-display[${V0.MEDIA_PREVIEW_CHAPTER}]) {\n      visibility: visible;\n    }\n\n    media-preview-chapter-display:not([aria-valuetext]),\n    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n      display: none;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display),\n    media-time-display,\n    ::slotted(media-time-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      \n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--_preview-background));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 3.5px 9px);\n      margin: var(--media-preview-time-margin, 0);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50%)\n      ));\n    }\n\n    :host([${V0.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${V0.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n      min-width: 100%;\n    }\n\n    :host([${V0.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n\n    [part~="arrow"],\n    ::slotted([part~="arrow"]) {\n      display: var(--media-box-arrow-display, inline-block);\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n      ));\n      \n      border-color: transparent;\n      border-top-color: var(--media-box-arrow-background, var(--_control-background));\n      border-width: var(--media-box-arrow-border-width,\n        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n      border-style: solid;\n      justify-content: center;\n      height: 0;\n    }\n  </style>\n  <div id="preview-rail">\n    <slot name="preview" part="box preview-box">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-chapter-display></media-preview-chapter-display>\n      <media-preview-time-display></media-preview-time-display>\n      <slot name="preview-arrow"><div part="arrow"></div></slot>\n    </slot>\n  </div>\n  <div id="current-rail">\n    <slot name="current" part="box current-box">\n      \n    </slot>\n  </div>\n`;const k8=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.mediaCurrentTime;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;if(Number.isNaN(r))return 0;const i=(t-n)/(r-n);return Math.max(0,Math.min(i,1))},C8=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.range.valueAsNumber;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;return Number.isNaN(r)?0:t*(r-n)+n};class I8 extends V5{constructor(){super(),A8(this,i8),A8(this,a8),A8(this,c8),A8(this,d8),A8(this,p8),A8(this,m8),A8(this,v8),A8(this,b8),A8(this,Y6,void 0),A8(this,Q6,void 0),A8(this,X6,void 0),A8(this,Z6,void 0),A8(this,J6,void 0),A8(this,e8,void 0),A8(this,t8,void 0),A8(this,n8,void 0),A8(this,r8,void 0),A8(this,l8,(e=>{this.dragging||(o1(e)&&(this.range.valueAsNumber=e),this.updateBar())})),this.container.appendChild(T8.content.cloneNode(!0));this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),_8(this,X6,this.shadowRoot.querySelectorAll('[part~="box"]')),_8(this,J6,this.shadowRoot.querySelector('[part~="preview-box"]')),_8(this,e8,this.shadowRoot.querySelector('[part~="current-box"]'));const e=getComputedStyle(this);_8(this,t8,parseInt(e.getPropertyValue("--media-box-padding-left"))),_8(this,n8,parseInt(e.getPropertyValue("--media-box-padding-right"))),_8(this,Q6,new K6(this.range,E8(this,l8),60))}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PAUSED,V0.MEDIA_DURATION,V0.MEDIA_SEEKABLE,V0.MEDIA_CURRENT_TIME,V0.MEDIA_PREVIEW_IMAGE,V0.MEDIA_PREVIEW_TIME,V0.MEDIA_PREVIEW_CHAPTER,V0.MEDIA_BUFFERED,V0.MEDIA_PLAYBACK_RATE,V0.MEDIA_LOADING,V0.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",m1("seek")),S8(this,i8,o8).call(this),_8(this,Y6,this.getRootNode()),null==(e=E8(this,Y6))||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),S8(this,i8,o8).call(this),null==(e=E8(this,Y6))||e.removeEventListener("transitionstart",this),_8(this,Y6,null)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),t!=n&&(e===V0.MEDIA_CURRENT_TIME||e===V0.MEDIA_PAUSED||e===V0.MEDIA_ENDED||e===V0.MEDIA_LOADING||e===V0.MEDIA_DURATION||e===V0.MEDIA_SEEKABLE?(E8(this,Q6).update({start:k8(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),S8(this,i8,o8).call(this),(e=>{const t=e.range,n=c1(+C8(e)),r=c1(+e.mediaSeekableEnd),i=n&&r?`${n} of ${r}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",i)})(this)):e===V0.MEDIA_BUFFERED&&this.updateBufferedBar(),e!==V0.MEDIA_DURATION&&e!==V0.MEDIA_SEEKABLE||(this.mediaChaptersCues=E8(this,r8),this.updateBar()))}get mediaChaptersCues(){return E8(this,r8)}set mediaChaptersCues(e){var t;_8(this,r8,e),this.updateSegments(null==(t=E8(this,r8))?void 0:t.map((e=>({start:k8(this,e.startTime),end:k8(this,e.endTime)}))))}get mediaPaused(){return W1(this,V0.MEDIA_PAUSED)}set mediaPaused(e){z1(this,V0.MEDIA_PAUSED,e)}get mediaLoading(){return W1(this,V0.MEDIA_LOADING)}set mediaLoading(e){z1(this,V0.MEDIA_LOADING,e)}get mediaDuration(){return $1(this,V0.MEDIA_DURATION)}set mediaDuration(e){V1(this,V0.MEDIA_DURATION,e)}get mediaCurrentTime(){return $1(this,V0.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){V1(this,V0.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return $1(this,V0.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){V1(this,V0.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(V0.MEDIA_BUFFERED);return e?e.split(" ").map((e=>e.split(":").map((e=>+e)))):[]}set mediaBuffered(e){if(!e)return void this.removeAttribute(V0.MEDIA_BUFFERED);const t=e.map((e=>e.join(":"))).join(" ");this.setAttribute(V0.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(V0.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(V0.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(V0.MEDIA_SEEKABLE)}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaPreviewImage(){return H1(this,V0.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){q1(this,V0.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return $1(this,V0.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){V1(this,V0.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return W1(this,V0.MEDIA_ENDED)}set mediaEnded(e){z1(this,V0.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let n;if(this.mediaEnded)n=1;else{const r=this.mediaCurrentTime,[,i=this.mediaSeekableStart]=null!=(e=t.find((e=>{let[t,n]=e;return t<=r&&r<=n})))?e:[];n=k8(this,i)}const{style:r}=U1(this.shadowRoot,"#buffered");r.setProperty("width",100*n+"%")}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const e=U1(this.shadowRoot,"#current-rail"),t=U1(this.shadowRoot,'[part~="current-box"]'),n=S8(this,c8,u8).call(this,E8(this,e8)),r=S8(this,d8,h8).call(this,n,this.range.valueAsNumber),i=S8(this,p8,f8).call(this,n,this.range.valueAsNumber);e.style.transform=`translateX(${r})`,e.style.setProperty("--_range-width",`${n.range.width}`),t.style.setProperty("--_box-shift",`${i}`),t.style.setProperty("--_box-width",`${n.box.width}px`),t.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":S8(this,b8,w8).call(this);break;case"pointermove":S8(this,m8,g8).call(this,e);break;case"pointerup":case"pointerleave":S8(this,v8,y8).call(this,null);break;case"transitionstart":M1(e.target,this)&&setTimeout((()=>S8(this,i8,o8).call(this)),0)}}}Y6=new WeakMap,Q6=new WeakMap,X6=new WeakMap,Z6=new WeakMap,J6=new WeakMap,e8=new WeakMap,t8=new WeakMap,n8=new WeakMap,r8=new WeakMap,i8=new WeakSet,o8=function(){S8(this,a8,s8).call(this)?E8(this,Q6).start():E8(this,Q6).stop()},a8=new WeakSet,s8=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&F1(this)},l8=new WeakMap,c8=new WeakSet,u8=function(e){var t;const n=(null!=(t=this.getAttribute("bounds")?N1(this,`#${this.getAttribute("bounds")}`):this.parentElement)?t:this).getBoundingClientRect(),r=this.range.getBoundingClientRect(),i=e.offsetWidth;return{box:{width:i,min:-(r.left-n.left-i/2),max:n.right-r.left-i/2},bounds:n,range:r}},d8=new WeakSet,h8=function(e,t){let n=100*t+"%";const{width:r,min:i,max:o}=e.box;if(!r)return n;if(!Number.isNaN(i)){n=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + ${"var(--media-box-padding-left)"})`}, ${n})`}if(!Number.isNaN(o)){n=`min(${n}, ${`calc(1 / var(--_range-width) * 100 * ${o}% - ${"var(--media-box-padding-right)"})`})`}return n},p8=new WeakSet,f8=function(e,t){const{width:n,min:r,max:i}=e.box,o=t*e.range.width;if(o<r+E8(this,t8)){return`${o-n/2+(e.range.left-e.bounds.left-E8(this,t8))}px`}if(o>i-E8(this,n8)){return o+n/2-(e.bounds.right-e.range.right-E8(this,n8))-e.range.width+"px"}return 0},m8=new WeakSet,g8=function(e){const t=[...E8(this,X6)].some((t=>e.composedPath().includes(t)));if(!this.dragging&&(t||!e.composedPath().includes(this)))return void S8(this,v8,y8).call(this,null);const n=this.mediaSeekableEnd;if(!n)return;const r=U1(this.shadowRoot,"#preview-rail"),i=U1(this.shadowRoot,'[part~="preview-box"]'),o=S8(this,c8,u8).call(this,E8(this,J6));let a=(e.clientX-o.range.left)/o.range.width;a=Math.max(0,Math.min(1,a));const s=S8(this,d8,h8).call(this,o,a),l=S8(this,p8,f8).call(this,o,a);r.style.transform=`translateX(${s})`,r.style.setProperty("--_range-width",`${o.range.width}`),i.style.setProperty("--_box-shift",`${l}`),i.style.setProperty("--_box-width",`${o.box.width}px`);const c=Math.round(E8(this,Z6))-Math.round(a*n);Math.abs(c)<1&&a>.01&&a<.99||(_8(this,Z6,a*n),S8(this,v8,y8).call(this,E8(this,Z6)))},v8=new WeakSet,y8=function(e){this.dispatchEvent(new A1.CustomEvent(F0.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:e}))},b8=new WeakSet,w8=function(){E8(this,Q6).stop();const e=C8(this);this.dispatchEvent(new A1.CustomEvent(F0.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e}))},A1.customElements.get("media-time-range")||A1.customElements.define("media-time-range",I8);const R8="placement",D8="bounds",L8=_1.createElement("template");L8.innerHTML='\n  <style>\n    :host {\n      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));\n      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));\n      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);\n      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);\n      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));\n      position: relative;\n      pointer-events: none;\n      display: var(--media-tooltip-display, inline-flex);\n      justify-content: center;\n      align-items: center;\n      box-sizing: border-box;\n      z-index: var(--media-tooltip-z-index, 1);\n      background: var(--_tooltip-background);\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      font: var(--media-font,\n        var(--media-font-weight, 400)\n        var(--media-font-size, 13px) /\n        var(--media-text-content-height, var(--media-control-height, 18px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      padding: var(--media-tooltip-padding, .35em .7em);\n      border: var(--media-tooltip-border, none);\n      border-radius: var(--media-tooltip-border-radius, 5px);\n      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));\n      white-space: var(--media-tooltip-white-space, nowrap);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    img, svg {\n      display: inline-block;\n    }\n\n    #arrow {\n      position: absolute;\n      width: 0px;\n      height: 0px;\n      border-style: solid;\n      display: var(--media-tooltip-arrow-display, block);\n    }\n\n    :host(:not([placement])),\n    :host([placement="top"]) {\n      position: absolute;\n      bottom: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host(:not([placement])) #arrow,\n    :host([placement="top"]) #arrow {\n      top: 100%;\n      left: 50%;\n      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);\n      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="right"]) {\n      position: absolute;\n      left: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="right"]) #arrow {\n      top: 50%;\n      right: 100%;\n      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;\n      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;\n      transform: translate(0, -50%);\n    }\n\n    :host([placement="bottom"]) {\n      position: absolute;\n      top: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host([placement="bottom"]) #arrow {\n      bottom: 100%;\n      left: 50%;\n      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);\n      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="left"]) {\n      position: absolute;\n      right: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="left"]) #arrow {\n      top: 50%;\n      left: 100%;\n      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);\n      border-color: transparent transparent transparent var(--_tooltip-arrow-background);\n      transform: translate(0, -50%);\n    }\n    \n    :host([placement="none"]) #arrow {\n      display: none;\n    }\n\n  </style>\n  <slot></slot>\n  <div id="arrow"></div>\n';class P8 extends A1.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!F1(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if("left"===t||"right"===t)return void this.style.removeProperty("--media-tooltip-offset-x");const n=getComputedStyle(this),r=null!=(e=N1(this,"#"+this.bounds))?e:R1(this);if(!r)return;const{x:i,width:o}=r.getBoundingClientRect(),{x:a,width:s}=this.getBoundingClientRect(),l=a+s,c=i+o,u=n.getPropertyValue("--media-tooltip-offset-x"),d=u?parseFloat(u.replace("px","")):0,h=n.getPropertyValue("--media-tooltip-container-margin"),p=h?parseFloat(h.replace("px","")):0,f=a-i+d-p,m=l-c+d+p;f<0?this.style.setProperty("--media-tooltip-offset-x",`${f}px`):m>0?this.style.setProperty("--media-tooltip-offset-x",`${m}px`):this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(L8.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[R8,D8]}get placement(){return H1(this,R8)}set placement(e){q1(this,R8,e)}get bounds(){return H1(this,D8)}set bounds(e){q1(this,D8,e)}}A1.customElements.get("media-tooltip")||A1.customElements.define("media-tooltip",P8);class M8 extends V5{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_VOLUME,V0.MEDIA_MUTED,V0.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",(()=>{const e=this.range.value,t=new A1.CustomEvent(F0.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}))}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",m1("volume"))}attributeChangedCallback(e,t,n){var r,i;super.attributeChangedCallback(e,t,n),e!==V0.MEDIA_VOLUME&&e!==V0.MEDIA_MUTED||(this.range.valueAsNumber=(i=this).mediaMuted?0:i.mediaVolume,this.range.setAttribute("aria-valuetext",(r=this.range.valueAsNumber,`${Math.round(100*r)}%`)),this.updateBar())}get mediaVolume(){return $1(this,V0.MEDIA_VOLUME,1)}set mediaVolume(e){V1(this,V0.MEDIA_VOLUME,e)}get mediaMuted(){return W1(this,V0.MEDIA_MUTED)}set mediaMuted(e){z1(this,V0.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return H1(this,V0.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){q1(this,V0.MEDIA_VOLUME_UNAVAILABLE,e)}}A1.customElements.get("media-volume-range")||A1.customElements.define("media-volume-range",M8);var N8=Object.create,O8=Object.defineProperty,j8=Object.getOwnPropertyDescriptor,F8=Object.getOwnPropertyNames,U8=Object.getPrototypeOf,B8=Object.prototype.hasOwnProperty,$8=function(e,t){return function(){return e&&(t=e(e=0)),t}},V8=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},W8=function(e,t,n){return n=null!=e?N8(U8(e)):{},function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t)for(var i,o=F8(t),a=0,s=o.length;a<s;a++)i=o[a],!B8.call(e,i)&&i!==n&&O8(e,i,{get:function(e){return t[e]}.bind(null,i),enumerable:!(r=j8(t,i))||r.enumerable});return e}(!t&&e&&e.__esModule?n:O8(n,"default",{value:e,enumerable:!0}),e)},z8=V8((function(e,t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n}));function H8(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):H8(e,t)}var q8=$8((function(){q8()}));function G8(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var K8=$8((function(){})),Y8=V8((function(e,t){var n=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=n.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=n.call(r.childNodes).concat(e))}}})),Q8=V8((function(e,t){function n(e,t){if(!H8(this,n))return new n(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}q8(),t.exports=n,n.prototype.nodeType=8,n.prototype.nodeName="#comment",n.prototype.toString=function(){return"[object Comment]"}})),X8=V8((function(e,t){function n(e,t){if(!H8(this,n))return new n(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}q8(),t.exports=n,n.prototype.type="DOMTextNode",n.prototype.nodeType=3,n.prototype.nodeName="#text",n.prototype.toString=function(){return this.data},n.prototype.replaceData=function(e,t,n){var r=this.data,i=r.substring(0,e),o=r.substring(e+t,r.length);this.data=i+n+o,this.length=this.data.length}})),Z8=V8((function(e,t){t.exports=function(e){var t=this,n=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[n];if(r)return r.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),J8=V8((function(e,t){t.exports=function(e,t){var n=this;n.listeners||(n.listeners={}),n.listeners[e]||(n.listeners[e]=[]),-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)}})),e7=V8((function(e,t){t.exports=function(e,t){var n=this;if(n.listeners&&n.listeners[e]){var r=n.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),t7=V8((function(e,t){K8(),t.exports=r;var n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return a(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var n in e)i(e,n)&&t.push({name:n,value:e[n]});for(var r in e._attributes)for(var a in e._attributes[r]){var s=e._attributes[r][a],l=(s.prefix?s.prefix+":":"")+a;t.push({name:l,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?o(t):""}(e)+function(e){var t=e.dataset,n=[];for(var r in t)n.push({name:"data-"+r,value:t[r]});return n.length?o(n):""}(e)),n.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(a(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var n=G8(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function o(e){var t=[];return e.forEach((function(e){var n=e.name,r=e.value;"style"===n&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var r=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+r+";"})),t}(r)),t.push(n+'="'+function(e){return a(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function a(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),n7=V8((function(e,t){q8();var n=Y8(),r=Z8(),i=J8(),o=e7(),a=t7(),s="http://www.w3.org/1999/xhtml";function l(e,t,n){if(!H8(this,l))return new l(e);var r=void 0===n?s:n||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,n){var r=null,i=t,o=t.indexOf(":");(o>-1&&(r=t.substr(0,o),i=t.substr(o+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[i]={value:n,prefix:r}},l.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],r=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},l.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},l.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=o,l.prototype.addEventListener=i,l.prototype.dispatchEvent=r,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return n(this,(function(e){if(1===e.nodeType){var n=(e.className||"").split(" ");t.every((function(e){return-1!==n.indexOf(e)}))&&r.push(e)}})),r},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return n(this.childNodes,(function(n){1===n.nodeType&&("*"===e||n.tagName.toLowerCase()===e)&&t.push(n)})),t},l.prototype.contains=function(e){return n(this,(function(t){return e===t}))||!1}})),r7=V8((function(e,t){q8();var n=n7();function r(e){if(!H8(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=n.prototype.appendChild,r.prototype.replaceChild=n.prototype.replaceChild,r.prototype.removeChild=n.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),i7=V8((function(e,t){function n(e){}t.exports=n,n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.preventDefault=function(){}})),o7=V8((function(e,t){q8();var n=Y8(),r=Q8(),i=X8(),o=n7(),a=r7(),s=i7(),l=Z8(),c=J8(),u=e7();function d(){if(!H8(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=d;var h=d.prototype;h.createTextNode=function(e){return new i(e,this)},h.createElementNS=function(e,t){var n=null===e?null:String(e);return new o(t,this,n)},h.createElement=function(e){return new o(e,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(e){return new s(e)},h.createComment=function(e){return new r(e,this)},h.getElementById=function(e){e=String(e);var t=n(this.childNodes,(function(t){if(String(t.id)===e)return t}));return t||null},h.getElementsByClassName=o.prototype.getElementsByClassName,h.getElementsByTagName=o.prototype.getElementsByTagName,h.contains=o.prototype.contains,h.removeEventListener=u,h.addEventListener=c,h.dispatchEvent=l})),a7=V8((function(e,t){var n=o7();t.exports=new n})),s7=V8((function(e,t){var n,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=a7();"undefined"!=typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"])||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=n}));function l7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c7(e,t){if(e){if("string"==typeof e)return l7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l7(e,t)}}function u7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(hk){s=!0,i=hk}finally{try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}return o}}(e,t)||c7(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d7=W8(z8()),h7=W8(z8()),p7=W8(z8()),f7={now:function(){var e=p7.default.performance,t=e&&e.timing,n=t&&t.navigationStart,r="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(r)}},m7=f7,g7=function(){var e,t,n;if("function"==typeof(null===(e=h7.default.crypto)||void 0===e?void 0:e.getRandomValues)){n=new Uint8Array(32),h7.default.crypto.getRandomValues(n);for(var r=0;r<32;r++)n[r]=n[r]%16}else{n=[];for(var i=0;i<32;i++)n[i]=16*Math.random()|0}var o=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t="x"===e?n[o]:3&n[o]|8;return o++,t.toString(16)}));var a=m7.now(),s=null==a?void 0:a.toString(16).substring(3);return s?t.substring(0,28)+s:t},v7=function(){return("000000"+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)},y7=function(e){if(e&&"undefined"!=typeof e.nodeName)return e.muxId||(e.muxId=v7()),e.muxId;var t;try{t=document.querySelector(e)}catch(lk){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},b7=function(e){var t;e&&"undefined"!=typeof e.nodeName?e=y7(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]};function w7(e){return function(e){if(Array.isArray(e))return l7(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c7(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x7=0,E7=1,A7=2,_7=3,S7=4,T7=function(e){var t,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],l=(t=console.trace).bind.apply(t,w7(s)),c=(n=console.info).bind.apply(n,w7(s)),u=(r=console.debug).bind.apply(r,w7(s)),d=(i=console.warn).bind.apply(i,w7(s)),h=(o=console.error).bind.apply(o,w7(s)),p=a;return{trace:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>x7))return l.apply(void 0,w7(t))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>E7))return u.apply(void 0,w7(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>A7))return c.apply(void 0,w7(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>_7))return d.apply(void 0,w7(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>S7))return h.apply(void 0,w7(t))},get level(){return p},set level(e){e!==this.level&&(p=null!=e?e:a)}}}("[mux]"),k7=W8(z8());function C7(){return"1"===(k7.default.doNotTrack||k7.default.navigator&&k7.default.navigator.doNotTrack)}function I7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R7(e,t){if(!H8(e,t))throw new TypeError("Cannot call a class as a function")}function D7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L7(e,t,n){return t&&D7(e.prototype,t),n&&D7(e,n),e}function P7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M7(e){return M7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M7(e)}function N7(e,t,n){return N7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M7(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}},N7(e,t,n||e)}function O7(e,t){return O7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O7(e,t)}function j7(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M7(e);if(t){var i=M7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==G8(t)&&"function"!=typeof t?I7(e):t}(this,n)}}q8(),K8();var F7=function(e){return U7(e)[0]},U7=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},B7=W8(z8()),$7={exists:function(){var e=B7.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=B7.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=B7.default.performance,t=e&&e.timing;return t&&t.navigationStart}},V7=$7;function W7(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}function z7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P7(e,t,n[t])}))}return e}function H7(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var q7=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],G7=["x-cdn","content-type"].concat(q7);function K7(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),r=n.shift();r&&(G7.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=n.join(": "))}})),t}function Y7(e){if(e){var t=q7.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var Q7=function(e){var t={};for(var n in e){var r=e[n];if(-1!==r["DATA-ID"].search("io.litix.data."))t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE}return t},X7=function(e){if(!e)return{};var t=V7.navigationStart(),n=e.loading,r=n?n.start:e.trequest,i=n?n.first:e.tfirst,o=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+o)}},Z7=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return K7(e.getAllResponseHeaders())},J7=function(e,t){if(!e||!e.requestEndDate)return{};var n,r=F7(e.url),i=e.url,o=e.bytesLoaded,a=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),c=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return u.length>0&&(n=K7(u[u.length-1]._responseHeaders||"")),{requestStart:a,requestResponseStart:s,requestResponseEnd:l,requestBytesLoaded:o,requestResponseHeaders:n,requestMediaDuration:c,requestHostname:r,requestUrl:i,requestId:n?Y7(n):void 0}},eee=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},tee=function(e,t,n){var r=e.log;if(n&&n.on){var i=function(e){try{var t,n,r=null===(n=e.getVersion)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0];return r}catch(i){return!1}}(n),o=function(n,r){return e.emit(t,n,r)},a=function(e){var t=e.type,n=(e.data||{}).url;o("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:F7(n),request_url:n})};n.on("manifestLoaded",a);var s={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},c=function(e){var t=e.type,r=e.chunk,i=e.request,a=(r||{}).mediaInfo||{},l=a.type,c=a.bitrateList,u={};(c=c||[]).forEach((function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}})),"video"===l?s.video=u:"audio"===l?s.audio=u:s.media=u;var d=J7(i,n),h=d.requestStart,p=d.requestResponseStart,f=d.requestResponseEnd,m=d.requestResponseHeaders,g=d.requestMediaDuration,v=d.requestHostname,y=d.requestUrl,b=d.requestId;o("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:f,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:m,request_hostname:v,request_id:b,request_url:y,request_media_duration:g,request_rendition_lists:s})};i>=4?n.on("initFragmentLoaded",c):n.on("initFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);c({type:t,request:i,chunk:r})}));var u=function(e){var t=e.type,r=e.chunk,i=e.request,a=r||{},s=a.mediaInfo,l=a.start,c=(s||{}).type,u=J7(i,n),d=u.requestStart,h=u.requestResponseStart,p=u.requestResponseEnd,f=u.requestBytesLoaded,m=u.requestResponseHeaders,g=u.requestMediaDuration,v=u.requestHostname,y=u.requestUrl,b=u.requestId,w=function(e,t){var n=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:n,renditionWidth:r[n].width||null,renditionHeight:r[n].height||null,renditionBitrate:r[n].bandwidth}:{}}(c,n),x=w.currentLevel,E=w.renditionWidth,A=w.renditionHeight,_=w.renditionBitrate;o("requestcompleted",{request_event_type:t,request_start:d,request_response_start:h,request_response_end:p,request_bytes_loaded:f,request_type:c,request_response_headers:m,request_hostname:v,request_id:b,request_url:y,request_media_start_time:l,request_media_duration:g,request_current_level:x,request_labeled_bitrate:_,request_video_width:E,request_video_height:A})};i>=4?n.on("mediaFragmentLoaded",u):n.on("mediaFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);u({type:t,request:i,chunk:r})}));var d={video:void 0,audio:void 0,totalBitrate:void 0},h=function(e,t,i){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var s=n.getBitrateInfoListFor(a).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(a));d[a]=H7(z7({},s),{codec:n.getCurrentTrackFor(a).codec});var l=function(){if(d.video&&"number"==typeof d.video.bitrate){if(!d.video.width||!d.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=d.video.bitrate;if(d.audio&&"number"==typeof d.audio.bitrate&&(e+=d.audio.bitrate),e!==d.totalBitrate)return d.totalBitrate=e,{video_source_bitrate:e,video_source_height:d.video.height,video_source_width:d.video.width,video_source_codec:eee(d.video.codec)}}}();l&&o("renditionchange",l)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",h);var p=function(e){var t=e.request,n=e.mediaType;o("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:F7(t.url)})};n.on("fragmentLoadingAbandoned",p);var f=function(e){var t,n,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},a=(null==r||null===(n=r.data)||void 0===n?void 0:n.response)||{};27===(null==r?void 0:r.code)&&o("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:F7(i.url),request_type:i.mediaType,request_error_code:a.status,request_error_text:a.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");o("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};n.on("error",f),n._stopMuxMonitor=function(){n.off("manifestLoaded",a),n.off("initFragmentLoaded",c),n.off("mediaFragmentLoaded",u),n.off("qualityChangeRendered",h),n.off("error",f),n.off("fragmentLoadingAbandoned",p),delete n._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")},nee=0,ree=function(){function e(){R7(this,e),P7(this,"_listeners",void 0)}return L7(e,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++nee,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(r,1)}))}},{key:"one",value:function(e,t,n){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++nee;var i=function(){r.off(e,i),t.apply(n||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],o=this._listeners["after"+e]||[],a=function(t,r){(t=t.slice()).forEach((function(t){t.call(n,{type:e},r)}))};a(r,t),a(i,t),a(o,t)}}}]),e}(),iee=ree,oee=W8(z8()),aee=function(){function e(t){var n=this;R7(this,e),P7(this,"_playbackHeartbeatInterval",void 0),P7(this,"_playheadShouldBeProgressing",void 0),P7(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==n._playbackHeartbeatInterval&&(oee.default.clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),n._playbackHeartbeatInterval=null)}))}return L7(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=oee.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(oee.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),see=aee,lee=function e(t){var n=this;R7(this,e),P7(this,"viewErrored",void 0),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,n.viewErrored=!0)}catch(uk){t.mux.log.warn("Exception in error translator callback.",uk),n.viewErrored=!0}})),t.on("aftererror",(function(){var e,n,r,i,o;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(n=t.data)||void 0===n||delete n.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(o=t.data)||void 0===o||delete o.player_error_business_exception}))},cee=function(){function e(t){R7(this,e),P7(this,"_watchTimeTrackerLastCheckedTime",void 0),P7(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return L7(e,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),W7(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),uee=cee,dee=function(){function e(t){var n=this;R7(this,e),P7(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),P7(this,"_lastTime",void 0),P7(this,"_isAdPlaying",void 0),P7(this,"_callbackUpdatePlaybackTime",void 0),P7(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=m7.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=m7.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}return L7(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=m7.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&W7(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),hee=dee,pee=function(){function e(t){R7(this,e),P7(this,"pm",void 0),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}return L7(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position="undefined"==typeof this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,r=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();"undefined"!=typeof i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),fee=pee,mee=3e5,gee=function e(t){if(R7(this,e),!t.disableRebufferTracking){var n,r=function(e,t){i(t),n=void 0},i=function(e){if(n){var r=e.viewer_time-n;W7(t.data,"view_rebuffer_duration",r),n=e.viewer_time,t.data.view_rebuffer_duration>mee&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(mee,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){n||(W7(t.data,"view_rebuffer_count",1),n=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",r)}))}},vee=function(){function e(t){var n=this;R7(this,e),P7(this,"_lastCheckedTime",void 0),P7(this,"_lastPlayheadTime",void 0),P7(this,"_lastPlayheadTimeUpdatedTime",void 0),P7(this,"_rebuffering",void 0),P7(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:m7.now()})})))}return L7(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),yee=vee,bee=function(){function e(t){var n=this;R7(this,e),P7(this,"NAVIGATION_START",void 0),P7(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var o=i.viewer_time;("playing"===e.type&&"undefined"==typeof t.data.view_time_to_first_frame||"adplaying"===e.type&&("undefined"==typeof t.data.view_time_to_first_frame||n._inPrerollPosition()))&&n.calculateTimeToFirstFrame(o||m7.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return L7(e,[{key:"_inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),wee=bee,xee=function e(t){var n=this;R7(this,e),P7(this,"_lastPlayerHeight",void 0),P7(this,"_lastPlayerWidth",void 0),P7(this,"_lastPlayheadPosition",void 0),P7(this,"_lastSourceHeight",void 0),P7(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){n._lastPlayheadPosition=-1}));["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var r=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),i=Math.max(0,r-1),o=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,o),W7(t.data,"view_total_content_playback_time",e),W7(t.data,"view_total_upscaling",i*e),W7(t.data,"view_total_downscaling",o*e)}n._lastPlayheadPosition=-1}))})),["playing","hb","renditionchange","orientationchange"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))},Eee=function e(t){var n=this;R7(this,e),P7(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=m7.now(),i=(t.data.viewer_time||e)-(r||e);W7(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),n.isSeeking=!1,r=-1};t.on("seeking",(function(e,o){Object.assign(t.data,o),n.isSeeking&&o.viewer_time-r<=2e3?r=o.viewer_time:(n.isSeeking&&i(),n.isSeeking=!0,r=o.viewer_time,W7(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){n.isSeeking&&(i(),t.send("seeked")),n.isSeeking=!1,r=-1}))},Aee=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},_ee=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],See=function(){function e(t){var n=this;R7(this,e),P7(this,"_adHasPlayed",void 0),P7(this,"_adRequests",void 0),P7(this,"_adResponses",void 0),P7(this,"_currentAdRequestNumber",void 0),P7(this,"_currentAdResponseNumber",void 0),P7(this,"_prerollPlayTime",void 0),P7(this,"_wouldBeNewAdPlay",void 0),P7(this,"isAdBreak",void 0),P7(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),_ee.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var r=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},r),Aee(n._adRequests,r),W7(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||W7(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},r),Aee(n._adResponses,r);var i=n.findAdRequest(r.ad_request_id);i&&W7(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,W7(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),n._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){n.inPrerollPosition()&&"undefined"==typeof t.data.view_preroll_load_time&&"undefined"!=typeof n._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,r){n._wouldBeNewAdPlay||W7(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){n._wouldBeNewAdPlay||W7(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}return L7(e,[{key:"inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=u7(U7(t.ad_tag_url),2),r=n[0],i=n[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var o=u7(U7(t.ad_asset_url),2),a=o[0],s=o[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),Tee=See,kee=W8(z8()),Cee=function e(t){R7(this,e);var n,r,i=function(){t.disableRebufferTracking||n&&(W7(t.data,"view_waiting_rebuffer_duration",m7.now()-n),n=!1,kee.default.clearInterval(r))},o=!1,a=function(){o=!1,i()};t.on("waiting",(function(){o&&(t.disableRebufferTracking||(W7(t.data,"view_waiting_rebuffer_count",1),n=m7.now(),r=kee.default.setInterval((function(){if(n){var e=m7.now();W7(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){i(),o=!0})),t.on("pause",a),t.on("seeking",a)},Iee=function e(t){var n=this;R7(this,e),P7(this,"lastWallClockTime",void 0);var r=function(){n.lastWallClockTime=m7.now(),t.on("before*",i)},i=function(e){var r=m7.now(),i=n.lastWallClockTime;n.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},Ree=W8(z8()),Dee=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(Ek){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var d=l[u].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=d[0].replace(c,decodeURIComponent);if(h=n.read?n.read(h,p):n(h,p)||h.replace(c,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(Ek){}if(t===p){a=h;break}t||(a[p]=h)}catch(Ek){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),Lee="muxData",Pee=function(){var e;try{e=function(e){return e.split("&").reduce((function(e,t){var n=u7(t.split("="),2),r=n[0],i=n[1],o=+i,a=i&&o==i?o:i;return e[r]=a,e}),{})}(Dee.get(Lee)||"")}catch(ik){e={}}return e},Mee=function(e){try{Dee.set(Lee,function(e){return Object.entries(e).map((function(e){var t=u7(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&")}(e),{expires:365})}catch(ik){}};var Nee=W8(z8()),Oee=function(){var e;switch(jee()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},jee=function(){var e=Nee.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};Oee.getConnectionFromAPI=jee;var Fee=Oee,Uee=$ee({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),Bee=$ee({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function $ee(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Vee(e){var t={},n={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var o=r.split("_"),a=o[0],s=Uee[a];s||(T7.info("Data key word `"+o[0]+"` not expected in "+r),s=a+"_"),o.splice(1).forEach((function(e){"url"===e&&(i=!0),Bee[e]?s+=Bee[e]:Number.isInteger(Number(e))?s+=e:(T7.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?n[s]=e[r]:t[s]=e[r]}})),Object.assign(t,n)}var Wee=W8(z8()),zee=W8(s7()),Hee={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},qee=["hb","requestcompleted","requestfailed","requestcanceled"],Gee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Hee,t)};Gee.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},Gee.prototype.flushEvents=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},Gee.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),Wee.default.clearTimeout(this._sendTimeout)},Gee.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],Vee({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);Yee(this._beaconUrl,n,!0,(function(){}))},Gee.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight)this._resendAfterPost=!0;else{var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),r=m7.now();Yee(this._beaconUrl,n,!1,(function(n,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,T7.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=m7.now()-r,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())}))}},Gee.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},Gee.prototype._startBeaconSending=function(){var e=this;Wee.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=Wee.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},Gee.prototype._createPayload=function(e){var t=this,n={transmission_timestamp:Math.round(m7.now())};this._roundTripTime&&(n.rtt_ms=Math.round(this._roundTripTime));var r,i,o,a=function(){r=JSON.stringify({metadata:n,events:i||e}),o=r.length/1024},s=function(){return o<=t._options.maxPayloadKBSize};return a(),s()||(T7.info("Payload size is too big ("+o+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===qee.indexOf(e.e)})),a()),s()||(T7.info("Payload size still too big ("+o+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),a()),r};var Kee="function"==typeof zee.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},Yee=function(e,t,n,r){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(Wee.default.fetch)Wee.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:Kee(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(Wee.default.XMLHttpRequest){var i=new Wee.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},Qee=Gee,Xee=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],Zee=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Jee=["ad_id","ad_creative_id","ad_universal_id"],ete=["viewstart","error","ended","viewend"],tte=function(){function e(t,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};R7(this,e),P7(this,"mux",void 0),P7(this,"envKey",void 0),P7(this,"options",void 0),P7(this,"eventQueue",void 0),P7(this,"sampleRate",void 0),P7(this,"disableCookies",void 0),P7(this,"respectDoNotTrack",void 0),P7(this,"previousBeaconData",void 0),P7(this,"lastEventTime",void 0),P7(this,"rateLimited",void 0),P7(this,"pageLevelData",void 0),P7(this,"viewerData",void 0),this.mux=t,this.envKey=n,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new Qee(function(e,t){var n=t.beaconCollectionDomain,r=t.beaconDomain;if(n)return"https://"+n;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}(this.envKey,this.options)),this.sampleRate=null!==(m=this.options.sampleRate)&&void 0!==m?m:1,this.disableCookies=null!==(g=this.options.disableCookies)&&void 0!==g&&g,this.respectDoNotTrack=null!==(v=this.options.respectDoNotTrack)&&void 0!==v&&v,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(o=this.options.platform)||void 0===o?void 0:o.layout,viewer_device_name:null===(a=this.options.platform)||void 0===a?void 0:a.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.family,viewer_os_architecture:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.architecture,viewer_os_version:null===(p=this.options.platform)||void 0===p||null===(h=p.os)||void 0===h?void 0:h.version,viewer_connection_type:Fee(),page_url:null===Ree.default||void 0===Ree.default||null===(f=Ree.default.location)||void 0===f?void 0:f.href},this.viewerData=this.disableCookies?{}:function(){var e=Pee();return e.mux_viewer_id=e.mux_viewer_id||g7(),e.msn=e.msn||Math.random(),Mee(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}}()}return L7(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&C7())return T7.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return T7.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:function(){var e=Pee(),t=m7.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=g7(),e.sst=t),e.sex=t+15e5,Mee(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=H7(z7({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,o=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,a=Vee(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),o)return T7.info("Not sending event due to sample rate restriction",e,r,a);if(this.envKey||T7.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,a),!this.rateLimited)if(T7.info("Sending event",e,r,a),this.rateLimited=!this.eventQueue.queueEvent(e,a),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):ete.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",a=Vee(r),this.eventQueue.queueEvent(r.event,a),T7.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=z7({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var o=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=u7(t,2),a=i[0],s=i[1];n.previousBeaconData&&(s!==n.previousBeaconData[a]||Xee.indexOf(a)>-1||n.objectHasChanged(o,a,s,n.previousBeaconData[a])||n.eventRequiresKey(e,a))&&(r[a]=s,n.previousBeaconData[a]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,n,r){return!(!e||0!==t.indexOf("request_"))&&("request_response_headers"===t||"object"!=typeof n||"object"!=typeof r||Object.keys(n||{}).length!==Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||Jee.includes(t)&&Zee.includes(e))}}]),e}(),nte=function e(t){R7(this,e);var n=0,r=0,i=0,o=0,a=0,s=0,l=0;t.on("requestcompleted",(function(e,s){var l,c,u=s.request_start,d=s.request_response_start,h=s.request_response_end,p=s.request_bytes_loaded;if(o++,d?(l=d-(null!=u?u:0),c=(null!=h?h:0)-d):c=(null!=h?h:0)-(null!=u?u:0),c>0&&p&&p>0){var f=p/c*8e3;a++,r+=p,i+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,f),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=o,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/a)}})),t.on("requestfailed",(function(e,n){o++,s++,t.data.view_request_count=o,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,n){o++,l++,t.data.view_request_count=o,t.data.view_request_canceled_count=l}))},rte=function e(t){var n=this;R7(this,e),P7(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,o=m7.now(),a=n._lastEventTime;if(n._lastEventTime=o,a&&o-a>36e5){var s=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,P7({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=l,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))},ite=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],ote=new Set(["requestcompleted","requestfailed","requestcanceled"]),ate=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O7(e,t)}(n,e);var t=j7(n);function n(e,r,i){var o;R7(this,n),P7(I7(o=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),P7(I7(o),"NAVIGATION_START",void 0),P7(I7(o),"_destroyed",void 0),P7(I7(o),"_heartBeatTimeout",void 0),P7(I7(o),"adTracker",void 0),P7(I7(o),"dashjs",void 0),P7(I7(o),"data",void 0),P7(I7(o),"disablePlayheadRebufferTracking",void 0),P7(I7(o),"disableRebufferTracking",void 0),P7(I7(o),"errorTracker",void 0),P7(I7(o),"errorTranslator",void 0),P7(I7(o),"emitTranslator",void 0),P7(I7(o),"getAdData",void 0),P7(I7(o),"getPlayheadTime",void 0),P7(I7(o),"getStateData",void 0),P7(I7(o),"stateDataTranslator",void 0),P7(I7(o),"hlsjs",void 0),P7(I7(o),"id",void 0),P7(I7(o),"longResumeTracker",void 0),P7(I7(o),"minimumRebufferDuration",void 0),P7(I7(o),"mux",void 0),P7(I7(o),"playbackEventDispatcher",void 0),P7(I7(o),"playbackHeartbeat",void 0),P7(I7(o),"playbackHeartbeatTime",void 0),P7(I7(o),"playheadTime",void 0),P7(I7(o),"seekingTracker",void 0),P7(I7(o),"sustainedRebufferThreshold",void 0),P7(I7(o),"watchTimeTracker",void 0),P7(I7(o),"currentFragmentPDT",void 0),P7(I7(o),"currentFragmentStart",void 0),o.DOM_CONTENT_LOADED_EVENT_END=V7.domContentLoadedEventEnd(),o.NAVIGATION_START=V7.navigationStart();var a={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},stateDataTranslator:function(e){return e}};o.mux=e,o.id=r,null!=i&&i.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign(a,i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),T7.level=i.debug?E7:_7,o.getPlayheadTime=i.getPlayheadTime,o.getStateData=i.getStateData||function(){return{}},o.getAdData=i.getAdData||function(){},o.minimumRebufferDuration=i.minimumRebufferDuration,o.sustainedRebufferThreshold=i.sustainedRebufferThreshold,o.playbackHeartbeatTime=i.playbackHeartbeatTime,o.disableRebufferTracking=i.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,o.errorTranslator=i.errorTranslator,o.emitTranslator=i.emitTranslator,o.stateDataTranslator=i.stateDataTranslator,o.playbackEventDispatcher=new tte(e,i.data.env_key,i),o.data={player_instance_id:g7(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1;var s=function(){"undefined"==typeof this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(I7(o));if(o.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)})),o.on("videochange",(function(e,t){this._resetView(t)})),o.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),o.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),o.on("destroy",o.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e="undefined"!=typeof o.data.view_start;o.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var c=function(e){e.persisted||o.destroy()};window.addEventListener("pagehide",c,!1),o.on("destroy",(function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",c)}))}o.on("playerready",(function(e,t){Object.assign(this.data,t)})),ite.forEach((function(e){o.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),o.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),o.on("viewend",(function(e,t){Object.assign(o.data,t)}));return o.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),o.longResumeTracker=new rte(I7(o)),o.errorTracker=new lee(I7(o)),new Iee(I7(o)),o.seekingTracker=new Eee(I7(o)),o.playheadTime=new fee(I7(o)),o.playbackHeartbeat=new see(I7(o)),new xee(I7(o)),o.watchTimeTracker=new uee(I7(o)),new hee(I7(o)),o.adTracker=new Tee(I7(o)),new yee(I7(o)),new gee(I7(o)),new wee(I7(o)),new Cee(I7(o)),new nte(I7(o)),i.hlsjs&&o.addHLSJS(i),i.dashjs&&o.addDashJS(i),o.emit("viewinit",i.data),o}return L7(n,[{key:"emit",value:function(e,t){var r,i=Object.assign({viewer_time:this.mux.utils.now()},t),o=[e,i];if(this.emitTranslator)try{o=this.emitTranslator(e,i)}catch(yk){this.mux.log.warn("Exception in emit translator callback.",yk)}null!=o&&o.length&&(r=N7(M7(n.prototype),"emit",this)).call.apply(r,[this].concat(w7(o)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,"undefined"!=typeof this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=u7(U7(t.video_source_url),2),r=n[0],i=n[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,ote.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e=this.getStateData();if("function"==typeof this.stateDataTranslator)try{e=this.stateDataTranslator(e)}catch(ak){this.mux.log.warn("Exception in stateDataTranslator translator callback.",ak)}Object.assign(this.data,e),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}));["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();(0===n.indexOf("data:")||0===n.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=g7(),n=function(){t===e.data.view_id&&W7(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var r=arguments.length>4?arguments[4]:void 0,i=e.log,o=e.utils.secondsToMs,a=function(e){var t,n=parseInt(r.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(V7.exists()){var s=function(n,r){return e.emit(t,n,r)},l=function(e,t){var n=t.levels,r=t.audioTracks,i=t.url,o=t.stats,a=t.networkDetails,l=t.sessionData,c={},u={};n.forEach((function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var d=X7(o),h=d.bytesLoaded,p=d.requestStart,f=d.responseStart,m=d.responseEnd;s("requestcompleted",H7(z7({},Q7(l)),{request_event_type:e,request_bytes_loaded:h,request_start:p,request_response_start:f,request_response_end:m,request_type:"manifest",request_hostname:F7(i),request_response_headers:Z7(a),request_rendition_lists:{media:c,audio:u,video:{}}}))};n.on(r.Events.MANIFEST_LOADED,l);var c=function(e,t){var n=t.details,r=t.level,i=t.networkDetails,l=t.stats,c=X7(l),u=c.bytesLoaded,d=c.requestStart,h=c.responseStart,p=c.responseEnd,f=n.fragments[n.fragments.length-1],m=a(f)+o(f.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:h,request_response_end:p,request_current_level:r,request_type:"manifest",request_hostname:F7(n.url),request_response_headers:Z7(i),video_holdback:n.holdBack&&o(n.holdBack),video_part_holdback:n.partHoldBack&&o(n.partHoldBack),video_part_target_duration:n.partTarget&&o(n.partTarget),video_target_duration:n.targetduration&&o(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(m)?void 0:m})};n.on(r.Events.LEVEL_LOADED,c);var u=function(e,t){var n=t.details,r=t.networkDetails,i=t.stats,o=X7(i),a=o.bytesLoaded,l=o.requestStart,c=o.responseStart,u=o.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:a,request_start:l,request_response_start:c,request_response_end:u,request_type:"manifest",request_hostname:F7(n.url),request_response_headers:Z7(r)})};n.on(r.Events.AUDIO_TRACK_LOADED,u);var d=function(e,t){var r=t.stats,i=t.networkDetails,o=t.frag;r=r||o.stats;var a=X7(r),l=a.bytesLoaded,c=a.requestStart,u=a.responseStart,d=a.responseEnd,h=i?Z7(i):void 0,p={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:d,request_hostname:i?F7(i.responseURL):void 0,request_id:h?Y7(h):void 0,request_response_headers:h,request_media_duration:o.duration,request_url:null==i?void 0:i.responseURL};"main"===o.type?(p.request_type="media",p.request_current_level=o.level,p.request_video_width=(n.levels[o.level]||{}).width,p.request_video_height=(n.levels[o.level]||{}).height,p.request_labeled_bitrate=(n.levels[o.level]||{}).bitrate):p.request_type=o.type,s("requestcompleted",p)};n.on(r.Events.FRAG_LOADED,d);var h=function(e,t){var n=t.frag,r=n.start,i={currentFragmentPDT:a(n),currentFragmentStart:o(r)};s("fragmentchange",i)};n.on(r.Events.FRAG_CHANGED,h);var p=function(e,t){var n=t.type,i=t.details,o=t.response,a=t.fatal,l=t.frag,c=t.networkDetails,u=(null==l?void 0:l.url)||t.url||"",d=c?Z7(c):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:u,request_hostname:F7(u),request_id:d?Y7(d):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),a){var h,p="".concat(u?"url: ".concat(u,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");s("error",{player_error_code:n,player_error_message:i,player_error_context:p})}};n.on(r.Events.ERROR,p);var f=function(e,t){var n=t.frag,r=n&&n._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:F7(r)})};n.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,f);var m=function(e,t){var r=t.level,o=n.levels[r];if(o&&o.attrs&&o.attrs.BANDWIDTH){var a,l=o.attrs.BANDWIDTH,c=parseFloat(o.attrs["FRAME-RATE"]);isNaN(c)||(a=c),l?s("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:o.width,video_source_height:o.height,video_source_rendition_name:o.name,video_source_codec:null==o?void 0:o.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(r.Events.LEVEL_SWITCHED,m),n._stopMuxMonitor=function(){n.off(r.Events.MANIFEST_LOADED,l),n.off(r.Events.LEVEL_LOADED,c),n.off(r.Events.AUDIO_TRACK_LOADED,u),n.off(r.Events.FRAG_LOADED,d),n.off(r.Events.FRAG_CHANGED,h),n.off(r.Events.ERROR,p),n.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,f),n.off(r.Events.LEVEL_SWITCHED,m),n.off(r.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(r.Events.DESTROYING,n._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,tee(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),n}(iee),ste=ate,lte=W8(s7());var cte=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],ute={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};var dte,hte=W8(z8());hte.default&&hte.default.WeakMap&&(dte=new WeakMap);var pte="#EXT-X-TARGETDURATION",fte="#EXT-X-PART-INF",mte="#EXT-X-SERVER-CONTROL",gte="#EXTINF",vte="#EXT-X-PROGRAM-DATE-TIME",yte="#EXT-X-VERSION",bte="#EXT-X-SESSION-DATA",wte=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};wte.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},wte.prototype.processLine=function(e){var t=e.indexOf(":"),n=kte(e,t),r=n[0],i=2===n.length?Ate(n[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case pte:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case fte:xte(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case mte:xte(this.manifest,n),this.setHoldBack();break;case gte:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case vte:var o=i,a=new Date(o);this.manifest.dateTimeString||(this.manifest.dateTimeString=o,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=o,this.currentUri.dateTimeObject=a;break;case yte:xte(this.manifest,n);break;case bte:var s=Cte(n[1]),l=Q7(s);Object.assign(this.manifest.sessionData,l)}},wte.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",o="partHoldBack",a=n&&3*n,s=r&&2*r;n&&!t.hasOwnProperty(i)&&(t[i]=a),a&&t[i]<a&&(t[i]=a),r&&!t.hasOwnProperty(o)&&(t[o]=3*r),r&&t[o]<s&&(t[o]=s)}};var xte=function(e,t){var n,r=Ete(t[0].replace("#EXT-X-",""));Tte(t[1])?(n={},n=Object.assign(Ste(t[1]),n)):n=Ate(t[1]),e[r]=n},Ete=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},Ate=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},_te=function(e){var t={},n=e.split("=");n.length>1&&(t[Ete(n[0])]=Ate(n[1]));return t},Ste=function(e){for(var t=e.split(","),n={},r=0;t.length>r;r++){var i=t[r],o=_te(i);n=Object.assign(o,n)}return n},Tte=function(e){return e.indexOf("=")>-1},kte=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},Cte=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},Ite=wte,Rte={safeCall:function(e,t,n,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,n)}catch(ak){T7.info("safeCall error",ak)}return i},safeIncrement:W7,getComputedStyle:function(e,t){return e&&t&&hte.default&&"function"==typeof hte.default.getComputedStyle?(dte&&dte.has(e)&&(n=dte.get(e)),n||(n=hte.default.getComputedStyle(e,null),dte&&dte.set(e,n)),n.getPropertyValue(t)):"";var n},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:K7,cdnHeadersToRequestId:Y7,extractHostnameAndDomain:U7,extractHostname:F7,manifestParser:Ite,generateShortID:v7,generateUUID:g7,now:m7.now,findMediaElement:b7},Dte=Rte,Lte={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},Pte={},Mte=function(e){var t=arguments;"string"==typeof e?Mte.hasOwnProperty(e)?d7.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),Mte[e].apply(null,t)}),0):T7.warn("`"+e+"` is an unknown task"):"function"==typeof e?d7.default.setTimeout((function(){e(Mte)}),0):T7.warn("`"+e+"` is invalid.")},Nte={loaded:m7.now(),NAME:"mux-embed",VERSION:"5.9.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var r=u7(b7(t),3),i=r[0],o=r[1],a=r[2],s=e.log,l=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+o+"` query selector.");if("video"!==a&&"audio"!==a)return s.error("The element of `"+o+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var u={getPlayheadTime:function(){return c(i.currentTime)},getStateData:function(){var e,t,n=(null===(e=this.getPlayheadTime)||void 0===e?void 0:e.call(this))||c(i.currentTime),r=this.hlsjs&&this.hlsjs.url,o=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),a={player_is_paused:i.paused,player_width:parseInt(l(i,"width")),player_height:parseInt(l(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:lte.default&&!!(lte.default.fullscreenElement||lte.default.webkitFullscreenElement||lte.default.mozFullScreenElement||lte.default.msFullscreenElement),video_poster_url:i.poster,video_source_url:r||o||i.currentSrc,video_source_duration:c(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(t=i.getVideoPlaybackQuality)||void 0===t?void 0:t.call(i).droppedVideoFrames};if(i.getStartDate&&n>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var u=s.getTime();if(a.player_program_time=u+n,i.seekable.length>0){var d=u+i.seekable.end(i.seekable.length-1);a.player_live_edge_program_time=d}}}return a}};(n=Object.assign({automaticErrorTracking:!0},n,u)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,n){e.emit(o,t,n)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var d=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=d,i.mux.swapElement=d,i.mux.emit=d,i.mux.addHLSJS=d,i.mux.addDashJS=d,i.mux.removeHLSJS=d,i.mux.removeDashJS=d,i.mux.updateData=d,i.mux.setEmitTranslator=d,i.mux.setStateDataTranslator=d,i.mux.setGetPlayheadTime=d,i.mux.deleted=!0,e.emit(o,"destroy")},i.mux.swapElement=function(t){var n=u7(b7(t),3),r=n[0],o=n[1],a=n[2];return r?"video"!==a&&"audio"!==a?e.log.error("The element of `"+o+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+o+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(o,t)},i.mux.addDashJS=function(t){e.addDashJS(o,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(o)},i.mux.removeDashJS=function(){e.removeDashJS(o)},i.mux.setEmitTranslator=function(t){e.setEmitTranslator(o,t)},i.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(o,t)},i.mux.setGetPlayheadTime=function(t){t||(t=n.getPlayheadTime),e.setGetPlayheadTime(o,t)},e.init(o,n),e.emit(o,"playerready"),i.paused||(e.emit(o,"play"),i.readyState>2&&e.emit(o,"playing")),i.mux.listeners={},cte.forEach((function(t){"error"===t&&!n.automaticErrorTracking||(i.mux.listeners[t]=function(){var n={};if("error"===t){if(!i.error||1===i.error.code)return;n.player_error_code=i.error.code,n.player_error_message=ute[i.error.code]||i.error.message}e.emit(o,t,n)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(Mte,e,t)},destroyMonitor:function(e){var t=u7(b7(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():T7.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=y7(e);Pte[n]?Pte[n].addHLSJS(t):T7.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=y7(e);Pte[n]?Pte[n].addDashJS(t):T7.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=y7(e);Pte[t]?Pte[t].removeHLSJS():T7.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=y7(e);Pte[t]?Pte[t].removeDashJS():T7.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){C7()&&t&&t.respectDoNotTrack&&T7.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=y7(e);Pte[n]=new ste(Mte,n,t)},emit:function(e,t,n){var r=y7(e);Pte[r]?(Pte[r].emit(t,n),"destroy"===t&&delete Pte[r]):T7.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var n=y7(e);Pte[n]?Pte[n].emit("hb",t):T7.error("A monitor for `"+n+"` has not been initialized.")},setEmitTranslator:function(e,t){var n=y7(e);Pte[n]?Pte[n].emitTranslator=t:T7.error("A monitor for `"+n+"` has not been initialized.")},setStateDataTranslator:function(e,t){var n=y7(e);Pte[n]?Pte[n].stateDataTranslator=t:T7.error("A monitor for `"+n+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var n=y7(e);Pte[n]?Pte[n].getPlayheadTime=t:T7.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:C7,log:T7,utils:Dte,events:Lte,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Mte,Nte),"undefined"!=typeof d7.default&&"function"==typeof d7.default.addEventListener&&d7.default.addEventListener("pagehide",(function(e){e.persisted||(Mte.WINDOW_UNLOADING=!0)}),!1);var Ote=Mte;function jte(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fte,Ute={exports:{}};Fte=Ute,function(){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(e,n,r){if(r=r||{},e=e.trim(),!(n=n.trim())){if(!r.alwaysNormalize)return e;var o=i.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return o.path=i.normalizePath(o.path),i.buildURLFromParts(o)}var a=i.parseURL(n);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=i.normalizePath(a.path),i.buildURLFromParts(a)):n;var s=i.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=t.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=i.normalizePath(d)}else c.path=s.path,a.params||(c.params=s.params,a.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?i.normalizePath(a.path):a.path),i.buildURLFromParts(c)},parseURL:function(t){var n=e.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};Fte.exports=i}();var Bte=Ute.exports;function $te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vte(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$te(Object(n),!0).forEach((function(t){zte(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wte(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function zte(e,t,n){return(t=Wte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hte(){return Hte=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hte.apply(this,arguments)}const qte=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},Gte=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=Kte},Kte=Number.MAX_SAFE_INTEGER||9007199254740991;let Yte=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),Qte=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),Xte=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const Zte=function(){},Jte={trace:Zte,debug:Zte,log:Zte,warn:Zte,info:Zte,error:Zte};let ene=Jte;function tne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){ene[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):Zte}(t)}))}const nne=ene,rne=/^(\d+)x(\d+)$/,ine=/(.+?)=(".*?"|.*?)(?:,|$)/g;class one{constructor(e){"string"===typeof e&&(e=one.parseAttrList(e)),Hte(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=rne.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(ine.lastIndex=0;null!==(t=ine.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function ane(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class sne{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){nne.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Hte(new one({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);qte(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(qte(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&qte(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class lne{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var cne="audio",une="video",dne="audiovideo";class hne{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[cne]:null,[une]:null,[dne]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Bte.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class pne extends hne{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new lne,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!qte(this.programDateTime))return null;const e=qte(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:a}=this,s=a[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):a[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:o}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[cne]=null,e[une]=null,e[dne]=null}}class fne extends hne{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new lne,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class mne{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&qte(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function gne(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function vne(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=gne(i)):n=function(e){const t=yne(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}function yne(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const bne="undefined"!==typeof self?self:void 0;var wne={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},xne="org.w3.clearkey",Ene="com.apple.streamingkeydelivery",Ane="com.microsoft.playready",_ne="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Sne(e){switch(e){case Ene:return wne.FAIRPLAY;case Ane:return wne.PLAYREADY;case _ne:return wne.WIDEVINE;case xne:return wne.CLEARKEY}}var Tne="1077efecc0b24d02ace33c1e52e2fb4b",kne="e2719d58a985b3c9781ab030af78d30e",Cne="9a04f07998404286ab92e65be0885f95",Ine="edef8ba979d64acea3c827dcd51d21ed";function Rne(e){return e===Ine?wne.WIDEVINE:e===Cne?wne.PLAYREADY:e===Tne||e===kne?wne.CLEARKEY:void 0}function Dne(e){switch(e){case wne.FAIRPLAY:return Ene;case wne.PLAYREADY:return Ane;case wne.WIDEVINE:return _ne;case wne.CLEARKEY:return xne}}function Lne(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[wne.FAIRPLAY,wne.WIDEVINE,wne.PLAYREADY,wne.CLEARKEY].filter((e=>!!t[e])):[];return!r[wne.WIDEVINE]&&n&&r.push(wne.WIDEVINE),r}const Pne=null!=bne&&null!=(Mne=bne.navigator)&&Mne.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Mne;function Nne(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=gne(e).subarray(0,16);return function(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}function One(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const jne=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,Fne=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,Une=(e,t)=>{const n=t;let r=0;for(;jne(e,t);){r+=10;r+=Bne(e,t+6),Fne(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},Bne=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},$ne=(e,t)=>jne(e,t)&&Bne(e,t+6)+10<=e.length-t,Vne=e=>{const t=Hne(e);for(let n=0;n<t.length;n++){const e=t[n];if(Wne(e))return Qne(e)}},Wne=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,zne=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=Bne(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},Hne=e=>{let t=0;const n=[];for(;jne(e,t);){const r=Bne(e,t+6);t+=10;const i=t+r;for(;t+8<i;){const r=zne(e.subarray(t)),i=qne(r);i&&n.push(i),t+=r.size+10}Fne(e,t)&&(t+=10)}return n},qne=e=>"PRIV"===e.type?Gne(e):"W"===e.type[0]?Yne(e):Kne(e),Gne=e=>{if(e.size<2)return;const t=Xne(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},Kne=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=Xne(e.data.subarray(t),!0);t+=n.length+1;const r=Xne(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Xne(e.data.subarray(1));return{key:e.type,data:t}},Yne=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=Xne(e.data.subarray(t),!0);t+=n.length+1;const r=Xne(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Xne(e.data);return{key:e.type,data:t}},Qne=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},Xne=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Jne();if(n){const r=n.decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let i,o,a,s="",l=0;for(;l<r;){if(i=e[l++],0===i&&t)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:o=e[l++],s+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[l++],a=e[l++],s+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return s};let Zne;function Jne(){if(!navigator.userAgent.includes("PlayStation 4"))return Zne||"undefined"===typeof self.TextDecoder||(Zne=new self.TextDecoder("utf-8")),Zne}const ere=function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t},tre=Math.pow(2,32)-1,nre=[].push,rre={video:1,audio:2,id3:3,text:4};function ire(e){return String.fromCharCode.apply(null,e)}function ore(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function are(e,t){const n=lre(e,t);return n<0?4294967296+n:n}function sre(e,t){let n=are(e,t);return n*=Math.pow(2,32),n+=are(e,t+4),n}function lre(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function cre(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function ure(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const o=are(e,i),a=o>1?i+o:r;if(ire(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,a));else{const r=ure(e.subarray(i+8,a),t.slice(1));r.length&&nre.apply(n,r)}i=a}return n}function dre(e){const t=[],n=e[0];let r=8;const i=are(e,r);r+=4;let o=0,a=0;0===n?(o=are(e,r),a=are(e,r+4),r+=8):(o=sre(e,r),a=sre(e,r+8),r+=16),r+=2;let s=e.length+a;const l=ore(e,r);r+=2;for(let c=0;c<l;c++){let n=r;const o=are(e,n);n+=4;const a=2147483647&o;if(1===(2147483648&o)>>>31)return nne.warn("SIDX has hierarchical references (not supported)"),null;const l=are(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:s,end:s+a-1}}),s+=a,n+=4,r=n}return{earliestPresentationTime:o,timescale:i,version:n,referencesCount:l,references:t}}function hre(e){const t=[],n=ure(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=ure(e,["tkhd"])[0];if(i){let n=i[0];const r=are(i,0===n?12:20),o=ure(e,["mdia","mdhd"])[0];if(o){n=o[0];const i=are(o,0===n?12:20),a=ure(e,["mdia","hdlr"])[0];if(a){const n=ire(a.subarray(8,12)),o={soun:cne,vide:une}[n];if(o){const n=pre(ure(e,["mdia","minf","stbl","stsd"])[0]);t[r]={timescale:i,type:o},t[o]=Vte({timescale:i,id:r},n)}}}}}return ure(e,["moov","mvex","trex"]).forEach((e=>{const n=are(e,4),r=t[n];r&&(r.default={duration:are(e,12),flags:are(e,20)})})),t}function pre(e){const t=e.subarray(8),n=t.subarray(86),r=ire(t.subarray(4,8));let i=r;const o="enca"===r||"encv"===r;if(o){const e=ure(t,[r])[0];ure(e.subarray("enca"===r?28:78),["sinf"]).forEach((e=>{const t=ure(e,["schm"])[0];if(t){const n=ire(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=ure(e,["frma"])[0];t&&(i=ire(t))}}}))}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const e=ure(n,["avcC"])[0];i+="."+mre(e[1])+mre(e[2])+mre(e[3]);break}case"mp4a":{const e=ure(t,[r])[0],n=ure(e.subarray(28),["esds"])[0];if(n&&n.length>12){let e=4;if(3!==n[e++])break;e=fre(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=fre(n,e);const r=n[e++];if(64!==r)break;if(i+="."+mre(r),e+=12,5!==n[e++])break;e=fre(n,e);const o=n[e++];let a=(248&o)>>3;31===a&&(a+=1+((7&o)<<3)+((224&n[e])>>5)),i+="."+a}break}case"hvc1":case"hev1":{const e=ure(n,["hvcC"])[0],t=e[1],r=["","A","B","C"][t>>6],o=31&t,a=are(e,2),s=(32&t)>>5?"H":"L",l=e[12],c=e.subarray(6,12);i+="."+r+o,i+="."+a.toString(16).toUpperCase(),i+="."+s+l;let u="";for(let n=c.length;n--;){const e=c[n];if(e||u){u="."+e.toString(16).toUpperCase()+u}}i+=u;break}case"dvh1":case"dvhe":{const e=ure(n,["dvcC"])[0],t=e[2]>>1&127,r=e[2]<<5&32|e[3]>>3&31;i+="."+gre(t)+"."+gre(r);break}case"vp09":{const e=ure(n,["vpcC"])[0],t=e[4],r=e[5],o=e[6]>>4&15;i+="."+gre(t)+"."+gre(r)+"."+gre(o);break}case"av01":{const e=ure(n,["av1C"])[0],t=e[1]>>>5,r=31&e[1],o=e[2]>>>7?"H":"M",a=(64&e[2])>>6,s=(32&e[2])>>5,l=2===t&&a?s?12:10:a?10:8,c=(16&e[2])>>4,u=(8&e[2])>>3,d=(4&e[2])>>2,h=3&e[2],p=1,f=1,m=1,g=0;i+="."+t+"."+gre(r)+o+"."+gre(l)+"."+c+"."+u+d+h+"."+gre(p)+"."+gre(f)+"."+gre(m)+"."+g;break}}return{codec:i,encrypted:o}}function fre(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function mre(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function gre(e){return(e<10?"0":"")+e}function vre(e){const t=ure(e,["schm"])[0];if(t){const n=ire(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return ure(e,["schi","tenc"])[0]}return null}function yre(e){const t=are(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let r=0;const i=are(e,4);for(let o=0;o<i;o++){if(256&t){r+=are(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return r}function bre(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function wre(e,t){const n=[],r=t.samples,i=t.timescale,o=t.id;let a=!1;return ure(r,["moof"]).map((s=>{const l=s.byteOffset-8;ure(s,["traf"]).map((s=>{const c=ure(s,["tfdt"]).map((e=>{const t=e[0];let n=are(e,4);return 1===t&&(n*=Math.pow(2,32),n+=are(e,8)),n/i}))[0];return void 0!==c&&(e=c),ure(s,["tfhd"]).map((c=>{const u=are(c,4),d=16777215&are(c,0);let h=0;const p=0!==(16&d);let f=0;const m=0!==(32&d);let g=8;u===o&&(0!==(1&d)&&(g+=8),0!==(2&d)&&(g+=4),0!==(8&d)&&(h=are(c,g),g+=4),p&&(f=are(c,g),g+=4),m&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),ure(s,["trun"]).map((o=>{const s=o[0],c=16777215&are(o,0),u=0!==(1&c);let d=0;const p=0!==(4&c),m=0!==(256&c);let g=0;const v=0!==(512&c);let y=0;const b=0!==(1024&c),w=0!==(2048&c);let x=0;const E=are(o,4);let A=8;u&&(d=are(o,A),A+=4),p&&(A+=4);let _=d+l;for(let l=0;l<E;l++){if(m?(g=are(o,A),A+=4):g=h,v?(y=are(o,A),A+=4):y=f,b&&(A+=4),w&&(x=0===s?are(o,A):lre(o,A),A+=4),t.type===une){let t=0;for(;t<y;){const o=are(r,_);if(_+=4,xre(a,r[_])){Ere(r.subarray(_,_+o),a?2:1,e+x/i,n)}_+=o,t+=o+4}}e+=g/i}})))}))}))})),n}function xre(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function Ere(e,t,n,r){const i=Are(e);let o=0;o+=t;let a=0,s=0,l=0;for(;o<i.length;){a=0;do{if(o>=i.length)break;l=i[o++],a+=l}while(255===l);s=0;do{if(o>=i.length)break;l=i[o++],s+=l}while(255===l);const e=i.length-o;let t=o;if(s<e)o+=s;else if(s>e){nne.error(`Malformed SEI payload. ${s} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===i[t++]){const e=ore(i,t);if(t+=2,49===e){const e=are(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const o=i[t++],s=64&o,l=s?2+3*(31&o):0,c=new Uint8Array(l);if(s){c[0]=o;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:a,pts:n,bytes:c})}}}}}else if(5===a&&s>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const o=s-16,l=new Uint8Array(o);for(let n=0;n<o;n++)l[n]=i[t++];r.push({payloadType:a,pts:n,uuid:e.join(""),userData:Xne(l),userDataBytes:l})}}}function Are(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,o=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),o[r]=e[a];return o}function _re(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,o;if(t){r=1,i=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");i.set(n,16*e)}}else r=0,i=new Uint8Array;r>0?(o=new Uint8Array(4),t.length>0&&new DataView(o.buffer).setUint32(0,t.length,!1)):o=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.length;let o=8,a=i;for(;a--;)o+=n[a].byteLength;const s=new Uint8Array(o);for(s[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=255&o,s.set(e,4),a=0,o=8;a<i;a++)s.set(n[a],o),o+=n[a].byteLength;return s}([112,115,115,104],new Uint8Array([r,0,0,0]),e,o,i,a,n||new Uint8Array)}function Sre(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const o=e.buffer,a=ere(new Uint8Array(o,n+12,16)),s=e.getUint32(28);let l=null,c=null;if(0===i){if(t-32<s||s<22)return{offset:n,size:t};c=new Uint8Array(o,n+32,s)}else if(1===i){if(!s||r<n+32+16*s+16)return{offset:n,size:t};l=[];for(let e=0;e<s;e++)l.push(new Uint8Array(o,n+32+16*e,16))}return{version:i,systemId:a,kids:l,data:c,offset:n,size:t}}let Tre={};class kre{static clearKeyUriToKeyIdMap(){Tre={}}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Ene:case _ne:case Ane:case xne:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||nne.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new kre(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=vne(this.uri);if(t)switch(this.keyFormat){case _ne:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Ane:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=_re(e,null,t),this.keyId=Nne(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=Tre[this.uri];if(!e){const t=Object.keys(Tre).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),Tre[this.uri]=e}this.keyId=e}return this}}const Cre=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ire(e){return Cre.test(e)}function Rre(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let r=n.length;r--;){const i=n[r],o=t[i];o&&(t[i]=Dre(e,o))}}function Dre(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(Cre,(t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i}))}return t}function Lre(e,t,n){let r,i,o=e.variableList;if(o||(e.variableList=o={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(WE){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${WE.message}`))}}else r=t.NAME,i=t.VALUE;r in o?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):o[r]=i||""}function Pre(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function Mre(){if("undefined"===typeof self)return;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const Nre={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ore(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!e.split(",").some((e=>!jre(e,t,n)))}function jre(e,t){var n;const r=Mre(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return null!=(n=null==r?void 0:r.isTypeSupported(Fre(e,t)))&&n}function Fre(e,t){return`${t}/mp4;codecs="${e}"`}function Ure(e){if(e){const t=e.substring(0,4);return Nre.video[t]}return 2}function Bre(e){return e.split(",").reduce(((e,t)=>{const n=Nre.video[t];return n?(2*n+e)/(e?3:2):(Nre.audio[t]+e)/(e?2:1)}),0)}const $re={};const Vre=/flac|opus/i;function Wre(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(Vre,(e=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if($re[e])return $re[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let r=0;r<n.length;r++)if(jre(n[r],"audio",t))return $re[e]=n[r],n[r];return e}(e.toLowerCase(),t)))}function zre(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}const Hre=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,qre=/#EXT-X-MEDIA:(.*)/g,Gre=/^#EXT(?:INF|-X-TARGETDURATION):/m,Kre=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Yre=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Qre{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return Bte.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Gre.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ire(e)},r=[];let i;for(Hre.lastIndex=0;null!=(i=Hre.exec(e));)if(i[1]){var o;const e=new one(i[1]);Rre(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=Dre(n,i[2]),s={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:Qre.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(s.width=l.width,s.height=l.height),Jre(e.CODECS,s),null!=(o=s.unknownCodecs)&&o.length||r.push(s),n.levels.push(s)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new one(r);Rre(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=Xre(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):nne.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":{const e=new one(r);Rre(n,e,["NAME","VALUE","QUERYPARAM"]),Lre(n,e,t)}break;case"CONTENT-STEERING":{const e=new one(r);Rre(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:Qre.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=Zre(r)}}const a=r.length>0&&r.length<n.levels.length;return n.levels=a?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},o=n.levels,a={AUDIO:o.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:o.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let s=0;for(qre.lastIndex=0;null!==(r=qre.exec(e));){const e=new one(r[1]),o=e.TYPE;if(o){const r=a[o],l=i[o]||[];i[o]=l,Rre(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],d=e.CHANNELS,h=e.CHARACTERISTICS,p=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:s++,groupId:e["GROUP-ID"]||"",name:e.NAME||c||"",type:o,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:c,url:e.URI?Qre.resolve(e.URI,t):""};if(u&&(f.assocLang=u),d&&(f.channels=d),h&&(f.characteristics=h),p&&(f.instreamId=p),null!=r&&r.length){const e=Qre.findGroup(r,f.groupId)||r[0];eie(f,e,"audioCodec"),eie(f,e,"textCodec")}l.push(f)}}return i}static parseLevelPlaylist(e,t,n,r,i,o){const a=new mne(t),s=a.fragments;let l,c,u,d=null,h=0,p=0,f=0,m=0,g=null,v=new pne(r,t),y=-1,b=!1,w=null;for(Kre.lastIndex=0,a.m3u8=e,a.hasVariableRefs=Ire(e);null!==(l=Kre.exec(e));){b&&(b=!1,v=new pne(r,t),v.start=f,v.sn=h,v.cc=m,v.level=n,d&&(v.initSegment=d,v.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null,w&&(v.setByteRange(w),w=null)));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(qte(v.duration)){v.start=f,u&&rie(v,u,a),v.sn=h,v.level=n,v.cc=m,s.push(v);const e=(" "+l[3]).slice(1);v.relurl=Dre(a,e),tie(v,g),g=v,f+=v.duration,h++,p=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=s.length);else{if(l=l[0].match(Yre),!l){nne.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&"undefined"===typeof l[c];c++);const e=(" "+l[c]).slice(1),i=(" "+l[c+1]).slice(1),f=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(i);break;case"SKIP":{const e=new one(i);Rre(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(qte(t)){a.skippedSegments=t;for(let e=t;e--;)s.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(a.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(i),1);break;case"VERSION":a.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(i||f)&&v.tagList.push(f?[i,f]:[i]);break;case"DISCONTINUITY":m++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,i]);break;case"DATERANGE":{const e=new one(i);Rre(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Rre(a,e,e.clientAttrs);const t=new sne(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:nne.warn(`Ignoring invalid DATERANGE tag: "${i}"`),v.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new one(i);Rre(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?Pre(a,e,o):Lre(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(i);break;case"KEY":{const e=Xre(i,t,a);if(e.isSupported()){if("NONE"===e.method){u=void 0;break}u||(u={}),u[e.keyFormat]&&(u=Hte({},u)),u[e.keyFormat]=e}else nne.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${i}"`);break}case"START":a.startTimeOffset=Zre(i);break;case"MAP":{const e=new one(i);if(Rre(a,e,["BYTERANGE","URI"]),v.duration){const i=new pne(r,t);nie(i,e,n,u),d=i,v.initSegment=d,d.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=d.rawProgramDateTime)}else{const t=v.byteRangeEndOffset;if(t){const e=v.byteRangeStartOffset;w=`${t-e}@${e}`}else w=null;nie(v,e,n,u),d=v,b=!0}break}case"SERVER-CONTROL":{const e=new one(i);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new one(i);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const n=p>0?e[e.length-1]:void 0,r=p++,o=new one(i);Rre(a,o,["BYTERANGE","URI"]);const s=new fne(o,v,t,r,n);e.push(s),v.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new one(i);Rre(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new one(i);Rre(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:nne.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(s.pop(),f-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&(tie(v,g),v.cc=m,a.fragmentHint=v,u&&rie(v,u,a));const x=s.length,E=s[0],A=s[x-1];if(f+=a.skippedSegments*a.targetduration,f>0&&x&&A){a.averagetargetduration=f/x;const e=A.sn;a.endSN="initSegment"!==e?e:0,a.live||(A.endList=!0),E&&(a.startCC=E.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=m,y>0&&function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(s,y),a}}function Xre(e,t,n){var r,i;const o=new one(e);Rre(n,o,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(r=o.METHOD)?r:"",s=o.URI,l=o.hexadecimalInteger("IV"),c=o.KEYFORMATVERSIONS,u=null!=(i=o.KEYFORMAT)?i:"identity";s&&o.IV&&!l&&nne.error(`Invalid IV: ${o.IV}`);const d=s?Qre.resolve(s,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new kre(a,d,u,h,l)}function Zre(e){const t=new one(e).decimalFloatingPoint("TIME-OFFSET");return qte(t)?t:null}function Jre(e,t){let n=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const r=n.filter((t=>function(e,t){const n=Nre[t];return!!n&&!!n[e.slice(0,4)]}(t,e)));r.length&&(t[`${e}Codec`]=r.join(","),n=n.filter((e=>-1===r.indexOf(e))))})),t.unknownCodecs=n}function eie(e,t,n){const r=t[n];r&&(e[n]=r)}function tie(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),qte(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function nie(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function rie(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||r.push(e)}var iie="manifest",oie="level",aie="audioTrack",sie="subtitleTrack",lie="main",cie="audio",uie="subtitle";function die(e){const{type:t}=e;switch(t){case aie:return cie;case sie:return uie;default:return lie}}function hie(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class pie{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.on(Yte.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Yte.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.off(Yte.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Yte.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:iie,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:o,deliveryDirectives:a}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:oie,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:aie,url:i,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:sie,url:i,deliveryDirectives:o})}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=i.context;if(t&&t.url===e.url&&t.level===e.level)return void nne.trace("[playlist-loader]: playlist request ongoing");nne.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(r=e.type===iie?n.manifestLoadPolicy.default:Hte({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),qte(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===oie&&null!==e.level?t=this.hls.levels[e.level].details:e.type===aie&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===sie&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=Hte({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const o=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},s={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const o=e.data;0===o.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Qre.isMediaPlaylist(o)?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,t)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,a,s)}handleMasterPlaylist(e,t,n,r){const i=this.hls,o=e.data,a=hie(e,n),s=Qre.parseMasterPlaylist(o,a);if(s.playlistParsingError)return void this.handleManifestParsingError(e,n,s.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p}=s;this.variableList=p;const{AUDIO:f=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=Qre.parseMasterPlaylistMedia(o,a,s);if(f.length){f.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(nne.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new one({}),bitrate:0,url:""}))}i.trigger(Yte.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:m,captions:g,contentSteering:l,url:a,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,t,n,r,i){const o=this.hls,{id:a,level:s,type:l}=n,c=hie(e,n),u=qte(s)?s:qte(a)?a:0,d=die(n),h=Qre.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===iie){const e={attrs:new one({}),bitrate:0,details:h,name:"",url:c};o.trigger(Yte.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(Yte.ERROR,{type:Qte.NETWORK_ERROR,details:Xte.MANIFEST_PARSING_ERROR,fatal:t.type===iie,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===oie?o+=`: ${e.level} id: ${e.id}`:e.type!==aie&&e.type!==sie||(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);nne.warn(`[playlist-loader]: ${o}`);let s=Xte.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case iie:s=n?Xte.MANIFEST_LOAD_TIMEOUT:Xte.MANIFEST_LOAD_ERROR,l=!0;break;case oie:s=n?Xte.LEVEL_LOAD_TIMEOUT:Xte.LEVEL_LOAD_ERROR,l=!1;break;case aie:s=n?Xte.AUDIO_TRACK_LOAD_TIMEOUT:Xte.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case sie:s=n?Xte.SUBTITLE_TRACK_LOAD_TIMEOUT:Xte.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:Qte.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=Vte({url:n,data:void 0},r)}this.hls.trigger(Yte.ERROR,u)}handlePlaylistLoaded(e,t,n,r,i,o){const a=this.hls,{type:s,level:l,id:c,groupId:u,deliveryDirectives:d}=r,h=hie(t,r),p=die(r),f="number"===typeof r.level&&p===lie?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger(Yte.ERROR,{type:Qte.NETWORK_ERROR,details:Xte.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:r,level:f,parent:p,networkDetails:i,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)a.trigger(Yte.ERROR,{type:Qte.NETWORK_ERROR,details:Xte.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:r,level:f,parent:p,networkDetails:i,stats:n});else switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),o.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case iie:case oie:a.trigger(Yte.LEVEL_LOADED,{details:e,level:f||0,id:c||0,stats:n,networkDetails:i,deliveryDirectives:d});break;case aie:a.trigger(Yte.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d});break;case sie:a.trigger(Yte.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d})}}}function fie(e,t){let n;try{n=new Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function mie(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(r){nne.debug(`[texttrack-utils]: ${r}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(i){nne.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}"disabled"===n&&(e.mode=n)}function gie(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function vie(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r=0,i=n;for(;r<=i;){const o=Math.floor((i+r)/2);if(t<e[o].startTime)i=o-1;else{if(!(t>e[o].startTime&&r<n))return o;r=o+1}}return e[r].startTime-t<t-e[i].startTime?r:i}(e,t);if(i>-1)for(let o=i,a=e.length;o<a;o++){const i=e[o];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function yie(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}var bie="org.id3",wie="com.apple.quicktime.HLS",xie="https://aomedia.org/emsg/ID3";function Eie(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function Aie(e,t,n,r,i){let o=new e(t,n,"");try{o.value=r,i&&(o.type=i)}catch(ok){o=new e(t,n,JSON.stringify(i?Vte({type:i},r):r))}return o}const _ie=(()=>{const e=Eie();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(ok){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Sie(e,t){return e.getTime()/1e3-t}class Tie{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Yte.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Yte.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(gie(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return fie(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=Eie();if(o)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===xie&&!n||!r)continue;const t=Hne(i[a].data);if(t){const n=i[a].pts;let r=n+i[a].duration;r>_ie&&(r=_ie);r-n<=0&&(r=n+.25);for(let i=0;i<t.length;i++){const a=t[i];if(!Wne(a)){this.updateId3CueEnds(n,e);const t=Aie(o,n,r,a,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===_ie&&(n.endTime=e)}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,type:i}=t;const{id3Track:o,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:l}}=a;if(o&&(s||l)){let e;e="audio"===i?e=>e.type===bie&&l:"video"===i?e=>e.type===xie&&s:e=>e.type===bie&&l||e.type===xie&&s,vie(o,n,r,e)}}onLevelUpdated(e,t){let{details:n}=t;if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:o}=n,a=Object.keys(o);if(i){const e=Object.keys(r).filter((e=>!a.includes(e)));for(let t=e.length;t--;){const n=e[t];Object.keys(r[n].cues).forEach((e=>{i.removeCue(r[n].cues[e])})),delete r[n]}}const s=n.fragments[n.fragments.length-1];if(0===a.length||!qte(null==s?void 0:s.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=s.programDateTime/1e3-s.start,c=Eie();for(let h=0;h<a.length;h++){const e=a[h],t=o[e],n=Sie(t.startDate,l),i=r[e],s=(null==i?void 0:i.cues)||{};let p=(null==i?void 0:i.durationKnown)||!1,f=_ie;const m=t.endDate;if(m)f=Sie(m,l),p=!0;else if(t.endOnNext&&!p){const e=a.reduce(((e,n)=>{if(n!==t.id){const r=o[n];if(r.class===t.class&&r.startDate>t.startDate&&(!e||t.startDate<e.startDate))return r}return e}),null);e&&(f=Sie(e.startDate,l),p=!0)}const g=Object.keys(t.attr);for(let r=0;r<g.length;r++){const o=g[r];if("ID"===(d=o)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;const a=s[o];if(a)p&&!i.durationKnown&&(a.endTime=f);else if(c){let r=t.attr[o];ane(o)&&(u=r,r=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const i=Aie(c,n,f,{key:o,data:r},wie);i&&(i.id=e,this.id3Track.addCue(i),s[o]=i)}}r[e]={cues:s,dateRange:t,durationKnown:p}}var u,d}}class kie{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,s=this.hls.userConfig;let l=a&&n||t;(s.liveSyncDuration||s.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:o*r);const c=r;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,o=r-n.totalduration,a=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Yte.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Yte.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Yte.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Yte.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:n}=t;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===Xte.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&nne.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const o=this.targetLatency;if(null===o)return;const a=n-o;if(a<Math.min(this.maxLatency,o+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const Cie=["NONE","TYPE-0","TYPE-1",null];const Iie=["SDR","PQ","HLG"];var Rie="",Die="YES",Lie="v2";function Pie(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?Lie:Die:Rie}class Mie{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Nie{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Oie(this._audioGroups,e)}hasSubtitleGroup(e){return Oie(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function Oie(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function jie(e,t){const n=t.startPTS;if(qte(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&(r.duration=i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function Fie(e,t,n,r,i,o){r-n<=0&&(nne.warn("Fragment should have a positive duration",t),r=n+t.duration,o=i+t.duration);let a=n,s=r;const l=t.startPTS,c=t.endPTS;if(qte(l)){const e=Math.abs(l-n);qte(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(n,l),n=Math.min(n,l),i=Math.min(i,t.startDTS),s=Math.min(r,c),r=Math.max(r,c),o=Math.max(o,t.endDTS)}const u=n-t.start;0!==t.start&&(t.start=n),t.duration=r-t.start,t.startPTS=n,t.maxStartPTS=a,t.startDTS=i,t.endPTS=r,t.minEndPTS=s,t.endDTS=o;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const p=d-e.startSN,f=e.fragments;for(f[p]=t,h=p;h>0;h--)jie(f[h],f[h-1]);for(h=p;h<f.length-1;h++)jie(f[h],f[h+1]);return e.fragmentHint&&jie(f[f.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function Uie(e,t){let n=null;const r=e.fragments;for(let s=r.length-1;s>=0;s--){const e=r[s].initSegment;if(e){n=e;break}}let i;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,o=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=o;c++){const e=l[a+c];let i=s[c];r&&!i&&c<r&&(i=t.fragments[c]=e),e&&i&&n(e,i,c,s)}}(e,t,((e,r,o,a)=>{if(t.skippedSegments&&r.cc!==e.cc){const t=e.cc-r.cc;for(let e=o;e<a.length;e++)a[e].cc+=t}qte(e.startPTS)&&qte(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(i=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)}));const o=t.fragments;if(n){(t.fragmentHint?o.concat(t.fragmentHint):o).forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments){if(t.deltaUpdateFailed=o.some((e=>!e)),t.deltaUpdateFailed){nne.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)o.shift();t.startSN=o[0].sn}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const r=Hte({},e);n&&n.forEach((e=>{delete r[e]}));return Object.keys(t).forEach((e=>{const n=new sne(t[e].attr,r[e]);n.isValid?r[e]=n:nne.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),r}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));t.startCC=t.fragments[0].cc,t.endCC=o[o.length-1].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,o=e.length;i<=o;i++){const o=e[i],a=t[i+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),i?Fie(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):Bie(e,t),o.length&&(t.totalduration=t.edge-o[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const a=t.advancedDateTime;if(t.advanced&&a){const e=t.edge;t.driftStart||(t.driftStartTime=a,t.driftStart=e),t.driftEndTime=a,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function Bie(e,t){const n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||$ie(t,r[n].start)}function $ie(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function Vie(e,t,n){var r;return null!=e&&e.details?Wie(null==(r=e.details)?void 0:r.partList,t,n):null}function Wie(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function zie(e){e.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))}))}function Hie(e){switch(e.details){case Xte.FRAG_LOAD_TIMEOUT:case Xte.KEY_LOAD_TIMEOUT:case Xte.LEVEL_LOAD_TIMEOUT:case Xte.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function qie(e,t){const n=Hie(t);return e.default[(n?"timeout":"error")+"Retry"]}function Gie(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function Kie(e){return Vte(Vte({},e),{errorRetry:null,timeoutRetry:null})}function Yie(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,o=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,o):o}const Qie=function(e,t){let n=0,r=e.length-1,i=null,o=null;for(;n<=r;){i=(n+r)/2|0,o=e[i];const a=t(o);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null};function Xie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,o=null;if(e){o=t[e.sn-t[0].sn+1]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7)}else 0===n&&0===t[0].start&&(o=t[0]);if(o&&((!e||e.level===o.level)&&0===Zie(n,r,o)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),n);return e.start<=r}return!1}(o,e,Math.min(i,r))))return o;const a=Qie(t,Zie.bind(null,n,r));return!a||a===e&&o?o:a}function Zie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function Jie(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var eoe=0,toe=2,noe=3,roe=5,ioe=0,ooe=1,aoe=2;class soe{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=nne.log.bind(nne,`${t}:`),this.warn=nne.warn.bind(nne,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let i=-1;for(let n=0;n<r.length;n++){const o=r[n];let a;try{a=new self.URL(o.URI,t.url).href}catch(WE){nne.warn(`Could not construct new URL for Rendition Report: ${WE}`),a=o.URI||""}if(a===e){i=n;break}a===e.substring(0,a.length)&&(i=n)}if(-1!==i){const e=r[i],o=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let a=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const s=n&&Pie(n);return new Mie(o,a>=0?a:void 0,s)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:r,stats:i}=t,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;if(r.advancedDateTime=Date.now()-a,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),n&&r.fragments.length>0&&Uie(n,r),!this.canLoad||!r.live)return;let a,s,l;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,o=r.endSN,c=r.lastPartIndex,u=i===o;-1!==c?(s=u?o+1:i,l=u?e?0:c:c+1):s=o+1;const d=r.age,h=d+r.ageHeader;let p=Math.min(h-r.partTarget,1.5*r.targetduration);if(p>0){if(n&&p>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${p} with playlist age: ${r.age}`),p=0;else{const e=Math.floor(p/r.targetduration);if(s+=e,void 0!==l){l+=Math.round(p%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${d.toFixed(2)}s goal: ${p} skip sn ${e} to part ${l}`)}r.tuneInGoal=p}if(a=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l),e||!u)return void this.loadPlaylist(a)}else(r.canBlockReload||r.canSkipUntil)&&(a=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l));const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(r,1e3*(r.edge-u));r.updated&&o>this.requestScheduled+d&&(this.requestScheduled=i.loading.start),void 0!==s&&r.canBlockReload?this.requestScheduled=i.loading.first+d-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=d);let h=this.requestScheduled-o;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,r){let i=Pie(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Rie),new Mie(n,r,i)}checkRetry(e){const t=e.details,n=Hie(e),r=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=r||{},s=!!r&&!!a&&(i===roe||!r.resolved&&i===toe);if(s){var l;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=Gie(a,o);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return s}}class loe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class coe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new loe(e),this.fast_=new loe(t),this.defaultTTFB_=r,this.ttfb_=new loe(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new loe(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new loe(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new loe(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const uoe={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},doe={};function hoe(e,t,n,r,i,o){const a=e.audioCodec?e.audioGroups:null,s=null==o?void 0:o.audioCodec,l=null==o?void 0:o.channels,c=l?parseInt(l):s?1/0:2;let u=null;if(null!=a&&a.length)try{u=1===a.length&&a[0]?t.groups[a[0]].channels:a.reduce(((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach((t=>{e[t]=(e[t]||0)+r.channels[t]}))}return e}),{2:0})}catch(WE){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!u&&qte(c)&&Object.keys(u).some((e=>parseInt(e)>c))}function poe(e,t,n){const r=e.videoCodec,i=e.audioCodec;if(!r||!i||!n)return Promise.resolve(uoe);const o={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},a=e.videoRange;"SDR"!==a&&(o.transferFunction=a.toLowerCase());const s=r.split(",").map((e=>({type:"media-source",video:Vte(Vte({},o),{},{contentType:Fre(e,"video")})})));return i&&e.audioGroups&&e.audioGroups.forEach((e=>{var n;e&&(null==(n=t.groups[e])||n.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",n=parseFloat(e);qte(n)&&n>2&&s.push.apply(s,i.split(",").map((e=>({type:"media-source",audio:{contentType:Fre(e,"audio"),channels:""+n}}))))}})))})),Promise.all(s.map((e=>{const t=function(e){const{audio:t,video:n}=e,r=n||t;if(r){const e=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${e}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return doe[t]||(doe[t]=n.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:s,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e})))}function foe(e,t){let n=!1,r=[];return e&&(n="SDR"!==e,r=[e]),t&&(r=t.allowedVideoRanges||Iie.slice(0),n=void 0!==t.preferHDR?t.preferHDR:function(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),r=n?r.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function moe(e,t){nne.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function goe(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(voe(e,t[r],n))return r}return-1}function voe(e,t,n){const{groupId:r,name:i,lang:o,assocLang:a,default:s}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===o||t.lang===o)&&(void 0===o||t.assocLang===a)&&(void 0===s||t.default===s)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some((e=>-1===r.indexOf(e)))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function yoe(e,t){const{audioCodec:n,channels:r}=e;return(void 0===n||(t.audioCodec||"").substring(0,4)===n.substring(0,4))&&(void 0===r||r===(t.channels||"2"))}function boe(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}class woe{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var xoe="NOT_LOADED",Eoe="APPENDING",Aoe="PARTIAL",_oe="OK";class Soe{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Yte.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Yte.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Yte.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;const i=t.end;if(t.start<=e&&null!==i&&e<=i)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,r=Object.keys(n);for(let i=r.length;i--;){const o=n[r[i]];if((null==o?void 0:o.body.type)===t&&o.buffered){const t=o.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r){this.timeRanges&&(this.timeRanges[e]=t);const i=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach((r=>{const o=this.fragments[r];if(!o)return;if(i>=o.body.sn)return;if(!o.buffered&&!o.loaded)return void(o.body.type===n&&this.removeFragment(o.body));const a=o.range[e];a&&a.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(o.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:r}=e;if(!t||"initSegment"===n.sn)return;const i=koe(n),o=this.fragments[i];if(!o||o.buffered&&n.gap)return;const a=!n.relurl;if(Object.keys(t).forEach((e=>{const i=n.elementaryStreams[e];if(!i)return;const s=t[e],l=a||!0===i.partial;o.range[e]=this.getBufferedTimes(n,r,l,s)})),o.loaded=null,Object.keys(o.range).length){o.buffered=!0;(o.body.endList=n.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),Toe(o)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(o.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=koe(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},o=e.start,a=e.end,s=e.minEndPTS||a,l=e.maxStartPTS||o;for(let c=0;c<r.length;c++){const e=r.start(c)-this.bufferPadding,t=r.end(c)+this.bufferPadding;if(l>=e&&s<=t){i.time.push({startPTS:Math.max(o,r.start(c)),endPTS:Math.min(a,r.end(c))});break}if(o<t&&a>e){const e=Math.max(o,r.start(c)),t=Math.min(a,r.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,o=0;const{bufferPadding:a,fragments:s}=this;return Object.keys(s).forEach((l=>{const c=s[l];c&&Toe(c)&&(n=c.body.start-a,r=c.body.end+a,e>=n&&e<=r&&(t=Math.min(e-n,r-e),o<=t&&(i=c.body,o=t)))})),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Toe(t))}getState(e){const t=koe(e),n=this.fragments[t];return n?n.buffered?Toe(n)?Aoe:_oe:Eoe:xoe}isTimeBuffered(e,t,n){let r,i;for(let o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:r}=t;if("initSegment"===n.sn||n.bitrateTest)return;const i=r?null:t,o=koe(n);this.fragments[o]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i}=t;if("initSegment"===n.sn)return;const o=n.type;if(r){let e=this.activePartLists[o];e||(this.activePartLists[o]=e=[]),e.push(r)}this.timeRanges=i,Object.keys(i).forEach((e=>{const t=i[e];this.detectEvictedFragments(e,t,o,r)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=koe(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach((o=>{const a=this.fragments[o];if(!a)return;const s=a.body;s.type!==n||r&&!s.gap||s.start<t&&s.end>e&&(a.buffered||i)&&this.removeFragment(s)}))}removeFragment(e){const t=koe(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Toe(e){var t,n,r;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(r=e.range.audiovideo)?void 0:r.partial))}function koe(e){return`${e.type}_${e.level}_${e.sn}`}const Coe={length:0,start:()=>0,end:()=>0};class Ioe{static isBuffered(e,t){try{if(e){const n=Ioe.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(WE){}return!1}static bufferInfo(e,t,n){try{if(e){const r=Ioe.getBuffered(e),i=[];let o;for(o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(WE){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let r=[];if(n)for(let l=0;l<e.length;l++){const t=r.length;if(t){const i=r[t-1].end;e[l].start-i<n?e[l].end>i&&(r[t-1].end=e[l].end):r.push(e[l])}else r.push(e[l])}else r=e;let i,o=0,a=t,s=t;for(let l=0;l<r.length;l++){const e=r[l].start,c=r[l].end;if(t+n>=e&&t<c)a=e,s=c,o=s-t;else if(t+n<e){i=e;break}}return{len:o,start:a||0,end:s||0,nextStart:i}}static getBuffered(e){try{return e.buffered}catch(ok){return nne.log("failed to get media.buffered",ok),Coe}}}class Roe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=o}}function Doe(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function Loe(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function Poe(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)Loe(n[r],e);t.fragmentHint&&Loe(t.fragmentHint,e),t.alignedSliding=!0}function Moe(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t){const n=e.fragments,r=t.fragments;if(!r.length||!n.length)return void nne.log("No fragments to align");const i=Doe(n,r[0].cc);if(i&&(!i||i.startPTS))return i;nne.log("No frag in previous level to align on")}(n,t);e&&qte(e.start)&&(nne.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),Poe(e.start,t))}}(e,n,t),!n.alignedSliding&&t&&Noe(n,t),n.alignedSliding||!t||n.skippedSegments||Bie(t,n))}function Noe(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,o;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=Doe(r,a),o=Doe(n,a)),i&&o||(i=r[Math.floor(r.length/2)],o=Doe(n,i.cc)||n[Math.floor(n.length/2)]);const s=i.programDateTime,l=o.programDateTime;if(!s||!l)return;Poe((l-s)/1e3-(o.start-i.start),e)}const Ooe=Math.pow(2,17);class joe{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Boe({type:Qte.NETWORK_ERROR,details:Xte.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,o=r.loader;return new Promise(((a,s)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void s(Uoe(e));e.gap=!1}const l=this.loader=e.loader=i?new i(r):new o(r),c=Foe(e),u=Kie(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Ooe};e.stats=l.stats,l.load(c,d,{onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let o=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(o.slice(0,16)),o=o.slice(16)),a({frag:e,part:null,payload:o,networkDetails:i})},onError:(t,r,i,o)=>{this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Vte({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:o}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:r,stats:t}))},onProgress:(n,r,i,o)=>{t&&t({frag:e,part:null,payload:i,networkDetails:o})}})}))}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,o=r.loader;return new Promise(((a,s)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void s(Uoe(e,t));const l=this.loader=e.loader=i?new i(r):new o(r),c=Foe(e,t),u=Kie(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Ooe};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,o,s)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:s};n(c),a(c)},onError:(n,r,i,o)=>{this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Vte({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:o}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),s(new Boe({type:Qte.NETWORK_ERROR,details:Xte.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/i),r),a=(r-o)*Math.round(n.loaded/o);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const o=n.loading,a=r.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Foe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,o=n.byteRangeEndOffset;if(qte(i)&&qte(o)){var a;let t=i,n=o;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=o-i;e%16&&(n=o+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}return r}function Uoe(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:Qte.MEDIA_ERROR,details:Xte.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new Boe(r)}class Boe extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class $oe{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class Voe{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Woe{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256);let p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let n=f^f<<1^f<<2^f<<3^f<<4;n=n>>>8^255&n^99,e[p]=n,t[n]=p;const s=h[p],m=h[s],g=h[m];let v=257*h[n]^16843008*n;r[p]=v<<24|v>>>8,i[p]=v<<16|v>>>16,o[p]=v<<8|v>>>24,a[p]=v,v=16843009*g^65537*m^257*s^16843008*p,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,p?(p=s^h[h[h[g^s]]],f^=h[h[f]]):p=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const o=this.ksRows=4*(i+6+1);let a,s;const l=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],f=h[1],m=h[2],g=h[3];let v,y;for(a=0;a<o;a++)a<i?v=l[a]=t[a]:(y=v,a%i===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[a/i|0]<<24):i>6&&a%i===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-i]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],c[s]=s<4||a<=4?y:p[u[y>>>24]]^f[u[y>>>16&255]]^m[u[y>>>8&255]]^g[u[255&y]],c[s]=c[s]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,s=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],p=d[1],f=d[2],m=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,b,w,x,E,A,_,S,T,k,C,I,R,D;const L=this.networkToHostOrderSwap;for(;t<g.length;){for(T=L(g[t]),k=L(g[t+1]),C=L(g[t+2]),I=L(g[t+3]),E=T^i[0],A=I^i[1],_=C^i[2],S=k^i[3],R=4,D=1;D<r;D++)y=s[E>>>24]^l[A>>16&255]^c[_>>8&255]^u[255&S]^i[R],b=s[A>>>24]^l[_>>16&255]^c[S>>8&255]^u[255&E]^i[R+1],w=s[_>>>24]^l[S>>16&255]^c[E>>8&255]^u[255&A]^i[R+2],x=s[S>>>24]^l[E>>16&255]^c[A>>8&255]^u[255&_]^i[R+3],E=y,A=b,_=w,S=x,R+=4;y=o[E>>>24]<<24^o[A>>16&255]<<16^o[_>>8&255]<<8^o[255&S]^i[R],b=o[A>>>24]<<24^o[_>>16&255]<<16^o[S>>8&255]<<8^o[255&E]^i[R+1],w=o[_>>>24]<<24^o[S>>16&255]<<16^o[E>>8&255]<<8^o[255&A]^i[R+2],x=o[S>>>24]<<24^o[E>>16&255]<<16^o[A>>8&255]<<8^o[255&_]^i[R+3],v[t]=L(y^h),v[t+1]=L(x^p),v[t+2]=L(w^f),v[t+3]=L(b^m),h=T,p=k,f=C,m=I,t+=4}return v.buffer}}class zoe{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(ok){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?One(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((r,i)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const o=this.flush();o?r(o.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:r,currentResult:i,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=bre(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;r&&(n=r);let s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new Woe),s.expandKey(t);const l=i;return this.currentResult=s.decrypt(a.buffer,0,n),this.currentIV=One(a,-16).buffer,l||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new Voe(this.subtle,t)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new $oe(this.subtle,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((r=>(nne.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=One(e,0,n),this.remainderData=One(e,n)),t}logOnce(e){this.logEnabled&&(nne.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Hoe=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t},qoe="STOPPED",Goe="IDLE",Koe="KEY_LOADING",Yoe="FRAG_LOADING",Qoe="FRAG_LOADING_WAITING_RETRY",Xoe="WAITING_TRACK",Zoe="PARSING",Joe="PARSED",eae="ENDED",tae="ERROR",nae="WAITING_INIT_PTS",rae="WAITING_LEVEL";class iae extends woe{constructor(e,t,n,r,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=qoe,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=r,this.log=nne.log.bind(nne,`${r}:`),this.warn=nne.warn.bind(nne,`${r}:`),this.hls=e,this.fragmentLoader=new joe(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new zoe(e.config),e.on(Yte.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=qoe}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return Ioe.isBuffered(this.media,e.start+e.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===qoe&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,o=n?n.currentTime:0,a=Ioe.bufferInfo(r||n,o,e.maxBufferHole);if(this.log(`media seeking to ${qte(o)?o.toFixed(3):o}, state: ${i}`),this.state===eae)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(!a.len||i<a.start||r>a.end){const e=o>i;(o<r||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=qoe,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===Yoe||!this.fragCurrent&&n===Zoe)&&(this.fragmentTracker.removeFragment(e),this.state=Goe):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(Yte.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==qoe&&this.state!==tae&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Eoe){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),o=this.backtrackFragment;(1===(o?e.sn-o.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Aoe&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(Yte.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:r}=t,i=e.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch((t=>{throw n.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((r=>{const i=self.performance.now();return n.trigger(Yte.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:o,tdecrypt:i}}),t.payload=r,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==qoe&&this.state!==tae&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=Goe,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,r,i,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===lie?"level":"track"} ${e.level} (frag:[${(null!=(n=e.startPTS)?n:NaN).toFixed(3)}-${(null!=(r=e.endPTS)?r:NaN).toFixed(3)}] > buffer:${a?Hoe(Ioe.getBuffered(a)):"(detached)"})`),"initSegment"!==e.sn){var s;if(e.type!==uie){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=Goe)}const t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=Goe,a&&(!this.loadedmetadata&&e.type==lie&&a.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(o=this.fragPrevious)?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,o=!i||0===i.length||i.some((e=>!e)),a=new Roe(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!o);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;var i;const o=null==t?void 0:t.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key?!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=Koe,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Yte.KEY_LOADED,e),this.state===Koe&&(this.state=Goe),e})),this.hls.trigger(Yte.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const i=o.partList;if(i&&r){n>e.end&&o.fragmentHint&&(e=o.fragmentHint);const s=this.getNextPart(i,e,n);if(s>-1){const l=i[s];let c;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${s}-${i.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=Yoe,c=a?a.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,r).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Yte.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),qte(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Yoe;const s=this.config.progressive;let l;return l=s&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,r))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,s?r:void 0),a]).then((e=>{let[t]=e;return!s&&t&&r&&r(t),t})).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Yte.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,r){return new Promise(((i,o)=>{var a;const s=[],l=null==(a=n.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then((r=>{s[t.index]=r;const o=r.part;this.hls.trigger(Yte.FRAG_LOADED,r);const a=Vie(n,e.sn,t.index+1)||Wie(l,e.sn,t.index+1);if(!a)return i({frag:e,part:o,partsLoaded:s});c(a)})).catch(o)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Xte.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Yte.ERROR,t)}else this.hls.trigger(Yte.ERROR,{type:Qte.OTHER_ERROR,details:Xte.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Zoe)return void(this.fragCurrent||this.state===qoe||this.state===tae||(this.state=Goe));const{frag:n,part:r,level:i}=t,o=self.performance.now();n.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(n,r,i,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:o}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of level ${r}. The current chunk will not be buffered.`),null;const a=t[r],s=o>-1?Vie(a,i,o):null,l=s?s.fragment:function(e,t,n){if(null==e||!e.details)return null;const r=e.details;let i=r.fragments[t-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}(a,i,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:s,level:a}):null}bufferFragmentData(e,t,n,r,i){var o;if(!e||this.state!==Zoe)return;const{data1:a,data2:s}=e;let l=a;if(a&&s&&(l=bre(a,s)),null==(o=l)||!o.length)return;const c={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:l};if(this.hls.trigger(Yte.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Ioe.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=Ioe.bufferInfo(t,n,0),i=e.duration,o=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-o,r.end-o),n+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return qte(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:r}}=this,i=Ioe.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const o=this.fragmentTracker.getBufferedFrag(t,n);if(o&&i.nextStart<o.end)return Ioe.bufferInfo(e,t,Math.max(i.nextStart,r))}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e){const t=this.fragmentTracker.getAppendedFrag(e,lie);return t&&"fragment"in t?t.fragment:t}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,o=n[0].start;let a;if(t.live){const s=i.initialLiveManifestSize;if(r<s)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${s})`),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<o)&&(a=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=n[0]);if(!a){const n=i.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===_oe||n===Aoe&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,o&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r);if(null!==t&&n.len+t.len>=i)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,o=!0;for(let a=0,s=e.length;a<s;a++){const s=e[a];if(o=o&&!s.independent,r>-1&&n<s.start)break;const l=s.loaded;l?r=-1:(i||s.independent||o)&&s.fragment===t&&(r=a),i=l}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!qte(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let r=0;r<e.length;++r){const i=e[r];if(Jie(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=t[i-e.startSN];n.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=function(e,t){return Qie(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=n;const{fragmentHint:s}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(r.lowLatencyMode&&null!=c&&c.length&&s);let d;if(u&&s&&!this.bitrateTest&&(o=o.concat(s),a=s.sn),e<t){d=Xie(i,o,e,e>t-l?0:l)}else d=o[o.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===_oe||t===Aoe&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn)){if(i&&d.level===i.level){const t=o[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==_oe?t:null}}}return d}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=n.currentTime,o=e.fragments[0].start,a=e.edge,s=i>=o-t.maxFragLookUpTolerance&&i<=a;if(null!==r&&n.duration>r&&(i<r||!s)){const o=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||i<a-o)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),n.currentTime=r))}}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,o=!t,a=e.alignedSliding&&qte(i);if(o||!a&&!i){const{fragPrevious:i}=this;Moe(i,n,e);const o=e.fragments[0].start;return this.log(`Live playlist sliding: ${o.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${i?i.sn:"na"} fragments: ${r}`),o}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const r=null!==this.startTimeOffset,i=r?this.startTimeOffset:e.startTimeOffset;null!==i&&qte(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${i} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Qoe)||(this.state=Goe)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var r;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(r=this.fragCurrent)?void 0:r.url}`);const i=t.details===Xte.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(n,!0);const o=t.errorAction,{action:a,retryCount:s=0,retryConfig:l}=o||{};if(o&&a===roe&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const r=Gie(l,s);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${s+1}/${l.maxNumRetry} in ${r}ms`),o.resolved=!0,this.retryDate=self.performance.now()+r,this.state=Qoe}else if(l&&o){if(this.resetFragmentErrors(e),!(s<l.maxNumRetry))return void nne.warn(`${t.details} reached or exceeded max retry (${s})`);i||a===noe||(o.resolved=!0)}else(null==o?void 0:o.action)===toe?this.state=rae:this.state=tae;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Zoe||this.state===Joe){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const o=!i;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===cie&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==qoe&&(this.state=Goe)}afterBufferFlushed(e,t,n){if(!e)return;const r=Ioe.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===eae&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Goe}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){var i;const o=n.details;if(!o)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,i)=>{const a=e.elementaryStreams[i];if(a){const s=a.endPTS-a.startPTS;if(s<=0)return this.warn(`Could not parse fragment ${e.sn} ${i} duration reliably (${s})`),t||!1;const l=r?0:Fie(o,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(Yte.LEVEL_PTS_UPDATED,{details:o,level:n,drift:l,type:i,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1)&&null===(null==(i=this.transmuxer)?void 0:i.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Joe,this.hls.trigger(Yte.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class oae{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function aae(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class sae{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=bre(this.cachedData,e),this.cachedData=null);let n,r=Une(e,0),i=r?r.length:0;const o=this._audioTrack,a=this._id3Track,s=r?Vne(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&qte(s))&&(this.basePTS=lae(s,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:bie,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(o,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else $ne(e,i)?(r=Une(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:bie,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=One(e,n);this.cachedData?this.cachedData=bre(this.cachedData,t):this.cachedData=t}}return{audioTrack:o,videoTrack:aae(),id3Track:a,textTrack:aae()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:aae(),id3Track:this._id3Track,textTrack:aae()}}destroy(){}}const lae=(e,t,n)=>{if(qte(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function cae(e,t){return 255===e[t]&&240===(246&e[t+1])}function uae(e,t){return 1&e[t+1]?7:9}function dae(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function hae(e,t){return t+1<e.length&&cae(e,t)}function pae(e,t){if(hae(e,t)){const n=uae(e,t);if(t+n>=e.length)return!1;const r=dae(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||hae(e,i)}return!1}function fae(e,t,n,r,i){if(!e.samplerate){const o=function(e,t,n,r){let i,o,a,s;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&t[n+2])>>>6);const d=(60&t[n+2])>>>2;if(!(d>u.length-1))return a=(1&t[n+2])<<2,a|=(192&t[n+3])>>>6,nne.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,s=new Array(4),o=d-3):(i=2,s=new Array(2),o=d):-1!==l.indexOf("android")?(i=2,s=new Array(2),o=d):(i=5,s=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&d>=6?o=d-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(d>=6&&1===a||/vivaldi/i.test(l))||!r&&1===a)&&(i=2,s=new Array(2)),o=d)),s[0]=i<<3,s[0]|=(14&d)>>1,s[1]|=(1&d)<<7,s[1]|=a<<3,5===i&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c};{const t=new Error(`invalid ADTS sampling index:${d}`);e.emit(Yte.ERROR,Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}(t,n,r,i);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,nne.log(`parsed codec:${e.codec}, rate:${o.samplerate}, channels:${o.channelCount}`)}}function mae(e){return 9216e4/e}function gae(e,t,n,r,i){const o=r+i*mae(e.samplerate),a=function(e,t){const n=uae(e,t);if(t+n<=e.length){const r=dae(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let s;if(a){const{frameLength:r,headerLength:i}=a,l=i+r,c=Math.max(0,n+l-t.length);c?(s=new Uint8Array(l-i),s.set(t.subarray(n+i,t.length),0)):s=t.subarray(n+i,n+l);const u={unit:s,pts:o};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;s=new Uint8Array(l),s.set(t.subarray(n,t.length),0);return{sample:{unit:s,pts:o},length:l,missing:-1}}let vae=null;const yae=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],bae=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],wae=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],xae=[0,1,1,4];function Eae(e,t,n,r,i){if(n+24>t.length)return;const o=Aae(t,n);if(o&&n+o.frameLength<=t.length){const a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{sample:s,length:o.frameLength,missing:0}}}function Aae(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==o){const a=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*yae[14*(3===n?3-r:3===r?3:4)+i-1],c=bae[3*(3===n?0:2===n?1:2)+o],u=3===s?1:2,d=wae[n][r],h=xae[r],p=8*d*h,f=Math.floor(d*l/c+a)*h;if(null===vae){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);vae=e?parseInt(e[1]):0}return!!vae&&vae<=87&&2===r&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:f,samplesPerFrame:p}}}function _ae(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function Sae(e,t){return t+1<e.length&&_ae(e,t)}function Tae(e,t){if(t+1<e.length&&_ae(e,t)){const n=4,r=Aae(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const o=t+i;return o===e.length||Sae(e,o)}return!1}const kae=/\/emsg[-/]ID3/i;const Cae=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),o=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=e[t];const s=Math.min(r,8),l=8-s;o[0]=4278190080>>>24+l<<l,i[0]=(a[0]&o[0])>>l,n=n?n<<s|i[0]:i[0],t+=1,r-=s}return n};class Iae extends sae{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=Rae(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=Une(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==Vne(t)&&Cae(e,n)<16}}function Rae(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const o=t[n+4]>>6;if(o>=3)return-1;const a=[48e3,44100,32e3][o],s=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+o];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,p=t[n+5]>>3,f=7&t[n+5],m=new Uint8Array([o<<6|p<<1|f>>2,(3&f)<<6|c<<3|d<<2|s>>4,s<<4&224]),g=r+i*(1536/a*9e4),v=t.subarray(n,n+l);return e.config=m,e.channelCount=h,e.samplerate=a,e.samples.push({unit:v,pts:g}),l}class Dae{constructor(){this.VideoSample=null}createVideoSample(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&nne.log(e.pts+"/"+e.dts+":"+e.debug)}}class Lae{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&nne.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,r=8;for(let i=0;i<e;i++)0!==r&&(t=this.readEG(),r=(n+t+256)%256),n=0===r?n:r}readSPS(){let e,t,n,r=0,i=0,o=0,a=0;const s=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);s();const m=s();if(l(5),d(3),s(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=c();if(3===e&&d(1),p(),p(),d(1),u())for(t=3!==e?8:12,n=0;n<t;n++)u()&&f(n<6?16:64)}p();const g=c();if(0===g)c();else if(1===g)for(d(1),h(),h(),e=c(),n=0;n<e;n++)h();p(),d(1);const v=c(),y=c(),b=l(1);0===b&&d(1),d(1),u()&&(r=c(),i=c(),o=c(),a=c());let w=[1,1];if(u()&&u()){switch(s()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[s()<<8|s(),s()<<8|s()]}}return{width:Math.ceil(16*(v+1)-2*r-2*i),height:(2-b)*(y+1)*16-(b?2:4)*(o+a),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Pae extends Dae{parseAVCPES(e,t,n,r,i){const o=this.parseAVCNALu(e,n.data);let a,s=this.VideoSample,l=!1;n.data=null,s&&o.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),o.forEach((r=>{var o;switch(r.type){case 1:{let t=!1;a=!0;const i=r.data;if(l&&i.length>4){const e=new Lae(i).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=s)&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null);s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.frame=!0,s.key=t;break}case 5:a=!0,null!=(o=s)&&o.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.key=!0,s.frame=!0;break;case 6:a=!0,Ere(r.data,1,n.pts,t.samples);break;case 7:{var u,d;a=!0,l=!0;const t=r.data,n=new Lae(t).readSPS();if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=i;const r=t.subarray(1,4);let o="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),o+=t}e.codec=o}break}case 8:a=!0,e.pps=[r.data];break;case 9:a=!0,e.audFound=!0,s&&this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:a=!0;break;default:a=!1,s&&(s.debug+="unknown NAL "+r.type+" ")}if(s&&a){s.units.push(r)}})),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let r=e.naluState||0;const i=r,o=[];let a,s,l,c=0,u=-1,d=0;for(-1===r&&(u=0,d=31&t[0],r=0,c=1);c<n;)if(a=t[c++],r)if(1!==r)if(a)if(1===a){if(s=c-r-1,u>=0){const e={data:t.subarray(u,s),type:d};o.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(i&&c<=4-i&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-i)),s>0&&(n.data=bre(n.data,t.subarray(0,s)),n.state=0))}c<n?(l=31&t[c],u=c,d=l,r=0):r=-1}else r=0;else r=3;else r=a?0:2;else r=a?0:1;if(u>=0&&r>=0){const e={data:t.subarray(u,n),type:d,state:r};o.push(e)}if(0===o.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=bre(n.data,t))}return e.naluState=r,o}}class Mae{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new zoe(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then((i=>{const o=new Uint8Array(i);r.set(o,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const o=Are(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then((a=>{i.data=this.getAvcDecryptedUnit(o,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}))}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const o=i[n];if(!(o.data.length<=48||1!==o.type&&5!==o.type)&&(this.decryptAvcSample(e,t,n,r,o),!this.decrypter.isSync()))return}}}}const Nae=188;class Oae{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new Pae}static probe(e){const t=Oae.syncOffset(e);return t>0&&nne.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,t-Nae)+1,r=0;for(;r<n;){let i=!1,o=-1,a=0;for(let s=r;s<t;s+=Nae){if(71!==e[s]||t-s!==Nae&&71!==e[s+Nae]){if(a)return-1;break}if(a++,-1===o&&(o=s,0!==o&&(n=Math.min(o+18612,e.length-Nae)+1)),i||(i=0===jae(e,s)),i&&a>1&&(0===o&&a>2||s+Nae>n))return o}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:rre[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Oae.createTrack("video"),this._audioTrack=Oae.createTrack("audio",r),this._id3Track=Oae.createTrack("id3"),this._txtTrack=Oae.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(this.sampleAes=null);const o=this._videoTrack,a=this._audioTrack,s=this._id3Track,l=this._txtTrack;let c=o.pid,u=o.pesData,d=a.pid,h=s.pid,p=a.pesData,f=s.pesData,m=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=bre(this.remainderData,e)).length,this.remainderData=null),y<Nae&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:s,textTrack:l};const b=Math.max(0,Oae.syncOffset(e));y-=(y-b)%Nae,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let w=0;for(let E=b;E<y;E+=Nae)if(71===e[E]){const t=!!(64&e[E+1]),i=jae(e,E);let y;if((48&e[E+3])>>4>1){if(y=E+5+e[E+4],y===E+Nae)continue}else y=E+4;switch(i){case c:t&&(u&&(n=Vae(u))&&this.videoParser.parseAVCPES(o,l,n,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(y,E+Nae)),u.size+=E+Nae-y);break;case d:if(t){if(p&&(n=Vae(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,n);break;case"mp3":this.parseMPEGPES(a,n);break;case"ac3":this.parseAC3PES(a,n)}p={data:[],size:0}}p&&(p.data.push(e.subarray(y,E+Nae)),p.size+=E+Nae-y);break;case h:t&&(f&&(n=Vae(f))&&this.parseID3PES(s,n),f={data:[],size:0}),f&&(f.data.push(e.subarray(y,E+Nae)),f.size+=E+Nae-y);break;case 0:t&&(y+=e[y]+1),v=this._pmtId=Fae(e,y);break;case v:{t&&(y+=e[y]+1);const n=Uae(e,y,this.typeSupported,r,this.observer);c=n.videoPid,c>0&&(o.pid=c,o.segmentCodec=n.segmentVideoCodec),d=n.audioPid,d>0&&(a.pid=d,a.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(s.pid=h),null===m||g||(nne.warn(`MPEG-TS PMT found at ${E} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,E=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=i}}else w++;w>0&&Bae(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),o.pesData=u,a.pesData=p,s.pesData=f;const x={audioTrack:a,videoTrack:o,id3Track:s,textTrack:l};return i&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,o=n.pesData,a=t.pesData,s=r.pesData;let l;if(o&&(l=Vae(o))?(this.videoParser.parseAVCPES(n,i,l,!0,this._duration),n.pesData=null):n.pesData=o,a&&(l=Vae(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&nne.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;s&&(l=Vae(s))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=s}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new Mae(this.observer,this.config,t);return this.decrypt(r,i)}decrypt(e,t){return new Promise((n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,(()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)})):n(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,o,a,s=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)s=bre(r.sample.unit,s);else{const o=i-t;r.sample.unit.set(s.subarray(0,t),o),e.samples.push(r.sample),n=r.missing}}for(i=n,o=s.length;i<o-1&&!hae(s,i);i++);if(i!==n){let e;const t=i<o-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",Bae(this.observer,new Error(e),t),!t)return}if(fae(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!r)return void nne.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=mae(e.samplerate);a=r.sample.pts+t}}let l,c=0;for(;i<o;){if(l=gae(e,s,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<o-1&&!hae(s,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,o=0;const a=t.pts;if(void 0!==a)for(;o<r;)if(Sae(n,o)){const t=Eae(e,n,o,a,i);if(!t)break;o+=t.length,i++}else o++;else nne.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void nne.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let o,a=0,s=0;for(;s<i&&(o=Rae(e,n,s,r,a++))>0;)s+=o}}parseID3PES(e,t){if(void 0===t.pts)return void nne.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=Hte({},t,{type:this._videoTrack?xie:bie,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function jae(e,t){return((31&e[t+1])<<8)+e[t+2]}function Fae(e,t){return(31&e[t+10])<<8|e[t+11]}function Uae(e,t,n,r,i){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){const a=jae(e,t),s=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){$ae("ADTS AAC");break}case 15:-1===o.audioPid&&(o.audioPid=a);break;case 21:-1===o.id3Pid&&(o.id3Pid=a);break;case 219:if(!r){$ae("H.264");break}case 27:-1===o.videoPid&&(o.videoPid=a,o.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="mp3"):nne.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){$ae("AC-3");break}case 129:n.ac3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="ac3"):nne.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&s>0){let r=t+5,i=s;for(;i>2;){if(106===e[r])!0!==n.ac3?nne.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=a,o.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return Bae(i,new Error("Unsupported EC-3 in M2TS found")),o;case 36:return Bae(i,new Error("Unsupported HEVC in M2TS found")),o}t+=s+5}return o}function Bae(e,t,n){nne.warn(`parsing error: ${t.message}`),e.emit(Yte.ERROR,Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function $ae(e){nne.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function Vae(e){let t,n,r,i,o,a=0;const s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;)s[0]=bre(s[0],s[1]),s.splice(1,1);t=s[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,i-o>54e5&&(nne.warn(`${Math.round((i-o)/9e4)}s delta between PTS and DTS, align them`),i=o)):o=i),r=t[8];let c=r+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,n=s.length;e<n;e++){t=s[e];let n=t.byteLength;if(c){if(c>n){c-=n;continue}t=t.subarray(c),n-=c,c=0}u.set(t,a),a+=n}return n&&(n-=r+3),{data:u,pts:i,dts:o,len:n}}return null}class Wae{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const zae=Math.pow(2,32)-1;class Hae{static init(){let e;for(e in Hae.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Hae.types)Hae.types.hasOwnProperty(e)&&(Hae.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Hae.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Hae.STTS=Hae.STSC=Hae.STCO=i,Hae.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Hae.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Hae.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Hae.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);Hae.FTYP=Hae.box(Hae.types.ftyp,o,s,o,a),Hae.DINF=Hae.box(Hae.types.dinf,Hae.box(Hae.types.dref,r))}static box(e){let t=8;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];let o=r.length;const a=o;for(;o--;)t+=r[o].byteLength;const s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),o=0,t=8;o<a;o++)s.set(r[o],t),t+=r[o].byteLength;return s}static hdlr(e){return Hae.box(Hae.types.hdlr,Hae.HDLR_TYPES[e])}static mdat(e){return Hae.box(Hae.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(zae+1)),r=Math.floor(t%(zae+1));return Hae.box(Hae.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Hae.box(Hae.types.mdia,Hae.mdhd(e.timescale,e.duration),Hae.hdlr(e.type),Hae.minf(e))}static mfhd(e){return Hae.box(Hae.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Hae.box(Hae.types.minf,Hae.box(Hae.types.smhd,Hae.SMHD),Hae.DINF,Hae.stbl(e)):Hae.box(Hae.types.minf,Hae.box(Hae.types.vmhd,Hae.VMHD),Hae.DINF,Hae.stbl(e))}static moof(e,t,n){return Hae.box(Hae.types.moof,Hae.mfhd(e),Hae.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Hae.trak(e[t]);return Hae.box.apply(null,[Hae.types.moov,Hae.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(Hae.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Hae.trex(e[t]);return Hae.box.apply(null,[Hae.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(zae+1)),r=Math.floor(t%(zae+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Hae.box(Hae.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Hae.box(Hae.types.sdtp,n)}static stbl(e){return Hae.box(Hae.types.stbl,Hae.stsd(e),Hae.box(Hae.types.stts,Hae.STTS),Hae.box(Hae.types.stsc,Hae.STSC),Hae.box(Hae.types.stsz,Hae.STSZ),Hae.box(Hae.types.stco,Hae.STCO))}static avc1(e){let t,n,r,i=[],o=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(n));const a=Hae.box(Hae.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(o))),s=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Hae.box(Hae.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Hae.box(Hae.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Hae.box(Hae.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Hae.box(Hae.types.mp4a,Hae.audioStsd(e),Hae.box(Hae.types.esds,Hae.esds(e)))}static mp3(e){return Hae.box(Hae.types[".mp3"],Hae.audioStsd(e))}static ac3(e){return Hae.box(Hae.types["ac-3"],Hae.audioStsd(e),Hae.box(Hae.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?Hae.box(Hae.types.stsd,Hae.STSD,Hae.mp3(e)):"ac3"===e.segmentCodec?Hae.box(Hae.types.stsd,Hae.STSD,Hae.ac3(e)):Hae.box(Hae.types.stsd,Hae.STSD,Hae.mp4a(e)):Hae.box(Hae.types.stsd,Hae.STSD,Hae.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,o=Math.floor(n/(zae+1)),a=Math.floor(n%(zae+1));return Hae.box(Hae.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=Hae.sdtp(e),r=e.id,i=Math.floor(t/(zae+1)),o=Math.floor(t%(zae+1));return Hae.box(Hae.types.traf,Hae.box(Hae.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Hae.box(Hae.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),Hae.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Hae.box(Hae.types.trak,Hae.tkhd(e),Hae.mdia(e))}static trex(e){const t=e.id;return Hae.box(Hae.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,o=new Uint8Array(i);let a,s,l,c,u,d;for(t+=8+i,o.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<r;a++)s=n[a],l=s.duration,c=s.size,u=s.flags,d=s.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return Hae.box(Hae.types.trun,o)}static initSegment(e){Hae.types||Hae.init();const t=Hae.moov(e);return bre(Hae.FTYP,t)}}Hae.types=void 0,Hae.HDLR_TYPES=void 0,Hae.STTS=void 0,Hae.STSC=void 0,Hae.STCO=void 0,Hae.STSZ=void 0,Hae.VMHD=void 0,Hae.SMHD=void 0,Hae.STSD=void 0,Hae.FTYP=void 0,Hae.DINF=void 0;function qae(e,t){const n=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(n):n}function Gae(e){return qae(e,1e3,1/9e4,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}let Kae,Yae=null,Qae=null;class Xae{constructor(e,t,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Yae){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Yae=e?parseInt(e[1]):0}if(null===Qae){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Qae=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){nne.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){nne.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){nne.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce(((e,r)=>{let i=r.pts,o=i-e;return o<-4294967296&&(t=!0,i=Zae(i,n),o=i-e),o>0?e:i}),n);return t&&nne.debug("PTS rollover detected"),r}remux(e,t,n,r,i,o,a,s){let l,c,u,d,h,p,f=i,m=i;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,w=a&&y>0||y>1;if((!g||b)&&(!v||w)||this.ISGenerated||a){if(this.ISGenerated){var x,E,A,_;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(x=t.pixelRatio)?void 0:x[0])===(null==(E=e.pixelRatio)?void 0:E[0])&&(null==(A=t.pixelRatio)?void 0:A[1])===(null==(_=e.pixelRatio)?void 0:_[1])||this.resetInitSegment()}else u=this.generateIS(e,t,i,o);const n=this.isVideoContiguous;let r,a=-1;if(w&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){nne.warn(`[mp4-remuxer]: Dropped ${a} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else-1===a&&(nne.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(b&&w){const n=this.getVideoStartPts(t.samples),r=(Zae(e.samples[0].pts,n)-n)/t.inputTimeScale;f+=Math.max(0,r),m+=Math.max(0,-r)}if(b){if(e.samplerate||(nne.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,o)),c=this.remuxAudio(e,f,this.isAudioContiguous,o,v||w||s===cie?m:void 0),w){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(nne.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,o)),l=this.remuxVideo(t,m,n,r)}}else w&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Jae(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=ese(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:p,text:d,id3:h}}generateIS(e,t,n,r){const i=e.samples,o=t.samples,a=this.typeSupported,s={},l=this._initPTS;let c,u,d,h=!l||r,p="audio/mp4";if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(p="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}s.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Hae.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=i[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,s.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Hae.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(o),t=Math.round(d*n);u=Math.min(u,Zae(o[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(s).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:s,initPTS:c,timescale:d}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,o=e.samples,a=[],s=o.length,l=this._initPTS;let c,u,d=this.nextAvcDts,h=8,p=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===d){const e=t*i,r=o[0].pts-Zae(o[0].dts,o[0].pts);Yae&&null!==d&&Math.abs(e-r-d)<15e3?n=!0:d=e-r}const v=l.baseTime*i/l.timescale;for(let P=0;P<s;P++){const e=o[P];e.pts=Zae(e.pts-v,d),e.dts=Zae(e.dts-v,d),e.dts<o[P>0?P-1:P].dts&&(g=!0)}g&&o.sort((function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),c=o[0].dts,u=o[o.length-1].dts;const y=u-c,b=y?Math.round(y/(s-1)):p||e.inputTimeScale/30;if(n){const e=c-d,n=e>b,r=e<-1;if((n||r)&&(n?nne.warn(`AVC: ${Gae(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):nne.warn(`AVC: ${Gae(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!r||d>=o[0].pts||Yae)){c=d;const t=o[0].pts-e;if(n)o[0].dts=c,o[0].pts=t;else for(let n=0;n<o.length&&!(o[n].dts>t);n++)o[n].dts-=e,o[n].pts-=e;nne.log(`Video: Initial PTS/DTS adjusted: ${Gae(t,!0)}/${Gae(c,!0)}, delta: ${Gae(e,!0)} ms`)}}c=Math.max(0,c);let w=0,x=0,E=c;for(let P=0;P<s;P++){const e=o[P],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;x+=r,w+=n,e.length=r,e.dts<E?(e.dts=E,E+=b/4|0||1):E=e.dts,f=Math.min(e.pts,f),m=Math.max(e.pts,m)}u=o[s-1].dts;const A=x+4*w+8;let _;try{_=new Uint8Array(A)}catch(L){return void this.observer.emit(Yte.ERROR,Yte.ERROR,{type:Qte.MUX_ERROR,details:Xte.REMUX_ALLOC_ERROR,fatal:!1,error:L,bytes:A,reason:`fail allocating video mdat ${A}`})}const S=new DataView(_.buffer);S.setUint32(0,A),_.set(Hae.types.mdat,4);let T=!1,k=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let P=0;P<s;P++){const e=o[P],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;S.setUint32(h,i),h+=4,_.set(n,h),h+=i,l+=4+i}if(P<s-1)p=o[P+1].dts-e.dts,n=o[P+1].pts-e.pts;else{const t=this.config,a=P>0?e.dts-o[P-1].dts:b;if(n=P>0?e.pts-o[P-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const n=Math.floor(t.maxBufferHole*i),o=(r?f+r*i:this.nextAudioPts)-e.pts;o>n?(p=o-a,p<0?p=a:T=!0,nne.log(`[mp4-remuxer]: It is approximately ${o/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=a}else p=a}const c=Math.round(e.pts-e.dts);k=Math.min(k,p),I=Math.max(I,p),C=Math.min(C,n),R=Math.max(R,n),a.push(new tse(e.key,p,l,c))}if(a.length)if(Yae){if(Yae<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Qae&&R-C<I-k&&b/I<.025&&0===a[0].cts){nne.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=a.length;t<n;t++){const r=e+a[t].duration,i=e+a[t].cts;if(t<n-1){const e=r+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:b;a[t].cts=0,e=r}}p=T||!p?b:p,this.nextAvcDts=d=u+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const D={data1:Hae.moof(e.sequenceNumber++,c,Hte({},e,{samples:a})),data2:_,startPTS:f/i,endPTS:(m+p)/i,startDTS:c/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),s=this.getSamplesPerFrame(e),l=s*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let p=e.samples,f=u?0:8,m=this.nextAudioPts||-1;const g=t*o,v=c.baseTime*o/c.timescale;if(this.isAudioContiguous=n=n||p.length&&m>0&&(r&&Math.abs(g-m)<9e3||Math.abs(Zae(p[0].pts-v,g)-m)<20*l),p.forEach((function(e){e.pts=Zae(e.pts-v,g)})),!n||m<0){if(p=p.filter((e=>e.pts>=0)),!p.length)return;m=0===i?0:r&&!h?Math.max(0,g):p[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=m;n<p.length;n++){const i=p[n],a=i.pts,s=a-r,c=Math.abs(1e3*s/o);if(s<=-t*l&&h)0===n&&(nne.warn(`Audio frame @ ${(a/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*s/o)} ms.`),this.nextAudioPts=m=r=a);else if(s>=t*l&&c<1e4&&h){let t=Math.round(s/l);r=a-t*l,r<0&&(t--,r+=l),0===n&&(this.nextAudioPts=m=r),nne.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(r/o).toFixed(3)}s due to ${Math.round(1e3*s/o)} ms gap.`);for(let o=0;o<t;o++){const t=Math.max(r,0);let o=Wae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);o||(nne.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),o=i.unit.subarray()),p.splice(n,0,{unit:o,pts:t}),r+=l,n++}}i.pts=r,r+=l}}let y,b=null,w=null,x=0,E=p.length;for(;E--;)x+=p[E].unit.byteLength;for(let R=0,D=p.length;R<D;R++){const t=p[R],r=t.unit;let i=t.pts;if(null!==w){d[R-1].duration=Math.round((i-w)/a)}else{if(n&&"aac"===e.segmentCodec&&(i=m),b=i,!(x>0))return;x+=f;try{y=new Uint8Array(x)}catch(I){return void this.observer.emit(Yte.ERROR,Yte.ERROR,{type:Qte.MUX_ERROR,details:Xte.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:x,reason:`fail allocating audio mdat ${x}`})}if(!u){new DataView(y.buffer).setUint32(0,x),y.set(Hae.types.mdat,4)}}y.set(r,f);const o=r.byteLength;f+=o,d.push(new tse(!0,s,o,0)),w=i}const A=d.length;if(!A)return;const _=d[d.length-1];this.nextAudioPts=m=w+a*_.duration;const S=u?new Uint8Array(0):Hae.moof(e.sequenceNumber++,b/a,Hte({},e,{samples:d}));e.samples=[];const T=b/o,k=m/o,C={data1:S,data2:y,startPTS:T,endPTS:k,startDTS:T,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,C}remuxEmptyAudio(e,t,n,r){const i=e.inputTimeScale,o=i/(e.samplerate?e.samplerate:i),a=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,c=(null!==a?a:r.startDTS*i)+l,u=r.endDTS*i+l,d=1024*o,h=Math.ceil((u-c)/d),p=Wae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(nne.warn("[mp4-remuxer]: remux empty Audio"),!p)return void nne.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const f=[];for(let m=0;m<h;m++){const e=c+m*d;f.push({unit:p,pts:e,dts:e})}return e.samples=f,this.remuxAudio(e,t,n,!1)}}function Zae(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function Jae(e,t,n,r){const i=e.samples.length;if(!i)return;const o=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=Zae(i.pts-n.baseTime*o/n.timescale,t*o)/o,i.dts=Zae(i.dts-r.baseTime*o/r.timescale,t*o)/o}const a=e.samples;return e.samples=[],{samples:a}}function ese(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=Zae(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort(((e,t)=>e.pts-t.pts));const o=e.samples;return e.samples=[],{samples:o}}class tse{constructor(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}function nse(e,t){const n=null==e?void 0:e.codec;if(n&&n.length>4)return n;if(t===cne){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n){return Wre(n,!1)}const e="mp4a.40.5";return nne.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${e}"`),e}return nne.warn(`Unhandled video codec "${n}"`),"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1.42e01e"}try{Kae=self.performance.now.bind(self.performance)}catch(O_e){nne.debug("Unable to use Performance API on this environment"),Kae=null==bne?void 0:bne.Date.now}const rse=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=aae("video",1),o=this.audioTrack=aae("audio",1),a=this.txtTrack=aae("text",1);if(this.id3Track=aae("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const s=hre(e);if(s.video){const{id:e,timescale:t,codec:n}=s.video;i.id=e,i.timescale=a.timescale=t,i.codec=n}if(s.audio){const{id:e,timescale:t,codec:n}=s.audio;o.id=e,o.timescale=t,o.codec=n}a.id=rre.text,i.sampleDuration=0,i.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=are(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=bre(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=ure(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=One(e,0,r.byteOffset-8),t.remainder=One(e,r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const o=this.extractID3Track(r,t);return i.samples=wre(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=wre(e,t),{videoTrack:t,audioTrack:aae(),id3Track:r,textTrack:aae()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=ure(e.samples,["emsg"]);r&&r.forEach((e=>{const r=function(e){const t=e[0];let n="",r="",i=0,o=0,a=0,s=0,l=0,c=0;if(0===t){for(;"\0"!==ire(e.subarray(c,c+1));)n+=ire(e.subarray(c,c+1)),c+=1;for(n+=ire(e.subarray(c,c+1)),c+=1;"\0"!==ire(e.subarray(c,c+1));)r+=ire(e.subarray(c,c+1)),c+=1;r+=ire(e.subarray(c,c+1)),c+=1,i=are(e,12),o=are(e,16),s=are(e,20),l=are(e,24),c=28}else if(1===t){c+=4,i=are(e,c),c+=4;const t=are(e,c);c+=4;const o=are(e,c);for(c+=4,a=2**32*t+o,Gte(a)||(a=Number.MAX_SAFE_INTEGER,nne.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=are(e,c),c+=4,l=are(e,c),c+=4;"\0"!==ire(e.subarray(c,c+1));)n+=ire(e.subarray(c,c+1)),c+=1;for(n+=ire(e.subarray(c,c+1)),c+=1;"\0"!==ire(e.subarray(c,c+1));)r+=ire(e.subarray(c,c+1)),c+=1;r+=ire(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:o,eventDuration:s,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(kae.test(r.schemeIdUri)){const e=qte(r.presentationTime)?r.presentationTime/r.timeScale:t+r.presentationTimeDelta/r.timeScale;let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const o=r.payload;n.samples.push({data:o,len:o.byteLength,dts:e,pts:e,type:xie,duration:i})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&ure(e,["moov","trak"]).forEach((e=>{const t=ure(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=ure(t,["enca"]);const i=r.length>0;i||(r=ure(t,["encv"])),r.forEach((e=>{ure(i?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=vre(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(nne.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${ere(e)} -> ${ere(n)}`),t.set(n,8))}}))}))}));return e}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=hre(e);r.audio&&(t=nse(r.audio,cne)),r.video&&(n=nse(r.video,une));const i={};r.audio&&r.video?i.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?i.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:nne.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,n,r,i,o){var a,s;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};qte(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(null==d||!d.length)return u;const h={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(d),p=this.initData),null==(s=p)||!s.length)return nne.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const f=function(e,t){let n=0,r=0,i=0;const o=ure(e,["moof","traf"]);for(let a=0;a<o.length;a++){const e=o[a],s=ure(e,["tfhd"])[0],l=t[are(s,4)];if(!l)continue;const c=l.default,u=are(s,0)|(null==c?void 0:c.flags);let d=null==c?void 0:c.duration;8&u&&(d=are(s,2&u?12:8));const h=l.timescale||9e4,p=ure(e,["trun"]);for(let t=0;t<p.length;t++)n=yre(p[t]),!n&&d&&(n=d*are(p[t],4)),l.type===une?r+=n/h:l.type===cne&&(i+=n/h)}if(0===r&&0===i){let t=1/0,n=0,r=0;const i=ure(e,["sidx"]);for(let e=0;e<i.length;e++){const o=dre(i[e]);if(null!=o&&o.references){t=Math.min(t,o.earliestPresentationTime/o.timescale);const e=o.references.reduce(((e,t)=>e+t.info.duration||0),0);n=Math.max(n,e+o.earliestPresentationTime/o.timescale),r=n-t}}if(r&&qte(r))return r}return r||i}(d,p),m=function(e,t){return ure(t,["moof","traf"]).reduce(((t,n)=>{const r=ure(n,["tfdt"])[0],i=r[0],o=ure(n,["tfhd"]).reduce(((t,n)=>{const o=are(n,4),a=e[o];if(a){let e=are(r,4);if(1===i){if(e===tre)return nne.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=tre+1,e+=are(r,8)}const n=e/(a.timescale||9e4);if(qte(n)&&(null===t||n<t))return n}return t}),null);return null!==o&&qte(o)&&(null===t||o<t)?o:t}),null)}(p,d),g=null===m?i:m;(function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),o=t-e.baseTime/e.timescale;return Math.abs(o-n)>i}(l,g,i,f)||h.timescale!==l.timescale&&o)&&(h.initPTS=g-i,l&&1===l.timescale&&nne.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:c,y=v+f;!function(e,t,n){ure(t,["moof","traf"]).forEach((t=>{ure(t,["tfhd"]).forEach((r=>{const i=are(r,4),o=e[i];if(!o)return;const a=o.timescale||9e4;ure(t,["tfdt"]).forEach((e=>{const t=e[0],r=n*a;if(r){let n=are(e,4);if(0===t)n-=r,n=Math.max(n,0),cre(e,4,n);else{n*=Math.pow(2,32),n+=are(e,8),n-=r,n=Math.max(n,0);const t=Math.floor(n/(tre+1)),i=Math.floor(n%(tre+1));cre(e,4,t),cre(e,8,i)}}}))}))}))}(p,d,l.baseTime/l.timescale),f>0?this.lastEndTime=y:(nne.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,w=!!p.video;let x="";b&&(x+="audio"),w&&(x+="video");const E={data1:d,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:x,hasAudio:b,hasVideo:w,nb:1,dropped:0};return u.audio="audio"===E.type?E:void 0,u.video="audio"!==E.type?E:void 0,u.initSegment=h,u.id3=Jae(n,i,l,l),r.samples.length&&(u.text=ese(r,i,l)),u}}},{demux:Oae,remux:Xae},{demux:class extends sae{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Une(e,0);let n=(null==t?void 0:t.length)||0;if(Tae(e,n))return!1;for(let r=e.length;n<r;n++)if(pae(e,n))return nne.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&cae(e,t)&&dae(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){fae(e,this.observer,t,n,e.manifestCodec);const r=gae(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:Xae},{demux:class extends sae{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Une(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==Vne(t)&&Cae(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(Tae(e,n))return nne.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return _ae(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return Eae(e,t,n,this.basePTS,this.frameIndex)}},remux:Xae}];rse.splice(2,0,{demux:Iae,remux:Xae});class ise{constructor(e,t,n,r,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=Kae();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:s}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:p}=r||a,{audioCodec:f,videoCodec:m,defaultInitPts:g,duration:v,initSegmentData:y}=s,b=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(o,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(o,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(o,b.key.buffer,b.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return i.executeEnd=Kae(),ose(n);o=new Uint8Array(t)}}const w=this.needsProbing(c,u);if(w){const e=this.configureTransmuxer(o);if(e)return nne.warn(`[transmuxer] ${e.message}`),this.observer.emit(Yte.ERROR,Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Kae(),ose(n)}(c||u||p||w)&&this.resetInitSegment(y,f,m,v,t),(c||p||w)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const x=this.transmux(o,b,h,d,n),E=this.currentTransmuxState;return E.contiguous=!0,E.discontinuity=!1,E.trackSwitch=!1,i.executeEnd=Kae(),x}flush(e){const t=e.transmuxing;t.executeStart=Kae();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return i.then((()=>this.flush(e)));const o=[],{timeOffset:a}=r;if(n){const t=n.flush();t&&o.push(this.push(t,null,e))}const{demuxer:s,remuxer:l}=this;if(!s||!l)return t.executeEnd=Kae(),[ose(e)];const c=s.flush(a);return ase(c)?c.then((t=>(this.flushRemux(o,t,e),o))):(this.flushRemux(o,c,e),o)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:o,textTrack:a}=t,{accurateTimeOffset:s,timeOffset:l}=this.currentTransmuxState;nne.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const c=this.remuxer.remux(r,i,o,a,l,s,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=Kae()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:o,remuxer:a}=this;o&&a&&(o.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let o;return o=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),o}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:s}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,s,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r,vendor:i}=this;let o;for(let d=0,h=rse.length;d<h;d++){var a;if(null!=(a=rse[d].demux)&&a.probe(e)){o=rse[d];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,l=this.remuxer,c=o.remux,u=o.demux;l&&l instanceof c||(this.remuxer=new c(n,t,r,i)),s&&s instanceof u||(this.demuxer=new u(n,t,r),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new zoe(this.config)),e}}const ose=e=>({remuxResult:{},chunkMeta:e});function ase(e){return"then"in e&&e.then instanceof Function}class sse{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class lse{constructor(e,t,n,r,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=o}}var cse={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(cse);var use=jte(cse.exports);class dse{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const o=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===Yte.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new use,this.observer.on(Yte.FRAG_DECRYPTED,o),this.observer.on(Yte.ERROR,o);const a=Mre(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},s={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!==typeof Worker){if(i.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(nne.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(i.workerPath)):(nne.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error(`${e.message}  (${e.filename}:${e.lineno})`);i.enableWorker=!1,nne.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(Yte.ERROR,{type:Qte.OTHER_ERROR,details:Xte.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:s,vendor:"",id:t,config:JSON.stringify(i)})}catch(O_e){nne.warn(`Error setting up "${t}" Web Worker, fallback to inline`,O_e),this.resetWorker(),this.error=null,this.transmuxer=new ise(this.observer,s,i,"",t)}return}}this.transmuxer=new ise(this.observer,s,i,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,r,i,o,a,s,l,c){var u,d;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=o?o.start:i.start,f=i.decryptdata,m=this.frag,g=!(m&&i.cc===m.cc),v=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,w=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),x=!v&&(1===y||0===y&&(1===b||w&&b<=0)),E=self.performance.now();(v||y||0===i.stats.parsing.start)&&(i.stats.parsing.start=E),!o||!b&&x||(o.stats.parsing.start=E);const A=!(m&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),_=new lse(g,x,s,v,p,A);if(!x||g||A){nne.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${v}\n        contiguous: ${x}\n        accurateTimeOffset: ${s}\n        timeOffset: ${p}\n        initSegmentChange: ${A}`);const e=new sse(n,r,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:_},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,f,l,_);ase(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);ase(n)||t.async?(ase(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(null==t||!t.event)return void nne.warn("worker message received with no "+(t?"event name":"data"));const n=this.hls;if(this.hls)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":nne[t.data.logType]&&nne[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function hse(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!pse(e[n].attrs,t[n].attrs))return!1;return!0}function pse(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((n=>e[n]!==t[n]))}function fse(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class mse{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}class gse{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(WE){nne.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${WE}`),n.onError(WE);const r=this.buffers[e];null!=r&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const vse=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function yse(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}const bse={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},wse=e=>String.fromCharCode(bse[e]||e),xse=15,Ese=100,Ase={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_se={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Sse={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Tse={25:2,26:4,29:6,30:8,31:10,27:13,28:15},kse=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Cse{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"===typeof t?t():t;nne.log(`${this.time} [${e}] ${n}`)}}}const Ise=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Rse{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Dse{constructor(){this.uchar=" ",this.penState=new Rse}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Lse{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Rse,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Ese;t++)this.chars.push(new Dse);this.logger=e}equals(e){for(let t=0;t<Ese;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Ese;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Ese;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ese&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ese)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=wse(e);this.pos>=Ese?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Ese;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Ese;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class Pse{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<xse;t++)this.rows.push(new Lse(e));this.logger=e}reset(){for(let e=0;e<xse;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<xse;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<xse;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<xse;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<xse;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(n.rows[e+o])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<xse;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class Mse{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Pse(n),this.nonDisplayedMemory=new Pse(n),this.lastOutputScreen=new Pse(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Nse{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new Cse;this.channels=[null,new Mse(e,t,r),new Mse(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,o=null;if(0===e&&0===r)continue;this.logger.log(3,(()=>"["+Ise([t[n],t[n+1]])+"] -> ("+Ise([e,r])+")"));const a=this.cmdHistory;if(e>=16&&e<=31){if(jse(e,r,a)){Ose(null,null,a),this.logger.log(3,(()=>"Repeated command ("+Ise([e,r])+") is dropped"));continue}Ose(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else Ose(null,null,a);if(!i&&(o=this.parseChars(e,r),o)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(o)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||o||this.logger.log(2,(()=>"Couldn't parse cleaned data "+Ise([e,r])+" orig: "+Ise([t[n],t[n+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+Ise([e,t])+")")),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?Ase[e]:Sse[e]:1===r?_se[e]:Tse[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,(()=>"Special char '"+wse(e)+"' in channel "+n)),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,(()=>"Char codes =  "+Ise(r).join(","))),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=kse[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Ose(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Ose(e,t,n){n.a=e,n.b=t}function jse(e,t,n){return n.a===e&&n.b===t}class Fse{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Use=function(){if(null!=bne&&bne.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const n in t)e[n]=t[n]}return e}function o(t,o,a){const s=this,l={enumerable:!0};s.hasBeenReset=!1;let c="",u=!1,d=t,h=o,p=a,f=null,m="",g=!0,v="auto",y="start",b=50,w="middle",x=50,E="middle";Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return m},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return x},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class Bse{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function $se(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class Vse{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Wse(e,t,n,r){const i=r?e.split(r):[e];for(const o in i){if("string"!==typeof i[o])continue;const e=i[o].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const zse=new Use(0,0,""),Hse="middle"===zse.align?"middle":"center";function qse(e,t,n){const r=e;function i(){const t=$se(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),o(),t.endTime=i(),o(),function(e,t){const r=new Vse;Wse(e,(function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",Hse,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",Hse,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",Hse,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===zse.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",Hse);let o=r.get("position","auto");"auto"===o&&50===zse.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function Gse(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Kse{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Bse,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=Gse(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=n(),t.state){case"HEADER":/:/.test(e)?Wse(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new Use(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{qse(e,t.cue,t.regionList)}catch(ok){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(ok){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(ok){e.onparsingerror&&e.onparsingerror(ok)}return e.onflush&&e.onflush(),this}}const Yse=/\r\n|\n\r|\n|\r/g,Qse=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(n,n+t.length)===t},Xse=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function Zse(e,t,n){return Xse(e.toString())+Xse(t.toString())+Xse(n)}function Jse(e,t,n,r,i,o,a){const s=new Kse,l=Xne(new Uint8Array(e)).trim().replace(Yse,"\n").split("\n"),c=[],u=t?function(e){return qae(e,9e4,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,h="00:00.000",p=0,f=0,m=!0;s.oncue=function(e){const o=n[r];let a=n.ccOffset;const s=(p-u)/9e4;if(null!=o&&o.new&&(void 0!==f?a=n.ccOffset=o.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(o=i)&&o.new;){var o;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,s)),s){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=s-n.presentationOffset}const l=e.endTime-e.startTime,h=Zae(9e4*(e.startTime+a-f),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=Zse(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},s.onparsingerror=function(e){d=e},s.onflush=function(){d?a(d):o(c)},l.forEach((e=>{if(m){if(Qse(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{Qse(e,"LOCAL:")?h=e.slice(6):Qse(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{f=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!qte(t)||!qte(n)||!qte(r)||!qte(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(h)/1e3}catch(WE){d=WE}return}""===e&&(m=!1)}s.parse(e+"\n")})),s.flush()}const ele="stpp.ttml.im1t",tle=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nle=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,rle={left:"start",center:"center",right:"end",start:"start",end:"end"};function ile(e,t,n,r){const i=ure(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const o=i.map((e=>Xne(e))),a=function(e,t){return qae(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{o.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(i).reduce(((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e)),{}),a="preserve"!==r.getAttribute("xml:space"),s=ale(ole(r,"styling","style")),l=ale(ole(r,"layout","region")),c=ole(r,"body","[begin]");return[].map.call(c,(e=>{const n=sle(e,a);if(!n||!e.hasAttribute("begin"))return null;const r=ule(e.getAttribute("begin"),o),i=ule(e.getAttribute("dur"),o);let c=ule(e.getAttribute("end"),o);if(null===r)throw cle(e);if(null===c){if(null===i)throw cle(e);c=r+i}const u=new Use(r-t,c-t,n);u.id=Zse(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(i=n[a]);return o.reduce(((n,o)=>{const a=lle(t,r,o)||lle(e,r,o)||lle(i,r,o);return a&&(n[o]=a),n}),{})}(l[e.getAttribute("region")],s[e.getAttribute("style")],s),{textAlign:h}=d;if(h){const e=rle[h];e&&(u.lineAlign=e),u.align=h}return Hte(u,d),u})).filter((e=>null!==e))}(e,a))))}catch(WE){r(WE)}}function ole(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function ale(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function sle(e,t){return[].slice.call(e.childNodes).reduce(((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?sle(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function lle(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function cle(e){return new Error(`Could not parse ttml timestamp ${e}`)}function ule(e,t){if(!e)return null;let n=$se(e);return null===n&&(tle.test(e)?n=function(e,t){const n=tle.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):nle.test(e)&&(n=function(e,t){const n=nle.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}function dle(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function hle(e,t){return!!e&&e.kind===dle(t)&&fse(t,e)}class ple{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Yte.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Yte.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Yte.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Yte.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&qte(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&nne.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,ple.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(ok){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let r=e.length-1;const i=Math.max(t,n);for(let s=0;s<e.length;s+=1){const t=e[s];if((t.width>=i||t.height>=i)&&(o=t,!(a=e[s+1])||o.width!==a.width||o.height!==a.height)){r=s;break}}var o,a;return r}}const fle="[eme]";class mle{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=mle.CDMCleanupPromise?[mle.CDMCleanupPromise]:[],this.debug=nne.debug.bind(nne,fle),this.log=nne.log.bind(nne,fle),this.warn=nne.warn.bind(nne,fle),this.error=nne.error.bind(nne,fle),this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Lne(this.config));const t=e.map(Dne).filter((e=>!!e));this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then((i=>{const o=Sne(i);let a,s;if("sinf"===t){if(o!==wne.FAIRPLAY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${o}`);const i=ire(new Uint8Array(n));try{const e=vre(gne(JSON.parse(i).sinf));if(!e)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=e.subarray(8,24),s=wne.FAIRPLAY}catch(WE){return void this.warn(`${r} Failed to parse sinf: ${WE}`)}}else{if(o!==wne.WIDEVINE&&o!==wne.PLAYREADY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${o}`);const i=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=Sre(new DataView(e,r));t.push(n),r+=n.size}}return t}(n),l=i.filter((e=>!!e.systemId&&Rne(e.systemId)===o));l.length>1&&this.warn(`${r} Using first of ${l.length} pssh found for selected key-system ${o}`);const c=l[0];if(!c)return void(0===i.length||i.some((e=>!e.systemId))?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${i.map((e=>Rne(e.systemId))).join(",")} pssh data in favor of playlist keys`));if(s=Rne(c.systemId),0===c.version&&c.data)if(s===wne.WIDEVINE){const e=c.data.length-22;a=c.data.subarray(e,e+16)}else s===wne.PLAYREADY&&(a=Nne(c.data))}if(!s||!a)return void this.log(`Unable to handle ${r} with key-system ${o}`);const l=ere(a),{keyIdToKeySessionPromise:c,mediaKeySessions:u}=this;let d=c[l];for(let e=0;e<u.length;e++){const r=u[e],i=r.decryptdata;if(!i.keyId)continue;const o=ere(i.keyId);if(l===o||-1!==i.uri.replace(/-/g,"").indexOf(l)){if(d=c[o],i.pssh)break;delete c[o],i.pssh=new Uint8Array(n),i.keyId=a,d=c[l]=d.then((()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match"))),d.catch((e=>this.handleError(e)));break}}if(!d){if(s!==o)return void this.log(`Ignoring "${r}" with ${s} init data for selected key-system ${o}`);d=c[l]=this.getKeySystemSelectionPromise([s]).then((e=>{let{keySystem:r,mediaKeys:i}=e;var o;this.throwIfDestroyed();const s=new kre("ISO-23001-7",l,null!=(o=Dne(r))?o:"");return s.pssh=new Uint8Array(n),s.keyId=a,this.attemptSetMediaKeys(r,i).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({decryptdata:s,keySystem:r,mediaKeys:i});return this.generateRequestWithPreferredKeySession(e,t,n,"encrypted-event-no-match")}))})),d.catch((e=>this.handleError(e)))}}))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Yte.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Yte.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Yte.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Yte.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];return r?r.licenseUrl:e===wne.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map((e=>e.audioCodec)).filter(n),i=t.map((e=>e.videoCodec)).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise(((t,n)=>{const o=e=>{const a=e.shift();this.getMediaKeysPromise(a,r,i).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?o(e):n(t instanceof gle?t:new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};o(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!==typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===Pne&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=function(e,t,n,r){let i;switch(e){case wne.FAIRPLAY:i=["cenc","sinf"];break;case wne.WIDEVINE:case wne.PLAYREADY:i=["cenc"];break;case wne.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null})))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=null==i?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),o=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),o.then((n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),r.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return o.then((()=>i.mediaKeys))}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:n,mediaKeys:r}=e;this.log(`Creating key-system session "${n}" keyId: ${ere(t.keyId||[])}`);const i=r.createSession(),o={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return ere(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${ere((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const r=Lne(this.config),i=e.map(Sne).filter((e=>!!e&&-1!==r.indexOf(e)));return this.getKeySystemSelectionPromise(i).then((e=>{let{keySystem:r}=e;const i=Dne(r);i?t(i):n(new Error(`Unable to find format for key-system "${r}"`))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let i=this.keyIdToKeySessionPromise[n];return i||(i=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((n=>{let{keySystem:i,mediaKeys:o}=n;return this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(i,o).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:o,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))})),i.catch((e=>this.handleError(e)))),i}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof gle?this.hls.trigger(Yte.ERROR,e.data):this.hls.trigger(Yte.ERROR,{type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=Sne(e.keyFormat),n=t?[t]:Lne(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Lne(this.config)),0===e.length)throw new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,r){var i,o;const a=null==(i=this.config.drmSystems)||null==(o=i[e.keySystem])?void 0:o.generateRequest;if(a)try{const r=a.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=e.decryptdata.pssh=r.initData?new Uint8Array(r.initData):null}catch(WE){var s;if(this.warn(WE.message),null!=(s=this.hls)&&s.config.debug)throw WE}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const c=new use,u=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void c.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===r?e.keySystem===wne.FAIRPLAY&&(this.updateKeySession(e,yne("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${r}"`)},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;c.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",d);const h=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>h)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${ere("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${ere(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise(((i,o)=>{const a={responseType:"arraybuffer",url:r},s=t.certLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,s)=>{o(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:Vte({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{o(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{o(new Error("aborted"))}};n.load(a,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((r,i)=>{e.setServerCertificate(n).then((i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),r(e)})).catch((e=>{i(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var o,a;t=i[n];const r=null==(o=t.querySelector("name"))?void 0:o.textContent,s=null==(a=t.querySelector("value"))?void 0:a.textContent;r&&s&&e.setRequestHeader(r,s)}}const s=r.querySelector("Challenge"),l=null==s?void 0:s.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return yne(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)})).catch((o=>{if(!n.decryptdata)throw o;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((r,i)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,o,e)}catch(WE){this.error(WE)}r(t)}else{const s=n.errorRetry,l=s?s.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new gle({type:Qte.KEY_SYSTEM_ERROR,details:Xte.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,t).then((t=>{let{xhr:n,licenseChallenge:r}=t;e.keySystem==wne.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(n,r)),n.send(r)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},kre.clearKeyUriToKeyIdMap();const n=t.length;mle.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log(`Could not clear media keys: ${e}`)})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,t){let{sessionKeys:n}=t;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){const e=n.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}mle.CDMCleanupPromise=void 0;class gle extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var vle,yle,ble;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(vle||(vle={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(yle||(yle={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(ble||(ble={}));const wle={[ble.OBJECT]:["br","d","ot","tb"],[ble.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[ble.SESSION]:["cid","pr","sf","sid","st","v"],[ble.STATUS]:["bs","rtp"]};class xle{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof xle?e:new xle(e)))),this.value=e,this.params=t}}class Ele{constructor(e){this.description=void 0,this.description=e}}function Ale(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"===typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}const _le="Bare Item";const Sle=/[\x00-\x1f\x7f]+/;function Tle(e,t,n){return Ale("serialize",e,t,n)}function kle(e){if(!1===ArrayBuffer.isView(e))throw Tle(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function Cle(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw Tle(e,"Integer");return e.toString()}function Ile(e,t){if(e<0)return-Ile(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2===0?t:t+1)/n}return Math.round(e*n)/n}function Rle(e){const t=Ile(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Tle(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}function Dle(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw Tle(t,"Token");return t}function Lle(e){switch(typeof e){case"number":if(!qte(e))throw Tle(e,_le);return Number.isInteger(e)?Cle(e):Rle(e);case"string":return function(e){if(Sle.test(e))throw Tle(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return Dle(e);case"boolean":return function(e){if("boolean"!==typeof e)throw Tle(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${Cle(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return kle(e);if(e instanceof Ele)return Dle(e);default:throw Tle(e,_le)}}function Ple(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Tle(e,"Key");return e}function Mle(e){return null==e?"":Object.entries(e).map((e=>{let[t,n]=e;return!0===n?`;${Ple(t)}`:`;${Ple(t)}=${Lle(n)}`})).join("")}function Nle(e){return e instanceof xle?`${Lle(e.value)}${Mle(e.params)}`:Lle(e)}function Ole(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!==typeof e)throw Tle(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=null!=t&&t.whitespace?" ":"";return Array.from(n).map((e=>{let[t,n]=e;n instanceof xle===!1&&(n=new xle(n));let r=Ple(t);var i;return!0===n.value?r+=Mle(n.params):(r+="=",Array.isArray(n.value)?r+=`(${(i=n).value.map(Nle).join(" ")})${Mle(i.params)}`:r+=Nle(n)),r})).join(`,${r}`)}const jle=e=>Math.round(e),Fle=e=>100*jle(e/100),Ule={br:jle,d:jle,bl:Fle,dl:Fle,mtp:Fle,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:Fle,tb:jle};function Ble(e,t){const n={};if(null==e||"object"!==typeof e)return n;const r=Object.keys(e).sort(),i=Hte({},Ule,null==t?void 0:t.formatters),o=null==t?void 0:t.filter;return r.forEach((r=>{if(null!=o&&o(r))return;let a=e[r];const s=i[r];s&&(a=s(a,t)),"v"===r&&1===a||"pr"==r&&1===a||(e=>"number"===typeof e?qte(e):null!=e&&""!==e&&!1!==e)(a)&&((e=>"ot"===e||"sf"===e||"st"===e)(r)&&"string"===typeof a&&(a=new Ele(a)),n[r]=a)})),n}function $le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?function(e,t){return Ole(e,t)}(Ble(e,t),Hte({whitespace:!1},t)):""}function Vle(e,t,n){return Hte(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};const n=Object.entries(e),r=Object.entries(wle).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),i=n.reduce(((e,t)=>{var n;const[i,o]=t,a=(null==(n=r.find((e=>e[1].includes(i))))?void 0:n[0])||ble.REQUEST;return null!=e[a]||(e[a]={}),e[a][i]=o,e}),{});return Object.entries(i).reduce(((e,n)=>{let[r,i]=n;return e[r]=$le(i,t),e}),{})}(t,n))}const Wle=/CMCD=[^&#]+/;function zle(e,t,n){const r=function(e){if(!e)return"";const t=$le(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return`CMCD=${encodeURIComponent(t)}`}(t,n);if(!r)return e;if(Wle.test(e))return e.replace(Wle,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}function Hle(e,t,n,r){e&&Object.keys(t).forEach((i=>{const o=e.filter((e=>e.groupId===i)).map((e=>{const o=Hte({},e);return o.details=void 0,o.attrs=new one(o.attrs),o.url=o.attrs.URI=qle(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=t[i],o.attrs["PATHWAY-ID"]=r,o}));e.push(...o)}))}function qle(e,t,n,r){const{HOST:i,PARAMS:o,[n]:a}=r;let s;t&&(s=null==a?void 0:a[t],s&&(e=s));const l=new self.URL(e);return i&&!s&&(l.host=i),o&&Object.keys(o).sort().forEach((e=>{e&&l.searchParams.set(e,o[e])})),l.href}const Gle=/^age:\s*[\d.]+\s*$/im;class Kle{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new lne,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then((()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)})).catch((e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)})).then((()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,r)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&qte(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,o="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=o?o:t.response;if(null!=i){n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;if(n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const a=this.callbacks.onProgress;if(a&&a(n,e,i,t),!this.callbacks)return;const s={url:t.responseURL,data:i,code:r};return void this.callbacks.onSuccess(s,n,e,t)}}const a=i.loadPolicy.errorRetry;Yie(a,n.retry,!1,{url:e.url,data:void 0,code:r})?this.retry(a):(nne.error(`${r} while loading ${e.url}`),this.callbacks.onError({code:r,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(Yie(e,this.stats.retry,!0))this.retry(e);else{var t;nne.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Gie(e,n.retry),n.retry++,nne.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Gle.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Yle=/(\d+)-(\d+)\/(\d+)/;class Qle{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Xle,this.controller=new self.AbortController,this.stats=new lne}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Hte({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),o=n.onProgress,a="arraybuffer"===e.responseType,s=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=l&&qte(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),t.timeout),self.fetch(this.request).then((i=>{this.response=this.loader=i;const s=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),c-(s-r.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new Zle(t||"fetch, bad network response",e,i)}return r.loading.first=s,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Yle.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(qte(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(i.headers)||r.total,o&&qte(t.highWaterMark)?this.loadProgressively(i,r,e,t.highWaterMark,o):a?i.arrayBuffer():"json"===e.responseType?i.json():i.text()})).then((i=>{const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=i[s];l&&(r.loaded=r.total=l);const c={url:a.url,data:i,code:a.status};o&&!qte(t.highWaterMark)&&o(r,e,i,a),n.onSuccess(c,r,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,o=t?t.message:null;n.onError({code:i,text:o},e,t?t.details:null,r)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const o=new oae,a=e.body.getReader(),s=()=>a.read().then((a=>{if(a.done)return o.dataLength&&i(t,n,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<r||o.dataLength?(o.push(l),o.dataLength>=r&&i(t,n,o.flush(),e)):i(t,n,l,e),s()})).catch((()=>Promise.reject()));return s()}}function Xle(e,t){return new self.Request(e.url,t)}class Zle extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Jle=/\s/,ece={newCue(e,t,n,r){const i=[];let o,a,s,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(o=r.rows[h],s=!0,l=0,c="",!o.isEmpty()){var d;for(let e=0;e<o.chars.length;e++)Jle.test(o.chars[e].uchar)&&s?l++:(c+=o.chars[e].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=Gse(c.trim()),p=Zse(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||(a=new u(t,n,r),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),i.forEach((t=>mie(e,t)))),i}},tce=Vte(Vte({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Kle,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:r,media:i}=n;if(!e||!i)return;const o=performance.now(),a=t?t.stats:e.stats,s=t?t.duration:e.duration,l=o-a.loading.start,c=n.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||e.level<=c)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r||i.paused||!i.playbackRate||!i.readyState)return;const u=n.mainForwardBufferInfo;if(null===u)return;const d=this.bwEstimator.getEstimateTTFB(),h=Math.abs(i.playbackRate);if(l<=Math.max(d,s/(2*h)*1e3))return;const p=u.len/h,f=a.loading.first?a.loading.first-a.loading.start:-1,m=a.loaded&&f>-1,g=this.getBwEstimate(),v=n.levels,y=v[e.level],b=a.total||Math.max(a.loaded,Math.round(s*y.averageBitrate/8));let w=m?l-f:l;w<1&&m&&(w=Math.min(l,8*a.loaded/g));const x=m?1e3*a.loaded/w:0,E=x?(b-a.loaded)/x:8*b/g+d/1e3;if(E<=p)return;const A=x?8*x:g;let _,S=Number.POSITIVE_INFINITY;for(_=e.level-1;_>c;_--){const e=v[_].maxBitrate;if(S=this.getTimeToLoadFrag(d/1e3,A,s*e,!v[_].details),S<p)break}if(S>=E)return;if(S>10*s)return;n.nextLoadLevel=n.nextAutoLevel=_,m?this.bwEstimator.sample(l-Math.min(d,f),a.loaded):this.bwEstimator.sampleTTFB(l);const T=v[_].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>T&&this.resetEstimator(T),this.clearTimer(),nne.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${p.toFixed(3)} s\n      Estimated load time for current fragment: ${E.toFixed(3)} s\n      Estimated load time for down switch fragment: ${S.toFixed(3)} s\n      TTFB estimate: ${0|f} ms\n      Current BW estimate: ${qte(g)?0|g:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${_} @ ${0|T} bps`),n.trigger(Yte.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(nne.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new coe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.FRAG_LOADING,this.onFragLoading,this),e.on(Yte.FRAG_LOADED,this.onFragLoaded,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Yte.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Yte.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.FRAG_LOADING,this.onFragLoading,this),e.off(Yte.FRAG_LOADED,this.onFragLoaded,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Yte.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Yte.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Xte.BUFFER_ADD_CODEC_ERROR:case Xte.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Xte.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,o=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&o>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,o),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.start;qte(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,t){let{frag:n,part:r}=t;const i=r?r.stats:n.stats;if(n.type===lie&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:n.duration,t=this.hls.levels[n.level],o=(t.loaded?t.loaded.bytes:0)+i.loaded,a=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:o,duration:a},t.realBitrate=Math.round(8*o/a)}if(n.bitrateTest){const e={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(Yte.FRAG_BUFFERED,e),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==lie||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const o=this.hls.firstLevel,a=Math.min(Math.max(o,t),e);return nne.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:r,config:i,minAutoLevel:o}=n,a=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(s,o,r,l,0,c,u);if(e>=0)return e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,nne.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1}}const h=this.findBestLevel(s,o,r,l,d,c,u);if(nne.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const p=n.levels[o],f=n.levels[n.loadLevel];return(null==p?void 0:p.bitrate)<(null==f?void 0:f.bitrate)?o:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,o,a){var s;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:p,allAudioTracks:f,loadLevel:m,config:g}=this.hls;if(1===p.length)return 0;const v=p[u],y=!(null==v||null==(s=v.details)||!s.live),b=-1===m||-1===c;let w,x="SDR",E=(null==v?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:_}=g,S=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(f));if(b){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce(((e,n)=>{if(!n.codecSet)return e;const r=n.audioGroups;let i=e[n.codecSet];i||(e[n.codecSet]=i={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!r,fragmentError:0}),i.minBitrate=Math.min(i.minBitrate,n.bitrate);const o=Math.min(n.height,n.width);return i.minHeight=Math.min(i.minHeight,o),i.minFramerate=Math.min(i.minFramerate,n.frameRate),i.maxScore=Math.max(i.maxScore,n.score),i.fragmentError+=n.fragmentError,i.videoRanges[n.videoRange]=(i.videoRanges[n.videoRange]||0)+1,r&&r.forEach((e=>{if(!e)return;const n=t.groups[e];n&&(i.hasDefaultAudio=i.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach((e=>{i.channels[e]=(i.channels[e]||0)+n.channels[e]})))})),e}),{})}(p,S,t,n)),i=function(e,t,n,r,i){const o=Object.keys(e),a=null==r?void 0:r.channels,s=null==r?void 0:r.audioCodec,l=a&&2===parseInt(a);let c=!0,u=!1,d=1/0,h=1/0,p=1/0,f=0,m=[];const{preferHDR:g,allowedVideoRanges:v}=foe(t,i);for(let w=o.length;w--;){const t=e[o[w]];c=t.channels[2]>0,d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),p=Math.min(p,t.minBitrate);const n=v.filter((e=>t.videoRanges[e]>0));n.length>0&&(u=!0,m=n)}d=qte(d)?d:0,h=qte(h)?h:0;const y=Math.max(1080,d),b=Math.max(30,h);return p=qte(p)?p:n,n=Math.max(p,n),u||(t=void 0,m=[]),{codecSet:o.reduce(((t,r)=>{const i=e[r];if(r===t)return t;if(i.minBitrate>n)return moe(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return moe(r,"no renditions with default or auto-select sound found"),t;if(s&&r.indexOf(s.substring(0,4))%5!==0)return moe(r,`audio codec preference "${s}" not found`),t;if(a&&!l){if(!i.channels[a])return moe(r,`no renditions with ${a} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!s||l)&&c&&0===i.channels[2])return moe(r,"no renditions with stereo sound found"),t;return i.minHeight>y?(moe(r,`min resolution of ${i.minHeight} > maximum of ${y}`),t):i.minFramerate>b?(moe(r,`min framerate of ${i.minFramerate} > maximum of ${b}`),t):m.some((e=>i.videoRanges[e]>0))?i.maxScore<f?(moe(r,`max score of ${i.maxScore} < selected max of ${f}`),t):t&&(Bre(r)>=Bre(t)||i.fragmentError>e[t].fragmentError)?t:(f=i.maxScore,r):(moe(r,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),t)}),void 0),videoRanges:m,preferHDR:g,minFramerate:h,minBitrate:p}}(r,x,e,A,_),{codecSet:o,videoRanges:a,minFramerate:s,minBitrate:l,preferHDR:c}=i;w=o,x=c?a[a.length-1]:a[0],E=s,e=Math.max(e,l),nne.log(`[abr] picked start tier ${JSON.stringify(i)}`)}else w=null==v?void 0:v.codecSet,x=null==v?void 0:v.videoRange;const T=h?h.duration:d?d.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,C=[];for(let R=n;R>=t;R--){var I;const t=p[R],s=R>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"===typeof(null==n?void 0:n.decodingInfo)&&hoe(t,S,x,E,e,A)?(t.supportedPromise=poe(t,S,n),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?nne.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${JSON.stringify(e)}`):e.supported||(nne.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${r} ${JSON.stringify(e)}`),r>-1&&n.length>1&&(nne.log(`[abr] Removing unsupported level ${r}`),this.hls.removeLevel(r)))}))):t.supportedResult=uoe}if(w&&t.codecSet!==w||x&&t.videoRange!==x||s&&E>t.frameRate||!s&&E>0&&E<t.frameRate||t.supportedResult&&(null==(I=t.supportedResult.decodingInfoResults)||!I[0].smooth)){C.push(R);continue}const d=t.details,f=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||T;let _;_=s?a*e:o*e;const D=T&&r>=2*T&&0===i?p[R].averageBitrate:p[R].maxBitrate,L=this.getTimeToLoadFrag(k,_,D*f,void 0===d);if(_>=D&&(R===c||0===t.loadError&&0===t.fragmentError)&&(L<=k||!qte(L)||y&&!this.bitrateTestDelay||L<l)){const e=this.forcedAutoLevel;return R===m||-1!==e&&e===m||(C.length&&nne.trace(`[abr] Skipped level(s) ${C.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[C[0]].codecs}" ${p[C[0]].videoRange}; not compatible with "${v.codecs}" ${x}`),nne.info(`[abr] switch candidate:${u}->${R} adjustedbw(${Math.round(_)})-bitrate=${Math.round(_-D)} ttfb:${k.toFixed(1)} avgDuration:${f.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${L.toFixed(1)} firstSelection:${b} codecSet:${w} videoRange:${x} hls.loadLevel:${m}`)),b&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,r=Math.min(Math.max(e,n),t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Yte.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&nne.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;const t="[buffer-controller]";var n;this.appendSource=(n=Mre(e.config.preferManagedMediaSource),"undefined"!==typeof self&&n===self.ManagedMediaSource),this.log=nne.log.bind(nne,t),this.warn=nne.warn.bind(nne,t),this.error=nne.error.bind(nne,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.BUFFER_RESET,this.onBufferReset,this),e.on(Yte.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Yte.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Yte.BUFFER_EOS,this.onBufferEos,this),e.on(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Yte.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Yte.FRAG_PARSED,this.onFragParsed,this),e.on(Yte.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.BUFFER_RESET,this.onBufferReset,this),e.off(Yte.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Yte.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Yte.BUFFER_EOS,this.onBufferEos,this),e.off(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Yte.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Yte.FRAG_PARSED,this.onFragParsed,this),e.off(Yte.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new gse(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,r=Mre(this.appendSource);if(n&&r){var i;const e=this.mediaSource=new r;this.log(`created media source: ${null==(i=e.constructor)?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{n.removeAttribute("src");const r=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||r&&e instanceof r,yse(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,t),n.load()}catch(WE){n.src=t}else n.src=t;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(O_e){this.warn(`onMediaDetaching: ${O_e.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&yse(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Yte.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{var n;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(O_e){this.warn(`onBufferReset ${e}`,O_e)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"===typeof n.buffer.changeType){var r;const{id:i,codec:o,levelCodec:a,container:s,metadata:l}=t[e],c=zre(n.codec,n.levelCodec),u=null==c?void 0:c.replace(vse,"$1");let d=zre(o,a);const h=null==(r=d)?void 0:r.replace(vse,"$1");if(d&&u!==h){"audio"===e.slice(0,5)&&(d=Wre(d,this.appendSource));const t=`${s};codecs=${d}`;this.appendChangeType(e,t),this.log(`switching codec ${c} to ${d}`),this.tracks[e]={buffer:n.buffer,codec:o,container:s,levelCodec:a,metadata:l,id:i}}}}else this.pendingTracks[e]=t[e]})),n)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(`${i} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,r={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log(`changing ${e} sourceBuffer type to ${t}`),r.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};n.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:r,tracks:i}=this,{data:o,type:a,frag:s,part:l,chunkMeta:c}=t,u=c.buffering[a],d=self.performance.now();u.start=d;const h=s.stats.buffering,p=l?l.stats.buffering:null;0===h.start&&(h.start=d),p&&0===p.start&&(p.start=d);const f=i.audio;let m=!1;"audio"===a&&"audio/mpeg"===(null==f?void 0:f.container)&&(m=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=s.start,v={execute:()=>{if(u.executeStart=self.performance.now(),m){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${s.sn})`),e.timestampOffset=g)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,n={};for(const r in t)n[r]=Ioe.getBuffered(t[r]);this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Yte.BUFFER_APPENDED,{type:a,frag:s,part:l,chunkMeta:c,parent:s.type,timeRanges:n})},onError:e=>{const t={type:Qte.MEDIA_ERROR,parent:s.type,details:Xte.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:s,part:l,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=Xte.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[a];t.details=Xte.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${n.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),e>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger(Yte.ERROR,t)}};r.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:n}=this,r=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Yte.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?n.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(r(e),e)}))}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],o=r?r.elementaryStreams:n.elementaryStreams;o[dne]?i.push("audiovideo"):(o[cne]&&i.push("audio"),o[une]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(Yte.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})}),i)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const r=this.sourceBuffer[n];return!r||t.type&&t.type!==n||(r.ending=!0,r.ended||(r.ended=!0,this.log(`${n} sourceBuffer now EOS`))),e&&!(r&&!r.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,t){let{details:n}=t;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.getSourceBufferTypes().length)return;const r=e.config,i=n.currentTime,o=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(qte(a)&&a>0){const e=Math.max(a,o),t=Math.floor(i/o)*o-e;this.flushBackBuffer(i,o,t)}if(qte(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const e=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),t=Math.max(e,o),n=Math.floor(i/o)*o+t;this.flushFrontBuffer(i,o,n)}}flushBackBuffer(e,t,n){const{details:r,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((o=>{const a=i[o];if(a){const i=Ioe.getBuffered(a);if(i.length>0&&n>i.start(0)){if(this.hls.trigger(Yte.BACK_BUFFER_REACHED,{bufferEnd:n}),null!=r&&r.live)this.hls.trigger(Yte.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(a.ended&&i.end(i.length-1)-e<2*t)return void this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);this.hls.trigger(Yte.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}}))}flushFrontBuffer(e,t,n){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach((i=>{const o=r[i];if(o){const r=Ioe.getBuffered(o),a=r.length;if(a<2)return;const s=r.start(a-1),l=r.end(a-1);if(n>s||e>=s&&e<=l)return;if(o.ended&&e-l<2*t)return void this.log(`Cannot flush ${i} front buffer while SourceBuffer is in ended state`);this.hls.trigger(Yte.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:i})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:r}=this,i=e.fragments[0].start+e.totalduration,o=n.duration,a=qte(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>o||!qte(o))&&(this.log(`Updating Media Source duration to ${i.toFixed(3)}`),r.duration=i)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${r}-${i}.`),t.setLiveSeekableRange(r,i)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,r=Object.keys(n).length;if(r&&(!e||2===r||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(Yte.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){var r;const o=e[i];if(!o)throw Error(`source buffer exists for track ${i}, however track does not`);let a=-1===(null==(r=o.levelCodec)?void 0:r.indexOf(","))?o.levelCodec:o.codec;a&&"audio"===i.slice(0,5)&&(a=Wre(a,this.appendSource));const s=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${s})`);try{const e=t[i]=n.addSourceBuffer(s),r=i;this.addBufferListener(r,"updatestart",this._onSBUpdateStart),this.addBufferListener(r,"updateend",this._onSBUpdateEnd),this.addBufferListener(r,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(r,"bufferedchange",((e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(Yte.BUFFER_FLUSHED,{type:i})})),this.tracks[i]={buffer:e,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(O_e){this.error(`error while trying to add sourceBuffer: ${O_e.message}`),this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:O_e,sourceBufferName:i,mimeType:s})}}}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(r)}removeExecutor(e,t,n){const{media:r,mediaSource:i,operationQueue:o,sourceBuffer:a}=this,s=a[e];if(!r||!i||!s)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void o.shiftAndExecuteNext(e);const l=qte(r.duration)?r.duration:1/0,c=qte(i.duration)?i.duration:1/0,u=Math.max(0,t),d=Math.min(n,l,c);d>u&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),s.remove(u,d)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`)}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSourceBufferTypes();if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map((e=>n.appendBlocker(e)));Promise.all(r).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const r=this.sourceBuffer[e];if(!r)return;const i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:ple,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=nne.log.bind(nne,"[info]:"),this.warn=nne.warn.bind(nne,"[warning]:"),this.error=nne.error.bind(nne,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Yte.ERROR,this.onError,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Yte.ERROR,this.onError,this),e.off(Yte.ERROR,this.onErrorOut,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===lie?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,r;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case Xte.FRAG_LOAD_ERROR:case Xte.FRAG_LOAD_TIMEOUT:case Xte.KEY_LOAD_ERROR:case Xte.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case Xte.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:eoe,flags:ioe});case Xte.FRAG_GAP:case Xte.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=toe);case Xte.LEVEL_EMPTY_ERROR:case Xte.LEVEL_PARSING_ERROR:{var a,s;const e=t.parent===lie?t.level:i.loadLevel;t.details===Xte.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case Xte.LEVEL_LOAD_ERROR:case Xte.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==o?void 0:o.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level)));case Xte.AUDIO_TRACK_LOAD_ERROR:case Xte.AUDIO_TRACK_LOAD_TIMEOUT:case Xte.SUBTITLE_LOAD_ERROR:case Xte.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const e=i.levels[i.loadLevel];if(e&&(o.type===aie&&e.hasAudioGroup(o.groupId)||o.type===sie&&e.hasSubtitleGroup(o.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=toe,void(t.errorAction.flags=ooe)}return;case Xte.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=i.levels[i.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:toe,flags:aoe,hdcpLevel:n}:this.keySystemError(t)}return;case Xte.BUFFER_ADD_CODEC_ERROR:case Xte.REMUX_ALLOC_ERROR:case Xte.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:i.loadLevel));case Xte.INTERNAL_EXCEPTION:case Xte.BUFFER_APPENDING_ERROR:case Xte.BUFFER_FULL_ERROR:case Xte.LEVEL_SWITCH_ERROR:case Xte.BUFFER_STALLED_ERROR:case Xte.BUFFER_SEEK_OVER_HOLE:case Xte.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:eoe,flags:ioe})}t.type===Qte.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=qie(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(Yie(n,r,Hie(e),e.response))return{action:roe,flags:ioe,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:o}=t.config,a=qie(e.details.startsWith("key")?o:i,e),s=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(r){e.details!==Xte.FRAG_GAP&&r.fragmentError++;if(Yie(a,s,Hie(e),e.response))return{action:roe,flags:ioe,retryConfig:a,retryCount:s}}const l=this.getLevelSwitchAction(e,n);return a&&(l.retryConfig=a,l.retryCount=s),l}getLevelSwitchAction(e,t){const n=this.hls;null!==t&&void 0!==t||(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,o;const t=e.details;r.loadError++,t===Xte.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||(n.loadLevel=-1);const p=null==(i=e.frag)?void 0:i.type,f=(p===cie&&t===Xte.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===Xte.BUFFER_ADD_CODEC_ERROR||t===Xte.BUFFER_APPEND_ERROR))&&c.some((e=>{let{audioCodec:t}=e;return r.audioCodec!==t})),m="video"===e.sourceBufferName&&(t===Xte.BUFFER_ADD_CODEC_ERROR||t===Xte.BUFFER_APPEND_ERROR)&&c.some((e=>{let{codecSet:t,audioCodec:n}=e;return r.codecSet!==t&&r.audioCodec===n})),{type:g,groupId:v}=null!=(o=e.context)?o:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var a,s;const n=c[i];if(t===Xte.FRAG_GAP&&p===lie&&e.frag){const t=c[i].details;if(t){const n=Xie(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===aie&&n.hasAudioGroup(v)||g===sie&&n.hasSubtitleGroup(v))continue;if(p===cie&&null!=(a=r.audioGroups)&&a.some((e=>n.hasAudioGroup(e)))||p===uie&&null!=(s=r.subtitleGroups)&&s.some((e=>n.hasSubtitleGroup(e)))||f&&r.audioCodec===n.audioCodec||!f&&r.audioCodec!==n.audioCodec||m&&r.codecSet===n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:toe,flags:ioe,nextAutoLevel:l}}return{action:toe,flags:ooe}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case eoe:break;case toe:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===Xte.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:i,nextAutoLevel:o}=n;switch(r){case ioe:this.switchLevel(e,o);break;case aoe:i&&(t.maxHdcpLevel=Cie[Cie.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,o)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,a=1e3*i/e,s=this.hls;if(s.trigger(Yte.FPS_DROP,{currentDropped:i,currentDecoded:o,totalDroppedFrames:n}),a>0&&i>s.config.fpsDroppedMonitoringThreshold*o){let e=s.currentLevel;nne.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===s.autoLevelCapping||s.autoLevelCapping>=e)&&(e-=1,s.trigger(Yte.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:s.currentLevel}),s.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Pne,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:ece,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends iae{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",uie),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Yte.ERROR,this.onError,this),e.on(Yte.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Yte.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Yte.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Yte.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Yte.ERROR,this.onError,this),e.off(Yte.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Yte.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Yte.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Yte.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=Goe,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragPrevious=n,this.state=Goe,!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=n.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){o=i[l];break}const s=n.start+n.duration;o?o.end=s:(o={start:a,end:s},i.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,uie)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==lie||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===uie&&(t.details===Xte.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==qoe&&(this.state=Goe))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:n}=t;this.levels&&hse(this.levels,n)?this.levels=n.map((e=>new Nie(e))):(this.tracksBuffered=[],this.levels=n.map((e=>{const t=new Nie(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,uie),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:o,id:a}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const s=i[a];if(a>=i.length||!s)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(o.live||null!=(n=s.details)&&n.live){const e=this.mainDetails;if(o.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;if(s.details)l=this.alignPlaylists(o,s.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,$ie(o,l));else o.hasProgramDateTime&&e.hasProgramDateTime?(Noe(o,e),l=o.fragments[0].start):t&&(l=t.start,$ie(o,l))}if(s.details=o,this.levelLastLoaded=s,a===r&&(this.startFragRequested||!this.mainDetails&&o.live||this.setStartPosition(this.mainDetails||o,l),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===Goe)){Xie(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch((e=>{throw i.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const r=performance.now();i.trigger(Yte.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=Goe}))}}doTick(){if(this.media){if(this.state===Goe){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:r}=this,i=this.getLoadPosition(),o=Ioe.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:a,len:s}=o,l=this.getFwdBufferInfo(this.media,lie),c=n.details;if(s>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const u=c.fragments,d=u.length,h=c.edge;let p=null;const f=this.fragPrevious;if(a<h){const e=r.maxFragLookUpTolerance,t=a>h-e?0:e;p=Xie(f,u,Math.max(u[0].start,a),t),!p&&f&&f.start<u[0].start&&(p=u[0])}else p=u[d-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),"initSegment"!==p.sn){const e=u[p.sn-c.startSN-1];e&&e.cc===p.cc&&this.fragmentTracker.getState(e)===xoe&&(p=e)}this.fragmentTracker.getState(p)===xoe&&this.loadFragment(p,n,a)}}else this.state=Goe}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new mse(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends soe{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=yie(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.on(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Yte.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Yte.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.off(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Yte.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Yte.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);yie(this.media.textTracks).forEach((e=>{gie(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==o?void 0:o.groupId}`);const a=o.details;o.details=t.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=goe(t,e);if(n>-1)i=e[n];else{const e=goe(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const o={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(Yte.SUBTITLE_TRACKS_UPDATED,o),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||voe(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(pse(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(pse(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(fse(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==sie||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&voe(e,n))return n;const r=goe(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=goe(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(WE){this.warn(`Could not construct new URL with HLS Delivery Directives: ${WE}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(Yte.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=yie(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter((e=>fse(n,e)))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")})),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!qte(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(Yte.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:o,groupId:a="",name:s,type:l,url:c}=r;this.hls.trigger(Yte.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:s,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Yte.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Yte.FRAG_LOADING,this.onFragLoading,this),e.on(Yte.FRAG_LOADED,this.onFragLoaded,this),e.on(Yte.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Yte.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Yte.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Yte.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Yte.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Yte.FRAG_LOADING,this.onFragLoading,this),e.off(Yte.FRAG_LOADED,this.onFragLoaded,this),e.off(Yte.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Yte.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Yte.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Yte.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Fse(this,"textTrack1"),t=new Fse(this,"textTrack2"),n=new Fse(this,"textTrack3"),r=new Fse(this,"textTrack4");this.cea608Parser1=new Nse(1,e,t),this.cea608Parser2=new Nse(3,n,r)}}addCues(e,t,n,r,i){let o=!1;for(let u=i.length;u--;){const e=i[u],r=(a=e[0],s=e[1],l=t,c=n,Math.min(s,c)-Math.max(a,l));if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),o=!0,r/(n-t)>.5))return}var a,s,l,c;if(o||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(Yte.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:o}=t;const{unparsedVttFrags:a}=this;"main"===r&&(this.initPTS[n.cc]={baseTime:i,timescale:o}),a.length&&(this.unparsedVttFrags=[],a.forEach((e=>{this.onFragLoaded(Yte.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(hle(i,{name:e,lang:t,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:o}=t[e],a=this.getExistingTrack(i,o);if(a)n[e]=a,gie(n[e]),fie(n[e],r);else{const t=this.createTextTrack("captions",i,o);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(Yte.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{gie(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)gie(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some((e=>e.textCodec===ele));if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(hse(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?yie(e.textTracks):null;if(this.tracks.forEach(((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&hle(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)gie(r);else{const t=dle(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&nne.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(Yte.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===lie){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:o}=this,{cc:a,sn:s}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(s!==o+1||s===o&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=s,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===uie)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===ele?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(Yte.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;ile(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger(Yte.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{nne.log(`Failed to parse IMSC1: ${t}`),n.trigger(Yte.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[n.cc]&&-1===a)return void o.push(e);const s=this.hls;Jse(null!=(t=n.initSegment)&&t.data?bre(n.initSegment.data,new Uint8Array(r)):r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),s.trigger(Yte.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?o.push(e):this._fallbackToIMSC1(n,r),nne.log(`Failed to parse VTT cue: ${t}`),i&&a>n.cc||s.trigger(Yte.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||ile(t,this.initPTS[e.cc],(()=>{n.textCodec=ele,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>mie(n,e)))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(Yte.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===uie&&this.onFragLoaded(Yte.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:r}=this;if(!this.enabled||!n||!r)return;const{frag:i,samples:o}=t;if(i.type!==lie||"NONE"!==this.closedCaptionsForLevel(i))for(let a=0;a<o.length;a++){const e=o[a].bytes;if(e){const t=this.extractCea608Data(e);n.addData(o[a].pts,t[0]),r.addData(o[a].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:o}=t;const{media:a}=this;if(a&&!(a.currentTime<r)){if(!o||"video"===o){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>vie(e[t],n,r)))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((t=>vie(e[t],n,i)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],o=127&e[r++];if(0===i&&0===o)continue;if(0!==(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(o))}}return t}},audioStreamController:class extends iae{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",cie),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Yte.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Yte.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Yte.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Yte.ERROR,this.onError,this),e.on(Yte.BUFFER_RESET,this.onBufferReset,this),e.on(Yte.BUFFER_CREATED,this.onBufferCreated,this),e.on(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Yte.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Yte.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Yte.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Yte.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Yte.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Yte.ERROR,this.onError,this),e.off(Yte.BUFFER_RESET,this.onBufferReset,this),e.off(Yte.BUFFER_CREATED,this.onBufferCreated,this),e.off(Yte.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Yte.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Yte.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:o}=t;if("main"===r){const e=n.cc;this.initPTS[n.cc]={baseTime:i,timescale:o},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===nae&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=qoe);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=Goe):(this.loadedmetadata=!1,this.state=Xoe),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case Goe:this.doTickIdle();break;case Xoe:{var e;const{levels:t,trackId:n}=this,r=null==t||null==(e=t[n])?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=nae}break}case Qoe:{var t;const e=performance.now(),n=this.retryDate;if(!n||e>=n||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=Goe}break}case nae:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Yoe;const e={frag:t,part:n,payload:r.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=Ioe.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);Zie(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${n.end} is needed`),this.clearWaitingFragment())}}else this.state=Goe}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Goe)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:r}=this,i=e.config;if(!this.buffering||!n&&(this.startFragRequested||!i.startFragPrefetch)||null==t||!t[r])return;const o=t[r],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a))return void(this.state=Xoe);const s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,cne,cie));const l=this.getFwdBufferInfo(s,cie);if(null===l)return;if(!this.switchingTrack&&this._streamEnded(l,a))return e.trigger(Yte.BUFFER_EOS,{type:"audio"}),void(this.state=eae);const c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,lie),u=l.len,d=this.getMaxBufferLength(null==c?void 0:c.len),h=a.fragments,p=h[0].start,f=this.getLoadPosition(),m=this.flushing?f:l.end;if(this.switchingTrack&&n){const e=f;a.PTSKnown&&e<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}if(u>=d&&!this.switchingTrack&&m<h[h.length-1].start)return;let g=this.getNextFragment(m,a),v=!1;if(g&&this.isLoopLoading(g,m)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,a,l,lie,d)),!g)return void(this.bufferFlushed=!0);const y=c&&g.start>c.end+a.targetduration;if(y||(null==c||!c.len)&&l.len){const e=this.getAppendedFrag(g.start,lie);if(null===e)return;if(v||(v=!!e.gap||!!y&&0===c.len),y&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,o,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,t){let{audioTracks:n}=t;this.resetTransmuxer(),this.levels=n.map((e=>new Nie(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=Goe,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=qoe),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(Yte.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:r}=this,{details:i,id:o}=t;if(!r)return void this.warn(`Audio tracks were reset while loading level ${o}`);this.log(`Audio track ${o} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const a=r[o];let s=0;if(i.live||null!=(n=a.details)&&n.live){this.checkLiveUpdate(i);const e=this.mainDetails;if(i.deltaUpdateFailed||!e)return;var l;if(!a.details&&i.hasProgramDateTime&&e.hasProgramDateTime)Noe(i,e),s=i.fragments[0].start;else s=this.alignPlaylists(i,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=i,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(this.mainDetails||i,s),this.state!==Xoe||this.waitForCdnTuneIn(i)||(this.state=Goe),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{config:o,trackId:a,levels:s}=this;if(!s)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=s[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new dse(this.hls,cie,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,o=-1!==t,a=new Roe(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,o);d.push(i,p,u,"",n,r,c.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new oae,complete:!1};e.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=nae}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===cie)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Yte.AUDIO_TRACK_SWITCHED,Vte({},e)))}this.fragBufferedComplete(n,r)}else if(!this.loadedmetadata&&n.type===lie){const e=this.videoBuffer||this.media;if(e){Ioe.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=tae;else switch(t.details){case Xte.FRAG_GAP:case Xte.FRAG_PARSING_ERROR:case Xte.FRAG_DECRYPT_ERROR:case Xte.FRAG_LOAD_ERROR:case Xte.FRAG_LOAD_TIMEOUT:case Xte.KEY_LOAD_ERROR:case Xte.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(cie,t);break;case Xte.AUDIO_TRACK_LOAD_ERROR:case Xte.AUDIO_TRACK_LOAD_TIMEOUT:case Xte.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Xoe||(null==(n=t.context)?void 0:n.type)!==aie||(this.state=Goe);break;case Xte.BUFFER_APPEND_ERROR:case Xte.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===Xte.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Xte.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,t){let{type:n}=t;n!==une&&(this.flushing=!0)}onBufferFlushed(e,t){let{type:n}=t;if(n!==une){this.flushing=!1,this.bufferFlushed=!0,this.state===eae&&(this.state=Goe);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,n,cie),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a)return void this.resetWhenMissingContext(o);const{frag:s,part:l,level:c}=a,{details:u}=c,{audio:d,text:h,id3:p,initSegment:f}=i;if(!this.fragContextChanged(s)&&u){if(this.state=Zoe,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,f.tracks,e,o),r.trigger(Yte.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[cne]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(cne,e,t,n,r),this.bufferFragmentData(d,s,l,o)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=Hte({id:n,frag:s,details:u},p);r.trigger(Yte.FRAG_PARSING_METADATA,e)}if(h){const e=Hte({id:n,frag:s,details:u},h);r.trigger(Yte.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(s)}_bufferInitSegment(e,t,n,r){if(this.state!==Zoe)return;t.video&&delete t.video;const i=t.audio;if(!i)return;i.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${o}/${i.codec}]`),o&&1===o.split(",").length&&(i.levelCodec=o),this.hls.trigger(Yte.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(Yte.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.fragCurrent=e,this.switchingTrack||r===xoe||r===Aoe)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=nae;const n=this.mainDetails;n&&n.fragments[0].start!==t.details.fragments[0].start&&Noe(t.details,n)}else this.startFragRequested=!0,super.loadFragment(e,t,n);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:o,channels:a}=this.bufferedTrack;voe({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:o,channels:a},e,yoe)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Yte.AUDIO_TRACK_SWITCHED,Vte({},e))}},audioTrackController:class extends soe{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.on(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Yte.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Yte.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.off(Yte.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Yte.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Yte.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==o?void 0:o.groupId}`);const a=o.details;o.details=t.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=goe(t,e,yoe);if(n>-1)i=e[n];else{const e=goe(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(Yte.AUDIO_TRACKS_UPDATED,a);const s=this.trackId;if(-1!==r&&-1===s)this.setAudioTrack(r);else if(e.length&&-1===s){var o;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(o=this.groupIds)?void 0:o.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==aie||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&voe(e,r,yoe))return r;const i=goe(e,this.tracksInGroup,yoe);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const o=t[r],a=t.reduce(((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e}),{})[o.uri];a.length>1&&(r=Math.max.apply(Math,a));const s=o.videoRange,l=o.frameRate,c=o.codecSet.substring(0,4),u=boe(t,r,(t=>{if(t.videoRange!==s||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const r=t.audioGroups,o=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return goe(e,o,i)>-1}));return u>-1?u:boe(t,r,(t=>{const r=t.audioGroups,o=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return goe(e,o,i)>-1}))}(e,t.levels,n,r,yoe);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=goe(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(Yte.AUDIO_TRACK_SWITCHING,Vte({},r)),i)return;const o=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||voe(e,r,yoe)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:o,audioCodec:a,channels:s}=e;for(let e=0;e<t.length;e++){if(voe({name:n,lang:r,assocLang:i,characteristics:o,audioCodec:a,channels:s},t[e],yoe))return e}for(let l=0;l<t.length;l++){const n=t[l];if(pse(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(pse(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(WE){this.warn(`Could not construct new URL with HLS Delivery Directives: ${WE}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(Yte.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}},emeController:mle,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:vle.MANIFEST,su:!this.initialized})}catch(WE){nne.warn("Could not generate manifest CMCD data.",WE)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],r=this.getObjectType(t),i={d:1e3*t.duration,ot:r};r!==vle.VIDEO&&r!==vle.AUDIO&&r!=vle.MUXED||(i.br=n.bitrate/1e3,i.tb=this.getTopBandwidth(r)/1e3,i.bl=this.getBufferLength(r)),this.apply(e,i)}catch(WE){nne.warn("Could not generate segment CMCD data.",WE)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||function(){try{return crypto.randomUUID()}catch(WE){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(WE){let t=(new Date).getTime();const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}));return n}}}(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Yte.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Yte.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:yle.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Hte(t,this.createData());const n=t.ot===vle.INIT||t.ot===vle.VIDEO||t.ot===vle.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce(((e,n)=>(r.includes(n)&&(e[n]=t[n]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),Vle(e.headers,t)):e.url=zle(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?vle.TIMED_TEXT:"initSegment"===e.sn?vle.INIT:"audio"===t?vle.AUDIO:"main"===t?this.hls.audioTracks.length?vle.VIDEO:vle.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===vle.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}for(const i of t)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===vle.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*Ioe.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=nne.log.bind(nne,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===toe&&n.flags===ooe){const e=this.levels;let r=this.pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:o}=t.context;n&&e?i=this.getPathwayForGroupId(n,o,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),n.resolved||nne.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${JSON.stringify(r)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach((e=>{r-n[e]>3e5&&delete n[e]}));for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const o=this.hls.nextLoadLevel,a=this.hls.levels[o];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,zie(t),this.hls.trigger(Yte.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[o];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===aie&&r[i].hasAudioGroup(e)||t===sie&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach((e=>{const{ID:i,"BASE-ID":o,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===i)))return;const s=this.getLevelsForPathway(o).map((e=>{const t=new one(e.attrs);t["PATHWAY-ID"]=i;const o=t.AUDIO&&`${t.AUDIO}_clone_${i}`,s=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;o&&(n[t.AUDIO]=o,t.AUDIO=o),s&&(r[t.SUBTITLES]=s,t.SUBTITLES=s);const l=qle(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new Nie({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)c.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)c.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return c}));t.push(...s),Hle(this.audioTracks,n,a,i),Hle(this.subtitleTracks,r,a,i)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(WE){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},s={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const o=e.data;if(1!==o.VERSION)return void this.log(`Steering VERSION ${o.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=o.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":s,"PATHWAY-PRIORITY":l}=o;if(a)try{this.uri=new self.URL(a,r).href}catch(WE){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),s&&this.clonePathways(s);const c={steeringManifest:o,url:r.toString()};this.hls.trigger(Yte.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,i);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,s,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}});function nce(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(nce):Object.keys(e).reduce(((t,n)=>(t[n]=nce(e[n]),t)),{}):e}function rce(e){const t=e.loader;if(t!==Qle&&t!==Kle)nne.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(ok){}return!1})()&&(e.loader=Qle,e.progressive=!0,e.enableSoftwareAES=!0,nne.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let ice;class oce extends soe{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Yte.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Yte.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},o={};let a=!1,s=!1,l=!1;t.levels.forEach((e=>{var t,c;const u=e.attrs;let{audioCodec:d,videoCodec:h}=e;-1!==(null==(t=d)?void 0:t.indexOf("mp4a.40.34"))&&(ice||(ice=/chrome|firefox/i.test(navigator.userAgent)),ice&&(e.audioCodec=d=void 0)),d&&(e.audioCodec=d=Wre(d,n)),0===(null==(c=h)?void 0:c.indexOf("avc1"))&&(h=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");if(e.length>2){let r=e.shift()+".";r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t[n]=r}}return t.join(",")}(h));const{width:p,height:f,unknownCodecs:m}=e;if(a||(a=!(!p||!f)),s||(s=!!h),l||(l=!!d),null!=m&&m.length||d&&!Ore(d,"audio",n)||h&&!Ore(h,"video",n))return;const{CODECS:g,"FRAME-RATE":v,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":x}=u,E=`${`${b||"."}-`}${e.bitrate}-${w}-${v}-${g}-${x}-${y}`;if(i[E])if(i[E].uri===e.url||e.attrs["PATHWAY-ID"])i[E].addGroupId("audio",u.AUDIO),i[E].addGroupId("text",u.SUBTITLES);else{const t=o[E]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=new Nie(e);i[E]=n,r.push(n)}else{const t=new Nie(e);i[E]=t,o[E]=1,r.push(t)}})),this.filterAndSortMediaOptions(r,t,a,s,l)}filterAndSortMediaOptions(e,t,n,r,i){let o=[],a=[],s=e;if((n||r)&&i&&(s=s.filter((e=>{let{videoCodec:t,videoRange:n,width:r,height:i}=e;return(!!t||!(!r||!i))&&(!!(o=n)&&Iie.indexOf(o)>-1);var o}))),0===s.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;o=t.audioTracks.filter((t=>!t.audioCodec||Ore(t.audioCodec,"audio",e))),ace(o)}t.subtitles&&(a=t.subtitles,ace(a));const l=s.slice(0);s.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Iie.indexOf(e.videoRange)-Iie.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=Ure(e.videoCodec),r=Ure(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=Bre(e.codecSet),r=Bre(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let c=l[0];if(this.steering&&(s=this.steering.filterParsedLevels(s),s.length!==l.length))for(let p=0;p<l.length;p++)if(l[p].pathwayId===s[0].pathwayId){c=l[p];break}this._levels=s;for(let p=0;p<s.length;p++)if(s[p]===c){var u;this._firstLevel=p;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${s.length} level(s) found, first bitrate: ${e}`),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===tce.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const d=i&&!r,h={levels:s,audioTracks:o,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:!d&&o.some((e=>!!e.url))};this.hls.trigger(Yte.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(Yte.ERROR,{type:Qte.OTHER_ERROR,details:Xte.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,o=t[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&o.details&&r&&i===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${n}${i?" with Pathway "+i:""}`);const s={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(Yte.LEVEL_SWITCHING,s);const l=o.details;if(!l||l.live){const e=this.switchParams(o.uri,null==r?void 0:r.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===oie&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,t){let{frag:n}=t;if(void 0!==n&&n.type===lie){const e=n.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const t=this._levels[n.level];null!=t&&t.loadError&&(this.log(`Resetting level error count of ${t.loadError} on frag buffered`),t.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,o=this._levels[r];var a;if(!o)return this.warn(`Invalid level index ${r}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let r=n.uri;if(e)try{r=e.addDirectives(r)}catch(WE){this.warn(`Could not construct new URL with HLS Delivery Directives: ${WE}`)}const i=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${i?" Pathway "+i:""} ${r}`),this.clearTimer(),this.hls.trigger(Yte.LEVEL_LOADING,{url:r,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter(((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));zie(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(Yte.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,t){let{levels:n}=t;this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Yte.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function ace(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}class sce{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xte.KEY_LOAD_ERROR,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return new Boe({type:Qte.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:r}=e;for(let e=0;e<t.length;e++){const i=t[e];if(r<=i.cc&&("initSegment"===n||"initSegment"===i.sn||n<i.sn)){this.emeController.selectKeySystemFormat(i).then((e=>{i.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Xte.KEY_LOAD_ERROR,n))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Xte.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if(null!=(n=a)&&n.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var s;if(null!=(r=a)&&r.keyLoadPromise)switch(null==(s=a.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Xte.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise(((i,o)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},s=n.keyLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:a,keyInfo:s,url:l}=n;if(!a.decryptdata||s!==this.keyUriToKeyInfo[l])return o(this.createKeyLoadError(a,Xte.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));s.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,s.loader=null,i({frag:a,keyInfo:s})},onError:(e,n,r,i)=>{this.resetLoader(n),o(this.createKeyLoadError(t,Xte.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,Vte({url:a.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),o(this.createKeyLoadError(t,Xte.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),o(this.createKeyLoadError(t,Xte.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(a,l,c)}))}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],i&&i.destroy()}}function lce(){return self.SourceBuffer||self.WebKitSourceBuffer}function cce(){if(!Mre())return!1;const e=lce();return!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove}class uce{constructor(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:r,stalled:i}=this;if(null===r)return;const{currentTime:o,seeking:a}=r,s=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),null!==i){if(this.stallReported){const e=self.performance.now()-i;nne.warn(`playback not stuck anymore @${o}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||s)return void(this.stalled=null);if(r.paused&&!a||r.ended||0===r.playbackRate||!Ioe.getBuffered(r).length)return void(this.nudgeRetry=0);const c=Ioe.bufferInfo(r,o,0),u=c.nextStart||0;if(a){const e=c.len>2,n=!u||t&&t.start<=o||u-o>2&&!this.fragmentTracker.getPartialFragment(o);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var d;if(!(c.len>0)&&!u)return;const e=Math.max(u,c.start||0)-o,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(d=t.details)?void 0:d.live)?2*t.details.targetduration:2,i=this.fragmentTracker.getPartialFragment(o);if(e>0&&(e<=n||i))return void(r.paused||this._trySkipBufferHole(i))}const h=self.performance.now();if(null===i)return void(this.stalled=h);const p=h-i;if(!a&&p>=250&&(this._reportStall(c),!this.media))return;const f=Ioe.bufferInfo(r,o,n.maxBufferHole);this._tryFixBufferStall(f,p)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:r,media:i}=this;if(null===i)return;const o=i.currentTime,a=r.getPartialFragment(o);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-o<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(nne.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:r}=this;if(!r&&n){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);nne.warn(r.message),t.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:r}=this;if(null===r)return 0;const i=r.currentTime,o=Ioe.bufferInfo(r,i,0),a=i<o.start?o.start:o.nextStart;if(a){const s=o.len<=t.maxBufferHole,l=o.len>0&&o.len<1&&r.readyState<3,c=a-i;if(c>0&&(s||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===i){const e=t.getAppendedFrag(0,lie);e&&a<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(i,lie);if(n){let e=!1,r=n.end;for(;r<a;){const n=t.getPartialFragment(r);if(!n){e=!0;break}r+=n.duration}if(e)return 0}}}const o=Math.max(a+.05,i+.1);if(nne.warn(`skipping hole, adjusting currentTime from ${i} to ${o}`),this.moved=!0,this.stalled=null,r.currentTime=o,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${o}`);n.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return o}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:r}=this;if(null===n)return;const i=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=i+(r+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${i} to ${o}`);nne.warn(a.message),n.currentTime=o,t.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const n=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);nne.error(n.message),t.trigger(Yte.ERROR,{type:Qte.MEDIA_ERROR,details:Xte.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class dce extends iae{constructor(e,t,n){super(e,t,n,"[stream-controller]",lie),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Yte.LEVEL_LOADING,this.onLevelLoading,this),e.on(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Yte.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Yte.ERROR,this.onError,this),e.on(Yte.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Yte.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Yte.BUFFER_CREATED,this.onBufferCreated,this),e.on(Yte.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Yte.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Yte.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Yte.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Yte.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Yte.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Yte.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Yte.ERROR,this.onError,this),e.off(Yte.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Yte.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Yte.BUFFER_CREATED,this.onBufferCreated,this),e.off(Yte.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Yte.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Yte.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=Goe,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=qoe}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case rae:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n)){if(this.waitForCdnTuneIn(r))break;this.state=Goe;break}if(this.hls.nextLoadLevel!==this.level){this.state=Goe;break}break}case Qoe:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,n=null==e?void 0:e[t];this.resetStartWhenNotLoaded(n||null),this.state=Goe}}}this.state===Goe&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const o=n[i],a=this.getMainFwdBufferInfo();if(null===a)return;const s=this.getLevelDetails();if(s&&this._streamEnded(a,s)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(Yte.BUFFER_EOS,e),void(this.state=eae)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=o.details;if(!l||this.state===rae||l.live&&this.levelLastLoaded!==o)return this.level=i,void(this.state=rae);const c=a.len,u=this.getMaxBufferLength(o.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==_oe){var p;const e=(null!=(p=this.backtrackFragment)?p:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?cne:une,t=(e===une?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,lie)}h=this.getNextFragmentLoopLoading(h,l,a,lie,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,o,d))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===xoe||r===Aoe?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,lie)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const o=this.getBufferedFrag(t.currentTime+n);if(o){const e=this.followingBufferedFrag(o);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(o.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Koe:case Yoe:case Qoe:case Zoe:case Joe:this.state=Goe}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new uce(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;qte(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Yte.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,r=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),r=r||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=n&&r&&!function(){var e;const t=lce();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Goe)return;const r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=rae)}onLevelLoaded(e,t){var n;const{levels:r}=this,i=t.level,o=t.details,a=o.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${i}`);this.log(`Level ${i} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const s=r[i],l=this.fragCurrent;!l||this.state!==Yoe&&this.state!==Qoe||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(o.live||null!=(n=s.details)&&n.live){var u;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,s.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(s.details=o,this.levelLastLoaded=s,this.hls.trigger(Yte.LEVEL_UPDATED,{details:o,level:i}),this.state===rae){if(this.waitForCdnTuneIn(o))return;this.state=Goe}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{levels:o}=this;if(!o)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const a=o[n.level],s=a.details;if(!s)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=a.videoCodec,c=s.PTSKnown||!s.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new dse(this.hls,lie,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,f=-1!==p,m=new Roe(n.level,n.sn,n.stats.chunkCount,i.byteLength,p,f),g=this.initPTS[n.cc];h.push(i,u,d,l,n,r,s.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger(Yte.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(Yte.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,r=!!this.hls.audioTracks[n].url;if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,o=!1;for(const a in n){const e=n[a];if("main"===e.id){if(i=a,r=e,"video"===a){const e=n[a];e&&(this.videoBuffer=e.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n&&n.type!==lie)return;if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===Joe&&(this.state=Goe));const i=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal)this.state=tae;else switch(t.details){case Xte.FRAG_GAP:case Xte.FRAG_PARSING_ERROR:case Xte.FRAG_DECRYPT_ERROR:case Xte.FRAG_LOAD_ERROR:case Xte.FRAG_LOAD_TIMEOUT:case Xte.KEY_LOAD_ERROR:case Xte.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(lie,t);break;case Xte.LEVEL_LOAD_ERROR:case Xte.LEVEL_LOAD_TIMEOUT:case Xte.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==rae||(null==(n=t.context)?void 0:n.type)!==oie||(this.state=Goe);break;case Xte.BUFFER_APPEND_ERROR:case Xte.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===Xte.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Xte.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!Ioe.getBuffered(e).length){const e=this.state!==Goe?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=Goe,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,t){let{type:n}=t;if(n!==cne||this.audioOnly&&!this.altAudio){const e=(n===une?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,n,lie),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=Ioe.getBuffered(e),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${i} to match buffer start`),n+=i,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:r}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=Goe,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(Yte.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a)return void this.resetWhenMissingContext(o);const{frag:s,part:l,level:c}=a,{video:u,text:d,id3:h,initSegment:p}=i,{details:f}=c,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=Zoe,p){if(null!=p&&p.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,p.tracks,e,o),r.trigger(Yte.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;qte(e)&&(this.initPTS[s.cc]={baseTime:e,timescale:t},r.trigger(Yte.INIT_PTS_FOUND,{frag:s,id:n,initPTS:e,timescale:t}))}if(u&&f&&"initSegment"!==s.sn){const e=f.fragments[s.sn-1-f.startSN],t=s.sn===f.startSN,n=!e||s.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:r,startDTS:i,endDTS:a}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:r,startDTS:i,endDTS:a};else if(u.firstKeyFrame&&u.independent&&1===o.id&&!n&&(this.couldBacktrack=!0),u.dropped&&u.independent){const i=this.getMainFwdBufferInfo(),o=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&o<l-this.config.maxBufferHole&&!n)return void this.backtrack(s);n&&(s.gap=!0),s.setElementaryStreamInfo(u.type,s.start,r,s.start,a,!0)}else t&&e>2&&(s.gap=!0);s.setElementaryStreamInfo(u.type,e,r,i,a),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(u,s,l,o,t||n)}else{if(!t&&!n)return void this.backtrack(s);s.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=m;l&&(l.elementaryStreams[cne]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(cne,e,t,n,r),this.bufferFragmentData(m,s,l,o)}if(f&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:s,details:f,samples:h.samples};r.trigger(Yte.FRAG_PARSING_METADATA,e)}if(f&&d){const e={id:n,frag:s,details:f,samples:d.samples};r.trigger(Yte.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,r){if(this.state!==Zoe)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:i,video:o,audiovideo:a}=t;if(i){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==n.indexOf("android")&&"audio/mpeg"!==i.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),i.levelCodec=t,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${i.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(Yte.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(Yte.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,lie)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Goe}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(Ioe.isBuffered(e,n)?t=this.getAppendedFrag(n):Ioe.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(Yte.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(Yte.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&qte(t)&&qte(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class hce{static get version(){return"1.5.20"}static isMSESupported(){return cce()}static isSupported(){return function(){if(!cce())return!1;const e=Mre();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(Fre(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(Fre(t,"audio")))))}()}static getMediaSource(){return Mre()}static get Events(){return Yte}static get ErrorTypes(){return Qte}static get ErrorDetails(){return Xte}static get DefaultConfig(){return hce.defaultConfig?hce.defaultConfig:tce}static set DefaultConfig(e){hce.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new use,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"===typeof console&&!0===e||"object"===typeof e){tne(e,"debug","log","info","warn","error");try{ene.log(`Debug logs enabled for "${t}" in hls.js version 1.5.20`)}catch(ok){ene=Jte}}else ene=Jte}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=nce(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const i=`${"level"===e?"playlist":e}LoadPolicy`,o=void 0===t[i],a=[];r.forEach((r=>{const s=`${e}Loading${r}`,l=t[s];if(void 0!==l&&o){a.push(s);const e=n[i].default;switch(t[i]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&nne.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${i}": ${JSON.stringify(t[i])}`)})),Vte(Vte({},n),t)}(hce.DefaultConfig,e);this.userConfig=e,t.progressive&&rce(t);const{abrController:n,bufferController:r,capLevelController:i,errorController:o,fpsController:a}=t,s=new o(this),l=this.abrController=new n(this),c=this.bufferController=new r(this),u=this.capLevelController=new i(this),d=new a(this),h=new pie(this),p=new Tie(this),f=t.contentSteeringController,m=f?new f(this):null,g=this.levelController=new oce(this,m),v=new Soe(this),y=new sce(this.config),b=this.streamController=new dce(this,v,y);u.setStreamController(b),d.setStreamController(b);const w=[h,g,b];m&&w.splice(1,0,m),this.networkControllers=w;const x=[l,c,u,d,p,v];this.audioTrackController=this.createController(t.audioTrackController,w);const E=t.audioStreamController;E&&w.push(new E(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const A=t.subtitleStreamController;A&&w.push(new A(this,v,y)),this.createController(t.timelineController,x),y.emeController=this.emeController=this.createController(t.emeController,x),this.cmcdController=this.createController(t.cmcdController,x),this.latencyController=this.createController(kie,x),this.coreComponents=x,w.push(s);const _=s.onErrorOut;"function"===typeof _&&this.on(Yte.ERROR,_,s)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,n)}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(WE){if(nne.error("An internal error happened while handling event "+e+'. Error message: "'+WE.message+'". Here is a stacktrace:',WE),!this.triggeringException){this.triggeringException=!0;const n=e===Yte.ERROR;this.trigger(Yte.ERROR,{type:Qte.OTHER_ERROR,details:Xte.INTERNAL_EXCEPTION,fatal:n,event:e,error:WE}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){nne.log("destroy"),this.trigger(Yte.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){nne.log("attachMedia"),this._media=e,this.trigger(Yte.MEDIA_ATTACHING,{media:e})}detachMedia(){nne.log("detachMedia"),this.trigger(Yte.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,r=this.url=Bte.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,nne.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Yte.MANIFEST_LOADING,{url:e})}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;nne.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),this.started&&this.networkControllers);t++);}stopLoad(){nne.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}resumeBuffering(){nne.log("resume buffering"),this.networkControllers.forEach((e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){nne.log("pause buffering"),this.networkControllers.forEach((e=>{e.pauseBuffering&&e.pauseBuffering()}))}swapAudioCodec(){nne.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){nne.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){nne.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){nne.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){nne.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){nne.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){nne.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(nne.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return Cie.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}hce.defaultConfig=void 0;var pce=hce,fce="video",mce="drm",gce={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},vce=e=>e===fce?"playback":e,yce=class e extends Error{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.MEDIA_ERR_CUSTOM,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;var o;super(t),this.name="MediaError",this.code=n,this.context=i,this.fatal=null!=r?r:n>=e.MEDIA_ERR_NETWORK&&n<=e.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(o=e.defaultMessages[this.code])?o:"")}};yce.MEDIA_ERR_ABORTED=1,yce.MEDIA_ERR_NETWORK=2,yce.MEDIA_ERR_DECODE=3,yce.MEDIA_ERR_SRC_NOT_SUPPORTED=4,yce.MEDIA_ERR_ENCRYPTED=5,yce.MEDIA_ERR_CUSTOM=100,yce.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var bce=yce,wce=(e,t)=>!(e=>null==e)(t)&&e in t,xce={ANY:"any",MUTED:"muted"},Ece={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},Ace="mse",_ce="native",Sce={HEADER:"header",QUERY:"query",NONE:"none"},Tce=Object.values(Sce),kce={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},Cce={HLS:kce.M3U8},Ice=(Object.keys(Cce),Object.values(kce),{code:"en"}),Rce=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e;i.addEventListener(t,n,r),e.addEventListener("teardown",(()=>{i.removeEventListener(t,n)}),{once:!0})};var Dce=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},Lce=e=>{let{type:t}=e;if(t){let e=t.toUpperCase();return wce(e,Cce)?Cce[e]:t}return Nce(e)},Pce=e=>"VOD"===e?Ece.ON_DEMAND:Ece.LIVE,Mce=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,Nce=e=>{let{src:t}=e;if(!t)return"";let n="";try{n=new URL(t).pathname}catch{console.error("invalid url")}let r=n.lastIndexOf(".");if(r<0)return jce(e)?kce.M3U8:"";let i=n.slice(r+1).toUpperCase();return wce(i,kce)?kce[i]:""},Oce="mux.com",jce=e=>{let t,{src:n,customDomain:r=Oce}=e;try{t=new URL(`${n}`)}catch{return!1}let i="https:"===t.protocol,o=t.hostname===`stream.${r}`.toLowerCase(),a=t.pathname.split("/"),s=2===a.length,l=!(null!=a&&a[1].includes("."));return i&&o&&s&&l},Fce=e=>{let t=(null!=e?e:"").split(".")[1];if(t)try{let e=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}catch{return}};function Uce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n,r;let i=t&&null!=(r=null==(n=Ice)?void 0:n[e])?r:e;return new Bce(i,t?Ice.code:"en")}var Bce=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e=>null!=(e=Ice)?e:"en")();this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,((t,n)=>{var r;return null!=(r=e[n])?r:""}))}toString(){return this.message}},$ce=Object.values(xce),Vce=e=>"boolean"==typeof e||"string"==typeof e&&$ce.includes(e),Wce=(e,t)=>{if(!t)return;let n=e.muted,r=()=>e.muted=n;switch(t){case xce.ANY:e.play().catch((()=>{e.muted=!0,e.play().catch(r)}));break;case xce.MUTED:e.muted=!0,e.play().catch(r);break;default:e.play().catch((()=>{}))}};function zce(e,t){var n;if(!("videoTracks"in e))return;let r=new WeakMap;t.on(pce.Events.MANIFEST_PARSED,(function(t,n){a();let i=e.addVideoTrack("main");i.selected=!0;for(let[e,o]of n.levels.entries()){let t=i.addRendition(o.url[0],o.width,o.height,o.videoCodec,o.bitrate);r.set(o,`${e}`),t.id=`${e}`}})),t.on(pce.Events.AUDIO_TRACKS_UPDATED,(function(t,n){o();for(let r of n.audioTracks){let t=r.default?"main":"alternative",n=e.addAudioTrack(t,r.name,r.lang);n.id=`${r.id}`,r.default&&(n.enabled=!0)}})),e.audioTracks.addEventListener("change",(()=>{var n;let r=+(null==(n=[...e.audioTracks].find((e=>e.enabled)))?void 0:n.id),i=t.audioTracks.map((e=>e.id));r!=t.audioTrack&&i.includes(r)&&(t.audioTrack=r)})),t.on(pce.Events.LEVELS_UPDATED,(function(t,n){var i;let o=e.videoTracks[null!=(i=e.videoTracks.selectedIndex)?i:0];if(!o)return;let a=n.levels.map((e=>r.get(e)));for(let r of e.videoRenditions)r.id&&!a.includes(r.id)&&o.removeRendition(r)}));let i=n=>{let r=e.currentTime,i=!1,o=(e,t)=>{i||(i=!Number.isFinite(t.endOffset))};t.on(pce.Events.BUFFER_FLUSHING,o),t.nextLevel=n,t.off(pce.Events.BUFFER_FLUSHING,o),i||t.trigger(pce.Events.BUFFER_FLUSHING,{startOffset:r+10,endOffset:1/0,type:"video"})};null==(n=e.videoRenditions)||n.addEventListener("change",(e=>{let n=e.target.selectedIndex;n!=t.nextLevel&&i(n)}));let o=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},a=()=>{(()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)})(),o()};t.once(pce.Events.DESTROYING,a)}var Hce=e=>"time"in e?e.time:e.startTime;function qce(e,t,n,r,i,o){let a=document.createElement("track");return a.kind=t,a.label=n,r&&(a.srclang=r),i&&(a.id=i),o&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),e.append(a),a.track}function Gce(e,t,n){var r;return null==(r=Array.from(e.querySelectorAll("track")).find((e=>e.track.label===t&&e.track.kind===n)))?void 0:r.track}async function Kce(e,t,n,r){let i=Gce(e,n,r);return i||(i=qce(e,r,n),i.mode="hidden",await new Promise((e=>setTimeout((()=>e(void 0)),0)))),"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort(((e,t)=>Hce(t)-Hce(e))).forEach((t=>{var n,o;let a=t.value,s=Hce(t);if("endTime"in t&&null!=t.endTime)null==i||i.addCue(new VTTCue(s,t.endTime,"chapters"===r?a:JSON.stringify(null!=a?a:null)));else{let t=Array.prototype.findIndex.call(null==i?void 0:i.cues,(e=>e.startTime>=s)),l=null==(n=null==i?void 0:i.cues)?void 0:n[t],c=l?l.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(o=null==i?void 0:i.cues)?void 0:o[t-1];u&&(u.endTime=s),null==i||i.addCue(new VTTCue(s,c,"chapters"===r?a:JSON.stringify(null!=a?a:null)))}})),e.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var Yce="cuepoints",Qce=Object.freeze({label:Yce});async function Xce(e,t){return Kce(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qce).label,"metadata")}var Zce=e=>({time:e.startTime,value:JSON.parse(e.text)});function Jce(e){var t,n;let r=Gce(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Yce}).label,"metadata");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return Zce(r.activeCues[0]);let{currentTime:i}=e,o=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return Zce(o||r.activeCues[0])}var eue="chapters",tue=Object.freeze({label:eue}),nue=e=>({startTime:e.startTime,endTime:e.endTime,value:e.text});async function rue(e,t){return Kce(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:tue).label,"chapters")}function iue(e){var t,n;let r=Gce(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:eue}).label,"chapters");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return nue(r.activeCues[0]);let{currentTime:i}=e,o=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return nue(o||r.activeCues[0])}var oue="v",aue="t",sue="s",lue="d",cue=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!(e=>null==(e=globalThis.navigator)?void 0:e.onLine)();var a,s;if(o){let n,r=Uce("Your device appears to be offline",i),o=bce.MEDIA_ERR_NETWORK,a=new bce(r,o,!1,n);return a.errorCategory=t,a.muxCode=gce.NETWORK_OFFLINE,a.data=e,a}let l="status"in e?e.status:e.code,c=Date.now(),u=bce.MEDIA_ERR_NETWORK;if(200===l)return;let d=vce(t),h=((e,t)=>{var n,r;let i=vce(e),o=`${i}Token`;return null!=(n=t.tokens)&&n[i]?null==(r=t.tokens)?void 0:r[i]:wce(o,t)?t[o]:void 0})(t,n),p=(e=>e===fce?oue:e===mce?lue:void 0)(t),[f]=Dce(null!=(a=n.playbackId)?a:"");if(!l||!f)return;let m=Fce(h);if(h&&!m){let n=Uce("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:d}),r=Uce("Compact JWT string: {token}",i).format({token:h}),o=new bce(n,u,!0,r);return o.errorCategory=t,o.muxCode=gce.NETWORK_TOKEN_MALFORMED,o.data=e,o}if(l>=500){let e=new bce("",u,null==r||r);return e.errorCategory=t,e.muxCode=gce.NETWORK_UNKNOWN_ERROR,e}if(403===l){if(!m){let n=Uce("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d,category:t}),o=Uce("Specified playback ID: {playbackId}",i).format({playbackId:f}),a=new bce(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=gce.NETWORK_TOKEN_MISSING,a.data=e,a}if(function(e){let{exp:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!t||1e3*t<n}(m,c)){let n={timeStyle:"medium",dateStyle:"medium"},r=Uce("The video\u2019s secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:d}),o=Uce("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",n).format(null!=(s=m.exp)?s:0),currentDate:new Intl.DateTimeFormat("en",n).format(c)}),a=new bce(r,u,!0,o);return a.errorCategory=t,a.muxCode=gce.NETWORK_TOKEN_EXPIRED,a.data=e,a}if(((e,t)=>{let{sub:n}=e;return n!==t})(m,f)){let n=Uce("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d}),r=Uce("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:d,playbackId:f,tokenPlaybackId:m.sub}),o=new bce(n,u,!0,r);return o.errorCategory=t,o.muxCode=gce.NETWORK_TOKEN_SUB_MISMATCH,o.data=e,o}if((e=>{let{aud:t}=e;return!t})(m)){let n=Uce("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=Uce("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p}),o=new bce(n,u,!0,r);return o.errorCategory=t,o.muxCode=gce.NETWORK_TOKEN_AUD_MISSING,o.data=e,o}if(((e,t)=>{let{aud:n}=e;return n!==t})(m,p)){let n=Uce("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=Uce("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p,aud:m.aud}),o=new bce(n,u,!0,r);return o.errorCategory=t,o.muxCode=gce.NETWORK_TOKEN_AUD_MISMATCH,o.data=e,o}}if(412===l){let n=Uce("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),o=Uce("Specified playback ID: {playbackId}",i).format({playbackId:f}),a=new bce(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=gce.NETWORK_NOT_READY,a.data=e,a}if(404===l){let n=Uce("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),o=Uce("Specified playback ID: {playbackId}",i).format({playbackId:f}),a=new bce(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=gce.NETWORK_NOT_FOUND,a.data=e,a}if(400===l){let n=Uce("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),o=Uce("Specified playback ID: {playbackId}",i).format({playbackId:f}),a=new bce(n,u,null==r||r,o);return a.errorCategory=t,a.muxCode=gce.NETWORK_INVALID_URL,a.data=e,a}let g=new bce("",u,null==r||r);return g.errorCategory=t,g.muxCode=gce.NETWORK_UNKNOWN_ERROR,g.data=e,g},uue=pce.DefaultConfig.capLevelController,due=class e extends uue{constructor(e){super(e)}get levels(){var e;return null!=(e=this.hls.levels)?e:[]}getValidLevels(e){return this.levels.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e))}getMaxLevel(t){let n=super.getMaxLevel(t),r=this.getValidLevels(t);if(!r[n])return n;let i=Math.min(r[n].width,r[n].height),o=e.minMaxResolution;return i>=o?n:uue.getMaxLevelByMediaSize(r,o*(16/9),o)}};due.minMaxResolution=720;var hue,pue,fue,mue,gue,vue,yue,bue=due,wue="fairplay",xue="playready",Eue="widevine",Aue=async(e,t)=>{if(t===kce.MP4)return{streamType:Ece.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(t===kce.M3U8){let t=await(async e=>fetch(e).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>{let t=e.split("\n").find(((e,t,n)=>t&&n[t-1].startsWith("#EXT-X-STREAM-INF")));return fetch(t).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>e.split("\n")))})))(e);return(e=>{var t,n,r;let i,o=null==(n=(null!=(t=e.find((e=>e.startsWith("#EXT-X-PLAYLIST-TYPE"))))?t:"").split(":")[1])?void 0:n.trim(),a=Pce(o),s=Mce(o);if(a===Ece.LIVE){let t=e.find((e=>e.startsWith("#EXT-X-PART-INF")));if(t)i=2*+t.split(":")[1].split("=")[1];else{let t=e.find((e=>e.startsWith("#EXT-X-TARGETDURATION"))),n=null==(r=null==t?void 0:t.split(":"))?void 0:r[1];i=3*+(null!=n?n:6)}}return{streamType:a,targetLiveWindow:s,liveEdgeStartOffset:i}})(t)}return console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},_ue=(e,t,n)=>{var r,i,o,a,s,l,c,u;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:p,lowLatency:f}=(e=>{var t;let n,r=e.type,i=Pce(r),o=Mce(r),a=!(null==(t=e.partList)||!t.length);return i===Ece.LIVE&&(n=a?2*e.partTarget:3*e.targetduration),{streamType:i,targetLiveWindow:o,liveEdgeStartOffset:n,lowLatency:a}})(e);if(d===Ece.LIVE){f?(n.config.backBufferLength=null!=(r=n.userConfig.backBufferLength)?r:4,n.config.maxFragLookUpTolerance=null!=(i=n.userConfig.maxFragLookUpTolerance)?i:.001,n.config.abrBandWidthUpFactor=null!=(o=n.userConfig.abrBandWidthUpFactor)?o:n.config.abrBandWidthFactor):n.config.backBufferLength=null!=(a=n.userConfig.backBufferLength)?a:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var r;return e>this.length||e<0||Number.isFinite(t.duration)?t.seekable.end(e):null!=(r=n.liveSyncPosition)?r:t.seekable.end(e)}});(null!=(s=Cue.get(t))?s:{}).seekable=e}(null!=(l=Cue.get(t))?l:{}).liveEdgeStartOffset=p,(null!=(c=Cue.get(t))?c:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(u=Cue.get(t))?u:{}).streamType=d,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},Sue=null!=(pue=null==(hue=null==globalThis?void 0:globalThis.navigator)?void 0:hue.userAgent)?pue:"",Tue=null!=(gue=null==(mue=null==(fue=null==globalThis?void 0:globalThis.navigator)?void 0:fue.userAgentData)?void 0:mue.platform)?gue:"",kue=Sue.toLowerCase().includes("android")||["x11","android"].some((e=>Tue.toLowerCase().includes(e))),Cue=new WeakMap,Iue="mux.com",Rue=null==(yue=(vue=pce).isSupported)?void 0:yue.call(vue),Due=kue,Lue=()=>Ote.utils.now(),Pue=Ote.utils.generateUUID,Mue=function(){let{playbackId:e,customDomain:t=Iue,maxResolution:n,minResolution:r,renditionOrder:i,programStartTime:o,programEndTime:a,assetStartTime:s,assetEndTime:l,playbackToken:c,tokens:{playback:u=c}={},extraSourceParams:d={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return;let[h,p=""]=Dce(e),f=new URL(`https://stream.${t}/${h}.m3u8${p}`);return u||f.searchParams.has("token")?(f.searchParams.forEach(((e,t)=>{"token"!=t&&f.searchParams.delete(t)})),u&&f.searchParams.set("token",u)):(n&&f.searchParams.set("max_resolution",n),r&&(f.searchParams.set("min_resolution",r),n&&+n.slice(0,-1)<+r.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",r,"maxResolution",n)),i&&f.searchParams.set("rendition_order",i),o&&f.searchParams.set("program_start_time",`${o}`),a&&f.searchParams.set("program_end_time",`${a}`),s&&f.searchParams.set("asset_start_time",`${s}`),l&&f.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach((e=>{let[t,n]=e;null!=n&&f.searchParams.set(t,n)}))),f.toString()},Nue=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},Oue=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},jue=e=>{var t;return null==(t=Cue.get(e))?void 0:t.error},Fue=e=>{var t,n;return null!=(n=null==(t=Cue.get(e))?void 0:t.streamType)?n:Ece.UNKNOWN},Uue=e=>{var t,n;return null!=(n=null==(t=Cue.get(e))?void 0:t.seekable)?n:e.seekable},Bue=.034,$ue=function(e,t){return e>t||function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bue;return Math.abs(e-t)<=n}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bue)},Vue=(e,t)=>{var n,r,i;if(!t||!e.buffered.length)return;if(e.readyState>2)return!1;let o=t.currentLevel>=0?null==(r=null==(n=t.levels)?void 0:n[t.currentLevel])?void 0:r.details:null==(i=t.levels.find((e=>!!e.details)))?void 0:i.details;if(!o||o.live)return;let{fragments:a}=o;if(null==a||!a.length)return;if(e.currentTime<e.duration-(o.targetduration+.5))return!1;let s=a[a.length-1];if(e.currentTime<=s.start)return!1;let l=s.start+s.duration/2,c=e.buffered.start(e.buffered.length-1),u=e.buffered.end(e.buffered.length-1);return l>c&&l<u},Wue=(e,t)=>e.ended||e.loop?e.ended:!(!t||!Vue(e,t))||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bue;return e.paused&&$ue(e.currentTime,e.duration,t)}(e),zue=(e,t,n)=>{Hue(t,n);let{metadata:r={}}=e,{view_session_id:i=Pue()}=r,o=(e=>{var t,n,r;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:Jue(e)&&null!=(r=null!=(n=Nue(e.playbackId))?n:Oue(e.src))?r:e.src})(e);r.view_session_id=i,r.video_id=o,e.metadata=r;e.drmTypeCb=e=>{var n;null==(n=t.mux)||n.emit("hb",{view_drm_type:e})},Cue.set(t,{});let a=Gue(e,t),s=((e,t,n)=>{let{preload:r,src:i}=e,o=e=>{null!=e&&["","none","metadata","auto"].includes(e)?t.setAttribute("preload",e):t.removeAttribute("preload")};if(!n)return o(r),o;let a=!1,s=!1,l=n.config.maxBufferLength,c=n.config.maxBufferSize,u=e=>{o(e);let r=null!=e?e:t.preload;s||"none"===r||("metadata"===r?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=l,n.config.maxBufferSize=c),d())},d=()=>{!a&&i&&(a=!0,n.loadSource(i))};return Rce(t,"play",(()=>{s=!0,n.config.maxBufferLength=l,n.config.maxBufferSize=c,d()}),{once:!0}),u(r),u})(e,t,a);ede(e,t,a),tde(e,t,a),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qce;new Promise((n=>{Rce(e,"loadstart",(async()=>{let r=await Xce(e,[],t);Rce(e,"cuechange",(()=>{let t=Jce(e);if(t){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tue;new Promise((n=>{Rce(e,"loadstart",(async()=>{let r=await rue(e,[],t);Rce(e,"cuechange",(()=>{let t=iue(e);if(t){let n=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t);let l=((e,t,n)=>{let{autoplay:r}=e,i=!1,o=!1,a=Vce(r)?r:!!r,s=()=>{i||Rce(t,"playing",(()=>{i=!0}),{once:!0})};if(s(),Rce(t,"loadstart",(()=>{i=!1,s(),Wce(t,a)}),{once:!0}),Rce(t,"loadstart",(()=>{n||(o=e.streamType&&e.streamType!==Ece.UNKNOWN?e.streamType===Ece.LIVE:!Number.isFinite(t.duration)),Wce(t,a)}),{once:!0}),n&&n.once(pce.Events.LEVEL_LOADED,((t,n)=>{var r;o=e.streamType&&e.streamType!==Ece.UNKNOWN?e.streamType===Ece.LIVE:null!=(r=n.details.live)&&r})),!a){let r=()=>{!o||Number.isFinite(e.startTime)||(null!=n&&n.liveSyncPosition?t.currentTime=n.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};n&&Rce(t,"play",(()=>{"metadata"===t.preload?n.once(pce.Events.LEVEL_UPDATED,r):r()}),{once:!0})}return e=>{i||(a=Vce(e)?e:!!e,Wce(t,a))}})(e,t,a);return{engine:a,setAutoplay:l,setPreload:s}},Hue=(e,t)=>{let n=null==t?void 0:t.engine;n&&(n.detachMedia(),n.destroy()),null!=e&&e.mux&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",rde),e.removeEventListener("error",ode),e.removeEventListener("durationchange",nde),Cue.delete(e),e.dispatchEvent(new Event("teardown")))};function que(e,t){var n;let r=Lce(e);if(r!==kce.M3U8)return!0;let i=!r||null==(n=t.canPlayType(r))||n,{preferPlayback:o}=e;return i&&(o===_ce||!(Rue&&(o===Ace||Due)))}var Gue=(e,t)=>{let{debug:n,streamType:r,startTime:i=-1,metadata:o,preferCmcd:a,_hlsConfig:s={}}=e,l=Lce(e)===kce.M3U8,c=que(e,t);if(l&&!c&&Rue){let t={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},l=Kue(r),c=Yue(e),u=a!==Sce.NONE?{useHeaders:a===Sce.HEADER,sessionId:null==o?void 0:o.view_session_id,contentId:null==o?void 0:o.video_id}:void 0;return new pce({debug:n,startPosition:i,cmcd:u,xhrSetup:(e,t)=>{var n,r;if(a&&a!==Sce.QUERY)return;let i=new URL(t);if(!i.searchParams.has("CMCD"))return;let o=(null!=(r=null==(n=i.searchParams.get("CMCD"))?void 0:n.split(","))?r:[]).filter((e=>e.startsWith("sid")||e.startsWith("cid"))).join(",");i.searchParams.set("CMCD",o),e.open("GET",i)},capLevelController:bue,...t,...l,...c,...s})}},Kue=e=>e===Ece.LIVE?{backBufferLength:8}:{},Yue=e=>{let{tokens:{drm:t}={},playbackId:n,drmTypeCb:r}=e,i=Nue(n);return t&&i?{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:Xue(e,"fairplay"),serverCertificateUrl:Zue(e,"fairplay")},"com.widevine.alpha":{licenseUrl:Xue(e,"widevine")},"com.microsoft.playready":{licenseUrl:Xue(e,"playready")}},requestMediaKeySystemAccessFunc:(e,t)=>("com.widevine.alpha"===e&&(t=[...t.map((e=>{var t;let n=null==(t=e.videoCapabilities)?void 0:t.map((e=>({...e,robustness:"HW_SECURE_ALL"})));return{...e,videoCapabilities:n}})),...t]),navigator.requestMediaKeySystemAccess(e,t).then((t=>{let n=(e=>e.includes("fps")?wue:e.includes("playready")?xue:e.includes("widevine")?Eue:void 0)(e);return null==r||r(n),t})))}:{}},Que=(e,t)=>{Rce(t,"encrypted",(async n=>{try{let r=n.initDataType;if("skd"!==r)return void console.error(`Received unexpected initialization data type "${r}"`);if(!t.mediaKeys){let n=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[r],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then((t=>{var n;return null==(n=e.drmTypeCb)||n.call(e,wue),t})).catch((()=>{let e=Uce("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),n=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=mce,n.muxCode=gce.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,ide(t,n)}));if(!n)return;let i=await n.createMediaKeys();try{let t=await(async e=>{let t=await fetch(e);return 200!==t.status?Promise.reject(t):await t.arrayBuffer()})(Zue(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=cue(t,mce,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(t)}));await i.setServerCertificate(t).catch((()=>{let e=Uce("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),t=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=mce,t.muxCode=gce.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(t)}))}catch(mk){return void ide(t,mk)}await t.setMediaKeys(i)}let i=n.initData;if(null==i)return void console.error(`Could not start encrypted playback due to missing initData in ${n.type} event`);let o=t.mediaKeys.createSession();o.addEventListener("keystatuseschange",(()=>{o.keyStatuses.forEach((e=>{let n;if("internal-error"===e){let e=Uce("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");n=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0),n.errorCategory=mce,n.muxCode=gce.ENCRYPTED_CDM_ERROR}else if("output-restricted"===e||"output-downscaled"===e){let e=Uce("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");n=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!1),n.errorCategory=mce,n.muxCode=gce.ENCRYPTED_OUTPUT_RESTRICTED}n&&ide(t,n)}))}));let a=await Promise.all([o.generateRequest(r,i).catch((()=>{let e=Uce("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),n=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=mce,n.muxCode=gce.ENCRYPTED_GENERATE_REQUEST_FAILED,ide(t,n)})),new Promise((e=>{o.addEventListener("message",(t=>{e(t.message)}),{once:!0})}))]).then((e=>{let[,t]=e;return t})),s=await(async(e,t)=>{let n=await fetch(t,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:e});if(200!==n.status)return Promise.reject(n);let r=await n.arrayBuffer();return new Uint8Array(r)})(a,Xue(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=cue(t,mce,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(t)}));await o.update(s).catch((()=>{let e=Uce("Failed to update DRM license. This may be an issue with the player or your protected content."),t=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=mce,t.muxCode=gce.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(t)}))}catch(uk){return void ide(t,uk)}}))},Xue=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=Iue}=e,o=Nue(n);return`https://license.${i.toLocaleLowerCase().endsWith(Iue)?i:Iue}/license/${t}/${o}?token=${r}`},Zue=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=Iue}=e,o=Nue(n);return`https://license.${i.toLocaleLowerCase().endsWith(Iue)?i:Iue}/appcert/${t}/${o}?token=${r}`},Jue=e=>{let{playbackId:t,src:n,customDomain:r}=e;if(t)return!0;if("string"!=typeof n)return!1;let i=null==window?void 0:window.location.href,o=new URL(n,i).hostname.toLocaleLowerCase();return o.includes(Iue)||!!r&&o.includes(r.toLocaleLowerCase())},ede=(e,t,n)=>{var r;let{envKey:i,disableTracking:o}=e,a=Jue(e);if(!o&&(i||a)){let{playerInitTime:o,playerSoftwareName:a,playerSoftwareVersion:s,beaconCollectionDomain:l,debug:c,disableCookies:u}=e,d={...e.metadata,video_title:(null==(r=null==e?void 0:e.metadata)?void 0:r.video_title)||void 0},h=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);Ote.monitor(t,{debug:c,beaconCollectionDomain:l,hlsjs:n,Hls:n?pce:void 0,automaticErrorTracking:!1,errorTranslator:h,disableCookies:u,data:{...i?{env_key:i}:{},player_software_name:a,player_software:a,player_software_version:s,player_init_time:o,...d}})}},tde=(e,t,n)=>{var r,i;let o,a,s=que(e,t),{src:l}=e,c=()=>{t.ended||!Wue(t,n)||(Vue(t,n)?t.currentTime=t.buffered.end(t.buffered.length-1):t.dispatchEvent(new Event("ended")))},u=()=>{let e,n,r=Uue(t);r.length>0&&(e=r.start(0),n=r.end(0)),(a!==n||o!==e)&&t.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),o=e,a=n};if(Rce(t,"durationchange",u),t&&s){let n=Lce(e);if("string"==typeof l){let o=()=>{if(Fue(t)!==Ece.LIVE||Number.isFinite(t.duration))return;let e=setInterval(u,1e3);t.addEventListener("teardown",(()=>{clearInterval(e)}),{once:!0}),Rce(t,"durationchange",(()=>{Number.isFinite(t.duration)&&clearInterval(e)}))},a=async()=>async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lce({src:e});var r,i,o;let{streamType:a,targetLiveWindow:s,liveEdgeStartOffset:l}=await Aue(e,n);(null!=(r=Cue.get(t))?r:{}).liveEdgeStartOffset=l,(null!=(i=Cue.get(t))?i:{}).targetLiveWindow=s,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(o=Cue.get(t))?o:{}).streamType=a,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))}(l,t,n).then(o).catch((n=>{if(n instanceof Response){let r=cue(n,fce,e);if(r)return void ide(t,r)}else Error}));if("none"===t.preload){let e=()=>{a(),t.removeEventListener("loadedmetadata",n)},n=()=>{a(),t.removeEventListener("play",e)};Rce(t,"play",e,{once:!0}),Rce(t,"loadedmetadata",n,{once:!0})}else a();null!=(r=e.tokens)&&r.drm?Que(e,t):Rce(t,"encrypted",(()=>{let e=Uce("Attempting to play DRM-protected content without providing a DRM token."),n=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=mce,n.muxCode=gce.ENCRYPTED_MISSING_TOKEN,ide(t,n)}),{once:!0}),t.setAttribute("src",l),e.startTime&&((null!=(i=Cue.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",nde,{once:!0}))}else t.removeAttribute("src");t.addEventListener("error",rde),t.addEventListener("error",ode),t.addEventListener("emptied",(()=>{t.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}),{once:!0}),Rce(t,"pause",c),Rce(t,"seeked",c),Rce(t,"play",(()=>{t.ended||$ue(t.currentTime,t.duration)&&(t.currentTime=t.seekable.length?t.seekable.start(0):0)}))}else n&&l?(n.once(pce.Events.LEVEL_LOADED,((e,r)=>{_ue(r.details,t,n),u(),Fue(t)===Ece.LIVE&&!Number.isFinite(t.duration)&&(n.on(pce.Events.LEVEL_UPDATED,u),Rce(t,"durationchange",(()=>{Number.isFinite(t.duration)&&n.off(pce.Events.LEVELS_UPDATED,u)})))})),n.on(pce.Events.ERROR,((n,r)=>{ide(t,ade(r,e))})),t.addEventListener("error",ode),Rce(t,"waiting",c),zce(e,n),function(e,t){t.on(pce.Events.NON_NATIVE_TEXT_TRACKS_FOUND,((n,r)=>{let{tracks:i}=r;i.forEach((n=>{var r,i;let o=null!=(r=n.subtitleTrack)?r:n.closedCaptions,a=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i}=e;return t==(null==o?void 0:o.lang)&&r===n.label&&i.toLowerCase()===n.kind})),s=(null!=(i=n._id)?i:n.default)?"default":`${n.kind}${a}`;qce(e,n.kind,n.label,null==o?void 0:o.lang,s,n.default)}))}));let n=()=>{if(!t.subtitleTracks.length)return;let n=Array.from(e.textTracks).find((e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)));if(!n)return;let r=t.subtitleTracks[t.subtitleTrack],i=r?r.default?"default":`${t.subtitleTracks[t.subtitleTrack].type.toLowerCase()}${t.subtitleTrack}`:void 0;if(t.subtitleTrack<0||(null==n?void 0:n.id)!==i){let e=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i,default:o}=e;return"default"===n.id&&o||t==n.language&&r===n.label&&i.toLowerCase()===n.kind}));t.subtitleTrack=e}(null==n?void 0:n.id)===i&&n.cues&&Array.from(n.cues).forEach((e=>{n.addCue(e)}))};e.textTracks.addEventListener("change",n),t.on(pce.Events.CUES_PARSED,((t,n)=>{let{track:r,cues:i}=n,o=e.textTracks.getTrackById(r);if(!o)return;let a="disabled"===o.mode;a&&(o.mode="hidden"),i.forEach((e=>{var t;null!=(t=o.cues)&&t.getCueById(e.id)||o.addCue(e)})),a&&(o.mode="disabled")})),t.once(pce.Events.DESTROYING,(()=>{e.textTracks.removeEventListener("change",n),e.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}));let r=()=>{Array.from(e.textTracks).forEach((t=>{var n,r;if(!["subtitles","caption"].includes(t.kind)&&("thumbnails"===t.label||"chapters"===t.kind)){if(null==(n=t.cues)||!n.length){let n="track";t.kind&&(n+=`[kind="${t.kind}"]`),t.label&&(n+=`[label="${t.label}"]`);let i=e.querySelector(n),o=null!=(r=null==i?void 0:i.getAttribute("src"))?r:"";null==i||i.removeAttribute("src"),setTimeout((()=>{null==i||i.setAttribute("src",o)}),0)}"hidden"!==t.mode&&(t.mode="hidden")}}))};t.once(pce.Events.MANIFEST_LOADED,r),t.once(pce.Events.MEDIA_ATTACHED,r)}(t,n),n.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function nde(e){var t;let n=e.target,r=null==(t=Cue.get(n))?void 0:t.startTime;if(r&&function(e,t,n){t&&n>t&&(n=t);for(let r=0;r<e.length;r++)if(e.start(r)<=n&&e.end(r)>=n)return!0;return!1}(n.seekable,n.duration,r)){let e="auto"===n.preload;e&&(n.preload="none"),n.currentTime=r,e&&(n.preload="auto")}}async function rde(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(null==t||!t.error)return;let{message:n,code:r}=t.error,i=new bce(n,r);if(t.src&&r===bce.MEDIA_ERR_SRC_NOT_SUPPORTED&&t.readyState===HTMLMediaElement.HAVE_NOTHING)setTimeout((()=>{var e;let n=null!=(e=jue(t))?e:t.error;(null==n?void 0:n.code)===bce.MEDIA_ERR_SRC_NOT_SUPPORTED&&ide(t,i)}),500);else{if(t.src&&(r!==bce.MEDIA_ERR_DECODE||void 0!==r))try{let{status:e}=await fetch(t.src);i.data={response:{code:e}}}catch{}ide(t,i)}}function ide(e,t){var n;t.fatal&&((null!=(n=Cue.get(e))?n:{}).error=t,e.dispatchEvent(new CustomEvent("error",{detail:t})))}function ode(e){var t,n;if(!(e instanceof CustomEvent)||!(e.detail instanceof bce))return;let r=e.target,i=e.detail;!i||!i.fatal||((null!=(t=Cue.get(r))?t:{}).error=i,null==(n=r.mux)||n.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var ade=(e,t)=>{var n,r,i;console.error("getErrorFromHlsErrorData()",e);let o,a={[pce.ErrorTypes.NETWORK_ERROR]:bce.MEDIA_ERR_NETWORK,[pce.ErrorTypes.MEDIA_ERROR]:bce.MEDIA_ERR_DECODE,[pce.ErrorTypes.KEY_SYSTEM_ERROR]:bce.MEDIA_ERR_ENCRYPTED},s=(e=>[pce.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,pce.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(e.details)?bce.MEDIA_ERR_NETWORK:a[e.type])(e);if(s===bce.MEDIA_ERR_NETWORK&&e.response){let i=null!=(n=(e=>e.type===pce.ErrorTypes.KEY_SYSTEM_ERROR?mce:e.type===pce.ErrorTypes.NETWORK_ERROR?fce:void 0)(e))?n:fce;o=null!=(r=cue(e.response,i,t,e.fatal))?r:new bce("",s,e.fatal)}else if(s===bce.MEDIA_ERR_ENCRYPTED)if(e.details===pce.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let t=Uce("Attempting to play DRM-protected content without providing a DRM token.");o=new bce(t,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_MISSING_TOKEN}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let t=Uce("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");o=new bce(t,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_NO_SESSION){let e=Uce("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");o=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!0),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let t=Uce("Failed to update DRM license. This may be an issue with the player or your protected content.");o=new bce(t,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let t=Uce("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");o=new bce(t,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let t=Uce("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");o=new bce(t,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_CDM_ERROR}else if(e.details===pce.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let e=Uce("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");o=new bce(e,bce.MEDIA_ERR_ENCRYPTED,!1),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_OUTPUT_RESTRICTED}else o=new bce(e.error.message,bce.MEDIA_ERR_ENCRYPTED,e.fatal),o.errorCategory=mce,o.muxCode=gce.ENCRYPTED_ERROR;else o=new bce("",s,e.fatal);return o.context||(o.context=`${e.url?`url: ${e.url}\n`:""}${e.response&&(e.response.code||e.response.text)?`response: ${e.response.code}, ${e.response.text}\n`:""}${e.reason?`failure reason: ${e.reason}\n`:""}${e.level?`level: ${e.level}\n`:""}${e.parent?`parent stream controller: ${e.parent}\n`:""}${e.buffer?`buffer length: ${e.buffer}\n`:""}${e.error?`error: ${e.error}\n`:""}${e.event?`event: ${e.event}\n`:""}${e.err?`error message: ${null==(i=e.err)?void 0:i.message}\n`:""}`),o.data=e,o},sde=Object.defineProperty,lde=Object.getPrototypeOf,cde=Reflect.get,ude=e=>{throw TypeError(e)},dde=(e,t,n)=>((e,t,n)=>t in e?sde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),hde=(e,t,n)=>t.has(e)||ude("Cannot "+n),pde=(e,t,n)=>(hde(e,t,"read from private field"),n?n.call(e):t.get(e)),fde=(e,t,n)=>t.has(e)?ude("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),mde=(e,t,n,r)=>(hde(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),gde=(e,t,n)=>(hde(e,t,"access private method"),n),vde=(e,t,n)=>cde(lde(e),n,t),yde=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends yde{}globalThis.DocumentFragment=e}var bde,wde=class extends yde{},xde={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(wde)};bde=new WeakMap;var Ede={document:{createElement:function(e,t){return new wde}},DocumentFragment:DocumentFragment,customElements:xde,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fde(this,bde),mde(this,bde,null==t?void 0:t.detail)}get detail(){return pde(this,bde)}initCustomEvent(){}},EventTarget:yde,HTMLElement:wde,HTMLVideoElement:class extends yde{}},Ade="undefined"==typeof window||"undefined"==typeof globalThis.customElements,_de=Ade?Ede:globalThis,Sde=(Ade||globalThis.document,(()=>{try{return"0.25.1"}catch{}return"UNKNOWN"})()),Tde=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],kde=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Cde(e){return`\n    <style>\n      :host {\n        display: inline-flex;\n        line-height: 0;\n        flex-direction: column;\n        justify-content: end;\n      }\n\n      audio {\n        width: 100%;\n      }\n    </style>\n    <slot name="media">\n      <audio${Dde(e)}></audio>\n    </slot>\n    <slot></slot>\n  `}function Ide(e){return`\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot name="media">\n      <video${Dde(e)}></video>\n    </slot>\n    <slot></slot>\n  `}function Rde(e,t){let{tag:n,is:r}=t;var i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w;let x=null==(o=null==(i=globalThis.document)?void 0:i.createElement)?void 0:o.call(i,n,{is:r}),E=x?function(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n)){let e=Object.getOwnPropertyNames(n);t.push(...e)}return t}(x):[];return a=class extends e{constructor(){super(...arguments),fde(this,f),fde(this,u,!1),fde(this,d,null),fde(this,h,new Map),fde(this,p),dde(this,"get"),dde(this,"set"),dde(this,"call")}static get observedAttributes(){var e,t,n;return gde(e=a,l,c).call(e),[...null!=(n=null==(t=null==x?void 0:x.constructor)?void 0:t.observedAttributes)?n:[],...kde]}get nativeEl(){var e,t,r,i,o;return gde(this,f,m).call(this),null!=(o=null!=(i=null!=(t=null!=(e=pde(this,d))?e:this.querySelector(":scope > [slot=media]"))?t:this.querySelector(n))?i:null==(r=this.shadowRoot)?void 0:r.querySelector(n))?o:null}set nativeEl(e){mde(this,d,e)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",e)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){var e,t;return null!=(t=this.getAttribute("preload"))?t:null==(e=this.nativeEl)?void 0:e.preload}set preload(e){this.setAttribute("preload",`${e}`)}init(){var e;if(!this.shadowRoot){this.attachShadow({mode:"open"});let e=function(e){let t={};for(let n of e)t[n.name]=n.value;return t}(this.attributes);r&&(e.is=r),n&&(e.part=n),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.nativeEl.muted=this.hasAttribute("muted");for(let t of E)gde(this,f,b).call(this,t);mde(this,p,new MutationObserver(gde(this,f,v).bind(this))),this.shadowRoot.addEventListener("slotchange",this),gde(this,f,g).call(this);for(let t of this.constructor.Events)null==(e=this.shadowRoot)||e.addEventListener(t,this,!0)}handleEvent(e){"slotchange"!==e.type?e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail})):gde(this,f,g).call(this)}attributeChangedCallback(e,t,n){gde(this,f,m).call(this),gde(this,f,w).call(this,e,t,n)}connectedCallback(){gde(this,f,m).call(this)}},s=new WeakMap,l=new WeakSet,c=function(){if(pde(this,s))return;mde(this,s,!0);let e=new Set(this.observedAttributes);e.delete("muted");for(let t of E)if(!(t in this.prototype))if("function"==typeof x[t])this.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gde(this,f,m).call(this),(()=>{var e;if(this.call)return this.call(t,...n);let r=null==(e=this.nativeEl)?void 0:e[t];return null==r?void 0:r.apply(this.nativeEl,n)})()};else{let n={get(){var n,r,i;gde(this,f,m).call(this);let o=t.toLowerCase();if(e.has(o)){let e=this.getAttribute(o);return null!==e&&(""===e||e)}return null!=(i=null==(n=this.get)?void 0:n.call(this,t))?i:null==(r=this.nativeEl)?void 0:r[t]}};t!==t.toUpperCase()&&(n.set=function(n){gde(this,f,m).call(this);let r=t.toLowerCase();e.has(r)?!0===n||!1===n||null==n?this.toggleAttribute(r,!!n):this.setAttribute(r,n):this.set?this.set(t,n):this.nativeEl&&(this.nativeEl[t]=n)}),Object.defineProperty(this.prototype,t,n)}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakSet,m=function(){pde(this,u)||(mde(this,u,!0),this.init())},g=function(){var e;let t=new Map(pde(this,h)),n=null==(e=this.shadowRoot)?void 0:e.querySelector("slot:not([name])");(null==n?void 0:n.assignedElements({flatten:!0}).filter((e=>["track","source"].includes(e.localName)))).forEach((e=>{var n,r;t.delete(e);let i=pde(this,h).get(e);i||(i=e.cloneNode(),pde(this,h).set(e,i),null==(n=pde(this,p))||n.observe(e,{attributes:!0})),null==(r=this.nativeEl)||r.append(i),gde(this,f,y).call(this,i)})),t.forEach(((e,t)=>{e.remove(),pde(this,h).delete(t)}))},v=function(e){var t;for(let n of e)if("attributes"===n.type){let{target:e,attributeName:r}=n,i=pde(this,h).get(e);i&&r&&(i.setAttribute(r,null!=(t=e.getAttribute(r))?t:""),gde(this,f,y).call(this,i))}},y=function(e){e&&"track"===e.localName&&e.default&&("chapters"===e.kind||"metadata"===e.kind)&&"disabled"===e.track.mode&&(e.track.mode="hidden")},b=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}},w=function(e,t,n){var r,i,o;["id","class"].includes(e)||!a.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(null===n?null==(r=this.nativeEl)||r.removeAttribute(e):(null==(i=this.nativeEl)?void 0:i.getAttribute(e))!==n&&(null==(o=this.nativeEl)||o.setAttribute(e,n)))},fde(a,l),dde(a,"getTemplateHTML",n.endsWith("audio")?Cde:Ide),dde(a,"shadowRootOptions",{mode:"open"}),dde(a,"Events",Tde),fde(a,s,!1),a}function Dde(e){let t="";for(let n in e){if(!kde.includes(n))continue;let r=e[n];t+=""===r?` ${n}`:` ${n}="${r}"`}return t}var Lde,Pde,Mde=Rde(null!=(Lde=globalThis.HTMLElement)?Lde:class{},{tag:"video"}),Nde=(Rde(null!=(Pde=globalThis.HTMLElement)?Pde:class{},{tag:"audio"}),new WeakMap),Ode=class extends Error{},jde=class extends Error{},Fde=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],Ude=globalThis.WeakRef?class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach((t=>{let n=t.deref();n&&e(n)}))}}:Set;function Bde(){var e,t;return null==(t=null==(e=globalThis.cast)?void 0:e.framework)?void 0:t.CastContext.getInstance()}function $de(){var e;return null==(e=Bde())?void 0:e.getCurrentSession()}function Vde(){var e;return null==(e=$de())?void 0:e.getSessionObj().media[0]}function Wde(e){return Bde().setOptions({receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})}var zde,Hde=new Ude,qde=new WeakSet;!function(e){var t,n,r;null!=(n=null==(t=globalThis.chrome)?void 0:t.cast)&&n.isAvailable?null!=(r=globalThis.cast)&&r.framework?e():customElements.whenDefined("google-cast-button").then(e):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(e)}}((()=>{var e,t,n,r;null!=(t=null==(e=globalThis.chrome)?void 0:e.cast)&&t.isAvailable?zde||(zde=cast.framework,Bde().addEventListener(zde.CastContextEventType.CAST_STATE_CHANGED,(e=>{Hde.forEach((t=>{var n,r;return null==(r=(n=Nde.get(t)).onCastStateChanged)?void 0:r.call(n,e)}))})),Bde().addEventListener(zde.CastContextEventType.SESSION_STATE_CHANGED,(e=>{Hde.forEach((t=>{var n,r;return null==(r=(n=Nde.get(t)).onSessionStateChanged)?void 0:r.call(n,e)}))})),Hde.forEach((e=>{var t,n;return null==(n=(t=Nde.get(e)).init)?void 0:n.call(t)}))):console.debug("chrome.cast.isAvailable",null==(r=null==(n=globalThis.chrome)?void 0:n.cast)?void 0:r.isAvailable)}));var Gde,Kde,Yde,Qde,Xde,Zde,Jde,ehe,the,nhe,rhe,ihe,ohe,ahe,she,lhe,che=0,uhe=class extends EventTarget{constructor(e){super(),fde(this,the),fde(this,Gde),fde(this,Kde),fde(this,Yde),fde(this,Qde),fde(this,Xde,"disconnected"),fde(this,Zde,!1),fde(this,Jde,new Set),fde(this,ehe,new WeakMap),mde(this,Gde,e),Hde.add(this),Nde.set(this,{init:()=>gde(this,the,ahe).call(this),onCastStateChanged:()=>gde(this,the,ihe).call(this),onSessionStateChanged:()=>gde(this,the,ohe).call(this),getCastPlayer:()=>pde(this,the,nhe)}),gde(this,the,ahe).call(this)}get state(){return pde(this,Xde)}async watchAvailability(e){if(pde(this,Gde).disableRemotePlayback)throw new Ode("disableRemotePlayback attribute is present.");return pde(this,ehe).set(e,++che),pde(this,Jde).add(e),che}async cancelWatchAvailability(e){if(pde(this,Gde).disableRemotePlayback)throw new Ode("disableRemotePlayback attribute is present.");e?pde(this,Jde).delete(e):pde(this,Jde).clear()}async prompt(){var e,t,n,r;if(pde(this,Gde).disableRemotePlayback)throw new Ode("disableRemotePlayback attribute is present.");if(null==(t=null==(e=globalThis.chrome)?void 0:e.cast)||!t.isAvailable)throw new jde("The RemotePlayback API is disabled on this platform.");let i=qde.has(pde(this,Gde));qde.add(pde(this,Gde)),Wde(pde(this,Gde).castOptions),Object.entries(pde(this,Qde)).forEach((e=>{let[t,n]=e;pde(this,Yde).controller.addEventListener(t,n)}));try{await Bde().requestSession()}catch(mk){if("cancel"===mk)return void(i||qde.delete(pde(this,Gde)));throw new Error(mk)}null==(r=null==(n=Nde.get(pde(this,Gde)))?void 0:n.loadOnPrompt)||r.call(n)}};Gde=new WeakMap,Kde=new WeakMap,Yde=new WeakMap,Qde=new WeakMap,Xde=new WeakMap,Zde=new WeakMap,Jde=new WeakMap,ehe=new WeakMap,the=new WeakSet,nhe=function(){if(qde.has(pde(this,Gde)))return pde(this,Yde)},rhe=function(){qde.has(pde(this,Gde))&&(Object.entries(pde(this,Qde)).forEach((e=>{let[t,n]=e;pde(this,Yde).controller.removeEventListener(t,n)})),qde.delete(pde(this,Gde)),pde(this,Gde).muted=pde(this,Yde).isMuted,pde(this,Gde).currentTime=pde(this,Yde).savedPlayerState.currentTime,!1===pde(this,Yde).savedPlayerState.isPaused&&pde(this,Gde).play())},ihe=function(){let e=Bde().getCastState();if(qde.has(pde(this,Gde))&&"CONNECTING"===e&&(mde(this,Xde,"connecting"),this.dispatchEvent(new Event("connecting"))),!pde(this,Zde)&&null!=e&&e.includes("CONNECT")){mde(this,Zde,!0);for(let e of pde(this,Jde))e(!0)}else if(pde(this,Zde)&&(!e||"NO_DEVICES_AVAILABLE"===e)){mde(this,Zde,!1);for(let e of pde(this,Jde))e(!1)}},ohe=async function(){var e;let{SESSION_RESUMED:t}=zde.SessionState;if(Bde().getSessionState()===t&&pde(this,Gde).castSrc===(null==(e=Vde())?void 0:e.media.contentId)){qde.add(pde(this,Gde)),Object.entries(pde(this,Qde)).forEach((e=>{let[t,n]=e;pde(this,Yde).controller.addEventListener(t,n)}));try{await function(e){return new Promise(((t,n)=>{Vde().getStatus(e,t,n)}))}(new chrome.cast.media.GetStatusRequest)}catch(ak){console.error(ak)}pde(this,Qde)[zde.RemotePlayerEventType.IS_PAUSED_CHANGED](),pde(this,Qde)[zde.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},ahe=function(){!zde||pde(this,Kde)||(mde(this,Kde,!0),Wde(pde(this,Gde).castOptions),pde(this,Gde).textTracks.addEventListener("change",(()=>gde(this,the,lhe).call(this))),gde(this,the,ihe).call(this),mde(this,Yde,new zde.RemotePlayer),new zde.RemotePlayerController(pde(this,Yde)),mde(this,Qde,{[zde.RemotePlayerEventType.IS_CONNECTED_CHANGED]:e=>{let{value:t}=e;!0===t?(mde(this,Xde,"connected"),this.dispatchEvent(new Event("connect"))):(gde(this,the,rhe).call(this),mde(this,Xde,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[zde.RemotePlayerEventType.DURATION_CHANGED]:()=>{pde(this,Gde).dispatchEvent(new Event("durationchange"))},[zde.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{pde(this,Gde).dispatchEvent(new Event("volumechange"))},[zde.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{pde(this,Gde).dispatchEvent(new Event("volumechange"))},[zde.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var e;null!=(e=pde(this,the,nhe))&&e.isMediaLoaded&&pde(this,Gde).dispatchEvent(new Event("timeupdate"))},[zde.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{pde(this,Gde).dispatchEvent(new Event("resize"))},[zde.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{pde(this,Gde).dispatchEvent(new Event(this.paused?"pause":"play"))},[zde.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=pde(this,the,nhe))?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&pde(this,Gde).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=pde(this,the,nhe))?void 0:t.playerState]))},[zde.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var e;null!=(e=pde(this,the,nhe))&&e.isMediaLoaded&&(await Promise.resolve(),gde(this,the,she).call(this))}}))},she=function(){gde(this,the,lhe).call(this)},lhe=async function(){var e,t,n,r,i;if(!pde(this,the,nhe))return;let o=(null!=(t=null==(e=pde(this,Yde).mediaInfo)?void 0:e.tracks)?t:[]).filter((e=>{let{type:t}=e;return t===chrome.cast.media.TrackType.TEXT})),a=[...pde(this,Gde).textTracks].filter((e=>{let{kind:t}=e;return"subtitles"===t||"captions"===t})),s=o.map((e=>{let{language:t,name:n,trackId:r}=e;var i;let{mode:o}=null!=(i=a.find((e=>e.language===t&&e.label===n)))?i:{};return!!o&&{mode:o,trackId:r}})).filter(Boolean),l=s.filter((e=>{let{mode:t}=e;return"showing"!==t})).map((e=>{let{trackId:t}=e;return t})),c=s.find((e=>{let{mode:t}=e;return"showing"===t})),u=null!=(i=null==(r=null==(n=$de())?void 0:n.getSessionObj().media[0])?void 0:r.activeTrackIds)?i:[],d=u;if(u.length&&(d=d.filter((e=>!l.includes(e)))),null!=c&&c.trackId&&(d=[...d,c.trackId]),d=[...new Set(d)],!((e,t)=>e.length===t.length&&e.every((e=>t.includes(e))))(u,d))try{let e=new chrome.cast.media.EditTracksInfoRequest(d);await function(e){return new Promise(((t,n)=>{Vde().editTracksInfo(e,t,n)}))}(e)}catch(Fs){console.error(Fs)}};var dhe=e=>{var t,n,r,i,o,a,s,l,c;return n=class extends e{constructor(){super(...arguments),fde(this,s),fde(this,r,{paused:!1}),fde(this,i,{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}),fde(this,o),fde(this,a)}get remote(){return pde(this,a)?pde(this,a):globalThis.chrome?(this.disableRemotePlayback||function(){var e;let t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(null!=(e=globalThis.chrome)&&e.cast||document.querySelector(`script[src="${t}"]`))return;let n=document.createElement("script");n.src=t,document.head.append(n)}(),Nde.set(this,{loadOnPrompt:()=>gde(this,s,c).call(this)}),mde(this,a,new uhe(this))):super.remote}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),"cast-receiver"===e&&n)pde(this,i).receiverApplicationId=n;else if(pde(this,s,l))switch(e){case"cast-stream-type":case"cast-src":this.load()}}async load(){var e,n;if(!pde(this,s,l))return super.load();let i=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);i.customData=this.castCustomData;let o=[...this.querySelectorAll("track")].filter((e=>{let{kind:t,src:n}=e;return n&&("subtitles"===t||"captions"===t)})),a=[],c=0;if(o.length&&(i.tracks=o.map((e=>{let t=++c;0===a.length&&"showing"===e.track.mode&&a.push(t);let n=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return n.trackContentId=e.src,n.trackContentType="text/vtt",n.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,n.name=e.label,n.language=e.srclang,n}))),"live"===this.castStreamType?i.streamType=chrome.cast.media.StreamType.LIVE:i.streamType=chrome.cast.media.StreamType.BUFFERED,i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.title=this.title,i.metadata.images=[{url:this.poster}],async function(e){try{let t=(await fetch(e,{method:"HEAD"})).headers.get("Content-Type");return Fde.some((e=>t===e))}catch(t){return console.error("Error while trying to get the Content-Type of the manifest",t),!1}}(this.castSrc)){let e=await async function(e){try{let t=await(await fetch(e)).text(),n=t,r=function(e){let t=e.split("\n"),n=[];for(let r=0;r<t.length;r++)if(t[r].trim().startsWith("#EXT-X-STREAM-INF")){let e=t[r+1]?t[r+1].trim():"";e&&!e.startsWith("#")&&n.push(e)}return n}(t);if(r.length>0){let t=new URL(r[0],e).toString();n=await(await fetch(t)).text()}let i=function(e){return e.split("\n").find((e=>!e.trim().startsWith("#")&&""!==e.trim()))}(n);return function(e){if(!e)return;let t=e.match(/\.([a-zA-Z0-9]+)(?:\?.*)?$/);return t?t[1]:null}(i)}catch(t){return void console.error("Error while trying to parse the manifest playlist",t)}}(this.castSrc);((null==e?void 0:e.includes("m4s"))||(null==e?void 0:e.includes("mp4")))&&(i.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,i.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4)}let u=new chrome.cast.media.LoadRequest(i);u.currentTime=null!=(e=super.currentTime)?e:0,u.autoplay=!pde(this,r).paused,u.activeTrackIds=a,await(null==(n=$de())?void 0:n.loadMedia(u)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(!pde(this,s,l))return super.play();pde(this,s,l).isPaused&&(null==(e=pde(this,s,l).controller)||e.playOrPause())}pause(){var e;pde(this,s,l)?pde(this,s,l).isPaused||null==(e=pde(this,s,l).controller)||e.playOrPause():super.pause()}get castOptions(){return pde(this,i)}get castReceiver(){var e;return null!=(e=this.getAttribute("cast-receiver"))?e:void 0}set castReceiver(e){this.castReceiver!=e&&this.setAttribute("cast-receiver",`${e}`)}get castSrc(){var e,t,n;return null!=(n=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?n:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e,t;return null!=(t=null!=(e=this.getAttribute("cast-stream-type"))?e:this.streamType)?t:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get castCustomData(){return pde(this,o)}set castCustomData(e){let t=typeof e;["object","undefined"].includes(t)?mde(this,o,e):console.error(`castCustomData must be nullish or an object but value was of type ${t}`)}get readyState(){if(pde(this,s,l))switch(pde(this,s,l).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return pde(this,s,l)?pde(this,s,l).isPaused:super.paused}get muted(){var e;return pde(this,s,l)?null==(e=pde(this,s,l))?void 0:e.isMuted:super.muted}set muted(e){var t;pde(this,s,l)?(e&&!pde(this,s,l).isMuted||!e&&pde(this,s,l).isMuted)&&(null==(t=pde(this,s,l).controller)||t.muteOrUnmute()):super.muted=e}get volume(){var e,t;return pde(this,s,l)?null!=(t=null==(e=pde(this,s,l))?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(pde(this,s,l))return pde(this,s,l).volumeLevel=+e,void(null==(t=pde(this,s,l).controller)||t.setVolumeLevel());super.volume=e}get duration(){var e,t,n;return pde(this,s,l)&&null!=(e=pde(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=pde(this,s,l))?void 0:t.duration)?n:NaN:super.duration}get currentTime(){var e,t,n;return pde(this,s,l)&&null!=(e=pde(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=pde(this,s,l))?void 0:t.currentTime)?n:0:super.currentTime}set currentTime(e){var t;if(pde(this,s,l))return pde(this,s,l).currentTime=e,void(null==(t=pde(this,s,l).controller)||t.seek());super.currentTime=e}},r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakSet,l=function(){var e,t;return null==(t=null==(e=Nde.get(this.remote))?void 0:e.getCastPlayer)?void 0:t.call(e)},c=async function(){pde(this,r).paused=vde(n.prototype,this,"paused"),vde(n.prototype,this,"pause").call(this),this.muted=vde(n.prototype,this,"muted");try{await this.load()}catch(ck){console.error(ck)}},dde(n,"observedAttributes",[...null!=(t=e.observedAttributes)?t:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),n},hhe=class extends Event{constructor(e,t){super(e),dde(this,"track"),this.track=t.track}},phe=new WeakMap;function fhe(e){var t;return null!=(t=phe.get(e))?t:function(e,t){let n=phe.get(e);return n||phe.set(e,n={}),Object.assign(n,t)}(e,{})}function mhe(e,t){let n=e.videoTracks;fhe(t).media=e,fhe(t).renditionSet||(fhe(t).renditionSet=new Set);let r=fhe(n).trackSet;r.add(t);let i=r.size-1;i in Ehe.prototype||Object.defineProperty(Ehe.prototype,i,{get(){return[...fhe(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new hhe("addtrack",{track:t}))}))}function ghe(e){var t;let n=null==(t=fhe(e).media)?void 0:t.videoTracks;n&&(fhe(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new hhe("removetrack",{track:e}))})))}var vhe,yhe,bhe,whe,xhe,Ehe=class extends EventTarget{constructor(){super(),fde(this,whe),fde(this,vhe),fde(this,yhe),fde(this,bhe),fhe(this).trackSet=new Set}[Symbol.iterator](){return pde(this,whe,xhe).values()}get length(){return pde(this,whe,xhe).size}getTrackById(e){var t;return null!=(t=[...pde(this,whe,xhe)].find((t=>t.id===e)))?t:null}get selectedIndex(){return[...pde(this,whe,xhe)].findIndex((e=>e.selected))}get onaddtrack(){return pde(this,vhe)}set onaddtrack(e){pde(this,vhe)&&(this.removeEventListener("addtrack",pde(this,vhe)),mde(this,vhe,void 0)),"function"==typeof e&&(mde(this,vhe,e),this.addEventListener("addtrack",e))}get onremovetrack(){return pde(this,yhe)}set onremovetrack(e){pde(this,yhe)&&(this.removeEventListener("removetrack",pde(this,yhe)),mde(this,yhe,void 0)),"function"==typeof e&&(mde(this,yhe,e),this.addEventListener("removetrack",e))}get onchange(){return pde(this,bhe)}set onchange(e){pde(this,bhe)&&(this.removeEventListener("change",pde(this,bhe)),mde(this,bhe,void 0)),"function"==typeof e&&(mde(this,bhe,e),this.addEventListener("change",e))}};vhe=new WeakMap,yhe=new WeakMap,bhe=new WeakMap,whe=new WeakSet,xhe=function(){return fhe(this).trackSet};var Ahe=class extends Event{constructor(e,t){super(e),dde(this,"rendition"),this.rendition=t.rendition}};function _he(e){return[...fhe(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...fhe(e).renditionSet]))}var She,The,khe,Che=class extends EventTarget{constructor(){super(...arguments),fde(this,She),fde(this,The),fde(this,khe)}[Symbol.iterator](){return _he(this).values()}get length(){return _he(this).length}getRenditionById(e){var t;return null!=(t=_he(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return _he(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of _he(this).entries())n.selected=t===e}get onaddrendition(){return pde(this,She)}set onaddrendition(e){pde(this,She)&&(this.removeEventListener("addrendition",pde(this,She)),mde(this,She,void 0)),"function"==typeof e&&(mde(this,She,e),this.addEventListener("addrendition",e))}get onremoverendition(){return pde(this,The)}set onremoverendition(e){pde(this,The)&&(this.removeEventListener("removerendition",pde(this,The)),mde(this,The,void 0)),"function"==typeof e&&(mde(this,The,e),this.addEventListener("removerendition",e))}get onchange(){return pde(this,khe)}set onchange(e){pde(this,khe)&&(this.removeEventListener("change",pde(this,khe)),mde(this,khe,void 0)),"function"==typeof e&&(mde(this,khe,e),this.addEventListener("change",e))}};She=new WeakMap,The=new WeakMap,khe=new WeakMap;var Ihe,Rhe=class{constructor(){dde(this,"src"),dde(this,"id"),dde(this,"width"),dde(this,"height"),dde(this,"bitrate"),dde(this,"frameRate"),dde(this,"codec"),fde(this,Ihe,!1)}get selected(){return pde(this,Ihe)}set selected(e){pde(this,Ihe)!==e&&(mde(this,Ihe,e),function(e){let t=fhe(e).media.videoRenditions;!t||fhe(t).changeRequested||(fhe(t).changeRequested=!0,queueMicrotask((()=>{delete fhe(t).changeRequested,fhe(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}};Ihe=new WeakMap;var Dhe,Lhe=class{constructor(){dde(this,"id"),dde(this,"kind"),dde(this,"label",""),dde(this,"language",""),dde(this,"sourceBuffer"),fde(this,Dhe,!1)}addRendition(e,t,n,r,i,o){let a=new Rhe;return a.src=e,a.width=t,a.height=n,a.frameRate=o,a.bitrate=i,a.codec=r,function(e,t){let n=fhe(e).media.videoRenditions;fhe(t).media=fhe(e).media,fhe(t).track=e;let r=fhe(e).renditionSet;r.add(t);let i=r.size-1;i in Che.prototype||Object.defineProperty(Che.prototype,i,{get(){return _he(this)[i]}}),queueMicrotask((()=>{e.selected&&n.dispatchEvent(new Ahe("addrendition",{rendition:t}))}))}(this,a),a}removeRendition(e){!function(e){let t=fhe(e).media.videoRenditions,n=fhe(e).track;fhe(n).renditionSet.delete(e),queueMicrotask((()=>{fhe(e).track.selected&&t.dispatchEvent(new Ahe("removerendition",{rendition:e}))}))}(e)}get selected(){return pde(this,Dhe)}set selected(e){pde(this,Dhe)!==e&&(mde(this,Dhe,e),!0===e&&function(e){var t;let n=null!=(t=fhe(e).media.videoTracks)?t:[],r=!1;for(let i of n)i!==e&&(i.selected=!1,r=!0);if(r){if(fhe(n).changeRequested)return;fhe(n).changeRequested=!0,queueMicrotask((()=>{delete fhe(n).changeRequested,n.dispatchEvent(new Event("change"))}))}}(this))}};function Phe(e){return[...fhe(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...fhe(e).renditionSet]))}Dhe=new WeakMap;var Mhe,Nhe,Ohe,jhe=class extends EventTarget{constructor(){super(...arguments),fde(this,Mhe),fde(this,Nhe),fde(this,Ohe)}[Symbol.iterator](){return Phe(this).values()}get length(){return Phe(this).length}getRenditionById(e){var t;return null!=(t=Phe(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return Phe(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of Phe(this).entries())n.selected=t===e}get onaddrendition(){return pde(this,Mhe)}set onaddrendition(e){pde(this,Mhe)&&(this.removeEventListener("addrendition",pde(this,Mhe)),mde(this,Mhe,void 0)),"function"==typeof e&&(mde(this,Mhe,e),this.addEventListener("addrendition",e))}get onremoverendition(){return pde(this,Nhe)}set onremoverendition(e){pde(this,Nhe)&&(this.removeEventListener("removerendition",pde(this,Nhe)),mde(this,Nhe,void 0)),"function"==typeof e&&(mde(this,Nhe,e),this.addEventListener("removerendition",e))}get onchange(){return pde(this,Ohe)}set onchange(e){pde(this,Ohe)&&(this.removeEventListener("change",pde(this,Ohe)),mde(this,Ohe,void 0)),"function"==typeof e&&(mde(this,Ohe,e),this.addEventListener("change",e))}};Mhe=new WeakMap,Nhe=new WeakMap,Ohe=new WeakMap;var Fhe,Uhe=class{constructor(){dde(this,"src"),dde(this,"id"),dde(this,"bitrate"),dde(this,"codec"),fde(this,Fhe,!1)}get selected(){return pde(this,Fhe)}set selected(e){pde(this,Fhe)!==e&&(mde(this,Fhe,e),function(e){let t=fhe(e).media.audioRenditions;!t||fhe(t).changeRequested||(fhe(t).changeRequested=!0,queueMicrotask((()=>{delete fhe(t).changeRequested,fhe(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}};function Bhe(e,t){let n=e.audioTracks;fhe(t).media=e,fhe(t).renditionSet||(fhe(t).renditionSet=new Set);let r=fhe(n).trackSet;r.add(t);let i=r.size-1;i in Ghe.prototype||Object.defineProperty(Ghe.prototype,i,{get(){return[...fhe(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new hhe("addtrack",{track:t}))}))}function $he(e){var t;let n=null==(t=fhe(e).media)?void 0:t.audioTracks;n&&(fhe(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new hhe("removetrack",{track:e}))})))}Fhe=new WeakMap;var Vhe,Whe,zhe,Hhe,qhe,Ghe=class extends EventTarget{constructor(){super(),fde(this,Hhe),fde(this,Vhe),fde(this,Whe),fde(this,zhe),fhe(this).trackSet=new Set}[Symbol.iterator](){return pde(this,Hhe,qhe).values()}get length(){return pde(this,Hhe,qhe).size}getTrackById(e){var t;return null!=(t=[...pde(this,Hhe,qhe)].find((t=>t.id===e)))?t:null}get onaddtrack(){return pde(this,Vhe)}set onaddtrack(e){pde(this,Vhe)&&(this.removeEventListener("addtrack",pde(this,Vhe)),mde(this,Vhe,void 0)),"function"==typeof e&&(mde(this,Vhe,e),this.addEventListener("addtrack",e))}get onremovetrack(){return pde(this,Whe)}set onremovetrack(e){pde(this,Whe)&&(this.removeEventListener("removetrack",pde(this,Whe)),mde(this,Whe,void 0)),"function"==typeof e&&(mde(this,Whe,e),this.addEventListener("removetrack",e))}get onchange(){return pde(this,zhe)}set onchange(e){pde(this,zhe)&&(this.removeEventListener("change",pde(this,zhe)),mde(this,zhe,void 0)),"function"==typeof e&&(mde(this,zhe,e),this.addEventListener("change",e))}};Vhe=new WeakMap,Whe=new WeakMap,zhe=new WeakMap,Hhe=new WeakSet,qhe=function(){return fhe(this).trackSet};var Khe,Yhe=class{constructor(){dde(this,"id"),dde(this,"kind"),dde(this,"label",""),dde(this,"language",""),dde(this,"sourceBuffer"),fde(this,Khe,!1)}addRendition(e,t,n){let r=new Uhe;return r.src=e,r.codec=t,r.bitrate=n,function(e,t){let n=fhe(e).media.audioRenditions;fhe(t).media=fhe(e).media,fhe(t).track=e;let r=fhe(e).renditionSet;r.add(t);let i=r.size-1;i in jhe.prototype||Object.defineProperty(jhe.prototype,i,{get(){return Phe(this)[i]}}),queueMicrotask((()=>{e.enabled&&n.dispatchEvent(new Ahe("addrendition",{rendition:t}))}))}(this,r),r}removeRendition(e){!function(e){let t=fhe(e).media.audioRenditions,n=fhe(e).track;fhe(n).renditionSet.delete(e),queueMicrotask((()=>{fhe(e).track.enabled&&t.dispatchEvent(new Ahe("removerendition",{rendition:e}))}))}(e)}get enabled(){return pde(this,Khe)}set enabled(e){pde(this,Khe)!==e&&(mde(this,Khe,e),function(e){let t=fhe(e).media.audioTracks;!t||fhe(t).changeRequested||(fhe(t).changeRequested=!0,queueMicrotask((()=>{delete fhe(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}};Khe=new WeakMap;var Qhe=Jhe(globalThis.HTMLMediaElement,"video"),Xhe=Jhe(globalThis.HTMLMediaElement,"audio");function Zhe(e){if(null==e||!e.prototype)return e;let t=Jhe(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){var t;let n=fhe(e).videoTracks;if(!n&&(n=new Ehe,fhe(e).videoTracks=n,Qhe)){let r=Qhe.call(null!=(t=e.nativeEl)?t:e);for(let t of r)mhe(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof Lhe)))for(let e of r)ghe(e);else mhe(e,t.track)})),r.addEventListener("removetrack",(e=>{ghe(e.track)}))}return n}(this)}});let n=Jhe(e,"audio");(!n||`${n}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){var t;let n=fhe(e).audioTracks;if(!n&&(n=new Ghe,fhe(e).audioTracks=n,Xhe)){let r=Xhe.call(null!=(t=e.nativeEl)?t:e);for(let t of r)Bhe(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof Yhe)))for(let e of r)$he(e);else Bhe(e,t.track)})),r.addEventListener("removetrack",(e=>{$he(e.track)}))}return n}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Lhe;return r.kind=e,r.label=t,r.language=n,mhe(this,r),r}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=ghe),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Yhe;return r.kind=e,r.label=t,r.language=n,Bhe(this,r),r}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=$he),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return r(this)}});let r=e=>{let t=fhe(e).videoRenditions;return t||(t=new Che,fhe(t).media=e,fhe(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return i(this)}});let i=e=>{let t=fhe(e).audioRenditions;return t||(t=new jhe,fhe(t).media=e,fhe(e).audioRenditions=t),t};return e}function Jhe(e,t){var n;if(null!=e&&e.prototype)return null==(n=Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`))?void 0:n.get}Tde.push("castchange","entercast","leavecast");var epe,tpe,npe,rpe,ipe,ope,ape,spe,lpe,cpe,upe,dpe={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},hpe=Object.values(dpe),ppe=Sde,fpe="mux-video",mpe=class extends Mde{constructor(){super(),fde(this,cpe),fde(this,epe),fde(this,tpe),fde(this,npe),fde(this,rpe,{}),fde(this,ipe,{}),fde(this,ope),fde(this,ape),fde(this,spe),fde(this,lpe),mde(this,npe,Lue())}static get NAME(){return fpe}static get VERSION(){return ppe}static get observedAttributes(){var e;return[...hpe,...null!=(e=Mde.observedAttributes)?e:[]]}static getTemplateHTML(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=super.getTemplateHTML(e),n="false"!==e.logo&&void 0!==e.logo,r=e.logo&&""!==e.logo,i=e.logo;return`\n      ${t}\n      ${n?`\n      <style>\n        :host {\n          position: relative;\n        }\n        :host slot[name="logo"] {\n          display: flex;\n          justify-content: end;\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n\n        }\n         :host slot[name="logo"] .logo{\n          width: 5rem;\n          pointer-events: none;\n          user-select: none;\n         }\n      </style>\n      <slot name="logo">\n        ${r?`<img class="logo" part="logo" src="${i}" />`:'\n<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="logo" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>'}\n      </slot>\n    `:""}\n    `}get preferCmcd(){var e;return null!=(e=this.getAttribute(dpe.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?Tce.includes(e)?this.setAttribute(dpe.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${Tce.join()}`):this.removeAttribute(dpe.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(dpe.PLAYER_INIT_TIME)?+this.getAttribute(dpe.PLAYER_INIT_TIME):pde(this,npe)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(dpe.PLAYER_INIT_TIME):this.setAttribute(dpe.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=pde(this,spe))?e:fpe}set playerSoftwareName(e){mde(this,spe,e)}get playerSoftwareVersion(){var e;return null!=(e=pde(this,ape))?e:ppe}set playerSoftwareVersion(e){mde(this,ape,e)}get _hls(){var e;return null==(e=pde(this,epe))?void 0:e.engine}get mux(){var e;return null==(e=this.nativeEl)?void 0:e.mux}get error(){var e;return null!=(e=jue(this.nativeEl))?e:null}get errorTranslator(){return pde(this,lpe)}set errorTranslator(e){mde(this,lpe,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(dpe.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(dpe.TYPE,e):this.removeAttribute(dpe.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(dpe.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(dpe.DEBUG,""):this.removeAttribute(dpe.DEBUG))}get disableTracking(){return this.hasAttribute(dpe.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(dpe.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(dpe.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(dpe.DISABLE_COOKIES,""):this.removeAttribute(dpe.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(dpe.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(dpe.START_TIME):this.setAttribute(dpe.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(dpe.PLAYBACK_ID)?this.getAttribute(dpe.PLAYBACK_ID):null!=(e=Oue(this.src))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(dpe.PLAYBACK_ID,e):this.removeAttribute(dpe.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(dpe.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(dpe.MAX_RESOLUTION,e):this.removeAttribute(dpe.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(dpe.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(dpe.MIN_RESOLUTION,e):this.removeAttribute(dpe.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(dpe.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(dpe.RENDITION_ORDER,e):this.removeAttribute(dpe.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(dpe.PROGRAM_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programStartTime(e){null==e?this.removeAttribute(dpe.PROGRAM_START_TIME):this.setAttribute(dpe.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(dpe.PROGRAM_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programEndTime(e){null==e?this.removeAttribute(dpe.PROGRAM_END_TIME):this.setAttribute(dpe.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(dpe.ASSET_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetStartTime(e){null==e?this.removeAttribute(dpe.ASSET_START_TIME):this.setAttribute(dpe.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(dpe.ASSET_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetEndTime(e){null==e?this.removeAttribute(dpe.ASSET_END_TIME):this.setAttribute(dpe.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return null!=(e=this.getAttribute(dpe.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(dpe.CUSTOM_DOMAIN,e):this.removeAttribute(dpe.CUSTOM_DOMAIN))}get drmToken(){var e;return null!=(e=this.getAttribute(dpe.DRM_TOKEN))?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(dpe.DRM_TOKEN,e):this.removeAttribute(dpe.DRM_TOKEN))}get playbackToken(){var e,t,n,r;if(this.hasAttribute(dpe.PLAYBACK_TOKEN))return null!=(e=this.getAttribute(dpe.PLAYBACK_TOKEN))?e:void 0;if(this.hasAttribute(dpe.PLAYBACK_ID)){let[,e]=Dce(null!=(t=this.playbackId)?t:"");return null!=(n=new URLSearchParams(e).get("token"))?n:void 0}return this.src&&null!=(r=new URLSearchParams(this.src).get("token"))?r:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(dpe.PLAYBACK_TOKEN,e):this.removeAttribute(dpe.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(dpe.PLAYBACK_TOKEN),t=this.getAttribute(dpe.DRM_TOKEN);return{...pde(this,ipe),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{}}}set tokens(e){mde(this,ipe,null!=e?e:{})}get ended(){return Wue(this.nativeEl,this._hls)}get envKey(){var e;return null!=(e=this.getAttribute(dpe.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(dpe.ENV_KEY,e):this.removeAttribute(dpe.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(dpe.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(dpe.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(dpe.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(dpe.STREAM_TYPE))?e:Fue(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(dpe.STREAM_TYPE,e):this.removeAttribute(dpe.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(dpe.TARGET_LIVE_WINDOW)?+this.getAttribute(dpe.TARGET_LIVE_WINDOW):(e=>{var t,n;return null!=(n=null==(t=Cue.get(e))?void 0:t.targetLiveWindow)?n:Number.NaN})(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(dpe.TARGET_LIVE_WINDOW):this.setAttribute(dpe.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e,t;if(this.hasAttribute(dpe.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,r=null!=(e=this.nativeEl.seekable.end(0))?e:0,i=null!=(t=this.nativeEl.seekable.start(0))?t:0;return Math.max(i,r-n)}return(e=>{var t;let n=null==(t=Cue.get(e))?void 0:t.liveEdgeStartOffset;if("number"!=typeof n)return Number.NaN;let r=Uue(e);return r.length?r.end(r.length-1)-n:Number.NaN})(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(dpe.LIVE_EDGE_OFFSET))return+this.getAttribute(dpe.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(null==e?this.removeAttribute(dpe.LIVE_EDGE_OFFSET):this.setAttribute(dpe.LIVE_EDGE_OFFSET,""+ +e))}get seekable(){return Uue(this.nativeEl)}async addCuePoints(e){return Xce(this.nativeEl,e)}get activeCuePoint(){return Jce(this.nativeEl)}get cuePoints(){return function(e){let t=Gce(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:Yce}).label,"metadata");return null!=t&&t.cues?Array.from(t.cues,(e=>Zce(e))):[]}(this.nativeEl)}async addChapters(e){return rue(this.nativeEl,e)}get activeChapter(){return iue(this.nativeEl)}get chapters(){return function(e){var t;let n=Gce(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:eue}).label,"chapters");return null!=(t=null==n?void 0:n.cues)&&t.length?Array.from(n.cues,(e=>nue(e))):[]}(this.nativeEl)}getStartDate(){return function(e,t){if(t){let n=t.playingDate;if(null!=n)return new Date(n.getTime()-1e3*e.currentTime)}return"function"==typeof e.getStartDate?e.getStartDate():new Date(NaN)}(this.nativeEl,this._hls)}get currentPdt(){return function(e,t){if(t&&t.playingDate)return t.playingDate;if("function"==typeof e.getStartDate){let t=e.getStartDate();return new Date(t.getTime()+1e3*e.currentTime)}return new Date(NaN)}(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(dpe.PREFER_PLAYBACK);if(e===Ace||e===_ce)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Ace||e===_ce?this.setAttribute(dpe.PREFER_PLAYBACK,e):this.removeAttribute(dpe.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter((e=>e.startsWith("metadata-")&&![dpe.METADATA_URL].includes(e))).reduce(((e,t)=>{let n=this.getAttribute(t);return null!=n&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e}),{}),...pde(this,rpe)}}set metadata(e){mde(this,rpe,null!=e?e:{}),this.mux&&this.mux.emit("hb",pde(this,rpe))}get _hlsConfig(){return pde(this,ope)}set _hlsConfig(e){mde(this,ope,e)}get logo(){return this.getAttribute(dpe.LOGO)}set logo(e){e?this.setAttribute(dpe.LOGO,e):this.removeAttribute(dpe.LOGO)}load(){mde(this,epe,zue(this,this.nativeEl,pde(this,epe)))}unload(){Hue(this.nativeEl,pde(this,epe)),mde(this,epe,void 0)}attributeChangedCallback(e,t,n){var r,i;switch(Mde.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case dpe.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=n?n:void 0;break;case dpe.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=n?n:void 0;break;case"src":{let e=!!t,r=!!n;!e&&r?gde(this,cpe,upe).call(this):e&&!r?this.unload():e&&r&&(this.unload(),gde(this,cpe,upe).call(this));break}case"autoplay":if(n===t)break;null==(r=pde(this,epe))||r.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;null==(i=pde(this,epe))||i.setPreload(n);break;case dpe.PLAYBACK_ID:this.src=Mue(this);break;case dpe.DEBUG:{let e=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=e);break}case dpe.METADATA_URL:n&&fetch(n).then((e=>e.json())).then((e=>this.metadata=e)).catch((()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`)));break;case dpe.STREAM_TYPE:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case dpe.TARGET_LIVE_WINDOW:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}))}}connectedCallback(){var e;null==(e=super.connectedCallback)||e.call(this),this.nativeEl&&this.src&&!pde(this,epe)&&gde(this,cpe,upe).call(this)}disconnectedCallback(){this.unload()}};epe=new WeakMap,tpe=new WeakMap,npe=new WeakMap,rpe=new WeakMap,ipe=new WeakMap,ope=new WeakMap,ape=new WeakMap,spe=new WeakMap,lpe=new WeakMap,cpe=new WeakSet,upe=async function(){pde(this,tpe)||(await mde(this,tpe,Promise.resolve()),mde(this,tpe,null),this.load())};var gpe,vpe=class extends(dhe(Zhe(mpe))){constructor(){super(...arguments),fde(this,gpe)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return null!=(e=pde(this,gpe))?e:this.muxCastCustomData}set castCustomData(e){mde(this,gpe,e)}};gpe=new WeakMap,_de.customElements.get("mux-video")||(_de.customElements.define("mux-video",vpe),_de.MuxVideoElement=vpe);var ype,bpe,wpe,xpe,Epe,Ape,_pe,Spe,Tpe,kpe,Cpe,Ipe=vpe,Rpe=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Dpe=(e,t,n)=>(Rpe(e,t,"read from private field"),n?n.call(e):t.get(e)),Lpe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ppe=(e,t,n,r)=>(Rpe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Mpe={processCallback(e,t,n){if(n)for(const[r,i]of t)if(r in n){const e=n[r];"boolean"===typeof e&&i instanceof Vpe&&"boolean"===typeof i.element[i.attributeName]?i.booleanValue=e:"function"===typeof e&&i instanceof Vpe?i.element[i.attributeName]=e:i.value=e}}};class Npe extends A1.DocumentFragment{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mpe;var r;super(),Lpe(this,ype,void 0),Lpe(this,bpe,void 0),this.append(e.content.cloneNode(!0)),Ppe(this,ype,Ope(this)),Ppe(this,bpe,n),null==(r=n.createCallback)||r.call(n,this,Dpe(this,ype),t),n.processCallback(this,Dpe(this,ype),t)}update(e){Dpe(this,bpe).processCallback(this,Dpe(this,ype),e)}}ype=new WeakMap,bpe=new WeakMap;const Ope=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of e.attributes||[])if(i.value.includes("{{")){const o=new $pe;for([t,n]of Fpe(i.value))if(t){const t=new Vpe(e,i.name,i.namespaceURI);o.append(t),r.push([n,t])}else o.append(n);i.value=o.toString()}for(const i of e.childNodes)if(1!==i.nodeType||i instanceof HTMLTemplateElement){const o=i.data;if(1===i.nodeType||o.includes("{{")){const a=[];if(o)for([t,n]of Fpe(o))if(t){const t=new Wpe(e);a.push(t),r.push([n,t])}else a.push(new Text(n));else if(i instanceof HTMLTemplateElement){const t=new zpe(e,i);a.push(t),r.push([t.expression,t])}i.replaceWith(...a.flatMap((e=>e.replacementNodes||[e])))}}else Ope(i,r);return r},jpe={},Fpe=e=>{let t,n="",r=0,i=jpe[e],o=0;if(i)return i;for(i=[];t=e[o];o++)"{"===t&&"{"===e[o+1]&&"\\"!==e[o-1]&&e[o+2]&&1==++r?(n&&i.push([0,n]),n="",o++):"}"!==t||"}"!==e[o+1]||"\\"===e[o-1]||--r?n+=t||"":(i.push([1,n.trim()]),n="",o++);return n&&i.push([0,(r>0?"{{":"")+n]),jpe[e]=i};class Upe{get value(){return""}set value(e){}toString(){return this.value}}const Bpe=new WeakMap;class $pe{constructor(){Lpe(this,wpe,[])}[Symbol.iterator](){return Dpe(this,wpe).values()}get length(){return Dpe(this,wpe).length}item(e){return Dpe(this,wpe)[e]}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)r instanceof Vpe&&Bpe.set(r,this),Dpe(this,wpe).push(r)}toString(){return Dpe(this,wpe).join("")}}wpe=new WeakMap;class Vpe extends Upe{constructor(e,t,n){super(),Lpe(this,Spe),Lpe(this,xpe,""),Lpe(this,Epe,void 0),Lpe(this,Ape,void 0),Lpe(this,_pe,void 0),Ppe(this,Epe,e),Ppe(this,Ape,t),Ppe(this,_pe,n)}get attributeName(){return Dpe(this,Ape)}get attributeNamespace(){return Dpe(this,_pe)}get element(){return Dpe(this,Epe)}get value(){return Dpe(this,xpe)}set value(e){Dpe(this,xpe)!==e&&(Ppe(this,xpe,e),Dpe(this,Spe,Tpe)&&1!==Dpe(this,Spe,Tpe).length?Dpe(this,Epe).setAttributeNS(Dpe(this,_pe),Dpe(this,Ape),Dpe(this,Spe,Tpe).toString()):null==e?Dpe(this,Epe).removeAttributeNS(Dpe(this,_pe),Dpe(this,Ape)):Dpe(this,Epe).setAttributeNS(Dpe(this,_pe),Dpe(this,Ape),e))}get booleanValue(){return Dpe(this,Epe).hasAttributeNS(Dpe(this,_pe),Dpe(this,Ape))}set booleanValue(e){if(Dpe(this,Spe,Tpe)&&1!==Dpe(this,Spe,Tpe).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}xpe=new WeakMap,Epe=new WeakMap,Ape=new WeakMap,_pe=new WeakMap,Spe=new WeakSet,Tpe=function(){return Bpe.get(this)};class Wpe extends Upe{constructor(e,t){super(),Lpe(this,kpe,void 0),Lpe(this,Cpe,void 0),Ppe(this,kpe,e),Ppe(this,Cpe,t?[...t]:[new Text])}get replacementNodes(){return Dpe(this,Cpe)}get parentNode(){return Dpe(this,kpe)}get nextSibling(){return Dpe(this,Cpe)[Dpe(this,Cpe).length-1].nextSibling}get previousSibling(){return Dpe(this,Cpe)[0].previousSibling}get value(){return Dpe(this,Cpe).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}replace(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.flat().flatMap((e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]));r.length||r.push(new Text),Ppe(this,Cpe,function(e,t,n){let r,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0,l=n.length,c=t.length;for(;s<l&&s<c&&t[s]==n[s];)s++;for(;s<l&&s<c&&n[l-1]==t[c-1];)a=n[(--c,--l)];if(s==c)for(;s<l;)e.insertBefore(n[s++],a);if(s==l)for(;s<c;)e.removeChild(t[s++]);else{for(r=t[s];s<l;)o=n[s++],i=r?r.nextSibling:a,r==o?r=i:s<l&&n[s]==i?(e.replaceChild(o,r),r=i):e.insertBefore(o,r);for(;r!=a;)i=r.nextSibling,e.removeChild(r),r=i}return n}(Dpe(this,Cpe)[0].parentNode,Dpe(this,Cpe),r,this.nextSibling))}}kpe=new WeakMap,Cpe=new WeakMap;class zpe extends Wpe{constructor(e,t){const n=t.getAttribute("directive")||t.getAttribute("type");let r=t.getAttribute("expression")||t.getAttribute(n)||"";r.startsWith("{{")&&(r=r.trim().slice(2,-2).trim()),super(e),this.expression=r,this.template=t,this.directive=n}}const Hpe={string:e=>String(e)};class qpe{constructor(e){this.template=e,this.state=void 0}}const Gpe=new WeakMap,Kpe=new WeakMap,Ype={partial:(e,t)=>{t[e.expression]=new qpe(e.template)},if:(e,t)=>{var n;if(Jpe(e.expression,t))if(Gpe.get(e)!==e.template){Gpe.set(e,e.template);const n=new Npe(e.template,t,Xpe);e.replace(n),Kpe.set(e,n)}else null==(n=Kpe.get(e))||n.update(t);else e.replace(""),Gpe.delete(e),Kpe.delete(e)}},Qpe=Object.keys(Ype),Xpe={processCallback(e,t,n){var r,i;if(n)for(const[o,a]of t){if(a instanceof zpe){if(!a.directive){const e=Qpe.find((e=>a.template.hasAttribute(e)));e&&(a.directive=e,a.expression=a.template.getAttribute(e))}null==(r=Ype[a.directive])||r.call(Ype,a,n);continue}let e=Jpe(o,n);e instanceof qpe?Gpe.get(a)!==e.template?(Gpe.set(a,e.template),e=new Npe(e.template,e.state,Xpe),a.value=e,Kpe.set(a,e)):null==(i=Kpe.get(a))||i.update(e.state):e?(a instanceof Vpe&&a.attributeName.startsWith("aria-")&&(e=String(e)),a instanceof Vpe?"boolean"===typeof e?a.booleanValue=e:"function"===typeof e?a.element[a.attributeName]=e:a.value=e:(a.value=e,Gpe.delete(a),Kpe.delete(a))):a instanceof Vpe?a.value=void 0:(a.value=void 0,Gpe.delete(a),Kpe.delete(a))}}},Zpe={"!":e=>!e,"!!":e=>!!e,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"??":(e,t)=>null!=e?e:t,"|":(e,t)=>{var n;return null==(n=Hpe[t])?void 0:n.call(Hpe,e)}};function Jpe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,o,a,s,l;const c=function(e){return function(e,t){let n,r,i;const o=[];for(;e;){i=null,n=e.length;for(const o in t)r=t[o].exec(e),r&&r.index<n&&(i={token:r[0],type:o,matches:r.slice(1)},n=r.index);n&&o.push({token:e.substr(0,n),type:void 0}),i&&o.push(i),e=e.substr(n+(i?i.token.length:0))}return o}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter((e=>{let{type:t}=e;return"ws"!==t}))}(e);if(0===c.length||c.some((e=>{let{type:t}=e;return!t})))return efe(e);if(">"===(null==(n=c[0])?void 0:n.token)){const n=t[null==(r=c[1])?void 0:r.token];if(!n)return efe(e);const s={...t};n.state=s;const l=c.slice(2);for(let e=0;e<l.length;e+=3){const n=null==(i=l[e])?void 0:i.token,r=null==(o=l[e+1])?void 0:o.token,c=null==(a=l[e+2])?void 0:a.token;n&&"="===r&&(s[n]=nfe(c,t))}return n}if(1===c.length)return tfe(c[0])?nfe(c[0].token,t):efe(e);if(2===c.length){const n=null==(s=c[0])?void 0:s.token,r=Zpe[n];if(!r||!tfe(c[1]))return efe(e);return r(nfe(c[1].token,t))}if(3===c.length){const n=null==(l=c[1])?void 0:l.token,r=Zpe[n];if(!r||!tfe(c[0])||!tfe(c[2]))return efe(e);const i=nfe(c[0].token,t);if("|"===n)return r(i,c[2].token);return r(i,nfe(c[2].token,t))}}function efe(e){return console.warn(`Warning: invalid expression \`${e}\``),!1}function tfe(e){let{type:t}=e;return["number","boolean","string","param"].includes(t)}function nfe(e,t){const n=e[0],r=e.slice(-1);return"true"===e||"false"===e?"true"===e:n===r&&["'",'"'].includes(n)?e.slice(1,-1):a1(e)?parseFloat(e):t[e]}var rfe,ife,ofe,afe,sfe,lfe,cfe,ufe=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},dfe=(e,t,n)=>(ufe(e,t,"read from private field"),n?n.call(e):t.get(e)),hfe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},pfe=(e,t,n,r)=>(ufe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ffe=(e,t,n)=>(ufe(e,t,"access private method"),n);const mfe={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},gfe=_1.createElement("template");gfe.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 0;\n    }\n\n    media-controller {\n      width: 100%;\n      height: 100%;\n    }\n\n    media-captions-button:not([mediasubtitleslist]),\n    media-captions-menu:not([mediasubtitleslist]),\n    media-captions-menu-button:not([mediasubtitleslist]),\n    media-audio-track-menu[mediaaudiotrackunavailable],\n    media-audio-track-menu-button[mediaaudiotrackunavailable],\n    media-rendition-menu[mediarenditionunavailable],\n    media-rendition-menu-button[mediarenditionunavailable],\n    media-volume-range[mediavolumeunavailable],\n    media-airplay-button[mediaairplayunavailable],\n    media-fullscreen-button[mediafullscreenunavailable],\n    media-cast-button[mediacastunavailable],\n    media-pip-button[mediapipunavailable] {\n      display: none;\n    }\n  </style>\n";class vfe extends A1.HTMLElement{constructor(){super(),hfe(this,afe),hfe(this,lfe),hfe(this,rfe,void 0),hfe(this,ife,void 0),hfe(this,ofe,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver((e=>{var t;this.mediaController&&!(null==(t=this.mediaController)?void 0:t.breakpointsComputed)||e.some((e=>{const t=e.target;return t===this||"media-controller"===t.localName&&(!!mfe[e.attributeName]||!!e.attributeName.startsWith("breakpoint"))}))&&this.render()}));e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(W0.BREAKPOINTS_COMPUTED,this.render),ffe(this,afe,sfe).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return null!=(e=dfe(this,rfe))?e:this.constructor.template}set template(e){pfe(this,ofe,null),pfe(this,rfe,e),this.createRenderer()}get props(){var e,t,n;const r=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter((e=>{let{name:t}=e;return mfe[t]||t.startsWith("breakpoint")})),...Array.from(this.attributes)],i={};for(const o of r){const e=null!=(n=mfe[o.name])?n:i1(o.name);let{value:t}=o;null!=t?(a1(t)&&(t=parseFloat(t)),i[e]=""===t||t):i[e]=!1}return i}attributeChangedCallback(e,t,n){"template"===e&&t!=n&&ffe(this,lfe,cfe).call(this)}connectedCallback(){ffe(this,lfe,cfe).call(this)}createRenderer(){this.template&&this.template!==dfe(this,ife)&&(pfe(this,ife,this.template),this.renderer=new Npe(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(gfe.content.cloneNode(!0),this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}function yfe(e){let{anchor:t,floating:n,placement:r}=e;const i=function(e){let{anchor:t,floating:n}=e;return{anchor:bfe(t,n.offsetParent),floating:{x:0,y:0,width:n.offsetWidth,height:n.offsetHeight}}}({anchor:t,floating:n}),{x:o,y:a}=function(e,t){let{anchor:n,floating:r}=e;const i="x"===function(e){return["top","bottom"].includes(wfe(e))?"y":"x"}(t)?"y":"x",o="y"===i?"height":"width",a=wfe(t),s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,c=n[o]/2-r[o]/2;let u;switch(a){case"top":u={x:s,y:n.y-r.height};break;case"bottom":u={x:s,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:l};break;case"left":u={x:n.x-r.width,y:l};break;default:u={x:n.x,y:n.y}}switch(t.split("-")[1]){case"start":u[i]-=c;break;case"end":u[i]+=c}return u}(i,r);return{x:o,y:a}}function bfe(e,t){var n;const r=e.getBoundingClientRect(),i=null!=(n=null==t?void 0:t.getBoundingClientRect())?n:{x:0,y:0};return{x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}function wfe(e){return e.split("-")[0]}rfe=new WeakMap,ife=new WeakMap,ofe=new WeakMap,afe=new WeakSet,sfe=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},lfe=new WeakSet,cfe=function(){var e;const t=this.getAttribute("template");if(!t||t===dfe(this,ofe))return;const n=this.getRootNode(),r=null==(e=null==n?void 0:n.getElementById)?void 0:e.call(n,t);if(r)return pfe(this,ofe,t),pfe(this,rfe,r),void this.createRenderer();(function(e){if(!/^(\/|\.\/|https?:\/\/)/.test(e))return!1;const t=/^https?:\/\//.test(e)?void 0:location.origin;try{new URL(e,t)}catch(ok){return!1}return!0})(t)&&(pfe(this,ofe,t),async function(e){const t=await fetch(e);if(200!==t.status)throw new Error(`Failed to load resource: the server responded with a status of ${t.status}`);return t.text()}(t).then((e=>{const t=_1.createElement("template");t.innerHTML=e,pfe(this,rfe,t),this.createRenderer()})).catch(console.error))},vfe.observedAttributes=["template"],vfe.processor=Xpe,A1.customElements.get("media-theme")||A1.customElements.define("media-theme",vfe);class xfe extends Event{constructor(e){let{action:t="auto",relatedTarget:n,...r}=e;super("invoke",r),this.action=t,this.relatedTarget=n}}class Efe extends Event{constructor(e){let{newState:t,oldState:n,...r}=e;super("toggle",r),this.newState=t,this.oldState=n}}var Afe,_fe,Sfe,Tfe,kfe,Cfe,Ife,Rfe,Dfe,Lfe,Pfe,Mfe,Nfe,Ofe,jfe,Ffe,Ufe,Bfe,$fe,Vfe,Wfe,zfe,Hfe,qfe,Gfe,Kfe,Yfe,Qfe,Xfe,Zfe,Jfe,eme,tme,nme,rme,ime,ome,ame,sme,lme,cme,ume,dme,hme,pme=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},fme=(e,t,n)=>(pme(e,t,"read from private field"),n?n.call(e):t.get(e)),mme=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},gme=(e,t,n,r)=>(pme(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),vme=(e,t,n)=>(pme(e,t,"access private method"),n);function yme(e){let{type:t,text:n,value:r,checked:i}=e;const o=_1.createElement("media-chrome-menu-item");o.type=null!=t?t:"",o.part.add("menu-item"),t&&o.part.add(t),o.value=r,o.checked=i;const a=_1.createElement("span");return a.textContent=n,o.append(a),o}function bme(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);if("SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n)return n=n.cloneNode(!0),n;const r=e.shadowRoot.querySelector(`[name="${t}"] > svg`);return r?r.cloneNode(!0):""}const wme=_1.createElement("template");wme.innerHTML='\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));\n      border-radius: var(--media-menu-border-radius);\n      border: var(--media-menu-border, none);\n      display: var(--media-menu-display, inline-flex);\n      transition: var(--media-menu-transition-in,\n        visibility 0s,\n        opacity .2s ease-out,\n        transform .15s ease-out,\n        left .2s ease-in-out,\n        min-width .2s ease-in-out,\n        min-height .2s ease-in-out\n      ) !important;\n      \n      visibility: var(--media-menu-visibility, visible);\n      opacity: var(--media-menu-opacity, 1);\n      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));\n      transform: var(--media-menu-transform-in, translateY(0) scale(1));\n      flex-direction: column;\n      \n      min-height: 0;\n      position: relative;\n      bottom: var(--_menu-bottom);\n      box-sizing: border-box;\n    } \n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([hidden]) {\n      transition: var(--media-menu-transition-out,\n        visibility .15s ease-in,\n        opacity .15s ease-in,\n        transform .15s ease-in\n      ) !important;\n      visibility: var(--media-menu-hidden-visibility, hidden);\n      opacity: var(--media-menu-hidden-opacity, 0);\n      max-height: var(--media-menu-hidden-max-height,\n        var(--media-menu-max-height, var(--_menu-max-height, 300px)));\n      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));\n      pointer-events: none;\n    }\n\n    :host([slot="submenu"]) {\n      background: none;\n      width: 100%;\n      min-height: 100%;\n      position: absolute;\n      bottom: 0;\n      right: -100%;\n    }\n\n    #container {\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      transition: transform .2s ease-out;\n      transform: translate(0, 0);\n    }\n\n    #container.has-expanded {\n      transition: transform .2s ease-in;\n      transform: translate(-100%, 0);\n    }\n\n    button {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      outline: inherit;\n      display: inline-flex;\n      align-items: center;\n    }\n\n    slot[name="header"][hidden] {\n      display: none;\n    }\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .7em;\n      border-bottom: 1px solid rgb(255 255 255 / .25);\n      cursor: var(--media-cursor, default);\n    }\n\n    slot[name="header"] > button[part~="back"],\n    slot[name="header"]::slotted(button[part~="back"]) {\n      cursor: var(--media-cursor, pointer);\n    }\n\n    svg[part~="back"] {\n      height: var(--media-menu-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n      margin-right: .5ch;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap);\n      flex-direction: var(--media-menu-flex-direction, column);\n      overflow: var(--media-menu-overflow, hidden auto);\n      display: flex;\n      min-height: 0;\n    }\n\n    :host([role="menu"]) slot:not([name]) {\n      padding-block: .4em;\n    }\n\n    slot:not([name])::slotted([role="menu"]) {\n      background: none;\n    }\n\n    media-chrome-menu-item > span {\n      margin-right: .5ch;\n      max-width: var(--media-menu-item-max-width);\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  </style>\n  <style id="layout-row" media="width:0">\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .5em;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap, .25em);\n      flex-direction: var(--media-menu-flex-direction, row);\n      padding-inline: .5em;\n    }\n\n    media-chrome-menu-item {\n      padding: .3em .5em;\n    }\n\n    media-chrome-menu-item[aria-checked="true"] {\n      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));\n    }\n\n    \n    media-chrome-menu-item::part(checked-indicator) {\n      display: var(--media-menu-item-checked-indicator-display, none);\n    }\n  </style>\n  <div id="container">\n    <slot name="header" hidden>\n      <button part="back button" aria-label="Back to previous menu">\n        <slot name="back-icon">\n          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">\n            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>\n          </svg>\n        </slot>\n        <slot name="title"></slot>\n      </button>\n    </slot>\n    <slot></slot>\n  </div>\n  <slot name="checked-indicator" hidden></slot>\n';const xme="style",Eme="hidden",Ame="disabled",_me="anchor";class Sme extends A1.HTMLElement{constructor(){super(),mme(this,Rfe),mme(this,Pfe),mme(this,Nfe),mme(this,jfe),mme(this,Ufe),mme(this,Wfe),mme(this,Hfe),mme(this,Gfe),mme(this,Yfe),mme(this,Xfe),mme(this,Jfe),mme(this,tme),mme(this,rme),mme(this,ome),mme(this,sme),mme(this,cme),mme(this,dme),mme(this,Afe,null),mme(this,_fe,null),mme(this,Sfe,null),mme(this,Tfe,new Set),mme(this,kfe,void 0),mme(this,Cfe,!1),mme(this,Ife,null),mme(this,Lfe,(()=>{const e=fme(this,Tfe),t=new Set(this.items);for(const n of e)t.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of t)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));gme(this,Tfe,t)})),mme(this,$fe,(()=>{vme(this,Wfe,zfe).call(this),vme(this,Hfe,qfe).call(this,!1)})),mme(this,Vfe,(()=>{vme(this,Wfe,zfe).call(this)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),gme(this,kfe,new MutationObserver(fme(this,Lfe))),fme(this,kfe).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[Ame,Eme,xme,_me,U0.MEDIA_CONTROLLER]}static formatMenuItemText(e,t){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":vme(this,Rfe,Dfe).call(this,e);break;case"invoke":vme(this,Nfe,Ofe).call(this,e);break;case"click":vme(this,Gfe,Kfe).call(this,e);break;case"toggle":vme(this,Xfe,Zfe).call(this,e);break;case"focusout":vme(this,tme,nme).call(this,e);break;case"keydown":vme(this,rme,ime).call(this,e)}}connectedCallback(){var e,t;gme(this,Ife,B1(this.shadowRoot,":host")),vme(this,Pfe,Mfe).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),gme(this,Afe,D1(this)),null==(t=null==(e=fme(this,Afe))?void 0:e.associateElement)||t.call(e,this),this.hidden||(C1(kme(this),fme(this,$fe)),C1(this,fme(this,Vfe)))}disconnectedCallback(){var e,t;I1(kme(this),fme(this,$fe)),I1(this,fme(this,Vfe)),this.disable(),null==(t=null==(e=fme(this,Afe))?void 0:e.unassociateElement)||t.call(e,this),gme(this,Afe,null)}attributeChangedCallback(e,t,n){var r,i,o,a;e===Eme&&n!==t?(fme(this,Cfe)||gme(this,Cfe,!0),this.hidden?vme(this,Ufe,Bfe).call(this):vme(this,jfe,Ffe).call(this),this.dispatchEvent(new Efe({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===U0.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=fme(this,Afe))?void 0:r.unassociateElement)||i.call(r,this),gme(this,Afe,null)),n&&this.isConnected&&(gme(this,Afe,D1(this)),null==(a=null==(o=fme(this,Afe))?void 0:o.associateElement)||a.call(o,this))):e===Ame&&n!==t?null==n?this.enable():this.disable():e===xme&&n!==t&&vme(this,Pfe,Mfe).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?null==(e=j1(this))?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Tme)}get radioGroupItems(){return this.items.filter((e=>"menuitemradio"===e.role))}get checkedItems(){return this.items.filter((e=>e.checked))}get value(){var e,t;return null!=(t=null==(e=this.checkedItems[0])?void 0:e.value)?t:""}set value(e){const t=this.items.find((t=>t.value===e));t&&vme(this,dme,hme).call(this,t)}focus(){if(gme(this,_fe,O1()),this.items.length)return vme(this,cme,ume).call(this,this.items[0]),void this.items[0].focus();const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==e||e.focus()}handleSelect(e){var t;const n=vme(this,ome,ame).call(this,e);n&&(vme(this,dme,hme).call(this,n,"checkbox"===n.type),fme(this,Sfe)&&!this.hidden&&(null==(t=fme(this,_fe))||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,n;const{key:r}=e,i=this.items,o=null!=(n=null!=(t=vme(this,ome,ame).call(this,e))?t:vme(this,sme,lme).call(this))?n:i[0],a=i.indexOf(o);let s=Math.max(0,a);"ArrowDown"===r?s++:"ArrowUp"===r?s--:"Home"===e.key?s=0:"End"===e.key&&(s=i.length-1),s<0&&(s=i.length-1),s>i.length-1&&(s=0),vme(this,cme,ume).call(this,i[s]),i[s].focus()}}function Tme(e){return["menuitem","menuitemradio","menuitemcheckbox"].includes(null==e?void 0:e.role)}function kme(e){var t;return null!=(t=e.getAttribute("bounds")?N1(e,`#${e.getAttribute("bounds")}`):R1(e)||e.parentElement)?t:e}Afe=new WeakMap,_fe=new WeakMap,Sfe=new WeakMap,Tfe=new WeakMap,kfe=new WeakMap,Cfe=new WeakMap,Ife=new WeakMap,Rfe=new WeakSet,Dfe=function(e){const t=e.target;for(const n of t.assignedNodes({flatten:!0}))3===n.nodeType&&""===n.textContent.trim()&&n.remove();if(["header","title"].includes(t.name)){this.shadowRoot.querySelector('slot[name="header"]').hidden=0===t.assignedNodes().length}t.name||fme(this,Lfe).call(this)},Lfe=new WeakMap,Pfe=new WeakSet,Mfe=function(){var e;const t=this.shadowRoot.querySelector("#layout-row"),n=null==(e=getComputedStyle(this).getPropertyValue("--media-menu-layout"))?void 0:e.trim();t.setAttribute("media","row"===n?"":"width:0")},Nfe=new WeakSet,Ofe=function(e){gme(this,Sfe,e.relatedTarget),M1(this,e.relatedTarget)||(this.hidden=!this.hidden)},jfe=new WeakSet,Ffe=function(){var e;null==(e=fme(this,Sfe))||e.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",(()=>this.focus()),{once:!0}),C1(kme(this),fme(this,$fe)),C1(this,fme(this,Vfe))},Ufe=new WeakSet,Bfe=function(){var e;null==(e=fme(this,Sfe))||e.setAttribute("aria-expanded","false"),I1(kme(this),fme(this,$fe)),I1(this,fme(this,Vfe))},$fe=new WeakMap,Vfe=new WeakMap,Wfe=new WeakSet,zfe=function(e){if(this.hasAttribute("mediacontroller")&&!this.anchor)return;if(this.hidden||!this.anchorElement)return;const{x:t,y:n}=yfe({anchor:this.anchorElement,floating:this,placement:"top-start"});null!=e||(e=this.offsetWidth);const r=kme(this).getBoundingClientRect(),i=r.width-t-e,o=r.height-n-this.offsetHeight,{style:a}=fme(this,Ife);a.setProperty("position","absolute"),a.setProperty("right",`${Math.max(0,i)}px`),a.setProperty("--_menu-bottom",`${o}px`);const s=getComputedStyle(this),l=a.getPropertyValue("--_menu-bottom")===s.bottom?o:parseFloat(s.bottom),c=r.height-l-parseFloat(s.marginBottom);this.style.setProperty("--_menu-max-height",`${c}px`)},Hfe=new WeakSet,qfe=function(e){const t=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),n=null==t?void 0:t.querySelector('[role="menu"]'),{style:r}=fme(this,Ife);if(e||r.setProperty("--media-menu-transition-in","none"),n){const e=n.offsetHeight,r=Math.max(n.offsetWidth,t.offsetWidth);this.style.setProperty("min-width",`${r}px`),this.style.setProperty("min-height",`${e}px`),vme(this,Wfe,zfe).call(this,r)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),vme(this,Wfe,zfe).call(this);r.removeProperty("--media-menu-transition-in")},Gfe=new WeakSet,Kfe=function(e){var t;if(e.stopPropagation(),e.composedPath().includes(fme(this,Yfe,Qfe)))return null==(t=fme(this,_fe))||t.focus(),void(this.hidden=!0);const n=vme(this,ome,ame).call(this,e);n&&!n.hasAttribute("disabled")&&(vme(this,cme,ume).call(this,n),this.handleSelect(e))},Yfe=new WeakSet,Qfe=function(){var e;return null==(e=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))?void 0:e.find((e=>e.matches('button[part~="back"]')))},Xfe=new WeakSet,Zfe=function(e){if(e.target===this)return;vme(this,Jfe,eme).call(this);const t=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const n of t)n.invokeTargetElement!=e.target&&("open"!=e.newState||"true"!=n.getAttribute("aria-expanded")||n.invokeTargetElement.hidden||n.invokeTargetElement.dispatchEvent(new xfe({relatedTarget:n})));for(const n of t)n.setAttribute("aria-expanded",`${!n.submenuElement.hidden}`);vme(this,Hfe,qfe).call(this,!0)},Jfe=new WeakSet,eme=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)},tme=new WeakSet,nme=function(e){var t;M1(this,e.relatedTarget)||(fme(this,Cfe)&&(null==(t=fme(this,_fe))||t.focus()),fme(this,Sfe)&&fme(this,Sfe)!==e.relatedTarget&&!this.hidden&&(this.hidden=!0))},rme=new WeakSet,ime=function(e){var t,n,r,i,o;const{key:a,ctrlKey:s,altKey:l,metaKey:c}=e;if(!(s||l||c)&&this.keysUsed.includes(a))if(e.preventDefault(),e.stopPropagation(),"Tab"===a){if(fme(this,Cfe))return void(this.hidden=!0);e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()}else"Escape"===a?(null==(o=fme(this,_fe))||o.focus(),fme(this,Cfe)&&(this.hidden=!0)):"Enter"===a||" "===a?this.handleSelect(e):this.handleMove(e)},ome=new WeakSet,ame=function(e){return e.composedPath().find((e=>["menuitemradio","menuitemcheckbox"].includes(e.role)))},sme=new WeakSet,lme=function(){return this.items.find((e=>0===e.tabIndex))},cme=new WeakSet,ume=function(e){for(const t of this.items)t.tabIndex=t===e?0:-1},dme=new WeakSet,hme=function(e,t){const n=[...this.checkedItems];"radio"===e.type&&this.radioGroupItems.forEach((e=>e.checked=!1)),e.checked=!t||!e.checked,this.checkedItems.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))},Sme.template=wme,A1.customElements.get("media-chrome-menu")||A1.customElements.define("media-chrome-menu",Sme);var Cme,Ime,Rme,Dme,Lme,Pme,Mme,Nme,Ome,jme,Fme,Ume,Bme,$me,Vme,Wme=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zme=(e,t,n)=>(Wme(e,t,"read from private field"),n?n.call(e):t.get(e)),Hme=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qme=(e,t,n,r)=>(Wme(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Gme=(e,t,n)=>(Wme(e,t,"access private method"),n);const Kme=_1.createElement("template");Kme.innerHTML='\n  <style>\n    :host {\n      transition: var(--media-menu-item-transition,\n        background .15s linear,\n        opacity .2s ease-in-out\n      );\n      outline: var(--media-menu-item-outline, 0);\n      outline-offset: var(--media-menu-item-outline-offset, -1px);\n      cursor: var(--media-cursor, pointer);\n      display: flex;\n      align-items: center;\n      align-self: stretch;\n      justify-self: stretch;\n      white-space: nowrap;\n      white-space-collapse: collapse;\n      text-wrap: nowrap;\n      padding: .4em .8em .4em 1em;\n    }\n\n    :host(:focus-visible) {\n      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      outline: var(--media-menu-item-hover-outline, 0);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host(:hover) {\n      cursor: var(--media-cursor, pointer);\n      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));\n      outline: var(--media-menu-item-hover-outline);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host([aria-checked="true"]) {\n      background: var(--media-menu-item-checked-background);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    :host([disabled]) {\n      pointer-events: none;\n      color: rgba(255, 255, 255, .3);\n    }\n\n    slot:not([name]) {\n      width: 100%;\n    }\n\n    slot:not([name="submenu"]) {\n      display: inline-flex;\n      align-items: center;\n      transition: inherit;\n      opacity: var(--media-menu-item-opacity, 1);\n    }\n\n    slot[name="description"] {\n      justify-content: end;\n    }\n\n    slot[name="description"] > span {\n      display: inline-block;\n      margin-inline: 1em .2em;\n      max-width: var(--media-menu-item-description-max-width, 100px);\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-size: .8em;\n      font-weight: 400;\n      text-align: right;\n      position: relative;\n      top: .04em;\n    }\n\n    slot[name="checked-indicator"] {\n      display: none;\n    }\n\n    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {\n      display: var(--media-menu-item-checked-indicator-display, inline-block);\n    }\n\n    \n    svg, img, ::slotted(svg), ::slotted(img) {\n      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n    }\n\n    \n    [part~="indicator"],\n    ::slotted([part~="indicator"]) {\n      fill: var(--media-menu-item-indicator-fill,\n        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n      height: var(--media-menu-item-indicator-height, 1.25em);\n      margin-right: .5ch;\n    }\n\n    [part~="checked-indicator"] {\n      visibility: hidden;\n    }\n\n    :host([aria-checked="true"]) [part~="checked-indicator"] {\n      visibility: visible;\n    }\n  </style>\n  <slot name="checked-indicator">\n    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">\n      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n    </svg>\n  </slot>\n  <slot name="prefix"></slot>\n  <slot></slot>\n  <slot name="description"></slot>\n  <slot name="suffix"></slot>\n  <slot name="submenu"></slot>\n';const Yme="type",Qme="value",Xme="checked",Zme="disabled";class Jme extends A1.HTMLElement{constructor(){super(),Hme(this,Rme),Hme(this,Lme),Hme(this,Mme),Hme(this,jme),Hme(this,Ume),Hme(this,$me),Hme(this,Cme,!1),Hme(this,Ime,void 0),Hme(this,Ome,(()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),r=null==(e=this.submenuElement.checkedItems)?void 0:e[0],i=null!=(t=null==r?void 0:r.dataset.description)?t:null==r?void 0:r.text,o=_1.createElement("span");o.textContent=null!=i?i:"",n.replaceChildren(o)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[Yme,Zme,Xme,Qme]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),ege(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":Gme(this,Rme,Dme).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":Gme(this,Ume,Bme).call(this,e);break;case"keyup":Gme(this,jme,Fme).call(this,e)}}attributeChangedCallback(e,t,n){e===Xme&&ege(this)&&!zme(this,Cme)?this.setAttribute("aria-checked",null!=n?"true":"false"):e===Yme&&n!==t?this.role="menuitem"+n:e===Zme&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){this.hasAttribute(Zme)||this.enable(),this.role="menuitem"+this.type,qme(this,Ime,tge(this,this.parentNode)),Gme(this,$me,Vme).call(this)}disconnectedCallback(){this.disable(),Gme(this,$me,Vme).call(this),qme(this,Ime,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=j1(this))?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return null!=(e=this.getAttribute(Yme))?e:""}set type(e){this.setAttribute(Yme,`${e}`)}get value(){var e;return null!=(e=this.getAttribute(Qme))?e:this.text}set value(e){this.setAttribute(Qme,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get checked(){if(ege(this))return"true"===this.getAttribute("aria-checked")}set checked(e){ege(this)&&(qme(this,Cme,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){ege(this)||this.invokeTargetElement&&M1(this,e.target)&&this.invokeTargetElement.dispatchEvent(new xfe({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}function ege(e){return"radio"===e.type||"checkbox"===e.type}function tge(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?tge(e,n):(null==t?void 0:t.items)?t:tge(t,null==t?void 0:t.parentNode)}Cme=new WeakMap,Ime=new WeakMap,Rme=new WeakSet,Dme=function(e){const t=e.target;if(!(null==t?void 0:t.name))for(const n of t.assignedNodes({flatten:!0}))n instanceof Text&&""===n.textContent.trim()&&n.remove();"submenu"===t.name&&(this.submenuElement?Gme(this,Lme,Pme).call(this):Gme(this,Mme,Nme).call(this))},Lme=new WeakSet,Pme=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",zme(this,Ome)),this.submenuElement.addEventListener("addmenuitem",zme(this,Ome)),this.submenuElement.addEventListener("removemenuitem",zme(this,Ome)),zme(this,Ome).call(this)},Mme=new WeakSet,Nme=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",zme(this,Ome)),this.submenuElement.removeEventListener("addmenuitem",zme(this,Ome)),this.submenuElement.removeEventListener("removemenuitem",zme(this,Ome)),zme(this,Ome).call(this)},Ome=new WeakMap,jme=new WeakSet,Fme=function(e){const{key:t}=e;this.keysUsed.includes(t)?this.handleClick(e):this.removeEventListener("keyup",Gme(this,jme,Fme))},Ume=new WeakSet,Bme=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",Gme(this,jme,Fme)):this.addEventListener("keyup",Gme(this,jme,Fme),{once:!0})},$me=new WeakSet,Vme=function(){var e;const t=null==(e=zme(this,Ime))?void 0:e.radioGroupItems;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-checked"))).pop();n||(n=t[0]);for(const r of t)r.setAttribute("aria-checked","false");null==n||n.setAttribute("aria-checked","true")},Jme.template=Kme,A1.customElements.get("media-chrome-menu-item")||A1.customElements.define("media-chrome-menu-item",Jme);const nge=_1.createElement("template");nge.innerHTML=Sme.template.innerHTML+'\n  <style>\n    :host {\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-settings-menu-background,\n          var(--media-menu-background,\n            var(--media-control-background,\n              var(--media-secondary-color, var(--_menu-bg)))));\n      min-width: var(--media-settings-menu-min-width, 170px);\n      border-radius: 2px 2px 0 0;\n      overflow: hidden;\n    }\n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([role="menu"]) {\n      \n      justify-content: end;\n    }\n\n    slot:not([name]) {\n      justify-content: var(--media-settings-menu-justify-content);\n      flex-direction: var(--media-settings-menu-flex-direction, column);\n      overflow: visible;\n    }\n\n    #container.has-expanded {\n      --media-settings-menu-item-opacity: 0;\n    }\n  </style>\n';class rge extends Sme{get anchorElement(){return"auto"!==this.anchor?super.anchorElement:R1(this).querySelector("media-settings-menu-button")}}rge.template=nge,A1.customElements.get("media-settings-menu")||A1.customElements.define("media-settings-menu",rge);var ige;const oge=_1.createElement("template");oge.innerHTML=Jme.template.innerHTML+'\n  <style>\n    slot:not([name="submenu"]) {\n      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));\n    }\n\n    :host([aria-expanded="true"]:hover) {\n      background: transparent;\n    }\n  </style>\n',(null==(ige=oge.content)?void 0:ige.querySelector)&&(oge.content.querySelector('slot[name="suffix"]').innerHTML='\n    <svg aria-hidden="true" viewBox="0 0 20 24">\n      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>\n    </svg>\n  ');class age extends Jme{}age.template=oge,A1.customElements.get("media-settings-menu-item")||A1.customElements.define("media-settings-menu-item",age);class sge extends T4{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=j1(this))?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;null==(e=this.invokeTargetElement)||e.dispatchEvent(new xfe({relatedTarget:this}))}}A1.customElements.get("media-chrome-menu-button")||A1.customElements.define("media-chrome-menu-button",sge);const lge=_1.createElement("template");lge.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon">\n    <svg aria-hidden="true" viewBox="0 0 24 24">\n      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>\n    </svg>\n  </slot>\n';class cge extends sge{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:lge,tooltipContent:m1("Settings")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",m1("settings"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:R1(this).querySelector("media-settings-menu")}}A1.customElements.get("media-settings-menu-button")||A1.customElements.define("media-settings-menu-button",cge);var uge,dge,hge,pge,fge,mge,gge=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},vge=(e,t,n)=>(gge(e,t,"read from private field"),n?n.call(e):t.get(e)),yge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bge=(e,t,n,r)=>(gge(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),wge=(e,t,n)=>(gge(e,t,"access private method"),n);class xge extends Sme{constructor(){super(...arguments),yge(this,hge),yge(this,fge),yge(this,uge,[]),yge(this,dge,void 0)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_AUDIO_TRACK_LIST,V0.MEDIA_AUDIO_TRACK_ENABLED,V0.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===V0.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===V0.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(bge(this,uge,null==(r=null!=n?n:"")?void 0:r.split(/\s+/).map(r1)),wge(this,hge,pge).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",wge(this,fge,mge))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",wge(this,fge,mge))}get anchorElement(){var e;return"auto"!==this.anchor?super.anchorElement:null==(e=R1(this))?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return vge(this,uge)}set mediaAudioTrackList(e){bge(this,uge,e),wge(this,hge,pge).call(this)}get mediaAudioTrackEnabled(){var e;return null!=(e=H1(this,V0.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){q1(this,V0.MEDIA_AUDIO_TRACK_ENABLED,e)}}uge=new WeakMap,dge=new WeakMap,hge=new WeakSet,pge=function(){if(vge(this,dge)===JSON.stringify(this.mediaAudioTrackList))return;bge(this,dge,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const t of e){const e=yme({type:"radio",text:this.formatMenuItemText(t.label,t),value:`${t.id}`,checked:t.enabled});e.prepend(bme(this,"checked-indicator")),this.defaultSlot.append(e)}},fge=new WeakSet,mge=function(){if(null==this.value)return;const e=new A1.CustomEvent(F0.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},A1.customElements.get("media-audio-track-menu")||A1.customElements.define("media-audio-track-menu",xge);const Ege=_1.createElement("template");Ege.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class Age extends sge{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_AUDIO_TRACK_ENABLED,V0.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:Ege,tooltipContent:m1("Audio")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",m1("Audio"))}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=R1(this))?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return null!=(e=H1(this,V0.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){q1(this,V0.MEDIA_AUDIO_TRACK_ENABLED,e)}}A1.customElements.get("media-audio-track-menu-button")||A1.customElements.define("media-audio-track-menu-button",Age);var _ge,Sge,Tge,kge,Cge,Ige=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Rge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Dge=(e,t,n)=>(Ige(e,t,"access private method"),n);const Lge=_1.createElement("template");Lge.innerHTML=Sme.template.innerHTML+'\n  <slot name="captions-indicator" hidden>\n  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n  </svg></slot>';class Pge extends Sme{constructor(){super(...arguments),Rge(this,Sge),Rge(this,kge),Rge(this,_ge,void 0)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_SUBTITLES_LIST,V0.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_SUBTITLES_LIST&&t!==n?Dge(this,Sge,Tge).call(this):e===V0.MEDIA_SUBTITLES_SHOWING&&t!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Dge(this,kge,Cge))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Dge(this,kge,Cge))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:R1(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return Mge(this,V0.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Nge(this,V0.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return Mge(this,V0.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Nge(this,V0.MEDIA_SUBTITLES_SHOWING,e)}}_ge=new WeakMap,Sge=new WeakSet,Tge=function(){var e,t,n,r;if(Ige(t=this,n=_ge,"read from private field"),(r?r.call(t):n.get(t))===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,r)=>{Ige(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,_ge,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const i=!this.value,o=yme({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:i});o.prepend(bme(this,"checked-indicator")),this.defaultSlot.append(o);const a=this.mediaSubtitlesList;for(const s of a){const t=yme({type:"radio",text:this.formatMenuItemText(s.label,s),value:V2(s),checked:this.value==V2(s)});t.prepend(bme(this,"checked-indicator"));"captions"===(null!=(e=s.kind)?e:"subs")&&t.append(bme(this,"captions-indicator")),this.defaultSlot.append(t)}},kge=new WeakSet,Cge=function(){const e=this.mediaSubtitlesShowing,t=this.getAttribute(V0.MEDIA_SUBTITLES_SHOWING),n=this.value!==t;if((null==e?void 0:e.length)&&n&&this.dispatchEvent(new A1.CustomEvent(F0.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:e})),!this.value||!n)return;const r=new A1.CustomEvent(F0.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)},Pge.template=Lge;const Mge=(e,t)=>{const n=e.getAttribute(t);return n?B2(n):[]},Nge=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=W2(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};A1.customElements.get("media-captions-menu")||A1.customElements.define("media-captions-menu",Pge);var Oge,jge=(e,t,n,r)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Fge=_1.createElement("template");Fge.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const Uge=e=>{e.setAttribute("aria-checked",G2(e).toString())};class Bge extends sge{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:Fge,tooltipContent:m1("Captions"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Oge,void 0),jge(this,Oge,!1)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_SUBTITLES_LIST,V0.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",m1("closed captions")),Uge(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_SUBTITLES_SHOWING&&Uge(this)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=R1(this))?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return $ge(this,V0.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Vge(this,V0.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return $ge(this,V0.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Vge(this,V0.MEDIA_SUBTITLES_SHOWING,e)}}Oge=new WeakMap;const $ge=(e,t)=>{const n=e.getAttribute(t);return n?B2(n):[]},Vge=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=W2(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};A1.customElements.get("media-captions-menu-button")||A1.customElements.define("media-captions-menu-button",Bge);var Wge,zge,Hge,qge,Gge,Kge=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Yge=(e,t,n)=>(Kge(e,t,"read from private field"),n?n.call(e):t.get(e)),Qge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xge=(e,t,n)=>(Kge(e,t,"access private method"),n);const Zge="rates";class Jge extends Sme{constructor(){super(),Qge(this,zge),Qge(this,qge),Qge(this,Wge,new F2(this,Zge,{defaultValue:Y9})),Xge(this,zge,Hge).call(this)}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PLAYBACK_RATE,Zge]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===V0.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===Zge&&t!=n&&(Yge(this,Wge).value=n,Xge(this,zge,Hge).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Xge(this,qge,Gge))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Xge(this,qge,Gge))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:R1(this).querySelector("media-playback-rate-menu-button")}get rates(){return Yge(this,Wge)}set rates(e){e?Array.isArray(e)&&(Yge(this,Wge).value=e.join(" ")):Yge(this,Wge).value="",Xge(this,zge,Hge).call(this)}get mediaPlaybackRate(){return $1(this,V0.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){V1(this,V0.MEDIA_PLAYBACK_RATE,e)}}Wge=new WeakMap,zge=new WeakSet,Hge=function(){this.defaultSlot.textContent="";for(const e of this.rates){const t=yme({type:"radio",text:this.formatMenuItemText(`${e}x`,e),value:e,checked:this.mediaPlaybackRate==e});t.prepend(bme(this,"checked-indicator")),this.defaultSlot.append(t)}},qge=new WeakSet,Gge=function(){if(!this.value)return;const e=new A1.CustomEvent(F0.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},A1.customElements.get("media-playback-rate-menu")||A1.customElements.define("media-playback-rate-menu",Jge);var eve,tve=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const nve="rates",rve=[1,1.2,1.5,1.7,2],ive=_1.createElement("template");ive.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n    \n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"></slot>\n';class ove extends sge{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:ive,tooltipContent:m1("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,eve,new F2(this,nve,{defaultValue:rve})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_PLAYBACK_RATE,nve]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===nve&&(tve(this,eve).value=n),e===V0.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",m1("Playback rate {playbackRate}",{playbackRate:t}))}}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:R1(this).querySelector("media-playback-rate-menu")}get rates(){return tve(this,eve)}set rates(e){e?Array.isArray(e)&&(tve(this,eve).value=e.join(" ")):tve(this,eve).value=""}get mediaPlaybackRate(){return $1(this,V0.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){V1(this,V0.MEDIA_PLAYBACK_RATE,e)}}eve=new WeakMap,A1.customElements.get("media-playback-rate-menu-button")||A1.customElements.define("media-playback-rate-menu-button",ove);var ave,sve,lve,cve,uve,dve,hve=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},pve=(e,t,n)=>(hve(e,t,"read from private field"),n?n.call(e):t.get(e)),fve=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},mve=(e,t,n,r)=>(hve(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),gve=(e,t,n)=>(hve(e,t,"access private method"),n);class vve extends Sme{constructor(){super(...arguments),fve(this,lve),fve(this,uve),fve(this,ave,[]),fve(this,sve,{})}static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_RENDITION_LIST,V0.MEDIA_RENDITION_SELECTED,V0.MEDIA_RENDITION_UNAVAILABLE,V0.MEDIA_HEIGHT]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===V0.MEDIA_RENDITION_SELECTED&&t!==n?(this.value=null!=n?n:"auto",gve(this,lve,cve).call(this)):e===V0.MEDIA_RENDITION_LIST&&t!==n?(mve(this,ave,null==(r=n)?void 0:r.split(/\s+/).map(t1)),gve(this,lve,cve).call(this)):e===V0.MEDIA_HEIGHT&&t!==n&&gve(this,lve,cve).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",gve(this,uve,dve))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",gve(this,uve,dve))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:R1(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return pve(this,ave)}set mediaRenditionList(e){mve(this,ave,e),gve(this,lve,cve).call(this)}get mediaRenditionSelected(){return H1(this,V0.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){q1(this,V0.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return $1(this,V0.MEDIA_HEIGHT)}set mediaHeight(e){V1(this,V0.MEDIA_HEIGHT,e)}}ave=new WeakMap,sve=new WeakMap,lve=new WeakSet,cve=function(){if(pve(this,sve).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&pve(this,sve).mediaHeight===this.mediaHeight)return;pve(this,sve).mediaRenditionList=JSON.stringify(this.mediaRenditionList),pve(this,sve).mediaHeight=this.mediaHeight;const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height));for(const i of e)i.selected=i.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const t=!this.mediaRenditionSelected;for(const i of e){const e=yme({type:"radio",text:this.formatMenuItemText(`${Math.min(i.width,i.height)}p`,i),value:`${i.id}`,checked:i.selected&&!t});e.prepend(bme(this,"checked-indicator")),this.defaultSlot.append(e)}const n=yme({type:"radio",text:t?this.formatMenuItemText(`Auto (${this.mediaHeight}p)`):this.formatMenuItemText("Auto"),value:"auto",checked:t}),r=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";n.dataset.description=r,n.prepend(bme(this,"checked-indicator")),this.defaultSlot.append(n)},uve=new WeakSet,dve=function(){if(null==this.value)return;const e=new A1.CustomEvent(F0.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},A1.customElements.get("media-rendition-menu")||A1.customElements.define("media-rendition-menu",vve);const yve=_1.createElement("template");yve.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class bve extends sge{static get observedAttributes(){return[...super.observedAttributes,V0.MEDIA_RENDITION_SELECTED,V0.MEDIA_RENDITION_UNAVAILABLE,V0.MEDIA_HEIGHT]}constructor(){super({slotTemplate:yve,tooltipContent:m1("Quality")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",m1("quality"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:R1(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return H1(this,V0.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){q1(this,V0.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return $1(this,V0.MEDIA_HEIGHT)}set mediaHeight(e){V1(this,V0.MEDIA_HEIGHT,e)}}A1.customElements.get("media-rendition-menu-button")||A1.customElements.define("media-rendition-menu-button",bve);var wve=e=>{throw TypeError(e)},xve=(e,t,n)=>t.has(e)||wve("Cannot "+n),Eve=(e,t,n)=>(xve(e,t,"read from private field"),n?n.call(e):t.get(e)),Ave=(e,t,n)=>t.has(e)?wve("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),_ve=(e,t,n,r)=>(xve(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Sve=(e,t,n)=>(xve(e,t,"access private method"),n),Tve=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends Tve{}globalThis.DocumentFragment=e}var kve,Cve=class extends Tve{},Ive={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(Cve)};kve=new WeakMap;var Rve={document:{createElement:function(e,t){return new Cve}},DocumentFragment:DocumentFragment,customElements:Ive,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ave(this,kve),_ve(this,kve,null==t?void 0:t.detail)}get detail(){return Eve(this,kve)}initCustomEvent(){}},EventTarget:Tve,HTMLElement:Cve,HTMLVideoElement:class extends Tve{}},Dve="undefined"==typeof window||"undefined"==typeof globalThis.customElements,Lve=Dve?Rve:globalThis,Pve=Dve?Rve.document:globalThis.document;function Mve(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nve(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function Ove(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function jve(e){let t=function(e){let t={};for(let n in e)null!=e[n]&&(t[n]=e[n]);return new URLSearchParams(t)}(e).toString();return t?"?"+t:""}var Fve=(e,t)=>!(!e||!t)&&(!!e.contains(t)||Fve(e,t.getRootNode().host)),Uve="mux.com",Bve=(()=>{try{return"3.3.4"}catch{}return"UNKNOWN"})(),$ve=()=>Bve,Vve=e=>{if(e){if([Ece.LIVE,Ece.ON_DEMAND].includes(e))return e;if(null!=e&&e.includes("live"))return Ece.LIVE}},Wve={crossorigin:"crossOrigin",playsinline:"playsInline"};function zve(e){var t;return null!=(t=Wve[e])?t:Nve(e)}var Hve,qve,Gve,Kve=class{constructor(e,t){Ave(this,Hve),Ave(this,qve),Ave(this,Gve,[]),_ve(this,Hve,e),_ve(this,qve,t)}[Symbol.iterator](){return Eve(this,Gve).values()}get length(){return Eve(this,Gve).length}get value(){var e;return null!=(e=Eve(this,Gve).join(" "))?e:""}set value(e){var t;e!==this.value&&(_ve(this,Gve,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return Eve(this,Gve)[e]}values(){return Eve(this,Gve).values()}keys(){return Eve(this,Gve).keys()}forEach(e){Eve(this,Gve).forEach(e)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>{this.contains(e)||Eve(this,Gve).push(e)})),(""!==this.value||null!=(e=Eve(this,Hve))&&e.hasAttribute(`${Eve(this,qve)}`))&&(null==(t=Eve(this,Hve))||t.setAttribute(`${Eve(this,qve)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>{Eve(this,Gve).splice(Eve(this,Gve).indexOf(e),1)})),null==(e=Eve(this,Hve))||e.setAttribute(`${Eve(this,qve)}`,`${this.value}`)}contains(e){return Eve(this,Gve).includes(e)}toggle(e,t){return"undefined"!=typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};Hve=new WeakMap,qve=new WeakMap,Gve=new WeakMap;var Yve=`[mux-player ${$ve()}]`;function Qve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(Yve,...t)}function Xve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(Yve,...t)}function Zve(e){var t;let n=null!=(t=e.message)?t:"";e.context&&(n+=` ${e.context}`),e.file&&(n+=` ${Uce("Read more: ")}\nhttps://github.com/muxinc/elements/blob/main/errors/${e.file}`),Qve(n)}var Jve={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},eye={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},tye=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),nye=Tde.filter((e=>"error"!==e)),rye=Object.values(Jve).filter((e=>![Jve.PLAYSINLINE].includes(e))),iye=Object.values(eye),oye=class extends Lve.HTMLElement{static get observedAttributes(){return[...rye,...iye]}constructor(){super()}init(){nye.forEach((e=>{var t;null==(t=this.media)||t.addEventListener(e,(e=>{this.dispatchEvent(new Event(e.type))}))}))}attributeChangedCallback(e,t,n){var r,i;switch(e){case eye.MUTED:return void(this.media&&(this.media.muted=null!=n,this.media.defaultMuted=null!=n));case eye.VOLUME:{let e=null!=(r=Ove(n))?r:1;return void(this.media&&(this.media.volume=e))}case eye.PLAYBACKRATE:{let e=null!=(i=Ove(n))?i:1;return void(this.media&&(this.media.playbackRate=e,this.media.defaultPlaybackRate=e))}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}load(){var e;null==(e=this.media)||e.load()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:tye}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:tye}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentSrc(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentSrc)?t:""}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=Ove(this.getAttribute(eye.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(eye.PLAYBACKRATE,`${e}`):this.removeAttribute(eye.PLAYBACKRATE)}get crossOrigin(){return aye(this,Jve.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(Jve.CROSSORIGIN,`${e}`)}get autoplay(){return null!=aye(this,Jve.AUTOPLAY)}set autoplay(e){e?this.setAttribute(Jve.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(Jve.AUTOPLAY)}get loop(){return null!=aye(this,Jve.LOOP)}set loop(e){e?this.setAttribute(Jve.LOOP,""):this.removeAttribute(Jve.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=!!e)}get defaultMuted(){return null!=aye(this,Jve.MUTED)}set defaultMuted(e){e?this.setAttribute(Jve.MUTED,""):this.removeAttribute(Jve.MUTED)}get playsInline(){return null!=aye(this,Jve.PLAYSINLINE)}set playsInline(e){Xve("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(Jve.PRELOAD,e):this.removeAttribute(Jve.PRELOAD)}};function aye(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var sye=oye,lye=new WeakMap,cye=class e{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=lye.get(this.element);n&&n.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let e=lye.get(this.element);e&&e.delete(this.type)}}static for(t){lye.has(t.element)||lye.set(t.element,new Map);let n=t.attributeName.slice(2),r=lye.get(t.element);return r&&r.has(n)?r.get(n):new e(t.element,n)}};function uye(e,t){(function(e,t){if(e instanceof Vpe&&t instanceof Element){let n=e.element;return n[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),n[e.attributeName]=t),!0}return!1})(e,t)||function(e,t){if("boolean"==typeof t&&e instanceof Vpe){let n=e.attributeNamespace;return t!==e.element.hasAttributeNS(n,e.attributeName)&&(e.booleanValue=t),!0}return!1}(e,t)||function(e,t){return!!(e instanceof Vpe&&e.attributeName.startsWith("on"))&&(cye.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}(e,t)||function(e,t){return!1===t&&e instanceof Wpe&&(e.replace(""),!0)}(e,t)||function(e,t){return t instanceof fye&&e instanceof Wpe&&(t.renderInto(e),!0)}(e,t)||function(e,t){return t instanceof DocumentFragment&&e instanceof Wpe&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}(e,t)||function(e,t){if(e instanceof Vpe){let n=e.attributeNamespace,r=e.element.getAttributeNS(n,e.attributeName);return String(t)!==r&&(e.value=String(t)),!0}e.value=String(t)}(e,t)}var dye=new Map,hye=new WeakMap,pye=new WeakMap,fye=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("\x01")}get template(){if(dye.has(this.stringsKey))return dye.get(this.stringsKey);{let e=Pve.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,r)=>e+n+(r<t?`{{ ${r} }}`:"")),""),dye.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(hye.get(e)!==n){hye.set(e,n);let t=new Npe(n,this.values,this.processor);return pye.set(e,t),void(e instanceof Wpe?e.replace(...t.children):e.appendChild(t))}let r=pye.get(e);null==(t=null==r?void 0:r.update)||t.call(r,this.values)}},mye={processCallback(e,t,n){var r;if(n)for(let[i,o]of t)if(i in n){uye(o,null!=(r=n[i])?r:"")}}};function gye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new fye(e,n,mye)}var vye=Object.values({TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"}).join(", "),yye=e=>{var t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w,x,E,A,_,S,T,k,C,I,R,D,L,P,M;return gye`
  <media-theme
    template="${e.themeTemplate||!1}"
    defaultstreamtype="${null!=(t=e.defaultStreamType)&&t}"
    hotkeys="${(e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return"live"===Vve(e.streamType)&&(t+=" noarrowleft noarrowright"),t})(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||!1}"
    noautoseektolive="${!(null==(n=e.streamType)||!n.includes(Ece.LIVE))&&0!==e.targetLiveWindow}"
    novolumepref="${e.novolumepref||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(r=e.audio)&&r}"
    style="${null!=(i=function(e){let t="";return Object.entries(e).forEach((e=>{let[n,r]=e;null!=r&&(t+=`${Mve(n)}: ${r}; `)})),t?t.trim():void 0}({"--media-primary-color":e.primaryColor,"--media-secondary-color":e.secondaryColor,"--media-accent-color":e.accentColor}))&&i}"
    defaultsubtitles="${!e.defaultHiddenCaptions}"
    forwardseekoffset="${null!=(o=e.forwardSeekOffset)&&o}"
    backwardseekoffset="${null!=(a=e.backwardSeekOffset)&&a}"
    playbackrates="${null!=(s=e.playbackRates)&&s}"
    defaultshowremainingtime="${null!=(l=e.defaultShowRemainingTime)&&l}"
    defaultduration="${null!=(c=e.defaultDuration)&&c}"
    hideduration="${null!=(u=e.hideDuration)&&u}"
    title="${null!=(d=e.title)&&d}"
    proudlydisplaymuxbadge="${null!=(h=e.proudlyDisplayMuxBadge)&&h}"
    exportparts="${vye}"
    onclose="${e.onCloseErrorDialog}"
    onfocusin="${e.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      target-live-window="${null!=(p=e.targetLiveWindow)&&p}"
      stream-type="${null!=(f=Vve(e.streamType))&&f}"
      crossorigin="${null!=(m=e.crossOrigin)?m:""}"
      playsinline
      autoplay="${null!=(g=e.autoplay)&&g}"
      muted="${null!=(v=e.muted)&&v}"
      loop="${null!=(y=e.loop)&&y}"
      preload="${null!=(b=e.preload)&&b}"
      debug="${null!=(w=e.debug)&&w}"
      prefer-cmcd="${null!=(x=e.preferCmcd)&&x}"
      disable-tracking="${null!=(E=e.disableTracking)&&E}"
      disable-cookies="${null!=(A=e.disableCookies)&&A}"
      prefer-playback="${null!=(_=e.preferPlayback)&&_}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(S=e.beaconCollectionDomain)&&S}"
      player-init-time="${null!=(T=e.playerInitTime)&&T}"
      player-software-name="${null!=(k=e.playerSoftwareName)&&k}"
      player-software-version="${null!=(C=e.playerSoftwareVersion)&&C}"
      env-key="${null!=(I=e.envKey)&&I}"
      custom-domain="${null!=(R=e.customDomain)&&R}"
      src="${e.src?e.src:!!e.playbackId&&Mue(e)}"
      cast-src="${e.src?e.src:!!e.playbackId&&Mue(e)}"
      cast-receiver="${null!=(D=e.castReceiver)&&D}"
      drm-token="${null!=(P=null==(L=e.tokens)?void 0:L.drm)&&P}"
      exportparts="video"
    >
      ${e.storyboard?gye`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:gye``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${!!e.poster&&e.poster}"
        placeholdersrc="${null!=(M=e.placeholder)&&M}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},bye=e=>e.charAt(0).toUpperCase()+e.slice(1),wye=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=bye(null!=(n=e.errorCategory)?n:"video"),o=vce(null!=(r=e.errorCategory)?r:fce);if(e.muxCode===gce.NETWORK_OFFLINE)return Uce("Your device appears to be offline",t);if(e.muxCode===gce.NETWORK_TOKEN_EXPIRED)return Uce("{category} URL has expired",t).format({category:i});if([gce.NETWORK_TOKEN_SUB_MISMATCH,gce.NETWORK_TOKEN_AUD_MISMATCH,gce.NETWORK_TOKEN_AUD_MISSING,gce.NETWORK_TOKEN_MALFORMED].includes(e.muxCode))return Uce("{category} URL is formatted incorrectly",t).format({category:i});if(e.muxCode===gce.NETWORK_TOKEN_MISSING)return Uce("Invalid {categoryName} URL",t).format({categoryName:o});if(e.muxCode===gce.NETWORK_NOT_FOUND)return Uce("{category} does not exist",t).format({category:i});if(e.muxCode===gce.NETWORK_NOT_READY)return Uce("{category} is not currently available",t).format({category:i})}if(e.code){if(e.code===bce.MEDIA_ERR_NETWORK)return Uce("Network Error",t);if(e.code===bce.MEDIA_ERR_DECODE)return Uce("Media Error",t);if(e.code===bce.MEDIA_ERR_SRC_NOT_SUPPORTED)return Uce("Source Not Supported",t)}return Uce("Error",t)}(e,t),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=bye(null!=(n=e.errorCategory)?n:"video"),o=vce(null!=(r=e.errorCategory)?r:fce);return e.muxCode===gce.NETWORK_OFFLINE?Uce("Check your internet connection and try reloading this video.",t):e.muxCode===gce.NETWORK_TOKEN_EXPIRED?Uce("The video\u2019s secured {tokenNamePrefix}-token has expired.",t).format({tokenNamePrefix:o}):e.muxCode===gce.NETWORK_TOKEN_SUB_MISMATCH?Uce("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",t).format({tokenNamePrefix:o}):e.muxCode===gce.NETWORK_TOKEN_MALFORMED?Uce("{category} URL is formatted incorrectly",t).format({category:i}):[gce.NETWORK_TOKEN_AUD_MISMATCH,gce.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode)?Uce("The {tokenNamePrefix}-token is formatted with incorrect information.",t).format({tokenNamePrefix:o}):[gce.NETWORK_TOKEN_MISSING,gce.NETWORK_INVALID_URL].includes(e.muxCode)?Uce("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",t).format({tokenNamePrefix:o}):e.muxCode===gce.NETWORK_NOT_FOUND?"":e.muxCode===gce.NETWORK_NOT_READY?Uce("The live stream or video file are not yet ready.",t):e.message}return e.code&&(e.code===bce.MEDIA_ERR_NETWORK||e.code===bce.MEDIA_ERR_DECODE||(e.code,bce.MEDIA_ERR_SRC_NOT_SUPPORTED)),e.message}(e,t);return{title:n,message:r}},xye=(e,t)=>{let n=(e=>{if(e.muxCode){if(e.muxCode===gce.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(e.muxCode===gce.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([gce.NETWORK_TOKEN_AUD_MISMATCH,gce.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode))return"403-incorrect-aud-value.md";if(e.muxCode===gce.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(e.muxCode===gce.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(e.muxCode===gce.NETWORK_NOT_FOUND)return"404-not-found.md";if(e.muxCode===gce.NETWORK_NOT_READY)return"412-not-playable.md"}if(e.code){if(e.code===bce.MEDIA_ERR_NETWORK)return"";if(e.code===bce.MEDIA_ERR_DECODE)return"media-decode-error.md";if(e.code===bce.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""})(e);return{message:e.message,context:e.context,file:n}},Eye=Pve.createElement("template");"innerHTML"in Eye&&(Eye.innerHTML='<template id="media-theme-gerwig">\n  <style>\n    @keyframes pre-play-hide {\n      0% {\n        transform: scale(1);\n        opacity: 1;\n      }\n\n      30% {\n        transform: scale(0.7);\n      }\n\n      100% {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    :host {\n      --_primary-color: var(--media-primary-color, #fff);\n      --_secondary-color: var(--media-secondary-color, transparent);\n      --_accent-color: var(--media-accent-color, #fa50b5);\n      --_text-color: var(--media-text-color, #000);\n\n      --media-icon-color: var(--_primary-color);\n      --media-control-background: var(--_secondary-color);\n      --media-control-hover-background: var(--_accent-color);\n      --media-time-buffered-color: rgba(255, 255, 255, 0.4);\n      --media-preview-time-text-shadow: none;\n      --media-control-height: 14px;\n      --media-control-padding: 6px;\n      --media-tooltip-container-margin: 6px;\n      --media-tooltip-distance: 18px;\n\n      color: var(--_primary-color);\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([audio]) {\n      --_secondary-color: var(--media-secondary-color, black);\n      --media-preview-time-text-shadow: none;\n    }\n\n    :host([audio]) ::slotted([slot=\'media\']) {\n      height: 0px;\n    }\n\n    :host([audio]) media-loading-indicator {\n      display: none;\n    }\n\n    :host([audio]) media-controller {\n      background: transparent;\n    }\n\n    :host([audio]) media-controller::part(vertical-layer) {\n      background: transparent;\n    }\n\n    :host([audio]) media-control-bar {\n      width: 100%;\n      background-color: var(--media-control-background);\n    }\n\n    /*\n     * 0.433s is the transition duration for VTT Regions.\n     * Borrowed here, so the captions don\'t move too fast.\n     */\n    media-controller {\n      --media-webkit-text-track-transform: translateY(0) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;\n    }\n    media-controller:is([mediapaused], :not([userinactive])) {\n      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.15s ease;\n    }\n\n    /*\n     * CSS specific to iOS devices.\n     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757\n     */\n    @supports (-webkit-touch-callout: none) {\n      /* Disable subtitle adjusting for iOS Safari */\n      media-controller[mediaisfullscreen] {\n        --media-webkit-text-track-transform: unset;\n        --media-webkit-text-track-transition: unset;\n      }\n    }\n\n    media-time-range {\n      --media-box-padding-left: 6px;\n      --media-box-padding-right: 6px;\n      --media-range-bar-color: var(--_accent-color);\n      --media-time-range-buffered-color: var(--_primary-color);\n      --media-range-track-color: transparent;\n      --media-range-track-background: rgba(255, 255, 255, 0.4);\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_accent-color) 25%,\n        var(--_accent-color)\n      );\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-transform: scale(0);\n      --media-range-thumb-transition: transform 0.3s;\n      --media-range-thumb-opacity: 1;\n      --media-preview-background: var(--_primary-color);\n      --media-box-arrow-background: var(--_primary-color);\n      --media-preview-thumbnail-border: 5px solid var(--_primary-color);\n      --media-preview-border-radius: 5px;\n      --media-text-color: var(--_text-color);\n      --media-control-hover-background: transparent;\n      --media-preview-chapter-text-shadow: none;\n      color: var(--_accent-color);\n      padding: 0 6px;\n    }\n\n    :host([audio]) media-time-range {\n      --media-preview-time-padding: 1.5px 6px;\n      --media-preview-box-margin: 0 0 -5px;\n    }\n\n    media-time-range:hover {\n      --media-range-thumb-transform: scale(1);\n    }\n\n    media-preview-thumbnail {\n      border-bottom-width: 0;\n    }\n\n    [part~=\'menu\'] {\n      border-radius: 2px;\n      border: 1px solid rgba(0, 0, 0, 0.1);\n      bottom: 50px;\n      padding: 2.5px 10px;\n    }\n\n    [part~=\'menu\']::part(indicator) {\n      fill: var(--_accent-color);\n    }\n\n    [part~=\'menu\']::part(menu-item) {\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 6px 10px;\n      min-height: 34px;\n    }\n\n    [part~=\'menu\']::part(checked) {\n      font-weight: 700;\n    }\n\n    media-captions-menu,\n    media-rendition-menu,\n    media-audio-track-menu,\n    media-playback-rate-menu {\n      position: absolute; /* ensure they don\'t take up space in DOM on load */\n      --media-menu-background: var(--_primary-color);\n      --media-menu-item-checked-background: transparent;\n      --media-text-color: var(--_text-color);\n      --media-menu-item-hover-background: transparent;\n      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;\n    }\n\n    /* The icon is a circle so make it 16px high instead of 14px for more balance. */\n    media-audio-track-menu-button {\n      --media-control-padding: 5px;\n      --media-control-height: 16px;\n    }\n\n    media-playback-rate-menu-button {\n      --media-control-padding: 6px 3px;\n      min-width: 4.4ch;\n    }\n\n    media-playback-rate-menu {\n      --media-menu-flex-direction: row;\n      --media-menu-item-checked-background: var(--_accent-color);\n      --media-menu-item-checked-indicator-display: none;\n      margin-right: 6px;\n      padding: 0;\n      --media-menu-gap: 0.25em;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(menu-item) {\n      padding: 6px 6px 6px 8px;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(checked) {\n      color: #fff;\n    }\n\n    :host(:not([audio])) media-time-range {\n      /* Adding px is required here for calc() */\n      --media-range-padding: 0px;\n      background: transparent;\n      z-index: 10;\n      height: 10px;\n      bottom: -3px;\n      width: 100%;\n    }\n\n    media-control-bar :is([role=\'button\'], [role=\'switch\'], button) {\n      line-height: 0;\n    }\n\n    media-control-bar :is([part*=\'button\'], [part*=\'range\'], [part*=\'display\']) {\n      border-radius: 3px;\n    }\n\n    .spacer {\n      flex-grow: 1;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] {\n      min-height: 42px;\n      pointer-events: none;\n    }\n\n    media-control-bar {\n      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,\n        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,\n        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,\n        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,\n        hsl(0 0% 0%) 100%;\n    }\n\n    :host([title]:not([audio])) media-control-bar[slot=\'top-chrome\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to top, var(--gradient-steps));\n      opacity: 0.8;\n      pointer-events: none;\n    }\n\n    :host(:not([audio])) media-control-bar[part~=\'bottom\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to bottom, var(--gradient-steps));\n      opacity: 0.8;\n      z-index: 1;\n      pointer-events: none;\n    }\n\n    media-control-bar[part~=\'bottom\'] > * {\n      z-index: 20;\n    }\n\n    media-control-bar[part~=\'bottom\'] {\n      padding: 6px 6px;\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] > * {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      position: relative;\n    }\n\n    media-controller::part(vertical-layer) {\n      transition: background-color 1s;\n    }\n\n    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {\n      background-color: var(--controls-backdrop-color, var(--controls, transparent));\n      transition: background-color 0.25s;\n    }\n\n    .center-controls {\n      --media-button-icon-width: 100%;\n      --media-button-icon-height: auto;\n      --media-tooltip-display: none;\n      pointer-events: none;\n      width: 100%;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n      paint-order: stroke;\n      stroke: rgba(102, 102, 102, 1);\n      stroke-width: 0.3px;\n      text-shadow:\n        0 0 2px rgb(0 0 0 / 0.25),\n        0 0 6px rgb(0 0 0 / 0.25);\n    }\n\n    .center-controls media-play-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      --media-control-padding: 0;\n      width: 40px;\n    }\n\n    [breakpointsm] .center-controls media-play-button {\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      transition: background 0.4s;\n      padding: 24px;\n      --media-control-background: #000;\n      --media-control-hover-background: var(--_accent-color);\n    }\n\n    .center-controls media-seek-backward-button,\n    .center-controls media-seek-forward-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      margin: 0 20px;\n      width: max(33px, min(8%, 40px));\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback {\n      display: grid;\n      align-items: initial;\n      justify-content: initial;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {\n      place-self: var(--_pre-playback-place, center);\n      grid-area: 1 / 1;\n      margin: 16px;\n    }\n\n    /* Show and hide controls or pre-playback state */\n\n    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])\n      .center-controls.pre-playback\n      media-play-button {\n      /* Using `forwards` would lead to a laggy UI after the animation got in the end state */\n      animation: 0.3s linear pre-play-hide;\n      opacity: 0;\n      pointer-events: none;\n    }\n\n    .autoplay-unmute {\n      --media-control-hover-background: transparent;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n    }\n\n    .autoplay-unmute-btn {\n      --media-control-height: 16px;\n      border-radius: 8px;\n      background: #000;\n      color: var(--_primary-color);\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      font-size: 18px;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    .autoplay-unmute-btn:hover {\n      background: var(--_accent-color);\n    }\n\n    [breakpointsm] .autoplay-unmute-btn {\n      --media-control-height: 30px;\n      padding: 14px 24px;\n      font-size: 26px;\n    }\n\n    .autoplay-unmute-btn svg {\n      margin: 0 6px 0 0;\n    }\n\n    [breakpointsm] .autoplay-unmute-btn svg {\n      margin: 0 10px 0 0;\n    }\n\n    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {\n      display: none;\n    }\n\n    media-error-dialog:not([mediaerrorcode]) {\n      opacity: 0;\n    }\n\n    media-loading-indicator {\n      --media-loading-icon-width: 100%;\n      --media-button-icon-height: auto;\n      display: var(--media-control-display, var(--media-loading-indicator-display, flex));\n      pointer-events: none;\n      position: absolute;\n      width: min(15%, 150px);\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Intentionally don\'t target the div for transition but the children\n     of the div. Prevents messing with media-chrome\'s autohide feature. */\n    media-loading-indicator + div * {\n      transition: opacity 0.15s;\n      opacity: 1;\n    }\n\n    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {\n      opacity: 0;\n      transition-delay: 400ms;\n    }\n\n    media-volume-range {\n      width: min(100%, 100px);\n      --media-range-padding-left: 10px;\n      --media-range-padding-right: 10px;\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_primary-color) 25%,\n        var(--_primary-color)\n      );\n      --media-control-hover-background: none;\n    }\n\n    media-time-display {\n      white-space: nowrap;\n    }\n\n    /* Generic style for explicitly disabled controls */\n    media-control-bar[part~=\'bottom\'] [disabled],\n    media-control-bar[part~=\'bottom\'] [aria-disabled=\'true\'] {\n      opacity: 60%;\n      cursor: not-allowed;\n    }\n\n    media-text-display {\n      --media-font-size: 16px;\n      --media-control-padding: 14px;\n      font-weight: 500;\n    }\n\n    media-play-button.animated *:is(g, path) {\n      transition: all 0.3s;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt1 {\n      opacity: 0;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt2 {\n      transform-origin: center center;\n      transform: scaleY(0);\n    }\n\n    media-play-button.animated[mediapaused] .play-icon {\n      clip-path: inset(0 0 0 0);\n    }\n\n    media-play-button.animated:not([mediapaused]) .play-icon {\n      clip-path: inset(0 0 0 100%);\n    }\n\n    media-seek-forward-button,\n    media-seek-backward-button {\n      --media-font-weight: 400;\n    }\n\n    .mute-icon {\n      display: inline-block;\n    }\n\n    .mute-icon :is(path, g) {\n      transition: opacity 0.5s;\n    }\n\n    .muted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'low\'] :is(.volume-medium, .volume-high),\n    media-mute-button[mediavolumelevel=\'medium\'] :is(.volume-high) {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .unmuted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .muted {\n      opacity: 1;\n    }\n\n    /**\n     * Our defaults for these buttons are to hide them at small sizes\n     * users can override this with CSS\n     */\n    media-controller:not([breakpointsm]):not([audio]) {\n      --bottom-play-button: none;\n      --bottom-seek-backward-button: none;\n      --bottom-seek-forward-button: none;\n      --bottom-time-display: none;\n      --bottom-playback-rate-menu-button: none;\n      --bottom-pip-button: none;\n    }\n\n    [part=\'mux-badge\'] {\n      position: absolute;\n      bottom: 10px;\n      right: 10px;\n      z-index: 2;\n      opacity: 0.6;\n      transition:\n        opacity 0.2s ease-in-out,\n        bottom 0.2s ease-in-out;\n    }\n\n    [part=\'mux-badge\']:hover {\n      opacity: 1;\n    }\n\n    [part=\'mux-badge\'] a {\n      font-size: 14px;\n      font-family: var(--_font-family);\n      color: var(--_primary-color);\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      gap: 5px;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-text {\n      transition: opacity 0.5s ease-in-out;\n      opacity: 0;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo {\n      width: 40px;\n      height: auto;\n      display: inline-block;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo svg {\n      width: 100%;\n      height: 100%;\n      fill: white;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'],\n    media-controller:not([userinactive]) [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      transition: bottom 0.1s ease-in-out;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      transition: bottom 0.2s ease-in-out 0.62s;\n    }\n\n    media-controller:not([userinactive]) [part=\'mux-badge\'] .mux-badge-text,\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 1;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 0;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive])[mediahasplayed] [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);\n    }\n  </style>\n\n  <template partial="TitleDisplay">\n    <template if="title">\n      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>\n    </template>\n  </template>\n\n  <template partial="PlayButton">\n    <media-play-button\n      part="{{section ?? \'bottom\'}} play button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      class="animated"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">\n        <g class="play-icon">\n          <path\n            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n          />\n        </g>\n        <g class="pause-icon">\n          <path\n            class="pause-icon-pt1"\n            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"\n          />\n          <path\n            class="pause-icon-pt2"\n            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"\n          />\n        </g>\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="PrePlayButton">\n    <media-play-button\n      part="{{section ?? \'center\'}} play button pre-play"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">\n        <path\n          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n        />\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="SeekBackwardButton">\n    <media-seek-backward-button\n      seekoffset="{{backwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-backward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <path\n          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"\n        />\n        <text transform="translate(6 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n          {{backwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-backward-button>\n  </template>\n\n  <template partial="SeekForwardButton">\n    <media-seek-forward-button\n      seekoffset="{{forwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-forward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <g>\n          <text transform="translate(-1 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n            {{forwardseekoffset}}\n          </text>\n          <path\n            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"\n          />\n        </g>\n      </svg>\n    </media-seek-forward-button>\n  </template>\n\n  <template partial="MuteButton">\n    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">\n        <g class="unmuted">\n          <path\n            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"\n          />\n          <path\n            class="volume-low"\n            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"\n          />\n          <path\n            class="volume-medium"\n            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"\n          />\n          <path\n            class="volume-high"\n            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"\n          />\n        </g>\n        <g class="muted">\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"\n          />\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"\n          />\n        </g>\n      </svg>\n    </media-mute-button>\n  </template>\n\n  <template partial="PipButton">\n    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"\n        />\n        <path\n          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"\n        />\n      </svg>\n    </media-pip-button>\n  </template>\n\n  <template partial="CaptionsMenu">\n    <media-captions-menu-button part="bottom captions button">\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">\n        <path\n          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">\n        <path\n          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"\n        />\n        <path\n          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"\n        />\n        <path\n          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"\n        />\n      </svg>\n    </media-captions-menu-button>\n    <media-captions-menu\n      hidden\n      anchor="auto"\n      part="bottom captions menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg></div\n    ></media-captions-menu>\n  </template>\n\n  <template partial="AirplayButton">\n    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"\n        />\n        <path\n          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"\n        />\n      </svg>\n    </media-airplay-button>\n  </template>\n\n  <template partial="FullscreenButton">\n    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"\n        />\n        <path\n          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"\n        />\n        <path\n          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"\n        />\n        <path\n          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"\n        />\n        <path\n          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"\n        />\n        <path\n          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"\n        />\n        <path\n          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"\n        />\n      </svg>\n    </media-fullscreen-button>\n  </template>\n\n  <template partial="CastButton">\n    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"\n        />\n        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />\n      </svg>\n    </media-cast-button>\n  </template>\n\n  <template partial="LiveButton">\n    <media-live-button part="{{section ?? \'top\'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <span slot="text">Live</span>\n    </media-live-button>\n  </template>\n\n  <template partial="PlaybackRateMenu">\n    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>\n    <media-playback-rate-menu\n      hidden\n      anchor="auto"\n      rates="{{playbackrates}}"\n      exportparts="menu-item"\n      part="bottom playback-rate menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-playback-rate-menu>\n  </template>\n\n  <template partial="VolumeRange">\n    <media-volume-range\n      part="bottom volume range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-volume-range>\n  </template>\n\n  <template partial="TimeDisplay">\n    <media-time-display\n      remaining="{{defaultshowremainingtime}}"\n      showduration="{{!hideduration}}"\n      part="bottom time display"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-display>\n  </template>\n\n  <template partial="TimeRange">\n    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>\n      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>\n      <media-preview-time-display slot="preview"></media-preview-time-display>\n      <div slot="preview" part="arrow"></div>\n    </media-time-range>\n  </template>\n\n  <template partial="AudioTrackMenu">\n    <media-audio-track-menu-button part="bottom audio-track button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">\n        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />\n        <path\n          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"\n        />\n      </svg>\n    </media-audio-track-menu-button>\n    <media-audio-track-menu\n      hidden\n      anchor="auto"\n      part="bottom audio-track menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-audio-track-menu>\n  </template>\n\n  <template partial="RenditionMenu">\n    <media-rendition-menu-button part="bottom rendition button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">\n        <path\n          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"\n        />\n      </svg>\n    </media-rendition-menu-button>\n    <media-rendition-menu\n      hidden\n      anchor="auto"\n      part="bottom rendition menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-rendition-menu>\n  </template>\n\n  <template partial="MuxBadge">\n    <div part="mux-badge">\n      <a href="https://www.mux.com/player" target="_blank">\n        <span class="mux-badge-text">Powered by</span>\n        <div class="mux-badge-logo">\n          <svg\n            viewBox="0 0 1600 500"\n            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"\n          >\n            <g>\n              <path\n                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"\n                style="fill-rule: nonzero"\n              ></path>\n            </g>\n          </svg>\n        </div>\n      </a>\n    </div>\n  </template>\n\n  <media-controller\n    part="controller"\n    defaultstreamtype="{{defaultstreamtype ?? \'on-demand\'}}"\n    breakpoints="sm:470"\n    gesturesdisabled="{{disabled}}"\n    hotkeys="{{hotkeys}}"\n    nohotkeys="{{nohotkeys}}"\n    novolumepref="{{novolumepref}}"\n    audio="{{audio}}"\n    noautoseektolive="{{noautoseektolive}}"\n    defaultsubtitles="{{defaultsubtitles}}"\n    defaultduration="{{defaultduration ?? false}}"\n    keyboardforwardseekoffset="{{forwardseekoffset}}"\n    keyboardbackwardseekoffset="{{backwardseekoffset}}"\n    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"\n    style="--_pre-playback-place:{{preplaybackplace ?? \'center\'}}"\n  >\n    <slot name="media" slot="media"></slot>\n    <slot name="poster" slot="poster"></slot>\n\n    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>\n    <media-error-dialog slot="dialog" noautohide></media-error-dialog>\n\n    <template if="!audio">\n      \x3c!-- Pre-playback UI --\x3e\n      \x3c!-- same for both on-demand and live --\x3e\n      <div slot="centered-chrome" class="center-controls pre-playback">\n        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>\n        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>\n      </div>\n\n      \x3c!-- Mux Badge --\x3e\n      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>\n\n      \x3c!-- Autoplay centered unmute button --\x3e\n      \x3c!--\n        todo: figure out how show this with available state variables\n        needs to show when:\n        - autoplay is enabled\n        - playback has been successful\n        - audio is muted\n        - in place / instead of the pre-plaback play button\n        - not to show again after user has interacted with this button\n          - OR user has interacted with the mute button in the control bar\n      --\x3e\n      \x3c!--\n        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug\n        makes it appear even if commented out in the markup, add it back when code is un-commented\n      --\x3e\n      \x3c!-- <div slot="centered-chrome" class="autoplay-unmute">\n        <div role="button" class="autoplay-unmute-btn">Unmute</div>\n      </div> --\x3e\n\n      <template if="streamtype == \'on-demand\'">\n        <template if="breakpointsm">\n          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>\n        </template>\n        {{>TimeRange}}\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}\n          {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}\n          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <media-control-bar part="control-bar top" slot="top-chrome">\n          {{>LiveButton}}\n          <template if="breakpointsm"> {{>TitleDisplay}} </template>\n        </media-control-bar>\n        <template if="targetlivewindow > 0">{{>TimeRange}}</template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>\n          {{>MuteButton}} {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}\n          {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <template if="audio">\n      <template if="streamtype == \'on-demand\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          {{>MuteButton}}\n          <template if="breakpointsm">{{>VolumeRange}}</template>\n          {{>TimeDisplay}} {{>TimeRange}}\n          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}\n          <template if="breakpointsm">\n            {{>VolumeRange}}\n            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          </template>\n          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>\n          <template if="!targetlivewindow"><div class="spacer"></div></template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <slot></slot>\n  </media-controller>\n</template>\n');var Aye,_ye,Sye=class extends vfe{};Sye.template=null==(_ye=null==(Aye=Eye.content)?void 0:Aye.children)?void 0:_ye[0],Lve.customElements.get("media-theme-gerwig")||Lve.customElements.define("media-theme-gerwig",Sye);var Tye={SRC:"src",POSTER:"poster"},kye={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge"},Cye=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref","proudlydisplaymuxbadge"];var Iye=p9.formatErrorMessage;function Rye(e){var t,n;let r=e.theme;if(r){let i=null==(n=null==(t=e.getRootNode())?void 0:t.getElementById)?void 0:n.call(t,r);if(i&&i instanceof HTMLTemplateElement)return i;r.startsWith("media-theme-")||(r=`media-theme-${r}`);let o=Lve.customElements.get(r);if(null!=o&&o.template)return o.template}}function Dye(e){var t;let n=null==(t=e.mediaController)?void 0:t.querySelector("media-time-display");return n&&"none"===getComputedStyle(n).getPropertyValue("--media-duration-display-display").trim()}function Lye(e){let t=e.hasAttribute(kye.TITLE)?{video_title:e.getAttribute(kye.TITLE)}:{};return e.getAttributeNames().filter((e=>e.startsWith("metadata-"))).reduce(((t,n)=>{let r=e.getAttribute(n);return null!==r&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=r),t}),t)}p9.formatErrorMessage=e=>{var t,n;if(e instanceof bce){let r=wye(e,!1);return`\n      ${null!=r&&r.title?`<h3>${r.title}</h3>`:""}\n      ${null!=r&&r.message||null!=r&&r.linkUrl?`<p>\n        ${null==r?void 0:r.message}\n        ${null!=r&&r.linkUrl?`<a\n              href="${r.linkUrl}"\n              target="_blank"\n              rel="external noopener"\n              aria-label="${null!=(t=r.linkText)?t:""} ${Uce("(opens in a new window)")}"\n              >${null!=(n=r.linkText)?n:r.linkUrl}</a\n            >`:""}\n      </p>`:""}\n    `}return Iye(e)};var Pye,Mye,Nye,Oye,jye,Fye,Uye,Bye,$ye,Vye,Wye,zye,Hye,qye,Gye,Kye=Object.values(dpe),Yye=Object.values(Tye),Qye=Object.values(kye),Xye=$ve(),Zye="mux-player",Jye={isDialogOpen:!1},ebe={redundant_streams:!0},tbe=class extends sye{constructor(){super(),Ave(this,Uye),Ave(this,Pye),Ave(this,Mye,!1),Ave(this,Nye,{}),Ave(this,Oye,!0),Ave(this,jye,new Kve(this,"hotkeys")),Ave(this,Fye,{...Jye,onCloseErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&Sve(this,Uye,Vye).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&(Fve(this,Pve.activeElement)||e.preventDefault())}}),_ve(this,Pye,Lue()),this.attachShadow({mode:"open"}),Sve(this,Uye,$ye).call(this),this.isConnected&&Sve(this,Uye,Bye).call(this)}static get NAME(){return Zye}static get VERSION(){return Xye}static get observedAttributes(){var e;return[...null!=(e=sye.observedAttributes)?e:[],...Yye,...Kye,...Qye]}get mediaTheme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.mediaTheme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=Lye(this))}attributeChangedCallback(e,t,n){switch(Sve(this,Uye,Bye).call(this),super.attributeChangedCallback(e,t,n),e){case kye.HOTKEYS:Eve(this,jye).value=n;break;case kye.THUMBNAIL_TIME:null!=n&&this.tokens.thumbnail&&Qve(Uce("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break;case kye.THUMBNAIL_TOKEN:if(n){let e=Fce(n);if(e){let{aud:t}=e,n=aue;t!==n&&Qve(Uce("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"thumbnail"}))}}break;case kye.STORYBOARD_TOKEN:if(n){let e=Fce(n);if(e){let{aud:t}=e,n=sue;t!==n&&Qve(Uce("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"storyboard"}))}}break;case kye.DRM_TOKEN:if(n){let e=Fce(n);if(e){let{aud:t}=e,n=lue;t!==n&&Qve(Uce("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"drm"}))}}break;case dpe.PLAYBACK_ID:null!=n&&n.includes("?token")&&Xve(Uce("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break;case dpe.STREAM_TYPE:n&&![Ece.LIVE,Ece.ON_DEMAND,Ece.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:Zve({file:"invalid-stream-type.md",message:Uce("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===Ece.LIVE?null==this.getAttribute(kye.TARGET_LIVE_WINDOW)&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[dpe.PLAYBACK_ID,Tye.SRC,kye.PLAYBACK_TOKEN].includes(e)&&t!==n&&_ve(this,Fye,{...Eve(this,Fye),...Jye}),Sve(this,Uye,Wye).call(this,{[zve(e)]:n})}get preferCmcd(){var e;return null!=(e=this.getAttribute(dpe.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?Tce.includes(e)?this.setAttribute(dpe.PREFER_CMCD,e):Qve(`Invalid value for preferCmcd. Must be one of ${Tce.join()}`):this.removeAttribute(dpe.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(V0.MEDIA_HAS_PLAYED))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute(V0.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get theme(){var e;return null!=(e=this.getAttribute(kye.THEME))?e:"gerwig"}set theme(e){this.setAttribute(kye.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(Cye.includes(n))continue;let r=e.getAttribute(n);t[Nve(n)]=""===r||r}return t}set themeProps(e){var t,n;Sve(this,Uye,Bye).call(this);let r={...this.themeProps,...e};for(let i in r){if(Cye.includes(i))continue;let r=null==e?void 0:e[i];"boolean"==typeof r||null==r?null==(t=this.mediaTheme)||t.toggleAttribute(Mve(i),!!r):null==(n=this.mediaTheme)||n.setAttribute(Mve(i),r)}}get playbackId(){var e;return null!=(e=this.getAttribute(dpe.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(dpe.PLAYBACK_ID,e):this.removeAttribute(dpe.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=nbe(this,Tye.SRC))?e:void 0:null!=(t=this.getAttribute(Tye.SRC))?t:void 0}set src(e){e?this.setAttribute(Tye.SRC,e):this.removeAttribute(Tye.SRC)}get poster(){var e;let t=this.getAttribute(Tye.POSTER);if(null!=t)return t;let{tokens:n}=this;if(!n.playback||n.thumbnail)return this.playbackId&&!this.audio?function(e){let{token:t,customDomain:n=Uve,thumbnailTime:r,programTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;let a=null==t?r:void 0,{aud:s}=null!=(o=Fce(t))?o:{};if(!t||"t"===s)return`https://image.${n}/${e}/thumbnail.webp${jve({token:t,time:a,program_time:i})}`}(this.playbackId,{customDomain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,programTime:this.programStartTime,token:n.thumbnail}):void 0;Qve("Missing expected thumbnail token. No poster image will be shown")}set poster(e){e||""===e?this.setAttribute(Tye.POSTER,e):this.removeAttribute(Tye.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(kye.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(kye.STORYBOARD_SRC,e):this.removeAttribute(kye.STORYBOARD_SRC)}get storyboard(){let{tokens:e}=this;return this.storyboardSrc&&!e.storyboard?this.storyboardSrc:this.audio||!this.playbackId||!this.streamType||[Ece.LIVE,Ece.UNKNOWN].includes(this.streamType)||e.playback&&!e.storyboard?void 0:function(e){let{token:t,customDomain:n=Uve,programStartTime:r,programEndTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;let{aud:a}=null!=(o=Fce(t))?o:{};if(!t||"s"===a)return`https://image.${n}/${e}/storyboard.vtt${jve({token:t,format:"webp",program_start_time:r,program_end_time:i})}`}(this.playbackId,{customDomain:this.customDomain,token:e.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(kye.AUDIO)}set audio(e){e?this.setAttribute(kye.AUDIO,""):this.removeAttribute(kye.AUDIO)}get hotkeys(){return Eve(this,jye)}get nohotkeys(){return this.hasAttribute(kye.NOHOTKEYS)}set nohotkeys(e){e?this.setAttribute(kye.NOHOTKEYS,""):this.removeAttribute(kye.NOHOTKEYS)}get thumbnailTime(){return Ove(this.getAttribute(kye.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(kye.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(kye.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(kye.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=nbe(this,kye.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(kye.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(kye.PRIMARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Lve.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_primary-color"))?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(kye.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(kye.SECONDARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Lve.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_secondary-color"))?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(kye.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,t;let n=this.getAttribute(kye.ACCENT_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Lve.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_accent-color"))?void 0:t.trim(),n))return n}set accentColor(e){this.setAttribute(kye.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(kye.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(kye.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(kye.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(kye.PLAYBACK_RATES))return this.getAttribute(kye.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map((e=>Number(e))).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t))}set playbackRates(e){e?this.setAttribute(kye.PLAYBACK_RATES,e.join(" ")):this.removeAttribute(kye.PLAYBACK_RATES)}get forwardSeekOffset(){var e;return null!=(e=Ove(this.getAttribute(kye.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(kye.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=Ove(this.getAttribute(kye.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(kye.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(kye.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(kye.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(kye.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return Ove(this.getAttribute(kye.DEFAULT_DURATION))}set defaultDuration(e){null==e?this.removeAttribute(kye.DEFAULT_DURATION):this.setAttribute(kye.DEFAULT_DURATION,`${e}`)}get playerInitTime(){return this.hasAttribute(dpe.PLAYER_INIT_TIME)?Ove(this.getAttribute(dpe.PLAYER_INIT_TIME)):Eve(this,Pye)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(dpe.PLAYER_INIT_TIME):this.setAttribute(dpe.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(dpe.PLAYER_SOFTWARE_NAME))?e:Zye}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(dpe.PLAYER_SOFTWARE_VERSION))?e:Xye}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(dpe.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(dpe.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(dpe.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(dpe.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(dpe.MAX_RESOLUTION,e):this.removeAttribute(dpe.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(dpe.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(dpe.MIN_RESOLUTION,e):this.removeAttribute(dpe.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(dpe.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(dpe.RENDITION_ORDER,e):this.removeAttribute(dpe.RENDITION_ORDER))}get programStartTime(){return Ove(this.getAttribute(dpe.PROGRAM_START_TIME))}set programStartTime(e){null==e?this.removeAttribute(dpe.PROGRAM_START_TIME):this.setAttribute(dpe.PROGRAM_START_TIME,`${e}`)}get programEndTime(){return Ove(this.getAttribute(dpe.PROGRAM_END_TIME))}set programEndTime(e){null==e?this.removeAttribute(dpe.PROGRAM_END_TIME):this.setAttribute(dpe.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){return Ove(this.getAttribute(dpe.ASSET_START_TIME))}set assetStartTime(e){null==e?this.removeAttribute(dpe.ASSET_START_TIME):this.setAttribute(dpe.ASSET_START_TIME,`${e}`)}get assetEndTime(){return Ove(this.getAttribute(dpe.ASSET_END_TIME))}set assetEndTime(e){null==e?this.removeAttribute(dpe.ASSET_END_TIME):this.setAttribute(dpe.ASSET_END_TIME,`${e}`)}get extraSourceParams(){return this.hasAttribute(kye.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(kye.EXTRA_SOURCE_PARAMS)).entries()].reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{}):ebe}set extraSourceParams(e){null==e?this.removeAttribute(kye.EXTRA_SOURCE_PARAMS):this.setAttribute(kye.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return null!=(e=this.getAttribute(dpe.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(dpe.CUSTOM_DOMAIN,e):this.removeAttribute(dpe.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=nbe(this,dpe.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(dpe.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(kye.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(kye.NO_VOLUME_PREF,""):this.removeAttribute(kye.NO_VOLUME_PREF)}get debug(){return null!=nbe(this,dpe.DEBUG)}set debug(e){e?this.setAttribute(dpe.DEBUG,""):this.removeAttribute(dpe.DEBUG)}get disableTracking(){return null!=nbe(this,dpe.DISABLE_TRACKING)}set disableTracking(e){this.toggleAttribute(dpe.DISABLE_TRACKING,!!e)}get disableCookies(){return null!=nbe(this,dpe.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(dpe.DISABLE_COOKIES,""):this.removeAttribute(dpe.DISABLE_COOKIES)}get streamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(dpe.STREAM_TYPE))?t:null==(e=this.media)?void 0:e.streamType)?n:Ece.UNKNOWN}set streamType(e){this.setAttribute(dpe.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(kye.DEFAULT_STREAM_TYPE))?t:null==(e=this.mediaController)?void 0:e.getAttribute(kye.DEFAULT_STREAM_TYPE))?n:Ece.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(kye.DEFAULT_STREAM_TYPE,e):this.removeAttribute(kye.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(kye.TARGET_LIVE_WINDOW)?+this.getAttribute(kye.TARGET_LIVE_WINDOW):null!=(t=null==(e=this.media)?void 0:e.targetLiveWindow)?t:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(null==e?this.removeAttribute(kye.TARGET_LIVE_WINDOW):this.setAttribute(kye.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e;return null==(e=this.media)?void 0:e.liveEdgeStart}get startTime(){return Ove(nbe(this,dpe.START_TIME))}set startTime(e){this.setAttribute(dpe.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(dpe.PREFER_PLAYBACK);if(e===Ace||e===_ce)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Ace||e===_ce?this.setAttribute(dpe.PREFER_PLAYBACK,e):this.removeAttribute(dpe.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){Sve(this,Uye,Bye).call(this),this.media?this.media.metadata={...Lye(this),...e}:Xve("underlying media element missing when trying to set metadata. metadata will not be set.")}get _hlsConfig(){var e;return null==(e=this.media)?void 0:e._hlsConfig}set _hlsConfig(e){Sve(this,Uye,Bye).call(this),this.media?this.media._hlsConfig=e:Xve("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.")}async addCuePoints(e){var t;if(Sve(this,Uye,Bye).call(this),this.media)return null==(t=this.media)?void 0:t.addCuePoints(e);Xve("underlying media element missing when trying to addCuePoints. cuePoints will not be added.")}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}addChapters(e){var t;if(Sve(this,Uye,Bye).call(this),this.media)return null==(t=this.media)?void 0:t.addChapters(e);Xve("underlying media element missing when trying to addChapters. chapters will not be added.")}get activeChapter(){var e;return null==(e=this.media)?void 0:e.activeChapter}get chapters(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.chapters)?t:[]}getStartDate(){var e;return null==(e=this.media)?void 0:e.getStartDate()}get currentPdt(){var e;return null==(e=this.media)?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(kye.PLAYBACK_TOKEN),t=this.getAttribute(kye.DRM_TOKEN),n=this.getAttribute(kye.THUMBNAIL_TOKEN),r=this.getAttribute(kye.STORYBOARD_TOKEN);return{...Eve(this,Nye),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{},...null!=n?{thumbnail:n}:{},...null!=r?{storyboard:r}:{}}}set tokens(e){_ve(this,Nye,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(kye.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(kye.PLAYBACK_TOKEN,`${e}`)}get drmToken(){var e;return null!=(e=this.getAttribute(kye.DRM_TOKEN))?e:void 0}set drmToken(e){this.setAttribute(kye.DRM_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(kye.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(kye.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(kye.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(kye.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,r){var i;let o=null==(i=this.media)?void 0:i.nativeEl;if(o)return qce(o,e,t,n,r)}removeTextTrack(e){var t;let n=null==(t=this.media)?void 0:t.nativeEl;if(n)return function(e,t){let n=Array.prototype.find.call(e.querySelectorAll("track"),(e=>e.track===t));null==n||n.remove()}(n,e)}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}get castReceiver(){var e;return null!=(e=this.getAttribute(kye.CAST_RECEIVER))?e:void 0}set castReceiver(e){e!==this.castReceiver&&(e?this.setAttribute(kye.CAST_RECEIVER,e):this.removeAttribute(kye.CAST_RECEIVER))}get castCustomData(){var e;return null==(e=this.media)?void 0:e.castCustomData}set castCustomData(e){this.media?this.media.castCustomData=e:Xve("underlying media element missing when trying to set castCustomData. castCustomData will not be set.")}get noTooltips(){return this.hasAttribute(kye.NO_TOOLTIPS)}set noTooltips(e){e?this.setAttribute(kye.NO_TOOLTIPS,""):this.removeAttribute(kye.NO_TOOLTIPS)}get proudlyDisplayMuxBadge(){return this.hasAttribute(kye.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(e){e?this.setAttribute(kye.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(kye.PROUDLY_DISPLAY_MUX_BADGE)}};function nbe(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}Pye=new WeakMap,Mye=new WeakMap,Nye=new WeakMap,Oye=new WeakMap,jye=new WeakMap,Fye=new WeakMap,Uye=new WeakSet,Bye=function(){var e,t,n,r;if(!Eve(this,Mye)){_ve(this,Mye,!0),Sve(this,Uye,Wye).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Lve.HTMLElement))throw""}catch{Xve("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof Ipe))throw""}catch{Xve("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof v4))throw""}catch{Xve("<media-controller> failed to upgrade!")}this.init(),Sve(this,Uye,zye).call(this),Sve(this,Uye,Hye).call(this),Sve(this,Uye,qye).call(this),_ve(this,Oye,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(A2.USER_INACTIVE))||t),Sve(this,Uye,Gye).call(this),null==(n=this.media)||n.addEventListener("streamtypechange",(()=>Sve(this,Uye,Wye).call(this))),null==(r=this.media)||r.addEventListener("loadstart",(()=>Sve(this,Uye,Wye).call(this)))}},$ye=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},Vye=function(e){Object.assign(Eve(this,Fye),e),Sve(this,Uye,Wye).call(this)},Wye=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){e.renderInto(t)}((e=>gye`
  <style>
    ${(e=>{let{tokens:t}=e;return t.drm?":host { --_cast-button-drm-display: none; }":""})(e)}
    ${":host {\n  --media-control-display: var(--controls);\n  --media-loading-indicator-display: var(--loading-indicator);\n  --media-dialog-display: var(--dialog);\n  --media-play-button-display: var(--play-button);\n  --media-live-button-display: var(--live-button);\n  --media-seek-backward-button-display: var(--seek-backward-button);\n  --media-seek-forward-button-display: var(--seek-forward-button);\n  --media-mute-button-display: var(--mute-button);\n  --media-captions-button-display: var(--captions-button);\n  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));\n  --media-rendition-menu-button-display: var(--rendition-menu-button);\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button);\n  --media-airplay-button-display: var(--airplay-button);\n  --media-pip-button-display: var(--pip-button);\n  --media-fullscreen-button-display: var(--fullscreen-button);\n  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));\n  --media-playback-rate-button-display: var(--playback-rate-button);\n  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);\n  --media-volume-range-display: var(--volume-range);\n  --media-time-range-display: var(--time-range);\n  --media-time-display-display: var(--time-display);\n  --media-duration-display-display: var(--duration-display);\n  --media-title-display-display: var(--title-display);\n\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n}\n\na {\n  color: #fff;\n  font-size: 0.9em;\n  text-decoration: underline;\n}\n\nmedia-theme {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n  direction: ltr;\n}\n\nmedia-poster-image {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n}\n\nmedia-poster-image:not([src]):not([placeholdersrc]) {\n  display: none;\n}\n\n::part(top),\n[part~='top'] {\n  --media-control-display: var(--controls, var(--top-controls));\n  --media-play-button-display: var(--play-button, var(--top-play-button));\n  --media-live-button-display: var(--live-button, var(--top-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--top-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--top-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--top-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--top-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--top-volume-range));\n  --media-time-range-display: var(--time-range, var(--top-time-range));\n  --media-time-display-display: var(--time-display, var(--top-time-display));\n  --media-duration-display-display: var(--duration-display, var(--top-duration-display));\n  --media-title-display-display: var(--title-display, var(--top-title-display));\n}\n\n::part(center),\n[part~='center'] {\n  --media-control-display: var(--controls, var(--center-controls));\n  --media-play-button-display: var(--play-button, var(--center-play-button));\n  --media-live-button-display: var(--live-button, var(--center-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--center-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--center-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--center-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--center-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--center-volume-range));\n  --media-time-range-display: var(--time-range, var(--center-time-range));\n  --media-time-display-display: var(--time-display, var(--center-time-display));\n  --media-duration-display-display: var(--duration-display, var(--center-duration-display));\n}\n\n::part(bottom),\n[part~='bottom'] {\n  --media-control-display: var(--controls, var(--bottom-controls));\n  --media-play-button-display: var(--play-button, var(--bottom-play-button));\n  --media-live-button-display: var(--live-button, var(--bottom-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--bottom-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));\n  --media-time-range-display: var(--time-range, var(--bottom-time-range));\n  --media-time-display-display: var(--time-display, var(--bottom-time-display));\n  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));\n  --media-title-display-display: var(--title-display, var(--bottom-title-display));\n}\n\n:host([no-tooltips]) {\n  --media-tooltip-display: none;\n}\n"}
  </style>
  ${yye(e)}
`)(function(e,t){var n;return{src:!e.playbackId&&e.src,playbackId:e.playbackId,hasSrc:!!e.playbackId||!!e.src||!!e.currentSrc,poster:e.poster,storyboard:e.storyboard,storyboardSrc:e.getAttribute(kye.STORYBOARD_SRC),placeholder:e.getAttribute("placeholder"),themeTemplate:Rye(e),thumbnailTime:!e.tokens.thumbnail&&e.thumbnailTime,autoplay:e.autoplay,crossOrigin:e.crossOrigin,loop:e.loop,noHotKeys:e.hasAttribute(kye.NOHOTKEYS),hotKeys:e.getAttribute(kye.HOTKEYS),muted:e.muted,paused:e.paused,preload:e.preload,envKey:e.envKey,preferCmcd:e.preferCmcd,debug:e.debug,disableTracking:e.disableTracking,disableCookies:e.disableCookies,tokens:e.tokens,beaconCollectionDomain:e.beaconCollectionDomain,maxResolution:e.maxResolution,minResolution:e.minResolution,programStartTime:e.programStartTime,programEndTime:e.programEndTime,assetStartTime:e.assetStartTime,assetEndTime:e.assetEndTime,renditionOrder:e.renditionOrder,metadata:e.metadata,playerInitTime:e.playerInitTime,playerSoftwareName:e.playerSoftwareName,playerSoftwareVersion:e.playerSoftwareVersion,startTime:e.startTime,preferPlayback:e.preferPlayback,audio:e.audio,defaultStreamType:e.defaultStreamType,targetLiveWindow:e.getAttribute(dpe.TARGET_LIVE_WINDOW),streamType:Vve(e.getAttribute(dpe.STREAM_TYPE)),primaryColor:e.getAttribute(kye.PRIMARY_COLOR),secondaryColor:e.getAttribute(kye.SECONDARY_COLOR),accentColor:e.getAttribute(kye.ACCENT_COLOR),forwardSeekOffset:e.forwardSeekOffset,backwardSeekOffset:e.backwardSeekOffset,defaultHiddenCaptions:e.defaultHiddenCaptions,defaultDuration:e.defaultDuration,defaultShowRemainingTime:e.defaultShowRemainingTime,hideDuration:Dye(e),playbackRates:e.getAttribute(kye.PLAYBACK_RATES),customDomain:null!=(n=e.getAttribute(dpe.CUSTOM_DOMAIN))?n:void 0,title:e.getAttribute(kye.TITLE),novolumepref:e.hasAttribute(kye.NO_VOLUME_PREF),castReceiver:e.castReceiver,proudlyDisplayMuxBadge:e.hasAttribute(kye.PROUDLY_DISPLAY_MUX_BADGE),...t,extraSourceParams:e.extraSourceParams}}(this,{...Eve(this,Fye),...e})),this.shadowRoot)},zye=function(){let e=e=>{var t,n;if(null==e||!e.startsWith("theme-"))return;let r=e.replace(/^theme-/,"");if(Cye.includes(r))return;let i=this.getAttribute(e);null!=i?null==(t=this.mediaTheme)||t.setAttribute(r,i):null==(n=this.mediaTheme)||n.removeAttribute(r)};new MutationObserver((t=>{for(let{attributeName:n}of t)e(n)})).observe(this,{attributes:!0}),this.getAttributeNames().forEach(e)},Hye=function(){var e,t=this;this.addEventListener("error",(e=>{let{detail:t}=e;if(t instanceof bce||(t=new bce(t.message,t.code,t.fatal)),null==t||!t.fatal)return Qve(t),void(t.data&&Qve(`${t.name} data:`,t.data));let n=xye(t);n.message&&Zve(n),Xve(t),t.data&&Xve(`${t.name} data:`,t.data),Sve(this,Uye,Vye).call(this,{isDialogOpen:!0})})),this.media&&(this.media.errorTranslator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n,r,i;if(!((null==(n=t.media)?void 0:n.error)instanceof bce))return e;let o=xye(null==(r=t.media)?void 0:r.error);return{player_error_code:null==(i=t.media)?void 0:i.error.code,player_error_message:o.message?String(o.message):e.player_error_message,player_error_context:o.context?String(o.context):e.player_error_context}}),null==(e=this.media)||e.addEventListener("error",(e=>{var t,n;let{detail:r}=e;if(!r){let{message:e,code:i}=null!=(n=null==(t=this.media)?void 0:t.error)?n:{};r=new bce(e,i)}null!=r&&r.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:r}))}))},qye=function(){var e,t,n,r;let i=()=>Sve(this,Uye,Wye).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",i),null==(r=null==(n=this.media)?void 0:n.textTracks)||r.addEventListener("removetrack",i)},Gye=function(){var e,t,n=this;if(!/Firefox/i.test(navigator.userAgent))return;let r,i=new WeakMap,o=()=>this.streamType===Ece.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,a=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o()||Array.from(e&&e.activeCues||[]).forEach((e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10))if(!t||n.paused){let t=e.text.split("\n").length,o=-3;n.streamType===Ece.LIVE&&(o=-2);let a=o-t;if(e.line===a&&!r)return;i.has(e)||i.set(e,e.line),e.line=a}else setTimeout((()=>{e.line=i.get(e)||"auto"}),500)}))},s=()=>{var e,t;a(r,null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(A2.USER_INACTIVE))&&t)},l=()=>{var e,t;let n=Array.from((null==(t=null==(e=this.mediaController)?void 0:e.media)?void 0:t.textTracks)||[]).filter((e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode))[0];n!==r&&(null==r||r.removeEventListener("cuechange",s)),r=n,null==r||r.addEventListener("cuechange",s),a(r,Eve(this,Oye))};l(),null==(e=this.textTracks)||e.addEventListener("change",l),null==(t=this.textTracks)||t.addEventListener("addtrack",l),this.addEventListener("userinactivechange",(()=>{var e,t;let n=null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(A2.USER_INACTIVE))||t;Eve(this,Oye)!==n&&(_ve(this,Oye,n),a(r,Eve(this,Oye)))}))},Lve.customElements.get("mux-player")||(Lve.customElements.define("mux-player",tbe),Lve.MuxPlayerElement=tbe);const rbe="http://localhost:3001",ibe=e=>{let{isOwner:n,roomId:r}=e;const[i,o]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null),v=(0,t.useRef)();(0,t.useEffect)((()=>(n&&r?b():r&&(y(),v.current=setInterval(y,5e3)),()=>{v.current&&clearInterval(v.current)})),[n,r]);const y=async()=>{try{const e=await fetch(`${rbe}/api/streams/${r}/status`);if(404===e.status)return n?(console.log("No stream found, creating new stream..."),void await b()):(console.log("No stream found for this room"),void c("Stream is not available. Please wait for the owner to start streaming."));if(!e.ok)throw new Error("Failed to check stream status");const t=await e.json();m(t.isActive),t.playbackId&&p(t.playbackId),t.streamId&&o(t.streamId),c(null)}catch(O_e){console.error("Error checking stream status:",O_e),m(!1),c("Failed to check stream status. Please try again later.")}},b=async()=>{try{if(d(!0),c(null),!r)throw new Error("Room ID is required");console.log("Creating stream for room:",r);const e=await fetch(`${rbe}/api/create-stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:r})});if(!e.ok){const t=await e.json();throw console.error("Server error:",t),new Error(t.details||t.error||`Server error: ${e.status}`)}const t=await e.json();if(console.log("Stream created successfully:",t),!t.streamKey||!t.playbackId)throw console.error("Invalid stream data:",t),new Error("Invalid stream data received from server");o(t.streamId),s(t.streamKey),p(t.playbackId),m(!1),v.current&&clearInterval(v.current),v.current=setInterval(y,5e3)}catch(O_e){throw console.error("Error initializing stream:",O_e),c(O_e instanceof Error?O_e.message:"Failed to initialize streaming. Please try again."),O_e}finally{d(!1)}};return(0,Ve.jsxs)(Xe,{sx:{p:2},children:[l&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:l}),u&&(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,Ve.jsx)(SU,{})}),n&&(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2,mb:2},children:[(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");m(!0)}catch(O_e){console.error("Error starting stream:",O_e),c("Failed to start streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||f,children:"Start Streaming"}),(0,Ve.jsx)(lM,{variant:"contained",color:"secondary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");m(!1)}catch(O_e){console.error("Error stopping stream:",O_e),c("Failed to stop streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||!f,children:"Stop Streaming"})]}),n&&i&&(0,Ve.jsxs)(Xe,{sx:{mb:2,p:3,bgcolor:"background.paper",borderRadius:1},children:[(0,Ve.jsx)(QL,{variant:"h6",sx:{mb:2},children:"Stream Setup Instructions"}),(0,Ve.jsxs)(Xe,{sx:{mb:2},children:[(0,Ve.jsx)(QL,{variant:"subtitle1",color:"primary",children:"Stream Key (Required for OBS):"}),(0,Ve.jsx)(QL,{variant:"body2",sx:{wordBreak:"break-all",p:1,bgcolor:"action.hover",borderRadius:1,fontFamily:"monospace"},children:a})]}),(0,Ve.jsx)(QL,{variant:"subtitle1",sx:{mb:1},children:"How to Start Streaming:"}),(0,Ve.jsxs)("ol",{style:{marginLeft:"20px"},children:[(0,Ve.jsx)("li",{children:"Open OBS Studio"}),(0,Ve.jsxs)("li",{children:["Go to Settings ",">"," Stream"]}),(0,Ve.jsx)("li",{children:'Select "Custom..." as Service'}),(0,Ve.jsxs)("li",{children:["Set Server URL to: ",(0,Ve.jsx)(QL,{component:"span",sx:{fontFamily:"monospace"},children:"rtmps://global-live.mux.com:443/app"})]}),(0,Ve.jsx)("li",{children:'Copy the Stream Key shown above and paste it into the "Stream Key" field'}),(0,Ve.jsx)("li",{children:'Click "OK" to save settings'}),(0,Ve.jsx)("li",{children:'Click "Start Streaming" in OBS when ready'})]}),(0,Ve.jsx)(aB,{severity:"info",sx:{mt:2},children:"Keep your stream key private! Anyone with this key can stream to your channel."})]}),h&&(0,Ve.jsx)(Xe,{sx:{mt:2},children:f?(0,Ve.jsx)("mux-player",{ref:g,"stream-type":"live","playback-id":h,"metadata-video-title":"Live Stream","metadata-viewer-user-id":r,style:{width:"100%",maxHeight:"500px"}}):(0,Ve.jsx)(Xe,{sx:{textAlign:"center",p:3,bgcolor:"background.paper",borderRadius:1},children:(0,Ve.jsxs)(aB,{severity:"info",children:["The stream is not currently active. ",n?"Use the stream key above to start streaming.":"Please wait for the streamer to start broadcasting."]})})})]})};var obe=n(1397),abe=n.n(obe);const sbe=[{label:"Default",value:"inherit"},{label:"Arial",value:"Arial, sans-serif"},{label:"Times New Roman",value:"Times New Roman, serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"Open Sans",value:"Open Sans, sans-serif"},{label:"Montserrat",value:"Montserrat, sans-serif"},{label:"Playfair Display",value:"Playfair Display, serif"},{label:"Comic Sans MS",value:"Comic Sans MS, cursive"},{label:"Poppins",value:"Poppins, sans-serif"},{label:"Dancing Script",value:"Dancing Script, cursive"},{label:"Pacifico",value:"Pacifico, cursive"},{label:"Quicksand",value:"Quicksand, sans-serif"},{label:"Lato",value:"Lato, sans-serif"},{label:"Raleway",value:"Raleway, sans-serif"},{label:"Nunito",value:"Nunito, sans-serif"},{label:"Source Sans Pro",value:"Source Sans Pro, sans-serif"},{label:"Ubuntu",value:"Ubuntu, sans-serif"},{label:"Oswald",value:"Oswald, sans-serif"},{label:"Merriweather",value:"Merriweather, serif"},{label:"Noto Sans",value:"Noto Sans, sans-serif"}],lbe=[{name:"Default",value:"#ffffff"},{name:"Ocean Blue",value:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"},{name:"Sunset",value:"linear-gradient(135deg, #ff6b6b 0%, #556270 100%)"},{name:"Forest",value:"linear-gradient(135deg, #134e5e 0%, #71b280 100%)"},{name:"Purple Rain",value:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)"},{name:"Glitter Gold",value:"linear-gradient(135deg, #f6d365 0%, #fda085 100%)"},{name:"Neon Pink",value:"linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%)"},{name:"Electric Blue",value:"linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)"},{name:"Mint Fresh",value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{name:"Glitter Purple",value:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)"},{name:"Midnight",value:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)"},{name:"Sunrise",value:"linear-gradient(135deg, #ff512f 0%, #f09819 100%)"},{name:"Emerald",value:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{name:"Rose",value:"linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)"},{name:"Sky",value:"linear-gradient(135deg, #56ccf2 0%, #2f80ed 100%)"},{name:"Autumn",value:"linear-gradient(135deg, #f2994a 0%, #f2c94c 100%)"},{name:"Crystal",value:"linear-gradient(135deg, #159957 0%, #155799 100%)"},{name:"Neon",value:"linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)"},{name:"Royal",value:"linear-gradient(135deg, #141e30 0%, #243b55 100%)"},{name:"Cotton Candy",value:"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"}],cbe=[{name:"Star",value:"\u2b50"},{name:"Heart",value:"\u2764\ufe0f"},{name:"Fire",value:"\ud83d\udd25"},{name:"Sparkles",value:"\u2728"},{name:"Rocket",value:"\ud83d\ude80"},{name:"Party",value:"\ud83c\udf89"},{name:"Music",value:"\ud83c\udfb5"},{name:"Gaming",value:"\ud83c\udfae"},{name:"Art",value:"\ud83c\udfa8"},{name:"Sports",value:"\u26bd"},{name:"Food",value:"\ud83c\udf55"},{name:"Travel",value:"\u2708\ufe0f"},{name:"Tech",value:"\ud83d\udcbb"},{name:"Nature",value:"\ud83c\udf3f"},{name:"Weather",value:"\u2600\ufe0f"}],ube=()=>{var e,n,r,i,o,a,s,l,c,u,d,h,p;const{roomId:f}=J(),{user:m,loading:g}=ND(),v=Z(),[y,b]=(0,t.useState)(null),[w,x]=(0,t.useState)(!0),[E,A]=(0,t.useState)(null),[_,S]=(0,t.useState)(!1),[T,k]=(0,t.useState)(""),[C,I]=(0,t.useState)(!1),[R,D]=(0,t.useState)([]),[L,P]=(0,t.useState)(""),[M,N]=(0,t.useState)(!1),[O,j]=(0,t.useState)(!1),[F,U]=(0,t.useState)(!1),[B,$]=(0,t.useState)(!1),[V,W]=(0,t.useState)(null),[z,H]=(0,t.useState)(!1),[q,G]=(0,t.useState)(!1),[K,Y]=(0,t.useState)(""),[Q,X]=(0,t.useState)([]),[ee,te]=(0,t.useState)([]),[ne,re]=(0,t.useState)(!1),[ie,oe]=(0,t.useState)([]),[ae,se]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(""),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(""),[fe,me]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)({headerColor:(null===y||void 0===y||null===(e=y.style)||void 0===e?void 0:e.headerColor)||"#ffffff",backgroundColor:(null===y||void 0===y||null===(n=y.style)||void 0===n?void 0:n.backgroundColor)||"#ffffff",textColor:(null===y||void 0===y||null===(r=y.style)||void 0===r?void 0:r.textColor)||"#000000",accentColor:(null===y||void 0===y||null===(i=y.style)||void 0===i?void 0:i.accentColor)||"#000000",font:(null===y||void 0===y||null===(o=y.style)||void 0===o?void 0:o.font)||"",customCss:(null===y||void 0===y||null===(a=y.style)||void 0===a?void 0:a.customCss)||"",headerGradient:(null===y||void 0===y||null===(s=y.style)||void 0===s?void 0:s.headerGradient)||!1,backgroundGradient:(null===y||void 0===y||null===(l=y.style)||void 0===l?void 0:l.backgroundGradient)||!1,glitterEffect:(null===y||void 0===y||null===(c=y.style)||void 0===c?void 0:c.glitterEffect)||!1,headerFontSize:(null===y||void 0===y||null===(u=y.style)||void 0===u?void 0:u.headerFontSize)||24,stickers:(null===y||void 0===y||null===(d=y.style)||void 0===d?void 0:d.stickers)||[]}),[ye,be]=(0,t.useState)(!1),[we,xe]=(0,t.useState)([]),[Ee,Ae]=(0,t.useState)(!1),[_e,Se]=(0,t.useState)(null),[Te,ke]=(0,t.useState)(!1),Ce=(0,t.useRef)(!0),Ie=(0,t.useRef)(null),Re=(0,t.useRef)(null),De=(0,t.useMemo)((()=>(null===y||void 0===y?void 0:y.ownerId)===(null===m||void 0===m?void 0:m.uid)),[null===y||void 0===y?void 0:y.ownerId,null===m||void 0===m?void 0:m.uid]),Le=(0,t.useMemo)((()=>{var e;return(null===y||void 0===y||null===(e=y.members)||void 0===e?void 0:e.some((e=>e.userId===(null===m||void 0===m?void 0:m.uid))))||!1}),[null===y||void 0===y?void 0:y.members,null===m||void 0===m?void 0:m.uid]);(0,t.useEffect)((()=>()=>{Ce.current=!1}),[]);const Pe=(0,t.useCallback)(((e,t)=>{console.error(t,e),Ce.current&&(e instanceof Us?A(`Firestore error: ${e.message}`):e instanceof Error?A(e.message):A(t))}),[]),Me=async()=>{if(_e&&!Te&&f&&sR)try{ke(!0);const e=ew(lb(sR,"sideRooms",f,"messages"),ow("timestamp","desc"),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lw._create("startAfter",t,!1)}(_e),sw(25)),t=await Aw(e);if(!t.empty){Se(t.docs[t.docs.length-1]);const e=t.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}})).reverse();D((t=>{const n=new Map;return[...t,...e].forEach((e=>{n.has(e.id)||n.set(e.id,e)})),Array.from(n.values())}))}}catch(O_e){console.error("Error loading more messages:",O_e),MR.error("Failed to load more messages")}finally{ke(!1)}};(0,t.useEffect)((()=>{if(Ie.current)return Re.current=new IntersectionObserver((e=>{e[0].isIntersecting&&Me()}),{threshold:.5}),Re.current.observe(Ie.current),()=>{Re.current&&Re.current.disconnect()}}),[Ie.current,_e]);const Ne=(0,t.useCallback)(abe().debounce((async()=>{if(m&&f&&sR)try{var e;const t=cb(sR,"sideRooms",f,"presence",m.uid);await _w(t,{userId:m.uid,username:m.displayName||(null===(e=m.email)||void 0===e?void 0:e.split("@")[0])||"Anonymous",avatar:m.photoURL||"",lastSeen:jw(),isOnline:!0},{merge:!0})}catch(O_e){console.error("Error updating presence:",O_e)}}),1e3),[m,f]);(0,t.useEffect)((()=>{if(!m||!f||!sR)return;const e=cb(sR,"sideRooms",f,"presence",m.uid),t=async()=>{try{await _w(e,{isOnline:!1,lastSeen:jw()},{merge:!0})}catch(O_e){console.error("Error cleaning up presence:",O_e)}};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?t():Ne()})),()=>{window.removeEventListener("beforeunload",t),t()}}),[m,f]);const[Oe,je]=(0,t.useState)(new Map),Fe=async e=>{var t,n;if(e.preventDefault(),!f||!m||!L.trim())return;const r=L.trim();P("");const i=`temp-${Date.now()}`,o={id:i,userId:m.uid,username:m.displayName||(null===(t=m.email)||void 0===t?void 0:t.split("@")[0])||"Anonymous",avatar:m.photoURL||"",content:r,timestamp:new Date,photoURL:m.photoURL||"",displayName:m.displayName||(null===(n=m.email)||void 0===n?void 0:n.split("@")[0])||"Anonymous"};D((e=>[...e,o]));try{var a,s;const e=lb(sR,"sideRooms",f,"messages"),t={userId:m.uid,username:m.displayName||(null===(a=m.email)||void 0===a?void 0:a.split("@")[0])||"Anonymous",avatar:m.photoURL||"",content:r,timestamp:jw(),photoURL:m.photoURL||"",displayName:m.displayName||(null===(s=m.email)||void 0===s?void 0:s.split("@")[0])||"Anonymous"},n=await kw(e,t);D((e=>e.map((e=>e.id===i?{...e,id:n.id}:e)))),l={...t,id:n.id,timestamp:new Date},je((e=>{const t=new Map(e);if(t.set(l.id,l),t.size>100){const e=Array.from(t.keys());e.length>0&&t.delete(e[0])}return t}))}catch(O_e){D((e=>e.filter((e=>e.id!==i)))),Pe(O_e,"Failed to send message")}var l};(0,t.useEffect)((()=>{if(!m||!f)return;(async()=>{try{if(!f||!sR)return;console.log("Current user:",m),console.log("Display name:",m.displayName),console.log("Photo URL:",m.photoURL);cb(sR,"sideRooms",f);const e=lb(sR,"sideRooms",f,"messages"),t=Cw(ew(e,ow("timestamp","asc")),(e=>{var t;const n=e.docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username||t.displayName||"Anonymous",avatar:t.photoURL||t.avatar||"",content:t.content,timestamp:t.timestamp,photoURL:t.photoURL||t.avatar||"",displayName:t.displayName||t.username||"Anonymous"}}));console.log("Messages:",n),D(n),null===(t=Ie.current)||void 0===t||t.scrollIntoView({behavior:"smooth"});const r=cb(sR,"sideRooms",f),i=ie.filter((e=>e.isOnline)).length;Sw(r,{activeUsers:i,lastActive:jw()})}));return()=>t()}catch(O_e){console.error("Error setting up room listener:",O_e),A("Failed to setup room listener")}})()}),[m,f,ie]),(0,t.useEffect)((()=>{if(g)return;if(!m)return void v("/login");let e,t,n;const r=()=>{try{if(!f||!sR)return;const e=ew(lb(sR,"sideRooms",f,"messages"),ow("timestamp","desc"),sw(50));t=Cw(e,(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}}));D(t.reverse())}),(e=>{console.error("Error listening to messages:",e),e instanceof Us&&"permission-denied"===e.code&&A("You need to be a member of this room to view messages")}))}catch(O_e){console.error("Error setting up messages listener:",O_e)}},i=()=>{try{if(!f||!sR)return;const e=lb(sR,"sideRooms",f,"presence");n=Cw(e,(e=>{const t=e.docs.map((e=>{var t;return{...e.data(),lastSeen:(null===(t=e.data().lastSeen)||void 0===t?void 0:t.toDate())||new Date}}));oe(t);const n=cb(sR,"sideRooms",f),r=t.filter((e=>e.isOnline)).length;Sw(n,{activeUsers:r,lastActive:jw()})}),(e=>{console.error("Error listening to presence:",e),e instanceof Us&&"permission-denied"===e.code&&A("You need to be a member of this room to view presence")}))}catch(O_e){console.error("Error setting up presence listener:",O_e)}};return(async()=>{try{if(!f||!sR)return;const o=cb(sR,"sideRooms",f);e=Cw(o,(async e=>{if(e.exists()){var o;const a=e.data();b(a),x(!1);const s=null===(o=a.members)||void 0===o?void 0:o.some((e=>e.userId===m.uid)),l=a.ownerId===m.uid;s||l?(r(),i()):(t&&t(),n&&n(),t=void 0,n=void 0,A("You need to be a member of this room to view messages and presence"))}else A("Room not found"),x(!1)}),(e=>{console.error("Error listening to room:",e),A("Failed to load room data"),x(!1)}))}catch(O_e){console.error("Error setting up room listener:",O_e),A("Failed to setup room listener"),x(!1)}})(),()=>{e&&e(),t&&t(),n&&n()}}),[m,g,f,v,ie]);const Ue=(0,t.useCallback)((async()=>{if(y&&m&&f&&!C)try{I(!0);const e=cb(sR,"sideRooms",f),t=lb(sR,"users",m.uid,"sideRooms");await Ow(sR,(async n=>{const r=await n.get(e);if(!r.exists())throw new Error("Room not found");const i=r.data();if((i.members||[]).some((e=>e.userId===m.uid)))n.update(e,{activeUsers:Bw(1),lastActive:jw()});else{var o;n.update(e,{members:Fw({userId:m.uid,username:m.displayName||"Anonymous",avatar:m.photoURL||"",role:"member",joinedAt:jw()}),memberCount:Bw(1),activeUsers:Bw(1),lastActive:jw()});const r=cb(t,f);n.set(r,{roomId:f,name:i.name,description:i.description,role:"member",joinedAt:jw(),lastActive:jw(),memberCount:i.memberCount,isPrivate:i.isPrivate,isOwner:!1,thumbnailUrl:(null===(o=i.style)||void 0===o?void 0:o.thumbnailUrl)||null,category:i.category||"General"})}})),Ce.current&&(MR.success("Joined room successfully"),S(!1))}catch(O_e){console.error("Error joining room:",O_e),O_e instanceof Error?MR.error(O_e.message):MR.error("Failed to join room"),Ce.current&&S(!1)}finally{Ce.current&&I(!1)}}),[y,m,f,C,sR,S,I]),Be=((0,t.useCallback)((()=>{y?T.trim()?T===y.password?Ue():MR.error("Incorrect password"):MR.error("Please enter a password"):MR.error("Room not found")}),[y,T,Ue]),(0,t.useCallback)((async()=>{if(y&&m&&f&&!C)try{I(!0);const e=cb(sR,"sideRooms",f),t=cb(sR,"users",m.uid,"sideRooms",f);await Ow(sR,(async n=>{const r=await n.get(e);if(!r.exists())throw new Error("Room not found");const i=r.data(),o={userId:m.uid,username:m.displayName||"Anonymous",avatar:m.photoURL||"",role:"member",joinedAt:new Date};n.update(e,{members:Uw(o),memberCount:Math.max(0,(i.memberCount||0)-1),style:i.style||ge,lastActive:jw()}),n.delete(t)})),Ce.current&&(MR.success("Left room successfully"),setTimeout((()=>{Ce.current&&v("/side-rooms")}),100))}catch(O_e){Pe(O_e,"Failed to leave room")}finally{Ce.current&&I(!1)}}),[y,m,f,C,v,Pe,ge])),$e=async()=>{if(y&&m&&f)try{I(!0);const e=cb(sR,"sideRooms",f);await Sw(e,{isLive:!y.isLive,lastActivity:jw()}),N(!y.isLive),MR.success(y.isLive?"Stopped live session":"Started live session")}catch(O_e){Pe(O_e,"Failed to update live status")}finally{I(!1)}},We=e=>{W(e.currentTarget)},ze=()=>{W(null)},He=async()=>{if(y&&f&&m&&0!==ee.length)try{re(!0);const e=$w(sR);for(const t of ee){const n=cb(lb(sR,"sideRooms",f,"invitations"));e.set(n,{userId:t.id,invitedBy:m.uid,inviterName:m.displayName||"Anonymous",inviterAvatar:m.photoURL||"",roomId:f,roomName:y.name,timestamp:jw(),status:"pending"});const r=cb(lb(sR,"users",t.id,"notifications"));e.set(r,{type:"room_invitation",roomId:f,roomName:y.name,invitedBy:m.uid,inviterName:m.displayName||"Anonymous",inviterAvatar:m.photoURL||"",timestamp:jw(),status:"unread",message:`${m.displayName||"Someone"} invited you to join "${y.name}"`})}await e.commit(),MR.success("Invitations sent successfully"),G(!1),te([]),X([])}catch(O_e){console.error("Error sending invitations:",O_e),MR.error("Failed to send invitations")}finally{re(!1)}},qe=async()=>{var e;if(sR&&m&&f)if(De||null!==y&&void 0!==y&&null!==(e=y.members)&&void 0!==e&&e.some((e=>e.userId===m.uid)))try{I(!0);const e=cb(sR,"sideRooms",f),t=(await xw(e)).data();if(null!==t&&void 0!==t&&t.isMobileStreaming&&(null===t||void 0===t?void 0:t.mobileStreamerId)!==m.uid)return MR.error("Another user is already streaming"),void I(!1);if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))return de(!0),void I(!1);const n=await fetch("http://localhost:3001/api/mux/create-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:m.uid})});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create stream")}const{streamKey:r,playbackId:i,streamId:o}=await n.json();await Sw(e,{isMobileStreaming:!0,mobileStreamKey:r,mobilePlaybackId:i,mobileStreamerId:m.uid,lastActive:jw()}),ce(`https://stream.mux.com/${i}`),pe(r),se(!0),de(!0),MR.success("Mobile streaming setup complete")}catch(E){console.error("Error starting mobile stream:",E),MR.error("Failed to start mobile stream. Please check your connection and try again.")}finally{I(!1)}else MR.error("Only room owners and members can start mobile streaming")},Ge=async()=>{var e;if(sR&&m&&f)if(De||null!==y&&void 0!==y&&null!==(e=y.members)&&void 0!==e&&e.some((e=>e.userId===m.uid)))if(null!==y&&void 0!==y&&y.mobileStreamerId&&y.mobileStreamerId!==m.uid)MR.error("Only the current streamer can stop the stream");else try{I(!0);const e=await fetch("http://localhost:3001/api/mux/delete-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:m.uid})});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to stop stream")}const t=cb(sR,"sideRooms",f);await Sw(t,{isMobileStreaming:!1,mobileStreamKey:null,mobilePlaybackId:null,mobileStreamerId:null,lastActive:jw()}),se(!1),ce(""),pe(""),de(!1),MR.success("Mobile streaming stopped")}catch(E){console.error("Error stopping mobile stream:",E),MR.error("Failed to stop mobile stream")}finally{I(!1)}else MR.error("Only room owners and members can stop mobile streaming")},Ke=async()=>{if(!y||!m||!f||!y.isLive)return void MR.error("Room must be live to start recording");const e=y.mobilePlaybackId||y.currentStreamId;if(e)try{I(!0);const t=await fetch("http://localhost:3001/api/mux/start-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:m.uid,streamId:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to start recording")}const{recordingId:n}=await t.json(),r=cb(sR,"sideRooms",f);await Sw(r,{isRecording:!0,currentRecordingId:n,lastActive:jw()}),be(!0),MR.success("Recording started")}catch(E){console.error("Error starting recording:",E),MR.error(E instanceof Error?E.message:"Failed to start recording")}finally{I(!1)}else MR.error("No active stream found. Please start streaming first.")},Ye=async()=>{if(y&&m&&f)try{I(!0);if(!(await fetch("http://localhost:3001/api/mux/stop-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:f,userId:m.uid,recordingId:y.currentRecordingId})})).ok)throw new Error("Failed to stop recording");const e=cb(sR,"sideRooms",f);await Sw(e,{isRecording:!1,currentRecordingId:null,lastActive:jw()}),be(!1),MR.success("Recording stopped")}catch(E){console.error("Error stopping recording:",E),MR.error("Failed to stop recording")}finally{I(!1)}};if(g||w)return(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(SU,{})});if(E)return(0,Ve.jsx)(Xe,{sx:{p:2},children:(0,Ve.jsx)(aB,{severity:"error",children:E})});if(!y)return null;null===(h=y.members)||void 0===h||h.some((e=>e.userId===(null===m||void 0===m?void 0:m.uid)&&"owner"===e.role)),null===(p=y.members)||void 0===p||p.find((e=>"owner"===e.role));return(0,Ve.jsxs)(Xe,{sx:{display:"flex",height:"100vh",overflow:"hidden",flexDirection:{xs:"column",sm:"row"},...null!==y&&void 0!==y&&y.style?{bgcolor:y.style.backgroundColor,background:y.style.backgroundGradient?y.style.backgroundColor:void 0,color:y.style.textColor||"text.primary",fontFamily:y.style.font||"inherit",...y.style.glitterEffect&&{"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M11 0h2v2h-2zM13 2h2v2h-2zM15 4h2v2h-2zM17 6h2v2h-2zM19 8h2v2h-2zM21 10h2v2h-2zM23 12h2v2h-2zM25 14h2v2h-2zM27 16h2v2h-2zM29 18h2v2h-2zM31 20h2v2h-2zM33 22h2v2h-2zM35 24h2v2h-2zM37 26h2v2h-2zM39 28h2v2h-2zM41 30h2v2h-2zM43 32h2v2h-2zM45 34h2v2h-2zM47 36h2v2h-2zM49 38h2v2h-2zM51 40h2v2h-2zM53 42h2v2h-2zM55 44h2v2h-2zM57 46h2v2h-2zM59 48h2v2h-2zM61 50h2v2h-2zM63 52h2v2h-2zM65 54h2v2h-2zM67 56h2v2h-2zM69 58h2v2h-2zM71 60h2v2h-2zM73 62h2v2h-2zM75 64h2v2h-2zM77 66h2v2h-2zM79 68h2v2h-2zM81 70h2v2h-2zM83 72h2v2h-2zM85 74h2v2h-2zM87 76h2v2h-2zM89 78h2v2h-2zM91 80h2v2h-2zM93 82h2v2h-2zM95 84h2v2h-2zM97 86h2v2h-2zM99 88h2v2h-2zM101 90h2v2h-2zM103 92h2v2h-2zM105 94h2v2h-2zM107 96h2v2h-2zM109 98h2v2h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",opacity:.5,zIndex:1,pointerEvents:"none"}},...y.style.customCss?{...JSON.parse(y.style.customCss)}:{}}:{}},children:[(0,Ve.jsxs)(Xe,{sx:{flex:1,display:"flex",flexDirection:"column",height:{xs:"calc(100vh - 56px)",sm:"100%"},overflow:"hidden"},children:[(0,Ve.jsx)(Xe,{sx:{position:"relative",p:{xs:1.5,sm:2},borderBottom:1,borderColor:"divider",background:(ge.headerGradient,ge.headerColor),minHeight:{xs:"56px",sm:"auto"},display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:(0,Ve.jsxs)(Xe,{sx:{position:"relative",zIndex:2,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},width:"100%",gap:{xs:1,sm:2},color:ge.textColor},children:[(0,Ve.jsxs)(Xe,{sx:{width:{xs:"100%",sm:"auto"}},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",sx:{fontFamily:ge.font,textShadow:"2px 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:`${ge.headerFontSize}px`}},children:null===y||void 0===y?void 0:y.name}),(0,Ve.jsxs)(QL,{variant:"subtitle1",sx:{fontFamily:ge.font,textShadow:"1px 1px 2px rgba(0,0,0,0.3)",fontSize:{xs:"0.875rem",sm:"1rem"}},children:["Created by ",(null===y||void 0===y?void 0:y.ownerId)===(null===m||void 0===m?void 0:m.uid)?"You":"Anonymous"]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:{xs:.5,sm:1},flexWrap:"wrap",justifyContent:{xs:"flex-start",sm:"flex-end"},width:{xs:"100%",sm:"auto"}},children:[(De||Le)&&(0,Ve.jsx)(Ve.Fragment,{children:De&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(FP,{onClick:We,sx:{color:ge.accentColor,padding:{xs:1,sm:1.5}},children:(0,Ve.jsx)(U$,{})}),(0,Ve.jsx)(lM,{variant:"outlined",startIcon:(0,Ve.jsx)(YX,{}),onClick:()=>G(!0),size:"small",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 16px"}},children:"Add Member"}),(0,Ve.jsx)(rJ,{title:null!==y&&void 0!==y&&y.isLive?"Stop Live":"Go Live",children:(0,Ve.jsx)(FP,{color:null!==y&&void 0!==y&&y.isLive?"error":"primary",onClick:$e,disabled:C,children:(0,Ve.jsx)(D0,{})})}),(null===y||void 0===y?void 0:y.isLive)&&(0,Ve.jsx)(rJ,{title:ye?"Stop Recording":"Start Recording",children:(0,Ve.jsx)(FP,{onClick:ye?Ye:Ke,color:ye?"error":"primary",disabled:C,children:ye?(0,Ve.jsx)(L0,{}):(0,Ve.jsx)(P0,{})})}),(0,Ve.jsx)(lM,{variant:"contained",color:ae?"error":"primary",startIcon:ae?(0,Ve.jsx)(M0,{}):(0,Ve.jsx)(C$,{}),onClick:ae?Ge:qe,disabled:C,sx:{mr:1},children:ae?"Stop Mobile Stream":"Start Mobile Stream"})]})}),(0,Ve.jsx)(rJ,{title:"Chat",children:(0,Ve.jsx)(FP,{onClick:()=>U(!F),color:F?"primary":"default",sx:{color:"inherit"},children:(0,Ve.jsx)(N0,{})})}),(0,Ve.jsx)(rJ,{title:"Members",children:(0,Ve.jsx)(FP,{onClick:()=>j(!O),color:O?"primary":"default",sx:{color:"inherit"},children:(0,Ve.jsx)(tZ,{})})}),!De&&(0,Ve.jsx)(lM,{variant:Le?"outlined":"contained",color:Le?"error":"primary",onClick:Le?Be:Ue,disabled:C,children:C?"Processing...":Le?"Leave Room":"Join Room"})]})]})}),(0,Ve.jsx)(Xe,{sx:{flex:1,overflow:"auto",p:{xs:1,sm:2},display:"flex",flexDirection:"column",gap:2},children:(null===y||void 0===y?void 0:y.isLive)&&(y?(0,Ve.jsx)(Xe,{sx:{mb:3},children:(0,Ve.jsx)(ibe,{isOwner:y.ownerId===(null===m||void 0===m?void 0:m.uid),roomId:f||""})}):null)})]}),(O||F)&&(0,Ve.jsxs)(Xe,{sx:{width:{xs:"100%",sm:300},height:{xs:"calc(100vh - 56px)",sm:"100%"},position:{xs:"fixed",sm:"relative"},right:0,top:{xs:"56px",sm:0},bgcolor:"background.paper",borderLeft:{xs:0,sm:1},borderTop:{xs:1,sm:0},borderColor:"divider",display:"flex",flexDirection:"column",zIndex:1200},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:1.5,sm:2},borderBottom:1,borderColor:"divider",bgcolor:"primary.main",color:"primary.contrastText"},children:[(0,Ve.jsx)(QL,{variant:"h6",sx:{fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:F?"Chat":"Members"}),(0,Ve.jsx)(FP,{onClick:()=>F?U(!1):j(!1),sx:{color:"inherit",padding:{xs:1,sm:1.5},"&:hover":{bgcolor:"rgba(255, 255, 255, 0.1)"}},children:(0,Ve.jsx)(yB,{})})]}),(0,Ve.jsxs)(Xe,{sx:{flex:1,overflow:"auto"},children:[O&&(()=>{var e;return(0,Ve.jsx)(mM,{children:null===y||void 0===y||null===(e=y.members)||void 0===e?void 0:e.map((e=>{var t;return(0,Ve.jsxs)(HO,{sx:{borderRadius:1,mb:1,"&:hover":{bgcolor:"action.hover"}},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.avatar,alt:e.username,sx:{width:40,height:40,border:t=>"owner"===e.role?`2px solid ${t.palette.primary.main}`:"none"},children:!e.avatar&&(null===(t=e.username)||void 0===t?void 0:t.charAt(0))})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",children:e.username||"Anonymous"}),"owner"===e.role&&(0,Ve.jsx)(Vq,{label:"Owner",size:"small",color:"primary",sx:{height:20}})]}),secondary:(0,Ve.jsxs)(QL,{variant:"caption",color:"text.secondary",children:["Joined ",e.joinedAt instanceof ol?e.joinedAt.toDate().toLocaleDateString():e.joinedAt.toLocaleDateString()]})}),De&&"owner"!==e.role&&(0,Ve.jsx)(FP,{edge:"end","aria-label":"remove member",onClick:()=>{window.confirm(`Are you sure you want to remove ${e.username||"this member"}?`)&&(async e=>{if(y&&m&&f&&m.uid===y.ownerId)try{I(!0);const t=cb(sR,"sideRooms",f);await Sw(t,{members:Uw(e),memberCount:Bw(-1)});const n=cb(lb(sR,"users",e.userId,"notifications"));await _w(n,{type:"room_removal",roomId:f,roomName:y.name,removedBy:m.uid,removerName:m.displayName||"Anonymous",timestamp:jw(),status:"unread",message:`You have been removed from "${y.name}"`}),MR.success("Member removed successfully")}catch(O_e){console.error("Error removing member:",O_e),O_e instanceof Error?MR.error(O_e.message):MR.error("Failed to remove member")}finally{I(!1)}else MR.error("Only room owners can remove members")})(e)},color:"error",disabled:C,children:(0,Ve.jsx)(bB,{})})]},e.userId)}))})})(),F&&(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,Ve.jsxs)(Xe,{sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:[R.map((e=>{var t,n,r;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,alignItems:"flex-start",bgcolor:e.userId===(null===m||void 0===m?void 0:m.uid)?"primary.light":"background.paper",p:2,borderRadius:2,boxShadow:1,alignSelf:e.userId===(null===m||void 0===m?void 0:m.uid)?"flex-end":"flex-start",maxWidth:"80%"},children:[(0,Ve.jsx)(WL,{src:e.photoURL||e.avatar,alt:e.displayName||e.username,sx:{width:40,height:40,border:t=>e.userId===(null===m||void 0===m?void 0:m.uid)?`2px solid ${t.palette.primary.main}`:"none"},children:!e.photoURL&&!e.avatar&&(e.displayName||e.username||"A").charAt(0).toUpperCase()}),(0,Ve.jsxs)(Xe,{sx:{flex:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",sx:{fontWeight:"bold",color:e.userId===(null===m||void 0===m?void 0:m.uid)?"primary.dark":"text.primary"},children:e.displayName||e.username||"Anonymous"}),(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:e.timestamp instanceof Date?e.timestamp.toLocaleTimeString():(null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleTimeString())||""})]}),(0,Ve.jsx)(QL,{variant:"body1",sx:{wordBreak:"break-word",color:e.userId===(null===m||void 0===m?void 0:m.uid)?"primary.contrastText":"text.primary",mt:.5},children:e.content})]})]},e.id)})),(0,Ve.jsx)("div",{ref:Ie})]}),(0,Ve.jsx)(Xe,{component:"form",onSubmit:Fe,sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(uU,{fullWidth:!0,placeholder:"Type a message...",value:L,onChange:e=>P(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,Ve.jsx)(FP,{type:"submit",color:"primary",disabled:!L.trim(),sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},"&.Mui-disabled":{bgcolor:"action.disabledBackground",color:"action.disabled"}},children:(0,Ve.jsx)(O0,{})})]})})]})]})]}),(0,Ve.jsxs)(sj,{open:q,onClose:()=>G(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Invite Members"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(uU,{fullWidth:!0,label:"Search users",variant:"outlined",onChange:e=>{const t=e.target.value;Y(t),t.trim()?(async e=>{if(e.trim()&&sR)try{const t=ew(lb(sR,"users"),nw("username",">=",e.toLowerCase()),nw("username","<=",e.toLowerCase()+"\uf8ff"),sw(10)),n=(await Aw(t)).docs.map((e=>({id:e.id,...e.data(),username:e.data().username||"Anonymous",avatar:e.data().avatar||""}))).filter((e=>{var t;return e.id!==(null===(t=lR.currentUser)||void 0===t?void 0:t.uid)}));X(n)}catch(O_e){console.error("Error searching users:",O_e),MR.error("Failed to search users")}})(t):X([])},InputProps:{startAdornment:(0,Ve.jsx)(sW,{position:"start",children:(0,Ve.jsx)(UZ,{})})}}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ee.map((e=>{var t;return(0,Ve.jsx)(Vq,{avatar:(0,Ve.jsx)(WL,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]}),label:e.username,onDelete:()=>te((t=>t.filter((t=>t.id!==e.id))))},e.id)}))}),(0,Ve.jsx)(mM,{children:Q.map((e=>{var t;return(0,Ve.jsxs)(HO,{sx:{borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>{ee.some((t=>t.id===e.id))||te((t=>[...t,e]))},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]})}),(0,Ve.jsx)(fO,{primary:e.username})]},e.id)}))})]})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>G(!1),children:"Cancel"}),(0,Ve.jsx)(lM,{variant:"contained",onClick:He,disabled:ne||0===ee.length,children:ne?"Sending...":"Send Invitations"})]})]}),(()=>{const e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return(0,Ve.jsxs)(sj,{open:ue,onClose:()=>de(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Mobile Streaming Setup"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[e?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(QL,{variant:"body1",gutterBottom:!0,children:"Click the button below to start streaming:"}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>window.open(`https://broadcast.mux.com/?streamKey=${he}`,"_blank"),sx:{mt:2},children:"Start Broadcasting"})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(QL,{variant:"body1",gutterBottom:!0,children:"To stream from your mobile device:"}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",paragraph:!0,children:["1. Open your mobile browser and go to: ",(0,Ve.jsx)(JV,{href:"https://broadcast.mux.com",target:"_blank",rel:"noopener noreferrer",children:"broadcast.mux.com"})]}),(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:(0,Ve.jsx)(uU,{fullWidth:!0,label:"Stream Key",value:he,InputProps:{readOnly:!0,endAdornment:(0,Ve.jsx)(sW,{position:"end",children:(0,Ve.jsx)(FP,{onClick:()=>{navigator.clipboard.writeText(he),MR.success("Stream key copied to clipboard")},children:(0,Ve.jsx)(j0,{})})})},variant:"outlined"})}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"2. Enter the stream key shown above"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"3. Allow camera and microphone access when prompted"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:'4. Click "Start Broadcasting"'})]}),le&&(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",gutterBottom:!0,children:"Stream URL (for viewers):"}),(0,Ve.jsx)(uU,{fullWidth:!0,value:le,InputProps:{readOnly:!0,endAdornment:(0,Ve.jsx)(sW,{position:"end",children:(0,Ve.jsx)(FP,{onClick:()=>{navigator.clipboard.writeText(le),MR.success("Stream URL copied to clipboard")},children:(0,Ve.jsx)(j0,{})})})},variant:"outlined",size:"small"})]})]})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>de(!1),children:"Close"})})]})})(),(0,Ve.jsxs)(sj,{open:fe,onClose:()=>!C&&me(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Customize Room Style"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3,pt:2},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Colors"}),(0,Ve.jsxs)(zV,{container:!0,spacing:2,children:[(0,Ve.jsx)(zV,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Header Color"}),(0,Ve.jsx)(iU,{value:ge.headerColor,onChange:e=>ve((t=>({...t,headerColor:e.target.value}))),children:lbe.map((e=>(0,Ve.jsx)(aO,{value:e.value,children:e.name},e.name)))}),(0,Ve.jsx)(kF,{children:"Choose a color or gradient for the header"})]})}),(0,Ve.jsx)(zV,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Background Color"}),(0,Ve.jsx)(iU,{value:ge.backgroundColor,onChange:e=>ve((t=>({...t,backgroundColor:e.target.value}))),children:lbe.map((e=>(0,Ve.jsx)(aO,{value:e.value,children:e.name},e.name)))}),(0,Ve.jsx)(kF,{children:"Choose a color or gradient for the background"})]})}),(0,Ve.jsx)(zV,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Text Color"}),(0,Ve.jsx)(uU,{type:"color",value:ge.textColor,onChange:e=>ve((t=>({...t,textColor:e.target.value}))),fullWidth:!0,sx:{"& input":{height:"50px",cursor:"pointer"}}}),(0,Ve.jsx)(kF,{children:"Color for all text"})]})}),(0,Ve.jsx)(zV,{item:!0,xs:12,sm:6,children:(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Accent Color"}),(0,Ve.jsx)(uU,{type:"color",value:ge.accentColor,onChange:e=>ve((t=>({...t,accentColor:e.target.value}))),fullWidth:!0,sx:{"& input":{height:"50px",cursor:"pointer"}}}),(0,Ve.jsx)(kF,{children:"Color for buttons and icons"})]})})]}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:ge.headerGradient,onChange:e=>ve((t=>({...t,headerGradient:e.target.checked})))}),label:"Enable Header Gradient Effect"}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:ge.backgroundGradient,onChange:e=>ve((t=>({...t,backgroundGradient:e.target.checked})))}),label:"Enable Background Gradient Effect"}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:ge.glitterEffect,onChange:e=>ve((t=>({...t,glitterEffect:e.target.checked})))}),label:"Enable Glitter Effect"})]})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Font"}),(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Font Style"}),(0,Ve.jsx)(iU,{value:ge.font,onChange:e=>ve((t=>({...t,font:e.target.value}))),sx:{fontFamily:ge.font},children:sbe.map((e=>(0,Ve.jsx)(aO,{value:e.value,sx:{fontFamily:e.value},children:e.label},e.value)))}),(0,Ve.jsx)(kF,{children:"Choose a font for your room"})]})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Header Size"}),(0,Ve.jsx)(Xe,{sx:{px:2},children:(0,Ve.jsx)(ZJ,{value:ge.headerFontSize,onChange:(e,t)=>ve((e=>({...e,headerFontSize:t}))),min:16,max:48,step:1,marks:[{value:16,label:"Small"},{value:24,label:"Medium"},{value:36,label:"Large"},{value:48,label:"X-Large"}],valueLabelDisplay:"auto"})})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Stickers"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexWrap:"wrap",gap:1,p:2},children:cbe.map((e=>(0,Ve.jsx)(Vq,{label:e.value,onClick:()=>{ve((t=>({...t,stickers:t.stickers.includes(e.value)?t.stickers.filter((t=>t!==e.value)):[...t.stickers,e.value]})))},color:ge.stickers.includes(e.value)?"primary":"default",sx:{fontSize:"1.5rem",cursor:"pointer"}},e.name)))})]})]})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>me(!1),disabled:C,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(y&&f)try{I(!0);const e=cb(sR,"sideRooms",f);await Sw(e,{style:ge,updatedAt:new Date}),MR.success("Room style updated successfully"),me(!1)}catch(O_e){console.error("Error updating room style:",O_e),Pe(O_e,"Failed to update room style")}finally{I(!1)}},variant:"contained",disabled:C,children:C?(0,Ve.jsx)(SU,{size:24}):"Save Style"})]})]}),(0,Ve.jsx)(KN,{anchorEl:V,open:Boolean(V),onClose:ze,children:De&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(aO,{onClick:()=>{ze(),$(!0)},disabled:C,children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(eZ,{fontSize:"small"})}),"Edit Room"]}),(0,Ve.jsxs)(aO,{onClick:()=>{ze(),me(!0)},disabled:C,children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(EO,{fontSize:"small"})}),"Customize Style"]}),(0,Ve.jsxs)(aO,{onClick:()=>Ae(!0),children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(C$,{fontSize:"small"})}),"View Recordings"]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(aO,{onClick:async()=>{if(ze(),y&&m&&f&&m.uid===y.ownerId){if(window.confirm("Are you sure you want to delete this room? This action cannot be undone."))try{H(!0);const e=cb(sR,"sideRooms",f),t=lb(sR,"sideRooms",f,"presence"),n=lb(sR,"sideRooms",f,"messages"),r=$w(sR),i=cb(sR,"users",m.uid,"trash",f),o=await xw(e);o.exists()&&r.set(i,{...o.data(),deletedAt:jw(),originalPath:`sideRooms/${f}`}),r.delete(e);(await Aw(t)).docs.forEach((e=>{r.delete(e.ref)}));(await Aw(n)).docs.forEach((e=>{r.delete(e.ref)})),await r.commit(),MR.success("Room deleted successfully"),v("/side-rooms")}catch(O_e){console.error("Error deleting room:",O_e),MR.error("Failed to delete room")}finally{H(!1)}}else MR.error("You do not have permission to delete this room")},disabled:z||C,sx:{color:"error.main"},children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(bB,{fontSize:"small",color:"error"})}),"Delete Room"]})]})}),(0,Ve.jsxs)(sj,{open:B,onClose:()=>!C&&$(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Edit Room"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(uU,{fullWidth:!0,label:"Room Name",defaultValue:null===y||void 0===y?void 0:y.name,onChange:e=>{const t={...y,name:e.target.value};b(t)}}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Description",multiline:!0,rows:4,defaultValue:null===y||void 0===y?void 0:y.description,onChange:e=>{const t={...y,description:e.target.value};b(t)}}),(0,Ve.jsxs)(wF,{fullWidth:!0,children:[(0,Ve.jsx)(mF,{children:"Category"}),(0,Ve.jsxs)(iU,{value:(null===y||void 0===y?void 0:y.category)||"",label:"Category",onChange:e=>{const t={...y,category:e.target.value};b(t)},children:[(0,Ve.jsx)(aO,{value:"Gaming",children:"Gaming"}),(0,Ve.jsx)(aO,{value:"Music",children:"Music"}),(0,Ve.jsx)(aO,{value:"Art",children:"Art"}),(0,Ve.jsx)(aO,{value:"Technology",children:"Technology"}),(0,Ve.jsx)(aO,{value:"Sports",children:"Sports"}),(0,Ve.jsx)(aO,{value:"Education",children:"Education"}),(0,Ve.jsx)(aO,{value:"Entertainment",children:"Entertainment"}),(0,Ve.jsx)(aO,{value:"Social",children:"Social"}),(0,Ve.jsx)(aO,{value:"Other",children:"Other"})]})]}),(0,Ve.jsx)(uU,{fullWidth:!0,label:"Maximum Members",type:"number",defaultValue:null===y||void 0===y?void 0:y.maxMembers,onChange:e=>{const t={...y,maxMembers:parseInt(e.target.value)};b(t)},InputProps:{inputProps:{min:1}}}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:(null===y||void 0===y?void 0:y.isPrivate)||!1,onChange:e=>{const t={...y,isPrivate:e.target.checked};b(t)}}),label:"Private Room"}),(null===y||void 0===y?void 0:y.isPrivate)&&(0,Ve.jsx)(uU,{fullWidth:!0,label:"Room Password",type:"password",defaultValue:null===y||void 0===y?void 0:y.password,onChange:e=>{const t={...y,password:e.target.value};b(t)}}),(0,Ve.jsx)(R0,{multiple:!0,freeSolo:!0,options:[],defaultValue:(null===y||void 0===y?void 0:y.tags)||[],renderInput:e=>(0,Ve.jsx)(uU,{...e,label:"Tags",placeholder:"Add tags"}),onChange:(e,t)=>{const n={...y,tags:t};b(n)}})]})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>$(!1),disabled:C,children:"Cancel"}),(0,Ve.jsx)(lM,{variant:"contained",onClick:()=>{(async e=>{if(y&&f&&m&&m.uid===y.ownerId)try{I(!0);const t=cb(sR,"sideRooms",f),n=cb(sR,"users",m.uid,"sideRooms",f),r={...e,updatedAt:jw(),lastActive:jw()};Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),await Ow(sR,(async i=>{var o;i.update(t,r),i.update(n,{name:e.name||y.name,description:e.description||y.description,category:e.category||y.category,updatedAt:jw(),lastActive:jw(),thumbnailUrl:(null===(o=y.style)||void 0===o?void 0:o.thumbnailUrl)||null})})),MR.success("Room updated successfully"),$(!1)}catch(O_e){console.error("Error updating room:",O_e),MR.error("Failed to update room")}finally{I(!1)}else MR.error("You do not have permission to edit this room")})({name:null===y||void 0===y?void 0:y.name,description:null===y||void 0===y?void 0:y.description,category:null===y||void 0===y?void 0:y.category,maxMembers:null===y||void 0===y?void 0:y.maxMembers,isPrivate:null===y||void 0===y?void 0:y.isPrivate,password:null===y||void 0===y?void 0:y.password,tags:null===y||void 0===y?void 0:y.tags})},disabled:C,children:C?(0,Ve.jsx)(SU,{size:24}):"Save Changes"})]})]}),(0,Ve.jsxs)(sj,{open:Ee,onClose:()=>Ae(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(hB,{children:"Recorded Streams"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(mM,{children:[we.map((e=>(0,Ve.jsx)(HO,{secondaryAction:(0,Ve.jsx)(FP,{edge:"end",onClick:()=>window.open(`https://stream.mux.com/${e.playbackId}`),children:(0,Ve.jsx)(C$,{})}),children:(0,Ve.jsx)(fO,{primary:e.title||`Recording from ${e.startedAt.toLocaleDateString()}`,secondary:`Duration: ${e.duration?Math.floor(e.duration/60):"?"} minutes`})},e.id))),0===we.length&&(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No recordings available"})]})}),(0,Ve.jsx)(k$,{children:(0,Ve.jsx)(lM,{onClick:()=>Ae(!1),children:"Close"})})]})]})},dbe=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=Cw(ew(lb(sR,"messages"),ow("timestamp","asc")),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()}}));n(t)}));return()=>e()}),[]);return(0,Ve.jsx)(HU,{maxWidth:"md",children:(0,Ve.jsxs)(Xe,{sx:{mt:4,mb:4},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",gutterBottom:!0,children:"Chat Room"}),(0,Ve.jsx)(mM,{sx:{maxHeight:"60vh",overflow:"auto",bgcolor:"background.paper",borderRadius:1},children:e.map((e=>{var t;return(0,Ve.jsxs)(HO,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",color:"primary",children:e.username}),(0,Ve.jsx)(QL,{variant:"body1",children:e.text}),(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]},e.id)}))}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""!==r.trim()&&sR)try{var t;await kw(lb(sR,"messages"),{text:r,userId:null===(t=lR.currentUser)||void 0===t?void 0:t.uid,username:o||"Anonymous",timestamp:jw()}),i("")}catch(s){console.error("Error sending message:",s)}},sx:{mt:2},children:[(0,Ve.jsx)(uU,{fullWidth:!0,variant:"outlined",placeholder:"Type your message...",value:r,onChange:e=>i(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(lM,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})})};const hbe=t.createContext({});function pbe(e){return(0,sL.Ay)("MuiAccordion",e)}const fbe=(0,Ge.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),mbe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],gbe=(0,rL.Ay)(hL,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${fbe.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${fbe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${fbe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${fbe.expanded}`]:{margin:"16px 0"}}}]}})),vbe=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:a=!1,disabled:s=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,slots:h={},slotProps:p={},TransitionComponent:f,TransitionProps:m}=r,g=(0,Le.A)(r,mbe),[v,y]=(0,FF.A)({controlled:c,default:a,name:"Accordion",state:"expanded"}),b=t.useCallback((e=>{y(!v),u&&u(e,!v)}),[v,u,y]),[w,...x]=t.Children.toArray(i),E=t.useMemo((()=>({expanded:v,disabled:s,disableGutters:l,toggle:b})),[v,s,l,b]),A=(0,De.A)({},r,{square:d,disabled:s,disableGutters:l,expanded:v}),_=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,a={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,nL.A)(a,pbe,t)})(A),S=(0,De.A)({transition:f},h),T=(0,De.A)({transition:m},p),[k,C]=jL("transition",{elementType:F$,externalForwardedProps:{slots:S,slotProps:T},ownerState:A});return(0,Ve.jsxs)(gbe,(0,De.A)({className:(0,Pe.A)(_.root,o),ref:n,ownerState:A,square:d},g,{children:[(0,Ve.jsx)(hbe.Provider,{value:E,children:w}),(0,Ve.jsx)(k,(0,De.A)({in:v,timeout:"auto"},C,{children:(0,Ve.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:_.region,children:x})}))]}))})),ybe=vbe;function bbe(e){return(0,sL.Ay)("MuiAccordionSummary",e)}const wbe=(0,Ge.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),xbe=["children","className","expandIcon","focusVisibleClassName","onClick"],Ebe=(0,rL.Ay)(LP,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${wbe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${wbe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${wbe.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${wbe.expanded}`]:{minHeight:64}}}]}})),Abe=(0,rL.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${wbe.expanded}`]:{margin:"20px 0"}}}]}})),_be=(0,rL.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${wbe.expanded}`]:{transform:"rotate(180deg)"}}})),Sbe=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:a,focusVisibleClassName:s,onClick:l}=r,c=(0,Le.A)(r,xbe),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=t.useContext(hbe),f=(0,De.A)({},r,{expanded:h,disabled:u,disableGutters:d}),m=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,nL.A)(o,bbe,t)})(f);return(0,Ve.jsxs)(Ebe,(0,De.A)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,Pe.A)(m.root,o),focusVisibleClassName:(0,Pe.A)(m.focusVisible,s),onClick:e=>{p&&p(e),l&&l(e)},ref:n,ownerState:f},c,{children:[(0,Ve.jsx)(Abe,{className:m.content,ownerState:f,children:i}),a&&(0,Ve.jsx)(_be,{className:m.expandIconWrapper,ownerState:f,children:a})]}))})),Tbe=Sbe;function kbe(e){return(0,sL.Ay)("MuiAccordionDetails",e)}(0,Ge.A)("MuiAccordionDetails",["root"]);const Cbe=["className"],Ibe=(0,rL.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),Rbe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,Le.A)(n,Cbe),o=n,a=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},kbe,t)})(o);return(0,Ve.jsx)(Ibe,(0,De.A)({className:(0,Pe.A)(a.root,r),ref:t,ownerState:o},i))})),Dbe=Rbe,Lbe=(0,_L.A)([(0,Ve.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,Ve.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),Pbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),Mbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),Nbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),Obe=(0,_L.A)((0,Ve.jsx)("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),jbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),Fbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline"),Ube=(0,_L.A)((0,Ve.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport"),Bbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report"),$be=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),Vbe=()=>(0,Ve.jsxs)(Xe,{sx:{mx:"auto"},children:[(0,Ve.jsx)(QL,{variant:"body1",sx:{mb:3},children:"These guidelines help ensure SideEye remains a platform where users can express themselves freely while maintaining a respectful and safe environment for all."}),(0,Ve.jsxs)(QL,{variant:"body1",sx:{mb:3,bgcolor:"info.light",p:2,borderRadius:1},children:[(0,Ve.jsx)("strong",{children:"Important Notice:"}),' SideEye uses an AI-powered moderation system that automatically scans all content against our community guidelines. Violations will result in strike points on your account, which can lead to warnings, restrictions, or account suspension. See the "Strike System" section below for more details.']}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(xZ,{}),children:(0,Ve.jsx)(QL,{children:"Our Commitment to Safety"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"We are committed to maintaining a safe and respectful environment for all users. Our platform encourages healthy banter and shade while strictly prohibiting harassment, bullying, harmful content, misinformation, fraud, and cybercrime."}),(0,Ve.jsx)(QL,{paragraph:!0,children:"We believe in:"}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(AZ,{})}),(0,Ve.jsx)(fO,{primary:"Protecting User Privacy",secondary:"We implement strict data protection measures and transparent privacy policies"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Lbe,{})}),(0,Ve.jsx)(fO,{primary:"Mental Health Support",secondary:"We provide resources and tools to support users' wellbeing"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Pbe,{})}),(0,Ve.jsx)(fO,{primary:"Inclusive Community",secondary:"We foster an environment that welcomes diverse perspectives and experiences"})]})]})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(Mbe,{}),children:(0,Ve.jsx)(QL,{children:"Prohibited Content"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"The following content is not permitted on our platform and may result in content removal, account restrictions, or termination:"}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Harassment & Bullying",secondary:"Targeted attacks, threats, persistent unwanted attention, or content designed to degrade or shame others"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Hate Speech",secondary:"Content that promotes discrimination, hostility, or violence against protected characteristics including race, ethnicity, national origin, religious affiliation, sexual orientation, gender, gender identity, or disability"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Misinformation",secondary:"Deliberate spreading of false information about health, science, elections, or current events that may cause public harm"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Fraud & Scams",secondary:"Financial scams, phishing attempts, pyramid schemes, deceptive business practices, or unauthorized promotions"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Cybercrime",secondary:"Hacking attempts, malware distribution, unauthorized access, or other illegal online activities"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Adult Content & Exploitation",secondary:"Sexually explicit content, non-consensual intimate imagery, sexual exploitation, or content that sexualizes minors"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Violence & Gore",secondary:"Gratuitous violence, content promoting self-harm, suicide, eating disorders, or graphic injury"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Copyright Infringement",secondary:"Content that violates copyright laws, including unauthorized use of intellectual property, especially in Vibits videos"})]})]})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(Obe,{}),children:(0,Ve.jsx)(QL,{children:"Vibits Community Guidelines"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"Our Vibits video sharing feature has specific guidelines to ensure a safe and enjoyable experience for all users:"}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(jbe,{})}),(0,Ve.jsx)(fO,{primary:"Content Ownership",secondary:"Only upload videos that you've created or have permission to use. Respect copyright and intellectual property rights"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Appropriate Content",secondary:"Videos must not contain nudity, pornography, violence, hate speech, dangerous activities, or illegal substances"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Fbe,{})}),(0,Ve.jsx)(fO,{primary:"Privacy & Consent",secondary:"Get consent before featuring identifiable individuals in your videos, especially in private settings"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(_Z,{})}),(0,Ve.jsx)(fO,{primary:"Disclosure",secondary:"Clearly disclose if your content is sponsored, contains affiliate links, or is otherwise commercial in nature"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(AZ,{})}),(0,Ve.jsx)(fO,{primary:"Music & Audio",secondary:"Only use music and audio that you have rights to use or that is available through our platform's licensed library"})]})]}),(0,Ve.jsx)(QL,{paragraph:!0,children:"Vibits content is subject to both human and AI-powered moderation. Videos that violate these guidelines may be removed, and repeated violations may result in account restrictions or termination."})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(Obe,{}),children:(0,Ve.jsx)(QL,{children:"Content Moderation"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"Our content moderation approach combines technology and human review to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(jbe,{})}),(0,Ve.jsx)(fO,{primary:"AI-Powered Detection",secondary:"Advanced algorithms detect harmful content, misinformation, and suspicious activities in real-time"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Ube,{})}),(0,Ve.jsx)(fO,{primary:"Automated Checks",secondary:"Real-time scanning for fraud, cybercrime, and policy violations using pattern recognition"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Fbe,{})}),(0,Ve.jsx)(fO,{primary:"Human Review",secondary:"Trained moderators review flagged content and complex cases with cultural and contextual awareness"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(_Z,{})}),(0,Ve.jsx)(fO,{primary:"Educational Approach",secondary:"First-time or minor violations may result in warnings with educational resources"})]})]}),(0,Ve.jsx)(bO,{sx:{my:2}}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Enforcement Actions"}),(0,Ve.jsx)(QL,{paragraph:!0,children:"Depending on the severity and frequency of violations, we may take the following actions:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Content removal"}),(0,Ve.jsx)("li",{children:"Warning notifications"}),(0,Ve.jsx)("li",{children:"Temporary feature restrictions"}),(0,Ve.jsx)("li",{children:"Temporary account suspension"}),(0,Ve.jsx)("li",{children:"Permanent account termination"})]})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(Mbe,{}),children:(0,Ve.jsx)(QL,{children:"Strike System"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"SideEye employs a strike system to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Strike Points"}),(0,Ve.jsx)(QL,{paragraph:!0,children:"Violations of our guidelines result in strike points based on severity:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Standard violations:"})," 1 strike point"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Serious violations"})," (misinformation, fraud, violence): 1.5 strike points"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Severe violations"})," (harmful content, cybercrime, exploitation): 2 strike points"]})]}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Consequences"}),(0,Ve.jsx)(QL,{paragraph:!0,children:"As strike points accumulate, the following actions will be taken:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"3+ points:"})," Warning and educational resources"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"6+ points:"})," Temporary feature restrictions for 3 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"9+ points:"})," Account suspension for 7 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"12+ points:"})," Permanent account suspension"]})]}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Appeals"}),(0,Ve.jsx)(QL,{paragraph:!0,children:"If you believe a strike was issued in error, you can appeal through your account settings or by contacting support@sideeye.com."}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Expiration"}),(0,Ve.jsx)(QL,{paragraph:!0,children:"Strike points remain on your account for 6 months before beginning to expire."})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(Bbe,{}),children:(0,Ve.jsx)(QL,{children:"Reporting & Moderation"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"We rely on our community to help maintain a safe environment. If you encounter content that violates our guidelines, please report it immediately."}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Bbe,{})}),(0,Ve.jsx)(fO,{primary:"How to Report",secondary:"Click the three dots menu on any post, comment, or profile and select 'Report' to flag content that violates our guidelines"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Bbe,{})}),(0,Ve.jsx)(fO,{primary:"What Happens Next",secondary:"Our team reviews reports promptly, typically within 24-48 hours, and takes appropriate action based on our guidelines"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Bbe,{})}),(0,Ve.jsx)(fO,{primary:"Appeals Process",secondary:"If you believe a moderation decision was made in error, you can appeal through your account settings or by contacting support@sideeye.com"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Bbe,{})}),(0,Ve.jsx)(fO,{primary:"Transparency",secondary:"We publish regular reports on content moderation actions and policy enforcement to maintain accountability"})]})]})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)($be,{}),children:(0,Ve.jsx)(QL,{children:"Getting Help"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"We're committed to supporting our users' wellbeing and safety both on and off the platform."}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)($be,{})}),(0,Ve.jsx)(fO,{primary:"Support Resources",secondary:"Access to mental health resources, crisis helplines, and support services through our Help Center"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)($be,{})}),(0,Ve.jsx)(fO,{primary:"Safety Tips",secondary:"Guidelines for protecting your privacy, recognizing potential scams, and staying safe online"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)($be,{})}),(0,Ve.jsx)(fO,{primary:"Contact Us",secondary:"Reach out to our support team at support@sideeye.com for assistance with safety concerns"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)($be,{})}),(0,Ve.jsx)(fO,{primary:"Emergency Situations",secondary:"If you're experiencing an emergency or believe someone is in immediate danger, please contact local emergency services immediately"})]})]}),(0,Ve.jsx)(QL,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:"SideEye is committed to continuously improving our safety measures and community guidelines. We regularly update our policies based on emerging threats, user feedback, and industry best practices."})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(xZ,{}),children:(0,Ve.jsx)(QL,{children:"Vibits Security & Privacy"})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{paragraph:!0,children:"We take the security and privacy of your Vibits videos seriously. Here's how we protect your content:"}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(AZ,{})}),(0,Ve.jsx)(fO,{primary:"Secure Storage",secondary:"All videos are stored using industry-standard encryption and secure cloud storage protocols"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Fbe,{})}),(0,Ve.jsx)(fO,{primary:"Privacy Controls",secondary:"You can delete your videos at any time, and you control who can view, comment on, and share your content"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(jbe,{})}),(0,Ve.jsx)(fO,{primary:"Content Protection",secondary:"We implement measures to prevent unauthorized downloading and redistribution of your videos"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Ube,{})}),(0,Ve.jsx)(fO,{primary:"Metadata Stripping",secondary:"We remove sensitive metadata from videos that could reveal your location or device information"})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(Nbe,{})}),(0,Ve.jsx)(fO,{primary:"Report & Remove",secondary:"We provide tools to report videos that violate our guidelines, and we respond quickly to removal requests"})]})]}),(0,Ve.jsx)(QL,{paragraph:!0,children:"To enhance your privacy when using Vibits:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Be mindful of what's visible in your videos (addresses, personal documents, etc.)"}),(0,Ve.jsx)("li",{children:"Consider the environment you're filming in and who might be visible in the background"}),(0,Ve.jsx)("li",{children:"Review your videos before posting to ensure you're comfortable with all content"}),(0,Ve.jsx)("li",{children:"Use the reporting tools if you see content that violates our guidelines"})]})]})]})]}),Wbe=()=>(0,Ve.jsx)(HU,{maxWidth:"lg",children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(QL,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Safety & Community Guidelines"}),(0,Ve.jsx)(hL,{elevation:3,sx:{p:{xs:2,md:4},borderRadius:2},children:(0,Ve.jsx)(Vbe,{})})]})}),zbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Hbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),qbe=(0,_L.A)((0,Ve.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),Gbe=()=>{const{currentUser:e,userProfile:n}=ND(),{canViewProfile:r,canViewContent:i}=jD(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)({emailVerified:!1,deviceVerified:!1,lastSecurityUpdate:null});(0,t.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return;const t=Cw(cb(sR,"users",e.uid),(t=>{if(t.exists()){const n=t.data();a(n.isPrivate||!1),l({emailVerified:e.emailVerified||!1,deviceVerified:n.sourceCodeSetupComplete||!1,lastSecurityUpdate:n.lastSecurityUpdate||null})}}));return()=>t()}),[null===e||void 0===e?void 0:e.uid,null===e||void 0===e?void 0:e.emailVerified]);return(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(hL,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(QL,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(xZ,{color:"primary"})," Security & Authentication"]}),(0,Ve.jsx)(aB,{severity:"info",sx:{mt:2,mb:4},children:"SideEye takes your security and privacy seriously. Our multi-layer authentication system helps protect your account and data from unauthorized access."}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Security Status"}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsxs)(hJ,{direction:"row",spacing:2,sx:{mb:3},children:[(0,Ve.jsx)(Vq,{icon:s.emailVerified?(0,Ve.jsx)(zbe,{}):(0,Ve.jsx)(Hbe,{}),label:s.emailVerified?"Email Verified":"Email Not Verified",color:s.emailVerified?"success":"error",variant:"outlined"}),(0,Ve.jsx)(Vq,{icon:s.deviceVerified?(0,Ve.jsx)(zbe,{}):(0,Ve.jsx)(Hbe,{}),label:s.deviceVerified?"Device Verified":"Device Not Verified",color:s.deviceVerified?"success":"error",variant:"outlined"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Account Privacy"}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsxs)(hL,{elevation:1,sx:{p:3},children:[(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(bZ,{checked:o,onChange:async()=>{if(null!==e&&void 0!==e&&e.uid)try{await Sw(cb(sR,"users",e.uid),{isPrivate:!o,lastSecurityUpdate:jw()}),MR.success("Account is now "+(o?"public":"private"))}catch(WE){console.error("Error updating privacy settings:",WE),MR.error("Failed to update privacy settings")}},color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:o?"Only approved followers can see your content":"Anyone can see your content"})]})}),(0,Ve.jsx)(aB,{severity:"info",sx:{mt:2},children:o?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."})]})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Authentication Flow"}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsxs)(mM,{children:[(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(qbe,{color:"primary"})}),(0,Ve.jsx)(fO,{primary:"Step 1: Email & Password Authentication",secondary:"First, you log in with your email and password. This provides the initial layer of account security."})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(jbe,{color:"primary"})}),(0,Ve.jsx)(fO,{primary:"Step 2: Email Verification",secondary:"New accounts must verify their email address before gaining full access to all features."})]}),(0,Ve.jsxs)(HO,{children:[(0,Ve.jsx)(uO,{children:(0,Ve.jsx)(IZ,{color:"primary"})}),(0,Ve.jsx)(fO,{primary:"Step 3: Source Code Authentication",secondary:"When logging in from a new device, you must enter your 8-digit source code as an additional security measure."})]})]})]}),(0,Ve.jsxs)(ybe,{children:[(0,Ve.jsx)(Tbe,{expandIcon:(0,Ve.jsx)(H$,{}),children:(0,Ve.jsxs)(QL,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(_Z,{fontSize:"small"})," Browser Privacy Settings"]})}),(0,Ve.jsxs)(Dbe,{children:[(0,Ve.jsx)(QL,{variant:"body2",paragraph:!0,children:"Some browsers have strict privacy settings that can affect device registration:"}),(0,Ve.jsxs)(mM,{dense:!0,children:[(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(fO,{primary:"\u2022 Safari users may need to enable website data storage",secondary:"Safari > Preferences > Privacy > Website Data"})}),(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(fO,{primary:"\u2022 Private/Incognito browsing may require re-authentication",secondary:"Devices won't be persistently registered in private browsing modes"})}),(0,Ve.jsx)(HO,{children:(0,Ve.jsx)(fO,{primary:"\u2022 Clearing browser data will remove device registration",secondary:"You'll need to re-authenticate with your Source Code"})})]})]})]})]})})},Kbe=()=>(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(hL,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",gutterBottom:!0,children:"Privacy Policy"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"1. Information We Collect"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We collect information that you provide directly to us, including:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Account information (username, email, display name)"}),(0,Ve.jsx)("li",{children:"Profile information (bio, profile picture, custom avatars)"}),(0,Ve.jsx)("li",{children:"Content you post (posts, comments, likes, reposts)"}),(0,Ve.jsx)("li",{children:"Videos you upload to Vibits (including metadata and engagement data)"}),(0,Ve.jsx)("li",{children:"Connection data (followers, following relationships)"}),(0,Ve.jsx)("li",{children:"Messages and communications between users"}),(0,Ve.jsx)("li",{children:"Usage information and interaction with the platform"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"2. How We Use Your Information"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Provide and maintain our services"}),(0,Ve.jsx)("li",{children:"Improve and personalize your experience"}),(0,Ve.jsx)("li",{children:"Facilitate connections between users"}),(0,Ve.jsx)("li",{children:"Display relevant content in your feed"}),(0,Ve.jsx)("li",{children:"Process and deliver messages between users"}),(0,Ve.jsx)("li",{children:"Recommend relevant videos in Vibits based on your preferences"}),(0,Ve.jsx)("li",{children:"Monitor and enforce our community guidelines"}),(0,Ve.jsx)("li",{children:"Communicate with you about updates and changes"}),(0,Ve.jsx)("li",{children:"Ensure platform safety and security"}),(0,Ve.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"3. Sharing Your Information"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We may share your information in the following ways:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"With Other Users:"})," Your profile information, posts, videos, and content are shared with other users according to your privacy settings."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Service Providers:"})," We may share information with third-party vendors who provide services on our behalf, including video hosting and processing."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect rights, safety, and security."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets."]})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"4. Data Security"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We implement appropriate security measures to protect your personal information, including encryption of sensitive data, secure storage protocols, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"5. Your Rights"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You have the right to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Access your personal information"}),(0,Ve.jsx)("li",{children:"Correct inaccurate information"}),(0,Ve.jsx)("li",{children:"Delete your account and associated data"}),(0,Ve.jsx)("li",{children:"Delete videos you've uploaded to Vibits"}),(0,Ve.jsx)("li",{children:"Control your privacy settings and follower relationships"}),(0,Ve.jsx)("li",{children:"Restrict processing of your information"}),(0,Ve.jsx)("li",{children:"Request a data export of your content"}),(0,Ve.jsx)("li",{children:"Opt-out of marketing communications"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"6. Content Removal and Retention"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"When you delete content, it may remain in our backup systems for a limited time. Deleted content is moved to a temporary storage for 24 hours before permanent deletion, allowing for potential recovery if accidentally deleted. For Vibits videos, we may retain non-personally identifiable analytics data even after video deletion."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"7. Cookies and Tracking"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to improve your experience, maintain login sessions, and analyze usage patterns. Please see our Cookie Policy for more details on how we use these technologies."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"8. Third-Party Links"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Our service may contain links to third-party websites or services that are not owned or controlled by us. We have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party services."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"9. Vibits Video Information"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"When you upload videos to Vibits, we collect:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Video Content:"})," The actual video file you upload"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Metadata:"})," Information such as upload time, duration, and format"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"User Association:"})," Connection between your account and the video"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Engagement Data:"})," Likes, comments, shares, and viewing statistics"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Device Information:"})," Information about the device used to upload the video"]})]}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We use this information to provide the Vibits service, recommend videos to other users, and improve our platform. You maintain ownership of your videos and can delete them at any time, though we may retain anonymized analytics data."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"10. Children's Privacy"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Our services are not intended for use by children under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"11. Changes to This Policy"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last updated" date.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"12. Contact Us"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["If you have any questions about this Privacy Policy, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Ybe=()=>(0,Ve.jsxs)(HU,{maxWidth:"lg",sx:{py:12},children:[(0,Ve.jsxs)(hL,{elevation:3,sx:{p:{xs:3,md:6},mb:6},children:[(0,Ve.jsx)(QL,{variant:"h1",component:"h1",sx:{textAlign:"center",fontWeight:"bold",mb:6,fontSize:{xs:"2.5rem",md:"3.5rem"},color:"primary.main",textTransform:"uppercase",letterSpacing:2},children:"About SideEye"}),(0,Ve.jsx)(bO,{sx:{my:6}}),(0,Ve.jsxs)(Xe,{sx:{mb:8},children:[(0,Ve.jsx)(QL,{variant:"h2",sx:{fontWeight:"medium",mb:4,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Our Mission"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"SideEye is a moderated social media platform dedicated to creating a safe and engaging space for users to share their thoughts, connect with others, and express themselves through various forms of content. We believe in fostering meaningful conversations while maintaining a respectful and inclusive environment through our comprehensive moderation system that ensures all users can interact authentically within clear community guidelines."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h2",sx:{fontWeight:"medium",mb:6,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Features"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:6},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Side Rooms"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Create or join interactive discussion rooms where you can connect with other users in real-time. Side Rooms support live streaming, allowing you to go live and interact directly with your audience. These rooms can be public or private, with customizable settings for membership, moderation, and content focus. Each room provides a dedicated space for conversations around specific interests or topics."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Feed"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Stay connected with content from users you follow through our personalized Feed. See posts, updates, and activities from your network in real-time. Our Feed is designed to show you the most relevant content based on your interests and connections, creating a tailored experience that keeps you engaged with your community."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Discover"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Explore new content, find interesting users to follow, and discover trending Side Rooms through our Discover feature. This curated exploration space helps you find content aligned with your interests and introduces you to new communities within the platform. Discover makes it easy to expand your network and find engaging discussions to join."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"AI Moderation"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Our advanced AI moderation system automatically scans all content against our community guidelines, detecting potential violations across multiple categories including harmful content, misinformation, fraud, cybercrime, adult content, and violence. This system helps maintain a safe environment by issuing appropriate warnings or restrictions when needed, while protecting users from harmful interactions."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"User Expression"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Express yourself through various reaction types including sideEye, tea, shade, and petty. Our platform encourages authentic communication with features designed for meaningful social interaction. Whether you're sharing thoughts, connecting with others, or participating in discussions, SideEye provides the tools for genuine self-expression within a respectful framework."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Vibits"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Share and discover short-form videos through our Vibits feature. Create, upload, and engage with captivating video content in a vertical scrolling format. Interact with videos through likes, comments, and sharing, or follow content creators you enjoy. Vibits offers a dynamic way to express yourself creatively and connect with others through visual storytelling, with built-in moderation to ensure a safe viewing experience."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Live Streaming"}),(0,Ve.jsx)(QL,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Go live in Side Rooms to engage with your audience in real-time through video streaming. Host discussions, Q&A sessions, or casual hangouts with followers and community members. Our streaming feature supports interactive elements like viewer comments and reactions, creating an immersive and engaging experience for both hosts and viewers."})]})]})]})]}),(0,Ve.jsx)(Xe,{sx:{textAlign:"center",mt:8},children:(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",children:["\xa9 ",(new Date).getFullYear()," SideEye | Created by Enoch Asekomhe | All Rights Reserved"]})})]}),Qbe=()=>(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(hL,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",gutterBottom:!0,children:"Terms of Service"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"1. Acceptance of Terms"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"By accessing or using SideEye, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"2. User Accounts"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"To use certain features of SideEye, you must create an account. You are responsible for:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Maintaining the confidentiality of your account information"}),(0,Ve.jsx)("li",{children:"All activities that occur under your account"}),(0,Ve.jsx)("li",{children:"Providing accurate and complete profile information"}),(0,Ve.jsx)("li",{children:"Securing your login credentials"}),(0,Ve.jsx)("li",{children:"Notifying us immediately of any unauthorized use"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"3. User Conduct"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You agree not to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Post or transmit any content that is unlawful, harmful, threatening, abusive, harassing, defamatory, vulgar, obscene, or otherwise objectionable"}),(0,Ve.jsx)("li",{children:"Upload videos to Vibits that contain inappropriate content, copyright infringement, or violate our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Harass, bully, intimidate, or stalk other users"}),(0,Ve.jsx)("li",{children:"Impersonate any person or entity or falsely state or misrepresent your affiliation with a person or entity"}),(0,Ve.jsx)("li",{children:"Interfere with or disrupt the proper functioning of the service or servers"}),(0,Ve.jsx)("li",{children:"Attempt to gain unauthorized access to any portion of the service or other systems"}),(0,Ve.jsx)("li",{children:"Use the service for any illegal purpose or in violation of any local, state, national, or international law"}),(0,Ve.jsx)("li",{children:"Collect or store personal data about other users without their consent"}),(0,Ve.jsx)("li",{children:"Create multiple accounts to evade restrictions or limitations"}),(0,Ve.jsx)("li",{children:"Engage in spamming, phishing, or other deceptive practices"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"4. Content Ownership and License"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You retain ownership of any content you post on SideEye, including videos uploaded to Vibits. By posting content, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, reproduce, process, adapt, modify, publish, transmit, display, and distribute your content in any and all media or distribution methods."}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"This license allows us to make your content available to the rest of the world and to let others do the same. The license continues even if you stop using our services, but you can delete content from public view at any time."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"5. Vibits Video Sharing"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Vibits is our video sharing feature that allows users to upload, view, like, comment on, and share short videos. When using Vibits, you agree to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Only upload videos that you have created or for which you have the necessary rights and permissions"}),(0,Ve.jsx)("li",{children:"Not upload videos that infringe on others' intellectual property rights"}),(0,Ve.jsx)("li",{children:"Not upload videos containing explicit content, hate speech, violence, or any content that violates our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Allow other users to view, like, comment on, and share your videos according to your privacy settings"}),(0,Ve.jsx)("li",{children:"Grant us the license as described in Section 4 for videos you upload to Vibits"}),(0,Ve.jsx)("li",{children:"Understand that we may remove videos that violate our policies without prior notice"})]}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We may provide tools to enhance or edit your videos, but we do not claim ownership of your original content. We reserve the right to display advertisements alongside or within Vibits content without providing compensation to you."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"6. Follower Relationships"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"SideEye allows users to follow other users and be followed by others. When you follow someone, you'll see their posts and activity on your feed. Users you follow will be able to see that you follow them. Similarly, users who follow you will be visible to you and others. You can unfollow users at any time."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"7. Direct Messages"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"SideEye provides a direct messaging feature for users to communicate privately. You are responsible for the content of your messages. While we strive to protect the privacy of your messages, we reserve the right to review content in the case of reported violations. We may take action if messages violate our guidelines."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"8. Content Moderation"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We reserve the right to moderate content posted on our platform, including Vibits videos. We may remove, restrict, or disable access to any content or account that we determine violates these Terms or our Community Guidelines. Content moderation decisions are made in our sole discretion. Users can appeal moderation decisions through our support channels."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"9. Intellectual Property"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"The SideEye service and its original content, features, and functionality are and will remain the exclusive property of SideEye and its licensors. The service is protected by copyright, trademark, and other laws. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of SideEye."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"10. Termination"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We reserve the right to terminate or suspend your account and access to the service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties, or for any other reason. Upon termination, your right to use the service will immediately cease."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"11. Content Removal and Recovery"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"When you delete content, including Vibits videos, it will be moved to a trash area for 24 hours before permanent deletion, allowing for recovery if accidentally deleted. We reserve the right to retain certain information as required by law or for legitimate business purposes."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"12. Disclaimer"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:'The service is provided "as is" without any warranties, express or implied. We do not guarantee that the service will be uninterrupted, timely, secure, or error-free. We make no warranties or representations about the accuracy or completeness of the content provided by our users.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"13. Limitation of Liability"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"In no event shall SideEye be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or related to your use of the service, including but not limited to damages for loss of profits, goodwill, use, data, or other intangible losses."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"14. Indemnification"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You agree to indemnify and hold harmless SideEye and its officers, directors, employees, and agents from any claims, damages, liabilities, costs, or expenses (including reasonable attorney fees) arising from your use of the service or your violation of these Terms."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"15. DMCA Compliance"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"SideEye respects the intellectual property rights of others. If you believe that your work has been copied in a way that constitutes copyright infringement on Vibits or elsewhere on our platform, please provide our copyright agent with the following information:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"An electronic or physical signature of the person authorized to act on behalf of the copyright owner"}),(0,Ve.jsx)("li",{children:"A description of the copyrighted work that you claim has been infringed"}),(0,Ve.jsx)("li",{children:"A description of where the material that you claim is infringing is located on the site"}),(0,Ve.jsx)("li",{children:"Your address, telephone number, and email address"}),(0,Ve.jsx)("li",{children:"A statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law"}),(0,Ve.jsx)("li",{children:"A statement by you, made under penalty of perjury, that the above information is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf"})]}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Our copyright agent can be reached at: dmca@sideeye.com"})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"16. Changes to Terms"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on the service and updating the "Last updated" date. Your continued use of the service after such changes constitutes your acceptance of the new Terms.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"17. Governing Law"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These Terms shall be governed by and construed in accordance with the laws of the jurisdiction in which we operate, without regard to its conflict of law provisions."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"18. Contact Information"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["If you have any questions about these Terms, please contact us at:",(0,Ve.jsx)("br",{}),"Email: legal@sideeye.com"]})]})]})}),Xbe=()=>(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(hL,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cookie Policy"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Introduction"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"SideEye uses cookies and similar technologies to provide, improve, and secure our services. This Cookie Policy explains how we use cookies, what types we use, their purposes, and how you can control them."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"What Are Cookies?"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:'Cookies are small text files that are stored on your device when you visit a website. They are widely used to make websites work more efficiently and provide information to the website owners. Cookies can be "persistent" or "session" cookies. Persistent cookies remain on your device after you close your browser, while session cookies are deleted when you close your browser.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Types of Cookies We Use"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We use the following types of cookies for the purposes explained below:"}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"1. Essential Cookies"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These cookies are necessary for the functioning of our platform and cannot be switched off. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Authentication cookies to recognize you when you log in"}),(0,Ve.jsx)("li",{children:"Security cookies to prevent fraudulent activities"}),(0,Ve.jsx)("li",{children:"Session cookies to maintain your active session"})]}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"2. Performance Cookies"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These cookies help us understand how visitors interact with our platform by collecting information anonymously. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Analytics cookies to measure user interactions with content"}),(0,Ve.jsx)("li",{children:"Error monitoring cookies to identify and fix platform issues"}),(0,Ve.jsx)("li",{children:"Load balancing cookies to distribute traffic to our servers"})]}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"3. Functional Cookies"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These cookies enable enhanced functionality and personalization. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Preference cookies to remember your settings and choices"}),(0,Ve.jsx)("li",{children:"Interface customization cookies for personalized layouts"}),(0,Ve.jsx)("li",{children:"Language preference cookies"})]}),(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"4. Targeting/Advertising Cookies"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These cookies may be set through our site by our advertising partners to build a profile of your interests. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Social media cookies for content sharing and network integration"}),(0,Ve.jsx)("li",{children:"Recommendation cookies to suggest relevant content"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Specific Cookies Used by SideEye"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Below are some of the key cookies we use on SideEye:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_session"}),": Authentication and session management"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_preferences"}),": Stores user preferences like theme and layout settings"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_auth"}),": Maintains login state and authentication details"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_analytics"}),": Collects anonymous usage data to improve our services"]})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Third-Party Cookies"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We may allow third parties to place cookies on your device when you visit our platform. These third parties include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Analytics providers"})," (such as Google Analytics) to help us understand user behavior"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Social media platforms"})," (such as Twitter, Facebook) when you use social sharing features"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Security services"})," to protect against malicious activities"]})]}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"These third parties may use cookies, web beacons, and similar technologies to collect information about your use of our platform and other websites. We do not control these third-party technologies and their use is governed by the privacy policies of these third parties."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Managing Your Cookie Preferences"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You can control and/or delete cookies as you wish. You can delete all cookies that are already on your device and you can set most browsers to prevent them from being placed. However, if you do this, you may have to manually adjust some preferences every time you visit our platform, and some services and functionalities may not work."}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"You can manage your cookie preferences through your browser settings:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:["Chrome: Settings ","->"," Privacy and Security ","->"," Cookies and other site data"]}),(0,Ve.jsxs)("li",{children:["Firefox: Options ","->"," Privacy & Security ","->"," Cookies and Site Data"]}),(0,Ve.jsxs)("li",{children:["Safari: Preferences ","->"," Privacy ","->"," Cookies and website data"]}),(0,Ve.jsxs)("li",{children:["Edge: Settings ","->"," Cookies and site permissions ","->"," Cookies and site data"]})]}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"For more information about cookies and how to disable them, please visit www.allaboutcookies.org"})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Do Not Track"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:'Some browsers have a "Do Not Track" feature that signals to websites that you visit that you do not want to have your online activity tracked. Given the diverse and evolving state of "Do Not Track" implementations, we may or may not respond to "Do Not Track" signals.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Changes to Our Cookie Policy"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We may update our Cookie Policy from time to time. Any changes will be posted on this page with an updated revision date. We encourage you to review this Cookie Policy periodically to stay informed about our use of cookies."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Contact Us"}),(0,Ve.jsxs)(QL,{variant:"body1",paragraph:!0,children:["If you have any questions about our use of cookies, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Zbe=()=>{const e=Z(),{currentUser:n,user:r,loading:i,sendEmailVerification:o,forceCheckEmailVerification:a}=(Q(),ND()),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!i&&(n||r)){const t=n||r;try{const n=await a(t);console.log("Email verification status on page load:",n),n&&(console.log("User email is verified, redirecting to setup source code..."),e("/setup-source-code",{replace:!0}))}catch(O_e){console.error("Error checking verification status:",O_e)}}})()}),[n,r,i,e,a]);const v=async()=>{if(!(n||r))return u("Not logged in. Cannot resend verification email."),void e("/login");try{l(!0),u(null),h(!1),await o(),h(!0),u(null)}catch(c){console.error("Error sending verification email:",c),u(c.message||"Failed to send verification email. Please try again."),h(!1)}finally{l(!1)}};if(i)return(0,Ve.jsx)(HU,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,Ve.jsx)(SU,{})})});const y=n||r,b=(null===y||void 0===y?void 0:y.email)||"your registered email";return(0,Ve.jsx)(HU,{maxWidth:"sm",children:(0,Ve.jsxs)(hL,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{variant:"h4",gutterBottom:!0,align:"center",children:"Verify Your Email"}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,align:"center",children:"A verification email has been sent to:"}),(0,Ve.jsx)(QL,{variant:"h6",align:"center",gutterBottom:!0,sx:{fontWeight:"bold"},children:b}),(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Please check your inbox (and spam folder) and click the verification link."}),c&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:c}),d&&(0,Ve.jsx)(aB,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox (and spam folder)."}),m&&!c&&(0,Ve.jsxs)(aB,{severity:"info",sx:{mb:2},children:["Verification status checked at ",m.toLocaleTimeString(),". Email is not yet verified."]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:3},children:[(0,Ve.jsx)(lM,{variant:"outlined",onClick:async()=>{const t=n||r;if(!t)return u("Not logged in. Cannot check verification status."),void e("/login");try{f(!0),u(null);const n=await a(t);g(new Date),console.log("Manual verification check result:",n),n?e("/setup-source-code",{replace:!0}):u("Email not verified yet. Please check your email and click the verification link.")}catch(c){console.error("Error checking verification status:",c),u(c.message||"Failed to check verification status. Please try again.")}finally{f(!1)}},disabled:s||p,color:"primary",fullWidth:!0,children:p?(0,Ve.jsx)(SU,{size:24,color:"inherit"}):"I've Verified My Email"}),(0,Ve.jsx)(lM,{variant:"text",onClick:v,disabled:s||p,color:"secondary",fullWidth:!0,children:s?(0,Ve.jsx)(SU,{size:24,color:"inherit"}):"Resend Verification Email"})]}),(0,Ve.jsx)(bO,{sx:{my:3}}),(0,Ve.jsxs)(QL,{variant:"body2",color:"text.secondary",align:"center",children:["Having trouble? Try ",(0,Ve.jsx)(JV,{component:"button",onClick:v,children:"sending the email again"})," or ",(0,Ve.jsx)(JV,{component:"button",onClick:()=>e("/login"),children:"login with a different account"}),"."]})]})})};var Jbe=n(5433),ewe=n(7813);const twe=()=>{const{currentUser:e}=ND(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{e&&h()}),[e]);const h=async()=>{if(e)try{const t=ew(lb(sR,"deleted_posts"),nw("userId","==",e.uid)),n=(await Aw(t)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),deletedAt:null===(t=e.data().deletedAt)||void 0===t?void 0:t.toDate(),scheduledForDeletion:null===(n=e.data().scheduledForDeletion)||void 0===n?void 0:n.toDate()}}));r(n)}catch(u){console.error("Error fetching deleted posts:",u),d("Failed to fetch deleted posts")}finally{o(!1)}};return i?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(SU,{})}):0===n.length?(0,Ve.jsx)(QL,{sx:{mt:4,textAlign:"center"},children:"No deleted posts found"}):(0,Ve.jsx)(Xe,{sx:{mt:4},children:n.map((t=>(0,Ve.jsxs)(hL,{sx:{p:2,mb:2,borderRadius:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(WL,{src:t.authorAvatar,alt:t.authorName||"Anonymous",sx:{mr:2},children:t.authorName?t.authorName.charAt(0):"A"}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"subtitle1",fontWeight:"bold",children:t.authorName||"Anonymous"}),(0,Ve.jsxs)(QL,{variant:"caption",color:"text.secondary",children:["Deleted ",vV(t.deletedAt)," ago"]})]})]}),(0,Ve.jsx)(QL,{sx:{mb:2},children:t.content}),t.imageUrl&&(0,Ve.jsx)(Xe,{component:"img",src:t.imageUrl,alt:"Post content",sx:{maxWidth:"100%",maxHeight:300,borderRadius:1,mb:2}}),t.tags&&t.tags.length>0&&(0,Ve.jsx)(Xe,{sx:{mb:2},children:t.tags.map((e=>(0,Ve.jsx)(Vq,{label:`#${e}`,size:"small",sx:{mr:1,mb:1}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,Ve.jsx)(lM,{variant:"outlined",startIcon:(0,Ve.jsx)(Jbe.A,{}),onClick:()=>(async t=>{if(e){s(t);try{const n=cb(sR,"deleted_posts",t),i=(await xw(n)).data();if(!i)throw new Error("Post not found");const o=cb(sR,"posts",t);await Sw(o,{...i,deletedAt:null,scheduledForDeletion:null}),await Tw(n),await Sw(cb(sR,"users",e.uid),{postCount:Bw(1)}),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error restoring post:",u)}finally{s(null)}}})(t.id),disabled:!!a,children:a===t.id?(0,Ve.jsx)(SU,{size:24}):"Restore"}),(0,Ve.jsx)(lM,{variant:"outlined",color:"error",startIcon:(0,Ve.jsx)(ewe.A,{}),onClick:()=>(async t=>{if(e){c(t);try{const e=cb(sR,"deleted_posts",t);await Tw(e),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error permanently deleting post:",u),d("Failed to permanently delete post")}finally{c(null)}}})(t.id),disabled:!!l,children:l===t.id?(0,Ve.jsx)(SU,{size:24}):"Delete Forever"})]})]},t.id)))})},nwe=()=>(0,Ve.jsx)(HU,{maxWidth:"md",children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(QL,{variant:"h4",sx:{mb:4},children:"Trash"}),(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Posts in the trash will be automatically deleted after 24 hours. You can restore them before then."}),(0,Ve.jsx)(twe,{})]})}),rwe=()=>{const{userId:e}=J(),{db:n}=xV(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),{currentUser:c}=ND();return(0,t.useEffect)((()=>{(async()=>{if(n&&e){console.log("Firestore database initialized:",n),console.log("User ID:",e);try{const t=await xw(cb(n,"users",e));if(!t.exists())return void l("User not found");const r=t.data().isPrivate||!1;if(!(!r||c&&c.uid===e))return void l("This account is private. Follow to see their followers.");const o=lb(n,"users",e,"followers"),a=await Aw(o);console.log("Followers snapshot size:",a.size);const s=a.docs.map((async e=>{const t=e.id,r=await xw(cb(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),u=await Promise.all(s);i(u.filter(Boolean))}catch(O_e){l("Failed to fetch followers"),console.error("Error fetching followers:",O_e)}finally{a(!1)}}else console.error("Firestore database or userId is not initialized")})()}),[n,e,c]),o?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(SU,{})}):s?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(QL,{color:"error",children:s})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Followers"}),(0,Ve.jsxs)(mM,{children:[r.map((e=>(0,Ve.jsxs)(HO,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(fO,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"No followers yet"})]})]})},iwe=()=>{const{userId:e}=J(),{db:n}=xV(),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(n&&e)try{const t=lb(n,"users",e,"following"),r=await Aw(t);console.log("Following snapshot size:",r.size);const o=r.docs.map((async e=>{const t=e.id,r=await xw(cb(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),a=await Promise.all(o);i(a.filter(Boolean))}catch(O_e){l("Failed to fetch following"),console.error("Error fetching following:",O_e)}finally{a(!1)}})()}),[n,e]),o?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(SU,{})}):s?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(QL,{color:"error",children:s})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(QL,{variant:"h5",gutterBottom:!0,children:"Following"}),(0,Ve.jsxs)(mM,{children:[r.map((e=>(0,Ve.jsxs)(HO,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(fO,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"Not following anyone yet"})]})]})};function owe(e){return(0,sL.Ay)("MuiDialogContentText",e)}(0,Ge.A)("MuiDialogContentText",["root"]);const awe=["children","className"],swe=(0,rL.Ay)(QL,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lwe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogContentText"}),{className:r}=n,i=(0,Le.A)(n,awe),o=(e=>{const{classes:t}=e,n=(0,nL.A)({root:["root"]},owe,t);return(0,De.A)({},t,n)})(i);return(0,Ve.jsx)(swe,(0,De.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,Pe.A)(o.root,r)},n,{classes:o}))})),cwe=lwe,uwe=(0,_L.A)([(0,Ve.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,Ve.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber"),dwe=(0,_L.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),hwe=()=>{const{currentUser:e,logout:n}=ND(),r=Z(),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null);return(0,Ve.jsxs)(HU,{maxWidth:"md",sx:{py:4},children:[(0,Ve.jsxs)(hL,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(QL,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(uwe,{color:"warning"})," Account Management"]}),(0,Ve.jsx)(aB,{severity:"info",sx:{mt:2,mb:4},children:"You have the right to control your data. You can deactivate your account temporarily or delete it permanently."}),f&&(0,Ve.jsx)(aB,{severity:"error",sx:{mt:2,mb:2},children:f}),(0,Ve.jsxs)(Xe,{sx:{mb:5},children:[(0,Ve.jsxs)(QL,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(W$,{})," Deactivate Account"]}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Deactivating your account will temporarily hide your profile, posts, and comments from other users. Your account will remain in our systems, and you can reactivate it at any time by simply logging in again."}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you deactivate:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile becomes hidden from other users"}),(0,Ve.jsx)("li",{children:"Your posts and comments are hidden but not deleted"}),(0,Ve.jsx)("li",{children:"You won't receive notifications"}),(0,Ve.jsx)("li",{children:"You can reactivate by logging in at any time"})]}),(0,Ve.jsx)(lM,{variant:"outlined",color:"warning",startIcon:(0,Ve.jsx)(W$,{}),onClick:()=>o(!0),sx:{mt:2},disabled:h,children:"Deactivate Account"})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsxs)(QL,{variant:"h5",gutterBottom:!0,sx:{color:"error.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(dwe,{})," Delete Account Permanently"]}),(0,Ve.jsx)(bO,{sx:{mb:3}}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"Deleting your account is permanent. All your data will be wiped from our systems and cannot be recovered."}),(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you delete your account:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile, posts, comments, and all other data are permanently deleted"}),(0,Ve.jsx)("li",{children:"You will lose access to your account history and connections"}),(0,Ve.jsx)("li",{children:"This action cannot be undone"}),(0,Ve.jsx)("li",{children:"If you want to use SideEye again, you'll need to create a new account"})]}),(0,Ve.jsx)(lM,{variant:"contained",color:"error",startIcon:(0,Ve.jsx)(dwe,{}),onClick:()=>s(!0),sx:{mt:2},disabled:h,children:"Delete Account Permanently"})]})]}),(0,Ve.jsxs)(sj,{open:i,onClose:()=>o(!1),children:[(0,Ve.jsx)(hB,{children:"Confirm Account Deactivation"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(cwe,{children:"Are you sure you want to deactivate your account? Your profile and content will be hidden until you log in again."})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>o(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(e){p(!0),m(null);try{const t=cb(sR,"users",e.uid);await Sw(t,{isActive:!1,deactivatedAt:(new Date).toISOString()}),await n(),MR.success("Your account has been deactivated. You can reactivate it by logging in again."),r("/login")}catch(O_e){console.error("Error deactivating account:",O_e),m("Failed to deactivate account. Please try again.")}finally{p(!1),o(!1)}}else m("You must be logged in to deactivate your account")},color:"warning",disabled:h,startIcon:h?(0,Ve.jsx)(SU,{size:20}):null,children:h?"Deactivating...":"Deactivate Account"})]})]}),(0,Ve.jsxs)(sj,{open:a,onClose:()=>s(!1),children:[(0,Ve.jsx)(hB,{children:"Delete Account"}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsx)(cwe,{sx:{mb:2},children:"To confirm account deletion, please enter your password. This will permanently delete your account and all associated data."}),(0,Ve.jsx)(uU,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u,onChange:e=>d(e.target.value),variant:"outlined"})]}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>s(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(lM,{onClick:()=>c(!0),color:"error",disabled:h||!u,children:"Proceed"})]})]}),(0,Ve.jsxs)(sj,{open:l,onClose:()=>c(!1),children:[(0,Ve.jsxs)(hB,{children:[(0,Ve.jsx)(uwe,{color:"error"})," Final Warning"]}),(0,Ve.jsx)(vB,{children:(0,Ve.jsxs)(cwe,{children:[(0,Ve.jsx)("strong",{children:"This action cannot be undone."})," Your account and all your data will be permanently deleted from our servers. Are you absolutely sure you want to proceed?"]})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>c(!1),disabled:h,children:"No, Keep My Account"}),(0,Ve.jsx)(lM,{onClick:async()=>{if(e)if(u){p(!0),m(null);try{const t=xo.credential(e.email||"",u);await jo(e,t);const n=cb(sR,"users",e.uid);await Tw(n),await async function(e){return en(e).delete()}(e),MR.success("Your account has been permanently deleted."),r("/login")}catch(O_e){console.error("Error deleting account:",O_e),"auth/wrong-password"===O_e.code?m("Incorrect password. Please try again."):m("Failed to delete account. Please try again.")}finally{p(!1),c(!1),s(!1)}}else m("Please enter your password to confirm deletion");else m("You must be logged in to delete your account")},color:"error",disabled:h,startIcon:h?(0,Ve.jsx)(SU,{size:20}):(0,Ve.jsx)(dwe,{}),children:h?"Deleting...":"Yes, Delete Permanently"})]})]})]})},pwe=e=>{let{message:t="Loading..."}=e;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(SU,{size:60,thickness:4}),(0,Ve.jsx)(QL,{variant:"h6",sx:{mt:2},children:t})]})},fwe=e=>{let{children:t,requireAuth:n=!0,requireEmailVerification:r=!0,requireDeviceSetup:i=!0}=e;const{currentUser:o,userProfile:a,loading:s}=ND();return s?(0,Ve.jsx)(pwe,{message:"Checking authentication..."}):n&&!o?(0,Ve.jsx)(fe,{to:"/login",replace:!0}):r&&o&&!o.emailVerified?(0,Ve.jsx)(fe,{to:"/verify-email",replace:!0}):i&&o&&a&&!a.sourceCodeSetupComplete?(0,Ve.jsx)(fe,{to:"/setup-source-code",replace:!0}):(0,Ve.jsx)(Ve.Fragment,{children:t})};class mwe extends t.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(QL,{variant:"h4",gutterBottom:!0,children:"Oops! Something went wrong"}),(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,Ve.jsx)(lM,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]}):this.props.children}}const gwe=mwe;const vwe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:n=null,disableWindowBlurListener:r=!1,onClose:i,open:o,resumeHideDuration:a}=e,s=(0,dP.A)();t.useEffect((()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[o,i]);const l=(0,dN.A)(((e,t)=>{null==i||i(e,t)})),c=(0,dN.A)((e=>{i&&null!=e&&s.start(e,(()=>{l(null,"timeout")}))}));t.useEffect((()=>(o&&c(n),s.clear)),[o,n,c,s]);const u=s.clear,d=t.useCallback((()=>{null!=n&&c(null!=a?a:.5*n)}),[n,a,c]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return t.useEffect((()=>{if(!r&&o)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[r,o,d,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,De.A)({},DL(e),DL(t));return(0,De.A)({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),d()}),onFocus:h(n),onMouseEnter:p(n),onMouseLeave:f(n)});var r},onClickAway:e=>{null==i||i(e,"clickaway")}}};function ywe(e){return e.substring(2).toLowerCase()}function bwe(e){const{children:n,disableReactTree:r=!1,mouseEvent:i="onClick",onClickAway:o,touchEvent:a="onTouchEnd"}=e,s=t.useRef(!1),l=t.useRef(null),c=t.useRef(!1),u=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,kL.A)(CM(n),l),h=(0,dN.A)((e=>{const t=u.current;u.current=!1;const n=(0,KM.A)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(s.current)return void(s.current=!1);let i;i=e.composedPath?e.composedPath().indexOf(l.current)>-1:!n.documentElement.contains(e.target)||l.current.contains(e.target),i||!r&&t||o(e)})),p=e=>t=>{u.current=!0;const r=n.props[e];r&&r(t)},f={ref:d};return!1!==a&&(f[a]=p(a)),t.useEffect((()=>{if(!1!==a){const e=ywe(a),t=(0,KM.A)(l.current),n=()=>{s.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,a]),!1!==i&&(f[i]=p(i)),t.useEffect((()=>{if(!1!==i){const e=ywe(i),t=(0,KM.A)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,i]),(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(n,f)})}function wwe(e){return(0,sL.Ay)("MuiSnackbarContent",e)}(0,Ge.A)("MuiSnackbarContent",["root","message","action"]);const xwe=["action","className","message","role"],Ewe=(0,rL.Ay)(hL,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,oL.tL)(t.palette.background.default,n);return(0,De.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),Awe=(0,rL.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),_we=(0,rL.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Swe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:o,role:a="alert"}=n,s=(0,Le.A)(n,xwe),l=n,c=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"],action:["action"],message:["message"]},wwe,t)})(l);return(0,Ve.jsxs)(Ewe,(0,De.A)({role:a,square:!0,elevation:6,className:(0,Pe.A)(c.root,i),ownerState:l,ref:t},s,{children:[(0,Ve.jsx)(Awe,{className:c.message,ownerState:l,children:o}),r?(0,Ve.jsx)(_we,{className:c.action,ownerState:l,children:r}):null]}))})),Twe=Swe;function kwe(e){return(0,sL.Ay)("MuiSnackbar",e)}(0,Ge.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Cwe=["onEnter","onExited"],Iwe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Rwe=(0,rL.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,iL.A)(n.anchorOrigin.vertical)}${(0,iL.A)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,De.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),Dwe=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiSnackbar"}),i=UM(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:v=GM,transitionDuration:y=o,TransitionProps:{onEnter:b,onExited:w}={}}=r,x=(0,Le.A)(r.TransitionProps,Cwe),E=(0,Le.A)(r,Iwe),A=(0,De.A)({},r,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:v,transitionDuration:y}),_=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,iL.A)(n.vertical)}${(0,iL.A)(n.horizontal)}`]};return(0,nL.A)(r,kwe,t)})(A),{getRootProps:S,onClickAway:T}=vwe((0,De.A)({},A)),[k,C]=t.useState(!0),I=$P({elementType:Rwe,getSlotProps:S,externalForwardedProps:E,ownerState:A,additionalProps:{ref:n},className:[_.root,d]});return!g&&k?null:(0,Ve.jsx)(bwe,(0,De.A)({onClickAway:T},h,{children:(0,Ve.jsx)(Rwe,(0,De.A)({},I,{children:(0,Ve.jsx)(v,(0,De.A)({appear:!0,in:g,timeout:y,direction:"top"===s?"down":"up",onEnter:(e,t)=>{C(!1),b&&b(e,t)},onExited:e=>{C(!0),w&&w(e)}},x,{children:u||(0,Ve.jsx)(Twe,(0,De.A)({message:m,action:a},p))}))}))}))})),Lwe=Dwe,Pwe=e=>{let{children:n,maxRequests:r=10,timeWindow:i=6e4}=e;const[o,a]=(0,t.useState)(null),s=(0,t.useRef)(0),l=(0,t.useRef)(Date.now()),c=(0,t.useCallback)((()=>{const e=Date.now();return e-l.current>=i&&(s.current=0,l.current=e),s.current>=r?(a(`Rate limit exceeded. Please try again in ${Math.ceil((i-(e-l.current))/1e3)} seconds.`),!1):(s.current++,!0)}),[r,i]),u=()=>{a(null)};return(0,Ve.jsxs)(Ve.Fragment,{children:[t.Children.map(n,(e=>t.isValidElement(e)?t.cloneElement(e,{checkRateLimit:c}):e)),(0,Ve.jsx)(Lwe,{open:!!o,autoHideDuration:6e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Ve.jsx)(aB,{onClose:u,severity:"error",sx:{width:"100%"},children:o})})]})},Mwe=()=>{const{notifications:e,markAsRead:n,deleteNotification:r,markAllAsRead:i}=(()=>{const e=(0,t.useContext)(FD);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e})(),o=Z(),a=e=>{switch(e){case"follow":return"\ud83d\udc65";case"like":return"\u2764\ufe0f";case"comment":return"\ud83d\udcac";case"tag":return"#\ufe0f\u20e3";case"mention":return"@\ufe0f";case"room_invite":return"\ud83d\udeaa";default:return"\ud83d\udce2"}};return(0,Ve.jsx)(HU,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(hL,{elevation:0,sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(QL,{variant:"h4",component:"h1",children:"Notifications"}),e.some((e=>!e.isRead))&&(0,Ve.jsx)(lM,{onClick:()=>i(),children:"Mark all as read"})]}),(0,Ve.jsx)(mM,{children:0===e.length?(0,Ve.jsx)(Xe,{sx:{textAlign:"center",py:4},children:(0,Ve.jsx)(QL,{variant:"body1",color:"text.secondary",children:"No notifications yet"})}):e.map(((e,i)=>(0,Ve.jsxs)(t.Fragment,{children:[i>0&&(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(HO,{button:!0,onClick:()=>(async e=>{e.isRead||await n(e.id);let t="/";"follow"===e.type?t=`/profile/${e.senderId}`:"like"===e.type||"comment"===e.type?t=`/post/${e.postId}`:"room_invite"===e.type&&(t=`/side-room/${e.roomId}`),o(t)})(e),sx:{backgroundColor:e.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.hover"},mb:1,borderRadius:1},children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{sx:{bgcolor:"primary.main"},children:a(e.type)})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsx)(QL,{variant:"body1",sx:{fontWeight:e.isRead?"normal":"bold"},children:e.content}),secondary:vV(e.createdAt,{addSuffix:!0})}),(0,Ve.jsx)(FP,{edge:"end",onClick:t=>(async(e,t)=>{e.stopPropagation(),await r(t)})(t,e.id),sx:{ml:2},children:(0,Ve.jsx)(bB,{})})]})]},e.id)))})]})})};var Nwe,Owe=new Uint8Array(16);function jwe(){if(!Nwe&&!(Nwe="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nwe(Owe)}const Fwe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Uwe=function(e){return"string"===typeof e&&Fwe.test(e)};for(var Bwe=[],$we=0;$we<256;++$we)Bwe.push(($we+256).toString(16).substr(1));const Vwe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Bwe[e[t+0]]+Bwe[e[t+1]]+Bwe[e[t+2]]+Bwe[e[t+3]]+"-"+Bwe[e[t+4]]+Bwe[e[t+5]]+"-"+Bwe[e[t+6]]+Bwe[e[t+7]]+"-"+Bwe[e[t+8]]+Bwe[e[t+9]]+"-"+Bwe[e[t+10]]+Bwe[e[t+11]]+Bwe[e[t+12]]+Bwe[e[t+13]]+Bwe[e[t+14]]+Bwe[e[t+15]]).toLowerCase();if(!Uwe(n))throw TypeError("Stringified UUID is invalid");return n};const Wwe=function(e,t,n){var r=(e=e||{}).random||(e.rng||jwe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Vwe(r)},zwe=()=>{const{currentUser:e,user:n,loading:r,userProfile:i}=ND(),o=Z(),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{let t="";try{t=localStorage.getItem("deviceId")||""}catch(ok){console.log("localStorage access blocked, generating new device ID")}if(!t){t=Wwe();try{localStorage.setItem("deviceId",t)}catch(ok){console.log("Failed to store device ID in localStorage")}}if(v(t),r)return;if(!(e||n))return void o("/login");null!==i&&void 0!==i&&i.sourceCodeSetupComplete&&o("/")}catch(O_e){console.error("Device initialization error:",O_e),d("Failed to initialize device")}})()}),[e,n,r,o,i]);return r?(0,Ve.jsx)(HU,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",mt:8,children:(0,Ve.jsx)(SU,{})})}):(0,Ve.jsx)(HU,{maxWidth:"xs",children:(0,Ve.jsxs)(hL,{elevation:3,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{variant:"h5",align:"center",gutterBottom:!0,children:"Device Registration"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:g?`Device ID: ${g.slice(0,8)}...`:"Generating device ID..."}),u&&(0,Ve.jsx)(aB,{severity:"error",sx:{mb:2},children:u}),h&&(0,Ve.jsx)(aB,{severity:"success",sx:{mb:2},children:h}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),!(/^\d{8}$/.test(a)?a===l||(d("Codes do not match"),0):(d("Source code must be exactly 8 digits"),0)))return;if(!g)return void d("Device identification failed. Please refresh the page.");const r=e||n;if(r&&sR){m(!0),d(null);try{const e=LD.genSaltSync(10),t=LD.hashSync(a,e);if(!g||"string"!==typeof g)throw new Error("Invalid device ID");await Sw(cb(sR,"users",r.uid),{sourceCodeHash:t,sourceCodeSetupComplete:!0,registeredDevices:Fw(g),lastUpdated:jw()}),localStorage.setItem("deviceId",g),p("Device registration successful! Redirecting..."),setTimeout((()=>o("/")),1500)}catch(O_e){console.error("Setup error:",O_e),d("permission-denied"===O_e.code?"Permission denied. Please contact support.":O_e.message.includes("device")?"Device registration failed. Please try again.":"Setup failed. Please try again.")}finally{m(!1)}}else d("Authentication error")},sx:{mt:2},children:[(0,Ve.jsx)(uU,{fullWidth:!0,margin:"normal",label:"8-Digit Security Code",value:a,type:"password",onChange:e=>s(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(uU,{fullWidth:!0,margin:"normal",label:"Confirm Security Code",value:l,type:"password",onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(lM,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3},disabled:f||!g,children:f?(0,Ve.jsx)(SU,{size:24}):"Register This Device"})]})]})})},Hwe=()=>{const{verifySourceCodeAndCompleteLogin:e,loading:n,error:r,setError:i,tempUserForSourceCode:o,currentUser:a}=ND(),s=Z(),[l,c]=(0,t.useState)("");(0,t.useEffect)((()=>{if(!a&&!o&&!n)return console.log("No temporary or current user found, redirecting to login."),void s("/login",{replace:!0});i(null)}),[a,o,s,n,i]);return(0,Ve.jsx)(HU,{maxWidth:"xs",children:(0,Ve.jsxs)(hL,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Enter Source Code"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your 8-digit source code to complete login."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{t.preventDefault(),i(null),/^[0-9]{8}$/.test(l)?await e(l):i("Source code must be exactly 8 digits.")},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(uU,{margin:"normal",required:!0,fullWidth:!0,id:"source-code",label:"8-Digit Source Code",name:"source-code",type:"password",inputProps:{maxLength:8,pattern:"[0-9]*",inputMode:"numeric"},value:l,onChange:e=>c(e.target.value.replace(/\\D/g,"").slice(0,8)),autoFocus:!0}),r&&(0,Ve.jsx)(aB,{severity:"error",sx:{mt:2},children:r}),(0,Ve.jsx)(lM,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?(0,Ve.jsx)(SU,{size:24}):"Verify Code"}),(0,Ve.jsx)(Xe,{textAlign:"center",children:(0,Ve.jsx)(JV,{component:Ce,to:"/reset-source-code",variant:"body2",sx:{mt:1},children:"Forgot Source Code?"})})]})]})})},qwe=()=>{Z();const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null);return(0,Ve.jsx)(HU,{maxWidth:"xs",children:(0,Ve.jsxs)(hL,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(QL,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Source Code"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your account email address to receive a link to reset your 8-digit source code."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),i(!0),a(null),l(null),!e)return a("Email is required."),void i(!1);try{await(async e=>{console.log(`Placeholder: Sending source code reset email to ${e}`),await new Promise((e=>setTimeout(e,1500)))})(e),l("If an account exists for this email, a reset link has been sent. Please check your inbox.")}catch(O_e){console.error("Error sending source code reset email:",O_e),a("Failed to send reset email. Please try again later.")}finally{i(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(uU,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e,onChange:e=>n(e.target.value),autoFocus:!0}),o&&(0,Ve.jsx)(aB,{severity:"error",sx:{mt:2},children:o}),s&&(0,Ve.jsx)(aB,{severity:"success",sx:{mt:2},children:s}),(0,Ve.jsx)(lM,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,Ve.jsx)(SU,{size:24}):"Send Reset Link"})]})]})})};function Gwe(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Kwe(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Ywe(e,t){Y$(2,arguments);var n=Q$(e).getTime(),r=Gwe(t);return new Date(n+r)}function Qwe(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());return o.setMonth(n.getMonth()+r+1,0),i>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function Xwe(e){Y$(1,arguments);var t=Q$(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Zwe(e){if(Y$(1,arguments),!function(e){return Y$(1,arguments),e instanceof Date||"object"===K$(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=Q$(e);return!isNaN(Number(t))}function Jwe(e,t){return Y$(2,arguments),Ywe(e,-Gwe(t))}function exe(e){Y$(1,arguments);var t=Q$(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function txe(e){Y$(1,arguments);var t=Q$(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=exe(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=exe(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function nxe(e){Y$(1,arguments);var t=Q$(e),n=exe(t).getTime()-function(e){Y$(1,arguments);var t=txe(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),exe(n)}(t).getTime();return Math.round(n/6048e5)+1}function rxe(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=G$(),d=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Q$(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function ixe(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=Q$(e),d=u.getUTCFullYear(),h=G$(),p=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var m=rxe(f,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var v=rxe(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function oxe(e,t){Y$(1,arguments);var n=Q$(e),r=rxe(n,t).getTime()-function(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=G$(),d=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=ixe(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),rxe(p,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function axe(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const sxe={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return axe("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):axe(n+1,2)},d:function(e,t){return axe(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return axe(e.getUTCHours()%12||12,t.length)},H:function(e,t){return axe(e.getUTCHours(),t.length)},m:function(e,t){return axe(e.getUTCMinutes(),t.length)},s:function(e,t){return axe(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return axe(Math.floor(r*Math.pow(10,n-3)),t.length)}};var lxe="midnight",cxe="noon",uxe="morning",dxe="afternoon",hxe="evening",pxe="night",fxe={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return sxe.y(e,t)},Y:function(e,t,n,r){var i=ixe(e,r),o=i>0?i:1-i;return"YY"===t?axe(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):axe(o,t.length)},R:function(e,t){return axe(txe(e),t.length)},u:function(e,t){return axe(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return axe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return axe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return sxe.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return axe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=oxe(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):axe(i,t.length)},I:function(e,t,n){var r=nxe(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):axe(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):sxe.d(e,t)},D:function(e,t,n){var r=function(e){Y$(1,arguments);var t=Q$(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):axe(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return axe(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return axe(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return axe(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?cxe:0===i?lxe:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?hxe:i>=12?dxe:i>=4?uxe:pxe,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return sxe.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):sxe.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):axe(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):axe(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):sxe.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):sxe.s(e,t)},S:function(e,t){return sxe.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return gxe(i);case"XXXX":case"XX":return vxe(i);default:return vxe(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return gxe(i);case"xxxx":case"xx":return vxe(i);default:return vxe(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+mxe(i,":");default:return"GMT"+vxe(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+mxe(i,":");default:return"GMT"+vxe(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return axe(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return axe((r._originalDate||e).getTime(),t.length)}};function mxe(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+axe(o,2)}function gxe(e,t){return e%60===0?(e>0?"-":"+")+axe(Math.abs(e)/60,2):vxe(e,t)}function vxe(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+axe(Math.floor(i/60),2)+n+axe(i%60,2)}const yxe=fxe;var bxe=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},wxe=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},xxe={p:wxe,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return bxe(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",bxe(i,t)).replace("{{time}}",wxe(o,t))}};const Exe=xxe;var Axe=["D","DD"],_xe=["YY","YYYY"];function Sxe(e){return-1!==Axe.indexOf(e)}function Txe(e){return-1!==_xe.indexOf(e)}function kxe(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Cxe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ixe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rxe=/^'([^]*?)'?$/,Dxe=/''/g,Lxe=/[a-zA-Z]/;function Pxe(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w;Y$(2,arguments);var x=String(t),E=G$(),A=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:E.locale)&&void 0!==r?r:hV,_=Gwe(null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:E.firstWeekContainsDate)&&void 0!==a?a:null===(d=E.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Gwe(null!==(p=null!==(f=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:E.weekStartsOn)&&void 0!==f?f:null===(b=E.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var T=Q$(e);if(!Zwe(T))throw new RangeError("Invalid time value");var k=Jwe(T,fV(T)),C={firstWeekContainsDate:_,weekStartsOn:S,locale:A,_originalDate:T};return x.match(Ixe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Exe[t])(e,A.formatLong):e})).join("").match(Cxe).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(Rxe);if(!t)return e;return t[1].replace(Dxe,"'")}(r);var o=yxe[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!Txe(r)||kxe(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!Sxe(r)||kxe(r,t,String(e)),o(k,r,A.localize,C);if(i.match(Lxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function Mxe(e){Y$(1,arguments);var t=Q$(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Nxe(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=G$(),d=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Q$(e),p=h.getDay(),f=(p<d?7:0)+p-d;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function Oxe(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=G$(),d=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=function(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=Q$(e),d=u.getFullYear(),h=G$(),p=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setFullYear(d+1,0,p),f.setHours(0,0,0,0);var m=Nxe(f,t),g=new Date(0);g.setFullYear(d,0,p),g.setHours(0,0,0,0);var v=Nxe(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}(e,t),p=new Date(0);return p.setFullYear(h,0,d),p.setHours(0,0,0,0),Nxe(p,t)}function jxe(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return n.getTime()>r.getTime()}function Fxe(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return n.getTime()<r.getTime()}function Uxe(e){Y$(1,arguments);var t=Q$(e);return t.setHours(0,0,0,0),t}function Bxe(e){Y$(1,arguments);var t=Q$(e);return t.setMinutes(0,0,0),t}function $xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vxe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$xe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Wxe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tP(e,t)}function zxe(e){return zxe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zxe(e)}function Hxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hxe=function(){return!!e})()}function qxe(e){var t=Hxe();return function(){var n,r=zxe(e);if(t){var i=zxe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==K$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eP(e)}(this,n)}}function Gxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kxe(e){var t=function(e,t){if("object"!=K$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K$(t)?t:t+""}function Yxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kxe(r.key),r)}}function Qxe(e,t,n){return t&&Yxe(e.prototype,t),n&&Yxe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xxe(e,t,n){return(t=Kxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zxe=function(){function e(){Gxe(this,e),Xxe(this,"priority",void 0),Xxe(this,"subPriority",0)}return Qxe(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Jxe=function(e){Wxe(n,e);var t=qxe(n);function n(e,r,i,o,a){var s;return Gxe(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return Qxe(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(Zxe),eEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",10),Xxe(eP(e),"subPriority",-1),e}return Qxe(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(Zxe),tEe=function(){function e(){Gxe(this,e),Xxe(this,"incompatibleTokens",void 0),Xxe(this,"priority",void 0),Xxe(this,"subPriority",void 0)}return Qxe(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new Jxe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),nEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",140),Xxe(eP(e),"incompatibleTokens",["R","u","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),rEe=(Math.pow(10,8),/^(1[0-2]|0?\d)/),iEe=/^(3[0-1]|[0-2]?\d)/,oEe=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,aEe=/^(5[0-3]|[0-4]?\d)/,sEe=/^(2[0-3]|[0-1]?\d)/,lEe=/^(2[0-4]|[0-1]?\d)/,cEe=/^(1[0-1]|0?\d)/,uEe=/^(1[0-2]|0?\d)/,dEe=/^[0-5]?\d/,hEe=/^[0-5]?\d/,pEe=/^\d/,fEe=/^\d{1,2}/,mEe=/^\d{1,3}/,gEe=/^\d{1,4}/,vEe=/^-?\d+/,yEe=/^-?\d/,bEe=/^-?\d{1,2}/,wEe=/^-?\d{1,3}/,xEe=/^-?\d{1,4}/,EEe=/^([+-])(\d{2})(\d{2})?|Z/,AEe=/^([+-])(\d{2})(\d{2})|Z/,_Ee=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,SEe=/^([+-])(\d{2}):(\d{2})|Z/,TEe=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function kEe(e,t){return e?{value:t(e.value),rest:e.rest}:e}function CEe(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function IEe(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function REe(e){return CEe(vEe,e)}function DEe(e,t){switch(e){case 1:return CEe(pEe,t);case 2:return CEe(fEe,t);case 3:return CEe(mEe,t);case 4:return CEe(gEe,t);default:return CEe(new RegExp("^\\d{1,"+e+"}"),t)}}function LEe(e,t){switch(e){case 1:return CEe(yEe,t);case 2:return CEe(bEe,t);case 3:return CEe(wEe,t);case 4:return CEe(xEe,t);default:return CEe(new RegExp("^-?\\d{1,"+e+"}"),t)}}function PEe(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function MEe(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function NEe(e){return e%400===0||e%4===0&&e%100!==0}var OEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",130),Xxe(eP(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return kEe(DEe(4,e),r);case"yo":return kEe(n.ordinalNumber(e,{unit:"year"}),r);default:return kEe(DEe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=MEe(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),jEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",130),Xxe(eP(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return kEe(DEe(4,e),r);case"Yo":return kEe(n.ordinalNumber(e,{unit:"year"}),r);default:return kEe(DEe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=ixe(e,r);if(n.isTwoDigitYear){var o=MEe(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),rxe(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),rxe(e,r)}}]),n}(tEe),FEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",130),Xxe(eP(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t){return LEe("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),exe(r)}}]),n}(tEe),UEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",130),Xxe(eP(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t){return LEe("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),BEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",120),Xxe(eP(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return DEe(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),$Ee=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",120),Xxe(eP(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return DEe(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),VEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Xxe(eP(e),"priority",110),e}return Qxe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return kEe(CEe(rEe,e),r);case"MM":return kEe(DEe(2,e),r);case"Mo":return kEe(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),WEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",110),Xxe(eP(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return kEe(CEe(rEe,e),r);case"LL":return kEe(DEe(2,e),r);case"Lo":return kEe(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(tEe);var zEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",100),Xxe(eP(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return CEe(aEe,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return rxe(function(e,t,n){Y$(2,arguments);var r=Q$(e),i=Gwe(t),o=oxe(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(tEe);var HEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",100),Xxe(eP(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return CEe(aEe,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return exe(function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t),i=nxe(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(tEe),qEe=[31,28,31,30,31,30,31,31,30,31,30,31],GEe=[31,29,31,30,31,30,31,31,30,31,30,31],KEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"subPriority",1),Xxe(eP(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return CEe(iEe,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){var n=NEe(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=GEe[r]:t>=1&&t<=qEe[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),YEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"subpriority",1),Xxe(eP(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return CEe(oEe,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return NEe(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(tEe);function QEe(e,t,n){var r,i,o,a,s,l,c,u;Y$(2,arguments);var d=G$(),h=Gwe(null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Q$(e),f=Gwe(t),m=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+m),p}var XEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=QEe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(tEe),ZEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return kEe(DEe(t.length,e),i);case"eo":return kEe(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=QEe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(tEe),JEe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return kEe(DEe(t.length,e),i);case"co":return kEe(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=QEe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(tEe);var eAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",90),Xxe(eP(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return DEe(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return kEe(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return kEe(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return kEe(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return kEe(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){Y$(2,arguments);var n=Gwe(t);n%7===0&&(n-=7);var r=Q$(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(tEe),tAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",80),Xxe(eP(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(PEe(n),0,0,0),e}}]),n}(tEe),nAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",80),Xxe(eP(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(PEe(n),0,0,0),e}}]),n}(tEe),rAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",80),Xxe(eP(e),"incompatibleTokens",["a","b","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(PEe(n),0,0,0),e}}]),n}(tEe),iAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",70),Xxe(eP(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return CEe(uEe,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(tEe),oAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",70),Xxe(eP(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return CEe(sEe,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(tEe),aAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",70),Xxe(eP(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return CEe(cEe,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(tEe),sAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",70),Xxe(eP(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return CEe(lEe,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(tEe),lAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",60),Xxe(eP(e),"incompatibleTokens",["t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return CEe(dEe,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(tEe),cAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",50),Xxe(eP(e),"incompatibleTokens",["t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return CEe(hEe,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return DEe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(tEe),uAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",30),Xxe(eP(e),"incompatibleTokens",["t","T"]),e}return Qxe(n,[{key:"parse",value:function(e,t){return kEe(DEe(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(tEe),dAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",10),Xxe(eP(e),"incompatibleTokens",["t","T","x"]),e}return Qxe(n,[{key:"parse",value:function(e,t){switch(t){case"X":return IEe(EEe,e);case"XX":return IEe(AEe,e);case"XXXX":return IEe(_Ee,e);case"XXXXX":return IEe(TEe,e);default:return IEe(SEe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(tEe),hAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",10),Xxe(eP(e),"incompatibleTokens",["t","T","X"]),e}return Qxe(n,[{key:"parse",value:function(e,t){switch(t){case"x":return IEe(EEe,e);case"xx":return IEe(AEe,e);case"xxxx":return IEe(_Ee,e);case"xxxxx":return IEe(TEe,e);default:return IEe(SEe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(tEe),pAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",40),Xxe(eP(e),"incompatibleTokens","*"),e}return Qxe(n,[{key:"parse",value:function(e){return REe(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(tEe),fAe=function(e){Wxe(n,e);var t=qxe(n);function n(){var e;Gxe(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xxe(eP(e=t.call.apply(t,[this].concat(i))),"priority",20),Xxe(eP(e),"incompatibleTokens","*"),e}return Qxe(n,[{key:"parse",value:function(e){return REe(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(tEe),mAe={G:new nEe,y:new OEe,Y:new jEe,R:new FEe,u:new UEe,Q:new BEe,q:new $Ee,M:new VEe,L:new WEe,w:new zEe,I:new HEe,d:new KEe,D:new YEe,E:new XEe,e:new ZEe,c:new JEe,i:new eAe,a:new tAe,b:new nAe,B:new rAe,h:new iAe,H:new oAe,K:new aAe,k:new sAe,m:new lAe,s:new cAe,S:new uAe,X:new dAe,x:new hAe,t:new pAe,T:new fAe},gAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yAe=/^'([^]*?)'?$/,bAe=/''/g,wAe=/\S/,xAe=/[a-zA-Z]/;function EAe(e,t,n,r){var i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,w,x;Y$(3,arguments);var E=String(e),A=String(t),_=G$(),S=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:_.locale)&&void 0!==i?i:hV;if(!S.match)throw new RangeError("locale must contain match property");var T=Gwe(null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:_.firstWeekContainsDate)&&void 0!==s?s:null===(h=_.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==a?a:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Gwe(null!==(f=null!==(m=null!==(g=null!==(v=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==v?v:null===r||void 0===r||null===(y=r.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==g?g:_.weekStartsOn)&&void 0!==m?m:null===(w=_.locale)||void 0===w||null===(x=w.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==f?f:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===A)return""===E?Q$(n):new Date(NaN);var C,I={firstWeekContainsDate:T,weekStartsOn:k,locale:S},R=[new eEe],D=A.match(vAe).map((function(e){var t=e[0];return t in Exe?(0,Exe[t])(e,S.formatLong):e})).join("").match(gAe),L=[],P=Vxe(D);try{var M=function(){var t=C.value;null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Txe(t)||kxe(t,A,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!Sxe(t)||kxe(t,A,e);var n=t[0],i=mAe[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var a=L.find((function(e){return o.includes(e.token)||e.token===n}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));L.push({token:n,fullToken:t});var s=i.run(E,t,S.match,I);if(!s)return{v:new Date(NaN)};R.push(s.setter),E=s.rest}else{if(n.match(xAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(yAe)[1].replace(bAe,"'")),0!==E.indexOf(t))return{v:new Date(NaN)};E=E.slice(t.length)}};for(P.s();!(C=P.n()).done;){var N=M();if("object"===K$(N))return N.v}}catch(O_e){P.e(O_e)}finally{P.f()}if(E.length>0&&wAe.test(E))return new Date(NaN);var O=R.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return R.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=Q$(n);if(isNaN(j.getTime()))return new Date(NaN);var F,U=Jwe(j,fV(j)),B={},$=Vxe(O);try{for($.s();!(F=$.n()).done;){var V=F.value;if(!V.validate(U,I))return new Date(NaN);var W=V.set(U,B,I);Array.isArray(W)?(U=W[0],pV(B,W[1])):U=W}}catch(O_e){$.e(O_e)}finally{$.f()}return U}var AAe=n(4894),_Ae=n.n(AAe);const SAe={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},TAe={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class kAe{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=SAe,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=e=>"undefined"===typeof e?new Date:null===e?null:new Date(e),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=e=>e,this.toJsDate=e=>e,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=e=>e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,this.longFormatters[t])(e,this.locale.formatLong)}return e})).join(""),this.formatNumber=e=>e,this.getDayOfWeek=e=>e.getDay()+1;const{locale:t,formats:n,longFormatters:r,lib:i}=e;this.locale=t,this.formats=(0,De.A)({},TAe,n),this.longFormatters=r,this.lib=i||"date-fns"}}class CAe extends kAe{constructor(){let{locale:e,formats:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({locale:e??dV,formats:t,longFormatters:_Ae()}),this.parse=(e,t)=>""===e?null:EAe(e,t,new Date,{locale:this.locale}),this.isValid=e=>null!=e&&Zwe(e),this.format=(e,t)=>this.formatByString(e,this.formats[t]),this.formatByString=(e,t)=>Pxe(e,t,{locale:this.locale}),this.isEqual=(e,t)=>null===e&&null===t||null!==e&&null!==t&&function(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return n.getTime()===r.getTime()}(e,t),this.isSameYear=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return n.getFullYear()===r.getFullYear()}(e,t),this.isSameMonth=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Q$(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t),this.isSameDay=(e,t)=>function(e,t){Y$(2,arguments);var n=Uxe(e),r=Uxe(t);return n.getTime()===r.getTime()}(e,t),this.isSameHour=(e,t)=>function(e,t){Y$(2,arguments);var n=Bxe(e),r=Bxe(t);return n.getTime()===r.getTime()}(e,t),this.isAfter=(e,t)=>jxe(e,t),this.isAfterYear=(e,t)=>jxe(e,Xwe(t)),this.isAfterDay=(e,t)=>jxe(e,Z$(t)),this.isBefore=(e,t)=>Fxe(e,t),this.isBeforeYear=(e,t)=>Fxe(e,this.startOfYear(t)),this.isBeforeDay=(e,t)=>Fxe(e,this.startOfDay(t)),this.isWithinRange=(e,t)=>{let[n,r]=t;return function(e,t){Y$(2,arguments);var n=Q$(e).getTime(),r=Q$(t.start).getTime(),i=Q$(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(e,{start:n,end:r})},this.startOfYear=e=>function(e){Y$(1,arguments);var t=Q$(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(e),this.startOfMonth=e=>function(e){Y$(1,arguments);var t=Q$(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e),this.startOfWeek=e=>Nxe(e,{locale:this.locale}),this.startOfDay=e=>Uxe(e),this.endOfYear=e=>Xwe(e),this.endOfMonth=e=>J$(e),this.endOfWeek=e=>function(e,t){var n,r,i,o,a,s,l,c;Y$(1,arguments);var u=G$(),d=Gwe(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Q$(e),p=h.getDay(),f=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+f),h.setHours(23,59,59,999),h}(e,{locale:this.locale}),this.endOfDay=e=>Z$(e),this.addYears=(e,t)=>function(e,t){return Y$(2,arguments),Qwe(e,12*Gwe(t))}(e,t),this.addMonths=(e,t)=>Qwe(e,t),this.addWeeks=(e,t)=>function(e,t){return Y$(2,arguments),Kwe(e,7*Gwe(t))}(e,t),this.addDays=(e,t)=>Kwe(e,t),this.addHours=(e,t)=>function(e,t){return Y$(2,arguments),Ywe(e,36e5*Gwe(t))}(e,t),this.addMinutes=(e,t)=>function(e,t){return Y$(2,arguments),Ywe(e,6e4*Gwe(t))}(e,t),this.addSeconds=(e,t)=>function(e,t){return Y$(2,arguments),Ywe(e,1e3*Gwe(t))}(e,t),this.getYear=e=>function(e){return Y$(1,arguments),Q$(e).getFullYear()}(e),this.getMonth=e=>function(e){return Y$(1,arguments),Q$(e).getMonth()}(e),this.getDate=e=>function(e){return Y$(1,arguments),Q$(e).getDate()}(e),this.getHours=e=>function(e){return Y$(1,arguments),Q$(e).getHours()}(e),this.getMinutes=e=>function(e){return Y$(1,arguments),Q$(e).getMinutes()}(e),this.getSeconds=e=>function(e){return Y$(1,arguments),Q$(e).getSeconds()}(e),this.getMilliseconds=e=>function(e){return Y$(1,arguments),Q$(e).getMilliseconds()}(e),this.setYear=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}(e,t),this.setMonth=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=Mxe(a);return n.setMonth(r,Math.min(o,s)),n}(e,t),this.setDate=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return n.setDate(r),n}(e,t),this.setHours=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return n.setHours(r),n}(e,t),this.setMinutes=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return n.setMinutes(r),n}(e,t),this.setSeconds=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return n.setSeconds(r),n}(e,t),this.setMilliseconds=(e,t)=>function(e,t){Y$(2,arguments);var n=Q$(e),r=Gwe(t);return n.setMilliseconds(r),n}(e,t),this.getDaysInMonth=e=>Mxe(e),this.getWeekArray=e=>{const t=this.startOfWeek(this.startOfMonth(e)),n=this.endOfWeek(this.endOfMonth(e));let r=0,i=t;const o=[];for(;this.isBefore(i,n);){const e=Math.floor(r/7);o[e]=o[e]||[],o[e].push(i),i=this.addDays(i,1),r+=1}return o},this.getWeekNumber=e=>function(e,t){Y$(1,arguments);var n=Q$(e),r=Nxe(n,t).getTime()-Oxe(n,t).getTime();return Math.round(r/6048e5)+1}(e,{locale:this.locale}),this.getYearRange=e=>{let[t,n]=e;const r=this.startOfYear(t),i=this.endOfYear(n),o=[];let a=r;for(;this.isBefore(a,i);)o.push(a),a=this.addYears(a,1);return o}}}const IAe=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),RAe=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),DAe=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function LAe(e){return(0,sL.Ay)("MuiCheckbox",e)}const PAe=(0,Ge.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),MAe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],NAe=(0,rL.Ay)(uZ,{shouldForwardProp:e=>(0,XP.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${(0,iL.A)(n.size)}`],"default"!==n.color&&t[`color${(0,iL.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,oL.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${PAe.checked}, &.${PAe.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${PAe.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),OAe=(0,Ve.jsx)(RAe,{}),jAe=(0,Ve.jsx)(IAe,{}),FAe=(0,Ve.jsx)(DAe,{}),UAe=t.forwardRef((function(e,n){var r,i;const o=(0,Ze.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=OAe,color:s="primary",icon:l=jAe,indeterminate:c=!1,indeterminateIcon:u=FAe,inputProps:d,size:h="medium",className:p}=o,f=(0,Le.A)(o,MAe),m=c?u:l,g=c?u:a,v=(0,De.A)({},o,{color:s,indeterminate:c,size:h}),y=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate",`color${(0,iL.A)(r)}`,`size${(0,iL.A)(i)}`]},a=(0,nL.A)(o,LAe,t);return(0,De.A)({},t,a)})(v);return(0,Ve.jsx)(NAe,(0,De.A)({type:"checkbox",inputProps:(0,De.A)({"data-indeterminate":c},d),icon:t.cloneElement(m,{fontSize:null!=(r=m.props.fontSize)?r:h}),checkedIcon:t.cloneElement(g,{fontSize:null!=(i=g.props.fontSize)?i:h}),ownerState:v,ref:n,className:(0,Pe.A)(y.root,p)},f,{classes:y}))})),BAe=UAe,$Ae=()=>{const e=Z(),[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)({necessary:!0,functionality:!1,analytics:!1});(0,t.useEffect)((()=>{localStorage.getItem("cookiePreferences")||r(!0)}),[]);const a=e=>t=>{o({...i,[e]:t.target.checked})};return(0,Ve.jsxs)(sj,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{style:{position:"fixed",bottom:20,right:20,margin:0,maxWidth:"500px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[(0,Ve.jsxs)(hB,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsx)(QL,{variant:"h6",component:"div",children:"Cookie Preferences"}),(0,Ve.jsx)(FP,{onClick:()=>r(!1),size:"small",sx:{color:"text.secondary"},children:(0,Ve.jsx)(TV.A,{})})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(vB,{children:[(0,Ve.jsx)(QL,{variant:"body1",paragraph:!0,children:"We use cookies to enhance your experience. Please select your preferences:"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(BAe,{checked:i.necessary,disabled:!0,color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body2",fontWeight:"bold",children:"Necessary Cookies"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Required for the app to function properly. Cannot be disabled."})]})}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(BAe,{checked:i.functionality,onChange:a("functionality"),color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body2",fontWeight:"bold",children:"Functionality Cookies"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Remember your preferences and settings."})]})}),(0,Ve.jsx)(bJ,{control:(0,Ve.jsx)(BAe,{checked:i.analytics,onChange:a("analytics"),color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body2",fontWeight:"bold",children:"Analytics Cookies"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Help us understand how you use our app."})]})})]}),(0,Ve.jsx)(Xe,{sx:{mt:2},children:(0,Ve.jsx)(JV,{component:"button",variant:"body2",onClick:()=>{e("/cookies"),r(!1)},sx:{color:"primary.main"},children:"Learn more about how we use cookies"})})]}),(0,Ve.jsx)(bO,{}),(0,Ve.jsxs)(k$,{sx:{p:2,gap:1},children:[(0,Ve.jsx)(lM,{onClick:()=>{localStorage.setItem("cookiePreferences",JSON.stringify(i)),r(!1)},variant:"outlined",color:"primary",sx:{minWidth:"120px"},children:"Save Preferences"}),(0,Ve.jsx)(lM,{onClick:()=>{const e={necessary:!0,functionality:!0,analytics:!0};o(e),localStorage.setItem("cookiePreferences",JSON.stringify(e)),r(!1)},variant:"contained",color:"primary",sx:{minWidth:"120px"},children:"Accept All"})]})]})};function VAe(e){return(0,sL.Ay)("MuiBottomNavigation",e)}(0,Ge.A)("MuiBottomNavigation",["root"]);const WAe=["children","className","component","onChange","showLabels","value"],zAe=(0,rL.Ay)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}})),HAe=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiBottomNavigation"}),{children:i,className:o,component:a="div",onChange:s,showLabels:l=!1,value:c}=r,u=(0,Le.A)(r,WAe),d=(0,De.A)({},r,{component:a,showLabels:l}),h=(e=>{const{classes:t}=e;return(0,nL.A)({root:["root"]},VAe,t)})(d);return(0,Ve.jsx)(zAe,(0,De.A)({as:a,className:(0,Pe.A)(h.root,o),ref:n,ownerState:d},u,{children:t.Children.map(i,((e,n)=>{if(!t.isValidElement(e))return null;const r=void 0===e.props.value?n:e.props.value;return t.cloneElement(e,{selected:r===c,showLabel:void 0!==e.props.showLabel?e.props.showLabel:l,value:r,onChange:s})}))}))})),qAe=HAe;function GAe(e){return(0,sL.Ay)("MuiBottomNavigationAction",e)}const KAe=(0,Ge.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),YAe=["className","icon","label","onChange","onClick","selected","showLabel","value"],QAe=(0,rL.Ay)(LP,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{[`&.${KAe.selected}`]:{color:(t.vars||t).palette.primary.main}})})),XAe=(0,rL.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${KAe.selected}`]:{fontSize:t.typography.pxToRem(14)}})})),ZAe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:o,onChange:a,onClick:s,value:l}=n,c=(0,Le.A)(n,YAe),u=n,d=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,nL.A)(i,GAe,t)})(u);return(0,Ve.jsxs)(QAe,(0,De.A)({ref:t,className:(0,Pe.A)(d.root,r),focusRipple:!0,onClick:e=>{a&&a(e,l),s&&s(e)},ownerState:u},c,{children:[i,(0,Ve.jsx)(XAe,{className:d.label,ownerState:u,children:o})]}))})),JAe=ZAe,e_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),t_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6zm-4 5v2h2v-2z"}),"MeetingRoom"),n_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),r_e=()=>{const e=Z(),n=Q(),[r,i]=(0,t.useState)(!1),{currentUser:o}=ND();return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(qAe,{value:n.pathname,onChange:(t,n)=>{"create-post"===n?i(!0):e(n)},sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",zIndex:1e3},children:[(0,Ve.jsx)(JAe,{label:"Home",value:"/",icon:(0,Ve.jsx)(e_e,{})}),(0,Ve.jsx)(JAe,{label:"Side Rooms",value:"/side-rooms",icon:(0,Ve.jsx)(t_e,{})}),(0,Ve.jsx)(JAe,{label:"Vibits",value:"/vibits",icon:(0,Ve.jsx)(VZ,{})}),(0,Ve.jsx)(JAe,{label:"Post",value:"create-post",icon:(0,Ve.jsx)(VB,{})}),(0,Ve.jsx)(JAe,{label:"Discover",value:"/discover",icon:(0,Ve.jsx)(FZ,{})}),(0,Ve.jsx)(JAe,{label:"Profile",value:`/profile/${null===o||void 0===o?void 0:o.uid}`,icon:(0,Ve.jsx)(n_e,{})})]}),(0,Ve.jsx)(sj,{open:r,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:o&&(0,Ve.jsx)(EB,{open:r,onClose:()=>i(!1)})})]})};function i_e(e){return(0,sL.Ay)("MuiLinearProgress",e)}(0,Ge.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const o_e=["className","color","value","valueBuffer","variant"];let a_e,s_e,l_e,c_e,u_e,d_e,h_e=e=>e;const p_e=(0,uP.i7)(a_e||(a_e=h_e`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),f_e=(0,uP.i7)(s_e||(s_e=h_e`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),m_e=(0,uP.i7)(l_e||(l_e=h_e`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),g_e=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,oL.a)(e.palette[t].main,.62):(0,oL.e$)(e.palette[t].main,.5),v_e=(0,rL.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,iL.A)(n.color)}`],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:g_e(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),y_e=(0,rL.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,iL.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;const r=g_e(n,t.color);return(0,De.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,uP.AH)(c_e||(c_e=h_e`
    animation: ${0} 3s infinite linear;
  `),m_e)),b_e=(0,rL.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,iL.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .4s linear"},"buffer"===t.variant&&{zIndex:1,transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,uP.AH)(u_e||(u_e=h_e`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),p_e)})),w_e=(0,rL.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,iL.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:g_e(n,t.color),transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,uP.AH)(d_e||(d_e=h_e`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),f_e)})),x_e=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:a,variant:s="indeterminate"}=n,l=(0,Le.A)(n,o_e),c=(0,De.A)({},n,{color:i,variant:s}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,iL.A)(r)}`,n],dashed:["dashed",`dashedColor${(0,iL.A)(r)}`],bar1:["bar",`barColor${(0,iL.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,iL.A)(r)}`,"buffer"===n&&`color${(0,iL.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,nL.A)(i,i_e,t)})(c),d=qD(),h={},p={bar1:{},bar2:{}};if("determinate"===s||"buffer"===s)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;d&&(e=-e),p.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===s)if(void 0!==a){let e=(a||0)-100;d&&(e=-e),p.bar2.transform=`translateX(${e}%)`}else 0;return(0,Ve.jsxs)(v_e,(0,De.A)({className:(0,Pe.A)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:t},l,{children:["buffer"===s?(0,Ve.jsx)(y_e,{className:u.dashed,ownerState:c}):null,(0,Ve.jsx)(b_e,{className:u.bar1,ownerState:c,style:p.bar1}),"determinate"===s?null:(0,Ve.jsx)(w_e,{className:u.bar2,ownerState:c,style:p.bar2})]}))})),E_e=x_e,A_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),__e=(0,_L.A)((0,Ve.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}),"VolumeOff"),S_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp"),T_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m2 2v2h3v3h2v-3h3v-2h-3V7h-2v3zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonAddAlt1"),k_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark"),C_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder"),I_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),R_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1zm-3.5-.5h2v-3h-2z"}),"HighQuality"),D_e=(0,_L.A)((0,Ve.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),L_e=()=>{var e,n,r,i,o,a,s,l,c,u,d,h,p;const{currentUser:f}=ND(),[m,g]=(0,t.useState)([]),[v,y]=(0,t.useState)(0),[b,w]=(0,t.useState)(!0),[x,E]=(0,t.useState)(!1),[A,_]=(0,t.useState)(new Set),[S,T]=(0,t.useState)(new Set),[k,C]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[D,L]=(0,t.useState)(""),[P,M]=(0,t.useState)(!1),N=(0,t.useRef)(null),O=(0,t.useRef)(0),[j,F]=((0,t.useRef)(0),(0,t.useState)(0)),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(null),[W,z]=(0,t.useState)(new Set),[H,q]=(0,t.useState)("auto"),[G,K]=(0,t.useState)(null),[Y,Q]=(0,t.useState)(null),[X,Z]=(0,t.useState)({duration:"0:00",resolution:"Unknown"}),[J,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(.5),[re,ie]=(0,t.useState)(!0),oe=(0,t.useRef)(null),[ae,se]=(0,t.useState)(null),[le,ce]=(0,t.useState)(0),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),fe=((0,t.useRef)(null),(0,t.useRef)(0)),[me,ge]=(0,t.useState)(0),[ve,ye]=(dW(UM().breakpoints.down("sm")),(0,t.useState)(!1));(0,t.useEffect)((()=>{N.current&&(N.current.volume=te,re?N.current.play():N.current.pause())}),[te,re]),(0,t.useEffect)((()=>{we(),f&&(xe(),Ee(),Ae())}),[f]),(0,t.useEffect)((()=>{const e=e=>{"VolumeUp"!==e.key&&"VolumeDown"!==e.key||console.log("Volume button pressed")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]);const be=(0,t.useCallback)((()=>{console.log("Double tap detected")}),[]),we=async()=>{try{const e=ew(lb(sR,"videos"),ow("timestamp","desc"),sw(10)),t=(await Aw(e)).docs.map((e=>({id:e.id,...e.data()})));g(t)}catch(WE){console.error("Error fetching videos:",WE),MR.error("Failed to load videos")}finally{w(!1)}},xe=async()=>{if(f)try{const e=ew(lb(sR,`users/${f.uid}/likes`)),t=await Aw(e),n=new Set(t.docs.map((e=>e.id)));_(n)}catch(WE){console.error("Error fetching liked videos:",WE)}},Ee=async()=>{if(f)try{const e=ew(lb(sR,`users/${f.uid}/favorites`)),t=await Aw(e),n=new Set(t.docs.map((e=>e.id)));T(n)}catch(WE){console.error("Error fetching favorite videos:",WE)}},Ae=async()=>{if(f)try{const e=ew(lb(sR,`users/${f.uid}/following`)),t=await Aw(e),n=new Set(t.docs.map((e=>e.id)));z(n)}catch(WE){console.error("Error fetching following:",WE)}},_e=async e=>{if(e)try{const t=ew(lb(sR,`videos/${e}/comments`),ow("timestamp","desc")),n=await Aw(t),r=await Promise.all(n.docs.map((async e=>{const t=e.data(),n=cb(sR,"users",t.userId),r=(await xw(n)).data();return console.log("Fetched user data:",r),{id:e.id,...t,userPhotoURL:(null===r||void 0===r?void 0:r.photoURL)||"",username:(null===r||void 0===r?void 0:r.username)||(null===r||void 0===r?void 0:r.displayName)||t.username||t.photoURL||"Anonymous"}})));R((e=>e?{...e,commentsList:r}:null))}catch(WE){console.error("Error fetching comments:",WE),MR.error("Failed to load comments")}},Se=async e=>{if(f&&D.trim()&&e){M(!0);try{const t=cb(sR,"videos",e),n=(await xw(t)).data(),r=await kw(lb(sR,`videos/${e}/comments`),{content:D.trim(),userId:f.uid,username:f.displayName||"Anonymous",userPhotoURL:f.photoURL||"",timestamp:jw()});if(await Sw(t,{comments:Bw(1)}),n&&n.userId!==f.uid){const t={type:"comment",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:n.userId,postId:e,commentId:r.id,content:`${f.displayName||"Someone"} commented on your video: "${D.trim()}"`,createdAt:jw(),isRead:!1};await kw(lb(sR,"users",n.userId,"notifications"),t)}const i={id:r.id,content:D.trim(),userId:f.uid,username:f.displayName||"Anonymous",userPhotoURL:f.photoURL||"",timestamp:new Date};R((e=>{var t;return e?{...e,comments:(null!==(t=e.comments)&&void 0!==t?t:0)+1,commentsList:[...e.commentsList||[],i]}:null})),L(""),MR.success("Comment added successfully")}catch(WE){console.error("Error adding comment:",WE),MR.error("Failed to add comment")}finally{M(!1)}}else MR.error("Please enter a comment and make sure you are logged in")},Te=()=>{K(null)},ke=e=>{q(e),Te(),MR.success(`Resolution changed to ${e}`)},Ie=async()=>{if(f)try{const e=new Set(W);e.add(f.uid);const t=ew(lb(sR,"videos"),nw("userId","in",Array.from(e)),ow("timestamp","desc"),sw(10)),n=(await Aw(t)).docs.map((e=>({id:e.id,...e.data()})));g(n)}catch(WE){console.error("Error fetching following videos:",WE),MR.error("Failed to load following videos")}},Re=e=>{if(!e)return"";try{if(e.toDate)return vV(e.toDate(),{addSuffix:!0});if(e instanceof Date)return vV(e,{addSuffix:!0});const t=new Date(e);return isNaN(t.getTime())?"":vV(t,{addSuffix:!0})}catch(WE){return console.error("Error formatting timestamp:",WE),""}},De=()=>(0,Ve.jsx)(_X,{anchor:"bottom",open:k,onClose:()=>C(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16}},children:(0,Ve.jsxs)(Xe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(QL,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(FP,{onClick:()=>C(!1),children:(0,Ve.jsx)(yB,{})})]}),(0,Ve.jsx)(Xe,{sx:{flex:1,overflow:"auto",mb:2},children:null!==I&&void 0!==I&&I.commentsList&&I.commentsList.length>0?(0,Ve.jsx)(mM,{children:I.commentsList.map((e=>(0,Ve.jsxs)(HO,{alignItems:"flex-start",children:[(0,Ve.jsx)(QO,{children:(0,Ve.jsx)(WL,{src:e.userPhotoURL,alt:e.username,sx:{width:40,height:40},children:!e.userPhotoURL&&e.username.charAt(0)})}),(0,Ve.jsx)(fO,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(QL,{variant:"subtitle2",component:"span",children:e.username}),(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:Re(e.timestamp)}),e.userId===(null===f||void 0===f?void 0:f.uid)&&(0,Ve.jsx)(FP,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{if(f&&I)try{await Tw(cb(sR,`videos/${I.id}/comments/${e}`)),R((t=>{var n,r;return t?{...t,comments:(null!==(n=t.comments)&&void 0!==n?n:0)-1,commentsList:null===(r=t.commentsList)||void 0===r?void 0:r.filter((t=>t.id!==e))}:null})),MR.success("Comment deleted successfully"),_e(I.id)}catch(WE){console.error("Error deleting comment:",WE),MR.error("Failed to delete comment")}})(e.id),children:(0,Ve.jsx)(bB,{fontSize:"small"})})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(QL,{variant:"body2",color:"text.primary",children:e.content}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[(0,Ve.jsx)(FP,{color:"primary",onClick:()=>(async e=>{if(f&&I)try{(await xw(cb(sR,`videos/${I.id}/comments/${e}`))).data(),await Sw(cb(sR,`videos/${I.id}/comments/${e}/likes`),{likes:Bw(1)}),R((t=>{var n;return t?{...t,commentsList:null===(n=t.commentsList)||void 0===n?void 0:n.map((t=>{var n;return t.id===e?{...t,likes:(null!==(n=t.likes)&&void 0!==n?n:0)+1}:t}))}:null})),MR.success("Comment liked successfully"),_e(I.id)}catch(WE){console.error("Error liking comment:",WE),MR.error("Failed to like comment")}})(e.id),children:(0,Ve.jsx)(A_e,{fontSize:"small"})}),(0,Ve.jsx)(QL,{variant:"caption",color:"text.secondary",children:e.likes||0}),(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{return t=e.id,void console.log("Reply to comment:",t);var t},children:(0,Ve.jsx)(XX,{fontSize:"small"})})]})]})})]},e.id)))}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50%"},children:[(0,Ve.jsx)(XX,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,Ve.jsx)(QL,{color:"text.secondary",children:"No comments yet"})]})}),(0,Ve.jsx)(Xe,{sx:{p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(uU,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:D,onChange:e=>L(e.target.value),size:"small",onKeyDown:e=>{"Enter"===e.key&&null!==I&&void 0!==I&&I.id&&!e.shiftKey&&(e.preventDefault(),Se(I.id))},multiline:!0,maxRows:4,InputProps:{sx:{"& .MuiInputBase-input":{padding:"8px 12px"}}}}),(0,Ve.jsx)(lM,{variant:"contained",onClick:()=>(null===I||void 0===I?void 0:I.id)&&Se(I.id),disabled:!D.trim()||P||!(null!==I&&void 0!==I&&I.id),startIcon:(0,Ve.jsx)(O0,{}),children:P?(0,Ve.jsx)(SU,{size:20}):"Send"})]})})]})});return b?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(SU,{})}):(0,Ve.jsxs)(Xe,{sx:{height:"calc(100vh - 56px)",position:"relative",overflow:"hidden",bgcolor:"black",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{position:"relative",width:"100%",bgcolor:"background.default",height:"48px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Ve.jsxs)(g$,{value:me,onChange:(e,t)=>{ge(t),0===t?we():Ie()},indicatorColor:"primary",textColor:"primary",centered:!0,sx:{width:"100%",height:"100%","& .MuiTab-root":{color:"text.primary",fontSize:"1.1rem",fontWeight:500,textTransform:"none",minHeight:"48px","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:"3px"}},children:[(0,Ve.jsx)(E$,{label:"DISCOVER",sx:{flex:1,maxWidth:"none"}}),(0,Ve.jsx)(E$,{label:"FOLLOWING",sx:{flex:1,maxWidth:"none"}})]}),(0,Ve.jsx)(Xe,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",bgcolor:"primary.main",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,boxShadow:2,cursor:"pointer"},children:(0,Ve.jsx)(VZ,{sx:{color:"#fff",fontSize:20}})})]}),b?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,Ve.jsx)(SU,{})}):m.length>0?(0,Ve.jsxs)(Xe,{sx:{height:"100%",width:"100%",position:"relative",overflow:"hidden",mt:"0"},onTouchStart:e=>{const t=(new Date).getTime(),n=t-fe.current;n<300&&n>0&&be(),fe.current=t,O.current=e.touches[0].clientY},onTouchMove:e=>{const t=e.touches[0].clientY,n=O.current-t;Math.abs(n)>10&&(se(n>0?"up":"down"),ce(Math.abs(n)))},onTouchEnd:()=>{ae&&le>100?(de(!0),"up"===ae&&v<m.length-1?y((e=>e+1)):"down"===ae&&v>0&&y((e=>e-1)),setTimeout((()=>{de(!1),se(null),ce(0)}),500)):(se(null),ce(0))},children:[(0,Ve.jsx)("video",{ref:N,src:null===(e=m[v])||void 0===e?void 0:e.url,autoPlay:!0,loop:!0,muted:J,playsInline:!0,preload:"metadata",poster:null===(n=m[v])||void 0===n?void 0:n.thumbnailUrl,style:{width:"100%",height:"100%",objectFit:"contain",position:"absolute",top:0,left:0,zIndex:1,transition:"transform 0.5s ease-in-out",transform:ue?"up"===ae?"translateY(-100%)":"translateY(100%)":"translateY(0)",backgroundColor:"black"},onClick:()=>ie(!re)}),v>0&&(0,Ve.jsx)("video",{src:m[v-1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"down"===ae?"translateY(0)":"translateY(-100%)"}}),v<m.length-1&&(0,Ve.jsx)("video",{src:m[v+1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"up"===ae?"translateY(0)":"translateY(100%)"}}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(FP,{color:"primary",onClick:()=>ie(!re),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:re?(0,Ve.jsx)(W$,{}):(0,Ve.jsx)(V$,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:()=>ee(!J),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:J?(0,Ve.jsx)(__e,{}):(0,Ve.jsx)(S_e,{})}),!J&&(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:1,px:1,py:.5},children:(0,Ve.jsx)(ZJ,{value:te,onChange:(e,t)=>{ne(t)},min:0,max:1,step:.1,sx:{width:100,color:"white","& .MuiSlider-thumb":{width:12,height:12},"& .MuiSlider-track":{height:4},"& .MuiSlider-rail":{height:4}}})}),(0,Ve.jsx)(FP,{color:"primary",onClick:e=>{if(!I)return;const t=I.duration||0,n=`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`;Z({duration:n,resolution:I.resolution||"Unknown"}),Q(e.currentTarget)},sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Ve.jsx)(U$,{})})]}),(0,Ve.jsxs)(KN,{anchorEl:Y,open:Boolean(Y),onClose:()=>{Q(null)},children:[(0,Ve.jsx)(aO,{disabled:!0,children:(0,Ve.jsx)(QL,{variant:"subtitle2",children:"Video Information"})}),(0,Ve.jsxs)(aO,{disabled:!0,children:[(0,Ve.jsx)(_Z,{fontSize:"small",sx:{mr:1}}),"Duration: ",X.duration]}),(0,Ve.jsxs)(aO,{disabled:!0,children:[(0,Ve.jsx)(_Z,{fontSize:"small",sx:{mr:1}}),"Resolution: ",X.resolution]})]}),(0,Ve.jsx)(De,{}),x&&(0,Ve.jsx)(sj,{open:x,maxWidth:"sm",fullWidth:!0,children:(0,Ve.jsxs)(vB,{children:[(0,Ve.jsx)(QL,{variant:"h6",gutterBottom:!0,children:"Uploading Video..."}),(0,Ve.jsx)(E_e,{variant:"determinate",value:j,sx:{height:10,borderRadius:5}}),(0,Ve.jsxs)(QL,{variant:"body2",align:"center",sx:{mt:1},children:[Math.round(j),"%"]})]})}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:2,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",zIndex:10},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,mb:1,width:"100%"},children:[(0,Ve.jsx)(Ce,{to:`/profile/${null===(r=m[v])||void 0===r?void 0:r.userId}`,style:{textDecoration:"none",color:"white"},children:(0,Ve.jsxs)(QL,{variant:"h6",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer"}},children:["@",null===(i=m[v])||void 0===i?void 0:i.username]})}),f&&(null===(o=m[v])||void 0===o?void 0:o.userId)!==f.uid&&(0,Ve.jsx)(lM,{variant:"contained",size:"small",onClick:()=>{var e;return(async e=>{if(f&&e!==f.uid)try{const t=cb(sR,`users/${f.uid}/following`,e),n=cb(sR,`users/${e}/followers`,f.uid);if(W.has(e))await Tw(t),await Tw(n),z((t=>{const n=new Set(t);return n.delete(e),n})),MR.success("Unfollowed user");else{await _w(t,{timestamp:jw()}),await _w(n,{timestamp:jw()}),z((t=>new Set(t).add(e)));const r={type:"follow",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:e,content:`${f.displayName||"Someone"} started following you`,createdAt:jw(),isRead:!1};await kw(lb(sR,"users",e,"notifications"),r),MR.success("Followed user")}}catch(WE){console.error("Error toggling follow:",WE),MR.error("Failed to update follow status")}})(null===(e=m[v])||void 0===e?void 0:e.userId)},startIcon:W.has(null===(a=m[v])||void 0===a?void 0:a.userId)?(0,Ve.jsx)(T_e,{}):(0,Ve.jsx)(YX,{}),color:W.has(null===(s=m[v])||void 0===s?void 0:s.userId)?"primary":"secondary",sx:{fontWeight:"bold",borderRadius:"20px",px:2,minWidth:"100px"},children:W.has(null===(l=m[v])||void 0===l?void 0:l.userId)?"Following":"Follow"})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2},children:[(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{var e;return(async e=>{if(f)try{const t=cb(sR,"videos",e),n=cb(sR,`users/${f.uid}/likes`,e);if(A.has(e))await Tw(n),await Sw(t,{likes:Bw(-1)}),_((t=>{const n=new Set(t);return n.delete(e),n}));else{await kw(lb(sR,`users/${f.uid}/likes`),{videoId:e,timestamp:jw()}),await Sw(t,{likes:Bw(1)}),_((t=>new Set(t).add(e)));const n=(await xw(t)).data();if(n&&n.userId!==f.uid){const t={type:"like",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:n.userId,postId:e,content:`${f.displayName||"Someone"} liked your video`,createdAt:jw(),isRead:!1};await kw(lb(sR,"users",n.userId,"notifications"),t)}}}catch(WE){console.error("Error toggling like:",WE),MR.error("Failed to update like")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:A.has(null===(c=m[v])||void 0===c?void 0:c.id)?(0,Ve.jsx)(QX,{}):(0,Ve.jsx)(A_e,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{return e=m[v],R(e),C(!0),void _e(e.id);var e},children:(0,Ve.jsx)(XX,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{var e;return(async e=>{if(f)try{const t=cb(sR,`users/${f.uid}/favorites`,e);S.has(e)?(await Tw(t),T((t=>{const n=new Set(t);return n.delete(e),n}))):(await kw(lb(sR,`users/${f.uid}/favorites`),{videoId:e,timestamp:jw()}),T((t=>new Set(t).add(e))))}catch(WE){console.error("Error toggling favorite:",WE),MR.error("Failed to update favorites")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:S.has(null===(u=m[v])||void 0===u?void 0:u.id)?(0,Ve.jsx)(k_e,{}):(0,Ve.jsx)(C_e,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:()=>{var e;return(async e=>{try{const t=`${window.location.origin}/vibits/${e}`;await navigator.clipboard.writeText(t),MR.success("Video link copied to clipboard")}catch(WE){console.error("Error sharing video:",WE),MR.error("Failed to share video")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:(0,Ve.jsx)(I_e,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:e=>{K(e.currentTarget)},children:(0,Ve.jsx)(R_e,{})}),(null===f||void 0===f?void 0:f.uid)===(null===(d=m[v])||void 0===d?void 0:d.userId)&&(0,Ve.jsx)(FP,{color:"error",onClick:()=>{V(m[v]),B(!0)},children:(0,Ve.jsx)(bB,{})}),(0,Ve.jsx)(FP,{color:"primary",onClick:async()=>{try{if(null===I||void 0===I||!I.url)throw new Error("No video selected");const e=I.url.split("/"),t=e.indexOf("videos"),n=decodeURIComponent(e.slice(t).join("/").split("?")[0]),r=EE(AE(),n),i=await wE(r),o=document.createElement("a");o.href=i,o.download=`vibit_${Date.now()}.mp4`,document.body.appendChild(o),o.click(),document.body.removeChild(o),MR.success("Video download started!")}catch(WE){console.error("Error saving video:",WE),MR.error("Failed to save video. Please try again.")}},children:(0,Ve.jsx)(D_e,{})})]})]})]}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",gap:2},children:[(0,Ve.jsx)(QL,{variant:"h6",children:"No videos yet"}),(0,Ve.jsx)(QL,{variant:"body2",color:"text.secondary",children:"Be the first to share a video!"})]}),(0,Ve.jsxs)(KN,{anchorEl:G,open:Boolean(G),onClose:Te,children:[(0,Ve.jsx)(aO,{disabled:!0,children:(0,Ve.jsx)(QL,{variant:"subtitle2",children:"Select Quality"})}),(0,Ve.jsx)(aO,{onClick:()=>ke("auto"),children:"Auto (Recommended)"}),null===(h=m[v])||void 0===h||null===(p=h.resolutions)||void 0===p?void 0:p.map((e=>(0,Ve.jsx)(aO,{onClick:()=>ke(e),children:e},e)))]}),(0,Ve.jsxs)(sj,{open:U,onClose:()=>{B(!1),V(null)},children:[(0,Ve.jsx)(hB,{children:"Delete Video"}),(0,Ve.jsx)(vB,{children:(0,Ve.jsx)(QL,{children:"Are you sure you want to delete this video? This action cannot be undone."})}),(0,Ve.jsxs)(k$,{children:[(0,Ve.jsx)(lM,{onClick:()=>{B(!1),V(null)},children:"Cancel"}),(0,Ve.jsx)(lM,{color:"error",onClick:()=>$&&(async e=>{if(f&&e.userId===f.uid)try{const t=AE(),n=e.url.split("/"),r=n.indexOf("videos"),i=EE(t,decodeURIComponent(n.slice(r).join("/").split("?")[0]));await xE(i),await Tw(cb(sR,"videos",e.id));const o=ew(lb(sR,`users/${f.uid}/likes`));(await Aw(o)).forEach((async t=>{t.id===e.id&&await Tw(t.ref)}));const a=ew(lb(sR,`videos/${e.id}/comments`));(await Aw(a)).forEach((async e=>{await Tw(e.ref)})),MR.success("Video deleted successfully"),we()}catch(WE){console.error("Error deleting video:",WE),MR.error("Failed to delete video")}finally{B(!1),V(null)}})($),children:"Delete"})]})]}),(0,Ve.jsx)("input",{type:"file",accept:"video/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n&&f)try{E(!0),F(0);const e=URL.createObjectURL(n),t=document.createElement("video");t.src=e,await new Promise(((e,n)=>{t.onloadedmetadata=e,t.onerror=n,t.load()}));const r=t.duration;if(URL.revokeObjectURL(e),r<5||r>180)return MR.error("Videos must be between 5 seconds and 3 minutes long"),void E(!1);const i=AE(),o=Date.now(),a=`${o}_${n.name}`,s=EE(i,`videos/${f.uid}/${a}`),l=document.createElement("canvas"),c=l.getContext("2d");l.width=t.videoWidth,l.height=t.videoHeight,c&&c.drawImage(t,0,0,l.width,l.height);const u=await new Promise((e=>{l.toBlob((t=>{t&&e(t)}),"image/jpeg",.7)})),d=EE(i,`thumbnails/${f.uid}/${o}.jpg`);await yE(d,u);const h=await wE(d);bE(s,n).on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;F(t)}),(e=>{console.error("Upload error:",e),MR.error("Upload failed"),E(!1)}),(async()=>{try{const e=await wE(s),n=(await xw(cb(sR,"users",f.uid))).data(),i=(null===n||void 0===n?void 0:n.username)||f.displayName||"Anonymous";await kw(lb(sR,"videos"),{url:e,thumbnailUrl:h,userId:f.uid,username:i,likes:0,comments:0,timestamp:jw(),duration:r,resolution:`${t.videoWidth}x${t.videoHeight}`}),MR.success("Video uploaded successfully!"),we()}catch(WE){console.error("Error saving video data:",WE),MR.error("Failed to save video data")}finally{E(!1),F(0)}}))}catch(WE){console.error("Error uploading video:",WE),MR.error("Failed to upload video. Please try again."),E(!1),F(0)}},style:{display:"none"},id:"video-upload",ref:oe}),(0,Ve.jsx)("label",{htmlFor:"video-upload",children:(0,Ve.jsx)(FP,{color:"primary",component:"span",sx:{position:"fixed",bottom:140,right:16,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},boxShadow:3,width:56,height:56,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{MR("Videos must be between 5 seconds and 3 minutes long"),setTimeout((()=>{var e;null===(e=oe.current)||void 0===e||e.click()}),1e3)},children:x?(0,Ve.jsx)(SU,{size:24,color:"inherit",sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}):(0,Ve.jsx)(VB,{sx:{fontSize:32}})})})]})},P_e=()=>{const{currentUser:e}=ND(),t=Q();return!e||["/login","/register"].includes(t.pathname)?null:(0,Ve.jsx)(r_e,{})},M_e=()=>{const e="/vibits"===Q().pathname;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[!e&&(0,Ve.jsx)(SO,{}),(0,Ve.jsx)(Xe,{component:"main",sx:{flexGrow:1,pt:{xs:2,sm:3}},children:(0,Ve.jsxs)(ve,{children:[(0,Ve.jsx)(me,{path:"/login",element:(0,Ve.jsx)(eW,{})}),(0,Ve.jsx)(me,{path:"/register",element:(0,Ve.jsx)(pX,{})}),(0,Ve.jsx)(me,{path:"/reset-password",element:(0,Ve.jsx)(fX,{})}),(0,Ve.jsx)(me,{path:"/verify-email",element:(0,Ve.jsx)(Zbe,{})}),(0,Ve.jsx)(me,{path:"/setup-source-code",element:(0,Ve.jsx)(zwe,{})}),(0,Ve.jsx)(me,{path:"/enter-source-code",element:(0,Ve.jsx)(Hwe,{})}),(0,Ve.jsx)(me,{path:"/reset-source-code",element:(0,Ve.jsx)(qwe,{})}),(0,Ve.jsx)(me,{path:"/",element:(0,Ve.jsx)(fwe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(DV,{})})}),(0,Ve.jsx)(me,{path:"/vibits",element:(0,Ve.jsx)(fwe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(L_e,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId",element:(0,Ve.jsx)(fwe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(iZ,{})})}),(0,Ve.jsx)(me,{path:"/settings",element:(0,Ve.jsx)(fwe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(LZ,{})})}),(0,Ve.jsx)(me,{path:"/security",element:(0,Ve.jsx)(fwe,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(Gbe,{})})}),(0,Ve.jsx)(me,{path:"/search",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(jZ,{})})}),(0,Ve.jsx)(me,{path:"/discover",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(WZ,{})})}),(0,Ve.jsx)(me,{path:"/messages",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(zZ,{})})}),(0,Ve.jsx)(me,{path:"/side-rooms",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(EJ,{})})}),(0,Ve.jsx)(me,{path:"/side-room/:roomId",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(ube,{})})}),(0,Ve.jsx)(me,{path:"/chat/:userId",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(dbe,{})})}),(0,Ve.jsx)(me,{path:"/safety",element:(0,Ve.jsx)(Wbe,{})}),(0,Ve.jsx)(me,{path:"/privacy-policy",element:(0,Ve.jsx)(Kbe,{})}),(0,Ve.jsx)(me,{path:"/about",element:(0,Ve.jsx)(Ybe,{})}),(0,Ve.jsx)(me,{path:"/terms",element:(0,Ve.jsx)(Qbe,{})}),(0,Ve.jsx)(me,{path:"/cookies",element:(0,Ve.jsx)(Xbe,{})}),(0,Ve.jsx)(me,{path:"/trash",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(nwe,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId/followers",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(rwe,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId/following",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(iwe,{})})}),(0,Ve.jsx)(me,{path:"/notifications",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(Mwe,{})})}),(0,Ve.jsx)(me,{path:"/account-management",element:(0,Ve.jsx)(fwe,{children:(0,Ve.jsx)(hwe,{})})})]})}),(0,Ve.jsx)($Ae,{}),(0,Ve.jsx)(aD,{position:"bottom-right"}),(0,Ve.jsx)(P_e,{})]})},N_e=()=>(0,Ve.jsx)(gwe,{children:(0,Ve.jsx)(Se,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Ve.jsxs)(tL,{children:[(0,Ve.jsx)(ot,{}),(0,Ve.jsx)(nz,{dateAdapter:CAe,children:(0,Ve.jsx)(MD,{children:(0,Ve.jsx)(EV,{children:(0,Ve.jsx)(UD,{children:(0,Ve.jsx)(Pwe,{children:(0,Ve.jsx)(M_e,{})})})})})})]})})});i.createRoot(document.getElementById("root")).render((0,Ve.jsx)(N_e,{}))})()})();