"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[451],{4451:(e,i,t)=>{t.r(i),t.d(i,{default:()=>ee});var r=t(9379),a=t(9950),s=t(4857),o=t(6589),n=t(6491),l=t(6639),d=t(9808),c=t(2053),u=t(8145),m=t(2046),x=t(2235),h=t(249),p=t(6050),v=t(8614),A=t(1413),b=t(3563),f=t(5333),g=t(4745),y=t(2236),j=t(4142),w=t(1378),P=t(899),C=t(470),k=t(3569),S=t(5277),U=t(704),I=t(226),z=t(6583),E=t(33),G=t(8170),L=t(9739),R=t(9715),W=t(6164),M=t(7092),B=t(227),D=t(4066),O=t(7920),F=t(2960),H=t(7493),N=t(4517),_=t(8429),J=t(6220),V=t(330),T=t(1367),q=t(5887),Y=t(7081);const K=e=>{try{return(0,Y.A)(e)}catch(i){return e instanceof Date?e.toLocaleString():new Date(e).toLocaleString()}},Q=e=>{if(!e)return"";try{return e.toDate?K(e.toDate()):e instanceof Date?K(e):K(new Date(e))}catch(i){return console.error("Error formatting timestamp:",i),""}};var Z=t(9325),X=t(1849),$=t(4414);const ee=()=>{var e;const[i,t]=(0,a.useState)(0),[Y,K]=(0,a.useState)(""),[ee,ie]=(0,a.useState)([]),[te,re]=(0,a.useState)([]),[ae,se]=(0,a.useState)(!0),[oe,ne]=(0,a.useState)(new Set),[le,de]=(0,a.useState)(new Set),ce=(0,_.Zp)(),{currentUser:ue}=(0,T.As)(),[me,xe]=(0,a.useState)(null),he=(0,s.A)(),pe=(0,o.A)(he.breakpoints.down("sm")),[ve,Ae]=(0,a.useState)(!1),[be,fe]=(0,a.useState)([]),[ge,ye]=(0,a.useState)(!1),je=a.useRef(null),[we,Pe]=(0,a.useState)("All"),[Ce,ke]=(0,a.useState)(!1),[Se,Ue]=(0,a.useState)(!1),[Ie,ze]=(0,a.useState)(null),[Ee,Ge]=(0,a.useState)(null),[Le,Re]=(0,a.useState)([]),[We,Me]=(0,a.useState)([]),[Be,De]=(0,a.useState)(""),[Oe,Fe]=(0,a.useState)("All"),[He,Ne]=(0,a.useState)(!1),[_e,Je]=(0,a.useState)([]),[Ve,Te]=(0,a.useState)([]),[qe,Ye]=(0,a.useState)(""),[Ke,Qe]=(0,a.useState)("All"),[Ze,Xe]=(0,a.useState)(!1),$e=["ASMR","Just Chatting","Music","Gossip","Podcasts","Shows","Social","Other"],ei=async()=>{try{const e=(0,J.rJ)(V.db,"users"),i=(0,J.P)(e,(0,J.My)("createdAt","desc"),(0,J.AB)(20)),t=(await(0,J.GG)(i)).docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id)).map((e=>({id:e.id,username:e.data().username||"",name:e.data().name||"",profilePic:e.data().profilePic,bio:e.data().bio,coverPhoto:e.data().coverPhoto,isPublic:e.data().isPublic,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email})));re(t)}catch(me){console.error("Error fetching users:",me)}finally{se(!1)}},ii=async()=>{try{if(se(!0),!V.db)return;const e=await(async()=>{if(!ue||!V.db)return[];try{const e=(0,J.rJ)(V.db,"users"),i=await(0,J.GG)(e),t=[];return i.forEach((e=>{const i=e.data();i.blockedUsers&&Array.isArray(i.blockedUsers)&&i.blockedUsers.includes(ue.uid)&&t.push(e.id)})),[...ue.blockedUsers||[],...t]}catch(me){return console.error("Error fetching blocked users:",me),[]}})(),i=(0,J.rJ)(V.db,"sideRooms"),t=(0,J.P)(i,(0,J._M)("deleted","!=",!0)),a=await(0,J.GG)(t),s=a.docs.map((e=>{const i=e.data();return(0,r.A)({id:e.id},i)})).filter((i=>!e.includes(i.ownerId))),o=await Promise.all(s.map((async e=>{try{var i,t;const r=await(0,J.x7)((0,J.H9)(V.db,"users",e.ownerId)),a=r.exists()?r.data():null;return{id:e.id,name:e.name||"",description:e.description||"",memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(i=e.createdAt)||void 0===i?void 0:i.toDate())||new Date,creatorName:(null===a||void 0===a?void 0:a.username)||"Unknown",creatorId:e.ownerId,creatorAvatar:(null===a||void 0===a?void 0:a.profilePic)||"",tags:e.tags||[],lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||"",isPopular:(e.activeUsers||0)>=200}}catch(me){return console.error("Error fetching owner data for room ".concat(e.id,":"),me),null}}))),n=o.filter((e=>null!==e)).sort(((e,i)=>e.isPopular&&!i.isPopular?-1:!e.isPopular&&i.isPopular?1:(i.activeUsers||0)-(e.activeUsers||0)));ie(n)}catch(me){console.error("Error fetching rooms:",me)}finally{se(!1)}};(0,a.useEffect)((()=>{ei(),ii(),(async()=>{try{const e=(0,J.rJ)(V.db,"sideRooms"),i=await(0,J.GG)(e),t=new Map;i.docs.forEach((e=>{const i=e.data(),r=i.ownerId,a=i.activeUsers||0;if(t.has(r)){const e=t.get(r);e.totalViews+=a,e.activeRooms+=1}else t.set(r,{totalViews:a,activeRooms:1})}));const r=Array.from(t.entries()).filter((e=>{let[i,t]=e;return t.totalViews>=200})).map((e=>{let[i]=e;return i})),a=await Promise.all(r.map((async e=>{const i=(0,J.H9)(V.db,"users",e),r=await(0,J.x7)(i);if(r.exists()){var a;const i=r.data(),s=t.get(e);return{id:e,username:i.username||"",name:i.name||"",profilePic:i.profilePic,bio:i.bio,isPublic:null===(a=i.isPublic)||void 0===a||a,isAuthenticated:i.isAuthenticated,createdAt:i.createdAt,isActive:i.isActive,isVerified:!0,isTopHost:!0,totalViews:s.totalViews,activeRooms:s.activeRooms}}return null})));Re(a.filter(Boolean))}catch(me){console.error("Error fetching top hosts:",me)}})(),(async()=>{try{const e=(0,J.rJ)(V.db,"sideRooms"),i=(0,J.P)(e,(0,J._M)("deleted","!=",!0)),t=(await(0,J.GG)(i)).docs.map((e=>{const i=e.data();return(0,r.A)({id:e.id},i)})).filter((e=>(e.activeUsers||0)>=200)),a=await Promise.all(t.map((async e=>{try{var i,t;const r=await(0,J.x7)((0,J.H9)(V.db,"users",e.ownerId)),a=r.exists()?r.data():null;return{id:e.id,name:e.name||"",description:e.description||"",memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(i=e.createdAt)||void 0===i?void 0:i.toDate())||new Date,creatorName:(null===a||void 0===a?void 0:a.username)||"Unknown",creatorId:e.ownerId,creatorAvatar:(null===a||void 0===a?void 0:a.profilePic)||"",tags:e.tags||[],lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||"",isPopular:!0}}catch(me){return console.error("Error fetching owner data for room ".concat(e.id,":"),me),null}}))),s=a.filter((e=>null!==e));Je(s),Te(s)}catch(me){console.error("Error fetching popular rooms:",me)}})();const e=async()=>{ue&&(await ti(),await ri())};e();const i=()=>{e()};return window.addEventListener("focus",i),()=>{window.removeEventListener("focus",i)}}),[ue]),(0,a.useEffect)((()=>{ue&&oe.size>0&&ri()}),[oe]);const ti=async()=>{if(ue&&V.db)try{const e=(0,J.P)((0,J.rJ)(V.db,"users/".concat(ue.uid,"/following"))),i=await(0,J.GG)(e),t=new Set(i.docs.map((e=>e.id))),r=(0,J.P)((0,J.rJ)(V.db,"users")),a=await(0,J.GG)(r);await Promise.all(a.docs.map((async e=>{if(t.has(e.id))return;const i=(0,J.H9)(V.db,"users/".concat(e.id,"/followers/").concat(ue.uid));if((await(0,J.x7)(i)).exists()){t.add(e.id);const i=(0,J.H9)(V.db,"users/".concat(ue.uid,"/following/").concat(e.id));(await(0,J.x7)(i)).exists()||(await(0,J.BN)(i,{timestamp:(0,J.O5)()}),console.log("Fixed inconsistent follow status for user ".concat(e.id)))}}))),ne(t)}catch(me){console.error("Error fetching following:",me)}},ri=async()=>{if(ue&&V.db)try{const e=new Set,i=(0,J.P)((0,J.rJ)(V.db,"users"),(0,J._M)("isPrivate","==",!0)),t=await(0,J.GG)(i);await Promise.all(t.docs.map((async i=>{if(oe.has(i.id))return;const t=(0,J.H9)(V.db,"users/".concat(i.id,"/followRequests/").concat(ue.uid));(await(0,J.x7)(t)).exists()&&e.add(i.id)})));const r=(0,J.P)((0,J.rJ)(V.db,"users"),(0,J._M)("isPublic","==",!1)),a=await(0,J.GG)(r);await Promise.all(a.docs.map((async i=>{if(oe.has(i.id)||e.has(i.id))return;const t=(0,J.H9)(V.db,"users/".concat(i.id,"/followRequests/").concat(ue.uid));(await(0,J.x7)(t)).exists()&&e.add(i.id)}))),de(e)}catch(me){console.error("Error fetching pending requests:",me)}},ai=async e=>{if(!V.db||!e)return null;try{const i=(0,J.rJ)(V.db,"rooms"),t=(0,J.P)(i,(0,J._M)("createdBy","==",e),(0,J._M)("type","==","public")),r=await(0,J.GG)(t);if(!r.empty){const i=r.docs[0],t=(0,J.H9)(V.db,"users",e),a=await(0,J.x7)(t);return a.exists()&&Ge({username:a.data().username||a.data().name}),{id:i.id,name:i.data().name||"Chat Room"}}return null}catch(me){return console.error("[Discover] Error checking for server chat room:",me),null}},si=()=>{Ue(!1)},oi=async e=>{if(ue&&e!==ue.uid)try{const a=(0,J.H9)(V.db,"users/".concat(ue.uid,"/following"),e),s=(0,J.H9)(V.db,"users/".concat(e,"/followers"),ue.uid);if(oe.has(e))await(0,J.kd)(a),await(0,J.kd)(s),ne((i=>{const t=new Set(i);return t.delete(e),t})),q.oR.success("Unfollowed user");else{const o=await(async e=>{if(!V.db)return!1;try{const i=(0,J.H9)(V.db,"users",e),t=await(0,J.x7)(i);if(t.exists()){const e=t.data();return!0===e.isPrivate||!1===e.isPublic}return!1}catch(me){return console.error("Error checking if account is private:",me),!1}})(e);if(o){var i;const t=(0,J.H9)(V.db,"users",e,"followRequests",ue.uid);await(0,J.BN)(t,{userId:ue.uid,username:ue.displayName||(null===(i=ue.email)||void 0===i?void 0:i.split("@")[0])||"User_".concat(ue.uid.substring(0,5)),timestamp:(0,J.O5)()}),de((i=>new Set(i).add(e))),q.oR.success("Follow request sent")}else{var t,r;await(0,J.BN)(a,{timestamp:(0,J.O5)()}),await(0,J.BN)(s,{timestamp:(0,J.O5)()}),ne((i=>new Set(i).add(e)));const i={type:"follow",senderId:ue.uid,senderName:ue.displayName||(null===(t=ue.email)||void 0===t?void 0:t.split("@")[0])||"Someone",senderAvatar:ue.photoURL||"",recipientId:e,content:"".concat(ue.displayName||(null===(r=ue.email)||void 0===r?void 0:r.split("@")[0])||"Someone"," started following you"),createdAt:(0,J.O5)(),isRead:!1};await(0,J.gS)((0,J.rJ)(V.db,"notifications"),i);const o=await ai(e);o&&(ze(o),Ue(!0)),q.oR.success("Followed user")}}}catch(me){console.error("Error toggling follow:",me),q.oR.error("Failed to update follow status")}},ni=e=>{ce("/side-room/".concat(e))},li=async function(e){if(K(e),""===e.trim())return re([]),ie([]),void Ae(!1);try{se(!0),Ae(!0);const i=(null===ue||void 0===ue?void 0:ue.blockedUsers)||[],t=[];if(ue&&V.db){(await(0,J.GG)((0,J.rJ)(V.db,"users"))).forEach((e=>{const i=e.data();i.blockedUsers&&Array.isArray(i.blockedUsers)&&i.blockedUsers.includes(ue.uid)&&t.push(e.id)}))}const a=[...i,...t];let s=[];const o=(0,J.rJ)(V.db,"users"),n=e.toLowerCase();try{const e=(0,J.P)(o,(0,J.My)("username_lower"),(0,J.EO)(n),(0,J.FD)(n+"\uf8ff"),(0,J.AB)(20)),i=await(0,J.GG)(e);s=i.docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!a.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id))}catch(me){console.error("Error searching by username_lower:",me)}if(s.length<10)try{const e=(0,J.P)(o,(0,J.My)("name_lower"),(0,J.EO)(n),(0,J.FD)(n+"\uf8ff"),(0,J.AB)(20)),i=(await(0,J.GG)(e)).docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!a.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id&&!s.some((i=>i.id===e.id))));s=[...s,...i]}catch(me){console.error("Error searching by name_lower:",me)}if(0===s.length){console.log("Falling back to simple search approach");const e=(0,J.P)(o,(0,J.AB)(50)),i=await(0,J.GG)(e);s=i.docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!a.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id&&(e.username.toLowerCase().includes(n)||e.name.toLowerCase().includes(n))))}const l=(0,J.rJ)(V.db,"sideRooms");let d=[];try{const i=(0,J.P)(l,(0,J._M)("name",">=",e),(0,J._M)("name","<=",e+"\uf8ff"),(0,J.AB)(20)),t=await(0,J.GG)(i);if(d=t.docs.map((e=>(0,r.A)({id:e.id},e.data()))),d.length<5){const e=(0,J.P)(l,(0,J._M)("deleted","!=",!0),(0,J.AB)(50)),i=(await(0,J.GG)(e)).docs.map((e=>(0,r.A)({id:e.id},e.data()))).filter((e=>!d.some((i=>i.id===e.id))&&(e.name.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)||e.tags&&e.tags.some((e=>e.toLowerCase().includes(n))))));d=[...d,...i]}}catch(me){console.error("Error searching rooms:",me)}d=d.filter((e=>e.ownerId&&!a.includes(e.ownerId)));const c=await Promise.all(d.map((async e=>{try{var i,t;const r=await(0,J.x7)((0,J.H9)(V.db,"users",e.ownerId)),a=r.exists()?r.data():null;return{id:e.id,name:e.name,description:e.description,memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(i=e.createdAt)||void 0===i?void 0:i.toDate())||new Date,creatorName:(null===a||void 0===a?void 0:a.username)||"Unknown",creatorId:e.ownerId,creatorAvatar:(null===a||void 0===a?void 0:a.profilePic)||"",tags:e.tags||[],lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||""}}catch(me){var r,a;return console.error("Error fetching owner data for room ".concat(e.id,":"),me),{id:e.id,name:e.name,description:e.description,memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(r=e.createdAt)||void 0===r?void 0:r.toDate())||new Date,creatorName:"Unknown",creatorId:e.ownerId,creatorAvatar:"",tags:e.tags||[],lastActive:(null===(a=e.lastActive)||void 0===a?void 0:a.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||""}}})));re(s),ie(c)}catch(me){console.error("Error searching:",me)}finally{se(!1)}};(0,a.useEffect)((()=>{if(null===ue||void 0===ue||!ue.uid||!V.db)return;const e=(0,J.rJ)(V.db,"users",ue.uid,"following"),i=(0,J.aQ)(e,(async e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const i=e.doc.id;if(le.has(i)){const e=await ai(i);e&&(ze(e),Ue(!0),de((e=>{const t=new Set(e);return t.delete(i),t})))}}}))}));return()=>i()}),[null===ue||void 0===ue?void 0:ue.uid,V.db,le]);(0,a.useEffect)((()=>{Me(Le)}),[Le]);return ae&&!ve?(0,$.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,$.jsx)(l.A,{})}):(0,$.jsxs)(n.A,{sx:{position:"relative",backgroundColor:he.palette.background.default},children:[(0,$.jsx)(n.A,{sx:{position:"sticky",top:0,backgroundColor:he.palette.background.default,zIndex:1e3,pt:2,pb:2,borderBottom:1,borderColor:"divider"},children:(0,$.jsxs)(d.A,{maxWidth:!1,sx:{maxWidth:"1440px"},children:[(0,$.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,$.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,$.jsx)(c.A,{variant:pe?"h5":"h4",component:"h1",sx:{fontWeight:600},children:ve?"Search Results":"Discover"})}),(0,$.jsx)(Z.x,{onClickAway:()=>{ye(!1)},children:(0,$.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,position:"relative"},children:(0,$.jsxs)(n.A,{ref:je,children:[(0,$.jsx)(u.A,{size:"small",placeholder:"Search rooms and users...",value:Y,onChange:e=>{(async e=>{if(K(e),e.length<1)return fe([]),void ye(!1);try{const i=e.toLowerCase(),t=(0,J.rJ)(V.db,"users"),r=e=>{var i,t,r,a,s,o,n,l,d,c;return{id:e.id,username:(null===(i=e.data())||void 0===i?void 0:i.username)||"",name:(null===(t=e.data())||void 0===t?void 0:t.name)||"",bio:null===(r=e.data())||void 0===r?void 0:r.bio,profilePic:null===(a=e.data())||void 0===a?void 0:a.profilePic,isPublic:null===(s=null===(o=e.data())||void 0===o?void 0:o.isPublic)||void 0===s||s,isAuthenticated:null===(n=e.data())||void 0===n?void 0:n.isAuthenticated,createdAt:null===(l=e.data())||void 0===l?void 0:l.createdAt,isActive:null===(d=e.data())||void 0===d?void 0:d.isActive,isVerified:!0,email:null===(c=e.data())||void 0===c?void 0:c.email}};let a=[];try{const e=(0,J.P)(t,(0,J.My)("username_lower"),(0,J.EO)(i),(0,J.FD)(i+"\uf8ff"),(0,J.AB)(10)),s=await(0,J.GG)(e);a=s.docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id)).map(r)}catch(me){console.log("Error searching by username_lower:",me)}if(a.length<5)try{const e=(0,J.P)(t,(0,J.My)("name_lower"),(0,J.EO)(i),(0,J.FD)(i+"\uf8ff"),(0,J.AB)(10)),s=(await(0,J.GG)(e)).docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id&&!a.some((i=>i.id===e.id)))).map(r);a=[...a,...s]}catch(me){console.log("Error searching by name_lower:",me)}if(a.length<3){const e=(0,J.P)(t,(0,J.AB)(25));try{const t=(await(0,J.GG)(e)).docs.filter((e=>{var t,r;return"sideeye"!==e.id&&"contact-team"!==e.id&&!a.some((i=>i.id===e.id))&&(((null===(t=e.data())||void 0===t?void 0:t.username)||"").toLowerCase().includes(i)||((null===(r=e.data())||void 0===r?void 0:r.name)||"").toLowerCase().includes(i))})).map(r);a=[...a,...t]}catch(me){console.log("Error with fallback search:",me)}}null!==ue&&void 0!==ue&&ue.blockedUsers&&(a=a.filter((e=>{var i;return!(null!==(i=ue.blockedUsers)&&void 0!==i&&i.includes(e.id))}))),fe(a.slice(0,5)),ye(a.length>0)}catch(me){console.error("Instant search error:",me)}})(e.target.value),li(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(li(Y,!0),ye(!1))},InputProps:{startAdornment:(0,$.jsx)(m.A,{position:"start",children:(0,$.jsx)(R.A,{})})},sx:{backgroundColor:"background.paper",borderRadius:1,width:pe?"230px":"300px","& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,$.jsx)(X.A,{open:ge&&be.length>0,anchorEl:je.current,placement:"bottom-start",style:{width:null===(e=je.current)||void 0===e?void 0:e.offsetWidth,zIndex:1400},children:(0,$.jsx)(x.A,{elevation:3,sx:{mt:1,maxHeight:"300px",overflowY:"auto",borderRadius:1},children:(0,$.jsx)(h.A,{sx:{p:0},children:be.map(((e,i)=>{var t,r;return(0,$.jsxs)(a.Fragment,{children:[(0,$.jsxs)(p.Ay,{button:!0,onClick:()=>{ce("/profile/".concat(e.id)),ye(!1)},sx:{py:1,px:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,$.jsx)(v.A,{children:(0,$.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:32,height:32},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),(0,$.jsx)(b.A,{primary:(0,$.jsxs)(c.A,{variant:"body1",component:"div",children:[e.name,e.isVerified&&(0,$.jsx)(W.A,{sx:{ml:.5,color:"primary.main",fontSize:"0.9rem",verticalAlign:"middle"}})]}),secondary:(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,$.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]}),sx:{my:0}}),ue&&e.id!==ue.uid&&(0,$.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,$.jsx)(f.A,{size:"small",onClick:i=>{i.stopPropagation(),ce("/messages/".concat(e.id))},children:(0,$.jsx)(M.A,{fontSize:"small"})}),(0,$.jsx)(f.A,{size:"small",onClick:i=>{i.stopPropagation(),le.has(e.id)||oi(e.id)},color:oe.has(e.id)?"primary":le.has(e.id)?"secondary":"default",disabled:le.has(e.id),children:(0,$.jsx)(B.A,{fontSize:"small"})})]})]}),i<be.length-1&&(0,$.jsx)(g.A,{})]},e.id)}))})})})]})})})]}),!ve&&(0,$.jsxs)(y.A,{value:i,onChange:(e,i)=>{t(i),1===i&&0===te.length&&ei()},variant:pe?"scrollable":"standard",scrollButtons:!!pe&&"auto",sx:{mb:2,"& .MuiTabs-indicator":{height:3}},children:[(0,$.jsx)(j.A,{icon:(0,$.jsx)(D.A,{}),label:"ROOMS",iconPosition:"start"}),(0,$.jsx)(j.A,{icon:(0,$.jsx)(O.A,{}),label:"PEOPLE",iconPosition:"start"}),(0,$.jsx)(j.A,{icon:(0,$.jsx)(F.A,{}),label:"TOP HOSTS",iconPosition:"start"}),(0,$.jsx)(j.A,{icon:(0,$.jsx)(H.A,{}),label:"POPULAR",iconPosition:"start"})]}),!ve&&0===i&&(0,$.jsxs)(y.A,{value:we,onChange:(e,i)=>{Pe(i),ve&&Ae(!1)},variant:"scrollable",scrollButtons:"auto","aria-label":"room categories",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[(0,$.jsx)(j.A,{label:"All",value:"All"}),$e.map((e=>(0,$.jsx)(j.A,{label:e,value:e},e)))]})]})}),(0,$.jsx)(d.A,{maxWidth:!1,sx:{pt:3,pb:4,px:pe?2:3,maxWidth:"1440px"},children:ve?(0,$.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",gap:4},children:[te.length>0&&(0,$.jsxs)(n.A,{children:[(0,$.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Users"}),(0,$.jsx)(h.A,{children:te.map(((e,i)=>{var t,r;return(0,$.jsxs)(a.Fragment,{children:[(0,$.jsxs)(p.Ay,{sx:{py:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>ce("/profile/".concat(e.id)),children:[(0,$.jsx)(v.A,{children:(0,$.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:50,height:50},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),(0,$.jsx)(b.A,{primary:(0,$.jsxs)(c.A,{variant:"subtitle1",component:"div",sx:{fontWeight:600},children:[e.name,e.isVerified&&(0,$.jsx)(W.A,{sx:{ml:.5,color:"primary.main",fontSize:"1rem",verticalAlign:"middle"}})]}),secondary:(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,$.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]})}),ue&&e.id!==ue.uid&&(0,$.jsx)(w.A,{children:(0,$.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,$.jsx)(f.A,{onClick:i=>{i.stopPropagation(),ce("/chat/".concat(e.id))},size:"small",children:(0,$.jsx)(M.A,{})}),(0,$.jsx)(f.A,{onClick:i=>{i.stopPropagation(),le.has(e.id)||oi(e.id)},size:"small",color:oe.has(e.id)?"primary":le.has(e.id)?"secondary":"default",disabled:le.has(e.id),children:(0,$.jsx)(B.A,{})})]})})]}),i<te.length-1&&(0,$.jsx)(g.A,{})]},e.id)}))})]}),ee.length>0&&(0,$.jsxs)(n.A,{children:[(0,$.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Rooms"}),(0,$.jsx)(P.Ay,{container:!0,spacing:3,children:ee.filter((e=>"All"===we||e.tags&&e.tags.includes(we))).map((e=>(0,$.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,$.jsxs)(C.A,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:he.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:he.shadows[6]}},onClick:()=>ni(e.id),children:[(0,$.jsxs)(n.A,{sx:{position:"relative"},children:[(0,$.jsx)(k.A,{component:"img",height:pe?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"https://placehold.co/600x400/333/666?text=Room",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),(0,$.jsxs)(n.A,{sx:{position:"absolute",top:12,right:12,display:"flex",gap:1},children:[e.isPopular&&(0,$.jsx)(S.A,{label:"Popular",color:"warning",size:"small",icon:(0,$.jsx)(H.A,{}),sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}}),e.isLive&&(0,$.jsx)(S.A,{label:"LIVE",color:"error",size:"small",sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]})]}),(0,$.jsxs)(U.A,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,$.jsxs)(n.A,{sx:{mb:2},children:[(0,$.jsx)(c.A,{gutterBottom:!0,variant:pe?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,$.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,$.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,$.jsx)(S.A,{icon:(0,$.jsx)(N.A,{sx:{fontSize:pe?"1.1rem":"1.25rem"}}),label:"".concat(e.activeUsers||0," views"),color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:pe?"0.875rem":"1rem"}}}),e.isPrivate&&(0,$.jsx)(S.A,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:pe?"0.875rem":"1rem"}}})]}),(0,$.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{fontSize:pe?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",Q(e.lastActive)]})]})]})},e.id)))})]}),0===te.length&&0===ee.length&&!ae&&(0,$.jsxs)(n.A,{sx:{textAlign:"center",py:4},children:[(0,$.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No results found"}),(0,$.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Try different keywords or check your spelling"})]})]}):0===i?(0,$.jsx)(P.Ay,{container:!0,spacing:3,children:ee.filter((e=>"All"===we||e.tags&&e.tags.includes(we))).map((e=>(0,$.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,$.jsxs)(C.A,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:he.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:he.shadows[6]}},onClick:()=>ni(e.id),children:[(0,$.jsxs)(n.A,{sx:{position:"relative"},children:[(0,$.jsx)(k.A,{component:"img",height:pe?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"https://placehold.co/600x400/333/666?text=Room",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),(0,$.jsxs)(n.A,{sx:{position:"absolute",top:12,right:12,display:"flex",gap:1},children:[e.isPopular&&(0,$.jsx)(S.A,{label:"Popular",color:"warning",size:"small",icon:(0,$.jsx)(H.A,{}),sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}}),e.isLive&&(0,$.jsx)(S.A,{label:"LIVE",color:"error",size:"small",sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]})]}),(0,$.jsxs)(U.A,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,$.jsxs)(n.A,{sx:{mb:2},children:[(0,$.jsx)(c.A,{gutterBottom:!0,variant:pe?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,$.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,$.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,$.jsx)(S.A,{icon:(0,$.jsx)(N.A,{sx:{fontSize:pe?"1.1rem":"1.25rem"}}),label:"".concat(e.activeUsers||0," views"),color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"1 4px",fontSize:pe?"0.875rem":"1rem"}}}),e.isPrivate&&(0,$.jsx)(S.A,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:pe?"0.875rem":"1rem"}}})]}),(0,$.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{fontSize:pe?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",Q(e.lastActive)]})]})]})},e.id)))}):1===i?(0,$.jsx)(n.A,{sx:{mt:2},children:ae?(0,$.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,$.jsx)(l.A,{})}):te.length>0?(0,$.jsx)(h.A,{children:te.map(((e,i)=>{var t,r;return(0,$.jsxs)(a.Fragment,{children:[(0,$.jsxs)(p.Ay,{sx:{py:3,px:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"},borderRadius:1,mb:1},onClick:()=>ce("/profile/".concat(e.id)),children:[(0,$.jsx)(v.A,{children:(0,$.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:60,height:60,mr:2},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),(0,$.jsx)(b.A,{primary:(0,$.jsxs)(c.A,{variant:"subtitle1",component:"div",sx:{fontWeight:600},children:[e.name,e.isVerified&&(0,$.jsx)(W.A,{sx:{ml:.5,color:"primary.main",fontSize:"1rem",verticalAlign:"middle"}})]}),secondary:(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,$.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]}),sx:{ml:2}}),ue&&e.id!==ue.uid&&(0,$.jsx)(w.A,{sx:{right:16},children:(0,$.jsxs)(n.A,{sx:{display:"flex",gap:1,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[(0,$.jsx)(f.A,{color:"primary",size:"small",onClick:i=>{i.stopPropagation(),ce("/chat/user/".concat(e.id))},sx:{border:"1px solid",borderColor:"primary.main",p:1},children:(0,$.jsx)(M.A,{fontSize:"small"})}),(0,$.jsx)(I.A,{variant:oe.has(e.id)||le.has(e.id)?"contained":"outlined",size:"small",startIcon:oe.has(e.id)||le.has(e.id)?null:(0,$.jsx)(B.A,{}),onClick:i=>{i.stopPropagation(),le.has(e.id)||oi(e.id)},color:le.has(e.id)?"secondary":"primary",disabled:le.has(e.id),children:oe.has(e.id)?"Following":le.has(e.id)?"Requested":"Follow"})]})})]}),i<te.length-1&&(0,$.jsx)(g.A,{sx:{my:1}})]},e.id)}))}):(0,$.jsx)(n.A,{sx:{textAlign:"center",py:4},children:(0,$.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No users found"})})}):2===i?(0,$.jsxs)(n.A,{sx:{mt:2},children:[(0,$.jsx)(n.A,{sx:{mb:3},children:(0,$.jsxs)(P.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,$.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,$.jsx)(u.A,{fullWidth:!0,size:"small",placeholder:"Search top hosts...",value:Be,onChange:e=>{De(e.target.value),(async e=>{if(e.trim()){Ne(!0);try{const i=e.toLowerCase(),t=(0,J.rJ)(V.db,"users"),a=(0,J.P)(t,(0,J._M)("username_lower",">=",i),(0,J._M)("username_lower","<=",i+"\uf8ff"),(0,J.AB)(20)),s=(await(0,J.GG)(a)).docs.map((e=>(0,r.A)({id:e.id},e.data()))).filter((e=>Le.some((i=>i.id===e.id))));Me(s)}catch(me){console.error("Error searching top hosts:",me),Me([])}finally{Ne(!1)}}else Me(Le)})(e.target.value)},InputProps:{startAdornment:(0,$.jsx)(m.A,{position:"start",children:(0,$.jsx)(R.A,{})})},sx:{backgroundColor:"background.paper",borderRadius:1,"& .MuiOutlinedInput-root":{borderRadius:1}}})}),(0,$.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,$.jsxs)(y.A,{value:Oe,onChange:(e,i)=>(e=>{if(Fe(e),"All"===e)return void Me(Le);const i=Le.filter((i=>ee.filter((e=>e.creatorId===i.id)).some((i=>{var t;return null===(t=i.tags)||void 0===t?void 0:t.includes(e)}))));Me(i)})(i),variant:"scrollable",scrollButtons:"auto","aria-label":"top host categories",sx:{borderBottom:1,borderColor:"divider"},children:[(0,$.jsx)(j.A,{label:"All",value:"All"}),$e.map((e=>(0,$.jsx)(j.A,{label:e,value:e},e)))]})})]})}),ae||He?(0,$.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,$.jsx)(l.A,{})}):We.length>0?(0,$.jsx)(h.A,{children:We.map(((e,i)=>{var t,r,s;return(0,$.jsxs)(a.Fragment,{children:[(0,$.jsxs)(p.Ay,{sx:{py:3,px:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"},borderRadius:1,mb:1,position:"relative"},children:[(0,$.jsx)(v.A,{children:(0,$.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:60,height:60,mr:2,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>ce("/profile/".concat(e.id)),children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),(0,$.jsx)(b.A,{primary:(0,$.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,$.jsxs)(c.A,{variant:"subtitle1",component:"div",sx:{fontWeight:600},children:[e.name,e.isVerified&&(0,$.jsx)(W.A,{sx:{ml:.5,color:"primary.main",fontSize:"1rem",verticalAlign:"middle"}})]}),(0,$.jsx)(S.A,{label:"Top Host",color:"warning",size:"small",icon:(0,$.jsx)(F.A,{}),sx:{height:"auto","& .MuiChip-label":{px:1}}})]}),secondary:(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),(0,$.jsxs)(n.A,{sx:{mt:1,display:"flex",gap:2},children:[(0,$.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[null===(s=e.totalViews)||void 0===s?void 0:s.toLocaleString()," total views"]}),(0,$.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.activeRooms," active rooms"]})]}),e.bio&&(0,$.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]}),sx:{ml:2}}),ue&&e.id!==ue.uid&&(0,$.jsx)(w.A,{sx:{right:16},children:(0,$.jsx)(I.A,{variant:oe.has(e.id)||le.has(e.id)?"contained":"outlined",size:"small",startIcon:oe.has(e.id)||le.has(e.id)?null:(0,$.jsx)(B.A,{}),onClick:i=>{i.stopPropagation(),le.has(e.id)||oi(e.id)},color:le.has(e.id)?"secondary":"primary",disabled:le.has(e.id),children:oe.has(e.id)?"Following":le.has(e.id)?"Requested":"Follow"})})]}),i<We.length-1&&(0,$.jsx)(g.A,{sx:{my:1}})]},e.id)}))}):(0,$.jsxs)(n.A,{sx:{textAlign:"center",py:4},children:[(0,$.jsx)(c.A,{variant:"h6",color:"text.secondary",children:Be?"No matching top hosts found":"No top hosts found"}),Be&&(0,$.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try different keywords or check your spelling"})]})]}):(0,$.jsxs)(n.A,{sx:{mt:2},children:[(0,$.jsx)(n.A,{sx:{mb:3},children:(0,$.jsxs)(P.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,$.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,$.jsx)(u.A,{fullWidth:!0,size:"small",placeholder:"Search popular rooms...",value:qe,onChange:e=>{Ye(e.target.value),(async e=>{if(e.trim()){Xe(!0);try{const i=e.toLowerCase(),t=_e.filter((e=>e.name.toLowerCase().includes(i)||e.description.toLowerCase().includes(i)||e.creatorName.toLowerCase().includes(i)));Te(t)}catch(me){console.error("Error searching popular rooms:",me),Te([])}finally{Xe(!1)}}else Te(_e)})(e.target.value)},InputProps:{startAdornment:(0,$.jsx)(m.A,{position:"start",children:(0,$.jsx)(R.A,{})})},sx:{backgroundColor:"background.paper",borderRadius:1,"& .MuiOutlinedInput-root":{borderRadius:1}}})}),(0,$.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,$.jsxs)(y.A,{value:Ke,onChange:(e,i)=>(e=>{if(Qe(e),"All"===e)return void Te(_e);const i=_e.filter((i=>{var t;return null===(t=i.tags)||void 0===t?void 0:t.includes(e)}));Te(i)})(i),variant:"scrollable",scrollButtons:"auto","aria-label":"popular room categories",sx:{borderBottom:1,borderColor:"divider"},children:[(0,$.jsx)(j.A,{label:"All",value:"All"}),$e.map((e=>(0,$.jsx)(j.A,{label:e,value:e},e)))]})})]})}),ae||Ze?(0,$.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,$.jsx)(l.A,{})}):Ve.length>0?(0,$.jsx)(P.Ay,{container:!0,spacing:3,children:Ve.map((e=>(0,$.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,$.jsxs)(C.A,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:he.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:he.shadows[6]}},onClick:()=>ni(e.id),children:[(0,$.jsxs)(n.A,{sx:{position:"relative"},children:[(0,$.jsx)(k.A,{component:"img",height:pe?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"https://placehold.co/600x400/333/666?text=Room",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),(0,$.jsxs)(n.A,{sx:{position:"absolute",top:12,right:12,display:"flex",gap:1},children:[(0,$.jsx)(S.A,{label:"Popular",color:"warning",size:"small",icon:(0,$.jsx)(H.A,{}),sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}}),e.isLive&&(0,$.jsx)(S.A,{label:"LIVE",color:"error",size:"small",sx:{fontWeight:"bold",fontSize:pe?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]})]}),(0,$.jsxs)(U.A,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,$.jsxs)(n.A,{sx:{mb:2},children:[(0,$.jsx)(c.A,{gutterBottom:!0,variant:pe?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,$.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,$.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,$.jsx)(S.A,{icon:(0,$.jsx)(N.A,{sx:{fontSize:pe?"1.1rem":"1.25rem"}}),label:"".concat(e.activeUsers||0," views"),color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"1 4px",fontSize:pe?"0.875rem":"1rem"}}}),e.isPrivate&&(0,$.jsx)(S.A,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:pe?"0.875rem":"1rem"}}})]}),(0,$.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{fontSize:pe?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",Q(e.lastActive)]})]})]})},e.id)))}):(0,$.jsxs)(n.A,{sx:{textAlign:"center",py:4},children:[(0,$.jsx)(c.A,{variant:"h6",color:"text.secondary",children:qe?"No matching popular rooms found":"No popular rooms found"}),qe&&(0,$.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try different keywords or check your spelling"})]})]})}),(0,$.jsxs)(z.A,{open:Se,onClose:si,"aria-labelledby":"join-room-chat-dialog-title",children:[(0,$.jsx)(E.A,{id:"join-room-chat-dialog-title",children:"Join Room Chat?"}),(0,$.jsx)(G.A,{children:(0,$.jsxs)(c.A,{children:[(null===Ee||void 0===Ee?void 0:Ee.username)||"This creator",' has a server chat room: "',null===Ie||void 0===Ie?void 0:Ie.name,'". Would you like to join it to receive updates and connect with other followers?']})}),(0,$.jsxs)(L.A,{children:[(0,$.jsx)(I.A,{onClick:si,children:"Not Now"}),(0,$.jsx)(I.A,{onClick:()=>{Ie&&ce("/chat/room/".concat(Ie.id)),Ue(!1)},variant:"contained",color:"primary",children:"Join"})]})]})]})}}}]);