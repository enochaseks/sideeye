"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[601],{760:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(3235),a=s(4414);const n=(0,r.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},1601:(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var r=s(9379),a=s(9950),n=s(9808),o=s(6491),i=s(2053),l=s(2235),c=s(8145),d=s(5979),u=s(3788),m=s(6101),h=s(3266),x=s(226),A=s(6639),g=s(249),f=s(6050),v=s(8614),p=s(1413),y=s(3563),j=s(5277),b=s(5333),S=s(6583),w=s(33),D=s(8170),C=s(6493),M=s(9739),I=s(4862),z=s(3174),N=s(920),T=s(1673),k=s(2750),R=s(3235),X=s(4414);const E=(0,R.A)((0,X.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown");var H=s(760),F=s(1367),B=s(6220),L=s(330),P=s(7081);const U=()=>{const{currentUser:e}=(0,F.As)(),[t,s]=(0,a.useState)([]),[R,U]=(0,a.useState)(!0),[W,_]=(0,a.useState)(!1),[V,Z]=(0,a.useState)({}),[q,Y]=(0,a.useState)(""),[J,O]=(0,a.useState)(""),[Q,G]=(0,a.useState)(""),[K,$]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(""),[se,re]=(0,a.useState)("success"),[ae,ne]=(0,a.useState)(!1),[oe,ie]=(0,a.useState)(null),le={pending:"default",under_review:"warning",in_progress:"info",completed:"success",rejected:"error"};(0,a.useEffect)((()=>{const e=(0,B.rJ)(L.db,"suggestions"),t=(0,B.P)(e,(0,B.My)("createdAt","desc")),a=(0,B.aQ)(t,(e=>{const t=e.docs.map((e=>(0,r.A)({id:e.id},e.data())));s(t),U(!1)}));return()=>a()}),[]),(0,a.useEffect)((()=>{if(!e)return;(async()=>{try{const t=(0,B.H9)(L.db,"users",e.uid),s=await(0,B.x7)(t);if(s.exists()){const e=s.data();Z({username:e.username,name:e.name,profilePic:e.profilePic||e.photoURL})}}catch(t){console.error("Error fetching user data:",t)}})()}),[e]);const ce=async(s,r)=>{if(e)try{const a=(0,B.H9)(L.db,"suggestions",s),n=t.find((e=>e.id===s));if(!n)return;const o=n.upvotes.includes(e.uid),i=n.downvotes.includes(e.uid);if("upvote"===r)if(o)await(0,B.mZ)(a,{upvotes:(0,B.C3)(e.uid)});else{const t={upvotes:(0,B.hq)(e.uid)};i&&(t.downvotes=(0,B.C3)(e.uid)),await(0,B.mZ)(a,t)}else if(i)await(0,B.mZ)(a,{downvotes:(0,B.C3)(e.uid)});else{const t={downvotes:(0,B.hq)(e.uid)};o&&(t.upvotes=(0,B.C3)(e.uid)),await(0,B.mZ)(a,t)}}catch(a){console.error("Error voting:",a),te("Failed to register vote"),re("error"),$(!0)}};return(0,X.jsxs)(n.A,{maxWidth:"md",sx:{mt:4,mb:4},children:[(0,X.jsxs)(o.A,{sx:{mb:4},children:[(0,X.jsxs)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,X.jsx)(N.A,{fontSize:"large",color:"primary"}),"Suggestions"]}),(0,X.jsx)(i.A,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"Help us improve SideEye by sharing your ideas and suggestions!"}),(0,X.jsxs)(l.A,{elevation:2,sx:{p:3,mb:4},children:[(0,X.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Submit a New Suggestion"}),(0,X.jsxs)(o.A,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,X.jsx)(c.A,{label:"Suggestion Title",variant:"outlined",fullWidth:!0,value:q,onChange:e=>Y(e.target.value),placeholder:"Brief title for your suggestion...",disabled:W}),(0,X.jsxs)(d.A,{fullWidth:!0,disabled:W,children:[(0,X.jsx)(u.A,{children:"Category"}),(0,X.jsx)(m.A,{value:Q,label:"Category",onChange:e=>G(e.target.value),children:["New Features","UI/UX Improvements","Performance","Bug Reports","Content & Media","Social Features","Security & Privacy","Other"].map((e=>(0,X.jsx)(h.A,{value:e,children:e},e)))})]}),(0,X.jsx)(c.A,{label:"Description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,value:J,onChange:e=>O(e.target.value),placeholder:"Describe your suggestion in detail...",disabled:W}),(0,X.jsx)(x.A,{variant:"contained",startIcon:W?(0,X.jsx)(A.A,{size:20}):(0,X.jsx)(T.A,{}),onClick:async()=>{if(!e||!q.trim()||!J.trim()||!Q)return te("Please fill in all fields"),re("error"),void $(!0);_(!0);try{await(0,B.gS)((0,B.rJ)(L.db,"suggestions"),{title:q.trim(),description:J.trim(),category:Q,authorId:e.uid,authorName:V.name||V.username||e.displayName||"Anonymous User",authorAvatar:V.profilePic||e.photoURL||"",upvotes:[],downvotes:[],status:"pending",createdAt:(0,B.O5)()}),Y(""),O(""),G(""),te("Suggestion submitted successfully!"),re("success"),$(!0),localStorage.setItem("suggestionSubmitted","true"),window.dispatchEvent(new CustomEvent("suggestionSubmittedImmediate"))}catch(t){console.error("Error submitting suggestion:",t),te("Failed to submit suggestion"),re("error"),$(!0)}finally{_(!1)}},disabled:W||!q.trim()||!J.trim()||!Q,sx:{alignSelf:"flex-start"},children:W?"Submitting...":"Submit Suggestion"})]})]}),(0,X.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Community Suggestions"}),R?(0,X.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,X.jsx)(A.A,{})}):0===t.length?(0,X.jsx)(l.A,{sx:{p:4,textAlign:"center"},children:(0,X.jsx)(i.A,{variant:"body1",color:"text.secondary",children:"No suggestions yet. Be the first to share your ideas!"})}):(0,X.jsx)(g.A,{sx:{bgcolor:"background.paper",borderRadius:1},children:t.map(((s,r)=>(0,X.jsxs)(a.Fragment,{children:[(0,X.jsxs)(f.Ay,{alignItems:"flex-start",sx:{py:2},children:[(0,X.jsx)(v.A,{children:(0,X.jsx)(p.A,{src:s.authorAvatar,alt:s.authorName,children:s.authorName.charAt(0).toUpperCase()})}),(0,X.jsx)(y.A,{primary:(0,X.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,X.jsx)(i.A,{variant:"h6",component:"span",children:s.title}),(0,X.jsx)(j.A,{label:s.category,size:"small",variant:"outlined"}),(0,X.jsx)(j.A,{label:s.status.replace("_"," "),size:"small",color:le[s.status]})]}),secondary:(0,X.jsxs)(o.A,{children:[(0,X.jsx)(i.A,{variant:"body2",color:"text.primary",sx:{mb:1},children:s.description}),(0,X.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,X.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,X.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:["By ",s.authorName," \u2022 ",s.createdAt&&(0,P.A)(s.createdAt.toDate(),{addSuffix:!0})]})}),(0,X.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,X.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(b.A,{size:"small",onClick:()=>ce(s.id,"upvote"),color:s.upvotes.includes((null===e||void 0===e?void 0:e.uid)||"")?"primary":"default",disabled:!e,children:(0,X.jsx)(k.A,{fontSize:"small"})}),(0,X.jsx)(i.A,{variant:"caption",children:s.upvotes.length})]}),(0,X.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(b.A,{size:"small",onClick:()=>ce(s.id,"downvote"),color:s.downvotes.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"default",disabled:!e,children:(0,X.jsx)(E,{fontSize:"small"})}),(0,X.jsx)(i.A,{variant:"caption",children:s.downvotes.length})]}),(null===e||void 0===e?void 0:e.uid)===s.authorId&&(0,X.jsx)(b.A,{size:"small",onClick:()=>{return e=s.id,ie(e),void ne(!0);var e},color:"error",children:(0,X.jsx)(H.A,{fontSize:"small"})})]})]})]})})]}),r<t.length-1&&(0,X.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider",mx:2}})]},s.id)))})]}),(0,X.jsxs)(S.A,{open:ae,onClose:()=>ne(!1),"aria-labelledby":"delete-dialog-title",children:[(0,X.jsx)(w.A,{id:"delete-dialog-title",children:"Delete Suggestion?"}),(0,X.jsx)(D.A,{children:(0,X.jsx)(C.A,{children:"Are you sure you want to delete this suggestion? This action cannot be undone."})}),(0,X.jsxs)(M.A,{children:[(0,X.jsx)(x.A,{onClick:()=>ne(!1),children:"Cancel"}),(0,X.jsx)(x.A,{onClick:async()=>{if(oe&&e)try{await(0,B.kd)((0,B.H9)(L.db,"suggestions",oe)),te("Suggestion deleted successfully"),re("success"),$(!0)}catch(t){console.error("Error deleting suggestion:",t),te("Failed to delete suggestion"),re("error"),$(!0)}finally{ne(!1),ie(null)}},color:"error",variant:"contained",children:"Delete"})]})]}),(0,X.jsx)(I.A,{open:K,autoHideDuration:4e3,onClose:()=>$(!1),children:(0,X.jsx)(z.A,{onClose:()=>$(!1),severity:se,sx:{width:"100%"},children:ee})})]})}},1673:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(3235),a=s(4414);const n=(0,r.A)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},2750:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(3235),a=s(4414);const n=(0,r.A)((0,a.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp")},6493:(e,t,s)=>{s.d(t,{A:()=>v});var r=s(8587),a=s(8168),n=s(9950),o=s(2004),i=s(8465),l=s(9254),c=s(9608),d=s(8463),u=s(2053),m=s(1763),h=s(423);function x(e){return(0,h.Ay)("MuiDialogContentText",e)}(0,m.A)("MuiDialogContentText",["root"]);var A=s(4414);const g=["children","className"],f=(0,l.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v=n.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:n}=s,l=(0,r.A)(s,g),c=(e=>{const{classes:t}=e,s=(0,i.A)({root:["root"]},x,t);return(0,a.A)({},t,s)})(l);return(0,A.jsx)(f,(0,a.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,o.A)(c.root,n)},s,{classes:c}))}))},7081:(e,t,s)=>{s.d(t,{A:()=>f});var r=s(3840),a=s(7476),n=s(2588),o=s(4369),i=s(6792),l=s(8889),c=s(4388);var d=s(2434),u=s(8397),m=1440,h=2520,x=43200,A=86400;function g(e,t,s){var g,f;(0,u.A)(2,arguments);var v=(0,r.q)(),p=null!==(g=null!==(f=null===s||void 0===s?void 0:s.locale)&&void 0!==f?f:v.locale)&&void 0!==g?g:i.A;if(!p.formatDistance)throw new RangeError("locale must contain formatDistance property");var y=(0,a.A)(e,t);if(isNaN(y))throw new RangeError("Invalid time value");var j,b,S,w=(0,c.A)((j=s,(0,c.A)({},j)),{addSuffix:Boolean(null===s||void 0===s?void 0:s.addSuffix),comparison:y});y>0?(b=(0,l.A)(t),S=(0,l.A)(e)):(b=(0,l.A)(e),S=(0,l.A)(t));var D,C=(0,o.A)(S,b),M=((0,d.A)(S)-(0,d.A)(b))/1e3,I=Math.round((C-M)/60);if(I<2)return null!==s&&void 0!==s&&s.includeSeconds?C<5?p.formatDistance("lessThanXSeconds",5,w):C<10?p.formatDistance("lessThanXSeconds",10,w):C<20?p.formatDistance("lessThanXSeconds",20,w):C<40?p.formatDistance("halfAMinute",0,w):C<60?p.formatDistance("lessThanXMinutes",1,w):p.formatDistance("xMinutes",1,w):0===I?p.formatDistance("lessThanXMinutes",1,w):p.formatDistance("xMinutes",I,w);if(I<45)return p.formatDistance("xMinutes",I,w);if(I<90)return p.formatDistance("aboutXHours",1,w);if(I<m){var z=Math.round(I/60);return p.formatDistance("aboutXHours",z,w)}if(I<h)return p.formatDistance("xDays",1,w);if(I<x){var N=Math.round(I/m);return p.formatDistance("xDays",N,w)}if(I<A)return D=Math.round(I/x),p.formatDistance("aboutXMonths",D,w);if((D=(0,n.A)(S,b))<12){var T=Math.round(I/x);return p.formatDistance("xMonths",T,w)}var k=D%12,R=Math.floor(D/12);return k<3?p.formatDistance("aboutXYears",R,w):k<9?p.formatDistance("overXYears",R,w):p.formatDistance("almostXYears",R+1,w)}function f(e,t){return(0,u.A)(1,arguments),g(e,Date.now(),t)}},8614:(e,t,s)=>{s.d(t,{A:()=>f});var r=s(8587),a=s(8168),n=s(9950),o=s(2004),i=s(8465),l=s(3372),c=s(9254),d=s(8463),u=s(1763),m=s(423);function h(e){return(0,m.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var x=s(4414);const A=["className"],g=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,"flex-start"===s.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,a.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),f=n.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:c}=s,u=(0,r.A)(s,A),m=n.useContext(l.A),f=(0,a.A)({},s,{alignItems:m.alignItems}),v=(e=>{const{alignItems:t,classes:s}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(r,h,s)})(f);return(0,x.jsx)(g,(0,a.A)({className:(0,o.A)(v.root,c),ownerState:f,ref:t},u))}))}}]);