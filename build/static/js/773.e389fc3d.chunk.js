"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[773],{675:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(3235),r=a(4414);const s=(0,n.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn")},3182:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(3235),r=a(4414);const s=(0,n.A)((0,r.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance")},3759:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(3235),r=a(4414);const s=(0,n.A)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},5773:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Pe});var n=a(9379),r=a(45),s=a(9950),o=a(6491),i=a(9808),l=a(3174),c=a(6639),d=a(2053),h=a(226),x=a(899),m=a(470),p=a(704),A=a(2235),u=a(2236),j=a(4142),y=a(5979),v=a(3788),g=a(6101),b=a(3266),f=a(8168),w=a(8587),C=a(2004),k=a(8465),S=a(8463),R=a(9254),D=a(1763),T=a(423);function I(e){return(0,T.Ay)("MuiTableContainer",e)}(0,D.A)("MuiTableContainer",["root"]);var z=a(4414);const M=["className","component"],N=(0,R.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),H=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTableContainer"}),{className:n,component:r="div"}=a,s=(0,w.A)(a,M),o=(0,f.A)({},a,{component:r}),i=(e=>{const{classes:t}=e;return(0,k.A)({root:["root"]},I,t)})(o);return(0,z.jsx)(N,(0,f.A)({ref:t,as:r,className:(0,C.A)(i.root,n),ownerState:o},s))}));const W=s.createContext();function F(e){return(0,T.Ay)("MuiTable",e)}(0,D.A)("MuiTable",["root","stickyHeader"]);const P=["className","component","padding","size","stickyHeader"],B=(0,R.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})((e=>{let{theme:t,ownerState:a}=e;return(0,f.A)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,f.A)({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})})),E="table",O=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTable"}),{className:n,component:r=E,padding:o="normal",size:i="medium",stickyHeader:l=!1}=a,c=(0,w.A)(a,P),d=(0,f.A)({},a,{component:r,padding:o,size:i,stickyHeader:l}),h=(e=>{const{classes:t,stickyHeader:a}=e,n={root:["root",a&&"stickyHeader"]};return(0,k.A)(n,F,t)})(d),x=s.useMemo((()=>({padding:o,size:i,stickyHeader:l})),[o,i,l]);return(0,z.jsx)(W.Provider,{value:x,children:(0,z.jsx)(B,(0,f.A)({as:r,role:r===E?null:"table",ref:t,className:(0,C.A)(h.root,n),ownerState:d},c))})}));const U=s.createContext();function q(e){return(0,T.Ay)("MuiTableHead",e)}(0,D.A)("MuiTableHead",["root"]);const L=["className","component"],V=(0,R.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),X={variant:"head"},G="thead",J=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTableHead"}),{className:n,component:r=G}=a,s=(0,w.A)(a,L),o=(0,f.A)({},a,{component:r}),i=(e=>{const{classes:t}=e;return(0,k.A)({root:["root"]},q,t)})(o);return(0,z.jsx)(U.Provider,{value:X,children:(0,z.jsx)(V,(0,f.A)({as:r,className:(0,C.A)(i.root,n),ref:t,role:r===G?null:"rowgroup",ownerState:o},s))})}));var _=a(9269);function $(e){return(0,T.Ay)("MuiTableRow",e)}const K=(0,D.A)("MuiTableRow",["root","selected","hover","head","footer"]),Q=["className","component","hover","selected"],Y=(0,R.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(K.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(K.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,_.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,_.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}})),Z="tr",ee=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTableRow"}),{className:n,component:r=Z,hover:o=!1,selected:i=!1}=a,l=(0,w.A)(a,Q),c=s.useContext(U),d=(0,f.A)({},a,{component:r,hover:o,selected:i,head:c&&"head"===c.variant,footer:c&&"footer"===c.variant}),h=(e=>{const{classes:t,selected:a,hover:n,head:r,footer:s}=e,o={root:["root",a&&"selected",n&&"hover",r&&"head",s&&"footer"]};return(0,k.A)(o,$,t)})(d);return(0,z.jsx)(Y,(0,f.A)({as:r,ref:t,className:(0,C.A)(h.root,n),role:r===Z?null:"row",ownerState:d},l))})),te=ee;var ae=a(1676);function ne(e){return(0,T.Ay)("MuiTableCell",e)}const re=(0,D.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),se=["align","className","component","padding","scope","size","sortDirection","variant"],oe=(0,R.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,ae.A)(a.size))],"normal"!==a.padding&&t["padding".concat((0,ae.A)(a.padding))],"inherit"!==a.align&&t["align".concat((0,ae.A)(a.align))],a.stickyHeader&&t.stickyHeader]}})((e=>{let{theme:t,ownerState:a}=e;return(0,f.A)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?(0,_.a)((0,_.X4)(t.palette.divider,1),.88):(0,_.e$)((0,_.X4)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===a.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===a.variant&&{color:(t.vars||t).palette.text.primary},"footer"===a.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===a.size&&{padding:"6px 16px",["&.".concat(re.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===a.padding&&{width:48,padding:"0 0 0 4px"},"none"===a.padding&&{padding:0},"left"===a.align&&{textAlign:"left"},"center"===a.align&&{textAlign:"center"},"right"===a.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===a.align&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),ie=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTableCell"}),{align:n="inherit",className:r,component:o,padding:i,scope:l,size:c,sortDirection:d,variant:h}=a,x=(0,w.A)(a,se),m=s.useContext(W),p=s.useContext(U),A=p&&"head"===p.variant;let u;u=o||(A?"th":"td");let j=l;"td"===u?j=void 0:!j&&A&&(j="col");const y=h||p&&p.variant,v=(0,f.A)({},a,{align:n,component:u,padding:i||(m&&m.padding?m.padding:"normal"),size:c||(m&&m.size?m.size:"medium"),sortDirection:d,stickyHeader:"head"===y&&m&&m.stickyHeader,variant:y}),g=(e=>{const{classes:t,variant:a,align:n,padding:r,size:s,stickyHeader:o}=e,i={root:["root",a,o&&"stickyHeader","inherit"!==n&&"align".concat((0,ae.A)(n)),"normal"!==r&&"padding".concat((0,ae.A)(r)),"size".concat((0,ae.A)(s))]};return(0,k.A)(i,ne,t)})(v);let b=null;return d&&(b="asc"===d?"ascending":"descending"),(0,z.jsx)(oe,(0,f.A)({as:u,ref:t,className:(0,C.A)(g.root,r),"aria-sort":b,scope:j,ownerState:v},x))})),le=ie;function ce(e){return(0,T.Ay)("MuiTableBody",e)}(0,D.A)("MuiTableBody",["root"]);const de=["className","component"],he=(0,R.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),xe={variant:"body"},me="tbody",pe=s.forwardRef((function(e,t){const a=(0,S.b)({props:e,name:"MuiTableBody"}),{className:n,component:r=me}=a,s=(0,w.A)(a,de),o=(0,f.A)({},a,{component:r}),i=(e=>{const{classes:t}=e;return(0,k.A)({root:["root"]},ce,t)})(o);return(0,z.jsx)(U.Provider,{value:xe,children:(0,z.jsx)(he,(0,f.A)({className:(0,C.A)(i.root,n),as:r,ref:t,role:r===me?null:"rowgroup",ownerState:o},s))})}));var Ae=a(5277),ue=a(3274),je=a(5333),ye=a(6583),ve=a(33),ge=a(8170),be=a(8145),fe=a(9739),we=a(3235);const Ce=(0,we.A)((0,z.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var ke=a(675),Se=a(3182),Re=a(6299),De=a(8179);const Te=(0,we.A)((0,z.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var Ie=a(6835),ze=a(3759),Me=a(1367),Ne=a(5887),He=a(2856);const We=["children","value","index"];function Fe(e){const{children:t,value:a,index:s}=e,i=(0,r.A)(e,We);return(0,z.jsx)("div",(0,n.A)((0,n.A)({role:"tabpanel",hidden:a!==s,id:"admin-tabpanel-".concat(s),"aria-labelledby":"admin-tab-".concat(s)},i),{},{children:a===s&&(0,z.jsx)(o.A,{sx:{p:3},children:t})}))}const Pe=()=>{const{currentUser:e}=(0,Me.As)(),[t,a]=(0,s.useState)(0),[r,f]=(0,s.useState)([]),[w,C]=(0,s.useState)([]),[k,S]=(0,s.useState)(!0),[R,D]=(0,s.useState)(null),[T,I]=(0,s.useState)(!1),[M,N]=(0,s.useState)(""),[W,F]=(0,s.useState)(""),[P,B]=(0,s.useState)(!1),[E,U]=(0,s.useState)("all"),[q,L]=(0,s.useState)({totalWithdrawals:0,totalPlatformFees:0,pendingWithdrawals:0,completedWithdrawals:0,totalUsers:0}),V="contact@sideeye.uk"===(null===e||void 0===e?void 0:e.email)||"enochaseks@yahoo.co.uk"===(null===e||void 0===e?void 0:e.email);(0,s.useEffect)((()=>{V?X():Ne.oR.error("Access denied. Admin privileges required.")}),[V]);const X=async()=>{S(!0);try{await Promise.all([G(),_(),$()])}catch(e){console.error("Error loading admin data:",e),Ne.oR.error("Failed to load admin data")}finally{S(!1)}},G=async()=>{try{const t=await(null===e||void 0===e?void 0:e.getIdToken()),a=await fetch("/api/admin/withdrawal-requests?limit=100",{headers:{Authorization:"Bearer ".concat(t)}}),r=await a.json();r.success&&f(r.withdrawals.map((e=>(0,n.A)((0,n.A)({},e),{},{requestDate:new Date(e.requestDate),processedDate:e.processedDate?new Date(e.processedDate):void 0}))))}catch(t){console.error("Error loading withdrawals:",t)}},_=async()=>{try{const t=await(null===e||void 0===e?void 0:e.getIdToken()),a=await fetch("/api/admin/platform-fees?limit=100",{headers:{Authorization:"Bearer ".concat(t)}}),r=await a.json();r.fees&&(C(r.fees.map((e=>(0,n.A)((0,n.A)({},e),{},{timestamp:new Date(e.timestamp)})))),L((e=>(0,n.A)((0,n.A)({},e),{},{totalPlatformFees:parseFloat(r.analytics.totalFees)}))))}catch(t){console.error("Error loading platform fees:",t)}},$=async()=>{try{const e=r.reduce(((e,t)=>e+t.moneyAmount),0),t=r.filter((e=>"pending"===e.status)).length,a=r.filter((e=>"completed"===e.status)).length;L((s=>(0,n.A)((0,n.A)({},s),{},{totalWithdrawals:e,pendingWithdrawals:t,completedWithdrawals:a,totalUsers:new Set(r.map((e=>e.userId))).size})))}catch(e){console.error("Error calculating analytics:",e)}},K=async(t,a)=>{B(!0);try{const n=await(null===e||void 0===e?void 0:e.getIdToken()),r=await fetch("/api/admin/withdrawal-requests/".concat(t,"/update-status"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({status:"approve"===a?"approved":"reject"===a?"rejected":"completed",adminNotes:M,bankTransactionId:"complete"===a?W:void 0})}),s=await r.json();s.success?(Ne.oR.success("Withdrawal ".concat(a,"d successfully")),I(!1),N(""),F(""),G()):Ne.oR.error(s.error||"Failed to ".concat(a," withdrawal"))}catch(n){console.error("Error ".concat(a,"ing withdrawal:"),n),Ne.oR.error("Failed to ".concat(a," withdrawal"))}finally{B(!1)}},Q=e=>{const t="withdrawals"===e?"ID,User,Email,Amount SC,Amount GBP,Platform Fee,Status,Request Date,Processed Date\n"+r.map((e=>{var t;return"".concat(e.id,",").concat(e.userName,",").concat(e.userEmail,",").concat(e.amount,",").concat(e.moneyAmount,",").concat(e.platformFee,",").concat(e.status,",").concat(e.requestDate.toISOString(),",").concat((null===(t=e.processedDate)||void 0===t?void 0:t.toISOString())||"")})).join("\n"):"ID,Amount,Currency,Gift ID,Payment ID,Status,Timestamp\n"+w.map((e=>"".concat(e.id,",").concat(e.amount,",").concat(e.currency,",").concat(e.giftId,",").concat(e.paymentId,",").concat(e.transferStatus,",").concat(e.timestamp.toISOString()))).join("\n"),a=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(a),s=document.createElement("a");s.href=n,s.download="".concat(e,"-").concat((new Date).toISOString().split("T")[0],".csv"),s.click(),window.URL.revokeObjectURL(n)},Y="all"===E?r:r.filter((e=>e.status===E));return V?k?(0,z.jsx)(i.A,{maxWidth:"lg",sx:{py:4},children:(0,z.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,z.jsx)(c.A,{})})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(He.mg,{children:[(0,z.jsx)("title",{children:"Admin Dashboard - SideEye"}),(0,z.jsx)("meta",{name:"description",content:"Admin dashboard for managing withdrawals and platform fees"})]}),(0,z.jsxs)(i.A,{maxWidth:"lg",sx:{py:4},children:[(0,z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,z.jsx)(d.A,{variant:"h4",component:"h1",children:"Admin Dashboard"}),(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(Ce,{}),onClick:X,children:"Refresh Data"})]}),(0,z.jsxs)(x.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,z.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,z.jsx)(m.A,{children:(0,z.jsx)(p.A,{children:(0,z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(ke.A,{color:"primary"}),(0,z.jsxs)(o.A,{children:[(0,z.jsxs)(d.A,{variant:"h4",fontWeight:"bold",children:["\xa3",q.totalPlatformFees.toFixed(2)]}),(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Total Platform Fees"})]})]})})})}),(0,z.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,z.jsx)(m.A,{children:(0,z.jsx)(p.A,{children:(0,z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(Se.A,{color:"success"}),(0,z.jsxs)(o.A,{children:[(0,z.jsxs)(d.A,{variant:"h4",fontWeight:"bold",children:["\xa3",q.totalWithdrawals.toFixed(2)]}),(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Total Withdrawals"})]})]})})})}),(0,z.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,z.jsx)(m.A,{children:(0,z.jsx)(p.A,{children:(0,z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(Re.A,{color:"warning"}),(0,z.jsxs)(o.A,{children:[(0,z.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:q.pendingWithdrawals}),(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Pending Withdrawals"})]})]})})})}),(0,z.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,z.jsx)(m.A,{children:(0,z.jsx)(p.A,{children:(0,z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,z.jsx)(De.A,{color:"info"}),(0,z.jsxs)(o.A,{children:[(0,z.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:q.totalUsers}),(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Active Users"})]})]})})})})]}),(0,z.jsx)(A.A,{sx:{mb:3},children:(0,z.jsxs)(u.A,{value:t,onChange:(e,t)=>a(t),children:[(0,z.jsx)(j.A,{label:"Withdrawal Requests"}),(0,z.jsx)(j.A,{label:"Platform Fees"})]})}),(0,z.jsxs)(Fe,{value:t,index:0,children:[(0,z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,z.jsx)(d.A,{variant:"h5",children:"Withdrawal Requests"}),(0,z.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,z.jsxs)(y.A,{size:"small",sx:{minWidth:120},children:[(0,z.jsx)(v.A,{children:"Status"}),(0,z.jsxs)(g.A,{value:E,onChange:e=>U(e.target.value),label:"Status",children:[(0,z.jsx)(b.A,{value:"all",children:"All"}),(0,z.jsx)(b.A,{value:"pending",children:"Pending"}),(0,z.jsx)(b.A,{value:"approved",children:"Approved"}),(0,z.jsx)(b.A,{value:"completed",children:"Completed"}),(0,z.jsx)(b.A,{value:"rejected",children:"Rejected"})]})]}),(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(Te,{}),onClick:()=>Q("withdrawals"),children:"Export CSV"})]})]}),(0,z.jsx)(H,{component:A.A,children:(0,z.jsxs)(O,{children:[(0,z.jsx)(J,{children:(0,z.jsxs)(te,{children:[(0,z.jsx)(le,{children:"User"}),(0,z.jsx)(le,{children:"Amount"}),(0,z.jsx)(le,{children:"Platform Fee"}),(0,z.jsx)(le,{children:"Net Amount"}),(0,z.jsx)(le,{children:"Status"}),(0,z.jsx)(le,{children:"Request Date"}),(0,z.jsx)(le,{children:"Actions"})]})}),(0,z.jsx)(pe,{children:Y.map((e=>(0,z.jsxs)(te,{children:[(0,z.jsx)(le,{children:(0,z.jsxs)(o.A,{children:[(0,z.jsx)(d.A,{variant:"body2",fontWeight:"bold",children:e.userName}),(0,z.jsx)(d.A,{variant:"caption",color:"text.secondary",children:e.userEmail})]})}),(0,z.jsxs)(le,{children:[e.amount," SC"]}),(0,z.jsxs)(le,{children:["\xa3",e.platformFee.toFixed(2)]}),(0,z.jsxs)(le,{children:["\xa3",e.moneyAmount.toFixed(2)]}),(0,z.jsx)(le,{children:(0,z.jsx)(Ae.A,{label:e.status.toUpperCase(),color:"completed"===e.status?"success":"approved"===e.status?"info":"rejected"===e.status?"error":"default",size:"small"})}),(0,z.jsx)(le,{children:e.requestDate.toLocaleDateString()}),(0,z.jsx)(le,{children:(0,z.jsx)(ue.A,{title:"View Details",children:(0,z.jsx)(je.A,{size:"small",onClick:()=>(e=>{D(e),N(e.adminNotes||""),F(e.bankTransactionId||""),I(!0)})(e),children:(0,z.jsx)(De.A,{})})})})]},e.id)))})]})})]}),(0,z.jsxs)(Fe,{value:t,index:1,children:[(0,z.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,z.jsx)(d.A,{variant:"h5",children:"Platform Fees"}),(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(Te,{}),onClick:()=>Q("fees"),children:"Export CSV"})]}),(0,z.jsx)(H,{component:A.A,children:(0,z.jsxs)(O,{children:[(0,z.jsx)(J,{children:(0,z.jsxs)(te,{children:[(0,z.jsx)(le,{children:"Amount"}),(0,z.jsx)(le,{children:"Gift ID"}),(0,z.jsx)(le,{children:"Payment ID"}),(0,z.jsx)(le,{children:"Transfer Status"}),(0,z.jsx)(le,{children:"Date"})]})}),(0,z.jsx)(pe,{children:w.map((e=>(0,z.jsxs)(te,{children:[(0,z.jsxs)(le,{children:["\xa3",e.amount.toFixed(2)]}),(0,z.jsx)(le,{children:e.giftId}),(0,z.jsx)(le,{children:(0,z.jsx)(d.A,{variant:"caption",sx:{fontFamily:"monospace"},children:e.paymentId})}),(0,z.jsx)(le,{children:(0,z.jsx)(Ae.A,{label:e.transferStatus.toUpperCase(),color:"completed"===e.transferStatus?"success":"failed"===e.transferStatus?"error":"default",size:"small"})}),(0,z.jsx)(le,{children:e.timestamp.toLocaleDateString()})]},e.id)))})]})})]}),(0,z.jsxs)(ye.A,{open:T,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:[(0,z.jsx)(ve.A,{children:"Withdrawal Request Details"}),(0,z.jsx)(ge.A,{children:R&&(0,z.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(A.A,{elevation:1,sx:{p:2},children:[(0,z.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"User Information"}),(0,z.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Name"}),(0,z.jsx)(d.A,{variant:"body1",children:R.userName})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Email"}),(0,z.jsx)(d.A,{variant:"body1",children:R.userEmail})]})]})]}),(0,z.jsxs)(A.A,{elevation:1,sx:{p:2},children:[(0,z.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Withdrawal Details"}),(0,z.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Amount (SC)"}),(0,z.jsxs)(d.A,{variant:"body1",children:[R.amount," SC"]})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Gross Amount"}),(0,z.jsxs)(d.A,{variant:"body1",children:["\xa3",R.grossAmount.toFixed(2)]})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Platform Fee (10%)"}),(0,z.jsxs)(d.A,{variant:"body1",children:["\xa3",R.platformFee.toFixed(2)]})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Net Amount"}),(0,z.jsxs)(d.A,{variant:"body1",fontWeight:"bold",children:["\xa3",R.moneyAmount.toFixed(2)]})]})]})]}),R.bankDetails&&(0,z.jsxs)(A.A,{elevation:1,sx:{p:2},children:[(0,z.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Bank Details"}),(0,z.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Account Name"}),(0,z.jsx)(d.A,{variant:"body1",children:R.bankDetails.accountName})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Bank Name"}),(0,z.jsx)(d.A,{variant:"body1",children:R.bankDetails.bankName})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Account Number"}),(0,z.jsx)(d.A,{variant:"body1",children:R.bankDetails.accountNumber})]}),(0,z.jsxs)(x.Ay,{item:!0,xs:6,children:[(0,z.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Sort Code"}),(0,z.jsx)(d.A,{variant:"body1",children:R.bankDetails.sortCode})]})]})]}),(0,z.jsxs)(A.A,{elevation:1,sx:{p:2},children:[(0,z.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Admin Actions"}),(0,z.jsx)(be.A,{fullWidth:!0,label:"Admin Notes",multiline:!0,rows:3,value:M,onChange:e=>N(e.target.value),sx:{mb:2}}),"approved"===R.status&&(0,z.jsx)(be.A,{fullWidth:!0,label:"Bank Transaction ID",value:W,onChange:e=>F(e.target.value),sx:{mb:2},placeholder:"Enter bank transaction reference"})]})]})}),(0,z.jsxs)(fe.A,{children:[(0,z.jsx)(h.A,{onClick:()=>I(!1),children:"Close"}),"pending"===(null===R||void 0===R?void 0:R.status)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.A,{color:"error",startIcon:(0,z.jsx)(Ie.A,{}),onClick:()=>K(R.id,"reject"),disabled:P,children:"Reject"}),(0,z.jsx)(h.A,{color:"success",startIcon:(0,z.jsx)(ze.A,{}),onClick:()=>K(R.id,"approve"),disabled:P,children:"Approve"})]}),"approved"===(null===R||void 0===R?void 0:R.status)&&(0,z.jsx)(h.A,{color:"primary",startIcon:(0,z.jsx)(ze.A,{}),onClick:()=>K(R.id,"complete"),disabled:P||!W,children:"Mark as Completed"})]})]})]})]}):(0,z.jsx)(i.A,{maxWidth:"md",sx:{py:4},children:(0,z.jsx)(l.A,{severity:"error",children:"Access denied. Admin privileges required to view this page."})})}}}]);