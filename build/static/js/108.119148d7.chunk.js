/*! For license information please see 108.119148d7.chunk.js.LICENSE.txt */
(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[108],{18:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},227:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},361:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp")},379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},492:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp")},529:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},760:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},937:(e,t,n)=>{"use strict";function i(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var s=t.schedule((function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(s),!r)return s}n.d(t,{N:()=>i})},1190:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var i=n(1732);function r(e){return function(t){if(function(e){return(0,i.T)(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}},1300:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette")},1311:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)([(0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,r.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")},1397:function(e,t,n){var i;e=n.nmd(e),function(){var r,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",u],["rearg",h]],b="[object Arguments]",y="[object Array]",w="[object Boolean]",S="[object Date]",C="[object Error]",k="[object Function]",T="[object GeneratorFunction]",_="[object Map]",E="[object Number]",R="[object Object]",A="[object Promise]",I="[object RegExp]",x="[object Set]",P="[object String]",O="[object Symbol]",N="[object WeakMap]",D="[object ArrayBuffer]",j="[object DataView]",L="[object Float32Array]",U="[object Float64Array]",M="[object Int8Array]",F="[object Int16Array]",V="[object Int32Array]",B="[object Uint8Array]",H="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",q=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Y=RegExp(G.source),X=RegExp(K.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,se=RegExp(re.source),oe=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ce=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['\u2019]",Oe="["+Te+"]",Ne="["+xe+"]",De="["+_e+"]",je="\\d+",Le="["+Ee+"]",Ue="["+Re+"]",Me="[^"+Te+xe+je+Ee+Re+Ae+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ve="[^"+Te+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Ae+"]",We="\\u200d",qe="(?:"+Ue+"|"+Me+")",$e="(?:"+ze+"|"+Me+")",Je="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ge="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+De+"|"+Fe+")"+"?",Ye="["+Ie+"]?",Xe=Ye+Ke+("(?:"+We+"(?:"+[Ve,Be,He].join("|")+")"+Ye+Ke+")*"),Ze="(?:"+[Le,Be,He].join("|")+")"+Xe,Qe="(?:"+[Ve+De+"?",De,Be,He,Oe].join("|")+")",et=RegExp(Pe,"g"),tt=RegExp(De,"g"),nt=RegExp(Fe+"(?="+Fe+")|"+Qe+Xe,"g"),it=RegExp([ze+"?"+Ue+"+"+Je+"(?="+[Ne,ze,"$"].join("|")+")",$e+"+"+Ge+"(?="+[Ne,ze+qe,"$"].join("|")+")",ze+"?"+qe+"+"+Je,ze+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",je,Ze].join("|"),"g"),rt=RegExp("["+We+Te+_e+Ie+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ct={};ct[L]=ct[U]=ct[M]=ct[F]=ct[V]=ct[B]=ct[H]=ct[z]=ct[W]=!0,ct[b]=ct[y]=ct[D]=ct[w]=ct[j]=ct[S]=ct[C]=ct[k]=ct[_]=ct[E]=ct[R]=ct[I]=ct[x]=ct[P]=ct[N]=!1;var lt={};lt[b]=lt[y]=lt[D]=lt[j]=lt[w]=lt[S]=lt[L]=lt[U]=lt[M]=lt[F]=lt[V]=lt[_]=lt[E]=lt[R]=lt[I]=lt[x]=lt[P]=lt[O]=lt[B]=lt[H]=lt[z]=lt[W]=!0,lt[C]=lt[k]=lt[N]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,bt=vt&&vt.exports===gt,yt=bt&&pt.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),St=wt&&wt.isArrayBuffer,Ct=wt&&wt.isDate,kt=wt&&wt.isMap,Tt=wt&&wt.isRegExp,_t=wt&&wt.isSet,Et=wt&&wt.isTypedArray;function Rt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function At(e,t,n,i){for(var r=-1,s=null==e?0:e.length;++r<s;){var o=e[r];t(i,o,n(o),e)}return i}function It(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}function Nt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Dt(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function jt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Lt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function Ut(e,t,n,i){var r=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function Mt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Ft(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Vt=Jt("length");function Bt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function Ht(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function zt(e,t,n){return t===t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Ht(e,qt,n)}function Wt(e,t,n,i){for(var r=n-1,s=e.length;++r<s;)if(i(e[r],t))return r;return-1}function qt(e){return e!==e}function $t(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:m}function Jt(e){return function(t){return null==t?r:t[e]}}function Gt(e){return function(t){return null==e?r:e[t]}}function Kt(e,t,n,i,r){return r(e,(function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)})),n}function Yt(e,t){for(var n,i=-1,s=e.length;++i<s;){var o=t(e[i]);o!==r&&(n=n===r?o:n+o)}return n}function Xt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Zt(e){return e?e.slice(0,gn(e)+1).replace(oe,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return jt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,i=e.length;++n<i&&zt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&zt(t,e[n],0)>-1;);return n}var sn=Gt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ut[e]}function cn(e){return rt.test(e)}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var o=e[n];o!==t&&o!==a||(e[n]=a,s[r++]=n)}return s}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return cn(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Vt(e)}function mn(e){return cn(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bn=function e(t){var n=(t=null==t?mt:bn.defaults(mt.Object(),t,bn.pick(mt,ot))).Array,i=t.Date,ae=t.Error,Te=t.Function,_e=t.Math,Ee=t.Object,Re=t.RegExp,Ae=t.String,Ie=t.TypeError,xe=n.prototype,Pe=Te.prototype,Oe=Ee.prototype,Ne=t["__core-js_shared__"],De=Pe.toString,je=Oe.hasOwnProperty,Le=0,Ue=function(){var e=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Me=Oe.toString,Fe=De.call(Ee),Ve=mt._,Be=Re("^"+De.call(je).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=bt?t.Buffer:r,ze=t.Symbol,We=t.Uint8Array,qe=He?He.allocUnsafe:r,$e=un(Ee.getPrototypeOf,Ee),Je=Ee.create,Ge=Oe.propertyIsEnumerable,Ke=xe.splice,Ye=ze?ze.isConcatSpreadable:r,Xe=ze?ze.iterator:r,Ze=ze?ze.toStringTag:r,Qe=function(){try{var e=ds(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,rt=i&&i.now!==mt.Date.now&&i.now,ut=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=_e.ceil,ft=_e.floor,gt=Ee.getOwnPropertySymbols,vt=He?He.isBuffer:r,yt=t.isFinite,wt=xe.join,Vt=un(Ee.keys,Ee),Gt=_e.max,yn=_e.min,wn=i.now,Sn=t.parseInt,Cn=_e.random,kn=xe.reverse,Tn=ds(t,"DataView"),_n=ds(t,"Map"),En=ds(t,"Promise"),Rn=ds(t,"Set"),An=ds(t,"WeakMap"),In=ds(Ee,"create"),xn=An&&new An,Pn={},On=Us(Tn),Nn=Us(_n),Dn=Us(En),jn=Us(Rn),Ln=Us(An),Un=ze?ze.prototype:r,Mn=Un?Un.valueOf:r,Fn=Un?Un.toString:r;function Vn(e){if(ta(e)&&!Wo(e)&&!(e instanceof Wn)){if(e instanceof zn)return e;if(je.call(e,"__wrapped__"))return Ms(e)}return new zn(e)}var Bn=function(){function e(){}return function(t){if(!ea(t))return{};if(Je)return Je(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Hn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new $n(e);this.size=t.size}function Yn(e,t){var n=Wo(e),i=!n&&zo(e),r=!n&&!i&&Go(e),s=!n&&!i&&!r&&la(e),o=n||i||r||s,a=o?Xt(e.length,Ae):[],c=a.length;for(var l in e)!t&&!je.call(e,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bs(l,c))||a.push(l);return a}function Xn(e){var t=e.length;return t?e[Gi(0,t-1)]:r}function Zn(e,t){return Ds(Ir(e),ai(t,0,e.length))}function Qn(e){return Ds(Ir(e))}function ei(e,t,n){(n!==r&&!Vo(e[t],n)||n===r&&!(t in e))&&si(e,t,n)}function ti(e,t,n){var i=e[t];je.call(e,t)&&Vo(i,n)&&(n!==r||t in e)||si(e,t,n)}function ni(e,t){for(var n=e.length;n--;)if(Vo(e[n][0],t))return n;return-1}function ii(e,t,n,i){return hi(e,(function(e,r,s){t(i,e,n(e),s)})),i}function ri(e,t){return e&&xr(t,Pa(t),e)}function si(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function oi(e,t){for(var i=-1,s=t.length,o=n(s),a=null==e;++i<s;)o[i]=a?r:Ea(e,t[i]);return o}function ai(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ci(e,t,n,i,s,o){var a,c=1&t,l=2&t,u=4&t;if(n&&(a=s?n(e,i,s,o):n(e)),a!==r)return a;if(!ea(e))return e;var d=Wo(e);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&je.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Ir(e,a)}else{var h=fs(e),p=h==k||h==T;if(Go(e))return kr(e,c);if(h==R||h==b||p&&!s){if(a=l||p?{}:gs(e),!c)return l?function(e,t){return xr(e,ps(e),t)}(e,function(e,t){return e&&xr(t,Oa(t),e)}(a,e)):function(e,t){return xr(e,hs(e),t)}(e,ri(a,e))}else{if(!lt[h])return s?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case D:return Tr(e);case w:case S:return new i(+e);case j:return function(e,t){var n=t?Tr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case U:case M:case F:case V:case B:case H:case z:case W:return _r(e,n);case _:return new i;case E:case P:return new i(e);case I:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case x:return new i;case O:return r=e,Mn?Ee(Mn.call(r)):{}}var r}(e,h,c)}}o||(o=new Kn);var f=o.get(e);if(f)return f;o.set(e,a),oa(e)?e.forEach((function(i){a.add(ci(i,t,n,i,e,o))})):na(e)&&e.forEach((function(i,r){a.set(r,ci(i,t,n,r,e,o))}));var m=d?r:(u?l?rs:is:l?Oa:Pa)(e);return It(m||e,(function(i,r){m&&(i=e[r=i]),ti(a,r,ci(i,t,n,r,e,o))})),a}function li(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ee(e);i--;){var s=n[i],o=t[s],a=e[s];if(a===r&&!(s in e)||!o(a))return!1}return!0}function ui(e,t,n){if("function"!=typeof e)throw new Ie(s);return xs((function(){e.apply(r,n)}),t)}function di(e,t,n,i){var r=-1,s=Nt,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=jt(t,Qt(n))),i?(s=Dt,o=!1):t.length>=200&&(s=tn,o=!1,t=new Gn(t));e:for(;++r<a;){var u=e[r],d=null==n?u:n(u);if(u=i||0!==u?u:0,o&&d===d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(u)}else s(t,d,i)||c.push(u)}return c}Vn.templateSettings={escape:Z,evaluate:Q,interpolate:ee,variable:"",imports:{_:Vn}},Vn.prototype=Hn.prototype,Vn.prototype.constructor=Vn,zn.prototype=Bn(Hn.prototype),zn.prototype.constructor=zn,Wn.prototype=Bn(Hn.prototype),Wn.prototype.constructor=Wn,qn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===o?r:n}return je.call(t,e)?t[e]:r},qn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==r:je.call(t,e)},qn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===r?o:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=ni(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},$n.prototype.get=function(e){var t=this.__data__,n=ni(t,e);return n<0?r:t[n][1]},$n.prototype.has=function(e){return ni(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,i=ni(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(_n||$n),string:new qn}},Jn.prototype.delete=function(e){var t=ls(this,e).delete(e);return this.size-=t?1:0,t},Jn.prototype.get=function(e){return ls(this,e).get(e)},Jn.prototype.has=function(e){return ls(this,e).has(e)},Jn.prototype.set=function(e,t){var n=ls(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(e){return this.__data__.set(e,o),this},Gn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new $n,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var i=n.__data__;if(!_n||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jn(i)}return n.set(e,t),this.size=n.size,this};var hi=Nr(wi),pi=Nr(Si,!0);function fi(e,t){var n=!0;return hi(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function mi(e,t,n){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=t(o);if(null!=a&&(c===r?a===a&&!ca(a):n(a,c)))var c=a,l=o}return l}function gi(e,t){var n=[];return hi(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function vi(e,t,n,i,r){var s=-1,o=e.length;for(n||(n=vs),r||(r=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?vi(a,t-1,n,i,r):Lt(r,a):i||(r[r.length]=a)}return r}var bi=Dr(),yi=Dr(!0);function wi(e,t){return e&&bi(e,t,Pa)}function Si(e,t){return e&&yi(e,t,Pa)}function Ci(e,t){return Ot(t,(function(t){return Xo(e[t])}))}function ki(e,t){for(var n=0,i=(t=yr(t,e)).length;null!=e&&n<i;)e=e[Ls(t[n++])];return n&&n==i?e:r}function Ti(e,t,n){var i=t(e);return Wo(e)?i:Lt(i,n(e))}function _i(e){return null==e?e===r?"[object Undefined]":"[object Null]":Ze&&Ze in Ee(e)?function(e){var t=je.call(e,Ze),n=e[Ze];try{e[Ze]=r;var i=!0}catch(o){}var s=Me.call(e);i&&(t?e[Ze]=n:delete e[Ze]);return s}(e):function(e){return Me.call(e)}(e)}function Ei(e,t){return e>t}function Ri(e,t){return null!=e&&je.call(e,t)}function Ai(e,t){return null!=e&&t in Ee(e)}function Ii(e,t,i){for(var s=i?Dt:Nt,o=e[0].length,a=e.length,c=a,l=n(a),u=1/0,d=[];c--;){var h=e[c];c&&t&&(h=jt(h,Qt(t))),u=yn(h.length,u),l[c]=!i&&(t||o>=120&&h.length>=120)?new Gn(c&&h):r}h=e[0];var p=-1,f=l[0];e:for(;++p<o&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=i||0!==m?m:0,!(f?tn(f,g):s(d,g,i))){for(c=a;--c;){var v=l[c];if(!(v?tn(v,g):s(e[c],g,i)))continue e}f&&f.push(g),d.push(m)}}return d}function xi(e,t,n){var i=null==(e=Rs(e,t=yr(t,e)))?e:e[Ls(Ks(t))];return null==i?r:Rt(i,e,n)}function Pi(e){return ta(e)&&_i(e)==b}function Oi(e,t,n,i,s){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,i,s,o){var a=Wo(e),c=Wo(t),l=a?y:fs(e),u=c?y:fs(t),d=(l=l==b?R:l)==R,h=(u=u==b?R:u)==R,p=l==u;if(p&&Go(e)){if(!Go(t))return!1;a=!0,d=!1}if(p&&!d)return o||(o=new Kn),a||la(e)?ts(e,t,n,i,s,o):function(e,t,n,i,r,s,o){switch(n){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!s(new We(e),new We(t)));case w:case S:case E:return Vo(+e,+t);case C:return e.name==t.name&&e.message==t.message;case I:case P:return e==t+"";case _:var a=ln;case x:var c=1&i;if(a||(a=hn),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;i|=2,o.set(e,t);var u=ts(a(e),a(t),i,r,s,o);return o.delete(e),u;case O:if(Mn)return Mn.call(e)==Mn.call(t)}return!1}(e,t,l,n,i,s,o);if(!(1&n)){var f=d&&je.call(e,"__wrapped__"),m=h&&je.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return o||(o=new Kn),s(g,v,n,i,o)}}if(!p)return!1;return o||(o=new Kn),function(e,t,n,i,s,o){var a=1&n,c=is(e),l=c.length,u=is(t),d=u.length;if(l!=d&&!a)return!1;var h=l;for(;h--;){var p=c[h];if(!(a?p in t:je.call(t,p)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);var v=a;for(;++h<l;){var b=e[p=c[h]],y=t[p];if(i)var w=a?i(y,b,p,t,e,o):i(b,y,p,e,t,o);if(!(w===r?b===y||s(b,y,n,i,o):w)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var S=e.constructor,C=t.constructor;S==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof C&&C instanceof C||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,i,s,o)}(e,t,n,i,Oi,s))}function Ni(e,t,n,i){var s=n.length,o=s,a=!i;if(null==e)return!o;for(e=Ee(e);s--;){var c=n[s];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var l=(c=n[s])[0],u=e[l],d=c[1];if(a&&c[2]){if(u===r&&!(l in e))return!1}else{var h=new Kn;if(i)var p=i(u,d,l,e,t,h);if(!(p===r?Oi(d,u,3,i,h):p))return!1}}return!0}function Di(e){return!(!ea(e)||(t=e,Ue&&Ue in t))&&(Xo(e)?Be:be).test(Us(e));var t}function ji(e){return"function"==typeof e?e:null==e?ic:"object"==typeof e?Wo(e)?Bi(e[0],e[1]):Vi(e):hc(e)}function Li(e){if(!ks(e))return Vt(e);var t=[];for(var n in Ee(e))je.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ui(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=ks(e),n=[];for(var i in e)("constructor"!=i||!t&&je.call(e,i))&&n.push(i);return n}function Mi(e,t){return e<t}function Fi(e,t){var i=-1,r=$o(e)?n(e.length):[];return hi(e,(function(e,n,s){r[++i]=t(e,n,s)})),r}function Vi(e){var t=us(e);return 1==t.length&&t[0][2]?_s(t[0][0],t[0][1]):function(n){return n===e||Ni(n,e,t)}}function Bi(e,t){return ws(e)&&Ts(t)?_s(Ls(e),t):function(n){var i=Ea(n,e);return i===r&&i===t?Ra(n,e):Oi(t,i,3)}}function Hi(e,t,n,i,s){e!==t&&bi(t,(function(o,a){if(s||(s=new Kn),ea(o))!function(e,t,n,i,s,o,a){var c=As(e,n),l=As(t,n),u=a.get(l);if(u)return void ei(e,n,u);var d=o?o(c,l,n+"",e,t,a):r,h=d===r;if(h){var p=Wo(l),f=!p&&Go(l),m=!p&&!f&&la(l);d=l,p||f||m?Wo(c)?d=c:Jo(c)?d=Ir(c):f?(h=!1,d=kr(l,!0)):m?(h=!1,d=_r(l,!0)):d=[]:ra(l)||zo(l)?(d=c,zo(c)?d=va(c):ea(c)&&!Xo(c)||(d=gs(l))):h=!1}h&&(a.set(l,d),s(d,l,i,o,a),a.delete(l));ei(e,n,d)}(e,t,a,n,Hi,i,s);else{var c=i?i(As(e,a),o,a+"",e,t,s):r;c===r&&(c=o),ei(e,a,c)}}),Oa)}function zi(e,t){var n=e.length;if(n)return bs(t+=t<0?n:0,n)?e[t]:r}function Wi(e,t,n){t=t.length?jt(t,(function(e){return Wo(e)?function(t){return ki(t,1===e.length?e[0]:e)}:e})):[ic];var i=-1;t=jt(t,Qt(cs()));var r=Fi(e,(function(e,n,r){var s=jt(t,(function(t){return t(e)}));return{criteria:s,index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(r,(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,s=t.criteria,o=r.length,a=n.length;for(;++i<o;){var c=Er(r[i],s[i]);if(c)return i>=a?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function qi(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=ki(e,o);n(a,o)&&Qi(s,yr(o,e),a)}return s}function $i(e,t,n,i){var r=i?Wt:zt,s=-1,o=t.length,a=e;for(e===t&&(t=Ir(t)),n&&(a=jt(e,Qt(n)));++s<o;)for(var c=0,l=t[s],u=n?n(l):l;(c=r(a,u,c,i))>-1;)a!==e&&Ke.call(a,c,1),Ke.call(e,c,1);return e}function Ji(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==s){var s=r;bs(r)?Ke.call(e,r,1):dr(e,r)}}return e}function Gi(e,t){return e+ft(Cn()*(t-e+1))}function Ki(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Yi(e,t){return Ps(Es(e,t,ic),e+"")}function Xi(e){return Xn(Va(e))}function Zi(e,t){var n=Va(e);return Ds(n,ai(t,0,n.length))}function Qi(e,t,n,i){if(!ea(e))return e;for(var s=-1,o=(t=yr(t,e)).length,a=o-1,c=e;null!=c&&++s<o;){var l=Ls(t[s]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(s!=a){var d=c[l];(u=i?i(d,l,c):r)===r&&(u=ea(d)?d:bs(t[s+1])?[]:{})}ti(c,l,u),c=c[l]}return e}var er=xn?function(e,t){return xn.set(e,t),e}:ic,tr=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:ec(t),writable:!0})}:ic;function nr(e){return Ds(Va(e))}function ir(e,t,i){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var o=n(s);++r<s;)o[r]=e[r+t];return o}function rr(e,t){var n;return hi(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function sr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=2147483647){for(;i<r;){var s=i+r>>>1,o=e[s];null!==o&&!ca(o)&&(n?o<=t:o<t)?i=s+1:r=s}return r}return or(e,t,ic,n)}function or(e,t,n,i){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,c=null===t,l=ca(t),u=t===r;s<o;){var d=ft((s+o)/2),h=n(e[d]),p=h!==r,f=null===h,m=h===h,g=ca(h);if(a)var v=i||m;else v=u?m&&(i||p):c?m&&p&&(i||!f):l?m&&p&&!f&&(i||!g):!f&&!g&&(i?h<=t:h<t);v?s=d+1:o=d}return yn(o,4294967294)}function ar(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var o=e[n],a=t?t(o):o;if(!n||!Vo(a,c)){var c=a;s[r++]=0===o?0:o}}return s}function cr(e){return"number"==typeof e?e:ca(e)?m:+e}function lr(e){if("string"==typeof e)return e;if(Wo(e))return jt(e,lr)+"";if(ca(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ur(e,t,n){var i=-1,r=Nt,s=e.length,o=!0,a=[],c=a;if(n)o=!1,r=Dt;else if(s>=200){var l=t?null:Kr(e);if(l)return hn(l);o=!1,r=tn,c=new Gn}else c=t?[]:a;e:for(;++i<s;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),a.push(u)}else r(c,d,n)||(c!==a&&c.push(d),a.push(u))}return a}function dr(e,t){return null==(e=Rs(e,t=yr(t,e)))||delete e[Ls(Ks(t))]}function hr(e,t,n,i){return Qi(e,t,n(ki(e,t)),i)}function pr(e,t,n,i){for(var r=e.length,s=i?r:-1;(i?s--:++s<r)&&t(e[s],s,e););return n?ir(e,i?0:s,i?s+1:r):ir(e,i?s+1:0,i?r:s)}function fr(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Ut(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function mr(e,t,i){var r=e.length;if(r<2)return r?ur(e[0]):[];for(var s=-1,o=n(r);++s<r;)for(var a=e[s],c=-1;++c<r;)c!=s&&(o[s]=di(o[s]||a,e[c],t,i));return ur(vi(o,1),t,i)}function gr(e,t,n){for(var i=-1,s=e.length,o=t.length,a={};++i<s;){var c=i<o?t[i]:r;n(a,e[i],c)}return a}function vr(e){return Jo(e)?e:[]}function br(e){return"function"==typeof e?e:ic}function yr(e,t){return Wo(e)?e:ws(e,t)?[e]:js(ba(e))}var wr=Yi;function Sr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ir(e,t,n)}var Cr=nt||function(e){return mt.clearTimeout(e)};function kr(e,t){if(t)return e.slice();var n=e.length,i=qe?qe(n):new e.constructor(n);return e.copy(i),i}function Tr(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function _r(e,t){var n=t?Tr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Er(e,t){if(e!==t){var n=e!==r,i=null===e,s=e===e,o=ca(e),a=t!==r,c=null===t,l=t===t,u=ca(t);if(!c&&!u&&!o&&e>t||o&&a&&l&&!c&&!u||i&&a&&l||!n&&l||!s)return 1;if(!i&&!o&&!u&&e<t||u&&n&&s&&!i&&!o||c&&n&&s||!a&&s||!l)return-1}return 0}function Rr(e,t,i,r){for(var s=-1,o=e.length,a=i.length,c=-1,l=t.length,u=Gt(o-a,0),d=n(l+u),h=!r;++c<l;)d[c]=t[c];for(;++s<a;)(h||s<o)&&(d[i[s]]=e[s]);for(;u--;)d[c++]=e[s++];return d}function Ar(e,t,i,r){for(var s=-1,o=e.length,a=-1,c=i.length,l=-1,u=t.length,d=Gt(o-c,0),h=n(d+u),p=!r;++s<d;)h[s]=e[s];for(var f=s;++l<u;)h[f+l]=t[l];for(;++a<c;)(p||s<o)&&(h[f+i[a]]=e[s++]);return h}function Ir(e,t){var i=-1,r=e.length;for(t||(t=n(r));++i<r;)t[i]=e[i];return t}function xr(e,t,n,i){var s=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var c=t[o],l=i?i(n[c],e[c],c,n,e):r;l===r&&(l=e[c]),s?si(n,c,l):ti(n,c,l)}return n}function Pr(e,t){return function(n,i){var r=Wo(n)?At:ii,s=t?t():{};return r(n,e,cs(i,2),s)}}function Or(e){return Yi((function(t,n){var i=-1,s=n.length,o=s>1?n[s-1]:r,a=s>2?n[2]:r;for(o=e.length>3&&"function"==typeof o?(s--,o):r,a&&ys(n[0],n[1],a)&&(o=s<3?r:o,s=1),t=Ee(t);++i<s;){var c=n[i];c&&e(t,c,i,o)}return t}))}function Nr(e,t){return function(n,i){if(null==n)return n;if(!$o(n))return e(n,i);for(var r=n.length,s=t?r:-1,o=Ee(n);(t?s--:++s<r)&&!1!==i(o[s],s,o););return n}}function Dr(e){return function(t,n,i){for(var r=-1,s=Ee(t),o=i(t),a=o.length;a--;){var c=o[e?a:++r];if(!1===n(s[c],c,s))break}return t}}function jr(e){return function(t){var n=cn(t=ba(t))?mn(t):r,i=n?n[0]:t.charAt(0),s=n?Sr(n,1).join(""):t.slice(1);return i[e]()+s}}function Lr(e){return function(t){return Ut(Xa(za(t).replace(et,"")),e,"")}}function Ur(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),i=e.apply(n,t);return ea(i)?i:n}}function Mr(e){return function(t,n,i){var s=Ee(t);if(!$o(t)){var o=cs(n,3);t=Pa(t),n=function(e){return o(s[e],e,s)}}var a=e(t,n,i);return a>-1?s[o?t[a]:a]:r}}function Fr(e){return ns((function(t){var n=t.length,i=n,o=zn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Ie(s);if(o&&!c&&"wrapper"==os(a))var c=new zn([],!0)}for(i=c?i:n;++i<n;){var l=os(a=t[i]),u="wrapper"==l?ss(a):r;c=u&&Ss(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[os(u[0])].apply(c,u[3]):1==a.length&&Ss(a)?c[l]():c.thru(a)}return function(){var e=arguments,i=e[0];if(c&&1==e.length&&Wo(i))return c.plant(i).value();for(var r=0,s=n?t[r].apply(this,e):i;++r<n;)s=t[r].call(this,s);return s}}))}function Vr(e,t,i,s,o,a,c,l,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,b=m?r:Ur(e);return function d(){for(var y=arguments.length,w=n(y),S=y;S--;)w[S]=arguments[S];if(g)var C=as(d),k=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(w,C);if(s&&(w=Rr(w,s,o,g)),a&&(w=Ar(w,a,c,g)),y-=k,g&&y<h){var T=dn(w,C);return Jr(e,t,Vr,d.placeholder,i,w,T,l,u,h-y)}var _=f?i:this,E=m?_[e]:e;return y=w.length,l?w=function(e,t){var n=e.length,i=yn(t.length,n),s=Ir(e);for(;i--;){var o=t[i];e[i]=bs(o,n)?s[o]:r}return e}(w,l):v&&y>1&&w.reverse(),p&&u<y&&(w.length=u),this&&this!==mt&&this instanceof d&&(E=b||Ur(E)),E.apply(_,w)}}function Br(e,t){return function(n,i){return function(e,t,n,i){return wi(e,(function(e,r,s){t(i,n(e),r,s)})),i}(n,e,t(i),{})}}function Hr(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=lr(n),i=lr(i)):(n=cr(n),i=cr(i)),s=e(n,i)}return s}}function zr(e){return ns((function(t){return t=jt(t,Qt(cs())),Yi((function(n){var i=this;return e(t,(function(e){return Rt(e,i,n)}))}))}))}function Wr(e,t){var n=(t=t===r?" ":lr(t)).length;if(n<2)return n?Ki(t,e):t;var i=Ki(t,pt(e/fn(t)));return cn(t)?Sr(mn(i),0,e).join(""):i.slice(0,e)}function qr(e){return function(t,i,s){return s&&"number"!=typeof s&&ys(t,i,s)&&(i=s=r),t=pa(t),i===r?(i=t,t=0):i=pa(i),function(e,t,i,r){for(var s=-1,o=Gt(pt((t-e)/(i||1)),0),a=n(o);o--;)a[r?o:++s]=e,e+=i;return a}(t,i,s=s===r?t<i?1:-1:pa(s),e)}}function $r(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Jr(e,t,n,i,s,o,a,c,d,h){var p=8&t;t|=p?l:u,4&(t&=~(p?u:l))||(t&=-4);var f=[e,t,s,p?o:r,p?a:r,p?r:o,p?r:a,c,d,h],m=n.apply(r,f);return Ss(e)&&Is(m,f),m.placeholder=i,Os(m,e,t)}function Gr(e){var t=_e[e];return function(e,n){if(e=ga(e),(n=null==n?0:yn(fa(n),292))&&yt(e)){var i=(ba(e)+"e").split("e");return+((i=(ba(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Kr=Rn&&1/hn(new Rn([,-0]))[1]==p?function(e){return new Rn(e)}:cc;function Yr(e){return function(t){var n=fs(t);return n==_?ln(t):n==x?pn(t):function(e,t){return jt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xr(e,t,i,o,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(s);var b=o?o.length:0;if(b||(t&=-97,o=p=r),m=m===r?m:Gt(fa(m),0),g=g===r?g:fa(g),b-=p?p.length:0,t&u){var y=o,w=p;o=p=r}var S=v?r:ss(e),C=[e,t,i,o,p,y,w,f,m,g];if(S&&function(e,t){var n=e[1],i=t[1],r=n|i,s=r<131,o=i==d&&8==n||i==d&&n==h&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Rr(l,c,t[4]):c,e[4]=l?dn(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Ar(l,c,t[6]):c,e[6]=l?dn(e[5],a):t[6]);(c=t[7])&&(e[7]=c);i&d&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(C,S),e=C[0],t=C[1],i=C[2],o=C[3],p=C[4],!(g=C[9]=C[9]===r?v?0:e.length:Gt(C[9]-b,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==c?function(e,t,i){var s=Ur(e);return function o(){for(var a=arguments.length,c=n(a),l=a,u=as(o);l--;)c[l]=arguments[l];var d=a<3&&c[0]!==u&&c[a-1]!==u?[]:dn(c,u);return(a-=d.length)<i?Jr(e,t,Vr,o.placeholder,r,c,d,r,r,i-a):Rt(this&&this!==mt&&this instanceof o?s:e,this,c)}}(e,t,g):t!=l&&33!=t||p.length?Vr.apply(r,C):function(e,t,i,r){var s=1&t,o=Ur(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=r.length,d=n(u+c),h=this&&this!==mt&&this instanceof t?o:e;++l<u;)d[l]=r[l];for(;c--;)d[l++]=arguments[++a];return Rt(h,s?i:this,d)}}(e,t,i,o);else var k=function(e,t,n){var i=1&t,r=Ur(e);return function t(){return(this&&this!==mt&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,i);return Os((S?er:Is)(k,C),e,t)}function Zr(e,t,n,i){return e===r||Vo(e,Oe[n])&&!je.call(i,n)?t:e}function Qr(e,t,n,i,s,o){return ea(e)&&ea(t)&&(o.set(t,e),Hi(e,t,r,Qr,o),o.delete(t)),e}function es(e){return ra(e)?r:e}function ts(e,t,n,i,s,o){var a=1&n,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Gn:r;for(o.set(e,t),o.set(t,e);++h<c;){var m=e[h],g=t[h];if(i)var v=a?i(g,m,h,t,e,o):i(m,g,h,e,t,o);if(v!==r){if(v)continue;p=!1;break}if(f){if(!Ft(t,(function(e,t){if(!tn(f,t)&&(m===e||s(m,e,n,i,o)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!s(m,g,n,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ns(e){return Ps(Es(e,r,Ws),e+"")}function is(e){return Ti(e,Pa,hs)}function rs(e){return Ti(e,Oa,ps)}var ss=xn?function(e){return xn.get(e)}:cc;function os(e){for(var t=e.name+"",n=Pn[t],i=je.call(Pn,t)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==e)return r.name}return t}function as(e){return(je.call(Vn,"placeholder")?Vn:e).placeholder}function cs(){var e=Vn.iteratee||rc;return e=e===rc?ji:e,arguments.length?e(arguments[0],arguments[1]):e}function ls(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function us(e){for(var t=Pa(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Ts(r)]}return t}function ds(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Di(n)?n:r}var hs=gt?function(e){return null==e?[]:(e=Ee(e),Ot(gt(e),(function(t){return Ge.call(e,t)})))}:mc,ps=gt?function(e){for(var t=[];e;)Lt(t,hs(e)),e=$e(e);return t}:mc,fs=_i;function ms(e,t,n){for(var i=-1,r=(t=yr(t,e)).length,s=!1;++i<r;){var o=Ls(t[i]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++i!=r?s:!!(r=null==e?0:e.length)&&Qo(r)&&bs(o,r)&&(Wo(e)||zo(e))}function gs(e){return"function"!=typeof e.constructor||ks(e)?{}:Bn($e(e))}function vs(e){return Wo(e)||zo(e)||!!(Ye&&e&&e[Ye])}function bs(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,n){if(!ea(n))return!1;var i=typeof t;return!!("number"==i?$o(n)&&bs(t,n.length):"string"==i&&t in n)&&Vo(n[t],e)}function ws(e,t){if(Wo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ca(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function Ss(e){var t=os(e),n=Vn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var i=ss(n);return!!i&&e===i[0]}(Tn&&fs(new Tn(new ArrayBuffer(1)))!=j||_n&&fs(new _n)!=_||En&&fs(En.resolve())!=A||Rn&&fs(new Rn)!=x||An&&fs(new An)!=N)&&(fs=function(e){var t=_i(e),n=t==R?e.constructor:r,i=n?Us(n):"";if(i)switch(i){case On:return j;case Nn:return _;case Dn:return A;case jn:return x;case Ln:return N}return t});var Cs=Ne?Xo:gc;function ks(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Ts(e){return e===e&&!ea(e)}function _s(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ee(n)))}}function Es(e,t,i){return t=Gt(t===r?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=Gt(r.length-t,0),a=n(o);++s<o;)a[s]=r[t+s];s=-1;for(var c=n(t+1);++s<t;)c[s]=r[s];return c[t]=i(a),Rt(e,this,c)}}function Rs(e,t){return t.length<2?e:ki(e,ir(t,0,-1))}function As(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Is=Ns(er),xs=ut||function(e,t){return mt.setTimeout(e,t)},Ps=Ns(tr);function Os(e,t,n){var i=t+"";return Ps(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return It(v,(function(n){var i="_."+n[0];t&n[1]&&!Nt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ue):[]}(i),n)))}function Ns(e){var t=0,n=0;return function(){var i=wn(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Ds(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var o=Gi(n,s),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var js=function(e){var t=Do(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,i,r){t.push(i?r.replace(pe,"$1"):n||e)})),t}));function Ls(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Us(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ms(e){if(e instanceof Wn)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=Ir(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fs=Yi((function(e,t){return Jo(e)?di(e,vi(t,1,Jo,!0)):[]})),Vs=Yi((function(e,t){var n=Ks(t);return Jo(n)&&(n=r),Jo(e)?di(e,vi(t,1,Jo,!0),cs(n,2)):[]})),Bs=Yi((function(e,t){var n=Ks(t);return Jo(n)&&(n=r),Jo(e)?di(e,vi(t,1,Jo,!0),r,n):[]}));function Hs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fa(n);return r<0&&(r=Gt(i+r,0)),Ht(e,cs(t,3),r)}function zs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=fa(n),s=n<0?Gt(i+s,0):yn(s,i-1)),Ht(e,cs(t,3),s,!0)}function Ws(e){return(null==e?0:e.length)?vi(e,1):[]}function qs(e){return e&&e.length?e[0]:r}var $s=Yi((function(e){var t=jt(e,vr);return t.length&&t[0]===e[0]?Ii(t):[]})),Js=Yi((function(e){var t=Ks(e),n=jt(e,vr);return t===Ks(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ii(n,cs(t,2)):[]})),Gs=Yi((function(e){var t=Ks(e),n=jt(e,vr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ii(n,r,t):[]}));function Ks(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Ys=Yi(Xs);function Xs(e,t){return e&&e.length&&t&&t.length?$i(e,t):e}var Zs=ns((function(e,t){var n=null==e?0:e.length,i=oi(e,t);return Ji(e,jt(t,(function(e){return bs(e,n)?+e:e})).sort(Er)),i}));function Qs(e){return null==e?e:kn.call(e)}var eo=Yi((function(e){return ur(vi(e,1,Jo,!0))})),to=Yi((function(e){var t=Ks(e);return Jo(t)&&(t=r),ur(vi(e,1,Jo,!0),cs(t,2))})),no=Yi((function(e){var t=Ks(e);return t="function"==typeof t?t:r,ur(vi(e,1,Jo,!0),r,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Jo(e))return t=Gt(e.length,t),!0})),Xt(t,(function(t){return jt(e,Jt(t))}))}function ro(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:jt(n,(function(e){return Rt(t,r,e)}))}var so=Yi((function(e,t){return Jo(e)?di(e,t):[]})),oo=Yi((function(e){return mr(Ot(e,Jo))})),ao=Yi((function(e){var t=Ks(e);return Jo(t)&&(t=r),mr(Ot(e,Jo),cs(t,2))})),co=Yi((function(e){var t=Ks(e);return t="function"==typeof t?t:r,mr(Ot(e,Jo),r,t)})),lo=Yi(io);var uo=Yi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ro(e,n)}));function ho(e){var t=Vn(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var fo=ns((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(t){return oi(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Wn&&bs(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:po,args:[s],thisArg:r}),new zn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(s)}));var mo=Pr((function(e,t,n){je.call(e,n)?++e[n]:si(e,n,1)}));var go=Mr(Hs),vo=Mr(zs);function bo(e,t){return(Wo(e)?It:hi)(e,cs(t,3))}function yo(e,t){return(Wo(e)?xt:pi)(e,cs(t,3))}var wo=Pr((function(e,t,n){je.call(e,n)?e[n].push(t):si(e,n,[t])}));var So=Yi((function(e,t,i){var r=-1,s="function"==typeof t,o=$o(e)?n(e.length):[];return hi(e,(function(e){o[++r]=s?Rt(t,e,i):xi(e,t,i)})),o})),Co=Pr((function(e,t,n){si(e,n,t)}));function ko(e,t){return(Wo(e)?jt:Fi)(e,cs(t,3))}var To=Pr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var _o=Yi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Wi(e,vi(t,1),[])})),Eo=rt||function(){return mt.Date.now()};function Ro(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xr(e,d,r,r,r,r,t)}function Ao(e,t){var n;if("function"!=typeof t)throw new Ie(s);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Io=Yi((function(e,t,n){var i=1;if(n.length){var r=dn(n,as(Io));i|=l}return Xr(e,i,t,n,r)})),xo=Yi((function(e,t,n){var i=3;if(n.length){var r=dn(n,as(xo));i|=l}return Xr(t,i,e,n,r)}));function Po(e,t,n){var i,o,a,c,l,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ie(s);function m(t){var n=i,s=o;return i=o=r,d=t,c=e.apply(s,n)}function g(e){var n=e-u;return u===r||n>=t||n<0||p&&e-d>=a}function v(){var e=Eo();if(g(e))return b(e);l=xs(v,function(e){var n=t-(e-u);return p?yn(n,a-(e-d)):n}(e))}function b(e){return l=r,f&&i?m(e):(i=o=r,c)}function y(){var e=Eo(),n=g(e);if(i=arguments,o=this,u=e,n){if(l===r)return function(e){return d=e,l=xs(v,t),h?m(e):c}(u);if(p)return Cr(l),l=xs(v,t),m(u)}return l===r&&(l=xs(v,t)),c}return t=ga(t)||0,ea(n)&&(h=!!n.leading,a=(p="maxWait"in n)?Gt(ga(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){l!==r&&Cr(l),d=0,i=u=o=l=r},y.flush=function(){return l===r?c:b(Eo())},y}var Oo=Yi((function(e,t){return ui(e,1,t)})),No=Yi((function(e,t,n){return ui(e,ga(t)||0,n)}));function Do(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(s);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(Do.Cache||Jn),n}function jo(e){if("function"!=typeof e)throw new Ie(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Do.Cache=Jn;var Lo=wr((function(e,t){var n=(t=1==t.length&&Wo(t[0])?jt(t[0],Qt(cs())):jt(vi(t,1),Qt(cs()))).length;return Yi((function(i){for(var r=-1,s=yn(i.length,n);++r<s;)i[r]=t[r].call(this,i[r]);return Rt(e,this,i)}))})),Uo=Yi((function(e,t){var n=dn(t,as(Uo));return Xr(e,l,r,t,n)})),Mo=Yi((function(e,t){var n=dn(t,as(Mo));return Xr(e,u,r,t,n)})),Fo=ns((function(e,t){return Xr(e,h,r,r,r,t)}));function Vo(e,t){return e===t||e!==e&&t!==t}var Bo=$r(Ei),Ho=$r((function(e,t){return e>=t})),zo=Pi(function(){return arguments}())?Pi:function(e){return ta(e)&&je.call(e,"callee")&&!Ge.call(e,"callee")},Wo=n.isArray,qo=St?Qt(St):function(e){return ta(e)&&_i(e)==D};function $o(e){return null!=e&&Qo(e.length)&&!Xo(e)}function Jo(e){return ta(e)&&$o(e)}var Go=vt||gc,Ko=Ct?Qt(Ct):function(e){return ta(e)&&_i(e)==S};function Yo(e){if(!ta(e))return!1;var t=_i(e);return t==C||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Xo(e){if(!ea(e))return!1;var t=_i(e);return t==k||t==T||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==fa(e)}function Qo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=kt?Qt(kt):function(e){return ta(e)&&fs(e)==_};function ia(e){return"number"==typeof e||ta(e)&&_i(e)==E}function ra(e){if(!ta(e)||_i(e)!=R)return!1;var t=$e(e);if(null===t)return!0;var n=je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==Fe}var sa=Tt?Qt(Tt):function(e){return ta(e)&&_i(e)==I};var oa=_t?Qt(_t):function(e){return ta(e)&&fs(e)==x};function aa(e){return"string"==typeof e||!Wo(e)&&ta(e)&&_i(e)==P}function ca(e){return"symbol"==typeof e||ta(e)&&_i(e)==O}var la=Et?Qt(Et):function(e){return ta(e)&&Qo(e.length)&&!!ct[_i(e)]};var ua=$r(Mi),da=$r((function(e,t){return e<=t}));function ha(e){if(!e)return[];if($o(e))return aa(e)?mn(e):Ir(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=fs(e);return(t==_?ln:t==x?hn:Va)(e)}function pa(e){return e?(e=ga(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fa(e){var t=pa(e),n=t%1;return t===t?n?t-n:t:0}function ma(e){return e?ai(fa(e),0,g):0}function ga(e){if("number"==typeof e)return e;if(ca(e))return m;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||ye.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function va(e){return xr(e,Oa(e))}function ba(e){return null==e?"":lr(e)}var ya=Or((function(e,t){if(ks(t)||$o(t))xr(t,Pa(t),e);else for(var n in t)je.call(t,n)&&ti(e,n,t[n])})),wa=Or((function(e,t){xr(t,Oa(t),e)})),Sa=Or((function(e,t,n,i){xr(t,Oa(t),e,i)})),Ca=Or((function(e,t,n,i){xr(t,Pa(t),e,i)})),ka=ns(oi);var Ta=Yi((function(e,t){e=Ee(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&ys(t[0],t[1],s)&&(i=1);++n<i;)for(var o=t[n],a=Oa(o),c=-1,l=a.length;++c<l;){var u=a[c],d=e[u];(d===r||Vo(d,Oe[u])&&!je.call(e,u))&&(e[u]=o[u])}return e})),_a=Yi((function(e){return e.push(r,Qr),Rt(Da,r,e)}));function Ea(e,t,n){var i=null==e?r:ki(e,t);return i===r?n:i}function Ra(e,t){return null!=e&&ms(e,t,Ai)}var Aa=Br((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=n}),ec(ic)),Ia=Br((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),je.call(e,t)?e[t].push(n):e[t]=[n]}),cs),xa=Yi(xi);function Pa(e){return $o(e)?Yn(e):Li(e)}function Oa(e){return $o(e)?Yn(e,!0):Ui(e)}var Na=Or((function(e,t,n){Hi(e,t,n)})),Da=Or((function(e,t,n,i){Hi(e,t,n,i)})),ja=ns((function(e,t){var n={};if(null==e)return n;var i=!1;t=jt(t,(function(t){return t=yr(t,e),i||(i=t.length>1),t})),xr(e,rs(e),n),i&&(n=ci(n,7,es));for(var r=t.length;r--;)dr(n,t[r]);return n}));var La=ns((function(e,t){return null==e?{}:function(e,t){return qi(e,t,(function(t,n){return Ra(e,n)}))}(e,t)}));function Ua(e,t){if(null==e)return{};var n=jt(rs(e),(function(e){return[e]}));return t=cs(t),qi(e,n,(function(e,n){return t(e,n[0])}))}var Ma=Yr(Pa),Fa=Yr(Oa);function Va(e){return null==e?[]:en(e,Pa(e))}var Ba=Lr((function(e,t,n){return t=t.toLowerCase(),e+(n?Ha(t):t)}));function Ha(e){return Ya(ba(e).toLowerCase())}function za(e){return(e=ba(e))&&e.replace(Se,sn).replace(tt,"")}var Wa=Lr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qa=Lr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),$a=jr("toLowerCase");var Ja=Lr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ga=Lr((function(e,t,n){return e+(n?" ":"")+Ya(t)}));var Ka=Lr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ya=jr("toUpperCase");function Xa(e,t,n){return e=ba(e),(t=n?r:t)===r?function(e){return st.test(e)}(e)?function(e){return e.match(it)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Za=Yi((function(e,t){try{return Rt(e,r,t)}catch(n){return Yo(n)?n:new ae(n)}})),Qa=ns((function(e,t){return It(t,(function(t){t=Ls(t),si(e,t,Io(e[t],e))})),e}));function ec(e){return function(){return e}}var tc=Fr(),nc=Fr(!0);function ic(e){return e}function rc(e){return ji("function"==typeof e?e:ci(e,1))}var sc=Yi((function(e,t){return function(n){return xi(n,e,t)}})),oc=Yi((function(e,t){return function(n){return xi(e,n,t)}}));function ac(e,t,n){var i=Pa(t),r=Ci(t,i);null!=n||ea(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=Ci(t,Pa(t)));var s=!(ea(n)&&"chain"in n)||!!n.chain,o=Xo(e);return It(r,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ir(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Lt([this.value()],arguments))})})),e}function cc(){}var lc=zr(jt),uc=zr(Pt),dc=zr(Ft);function hc(e){return ws(e)?Jt(Ls(e)):function(e){return function(t){return ki(t,e)}}(e)}var pc=qr(),fc=qr(!0);function mc(){return[]}function gc(){return!1}var vc=Hr((function(e,t){return e+t}),0),bc=Gr("ceil"),yc=Hr((function(e,t){return e/t}),1),wc=Gr("floor");var Sc=Hr((function(e,t){return e*t}),1),Cc=Gr("round"),kc=Hr((function(e,t){return e-t}),0);return Vn.after=function(e,t){if("function"!=typeof t)throw new Ie(s);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Vn.ary=Ro,Vn.assign=ya,Vn.assignIn=wa,Vn.assignInWith=Sa,Vn.assignWith=Ca,Vn.at=ka,Vn.before=Ao,Vn.bind=Io,Vn.bindAll=Qa,Vn.bindKey=xo,Vn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},Vn.chain=ho,Vn.chunk=function(e,t,i){t=(i?ys(e,t,i):t===r)?1:Gt(fa(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,c=n(pt(s/t));o<s;)c[a++]=ir(e,o,o+=t);return c},Vn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var s=e[t];s&&(r[i++]=s)}return r},Vn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Lt(Wo(i)?Ir(i):[i],vi(t,1))},Vn.cond=function(e){var t=null==e?0:e.length,n=cs();return e=t?jt(e,(function(e){if("function"!=typeof e[1])throw new Ie(s);return[n(e[0]),e[1]]})):[],Yi((function(n){for(var i=-1;++i<t;){var r=e[i];if(Rt(r[0],this,n))return Rt(r[1],this,n)}}))},Vn.conforms=function(e){return function(e){var t=Pa(e);return function(n){return li(n,e,t)}}(ci(e,1))},Vn.constant=ec,Vn.countBy=mo,Vn.create=function(e,t){var n=Bn(e);return null==t?n:ri(n,t)},Vn.curry=function e(t,n,i){var s=Xr(t,8,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Vn.curryRight=function e(t,n,i){var s=Xr(t,c,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Vn.debounce=Po,Vn.defaults=Ta,Vn.defaultsDeep=_a,Vn.defer=Oo,Vn.delay=No,Vn.difference=Fs,Vn.differenceBy=Vs,Vn.differenceWith=Bs,Vn.drop=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,(t=n||t===r?1:fa(t))<0?0:t,i):[]},Vn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,0,(t=i-(t=n||t===r?1:fa(t)))<0?0:t):[]},Vn.dropRightWhile=function(e,t){return e&&e.length?pr(e,cs(t,3),!0,!0):[]},Vn.dropWhile=function(e,t){return e&&e.length?pr(e,cs(t,3),!0):[]},Vn.fill=function(e,t,n,i){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&ys(e,t,n)&&(n=0,i=s),function(e,t,n,i){var s=e.length;for((n=fa(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:fa(i))<0&&(i+=s),i=n>i?0:ma(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Vn.filter=function(e,t){return(Wo(e)?Ot:gi)(e,cs(t,3))},Vn.flatMap=function(e,t){return vi(ko(e,t),1)},Vn.flatMapDeep=function(e,t){return vi(ko(e,t),p)},Vn.flatMapDepth=function(e,t,n){return n=n===r?1:fa(n),vi(ko(e,t),n)},Vn.flatten=Ws,Vn.flattenDeep=function(e){return(null==e?0:e.length)?vi(e,p):[]},Vn.flattenDepth=function(e,t){return(null==e?0:e.length)?vi(e,t=t===r?1:fa(t)):[]},Vn.flip=function(e){return Xr(e,512)},Vn.flow=tc,Vn.flowRight=nc,Vn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Vn.functions=function(e){return null==e?[]:Ci(e,Pa(e))},Vn.functionsIn=function(e){return null==e?[]:Ci(e,Oa(e))},Vn.groupBy=wo,Vn.initial=function(e){return(null==e?0:e.length)?ir(e,0,-1):[]},Vn.intersection=$s,Vn.intersectionBy=Js,Vn.intersectionWith=Gs,Vn.invert=Aa,Vn.invertBy=Ia,Vn.invokeMap=So,Vn.iteratee=rc,Vn.keyBy=Co,Vn.keys=Pa,Vn.keysIn=Oa,Vn.map=ko,Vn.mapKeys=function(e,t){var n={};return t=cs(t,3),wi(e,(function(e,i,r){si(n,t(e,i,r),e)})),n},Vn.mapValues=function(e,t){var n={};return t=cs(t,3),wi(e,(function(e,i,r){si(n,i,t(e,i,r))})),n},Vn.matches=function(e){return Vi(ci(e,1))},Vn.matchesProperty=function(e,t){return Bi(e,ci(t,1))},Vn.memoize=Do,Vn.merge=Na,Vn.mergeWith=Da,Vn.method=sc,Vn.methodOf=oc,Vn.mixin=ac,Vn.negate=jo,Vn.nthArg=function(e){return e=fa(e),Yi((function(t){return zi(t,e)}))},Vn.omit=ja,Vn.omitBy=function(e,t){return Ua(e,jo(cs(t)))},Vn.once=function(e){return Ao(2,e)},Vn.orderBy=function(e,t,n,i){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(n=i?r:n)||(n=null==n?[]:[n]),Wi(e,t,n))},Vn.over=lc,Vn.overArgs=Lo,Vn.overEvery=uc,Vn.overSome=dc,Vn.partial=Uo,Vn.partialRight=Mo,Vn.partition=To,Vn.pick=La,Vn.pickBy=Ua,Vn.property=hc,Vn.propertyOf=function(e){return function(t){return null==e?r:ki(e,t)}},Vn.pull=Ys,Vn.pullAll=Xs,Vn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$i(e,t,cs(n,2)):e},Vn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$i(e,t,r,n):e},Vn.pullAt=Zs,Vn.range=pc,Vn.rangeRight=fc,Vn.rearg=Fo,Vn.reject=function(e,t){return(Wo(e)?Ot:gi)(e,jo(cs(t,3)))},Vn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],s=e.length;for(t=cs(t,3);++i<s;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}return Ji(e,r),n},Vn.rest=function(e,t){if("function"!=typeof e)throw new Ie(s);return Yi(e,t=t===r?t:fa(t))},Vn.reverse=Qs,Vn.sampleSize=function(e,t,n){return t=(n?ys(e,t,n):t===r)?1:fa(t),(Wo(e)?Zn:Zi)(e,t)},Vn.set=function(e,t,n){return null==e?e:Qi(e,t,n)},Vn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Qi(e,t,n,i)},Vn.shuffle=function(e){return(Wo(e)?Qn:nr)(e)},Vn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ys(e,t,n)?(t=0,n=i):(t=null==t?0:fa(t),n=n===r?i:fa(n)),ir(e,t,n)):[]},Vn.sortBy=_o,Vn.sortedUniq=function(e){return e&&e.length?ar(e):[]},Vn.sortedUniqBy=function(e,t){return e&&e.length?ar(e,cs(t,2)):[]},Vn.split=function(e,t,n){return n&&"number"!=typeof n&&ys(e,t,n)&&(t=n=r),(n=n===r?g:n>>>0)?(e=ba(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=lr(t))&&cn(e)?Sr(mn(e),0,n):e.split(t,n):[]},Vn.spread=function(e,t){if("function"!=typeof e)throw new Ie(s);return t=null==t?0:Gt(fa(t),0),Yi((function(n){var i=n[t],r=Sr(n,0,t);return i&&Lt(r,i),Rt(e,this,r)}))},Vn.tail=function(e){var t=null==e?0:e.length;return t?ir(e,1,t):[]},Vn.take=function(e,t,n){return e&&e.length?ir(e,0,(t=n||t===r?1:fa(t))<0?0:t):[]},Vn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,(t=i-(t=n||t===r?1:fa(t)))<0?0:t,i):[]},Vn.takeRightWhile=function(e,t){return e&&e.length?pr(e,cs(t,3),!1,!0):[]},Vn.takeWhile=function(e,t){return e&&e.length?pr(e,cs(t,3)):[]},Vn.tap=function(e,t){return t(e),e},Vn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Ie(s);return ea(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Po(e,t,{leading:i,maxWait:t,trailing:r})},Vn.thru=po,Vn.toArray=ha,Vn.toPairs=Ma,Vn.toPairsIn=Fa,Vn.toPath=function(e){return Wo(e)?jt(e,Ls):ca(e)?[e]:Ir(js(ba(e)))},Vn.toPlainObject=va,Vn.transform=function(e,t,n){var i=Wo(e),r=i||Go(e)||la(e);if(t=cs(t,4),null==n){var s=e&&e.constructor;n=r?i?new s:[]:ea(e)&&Xo(s)?Bn($e(e)):{}}return(r?It:wi)(e,(function(e,i,r){return t(n,e,i,r)})),n},Vn.unary=function(e){return Ro(e,1)},Vn.union=eo,Vn.unionBy=to,Vn.unionWith=no,Vn.uniq=function(e){return e&&e.length?ur(e):[]},Vn.uniqBy=function(e,t){return e&&e.length?ur(e,cs(t,2)):[]},Vn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ur(e,r,t):[]},Vn.unset=function(e,t){return null==e||dr(e,t)},Vn.unzip=io,Vn.unzipWith=ro,Vn.update=function(e,t,n){return null==e?e:hr(e,t,br(n))},Vn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:hr(e,t,br(n),i)},Vn.values=Va,Vn.valuesIn=function(e){return null==e?[]:en(e,Oa(e))},Vn.without=so,Vn.words=Xa,Vn.wrap=function(e,t){return Uo(br(t),e)},Vn.xor=oo,Vn.xorBy=ao,Vn.xorWith=co,Vn.zip=lo,Vn.zipObject=function(e,t){return gr(e||[],t||[],ti)},Vn.zipObjectDeep=function(e,t){return gr(e||[],t||[],Qi)},Vn.zipWith=uo,Vn.entries=Ma,Vn.entriesIn=Fa,Vn.extend=wa,Vn.extendWith=Sa,ac(Vn,Vn),Vn.add=vc,Vn.attempt=Za,Vn.camelCase=Ba,Vn.capitalize=Ha,Vn.ceil=bc,Vn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ga(n))===n?n:0),t!==r&&(t=(t=ga(t))===t?t:0),ai(ga(e),t,n)},Vn.clone=function(e){return ci(e,4)},Vn.cloneDeep=function(e){return ci(e,5)},Vn.cloneDeepWith=function(e,t){return ci(e,5,t="function"==typeof t?t:r)},Vn.cloneWith=function(e,t){return ci(e,4,t="function"==typeof t?t:r)},Vn.conformsTo=function(e,t){return null==t||li(e,t,Pa(t))},Vn.deburr=za,Vn.defaultTo=function(e,t){return null==e||e!==e?t:e},Vn.divide=yc,Vn.endsWith=function(e,t,n){e=ba(e),t=lr(t);var i=e.length,s=n=n===r?i:ai(fa(n),0,i);return(n-=t.length)>=0&&e.slice(n,s)==t},Vn.eq=Vo,Vn.escape=function(e){return(e=ba(e))&&X.test(e)?e.replace(K,on):e},Vn.escapeRegExp=function(e){return(e=ba(e))&&se.test(e)?e.replace(re,"\\$&"):e},Vn.every=function(e,t,n){var i=Wo(e)?Pt:fi;return n&&ys(e,t,n)&&(t=r),i(e,cs(t,3))},Vn.find=go,Vn.findIndex=Hs,Vn.findKey=function(e,t){return Bt(e,cs(t,3),wi)},Vn.findLast=vo,Vn.findLastIndex=zs,Vn.findLastKey=function(e,t){return Bt(e,cs(t,3),Si)},Vn.floor=wc,Vn.forEach=bo,Vn.forEachRight=yo,Vn.forIn=function(e,t){return null==e?e:bi(e,cs(t,3),Oa)},Vn.forInRight=function(e,t){return null==e?e:yi(e,cs(t,3),Oa)},Vn.forOwn=function(e,t){return e&&wi(e,cs(t,3))},Vn.forOwnRight=function(e,t){return e&&Si(e,cs(t,3))},Vn.get=Ea,Vn.gt=Bo,Vn.gte=Ho,Vn.has=function(e,t){return null!=e&&ms(e,t,Ri)},Vn.hasIn=Ra,Vn.head=qs,Vn.identity=ic,Vn.includes=function(e,t,n,i){e=$o(e)?e:Va(e),n=n&&!i?fa(n):0;var r=e.length;return n<0&&(n=Gt(r+n,0)),aa(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&zt(e,t,n)>-1},Vn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fa(n);return r<0&&(r=Gt(i+r,0)),zt(e,t,r)},Vn.inRange=function(e,t,n){return t=pa(t),n===r?(n=t,t=0):n=pa(n),function(e,t,n){return e>=yn(t,n)&&e<Gt(t,n)}(e=ga(e),t,n)},Vn.invoke=xa,Vn.isArguments=zo,Vn.isArray=Wo,Vn.isArrayBuffer=qo,Vn.isArrayLike=$o,Vn.isArrayLikeObject=Jo,Vn.isBoolean=function(e){return!0===e||!1===e||ta(e)&&_i(e)==w},Vn.isBuffer=Go,Vn.isDate=Ko,Vn.isElement=function(e){return ta(e)&&1===e.nodeType&&!ra(e)},Vn.isEmpty=function(e){if(null==e)return!0;if($o(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||la(e)||zo(e)))return!e.length;var t=fs(e);if(t==_||t==x)return!e.size;if(ks(e))return!Li(e).length;for(var n in e)if(je.call(e,n))return!1;return!0},Vn.isEqual=function(e,t){return Oi(e,t)},Vn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Oi(e,t,r,n):!!i},Vn.isError=Yo,Vn.isFinite=function(e){return"number"==typeof e&&yt(e)},Vn.isFunction=Xo,Vn.isInteger=Zo,Vn.isLength=Qo,Vn.isMap=na,Vn.isMatch=function(e,t){return e===t||Ni(e,t,us(t))},Vn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Ni(e,t,us(t),n)},Vn.isNaN=function(e){return ia(e)&&e!=+e},Vn.isNative=function(e){if(Cs(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Di(e)},Vn.isNil=function(e){return null==e},Vn.isNull=function(e){return null===e},Vn.isNumber=ia,Vn.isObject=ea,Vn.isObjectLike=ta,Vn.isPlainObject=ra,Vn.isRegExp=sa,Vn.isSafeInteger=function(e){return Zo(e)&&e>=-9007199254740991&&e<=f},Vn.isSet=oa,Vn.isString=aa,Vn.isSymbol=ca,Vn.isTypedArray=la,Vn.isUndefined=function(e){return e===r},Vn.isWeakMap=function(e){return ta(e)&&fs(e)==N},Vn.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==_i(e)},Vn.join=function(e,t){return null==e?"":wt.call(e,t)},Vn.kebabCase=Wa,Vn.last=Ks,Vn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=fa(n))<0?Gt(i+s,0):yn(s,i-1)),t===t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,s):Ht(e,qt,s,!0)},Vn.lowerCase=qa,Vn.lowerFirst=$a,Vn.lt=ua,Vn.lte=da,Vn.max=function(e){return e&&e.length?mi(e,ic,Ei):r},Vn.maxBy=function(e,t){return e&&e.length?mi(e,cs(t,2),Ei):r},Vn.mean=function(e){return $t(e,ic)},Vn.meanBy=function(e,t){return $t(e,cs(t,2))},Vn.min=function(e){return e&&e.length?mi(e,ic,Mi):r},Vn.minBy=function(e,t){return e&&e.length?mi(e,cs(t,2),Mi):r},Vn.stubArray=mc,Vn.stubFalse=gc,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Sc,Vn.nth=function(e,t){return e&&e.length?zi(e,fa(t)):r},Vn.noConflict=function(){return mt._===this&&(mt._=Ve),this},Vn.noop=cc,Vn.now=Eo,Vn.pad=function(e,t,n){e=ba(e);var i=(t=fa(t))?fn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Wr(ft(r),n)+e+Wr(pt(r),n)},Vn.padEnd=function(e,t,n){e=ba(e);var i=(t=fa(t))?fn(e):0;return t&&i<t?e+Wr(t-i,n):e},Vn.padStart=function(e,t,n){e=ba(e);var i=(t=fa(t))?fn(e):0;return t&&i<t?Wr(t-i,n)+e:e},Vn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Sn(ba(e).replace(oe,""),t||0)},Vn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ys(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=pa(e),t===r?(t=e,e=0):t=pa(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=Cn();return yn(e+s*(t-e+dt("1e-"+((s+"").length-1))),t)}return Gi(e,t)},Vn.reduce=function(e,t,n){var i=Wo(e)?Ut:Kt,r=arguments.length<3;return i(e,cs(t,4),n,r,hi)},Vn.reduceRight=function(e,t,n){var i=Wo(e)?Mt:Kt,r=arguments.length<3;return i(e,cs(t,4),n,r,pi)},Vn.repeat=function(e,t,n){return t=(n?ys(e,t,n):t===r)?1:fa(t),Ki(ba(e),t)},Vn.replace=function(){var e=arguments,t=ba(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vn.result=function(e,t,n){var i=-1,s=(t=yr(t,e)).length;for(s||(s=1,e=r);++i<s;){var o=null==e?r:e[Ls(t[i])];o===r&&(i=s,o=n),e=Xo(o)?o.call(e):o}return e},Vn.round=Cc,Vn.runInContext=e,Vn.sample=function(e){return(Wo(e)?Xn:Xi)(e)},Vn.size=function(e){if(null==e)return 0;if($o(e))return aa(e)?fn(e):e.length;var t=fs(e);return t==_||t==x?e.size:Li(e).length},Vn.snakeCase=Ja,Vn.some=function(e,t,n){var i=Wo(e)?Ft:rr;return n&&ys(e,t,n)&&(t=r),i(e,cs(t,3))},Vn.sortedIndex=function(e,t){return sr(e,t)},Vn.sortedIndexBy=function(e,t,n){return or(e,t,cs(n,2))},Vn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=sr(e,t);if(i<n&&Vo(e[i],t))return i}return-1},Vn.sortedLastIndex=function(e,t){return sr(e,t,!0)},Vn.sortedLastIndexBy=function(e,t,n){return or(e,t,cs(n,2),!0)},Vn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=sr(e,t,!0)-1;if(Vo(e[n],t))return n}return-1},Vn.startCase=Ga,Vn.startsWith=function(e,t,n){return e=ba(e),n=null==n?0:ai(fa(n),0,e.length),t=lr(t),e.slice(n,n+t.length)==t},Vn.subtract=kc,Vn.sum=function(e){return e&&e.length?Yt(e,ic):0},Vn.sumBy=function(e,t){return e&&e.length?Yt(e,cs(t,2)):0},Vn.template=function(e,t,n){var i=Vn.templateSettings;n&&ys(e,t,n)&&(t=r),e=ba(e),t=Sa({},t,i,Zr);var s,o,a=Sa({},t.imports,i.imports,Zr),c=Pa(a),l=en(a,c),u=0,d=t.interpolate||Ce,h="__p += '",p=Re((t.escape||Ce).source+"|"+d.source+"|"+(d===ee?fe:Ce).source+"|"+(t.evaluate||Ce).source+"|$","g"),f="//# sourceURL="+(je.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,n,i,r,a,c){return i||(i=r),h+=e.slice(u,c).replace(ke,an),n&&(s=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),h+="';\n";var m=je.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(q,""):h).replace($,"$1").replace(J,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Za((function(){return Te(c,f+"return "+h).apply(r,l)}));if(g.source=h,Yo(g))throw g;return g},Vn.times=function(e,t){if((e=fa(e))<1||e>f)return[];var n=g,i=yn(e,g);t=cs(t),e-=g;for(var r=Xt(i,t);++n<e;)t(n);return r},Vn.toFinite=pa,Vn.toInteger=fa,Vn.toLength=ma,Vn.toLower=function(e){return ba(e).toLowerCase()},Vn.toNumber=ga,Vn.toSafeInteger=function(e){return e?ai(fa(e),-9007199254740991,f):0===e?e:0},Vn.toString=ba,Vn.toUpper=function(e){return ba(e).toUpperCase()},Vn.trim=function(e,t,n){if((e=ba(e))&&(n||t===r))return Zt(e);if(!e||!(t=lr(t)))return e;var i=mn(e),s=mn(t);return Sr(i,nn(i,s),rn(i,s)+1).join("")},Vn.trimEnd=function(e,t,n){if((e=ba(e))&&(n||t===r))return e.slice(0,gn(e)+1);if(!e||!(t=lr(t)))return e;var i=mn(e);return Sr(i,0,rn(i,mn(t))+1).join("")},Vn.trimStart=function(e,t,n){if((e=ba(e))&&(n||t===r))return e.replace(oe,"");if(!e||!(t=lr(t)))return e;var i=mn(e);return Sr(i,nn(i,mn(t))).join("")},Vn.truncate=function(e,t){var n=30,i="...";if(ea(t)){var s="separator"in t?t.separator:s;n="length"in t?fa(t.length):n,i="omission"in t?lr(t.omission):i}var o=(e=ba(e)).length;if(cn(e)){var a=mn(e);o=a.length}if(n>=o)return e;var c=n-fn(i);if(c<1)return i;var l=a?Sr(a,0,c).join(""):e.slice(0,c);if(s===r)return l+i;if(a&&(c+=l.length-c),sa(s)){if(e.slice(c).search(s)){var u,d=l;for(s.global||(s=Re(s.source,ba(me.exec(s))+"g")),s.lastIndex=0;u=s.exec(d);)var h=u.index;l=l.slice(0,h===r?c:h)}}else if(e.indexOf(lr(s),c)!=c){var p=l.lastIndexOf(s);p>-1&&(l=l.slice(0,p))}return l+i},Vn.unescape=function(e){return(e=ba(e))&&Y.test(e)?e.replace(G,vn):e},Vn.uniqueId=function(e){var t=++Le;return ba(e)+t},Vn.upperCase=Ka,Vn.upperFirst=Ya,Vn.each=bo,Vn.eachRight=yo,Vn.first=qs,ac(Vn,function(){var e={};return wi(Vn,(function(t,n){je.call(Vn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Vn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vn[e].placeholder=Vn})),It(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===r?1:Gt(fa(n),0);var i=this.__filtered__&&!t?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,g),type:e+(i.__dir__<0?"Right":"")}),i},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:cs(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(ic)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Yi((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return xi(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(jo(cs(e)))},Wn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(g)},wi(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=Vn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);s&&(Vn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,c=t instanceof Wn,l=a[0],u=c||Wo(t),d=function(e){var t=s.apply(Vn,Lt([e],a));return i&&h?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,m=c&&!p;if(!o&&u){t=m?t:new Wn(this);var g=e.apply(t,a);return g.__actions__.push({func:po,args:[d],thisArg:r}),new zn(g,h)}return f&&m?e.apply(this,a):(g=this.thru(d),f?i?g.value()[0]:g.value():g)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=xe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Vn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Wo(r)?r:[],e)}return this[n]((function(n){return t.apply(Wo(n)?n:[],e)}))}})),wi(Wn.prototype,(function(e,t){var n=Vn[t];if(n){var i=n.name+"";je.call(Pn,i)||(Pn[i]=[]),Pn[i].push({name:t,func:n})}})),Pn[Vr(r,2).name]=[{name:"wrapper",func:r}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ir(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ir(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ir(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wo(e),i=t<0,r=n?e.length:0,s=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var s=n[i],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=yn(t,e+o);break;case"takeRight":e=Gt(e,t-o)}}return{start:e,end:t}}(0,r,this.__views__),o=s.start,a=s.end,c=a-o,l=i?a:o-1,u=this.__iteratees__,d=u.length,h=0,p=yn(c,this.__takeCount__);if(!n||!i&&r==c&&p==c)return fr(e,this.__actions__);var f=[];e:for(;c--&&h<p;){for(var m=-1,g=e[l+=t];++m<d;){var v=u[m],b=v.iteratee,y=v.type,w=b(g);if(2==y)g=w;else if(!w){if(1==y)continue e;break e}}f[h++]=g}return f},Vn.prototype.at=fo,Vn.prototype.chain=function(){return ho(this)},Vn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===r&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var t,n=this;n instanceof Hn;){var i=Ms(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:po,args:[Qs],thisArg:r}),new zn(t,this.__chain__)}return this.thru(Qs)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Xe&&(Vn.prototype[Xe]=function(){return this}),Vn}();mt._=bn,(i=function(){return bn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},1633:(e,t,n)=>{"use strict";n.d(t,{T:()=>r});var i=n(1732);function r(e){return Symbol.asyncIterator&&(0,i.T)(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}},1673:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},1675:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram")},1679:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop")},1732:(e,t,n)=>{"use strict";function i(e){return"function"===typeof e}n.d(t,{T:()=>i})},1770:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block")},1902:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},1998:(e,t,n)=>{"use strict";n.d(t,{Tg:()=>m});var i=n(7827),r=n(5505),s=n(3554),o=n(5868),a=n(3983),c=n(1633),l=n(7391),u=n(5637),d=n(9788),h=n(1732),p=n(3414),f=n(4294);function m(e){if(e instanceof o.c)return e;if(null!=e){if((0,a.l)(e))return b=e,new o.c((function(e){var t=b[f.s]();if((0,h.T)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,r.X)(e))return v=e,new o.c((function(e){for(var t=0;t<v.length&&!e.closed;t++)e.next(v[t]);e.complete()}));if((0,s.y)(e))return m=e,new o.c((function(e){m.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,p.m)}));if((0,c.T)(e))return g(e);if((0,u.x)(e))return n=e,new o.c((function(e){var t,r;try{for(var s=(0,i.Ju)(n),o=s.next();!o.done;o=s.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}e.complete()}));if((0,d.U)(e))return t=e,g((0,d.C)(t))}var t,n,m,v,b;throw(0,l.L)(e)}function g(e){return new o.c((function(t){(function(e,t){var n,r,s,o;return(0,i.sH)(this,void 0,void 0,(function(){var a,c;return(0,i.YH)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=(0,i.xN)(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),s={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}},2047:(e,t,n)=>{"use strict";n.d(t,{Kn:()=>c,yU:()=>a,Uv:()=>l});var i=n(7827),r=n(1732),s=(0,n(4861).L)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})),o=n(4004),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,o,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=(0,i.Ju)(c),d=l.next();!d.done;d=l.next()){d.value.remove(this)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var h=this.initialTeardown;if((0,r.T)(h))try{h()}catch(b){a=b instanceof s?b.errors:[b]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var f=(0,i.Ju)(p),m=f.next();!m.done;m=f.next()){var g=m.value;try{u(g)}catch(y){a=null!==a&&void 0!==a?a:[],y instanceof s?a=(0,i.fX)((0,i.fX)([],(0,i.zs)(a)),(0,i.zs)(y.errors)):a.push(y)}}}catch(w){n={error:w}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(a)throw new s(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)u(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,o.o)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,o.o)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),c=a.EMPTY;function l(e){return e instanceof a||e&&"closed"in e&&(0,r.T)(e.remove)&&(0,r.T)(e.add)&&(0,r.T)(e.unsubscribe)}function u(e){(0,r.T)(e)?e():e.unsubscribe()}},2183:(e,t,n)=>{"use strict";var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},2289:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"}),"WorkspacePremium")},2375:(e,t,n)=>{"use strict";var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},2476:(e,t,n)=>{"use strict";n.d(t,{R0:()=>a,ms:()=>s,lI:()=>o});var i=n(1732);function r(e){return e[e.length-1]}function s(e){return(0,i.T)(r(e))?e.pop():void 0}function o(e){return(t=r(e))&&(0,i.T)(t.schedule)?e.pop():void 0;var t}function a(e,t){return"number"===typeof r(e)?e.pop():t}},2600:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"}),"PushPin")},2631:(e,t,n)=>{"use strict";var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"m2 22 14-5-9-9zm12.53-9.47 5.59-5.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.07-1.07-2.82-1.07-3.89 0l-5.59 5.59zm-4.47-5.65-.59.59 1.06 1.06.59-.59c1.07-1.07 1.07-2.82 0-3.89l-.59-.59-1.06 1.07.59.59c.48.48.48 1.28 0 1.76m7 5-1.59 1.59 1.06 1.06 1.59-1.59c.49-.49 1.28-.49 1.77 0l1.61 1.61 1.06-1.06-1.61-1.61c-1.08-1.07-2.82-1.07-3.89 0m-2-6-3.59 3.59 1.06 1.06 3.59-3.59c1.07-1.07 1.07-2.82 0-3.89l-1.59-1.59-1.06 1.06 1.59 1.59c.48.49.48 1.29 0 1.77"}),"Celebration")},2682:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16.5 3c-.96 0-1.9.25-2.73.69L12 9h3l-3 10 1-9h-3l1.54-5.39C10.47 3.61 9.01 3 7.5 3 4.42 3 2 5.42 2 8.5c0 4.13 4.16 7.18 10 12.5 5.47-4.94 10-8.26 10-12.5C22 5.42 19.58 3 16.5 3"}),"HeartBroken")},2770:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=n(9950).createContext(void 0)},2917:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(7528),r=n(8587),s=n(8168),o=n(9950),a=n(2004),c=n(8283),l=n(8465);function u(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function d(e){return parseFloat(e)}var h=n(7497),p=n(9254),f=n(8463),m=n(1763),g=n(423);function v(e){return(0,g.Ay)("MuiSkeleton",e)}(0,m.A)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var b,y,w,S,C=n(4414);const k=["animation","className","component","height","style","variant","width"];let T,_,E,R;const A=(0,c.i7)(T||(T=b||(b=(0,i.A)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),I=(0,c.i7)(_||(_=y||(y=(0,i.A)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),x=(0,p.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const i=u(t.shape.borderRadius)||"px",r=d(t.shape.borderRadius);return(0,s.A)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:(0,h.X4)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(i,"/").concat(Math.round(r/.6*10)/10).concat(i),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,c.AH)(E||(E=w||(w=(0,i.A)(["\n      animation: "," 2s ease-in-out 0.5s infinite;\n    "]))),A)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,c.AH)(R||(R=S||(S=(0,i.A)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 2s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),I,(n.vars||n).palette.action.hover)})),P=o.forwardRef((function(e,t){const n=(0,f.b)({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:o,component:c="span",height:u,style:d,variant:h="text",width:p}=n,m=(0,r.A)(n,k),g=(0,s.A)({},n,{animation:i,component:c,variant:h,hasChildren:Boolean(m.children)}),b=(e=>{const{classes:t,variant:n,animation:i,hasChildren:r,width:s,height:o}=e,a={root:["root",n,i,r&&"withChildren",r&&!s&&"fitContent",r&&!o&&"heightAuto"]};return(0,l.A)(a,v,t)})(g);return(0,C.jsx)(x,(0,s.A)({as:c,ref:t,className:(0,a.A)(b.root,o),ownerState:g},m,{style:(0,s.A)({width:p,height:u},d)}))}))},2960:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents")},3125:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(8587),r=n(8168),s=n(9950),o=n(2004),a=n(8465);var c=n(9254),l=n(8463),u=n(1676),d=n(1763),h=n(423);function p(e){return(0,h.Ay)("MuiToggleButtonGroup",e)}const f=(0,d.A)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);var m=n(9786),g=n(2770),v=n(4099),b=n(4414);const y=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],w=(0,c.Ay)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(f.grouped)]:t.grouped},{["& .".concat(f.grouped)]:t["grouped".concat((0,u.A)(n.orientation))]},{["& .".concat(f.firstButton)]:t.firstButton},{["& .".concat(f.lastButton)]:t.lastButton},{["& .".concat(f.middleButton)]:t.middleButton},t.root,"vertical"===n.orientation&&t.vertical,n.fullWidth&&t.fullWidth]}})((e=>{let{ownerState:t,theme:n}=e;return(0,r.A)({display:"inline-flex",borderRadius:(n.vars||n).shape.borderRadius},"vertical"===t.orientation&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{["& .".concat(f.grouped)]:(0,r.A)({},"horizontal"===t.orientation?{["&.".concat(f.selected," + .").concat(f.grouped,".").concat(f.selected)]:{borderLeft:0,marginLeft:0}}:{["&.".concat(f.selected," + .").concat(f.grouped,".").concat(f.selected)]:{borderTop:0,marginTop:0}})},"horizontal"===t.orientation?{["& .".concat(f.firstButton,",& .").concat(f.middleButton)]:{borderTopRightRadius:0,borderBottomRightRadius:0},["& .".concat(f.lastButton,",& .").concat(f.middleButton)]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{["& .".concat(f.firstButton,",& .").concat(f.middleButton)]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},["& .".concat(f.lastButton,",& .").concat(f.middleButton)]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},"horizontal"===t.orientation?{["& .".concat(f.lastButton,".").concat(v.A.disabled,",& .").concat(f.middleButton,".").concat(v.A.disabled)]:{borderLeft:"1px solid transparent"}}:{["& .".concat(f.lastButton,".").concat(v.A.disabled,",& .").concat(f.middleButton,".").concat(v.A.disabled)]:{borderTop:"1px solid transparent"}})})),S=s.forwardRef((function(e,t){const n=(0,l.b)({props:e,name:"MuiToggleButtonGroup"}),{children:c,className:d,color:h="standard",disabled:f=!1,exclusive:v=!1,fullWidth:S=!1,onChange:C,orientation:k="horizontal",size:T="medium",value:_}=n,E=(0,i.A)(n,y),R=(0,r.A)({},n,{disabled:f,fullWidth:S,orientation:k,size:T}),A=(e=>{const{classes:t,orientation:n,fullWidth:i,disabled:r}=e,s={root:["root","vertical"===n&&"vertical",i&&"fullWidth"],grouped:["grouped","grouped".concat((0,u.A)(n)),r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,a.A)(s,p,t)})(R),I=s.useCallback(((e,t)=>{if(!C)return;const n=_&&_.indexOf(t);let i;_&&n>=0?(i=_.slice(),i.splice(n,1)):i=_?_.concat(t):[t],C(e,i)}),[C,_]),x=s.useCallback(((e,t)=>{C&&C(e,_===t?null:t)}),[C,_]),P=s.useMemo((()=>({className:A.grouped,onChange:v?x:I,value:_,size:T,fullWidth:S,color:h,disabled:f})),[A.grouped,v,x,I,_,T,S,h,f]),O=function(e){return s.Children.toArray(e).filter((e=>s.isValidElement(e)))}(c),N=O.length,D=e=>{const t=0===e,n=e===N-1;return t&&n?"":t?A.firstButton:n?A.lastButton:A.middleButton};return(0,b.jsx)(w,(0,r.A)({role:"group",className:(0,o.A)(A.root,d),ref:t,ownerState:R},E,{children:(0,b.jsx)(m.A.Provider,{value:P,children:O.map(((e,t)=>(0,b.jsx)(g.A.Provider,{value:D(t),children:e},t)))})}))}))},3217:(e,t,n)=>{var i=n(6238),r=n(7542);n(3992),t.qg=i.parse,i.parseParams,i.parseFmtpConfig,i.parsePayloads,i.parseRemoteCandidates,i.parseImageAttributes,i.parseSimulcastStreamList},3414:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i=n(18),r=n(6950);function s(e){r.f.setTimeout((function(){var t=i.$.onUnhandledError;if(!t)throw e;t(e)}))}},3554:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var i=n(1732);function r(e){return(0,i.T)(null===e||void 0===e?void 0:e.then)}},3983:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var i=n(4294),r=n(1732);function s(e){return(0,r.T)(e[i.s])}},3992:e=>{var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},4004:(e,t,n)=>{"use strict";function i(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{o:()=>i})},4066:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public")},4099:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,J:()=>s});var i=n(1763),r=n(423);function s(e){return(0,r.Ay)("MuiToggleButton",e)}const o=(0,i.A)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"])},4294:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var i="function"===typeof Symbol&&Symbol.observable||"@@observable"},4756:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"m21.22 18.02 2 2H24v-2zm.77-2 .01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74M2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47"}),"StopScreenShare")},4767:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73z"}),"ScreenShare")},4861:(e,t,n)=>{"use strict";function i(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{L:()=>i})},5204:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff")},5257:(e,t,n)=>{"use strict";n.d(t,{of:()=>s});var i=n(2476),r=n(8165);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.lI)(e);return(0,r.H)(e,n)}},5379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook")},5505:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var i=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e}},5637:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var i=n(8041),r=n(1732);function s(e){return(0,r.T)(null===e||void 0===e?void 0:e[i.l])}},5855:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff")},5868:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var i=n(7917),r=n(2047),s=n(4294),o=n(8117);function a(e){return 0===e.length?o.D:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var c=n(18),l=n(1732),u=n(6634),d=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var s,o=this,a=(s=e)&&s instanceof i.vU||function(e){return e&&(0,l.T)(e.next)&&(0,l.T)(e.error)&&(0,l.T)(e.complete)}(s)&&(0,r.Uv)(s)?e:new i.Ms(e,t,n);return(0,u.Y)((function(){var e=o,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?o._subscribe(a):o._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h(t))((function(t,r){var s=new i.Ms({next:function(t){try{e(t)}catch(n){r(n),s.unsubscribe()}},error:r,complete:t});n.subscribe(s)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[s.s]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function h(e){var t;return null!==(t=null!==e&&void 0!==e?e:c.$.Promise)&&void 0!==t?t:Promise}},5965:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder")},6117:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m11 15H4v-2h16zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20z"}),"CardGiftcard")},6164:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser")},6238:(e,t,n)=>{var i=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var s=e.push?{}:r?t[e.name]:t;!function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var s=0;s<n.length;s+=1)null!=e[s+1]&&(t[n[s]]=i(e[s+1]))}(n.match(e.reg),s,e.names,e.name),e.push&&t[e.push].push(s)},s=n(3992),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],i=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),i=n[n.length-1]);for(var a=0;a<(s[t]||[]).length;a+=1){var c=s[t][a];if(c.reg.test(o))return r(c,i,o)}})),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=i(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=i(e):(t=i(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},6281:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},6389:(e,t,n)=>{"use strict";var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"}),"WorkspacePremium")},6487:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M19 11h-8v6h8zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2m-2 .02H3V4.97h18z"}),"PictureInPictureAlt")},6634:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,l:()=>o});var i=n(18),r=null;function s(e){if(i.$.useDeprecatedSynchronousErrorHandling){var t=!r;if(t&&(r={errorThrown:!1,error:null}),e(),t){var n=r,s=n.errorThrown,o=n.error;if(r=null,s)throw o}}else e()}function o(e){i.$.useDeprecatedSynchronousErrorHandling&&r&&(r.errorThrown=!0,r.error=e)}},6904:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share")},6932:(e,t,n)=>{"use strict";n.d(t,{c7:()=>_e,kb:()=>te,Dv:()=>me,Gc:()=>ne,R3:()=>Te,s9:()=>pe});var i=n(9379),r=n(45),s=n(4414),o=n(9950);const a=e=>"string"===typeof e,c=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},l=e=>null==e?"":""+e,u=/###/g,d=e=>e&&e.indexOf("###")>-1?e.replace(u,"."):e,h=e=>!e||a(e),p=(e,t,n)=>{const i=a(t)?t.split("."):t;let r=0;for(;r<i.length-1;){if(h(e))return{};const t=d(i[r]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++r}return h(e)?{}:{obj:e,k:d(i[r])}},f=(e,t,n)=>{const{obj:i,k:r}=p(e,t,Object);if(void 0!==i||1===t.length)return void(i[r]=n);let s=t[t.length-1],o=t.slice(0,t.length-1),a=p(e,o,Object);for(;void 0===a.obj&&o.length;)s="".concat(o[o.length-1],".").concat(s),o=o.slice(0,o.length-1),a=p(e,o,Object),a&&a.obj&&"undefined"!==typeof a.obj["".concat(a.k,".").concat(s)]&&(a.obj=void 0);a.obj["".concat(a.k,".").concat(s)]=n},m=(e,t)=>{const{obj:n,k:i}=p(e,t);if(n)return n[i]},g=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?a(e[i])||e[i]instanceof String||a(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):g(e[i],t[i],n):e[i]=t[i]);return e},v=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const y=e=>a(e)?e.replace(/[&<>"'\/]/g,(e=>b[e])):e;const w=[" ",",","?","!",";"],S=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(n);let r=e;for(let s=0;s<i.length;){if(!r||"object"!==typeof r)return;let e,t="";for(let o=s;o<i.length;++o)if(o!==s&&(t+=n),t+=i[o],e=r[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<i.length-1)continue;s+=o-s+1;break}r=e}return r},k=e=>e&&e.replace("_","-"),T={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||T,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(a(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new _(this.logger,(0,i.A)((0,i.A)({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new _(this.logger,e)}}var E=new _;class R{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,i]=e;for(let r=0;r<i;r++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[i,r]=t;for(let s=0;s<r;s++)i.apply(i,[e,...n])}))}}}class A extends R{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):a(n)&&r?o.push(...n.split(r)):o.push(n)));const c=m(this.data,o);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!c&&s&&a(n)?C(this.data&&this.data[e]&&this.data[e][t],n,r):c}addResource(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),f(this.data,o,i),r.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in n)(a(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let c=m(this.data,a)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?g(c,n,s):c=(0,i.A)((0,i.A)({},c),n),f(this.data,a,c),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?(0,i.A)((0,i.A)({},{}),this.getResource(e,t)):this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var I={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,r){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,i,r))})),t}};const x={};class P extends R{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=E.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const i=w.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const r=S.getRegExp("(".concat(i.map((e=>"?"===e?"\\?":e)).join("|"),")"));let s=!r.test(e);if(!s){const t=e.indexOf(n);t>0&&!r.test(e.substring(0,t))&&(s=!0)}return s})(e,n,i);if(s&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:a(r)?[r]:r};const s=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),e=s.join(i)}return{key:e,namespaces:a(r)?[r]:r}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t=(0,i.A)({},t)),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],t),l=c[c.length-1],u=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(d){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:"".concat(l).concat(e).concat(o),usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:"".concat(l).concat(e).concat(o)}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:o}const h=this.resolve(e,t);let p=h&&h.res;const f=h&&h.usedKey||o,m=h&&h.exactUsedKey||o,g=Object.prototype.toString.apply(p),v=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!a(p)&&"boolean"!==typeof p&&"number"!==typeof p;if(!(b&&p&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(g)<0)||a(v)&&Array.isArray(p))if(b&&a(v)&&Array.isArray(p))p=p.join(v),p&&(p=this.extendTranslation(p,e,t,n));else{let r=!1,c=!1;const d=void 0!==t.count&&!a(t.count),f=P.hasDefaultValue(t),m=d?this.pluralResolver.getSuffix(u,t.count,t):"",g=t.ordinal&&d?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",v=d&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),b=v&&t["defaultValue".concat(this.options.pluralSeparator,"zero")]||t["defaultValue".concat(m)]||t["defaultValue".concat(g)]||t.defaultValue;!this.isValidLookup(p)&&f&&(r=!0,p=b),this.isValidLookup(p)||(c=!0,p=o);const y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&c?void 0:p,w=f&&b!==p&&this.options.updateMissing;if(c||r||w){if(this.logger.log(w?"updateKey":"missingKey",u,l,o,w?b:p),s){const e=this.resolve(o,(0,i.A)((0,i.A)({},t),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,i)=>{const r=f&&i!==p?i:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,n,r,w,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,l,n,r,w,t),this.emit("missingKey",e,l,n,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&d?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);v&&t["defaultValue".concat(this.options.pluralSeparator,"zero")]&&n.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&n.push("".concat(this.options.pluralSeparator,"zero")),n.forEach((n=>{r([e],o+n,t["defaultValue".concat(n)]||b)}))})):r(e,o,b))}p=this.extendTranslation(p,e,t,h,n),c&&p===o&&this.options.appendNamespaceToMissingKey&&(p="".concat(l,":").concat(o)),(c||r)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(o):o,r?p:void 0):this.options.parseMissingKeyHandler(p))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,(0,i.A)((0,i.A)({},t),{},{ns:c})):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");return r?(h.res=e,h.usedParams=this.getUsedParamsDetails(t),h):e}if(s){const e=Array.isArray(p),n=e?[]:{},r=e?m:f;for(const o in p)if(Object.prototype.hasOwnProperty.call(p,o)){const e="".concat(r).concat(s).concat(o);n[o]=this.translate(e,(0,i.A)((0,i.A)({},t),{joinArrays:!1,ns:c})),n[o]===e&&(n[o]=p[o])}p=n}}return r?(h.res=p,h.usedParams=this.getUsedParamsDetails(t),h):p}extendTranslation(e,t,n,r,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,(0,i.A)((0,i.A)({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init((0,i.A)((0,i.A)({},n),{interpolation:(0,i.A)((0,i.A)({},this.options.interpolation),n.interpolation)}));const c=a(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(c){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let u=n.replace&&!a(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=(0,i.A)((0,i.A)({},this.options.interpolation.defaultVariables),u)),e=this.interpolator.interpolate(e,u,n.lng||this.language||r.usedLng,n),c){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return s&&s[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate(...i,t)}),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,l=a(c)?[c]:c;return void 0!==e&&null!==e&&l&&l.length&&!1!==n.applyPostProcessor&&(e=I.handle(l,e,t,this.options&&this.options.postProcessPassResolved?(0,i.A)({i18nResolved:(0,i.A)((0,i.A)({},r),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,i,r,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const c=this.extractFromKey(e,o),l=c.key;n=l;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=void 0!==o.count&&!a(o.count),h=d&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),p=void 0!==o.context&&(a(o.context)||"number"===typeof o.context)&&""!==o.context,f=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);u.forEach((e=>{this.isValidLookup(t)||(s=e,!x["".concat(f[0],"-").concat(e)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(x["".concat(f[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((n=>{if(this.isValidLookup(t))return;r=n;const s=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,n,e,o);else{let e;d&&(e=this.pluralResolver.getSuffix(n,o.count,o));const t="".concat(this.options.pluralSeparator,"zero"),i="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(s.push(l+e),o.ordinal&&0===e.indexOf(i)&&s.push(l+e.replace(i,this.options.pluralSeparator)),h&&s.push(l+t)),p){const n="".concat(l).concat(this.options.contextSeparator).concat(o.context);s.push(n),d&&(s.push(n+e),o.ordinal&&0===e.indexOf(i)&&s.push(n+e.replace(i,this.options.pluralSeparator)),h&&s.push(n+t))}}let a;for(;a=s.pop();)this.isValidLookup(t)||(i=a,t=this.getResource(n,e,a,o))})))}))})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:s}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!a(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=(0,i.A)((0,i.A)({},this.options.interpolation.defaultVariables),r)),!n){r=(0,i.A)({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const O=e=>e.charAt(0).toUpperCase()+e.slice(1);class N{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=E.create("languageUtils")}getScriptPartFromCode(e){if(!(e=k(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=k(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(a(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map((e=>e.toLowerCase())):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=O(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=O(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=O(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),a(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],r=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return a(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):a(e)&&r(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&r(this.formatLanguageCode(e))})),i}}let D=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],j={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const L=["v1","v2","v3"],U=["v4"],M={zero:0,one:1,two:2,few:3,many:4,other:5};class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=E.create("pluralResolver"),this.options.compatibilityJSON&&!U.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return D.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:j[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const i=k("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(i,{type:r})}catch(n){if(!e.match(/-|_/))return;const i=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(i,t)}return this.pluralRulesCache[s]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>"".concat(t).concat(e)))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>M[e]-M[t])).map((e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e))):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"===typeof i?"_plural_".concat(i.toString()):r():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!L.includes(this.options.compatibilityJSON)}}const V=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=((e,t,n)=>{const i=m(e,n);return void 0!==i?i:m(t,n)})(e,t,n);return!s&&r&&a(n)&&(s=C(e,n,i),void 0===s&&(s=C(t,n,i))),s},B=e=>e.replace(/\$/g,"$$$$");class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=E.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:s,suffix:o,suffixEscaped:a,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:y,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=r?v(r):s||"{{",this.suffix=o?v(o):a||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=d?v(d):h||v("$t("),this.nestingSuffix=p?v(p):f||v(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,t,n,r){let s,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=e=>{if(e.indexOf(this.formatSeparator)<0){const s=V(t,u,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,(0,i.A)((0,i.A)((0,i.A)({},r),t),{},{interpolationkey:e})):s}const s=e.split(this.formatSeparator),o=s.shift().trim(),a=s.join(this.formatSeparator).trim();return this.format(V(t,u,o,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,(0,i.A)((0,i.A)((0,i.A)({},r),t),{},{interpolationkey:o}))};this.resetRegExp();const h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>B(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?B(this.escape(e)):B(e)}].forEach((t=>{for(c=0;s=t.regex.exec(e);){const n=s[1].trim();if(o=d(n),void 0===o)if("function"===typeof h){const t=h(e,s,r);o=a(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(p){o=s[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else a(o)||this.useRawValueToEscape||(o=l(o));const i=t.safeValue(o);if(e=e.replace(s[0],i),p?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,c++,c>=this.maxReplaces)break}})),e}nest(e,t){let n,r,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp("".concat(n,"[ ]*{")));let o="{".concat(r[1]);e=r[0],o=this.interpolate(o,s);const a=o.match(/'/g),c=o.match(/"/g);(a&&a.length%2===0&&!c||c.length%2!==0)&&(o=o.replace(/'/g,'"'));try{s=JSON.parse(o),t&&(s=(0,i.A)((0,i.A)({},t),s))}catch(l){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),l),"".concat(e).concat(n).concat(o)}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let u=[];s=(0,i.A)({},o),s=s.replace&&!a(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let d=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),u=e,d=!0}if(r=t(c.call(this,n[1].trim(),s),s),r&&n[0]===e&&!a(r))return r;a(r)||(r=l(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),d&&(r=u.reduce(((e,t)=>this.format(e,t,o.lng,(0,i.A)((0,i.A)({},o),{},{interpolationkey:n[1].trim()}))),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const z=e=>{const t={};return(n,r,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o=(0,i.A)((0,i.A)({},o),{},{[s.interpolationkey]:void 0}));const a=r+JSON.stringify(o);let c=t[a];return c||(c=e(k(r),s),t[a]=c),c(n)}};class W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=E.create("formatter"),this.options=e,this.formats={number:z(((e,t)=>{const n=new Intl.NumberFormat(e,(0,i.A)({},t));return e=>n.format(e)})),currency:z(((e,t)=>{const n=new Intl.NumberFormat(e,(0,i.A)((0,i.A)({},t),{},{style:"currency"}));return e=>n.format(e)})),datetime:z(((e,t)=>{const n=new Intl.DateTimeFormat(e,(0,i.A)({},t));return e=>n.format(e)})),relativetime:z(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,(0,i.A)({},t));return e=>n.format(e,t.range||"day")})),list:z(((e,t)=>{const n=new Intl.ListFormat(e,(0,i.A)({},t));return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=z(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find((e=>e.indexOf(")")>-1))){const e=s.findIndex((e=>e.indexOf(")")>-1));s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce(((e,t)=>{const{formatName:s,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),r=i.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=r),"false"===r&&(n[s]=!1),"true"===r&&(n[s]=!0),isNaN(r)||(n[s]=parseInt(r,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[s]){let t=e;try{const a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},c=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[s](e,c,(0,i.A)((0,i.A)((0,i.A)({},o),r),a))}catch(a){this.logger.warn(a)}return t}return this.logger.warn("there was no format function for ".concat(s)),e}),e)}}class q extends R{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=E.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const r={},s={},o={},a={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const o="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===s[o]&&(s[o]=!0):(this.state[o]=1,i=!1,void 0===s[o]&&(s[o]=!0),void 0===r[o]&&(r[o]=!0),void 0===a[t]&&(a[t]=!0)))})),i||(o[e]=!0)})),(Object.keys(r).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const i=e.split("|"),r=i[0],s=i[1];t&&this.emit("failedLoading",r,s,t),!t&&n&&this.store.addResourceBundle(r,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:i,k:r}=p(e,t,Object);i[r]=i[r]||[],i[r].push(n)})(n.loaded,[r],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:r,callback:s});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*r,s)}),r):s(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"===typeof n.then?n.then((e=>o(null,e))).catch(o):o(null,n)}catch(c){o(c)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();a(e)&&(e=this.languageUtils.toResolveHierarchy(e)),a(t)&&(t=[t]);const r=this.queueLoad(e,t,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,((n,s)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(r," for language ").concat(i," failed"),n),!n&&s&&this.logger.log("".concat(t,"loaded namespace ").concat(r," for language ").concat(i),s),this.loaded(e,n,s)}))}saveMissing(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l=(0,i.A)((0,i.A)({},o),{},{isUpdate:s}),u=this.backend.create.bind(this.backend);if(u.length<6)try{let i;i=5===u.length?u(e,t,n,r,l):u(e,t,n,r),i&&"function"===typeof i.then?i.then((e=>a(null,e))).catch(a):a(null,i)}catch(c){a(c)}else u(e,t,n,r,a,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const $=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),a(e[1])&&(t.defaultValue=e[1]),a(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),J=e=>(a(e.ns)&&(e.ns=[e.ns]),a(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),a(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),G=()=>{};class K extends R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=J(e),this.services={},this.logger=E,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(a(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=$();this.options=(0,i.A)((0,i.A)((0,i.A)({},r),this.options),J(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=(0,i.A)((0,i.A)({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?E.init(s(this.modules.logger),this.options):E.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=W);const n=new N(this.options);this.store=new A(this.options.resources,this.options);const i=this.services;i.logger=E,i.resourceStore=this.store,i.languageUtils=n,i.pluralResolver=new F(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(i.formatter=s(t),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new H(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new q(s(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit(t,...i)})),this.modules.languageDetector&&(i.languageDetector=s(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=s(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new P(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=G),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=c(),l=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const n=a(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],i=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)i(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>i(e)))}this.options.preload&&this.options.preload.forEach((e=>i(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const i=c();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=G),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&I.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=c();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(e,s)=>{s?(r(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,i.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const n=a(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||r(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{s(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),i}getFixedT(e,t,n){var r=this;const s=function(e,t){let o;if("object"!==typeof t){for(var a=arguments.length,c=new Array(a>2?a-2:0),l=2;l<a;l++)c[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([e,t].concat(c))}else o=(0,i.A)({},t);o.lng=o.lng||s.lng,o.lngs=o.lngs||s.lngs,o.ns=o.ns||s.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||n||s.keyPrefix);const u=r.options.keySeparator||".";let d;return d=o.keyPrefix&&Array.isArray(e)?e.map((e=>"".concat(o.keyPrefix).concat(u).concat(e))):o.keyPrefix?"".concat(o.keyPrefix).concat(u).concat(e):e,r.t(d,o)};return a(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||i&&!s(r,e)))}loadNamespaces(e,t){const n=c();return this.options.ns?(a(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=c();a(e)&&(e=[e]);const i=this.options.preload||[],r=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return r.length?(this.options.preload=i.concat(r),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new N($());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new K(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=(0,i.A)((0,i.A)((0,i.A)({},this.options),e),{isClone:!0}),s=new K(r);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));return["store","services","language"].forEach((e=>{s[e]=this[e]})),s.services=(0,i.A)({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new A(this.store.data,r),s.services.resourceStore=s.store),s.translator=new P(s.services,r),s.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];s.emit(e,...n)})),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Y=K.createInstance();Y.createInstance=K.createInstance;Y.createInstance,Y.dir,Y.init,Y.loadResources,Y.reloadResources,Y.use,Y.changeLanguage,Y.getFixedT,Y.t,Y.exists,Y.setDefaultNamespace,Y.hasLoadedNamespace,Y.loadNamespaces,Y.loadLanguages;var X=n(7493),Z=n(5257);const Q=["children"],ee=(0,o.createContext)(void 0),te=e=>{const{call:t,children:n}=e;return(0,s.jsx)(ee.Provider,{value:t,children:n})},ne=()=>(0,o.useContext)(ee),ie="stream-video",re={debug:!1,currentLanguage:"en",fallbackLanguage:!1},se=(oe={},ae=ie,Object.entries(oe).reduce(((e,t)=>{let[n,i]=t;return e[n]={[ae]:i},e}),{}));var oe,ae;const ce=e=>e;class le{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.t=ce,this.init=async()=>{try{this.t=await this.i18nInstance.init()}catch(e){console.error("Failed to initialize translations: ".concat(JSON.stringify(e)))}return this},this.changeLanguage=async(e,t)=>{if(!this._checkIsInitialized())return;const n="undefined"!==typeof window&&window.navigator?window.navigator.language:void 0;await this.i18nInstance.changeLanguage(e||n),null===t||void 0===t||t(this.currentLanguage)},this.registerTranslationsForLanguage=e=>{let{lng:t,translations:n}=e;this._checkIsInitialized()&&this.i18nInstance.addResourceBundle(t,ie,n,!0,!0)},this._checkIsInitialized=()=>(this.i18nInstance.isInitialized||console.warn("I18n instance is not initialized. Call yourStreamI18nInstance.init()."),this.i18nInstance.isInitialized);const{debug:t=re.debug,currentLanguage:n=re.currentLanguage,fallbackLanguage:i=re.fallbackLanguage,translationsOverrides:r}=e;this.i18nInstance=Y.createInstance({debug:t,defaultNS:ie,fallbackLng:i,interpolation:{escapeValue:!1},keySeparator:!1,lng:n,nsSeparator:!1,parseMissingKeyHandler:e=>e,resources:se}),r&&this.i18nInstance.on("initialized",(()=>{Object.entries(r).forEach((e=>{let[t,n]=e;this.registerTranslationsForLanguage({lng:t,translations:n})}))}))}get currentLanguage(){return this._checkIsInitialized(),this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const ue=(0,o.createContext)({t:ce}),de=e=>{let{children:t}=e,n=(0,r.A)(e,Q);const{i18n:i,t:o}=he(n);return(0,s.jsx)(ue.Provider,{value:{t:o,i18n:i},children:t})},he=e=>{let{i18nInstance:t,language:n,fallbackLanguage:i,translationsOverrides:r}=e;const[s]=(0,o.useState)((()=>t||new le({currentLanguage:n,fallbackLanguage:i,translationsOverrides:r}))),[a,c]=(0,o.useState)((()=>ce));return(0,o.useEffect)((()=>{const{isInitialized:e}=s;e?n&&(null===s||void 0===s?void 0:s.currentLanguage)!==n&&s.changeLanguage(n).catch((e=>{console.log("Error while changing language",e)})):s.init().then((e=>c((()=>e.i18nInstance.t))))}),[s,t,n,r]),{i18n:s,t:a}},pe=()=>(0,o.useContext)(ue),fe=(0,o.createContext)(void 0),me=e=>{let{children:t,client:n,i18nInstance:i,language:r,translationsOverrides:o}=e;return(0,s.jsx)(fe.Provider,{value:n,children:(0,s.jsx)(de,{i18nInstance:i,language:r,translationsOverrides:o,children:t})})},ge=(e,t)=>{const[n,i]=(0,o.useState)((()=>{try{return X.mg.getCurrentValue(e)}catch(n){if("undefined"===typeof t)throw n;return t}}));return(0,o.useEffect)((()=>X.mg.createSubscription(e,i,(e=>{console.log("An error occurred while reading an observable",e),t&&i(t)}))),[t,e]),n},ve=Object.freeze([]),be=()=>{const e=ne();if(!e){const e='You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.';return console.warn(e),new X.iP}return e.state},ye=()=>{const{recording$:e}=be();return ge(e)},we=()=>{const{ownCapabilities$:e}=be();return ge(e)};function Se(e,t){const n=null!==t&&void 0!==t?t:e;return{status:e,optimisticStatus:n,isEnabled:"enabled"===e,isMute:"enabled"!==e,optimisticIsMute:"enabled"!==n,isTogglePending:n!==e}}function Ce(e){const t=(0,o.useMemo)((()=>(0,Z.of)(ve)),[]),[n,i]=(0,o.useState)(t),r=ge(n,ve);return{getDevices:()=>(n===t&&i(e.listDevices()),r)}}var ke=Object.freeze({__proto__:null,useAnonymousParticipantCount:()=>{const{anonymousParticipantCount$:e}=be();return ge(e)},useCallBlockedUserIds:()=>{const{blockedUserIds$:e}=be();return ge(e)},useCallCallingState:()=>{const{callingState$:e}=be();return ge(e)},useCallClosedCaptions:()=>{const{closedCaptions$:e}=be();return ge(e)},useCallCreatedAt:()=>{const{createdAt$:e}=be();return ge(e)},useCallCreatedBy:()=>{const{createdBy$:e}=be();return ge(e)},useCallCustomData:()=>{const{custom$:e}=be();return ge(e)},useCallEgress:()=>{const{egress$:e}=be();return ge(e)},useCallEndedAt:()=>{const{endedAt$:e}=be();return ge(e)},useCallEndedBy:()=>{const{endedBy$:e}=be();return ge(e)},useCallIngress:()=>{const{ingress$:e}=be();return ge(e)},useCallMembers:()=>{const{members$:e}=be();return ge(e)},useCallSession:()=>{const{session$:e}=be();return ge(e)},useCallSettings:()=>{const{settings$:e}=be();return ge(e)},useCallStartedAt:()=>{const{startedAt$:e}=be();return ge(e)},useCallStartsAt:()=>{const{startsAt$:e}=be();return ge(e)},useCallState:be,useCallStatsReport:()=>{const{callStatsReport$:e}=be();return ge(e)},useCallThumbnail:()=>{const{thumbnails$:e}=be();return ge(e)},useCallUpdatedAt:()=>{const{updatedAt$:e}=be();return ge(e)},useCameraState:()=>{const e=ne(),{camera:t}=e,{state:n}=t,r=ge(n.direction$),s=ge(n.mediaStream$),o=ge(n.selectedDevice$),{getDevices:a}=Ce(t),c=ge(n.hasBrowserPermission$),l=ge(n.isPromptingPermission$);return(0,i.A)({camera:t,direction:r,mediaStream:s,get devices(){return a()},hasBrowserPermission:c,isPromptingPermission:l,selectedDevice:o},Se(ge(n.status$),ge(n.optimisticStatus$)))},useDominantSpeaker:()=>{const{dominantSpeaker$:e}=be();return ge(e)},useHasOngoingScreenShare:()=>{const{hasOngoingScreenShare$:e}=be();return ge(e)},useHasPermissions:function(){const e=we();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.every((t=>null===e||void 0===e?void 0:e.includes(t)))},useIncomingVideoSettings:()=>{const e=ne();return ge(e.dynascaleManager.incomingVideoSettings$)},useIsCallCaptioningInProgress:()=>{const{captioning$:e}=be();return ge(e)},useIsCallHLSBroadcastingInProgress:()=>{const{egress$:e}=be(),t=ge(e);return!!t&&t.broadcasting},useIsCallLive:()=>{const{backstage$:e}=be();return!ge(e)},useIsCallRecordingInProgress:ye,useIsCallTranscribingInProgress:()=>{const{transcribing$:e}=be();return ge(e)},useLocalParticipant:()=>{const{localParticipant$:e}=be();return ge(e)},useMicrophoneState:()=>{const e=ne(),{microphone:t}=e,{state:n}=t,r=ge(n.mediaStream$),s=ge(n.selectedDevice$),{getDevices:o}=Ce(t),a=ge(n.hasBrowserPermission$),c=ge(n.isPromptingPermission$),l=ge(n.speakingWhileMuted$);return(0,i.A)({microphone:t,mediaStream:r,get devices(){return o()},selectedDevice:s,hasBrowserPermission:a,isPromptingPermission:c,isSpeakingWhileMuted:l},Se(ge(n.status$),ge(n.optimisticStatus$)))},useOwnCapabilities:we,useParticipantCount:()=>{const{participantCount$:e}=be();return ge(e)},useParticipants:function(){let{sortBy:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{participants$:t}=be(),n=ge(t);return(0,o.useMemo)((()=>e?[...n].sort(e):n),[n,e])},useRemoteParticipants:()=>{const{remoteParticipants$:e}=be();return ge(e)},useScreenShareState:()=>{const e=ne(),{screenShare:t}=e;return(0,i.A)({screenShare:t,mediaStream:ge(t.state.mediaStream$)},Se(ge(t.state.status$),ge(t.state.optimisticStatus$)))},useSpeakerState:()=>{if((()=>{var e;return"undefined"!==typeof navigator&&"reactnative"===(null===(e=navigator.product)||void 0===e?void 0:e.toLowerCase())})())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const e=ne(),{speaker:t}=e,{getDevices:n}=Ce(t),i=ge(t.state.selectedDevice$);return{speaker:t,get devices(){return n()},selectedDevice:i,isDeviceSelectionSupported:t.state.isDeviceSelectionSupported}}});const Te=()=>ke,_e=e=>{let{canRequestOnly:t,hasPermissionsOnly:n,requiredGrants:i,requireAll:r=!0,children:o}=e;const a=ne(),{useCallSettings:c,useOwnCapabilities:l}=Te(),u=l(),d=c(),h=i[r?"every":"some"]((e=>null===u||void 0===u?void 0:u.includes(e)));if(n)return h?(0,s.jsx)(s.Fragment,{children:o}):null;const p=i.some((e=>null===a||void 0===a?void 0:a.permissionsContext.canRequest(e,d)));return t?p?(0,s.jsx)(s.Fragment,{children:o}):null:h||p?(0,s.jsx)(s.Fragment,{children:o}):null}},6950:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var i=n(7827),r={setTimeout:function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var o=r.delegate;return(null===o||void 0===o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,i.fX)([e,t],(0,i.zs)(n))):setTimeout.apply(void 0,(0,i.fX)([e,t],(0,i.zs)(n)))},clearTimeout:function(e){var t=r.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},7319:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp")},7341:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam")},7391:(e,t,n)=>{"use strict";function i(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}n.d(t,{L:()=>i})},7443:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},7493:(e,t,n)=>{"use strict";n.d(t,{cV:()=>bc,iP:()=>dc,iV:()=>Ll,Ko:()=>Fa,pI:()=>ss,mg:()=>Va,hc:()=>Ks,Hq:()=>Tu,cy:()=>Zo,SJ:()=>za,B6:()=>oc,Fv:()=>$a,Mc:()=>Ja,sf:()=>Ga,aV:()=>qa,T4:()=>Ka,bT:()=>cc,Vz:()=>Za,x8:()=>xc,ND:()=>ac});var i={};n.r(i),n.d(i,{fixNegotiationNeeded:()=>D,shimAddTrackRemoveTrack:()=>O,shimAddTrackRemoveTrackWithNative:()=>P,shimGetDisplayMedia:()=>_,shimGetSendersWithDtmf:()=>A,shimGetStats:()=>I,shimGetUserMedia:()=>T,shimMediaStream:()=>E,shimOnTrack:()=>R,shimPeerConnection:()=>N,shimSenderReceiverGetStats:()=>x});var r={};n.r(r),n.d(r,{shimAddTransceiver:()=>z,shimCreateAnswer:()=>$,shimCreateOffer:()=>q,shimGetDisplayMedia:()=>L,shimGetParameters:()=>W,shimGetUserMedia:()=>j,shimOnTrack:()=>U,shimPeerConnection:()=>M,shimRTCDataChannel:()=>H,shimReceiverGetStats:()=>V,shimRemoveStream:()=>B,shimSenderGetStats:()=>F});var s={};n.r(s),n.d(s,{shimAudioContext:()=>te,shimCallbacksAPI:()=>K,shimConstraints:()=>X,shimCreateOfferLegacy:()=>ee,shimGetUserMedia:()=>Y,shimLocalStreamsAPI:()=>J,shimRTCIceServerUrls:()=>Z,shimRemoteStreamsAPI:()=>G,shimTrackEventTransceiver:()=>Q});var o={};n.r(o),n.d(o,{removeExtmapAllowMixed:()=>le,shimAddIceCandidateNullOrEmpty:()=>ue,shimConnectionState:()=>ce,shimMaxMessageSize:()=>oe,shimParameterlessSetLocalDescription:()=>de,shimRTCIceCandidate:()=>re,shimRTCIceCandidateRelayProtocol:()=>se,shimSendThrowTypeError:()=>ae});var a={};n.r(a),n.d(a,{hasBrowserEnv:()=>bn,hasStandardBrowserEnv:()=>wn,hasStandardBrowserWebWorkerEnv:()=>Sn,navigator:()=>yn,origin:()=>Cn});var c=n(816),l=n(45),u=n(9379);let d=!0,h=!0;function p(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseFloat(i[n],10)}function f(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const s=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,s),r.apply(this,[e,s])};const s=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function m(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(d=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function g(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(h=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function v(){if("object"===typeof window){if(d)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function b(e,t){h&&console.warn(e+" is deprecated, please use "+t+" instead.")}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return y(e)?Object.keys(e).reduce((function(t,n){const i=y(e[n]),r=i?w(e[n]):e[n],s=i&&!Object.keys(r).length;return void 0===r||s?t:Object.assign(t,{[n]:r})}),{}):e}function S(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?S(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{S(e,e.get(t),n)}))})))}function C(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const s=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&S(e,n,r)}))})),r}const k=v;function T(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"===typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===typeof e.video){let s=e.video.facingMode;s=s&&("object"===typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let o=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),k("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return k("chrome: "+JSON.stringify(e)),r(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}function _(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const i=n.video&&n.video.width,r=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function E(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function R(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else f(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function A(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function I(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,i]=arguments;if(arguments.length>0&&"function"===typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){n(s(r(e)))};return t.apply(this,[i,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(s(r(t)))},n])})).then(n,i)}}function x(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>C(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),f(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>C(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function P(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function O(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return P(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const r=this._streams[n.id];if(r)r.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function N(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function D(e,t){f(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function j(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){b("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function L(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function U(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function M(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,s]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(i){if("TypeError"!==i.name)throw i;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,s)}}function F(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function V(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),f(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function B(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){b("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function H(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function z(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function W(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function q(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function $(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function J(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function G(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function K(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function Y(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(X(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function X(e){return e&&void 0!==e.video?Object.assign({},e,{video:w(e.video)}):e}function Z(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];void 0===i.urls&&i.url?(b("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Q(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ee(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function te(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ne=n(9569),ie=n.n(ne);function re(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),i=ie().parseCandidate(e.candidate);for(const e in i)e in n||Object.defineProperty(n,e,{value:i[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,f(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function se(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||f(e,"icecandidate",(e=>{if(e.candidate){const t=ie().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function oe(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=ie().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=ie().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),i=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=ie().matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],e);let r;r=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>r}),this._sctp=s}return n.apply(this,arguments)}}function ae(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},f(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function ce(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function le(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function ue(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function de(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=v,a=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(p(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(p(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=parseInt(p(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=p(n.userAgent,/Version\/(\d+(\.?\d+))/,1)}return t}(e),c={browserDetails:a,commonShim:o,extractVersion:p,disableLog:m,disableWarnings:g,sdp:ne};switch(a.browser){case"chrome":if(!i||!N||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),c;if(null===a.version)return n("Chrome shim can not determine version, not shimming."),c;n("adapter.js shimming chrome."),c.browserShim=i,ue(e,a),de(e),T(e,a),E(e),N(e,a),R(e),O(e,a),A(e),I(e),x(e),D(e,a),re(e),se(e),ce(e),oe(e,a),ae(e),le(e,a);break;case"firefox":if(!r||!M||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),c;n("adapter.js shimming firefox."),c.browserShim=r,ue(e,a),de(e),j(e,a),M(e,a),U(e),B(e),F(e),V(e),H(e),z(e),W(e),q(e),$(e),re(e),ce(e),oe(e,a),ae(e);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),c;n("adapter.js shimming safari."),c.browserShim=s,ue(e,a),de(e),Z(e),ee(e),K(e),J(e),G(e),Q(e),Y(e),te(e),re(e),se(e),oe(e,a),ae(e),le(e,a);break;default:n("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const he=Symbol.for("protobuf-ts/message-type");function pe(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);"_"==r?t=!0:/\d/.test(r)?(n.push(r),t=!0):t?(n.push(r.toUpperCase()),t=!1):0==i?n.push(r.toLowerCase()):n.push(r)}return n.join("")}var fe,me,ge;function ve(e){var t,n,i,r;return e.localName=null!==(t=e.localName)&&void 0!==t?t:pe(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:pe(e.name),e.repeat=null!==(i=e.repeat)&&void 0!==i?i:ge.NO,e.opt=null!==(r=e.opt)&&void 0!==r?r:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function be(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(fe||(fe={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(me||(me={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(ge||(ge={}));class ye{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let i of this.fields)if(i.oneof)n.includes(i.oneof)||(n.push(i.oneof),e.push(i.oneof),t.push(i.oneof));else switch(t.push(i.localName),i.kind){case"scalar":case"enum":i.opt&&!i.repeat||e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let i=Object.keys(e),r=this.data;if(i.length<r.req.length||r.req.some((e=>!i.includes(e))))return!1;if(!n&&i.some((e=>!r.known.includes(e))))return!1;if(t<1)return!0;for(const s of r.oneofs){const i=e[s];if(!be(i))return!1;if(void 0===i.oneofKind)continue;const r=this.fields.find((e=>e.localName===i.oneofKind));if(!r)return!1;if(!this.field(i[i.oneofKind],r,n,t))return!1}for(const s of this.fields)if(void 0===s.oneof&&!this.field(e[s.localName],s,n,t))return!1;return!0}field(e,t,n,i){let r=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:r?this.scalars(e,t.T,i,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:r?this.scalars(e,fe.INT32,i):this.scalar(e,fe.INT32);case"message":return void 0===e||(r?this.messages(e,t.T(),n,i):this.message(e,t.T(),n,i));case"map":if("object"!=typeof e||null===e)return!1;if(i<2)return!0;if(!this.mapKeys(e,t.K,i))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,i,t.V.L);case"enum":return this.scalars(Object.values(e),fe.INT32,i);case"message":return this.messages(Object.values(e),t.V.T(),n,i)}}return!0}message(e,t,n,i){return n?t.isAssignable(e,i):t.is(e,i)}messages(e,t,n,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(n){for(let r=0;r<e.length&&r<i;r++)if(!t.isAssignable(e[r],i-1))return!1}else for(let r=0;r<e.length&&r<i;r++)if(!t.is(e[r],i-1))return!1;return!0}scalar(e,t,n){let i=typeof e;switch(t){case fe.UINT64:case fe.FIXED64:case fe.INT64:case fe.SFIXED64:case fe.SINT64:switch(n){case me.BIGINT:return"bigint"==i;case me.NUMBER:return"number"==i&&!isNaN(e);default:return"string"==i}case fe.BOOL:return"boolean"==i;case fe.STRING:return"string"==i;case fe.BYTES:return e instanceof Uint8Array;case fe.DOUBLE:case fe.FLOAT:return"number"==i&&!isNaN(e);default:return"number"==i&&Number.isInteger(e)}}scalars(e,t,n,i){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let r=0;r<e.length&&r<n;r++)if(!this.scalar(e[r],t,i))return!1;return!0}mapKeys(e,t,n){let i=Object.keys(e);switch(t){case fe.INT32:case fe.FIXED32:case fe.SFIXED32:case fe.SINT32:case fe.UINT32:return this.scalars(i.slice(0,n).map((e=>parseInt(e))),t,n);case fe.BOOL:return this.scalars(i.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(i,t,n,me.STRING)}}}function we(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function Se(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ke=[];for(let _u=0;_u<Ce.length;_u++)ke[Ce[_u].charCodeAt(0)]=_u;function Te(){let e=0,t=0;for(let i=0;i<28;i+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function _e(e,t,n){for(let s=0;s<28;s+=7){const i=e>>>s,r=!(i>>>7==0&&0==t),o=255&(r?128|i:i);if(n.push(o),!r)return}const i=e>>>28&15|(7&t)<<4,r=!(t>>3==0);if(n.push(255&(r?128|i:i)),r){for(let e=3;e<31;e+=7){const i=t>>>e,r=!(i>>>7==0),s=255&(r?128|i:i);if(n.push(s),!r)return}n.push(t>>>31&1)}}ke["-".charCodeAt(0)]=Ce.indexOf("+"),ke["_".charCodeAt(0)]=Ce.indexOf("/");const Ee=4294967296;function Re(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function s(t,s){const o=Number(e.slice(t,s));r*=n,i=i*n+o,i>=Ee&&(r+=i/Ee|0,i%=Ee)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,i,r]}function Ae(e,t){if(t>>>0<=2097151)return""+(Ee*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,i=t>>16&65535,r=(16777215&e)+6777216*n+6710656*i,s=n+8147497*i,o=2*i,a=1e7;function c(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return r>=a&&(s+=Math.floor(r/a),r%=a),s>=a&&(o+=Math.floor(s/a),s%=a),c(o,0)+c(s,o)+c(r,1)}function Ie(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function xe(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}let Pe;function Oe(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64;Pe=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();const Ne=/^-?[0-9]+$/,De=4294967296,je=2147483648;class Le{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*De+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class Ue extends Le{static from(e){if(Pe)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=Pe.C(e);case"number":if(0===e)return this.ZERO;e=Pe.C(e);case"bigint":if(!e)return this.ZERO;if(e<Pe.UMIN)throw new Error("signed value for ulong");if(e>Pe.UMAX)throw new Error("ulong too large");return Pe.V.setBigUint64(0,e,!0),new Ue(Pe.V.getInt32(0,!0),Pe.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!Ne.test(e))throw new Error("string is no integer");let[t,n,i]=Re(e);if(t)throw new Error("signed value for ulong");return new Ue(n,i);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Ue(e,e/De)}throw new Error("unknown value "+typeof e)}toString(){return Pe?this.toBigInt().toString():Ae(this.lo,this.hi)}toBigInt(){return Oe(Pe),Pe.V.setInt32(0,this.lo,!0),Pe.V.setInt32(4,this.hi,!0),Pe.V.getBigUint64(0,!0)}}Ue.ZERO=new Ue(0,0);class Me extends Le{static from(e){if(Pe)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=Pe.C(e);case"number":if(0===e)return this.ZERO;e=Pe.C(e);case"bigint":if(!e)return this.ZERO;if(e<Pe.MIN)throw new Error("signed long too small");if(e>Pe.MAX)throw new Error("signed long too large");return Pe.V.setBigInt64(0,e,!0),new Me(Pe.V.getInt32(0,!0),Pe.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!Ne.test(e))throw new Error("string is no integer");let[t,n,i]=Re(e);if(t){if(i>je||i==je&&0!=n)throw new Error("signed long too small")}else if(i>=je)throw new Error("signed long too large");let r=new Me(n,i);return t?r.negate():r;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new Me(e,e/De):new Me(-e,-e/De).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!==(this.hi&je)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new Me(t,e)}toString(){if(Pe)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Ae(e.lo,e.hi)}return Ae(this.lo,this.hi)}toBigInt(){return Oe(Pe),Pe.V.setInt32(0,this.lo,!0),Pe.V.setInt32(4,this.hi,!0),Pe.V.getBigInt64(0,!0)}}function Fe(e,t){if(!e)throw new Error(t)}Me.ZERO=new Me(0,0);function Ve(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function Be(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function He(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}function ze(e,t){switch(t){case me.BIGINT:return e.toBigInt();case me.NUMBER:return e.toNumber();default:return e.toString()}}class We{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=we(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error("Cannot parse JSON ".concat(e," for ").concat(this.info.typeName,"#").concat(t))}}read(e,t,n){this.prepare();const i=[];for(const[r,s]of Object.entries(e)){const e=this.fMap[r];if(!e){if(!n.ignoreUnknownFields)throw new Error("Found unknown field while reading ".concat(this.info.typeName," from JSON format. JSON key: ").concat(r));continue}const o=e.localName;let a;if(e.oneof){if(null===s&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(i.includes(e.oneof))throw new Error('Multiple members of the oneof group "'.concat(e.oneof,'" of ').concat(this.info.typeName," are present in JSON."));i.push(e.oneof),a=t[e.oneof]={oneofKind:o}}else a=t;if("map"==e.kind){if(null===s)continue;this.assert(Se(s),e.name,s);const t=a[o];for(const[i,r]of Object.entries(s)){let s;switch(this.assert(null!==r,e.name+" map value",null),e.V.kind){case"message":s=e.V.T().internalJsonRead(r,n);break;case"enum":if(s=this.enum(e.V.T(),r,e.name,n.ignoreUnknownFields),!1===s)continue;break;case"scalar":s=this.scalar(r,e.V.T,e.V.L,e.name)}this.assert(void 0!==s,e.name+" map value",r);let o=i;e.K==fe.BOOL&&(o="true"==o||"false"!=o&&o),o=this.scalar(o,e.K,me.STRING,e.name).toString(),t[o]=s}}else if(e.repeat){if(null===s)continue;this.assert(Array.isArray(s),e.name,s);const t=a[o];for(const i of s){let r;switch(this.assert(null!==i,e.name,null),e.kind){case"message":r=e.T().internalJsonRead(i,n);break;case"enum":if(r=this.enum(e.T(),i,e.name,n.ignoreUnknownFields),!1===r)continue;break;case"scalar":r=this.scalar(i,e.T,e.L,e.name)}this.assert(void 0!==r,e.name,s),t.push(r)}}else switch(e.kind){case"message":if(null===s&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}a[o]=e.T().internalJsonRead(s,n,a[o]);break;case"enum":if(null===s)continue;let t=this.enum(e.T(),s,e.name,n.ignoreUnknownFields);if(!1===t)continue;a[o]=t;break;case"scalar":if(null===s)continue;a[o]=this.scalar(s,e.T,e.L,e.name)}}}enum(e,t,n,i){if("google.protobuf.NullValue"==e[0]&&Fe(null===t||"NULL_VALUE"===t,"Unable to parse field ".concat(this.info.typeName,"#").concat(n,", enum ").concat(e[0]," only accepts null.")),null===t)return 0;switch(typeof t){case"number":return Fe(Number.isInteger(t),"Unable to parse field ".concat(this.info.typeName,"#").concat(n,", enum can only be integral number, got ").concat(t,".")),t;case"string":let r=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(r=t.substring(e[2].length));let s=e[1][r];return("undefined"!==typeof s||!i)&&(Fe("number"==typeof s,"Unable to parse field ".concat(this.info.typeName,"#").concat(n,", enum ").concat(e[0],' has no value for "').concat(t,'".')),s)}Fe(!1,"Unable to parse field ".concat(this.info.typeName,"#").concat(n,", cannot parse enum value from ").concat(typeof t,'".'))}scalar(e,t,n,i){let r;try{switch(t){case fe.DOUBLE:case fe.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){r="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){r="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let i=Number(e);if(Number.isNaN(i)){r="not a number";break}if(!Number.isFinite(i)){r="too large or small";break}return t==fe.FLOAT&&He(i),i;case fe.INT32:case fe.FIXED32:case fe.SFIXED32:case fe.SINT32:case fe.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?r="empty string":"string"==typeof e&&(e.trim().length!==e.length?r="extra whitespace":s=Number(e)),void 0===s)break;return t==fe.UINT32?Be(s):Ve(s),s;case fe.INT64:case fe.SFIXED64:case fe.SINT64:if(null===e)return ze(Me.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return ze(Me.from(e),n);case fe.FIXED64:case fe.UINT64:if(null===e)return ze(Ue.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return ze(Ue.from(e),n);case fe.BOOL:if(null===e)return!1;if("boolean"!==typeof e)break;return e;case fe.STRING:if(null===e)return"";if("string"!==typeof e){r="extra whitespace";break}try{encodeURIComponent(e)}catch(r){r="invalid UTF8";break}return e;case fe.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!==typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,i=new Uint8Array(t),r=0,s=0,o=0;for(let a=0;a<e.length;a++){if(n=ke[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:o=n,s=1;break;case 1:i[r++]=o<<2|(48&n)>>4,o=n,s=2;break;case 2:i[r++]=(15&o)<<4|(60&n)>>2,o=n,s=3;break;case 3:i[r++]=(3&o)<<6|n,s=0}}if(1==s)throw Error("invalid base64 string.");return i.subarray(0,r)}(e)}}catch(s){r=s.message}this.assert(!1,i+(r?" - "+r:""),e)}}class qe{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},i=e;for(const r of this.fields){if(!r.oneof){let e=this.field(r,i[r.localName],t);void 0!==e&&(n[t.useProtoFieldName?r.name:r.jsonName]=e);continue}const e=i[r.oneof];if(e.oneofKind!==r.localName)continue;const s="scalar"==r.kind||"enum"==r.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let o=this.field(r,e[r.localName],s);Fe(void 0!==o),n[t.useProtoFieldName?r.name:r.jsonName]=o}return n}field(e,t,n){let i;if("map"==e.kind){Fe("object"==typeof t&&null!==t);const r={};switch(e.V.kind){case"scalar":for(const[n,o]of Object.entries(t)){const t=this.scalar(e.V.T,o,e.name,!1,!0);Fe(void 0!==t),r[n.toString()]=t}break;case"message":const i=e.V.T();for(const[o,a]of Object.entries(t)){const t=this.message(i,a,e.name,n);Fe(void 0!==t),r[o.toString()]=t}break;case"enum":const s=e.V.T();for(const[o,a]of Object.entries(t)){Fe(void 0===a||"number"==typeof a);const t=this.enum(s,a,e.name,!1,!0,n.enumAsInteger);Fe(void 0!==t),r[o.toString()]=t}}(n.emitDefaultValues||Object.keys(r).length>0)&&(i=r)}else if(e.repeat){Fe(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const i=this.scalar(e.T,t[n],e.name,e.opt,!0);Fe(void 0!==i),r.push(i)}break;case"enum":const i=e.T();for(let o=0;o<t.length;o++){Fe(void 0===t[o]||"number"==typeof t[o]);const s=this.enum(i,t[o],e.name,e.opt,!0,n.enumAsInteger);Fe(void 0!==s),r.push(s)}break;case"message":const s=e.T();for(let o=0;o<t.length;o++){const i=this.message(s,t[o],e.name,n);Fe(void 0!==i),r.push(i)}}(n.emitDefaultValues||r.length>0||n.emitDefaultValues)&&(i=r)}else switch(e.kind){case"scalar":i=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":i=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(e.T(),t,e.name,n)}return i}enum(e,t,n,i,r,s){if("google.protobuf.NullValue"==e[0])return r||i?null:void 0;if(void 0!==t){if(0!==t||r||i)return Fe("number"==typeof t),Fe(Number.isInteger(t)),s||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else Fe(i)}message(e,t,n,i){return void 0===t?i.emitDefaultValues?null:void 0:e.internalJsonWrite(t,i)}scalar(e,t,n,i,r){if(void 0===t)return void Fe(i);const s=r||i;switch(e){case fe.INT32:case fe.SFIXED32:case fe.SINT32:return 0===t?s?0:void 0:(Ve(t),t);case fe.FIXED32:case fe.UINT32:return 0===t?s?0:void 0:(Be(t),t);case fe.FLOAT:He(t);case fe.DOUBLE:return 0===t?s?0:void 0:(Fe("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case fe.STRING:return""===t?s?"":void 0:(Fe("string"==typeof t),t);case fe.BOOL:return!1===t?!s&&void 0:(Fe("boolean"==typeof t),t);case fe.UINT64:case fe.FIXED64:Fe("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=Ue.from(t);if(e.isZero()&&!s)return;return e.toString();case fe.INT64:case fe.SFIXED64:case fe.SINT64:Fe("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=Me.from(t);if(n.isZero()&&!s)return;return n.toString();case fe.BYTES:return Fe(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",i=0,r=0;for(let s=0;s<e.length;s++)switch(t=e[s],i){case 0:n+=Ce[t>>2],r=(3&t)<<4,i=1;break;case 1:n+=Ce[r|t>>4],r=(15&t)<<2,i=2;break;case 2:n+=Ce[r|t>>6],n+=Ce[63&t],i=0}return i&&(n+=Ce[r],n+="=",1==i&&(n+="=")),n}(t):s?"":void 0}}}var $e,Je;function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.STRING;switch(e){case fe.BOOL:return!1;case fe.UINT64:case fe.FIXED64:return ze(Ue.ZERO,t);case fe.INT64:case fe.SFIXED64:case fe.SINT64:return ze(Me.ZERO,t);case fe.DOUBLE:case fe.FLOAT:return 0;case fe.BYTES:return new Uint8Array(0);case fe.STRING:return"";default:return 0}}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,i,r,s,o)=>{(t(i)?i[e.symbol]:i[e.symbol]=[]).push({no:r,wireType:s,data:o})},e.onWrite=(t,n,i)=>{for(let{no:r,wireType:s,data:o}of e.list(n))i.tag(r,s).raw(o)},e.list=(n,i)=>{if(t(n)){let t=n[e.symbol];return i?t.filter((e=>e.no==i)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}($e||($e={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(Je||(Je={}));class Ke{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,i){this.prepare();const r=void 0===i?e.len:e.pos+i;for(;e.pos<r;){const[i,r]=e.tag(),s=this.fieldNoToField.get(i);if(!s){let s=n.readUnknownField;if("throw"==s)throw new Error("Unknown field ".concat(i," (wire type ").concat(r,") for ").concat(this.info.typeName));let o=e.skip(r);!1!==s&&(!0===s?$e.onRead:s)(this.info.typeName,t,i,r,o);continue}let o=t,a=s.repeat,c=s.localName;switch(s.oneof&&(o=o[s.oneof],o.oneofKind!==c&&(o=t[s.oneof]={oneofKind:c})),s.kind){case"scalar":case"enum":let t="enum"==s.kind?fe.INT32:s.T,i="scalar"==s.kind?s.L:void 0;if(a){let n=o[c];if(r==Je.LengthDelimited&&t!=fe.STRING&&t!=fe.BYTES){let r=e.uint32()+e.pos;for(;e.pos<r;)n.push(this.scalar(e,t,i))}else n.push(this.scalar(e,t,i))}else o[c]=this.scalar(e,t,i);break;case"message":if(a){let t=o[c],i=s.T().internalBinaryRead(e,e.uint32(),n);t.push(i)}else o[c]=s.T().internalBinaryRead(e,e.uint32(),n,o[c]);break;case"map":let[l,u]=this.mapEntry(s,e,n);o[c][l]=u}}}mapEntry(e,t,n){let i,r,s=t.uint32(),o=t.pos+s;for(;t.pos<o;){let[s,o]=t.tag();switch(s){case 1:i=e.K==fe.BOOL?t.bool().toString():this.scalar(t,e.K,me.STRING);break;case 2:switch(e.V.kind){case"scalar":r=this.scalar(t,e.V.T,e.V.L);break;case"enum":r=t.int32();break;case"message":r=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error("Unknown field ".concat(s," (wire type ").concat(o,") in map entry for ").concat(this.info.typeName,"#").concat(e.name))}}if(void 0===i){let t=Ge(e.K);i=e.K==fe.BOOL?t.toString():t}if(void 0===r)switch(e.V.kind){case"scalar":r=Ge(e.V.T,e.V.L);break;case"enum":r=0;break;case"message":r=e.V.T().create()}return[i,r]}scalar(e,t,n){switch(t){case fe.INT32:return e.int32();case fe.STRING:return e.string();case fe.BOOL:return e.bool();case fe.DOUBLE:return e.double();case fe.FLOAT:return e.float();case fe.INT64:return ze(e.int64(),n);case fe.UINT64:return ze(e.uint64(),n);case fe.FIXED64:return ze(e.fixed64(),n);case fe.FIXED32:return e.fixed32();case fe.BYTES:return e.bytes();case fe.UINT32:return e.uint32();case fe.SFIXED32:return e.sfixed32();case fe.SFIXED64:return ze(e.sfixed64(),n);case fe.SINT32:return e.sint32();case fe.SINT64:return ze(e.sint64(),n)}}}class Ye{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const r of this.fields){let i,s,o=r.repeat,a=r.localName;if(r.oneof){const t=e[r.oneof];if(t.oneofKind!==a)continue;i=t[a],s=!0}else i=e[a],s=!1;switch(r.kind){case"scalar":case"enum":let e="enum"==r.kind?fe.INT32:r.T;if(o)if(Fe(Array.isArray(i)),o==ge.PACKED)this.packed(t,e,r.no,i);else for(const n of i)this.scalar(t,e,r.no,n,!0);else void 0===i?Fe(r.opt):this.scalar(t,e,r.no,i,s||r.opt);break;case"message":if(o){Fe(Array.isArray(i));for(const e of i)this.message(t,n,r.T(),r.no,e)}else this.message(t,n,r.T(),r.no,i);break;case"map":Fe("object"==typeof i&&null!==i);for(const[s,o]of Object.entries(i))this.mapEntry(t,n,r,s,o)}}let i=n.writeUnknownFields;!1!==i&&(!0===i?$e.onWrite:i)(this.info.typeName,e,t)}mapEntry(e,t,n,i,r){e.tag(n.no,Je.LengthDelimited),e.fork();let s=i;switch(n.K){case fe.INT32:case fe.FIXED32:case fe.UINT32:case fe.SFIXED32:case fe.SINT32:s=Number.parseInt(i);break;case fe.BOOL:Fe("true"==i||"false"==i),s="true"==i}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,r,!0);break;case"enum":this.scalar(e,fe.INT32,2,r,!0);break;case"message":this.message(e,t,n.V.T(),2,r)}e.join()}message(e,t,n,i,r){void 0!==r&&(n.internalBinaryWrite(r,e.tag(i,Je.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,i,r){let[s,o,a]=this.scalarInfo(t,i);a&&!r||(e.tag(n,s),e[o](i))}packed(e,t,n,i){if(!i.length)return;Fe(t!==fe.BYTES&&t!==fe.STRING),e.tag(n,Je.LengthDelimited),e.fork();let[,r]=this.scalarInfo(t);for(let s=0;s<i.length;s++)e[r](i[s]);e.join()}scalarInfo(e,t){let n,i=Je.Varint,r=void 0===t,s=0===t;switch(e){case fe.INT32:n="int32";break;case fe.STRING:s=r||!t.length,i=Je.LengthDelimited,n="string";break;case fe.BOOL:s=!1===t,n="bool";break;case fe.UINT32:n="uint32";break;case fe.DOUBLE:i=Je.Bit64,n="double";break;case fe.FLOAT:i=Je.Bit32,n="float";break;case fe.INT64:s=r||Me.from(t).isZero(),n="int64";break;case fe.UINT64:s=r||Ue.from(t).isZero(),n="uint64";break;case fe.FIXED64:s=r||Ue.from(t).isZero(),i=Je.Bit64,n="fixed64";break;case fe.BYTES:s=r||!t.byteLength,i=Je.LengthDelimited,n="bytes";break;case fe.FIXED32:i=Je.Bit32,n="fixed32";break;case fe.SFIXED32:i=Je.Bit32,n="sfixed32";break;case fe.SFIXED64:s=r||Me.from(t).isZero(),i=Je.Bit64,n="sfixed64";break;case fe.SINT32:n="sint32";break;case fe.SINT64:s=r||Me.from(t).isZero(),n="sint64"}return[i,n,r||s]}}function Xe(e,t,n){let i,r,s=n;for(let o of e.fields){let e=o.localName;if(o.oneof){const n=s[o.oneof];if(void 0==(null===n||void 0===n?void 0:n.oneofKind))continue;if(i=n[e],r=t[o.oneof],r.oneofKind=n.oneofKind,void 0==i){delete r[e];continue}}else if(i=s[e],r=t,void 0==i)continue;switch(o.repeat&&(r[e].length=i.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let n=0;n<i.length;n++)r[e][n]=i[n];else r[e]=i;break;case"message":let t=o.T();if(o.repeat)for(let n=0;n<i.length;n++)r[e][n]=t.create(i[n]);else void 0===r[e]?r[e]=t.create(i):t.mergePartial(r[e],i);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(r[e],i);break;case"message":let t=o.V.T();for(let n of Object.keys(i))r[e][n]=t.create(i[n])}}}}const Ze={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Qe={ignoreUnknownFields:!1};function et(e,t){var n,i;let r=Object.assign(Object.assign({},e),t);return r.typeRegistry=[...null!==(n=null===e||void 0===e?void 0:e.typeRegistry)&&void 0!==n?n:[],...null!==(i=null===t||void 0===t?void 0:t.typeRegistry)&&void 0!==i?i:[]],r}const tt=Object.values;function nt(e,t,n){if(t===n)return!0;if(e!==fe.BYTES)return!1;let i=t,r=n;if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++)if(i[s]!=r[s])return!1;return!0}function it(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!nt(e,t[i],n[i]))return!1;return!0}function rt(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e.equals(t[i],n[i]))return!1;return!0}const st={writeUnknownFields:!0,writerFactory:()=>new ot};class ot{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Be(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Ve(e),Ie(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){He(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Be(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Ve(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Ve(e),Ie(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=Me.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=Ue.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=Me.from(e);return _e(t.lo,t.hi,this.buf),this}sint64(e){let t=Me.from(e),n=t.hi>>31;return _e(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Ue.from(e);return _e(t.lo,t.hi,this.buf),this}}const at={readUnknownField:!0,readerFactory:e=>new ct(e)};class ct{constructor(e,t){this.varint64=Te,this.uint32=xe,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case Je.Varint:for(;128&this.buf[this.pos++];);break;case Je.Bit64:this.pos+=4;case Je.Bit32:this.pos+=4;break;case Je.LengthDelimited:let t=this.uint32();this.pos+=t;break;case Je.StartGroup:let n;for(;(n=this.tag()[1])!==Je.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new Me(...this.varint64())}uint64(){return new Ue(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new Me(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Ue(this.sfixed32(),this.sfixed32())}sfixed64(){return new Me(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}const lt=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class ut{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(ve),this.options=null!==n&&void 0!==n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},lt),{[he]:{value:this}})),this.refTypeCheck=new ye(this),this.refJsonReader=new We(this),this.refJsonWriter=new qe(this),this.refBinReader=new Ke(this),this.refBinWriter=new Ye(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},he,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=Ge(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&Xe(this,t,e),t}clone(e){let t=this.create();return Xe(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let i of e.fields){let e=i.localName,r=i.oneof?t[i.oneof][e]:t[e],s=i.oneof?n[i.oneof][e]:n[e];switch(i.kind){case"enum":case"scalar":let e="enum"==i.kind?fe.INT32:i.T;if(!(i.repeat?it(e,r,s):nt(e,r,s)))return!1;break;case"map":if(!("message"==i.V.kind?rt(i.V.T(),tt(r),tt(s)):it("enum"==i.V.kind?fe.INT32:i.V.T,tt(r),tt(s))))return!1;break;case"message":let t=i.T();if(!(i.repeat?rt(t,r,s):t.equals(r,s)))return!1}}return!0}(this,e,t)}is(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!1)}isAssignable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){Xe(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},at),e):at}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},Qe),e):Qe}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},Ze),e):Ze}(t))}toJsonString(e,t){var n;let i=this.toJson(e,t);return JSON.stringify(i,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},st),e):st}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let i=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,i,t),i}throw new Error("Unable to parse message ".concat(this.typeName," from JSON ").concat(we(e),"."))}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,i){let r=null!==i&&void 0!==i?i:this.create();return this.refBinReader.read(e,r,n,t),r}}function dt(e,t,n,i,r){var s,o,a,c;if("unary"==e){let e=(e,n,i)=>t.unary(e,n,i);for(const t of(null!==(s=i.interceptors)&&void 0!==s?s:[]).filter((e=>e.interceptUnary)).reverse()){const n=e;e=(e,i,r)=>t.interceptUnary(n,e,i,r)}return e(n,r,i)}if("serverStreaming"==e){let e=(e,n,i)=>t.serverStreaming(e,n,i);for(const t of(null!==(o=i.interceptors)&&void 0!==o?o:[]).filter((e=>e.interceptServerStreaming)).reverse()){const n=e;e=(e,i,r)=>t.interceptServerStreaming(n,e,i,r)}return e(n,r,i)}if("clientStreaming"==e){let e=(e,n)=>t.clientStreaming(e,n);for(const t of(null!==(a=i.interceptors)&&void 0!==a?a:[]).filter((e=>e.interceptClientStreaming)).reverse()){const n=e;e=(e,i)=>t.interceptClientStreaming(n,e,i)}return e(n,i)}if("duplex"==e){let e=(e,n)=>t.duplex(e,n);for(const t of(null!==(c=i.interceptors)&&void 0!==c?c:[]).filter((e=>e.interceptDuplex)).reverse()){const n=e;e=(e,i)=>t.interceptDuplex(n,e,i)}return e(n,i)}!function(e,t){throw new Error(null!==t&&void 0!==t?t:"Unexpected object: "+e)}(e)}class ht extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNKNOWN",n=arguments.length>2?arguments[2]:void 0;super(e),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=t,this.meta=null!==n&&void 0!==n?n:{}}toString(){const e=[this.name+": "+this.message];this.code&&(e.push(""),e.push("Code: "+this.code)),this.serviceName&&this.methodName&&e.push("Method: "+this.serviceName+"/"+this.methodName);let t=Object.entries(this.meta);if(t.length){e.push(""),e.push("Meta:");for(let[n,i]of t)e.push("  ".concat(n,": ").concat(i))}return e.join("\n")}}function pt(e,t){return function(){return e.apply(t,arguments)}}const{toString:ft}=Object.prototype,{getPrototypeOf:mt}=Object,{iterator:gt,toStringTag:vt}=Symbol,bt=(yt=Object.create(null),e=>{const t=ft.call(e);return yt[t]||(yt[t]=t.slice(8,-1).toLowerCase())});var yt;const wt=e=>(e=e.toLowerCase(),t=>bt(t)===e),St=e=>t=>typeof t===e,{isArray:Ct}=Array,kt=St("undefined");const Tt=wt("ArrayBuffer");const _t=St("string"),Et=St("function"),Rt=St("number"),At=e=>null!==e&&"object"===typeof e,It=e=>{if("object"!==bt(e))return!1;const t=mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(vt in e)&&!(gt in e)},xt=wt("Date"),Pt=wt("File"),Ot=wt("Blob"),Nt=wt("FileList"),Dt=wt("URLSearchParams"),[jt,Lt,Ut,Mt]=["ReadableStream","Request","Response","Headers"].map(wt);function Ft(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ct(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function Vt(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Bt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ht=e=>!kt(e)&&e!==Bt;const zt=(Wt="undefined"!==typeof Uint8Array&&mt(Uint8Array),e=>Wt&&e instanceof Wt);var Wt;const qt=wt("HTMLFormElement"),$t=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Jt=wt("RegExp"),Gt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Ft(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)};const Kt=wt("AsyncFunction"),Yt=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],Bt.addEventListener("message",(e=>{let{source:t,data:r}=e;t===Bt&&r===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),Bt.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,Et(Bt.postMessage)),Xt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Bt):"undefined"!==typeof process&&process.nextTick||Yt,Zt={isArray:Ct,isArrayBuffer:Tt,isBuffer:function(e){return null!==e&&!kt(e)&&null!==e.constructor&&!kt(e.constructor)&&Et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Et(e.append)&&("formdata"===(t=bt(e))||"object"===t&&Et(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Tt(e.buffer),t},isString:_t,isNumber:Rt,isBoolean:e=>!0===e||!1===e,isObject:At,isPlainObject:It,isReadableStream:jt,isRequest:Lt,isResponse:Ut,isHeaders:Mt,isUndefined:kt,isDate:xt,isFile:Pt,isBlob:Ot,isRegExp:Jt,isFunction:Et,isStream:e=>At(e)&&Et(e.pipe),isURLSearchParams:Dt,isTypedArray:zt,isFileList:Nt,forEach:Ft,merge:function e(){const{caseless:t}=Ht(this)&&this||{},n={},i=(i,r)=>{const s=t&&Vt(n,r)||r;It(n[s])&&It(i)?n[s]=e(n[s],i):It(i)?n[s]=e({},i):Ct(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ft(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ft(t,((t,i)=>{n&&Et(t)?e[i]=pt(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&mt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:bt,kindOfTest:wt,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(Ct(e))return e;let t=e.length;if(!Rt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[gt]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:qt,hasOwnProperty:$t,hasOwnProp:$t,reduceDescriptors:Gt,freezeMethods:e=>{Gt(e,((t,n)=>{if(Et(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];Et(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return Ct(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Vt,global:Bt,isContextDefined:Ht,isSpecCompliantForm:function(e){return!!(e&&Et(e.append)&&"FormData"===e[vt]&&e[gt])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(At(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=Ct(e)?[]:{};return Ft(e,((e,t)=>{const s=n(e,i+1);!kt(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:Kt,isThenable:e=>e&&(At(e)||Et(e))&&Et(e.then)&&Et(e.catch),setImmediate:Yt,asap:Xt,isIterable:e=>null!=e&&Et(e[gt])};function Qt(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Zt.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Zt.toJSONObject(this.config),code:this.code,status:this.status}}});const en=Qt.prototype,tn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{tn[e]={value:e}})),Object.defineProperties(Qt,tn),Object.defineProperty(en,"isAxiosError",{value:!0}),Qt.from=(e,t,n,i,r,s)=>{const o=Object.create(en);return Zt.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Qt.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const nn=Qt;function rn(e){return Zt.isPlainObject(e)||Zt.isArray(e)}function sn(e){return Zt.endsWith(e,"[]")?e.slice(0,-2):e}function on(e,t,n){return e?e.concat(t).map((function(e,t){return e=sn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const an=Zt.toFlatObject(Zt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const cn=function(e,t,n){if(!Zt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Zt.isUndefined(t[e])}))).metaTokens,r=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Zt.isSpecCompliantForm(t);if(!Zt.isFunction(r))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Zt.isDate(e))return e.toISOString();if(!a&&Zt.isBlob(e))throw new nn("Blob is not supported. Use a Buffer instead.");return Zt.isArrayBuffer(e)||Zt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(Zt.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Zt.isArray(e)&&function(e){return Zt.isArray(e)&&!e.some(rn)}(e)||(Zt.isFileList(e)||Zt.endsWith(n,"[]"))&&(a=Zt.toArray(e)))return n=sn(n),a.forEach((function(e,i){!Zt.isUndefined(e)&&null!==e&&t.append(!0===o?on([n],i,s):null===o?n:n+"[]",c(e))})),!1;return!!rn(e)||(t.append(on(r,n,s),c(e)),!1)}const u=[],d=Object.assign(an,{defaultVisitor:l,convertValue:c,isVisitable:rn});if(!Zt.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Zt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),Zt.forEach(n,(function(n,s){!0===(!(Zt.isUndefined(n)||null===n)&&r.call(t,n,Zt.isString(s)?s.trim():s,i,d))&&e(n,i?i.concat(s):[s])})),u.pop()}}(e),t};function ln(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function un(e,t){this._pairs=[],e&&cn(e,this,t)}const dn=un.prototype;dn.append=function(e,t){this._pairs.push([e,t])},dn.toString=function(e){const t=e?function(t){return e.call(this,t,ln)}:ln;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const hn=un;function pn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fn(e,t,n){if(!t)return e;const i=n&&n.encode||pn;Zt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):Zt.isURLSearchParams(t)?t.toString():new hn(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const mn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Zt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},gn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:hn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},bn="undefined"!==typeof window&&"undefined"!==typeof document,yn="object"===typeof navigator&&navigator||void 0,wn=bn&&(!yn||["ReactNative","NativeScript","NS"].indexOf(yn.product)<0),Sn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Cn=bn&&window.location.href||"http://localhost",kn=(0,u.A)((0,u.A)({},a),vn);const Tn=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&Zt.isArray(i)?i.length:s,a)return Zt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&Zt.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&Zt.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!o}if(Zt.isFormData(e)&&Zt.isFunction(e.entries)){const n={};return Zt.forEachEntry(e,((e,i)=>{t(function(e){return Zt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const _n={transitional:gn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Zt.isObject(e);r&&Zt.isHTMLForm(e)&&(e=new FormData(e));if(Zt.isFormData(e))return i?JSON.stringify(Tn(e)):e;if(Zt.isArrayBuffer(e)||Zt.isBuffer(e)||Zt.isStream(e)||Zt.isFile(e)||Zt.isBlob(e)||Zt.isReadableStream(e))return e;if(Zt.isArrayBufferView(e))return e.buffer;if(Zt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return cn(e,new kn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return kn.isNode&&Zt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Zt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return cn(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(Zt.isString(e))try{return(t||JSON.parse)(e),Zt.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_n.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Zt.isResponse(e)||Zt.isReadableStream(e))return e;if(e&&Zt.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(r){if(n){if("SyntaxError"===r.name)throw nn.from(r,nn.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kn.classes.FormData,Blob:kn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Zt.forEach(["delete","get","head","post","put","patch"],(e=>{_n.headers[e]={}}));const En=_n,Rn=Zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),An=Symbol("internals");function In(e){return e&&String(e).trim().toLowerCase()}function xn(e){return!1===e||null==e?e:Zt.isArray(e)?e.map(xn):String(e)}function Pn(e,t,n,i,r){return Zt.isFunction(i)?i.call(this,t,n):(r&&(t=n),Zt.isString(t)?Zt.isString(i)?-1!==t.indexOf(i):Zt.isRegExp(i)?i.test(t):void 0:void 0)}class On{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=In(t);if(!r)throw new Error("header name must be a non-empty string");const s=Zt.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=xn(e))}const s=(e,t)=>Zt.forEach(e,((e,n)=>r(e,n,t)));if(Zt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Zt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&Rn[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Zt.isObject(e)&&Zt.isIterable(e)){let n,i,r={};for(const t of e){if(!Zt.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?Zt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=In(e)){const n=Zt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Zt.isFunction(t))return t.call(this,e,n);if(Zt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=In(e)){const n=Zt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Pn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=In(e)){const r=Zt.findKey(n,e);!r||t&&!Pn(0,n[r],r,t)||(delete n[r],i=!0)}}return Zt.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!Pn(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Zt.forEach(this,((i,r)=>{const s=Zt.findKey(n,r);if(s)return t[s]=xn(i),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();o!==r&&delete t[r],t[o]=xn(i),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Zt.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Zt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[An]=this[An]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=In(e);t[i]||(!function(e,t){const n=Zt.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return Zt.isArray(e)?e.forEach(i):i(e),this}}On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Zt.reduceDescriptors(On.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Zt.freezeMethods(On);const Nn=On;function Dn(e,t){const n=this||En,i=t||n,r=Nn.from(i.headers);let s=i.data;return Zt.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function jn(e){return!(!e||!e.__CANCEL__)}function Ln(e,t,n){nn.call(this,null==e?"canceled":e,nn.ERR_CANCELED,t,n),this.name="CanceledError"}Zt.inherits(Ln,nn,{__CANCEL__:!0});const Un=Ln;function Mn(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new nn("Request failed with status code "+n.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Fn=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=i[o];r||(r=c),n[s]=a,i[s]=c;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-r<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};const Vn=function(e,t){let n,i,r=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-r;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];t>=s?o(c,e):(n=c,i||(i=setTimeout((()=>{i=null,o(n)}),s-t)))},()=>n&&o(n)]},Bn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=Fn(50,250);return Vn((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,c=r(a);i=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},Hn=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},zn=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Zt.asap((()=>e(...n)))},Wn=kn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,kn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(kn.origin),kn.navigator&&/(msie|trident)/i.test(kn.navigator.userAgent)):()=>!0,qn=kn.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];Zt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Zt.isString(i)&&o.push("path="+i),Zt.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function $n(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Jn=e=>e instanceof Nn?(0,u.A)({},e):e;function Gn(e,t){t=t||{};const n={};function i(e,t,n,i){return Zt.isPlainObject(e)&&Zt.isPlainObject(t)?Zt.merge.call({caseless:i},e,t):Zt.isPlainObject(t)?Zt.merge({},t):Zt.isArray(t)?t.slice():t}function r(e,t,n,r){return Zt.isUndefined(t)?Zt.isUndefined(e)?void 0:i(void 0,e,0,r):i(e,t,0,r)}function s(e,t){if(!Zt.isUndefined(t))return i(void 0,t)}function o(e,t){return Zt.isUndefined(t)?Zt.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>r(Jn(e),Jn(t),0,!0)};return Zt.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=c[i]||r,o=s(e[i],t[i],i);Zt.isUndefined(o)&&s!==a||(n[i]=o)})),n}const Kn=e=>{const t=Gn({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=t;if(t.headers=a=Nn.from(a),t.url=fn($n(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Zt.isFormData(i))if(kn.hasStandardBrowserEnv||kn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(kn.hasStandardBrowserEnv&&(r&&Zt.isFunction(r)&&(r=r(t)),r||!1!==r&&Wn(t.url))){const e=s&&o&&qn.read(o);e&&a.set(s,e)}return t},Yn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Kn(e);let r=i.data;const s=Nn.from(i.headers).normalize();let o,a,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function f(){l&&l(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=Nn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Mn((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new nn("Request aborted",nn.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new nn("Network Error",nn.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||gn;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new nn(t,r.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&Zt.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Zt.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),d&&"json"!==d&&(m.responseType=i.responseType),p&&([c,u]=Bn(p,!0),m.addEventListener("progress",c)),h&&m.upload&&([a,l]=Bn(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(i.cancelToken||i.signal)&&(o=t=>{m&&(n(!t||t.type?new Un(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===kn.protocols.indexOf(v)?n(new nn("Unsupported protocol "+v+":",nn.ERR_BAD_REQUEST,e)):m.send(r||null)}))},Xn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof nn?t:new Un(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,r(new nn("timeout ".concat(t," of ms exceeded"),nn.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=()=>Zt.asap(o),a}};function Zn(e,t){this.v=e,this.k=t}function Qn(e){return function(){return new ei(e.apply(this,arguments))}}function ei(e){var t,n;function i(t,n){try{var s=e[t](n),o=s.value,a=o instanceof Zn;Promise.resolve(a?o.v:o).then((function(n){if(a){var c="return"===t?"return":"next";if(!o.k||n.done)return i(c,n);n=e[c](n).value}r(s.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(s,o){var a={key:e,arg:r,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function ti(e){return new Zn(e,0)}function ni(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new Zn(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function ii(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new ri(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function ri(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ri=function(e){this.s=e,this.n=e.next},ri.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ri(e)}ei.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ei.prototype.next=function(e){return this._invoke("next",e)},ei.prototype.throw=function(e){return this._invoke("throw",e)},ei.prototype.return=function(e){return this._invoke("return",e)};const si=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},oi=function(){var e=Qn((function*(e,t){var n,i=!1,r=!1;try{for(var s,o=ii(ai(e));i=!(s=yield ti(o.next())).done;i=!1){const e=s.value;yield*ni(ii(si(e,t)))}}catch(a){r=!0,n=a}finally{try{i&&null!=o.return&&(yield ti(o.return()))}finally{if(r)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),ai=function(){var e=Qn((function*(e){if(e[Symbol.asyncIterator])return void(yield*ni(ii(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield ti(t.read());if(e)break;yield n}}finally{yield ti(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),ci=(e,t,n,i)=>{const r=oi(e,t);let s,o=0,a=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return a(),void e.close();let s=i.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw a(t),t}},cancel:e=>(a(e),r.return())},{highWaterMark:2})},li="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ui=li&&"function"===typeof ReadableStream,di=li&&("function"===typeof TextEncoder?(hi=new TextEncoder,e=>hi.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var hi;const pi=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(r){return!1}},fi=ui&&pi((()=>{let e=!1;const t=new Request(kn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),mi=ui&&pi((()=>Zt.isReadableStream(new Response("").body))),gi={stream:mi&&(e=>e.body)};var vi;li&&(vi=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!gi[e]&&(gi[e]=Zt.isFunction(vi[e])?t=>t[e]():(t,n)=>{throw new nn("Response type '".concat(e,"' is not supported"),nn.ERR_NOT_SUPPORT,n)})})));const bi=async(e,t)=>{const n=Zt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Zt.isBlob(e))return e.size;if(Zt.isSpecCompliantForm(e)){const t=new Request(kn.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Zt.isArrayBufferView(e)||Zt.isArrayBuffer(e)?e.byteLength:(Zt.isURLSearchParams(e)&&(e+=""),Zt.isString(e)?(await di(e)).byteLength:void 0)})(t):n},yi={http:null,xhr:Yn,fetch:li&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Kn(e);l=l?(l+"").toLowerCase():"text";let f,m=Xn([r,s&&s.toAbortSignal()],o);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(c&&fi&&"get"!==n&&"head"!==n&&0!==(v=await bi(d,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(Zt.isFormData(i)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Hn(v,Bn(zn(c)));i=ci(n.body,65536,e,t)}}Zt.isString(h)||(h=h?"include":"omit");const r="credentials"in Request.prototype;f=new Request(t,(0,u.A)((0,u.A)({},p),{},{signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:r?h:void 0}));let s=await fetch(f);const o=mi&&("stream"===l||"response"===l);if(mi&&(a||o&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Zt.toFiniteNumber(s.headers.get("content-length")),[n,i]=a&&Hn(t,Bn(zn(a),!0))||[];s=new Response(ci(s.body,65536,n,(()=>{i&&i(),g&&g()})),e)}l=l||"text";let b=await gi[Zt.findKey(gi,l)||"text"](s,e);return!o&&g&&g(),await new Promise(((t,n)=>{Mn(t,n,{data:b,headers:Nn.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(b){if(g&&g(),b&&"TypeError"===b.name&&/Load failed|fetch/i.test(b.message))throw Object.assign(new nn("Network Error",nn.ERR_NETWORK,e,f),{cause:b.cause||b});throw nn.from(b,b&&b.code,e,f)}})};Zt.forEach(yi,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const wi=e=>"- ".concat(e),Si=e=>Zt.isFunction(e)||null===e||!1===e,Ci=e=>{e=Zt.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!Si(n)&&(i=yi[(t=String(n)).toLowerCase()],void 0===i))throw new nn("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(wi).join("\n"):" "+wi(e[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function ki(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Un(null,e)}function Ti(e){ki(e),e.headers=Nn.from(e.headers),e.data=Dn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ci(e.adapter||En.adapter)(e).then((function(t){return ki(e),t.data=Dn.call(e,e.transformResponse,t),t.headers=Nn.from(t.headers),t}),(function(t){return jn(t)||(ki(e),t&&t.response&&(t.response.data=Dn.call(e,e.transformResponse,t.response),t.response.headers=Nn.from(t.response.headers))),Promise.reject(t)}))}const _i="1.9.0",Ei={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ei[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ri={};Ei.transitional=function(e,t,n){function i(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new nn(i(r," has been removed"+(t?" in "+t:"")),nn.ERR_DEPRECATED);return t&&!Ri[r]&&(Ri[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},Ei.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ai={assertOptions:function(e,t,n){if("object"!==typeof e)throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new nn("option "+s+" must be "+n,nn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new nn("Unknown option "+s,nn.ERR_BAD_OPTION)}},validators:Ei},Ii=Ai.validators;class xi{constructor(e){this.defaults=e||{},this.interceptors={request:new mn,response:new mn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(i){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Gn(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Ai.assertOptions(n,{silentJSONParsing:Ii.transitional(Ii.boolean),forcedJSONParsing:Ii.transitional(Ii.boolean),clarifyTimeoutError:Ii.transitional(Ii.boolean)},!1),null!=i&&(Zt.isFunction(i)?t.paramsSerializer={serialize:i}:Ai.assertOptions(i,{encode:Ii.function,serialize:Ii.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ai.assertOptions(t,{baseUrl:Ii.spelling("baseURL"),withXsrfToken:Ii.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Zt.merge(r.common,r[t.method]);r&&Zt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Nn.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[Ti.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{l=Ti.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return fn($n((e=Gn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Zt.forEach(["delete","get","head","options"],(function(e){xi.prototype[e]=function(t,n){return this.request(Gn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Zt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Gn(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}xi.prototype[e]=t(),xi.prototype[e+"Form"]=t(!0)}));const Pi=xi;class Oi{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new Un(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Oi((function(t){e=t})),cancel:e}}}const Ni=Oi;const Di={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Di).forEach((e=>{let[t,n]=e;Di[n]=t}));const ji=Di;const Li=function e(t){const n=new Pi(t),i=pt(Pi.prototype.request,n);return Zt.extend(i,Pi.prototype,n,{allOwnKeys:!0}),Zt.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Gn(t,n))},i}(En);Li.Axios=Pi,Li.CanceledError=Un,Li.CancelToken=Ni,Li.isCancel=jn,Li.VERSION=_i,Li.toFormData=cn,Li.AxiosError=nn,Li.Cancel=Li.CanceledError,Li.all=function(e){return Promise.all(e)},Li.spread=function(e){return function(t){return e.apply(null,t)}},Li.isAxiosError=function(e){return Zt.isObject(e)&&!0===e.isAxiosError},Li.mergeConfig=Gn,Li.AxiosHeaders=Nn,Li.formToJSON=e=>Tn(Zt.isHTMLForm(e)?new FormData(e):e),Li.getAdapter=Ci,Li.HttpStatusCode=ji,Li.default=Li;const Ui=Li;var Mi,Fi;function Vi(e,t,n){if(n)for(let[i,r]of Object.entries(n))if("string"==typeof r)e.append(i,r);else for(let t of r)e.append(i,t);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function Bi(e,t){if(!e)return;let n=t;for(let[i,r]of Object.entries(e))r instanceof Date?n[i]=new Date(r.getTime()):Array.isArray(r)?n[i]=r.concat():n[i]=r}!function(e){e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss"}(Mi||(Mi={})),function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED"}(Fi||(Fi={}));class Hi{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._state=Fi.PENDING,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),e&&this._promise.catch((e=>{}))}get state(){return this._state}get promise(){return this._promise}resolve(e){if(this.state!==Fi.PENDING)throw new Error("cannot resolve ".concat(Fi[this.state].toLowerCase()));this._resolve(e),this._state=Fi.RESOLVED}reject(e){if(this.state!==Fi.PENDING)throw new Error("cannot reject ".concat(Fi[this.state].toLowerCase()));this._reject(e),this._state=Fi.REJECTED}resolvePending(e){this._state===Fi.PENDING&&this.resolve(e)}rejectPending(e){this._state===Fi.PENDING&&this.reject(e)}}var zi=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};class Wi{constructor(e,t,n,i,r,s,o){this.method=e,this.requestHeaders=t,this.request=n,this.headers=i,this.response=r,this.status=s,this.trailers=o}then(e,t){return this.promiseFinished().then((t=>e?Promise.resolve(e(t)):t),(e=>t?Promise.resolve(t(e)):Promise.reject(e)))}promiseFinished(){return zi(this,void 0,void 0,(function*(){let[e,t,n,i]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:e,response:t,status:n,trailers:i}}))}}class qi{constructor(e){this.defaultOptions=e}mergeOptions(e){return function(e,t){if(!t)return e;let n={};Bi(e,n),Bi(t,n);for(let s of Object.keys(t)){let o=t[s];switch(s){case"jsonOptions":n.jsonOptions=et(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=(i=e.binaryOptions,r=n.binaryOptions,Object.assign(Object.assign({},i),r));break;case"meta":n.meta={},Bi(e.meta,n.meta),Bi(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(o):o.concat()}}var i,r;return n}(this.defaultOptions,e)}unary(e,t,n){var i,r,s;let o=n,a=this.makeUrl(e,o),c=null!==(i=o.fetchInit)&&void 0!==i?i:{},l=o.sendJson?e.I.toJsonString(t,o.jsonOptions):e.I.toBinary(t,o.binaryOptions),u=new Hi,d=new Hi,h=new Hi,p=new Hi;return globalThis.fetch(a,Object.assign(Object.assign({},c),{method:"POST",headers:Vi(new globalThis.Headers,!!o.sendJson,o.meta),body:l,signal:null!==(r=n.abort)&&void 0!==r?r:null})).then((t=>{let n;u.resolve(function(e){let t={};return e.forEach(((e,n)=>{"content-type"!==n.toLowerCase()&&"content-length"!==n.toLowerCase()&&(t.hasOwnProperty(n)?t[n].push(e):t[n]=e)})),t}(t.headers));try{n=t.type}catch(i){}switch(n){case"error":case"opaque":case"opaqueredirect":throw new ht("fetch response type ".concat(t.type),Mi[Mi.unknown])}return t.ok?o.sendJson?t.json().then((t=>e.O.fromJson(t,o.jsonOptions)),(()=>{throw new ht("unable to read response body as json",Mi[Mi.dataloss])})):t.arrayBuffer().then((t=>e.O.fromBinary(new Uint8Array(t),o.binaryOptions)),(()=>{throw new ht("unable to read response body",Mi[Mi.dataloss])})):t.json().then((e=>{throw function(e){if(!Se(e)||"string"!==typeof e.code||"string"!==typeof e.msg)return new ht("cannot read twirp error response",Mi[Mi.internal]);let t={};if(Se(e.meta))for(let[n,i]of Object.entries(e.meta))"string"==typeof i&&(t[n]=i);return new ht(e.msg,e.code,t)}(e)}),(()=>{throw new ht("received HTTP "+t.status+", unable to read response body as json",Mi[Mi.internal])}))}),(e=>{if(e instanceof Error&&"AbortError"===e.name)throw new ht(e.message,Mi[Mi.cancelled]);throw new ht(e instanceof Error?e.message:e)})).then((e=>{d.resolve(e),h.resolve({code:"OK",detail:""}),p.resolve({})})).catch((t=>{let n=t instanceof ht?t:new ht(t instanceof Error?t.message:t,Mi[Mi.internal]);n.methodName=e.name,n.serviceName=e.service.typeName,u.rejectPending(n),d.rejectPending(n),h.rejectPending(n),p.rejectPending(n)})),new Wi(e,null!==(s=o.meta)&&void 0!==s?s:{},t,u.promise,d.promise,h.promise,p.promise)}makeUrl(e,t){let n=t.baseUrl;n.endsWith("/")&&(n=n.substring(0,n.length-1));let i=e.name;return!0!==t.useProtoMethodName&&(i=pe(i),i=i.substring(0,1).toUpperCase()+i.substring(1)),"".concat(n,"/").concat(e.service.typeName,"/").concat(i)}clientStreaming(e){const t=new ht("Client streaming is not supported by Twirp",Mi[Mi.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}duplex(e){const t=new ht("Duplex streaming is not supported by Twirp",Mi[Mi.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}serverStreaming(e){const t=new ht("Server streaming is not supported by Twirp",Mi[Mi.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}}var $i=n(7827),Ji=n(5868),Gi=n(2047),Ki=(0,n(4861).L)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Yi=n(4004),Xi=n(6634),Zi=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,$i.C6)(t,e),t.prototype.lift=function(e){var t=new Qi(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ki},t.prototype.next=function(e){var t=this;(0,Xi.Y)((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var r=(0,$i.Ju)(t.currentObservers),s=r.next();!s.done;s=r.next()){s.value.next(e)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;(0,Xi.Y)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,Xi.Y)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,r=n.isStopped,s=n.observers;return i||r?Gi.Kn:(this.currentObservers=null,s.push(e),new Gi.yU((function(){t.currentObservers=null,(0,Yi.o)(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,r=t.isStopped;n?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new Ji.c;return e.source=this,e},t.create=function(e,t){return new Qi(e,t)},t}(Ji.c),Qi=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return(0,$i.C6)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Gi.Kn},t}(Zi),er={now:function(){return(er.delegate||Date).now()},delegate:void 0},tr=function(e){function t(t,n,i){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===i&&(i=er);var r=e.call(this)||this;return r._bufferSize=t,r._windowTime=n,r._timestampProvider=i,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=n===1/0,r._bufferSize=Math.max(1,t),r._windowTime=Math.max(1,n),r}return(0,$i.C6)(t,e),t.prototype.next=function(t){var n=this,i=n.isStopped,r=n._buffer,s=n._infiniteTimeWindow,o=n._timestampProvider,a=n._windowTime;i||(r.push(t),!s&&r.push(o.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,i=this._buffer.slice(),r=0;r<i.length&&!e.closed;r+=n?1:2)e.next(i[r]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,i=e._buffer,r=e._infiniteTimeWindow,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){for(var o=n.now(),a=0,c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}},t}(Zi),nr=Array.isArray,ir=Object.getPrototypeOf,rr=Object.prototype,sr=Object.keys;function or(e){if(1===e.length){var t=e[0];if(nr(t))return{args:t,keys:null};if((i=t)&&"object"===typeof i&&ir(i)===rr){var n=sr(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var i;return{args:e,keys:null}}var ar=n(8165),cr=n(8117),lr=n(1190),ur=n(8344);function dr(e,t){return(0,lr.N)((function(n,i){var r=0;n.subscribe((0,ur._)(i,(function(n){i.next(e.call(t,n,r++))})))}))}var hr=Array.isArray;function pr(e){return dr((function(t){return function(e,t){return hr(t)?e.apply(void 0,(0,$i.fX)([],(0,$i.zs)(t))):e(t)}(e,t)}))}var fr=n(2476);var mr=n(937);function gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,fr.lI)(e),i=(0,fr.ms)(e),r=or(e),s=r.args,o=r.keys;if(0===s.length)return(0,ar.H)([],n);var a=new Ji.c(function(e,t,n){void 0===n&&(n=cr.D);return function(i){vr(t,(function(){for(var r=e.length,s=new Array(r),o=r,a=r,c=function(r){vr(t,(function(){var c=(0,ar.H)(e[r],t),l=!1;c.subscribe((0,ur._)(i,(function(e){s[r]=e,l||(l=!0,a--),a||i.next(n(s.slice()))}),(function(){--o||i.complete()})))}),i)},l=0;l<r;l++)c(l)}),i)}}(s,n,o?function(e){return function(e,t){return e.reduce((function(e,n,i){return e[n]=t[i],e}),{})}(o,e)}:cr.D));return i?a.pipe(pr(i)):a}function vr(e,t,n){e?(0,mr.N)(n,e,t):t()}var br=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,$i.C6)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,i=e._value;if(t)throw n;return this._throwIfClosed(),i},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Zi),yr=n(1998),wr=n(7917);function Sr(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==t){if(!1!==t){var r=new wr.Ms({next:function(){r.unsubscribe(),e()}});return(0,yr.Tg)(t.apply(void 0,(0,$i.fX)([],(0,$i.zs)(n)))).subscribe(r)}}else e()}function Cr(e,t,n){var i,r,s,o,a=!1;return e&&"object"===typeof e?(i=e.bufferSize,o=void 0===i?1/0:i,r=e.windowTime,t=void 0===r?1/0:r,a=void 0!==(s=e.refCount)&&s,n=e.scheduler):o=null!==e&&void 0!==e?e:1/0,function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new Zi}:t,i=e.resetOnError,r=void 0===i||i,s=e.resetOnComplete,o=void 0===s||s,a=e.resetOnRefCountZero,c=void 0===a||a;return function(e){var t,i,s,a=0,l=!1,u=!1,d=function(){null===i||void 0===i||i.unsubscribe(),i=void 0},h=function(){d(),t=s=void 0,l=u=!1},p=function(){var e=t;h(),null===e||void 0===e||e.unsubscribe()};return(0,lr.N)((function(e,f){a++,u||l||d();var m=s=null!==s&&void 0!==s?s:n();f.add((function(){0!==--a||u||l||(i=Sr(p,c))})),m.subscribe(f),!t&&a>0&&(t=new wr.Ms({next:function(e){return m.next(e)},error:function(e){u=!0,d(),i=Sr(h,r,e),m.error(e)},complete:function(){l=!0,d(),i=Sr(h,o),m.complete()}}),(0,yr.Tg)(e).subscribe(t))}))(e)}}({connector:function(){return new tr(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function kr(e,t){return void 0===t&&(t=cr.D),e=null!==e&&void 0!==e?e:Tr,(0,lr.N)((function(n,i){var r,s=!0;n.subscribe((0,ur._)(i,(function(n){var o=t(n);!s&&e(r,o)||(s=!1,r=o,i.next(n))})))}))}function Tr(e,t){return e===t}function _r(e,t){return void 0===t&&(t=!1),(0,lr.N)((function(n,i){var r=0;n.subscribe((0,ur._)(i,(function(n){var s=e(n,r++);(s||t)&&i.next(n),!s&&i.complete()})))}))}function Er(e,t){return kr((function(n,i){return t?t(n[e],i[e]):n[e]===i[e]}))}var Rr=n(1732);function Ar(e,t,n){return n?Ar(e,t).pipe(pr(n)):new Ji.c((function(n){var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)},r=e(i);return(0,Rr.T)(t)?function(){return t(i,r)}:void 0}))}function Ir(e,t,n){return void 0===n&&(n=1/0),(0,Rr.T)(t)?Ir((function(n,i){return dr((function(e,r){return t(n,e,i,r)}))((0,yr.Tg)(e(n,i)))}),n):("number"===typeof t&&(n=t),(0,lr.N)((function(t,i){return function(e,t,n,i,r,s,o,a){var c=[],l=0,u=0,d=!1,h=function(){!d||c.length||l||t.complete()},p=function(e){return l<i?f(e):c.push(e)},f=function(e){s&&t.next(e),l++;var a=!1;(0,yr.Tg)(n(e,u++)).subscribe((0,ur._)(t,(function(e){null===r||void 0===r||r(e),s?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{l--;for(var e=function(){var e=c.shift();o?(0,mr.N)(t,o,(function(){return f(e)})):f(e)};c.length&&l<i;)e();h()}catch(n){t.error(n)}})))};return e.subscribe((0,ur._)(t,p,(function(){d=!0,h()}))),function(){null===a||void 0===a||a()}}(t,i,e,n)})))}var xr=n(5505),Pr=["addListener","removeListener"],Or=["addEventListener","removeEventListener"],Nr=["on","off"];function Dr(e,t,n,i){if((0,Rr.T)(n)&&(i=n,n=void 0),i)return Dr(e,t,n).pipe(pr(i));var r=(0,$i.zs)(function(e){return(0,Rr.T)(e.addEventListener)&&(0,Rr.T)(e.removeEventListener)}(e)?Or.map((function(i){return function(r){return e[i](t,r,n)}})):function(e){return(0,Rr.T)(e.addListener)&&(0,Rr.T)(e.removeListener)}(e)?Pr.map(jr(e,t)):function(e){return(0,Rr.T)(e.on)&&(0,Rr.T)(e.off)}(e)?Nr.map(jr(e,t)):[],2),s=r[0],o=r[1];if(!s&&(0,xr.X)(e))return Ir((function(e){return Dr(e,t,n)}))((0,yr.Tg)(e));if(!s)throw new TypeError("Invalid event target");return new Ji.c((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return s(t),function(){return o(t)}}))}function jr(e,t){return function(n){return function(i){return e[n](t,i)}}}var Lr=function(e){function t(t,n){return e.call(this)||this}return(0,$i.C6)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Gi.yU),Ur={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=Ur.delegate;return(null===r||void 0===r?void 0:r.setInterval)?r.setInterval.apply(r,(0,$i.fX)([e,t],(0,$i.zs)(n))):setInterval.apply(void 0,(0,$i.fX)([e,t],(0,$i.zs)(n)))},clearInterval:function(e){var t=Ur.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Mr=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return(0,$i.C6)(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Ur.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Ur.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(r){i=!0,n=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Yi.o)(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Lr),Fr=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=er.now,e}(),Vr=new(function(e){function t(t,n){void 0===n&&(n=Fr.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return(0,$i.C6)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Fr))(Mr);function Br(e){return void 0===e&&(e=1/0),Ir(cr.D,e)}var Hr=new Ji.c((function(e){return e.complete()}));function zr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,fr.lI)(e),i=(0,fr.R0)(e,1/0),r=e;return r.length?1===r.length?(0,yr.Tg)(r[0]):Br(i)((0,ar.H)(r,n)):Hr}function Wr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Br(1)((0,ar.H)(e,(0,fr.lI)(e)))}function qr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,fr.lI)(e);return(0,lr.N)((function(t,i){(n?Wr(e,t,n):Wr(e,t)).subscribe(i)}))}function $r(e,t){return(0,Rr.T)(t)?Ir(e,t,1):Ir(e,1)}var Jr=n(5257),Gr=n(7946),Kr=n(3217);const Yr=["sdk"],Xr=["publishOptions"],Zr=["deviceId"],Qr=["deviceId"],es=["maxJoinRetries"],ts=["sdkName","sdkVersion"],ns=["sdkName","sdkVersion"],is="disabled",rs="auto-on",ss={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_CLOSED_CAPTIONS_CALL:"start-closed-captions-call",START_FRAME_RECORD_CALL:"start-frame-record-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_CLOSED_CAPTIONS_CALL:"stop-closed-captions-call",STOP_FRAME_RECORD_CALL:"stop-frame-record-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};class os extends Error{constructor(e){let{message:t,code:n,status:i,response:r,unrecoverable:s}=e;super(t),this.name="ErrorFromResponse",this.code=n,this.response=r,this.status=i,this.unrecoverable=s}toJSON(){const e=[["status",this.status],["code",this.code],["unrecoverable",this.unrecoverable]],t=[];for(const[n,i]of e)"undefined"!==typeof i&&null!==i&&t.push("".concat(n,": ").concat(i));return{message:"(".concat(t.join(", "),") - ").concat(this.message),stack:this.stack,name:this.name}}}var as;!function(e){e[e.NULL_VALUE=0]="NULL_VALUE"}(as||(as={}));const cs=new class extends ut{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>ls}}])}internalJsonWrite(e,t){let n={};for(let[i,r]of Object.entries(e.fields))n[i]=ls.toJson(r);return n}internalJsonRead(e,t,n){if(!Se(e))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+we(e)+".");n||(n=this.create());for(let[i,r]of globalThis.Object.entries(e))n.fields[i]=ls.fromJson(r);return n}};const ls=new class extends ut{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",as]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>cs},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>us}])}internalJsonWrite(e,t){if(void 0===e.kind.oneofKind)throw new globalThis.Error;switch(e.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return e.kind.boolValue;case"nullValue":return null;case"numberValue":let t=e.kind.numberValue;if("number"==typeof t&&!Number.isFinite(t))throw new globalThis.Error;return t;case"stringValue":return e.kind.stringValue;case"listValue":let n=this.fields.find((e=>6===e.no));if("message"!==(null===n||void 0===n?void 0:n.kind))throw new globalThis.Error;return n.T().toJson(e.kind.listValue);case"structValue":let i=this.fields.find((e=>5===e.no));if("message"!==(null===i||void 0===i?void 0:i.kind))throw new globalThis.Error;return i.T().toJson(e.kind.structValue)}}internalJsonRead(e,t,n){switch(n||(n=this.create()),typeof e){case"number":n.kind={oneofKind:"numberValue",numberValue:e};break;case"string":n.kind={oneofKind:"stringValue",stringValue:e};break;case"boolean":n.kind={oneofKind:"boolValue",boolValue:e};break;case"object":null===e?n.kind={oneofKind:"nullValue",nullValue:as.NULL_VALUE}:globalThis.Array.isArray(e)?n.kind={oneofKind:"listValue",listValue:us.fromJson(e)}:n.kind={oneofKind:"structValue",structValue:cs.fromJson(e)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+we(e))}return n}};const us=new class extends ut{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>ls}])}internalJsonWrite(e,t){return e.values.map((e=>ls.toJson(e)))}internalJsonRead(e,t,n){if(!globalThis.Array.isArray(e))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+we(e));n||(n=this.create());let i=e.map((e=>ls.fromJson(e)));return n.values.push(...i),n}};const ds=new class extends ut{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),t=Date.now();return e.seconds=Me.from(Math.floor(t/1e3)).toString(),e.nanos=t%1e3*1e6,e}toDate(e){return new Date(1e3*Me.from(e.seconds).toNumber()+Math.ceil(e.nanos/1e6))}fromDate(e){const t=this.create(),n=e.getTime();return t.seconds=Me.from(Math.floor(n/1e3)).toString(),t.nanos=1e6*(n%1e3+(n<0&&n%1e3!==0?1e3:0)),t}internalJsonWrite(e,t){let n=1e3*Me.from(e.seconds).toNumber();if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let i="Z";if(e.nanos>0){let t=(e.nanos+1e9).toString().substring(1);i="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(n).toISOString().replace(".000Z",i)}internalJsonRead(e,t,n){if("string"!==typeof e)throw new Error("Unable to parse Timestamp from JSON "+we(e)+".");let i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return n||(n=this.create()),n.seconds=Me.from(r/1e3).toString(),n.nanos=0,i[7]&&(n.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),n}};var hs,ps,fs,ms,gs,vs,bs,ys,ws,Ss,Cs,ks;!function(e){e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER"}(hs||(hs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT"}(ps||(ps={})),function(e){e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"}(fs||(fs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"}(ms||(ms={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL"}(gs||(gs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"}(vs||(vs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION"}(bs||(bs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE"}(ys||(ys={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED"}(ws||(ws={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE"}(Ss||(Ss={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN"}(Cs||(Cs={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL"}(ks||(ks={}));const Ts=new class extends ut{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>Rs},{no:2,name:"started_at",kind:"message",T:()=>ds},{no:3,name:"participant_count",kind:"message",T:()=>_s},{no:4,name:"pins",kind:"message",repeat:1,T:()=>Es}])}};const _s=new class extends ut{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}};const Es=new class extends ut{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const Rs=new class extends ut{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>ds},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",ps,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>cs},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}};const As=new class extends ut{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",fs,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}};const Is=new class extends ut{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}};const xs=new class extends ut{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>Is},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",fs,"VIDEO_QUALITY_"]}])}};const Ps=new class extends ut{constructor(){super("stream.video.sfu.models.SubscribeOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:2,name:"codecs",kind:"message",repeat:1,T:()=>Ns}])}};const Os=new class extends ut{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Ns},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5},{no:7,name:"video_dimension",kind:"message",T:()=>Is},{no:8,name:"id",kind:"scalar",T:5},{no:9,name:"use_single_layer",kind:"scalar",T:8}])}};const Ns=new class extends ut{constructor(){super("stream.video.sfu.models.Codec",[{no:16,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:15,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}};const Ds=new class extends ut{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",hs,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const js=new class extends ut{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>xs},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8},{no:11,name:"codec",kind:"message",T:()=>Ns},{no:12,name:"publish_option_id",kind:"scalar",T:5}])}};const Ls=new class extends ut{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",gs,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const Us=new class extends ut{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>Ms},{no:2,name:"os",kind:"message",T:()=>Fs},{no:3,name:"browser",kind:"message",T:()=>Vs},{no:4,name:"device",kind:"message",T:()=>Hs}])}};const Ms=new class extends ut{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",vs,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}};const Fs=new class extends ut{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}};const Vs=new class extends ut{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const Bs=new class extends ut{constructor(){super("stream.video.sfu.models.RTMPIngress",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13},{no:3,name:"frame_rate",kind:"scalar",T:1},{no:4,name:"software",kind:"scalar",T:9},{no:5,name:"version",kind:"scalar",T:9},{no:6,name:"encoder",kind:"scalar",T:9},{no:7,name:"remote_addr",kind:"scalar",T:9}])}};const Hs=new class extends ut{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const zs=new class extends ut{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>cs},{no:6,name:"created_at",kind:"message",T:()=>ds},{no:7,name:"updated_at",kind:"message",T:()=>ds}])}};const Ws=new class extends ut{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}};const qs=new class extends ut{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}};const $s=new class extends ut{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",Cs,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}};const Js=new class extends ut{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",ks,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}};const Gs=new class extends ut{constructor(){super("stream.video.sfu.models.PerformanceStats",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Ns},{no:3,name:"avg_frame_time_ms",kind:"scalar",T:2},{no:4,name:"avg_fps",kind:"scalar",T:2},{no:5,name:"video_dimension",kind:"message",T:()=>Is},{no:6,name:"target_bitrate",kind:"scalar",T:5}])}};var Ks=Object.freeze({__proto__:null,AndroidState:$s,get AndroidThermalState(){return Cs},AppleState:Js,get AppleThermalState(){return ks},Browser:Vs,Call:zs,get CallEndedReason(){return ws},CallGrants:Ws,CallState:Ts,ClientDetails:Us,Codec:Ns,get ConnectionQuality(){return ps},Device:Hs,Error:Ls,get ErrorCode(){return gs},get GoAwayReason(){return ys},ICETrickle:Ds,InputDevices:qs,OS:Fs,Participant:Rs,ParticipantCount:_s,get PeerType(){return hs},PerformanceStats:Gs,Pin:Es,PublishOption:Os,RTMPIngress:Bs,Sdk:Ms,get SdkType(){return vs},StreamQuality:As,SubscribeOption:Ps,TrackInfo:js,get TrackType(){return ms},get TrackUnpublishReason(){return bs},VideoDimension:Is,VideoLayer:xs,get VideoQuality(){return fs},get WebsocketReconnectStrategy(){return Ss}});const Ys=new class extends ut{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const Xs=new class extends ut{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>Ls}])}};const Zs=new class extends ut{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const Qs=new class extends ut{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>Ls}])}};const eo=new class extends ut{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",Ss,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};const to=new class extends ut{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>eo}])}};const no=new class extends ut{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>qs},{no:8,name:"video_devices",kind:"message",T:()=>qs},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>$s},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>Js},{no:11,name:"telemetry",kind:"message",T:()=>to},{no:12,name:"rtmp",kind:"message",T:()=>Bs},{no:13,name:"subscriber_rtc_stats",kind:"scalar",T:9},{no:14,name:"publisher_rtc_stats",kind:"scalar",T:9},{no:15,name:"rtc_stats",kind:"scalar",T:9},{no:16,name:"encode_stats",kind:"message",repeat:1,T:()=>Gs},{no:17,name:"decode_stats",kind:"message",repeat:1,T:()=>Gs},{no:18,name:"unified_session_id",kind:"scalar",T:9}])}};const io=new class extends ut{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>Ls}])}};const ro=new class extends ut{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",hs,"PEER_TYPE_"]}])}};const so=new class extends ut{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>Ls}])}};const oo=new class extends ut{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>co}])}};const ao=new class extends ut{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>Ls}])}};const co=new class extends ut{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}};new class extends ut{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}};new class extends ut{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}};const lo=new class extends ut{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>ho}])}};const uo=new class extends ut{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>Ls}])}};const ho=new class extends ut{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>Is}])}};const po=new class extends ut{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",hs,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const fo=new class extends ut{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>Ls}])}};const mo=new class extends ut{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>Ls}])}};const go=new class extends ut{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>js}])}};const vo=new class extends ut{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>Ls}])}},bo=new class{constructor(e,t,n){this.typeName=e,this.methods=t.map((e=>function(e,t){var n,i,r;let s=e;return s.service=t,s.localName=null!==(n=s.localName)&&void 0!==n?n:pe(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=null!==(i=s.options)&&void 0!==i?i:{},s.idempotency=null!==(r=s.idempotency)&&void 0!==r?r:void 0,s}(e,this))),this.options=null!==n&&void 0!==n?n:{}}}("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:go,O:vo},{name:"SendAnswer",options:{},I:po,O:fo},{name:"IceTrickle",options:{},I:Ds,O:mo},{name:"UpdateSubscriptions",options:{},I:lo,O:uo},{name:"UpdateMuteStates",options:{},I:oo,O:ao},{name:"IceRestart",options:{},I:ro,O:so},{name:"SendStats",options:{},I:no,O:io},{name:"StartNoiseCancellation",options:{},I:Ys,O:Xs},{name:"StopNoiseCancellation",options:{},I:Zs,O:Qs}]);const yo=new class extends ut{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>Mo},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>Fo},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>Vo},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>Wo},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>Ds},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>Go},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>jo},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>Lo},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>Ho},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>Do},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>Ao},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>Io},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>xo},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>ko},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>Ko},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>Yo},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>To},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>Co},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>Xo},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>Uo},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>So},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>wo}])}};const wo=new class extends ut{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_options",kind:"message",repeat:1,T:()=>Os},{no:2,name:"reason",kind:"scalar",T:9}])}};new class extends ut{constructor(){super("stream.video.sfu.event.ChangePublishOptionsComplete",[])}};const So=new class extends ut{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}};const Co=new class extends ut{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>Es}])}};const ko=new class extends ut{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>Ls},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",Ss,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};new class extends ut{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",hs,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}};const To=new class extends ut{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",hs,"PEER_TYPE_"]}])}};const _o=new class extends ut{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>Po},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>Ro},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>Eo}])}};const Eo=new class extends ut{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}};const Ro=new class extends ut{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}};const Ao=new class extends ut{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>_s}])}};const Io=new class extends ut{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>Rs}])}};const xo=new class extends ut{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",bs,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>Rs}])}};const Po=new class extends ut{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>Us},{no:5,name:"migration",kind:"message",T:()=>No},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>Oo},{no:9,name:"preferred_publish_options",kind:"message",repeat:1,T:()=>Os},{no:10,name:"preferred_subscribe_options",kind:"message",repeat:1,T:()=>Ps}])}};const Oo=new class extends ut{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",Ss,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>js},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>ho},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9},{no:8,name:"reason",kind:"scalar",T:9}])}};const No=new class extends ut{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>js},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>ho}])}};const Do=new class extends ut{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>Ts},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",repeat:1,T:()=>Os}])}};const jo=new class extends ut{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Rs}])}};const Lo=new class extends ut{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Rs}])}};const Uo=new class extends ut{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Rs}])}};const Mo=new class extends ut{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}};const Fo=new class extends ut{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}};const Vo=new class extends ut{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>Bo}])}};const Bo=new class extends ut{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",ps,"CONNECTION_QUALITY_"]}])}};const Ho=new class extends ut{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const zo=new class extends ut{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}};const Wo=new class extends ut{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>zo}])}};const qo=new class extends ut{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>Ns},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:4,name:"publish_option_id",kind:"scalar",T:5}])}};const $o=new class extends ut{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>Ns},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}};const Jo=new class extends ut{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>Ns},{no:3,name:"layers",kind:"message",repeat:1,T:()=>$o},{no:4,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ms,"TRACK_TYPE_"]},{no:5,name:"publish_option_id",kind:"scalar",T:5}])}};const Go=new class extends ut{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>qo},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>Jo}])}};const Ko=new class extends ut{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>Ws},{no:2,name:"message",kind:"scalar",T:9}])}};const Yo=new class extends ut{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",ys,"GO_AWAY_REASON_"]}])}};const Xo=new class extends ut{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",ws,"CALL_ENDED_REASON_"]}])}};var Zo,Qo;!function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE"}(Zo||(Zo={})),function(e){e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW"}(Qo||(Qo={}));class ea{constructor(e){this._transport=e,this.typeName=bo.typeName,this.methods=bo.methods,this.options=bo.options}setPublisher(e,t){const n=this.methods[0],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}sendAnswer(e,t){const n=this.methods[1],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}iceTrickle(e,t){const n=this.methods[2],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}updateSubscriptions(e,t){const n=this.methods[3],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}updateMuteStates(e,t){const n=this.methods[4],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}iceRestart(e,t){const n=this.methods[5],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}sendStats(e,t){const n=this.methods[6],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}startNoiseCancellation(e,t){const n=this.methods[7],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}stopNoiseCancellation(e,t){const n=this.methods[8],i=this._transport.mergeOptions(t);return dt("unary",this._transport,n,i,e)}}const ta={baseUrl:"",sendJson:!0,timeout:5e3,jsonOptions:{ignoreUnknownFields:!0}},na=(e,t)=>({interceptUnary:(n,i,r,s)=>{let o;try{o=n(i,r,s)}finally{var a,c,l;e(t,"Invoked SFU RPC method ".concat(i.name),{request:null===(a=o)||void 0===a?void 0:a.request,headers:null===(c=o)||void 0===c?void 0:c.requestHeaders,response:null===(l=o)||void 0===l?void 0:l.response})}return o}}),ia=e=>{const t={SendStats:!0};return{interceptUnary(n,i,r,s){if(t[i.name])return n(i,r,s);try{return e(i.name,r),n(i,r,s)}catch(o){throw e("".concat(i.name,"OnFailure"),[r,o]),o}}}},ra=e=>new Promise((t=>setTimeout(t,e)));function sa(e){return e&&("[object Function]"===Object.prototype.toString.call(e)||"function"===typeof e||e instanceof Function)}const oa=40,aa=1e3;function ca(e){const t=Math.min(500+2e3*e,5e3),n=Math.min(Math.max(250,2e3*(e-1)),5e3);return Math.floor(Math.random()*(t-n)+n)}function la(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function ua(){const e=function(e){const t=new Uint8Array(e);return da(t),t}(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,[la(e.subarray(0,4)),la(e.subarray(4,6)),la(e.subarray(6,8)),la(e.subarray(8,10)),la(e.subarray(10,16))].join("-")}const da="undefined"!==typeof crypto&&crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t};function ha(e){"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function pa(e){"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}const fa=()=>{var e;return"undefined"!==typeof navigator&&"reactnative"===(null===(e=navigator.product)||void 0===e?void 0:e.toLowerCase())},ma=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let ga,va="info";const ba=function(e,t){let n;switch(e){case"error":if(fa()){t="ERROR: ".concat(t),n=console.info;break}n=console.error;break;case"warn":if(fa()){t="WARN: ".concat(t),n=console.info;break}n=console.warn;break;case"info":n=console.info;break;case"trace":n=console.trace;break;default:n=console.log}for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];n(t,...r)},ya=e=>{va=e},wa=()=>va,Sa=e=>{const t=ga||ba,n=(e||[]).filter(Boolean).join(":");return function(e,i){if(ma[e]>=ma[va]){for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];t(e,"[".concat(n,"]: ").concat(i),...s)}}},Ca=async(e,t)=>{let n,i=0;do{var r;i>0&&await ra(ca(i));try{n=await e()}catch(o){var s;const e=o instanceof ht&&o.code===Mi[Mi.cancelled],n=null!==(s=null===t||void 0===t?void 0:t.aborted)&&void 0!==s&&s;if(e||n)throw o;Sa(["sfu-client","rpc"])("debug","rpc failed (".concat(i,")"),o),i++}}while(!n||null!==(r=n.response.error)&&void 0!==r&&r.shouldRetry);return n},ka=async e=>{var t;const n=new RTCPeerConnection;n.addTransceiver("video",{direction:e}),n.addTransceiver("audio",{direction:e});const i=null!==(t=(await n.createOffer()).sdp)&&void 0!==t?t:"";return n.getTransceivers().forEach((e=>{var t;null===(t=e.stop)||void 0===t||t.call(e)})),n.close(),i},Ta=e=>!!e&&("vp9"===(e=e.toLowerCase())||"av1"===e||"video/vp9"===e||"video/av1"===e),_a={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,changePublishOptions:void 0},Ea=e=>Object.prototype.hasOwnProperty.call(_a,e);class Ra{constructor(){var e=this;this.logger=Sa(["Dispatcher"]),this.subscribers={},this.dispatch=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const i=t.eventPayload.oneofKind;if(!i)return;const r=t.eventPayload[i];e.logger("debug","Dispatching ".concat(i,", tag=").concat(n),r);const s=e.subscribers[i];if(s)for(const a of s)try{a(r)}catch(o){e.logger("warn","Listener failed with error",o)}},this.on=(e,t)=>{var n,i;return(null!==(n=(i=this.subscribers)[e])&&void 0!==n?n:i[e]=[]).push(t),()=>{this.off(e,t)}},this.off=(e,t)=>{this.subscribers[e]=(this.subscribers[e]||[]).filter((e=>e!==t))}}}class Aa{constructor(){this.subscriberCandidates=new tr,this.publisherCandidates=new tr,this.push=e=>{const t=Ia(e);if(t)if(e.peerType===hs.SUBSCRIBER)this.subscriberCandidates.next(t);else if(e.peerType===hs.PUBLISHER_UNSPECIFIED)this.publisherCandidates.next(t);else{Sa(["sfu-client"])("warn","ICETrickle, Unknown peer type",e)}},this.dispose=()=>{this.subscriberCandidates.complete(),this.publisherCandidates.complete()}}}const Ia=e=>{try{return JSON.parse(e.iceCandidate)}catch(t){return void Sa(["sfu-client"])("error","Failed to parse ICE Trickle",t,e)}},xa=Na((function(e,t){let n=!1;return{cb:()=>t().finally((()=>{n||Oa.delete(e)})),onContinued:()=>n=!0}})),Pa=Na((function(e,t){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally((()=>{n.signal.aborted||Oa.delete(e)})),onContinued:()=>n.abort()}})),Oa=new Map;function Na(e){return function(t,n){const{cb:i,onContinued:r}=e(t,n),s=Oa.get(t);null===s||void 0===s||s.onContinued();const o=s?s.promise.then(i,i):i();return Oa.set(t,{promise:o,onContinued:r}),o}}const Da=e=>{let t,n;if(gr([e]).subscribe({next:e=>{let[n]=e;t=n},error:e=>{n=e}}).unsubscribe(),n)throw n;return t},ja=(e,t)=>{const n=(e=>"function"===typeof e)(t)?t(Da(e)):t;return e.next(n),n},La=(e,t)=>{const n=e.getValue(),i=ja(e,t);return{lastValue:n,value:i,rollback:()=>ja(e,n)}},Ua=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>Sa(["RxUtils"])("warn","An observable emitted an error",e);const i=e.subscribe({next:t,error:n});return()=>{i.unsubscribe()}},Ma=(e,t)=>{const n=Symbol();return Ua(e,(e=>{xa(n,(()=>t(e)))}))};var Fa,Va=Object.freeze({__proto__:null,createSafeAsyncSubscription:Ma,createSubscription:Ua,getCurrentValue:Da,setCurrentValue:ja,updateValue:La});!function(e){e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline"}(Fa||(Fa={}));class Ba{constructor(){this.connectedUserSubject=new br(void 0),this.callsSubject=new br([]),this.setConnectedUser=e=>ja(this.connectedUserSubject,e),this.setCalls=e=>ja(this.callsSubject,e),this.registerCall=e=>{this.calls.find((t=>t.cid===e.cid))||this.setCalls((t=>[...t,e]))},this.unregisterCall=e=>(Sa(["client-state"])("trace","Unregistering call: ".concat(e.cid)),this.setCalls((t=>t.filter((t=>t!==e))))),this.findCall=(e,t)=>this.calls.find((n=>n.type===e&&n.id===t)),this.connectedUserSubject.subscribe((async e=>{if(!e){const e=Sa(["client-state"]);for(const t of this.calls)t.state.callingState!==Fa.LEFT&&(e("info","User disconnected, leaving call: ".concat(t.cid)),await t.leave({message:"client.disconnectUser() called"}).catch((n=>{e("error","Error leaving call: ".concat(t.cid),n)})))}}))}get connectedUser(){return Da(this.connectedUserSubject)}get calls(){return Da(this.callsSubject)}}class Ha{constructor(e){this.getCurrentValue=Da,this.connectedUser$=e.connectedUserSubject.asObservable(),this.calls$=e.callsSubject.asObservable()}get connectedUser(){return Da(this.connectedUser$)}get calls(){return Da(this.calls$)}}const za=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{for(const i of t){const t=i(e,n);if(0!==t)return t}return 0}},Wa=e=>t=>(n,i)=>e(n,i)?t(n,i):0,qa=e=>e.publishedTracks.includes(ms.VIDEO),$a=e=>e.publishedTracks.includes(ms.AUDIO),Ja=e=>e.publishedTracks.includes(ms.SCREEN_SHARE),Ga=e=>e.publishedTracks.includes(ms.SCREEN_SHARE_AUDIO),Ka=e=>!!e.pin&&(e.pin.isLocalPin||e.pin.pinnedAt>0),Ya=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,Xa=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,Za=(e,t)=>Ja(e)&&!Ja(t)?-1:!Ja(e)&&Ja(t)?1:0,Qa=(e,t)=>qa(e)&&!qa(t)?-1:!qa(e)&&qa(t)?1:0,ec=(e,t)=>$a(e)&&!$a(t)?-1:!$a(e)&&$a(t)?1:0,tc=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},nc=e=>(t,n)=>{var i,r,s,o;return(null===(i=t.reaction)||void 0===i?void 0:i.type)===e&&(null===(r=n.reaction)||void 0===r?void 0:r.type)!==e?-1:(null===(s=t.reaction)||void 0===s?void 0:s.type)!==e&&(null===(o=n.reaction)||void 0===o?void 0:o.type)===e?1:0},ic=(e,t)=>(e.roles||[]).some((e=>t.includes(e))),rc=Wa(((e,t)=>{var n,i;return(null===(n=e.viewportVisibilityState)||void 0===n?void 0:n.videoTrack)===Zo.INVISIBLE||(null===(i=t.viewportVisibilityState)||void 0===i?void 0:i.videoTrack)===Zo.INVISIBLE})),sc=Wa(((e,t)=>{var n,i,r,s;return(null===(n=e.viewportVisibilityState)||void 0===n?void 0:n.videoTrack)===Zo.INVISIBLE||(null===(i=e.viewportVisibilityState)||void 0===i?void 0:i.videoTrack)===Zo.UNKNOWN||(null===(r=t.viewportVisibilityState)||void 0===r?void 0:r.videoTrack)===Zo.INVISIBLE||(null===(s=t.viewportVisibilityState)||void 0===s?void 0:s.videoTrack)===Zo.UNKNOWN})),oc=za(tc,Za,rc(za(Ya,Xa,nc("raised-hand"),Qa,ec))),ac=za(tc,Za,Ya,rc(za(Xa,nc("raised-hand"),Qa,ec))),cc=za(tc,sc(za(Ya,Xa,nc("raised-hand"),Qa,ec))),lc=za(rc(za(Ya,Xa,nc("raised-hand"),Qa,ec)),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>ic(e,t)&&!ic(n,t)?-1:!ic(e,t)&&ic(n,t)?1:0}("admin","host","speaker")),uc={broadcasting:!1,hls:{playlist_url:"",status:""},rtmps:[]};class dc{constructor(){this.backstageSubject=new br(!0),this.blockedUserIdsSubject=new br([]),this.createdAtSubject=new br(new Date),this.endedAtSubject=new br(void 0),this.startsAtSubject=new br(void 0),this.updatedAtSubject=new br(new Date),this.createdBySubject=new br(void 0),this.customSubject=new br({}),this.egressSubject=new br(void 0),this.ingressSubject=new br(void 0),this.recordingSubject=new br(!1),this.sessionSubject=new br(void 0),this.settingsSubject=new br(void 0),this.transcribingSubject=new br(!1),this.captioningSubject=new br(!1),this.endedBySubject=new br(void 0),this.thumbnailsSubject=new br(void 0),this.membersSubject=new br([]),this.ownCapabilitiesSubject=new br([]),this.callingStateSubject=new br(Fa.UNKNOWN),this.startedAtSubject=new br(void 0),this.participantCountSubject=new br(0),this.anonymousParticipantCountSubject=new br(0),this.participantsSubject=new br([]),this.callStatsReportSubject=new br(void 0),this.closedCaptionsSubject=new br([]),this.orphanedTracks=[],this.logger=Sa(["CallState"]),this.sortParticipantsBy=oc,this.closedCaptionsTasks=new Map,this.dispose=()=>{for(const[e,t]of this.closedCaptionsTasks.entries())clearTimeout(t),this.closedCaptionsTasks.delete(e)},this.setSortParticipantsBy=e=>{this.sortParticipantsBy=e,this.setCurrentValue(this.participantsSubject,(e=>e))},this.getCurrentValue=Da,this.setCurrentValue=ja,this.setParticipantCount=e=>this.setCurrentValue(this.participantCountSubject,e),this.setStartedAt=e=>this.setCurrentValue(this.startedAtSubject,e),this.setCaptioning=e=>La(this.captioningSubject,e),this.setAnonymousParticipantCount=e=>this.setCurrentValue(this.anonymousParticipantCountSubject,e),this.setParticipants=e=>this.setCurrentValue(this.participantsSubject,e),this.setCallingState=e=>this.setCurrentValue(this.callingStateSubject,e),this.setCallStatsReport=e=>this.setCurrentValue(this.callStatsReportSubject,e),this.setMembers=e=>{this.setCurrentValue(this.membersSubject,e)},this.setOwnCapabilities=e=>this.setCurrentValue(this.ownCapabilitiesSubject,e),this.setBackstage=e=>this.setCurrentValue(this.backstageSubject,e),this.setEndedAt=e=>this.setCurrentValue(this.endedAtSubject,e),this.findParticipantBySessionId=e=>this.participants.find((t=>t.sessionId===e)),this.getParticipantLookupBySessionId=()=>this.participants.reduce(((e,t)=>(e[t.sessionId]=t,e)),{}),this.updateParticipant=(e,t)=>{const n=this.findParticipantBySessionId(e);if(!n)return void this.logger("warn","Participant with sessionId ".concat(e," not found"));const i="function"===typeof t?t(n):t,r=(0,u.A)((0,u.A)({},n),i);return this.setParticipants((t=>t.map((t=>t.sessionId===e?r:t))))},this.updateOrAddParticipant=(e,t)=>this.setParticipants((n=>{let i=!0;const r=n.map((n=>n.sessionId===e?(i=!1,(0,u.A)((0,u.A)({},n),t)):n));return i&&r.push(t),r})),this.updateParticipants=e=>0===Object.keys(e).length?this.participants:this.setParticipants((t=>t.map((t=>{const n=e[t.sessionId];return n?(0,u.A)((0,u.A)({},t),n):t})))),this.updateParticipantTracks=(e,t)=>this.updateParticipants(Object.entries(t).reduce(((t,n)=>{let[i,r]=n;r.dimension&&(r.dimension.height=Math.ceil(r.dimension.height),r.dimension.width=Math.ceil(r.dimension.width));const s="videoTrack"===e?"videoDimension":"screenShareTrack"===e?"screenShareDimension":void 0;return s&&(t[i]={[s]:r.dimension}),t}),{})),this.updateFromEvent=e=>{const t=this.eventHandlers[e.type];t&&t(e)},this.setServerSidePins=e=>{const t=e.reduce(((e,t)=>(e[t.sessionId]=Date.now(),e)),{});return this.setParticipants((e=>e.map((e=>{const n=t[e.sessionId];return n?(0,u.A)((0,u.A)({},e),{},{pin:{isLocalPin:!1,pinnedAt:n}}):e.pin&&!e.pin.isLocalPin?(0,u.A)((0,u.A)({},e),{},{pin:void 0}):e}))))},this.registerOrphanedTrack=e=>{this.orphanedTracks.push(e)},this.removeOrphanedTrack=e=>{this.orphanedTracks=this.orphanedTracks.filter((t=>t.id!==e))},this.takeOrphanedTracks=e=>{const t=this.orphanedTracks.filter((t=>t.trackLookupPrefix===e));return t.length>0&&(this.orphanedTracks=this.orphanedTracks.filter((t=>t.trackLookupPrefix!==e))),t},this.updateClosedCaptionSettings=e=>{this.closedCaptionsSettings=(0,u.A)((0,u.A)({},this.closedCaptionsSettings),e)},this.updateFromCallResponse=e=>{this.setBackstage(e.backstage),this.setCurrentValue(this.blockedUserIdsSubject,e.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(e.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(e.updated_at)),this.setCurrentValue(this.startsAtSubject,e.starts_at?new Date(e.starts_at):void 0),this.setEndedAt(e.ended_at?new Date(e.ended_at):void 0),this.setCurrentValue(this.createdBySubject,e.created_by),this.setCurrentValue(this.customSubject,e.custom),this.setCurrentValue(this.egressSubject,e.egress),this.setCurrentValue(this.ingressSubject,e.ingress),this.setCurrentValue(this.recordingSubject,e.recording);const t=this.setCurrentValue(this.sessionSubject,e.session);this.updateParticipantCountFromSession(t),this.setCurrentValue(this.settingsSubject,e.settings),this.setCurrentValue(this.transcribingSubject,e.transcribing),this.setCurrentValue(this.captioningSubject,e.captioning),this.setCurrentValue(this.thumbnailsSubject,e.thumbnails)},this.updateFromSfuCallState=(e,t,n)=>{var i;const{participants:r,participantCount:s,startedAt:o,pins:a}=e,c=null!==(i=null===n||void 0===n?void 0:n.announcedTracks.map((e=>e.trackType)))&&void 0!==i?i:[];this.setParticipants((()=>{const e=this.getParticipantLookupBySessionId();return r.map((n=>{var i;const r=e[n.sessionId],s=n.sessionId===t;return Object.assign({},r,n,{isLocalParticipant:s,publishedTracks:s?c:n.publishedTracks,viewportVisibilityState:null!==(i=null===r||void 0===r?void 0:r.viewportVisibilityState)&&void 0!==i?i:{videoTrack:Zo.UNKNOWN,screenShareTrack:Zo.UNKNOWN}})}))})),this.setParticipantCount((null===s||void 0===s?void 0:s.total)||0),this.setAnonymousParticipantCount((null===s||void 0===s?void 0:s.anonymous)||0),this.setStartedAt(o?ds.toDate(o):new Date),this.setServerSidePins(a)},this.updateFromMemberRemoved=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.filter((t=>-1===e.members.indexOf(t.user_id)))))},this.updateFromMemberAdded=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>[...t,...e.members]))},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc;return(0,u.A)((0,u.A)({},e),{},{broadcasting:!1,hls:(0,u.A)((0,u.A)({},e.hls),{},{status:""})})}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc;return(0,u.A)((0,u.A)({},e),{},{broadcasting:!1,hls:(0,u.A)((0,u.A)({},e.hls),{},{status:""})})}))},this.updateParticipantCountFromSession=e=>{if(!e||this.callingState===Fa.JOINED)return;const t=Object.values(e.participants_count_by_role).reduce(((e,t)=>e+t),0),n=Math.max(t,e.participants.length);this.setParticipantCount(n),this.setAnonymousParticipantCount(e.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>t?(0,u.A)((0,u.A)({},t),{},{anonymous_participant_count:e.anonymous_participant_count,participants_count_by_role:e.participants_count_by_role}):t));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantLeft=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:i}=t,{user:r,user_session_id:s}=e.participant;return(0,u.A)((0,u.A)({},t),{},{participants:n.filter((e=>e.user_session_id!==s)),participants_count_by_role:(0,u.A)((0,u.A)({},i),{},{[r.role]:Math.max(0,(i[r.role]||0)-1)})})}));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantJoined=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:i}=t,{user:r,user_session_id:s}=e.participant;let o=!0;const a=n.map((t=>t.user_session_id===s?(o=!1,e.participant):t));o&&a.push(e.participant);const c=o?1:0;return(0,u.A)((0,u.A)({},t),{},{participants:a,participants_count_by_role:(0,u.A)((0,u.A)({},i),{},{[r.role]:(i[r.role]||0)+c})})}));this.updateParticipantCountFromSession(t)},this.updateMembers=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.map((t=>{const n=e.members.find((e=>e.user_id===t.user_id));return n||t}))))},this.updateParticipantReaction=e=>{const{user:t,custom:n,type:i,emoji_code:r}=e.reaction;this.setParticipants((e=>e.map((e=>e.userId!==t.id?e:(0,u.A)((0,u.A)({},e),{},{reaction:{type:i,emoji_code:r,custom:n}})))))},this.unblockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>t?t.filter((t=>t!==e.user.id)):t))},this.blockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>[...t||[],e.user.id]))},this.updateOwnCapabilities=e=>{var t;e.user.id===(null===(t=this.localParticipant)||void 0===t?void 0:t.userId)&&this.setCurrentValue(this.ownCapabilitiesSubject,e.own_capabilities)},this.updateFromClosedCaptions=e=>{this.setCurrentValue(this.closedCaptionsSubject,(t=>{const{closed_caption:n}=e,i=e=>"".concat(e.speaker_id,"/").concat(e.start_time),r=i(n);if(t.some((e=>i(e)===r)))return t;const s=[...t,n],{visibilityDurationMs:o=2700,maxVisibleCaptions:a=2}=this.closedCaptionsSettings||{};if(o>0){const e=setTimeout((()=>{this.setCurrentValue(this.closedCaptionsSubject,(e=>e.filter((e=>e!==n)))),this.closedCaptionsTasks.delete(r)}),o);this.closedCaptionsTasks.set(r,e);for(let t=0;t<s.length-a;t++){const e=i(s[t]),n=this.closedCaptionsTasks.get(e);clearTimeout(n),this.closedCaptionsTasks.delete(e)}}return s.slice(-a)}))},this.participants$=this.participantsSubject.asObservable().pipe(dr((e=>e.sort(this.sortParticipantsBy))),Cr({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(dr((e=>e.find((e=>e.isLocalParticipant)))),Cr({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(dr((e=>e.filter((e=>!e.isLocalParticipant)))),Cr({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(dr((e=>e.filter((e=>!!e.pin)))),Cr({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(dr((e=>e.find((e=>e.isDominantSpeaker)))),Cr({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(dr((e=>e.some((e=>Ja(e))))),kr(),Cr({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable(),this.closedCaptions$=this.closedCaptionsSubject.asObservable();const e=(e,t)=>{if(e.length!==t.length)return!1;for(const n of e)if(!t.includes(n))return!1;for(const n of t)if(!e.includes(n))return!1;return!0},t=(e,t)=>e.asObservable().pipe(kr(t));this.anonymousParticipantCount$=t(this.anonymousParticipantCountSubject),this.blockedUserIds$=t(this.blockedUserIdsSubject,e),this.backstage$=t(this.backstageSubject),this.callingState$=t(this.callingStateSubject),this.ownCapabilities$=t(this.ownCapabilitiesSubject,e),this.participantCount$=t(this.participantCountSubject),this.recording$=t(this.recordingSubject),this.transcribing$=t(this.transcribingSubject),this.captioning$=t(this.captioningSubject),this.eventHandlers={"call.frame_recording_ready":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.rtmp_broadcast_failed":void 0,"call.rtmp_broadcast_started":void 0,"call.rtmp_broadcast_stopped":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.updated":void 0,custom:void 0,"call.accepted":e=>this.updateFromCallResponse(e.call),"call.blocked_user":this.blockUser,"call.closed_caption":this.updateFromClosedCaptions,"call.closed_captions_failed":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.closed_captions_started":()=>{this.setCurrentValue(this.captioningSubject,!0)},"call.closed_captions_stopped":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.created":e=>this.updateFromCallResponse(e.call),"call.deleted":e=>this.updateFromCallResponse(e.call),"call.ended":e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.endedBySubject,e.user)},"call.frame_recording_failed":e=>{this.updateFromCallResponse(e.call)},"call.frame_recording_started":e=>{this.updateFromCallResponse(e.call)},"call.frame_recording_stopped":e=>{this.updateFromCallResponse(e.call)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":e=>{this.updateFromCallResponse(e.call)},"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":e=>this.updateFromCallResponse(e.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":e=>{this.updateFromCallResponse(e.call),this.setMembers(e.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":e=>this.updateFromCallResponse(e.call),"call.ring":e=>this.updateFromCallResponse(e.call),"call.missed":e=>this.updateFromCallResponse(e.call),"call.session_ended":e=>this.updateFromCallResponse(e.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":e=>this.updateFromCallResponse(e.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":e=>this.updateFromCallResponse(e.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get captioning(){return this.getCurrentValue(this.captioning$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}get closedCaptions(){return this.getCurrentValue(this.closedCaptions$)}}const hc=e=>{const t=[];return e.forEach((e=>{t.push(e)})),t},pc=e=>({id:e.id,tracks:e.getTracks().map((e=>({id:e.id,kind:e.kind,label:e.label,enabled:e.enabled,muted:e.muted,readyState:e.readyState})))}),fc=e=>e&&e.type===vs.REACT?"stream-react":e&&e.type===vs.REACT_NATIVE?"stream-react-native":"stream-js",mc=e=>e?"".concat(e.major,".").concat(e.minor,".").concat(e.patch):"0.0.0-development",gc=()=>"undefined"!==typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),vc=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Firefox"))};var bc=Object.freeze({__proto__:null,isChrome:()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Chrome"))},isFirefox:vc,isSafari:gc});const yc=(e,t)=>{const{trackKind:n,kind:i,publisher:r}=t,s="subscriber"===i?"inbound-rtp":"outbound-rtp",o=hc(e);return{rawStats:e,streams:o.filter((e=>e.type===s&&e.kind===n)).map((e=>{const t=e,n=o.find((e=>"codec"===e.type&&e.id===t.codecId)),s=o.find((e=>"transport"===e.type&&e.id===t.transportId));let a,c;if(s&&"connected"===s.dtlsState){const e=o.find((e=>"candidate-pair"===e.type&&e.id===s.selectedCandidatePairId));a=null===e||void 0===e?void 0:e.currentRoundTripTime}if("publisher"===i&&r){const e=vc(),n=o.find((n=>"media-source"===n.type&&(!!e||n.id===t.mediaSourceId)));n&&(c=r.getTrackType(n.trackIdentifier))}return{bytesSent:t.bytesSent,bytesReceived:t.bytesReceived,codec:null===n||void 0===n?void 0:n.mimeType,currentRoundTripTime:a,frameHeight:t.frameHeight,frameWidth:t.frameWidth,framesPerSecond:t.framesPerSecond,jitter:t.jitter,kind:t.kind,mediaSourceId:t.mediaSourceId,qualityLimitationReason:t.qualityLimitationReason,rid:t.rid,ssrc:t.ssrc,trackType:c}})),timestamp:Date.now()}},wc=e=>({rawReport:null!==e&&void 0!==e?e:{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",codecPerTrackType:{},timestamp:Date.now()}),Sc=e=>{const t=wc(e);let n=-1;const i=new Set,r=e.streams,s=r.reduce(((e,t)=>{e.totalBytesSent+=t.bytesSent||0,e.totalBytesReceived+=t.bytesReceived||0,e.averageJitterInMs+=t.jitter||0,e.averageRoundTripTimeInMs+=t.currentRoundTripTime||0;const r=(s=t.frameWidth||0,o=t.frameHeight||0,s*o);var s,o;return r>n&&(e.highestFrameWidth=t.frameWidth||0,e.highestFrameHeight=t.frameHeight||0,e.highestFramesPerSecond=t.framesPerSecond||0,n=r),i.add(t.qualityLimitationReason||""),e}),t);r.length>0&&(s.averageJitterInMs=Math.round(s.averageJitterInMs/r.length*1e3),s.averageRoundTripTimeInMs=Math.round(s.averageRoundTripTimeInMs/r.length*1e3),s.codec=r[0].codec||"",s.codecPerTrackType=r.reduce(((e,t)=>(t.trackType&&(e[t.trackType]=t.codec||""),e)),{}));const o=[i.has("cpu")&&"cpu",i.has("bandwidth")&&"bandwidth",i.has("other")&&"other"].filter(Boolean).join(", ");return o&&(s.qualityLimitationReasons=o),s},[Cc,kc,Tc]="1.22.2".split(".");let _c,Ec,Rc,Ac={type:vs.PLAIN_JAVASCRIPT,major:Cc,minor:kc,patch:Tc},Ic={oneofKind:void 0};const xc=e=>{Ac=e},Pc=()=>Ac,Oc=async()=>{var e,t;if(fa())return{sdk:Ac,os:_c,device:Ec};const n=navigator.userAgentData;let i;if(n&&n.getHighEntropyValues)try{i=await n.getHighEntropyValues(["platform","platformVersion"])}catch(l){}const r=new Gr.UAParser(navigator.userAgent),{browser:s,os:o,device:a,cpu:c}=r.getResult();return{sdk:Ac,browser:{name:s.name||navigator.userAgent,version:s.version||""},os:{name:(null===(e=i)||void 0===e?void 0:e.platform)||o.name||"",version:(null===(t=i)||void 0===t?void 0:t.platformVersion)||o.version||"",architecture:c.architecture||""},device:{name:[a.vendor,a.model,a.type].filter(Boolean).join(" "),version:""}}};class Nc{constructor(e,t){let{options:n,clientDetails:i,subscriber:r,publisher:s,microphone:o,camera:a,state:c,tracer:l,unifiedSessionId:u}=t;this.logger=Sa(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(e,t)=>{var n;const{browserPermissionState$:i}=e.state;null===(n=this.unsubscribeDevicePermissionsSubscription)||void 0===n||n.call(this),this.unsubscribeDevicePermissionsSubscription=Ua(gr([i,this.state.ownCapabilities$]),(n=>{var i;let[r,s]=n;null===(i=this.unsubscribeListDevicesSubscription)||void 0===i||i.call(this);const o="mic"===t?s.includes(ss.SEND_AUDIO):s.includes(ss.SEND_VIDEO);"granted"===r&&o?this.unsubscribeListDevicesSubscription=Ua(gr([e.listDevices(),e.state.selectedDevice$]),(e=>{let[n,i]=e;const r=n.find((e=>e.deviceId===i));this.inputDevices.set(t,{currentDevice:(null===r||void 0===r?void 0:r.label)||i||"",availableDevices:n.map((e=>e.label)),isPermitted:!0})})):this.inputDevices.set(t,{currentDevice:"",availableDevices:[],isPermitted:!1})}))},this.sendConnectionTime=e=>{this.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:e}})},this.sendReconnectionTime=(e,t)=>{this.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{strategy:e,timeSeconds:t}}})},this.sendTelemetryData=e=>{this.run(e).catch((e=>{this.logger("warn","Failed to send telemetry data",e)}))},this.run=async e=>{var t,n,i,r,s,o,a;const[c,l]=await Promise.all([this.subscriber.stats.get(),null===(t=this.publisher)||void 0===t?void 0:t.stats.get()]);var u;(null===(n=this.subscriber.tracer)||void 0===n||n.trace("getstats",c.delta),l)&&(null===(u=this.publisher)||void 0===u||null===(u=u.tracer)||void 0===u||u.trace("getstats",l.delta));const d=null===(i=this.subscriber.tracer)||void 0===i?void 0:i.take(),h=null===(r=this.publisher)||void 0===r||null===(r=r.tracer)||void 0===r?void 0:r.take(),p=this.tracer.take(),f=this.sfuClient.getTrace(),m=[...p.snapshot,...null!==(s=null===f||void 0===f?void 0:f.snapshot)&&void 0!==s?s:[],...null!==(o=null===h||void 0===h?void 0:h.snapshot)&&void 0!==o?o:[],...null!==(a=null===d||void 0===d?void 0:d.snapshot)&&void 0!==a?a:[]];try{var g;await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:JSON.stringify(hc(c.stats)),publisherStats:l?JSON.stringify(hc(l.stats)):"[]",subscriberRtcStats:"",publisherRtcStats:"",rtcStats:JSON.stringify(m),encodeStats:null!==(g=null===l||void 0===l?void 0:l.performanceStats)&&void 0!==g?g:[],decodeStats:c.performanceStats,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),unifiedSessionId:this.unifiedSessionId,deviceState:Ic,telemetry:e})}catch(v){throw null===h||void 0===h||h.rollback(),null===d||void 0===d||d.rollback(),p.rollback(),null===f||void 0===f||f.rollback(),v}},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval((()=>{this.run().catch((e=>{this.logger("warn","Failed to report stats",e)}))}),this.options.reporting_interval_ms))},this.stop=()=>{var e,t;null===(e=this.unsubscribeDevicePermissionsSubscription)||void 0===e||e.call(this),this.unsubscribeDevicePermissionsSubscription=void 0,null===(t=this.unsubscribeListDevicesSubscription)||void 0===t||t.call(this),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0,clearTimeout(this.timeoutId),this.timeoutId=void 0},this.flush=()=>{this.run().catch((e=>{this.logger("warn","Failed to flush report stats",e)}))},this.scheduleOne=e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.run().catch((e=>{this.logger("warn","Failed to report stats",e)}))}),e)},this.sfuClient=e,this.options=n,this.subscriber=r,this.publisher=s,this.microphone=o,this.camera=a,this.state=c,this.tracer=l,this.unifiedSessionId=u;const{sdk:d,browser:h}=i;this.sdkName=fc(d),this.sdkVersion=mc(d);const p=Rc;this.webRTCVersion=(null===p||void 0===p?void 0:p.version)||"".concat((null===h||void 0===h?void 0:h.name)||"","-").concat((null===h||void 0===h?void 0:h.version)||"")||"N/A"}}const Dc=(e,t)=>{e.addEventListener("icecandidate",(e=>{t("onicecandidate",e.candidate)})),e.addEventListener("track",(e=>{const n=e.streams.map((e=>"stream:".concat(e.id)));t("ontrack","".concat(e.track.kind,":").concat(e.track.id," ").concat(n))})),e.addEventListener("signalingstatechange",(()=>{t("signalingstatechange",e.signalingState)})),e.addEventListener("iceconnectionstatechange",(()=>{t("iceconnectionstatechange",e.iceConnectionState)})),e.addEventListener("icegatheringstatechange",(()=>{t("icegatheringstatechange",e.iceGatheringState)})),e.addEventListener("connectionstatechange",(()=>{t("connectionstatechange",e.connectionState)})),e.addEventListener("negotiationneeded",(()=>{t("negotiationneeded",void 0)})),e.addEventListener("datachannel",(e=>{let{channel:n}=e;t("datachannel",[n.id,n.label])}));const n=e.close;e.close=function(){return t("close",void 0),n.call(this)};for(const i of["createOffer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate"]){const n=e[i];n&&(e[i]=async function(){try{for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];t(i,r);const o=await n.apply(this,r);return t("".concat(i,"OnSuccess"),o),o}catch(o){throw t("".concat(i,"OnFailure"),o.toString()),o}})}};class jc{constructor(e,t,n){var i=this;this.previousStats={},this.frameTimeHistory=[],this.fpsHistory=[],this.get=async()=>{const e=await this.pc.getStats(),t=Lc(e),n=this.withOverrides(this.peerType===hs.SUBSCRIBER?this.getDecodeStats(t):this.getEncodeStats(t)),i=Uc(this.previousStats,t);return this.previousStats=t,this.frameTimeHistory=this.frameTimeHistory.slice(-2),this.fpsHistory=this.fpsHistory.slice(-2),{performanceStats:n,delta:i,stats:e}},this.getEncodeStats=e=>{const t=[];for(const n of Object.values(e)){if("outbound-rtp"!==n.type)continue;const{codecId:i,framesSent:r=0,kind:s,id:o,totalEncodeTime:a=0,framesPerSecond:c=0,frameHeight:l=0,frameWidth:u=0,targetBitrate:d=0,mediaSourceId:h}=n;if("audio"===s||!this.previousStats[o])continue;const p=this.previousStats[o],f=a-(p.totalEncodeTime||0),m=r-(p.framesSent||0),g=m>0?f/m*1e3:0;this.frameTimeHistory.push(g),this.fpsHistory.push(c);let v=ms.VIDEO;if(h&&e[h]){const t=e[h];v=this.trackIdToTrackType.get(t.trackIdentifier)||v}t.push({trackType:v,codec:Fc(e,i),avgFrameTimeMs:Mc(this.frameTimeHistory),avgFps:Mc(this.fpsHistory),targetBitrate:Math.round(d),videoDimension:{width:u,height:l}})}return t},this.getDecodeStats=e=>{let t,n=0;for(const h of Object.values(e)){if("inbound-rtp"!==h.type)continue;const e=h,{kind:i,frameWidth:r=0,frameHeight:s=0}=e,o=r*s;"video"===i&&o>n&&(t=e,n=o)}if(!t||!this.previousStats[t.id])return[];const i=this.previousStats[t.id],{framesDecoded:r=0,framesPerSecond:s=0,totalDecodeTime:o=0,trackIdentifier:a}=t,c=o-(i.totalDecodeTime||0),l=r-(i.framesDecoded||0),u=l>0?c/l*1e3:0;this.frameTimeHistory.push(u),this.fpsHistory.push(s);const d=this.trackIdToTrackType.get(a)||ms.VIDEO;return[Gs.create({trackType:d,codec:Fc(e,t.codecId),avgFrameTimeMs:Mc(this.frameTimeHistory),avgFps:Mc(this.fpsHistory),videoDimension:{width:t.frameWidth,height:t.frameHeight}})]},this.withOverrides=e=>{if(this.costOverrides)for(const t of e){const e=this.costOverrides.get(t.trackType);void 0!==e&&(t.avgFrameTimeMs=e+(t.avgFrameTimeMs||0)/1e3)}return e},this.setCost=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms.VIDEO;i.costOverrides||(i.costOverrides=new Map),i.costOverrides.set(t,e)},this.pc=e,this.peerType=t,this.trackIdToTrackType=n}}const Lc=e=>{const t={};return e.forEach(((e,n)=>{t[n]=e})),t},Uc=(e,t)=>{t=JSON.parse(JSON.stringify(t));for(const[r,s]of Object.entries(t))if(delete s.id,e[r])for(const[t,n]of Object.entries(s))n===e[r][t]&&delete s[t];let n=-1/0;const i=Object.values(t);for(const r of i)r.timestamp>n&&(n=r.timestamp);for(const r of i)r.timestamp===n&&(r.timestamp=0);return t.timestamp=n,t},Mc=e=>e.reduce(((e,t)=>e+t),0)/e.length,Fc=(e,t)=>{if(!t||!e[t])return;const n=e[t];return Ns.create({name:n.mimeType.split("/").pop(),clockRate:n.clockRate,payloadType:n.payloadType,fmtp:n.sdpFmtpLine})};class Vc{constructor(e){this.buffer=[],this.enabled=!0,this.setEnabled=e=>{this.enabled!==e&&(this.enabled=e,this.buffer=[])},this.trace=(e,t)=>{this.enabled&&this.buffer.push([e,this.id,t,Date.now()])},this.take=()=>{const e=this.buffer;return this.buffer=[],{snapshot:e,rollback:()=>{this.buffer.unshift(...e)}}},this.dispose=()=>{this.buffer=[]},this.id=e}}class Bc{constructor(e,t){let{sfuClient:n,connectionConfig:i,state:r,dispatcher:s,onUnrecoverableError:o,logTag:a,enableTracing:c}=t;if(this.isIceRestarting=!1,this.isDisposed=!1,this.trackIdToTrackType=new Map,this.subscriptions=[],this.lock=Math.random().toString(36).slice(2),this.on=(e,t)=>{this.subscriptions.push(this.dispatcher.on(e,(n=>{const i="pc.".concat(this.lock,".").concat(e);xa(i,(async()=>t(n))).catch((t=>{this.isDisposed||this.logger("warn","Error handling ".concat(e),t)}))})))},this.addTrickledIceCandidates=()=>{var e;const{iceTrickleBuffer:t}=this.sfuClient,n=this.peerType===hs.SUBSCRIBER?t.subscriberCandidates:t.publisherCandidates;null===(e=this.unsubscribeIceTrickle)||void 0===e||e.call(this),this.unsubscribeIceTrickle=Ma(n,(async e=>this.pc.addIceCandidate(e).catch((t=>{this.isDisposed||this.logger("warn","ICE candidate error",t,e)}))))},this.setSfuClient=e=>{this.sfuClient=e},this.getStats=e=>this.pc.getStats(e),this.getTrackType=e=>this.trackIdToTrackType.get(e),this.onIceCandidate=e=>{const{candidate:t}=e;if(!t)return void this.logger("debug","null ice candidate");const n=this.asJSON(t);this.sfuClient.iceTrickle({peerType:this.peerType,iceCandidate:n}).catch((e=>{this.isDisposed||this.logger("warn","ICETrickle failed",e)}))},this.asJSON=e=>{if(!e.usernameFragment){const t=e.candidate.split(" "),n=t.findIndex((e=>"ufrag"===e))+1,i=t[n];return JSON.stringify((0,u.A)((0,u.A)({},e),{},{usernameFragment:i}))}return JSON.stringify(e.toJSON())},this.onConnectionStateChange=async()=>{const e=this.pc.connectionState;if(this.logger("debug","Connection state changed",e),this.tracer&&("connected"===e||"failed"===e))try{const e=await this.stats.get();this.tracer.trace("getstats",e.delta)}catch(t){this.tracer.trace("getstatsOnFailure",t.toString())}},this.onIceConnectionStateChange=()=>{const e=this.pc.iceConnectionState;var t;(this.logger("debug","ICE connection state changed",e),this.state.callingState!==Fa.OFFLINE)&&(this.state.callingState!==Fa.RECONNECTING&&(this.isIceRestarting||("failed"===e?null===(t=this.onUnrecoverableError)||void 0===t||t.call(this,"ICE connection failed"):"disconnected"===e&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch((e=>{var t;const n="ICE restart failed";this.logger("error",n,e),null===(t=this.onUnrecoverableError)||void 0===t||t.call(this,"".concat(n,": ").concat(e))}))))))},this.onIceCandidateError=e=>{const t=e instanceof RTCPeerConnectionIceErrorEvent&&"".concat(e.errorCode,": ").concat(e.errorText),n=this.pc.iceConnectionState,i="connected"===n||"checking"===n?"debug":"warn";this.logger(i,"ICE Candidate error",t)},this.onIceGatherChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.peerType=e,this.sfuClient=n,this.state=r,this.dispatcher=s,this.onUnrecoverableError=o,this.logger=Sa([e===hs.SUBSCRIBER?"Subscriber":"Publisher",a]),this.pc=new RTCPeerConnection(i),this.pc.addEventListener("icecandidate",this.onIceCandidate),this.pc.addEventListener("icecandidateerror",this.onIceCandidateError),this.pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.addEventListener("icegatheringstatechange",this.onIceGatherChange),this.pc.addEventListener("signalingstatechange",this.onSignalingChange),this.pc.addEventListener("connectionstatechange",this.onConnectionStateChange),this.stats=new jc(this.pc,e,this.trackIdToTrackType),c){const t="".concat(a,"-").concat(e===hs.SUBSCRIBER?"sub":"pub");this.tracer=new Vc(t),this.tracer.trace("create",(0,u.A)({url:n.edgeName},i)),Dc(this.pc,this.tracer.trace)}}dispose(){var e;this.onUnrecoverableError=void 0,this.isDisposed=!0,this.detachEventHandlers(),this.pc.close(),null===(e=this.tracer)||void 0===e||e.dispose()}detachEventHandlers(){var e;this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("signalingstatechange",this.onSignalingChange),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatherChange),null===(e=this.unsubscribeIceTrickle)||void 0===e||e.call(this),this.subscriptions.forEach((e=>e()))}}class Hc{constructor(){var e=this;this.cache=[],this.layers=[],this.transceiverOrder=[],this.add=(e,t)=>{this.cache.push({publishOption:e,transceiver:t}),this.transceiverOrder.push(t)},this.get=e=>{var t;return null===(t=this.findTransceiver(e))||void 0===t?void 0:t.transceiver},this.has=e=>!!this.get(e),this.find=e=>this.cache.find(e),this.items=()=>this.cache,this.indexOf=e=>this.transceiverOrder.indexOf(e),this.getLayers=e=>{const t=this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType));return null===t||void 0===t?void 0:t.layers},this.setLayers=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e.findLayer(t);i?i.layers=n:e.layers.push({publishOption:t,layers:n})},this.findTransceiver=e=>this.cache.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType)),this.findLayer=e=>this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType))}}const zc=(e,t)=>{Sa(["helpers"])("warn",t,e)},Wc=e=>{switch(e){case ms.SCREEN_SHARE:return"screenShareStream";case ms.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case ms.VIDEO:return"videoStream";case ms.AUDIO:return"audioStream";case ms.UNSPECIFIED:throw new Error("Track type is unspecified");default:zc(e,"Unknown track type")}},qc=e=>e===ms.AUDIO||e===ms.SCREEN_SHARE_AUDIO,$c={q:3e5,h:75e4,f:125e4},Jc=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{return{rid:e.rid||"",bitrate:e.maxBitrate||0,fps:e.maxFramerate||0,quality:(t=e.rid||"","q"===t?fs.LOW_UNSPECIFIED:"h"===t?fs.MID:fs.HIGH),videoDimension:{width:e.width,height:e.height}};var t}))},Gc=(e,t)=>{if(qc(t.trackType))return;const n=[],i=e.getSettings(),{width:r=0,height:s=0}=i,{bitrate:o,codec:a,fps:c,maxSpatialLayers:l=3,maxTemporalLayers:u=3,videoDimension:d={width:1280,height:720},useSingleLayer:h}=t,p=Kc(d,r,s,o);let f=1,m=1;const g=Ta(null===a||void 0===a?void 0:a.name);for(const y of["f","h","q"].slice(0,l)){const e={active:!0,rid:y,width:Math.round(r/f),height:Math.round(s/f),maxBitrate:Math.round(p/m)||$c[y],maxFramerate:c};g?e.scalabilityMode=(b=u,"L".concat(v=h?1:l,"T").concat(b).concat(v>1?"_KEY":"")):e.scaleResolutionDownBy=f,f*=2,m*=2,n.unshift(e)}var v,b;return Yc(i,n,h)},Kc=(e,t,n,i)=>{const{width:r,height:s}=e;if(t<r||n<s){const e=t*n/(r*s);return Math.round(i*e)}return i},Yc=(e,t,n)=>{let i;const r=Math.max(e.width||0,e.height||0);i=r<=320?t.filter((e=>"f"===e.rid)):r<=640?t.filter((e=>"h"!==e.rid)):t;const s=["q","h","f"];return i.map(((e,t,i)=>(0,u.A)((0,u.A)({},e),{},{rid:s[t],active:!(n&&t<i.length-1)&&e.active})))},Xc=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return String(t);const i=e.sender.track,r=(0,Kr.qg)(n).media.find((e=>{var t,n;return e.type===i.kind&&(null===(t=null===(n=e.msid)||void 0===n?void 0:n.includes(i.id))||void 0===t||t)}));return"undefined"!==typeof(null===r||void 0===r?void 0:r.mid)?String(r.mid):t<0?"":String(t)};class Zc extends Bc{constructor(e){var t;let{publishOptions:n}=e,i=(0,l.A)(e,Xr);super(hs.PUBLISHER_UNSPECIFIED,i),t=this,this.transceiverCache=new Hc,this.clonedTracks=new Set,this.publish=async(e,t)=>{if(!this.publishOptions.some((e=>e.trackType===t)))throw new Error("No publish options found for ".concat(ms[t]));for(const n of this.publishOptions){if(n.trackType!==t)continue;const i=this.cloneTrack(e),r=this.transceiverCache.get(n);if(r){const e=r.sender.track;await this.updateTransceiver(r,i,t),fa()||this.stopTrack(e)}else await this.addTransceiver(i,n)}},this.addTransceiver=async(e,t)=>{var n;const i=Gc(e,t),r=Ta(null===(n=t.codec)||void 0===n?void 0:n.name)?(e=>{if(!e)return;const t=e=>t=>t.rid===e,n=e.find(t("f"))||e.find(t("h"))||e.find(t("q"));return[(0,u.A)((0,u.A)({},n),{},{rid:"q"})]})(i):i,s=this.pc.addTransceiver(e,{direction:"sendonly",sendEncodings:r}),o=s.sender.getParameters();o.degradationPreference="maintain-framerate",await s.sender.setParameters(o);const a=t.trackType;this.logger("debug","Added ".concat(ms[a]," transceiver")),this.transceiverCache.add(t,s),this.trackIdToTrackType.set(e.id,a),await this.negotiate()},this.updateTransceiver=async(e,t,n)=>{const i=e.sender;i.track&&this.trackIdToTrackType.delete(i.track.id),await i.replaceTrack(t),t&&this.trackIdToTrackType.set(t.id,n)},this.syncPublishOptions=async()=>{for(const e of this.publishOptions){const{trackType:t}=e;if(!this.isPublishing(t))continue;if(this.transceiverCache.has(e))continue;const n=this.transceiverCache.find((e=>!!e.transceiver.sender.track&&e.publishOption.trackType===t));if(!n||!n.transceiver)continue;const i=this.cloneTrack(n.transceiver.sender.track);await this.addTransceiver(i,e)}for(const e of this.transceiverCache.items()){const{publishOption:t,transceiver:n}=e;this.publishOptions.some((e=>e.id===t.id&&e.trackType===t.trackType))||(this.stopTrack(n.sender.track),await this.updateTransceiver(n,null,t.trackType))}},this.isPublishing=e=>{for(const t of this.transceiverCache.items()){if(t.publishOption.trackType!==e)continue;const n=t.transceiver.sender.track;if(n&&("live"===n.readyState&&n.enabled))return!0}return!1},this.stopTracks=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of t.transceiverCache.items()){const{publishOption:e,transceiver:i}=r;n.includes(e.trackType)&&t.stopTrack(i.sender.track)}},this.stopAllTracks=()=>{for(const{transceiver:e}of this.transceiverCache.items())this.stopTrack(e.sender.track);for(const e of this.clonedTracks)this.stopTrack(e)},this.changePublishQuality=async e=>{var t;const{trackType:n,layers:i,publishOptionId:r}=e,s=i.filter((e=>e.active)),o="Update publish quality:";this.logger("info","".concat(o," requested layers by SFU:"),s);const a=this.transceiverCache.find((e=>e.publishOption.id===r&&e.publishOption.trackType===n)),c=null===a||void 0===a?void 0:a.transceiver.sender;if(!c)return this.logger("warn","".concat(o," no video sender found."));const l=c.getParameters();if(0===l.encodings.length)return this.logger("warn","".concat(o," there are no encodings set."));const u=null===a||void 0===a||null===(t=a.publishOption.codec)||void 0===t?void 0:t.name,d=u&&Ta(u);let h=!1;for(const m of l.encodings){var p;const e=d?s[0]:null!==(p=s.find((e=>e.name===m.rid)))&&void 0!==p?p:1===l.encodings.length?s[0]:void 0,t=!(null===e||void 0===e||!e.active);if(t!==m.active&&(m.active=t,h=!0),!e)continue;const{maxFramerate:n,scaleResolutionDownBy:i,maxBitrate:r,scalabilityMode:o}=e;i>=1&&i!==m.scaleResolutionDownBy&&(m.scaleResolutionDownBy=i,h=!0),r>0&&r!==m.maxBitrate&&(m.maxBitrate=r,h=!0),n>0&&n!==m.maxFramerate&&(m.maxFramerate=n,h=!0),o&&o!==m.scalabilityMode&&(m.scalabilityMode=o,h=!0)}const f=l.encodings.filter((e=>e.active));if(!h)return this.logger("info","".concat(o," no change:"),f);await c.setParameters(l),this.logger("info","".concat(o," enabled rids:"),f)},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const e=this.pc.signalingState;this.isIceRestarting||"have-local-offer"===e?this.logger("debug","ICE restart is already in progress"):await this.negotiate({iceRestart:!0})},this.negotiate=async e=>xa("publisher.negotiate.".concat(this.lock),(async()=>{const t=await this.pc.createOffer(e),n=this.getAnnouncedTracks(t.sdp);if(!n.length)throw new Error("Can't negotiate without any tracks");try{var i;this.isIceRestarting=null!==(i=null===e||void 0===e?void 0:e.iceRestart)&&void 0!==i&&i,await this.pc.setLocalDescription(t);const{sdp:r=""}=t,{response:s}=await this.sfuClient.setPublisher({sdp:r,tracks:n});if(s.error)throw new Error(s.error.message);const{sdp:o}=s;await this.pc.setRemoteDescription({type:"answer",sdp:o})}finally{this.isIceRestarting=!1}this.addTrickledIceCandidates()})),this.getPublishedTracks=()=>{const e=[];for(const{transceiver:t}of this.transceiverCache.items()){const n=t.sender.track;n&&"live"===n.readyState&&e.push(n)}return e},this.getAnnouncedTracks=e=>{const t=[];for(const n of this.transceiverCache.items()){const{transceiver:i,publishOption:r}=n;i.sender.track&&t.push(this.toTrackInfo(i,r,e))}return t},this.getAnnouncedTracksForReconnect=()=>{var e;const t=null===(e=this.pc.localDescription)||void 0===e?void 0:e.sdp,n=[];for(const i of this.publishOptions){const e=this.transceiverCache.get(i);e&&e.sender.track&&n.push(this.toTrackInfo(e,i,t))}return n},this.toTrackInfo=(e,t,n)=>{var i;const r=e.sender.track,s="live"===r.readyState,o=s?Gc(r,t):this.transceiverCache.getLayers(t);this.transceiverCache.setLayers(t,o);const a=qc(t.trackType),c=a&&2===r.getSettings().channelCount,l=this.transceiverCache.indexOf(e),u=null===(i=this.state.settings)||void 0===i?void 0:i.audio;return{trackId:r.id,layers:Jc(o),trackType:t.trackType,mid:Xc(e,l,n),stereo:c,dtx:a&&!(null===u||void 0===u||!u.opus_dtx_enabled),red:a&&!(null===u||void 0===u||!u.redundant_coding_enabled),muted:!s,codec:t.codec,publishOptionId:t.id}},this.cloneTrack=e=>{const t=e.clone();return this.clonedTracks.add(t),t},this.stopTrack=e=>{e&&(e.stop(),this.clonedTracks.delete(e))},this.publishOptions=n,this.on("iceRestart",(e=>{e.peerType===hs.PUBLISHER_UNSPECIFIED&&this.restartIce().catch((e=>{var t;const n="ICE restart failed";this.logger("warn",n,e),null===(t=this.onUnrecoverableError)||void 0===t||t.call(this,"".concat(n,": ").concat(e))}))})),this.on("changePublishQuality",(async e=>{for(const t of e.videoSenders)await this.changePublishQuality(t)})),this.on("changePublishOptions",(e=>(this.publishOptions=e.publishOptions,this.syncPublishOptions())))}dispose(){super.dispose(),this.stopAllTracks(),this.clonedTracks.clear()}}class Qc extends Bc{constructor(e){super(hs.SUBSCRIBER,e),this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),"have-remote-offer"===this.pc.signalingState)return void this.logger("debug","ICE restart is already in progress");if("new"===this.pc.connectionState)return void this.logger("debug","ICE connection is not yet established, skipping restart.");const e=this.isIceRestarting;try{this.isIceRestarting=!0,await this.sfuClient.iceRestart({peerType:hs.SUBSCRIBER})}catch(t){throw this.isIceRestarting=e,t}},this.handleOnTrack=e=>{const[t]=e.streams,[n,i]=t.id.split(":"),r=this.state.participants.find((e=>e.trackLookupPrefix===n));this.logger("debug","[onTrack]: Got remote ".concat(i," track for userId: ").concat(null===r||void 0===r?void 0:r.userId),e.track.id,e.track);const s="".concat(null===r||void 0===r?void 0:r.userId," ").concat(i,":").concat(n);e.track.addEventListener("mute",(()=>{this.logger("info","[onTrack]: Track muted: ".concat(s))})),e.track.addEventListener("unmute",(()=>{this.logger("info","[onTrack]: Track unmuted: ".concat(s))})),e.track.addEventListener("ended",(()=>{this.logger("info","[onTrack]: Track ended: ".concat(s)),this.state.removeOrphanedTrack(t.id)}));const o=(e=>{switch(e){case"TRACK_TYPE_AUDIO":return ms.AUDIO;case"TRACK_TYPE_VIDEO":return ms.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return ms.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return ms.SCREEN_SHARE_AUDIO;default:return}})(i);if(!o)return this.logger("error","Unknown track type: ".concat(i));if(this.trackIdToTrackType.set(e.track.id,o),!r)return this.logger("warn","[onTrack]: Received track for unknown participant: ".concat(n),e),void this.state.registerOrphanedTrack({id:t.id,trackLookupPrefix:n,track:t,trackType:o});const a=Wc(o);if(!a)return void this.logger("error","Unknown track type: ".concat(i));const c=r[a];this.state.updateParticipant(r.sessionId,{[a]:t}),c&&(this.logger("info","[onTrack]: Cleaning up previous remote ".concat(e.track.kind," tracks for userId: ").concat(r.userId)),c.getTracks().forEach((e=>{e.stop(),c.removeTrack(e)})))},this.negotiate=async e=>{await this.pc.setRemoteDescription({type:"offer",sdp:e.sdp}),this.addTrickledIceCandidates();const t=await this.pc.createAnswer();await this.pc.setLocalDescription(t),await this.sfuClient.sendAnswer({peerType:hs.SUBSCRIBER,sdp:t.sdp||""}),this.isIceRestarting=!1},this.pc.addEventListener("track",this.handleOnTrack),this.on("subscriberOffer",(async e=>this.negotiate(e).catch((e=>{this.logger("error","Negotiation failed.",e)}))))}detachEventHandlers(){super.detachEventHandlers(),this.pc.removeEventListener("track",this.handleOnTrack)}}function el(e){let t=!0;const n=e.then((e=>({status:"resolved",result:e})),(e=>({status:"rejected",error:e}))).finally((()=>t=!1)),i=()=>n.then((e=>{if("rejected"===e.status)throw e.error;return e.result}));return i.checkPending=()=>t,i}const tl=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));let i=!1,r=!1;return{promise:n,resolve:t=>{i=!0,e(t)},reject:e=>{r=!0,t(e)},isResolved:()=>i,isRejected:()=>r}},nl=Symbol("uninitialized");function il(e){let t=nl;return()=>(t===nl&&(t=e()),t)}const rl="const timerIdMapping = new Map();\nself.addEventListener('message', (event) => {\n    const request = event.data;\n    switch (request.type) {\n        case 'setTimeout':\n        case 'setInterval':\n            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {\n                tick(request.id);\n                if (request.type === 'setTimeout') {\n                    timerIdMapping.delete(request.id);\n                }\n            }, request.timeout));\n            break;\n        case 'clearTimeout':\n        case 'clearInterval':\n            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));\n            timerIdMapping.delete(request.id);\n            break;\n    }\n});\nfunction tick(id) {\n    const message = { type: 'tick', id };\n    self.postMessage(message);\n}";class sl{constructor(){this.currentTimerId=1,this.callbacks=new Map,this.fallback=!1}setup(){let{useTimerWorker:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)try{const e=new Blob([rl],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);this.worker=new Worker(t,{name:"str-timer-worker"}),this.worker.addEventListener("message",(e=>{const{type:t,id:n}=e.data;var i;"tick"===t&&(null===(i=this.callbacks.get(n))||void 0===i||i())}))}catch(t){Sa(["timer-worker"])("error",t),this.fallback=!0}else this.fallback=!0}destroy(){var e;this.callbacks.clear(),null===(e=this.worker)||void 0===e||e.terminate(),this.worker=void 0,this.fallback=!1}get ready(){return this.fallback||Boolean(this.worker)}setInterval(e,t){return this.setTimer("setInterval",e,t)}clearInterval(e){this.clearTimer("clearInterval",e)}setTimeout(e,t){return this.setTimer("setTimeout",e,t)}clearTimeout(e){this.clearTimer("clearTimeout",e)}setTimer(e,t,n){if(this.ready||this.setup(),this.fallback)return("setTimeout"===e?setTimeout:setInterval)(t,n);const i=this.getTimerId();return this.callbacks.set(i,(()=>{t(),"setTimeout"===e&&this.callbacks.delete(i)})),this.sendMessage({type:e,id:i,timeout:n}),i}clearTimer(e,t){t&&(this.ready||this.setup(),this.fallback?("clearTimeout"===e?clearTimeout:clearInterval)(t):(this.callbacks.delete(t),this.sendMessage({type:e,id:t})))}getTimerId(){return this.currentTimerId++}sendMessage(e){if(!this.worker)throw new Error("Cannot use timer worker before it's set up");this.worker.postMessage(e)}}let ol=!1;const al=il((()=>{const e=new sl;return e.setup({useTimerWorker:ol}),e}));class cl{constructor(e){var t=this;let{dispatcher:n,credentials:i,sessionId:r,logTag:s,joinResponseTimeout:o=5e3,onSignalClose:a,streamClient:c,enableTracing:l}=e;this.iceTrickleBuffer=new Aa,this.isLeaving=!1,this.isClosing=!1,this.pingIntervalInMs=1e4,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5e3,this.joinResponseTask=tl(),this.abortController=new AbortController,this.createWebSocket=()=>{const e={callEnded:!0,changePublishQuality:!0,error:!0,goAway:!0};this.signalWs=(e=>{const{endpoint:t,onMessage:n,logTag:i}=e,r=Sa(["SfuClientWS",i]);r("debug","Creating signaling WS channel:",t);const s=new WebSocket(t);return s.binaryType="arraybuffer",s.addEventListener("error",(e=>{r("error","Signaling WS channel error",e)})),s.addEventListener("close",(e=>{r("info","Signaling WS channel is closed",e)})),s.addEventListener("open",(e=>{r("info","Signaling WS channel is open",e)})),s.addEventListener("message",(e=>{try{const t=e.data instanceof ArrayBuffer?yo.fromBinary(new Uint8Array(e.data)):yo.fromJsonString(e.data.toString());n(t)}catch(t){r("error","Failed to decode a message. Check whether the Proto models match.",{event:e,error:t})}})),s})({logTag:this.logTag,endpoint:"".concat(this.credentials.server.ws_endpoint,"?tag=").concat(this.logTag),onMessage:t=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck();const n=t.eventPayload.oneofKind;var i;e[n]&&(null===(i=this.tracer)||void 0===i||i.trace(n,t));this.dispatcher.dispatch(t,this.logTag)}}),this.signalReady=el(Promise.race([new Promise(((e,t)=>{const n=()=>{this.signalWs.removeEventListener("open",n),e(this.signalWs)};this.signalWs.addEventListener("open",n),this.signalWs.addEventListener("close",(e=>{this.handleWebSocketClose(e),t(new Error("SFU WS closed unexpectedly"))}))})),new Promise(((e,t)=>{setTimeout((()=>t(new Error("SFU WS connection timed out"))),this.joinResponseTimeout)}))]))},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.handleWebSocketClose=e=>{var t;this.signalWs.removeEventListener("close",this.handleWebSocketClose),al().clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),null===(t=this.onSignalClose)||void 0===t||t.call(this,"".concat(e.code," ").concat(e.reason))},this.close=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl.NORMAL_CLOSURE,n=arguments.length>1?arguments[1]:void 0;t.isClosing=!0,t.signalWs.readyState===WebSocket.OPEN&&(t.logger("debug","Closing SFU WS connection: ".concat(e," - ").concat(n)),t.signalWs.close(e,"js-client: ".concat(n)),t.cleanUpWebSocket()),t.dispose()},this.dispose=()=>{var e;this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),null===(e=this.migrationTask)||void 0===e||e.resolve(),this.iceTrickleBuffer.dispose()},this.getTrace=()=>{var e;return null===(e=this.tracer)||void 0===e?void 0:e.take()},this.leaveAndClose=async e=>{await this.joinTask;try{this.isLeaving=!0,await this.notifyLeave(e)}catch(t){this.logger("debug","Error notifying SFU about leaving call",t)}this.close(cl.NORMAL_CLOSURE,e.substring(0,115))},this.updateSubscriptions=async e=>(await this.joinTask,Ca((()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:e})),this.abortController.signal)),this.setPublisher=async e=>(await this.joinTask,Ca((()=>this.rpc.setPublisher((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId}))),this.abortController.signal)),this.sendAnswer=async e=>(await this.joinTask,Ca((()=>this.rpc.sendAnswer((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId}))),this.abortController.signal)),this.iceTrickle=async e=>(await this.joinTask,Ca((()=>this.rpc.iceTrickle((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId}))),this.abortController.signal)),this.iceRestart=async e=>(await this.joinTask,Ca((()=>this.rpc.iceRestart((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId}))),this.abortController.signal)),this.updateMuteStates=async e=>(await this.joinTask,Ca((()=>this.rpc.updateMuteStates({muteStates:e,sessionId:this.sessionId})),this.abortController.signal)),this.sendStats=async e=>(await this.joinTask,this.rpc.sendStats((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId}))),this.startNoiseCancellation=async()=>(await this.joinTask,Ca((()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,Ca((()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.enterMigration=async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isLeaving=!0;const{timeout:i=7e3}=n;null===(e=t.migrationTask)||void 0===e||e.reject(new Error("Cancelled previous migration"));const r=t.migrationTask=tl(),s=t.dispatcher.on("participantMigrationComplete",(()=>{s(),clearTimeout(t.migrateAwayTimeout),r.resolve()}));return t.migrateAwayTimeout=setTimeout((()=>{s(),r.reject(new Error("Migration (".concat(t.logTag,") failed to complete in ").concat(i,"ms")))}),i),r.promise},this.join=async e=>{var t;await this.signalReady(),(this.joinResponseTask.isResolved()||this.joinResponseTask.isRejected())&&(this.joinResponseTask=tl());const n=this.joinResponseTask;let i;const r=this.dispatcher.on("joinResponse",(e=>{this.logger("debug","Received joinResponse",e),clearTimeout(i),r(),this.keepAlive(),n.resolve(e)}));i=setTimeout((()=>{r(),n.reject(new Error('Waiting for "joinResponse" has timed out'))}),this.joinResponseTimeout);const s=_o.create({requestPayload:{oneofKind:"joinRequest",joinRequest:Po.create((0,u.A)((0,u.A)({},e),{},{sessionId:this.sessionId,token:this.credentials.token}))}});return null===(t=this.tracer)||void 0===t||t.trace("joinRequest",s),await this.send(s),n.promise},this.ping=async()=>this.send(_o.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async e=>this.send(_o.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:e}}})),this.send=async e=>{await this.signalReady();const t=_o.toJson(e);this.signalWs.readyState===WebSocket.OPEN?(this.logger("debug","Sending message to: ".concat(this.edgeName),t),this.signalWs.send(_o.toBinary(e))):this.logger("debug","Signal WS is not open. Skipping message",t)},this.keepAlive=()=>{const e=al();e.clearInterval(this.keepAliveInterval),this.keepAliveInterval=e.setInterval((()=>{this.ping().catch((e=>{this.logger("error","Error sending healthCheckRequest to SFU",e)}))}),this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout((()=>{if(this.lastMessageTimestamp){(new Date).getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(cl.ERROR_CONNECTION_UNHEALTHY,"SFU connection unhealthy. Didn't receive any message for ".concat(this.unhealthyTimeoutInMs,"ms"))}}),this.unhealthyTimeoutInMs)},this.dispatcher=n,this.sessionId=r||ua(),this.onSignalClose=a,this.credentials=i;const{server:d,token:h}=i;var p;this.edgeName=d.edge_name,this.joinResponseTimeout=o,this.logTag=s,this.logger=Sa(["SfuClient",s]),this.tracer=l?new Vc("".concat(s,"-").concat(this.edgeName)):void 0,this.rpc=(e=>{const t=new qi((0,u.A)((0,u.A)({},ta),e));return new ea(t)})({baseUrl:d.url,interceptors:[(p={Authorization:"Bearer ".concat(h)},{interceptUnary:(e,t,n,i)=>(i.meta=(0,u.A)((0,u.A)({},i.meta),p),e(t,n,i))}),this.tracer&&ia(this.tracer.trace),"trace"===wa()&&na(this.logger,"trace")].filter((e=>!!e))}),this.unsubscribeIceTrickle=n.on("iceTrickle",(e=>{this.iceTrickleBuffer.push(e)})),this.unsubscribeNetworkChanged=c.on("network.changed",(e=>{var t;e.online?null===(t=this.networkAvailableTask)||void 0===t||t.resolve():this.networkAvailableTask=tl()})),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN&&this.joinResponseTask.isResolved()}get joinTask(){return this.joinResponseTask.promise}}cl.NORMAL_CLOSURE=1e3,cl.ERROR_CONNECTION_UNHEALTHY=4001,cl.DISPOSE_OLD_SOCKET=4002;const ll=e=>async function(t){if(t.user.id===e.currentUserId)return;const{state:n}=e;t.call.created_by.id===e.currentUserId&&n.callingState===Fa.RINGING&&await e.join()},ul=e=>async function(t){if(t.user.id===e.currentUserId)return;const{call:n}=t,{session:i}=n;if(!i)return void e.logger("warn","No call session provided. Ignoring call.rejected event.",t);const r=i.rejected_by,{members:s,callingState:o}=e.state;if(o===Fa.RINGING)if(e.isCreatedByMe){s.filter((t=>t.user_id!==e.currentUserId)).every((e=>r[e.user_id]))&&(e.logger("info","everyone rejected, leaving the call"),await e.leave({reject:!0,reason:"cancel",message:"ring: everyone rejected"}))}else r[n.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),await e.leave({message:"ring: creator rejected"}));else e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",t)},dl=e=>function(){const{callingState:t}=e.state;t!==Fa.IDLE&&t!==Fa.LEFT&&e.leave({message:"call.ended event received",reject:!1}).catch((t=>{e.logger("error","Failed to leave call after call.ended ",t)}))},hl=e=>e.on("callEnded",(async t=>{if(e.state.callingState!==Fa.LEFT)try{if(t.reason===ws.LIVE_ENDED){e.state.setBackstage(!0);const{hasPermission:t}=e.permissionsContext;if(t(ss.JOIN_BACKSTAGE))return}e.state.setEndedAt(new Date);const n=ws[t.reason];await e.leave({message:"callEnded received: ".concat(n)})}catch(n){e.logger("error","Failed to leave call after being ended by the SFU",n)}})),pl=e=>function(t){const{currentGrants:n}=t;if(n){const{canPublishAudio:t,canPublishVideo:i,canScreenshare:r}=n,s={[ss.SEND_AUDIO]:t,[ss.SEND_VIDEO]:i,[ss.SCREENSHARE]:r},o=e.ownCapabilities.filter((e=>!1!==s[e]));Object.entries(s).forEach((e=>{let[t,n]=e;n&&!o.includes(t)&&o.push(t)})),e.setOwnCapabilities(o)}},fl=(e,t)=>e.on("connectionQualityChanged",(e=>{const{connectionQualityUpdates:n}=e;n&&t.updateParticipants(n.reduce(((e,t)=>{const{sessionId:n,connectionQuality:i}=t;return e[n]={connectionQuality:i},e}),{}))})),ml=(e,t)=>e.on("healthCheckResponse",(e=>{const{participantCount:n}=e;n&&(t.setParticipantCount(n.total),t.setAnonymousParticipantCount(n.anonymous))})),gl=(e,t)=>e.on("error",(e=>{e.error&&e.error.code!==gs.LIVE_ENDED||(t.state.setBackstage(!0),t.permissionsContext.hasPermission(ss.JOIN_BACKSTAGE)||t.leave({message:"live ended"}).catch((e=>{t.logger("error","Failed to leave call after live ended",e)})))})),vl=e=>e.on("error",(e=>{if(!e.error)return;const t=Sa(["SfuClient"]),{error:n,reconnectStrategy:i}=e;t("error","SFU reported error",{code:gs[n.code],reconnectStrategy:Ss[i],message:n.message,shouldRetry:n.shouldRetry})})),bl=e=>function(t){const{pins:n}=t;e.setServerSidePins(n)},yl=e=>e.on("trackUnpublished",(async t=>{const{cause:n,type:i,sessionId:r}=t,{localParticipant:s}=e.state;if(n===bs.MODERATION&&r===(null===s||void 0===s?void 0:s.sessionId)){const t=e.logger;t("info","Local participant's ".concat(ms[i]," track is muted remotely"));try{i===ms.VIDEO?await e.camera.disable():i===ms.AUDIO?await e.microphone.disable():i===ms.SCREEN_SHARE||i===ms.SCREEN_SHARE_AUDIO?await e.screenShare.disable():t("warn","Unsupported track type to soft mute",ms[i])}catch(o){t("error","Failed to stop publishing",o)}}})),wl=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)e.includes(r)||e.push(r);return e},Sl=e=>function(t){const{participant:n}=t;if(!n)return;const i=El(e,n);e.updateOrAddParticipant(n.sessionId,Object.assign(n,i,{viewportVisibilityState:{videoTrack:Zo.UNKNOWN,screenShareTrack:Zo.UNKNOWN}}))},Cl=e=>function(t){const{participant:n}=t;n&&e.setParticipants((e=>e.filter((e=>e.sessionId!==n.sessionId))))},kl=e=>function(t){const{participant:n}=t;n&&e.updateParticipant(n.sessionId,n)},Tl=e=>function(t){const{type:n,sessionId:i}=t;if(t.participant){const n=El(e,t.participant),r=Object.assign(t.participant,n);e.updateOrAddParticipant(i,r)}else e.updateParticipant(i,(e=>({publishedTracks:wl([...e.publishedTracks],n)})))},_l=e=>function(t){const{type:n,sessionId:i}=t;if(t.participant){const n=El(e,t.participant),r=Object.assign(t.participant,n);e.updateOrAddParticipant(i,r)}else e.updateParticipant(i,(e=>({publishedTracks:e.publishedTracks.filter((e=>e!==n))})))},El=(e,t)=>{const n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;const i={};for(const r of n){const e=Wc(r.trackType);e&&(i[e]=r.track)}return i},Rl=(e,t)=>e.on("dominantSpeakerChanged",(e=>{var n;const{sessionId:i}=e;i!==(null===(n=t.dominantSpeaker)||void 0===n?void 0:n.sessionId)&&t.setParticipants((e=>e.map((e=>e.sessionId===i?(0,u.A)((0,u.A)({},e),{},{isDominantSpeaker:!0}):e.isDominantSpeaker?(0,u.A)((0,u.A)({},e),{},{isDominantSpeaker:!1}):e))))})),Al=(e,t)=>e.on("audioLevelChanged",(e=>{const{audioLevels:n}=e;t.updateParticipants(n.reduce(((e,t)=>(e[t.sessionId]={audioLevel:t.level,isSpeaking:t.isSpeaking},e)),{}))})),Il=e=>{const t={"call.accepted":ll(e),"call.rejected":ul(e)},n=Object.keys(t).map((n=>{const i=n;return e.on(i,t[i])}));return()=>{n.forEach((e=>e()))}};class xl{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(e,t)=>{var n;return this.observer=new IntersectionObserver((e=>{e.forEach((e=>{const t=this.elementHandlerMap.get(e.target);null===t||void 0===t||t(e)}))}),(0,u.A)((0,u.A)({root:e},t),{},{threshold:null!==(n=null===t||void 0===t?void 0:t.threshold)&&void 0!==n?n:.35})),this.queueSet.size&&(this.queueSet.forEach((t=>{let[n,i]=t;e.contains(n)&&(this.observer.observe(n),this.elementHandlerMap.set(n,i))})),this.queueSet.clear()),()=>{var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null,this.elementHandlerMap.clear()}},this.observe=(e,t)=>{const n=[e,t],i=()=>{var t;this.elementHandlerMap.delete(e),null===(t=this.observer)||void 0===t||t.unobserve(e),this.queueSet.delete(n)};return this.elementHandlerMap.has(e)?i:this.observer?(this.observer.root.contains(e)&&(this.elementHandlerMap.set(e,t),this.observer.observe(e)),i):(this.queueSet.add(n),i)}}}const Pl={videoTrack:Zo.UNKNOWN,screenShareTrack:Zo.UNKNOWN},Ol=Symbol("globalOverrideKey");class Nl{constructor(e,t){var n=this;this.viewportTracker=new xl,this.logger=Sa(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new br({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(dr((e=>{const{[Ol]:t}=e,n=(0,l.A)(e,[Ol].map(c.A));return{enabled:!1!==(null===t||void 0===t?void 0:t.enabled),preferredResolution:null!==t&&void 0!==t&&t.enabled?t.dimension:void 0,participants:Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,{enabled:!1!==(null===n||void 0===n?void 0:n.enabled),preferredResolution:null!==n&&void 0!==n&&n.enabled?n.dimension:void 0}]}))),isParticipantVideoEnabled:t=>{var n,i,r,s;return null===(n=null!==(i=null===(r=e[t])||void 0===r?void 0:r.enabled)&&void 0!==i?i:null===(s=e[Ol])||void 0===s?void 0:s.enabled)||void 0===n||n}}})),Cr(1)),this.setVideoTrackSubscriptionOverrides=(e,t)=>ja(this.videoTrackSubscriptionOverridesSubject,t?n=>(0,u.A)((0,u.A)({},n),Object.fromEntries(t.map((t=>[t,e])))):e?{[Ol]:e}:{}),this.applyTrackSubscriptions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qo.SLOW;n.pendingSubscriptionsUpdate&&clearTimeout(n.pendingSubscriptionsUpdate);const t=()=>{var e;n.pendingSubscriptionsUpdate=null,null===(e=n.sfuClient)||void 0===e||e.updateSubscriptions(n.trackSubscriptions).catch((e=>{n.logger("debug","Failed to update track subscriptions",e)}))};e?n.pendingSubscriptionsUpdate=setTimeout(t,e):t()},this.trackElementVisibility=(e,t,n)=>{const i=this.viewportTracker.observe(e,(i=>{this.callState.updateParticipant(t,(t=>{var r;const s=null!==(r=t.viewportVisibilityState)&&void 0!==r?r:Pl,o=i.isIntersecting||document.fullscreenElement===e?Zo.VISIBLE:Zo.INVISIBLE;return(0,u.A)((0,u.A)({},t),{},{viewportVisibilityState:(0,u.A)((0,u.A)({},s),{},{[n]:o})})}))}));return()=>{i(),this.callState.updateParticipant(t,(e=>{var t;const i=null!==(t=e.viewportVisibilityState)&&void 0!==t?t:Pl;return(0,u.A)((0,u.A)({},e),{},{viewportVisibilityState:(0,u.A)((0,u.A)({},i),{},{[n]:Zo.UNKNOWN})})}))}},this.setViewport=e=>this.viewportTracker.setViewport(e),this.bindVideoElement=(e,t,n)=>{const i=this.callState.findParticipantBySessionId(t);if(!i)return;const r=(e,r)=>{!r||0!==r.width&&0!==r.height||(this.logger("debug","Ignoring 0x0 dimension",i),r=void 0),this.callState.updateParticipantTracks(n,{[t]:{dimension:r}}),this.applyTrackSubscriptions(e)},s=this.callState.participants$.pipe(dr((e=>e.find((e=>e.sessionId===t)))),_r((e=>!!e)),kr(),Cr({bufferSize:1,refCount:!0}));let o;const a=i.isLocalParticipant?null:s.pipe(dr((e=>{var t;return null===(t=e.viewportVisibilityState)||void 0===t?void 0:t[n]})),kr()).subscribe((t=>{if(o){if(o=null!==t&&void 0!==t?t:Zo.UNKNOWN,t===Zo.INVISIBLE)return r(Qo.MEDIUM,void 0);r(Qo.MEDIUM,{width:e.clientWidth,height:e.clientHeight})}else o=null!==t&&void 0!==t?t:Zo.UNKNOWN}));let c;const l=i.isLocalParticipant?null:new ResizeObserver((()=>{const t={width:e.clientWidth,height:e.clientHeight};if(!c)return void(c=t);if(c.width===t.width&&c.height===t.height||o===Zo.INVISIBLE)return;const n=Math.max(t.width/c.width,t.height/c.height)>1.2?Qo.IMMEDIATE:Qo.MEDIUM;r(n,{width:e.clientWidth,height:e.clientHeight}),c=t}));null===l||void 0===l||l.observe(e);const u=i.isLocalParticipant?null:s.pipe(Er("publishedTracks"),dr((e=>"videoTrack"===n?qa(e):Ja(e))),kr()).subscribe((t=>{t?r(Qo.IMMEDIATE,{width:e.clientWidth,height:e.clientHeight}):r(Qo.FAST,void 0)}));e.autoplay=!0,e.playsInline=!0,e.muted=!0;const d=s.pipe(Er("videoTrack"===n?"videoStream":"screenShareStream")).subscribe((t=>{const i="videoTrack"===n?t.videoStream:t.screenShareStream;e.srcObject!==i&&(e.srcObject=null!==i&&void 0!==i?i:null,(gc()||vc())&&setTimeout((()=>{e.srcObject=null!==i&&void 0!==i?i:null,e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}))}),25))}));return()=>{r(Qo.FAST,void 0),null===a||void 0===a||a.unsubscribe(),null===u||void 0===u||u.unsubscribe(),d.unsubscribe(),null===l||void 0===l||l.disconnect()}},this.bindAudioElement=(e,t,n)=>{const i=this.callState.findParticipantBySessionId(t);if(!i||i.isLocalParticipant)return;const r=this.callState.participants$.pipe(dr((e=>e.find((e=>e.sessionId===t)))),_r((e=>!!e)),kr(),Cr({bufferSize:1,refCount:!0})),s=r.pipe(Er("screenShareAudioTrack"===n?"screenShareAudioStream":"audioStream")).subscribe((t=>{const i="screenShareAudioTrack"===n?t.screenShareAudioStream:t.audioStream;e.srcObject!==i&&setTimeout((()=>{if(e.srcObject=null!==i&&void 0!==i?i:null,e.srcObject){e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}));const{selectedDevice:t}=this.speaker.state;t&&"setSinkId"in e&&e.setSinkId(t)}}))})),o="setSinkId"in e?this.speaker.state.selectedDevice$.subscribe((t=>{t&&e.setSinkId(t)})):null,a=gr([this.speaker.state.volume$,r.pipe(Er("audioVolume"))]).subscribe((t=>{var n;let[i,r]=t;e.volume=null!==(n=r.audioVolume)&&void 0!==n?n:i}));return e.autoplay=!0,()=>{null===o||void 0===o||o.unsubscribe(),a.unsubscribe(),s.unsubscribe()}},this.callState=e,this.speaker=t}setSfuClient(e){this.sfuClient=e}get trackSubscriptions(){const e=[];for(const i of this.callState.remoteParticipants){if(i.videoDimension&&qa(i)){var t;const r=null!==(t=this.videoTrackSubscriptionOverrides[i.sessionId])&&void 0!==t?t:this.videoTrackSubscriptionOverrides[Ol];var n;if(!1!==(null===r||void 0===r?void 0:r.enabled))e.push({userId:i.userId,sessionId:i.sessionId,trackType:ms.VIDEO,dimension:null!==(n=null===r||void 0===r?void 0:r.dimension)&&void 0!==n?n:i.videoDimension})}i.screenShareDimension&&Ja(i)&&e.push({userId:i.userId,sessionId:i.sessionId,trackType:ms.SCREEN_SHARE,dimension:i.screenShareDimension}),Ga(i)&&e.push({userId:i.userId,sessionId:i.sessionId,trackType:ms.SCREEN_SHARE_AUDIO})}return e}get videoTrackSubscriptionOverrides(){return Da(this.videoTrackSubscriptionOverrides$)}}class Dl{constructor(){var e=this;this.permissions=[],this.setPermissions=e=>{this.permissions=e||[]},this.setCallSettings=e=>{this.settings=e},this.hasPermission=e=>this.permissions.includes(e),this.canPublish=e=>{switch(e){case ms.AUDIO:return this.hasPermission(ss.SEND_AUDIO);case ms.VIDEO:return this.hasPermission(ss.SEND_VIDEO);case ms.SCREEN_SHARE:case ms.SCREEN_SHARE_AUDIO:return this.hasPermission(ss.SCREENSHARE);case ms.UNSPECIFIED:return!1;default:zc(e,"Unknown track type")}},this.canRequest=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.settings;if(!n)return!1;const{audio:i,video:r,screensharing:s}=n;switch(t){case ss.SEND_AUDIO:return i.access_request_enabled;case ss.SEND_VIDEO:return r.access_request_enabled;case ss.SCREENSHARE:return s.access_request_enabled;default:return!1}}}}class jl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sortParticipantsBy:oc};this.name=e,this.options=t}}const Ll=new class{constructor(e){this.register=e=>{this.callTypes[e.name]=e},this.unregister=e=>{delete this.callTypes[e]},this.get=e=>(this.callTypes[e]||this.register(new jl(e)),this.callTypes[e]),this.callTypes=e.reduce(((e,t)=>(e[t.name]=t,e)),{})}}([new jl("default",{sortParticipantsBy:oc}),new jl("development",{sortParticipantsBy:oc}),new jl("livestream",{sortParticipantsBy:lc}),new jl("audio_room",{sortParticipantsBy:lc})]);class Ul{constructor(e){this.permission=e,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=Sa(["permissions"]);const t=this.disposeController.signal;this.ready=(async()=>{const n=()=>{this.setState("prompt")};if(!function(){var e;return!fa()&&"undefined"!==typeof navigator&&!(null===(e=navigator.permissions)||void 0===e||!e.query)}())return n();try{const n=await navigator.permissions.query({name:e.queryName});t.aborted||(this.setState(n.state),n.addEventListener("change",(()=>this.setState(n.state)),{signal:t}))}catch(i){this.logger("debug","Failed to query permission status",i),n()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt(){let{forcePrompt:e=!1,throwOnNotAllowed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await xa("permission-prompt-".concat(this.permission.queryName),(async()=>{if("prompt"!==await this.getState()||this.wasPrompted&&!e){const e="granted"===this.state;if(!e&&t)throw new Error("Permission was not granted previously, and prompting again is not allowed");return e}try{this.wasPrompted=!0,this.setState("prompting");const e=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return eu(e),this.setState("granted"),!0}catch(n){if(n&&"object"===typeof n&&"name"in n&&("NotAllowedError"===n.name||"SecurityError"===n.name)){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),t)throw n;return!1}throw this.logger("error","Failed to getUserMedia",{error:n,permission:this.permission}),this.setState("prompt"),n}}))}listen(e){return this.listeners.add(e),this.state&&e(this.state),()=>this.listeners.delete(e)}asObservable(){return this.getStateObservable().pipe(dr((e=>"denied"!==e)))}asStateObservable(){return this.getStateObservable()}getIsPromptingObservable(){return this.getStateObservable().pipe(dr((e=>"prompting"===e)))}getStateObservable(){return Ar((e=>this.listen(e)),((e,t)=>t()))}setState(e){this.state!==e&&(this.state=e,this.listeners.forEach((t=>t(e))))}}const Ml=(e,t)=>(0,ar.H)((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some((e=>e.kind===t&&""===e.label))&&await e.prompt()&&(n=await navigator.mediaDevices.enumerateDevices()),n.filter((e=>e.kind===t&&""!==e.label&&"default"!==e.deviceId))})()),Fl={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},Vl={video:{width:1280,height:720}},Bl=il((()=>new Ul({constraints:Fl,queryName:"microphone"}))),Hl=il((()=>new Ul({constraints:Vl,queryName:"camera"}))),zl=il((()=>{return navigator.mediaDevices.addEventListener?Dr(navigator.mediaDevices,"devicechange").pipe(dr((()=>{})),(e=500,void 0===t&&(t=Vr),(0,lr.N)((function(n,i){var r=null,s=null,o=null,a=function(){if(r){r.unsubscribe(),r=null;var e=s;s=null,i.next(e)}};function c(){var n=o+e,s=t.now();if(s<n)return r=this.schedule(void 0,n-s),void i.add(r);a()}n.subscribe((0,ur._)(i,(function(n){s=n,o=t.now(),r||(r=t.schedule(c,e),i.add(r))}),(function(){a(),i.complete()}),void 0,(function(){s=r=null})))})))):(0,ar.H)([]);var e,t})),Wl=il((()=>zr(zl(),Bl().asObservable()).pipe(qr(void 0),$r((()=>Ml(Bl(),"audioinput"))),Cr(1)))),ql=il((()=>zr(zl(),Hl().asObservable()).pipe(qr(void 0),$r((()=>Ml(Hl(),"videoinput"))),Cr(1)))),$l=il((()=>zr(zl(),Bl().asObservable()).pipe(qr(void 0),$r((()=>Ml(Bl(),"audiooutput"))),Cr(1))));let Jl=0;const Gl=async(e,t)=>{const n="navigator.mediaDevices.getUserMedia.".concat(Jl++,".");try{null===t||void 0===t||t.trace(n,e);const i=await navigator.mediaDevices.getUserMedia(e);return null===t||void 0===t||t.trace("".concat(n,"OnSuccess"),pc(i)),vc()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),i}catch(i){throw null===t||void 0===t||t.trace("".concat(n,"OnFailure"),i.name),i}};function Kl(e){if(!e||"object"!==typeof e)return!1;if("name"in e&&"string"===typeof e.name){const t=e.name;if(["OverconstrainedError","NotFoundError"].includes(t))return!0}if("message"in e&&"string"===typeof e.message){if(e.message.startsWith("OverconstrainedError"))return!0}return!1}const Yl=async(e,t)=>{const n={audio:(0,u.A)((0,u.A)({},Fl.audio),e)};try{return await Bl().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Gl(n,t)}catch(i){if(Kl(i)&&null!==e&&void 0!==e&&e.deviceId){const{deviceId:t}=e,r=(0,l.A)(e,Zr);return Sa(["devices"])("warn","Failed to get audio stream, will try again with relaxed constraints",{error:i,constraints:n,relaxedConstraints:r}),Yl(r)}throw Sa(["devices"])("error","Failed to get audio stream",{error:i,constraints:n}),i}},Xl=async(e,t)=>{const n={video:(0,u.A)((0,u.A)({},Vl.video),e)};try{return await Hl().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Gl(n,t)}catch(i){if(Kl(i)&&null!==e&&void 0!==e&&e.deviceId){const{deviceId:t}=e,r=(0,l.A)(e,Qr);return Sa(["devices"])("warn","Failed to get video stream, will try again with relaxed constraints",{error:i,constraints:n,relaxedConstraints:r}),Xl(r)}throw Sa(["devices"])("error","Failed to get video stream",{error:i,constraints:n}),i}};let Zl=0;const Ql="undefined"!==typeof navigator&&"undefined"!==typeof navigator.mediaDevices?zl().pipe(qr(void 0),$r((()=>navigator.mediaDevices.enumerateDevices())),Cr(1)):void 0,eu=e=>{e.active&&(e.getTracks().forEach((e=>{e.stop()})),"function"===typeof e.release&&e.release())},tu=()=>/Mobi/i.test(navigator.userAgent);class nu{constructor(e,t,n){this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach((e=>e()))},this.call=e,this.state=t,this.trackType=n,this.logger=Sa(["".concat(ms[n].toLowerCase()," manager")]),!Ql||fa()||this.trackType!==ms.AUDIO&&this.trackType!==ms.VIDEO||this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return"enabled"===this.state.status}async enable(){this.state.prevStatus=this.state.optimisticStatus,"enabled"!==this.state.optimisticStatus&&(this.state.setPendingStatus("enabled"),await Pa(this.statusChangeConcurrencyTag,(async e=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}})))}async disable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.prevStatus=this.state.optimisticStatus,(e||"disabled"!==this.state.optimisticStatus)&&(this.state.setPendingStatus("disabled"),await Pa(this.statusChangeConcurrencyTag,(async t=>{try{const t=e||"stop-tracks"===this.state.disableMode;await this.muteStream(t),this.state.setStatus("disabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}})))}async statusChangeSettled(){await async function(e){let t;for(;t=Oa.get(e);)await t.promise}(this.statusChangeConcurrencyTag)}async resume(){"enabled"===this.state.prevStatus&&"enabled"!==this.state.status&&await this.enable()}async toggle(){return"enabled"===this.state.optimisticStatus?await this.disable():await this.enable()}registerFilter(e){const t={start:e,stop:void 0};return{registered:xa(this.filterRegistrationConcurrencyTag,(async()=>{this.filters.push(t),await this.applySettingsToStream()})),unregister:()=>xa(this.filterRegistrationConcurrencyTag,(async()=>{var e;null===(e=t.stop)||void 0===e||e.call(t),this.filters=this.filters.filter((e=>e!==t)),await this.applySettingsToStream()}))}}setDefaultConstraints(e){this.state.setDefaultConstraints(e)}async select(e){if(fa())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const t=this.state.selectedDevice;if(e!==t)try{this.state.setDevice(e),await this.applySettingsToStream()}catch(n){throw this.state.setDevice(t),n}}async applySettingsToStream(){await Pa(this.statusChangeConcurrencyTag,(async()=>{this.enabled&&(await this.muteStream(),await this.unmuteStream())}))}publishStream(e){return this.call.publish(e,this.trackType)}stopPublishStream(){return this.call.stopPublish(this.trackType)}getTracks(){var e,t;return null!==(e=null===(t=this.state.mediaStream)||void 0===t?void 0:t.getTracks())&&void 0!==e?e:[]}async muteStream(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.state.mediaStream;if(!t)return;this.logger("debug","".concat(e?"Stopping":"Disabling"," stream")),this.call.state.callingState===Fa.JOINED&&await this.stopPublishStream(),this.muteLocalStream(e);this.getTracks().every((e=>"ended"===e.readyState))&&("function"===typeof t.release&&t.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach((e=>{var t;return null===(t=e.stop)||void 0===t?void 0:t.call(e)})))}disableTracks(){this.getTracks().forEach((e=>{e.enabled&&(e.enabled=!1)}))}enableTracks(){this.getTracks().forEach((e=>{e.enabled||(e.enabled=!0)}))}stopTracks(){this.getTracks().forEach((e=>{"live"===e.readyState&&e.stop()}))}muteLocalStream(e){this.state.mediaStream&&(e?this.stopTracks():this.disableTracks())}async unmuteStream(){let e,t;this.logger("debug","Starting stream");try{if(this.state.mediaStream&&this.getTracks().every((e=>"live"===e.readyState)))e=this.state.mediaStream,this.enableTracks();else{const n=this.state.defaultConstraints,i=(0,u.A)((0,u.A)({},n),{},{deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0}),r=e=>async t=>{if(!e)return t;const n=await e;return t.getTracks().forEach((e=>{const t=e.stop;e.stop=function(){t.call(e),n.getTracks().forEach((t=>{t.kind===e.kind&&t.stop()}))}})),n.getTracks().forEach((e=>{const n=()=>{t.getTracks().forEach((t=>{e.kind===t.kind&&(t.stop(),t.dispatchEvent(new Event("ended")))}))};e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("ended",n)}))})),t};t=this.getStream(i),e=await this.filters.reduce(((e,t)=>e.then((e=>{const{stop:n,output:i}=t.start(e);return t.stop=n,i})).then(r(e),(t=>(this.logger("warn","Filter failed to start and will be ignored",t),e)))),t)}if(this.call.state.callingState===Fa.JOINED&&await this.publishStream(e),this.state.mediaStream!==e){this.state.setMediaStream(e,await t);const n=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout((()=>{this.isTrackStoppedDueToTrackEnd=!1}),2e3),await this.disable())},i=e=>()=>{tu()&&this.trackType===ms.VIDEO&&this.call.notifyTrackMuteState(e,this.trackType).catch((e=>{this.logger("warn","Error while notifying track mute state",e)}))};e.getTracks().forEach((e=>{const t=i(!0),r=i(!1);e.addEventListener("mute",t),e.addEventListener("unmute",r),e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("mute",t),e.removeEventListener("unmute",r),e.removeEventListener("ended",n)}))}))}}catch(n){throw t&&eu(await t),n}}get mediaDeviceKind(){return this.trackType===ms.AUDIO?"audioinput":this.trackType===ms.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(Ua(gr([Ql.pipe((0,lr.N)((function(e,t){var n,i=!1;e.subscribe((0,ur._)(t,(function(e){var r=n;n=e,i&&t.next([r,e]),i=!0})))}))),this.state.selectedDevice$]),(async e=>{let[[t,n],i]=e;try{if(!i)return;await this.statusChangeSettled();let e=!1,r=!1;const s=this.findDevice(n,i),o=this.findDevice(t,i);!s&&o?e=!0:s&&o&&s.deviceId===o.deviceId&&s.groupId!==o.groupId&&(r=!0),e&&(await this.disable(),await this.select(void 0)),r&&(this.isTrackStoppedDueToTrackEnd&&"disabled"===this.state.status?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(r){this.logger("warn","Unexpected error while handling disconnected or replaced device",r)}})))}findDevice(e,t){const n=this.mediaDeviceKind;return e.find((e=>e.deviceId===t&&e.kind===n))}}class iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stop-tracks",t=arguments.length>1?arguments[1]:void 0;this.disableMode=e,this.statusSubject=new br(void 0),this.optimisticStatusSubject=new br(void 0),this.mediaStreamSubject=new br(void 0),this.selectedDeviceSubject=new br(void 0),this.defaultConstraintsSubject=new br(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(kr()),this.status$=this.statusSubject.asObservable().pipe(kr()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(kr()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.hasBrowserPermission$=t?t.asObservable().pipe(Cr(1)):(0,Jr.of)(!0),this.browserPermissionState$=t?t.asStateObservable().pipe(Cr(1)):(0,Jr.of)("prompt"),this.isPromptingPermission$=t?t.getIsPromptingObservable().pipe(Cr(1)):(0,Jr.of)(!1)}get status(){return Da(this.status$)}get optimisticStatus(){return Da(this.optimisticStatus$)}get selectedDevice(){return Da(this.selectedDevice$)}get mediaStream(){return Da(this.mediaStream$)}setStatus(e){ja(this.statusSubject,e)}setPendingStatus(e){ja(this.optimisticStatusSubject,e)}setMediaStream(e,t){ja(this.mediaStreamSubject,e),t&&this.setDevice(this.getDeviceIdFromStream(t))}setDevice(e){ja(this.selectedDeviceSubject,e)}get defaultConstraints(){return Da(this.defaultConstraints$)}setDefaultConstraints(e){ja(this.defaultConstraintsSubject,e)}}class ru extends iu{constructor(){super("stop-tracks",Hl()),this.directionSubject=new br(void 0),this.direction$=this.directionSubject.asObservable().pipe(kr())}get direction(){return Da(this.direction$)}setDirection(e){ja(this.directionSubject,e)}setMediaStream(e,t){if(super.setMediaStream(e,t),e){var n;const t=fa()?this.direction:"environment"===(null===(n=e.getVideoTracks()[0])||void 0===n?void 0:n.getSettings().facingMode)?"back":"front";this.setDirection(t)}}getDeviceIdFromStream(e){const[t]=e.getVideoTracks();return null===t||void 0===t?void 0:t.getSettings().deviceId}}class su extends nu{constructor(e){super(e,new ru,ms.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return fa()||tu()}async selectDirection(e){if(this.isDirectionSupportedByDevice())if(this.state.setDirection(e),this.state.setDevice(void 0),fa()){const t=this.getTracks()[0];await(null===t||void 0===t?void 0:t.applyConstraints({facingMode:"front"===e?"user":"environment"}))}else{this.getTracks().forEach((e=>e.stop()));try{await this.unmuteStream()}catch(t){throw t instanceof Error&&"NotReadableError"===t.name&&(await this.muteStream(),await this.unmuteStream()),t}}else this.logger("warn","Setting direction is not supported on this device")}async flip(){const e="front"===this.state.direction?"back":"front";await this.selectDirection(e)}async selectTargetResolution(e){if(this.targetResolution.height=e.height,this.targetResolution.width=e.width,"enabled"===this.state.optimisticStatus)try{await this.statusChangeSettled()}catch(t){this.logger("warn","could not apply target resolution",t)}if(this.enabled&&this.state.mediaStream){const[e]=this.state.mediaStream.getVideoTracks();if(!e)return;const{width:t,height:n}=e.getSettings();t===this.targetResolution.width&&n===this.targetResolution.height||(await this.applySettingsToStream(),this.logger("debug","".concat(t,"x").concat(n," target resolution applied to media stream")))}}async apply(e,t){var n;const i=!(null===(n=this.call.state.localParticipant)||void 0===n||!n.videoStream),r=this.call.permissionsContext.hasPermission(ss.SEND_AUDIO);if(i||!r)return;await this.statusChangeSettled();const{target_resolution:s,camera_facing:o,camera_default_on:a}=e;if(await this.selectTargetResolution(s),this.state.direction||this.state.selectedDevice||this.state.setDirection("front"===o?"front":"back"),!t)return;const{mediaStream:c}=this.state;this.enabled&&c?await this.publishStream(c):void 0===this.state.status&&a&&await this.enable()}getDevices(){return ql()}getStream(e){return e.width=this.targetResolution.width,e.height=this.targetResolution.height,!e.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(e.facingMode="front"===this.state.direction?"user":"environment"),Xl(e,this.call.tracer)}}class ou extends iu{constructor(e){super(e,Bl()),this.speakingWhileMutedSubject=new br(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(kr())}get speakingWhileMuted(){return Da(this.speakingWhileMuted$)}setSpeakingWhileMuted(e){ja(this.speakingWhileMutedSubject,e)}getDeviceIdFromStream(e){const[t]=e.getAudioTracks();return null===t||void 0===t?void 0:t.getSettings().deviceId}}const au=500,cu=150,lu=128;class uu{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(e){try{this.cleanupAudioStream();const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",(async e=>{await this.pc2.addIceCandidate(e.candidate)})),this.pc2.addEventListener("icecandidate",(async e=>{await this.pc1.addIceCandidate(e.candidate)})),this.pc2.addEventListener("track",(e=>{e.streams[0].getTracks().forEach((e=>{e._setVolume(0)}))})),t.getTracks().forEach((e=>this.pc1.addTrack(e,t)));const n=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(n),await this.pc1.setLocalDescription(n);const i=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(i),await this.pc2.setLocalDescription(i);const r=this.onSpeakingDetectedStateChange(e);return()=>{r(),this.stop()}}catch(t){return Sa(["RNSpeechDetector"])("error","error handling permissions: ",t),()=>{}}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream()}onSpeakingDetectedStateChange(e){let t,n,i=.13,r=!1;const s=[],o=setInterval((async()=>{try{const o=await this.pc1.getStats(),a=hc(o).find((e=>"media-source"===e.type&&"audio"===e.kind));if(a){const{audioLevel:o}=a;if(o){s.push(o),s.length>10&&s.shift();const a=s.reduce(((e,t)=>e+t),0)/s.length;a<1.1*i?n||(n=setTimeout((()=>{i=Math.min(.9*a,.13)}),5e3)):(clearTimeout(n),n=void 0),a>1.5*i&&(r||(r=!0,e({isSoundDetected:!0,audioLevel:o})),clearTimeout(t),t=setTimeout((()=>{r=!1,e({isSoundDetected:!1,audioLevel:0})}),500))}}}catch(o){Sa(["RNSpeechDetector"])("error","error checking audio level from stats",o)}}),100);return()=>{clearInterval(o),clearTimeout(t),clearTimeout(n)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach((e=>e.stop())),"function"===typeof this.audioStream.release&&this.audioStream.release())}}class du extends nu{constructor(e){super(e,new ou(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stop-tracks"),ms.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(Ma(gr([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),(async e=>{let[t,n,i,r]=e;try{if(t===Fa.LEFT&&await this.stopSpeakingWhileMutedDetection(),t!==Fa.JOINED)return;if(!this.speakingWhileMutedNotificationEnabled)return;n.includes(ss.SEND_AUDIO)&&"disabled"===r?await this.startSpeakingWhileMutedDetection(i):await this.stopSpeakingWhileMutedDetection()}catch(s){this.logger("warn","Could not enable speaking while muted",s)}}))),this.subscriptions.push(Ua(this.call.state.callingState$,(e=>{var t;if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;(null===(t=this.call.state.settings)||void 0===t||null===(t=t.audio.noise_cancellation)||void 0===t?void 0:t.mode)===rs&&e===Fa.JOINED?this.noiseCancellationRegistration.then((()=>{var e;return null===(e=this.noiseCancellation)||void 0===e?void 0:e.enable()})).catch((e=>(this.logger("warn","Failed to enable noise cancellation",e),this.call.notifyNoiseCancellationStopped()))):e===Fa.LEFT&&this.noiseCancellationRegistration.then((()=>{var e;return null===(e=this.noiseCancellation)||void 0===e?void 0:e.disable()})).catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))})))}async enableNoiseCancellation(e){if(fa())throw new Error("Noise cancellation is not supported in React Native");const{ownCapabilities:t,settings:n}=this.call.state;if(!t.includes(ss.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");const i=null===n||void 0===n?void 0:n.audio.noise_cancellation;if(!i||i.mode===is)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=e,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",(e=>{e?this.call.notifyNoiseCancellationStarting().catch((e=>{this.logger("warn","notifyNoiseCancellationStart failed",e)})):this.call.notifyNoiseCancellationStopped().catch((e=>{this.logger("warn","notifyNoiseCancellationStop failed",e)}))}));const t=this.registerFilter(e.toFilter());this.noiseCancellationRegistration=t.registered,this.unregisterNoiseCancellation=t.unregister,await this.noiseCancellationRegistration,i.mode===rs&&this.call.state.callingState===Fa.JOINED&&e.enable()}catch(r){this.logger("warn","Failed to enable noise cancellation",r),await this.disableNoiseCancellation().catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))}}async disableNoiseCancellation(){var e,t;if(fa())throw new Error("Noise cancellation is not supported in React Native");await(null!==(e=null===(t=this.unregisterNoiseCancellation)||void 0===t?void 0:t.call(this))&&void 0!==e?e:Promise.resolve()).then((()=>{var e;return null===(e=this.noiseCancellation)||void 0===e?void 0:e.disable()})).then((()=>{var e;return null===(e=this.noiseCancellationChangeUnsubscribe)||void 0===e?void 0:e.call(this)})).catch((e=>{this.logger("warn","Failed to unregister noise cancellation",e)})),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,"disabled"===this.state.status&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}async apply(e,t){var n;if(!t)return;const i=!(null===(n=this.call.state.localParticipant)||void 0===n||!n.audioStream),r=this.call.permissionsContext.hasPermission(ss.SEND_AUDIO);if(i||!r)return;await this.statusChangeSettled();const{mediaStream:s}=this.state;this.enabled&&s?await this.publishStream(s):void 0===this.state.status&&e.mic_default_on&&await this.enable()}getDevices(){return Wl()}getStream(e){return Yl(e,this.call.tracer)}async startSpeakingWhileMutedDetection(e){await xa(this.soundDetectorConcurrencyTag,(async()=>{if(await this.stopSpeakingWhileMutedDetection(),fa()){this.rnSpeechDetector=new uu;const e=await this.rnSpeechDetector.start((e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}));this.soundDetectorCleanup=()=>{e(),this.rnSpeechDetector=void 0}}else{const t=await this.getStream({deviceId:{exact:e}});this.soundDetectorCleanup=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{detectionFrequencyInMs:i=au,audioLevelThreshold:r=cu,fftSize:s=lu,destroyStreamOnStop:o=!0}=n,a=new AudioContext,c=a.createAnalyser();c.fftSize=s;const l=a.createMediaStreamSource(e);l.connect(c);const u=setInterval((()=>{var n;const i=new Uint8Array(c.frequencyBinCount);c.getByteFrequencyData(i);const s=i.some((e=>e>=r)),o=i.reduce(((e,t)=>e+t),0)/i.length,a=o>r?100:Math.round(o/r*100);null!==(n=e.getAudioTracks()[0])&&void 0!==n&&n.enabled?t({isSoundDetected:s,audioLevel:a}):t({isSoundDetected:!1,audioLevel:0})}),i);return async function(){clearInterval(u),l.disconnect(),c.disconnect(),"closed"!==a.state&&await a.close(),o&&e.getTracks().forEach((t=>{t.stop(),e.removeTrack(t)}))}}(t,(e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}))}}))}async stopSpeakingWhileMutedDetection(){await xa(this.soundDetectorConcurrencyTag,(async()=>{if(!this.soundDetectorCleanup)return;const e=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await e()}))}}class hu extends iu{constructor(){super(...arguments),this.audioEnabledSubject=new br(!0),this.settingsSubject=new br(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(kr()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=e=>{const[t]=e.getTracks();return null===t||void 0===t?void 0:t.getSettings().deviceId}}get audioEnabled(){return Da(this.audioEnabled$)}setAudioEnabled(e){ja(this.audioEnabledSubject,e)}get settings(){return Da(this.settings$)}setSettings(e){ja(this.settingsSubject,e)}}class pu extends nu{constructor(e){super(e,new hu,ms.SCREEN_SHARE),this.subscriptions.push(Ua(e.state.settings$,(e=>{const t=null===e||void 0===e?void 0:e.screensharing.target_resolution;t&&this.setDefaultConstraints({video:{width:t.width,height:t.height}})})))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){var e;this.state.setAudioEnabled(!1),null!==(e=this.call.publisher)&&void 0!==e&&e.isPublishing(ms.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(ms.SCREEN_SHARE_AUDIO)}getSettings(){return this.state.settings}setSettings(e){this.state.setSettings(e)}getDevices(){return(0,Jr.of)([])}getStream(e){return this.state.audioEnabled||(e.audio=!1),(async(e,t)=>{const n="navigator.mediaDevices.getDisplayMedia.".concat(Zl++,".");try{null===t||void 0===t||t.trace(n,e);const i=await navigator.mediaDevices.getDisplayMedia((0,u.A)({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include"},e));return null===t||void 0===t||t.trace("".concat(n,"OnSuccess"),pc(i)),i}catch(i){throw null===t||void 0===t||t.trace("".concat(n,"OnFailure"),i.name),Sa(["devices"])("error","Failed to get screen share stream",i),i}})(e,this.call.tracer)}async stopPublishStream(){return this.call.stopPublish(ms.SCREEN_SHARE,ms.SCREEN_SHARE_AUDIO)}async select(){throw new Error("Not supported")}}class fu{constructor(e){this.selectedDeviceSubject=new br(""),this.volumeSubject=new br(1),this.isDeviceSelectionSupported="undefined"!==typeof document&&"setSinkId"in document.createElement("audio"),this.tracer=e,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(kr()),this.volume$=this.volumeSubject.asObservable().pipe(kr())}get selectedDevice(){return Da(this.selectedDevice$)}get volume(){return Da(this.volume$)}setDevice(e){ja(this.selectedDeviceSubject,e),this.tracer.trace("navigator.mediaDevices.setSinkId",e)}setVolume(e){ja(this.volumeSubject,e)}}class mu{constructor(e){this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach((e=>e.unsubscribe()))},this.call=e,this.state=new fu(e.tracer),Ql&&!fa()&&this.subscriptions.push(gr([Ql,this.state.selectedDevice$]).subscribe((e=>{let[t,n]=e;if(!n)return;t.find((e=>e.deviceId===n&&"audiooutput"===e.kind))||this.select("")})))}listDevices(){if(fa())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return $l()}select(e){if(fa())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(e)}setVolume(e){if(fa())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(e&&(e<0||e>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(e)}setParticipantVolume(e,t){if(fa())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(e,{audioVolume:t})}}class gu{constructor(e){var t=this;let{type:n,id:i,streamClient:r,members:s,ownCapabilities:o,sortParticipantsBy:a,clientStore:c,ringing:d=!1,watching:h=!1}=e;this.state=new dc,this.permissionsContext=new Dl,this.tracer=new Vc(null),this.dispatcher=new Ra,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=Ss.UNSPECIFIED,this.reconnectReason="",this.fastReconnectDeadlineSeconds=0,this.disconnectionTimeoutSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.setup=async()=>{await xa(this.joinLeaveConcurrencyTag,(async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",(e=>{this.state.updateFromEvent(e)}))),this.leaveCallHooks.add(this.on("changePublishOptions",(e=>{this.currentPublishOptions=e.publishOptions}))),this.leaveCallHooks.add(((e,t)=>{const n=e.state,i=[e.on("call.ended",dl(e)),hl(e),gl(t,e),vl(t),fl(t,n),ml(t,n),e.on("participantJoined",Sl(n)),e.on("participantLeft",Cl(n)),e.on("participantUpdated",kl(n)),e.on("trackPublished",Tl(n)),e.on("trackUnpublished",_l(n)),Al(t,n),Rl(t,n),e.on("callGrantsUpdated",pl(n)),e.on("pinsUpdated",bl(n)),yl(e)];return e.ringing&&i.push(Il(e)),()=>{i.forEach((e=>e()))}})(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===Fa.LEFT&&this.state.setCallingState(Fa.IDLE),this.initialized=!0)}))},this.registerEffects=()=>{this.leaveCallHooks.add(Ua(this.state.settings$,(e=>{e&&this.permissionsContext.setCallSettings(e)}))),this.leaveCallHooks.add(Ma(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(Ua(this.state.blockedUserIds$,(async e=>{if(!e||0===e.length)return;const t=this.currentUserId;t&&e.includes(t)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({message:"user blocked"}).catch((e=>{this.logger("error","Error leaving call after being blocked",e)})))}))),this.leaveCallHooks.add(Ua(this.state.session$,(e=>{var t;if(!this.ringing)return;const n=null===(t=this.clientStore.connectedUser)||void 0===t?void 0:t.id;if(!n)return;const i=Boolean(null===e||void 0===e?void 0:e.accepted_by[n]),r=Boolean(null===e||void 0===e?void 0:e.rejected_by[n]);(i||r)&&this.cancelAutoDrop();var s;!(i&&this.state.callingState===Fa.RINGING)&&!r||(s=this.joinLeaveConcurrencyTag,Oa.has(s))||this.leave().catch((()=>{this.logger("error","Could not leave a call that was accepted or rejected elsewhere")}))}))),this.leaveCallHooks.add(Ua(this.ringingSubject,(e=>{var t,n;if(!e)return;const i=this.state.session,r=null===(t=this.clientStore.connectedUser)||void 0===t?void 0:t.id,s=null===i||void 0===i?void 0:i.ended_at,o=null===(n=this.state.createdBy)||void 0===n?void 0:n.id,a=null===i||void 0===i?void 0:i.rejected_by,c=null===i||void 0===i?void 0:i.accepted_by;let l=!1;s?l=!0:o&&a?a[o]&&(l=!0):r&&a?a[r]&&(l=!0):r&&c&&c[r]&&(l=!0),l?this.state.callingState!==Fa.IDLE&&this.state.setCallingState(Fa.IDLE):(this.state.callingState===Fa.IDLE&&this.state.setCallingState(Fa.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(Il(this)))})))},this.handleOwnCapabilitiesUpdated=async e=>{if(this.permissionsContext.setPermissions(e),!this.publisher)return;const t={[ss.SEND_AUDIO]:ms.AUDIO,[ss.SEND_VIDEO]:ms.VIDEO,[ss.SCREENSHARE]:ms.SCREEN_SHARE};for(const[i,r]of Object.entries(t)){if(!this.permissionsContext.hasPermission(i))try{switch(r){case ms.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case ms.VIDEO:this.camera.enabled&&await this.camera.disable();break;case ms.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable()}}catch(n){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",n)}}},this.on=(e,t)=>{if(Ea(e))return this.dispatcher.on(e,t);const n=this.streamClient.on(e,(e=>{const n=e;n.call_cid&&n.call_cid===this.cid&&t(n)}));return this.streamClientEventHandlers.set(t,n),()=>{this.off(e,t)}},this.off=(e,t)=>{if(Ea(e))return this.dispatcher.off(e,t);const n=this.streamClientEventHandlers.get(t);n&&n()},this.leave=async function(){let{reject:e,reason:n,message:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await xa(t.joinLeaveConcurrencyTag,(async()=>{var r,s,o,a,c,l,u;const d=t.state.callingState;if(d===Fa.LEFT)throw new Error("Cannot leave call that has already been left.");if(d===Fa.JOINING){const e=()=>new Promise((e=>{t.state.callingState$.pipe(_r((e=>e!==Fa.JOINED),!0)).subscribe((()=>e()))}));await e()}if(d===Fa.RINGING&&!1!==e)if(e)await t.reject(null!==n&&void 0!==n?n:"decline");else{const e=t.state.remoteParticipants.length>0;t.isCreatedByMe&&!e&&await t.reject("cancel")}null===(r=t.statsReporter)||void 0===r||r.stop(),t.statsReporter=void 0,null===(s=t.sfuStatsReporter)||void 0===s||s.flush(),null===(o=t.sfuStatsReporter)||void 0===o||o.stop(),t.sfuStatsReporter=void 0,null===(a=t.subscriber)||void 0===a||a.dispose(),t.subscriber=void 0,null===(c=t.publisher)||void 0===c||c.dispose(),t.publisher=void 0,await(null===(l=t.sfuClient)||void 0===l?void 0:l.leaveAndClose(null!==(u=null!==i&&void 0!==i?i:n)&&void 0!==u?u:"user is leaving the call")),t.sfuClient=void 0,t.dynascaleManager.setSfuClient(void 0),t.state.setCallingState(Fa.LEFT),t.state.setParticipants([]),t.state.dispose(),t.leaveCallHooks.forEach((e=>e())),t.initialized=!1,t.hasJoinedOnce=!1,t.unifiedSessionId=void 0,t.ringingSubject.next(!1),t.cancelAutoDrop(),t.clientStore.unregisterCall(t),t.camera.dispose(),t.microphone.dispose(),t.screenShare.dispose(),t.speaker.dispose();const h=[];t.camera.stopOnLeave&&h.push(t.camera.disable(!0)),t.microphone.stopOnLeave&&h.push(t.microphone.disable(!0)),t.screenShare.stopOnLeave&&h.push(t.screenShare.disable(!0)),await Promise.all(h)}))},this.updateFromRingingEvent=async e=>{await this.setup();const{created_by:t,settings:n}=e.call,i=this.state.members.find((e=>e.user.id===t.id));i?this.state.setMembers([i,...e.members]):this.state.setMembers(e.members),this.state.updateFromCallResponse(e.call),this.watching=!0,this.ringingSubject.next(!0);const r=this.clientStore.calls.filter((e=>e.cid!==this.cid));this.clientStore.setCalls([this,...r]),await this.applyDeviceConfig(n,!1)},this.get=async e=>{await this.setup();const t=await this.streamClient.get(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),null!==e&&void 0!==e&&e.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.getOrCreate=async e=>{await this.setup();const t=await this.streamClient.post(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),null!==e&&void 0!==e&&e.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.create=async e=>this.getOrCreate(e),this.delete=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post("".concat(t.streamClientBasePath,"/delete"),e)},this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/accept")),this.reject=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"decline";return t.streamClient.post("".concat(t.streamClientBasePath,"/reject"),{reason:e})},this.join=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxJoinRetries:n=3}=e,i=(0,l.A)(e,es);await t.setup();const r=t.state.callingState;if([Fa.JOINED,Fa.JOINING].includes(r))throw new Error("Illegal State: call.join() shall be called only once");t.state.setCallingState(Fa.JOINING),n=Math.max(n,1);for(let o=0;o<n;o++){try{return t.logger("trace","Joining call (".concat(o,")"),t.cid),await t.doJoin(i)}catch(s){if(t.logger("warn","Failed to join call (".concat(o,")"),t.cid),o===n-1)throw t.state.setCallingState(r),s}await ra(ca(o))}},this.doJoin=async e=>{var t,n,i;const r=Date.now(),s=this.state.callingState;this.joinCallData=e,this.logger("debug","Starting join flow"),this.state.setCallingState(Fa.JOINING);const o=this.reconnectStrategy===Ss.MIGRATE,a=this.reconnectStrategy===Ss.REJOIN,c=this.reconnectStrategy===Ss.FAST;let l=null===(t=this.sfuStatsReporter)||void 0===t?void 0:t.options;if(!this.credentials||!l||a||o)try{const t=await this.doJoinRequest(e);this.credentials=t.credentials,l=t.stats_options}catch(g){throw this.state.callingState===Fa.OFFLINE||this.state.setCallingState(s),g}const u=this.sfuClient,d=null===u||void 0===u?void 0:u.sessionId,h=!(null===u||void 0===u||!u.isHealthy),p=a||o||!h?new cl({logTag:String(++this.sfuClientTag),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,enableTracing:l.enable_rtc_stats,sessionId:a?void 0:d,onSignalClose:e=>this.handleSfuSignalClose(p,e)}):u;this.sfuClient=p,this.dynascaleManager.setSfuClient(p);const f=await Oc();if(u!==p){const[t,n]=await Promise.all([ka("recvonly"),ka("sendonly")]),i=this.reconnectStrategy!==Ss.UNSPECIFIED,r=i?this.getReconnectDetails(null===e||void 0===e?void 0:e.migrating_from,d):void 0,o=i?this.currentPublishOptions||[]:this.getPreferredPublishOptions(),a=i?[]:this.getPreferredSubscribeOptions();try{const{callState:e,fastReconnectDeadlineSeconds:i,publishOptions:s}=await p.join({subscriberSdp:t,publisherSdp:n,clientDetails:f,fastReconnect:c,reconnectDetails:r,preferredPublishOptions:o,preferredSubscribeOptions:a});this.currentPublishOptions=s,this.fastReconnectDeadlineSeconds=i,e&&this.state.updateFromSfuCallState(e,p.sessionId,r)}catch(g){throw this.logger("warn","Join SFU request failed",g),p.close(cl.ERROR_CONNECTION_UNHEALTHY,"Join request failed, connection considered unhealthy"),this.state.setCallingState(s),g}}if(o||this.state.setCallingState(Fa.JOINED),this.hasJoinedOnce=!0,c)await this.restoreICE(p,{includeSubscriber:!1});else{const e={bundlePolicy:"max-bundle",iceServers:this.credentials.ice_servers.map((e=>({urls:e.urls,username:e.username,credential:e.password})))};this.initPublisherAndSubscriber({sfuClient:p,connectionConfig:e,clientDetails:f,statsOptions:l,publishOptions:this.currentPublishOptions||[],closePreviousInstances:!o})}var m;a||c||o||(null===(m=this.sfuStatsReporter)||void 0===m||m.sendConnectionTime((Date.now()-r)/1e3));if(a&&h){const e=Ss[this.reconnectStrategy];await(null===u||void 0===u?void 0:u.leaveAndClose("Closing previous WS after reconnect with strategy: ".concat(e)))}else h||null===u||void 0===u||u.close(cl.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");!this.deviceSettingsAppliedOnce&&this.state.settings&&(await this.applyDeviceConfig(this.state.settings,!0),this.deviceSettingsAppliedOnce=!0),null===(n=this.joinCallData)||void 0===n||delete n.ring,null===(i=this.joinCallData)||void 0===i||delete i.notify,this.reconnectStrategy=Ss.UNSPECIFIED,this.reconnectReason="",this.logger("info","Joined call ".concat(this.cid))},this.getReconnectDetails=(e,t)=>{var n;const i=this.reconnectStrategy,r=i===Ss.REJOIN;return{strategy:i,announcedTracks:(null===(n=this.publisher)||void 0===n?void 0:n.getAnnouncedTracksForReconnect())||[],subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:e||"",previousSessionId:r&&t||"",reason:this.reconnectReason}},this.getPreferredPublishOptions=()=>{const{preferredCodec:e,fmtpLine:t,preferredBitrate:n,maxSimulcastLayers:i}=this.clientPublishOptions||{};if(!e&&!n&&!i)return[];const r=e?Ns.create({name:e.split("/").pop(),fmtp:t}):void 0,s=[Os.create({trackType:ms.VIDEO,codec:r,bitrate:n,maxSpatialLayers:i})],o=this.screenShare.getSettings();return o&&s.push(Os.create({trackType:ms.SCREEN_SHARE,fps:o.maxFramerate,bitrate:o.maxBitrate})),s},this.getPreferredSubscribeOptions=()=>{const{subscriberCodec:e,subscriberFmtpLine:t}=this.clientPublishOptions||{};return e&&t?[Ps.create({trackType:ms.VIDEO,codecs:[{name:e.split("/").pop(),fmtp:t}]})]:[]},this.restoreICE=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeSubscriber:i=!0,includePublisher:r=!0}=n;t.subscriber&&(t.subscriber.setSfuClient(e),i&&await t.subscriber.restartIce()),t.publisher&&(t.publisher.setSfuClient(e),r&&await t.publisher.restartIce())},this.initPublisherAndSubscriber=e=>{var t,n,i;const{sfuClient:r,connectionConfig:s,clientDetails:o,statsOptions:a,publishOptions:c,closePreviousInstances:l}=e,{enable_rtc_stats:u}=a;l&&this.subscriber&&this.subscriber.dispose(),this.subscriber=new Qc({sfuClient:r,dispatcher:this.dispatcher,state:this.state,connectionConfig:s,logTag:String(this.sfuClientTag),enableTracing:u,onUnrecoverableError:e=>{this.reconnect(Ss.REJOIN,e).catch((t=>{this.logger("warn","[Reconnect] Error reconnecting after a subscriber error: ".concat(e),t)}))}});var d;("anonymous"===(null===(t=this.streamClient.user)||void 0===t?void 0:t.type)||(l&&this.publisher&&this.publisher.dispose(),this.publisher=new Zc({sfuClient:r,dispatcher:this.dispatcher,state:this.state,connectionConfig:s,publishOptions:c,logTag:String(this.sfuClientTag),enableTracing:u,onUnrecoverableError:e=>{this.reconnect(Ss.REJOIN,e).catch((t=>{this.logger("warn","[Reconnect] Error reconnecting after a publisher error: ".concat(e),t)}))}})),null===(n=this.statsReporter)||void 0===n||n.stop(),this.statsReporter=(e=>{let{subscriber:t,publisher:n,state:i,datacenter:r,pollingIntervalInMs:s=2e3}=e;const o=Sa(["stats"]),a=async(e,i)=>"subscriber"===e&&t?t.getStats(i):"publisher"===e&&n?n.getStats(i):void 0,c=async(e,i)=>{const r="subscriber"===e?t:n;if(!r)return[];const s=[];for(const t of i){const n=await r.getStats(t),i=yc(n,{trackKind:t.kind,kind:e,publisher:void 0});s.push(i)}return s},l=new Set,u=async()=>{const e={};if(l.size>0){const t=new Set(l);for(const r of i.participants){if(!t.has(r.sessionId))continue;const{audioStream:i,isLocalParticipant:s,sessionId:a,userId:l,videoStream:u}=r,d=s?"publisher":"subscriber";try{const t=s?(null===n||void 0===n?void 0:n.getPublishedTracks())||[]:[...(null===u||void 0===u?void 0:u.getVideoTracks())||[],...(null===i||void 0===i?void 0:i.getAudioTracks())||[]];e[a]=await c(d,t)}catch(p){o("warn","Failed to collect ".concat(d," stats for ").concat(l),p)}}}const[t,s]=await Promise.all([a("subscriber"),n?a("publisher"):void 0]),u=(e,t)=>Sc(yc(e,{kind:t,trackKind:"video",publisher:n})),d=t?u(t,"subscriber"):wc(),h=s?u(s,"publisher"):wc();i.setCallStatsReport({datacenter:r,publisherStats:h,subscriberStats:d,subscriberRawStats:t,publisherRawStats:s,participants:e,timestamp:Date.now()})};let d;if(s>0){const e=async()=>{await u().catch((e=>{o("debug","Failed to collect stats",e)})),d=setTimeout(e,s)};e()}return{getRawStatsForTrack:a,getStatsForStream:c,startReportingStatsFor:e=>{l.add(e),u()},stopReportingStatsFor:e=>{l.delete(e),u()},stop:()=>{d&&clearTimeout(d)}}})({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:r.edgeName}),this.tracer.setEnabled(u),null===(i=this.sfuStatsReporter)||void 0===i||i.stop(),(null===a||void 0===a?void 0:a.reporting_interval_ms)>0)&&(null!==(d=this.unifiedSessionId)&&void 0!==d||(this.unifiedSessionId=r.sessionId),this.sfuStatsReporter=new Nc(r,{clientDetails:o,options:a,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state,tracer:this.tracer,unifiedSessionId:this.unifiedSessionId}),this.sfuStatsReporter.start())},this.doJoinRequest=async e=>{const t=await this.streamClient.getLocationHint(),n=(0,u.A)((0,u.A)({},e),{},{location:t}),i=await this.streamClient.post("".concat(this.streamClientBasePath,"/join"),n);this.state.updateFromCallResponse(i.call),this.state.setMembers(i.members),this.state.setOwnCapabilities(i.own_capabilities),null!==e&&void 0!==e&&e.ring&&this.ringingSubject.next(!0);return this.reconnectStrategy!==Ss.UNSPECIFIED||!this.ringing||this.isCreatedByMe||await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),i},this.handleSfuSignalClose=(e,t)=>{this.logger("debug","[Reconnect] SFU signal connection closed");const{callingState:n}=this.state;n!==Fa.JOINING&&n!==Fa.RECONNECTING&&n!==Fa.IDLE&&n!==Fa.LEFT&&(e.isLeaving||e.isClosing||this.reconnect(Ss.REJOIN,t).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))},this.reconnect=async(e,t)=>{if(this.state.callingState!==Fa.RECONNECTING&&this.state.callingState!==Fa.MIGRATING&&this.state.callingState!==Fa.RECONNECTING_FAILED)return xa(this.reconnectConcurrencyTag,(async()=>{const n=Date.now();this.reconnectStrategy=e,this.reconnectReason=t;do{if(this.disconnectionTimeoutSeconds>0&&(Date.now()-n)/1e3>this.disconnectionTimeoutSeconds)return this.logger("warn","[Reconnect] Stopping reconnection attempts after reaching disconnection timeout"),void this.state.setCallingState(Fa.RECONNECTING_FAILED);this.reconnectStrategy!==Ss.FAST&&this.reconnectAttempts++;const e=Ss[this.reconnectStrategy];try{var i;switch(await(null===(i=this.networkAvailableTask)||void 0===i?void 0:i.promise),this.logger("info","[Reconnect] Reconnecting with strategy ".concat(Ss[this.reconnectStrategy])),this.reconnectStrategy){case Ss.UNSPECIFIED:case Ss.DISCONNECT:this.logger("debug","[Reconnect] No-op strategy ".concat(e));break;case Ss.FAST:await this.reconnectFast();break;case Ss.REJOIN:await this.reconnectRejoin();break;case Ss.MIGRATE:await this.reconnectMigrate();break;default:zc(this.reconnectStrategy,"Unknown reconnection strategy")}break}catch(r){if(this.state.callingState===Fa.OFFLINE){this.logger("trace","[Reconnect] Can't reconnect while offline, stopping reconnection attempts");break}if(r instanceof os&&r.unrecoverable)return this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",r),void this.state.setCallingState(Fa.RECONNECTING_FAILED);this.logger("warn","[Reconnect] ".concat(e," (").concat(this.reconnectAttempts,") failed. Attempting with REJOIN"),r),await ra(500),this.reconnectStrategy=Ss.REJOIN}}while(this.state.callingState!==Fa.JOINED&&this.state.callingState!==Fa.RECONNECTING_FAILED&&this.state.callingState!==Fa.LEFT);this.logger("info","[Reconnect] Reconnection flow finished")}))},this.reconnectFast=async()=>{var e;const t=Date.now();this.reconnectStrategy=Ss.FAST,this.state.setCallingState(Fa.RECONNECTING),await this.doJoin(this.joinCallData),null===(e=this.sfuStatsReporter)||void 0===e||e.sendReconnectionTime(Ss.FAST,(Date.now()-t)/1e3)},this.reconnectRejoin=async()=>{var e;const t=Date.now();this.reconnectStrategy=Ss.REJOIN,this.state.setCallingState(Fa.RECONNECTING),await this.doJoin(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks(),null===(e=this.sfuStatsReporter)||void 0===e||e.sendReconnectionTime(Ss.REJOIN,(Date.now()-t)/1e3)},this.reconnectMigrate=async()=>{var e;const t=Date.now(),n=this.sfuClient;if(!n)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=Ss.MIGRATE,this.state.setCallingState(Fa.MIGRATING);const i=this.subscriber,r=this.publisher;null===i||void 0===i||i.detachEventHandlers(),null===r||void 0===r||r.detachEventHandlers();const s=el(n.enterMigration());try{const e=n.edgeName;await this.doJoin((0,u.A)((0,u.A)({},this.joinCallData),{},{migrating_from:e}))}finally{var o;null===(o=this.joinCallData)||void 0===o||delete o.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await s(),this.state.setCallingState(Fa.JOINED)}finally{null===i||void 0===i||i.dispose(),null===r||void 0===r||r.dispose(),n.close(cl.NORMAL_CLOSURE,"Migrating away")}null===(e=this.sfuStatsReporter)||void 0===e||e.sendReconnectionTime(Ss.MIGRATE,(Date.now()-t)/1e3)},this.registerReconnectHandlers=()=>{const e=this.on("goAway",(()=>{this.reconnect(Ss.MIGRATE,"goAway").catch((e=>this.logger("warn","[Reconnect] Error reconnecting",e)))})),t=this.on("error",(e=>{const{reconnectStrategy:t,error:n}=e;t!==Ss.UNSPECIFIED&&(t===Ss.DISCONNECT?this.leave({message:"SFU instructed to disconnect"}).catch((e=>{this.logger("warn","Can't leave call after disconnect request",e)})):this.reconnect(t,(null===n||void 0===n?void 0:n.message)||"SFU Error").catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))})),n=this.streamClient.on("network.changed",(e=>{if(this.tracer.trace("network.changed",e),e.online){var t,n,i;this.logger("debug","[Reconnect] Going online"),null===(t=this.sfuClient)||void 0===t||t.close(cl.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),null===(n=this.networkAvailableTask)||void 0===n||n.resolve(),this.networkAvailableTask=void 0,null===(i=this.sfuStatsReporter)||void 0===i||i.start()}else{var r;if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const e=tl();e.promise.then((()=>{let e=Ss.FAST;if(this.lastOfflineTimestamp){(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(e=Ss.REJOIN)}this.reconnect(e,"Going online").catch((e=>{this.logger("warn","[Reconnect] Error reconnecting after going online",e)}))})),this.networkAvailableTask=e,null===(r=this.sfuStatsReporter)||void 0===r||r.stop(),this.state.setCallingState(Fa.OFFLINE)}}));this.leaveCallHooks.add(e).add(t).add(n)},this.restorePublishedTracks=async()=>{for(const e of this.trackPublishOrder){let t;switch(e){case ms.AUDIO:t=this.microphone.state.mediaStream;break;case ms.VIDEO:t=this.camera.state.mediaStream;break;case ms.SCREEN_SHARE:t=this.screenShare.state.mediaStream;break;case ms.SCREEN_SHARE_AUDIO:case ms.UNSPECIFIED:break;default:zc(e,"Unknown track type")}t&&await this.publish(t,e)}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:e}=this.state;e.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async e=>{await this.publish(e,ms.VIDEO)},this.publishAudioStream=async e=>{await this.publish(e,ms.AUDIO)},this.publishScreenShareStream=async e=>{await this.publish(e,ms.SCREEN_SHARE)},this.publish=async(e,t)=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.canPublish(t))throw new Error("No permission to publish ".concat(ms[t]));if(!this.publisher)throw new Error("Publisher is not initialized");const[n]=qc(t)?e.getAudioTracks():e.getVideoTracks();if(!n)throw new Error("There is no ".concat(ms[t]," track in the stream"));if("ended"===n.readyState)throw new Error("Can't publish ended tracks.");wl(this.trackPublishOrder,t),await this.publisher.publish(n,t);const i=[t];if(t===ms.SCREEN_SHARE){const[t]=e.getAudioTracks();t&&(wl(this.trackPublishOrder,ms.SCREEN_SHARE_AUDIO),await this.publisher.publish(t,ms.SCREEN_SHARE_AUDIO),i.push(ms.SCREEN_SHARE_AUDIO))}var r;"video"===n.kind&&(null===(r=this.sfuStatsReporter)||void 0===r||r.scheduleOne(3e3));await this.updateLocalStreamState(e,...i)},this.stopPublish=async function(){if(t.sfuClient&&t.publisher){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.publisher.stopTracks(...n),await t.updateLocalStreamState(void 0,...n)}},this.updateLocalStreamState=async function(e){if(!t.sfuClient||!t.sfuClient.sessionId)return;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];await t.notifyTrackMuteState(!e,...i);const{sessionId:s}=t.sfuClient;for(const o of i){const n=Wc(o);n&&t.state.updateParticipant(s,(t=>({publishedTracks:e?wl([...t.publishedTracks],o):t.publishedTracks.filter((e=>e!==o)),[n]:e})))}},this.updatePublishOptions=e=>{this.logger("warn","[call.updatePublishOptions]: You are manually overriding the publish options for this call. This is not recommended, and it can cause call stability/compatibility issues. Use with caution."),this.state.callingState===Fa.JOINED&&this.logger("warn","Updating publish options after joining the call does not have an effect"),this.clientPublishOptions=(0,u.A)((0,u.A)({},this.clientPublishOptions),e)},this.notifyNoiseCancellationStarting=async()=>{var e;return null===(e=this.sfuClient)||void 0===e?void 0:e.startNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify start of noise cancellation",e)}))},this.notifyNoiseCancellationStopped=async()=>{var e;return null===(e=this.sfuClient)||void 0===e?void 0:e.stopNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify stop of noise cancellation",e)}))},this.notifyTrackMuteState=async function(e){if(t.sfuClient){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];await t.sfuClient.updateMuteStates(i.map((t=>({trackType:t,muted:e}))))}},this.startReportingStatsFor=e=>{var t;return null===(t=this.statsReporter)||void 0===t?void 0:t.startReportingStatsFor(e)},this.stopReportingStatsFor=e=>{var t;return null===(t=this.statsReporter)||void 0===t?void 0:t.stopReportingStatsFor(e)},this.resetReaction=e=>{this.state.updateParticipant(e,{reaction:void 0})},this.setSortParticipantsBy=e=>this.state.setSortParticipantsBy(e),this.sendReaction=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/reaction"),e),this.blockUser=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/block"),{user_id:e}),this.unblockUser=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/unblock"),{user_id:e}),this.muteSelf=e=>{const t=this.currentUserId;if(t)return this.muteUser(t,e)},this.muteOthers=e=>{const t=(e=>{switch(e){case"audio":return ms.AUDIO;case"video":return ms.VIDEO;case"screenshare":return ms.SCREEN_SHARE;case"screenshare_audio":return ms.SCREEN_SHARE_AUDIO;default:zc(e,"Unknown mute type")}})(e);if(!t)return;const n=[];for(const i of this.state.remoteParticipants)i.publishedTracks.includes(t)&&n.push(i.userId);return n.length>0?this.muteUser(n,e):void 0},this.muteUser=(e,t)=>this.streamClient.post("".concat(this.streamClientBasePath,"/mute_users"),{user_ids:Array.isArray(e)?e:[e],[t]:!0}),this.muteAllUsers=e=>this.streamClient.post("".concat(this.streamClientBasePath,"/mute_users"),{mute_all_users:!0,[e]:!0}),this.startRecording=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/start_recording"),e||{}),this.stopRecording=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/stop_recording"),{}),this.startTranscription=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/start_transcription"),e),this.stopTranscription=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/stop_transcription")),this.startClosedCaptions=async e=>{const t=this.state.setCaptioning(!0);try{return await this.streamClient.post("".concat(this.streamClientBasePath,"/start_closed_captions"),e)}catch(n){throw t.rollback(),n}},this.stopClosedCaptions=async e=>{const t=this.state.setCaptioning(!1);try{return await this.streamClient.post("".concat(this.streamClientBasePath,"/stop_closed_captions"),e)}catch(n){throw t.rollback(),n}},this.updateClosedCaptionSettings=e=>{this.state.updateClosedCaptionSettings(e)},this.requestPermissions=async e=>{const{permissions:t}=e;if(!t.every((e=>this.permissionsContext.canRequest(e))))throw new Error("You are not allowed to request permissions: ".concat(t.join(", ")));return this.streamClient.post("".concat(this.streamClientBasePath,"/request_permission"),e)},this.grantPermissions=async(e,t)=>this.updateUserPermissions({user_id:e,grant_permissions:t}),this.revokePermissions=async(e,t)=>this.updateUserPermissions({user_id:e,revoke_permissions:t}),this.updateUserPermissions=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/user_permissions"),e),this.goLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return t.streamClient.post("".concat(t.streamClientBasePath,"/go_live"),e,n)},this.stopLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post("".concat(t.streamClientBasePath,"/stop_live"),e)},this.startHLS=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/start_broadcasting"),{}),this.stopHLS=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/stop_broadcasting"),{}),this.startRTMPBroadcasts=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/rtmp_broadcasts"),e),this.stopAllRTMPBroadcasts=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/rtmp_broadcasts/stop")),this.stopRTMPBroadcast=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/rtmp_broadcasts/").concat(e,"/stop")),this.startFrameRecording=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/start_frame_recording"),e),this.stopFrameRecording=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/stop_frame_recording")),this.update=async e=>{const t=await this.streamClient.patch("".concat(this.streamClientBasePath),e),{call:n,members:i,own_capabilities:r}=t;return this.state.updateFromCallResponse(n),this.state.setMembers(i),this.state.setOwnCapabilities(r),t},this.endCall=async()=>this.streamClient.post("".concat(this.streamClientBasePath,"/mark_ended")),this.pin=e=>{this.state.updateParticipant(e,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=e=>{this.state.updateParticipant(e,{pin:void 0})},this.pinForEveryone=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/pin"),e),this.unpinForEveryone=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/unpin"),e),this.queryMembers=e=>this.streamClient.post("/call/members",(0,u.A)((0,u.A)({},e||{}),{},{id:this.id,type:this.type})),this.updateCallMembers=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/members"),e),this.scheduleAutoDrop=()=>{this.cancelAutoDrop();const e=this.state.settings;if(!e)return;if(this.state.callingState!==Fa.RINGING)return;const t=this.isCreatedByMe?e.ring.auto_cancel_timeout_ms:e.ring.incoming_call_timeout_ms;t<=0||(this.dropTimeout=setTimeout((()=>{this.state.callingState===Fa.RINGING&&this.leave({reject:!0,reason:"timeout",message:"ringing timeout - ".concat(this.isCreatedByMe?"no one accepted":"user didn't interact with incoming call screen")}).catch((e=>{this.logger("error","Failed to drop call",e)}))}),t))},this.cancelAutoDrop=()=>{clearTimeout(this.dropTimeout),this.dropTimeout=void 0},this.queryRecordings=async e=>{let t=this.streamClientBasePath;return e&&(t="".concat(t,"/").concat(e)),this.streamClient.get("".concat(t,"/recordings"))},this.queryTranscriptions=async()=>this.streamClient.get("".concat(this.streamClientBasePath,"/transcriptions")),this.getCallStats=async e=>{const t="".concat(this.streamClientBasePath,"/stats/").concat(e);return this.streamClient.get(t)},this.getCallReport=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n="".concat(t.streamClientBasePath,"/report"),i=""!==e?{session_id:e}:{};return t.streamClient.get(n,i)},this.submitFeedback=async function(e){var n;let{reason:i,custom:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(e=>{const{sdk:t}=e,n=(0,l.A)(e,Yr),i=fc(t),r=mc(t);return(0,u.A)({sdkName:i,sdkVersion:r},n)})(await Oc()),{sdkName:o,sdkVersion:a}=s,c=(0,l.A)(s,ts);return t.streamClient.post("".concat(t.streamClientBasePath,"/feedback"),{rating:e,reason:i,user_session_id:null===(n=t.sfuClient)||void 0===n?void 0:n.sessionId,sdk:o,sdk_version:a,custom:(0,u.A)((0,u.A)({},r),{},{"x-stream-platform-data":c})})},this.sendCustomEvent=async e=>this.streamClient.post("".concat(this.streamClientBasePath,"/event"),{custom:e}),this.applyDeviceConfig=async(e,t)=>{await this.camera.apply(e.video,t).catch((e=>{this.logger("warn","Camera init failed",e)})),await this.microphone.apply(e.audio,t).catch((e=>{this.logger("warn","Mic init failed",e)}))},this.trackElementVisibility=(e,t,n)=>this.dynascaleManager.trackElementVisibility(e,t,n),this.setViewport=e=>this.dynascaleManager.setViewport(e),this.bindVideoElement=(e,t,n)=>{const i=this.dynascaleManager.bindVideoElement(e,t,n);if(i)return this.leaveCallHooks.add(i),()=>{this.leaveCallHooks.delete(i),i()}},this.bindAudioElement=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audioTrack";const r=t.dynascaleManager.bindAudioElement(e,n,i);if(r)return t.leaveCallHooks.add(r),()=>{t.leaveCallHooks.delete(r),r()}},this.bindCallThumbnailElement=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=()=>{e.src=n.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},r=Ua(t.state.thumbnails$,(t=>{if(!t)return;e.addEventListener("error",i);const n=new URL(t.image_url);n.searchParams.set("w",String(e.clientWidth)),n.searchParams.set("h",String(e.clientHeight)),e.src=n.toString()}));return()=>{r(),e.removeEventListener("error",i)}},this.setPreferredIncomingVideoResolution=(e,t)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?{enabled:!0,dimension:e}:void 0,t),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=e=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.setDisconnectionTimeout=e=>{this.disconnectionTimeoutSeconds=e},this.type=n,this.id=i,this.cid="".concat(n,":").concat(i),this.ringingSubject=new br(d),this.watching=h,this.streamClient=r,this.clientStore=c,this.streamClientBasePath="/call/".concat(this.type,"/").concat(this.id),this.logger=Sa(["Call"]);const p=Ll.get(n),f=a||p.options.sortParticipantsBy;f&&this.state.setSortParticipantsBy(f),this.state.setMembers(s||[]),this.state.setOwnCapabilities(o||[]),this.state.setCallingState(d?Fa.RINGING:Fa.IDLE),this.camera=new su(this),this.microphone=new du(this),this.speaker=new mu(this),this.screenShare=new pu(this),this.dynascaleManager=new Nl(this.state,this.speaker)}get ringing(){return Da(this.ringingSubject)}get currentUserId(){var e;return null===(e=this.clientStore.connectedUser)||void 0===e?void 0:e.id}get isCreatedByMe(){var e;return(null===(e=this.state.createdBy)||void 0===e?void 0:e.id)===this.currentUserId}}class vu{constructor(e){var t=this;this._log=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";t.client.logger(i,"connection:".concat(e),n)},this.setClient=e=>{this.client=e},this._buildUrl=()=>{const e=new URLSearchParams;return e.set("api_key",this.client.key),e.set("stream-auth-type",this.client.getAuthType()),e.set("X-Stream-Client",this.client.getUserAgent()),"".concat(this.client.wsBaseURL,"/connect?").concat(e.toString())},this.onlineStatusChanged=e=>{"offline"===e.type?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):"online"===e.type&&(this._log("onlineStatusChanged() - Status changing to online. isHealthy: ".concat(this.isHealthy)),this.isHealthy||this._reconnect({interval:10}))},this.onopen=e=>{var t;if(this.wsID!==e)return;const n=this.client.user;if(!n)return void this.client.logger("error","User not set, can't connect to WS");const i=this.client._getToken();if(!i)return void this.client.logger("error","Token not set, can't connect authenticate");const r=JSON.stringify({token:i,user_details:{id:n.id,name:n.name,image:n.image,custom:n.custom}});this._log("onopen() - Sending auth message ".concat(r),{},"trace"),null===(t=this.ws)||void 0===t||t.send(r),this._log("onopen() - onopen callback",{wsID:e})},this.onmessage=(e,t)=>{if(this.wsID!==e)return;this._log("onmessage() - onmessage callback",{event:t,wsID:e});const n="string"===typeof t.data?JSON.parse(t.data):null;var i,r;if(!this.isConnectionOpenResolved&&n&&"connection.error"===n.type&&(this.isConnectionOpenResolved=!0,n.error))return void(null===(i=this.rejectConnectionOpen)||void 0===i||i.call(this,this._errorFromWSEvent(n,!1)));(this.lastEvent=new Date,!n||"health.check"!==n.type&&"connection.ok"!==n.type||this.scheduleNextPing(),n&&"connection.ok"===n.type)&&(null===(r=this.resolveConnectionOpen)||void 0===r||r.call(this,n),this._setHealth(!0));if(n&&"connection.error"===n.type&&n.error){const{code:e}=n.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,e!==oa||this.client.tokenManager.isStatic()||(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}n&&(n.received_at=new Date,this.client.dispatchEvent(n)),this.scheduleConnectionCheck()},this.onclose=(e,t)=>{if(this.wsID===e)if(this._log("onclose() - onclose callback - "+t.code,{event:t,wsID:e}),t.code===aa){var n;const e=new Error("WS connection reject with error ".concat(t.reason));e.reason=t.reason,e.code=t.code,e.wasClean=t.wasClean,e.target=t.target,null===(n=this.rejectConnectionOpen)||void 0===n||n.call(this,e),this._log("onclose() - WS connection reject with error ".concat(t.reason),{event:t})}else{var i;this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,null===(i=this.rejectConnectionOpen)||void 0===i||i.call(this,this._errorFromWSEvent(t)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:t}),this._reconnect()}},this.onerror=(e,t)=>{var n;this.wsID===e&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,null===(n=this.rejectConnectionOpen)||void 0===n||n.call(this,new Error("WebSocket error: ".concat(t))),this._log("onerror() - WS connection resulted into error",{event:t}),this._reconnect())},this._setHealth=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==t.isHealthy&&(t.isHealthy=e,t.isHealthy||n?t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy}):setTimeout((()=>{t.isHealthy||t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy})}),5e3))},this._errorFromWSEvent=function(e){let n,i,r,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(function(e){return void 0!==e.code}(e))n=e.code,r=e.reason,i=0;else{const{error:t}=e;n=t.code,r=t.message,i=t.StatusCode}const o="WS failed with code: ".concat(n," and reason: ").concat(r);t._log(o,{event:e},"warn");const a=new Error(o);return a.code=n,a.StatusCode=i,a.isWSFailure=s,a},this._setupConnectionPromise=()=>{this.isConnectionOpenResolved=!1,this.connectionOpenSafe=el(new Promise(((e,t)=>{this.resolveConnectionOpen=e,this.rejectConnectionOpen=t})))},this.scheduleNextPing=()=>{const e=al();this.healthCheckTimeoutRef&&e.clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=e.setTimeout((()=>{const e=[{type:"health.check",client_id:this.client.clientID}];try{var t;null===(t=this.ws)||void 0===t||t.send(JSON.stringify(e))}catch(n){}}),this.pingInterval)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout((()=>{const e=new Date;this.lastEvent&&e.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())}),this.connectionCheckTimeout)},this.client=e,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isConnectionOpenResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,ha(this.onlineStatusChanged)}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const e=await this._connect();this.consecutiveFailures=0,this._log("connect() - Established ws connection with healthcheck: ".concat(e))}catch(t){if(this.isHealthy=!1,this.consecutiveFailures+=1,t.code!==oa||this.client.tokenManager.isStatic()){if(!t.isWSFailure)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}))}else this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0})}return await this._waitForHealthy(e)}async _waitForHealthy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;return Promise.race([(async()=>{for(let n=0;n<=e;n+=50)try{return await this.connectionOpen}catch(t){if(n===e)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}));await ra(50)}})(),(async()=>{throw await ra(e),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(e){let t;this._log("disconnect() - Closing the websocket connection for wsID ".concat(this.wsID)),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&al().clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),pa(this.onlineStatusChanged),this.isHealthy=!1;const{ws:n}=this;return n&&n.close&&n.readyState===n.OPEN?(t=new Promise((t=>{const i=e=>{this._log("disconnect() - resolving isClosedPromise ".concat(e?"with":"without"," close frame"),{event:e}),t()};n.onclose=i,setTimeout(i,null!=e?e:1e3)})),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),n.close(aa,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),t=Promise.resolve()),delete this.ws,t}async _connect(){if(this.isConnecting)return;this.isConnecting=!0;let e=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),e=!0}catch(o){}try{var t;e||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this.client.isConnectionIsPromisePending||this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const r=this._buildUrl();this._log("_connect() - Connecting to ".concat(r));const s=null!==(t=this.client.options.WebSocketImpl)&&void 0!==t?t:WebSocket;this.ws=new s(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const o=await this.connectionOpen;var n,i;if(this.isConnecting=!1,o)return this.connectionID=o.connection_id,null===(n=(i=this.client).resolveConnectionId)||void 0===n||n.call(i,this.connectionID),o}catch(a){var r,s;throw this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",a),null===(r=(s=this.client).rejectConnectionId)||void 0===r||r.call(s,a),a}}async _reconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy)return void this._log("_reconnect() - Abort (1) since already connecting or healthy");let t=e.interval;if(t||(t=ca(this.consecutiveFailures)),await ra(t),this.isConnecting||this.isHealthy)this._log("_reconnect() - Abort (2) since already connecting or healthy");else if(this.isDisconnected)this._log("_reconnect() - Abort (3) since disconnect() is called");else{this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),e.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===oa&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});n.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}}_destroyCurrentWSConnection(){this.wsID+=1;try{var e;null===this||void 0===this||null===(e=this.ws)||void 0===e||e.close()}catch(t){}}get connectionOpen(){var e;return null===(e=this.connectionOpenSafe)||void 0===e?void 0:e.call(this)}}const bu=e=>{const t={},n=String.fromCharCode,i=e.length;let r,s,o,a,c=0,l=0,u="";for(r=0;r<64;r++)t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r)]=r;for(o=0;o<i;o++)for(s=t[e.charAt(o)],c=(c<<6)+s,l+=6;l>=8;)((a=c>>>(l-=8)&255)||o<i-2)&&(u+=n(a));return u};class yu{constructor(e){this.loadTokenPromise=null,this.type="static",this.setTokenOrProvider=async(e,t,n)=>{this.user=t,this.isAnonymous=n,this.validateToken(e),sa(e)&&(this.tokenProvider=e,this.type="provider"),"string"===typeof e&&(this.token=e,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=e=>{if(!this.user||!this.isAnonymous||e){if(!this.secret&&!e)throw new Error("User token can not be empty");if("string"!==typeof e&&!sa(e))throw new Error("User token should either be a string or a function");if("string"===typeof e){if(this.isAnonymous&&""===e)return;const t=function(e){const t=e.split(".");if(3!==t.length)return"";const n=t[1],i=bu(n);return JSON.parse(i).user_id}(e);if(null!=e&&(null==t||""===t||!this.isAnonymous&&t!==this.user.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise((async(e,t)=>{if("static"===this.type)return e(this.token);if(this.tokenProvider&&"string"!==typeof this.tokenProvider){try{const e=await this.tokenProvider();this.validateToken(e),this.token=e}catch(n){return t(new Error("Call to tokenProvider failed with message: ".concat(n)))}e(this.token)}})),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>"static"===this.type,this.secret=e}}const wu=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://hint.stream-io-video.com/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const i=Sa(["location-hint"]);let r=0,s="ERR";do{const n=new AbortController,r=setTimeout((()=>n.abort()),t);try{const t=(await fetch(e,{method:"HEAD",signal:n.signal})).headers.get("x-amz-cf-pop")||"ERR";i("debug","Location header: ".concat(t)),s=t.substring(0,3)}catch(o){i("warn","Failed to get location hint from ".concat(e),o),s="ERR"}finally{clearTimeout(r)}}while("ERR"===s&&++r<n);return s};class Su{constructor(e,t){var n,i,r=this;this.listeners={},this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=e=>{this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(e,t)=>{const n=await this.locationHint;return n&&"ERR"!==n?n:(this.locationHint=wu(null!==e&&void 0!==e?e:this.options.locationHintUrl,null!==t&&void 0!==t?t:this.options.locationHintTimeout),this.locationHint)},this._getConnectionID=()=>{var e;return null===(e=this.wsConnection)||void 0===e?void 0:e.connectionID},this._hasConnectionID=()=>Boolean(this._getConnectionID()),this.connectUser=async(e,t)=>{if(!e.id)throw new Error('The "id" field on the user is missing');if(this.userID===e.id&&this.connectUserTask)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.connectUserTask;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");!this.secret&&!this.node||this.options.allowServerSideConnect||this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=e.id,this.anonymous=!1,await this.tokenManager.setTokenOrProvider(t,e,!1),this._setUser(e),this.connectUserTask=this.openConnection();try{return ha(this.updateNetworkConnectionStatus),await this.connectUserTask}catch(n){throw this.persistUserOnConnectionFailure?await this.closeConnection():await this.disconnectUser(),n}},this._setUser=e=>{this.user=e,this.userID=e.id,this._user=(0,u.A)({},e)},this.closeConnection=async e=>{var t;await(null===(t=this.wsConnection)||void 0===t?void 0:t.disconnect(e))},this.openConnection=async()=>{var e,t,n;if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");const i=null===(e=this.wsPromiseSafe)||void 0===e?void 0:e.call(this);if(null!==(t=this.wsConnection)&&void 0!==t&&t.isConnecting&&i)return this.logger("info","client:openConnection() - connection already in progress"),await i;if(null!==(n=this.wsConnection)&&void 0!==n&&n.isHealthy&&this._hasConnectionID())return void this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists");this._setupConnectionIdPromise(),this.clientID="".concat(this.userID,"--").concat(ua());const r=this.connect();return this.wsPromiseSafe=el(r),await r},this.disconnectUser=async e=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(e),pa(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromiseSafe=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async e=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:e},{publicEndpoint:!0});const t=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally((()=>this.guestUserCreatePromise=void 0)),this.connectUser(t.user,t.access_token)},this.connectAnonymousUser=async(e,t)=>{var n;ha(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,await this.tokenManager.setTokenOrProvider(t,e,!0),this._setUser(e),null===(n=this.resolveConnectionId)||void 0===n||n.call(this)},this.on=(e,t)=>{var n;return this.listeners[e]||(this.listeners[e]=[]),this.logger("debug","Adding listener for ".concat(e," event")),null===(n=this.listeners[e])||void 0===n||n.push(t),()=>{this.off(e,t)}},this.off=(e,t)=>{var n;this.listeners[e]||(this.listeners[e]=[]),this.logger("debug","Removing listener for ".concat(e," event")),this.listeners[e]=null===(n=this.listeners[e])||void 0===n?void 0:n.filter((e=>e!==t))},this._setupConnectionIdPromise=()=>{this.connectionIdPromiseSafe=el(new Promise(((e,t)=>{this.resolveConnectionId=e,this.rejectConnectionId=t})))},this._logApiRequest=(e,t,n,i)=>{"trace"===wa()&&this.logger("trace","client: ".concat(e," - Request - ").concat(t),{payload:n,config:i})},this._logApiResponse=(e,t,n)=>{"trace"===wa()&&this.logger("trace","client:".concat(e," - Response - url: ").concat(t," > status ").concat(n.status),{response:n})},this._logApiError=(e,t,n)=>{this.logger("error","client:".concat(e," - Error - url: ").concat(t),{url:t,error:n})},this.doAxiosRequest=async function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!i.publicEndpoint){await Promise.all([r.tokenManager.tokenReady(),r.guestUserCreatePromise]);try{await r.connectionIdPromise}catch(c){var s;await(null===(s=r.wsConnection)||void 0===s?void 0:s._waitForHealthy()),await r.connectionIdPromise}}const o=r._enrichAxiosOptions(i);try{let i;switch(r._logApiRequest(e,t,n,o),e){case"get":i=await r.axiosInstance.get(t,o);break;case"delete":i=await r.axiosInstance.delete(t,o);break;case"post":i=await r.axiosInstance.post(t,n,o);break;case"put":i=await r.axiosInstance.put(t,n,o);break;case"patch":i=await r.axiosInstance.patch(t,n,o);break;case"options":i=await r.axiosInstance.options(t,o);break;default:throw new Error("Invalid request type")}return r._logApiResponse(e,t,i),r.consecutiveFailures=0,r.handleResponse(i)}catch(l){var a;if(l.client_request_id=null===(a=o.headers)||void 0===a?void 0:a["x-client-request-id"],r.consecutiveFailures+=1,l.response)return r._logApiError(e,t,l.response),l.response.data.code!==oa||r.tokenManager.isStatic()?r.handleResponse(l.response):(r.consecutiveFailures>1&&await ra(ca(r.consecutiveFailures)),await r.tokenManager.loadToken(),await r.doAxiosRequest(e,t,n,i));throw r._logApiError(e,t,l),l}},this.get=(e,t)=>this.doAxiosRequest("get",e,null,{params:t}),this.put=(e,t,n)=>this.doAxiosRequest("put",e,t,{params:n}),this.post=(e,t,n)=>this.doAxiosRequest("post",e,t,{params:n}),this.patch=(e,t,n)=>this.doAxiosRequest("patch",e,t,{params:n}),this.delete=(e,t)=>this.doAxiosRequest("delete",e,null,{params:t}),this.errorFromResponse=e=>{var t,n;const{data:i,status:r}=e;return new os({message:"Stream error code ".concat(i.code,": ").concat(i.message),code:null!==(t=i.code)&&void 0!==t?t:null,unrecoverable:null!==(n=i.unrecoverable)&&void 0!==n?n:null,response:e,status:r})},this.handleResponse=e=>{const t=e.data;if(function(e){return!e.status||e.status<200||300<=e.status}(e))throw this.errorFromResponse(e);return t},this.dispatchEvent=e=>{if(this.logger("debug","Dispatching event: ".concat(e.type),e),this.listeners){for(const t of this.listeners.all||[])t(e);for(const t of this.listeners[e.type]||[])t(e)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");return this.wsConnection=new vu(this),this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.defaultWSTimeout)},this.getUserAgent=()=>{if(!this.cachedUserAgent){const{clientAppIdentifier:e={}}=this.options,{sdkName:t="js",sdkVersion:n="1.22.2"}=e,i=(0,l.A)(e,ns);this.cachedUserAgent=["stream-video-".concat(t,"-v").concat(n),...Object.entries(i).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})),"client_bundle=".concat("browser-esm")].join("|")}return this.cachedUserAgent},this._enrichAxiosOptions=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}};const n=t.publicEndpoint&&!r.user?void 0:r._getToken(),i=n?{Authorization:n}:void 0;return null!==(e=t.headers)&&void 0!==e&&e["x-client-request-id"]||(t.headers=(0,u.A)((0,u.A)({},t.headers),{},{"x-client-request-id":ua()})),(0,u.A)((0,u.A)({params:(0,u.A)({user_id:r.userID,connection_id:r._getConnectionID(),api_key:r.key},t.params),headers:(0,u.A)((0,u.A)({},i),{},{"stream-auth-type":t.publicEndpoint&&!r.user?"anonymous":r.getAuthType(),"X-Stream-Client":r.getUserAgent()},t.headers)},t.config),r.options.axiosRequestConfig)},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this.updateNetworkConnectionStatus=e=>{"offline"===e.type?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):"online"===e.type&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=e,this.secret=null===t||void 0===t?void 0:t.secret;const s=t||{browser:"undefined"!==typeof window};this.browser=s.browser||"undefined"!==typeof window,this.node=!this.browser,this.browser&&(this.locationHint=wu(null===t||void 0===t?void 0:t.locationHintUrl,null===t||void 0===t?void 0:t.locationHintTimeout,null===t||void 0===t?void 0:t.locationHintMaxAttempts)),this.options=(0,u.A)({timeout:5e3,withCredentials:!1},s),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new null.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),this.axiosInstance=Ui.create((0,u.A)((0,u.A)({},this.options),{},{baseURL:this.baseURL})),this.wsConnection=null,this.wsPromiseSafe=null,this.connectUserTask=null,this.anonymous=!1,this.persistUserOnConnectionFailure=null===(n=this.options)||void 0===n?void 0:n.persistUserOnConnectionFailure,this.tokenManager=new yu(this.secret),this.consecutiveFailures=0,this.defaultWSTimeout=null!==(i=this.options.defaultWsTimeout)&&void 0!==i?i:15e3,this.logger=sa(s.logger)?s.logger:()=>null}get connectionIdPromise(){var e;return null===(e=this.connectionIdPromiseSafe)||void 0===e?void 0:e.call(this)}get isConnectionIsPromisePending(){var e,t;return null!==(e=null===(t=this.connectionIdPromiseSafe)||void 0===t?void 0:t.checkPending())&&void 0!==e&&e}get wsPromise(){var e;return null===(e=this.wsPromiseSafe)||void 0===e?void 0:e.call(this)}}const Cu=(e,t)=>"".concat(e,"/").concat(t.id),ku=(e,t)=>{const n=(e=>{const t=(null===e||void 0===e?void 0:e.clientAppIdentifier)||{},n=Pc();return n&&(t.sdkName=vs[n.type].toLowerCase(),t.sdkVersion="".concat(n.major,".").concat(n.minor,".").concat(n.patch)),t})(t),i=Sa(["coordinator"]);return new Su(e,(0,u.A)((0,u.A)({persistUserOnConnectionFailure:!0},t),{},{clientAppIdentifier:n,logger:i}))};class Tu{constructor(e,t){var n=this;this.effectsRegistered=!1,this.eventHandlersToUnregister=[],this.connectionConcurrencyTag=Symbol("connectionConcurrencyTag"),this.registerClientInstance=(e,t)=>{const n=Cu(e,t);Tu._instances.has(n)&&this.logger("warn","A StreamVideoClient already exists for ".concat(t.id,"; Prefer using getOrCreateInstance method")),Tu._instances.set(n,this)},this.registerEffects=()=>{this.effectsRegistered||(this.eventHandlersToUnregister.push(this.on("connection.changed",(e=>{if(!e.online)return;const t=this.writeableStateStore.calls.filter((e=>e.watching)).map((e=>e.cid));t.length<=0||(this.logger("info","Rewatching calls ".concat(t.join(", "))),this.queryCalls({watch:!0,filter_conditions:{cid:{$in:t}},sort:[{field:"cid",direction:1}]}).catch((e=>{this.logger("error","Failed to re-watch calls",e)})))}))),this.eventHandlersToUnregister.push(this.on("call.created",(e=>{var t;const{call:n,members:i}=e;if((null===(t=this.state.connectedUser)||void 0===t?void 0:t.id)===n.created_by.id)return void this.logger("warn","Received `call.created` sent by the current user");this.logger("info","New call created and registered: ".concat(n.cid));const r=new gu({streamClient:this.streamClient,type:n.type,id:n.id,members:i,clientStore:this.writeableStateStore});r.state.updateFromCallResponse(n),this.writeableStateStore.registerCall(r)}))),this.eventHandlersToUnregister.push(this.on("call.ring",(async e=>{var t;const{call:n,members:i}=e;if((null===(t=this.state.connectedUser)||void 0===t?void 0:t.id)===n.created_by.id)return void this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");const r=this.writeableStateStore.findCall(n.type,n.id);if(r)await r.updateFromRingingEvent(e);else{const e=new gu({streamClient:this.streamClient,type:n.type,id:n.id,members:i,clientStore:this.writeableStateStore,ringing:!0});await e.get()}}))),this.effectsRegistered=!0)},this.connectUser=async(e,t)=>{if("anonymous"===e.type)return e.id="!anon",this.connectAnonymousUser(e,t);const n=await xa(this.connectionConcurrencyTag,(async()=>{const n=this.streamClient,{onConnectUserError:i,persistUserOnConnectionFailure:r}=n.options;let{maxConnectUserRetries:s=5}=n.options;s=Math.max(s,1);const o=[];for(let c=0;c<s;c++)try{return this.logger("trace","Connecting user (".concat(c,")"),e),"guest"===e.type?await n.connectGuestUser(e):await n.connectUser(e,t)}catch(a){if(this.logger("warn","Failed to connect a user (".concat(c,")"),a),o.push(a),c===s-1)throw null===i||void 0===i||i(a,o),a;r&&await n.disconnectUser(),await ra(ca(c))}}));return null!==n&&void 0!==n&&n.me&&this.writeableStateStore.setConnectedUser(n.me),this.registerEffects(),n},this.disconnectUser=async e=>{await xa(this.connectionConcurrencyTag,(async()=>{const{user:t,key:n}=this.streamClient;t&&(await this.streamClient.disconnectUser(e),t.id&&Tu._instances.delete(Cu(n,t)),this.eventHandlersToUnregister.forEach((e=>e())),this.eventHandlersToUnregister=[],this.effectsRegistered=!1,this.writeableStateStore.setConnectedUser(void 0))}))},this.on=(e,t)=>this.streamClient.on(e,t),this.off=(e,t)=>this.streamClient.off(e,t),this.call=(e,t)=>new gu({streamClient:this.streamClient,id:t,type:e,clientStore:this.writeableStateStore}),this.createGuestUser=async e=>this.streamClient.doAxiosRequest("post","/guest",e,{publicEndpoint:!0}),this.queryCalls=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await n.streamClient.post("/calls",e),i=[];for(const r of t.calls){const t=new gu({streamClient:n.streamClient,id:r.call.id,type:r.call.type,members:r.members,ownCapabilities:r.own_capabilities,watching:e.watch,clientStore:n.writeableStateStore});t.state.updateFromCallResponse(r.call),await t.applyDeviceConfig(r.call.settings,!1),e.watch&&(await t.setup(),n.writeableStateStore.registerCall(t)),i.push(t)}return(0,u.A)((0,u.A)({},t),{},{calls:i})},this.queryCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/call/stats",e)},this.queryAggregateCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/stats",e)},this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(e,t,n,i,r)=>await this.streamClient.post("/devices",(0,u.A)((0,u.A)({id:e,push_provider:t,voip_token:r},null!=i?{user_id:i}:{}),null!=n?{push_provider_name:n}:{})),this.addVoipDevice=async(e,t,n,i)=>await this.addDevice(e,t,n,i,!0),this.getDevices=async e=>await this.streamClient.get("/devices",e?{user_id:e}:{}),this.removeDevice=async(e,t)=>await this.streamClient.delete("/devices",(0,u.A)({id:e},t?{user_id:t}:{})),this.onRingingCall=async e=>{let t=this.state.calls.find((t=>t.cid===e&&t.ringing));if(!t){const[n,i]=e.split(":");t=new gu({streamClient:this.streamClient,type:n,id:i,clientStore:this.writeableStateStore,ringing:!0}),await t.get()}return t},this.connectAnonymousUser=async(e,t)=>xa(this.connectionConcurrencyTag,(()=>this.streamClient.connectAnonymousUser(e,t)));const i="string"===typeof e?e:e.apiKey,r="string"===typeof e?t:e.options;null!==r&&void 0!==r&&r.enableTimerWorker&&(ol=!0);const s=(null===r||void 0===r?void 0:r.logger)||ba;var o,a;if(o=s,a=(null===r||void 0===r?void 0:r.logLevel)||"warn",ga=o,a&&ya(a),this.logger=Sa(["client"]),this.streamClient=ku(i,r),this.writeableStateStore=new Ba,this.readOnlyStateStore=new Ha(this.writeableStateStore),"string"!==typeof e&&e.user){const t=e.user;"anonymous"===t.type&&(t.id="!anon"),t.id&&this.registerClientInstance(i,t);const n=(e=>{const{token:t,tokenProvider:n}=e;if(t&&n){let e=!1;return async function(){return e?n():(e=!0,t)}}return t||n})(e);this.connectUser(t,n).catch((e=>{this.logger("error","Failed to connect",e)}))}}static getOrCreateInstance(e){const{apiKey:t,user:n,token:i,tokenProvider:r}=e;if(!n.id&&"anonymous"!==n.type)throw new Error("user.id is required for a non-anonymous user");if(!i&&!r&&"anonymous"!==n.type&&"guest"!==n.type)throw new Error("tokenProvider or token is required for a authenticated users");return Tu._instances.get(Cu(t,n))||new Tu(e)}get state(){return this.readOnlyStateStore}}Tu._instances=new Map},7542:(e,t,n)=>{var i=n(3992),r=/%[sdv%]/g,s=function(e){var t=1,n=arguments,i=n.length;return e.replace(r,(function(e){if(t>=i)return e;var r=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}}))},o=function(e,t,n){var i=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var r=0;r<t.names.length;r+=1){var o=t.names[r];t.name?i.push(n[t.name][o]):i.push(n[t.names[r]])}else i.push(n[t.name]);return s.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||a,r=t.innerOrder||c,s=[];return n.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?s.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){s.push(o(t,n,e))}))}))})),e.media.forEach((function(e){s.push(o("m",i.m[0],e)),r.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?s.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){s.push(o(t,n,e))}))}))}))})),s.join("\r\n")+"\r\n"}},7565:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report")},7917:(e,t,n)=>{"use strict";n.d(t,{Ms:()=>v,vU:()=>p});var i=n(7827),r=n(1732),s=n(2047),o=n(18),a=n(3414);function c(){}var l=u("C",void 0,void 0);function u(e,t,n){return{kind:e,value:t,error:n}}var d=n(6950),h=n(6634),p=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,s.Uv)(t)&&t.add(n)):n.destination=w,n}return(0,i.C6)(t,e),t.create=function(e,t,n){return new v(e,t,n)},t.prototype.next=function(e){this.isStopped?y(function(e){return u("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?y(u("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?y(l,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(s.yU),f=Function.prototype.bind;function m(e,t){return f.call(e,t)}var g=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){b(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){b(n)}else b(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){b(t)}},e}(),v=function(e){function t(t,n,i){var s,a,c=e.call(this)||this;(0,r.T)(t)||!t?s={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==i&&void 0!==i?i:void 0}:c&&o.$.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},s={next:t.next&&m(t.next,a),error:t.error&&m(t.error,a),complete:t.complete&&m(t.complete,a)}):s=t;return c.destination=new g(s),c}return(0,i.C6)(t,e),t}(p);function b(e){o.$.useDeprecatedSynchronousErrorHandling?(0,h.l)(e):(0,a.m)(e)}function y(e,t){var n=o.$.onStoppedNotification;n&&d.f.setTimeout((function(){return n(e,t)}))}var w={closed:!0,next:c,error:function(e){throw e},complete:c}},7946:function(e,t,n){var i;!function(r,s){"use strict";var o="function",a="undefined",c="object",l="string",u="major",d="model",h="name",p="type",f="vendor",m="version",g="architecture",v="console",b="mobile",y="tablet",w="smarttv",S="wearable",C="embedded",k="Amazon",T="Apple",_="ASUS",E="BlackBerry",R="Browser",A="Chrome",I="Firefox",x="Google",P="Huawei",O="LG",N="Microsoft",D="Motorola",j="Opera",L="Samsung",U="Sharp",M="Sony",F="Xiaomi",V="Zebra",B="Facebook",H="Chromium OS",z="Mac OS",W=" Browser",q=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},$=function(e,t){return typeof e===l&&-1!==J(t).indexOf(J(e))},J=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},K=function(e,t){for(var n,i,r,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=i=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(r=0;r<p.length;r++)u=l[++i],typeof(a=p[r])===c&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):s:this[a[0]]=u?a[1].call(this,u,a[2]):s:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):s):this[a]=u||s;d+=2}},Y=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if($(t[n][i],e))return"?"===n?s:n}else if($(t[n],e))return"?"===n?s:n;return t.hasOwnProperty("*")?t["*"]:e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,m],[/opios[\/ ]+([\w\.]+)/i],[m,[h,j+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[h,j+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[h,j]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[m,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[h,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[h,"Smart Lenovo "+R]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+R],m],[/\bfocus\/([\w\.]+)/i],[m,[h,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[h,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[h,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[h,"MIUI"+W]],[/fxios\/([\w\.-]+)/i],[m,[h,I]],[/\bqihoobrowser\/?([\w\.]*)/i],[m,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+W],m],[/samsungbrowser\/([\w\.]+)/i],[m,[h,L+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[m,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,m],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[m,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,B],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[h,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,A+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[h,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[m,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],m],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[h,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,J]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",J]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,J]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,L],[p,y]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,L],[p,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,T],[p,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,T],[p,y]],[/(macintosh);/i],[d,[f,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,U],[p,b]],[/(?:honor)([-\w ]+)[;\)]/i],[d,[f,"Honor"],[p,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,P],[p,y]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,P],[p,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[f,F],[p,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,F],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[p,b]],[/\b(opd2\d{3}a?) bui/i],[d,[f,"OPPO"],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[p,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[p,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,D],[p,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,D],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,O],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,O],[p,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[p,b]],[/(pixel c)\b/i],[d,[f,x],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,x],[p,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,M],[p,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,M],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[p,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,k],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,k],[p,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,E],[p,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,_],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,_],[p,b]],[/(nexus 9)/i],[d,[f,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[p,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[f,"TCL"],[p,y]],[/(itel) ((\w+))/i],[[f,J],d,[p,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[p,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[p,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[f,"Energizer"],[p,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[f,"Cat"],[p,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[f,"Smartfren"],[p,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[f,"Nothing"],[p,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[p,b]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[p,y]],[/(surface duo)/i],[d,[f,N],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[p,b]],[/(u304aa)/i],[d,[f,"AT&T"],[p,b]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[p,b]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[p,y]],[/\b(k88) b/i],[d,[f,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[p,b]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[p,b]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[p,y]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[p,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[p,b]],[/\b(ph-1) /i],[d,[f,"Essential"],[p,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[p,y]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[p,y]],[/(sprint) (\w+)/i],[f,d,[p,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,N],[p,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,V],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,V],[p,b]],[/smart-tv.+(samsung)/i],[f,[p,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,L],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,O],[p,w]],[/(apple) ?tv/i],[f,[d,T+" TV"],[p,w]],[/crkey/i],[[d,A+"cast"],[f,x],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,k],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,U],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,M],[p,w]],[/(mitv-\w{5}) bui/i],[d,[f,F],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,G],[d,G],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[p,v]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[d,[f,M],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,N],[p,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[f,L],[p,S]],[/((pebble))app/i],[f,d,[p,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,T],[p,S]],[/droid.+; (glass) \d/i],[d,[f,x],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,V],[p,S]],[/droid.+; (glass) \d/i],[d,[f,x],[p,S]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,d,[p,S]],[/; (quest( \d| pro)?)/i],[d,[f,B],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,C]],[/(aeobc)\b/i],[d,[f,k],[p,C]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,m],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[m,Y,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Y,X],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,z],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,m],[/\(bb(10);/i],[m,[h,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[h,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[h,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,H],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,m],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,m]]},Q=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof Q))return new Q(e,t).getResult();var n=typeof r!==a&&r.navigator?r.navigator:s,i=e||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:s,w=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(Z,t):Z,S=n&&n.userAgent==i;return this.getBrowser=function(){var e,t={};return t[h]=s,t[m]=s,K.call(t,i,w.browser),t[u]=typeof(e=t[m])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:s,S&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[g]=s,K.call(e,i,w.cpu),e},this.getDevice=function(){var e={};return e[f]=s,e[d]=s,e[p]=s,K.call(e,i,w.device),S&&!e[p]&&v&&v.mobile&&(e[p]=b),S&&"Macintosh"==e[d]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[p]=y),e},this.getEngine=function(){var e={};return e[h]=s,e[m]=s,K.call(e,i,w.engine),e},this.getOS=function(){var e={};return e[h]=s,e[m]=s,K.call(e,i,w.os),S&&!e[h]&&v&&v.platform&&"Unknown"!=v.platform&&(e[h]=v.platform.replace(/chrome os/i,H).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>500?G(e,500):e,this},this.setUA(i),this};Q.VERSION="1.0.40",Q.BROWSER=q([h,m,u]),Q.CPU=q([g]),Q.DEVICE=q([d,f,p,v,b,w,y,S,C]),Q.ENGINE=Q.OS=q([h,m]),typeof t!==a?(e.exports&&(t=e.exports=Q),t.UAParser=Q):n.amdO?(i=function(){return Q}.call(t,n,t,e))===s||(e.exports=i):typeof r!==a&&(r.UAParser=Q);var ee=typeof r!==a&&(r.jQuery||r.Zepto);if(ee&&!ee.ua){var te=new Q;ee.ua=te.getResult(),ee.ua.get=function(){return te.getUA()},ee.ua.set=function(e){te.setUA(e);var t=te.getResult();for(var n in t)ee.ua[n]=t[n]}}}("object"===typeof window?window:this)},8008:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic")},8041:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var i="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8117:(e,t,n)=>{"use strict";function i(e){return e}n.d(t,{D:()=>i})},8165:(e,t,n)=>{"use strict";n.d(t,{H:()=>S});var i=n(1998),r=n(937),s=n(1190),o=n(8344);function a(e,t){return void 0===t&&(t=0),(0,s.N)((function(n,i){n.subscribe((0,o._)(i,(function(n){return(0,r.N)(i,e,(function(){return i.next(n)}),t)}),(function(){return(0,r.N)(i,e,(function(){return i.complete()}),t)}),(function(n){return(0,r.N)(i,e,(function(){return i.error(n)}),t)})))}))}function c(e,t){return void 0===t&&(t=0),(0,s.N)((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}var l=n(5868);var u=n(8041),d=n(1732);function h(e,t){if(!e)throw new Error("Iterable cannot be null");return new l.c((function(n){(0,r.N)(n,t,(function(){var i=e[Symbol.asyncIterator]();(0,r.N)(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}var p=n(3983),f=n(3554),m=n(5505),g=n(5637),v=n(1633),b=n(7391),y=n(9788);function w(e,t){if(null!=e){if((0,p.l)(e))return function(e,t){return(0,i.Tg)(e).pipe(c(t),a(t))}(e,t);if((0,m.X)(e))return function(e,t){return new l.c((function(n){var i=0;return t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())}))}))}(e,t);if((0,f.y)(e))return function(e,t){return(0,i.Tg)(e).pipe(c(t),a(t))}(e,t);if((0,v.T)(e))return h(e,t);if((0,g.x)(e))return function(e,t){return new l.c((function(n){var i;return(0,r.N)(n,t,(function(){i=e[u.l](),(0,r.N)(n,t,(function(){var e,t,r;try{t=(e=i.next()).value,r=e.done}catch(s){return void n.error(s)}r?n.complete():n.next(t)}),0,!0)})),function(){return(0,d.T)(null===i||void 0===i?void 0:i.return)&&i.return()}}))}(e,t);if((0,y.U)(e))return function(e,t){return h((0,y.C)(e),t)}(e,t)}throw(0,b.L)(e)}function S(e,t){return t?w(e,t):(0,i.Tg)(e)}},8344:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var i=n(7827);function r(e,t,n,i,r){return new s(e,t,n,i,r)}var s=function(e){function t(t,n,i,r,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(e){try{n(e)}catch(i){t.error(i)}}:e.prototype._next,a._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,i.C6)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(n(7917).vU)},8692:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home")},8713:(e,t,n)=>{"use strict";var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m11 15H4v-2h16zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20z"}),"CardGiftcard")},9316:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16.5 3c-.96 0-1.9.25-2.73.69L12 9h3l-3 10 1-9h-3l1.54-5.39C10.47 3.61 9.01 3 7.5 3 4.42 3 2 5.42 2 8.5c0 4.13 4.16 7.18 10 12.5 5.47-4.94 10-8.26 10-12.5C22 5.42 19.58 3 16.5 3m-6.26 13.73C6.45 13.34 4 11 4 8.5 4 6.54 5.54 5 7.5 5c.59 0 1.19.15 1.73.42L7.35 12h3.42zm4.89-1.2L17.69 7h-2.91l.61-1.82c.36-.12.74-.18 1.11-.18C18.46 5 20 6.54 20 8.5c0 2.21-2.02 4.43-4.87 7.03"}),"HeartBrokenOutlined")},9317:(e,t,n)=>{"use strict";n.d(t,{fSl:()=>jn,ncL:()=>Xt,xwR:()=>Ln,Mf9:()=>Mn});var i=n(9379),r=n(45),s=n(7493),o=n(6932),a=n(4414),c=n(9950),l=n.t(c,2);function u(){return"undefined"!==typeof window}function d(e){return f(e)?(e.nodeName||"").toLowerCase():"#document"}function h(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function p(e){var t;return null==(t=(f(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function f(e){return!!u()&&(e instanceof Node||e instanceof h(e).Node)}function m(e){return!!u()&&(e instanceof Element||e instanceof h(e).Element)}function g(e){return!!u()&&(e instanceof HTMLElement||e instanceof h(e).HTMLElement)}function v(e){return!(!u()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof h(e).ShadowRoot)}function b(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=T(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function y(e){return["table","td","th"].includes(d(e))}function w(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function S(e){const t=C(),n=m(e)?T(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function C(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function k(e){return["html","body","#document"].includes(d(e))}function T(e){return h(e).getComputedStyle(e)}function _(e){return m(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function E(e){if("html"===d(e))return e;const t=e.assignedSlot||e.parentNode||v(e)&&e.host||p(e);return v(t)?t.host:t}function R(e){const t=E(e);return k(t)?e.ownerDocument?e.ownerDocument.body:e.body:g(t)&&b(t)?t:R(t)}function A(e,t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=R(e),s=r===(null==(i=e.ownerDocument)?void 0:i.body),o=h(r);if(s){const e=I(o);return t.concat(o,o.visualViewport||[],b(r)?r:[],e&&n?A(e):[])}return t.concat(r,A(r,[],n))}function I(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}var x=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],P=x.join(","),O="undefined"===typeof Element,N=O?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,D=!O&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},j=function e(t,n){var i;void 0===n&&(n=!0);var r=null===t||void 0===t||null===(i=t.getAttribute)||void 0===i?void 0:i.call(t,"inert");return""===r||"true"===r||n&&t&&e(t.parentNode)},L=function(e,t,n){if(j(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(P));return t&&N.call(e,P)&&i.unshift(e),i=i.filter(n)},U=function e(t,n,i){for(var r=[],s=Array.from(t);s.length;){var o=s.shift();if(!j(o,!1))if("SLOT"===o.tagName){var a=o.assignedElements(),c=e(a.length?a:o.children,!0,i);i.flatten?r.push.apply(r,c):r.push({scopeParent:o,candidates:c})}else{N.call(o,P)&&i.filter(o)&&(n||!t.includes(o))&&r.push(o);var l=o.shadowRoot||"function"===typeof i.getShadowRoot&&i.getShadowRoot(o),u=!j(l,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(l&&u){var d=e(!0===l?o.children:l.children,!0,i);i.flatten?r.push.apply(r,d):r.push({scopeParent:o,candidates:d})}else s.unshift.apply(s,o.children)}}return r},M=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},F=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!M(e)?0:e.tabIndex},V=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},B=function(e){return"INPUT"===e.tagName},H=function(e){return function(e){return B(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||D(e),i=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=i(window.CSS.escape(e.name));else try{t=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)},z=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return 0===n&&0===i},W=function(e,t){var n=t.displayCheck,i=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var r=N.call(e,"details>summary:first-of-type")?e.parentElement:e;if(N.call(r,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return z(e)}else{if("function"===typeof i){for(var s=e;e;){var o=e.parentElement,a=D(e);if(o&&!o.shadowRoot&&!0===i(o))return z(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=s}if(function(e){var t,n,i,r,s=e&&D(e),o=null===(t=s)||void 0===t?void 0:t.host,a=!1;if(s&&s!==e)for(a=!!(null!==(n=o)&&void 0!==n&&null!==(i=n.ownerDocument)&&void 0!==i&&i.contains(o)||null!==e&&void 0!==e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!a&&o;){var c,l,u;a=!(null===(l=o=null===(c=s=D(o))||void 0===c?void 0:c.host)||void 0===l||null===(u=l.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},q=function(e,t){return!(t.disabled||j(t)||function(e){return B(e)&&"hidden"===e.type}(t)||W(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if("LEGEND"===i.tagName)return!!N.call(t,"fieldset[disabled] *")||!i.contains(e)}return!0}t=t.parentElement}return!1}(t))},$=function(e,t){return!(H(t)||F(t)<0||!q(e,t))},J=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},G=function e(t){var n=[],i=[];return t.forEach((function(t,r){var s=!!t.scopeParent,o=s?t.scopeParent:t,a=function(e,t){var n=F(e);return n<0&&t&&!M(e)?0:n}(o,s),c=s?e(t.candidates):o;0===a?s?n.push.apply(n,c):n.push(o):i.push({documentOrder:r,tabIndex:a,item:t,isScope:s,content:c})})),i.sort(V).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},K=function(e,t){var n;return n=(t=t||{}).getShadowRoot?U([e],t.includeContainer,{filter:$.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:J}):L(e,t.includeContainer,$.bind(null,t)),G(n)};function Y(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function X(e){return(null==e?void 0:e.ownerDocument)||document}var Z="undefined"!==typeof document?c.useLayoutEffect:c.useEffect;const Q=(0,i.A)({},l).useInsertionEffect||(e=>e());const ee=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function te(e,t){const n=K(e,ee()),i=n.length;if(0===i)return;const r=function(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}(X(e)),s=n.indexOf(r);return n[-1===s?1===t?0:i-1:s+t]}function ne(e,t){const n=t||e.currentTarget,i=e.relatedTarget;return!i||!function(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&v(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}(n,i)}function ie(e){K(e,ee()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function re(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}var se=n(7119);const oe=Math.min,ae=Math.max,ce=Math.round,le=Math.floor,ue=e=>({x:e,y:e}),de={left:"right",right:"left",bottom:"top",top:"bottom"},he={start:"end",end:"start"};function pe(e,t,n){return ae(e,oe(t,n))}function fe(e,t){return"function"===typeof e?e(t):e}function me(e){return e.split("-")[0]}function ge(e){return e.split("-")[1]}function ve(e){return"x"===e?"y":"x"}function be(e){return"y"===e?"height":"width"}function ye(e){return["top","bottom"].includes(me(e))?"y":"x"}function we(e){return ve(ye(e))}function Se(e){return e.replace(/start|end/g,(e=>he[e]))}function Ce(e){return e.replace(/left|right|bottom|top/g,(e=>de[e]))}function ke(e){return"number"!==typeof e?function(e){return(0,i.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Te(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}const _e=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Ee=["mainAxis","crossAxis","limiter"],Re=["apply"];function Ae(e,t,n){let{reference:i,floating:r}=e;const s=ye(t),o=we(t),a=be(o),c=me(t),l="y"===s,u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let p;switch(c){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(ge(t)){case"start":p[o]-=h*(n&&l?-1:1);break;case"end":p[o]+=h*(n&&l?-1:1)}return p}async function Ie(e,t){var n;void 0===t&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=fe(t,e),f=ke(p),m=a[h?"floating"===d?"reference":"floating":d],g=Te(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v="floating"===d?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),y=await(null==s.isElement?void 0:s.isElement(b))&&await(null==s.getScale?void 0:s.getScale(b))||{x:1,y:1},w=Te(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(g.top-w.top+f.top)/y.y,bottom:(w.bottom-g.bottom+f.bottom)/y.y,left:(g.left-w.left+f.left)/y.x,right:(w.right-g.right+f.right)/y.x}}function xe(e){const t=T(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=g(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=ce(n)!==s||ce(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function Pe(e){return m(e)?e:e.contextElement}function Oe(e){const t=Pe(e);if(!g(t))return ue(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=xe(t);let o=(s?ce(n.width):n.width)/i,a=(s?ce(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Ne=ue(0);function De(e){const t=h(e);return C()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ne}function je(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),s=Pe(e);let o=ue(1);t&&(i?m(i)&&(o=Oe(i)):o=Oe(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==h(e))&&t}(s,n,i)?De(s):ue(0);let c=(r.left+a.x)/o.x,l=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const e=h(s),t=i&&m(i)?h(i):i;let n=e,r=I(n);for(;r&&i&&t!==n;){const e=Oe(r),t=r.getBoundingClientRect(),i=T(r),s=t.left+(r.clientLeft+parseFloat(i.paddingLeft))*e.x,o=t.top+(r.clientTop+parseFloat(i.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,d*=e.y,c+=s,l+=o,n=h(r),r=I(n)}}return Te({width:u,height:d,x:c,y:l})}function Le(e,t){const n=_(e).scrollLeft;return t?t.left+n:je(p(e)).left+n}function Ue(e,t,n){void 0===n&&(n=!1);const i=e.getBoundingClientRect();return{x:i.left+t.scrollLeft-(n?0:Le(e,i)),y:i.top+t.scrollTop}}function Me(e,t,n){let i;if("viewport"===t)i=function(e,t){const n=h(e),i=p(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;const e=C();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a,y:c}}(e,n);else if("document"===t)i=function(e){const t=p(e),n=_(e),i=e.ownerDocument.body,r=ae(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=ae(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Le(e);const a=-n.scrollTop;return"rtl"===T(i).direction&&(o+=ae(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}(p(e));else if(m(t))i=function(e,t){const n=je(e,!0,"fixed"===t),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=g(e)?Oe(e):ue(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:r*s.x,y:i*s.y}}(t,n);else{const n=De(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Te(i)}function Fe(e,t){const n=E(e);return!(n===t||!m(n)||k(n))&&("fixed"===T(n).position||Fe(n,t))}function Ve(e,t,n){const i=g(t),r=p(t),s="fixed"===n,o=je(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=ue(0);function l(){c.x=Le(r)}if(i||!i&&!s)if(("body"!==d(t)||b(r))&&(a=_(t)),i){const e=je(t,!0,s,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else r&&l();s&&!i&&r&&l();const u=!r||i||s?ue(0):Ue(r,a);return{x:o.left+a.scrollLeft-c.x-u.x,y:o.top+a.scrollTop-c.y-u.y,width:o.width,height:o.height}}function Be(e){return"static"===T(e).position}function He(e,t){if(!g(e)||"fixed"===T(e).position)return null;if(t)return t(e);let n=e.offsetParent;return p(e)===n&&(n=n.ownerDocument.body),n}function ze(e,t){const n=h(e);if(w(e))return n;if(!g(e)){let t=E(e);for(;t&&!k(t);){if(m(t)&&!Be(t))return t;t=E(t)}return n}let i=He(e,t);for(;i&&y(i)&&Be(i);)i=He(i,t);return i&&k(i)&&Be(i)&&!S(i)?n:i||function(e){let t=E(e);for(;g(t)&&!k(t);){if(S(t))return t;if(w(t))return null;t=E(t)}return null}(e)||n}const We={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s="fixed"===r,o=p(i),a=!!t&&w(t.floating);if(i===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=ue(1);const u=ue(0),h=g(i);if((h||!h&&!s)&&(("body"!==d(i)||b(o))&&(c=_(i)),g(i))){const e=je(i);l=Oe(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}const f=!o||h||s?ue(0):Ue(o,c,!0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}},getDocumentElement:p,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const s=[..."clippingAncestors"===n?w(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let i=A(e,[],!1).filter((e=>m(e)&&"body"!==d(e))),r=null;const s="fixed"===T(e).position;let o=s?E(e):e;for(;m(o)&&!k(o);){const t=T(o),n=S(o);n||"fixed"!==t.position||(r=null),(s?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||b(o)&&!n&&Fe(e,o))?i=i.filter((e=>e!==o)):r=t,o=E(o)}return t.set(e,i),i}(t,this._c):[].concat(n),i],o=s[0],a=s.reduce(((e,n)=>{const i=Me(t,n,r);return e.top=ae(i.top,e.top),e.right=oe(i.right,e.right),e.bottom=oe(i.bottom,e.bottom),e.left=ae(i.left,e.left),e}),Me(t,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:ze,getElementRects:async function(e){const t=this.getOffsetParent||ze,n=this.getDimensions,i=await n(e.floating);return{reference:Ve(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=xe(e);return{width:t,height:n}},getScale:Oe,isElement:m,isRTL:function(e){return"rtl"===T(e).direction}};function qe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $e(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:c="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,u=Pe(e),d=s||o?[...u?A(u):[],...A(t)]:[];d.forEach((e=>{s&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const h=u&&c?function(e,t){let n,r=null;const s=p(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(c,l){void 0===c&&(c=!1),void 0===l&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=u;if(c||t(),!p||!f)return;const m={rootMargin:-le(h)+"px "+-le(s.clientWidth-(d+p))+"px "+-le(s.clientHeight-(h+f))+"px "+-le(d)+"px",threshold:ae(0,oe(1,l))||1};let g=!0;function v(t){const i=t[0].intersectionRatio;if(i!==l){if(!g)return a();i?a(!1,i):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==i||qe(u,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(v,(0,i.A)((0,i.A)({},m),{},{root:s.ownerDocument}))}catch(b){r=new IntersectionObserver(v,m)}r.observe(e)}(!0),o}(u,n):null;let f,m=-1,g=null;a&&(g=new ResizeObserver((e=>{let[i]=e;i&&i.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(t)}))),n()})),u&&!l&&g.observe(u),g.observe(t));let v=l?je(e):null;return l&&function t(){const i=je(e);v&&!qe(v,i)&&n();v=i,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{s&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==h||h(),null==(e=g)||e.disconnect(),g=null,l&&cancelAnimationFrame(f)}}const Je=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:c}=t,l=await async function(e,t){const{placement:n,platform:i,elements:r}=e,s=await(null==i.isRTL?void 0:i.isRTL(r.floating)),o=me(n),a=ge(n),c="y"===ye(n),l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,d=fe(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof f&&(p="end"===a?-1*f:f),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}(t,e);return a===(null==(n=c.offset)?void 0:n.placement)&&null!=(r=c.arrow)&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:(0,i.A)((0,i.A)({},l),{},{placement:a})}}}},Ge=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:o}=t,a=fe(e,t),{mainAxis:c=!0,crossAxis:l=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=a,d=(0,r.A)(a,Ee),h={x:n,y:s},p=await Ie(t,d),f=ye(me(o)),m=ve(f);let g=h[m],v=h[f];if(c){const e="y"===m?"bottom":"right";g=pe(g+p["y"===m?"top":"left"],g,g-p[e])}if(l){const e="y"===f?"bottom":"right";v=pe(v+p["y"===f?"top":"left"],v,v-p[e])}const b=u.fn((0,i.A)((0,i.A)({},t),{},{[m]:g,[f]:v}));return(0,i.A)((0,i.A)({},b),{},{data:{x:b.x-n,y:b.y-s,enabled:{[m]:c,[f]:l}}})}}},Ke=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:s,middlewareData:o,rects:a,initialPlacement:c,platform:l,elements:u}=t,d=fe(e,t),{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=d,b=(0,r.A)(d,_e);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const y=me(s),w=ye(c),S=me(c)===c,C=await(null==l.isRTL?void 0:l.isRTL(u.floating)),k=f||(S||!v?[Ce(c)]:function(e){const t=Ce(e);return[Se(e),t,Se(t)]}(c)),T="none"!==g;!f&&T&&k.push(...function(e,t,n,i){const r=ge(e);let s=function(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}(me(e),"start"===n,i);return r&&(s=s.map((e=>e+"-"+r)),t&&(s=s.concat(s.map(Se)))),s}(c,v,g,C));const _=[c,...k],E=await Ie(t,b),R=[];let A=(null==(i=o.flip)?void 0:i.overflows)||[];if(h&&R.push(E[y]),p){const e=function(e,t,n){void 0===n&&(n=!1);const i=ge(e),r=we(e),s=be(r);let o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Ce(o)),[o,Ce(o)]}(s,a,C);R.push(E[e[0]],E[e[1]])}if(A=[...A,{placement:s,overflows:R}],!R.every((e=>e<=0))){var I,x;const e=((null==(I=o.flip)?void 0:I.index)||0)+1,t=_[e];if(t){var P;const n="alignment"===p&&w!==ye(t),i=(null==(P=A[0])?void 0:P.overflows[0])>0;if(!n||i)return{data:{index:e,overflows:A},reset:{placement:t}}}let n=null==(x=A.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:x.placement;if(!n)switch(m){case"bestFit":{var O;const e=null==(O=A.filter((e=>{if(T){const t=ye(e.placement);return t===w||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=c}if(s!==n)return{reset:{placement:n}}}return{}}}},Ye=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:o,rects:a,platform:c,elements:l}=t,u=fe(e,t),{apply:d=()=>{}}=u,h=(0,r.A)(u,Re),p=await Ie(t,h),f=me(o),m=ge(o),g="y"===ye(o),{width:v,height:b}=a.floating;let y,w;"top"===f||"bottom"===f?(y=f,w=m===(await(null==c.isRTL?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,y="end"===m?"top":"bottom");const S=b-p.top-p.bottom,C=v-p.left-p.right,k=oe(b-p[y],S),T=oe(v-p[w],C),_=!t.middlewareData.shift;let E=k,R=T;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(R=C),null!=(s=t.middlewareData.shift)&&s.enabled.y&&(E=S),_&&!m){const e=ae(p.left,0),t=ae(p.right,0),n=ae(p.top,0),i=ae(p.bottom,0);g?R=v-2*(0!==e||0!==t?e+t:ae(p.left,p.right)):E=b-2*(0!==n||0!==i?n+i:ae(p.top,p.bottom))}await d((0,i.A)((0,i.A)({},t),{},{availableWidth:R,availableHeight:E}));const A=await c.getDimensions(l.floating);return v!==A.width||b!==A.height?{reset:{rects:!0}}:{}}}},Xe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:c,middlewareData:l}=t,{element:u,padding:d=0}=fe(e,t)||{};if(null==u)return{};const h=ke(d),p={x:n,y:r},f=we(s),m=be(f),g=await a.getDimensions(u),v="y"===f,b=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[f]-p[f]-o.floating[m],C=p[f]-o.reference[f],k=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let T=k?k[w]:0;T&&await(null==a.isElement?void 0:a.isElement(k))||(T=c.floating[w]||o.floating[m]);const _=S/2-C/2,E=T/2-g[m]/2-1,R=oe(h[b],E),A=oe(h[y],E),I=R,x=T-g[m]-A,P=T/2-g[m]/2+_,O=pe(I,P,x),N=!l.arrow&&null!=ge(s)&&P!==O&&o.reference[m]/2-(P<I?R:A)-g[m]/2<0,D=N?P<I?P-I:P-x:0;return{[f]:p[f]+D,data:(0,i.A)({[f]:O,centerOffset:P-O-D},N&&{alignmentOffset:D}),reset:N}}}),Ze=(e,t,n)=>{const r=new Map,s=(0,i.A)({platform:We},n),o=(0,i.A)((0,i.A)({},s.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,c=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Ae(u,r,l),p=r,f={},m=0;for(let g=0;g<c.length;g++){const{name:n,fn:o}=c[g],{x:v,y:b,data:y,reset:w}=await o({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:u,platform:a,elements:{reference:e,floating:t}});d=null!=v?v:d,h=null!=b?b:h,f=(0,i.A)((0,i.A)({},f),{},{[n]:(0,i.A)((0,i.A)({},f[n]),y)}),w&&m<=50&&(m++,"object"===typeof w&&(w.placement&&(p=w.placement),w.rects&&(u=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:s}):w.rects),({x:d,y:h}=Ae(u,p,l))),g=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}})(e,t,(0,i.A)((0,i.A)({},s),{},{platform:o}))};var Qe="undefined"!==typeof document?c.useLayoutEffect:c.useEffect;function et(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;0!==i--;)if(!et(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;0!==i--;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!==i--;){const n=r[i];if(("_owner"!==n||!e.$$typeof)&&!et(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function tt(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nt(e,t){const n=tt(e);return Math.round(t*n)/n}function it(e){const t=c.useRef(e);return Qe((()=>{t.current=e})),t}const rt=(e,t)=>(0,i.A)((0,i.A)({},Ge(e)),{},{options:[e,t]}),st=(e,t)=>(0,i.A)((0,i.A)({},Ke(e)),{},{options:[e,t]}),ot=(e,t)=>(0,i.A)((0,i.A)({},Ye(e)),{},{options:[e,t]}),at=(e,t)=>(0,i.A)((0,i.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:i}="function"===typeof e?e(t):e;return n&&(r=n,{}.hasOwnProperty.call(r,"current"))?null!=n.current?Xe({element:n.current,padding:i}).fn(t):{}:n?Xe({element:n,padding:i}).fn(t):{};var r}}))(e)),{},{options:[e,t]}),ct=["transform"],lt=["context","width","height","tipRadius","strokeWidth","staticOffset","stroke","d","style"],ut=["lockScroll"];const dt="ArrowLeft",ht="ArrowRight",pt="ArrowUp",ft="ArrowDown";const mt=[dt,ht],gt=[pt,ft],vt=(0,i.A)({},l);let bt=!1,yt=0;const wt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+yt++;const St=vt.useId||function(){const[e,t]=c.useState((()=>bt?wt():void 0));return Z((()=>{null==e&&t(wt())}),[]),c.useEffect((()=>{bt=!0}),[]),e};const Ct=c.forwardRef((function(e,t){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:l}},width:u=14,height:d=7,tipRadius:h=0,strokeWidth:p=0,staticOffset:f,stroke:m,d:g,style:{transform:v}={}}=e,b=(0,r.A)(e.style,ct),y=(0,r.A)(e,lt);const w=St(),[S,C]=c.useState(!1);if(Z((()=>{if(!s)return;"rtl"===T(s).direction&&C(!0)}),[s]),!s)return null;const[k,_]=n.split("-"),E="top"===k||"bottom"===k;let R=f;(E&&null!=l&&l.x||!E&&null!=l&&l.y)&&(R=null);const A=2*p,I=A/2,x=u/2*(h/-8+1),P=d/2*h/4,O=!!g,N=R&&"end"===_?"bottom":"top";let D=R&&"end"===_?"right":"left";R&&S&&(D="end"===_?"left":"right");const j=null!=(null==o?void 0:o.x)?R||o.x:"",L=null!=(null==o?void 0:o.y)?R||o.y:"",U=g||"M0,0 H"+u+" L"+(u-x)+","+(d-P)+" Q"+u/2+","+d+" "+x+","+(d-P)+" Z",M={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[k];return(0,a.jsxs)("svg",(0,i.A)((0,i.A)({},y),{},{"aria-hidden":!0,ref:t,width:O?u:u+A,height:u,viewBox:"0 0 "+u+" "+(d>u?d:u),style:(0,i.A)({position:"absolute",pointerEvents:"none",[D]:j,[N]:L,[k]:E||O?"100%":"calc(100% - "+A/2+"px)",transform:[M,v].filter((e=>!!e)).join(" ")},b),children:[A>0&&(0,a.jsx)("path",{clipPath:"url(#"+w+")",fill:"none",stroke:m,strokeWidth:A+(g?0:1),d:U}),(0,a.jsx)("path",{stroke:A&&!g?y.fill:"none",d:U}),(0,a.jsx)("clipPath",{id:w,children:(0,a.jsx)("rect",{x:-I,y:I*(O?-1:1),width:u+A,height:u})})]}))}));function kt(){const e=new Map;return{emit(t,n){var i;null==(i=e.get(t))||i.forEach((e=>e(n)))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var i;null==(i=e.get(t))||i.delete(n)}}}const Tt=c.createContext(null),_t=c.createContext(null),Et=()=>{var e;return(null==(e=c.useContext(Tt))?void 0:e.id)||null},Rt=()=>c.useContext(_t);function At(e){return"data-floating-ui-"+e}const It={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},xt=c.forwardRef((function(e,t){const[n,r]=c.useState();Z((()=>{/apple/i.test(navigator.vendor)&&r("button")}),[]);const s={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[At("focus-guard")]:"",style:It};return(0,a.jsx)("span",(0,i.A)((0,i.A)({},e),s))})),Pt=c.createContext(null),Ot=At("portal");function Nt(e){const{children:t,id:n,root:i,preserveTabOrder:r=!0}=e,s=function(e){void 0===e&&(e={});const{id:t,root:n}=e,i=St(),r=Dt(),[s,o]=c.useState(null),a=c.useRef(null);return Z((()=>()=>{null==s||s.remove(),queueMicrotask((()=>{a.current=null}))}),[s]),Z((()=>{if(!i)return;if(a.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=i,n.setAttribute(Ot,""),e.appendChild(n),a.current=n,o(n)}),[t,i]),Z((()=>{if(null===n)return;if(!i)return;if(a.current)return;let e=n||(null==r?void 0:r.portalNode);e&&!m(e)&&(e=e.current),e=e||document.body;let s=null;t&&(s=document.createElement("div"),s.id=t,e.appendChild(s));const c=document.createElement("div");c.id=i,c.setAttribute(Ot,""),e=s||e,e.appendChild(c),a.current=c,o(c)}),[t,n,i,r]),s}({id:n,root:i}),[o,l]=c.useState(null),u=c.useRef(null),d=c.useRef(null),h=c.useRef(null),p=c.useRef(null),f=null==o?void 0:o.modal,g=null==o?void 0:o.open,v=!!o&&!o.modal&&o.open&&r&&!(!i&&!s);return c.useEffect((()=>{if(s&&r&&!f)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){if(s&&ne(e)){("focusin"===e.type?re:ie)(s)}}}),[s,r,f]),c.useEffect((()=>{s&&(g||re(s))}),[g,s]),(0,a.jsxs)(Pt.Provider,{value:c.useMemo((()=>({preserveTabOrder:r,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:h,afterInsideRef:p,portalNode:s,setFocusManagerState:l})),[r,s]),children:[v&&s&&(0,a.jsx)(xt,{"data-type":"outside",ref:u,onFocus:e=>{if(ne(e,s)){var t;null==(t=h.current)||t.focus()}else{const e=o?o.domReference:null,t=te(X(n=e).body,-1)||n;null==t||t.focus()}var n}}),v&&s&&(0,a.jsx)("span",{"aria-owns":s.id,style:It}),s&&se.createPortal(t,s),v&&s&&(0,a.jsx)(xt,{"data-type":"outside",ref:d,onFocus:e=>{if(ne(e,s)){var t;null==(t=p.current)||t.focus()}else{const t=o?o.domReference:null,i=te(X(n=t).body,1)||n;null==i||i.focus(),(null==o?void 0:o.closeOnFocusOut)&&(null==o||o.onOpenChange(!1,e.nativeEvent,"focus-out"))}var n}})]})}const Dt=()=>c.useContext(Pt);let jt=0;let Lt=()=>{};const Ut=c.forwardRef((function(e,t){const{lockScroll:n=!1}=e,s=(0,r.A)(e,ut);return Z((()=>{if(n)return jt++,1===jt&&(Lt=function(){const e=/iP(hone|ad|od)|iOS/.test(Y()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,r=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[n]=i+"px"),e){var o,a;const e=(null==(o=window.visualViewport)?void 0:o.offsetLeft)||0,n=(null==(a=window.visualViewport)?void 0:a.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(n))+"px",left:-(r-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(r,s))}}()),()=>{jt--,0===jt&&Lt()}}),[n]),(0,a.jsx)("div",(0,i.A)((0,i.A)({ref:t},s),{},{style:(0,i.A)({position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0},s.style)}))}));function Mt(e){const{open:t=!1,onOpenChange:n,elements:i}=e,r=St(),s=c.useRef({}),[o]=c.useState((()=>kt())),a=null!=Et();const[l,u]=c.useState(i.reference),d=function(e){const t=c.useRef((()=>{}));return Q((()=>{t.current=e})),c.useCallback((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==t.current?void 0:t.current(...n)}),[])}(((e,t,i)=>{s.current.openEvent=e?t:void 0,o.emit("openchange",{open:e,event:t,reason:i,nested:a}),null==n||n(e,t,i)})),h=c.useMemo((()=>({setPositionReference:u})),[]),p=c.useMemo((()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference})),[l,i.reference,i.floating]);return c.useMemo((()=>({dataRef:s,open:t,onOpenChange:d,elements:p,events:o,floatingId:r,refs:h})),[t,d,p,o,r,h])}function Ft(e){void 0===e&&(e={});const{nodeId:t}=e,n=Mt((0,i.A)((0,i.A)({},e),{},{elements:(0,i.A)({reference:null,floating:null},e.elements)})),r=e.rootContext||n,s=r.elements,[o,a]=c.useState(null),[l,u]=c.useState(null),d=(null==s?void 0:s.domReference)||o,h=c.useRef(null),p=Rt();Z((()=>{d&&(h.current=d)}),[d]);const f=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[h,p]=c.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=c.useState(r);et(f,r)||m(r);const[g,v]=c.useState(null),[b,y]=c.useState(null),w=c.useCallback((e=>{e!==T.current&&(T.current=e,v(e))}),[]),S=c.useCallback((e=>{e!==_.current&&(_.current=e,y(e))}),[]),C=o||g,k=a||b,T=c.useRef(null),_=c.useRef(null),E=c.useRef(h),R=null!=u,A=it(u),I=it(s),x=it(d),P=c.useCallback((()=>{if(!T.current||!_.current)return;const e={placement:t,strategy:n,middleware:f};I.current&&(e.platform=I.current),Ze(T.current,_.current,e).then((e=>{const t=(0,i.A)((0,i.A)({},e),{},{isPositioned:!1!==x.current});O.current&&!et(E.current,t)&&(E.current=t,se.flushSync((()=>{p(t)})))}))}),[f,t,n,I,x]);Qe((()=>{!1===d&&E.current.isPositioned&&(E.current.isPositioned=!1,p((e=>(0,i.A)((0,i.A)({},e),{},{isPositioned:!1}))))}),[d]);const O=c.useRef(!1);Qe((()=>(O.current=!0,()=>{O.current=!1})),[]),Qe((()=>{if(C&&(T.current=C),k&&(_.current=k),C&&k){if(A.current)return A.current(C,k,P);P()}}),[C,k,P,A,R]);const N=c.useMemo((()=>({reference:T,floating:_,setReference:w,setFloating:S})),[w,S]),D=c.useMemo((()=>({reference:C,floating:k})),[C,k]),j=c.useMemo((()=>{const e={position:n,left:0,top:0};if(!D.floating)return e;const t=nt(D.floating,h.x),r=nt(D.floating,h.y);return l?(0,i.A)((0,i.A)({},e),{},{transform:"translate("+t+"px, "+r+"px)"},tt(D.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}}),[n,l,D.floating,h.x,h.y]);return c.useMemo((()=>(0,i.A)((0,i.A)({},h),{},{update:P,refs:N,elements:D,floatingStyles:j})),[h,P,N,D,j])}((0,i.A)((0,i.A)({},e),{},{elements:(0,i.A)((0,i.A)({},s),l&&{reference:l})})),g=c.useCallback((e=>{const t=m(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;u(t),f.refs.setReference(t)}),[f.refs]),v=c.useCallback((e=>{(m(e)||null===e)&&(h.current=e,a(e)),(m(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!m(e))&&f.refs.setReference(e)}),[f.refs]),b=c.useMemo((()=>(0,i.A)((0,i.A)({},f.refs),{},{setReference:v,setPositionReference:g,domReference:h})),[f.refs,v,g]),y=c.useMemo((()=>(0,i.A)((0,i.A)({},f.elements),{},{domReference:d})),[f.elements,d]),w=c.useMemo((()=>(0,i.A)((0,i.A)((0,i.A)({},f),r),{},{refs:b,elements:y,nodeId:t})),[f,b,y,t,r]);return Z((()=>{r.dataRef.current.floatingContext=w;const e=null==p?void 0:p.nodesRef.current.find((e=>e.id===t));e&&(e.context=w)})),c.useMemo((()=>(0,i.A)((0,i.A)({},f),{},{context:w,refs:b,elements:y})),[f,b,y,w])}var Vt=n(2004);const Bt=["participant","trackType"],Ht=["children"],zt=["stream"],Wt=["enabled","mirror","trackType","participant","className","VideoPlaceholder","PictureInPicturePlaceholder","refs"],qt=["icon","enabled","variant","onClick","className"],$t=["disabled","caption","children","className","active","Menu","menuPlacement","menuOffset","title","ToggleMenuButton","variant","onClick","onMenuToggle"],Jt=["title","tooltipClassName","tooltipPlacement","tooltipDisabled"],Gt=["permissionRequests","handleUpdatePermission"],Kt=["className"],Yt=e=>{let{participant:t,trackType:n="audioTrack"}=e,s=(0,r.A)(e,Bt);const l=(0,o.Gc)(),[u,d]=(0,c.useState)(null),{userId:h,sessionId:p}=t;return(0,c.useEffect)((()=>{if(!l||!u)return;const e=l.bindAudioElement(u,p,n);return()=>{null===e||void 0===e||e()}}),[l,p,u,n]),(0,a.jsx)("audio",(0,i.A)((0,i.A)({autoPlay:!0},s),{},{ref:d,"data-user-id":h,"data-session-id":p,"data-track-type":n}))};Yt.displayName="Audio";const Xt=e=>{const{participants:t,audioProps:n}=e;return(0,a.jsx)(a.Fragment,{children:t.map((e=>{if(e.isLocalParticipant)return null;const{audioStream:t,screenShareAudioStream:r,sessionId:o}=e,l=(0,s.Fv)(e)&&t&&(0,a.jsx)(Yt,(0,i.A)((0,i.A)({},n),{},{trackType:"audioTrack",participant:e})),u=(0,s.sf)(e)&&r&&(0,a.jsx)(Yt,(0,i.A)((0,i.A)({},n),{},{trackType:"screenShareAudioTrack",participant:e}));return(0,a.jsxs)(c.Fragment,{children:[l,u]},o)}))})};Xt.displayName="ParticipantsAudio";const Zt=(0,c.createContext)(void 0),Qt=()=>(0,c.useContext)(Zt),en=e=>{let{middleware:t=[],placement:n,strategy:r,offset:s=10}=e;const{refs:o,x:a,y:l,update:u,elements:{domReference:d,floating:h},context:p}=Ft({placement:n,strategy:r,middleware:[(f=s,(0,i.A)((0,i.A)({},Je(f)),{},{options:[f,m]})),rt(),st(),ot({padding:10,apply:e=>{let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:"".concat(t,"px")})}}),...t]});var f,m;return(0,c.useEffect)((()=>{if(!d||!h)return;const e=$e(d,h,u);return()=>e()}),[d,h,u]),{refs:o,x:a,y:l,domReference:d,floating:h,strategy:r,context:p}};var tn;!function(e){e.PORTAL="portal",e.MENU="menu"}(tn||(tn={}));const nn=(0,c.createContext)({}),rn=()=>(0,c.useContext)(nn),sn=e=>{let{children:t,refs:n}=e;const i=(0,c.useMemo)((()=>"str-video-portal-".concat(Math.random().toString(36).substring(2,9))),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:i,className:"str-video__portal"}),(0,a.jsx)(Ut,{children:(0,a.jsx)(Nt,{id:i,children:(0,a.jsx)("div",{className:"str-video__portal-content",ref:n.setFloating,children:t})})})]})},on=e=>{let{ToggleButton:t,placement:n="top-start",strategy:i="absolute",offset:r,visualType:s=tn.MENU,children:o,onToggle:l}=e;const[u,d]=(0,c.useState)(!1),h=(0,c.useRef)(l);h.current=l;const{floating:p,domReference:f,refs:m,x:g,y:v}=en({placement:n,strategy:i,offset:r});return(0,c.useEffect)((()=>{const e=null===f||void 0===f?void 0:f.ownerDocument,t=e=>{var t;if(!p&&null!==f&&void 0!==f&&f.contains(e.target))d(!0),null===(t=h.current)||void 0===t||t.call(h,!0);else if(p&&(null===p||void 0===p||!p.contains(e.target))){var n;d(!1),null===(n=h.current)||void 0===n||n.call(h,!1)}},n=e=>{var t;!e.key||"escape"!==e.key.toLowerCase()||e.altKey||e.ctrlKey||(d(!1),null===(t=h.current)||void 0===t||t.call(h,!1))};return null===e||void 0===e||e.addEventListener("click",t,{capture:!0}),null===e||void 0===e||e.addEventListener("keydown",n),()=>{null===e||void 0===e||e.removeEventListener("click",t,{capture:!0}),null===e||void 0===e||e.removeEventListener("keydown",n)}}),[p,f]),(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)(nn.Provider,{value:{close:()=>d(!1)},children:s===tn.PORTAL?(0,a.jsx)(sn,{refs:m,children:o}):s===tn.MENU?(0,a.jsx)("div",{className:"str-video__menu-container",ref:m.setFloating,style:{position:i,top:null!==v&&void 0!==v?v:0,left:null!==g&&void 0!==g?g:0,overflowY:"auto"},role:"menu",children:o}):null}),(0,a.jsx)(t,{menuShown:u,ref:m.setReference})]})},an=e=>{let{children:t,onItemClick:n}=e;const i=(0,c.useRef)(null);return(0,a.jsx)("ul",{className:"str-video__generic-menu",ref:i,onClick:e=>{var t;n&&e.target!==i.current&&null!==(t=i.current)&&void 0!==t&&t.contains(e.target)&&n(e)},children:t})},cn=e=>{let{children:t}=e,n=(0,r.A)(e,Ht);return(0,a.jsx)("li",{className:"str-video__generic-menu--item",children:(0,a.jsx)("button",(0,i.A)((0,i.A)({},n),{},{children:t}))})},ln=e=>{let{className:t,icon:n}=e;return(0,a.jsx)("span",{className:(0,Vt.A)("str-video__icon",n&&"str-video__icon--".concat(n),t)})};function un(e){const[t,n]=(0,c.useState)(document.pictureInPictureElement===e);return!e&&t&&n(!1),(0,c.useEffect)((()=>{if(!e)return;const t=()=>{n(document.pictureInPictureElement===e)};return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",t),()=>{e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",t)}}),[e]),t}const dn=()=>{const{participant:e,participantViewElement:t,videoElement:n}=Qt(),[i,r]=(0,c.useState)(!!document.fullscreenElement),l=(0,o.Gc)(),u=un(null!==n&&void 0!==n?n:void 0),{t:d}=(0,o.s9)(),{pin:h,sessionId:p,userId:f}=e,m=(0,s.Fv)(e),g=(0,s.aV)(e),v=(0,s.Mc)(e),b=(0,s.sf)(e),y=e=>()=>{null===l||void 0===l||l.updateUserPermissions({user_id:f,grant_permissions:[e]})},w=e=>()=>{null===l||void 0===l||l.updateUserPermissions({user_id:f,revoke_permissions:[e]})};(0,c.useEffect)((()=>{const e=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);const{close:S}=rn()||{};return(0,a.jsxs)(an,{onItemClick:S,children:[(0,a.jsxs)(cn,{onClick:()=>{h?null===l||void 0===l||l.unpin(p):null===l||void 0===l||l.pin(p)},disabled:h&&!h.isLocalPin,children:[(0,a.jsx)(ln,{icon:"pin"}),d(h?"Unpin":"Pin")]}),(0,a.jsxs)(o.c7,{requiredGrants:[s.pI.PIN_FOR_EVERYONE],children:[(0,a.jsxs)(cn,{onClick:()=>{null===l||void 0===l||l.pinForEveryone({user_id:f,session_id:p}).catch((e=>{console.error("Failed to pin participant ".concat(f),e)}))},disabled:h&&!h.isLocalPin,children:[(0,a.jsx)(ln,{icon:"pin"}),d("Pin for everyone")]}),(0,a.jsxs)(cn,{onClick:()=>{null===l||void 0===l||l.unpinForEveryone({user_id:f,session_id:p}).catch((e=>{console.error("Failed to unpin participant ".concat(f),e)}))},disabled:!h||h.isLocalPin,children:[(0,a.jsx)(ln,{icon:"pin"}),d("Unpin for everyone")]})]}),(0,a.jsx)(o.c7,{requiredGrants:[s.pI.BLOCK_USERS],children:(0,a.jsxs)(cn,{onClick:()=>null===l||void 0===l?void 0:l.blockUser(f),children:[(0,a.jsx)(ln,{icon:"not-allowed"}),d("Block")]})}),(0,a.jsxs)(o.c7,{requiredGrants:[s.pI.MUTE_USERS],children:[g&&(0,a.jsxs)(cn,{onClick:()=>null===l||void 0===l?void 0:l.muteUser(f,"video"),children:[(0,a.jsx)(ln,{icon:"camera-off-outline"}),d("Turn off video")]}),v&&(0,a.jsxs)(cn,{onClick:()=>null===l||void 0===l?void 0:l.muteUser(f,"screenshare"),children:[(0,a.jsx)(ln,{icon:"screen-share-off"}),d("Turn off screen share")]}),m&&(0,a.jsxs)(cn,{onClick:()=>null===l||void 0===l?void 0:l.muteUser(f,"audio"),children:[(0,a.jsx)(ln,{icon:"no-audio"}),d("Mute audio")]}),b&&(0,a.jsxs)(cn,{onClick:()=>null===l||void 0===l?void 0:l.muteUser(f,"screenshare_audio"),children:[(0,a.jsx)(ln,{icon:"no-audio"}),d("Mute screen share audio")]})]}),t&&"undefined"!==typeof t.requestFullscreen&&(0,a.jsx)(cn,{onClick:()=>i?document.exitFullscreen().catch(console.error):null===t||void 0===t?void 0:t.requestFullscreen().catch(console.error),children:d("{{ direction }} fullscreen",{direction:d(i?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&(0,a.jsx)(cn,{onClick:()=>n&&!u?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),children:d("{{ direction }} picture-in-picture",{direction:d(u?"Leave":"Enter")})}),(0,a.jsxs)(o.c7,{requiredGrants:[s.pI.UPDATE_CALL_PERMISSIONS],children:[(0,a.jsx)(cn,{onClick:y(s.pI.SEND_AUDIO),children:d("Allow audio")}),(0,a.jsx)(cn,{onClick:y(s.pI.SEND_VIDEO),children:d("Allow video")}),(0,a.jsx)(cn,{onClick:y(s.pI.SCREENSHARE),children:d("Allow screen sharing")}),(0,a.jsx)(cn,{onClick:w(s.pI.SEND_AUDIO),children:d("Disable audio")}),(0,a.jsx)(cn,{onClick:w(s.pI.SEND_VIDEO),children:d("Disable video")}),(0,a.jsx)(cn,{onClick:w(s.pI.SCREENSHARE),children:d("Disable screen sharing")})]})]})},hn=e=>null!==e&&!(0,c.isValidElement)(e),pn=(e,t)=>{if(e)return"function"===typeof e?e(t):void(e.current=t)},fn=((0,c.forwardRef)((function(e,t){let{stream:n}=e,o=(0,r.A)(e,zt);const[l,u]=(0,c.useState)(null);return(0,c.useEffect)((()=>{if(l&&n&&n!==l.srcObject)return l.srcObject=n,(s.cV.isSafari()||s.cV.isFirefox())&&setTimeout((()=>{l.srcObject=n,l.play().catch((e=>{console.error("Failed to play stream",e)}))}),0),()=>{l.pause(),l.srcObject=null}}),[n,l]),(0,a.jsx)("video",(0,i.A)((0,i.A)({autoPlay:!0,playsInline:!0},o),{},{ref:e=>{pn(t,e),u(e)}}))})),(0,c.forwardRef)((function(e,t){let{participant:n,style:i,children:r}=e;const[s,o]=(0,c.useState)(!1),l=n.name||n.userId;return(0,a.jsxs)("div",{className:"str-video__video-placeholder",style:i,ref:t,children:[(!n.image||s)&&(l?(0,a.jsx)(mn,{name:l}):(0,a.jsx)("div",{className:"str-video__video-placeholder__no-video-label",children:r})),n.image&&!s&&(0,a.jsx)("img",{onError:()=>o(!0),alt:l,className:"str-video__video-placeholder__avatar",src:n.image})]})}))),mn=e=>{const{name:t}=e,n=t.split(" ").slice(0,2).map((e=>e[0])).join("");return(0,a.jsx)("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},gn=(0,c.forwardRef)((function(e,t){const{t:n}=(0,o.s9)();return(0,a.jsx)(fn,(0,i.A)((0,i.A)({ref:t},e),{},{children:n("Video is disabled")}))})),vn=(0,c.forwardRef)((function(e,t){const{t:n}=(0,o.s9)();return(0,a.jsx)(fn,(0,i.A)((0,i.A)({ref:t},e),{},{children:n("Video is playing in a popup")}))})),bn=e=>{let{enabled:t=!0,mirror:n,trackType:l,participant:u,className:d,VideoPlaceholder:h=gn,PictureInPicturePlaceholder:p=vn,refs:f}=e,m=(0,r.A)(e,Wt);const{sessionId:g,videoStream:v,screenShareStream:b,viewportVisibilityState:y,isLocalParticipant:w,userId:S}=u,C=(0,o.Gc)(),[k,T]=(0,c.useState)(null),[_,E]=(0,c.useState)(!0),[R,A]=(0,c.useState)(!0),I=un(null!==k&&void 0!==k?k:void 0),x="videoTrack"===l?v:"screenShareTrack"===l?b:void 0;if((0,c.useLayoutEffect)((()=>{if(!C||!k||"none"===l)return;const e=C.bindVideoElement(k,g,l);return()=>{null===e||void 0===e||e()}}),[C,l,g,k]),(0,c.useEffect)((()=>{if(!x||!k)return;const[e]=x.getVideoTracks();if(!e)return;const t=()=>{E(k.paused);const{width:t=0,height:n=0}=e.getSettings();A(t>=n)};return E(k.paused),k.addEventListener("play",t),k.addEventListener("pause",t),e.addEventListener("unmute",t),()=>{k.removeEventListener("play",t),k.removeEventListener("pause",t),e.removeEventListener("unmute",t),E(!0)}}),[x,k]),!C)return null;const P="videoTrack"===l?(0,s.aV)(u):"screenShareTrack"===l&&(0,s.Mc)(u),O="none"===l||(null===y||void 0===y?void 0:y[l])===s.cy.INVISIBLE,N=!t||!P||O,D=void 0===n?w&&"videoTrack"===l:n,j="screenShareTrack"===l;return(0,a.jsxs)(a.Fragment,{children:[!N&&(0,a.jsx)("video",(0,i.A)((0,i.A)({},m),{},{className:(0,Vt.A)("str-video__video",d,{"str-video__video--not-playing":_,"str-video__video--tall":!R,"str-video__video--mirror":D,"str-video__video--screen-share":j}),"data-user-id":S,"data-session-id":g,ref:e=>{var t;T(e),null===f||void 0===f||null===(t=f.setVideoElement)||void 0===t||t.call(f,e)}})),I&&p&&(0,a.jsx)(p,{style:{position:"absolute"},participant:u}),(N||_)&&h&&(0,a.jsx)(h,{style:{position:"absolute"},participant:u,ref:null===f||void 0===f?void 0:f.setVideoPlaceholderElement})]})};bn.displayName="Video";(0,c.createContext)(void 0);const yn=(0,c.forwardRef)((function(e,t){const{icon:n,enabled:s,variant:o,onClick:c,className:l}=e,u=(0,r.A)(e,qt);return(0,a.jsx)("button",(0,i.A)((0,i.A)({className:(0,Vt.A)("str-video__call-controls__button",l,{["str-video__call-controls__button--variant-".concat(o)]:o,"str-video__call-controls__button--enabled":s}),onClick:e=>{e.preventDefault(),null===c||void 0===c||c(e)},ref:t},u),{},{children:(0,a.jsx)(ln,{icon:n})}))})),wn=(0,c.forwardRef)((function(e,t){let{disabled:n,caption:s,children:o,className:c,active:l,Menu:u,menuPlacement:d,menuOffset:h,title:p,ToggleMenuButton:f=Sn,variant:m,onClick:g,onMenuToggle:v}=e,b=(0,r.A)(e,$t);return(0,a.jsxs)("div",{className:(0,Vt.A)("str-video__composite-button",c,{"str-video__composite-button--caption":s,"str-video__composite-button--menu":u}),title:p,ref:t,children:[(0,a.jsxs)("div",{className:(0,Vt.A)("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":l,"str-video__composite-button__button-group--active-primary":l&&"primary"===m,"str-video__composite-button__button-group--active-secondary":l&&"secondary"===m,"str-video__composite-button__button-group--disabled":n}),children:[(0,a.jsx)("button",(0,i.A)((0,i.A)({type:"button",className:"str-video__composite-button__button",onClick:e=>{e.preventDefault(),null===g||void 0===g||g(e)},disabled:n},b),{},{children:o})),u&&(0,a.jsx)(on,{offset:h,placement:d,ToggleButton:f,onToggle:v,children:hn(u)?(0,a.jsx)(u,{}):u})]}),s&&(0,a.jsx)("div",{className:"str-video__composite-button__caption",children:s})]})})),Sn=(0,c.forwardRef)((function(e,t){let{menuShown:n}=e;return(0,a.jsx)(yn,{className:(0,Vt.A)("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":n}),icon:n?"caret-down":"caret-up",ref:t})})),Cn=e=>{const{isVisible:t,message:n,children:i,visibilityTimeout:r,resetIsVisible:s,placement:o="top",iconClassName:l="str-video__notification__icon",close:u}=e,{refs:d,x:h,y:p,strategy:f}=en({placement:o,strategy:"absolute"});return(0,c.useEffect)((()=>{if(!t||!r||!s)return;const e=setTimeout((()=>{s()}),r);return()=>clearTimeout(e)}),[t,s,r]),(0,a.jsxs)("div",{ref:d.setReference,children:[t&&(0,a.jsxs)("div",{className:"str-video__notification",ref:d.setFloating,style:{position:f,top:null!==p&&void 0!==p?p:0,left:null!==h&&void 0!==h?h:0,overflowY:"auto"},children:[l&&(0,a.jsx)("i",{className:l}),(0,a.jsx)("span",{className:"str-video__notification__message",children:n}),u?(0,a.jsx)("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:u}):null]}),i]})},kn=e=>{let{children:t,referenceElement:n,tooltipClassName:i,tooltipPlacement:r="top",visible:s=!1}=e;const o=(0,c.useRef)(null),{refs:l,x:u,y:d,strategy:h,context:p}=en({placement:r,strategy:"absolute",middleware:[at({element:o})]});return(0,c.useEffect)((()=>{l.setReference(n)}),[n,l]),s?(0,a.jsxs)("div",{className:(0,Vt.A)("str-video__tooltip",i),ref:l.setFloating,style:{position:h,top:null!==d&&void 0!==d?d:0,left:null!==u&&void 0!==u?u:0},children:[(0,a.jsx)(Ct,{ref:o,context:p,fill:"var(--str-video__tooltip--background-color)"}),t]}):null},Tn=e=>{let{title:t,tooltipClassName:n,tooltipPlacement:s,tooltipDisabled:o}=e,l=(0,r.A)(e,Jt);const{handleMouseEnter:u,handleMouseLeave:d,tooltipVisible:h}=function(){let{onMouseEnter:e,onMouseLeave:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,i]=(0,c.useState)(!1);return{handleMouseEnter:(0,c.useCallback)((t=>{i(!0),null===e||void 0===e||e(t)}),[e]),handleMouseLeave:(0,c.useCallback)((e=>{i(!1),null===t||void 0===t||t(e)}),[t]),tooltipVisible:n}}(),[p,f]=(0,c.useState)(null),m=!o&&Boolean(t)&&h;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(kn,{referenceElement:p,visible:m,tooltipClassName:n,tooltipPlacement:s,children:t||""}),(0,a.jsx)("div",(0,i.A)({ref:f,onMouseEnter:u,onMouseLeave:d},l))]})},_n=((0,c.forwardRef)((function(e,t){return(0,a.jsx)(wn,{ref:t,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:(0,a.jsx)(ln,{icon:"recording-off"})})})),{":like:":"\ud83d\udc4d",":raise-hand:":"\u270b",":fireworks:":"\ud83c\udf89",":dislike:":"\ud83d\udc4e",":heart:":"\u2764\ufe0f",":smile:":"\ud83d\ude00"}),En=e=>{let{participant:{reaction:t,sessionId:n},hideAfterTimeoutInMs:i=5500,emojiReactionMap:r=_n}=e;const s=(0,o.Gc)();if((0,c.useEffect)((()=>{if(!s||!t)return;const e=setTimeout((()=>{s.resetReaction(n)}),i);return()=>{clearTimeout(e)}}),[s,i,t,n]),!t)return null;const{emoji_code:l}=t;return(0,a.jsx)("div",{className:"str-video__reaction",children:(0,a.jsx)("span",{className:"str-video__reaction__emoji",children:l&&r[l]})})};(0,c.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:i}=(0,o.s9)();return(0,a.jsx)(Tn,{title:i("Reactions"),tooltipDisabled:n,children:(0,a.jsx)(wn,{ref:t,active:n,variant:"primary",children:(0,a.jsx)(ln,{icon:"reactions"})})})}));(0,c.createContext)({}),(0,c.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:i}=(0,o.s9)();return(0,a.jsx)(yn,{className:(0,Vt.A)("str-video__device-settings__button",{"str-video__device-settings__button--active":n}),title:i("Toggle device menu"),icon:"device-settings",ref:t})})),(0,c.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:i}=(0,o.s9)();return(0,a.jsx)(Tn,{title:i("Leave call"),tooltipDisabled:n,children:(0,a.jsx)(yn,{icon:n?"close":"call-end",variant:n?"active":"danger","data-testid":"leave-call-button",ref:t})})})),(0,c.lazy)((()=>n.e(748).then(n.bind(n,748))));var Rn;!function(e){e.GOOD="Good",e.OK="Ok",e.BAD="Bad"}(Rn||(Rn={}));(0,c.forwardRef)((function(e,t){const{t:n}=(0,o.s9)(),{caption:i,menuShown:r}=e;return(0,a.jsx)(wn,{ref:t,active:r,caption:i,title:i||n("Statistics"),"data-testid":"stats-button",children:(0,a.jsx)(ln,{icon:"stats"})})})),(0,c.forwardRef)((function(e,t){return(0,a.jsx)(yn,{enabled:e.menuShown,icon:"ellipsis",ref:t})}));(0,c.forwardRef)((function(e,t){return(0,a.jsx)(yn,{enabled:e.menuShown,icon:"filter",ref:t})})),(0,c.createContext)(null),s.Ko.JOINING,s.Ko.RINGING,s.Ko.MIGRATING,s.Ko.RECONNECTING,s.Ko.RECONNECTING_FAILED,s.Ko.OFFLINE,s.Ko.IDLE,s.Ko.UNKNOWN,s.Ko.JOINED,s.Ko.LEFT,(0,c.forwardRef)((function(e,t){const{permissionRequests:n,handleUpdatePermission:s}=e,l=(0,r.A)(e,Gt),{t:u}=(0,o.s9)();return(0,a.jsx)("div",(0,i.A)((0,i.A)({className:"str-video__permission-requests-list",ref:t},l),{},{children:n.map(((e,t)=>{const{user:n,permissions:i}=e;return(0,a.jsx)(c.Fragment,{children:i.map((t=>(0,a.jsxs)("div",{className:"str-video__permission-request",children:[(0,a.jsx)("div",{className:"str-video__permission-request__message",children:In(n.name||n.id,t,u)}),(0,a.jsx)(An,{className:"str-video__permission-request__button--allow",type:"button",onClick:s(e,"grant"),children:u("Allow")}),(0,a.jsx)(An,{className:"str-video__permission-request__button--reject",type:"button",onClick:s(e,"revoke"),children:u("Revoke")}),(0,a.jsx)(An,{className:"str-video__permission-request__button--reject",type:"button",onClick:s(e,"dismiss"),children:u("Dismiss")})]},t)))},"".concat(n.id,"/").concat(t))}))}))}));const An=e=>{const{className:t}=e,n=(0,r.A)(e,Kt);return(0,a.jsx)("button",(0,i.A)({className:(0,Vt.A)("str-video__permission-request__button",t)},n))},In=(e,t,n)=>{switch(t){case s.pI.SEND_AUDIO:return n("{{ userName }} is requesting to speak",{userName:e});case s.pI.SEND_VIDEO:return n("{{ userName }} is requesting to share their camera",{userName:e});case s.pI.SCREENSHARE:return n("{{ userName }} is requesting to present their screen",{userName:e});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:e,permission:t})}},xn=(0,c.forwardRef)((function(e,t){return(0,a.jsx)(yn,{enabled:e.menuShown,icon:"ellipsis",ref:t})})),Pn=()=>{const e=(0,o.Gc)(),{t:t}=(0,o.s9)();return(0,a.jsxs)("div",{className:"str-video__screen-share-overlay",children:[(0,a.jsx)(ln,{icon:"screen-share-off"}),(0,a.jsx)("span",{className:"str-video__screen-share-overlay__title",children:t("You are presenting your screen")}),(0,a.jsxs)("button",{onClick:()=>{null===e||void 0===e||e.screenShare.disable()},className:"str-video__screen-share-overlay__button",children:[(0,a.jsx)(ln,{icon:"close"})," ",t("Stop Screen Sharing")]})]})},On=e=>{let{indicatorsVisible:t=!0,menuPlacement:n="bottom-start",showMenuButton:i=!0,ParticipantActionsContextMenu:r=dn}=e;const{participant:o,trackType:c}=Qt(),l=(0,s.Mc)(o);return o.isLocalParticipant&&l&&"screenShareTrack"===c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Pn,{}),(0,a.jsx)(Nn,{indicatorsVisible:t})]}):(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(on,{strategy:"fixed",placement:n,ToggleButton:xn,children:(0,a.jsx)(r,{})}),(0,a.jsx)(En,{participant:o}),(0,a.jsx)(Nn,{indicatorsVisible:t})]})},Nn=e=>{let{indicatorsVisible:t=!0}=e;const{participant:n}=Qt(),{isLocalParticipant:i,connectionQuality:r,pin:c,sessionId:l,name:u,userId:d}=n,h=(0,o.Gc)(),{t:p}=(0,o.s9)(),f=!!r&&s.hc.ConnectionQuality[r].toLowerCase(),m=(0,s.Fv)(n),g=(0,s.aV)(n),v=!!c&&c.isLocalPin;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"str-video__participant-details",children:(0,a.jsxs)("span",{className:"str-video__participant-details__name",children:[u||d,t&&!m&&(0,a.jsx)("span",{className:"str-video__participant-details__name--audio-muted"}),t&&!g&&(0,a.jsx)("span",{className:"str-video__participant-details__name--video-muted"}),t&&v&&(0,a.jsx)("span",{title:p("Unpin"),onClick:()=>null===h||void 0===h?void 0:h.unpin(l),className:"str-video__participant-details__name--pinned"}),t&&(0,a.jsx)(Dn,{})]})}),t&&(0,a.jsx)(Cn,{isVisible:i&&r===s.hc.ConnectionQuality.POOR,message:p("Poor connection quality"),children:f&&(0,a.jsx)("span",{className:(0,Vt.A)("str-video__participant-details__connection-quality","str-video__participant-details__connection-quality--".concat(f)),title:f})})]})},Dn=()=>{const{participant:e}=Qt(),{isSpeaking:t,isDominantSpeaker:n}=e;return(0,a.jsxs)("span",{className:(0,Vt.A)("str-video__speech-indicator",t&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[(0,a.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,a.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,a.jsx)("span",{className:"str-video__speech-indicator__bar"})]})},jn=(0,c.forwardRef)((function(e,t){let{participant:n,trackType:i="videoTrack",mirror:r,muteAudio:l,refs:{setVideoElement:u,setVideoPlaceholderElement:d}={},className:h,VideoPlaceholder:p,PictureInPicturePlaceholder:f,ParticipantViewUI:m=On}=e;const{isLocalParticipant:g,isSpeaking:v,isDominantSpeaker:b,sessionId:y}=n,w=(0,s.Fv)(n),S=(0,s.aV)(n),C=(0,s.sf)(n),[k,T]=(0,c.useState)(null),[_,E]=(0,c.useState)(null),[R,A]=(0,c.useState)(null);(e=>{let{trackedElement:t,dynascaleManager:n,sessionId:i,trackType:r}=e;const s=(0,o.Gc)(),a=null!==n&&void 0!==n?n:null===s||void 0===s?void 0:s.dynascaleManager;(0,c.useEffect)((()=>{if(!t||!a||!s||"none"===r)return;const e=a.trackElementVisibility(t,i,r);return()=>{e()}}),[t,a,s,i,r])})({sessionId:y,trackedElement:k,trackType:i});const{useIncomingVideoSettings:I}=(0,o.R3)(),{isParticipantVideoEnabled:x}=I(),P=(0,c.useMemo)((()=>({participant:n,participantViewElement:k,videoElement:_,videoPlaceholderElement:R,trackType:i})),[_,R,n,k,i]),O=(0,c.useMemo)((()=>({setVideoElement:e=>{null===u||void 0===u||u(e),E(e)},setVideoPlaceholderElement:e=>{null===d||void 0===d||d(e),A(e)}})),[u,d]);return(0,a.jsx)("div",{"data-testid":"participant-view",ref:e=>{pn(t,e),T(e)},className:(0,Vt.A)("str-video__participant-view",b&&"str-video__participant-view--dominant-speaker",v&&"str-video__participant-view--speaking",!S&&"str-video__participant-view--no-video",!w&&"str-video__participant-view--no-audio",h),children:(0,a.jsxs)(Zt.Provider,{value:P,children:[!g&&!l&&(0,a.jsxs)(a.Fragment,{children:[w&&(0,a.jsx)(Yt,{participant:n,trackType:"audioTrack"}),C&&(0,a.jsx)(Yt,{participant:n,trackType:"screenShareAudioTrack"})]}),(0,a.jsx)(bn,{VideoPlaceholder:p,PictureInPicturePlaceholder:f,participant:n,trackType:i,refs:O,enabled:g||"videoTrack"!==i||x(n.sessionId),mirror:r,autoPlay:!0}),hn(m)?(0,a.jsx)(m,{}):m]})})}));jn.displayName="ParticipantView";const Ln=o.kb;Ln.displayName="StreamCall";const Un={en:{Joining:"Joining",Mic:"Mic","No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:"Ringing","Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:"Speakers",Video:"Video","You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:"Live","You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:"Reactions",Statistics:"Statistics","You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:"Invite",Join:"Join",You:"You",Me:"Me",Unknown:"Unknown","Toggle device menu":"Toggle device menu",Default:"Default","Call Recordings":"Call Recordings",Refresh:"Refresh","Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:"Allow",Revoke:"Revoke",Dismiss:"Dismiss","Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:"Pinned",Unpin:"Unpin",Pin:"Pin","Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:"Block","Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:"Enter",Leave:"Leave","Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:"Participants",Anonymous:", and ({{ count }}) anonymous","No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"}},Mn=e=>(0,a.jsx)(o.Dv,(0,i.A)({translationsOverrides:Un},e));function Fn(e,t){return"$and"in t?t.$and.every((t=>Fn(e,t))):"$or"in t?t.$or.some((t=>Fn(e,t))):"$not"in t?!Fn(e,t.$not):function(e,t){let n=!0;for(const i of Object.keys(t)){const r=t[i],s=r&&"object"===typeof r,o=e[i];if(s&&"$eq"in r){n&&(n=r.$eq===o)}else if(s&&"$neq"in r){n&&(n=r.$neq!==o)}else if(s&&"$in"in r){n&&(n=r.$in.includes(o))}else if(s&&"$contains"in r)if(Array.isArray(o)){const e=r;n&&(n=o.includes(e.$contains))}else n=!1;else{n&&(n=r===o)}if(!n)return!1}return!0}(e,t)}Mn.displayName="StreamVideo";const Vn=e=>{let{excludeLocalParticipant:t=!1,filterParticipants:n}=e;const{useParticipants:i,useRemoteParticipants:r}=(0,o.R3)(),s=i(),a=r();return(0,c.useMemo)((()=>{const e=t?a:s;return n?Bn(e,n):e}),[s,a,t,n])},Bn=(e,t)=>{const n="function"===typeof t?t:e=>Fn({userId:e.userId,isSpeaking:e.isSpeaking,isDominantSpeaker:e.isDominantSpeaker,name:e.name,roles:e.roles,isPinned:(0,s.T4)(e),hasVideo:(0,s.aV)(e),hasAudio:(0,s.Fv)(e)},t);return e.filter(n)},Hn=e=>{(0,c.useEffect)((()=>{if(e)return e.setSortParticipantsBy(s.bT),()=>{zn(e)}}),[e])},zn=e=>{const t=s.iV.get(e.type);e.setSortParticipantsBy(t.options.sortParticipantsBy||s.B6)},Wn=(e,t)=>e.isLocalParticipant?1:t.isLocalParticipant?-1:0,qn=e=>{var t,n,i,r,c;const{useParticipants:l,useRemoteParticipants:u,useHasOngoingScreenShare:d}=(0,o.R3)(),h=(0,o.Gc)(),p=l(),[f]=p,m=u(),g=d(),v=g?p.find(s.Mc):void 0;Hn(h);const b=(0,a.jsx)($n,{showParticipantCount:e.showParticipantCount,showDuration:e.showDuration,showLiveBadge:e.showLiveBadge,showSpeakerName:e.showSpeakerName}),{floatingParticipantProps:y,muted:w}=e,S=g&&(0,a.jsx)($n,{showParticipantCount:null!==(t=null===y||void 0===y?void 0:y.showParticipantCount)&&void 0!==t&&t,showDuration:null!==(n=null===y||void 0===y?void 0:y.showDuration)&&void 0!==n&&n,showLiveBadge:null!==(i=null===y||void 0===y?void 0:y.showLiveBadge)&&void 0!==i&&i,showSpeakerName:null===(r=null===y||void 0===y?void 0:y.showSpeakerName)||void 0===r||r});return(0,a.jsxs)("div",{className:"str-video__livestream-layout__wrapper",children:[!w&&(0,a.jsx)(Xt,{participants:m}),g&&v&&(0,a.jsx)(jn,{className:"str-video__livestream-layout__screen-share",participant:v,ParticipantViewUI:b,trackType:"screenShareTrack",muteAudio:!0}),f&&(0,a.jsx)(jn,{className:(0,Vt.A)(g&&(0,Vt.A)("str-video__livestream-layout__floating-participant","str-video__livestream-layout__floating-participant--".concat(null!==(c=null===y||void 0===y?void 0:y.position)&&void 0!==c?c:"top-right"))),participant:f,ParticipantViewUI:S||b,mirror:!1!==e.mirrorLocalParticipantVideo&&void 0,muteAudio:!0})]})},$n=e=>{const{enableFullScreen:t=!0,showParticipantCount:n=!0,showDuration:i=!0,showLiveBadge:r=!0,showSpeakerName:s=!1}=e,{participant:c}=Qt(),{useParticipantCount:l}=(0,o.R3)(),u=l(),d=Jn(),h=Gn(),{t:p}=(0,o.s9)();return(0,a.jsx)("div",{className:"str-video__livestream-layout__overlay",children:(0,a.jsxs)("div",{className:"str-video__livestream-layout__overlay__bar",children:[r&&(0,a.jsx)("span",{className:"str-video__livestream-layout__live-badge",children:p("Live")}),n&&(0,a.jsx)("span",{className:"str-video__livestream-layout__viewers-count",children:u}),s&&(0,a.jsx)("span",{className:"str-video__livestream-layout__speaker-name",title:c.name||c.userId||"",children:c.name||c.userId||""}),i&&(0,a.jsx)("span",{className:"str-video__livestream-layout__duration",children:Kn(d)}),t&&(0,a.jsx)("span",{className:"str-video__livestream-layout__go-fullscreen",onClick:h})]})})};qn.displayName="LivestreamLayout";const Jn=()=>{const{useIsCallLive:e,useCallSession:t}=(0,o.R3)(),n=e(),i=t(),[r,s]=(0,c.useState)((()=>{if(!i||!i.live_started_at)return 0;const e=new Date(i.live_started_at),t=new Date;return Math.floor((t.getTime()-e.getTime())/1e3)}));return(0,c.useEffect)((()=>{if(!n)return;const e=setInterval((()=>{s((e=>e+1))}),1e3);return()=>{clearInterval(e)}}),[n]),r},Gn=()=>{const{participantViewElement:e}=Qt(),[t,n]=(0,c.useState)(!1);return(0,c.useCallback)((()=>{t?document.exitFullscreen().then((()=>{n(!1)})):null===e||void 0===e||e.requestFullscreen().then((()=>{n(!0)}))}),[t,e])},Kn=e=>{const t=Math.floor(e/86400),n=Math.floor(e/3600),i=Math.floor(e%3600/60),r=e%60;return"".concat(t?t+" ":"").concat(n?n+":":"").concat(i<10?"0":"").concat(i,":").concat(r<10?"0":"").concat(r)},Yn=16,Xn=e=>{let{group:t,mirror:n,VideoPlaceholder:i,PictureInPicturePlaceholder:r,ParticipantViewUI:s}=e;return(0,a.jsx)("div",{className:(0,Vt.A)("str-video__paginated-grid-layout__group",{"str-video__paginated-grid-layout--one":1===t.length,"str-video__paginated-grid-layout--two-four":t.length>=2&&t.length<=4,"str-video__paginated-grid-layout--five-nine":t.length>=5&&t.length<=9}),children:t.map((e=>(0,a.jsx)(jn,{participant:e,muteAudio:!0,mirror:n,VideoPlaceholder:i,PictureInPicturePlaceholder:r,ParticipantViewUI:s},e.sessionId)))})};(e=>{const{groupSize:t=(e.groupSize||0)>0&&e.groupSize||Yn,excludeLocalParticipant:n=!1,filterParticipants:i,mirrorLocalParticipantVideo:r=!0,pageArrowsVisible:s=!0,VideoPlaceholder:l,ParticipantViewUI:u=On,PictureInPicturePlaceholder:d,muted:h}=e,[p,f]=(0,c.useState)(0),[m,g]=(0,c.useState)(null),v=(0,o.Gc)(),{useRemoteParticipants:b}=(0,o.R3)(),y=b(),w=Vn({excludeLocalParticipant:n,filterParticipants:i});Hn(v),(0,c.useEffect)((()=>{if(!m||!v)return;const e=v.setViewport(m);return()=>e()}),[m,v]);const S=(0,c.useMemo)((()=>((e,t)=>{const n=Math.ceil(e.length/t);return Array.from({length:n},((n,i)=>e.slice(t*i,t*i+t)))})(w,t)),[w,t]),C=S.length;(0,c.useEffect)((()=>{p>C-1&&f(Math.max(0,C-1))}),[p,C]);const k=S[p],T=!!r&&void 0;return v?(0,a.jsxs)("div",{className:"str-video__paginated-grid-layout__wrapper",ref:g,children:[!h&&(0,a.jsx)(Xt,{participants:y}),(0,a.jsxs)("div",{className:"str-video__paginated-grid-layout",children:[s&&C>1&&(0,a.jsx)(yn,{icon:"caret-left",disabled:0===p,onClick:()=>f((e=>Math.max(0,e-1)))}),k&&(0,a.jsx)(Xn,{group:k,mirror:T,VideoPlaceholder:l,ParticipantViewUI:u,PictureInPicturePlaceholder:d}),s&&C>1&&(0,a.jsx)(yn,{disabled:p===C-1,icon:"caret-right",onClick:()=>f((e=>Math.min(C-1,e+1)))})]})]}):null}).displayName="PaginatedGridLayout";const Zn=()=>(0,a.jsx)(On,{menuPlacement:"top-end"});(e=>{let{ParticipantViewUIBar:t=Zn,ParticipantViewUISpotlight:n=On,VideoPlaceholder:i,PictureInPicturePlaceholder:r,participantsBarPosition:l="bottom",participantsBarLimit:u,mirrorLocalParticipantVideo:d=!0,excludeLocalParticipant:h=!1,filterParticipants:p,pageArrowsVisible:f=!0,muted:m}=e;const g=(0,o.Gc)(),{useParticipants:v,useRemoteParticipants:b}=(0,o.R3)(),y=v(),w=b(),[S,...C]=Vn({excludeLocalParticipant:h,filterParticipants:p}),[k,T]=(0,c.useState)(null),[_,E]=(0,c.useState)(null),[R,A]=(0,c.useState)(null),I=S&&(0,s.Mc)(S),x=((e,t,n)=>{const[i,r]=(0,c.useState)({vertical:"number"===typeof n?n:null,horizontal:"number"===typeof n?n:null});return(0,c.useEffect)((()=>{if(!t||!e||"number"===typeof n||"undefined"===typeof n)return;let i=null,s=null;const o=new ResizeObserver(((n,o)=>{if(n.length>1){const e=t.firstChild;e&&(s=e.clientHeight,i=e.clientWidth,o.unobserve(t))}if(null===s||null===i)return;const a=Math.floor(e.clientHeight/s),c=Math.floor(e.clientWidth/i);r((e=>e.vertical!==a||e.horizontal!==c?{vertical:a,horizontal:c}:e))}));return o.observe(e),o.observe(t),()=>{o.disconnect()}}),[t,n,e]),i})(R,_,u),P="left"===l||"right"===l,O="top"===l||"bottom"===l;(0,c.useEffect)((()=>{if(!k||!g)return;const e=g.setViewport(k);return()=>e()}),[k,g]);const N=2===y.length;((e,t)=>{(0,c.useEffect)((()=>{if(e)return t?e.setSortParticipantsBy((0,s.SJ)(s.Vz,Wn)):e.setSortParticipantsBy(s.ND),()=>{zn(e)}}),[e,t])})(g,N);let D=C;const j=P?x.vertical:x.horizontal;"undefined"!==typeof u&&null!==j&&(D=C.slice(0,j-(I?1:0)));const L=!!d&&void 0;if(!g)return null;const U=l&&(D.length>0||I);return(0,a.jsxs)("div",{className:"str-video__speaker-layout__wrapper",children:[!m&&(0,a.jsx)(Xt,{participants:w}),(0,a.jsxs)("div",{className:(0,Vt.A)("str-video__speaker-layout",l&&"str-video__speaker-layout--variant-".concat(l)),children:[(0,a.jsx)("div",{className:"str-video__speaker-layout__spotlight",children:S&&(0,a.jsx)(jn,{participant:S,muteAudio:!0,mirror:L,trackType:I?"screenShareTrack":"videoTrack",ParticipantViewUI:n,VideoPlaceholder:i,PictureInPicturePlaceholder:r})}),U&&(0,a.jsxs)("div",{ref:A,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[(0,a.jsx)("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:T,children:(0,a.jsxs)("div",{ref:E,className:"str-video__speaker-layout__participants-bar",children:[I&&(0,a.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,a.jsx)(jn,{participant:S,ParticipantViewUI:t,VideoPlaceholder:i,PictureInPicturePlaceholder:r,mirror:L,muteAudio:!0})},S.sessionId),D.map((e=>(0,a.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,a.jsx)(jn,{participant:e,ParticipantViewUI:t,VideoPlaceholder:i,PictureInPicturePlaceholder:r,mirror:L,muteAudio:!0})},e.sessionId)))]})}),f&&P&&(0,a.jsx)(ei,{scrollWrapper:k}),f&&O&&(0,a.jsx)(Qn,{scrollWrapper:k})]})]})]})}).displayName="SpeakerLayout";const Qn=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,i]=(0,c.useState)(null);return(0,c.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollWidth>n.clientWidth?n.scrollLeft<=t?i("start"):Math.abs(n.scrollWidth-n.scrollLeft-n.clientWidth)<=t?i("end"):void i("between"):i(null)},r=new ResizeObserver(n);return r.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),r.disconnect()}}),[e,t]),n}(t);return(0,a.jsxs)(a.Fragment,{children:[n&&"start"!==n&&(0,a.jsx)(yn,{onClick:()=>{null===t||void 0===t||t.scrollBy({left:-150,behavior:"smooth"})},icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),n&&"end"!==n&&(0,a.jsx)(yn,{onClick:()=>{null===t||void 0===t||t.scrollBy({left:150,behavior:"smooth"})},icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},ei=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,i]=(0,c.useState)(null);return(0,c.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollHeight>n.clientHeight?n.scrollTop<=t?i("top"):Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<=t?i("bottom"):void i("between"):i(null)},r=new ResizeObserver(n);return r.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),r.disconnect()}}),[e,t]),n}(t);return(0,a.jsxs)(a.Fragment,{children:[n&&"top"!==n&&(0,a.jsx)(yn,{onClick:()=>{null===t||void 0===t||t.scrollBy({top:-150,behavior:"smooth"})},icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),n&&"bottom"!==n&&(0,a.jsx)(yn,{onClick:()=>{null===t||void 0===t||t.scrollBy({top:150,behavior:"smooth"})},icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},ti=e=>{const{t:t}=(0,o.s9)(),{excludeLocalParticipant:n=!1,filterParticipants:i,mirrorLocalParticipantVideo:r=!0,VideoPlaceholder:l,ParticipantViewUI:u=On}=e,[d,h]=(0,c.useState)(null),p=(0,o.Gc)(),f=Vn({excludeLocalParticipant:n,filterParticipants:i}),m=f.find((e=>(0,s.Mc)(e)));Hn(p),(0,c.useEffect)((()=>{if(d&&p)return p.setViewport(d)}),[d,p]);const g=!!r&&void 0;return p?(0,a.jsxs)("div",{className:"str-video__pip-layout",ref:h,children:[m&&(m.isLocalParticipant?(0,a.jsxs)("div",{className:"str-video__pip-screen-share-local",children:[(0,a.jsx)(ln,{icon:"screen-share-off"}),(0,a.jsx)("span",{className:"str-video__pip-screen-share-local__title",children:t("You are presenting your screen")})]}):(0,a.jsx)(jn,{participant:m,trackType:"screenShareTrack",muteAudio:!0,mirror:!1,VideoPlaceholder:l,ParticipantViewUI:u})),f.map((e=>(0,a.jsx)(jn,{participant:e,muteAudio:!0,mirror:g,VideoPlaceholder:l,ParticipantViewUI:u},e.sessionId)))]}):null};ti.displayName="PipLayout.Pip";const ni=()=>{const{useRemoteParticipants:e}=(0,o.R3)(),t=e();return(0,a.jsx)(Xt,{participants:t})};ni.displayName="PipLayout.Host";const[ii,ri,si]="1.16.2".split(".");(0,s.x8)({type:s.hc.SdkType.REACT,major:ii,minor:ri,patch:si})},9404:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter")},9460:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}),"VolumeOff")},9569:e=>{"use strict";const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<i.length;r++)n=i[r].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substring(t+1,i),n.value=e.substring(i+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");n.profile=i[2];for(let s=3;s<i.length;s++){const r=i[s],o=t.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(o){const i=t.parseRtpMap(o),s=t.matchPrefix(e,"a=fmtp:"+r+" ");switch(i.parameters=s.length?t.parseFmtp(s[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=o.length>0&&o[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const s=t.matchPrefix(e,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substring(19),10)),isNaN(r)&&(r=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,i){let r;const s=void 0!==n?n:2;r=e||t.generateSessionId();return"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t},9575:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link")},9786:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=n(9950).createContext({})},9788:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,U:()=>o});var i=n(7827),r=n(1732);function s(e){return(0,i.AQ)(this,arguments,(function(){var t,n,r;return(0,i.YH)(this,(function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,(0,i.N3)(t.read())];case 3:return n=s.sent(),r=n.value,n.done?[4,(0,i.N3)(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,(0,i.N3)(r)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function o(e){return(0,r.T)(null===e||void 0===e?void 0:e.getReader)}},9919:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(8587),r=n(8168),s=n(9950),o=n(2004),a=n(5537),c=n(8465),l=n(7497),u=n(4184),d=n(1676),h=n(8463),p=n(9254),f=n(4099),m=n(9786),g=n(2770);function v(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var b=n(4414);const y=["value"],w=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],S=(0,p.Ay)(u.A,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["size".concat((0,d.A)(n.size))]]}})((e=>{let t,{theme:n,ownerState:i}=e,s="standard"===i.color?n.palette.text.primary:n.palette[i.color].main;return n.vars&&(s="standard"===i.color?n.vars.palette.text.primary:n.vars.palette[i.color].main,t="standard"===i.color?n.vars.palette.text.primaryChannel:n.vars.palette[i.color].mainChannel),(0,r.A)({},n.typography.button,{borderRadius:(n.vars||n).shape.borderRadius,padding:11,border:"1px solid ".concat((n.vars||n).palette.divider),color:(n.vars||n).palette.action.active},i.fullWidth&&{width:"100%"},{["&.".concat(f.A.disabled)]:{color:(n.vars||n).palette.action.disabled,border:"1px solid ".concat((n.vars||n).palette.action.disabledBackground)},"&:hover":{textDecoration:"none",backgroundColor:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,l.X4)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(f.A.selected)]:{color:s,backgroundColor:n.vars?"rgba(".concat(t," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.X4)(s,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?"rgba(".concat(t," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,l.X4)(s,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(t," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.X4)(s,n.palette.action.selectedOpacity)}}}},"small"===i.size&&{padding:7,fontSize:n.typography.pxToRem(13)},"large"===i.size&&{padding:15,fontSize:n.typography.pxToRem(15)})})),C=s.forwardRef((function(e,t){const n=s.useContext(m.A),{value:l}=n,u=(0,i.A)(n,y),p=s.useContext(g.A),C=(0,a.A)((0,r.A)({},u,{selected:v(e.value,l)}),e),k=(0,h.b)({props:C,name:"MuiToggleButton"}),{children:T,className:_,color:E="standard",disabled:R=!1,disableFocusRipple:A=!1,fullWidth:I=!1,onChange:x,onClick:P,selected:O,size:N="medium",value:D}=k,j=(0,i.A)(k,w),L=(0,r.A)({},k,{color:E,disabled:R,disableFocusRipple:A,fullWidth:I,size:N}),U=(e=>{const{classes:t,fullWidth:n,selected:i,disabled:r,size:s,color:o}=e,a={root:["root",i&&"selected",r&&"disabled",n&&"fullWidth","size".concat((0,d.A)(s)),o]};return(0,c.A)(a,f.J,t)})(L),M=p||"";return(0,b.jsx)(S,(0,r.A)({className:(0,o.A)(u.className,U.root,_,M),disabled:R,focusRipple:!A,ref:t,onClick:e=>{P&&(P(e,D),e.defaultPrevented)||x&&x(e,D)},onChange:x,value:D,ownerState:L,"aria-pressed":O},j,{children:T}))}))},9939:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3235),r=n(4414);const s=(0,i.A)((0,r.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")}}]);