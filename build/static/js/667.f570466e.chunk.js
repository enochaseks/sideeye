"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[667],{227:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},1071:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 9h-2V5h2zm0 4h-2v-2h2z"}),"Announcement")},1667:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var a=o(9950),n=o(9808),r=o(6639),s=o(6491),i=o(2053),c=o(249),l=o(6050),d=o(5333),m=o(8614),h=o(1413),u=o(3563),A=o(4745),v=o(6583),f=o(33),x=o(8170),p=o(6493),j=o(9739),y=o(226),g=o(6835),I=o(7443),b=o(3235),M=o(4414);const D=(0,b.A)((0,M.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");var S=o(227),k=o(7092),w=o(7341),C=o(6592),N=o(1071),z=o(9438),_=o(4570),R=o(1367),H=o(7081),T=o(8429),V=o(2074);const X=()=>{const{notifications:e,unreadCount:t,markAllAsRead:o,markAsRead:b,deleteNotification:X,loading:F}=(0,_.E)(),{currentUser:L}=(0,R.As)(),P=(0,T.Zp)(),[E,U]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(null);(0,a.useEffect)((()=>{}),[t]);const J=()=>{U(!1)};return F?(0,M.jsx)(n.A,{maxWidth:"sm",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,M.jsx)(r.A,{})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(n.A,{maxWidth:"sm",sx:{mt:4,mb:4},children:[(0,M.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,M.jsx)(i.A,{variant:"h5",component:"h1",children:"Notifications"}),e.length>0&&t>0&&(0,M.jsx)(i.A,{variant:"caption",color:"textSecondary",onClick:()=>{null!==L&&void 0!==L&&L.uid&&o(L.uid)},sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Mark all as read"})]}),0===e.length?(0,M.jsx)(i.A,{textAlign:"center",color:"textSecondary",children:"No notifications yet."}):(0,M.jsx)(c.A,{sx:{bgcolor:"background.paper",borderRadius:2},children:e.map(((t,o)=>{return(0,M.jsxs)(a.Fragment,{children:[(0,M.jsxs)(l.Ay,{alignItems:"flex-start",onClick:()=>(e=>{if(e.isRead||b(e.id),"room_created"===e.type&&e.roomId)return Y({id:e.roomId,name:e.roomName||"Room"}),void U(!0);let t="/notifications";switch(e.type){case"like":case"comment":case"mention":case"repost":e.postId&&(t="/post/".concat(e.postId));break;case"vibit_like":case"vibit_comment":case"vibit_mention":e.postId&&(t="/vibit/".concat(e.postId));break;case"follow":e.senderId&&(t="/profile/".concat(e.senderId));break;case"message":e.roomId?t="/chat/conversation/".concat(e.roomId):e.postId?t="/chat/conversation/".concat(e.postId):e.senderId&&(t="/chat/".concat(e.senderId));break;case"live_stream":case"user_went_live":case"room_invite":case"room_invitation":case"room_removal":e.roomId&&(t="/side-room/".concat(e.roomId));break;case"room_announcement":case"room_poll":e.roomId&&(t="/chat/room/".concat(e.roomId));break;default:console.warn("Unhandled notification type for navigation: ".concat(e.type))}console.log("Navigating to: ".concat(t," for notification type: ").concat(e.type)),P(t)})(t),sx:{cursor:"pointer",backgroundColor:t.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,M.jsx)(d.A,{edge:"end","aria-label":"delete",onClick:e=>{return o=e,a=t.id,o.stopPropagation(),void X(a);var o,a},children:(0,M.jsx)(g.A,{fontSize:"small"})}),children:[(0,M.jsx)(m.A,{sx:{mr:1},children:(0,M.jsx)(V.N_,{to:"/profile/".concat(t.senderId),onClick:e=>e.stopPropagation(),style:{textDecoration:"none"},children:(0,M.jsx)(h.A,{alt:t.senderName||"User",src:t.senderAvatar||void 0,sx:{bgcolor:t.senderAvatar?void 0:"primary.main",width:40,height:40},children:!t.senderAvatar&&t.senderName?t.senderName.charAt(0).toUpperCase():null})})}),(0,M.jsx)(u.A,{primary:(0,M.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["like"===t.type&&(0,M.jsx)(I.A,{fontSize:"small",color:"error"}),"comment"===t.type&&(0,M.jsx)(D,{fontSize:"small",color:"primary"}),"follow"===t.type&&(0,M.jsx)(S.A,{fontSize:"small",color:"primary"}),"message"===t.type&&(0,M.jsx)(k.A,{fontSize:"small",color:"primary"}),("live_stream"===t.type||"user_went_live"===t.type)&&(0,M.jsx)(w.A,{fontSize:"small",color:"error"}),"room_created"===t.type&&(0,M.jsx)(C.A,{fontSize:"small",color:"primary"}),"room_announcement"===t.type&&(0,M.jsx)(N.A,{fontSize:"small",color:"warning"}),"room_poll"===t.type&&(0,M.jsx)(z.A,{fontSize:"small",color:"info"}),(0,M.jsx)(i.A,{component:"span",variant:"body2",color:"text.primary",children:t.content||"Notification content missing."})]}),secondary:(0,M.jsx)(i.A,{component:"span",variant:"caption",color:"text.secondary",children:(n=t.createdAt,n&&n instanceof Date&&!isNaN(n.getTime())?(0,H.A)(n,{addSuffix:!0}):"Invalid date")})})]}),o<e.length-1&&(0,M.jsx)(A.A,{variant:"inset",component:"li"})]},t.id);var n}))})]}),(0,M.jsxs)(v.A,{open:E,onClose:J,"aria-labelledby":"join-room-dialog-title",children:[(0,M.jsx)(f.A,{id:"join-room-dialog-title",children:"Join Room?"}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(p.A,{children:['Would you like to join the room "',null===W||void 0===W?void 0:W.name,'"?']})}),(0,M.jsxs)(j.A,{children:[(0,M.jsx)(y.A,{onClick:J,children:"Not Now"}),(0,M.jsx)(y.A,{onClick:()=>{W&&P("/chat/room/".concat(W.id)),U(!1)},variant:"contained",color:"primary",children:"Join Room"})]})]})]})}},6493:(e,t,o)=>{o.d(t,{A:()=>p});var a=o(8587),n=o(8168),r=o(9950),s=o(2004),i=o(8465),c=o(9254),l=o(9608),d=o(8463),m=o(2053),h=o(1763),u=o(423);function A(e){return(0,u.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var v=o(4414);const f=["children","className"],x=(0,c.Ay)(m.A,{shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),p=r.forwardRef((function(e,t){const o=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:r}=o,c=(0,a.A)(o,f),l=(e=>{const{classes:t}=e,o=(0,i.A)({root:["root"]},A,t);return(0,n.A)({},t,o)})(c);return(0,v.jsx)(x,(0,n.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:c,className:(0,s.A)(l.root,r)},o,{classes:l}))}))},6592:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group")},7081:(e,t,o)=>{o.d(t,{A:()=>x});var a=o(3840),n=o(7476),r=o(2588),s=o(4369),i=o(6792),c=o(8889),l=o(4388);var d=o(2434),m=o(8397),h=1440,u=2520,A=43200,v=86400;function f(e,t,o){var f,x;(0,m.A)(2,arguments);var p=(0,a.q)(),j=null!==(f=null!==(x=null===o||void 0===o?void 0:o.locale)&&void 0!==x?x:p.locale)&&void 0!==f?f:i.A;if(!j.formatDistance)throw new RangeError("locale must contain formatDistance property");var y=(0,n.A)(e,t);if(isNaN(y))throw new RangeError("Invalid time value");var g,I,b,M=(0,l.A)((g=o,(0,l.A)({},g)),{addSuffix:Boolean(null===o||void 0===o?void 0:o.addSuffix),comparison:y});y>0?(I=(0,c.A)(t),b=(0,c.A)(e)):(I=(0,c.A)(e),b=(0,c.A)(t));var D,S=(0,s.A)(b,I),k=((0,d.A)(b)-(0,d.A)(I))/1e3,w=Math.round((S-k)/60);if(w<2)return null!==o&&void 0!==o&&o.includeSeconds?S<5?j.formatDistance("lessThanXSeconds",5,M):S<10?j.formatDistance("lessThanXSeconds",10,M):S<20?j.formatDistance("lessThanXSeconds",20,M):S<40?j.formatDistance("halfAMinute",0,M):S<60?j.formatDistance("lessThanXMinutes",1,M):j.formatDistance("xMinutes",1,M):0===w?j.formatDistance("lessThanXMinutes",1,M):j.formatDistance("xMinutes",w,M);if(w<45)return j.formatDistance("xMinutes",w,M);if(w<90)return j.formatDistance("aboutXHours",1,M);if(w<h){var C=Math.round(w/60);return j.formatDistance("aboutXHours",C,M)}if(w<u)return j.formatDistance("xDays",1,M);if(w<A){var N=Math.round(w/h);return j.formatDistance("xDays",N,M)}if(w<v)return D=Math.round(w/A),j.formatDistance("aboutXMonths",D,M);if((D=(0,r.A)(b,I))<12){var z=Math.round(w/A);return j.formatDistance("xMonths",z,M)}var _=D%12,R=Math.floor(D/12);return _<3?j.formatDistance("aboutXYears",R,M):_<9?j.formatDistance("overXYears",R,M):j.formatDistance("almostXYears",R+1,M)}function x(e,t){return(0,m.A)(1,arguments),f(e,Date.now(),t)}},7341:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam")},7443:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},8614:(e,t,o)=>{o.d(t,{A:()=>x});var a=o(8587),n=o(8168),r=o(9950),s=o(2004),i=o(8465),c=o(3372),l=o(9254),d=o(8463),m=o(1763),h=o(423);function u(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,m.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var A=o(4414);const v=["className"],f=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"flex-start"===o.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),x=r.forwardRef((function(e,t){const o=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:l}=o,m=(0,a.A)(o,v),h=r.useContext(c.A),x=(0,n.A)({},o,{alignItems:h.alignItems}),p=(e=>{const{alignItems:t,classes:o}=e,a={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(a,u,o)})(x);return(0,A.jsx)(f,(0,n.A)({className:(0,s.A)(p.root,l),ownerState:x,ref:t},m))}))},9438:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Poll")}}]);