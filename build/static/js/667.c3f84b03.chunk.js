"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[667],{227:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},1667:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var a=o(9950),n=o(9808),r=o(6639),s=o(6491),i=o(2053),c=o(249),l=o(6050),d=o(5333),m=o(8614),v=o(1413),u=o(3563),h=o(4745),f=o(6583),A=o(33),x=o(8170),p=o(6493),j=o(9739),g=o(226),y=o(6835),I=o(7443),b=o(3235),S=o(4414);const k=(0,b.A)((0,S.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");var D=o(227),M=o(7092),C=o(7341),N=o(6592),w=o(4570),z=o(1367),R=o(7081),_=o(8429),X=o(2074);const H=()=>{const{notifications:e,unreadCount:t,markAllAsRead:o,markAsRead:b,deleteNotification:H,loading:T}=(0,w.E)(),{currentUser:V}=(0,z.As)(),F=(0,_.Zp)(),[E,L]=(0,a.useState)(!1),[U,W]=(0,a.useState)(null);(0,a.useEffect)((()=>{}),[t]);const P=()=>{L(!1)};return T?(0,S.jsx)(n.A,{maxWidth:"sm",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,S.jsx)(r.A,{})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(n.A,{maxWidth:"sm",sx:{mt:4,mb:4},children:[(0,S.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,S.jsx)(i.A,{variant:"h5",component:"h1",children:"Notifications"}),e.length>0&&t>0&&(0,S.jsx)(i.A,{variant:"caption",color:"textSecondary",onClick:()=>{null!==V&&void 0!==V&&V.uid&&o(V.uid)},sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Mark all as read"})]}),0===e.length?(0,S.jsx)(i.A,{textAlign:"center",color:"textSecondary",children:"No notifications yet."}):(0,S.jsx)(c.A,{sx:{bgcolor:"background.paper",borderRadius:2},children:e.map(((t,o)=>{return(0,S.jsxs)(a.Fragment,{children:[(0,S.jsxs)(l.Ay,{alignItems:"flex-start",onClick:()=>(e=>{if(e.isRead||b(e.id),"room_created"===e.type&&e.roomId)return W({id:e.roomId,name:e.roomName||"Room"}),void L(!0);let t="/notifications";switch(e.type){case"like":case"comment":case"mention":case"repost":e.postId&&(t="/post/".concat(e.postId));break;case"vibit_like":case"vibit_comment":case"vibit_mention":e.postId&&(t="/vibit/".concat(e.postId));break;case"follow":e.senderId&&(t="/profile/".concat(e.senderId));break;case"message":e.roomId?t="/chat/conversation/".concat(e.roomId):e.postId?t="/chat/conversation/".concat(e.postId):e.senderId&&(t="/chat/".concat(e.senderId));break;case"live_stream":case"room_invite":case"room_invitation":case"room_removal":e.roomId&&(t="/side-room/".concat(e.roomId));break;default:console.warn("Unhandled notification type for navigation: ".concat(e.type))}console.log("Navigating to: ".concat(t," for notification type: ").concat(e.type)),F(t)})(t),sx:{cursor:"pointer",backgroundColor:t.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,S.jsx)(d.A,{edge:"end","aria-label":"delete",onClick:e=>{return o=e,a=t.id,o.stopPropagation(),void H(a);var o,a},children:(0,S.jsx)(y.A,{fontSize:"small"})}),children:[(0,S.jsx)(m.A,{sx:{mr:1},children:(0,S.jsx)(X.N_,{to:"/profile/".concat(t.senderId),onClick:e=>e.stopPropagation(),style:{textDecoration:"none"},children:(0,S.jsx)(v.A,{alt:t.senderName||"User",src:t.senderAvatar||void 0,sx:{bgcolor:t.senderAvatar?void 0:"primary.main",width:40,height:40},children:!t.senderAvatar&&t.senderName?t.senderName.charAt(0).toUpperCase():null})})}),(0,S.jsx)(u.A,{primary:(0,S.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["like"===t.type&&(0,S.jsx)(I.A,{fontSize:"small",color:"error"}),"comment"===t.type&&(0,S.jsx)(k,{fontSize:"small",color:"primary"}),"follow"===t.type&&(0,S.jsx)(D.A,{fontSize:"small",color:"primary"}),"message"===t.type&&(0,S.jsx)(M.A,{fontSize:"small",color:"primary"}),"live_stream"===t.type&&(0,S.jsx)(C.A,{fontSize:"small",color:"error"}),"room_created"===t.type&&(0,S.jsx)(N.A,{fontSize:"small",color:"primary"}),(0,S.jsx)(i.A,{component:"span",variant:"body2",color:"text.primary",children:t.content||"Notification content missing."})]}),secondary:(0,S.jsx)(i.A,{component:"span",variant:"caption",color:"text.secondary",children:(n=t.createdAt,n&&n instanceof Date&&!isNaN(n.getTime())?(0,R.A)(n,{addSuffix:!0}):"Invalid date")})})]}),o<e.length-1&&(0,S.jsx)(h.A,{variant:"inset",component:"li"})]},t.id);var n}))})]}),(0,S.jsxs)(f.A,{open:E,onClose:P,"aria-labelledby":"join-room-dialog-title",children:[(0,S.jsx)(A.A,{id:"join-room-dialog-title",children:"Join Room?"}),(0,S.jsx)(x.A,{children:(0,S.jsxs)(p.A,{children:['Would you like to join the room "',null===U||void 0===U?void 0:U.name,'"?']})}),(0,S.jsxs)(j.A,{children:[(0,S.jsx)(g.A,{onClick:P,children:"Not Now"}),(0,S.jsx)(g.A,{onClick:()=>{U&&F("/chat/room/".concat(U.id)),L(!1)},variant:"contained",color:"primary",children:"Join Room"})]})]})]})}},6592:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group")},7081:(e,t,o)=>{o.d(t,{A:()=>x});var a=o(3840),n=o(7476),r=o(2588),s=o(4369),i=o(6792),c=o(8889),l=o(4388);var d=o(2434),m=o(8397),v=1440,u=2520,h=43200,f=86400;function A(e,t,o){var A,x;(0,m.A)(2,arguments);var p=(0,a.q)(),j=null!==(A=null!==(x=null===o||void 0===o?void 0:o.locale)&&void 0!==x?x:p.locale)&&void 0!==A?A:i.A;if(!j.formatDistance)throw new RangeError("locale must contain formatDistance property");var g=(0,n.A)(e,t);if(isNaN(g))throw new RangeError("Invalid time value");var y,I,b,S=(0,l.A)((y=o,(0,l.A)({},y)),{addSuffix:Boolean(null===o||void 0===o?void 0:o.addSuffix),comparison:g});g>0?(I=(0,c.A)(t),b=(0,c.A)(e)):(I=(0,c.A)(e),b=(0,c.A)(t));var k,D=(0,s.A)(b,I),M=((0,d.A)(b)-(0,d.A)(I))/1e3,C=Math.round((D-M)/60);if(C<2)return null!==o&&void 0!==o&&o.includeSeconds?D<5?j.formatDistance("lessThanXSeconds",5,S):D<10?j.formatDistance("lessThanXSeconds",10,S):D<20?j.formatDistance("lessThanXSeconds",20,S):D<40?j.formatDistance("halfAMinute",0,S):D<60?j.formatDistance("lessThanXMinutes",1,S):j.formatDistance("xMinutes",1,S):0===C?j.formatDistance("lessThanXMinutes",1,S):j.formatDistance("xMinutes",C,S);if(C<45)return j.formatDistance("xMinutes",C,S);if(C<90)return j.formatDistance("aboutXHours",1,S);if(C<v){var N=Math.round(C/60);return j.formatDistance("aboutXHours",N,S)}if(C<u)return j.formatDistance("xDays",1,S);if(C<h){var w=Math.round(C/v);return j.formatDistance("xDays",w,S)}if(C<f)return k=Math.round(C/h),j.formatDistance("aboutXMonths",k,S);if((k=(0,r.A)(b,I))<12){var z=Math.round(C/h);return j.formatDistance("xMonths",z,S)}var R=k%12,_=Math.floor(k/12);return R<3?j.formatDistance("aboutXYears",_,S):R<9?j.formatDistance("overXYears",_,S):j.formatDistance("almostXYears",_+1,S)}function x(e,t){return(0,m.A)(1,arguments),A(e,Date.now(),t)}},7341:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam")},7443:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(3235),n=o(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},8614:(e,t,o)=>{o.d(t,{A:()=>x});var a=o(8587),n=o(8168),r=o(9950),s=o(2004),i=o(8465),c=o(3372),l=o(9254),d=o(8463),m=o(1763),v=o(423);function u(e){return(0,v.Ay)("MuiListItemAvatar",e)}(0,m.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var h=o(4414);const f=["className"],A=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"flex-start"===o.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),x=r.forwardRef((function(e,t){const o=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:l}=o,m=(0,a.A)(o,f),v=r.useContext(c.A),x=(0,n.A)({},o,{alignItems:v.alignItems}),p=(e=>{const{alignItems:t,classes:o}=e,a={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(a,u,o)})(x);return(0,h.jsx)(A,(0,n.A)({className:(0,s.A)(p.root,l),ownerState:x,ref:t},m))}))}}]);