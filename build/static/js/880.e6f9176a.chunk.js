"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[880],{880:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var n=i(9950),s=i(8429),r=i(4857),o=i(9808),a=i(6491),c=i(6639),l=i(2053),d=i(899),x=i(470),h=i(704),m=i(5277),p=i(7497),g=i(3174),u=i(226),A=i(2235),f=i(249),j=i(6050),y=i(4195),v=i(3563),b=i(7443),C=i(3235),S=i(4414);const w=(0,C.A)((0,S.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");var z=i(6117),E=i(3531),R=i(2289),W=i(3331),k=i(6299),M=i(9299),G=i(1367),L=i(330),I=i(6220),F=i(3380),X=i(2856),H=i(5887);const P=()=>{const{currentUser:e}=(0,G.As)(),t=(0,r.A)(),i=(0,s.Zp)(),[C,P]=(0,n.useState)(0),[B,D]=(0,n.useState)(!0),[V,J]=(0,n.useState)({totalGiftsSent:0,totalGiftsReceived:0,totalCoinsEarned:0,totalCoinsSpent:0}),T=e=>e.toFixed(2),U=e=>Math.round(100*e),_=C>=100,Y=Math.min(C/100*100,100);(0,n.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return void D(!1);console.log("[Wallet] Setting up real-time listeners for user:",e.uid);const t=(0,I.H9)(L.db,"users",e.uid),i=(0,I.aQ)(t,(e=>{if(e.exists()){const t=e.data();P(t.sideCoins||0),console.log("[Wallet] Balance updated:",t.sideCoins||0)}})),n=async()=>{let t=0,i=0,n=0,s=0;try{const r=await(0,I.GG)((0,I.rJ)(L.db,"sideRooms"));for(const o of r.docs){const r=o.id,a=(0,I.P)((0,I.rJ)(L.db,"sideRooms",r,"gifts"),(0,I._M)("senderId","==",e.uid));(await(0,I.GG)(a)).forEach((e=>{const i=e.data();t++,"basic"!==i.giftType&&(n+=i.value||0)}));const c=(0,I.P)((0,I.rJ)(L.db,"sideRooms",r,"gifts"),(0,I._M)("receiverId","==",e.uid));(await(0,I.GG)(c)).forEach((()=>{i++,s+=.08}))}J({totalGiftsSent:t,totalGiftsReceived:i,totalCoinsEarned:Math.round(100*s)/100,totalCoinsSpent:n}),console.log("[Wallet] Statistics updated:",{totalSent:t,totalReceived:i,actualCoinsEarned:Math.round(100*s)/100,actualCoinsSpent:n})}catch(r){console.error("[Wallet] Error calculating statistics:",r)}};let s;return(async()=>{try{console.log("[Wallet] Calculating gift statistics...");const t=await(0,I.GG)((0,I.rJ)(L.db,"sideRooms")),i=[];for(const n of t.docs){const t=n.id,s=(0,I.P)((0,I.rJ)(L.db,"sideRooms",t,"gifts"),(0,I._M)("senderId","==",e.uid)),r=(0,I.aQ)(s,(e=>{let i=0,n=0;e.forEach((e=>{const t=e.data();i++,"basic"!==t.giftType&&(n+=t.value||0)})),console.log("[Wallet] Room ".concat(t," - Sent: ").concat(i,", Spent: ").concat(n))}));i.push(r);const o=(0,I.P)((0,I.rJ)(L.db,"sideRooms",t,"gifts"),(0,I._M)("receiverId","==",e.uid)),a=(0,I.aQ)(o,(e=>{let i=0;e.forEach((e=>{i++})),console.log("[Wallet] Room ".concat(t," - Received: ").concat(i))}));i.push(a)}return await n(),()=>{i.forEach((e=>e()))}}catch(t){return console.error("[Wallet] Error setting up gift listeners:",t),()=>{}}})().then((e=>{s=e,D(!1)})),()=>{console.log("[Wallet] Cleaning up listeners"),i(),s&&s()}}),[null===e||void 0===e?void 0:e.uid]);const Q=[{icon:(0,S.jsx)(b.A,{color:"error"}),title:"Send Free Gifts",description:"Send hearts, side eyes, confetti, and crowns for free during live streams",coins:"Free"},{icon:(0,S.jsx)(w,{color:"warning"}),title:"Receive Gifts",description:"Earn 0.08 SC (8 LC) for each gift you receive",coins:"+0.08 SC"},{icon:(0,S.jsx)(z.A,{color:"primary"}),title:"Host Live Rooms",description:"Create engaging content to attract gift-giving viewers and earn SideCoins",coins:"Varies"}],Z=[{name:"Diamond Crown",cost:100,icon:(0,S.jsx)(E.A,{sx:{color:"#00BCD4"}}),description:"Ultra-rare premium gift"},{name:"Golden Trophy",cost:50,icon:(0,S.jsx)(R.A,{sx:{color:"#FFD700"}}),description:"Show ultimate appreciation"},{name:"Ruby Heart",cost:25,icon:(0,S.jsx)(b.A,{sx:{color:"#E91E63"}}),description:"Premium love gift"}];return B?(0,S.jsx)(o.A,{maxWidth:"lg",sx:{py:4},children:(0,S.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,S.jsx)(c.A,{})})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(X.mg,{children:[(0,S.jsx)("title",{children:"Wallet - SideEye"}),(0,S.jsx)("meta",{name:"description",content:"Manage your SideCoins balance and learn about earning rewards"})]}),(0,S.jsxs)(o.A,{maxWidth:"lg",sx:{py:4},children:[(0,S.jsxs)(l.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[(0,S.jsx)(W.A,{fontSize:"large",color:"primary"}),"My Wallet"]}),(0,S.jsxs)(d.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,S.jsx)(x.A,{sx:{background:"linear-gradient(135deg, ".concat(t.palette.primary.main,", ").concat(t.palette.primary.dark,")"),color:"white",position:"relative",overflow:"hidden"},children:(0,S.jsxs)(h.A,{sx:{p:3},children:[(0,S.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,S.jsx)(l.A,{variant:"h6",children:"Current Balance"}),(0,S.jsx)(F.A,{size:"large"})]}),(0,S.jsxs)(a.A,{sx:{mb:2},children:[(0,S.jsxs)(l.A,{variant:"h3",component:"div",fontWeight:"bold",children:[T(C)," SC"]}),(0,S.jsxs)(l.A,{variant:"h6",sx:{opacity:.8},children:[U(C)," LC"]})]}),(0,S.jsx)(a.A,{sx:{mb:2},children:_?(0,S.jsx)(m.A,{label:"\ud83d\udc8e Premium Access Unlocked",sx:{backgroundColor:(0,p.X4)("#FFD700",.2),color:"#FFD700",fontWeight:"bold"}}):(0,S.jsxs)(a.A,{children:[(0,S.jsxs)(l.A,{variant:"body2",sx:{opacity:.9,mb:1},children:["Premium Access Progress: ",Y.toFixed(1),"%"]}),(0,S.jsx)(a.A,{sx:{width:"100%",height:6,backgroundColor:(0,p.X4)("#fff",.2),borderRadius:3,overflow:"hidden"},children:(0,S.jsx)(a.A,{sx:{width:"".concat(Y,"%"),height:"100%",backgroundColor:"#FFD700",transition:"width 0.3s ease"}})}),(0,S.jsxs)(l.A,{variant:"caption",sx:{opacity:.8,mt:.5,display:"block"},children:["Need ",T(100-C)," SC more for premium gifts"]})]})}),(0,S.jsx)(l.A,{variant:"body2",sx:{opacity:.9},children:_?"Ready to send premium gifts!":"SideCoins available to spend"}),(0,S.jsx)(a.A,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:(0,p.X4)("#fff",.1),zIndex:0}})]})})}),(0,S.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,S.jsx)(x.A,{sx:{height:"100%"},children:(0,S.jsxs)(h.A,{sx:{p:3},children:[(0,S.jsxs)(l.A,{variant:"h6",gutterBottom:!0,children:[(0,S.jsx)(k.A,{sx:{mr:1,verticalAlign:"middle"}}),"Your Activity"]}),Math.abs(C-V.totalCoinsEarned)>.01&&(0,S.jsx)(g.A,{severity:"warning",sx:{mb:2},action:(0,S.jsx)(u.A,{color:"inherit",size:"small",onClick:async()=>{if(null!==e&&void 0!==e&&e.uid&&L.db){if(window.confirm("This will set your balance to match your calculated earnings (".concat(T(V.totalCoinsEarned)," SC). Continue?")))try{const t=(0,I.H9)(L.db,"users",e.uid);await(0,I.mZ)(t,{sideCoins:V.totalCoinsEarned}),H.oR.success("Balance corrected to ".concat(T(V.totalCoinsEarned)," SC!")),console.log("[Balance Correction] Updated balance from ".concat(C," to ").concat(V.totalCoinsEarned))}catch(t){console.error("[Balance Correction] Error:",t),H.oR.error("Failed to correct balance")}}else H.oR.error("Cannot correct balance: User not authenticated")},variant:"outlined",children:"Fix Balance"}),children:(0,S.jsxs)(l.A,{variant:"body2",children:["Balance mismatch detected! You should have ",T(V.totalCoinsEarned)," SC but have ",T(C)," SC."]})}),(0,S.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(d.Ay,{item:!0,xs:6,children:(0,S.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,S.jsx)(l.A,{variant:"h4",color:"primary",fontWeight:"bold",children:V.totalGiftsSent}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Gifts Sent"})]})}),(0,S.jsx)(d.Ay,{item:!0,xs:6,children:(0,S.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,S.jsx)(l.A,{variant:"h4",color:"secondary",fontWeight:"bold",children:V.totalGiftsReceived}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Gifts Received"})]})}),(0,S.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,S.jsxs)(a.A,{sx:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[(0,S.jsx)(F.A,{size:"small"}),(0,S.jsx)(l.A,{variant:"h4",color:"success.main",fontWeight:"bold",children:T(V.totalCoinsEarned)})]}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"SC Earned"}),(0,S.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["(",U(V.totalCoinsEarned)," LC)"]})]}),(0,S.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,S.jsxs)(a.A,{sx:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[(0,S.jsx)(F.A,{size:"small"}),(0,S.jsx)(l.A,{variant:"h4",color:"error",fontWeight:"bold",children:T(V.totalCoinsSpent)})]}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"SC Spent"}),(0,S.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["(",U(V.totalCoinsSpent)," LC)"]})]})]})]})})}),(0,S.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(A.A,{sx:{p:3,height:"100%"},children:[(0,S.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"\ud83d\udcb0 Earn More SideCoins"}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Send free gifts during live streams to earn SideCoins!"}),(0,S.jsx)(f.A,{dense:!0,children:Q.map(((e,t)=>(0,S.jsxs)(j.Ay,{sx:{px:0},children:[(0,S.jsx)(y.A,{sx:{minWidth:40},children:e.icon}),(0,S.jsx)(v.A,{primary:e.title,secondary:e.description}),(0,S.jsx)(a.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:"number"===typeof e.coins?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(F.A,{size:"small"}),(0,S.jsxs)(l.A,{variant:"body2",fontWeight:"bold",children:["+",e.coins]})]}):(0,S.jsx)(l.A,{variant:"body2",fontWeight:"bold",color:"primary",children:e.coins})})]},t)))}),(0,S.jsx)(a.A,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:(0,S.jsx)(u.A,{variant:"outlined",size:"small",fullWidth:!0,onClick:()=>{i("/settings#sidecoins-guide")},startIcon:(0,S.jsx)(M.A,{}),sx:{textTransform:"none",borderColor:(0,p.X4)(t.palette.primary.main,.5),"&:hover":{borderColor:t.palette.primary.main,backgroundColor:(0,p.X4)(t.palette.primary.main,.05)}},children:"Learn More About SideCoins & LittleCoins"})})]})}),(0,S.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(A.A,{sx:{p:3,height:"100%"},children:[(0,S.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,S.jsx)(l.A,{variant:"h6",color:"primary",children:"\u2728 Premium Gifts"}),(0,S.jsx)(m.A,{label:"Coming Soon",size:"small",color:"warning",variant:"outlined"})]}),(0,S.jsx)(g.A,{severity:_?"success":"info",sx:{mb:2},icon:_?(0,S.jsx)(E.A,{}):(0,S.jsx)(M.A,{}),children:(0,S.jsx)(l.A,{variant:"body2",children:_?"\ud83c\udf89 You have premium access! You can send premium gifts when they're released.":"Premium gifts require 100.00 SC (10,000 LC) to unlock. You need ".concat(T(100-C)," SC more.")})}),(0,S.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Preview of upcoming premium gifts:"}),(0,S.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:Z.map(((e,i)=>(0,S.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,p:1.5,border:"1px solid",borderColor:"divider",borderRadius:1,opacity:_?.9:.7,backgroundColor:_?(0,p.X4)(t.palette.success.main,.05):"transparent"},children:[e.icon,(0,S.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,S.jsx)(l.A,{variant:"body2",fontWeight:"medium",children:e.name}),(0,S.jsx)(l.A,{variant:"caption",color:"text.secondary",children:e.description})]}),(0,S.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,S.jsx)(F.A,{size:"small"}),(0,S.jsxs)(l.A,{variant:"body2",fontWeight:"bold",children:[e.cost,".00 SC"]})]})]},i)))}),!_&&(0,S.jsxs)(l.A,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block",textAlign:"center"},children:["\ud83d\udca1 Earn ",T(100-C)," SC more by receiving ~",Math.ceil((100-C)/.08)," gifts as a host!"]}),(0,S.jsx)(a.A,{sx:{mt:2,textAlign:"center"},children:(0,S.jsx)(u.A,{variant:"text",size:"small",onClick:()=>{i("/settings#sidecoins-guide")},startIcon:(0,S.jsx)(M.A,{}),sx:{textTransform:"none",fontSize:"0.75rem",color:(0,p.X4)(t.palette.text.secondary,.8),"&:hover":{color:t.palette.primary.main}},children:"Understanding SideCoins & LittleCoins"})})]})}),(0,S.jsx)(d.Ay,{item:!0,xs:12,children:(0,S.jsxs)(A.A,{sx:{p:4,textAlign:"center",background:"linear-gradient(135deg, ".concat((0,p.X4)(t.palette.primary.main,.1),", ").concat((0,p.X4)(t.palette.secondary.main,.1),")")},children:[(0,S.jsx)(l.A,{variant:"h5",gutterBottom:!0,children:"Ready to Start Earning?"}),(0,S.jsx)(l.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Join live streams and start sending gifts to earn SideCoins!"}),(0,S.jsx)(u.A,{variant:"contained",size:"large",onClick:()=>i("/discover"),sx:{mr:2},children:"Discover Live Rooms"}),(0,S.jsx)(u.A,{variant:"outlined",size:"large",onClick:()=>i("/profile"),children:"View My Profile"})]})})]})]})]})}},2289:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(3235),s=i(4414);const r=(0,n.A)((0,s.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"}),"WorkspacePremium")},3380:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(9379),s=(i(9950),i(6491)),r=i(2053),o=i(7497),a=i(4414);const c=e=>{let{size:t="medium",color:i="#FFD700",value:c,showValue:l=!0,sx:d={}}=e;const{width:x,height:h,fontSize:m,valueSize:p}=(()=>{switch(t){case"small":return{width:20,height:20,fontSize:"0.6rem",valueSize:"0.75rem"};case"large":return{width:32,height:32,fontSize:"0.8rem",valueSize:"1rem"};default:return{width:24,height:24,fontSize:"0.7rem",valueSize:"0.875rem"}}})(),g=(0,a.jsx)(s.A,{sx:{width:x,height:h,borderRadius:"50%",background:"linear-gradient(145deg, ".concat(i,", ").concat((0,o.X4)(i,.7),")"),border:"2px solid ".concat((0,o.X4)(i,.8)),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",boxShadow:"\n                    inset 0 2px 4px ".concat((0,o.X4)("#fff",.3),",\n                    inset 0 -2px 4px ").concat((0,o.X4)("#000",.2),",\n                    0 2px 8px ").concat((0,o.X4)(i,.3),"\n                "),"&::before":{content:'""',position:"absolute",top:"15%",left:"15%",right:"15%",bottom:"15%",borderRadius:"50%",border:"1px solid ".concat((0,o.X4)(i,.6)),background:"linear-gradient(145deg, ".concat((0,o.X4)("#fff",.1),", transparent)")}},children:(0,a.jsx)(r.A,{variant:"caption",sx:{fontSize:m,fontWeight:"bold",color:"#000",textShadow:"0 1px 2px ".concat((0,o.X4)("#fff",.8)),zIndex:1,lineHeight:1},children:"SC"})});return void 0!==c&&l?(0,a.jsxs)(s.A,{sx:(0,n.A)({display:"flex",alignItems:"center",gap:.5},d),children:[g,(0,a.jsx)(r.A,{variant:"caption",sx:{fontSize:p,fontWeight:"medium",color:"text.primary"},children:c})]}):(0,a.jsx)(s.A,{sx:d,children:g})}},3531:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(3235),s=i(4414);const r=(0,n.A)((0,s.jsx)("path",{d:"M12.16 3h-.32L9.21 8.25h5.58zm4.3 5.25h5.16L19 3h-5.16zm4.92 1.5h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"}),"Diamond")},6117:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(3235),s=i(4414);const r=(0,n.A)((0,s.jsx)("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m11 15H4v-2h16zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20z"}),"CardGiftcard")},7443:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(3235),s=i(4414);const r=(0,n.A)((0,s.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},9299:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(3235),s=i(4414);const r=(0,n.A)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")}}]);