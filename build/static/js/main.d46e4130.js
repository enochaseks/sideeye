/*! For license information please see main.d46e4130.js.LICENSE.txt */
(()=>{var e={39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(4421)},191:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case a:return e;default:return t}}case r:return t}}}t.vM=c,t.lD=h},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7868)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},869:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(5043);var r=n(3290),i=n(579);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},950:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3468).A},1052:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||l(e)}),[])]}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},1188:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},1475:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7123);const i=e=>(0,r.A)(e)&&"classes"!==e},1668:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1782:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(4440);const o=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},2372:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o});var r=n(9386);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?`${n}-${o}`:`${r.A.generate(e)}-${t}`}},2374:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(5043)),i=n(3174);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},2427:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1668).A},2456:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},2532:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2372);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function $(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case C:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ae=null;function Ce(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),_e(e.stateNode,e.type,t))}}function ke(e){Se?Ae?Ae.push(e):Ae=[e]:Se=e}function Ee(){if(Se){var e=Se,t=Ae;if(Ae=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Se||null!==Ae)&&(Te(),Ee())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){je=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){je=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Le=null,Fe=!1,ze=null,$e={onError:function(e){Me=!0,Le=e}};function Ue(e,t,n,r,i,o,s,a,l){Me=!1,Le=null,De.apply($e,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,St,At,Ct,kt=!1,Et=[],It=null,Tt=null,Rt=null,Pt=new Map,Nt=new Map,jt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function $t(){kt=!1,null!==It&&Ft(It)&&(It=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(zt),Nt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Pt.forEach(t),Nt.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Lt(n),null===n.blockedOn&&jt.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Ht(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Kt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Tt=Mt(Tt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Mt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Gt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),vn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return An}var kn=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=on(kn),In=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Pn),jn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function $n(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Fr(e,0)}function Yn(e){if(K(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];qn(t,Kn,e,xe(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Ar={};function Cr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return Sr[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=Cr("animationend"),Er=Cr("animationiteration"),Ir=Cr("animationstart"),Tr=Cr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Rr.set(e,t),l(t,[e])}for(var jr=0;jr<Pr.length;jr++){var Or=Pr[jr];Nr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Nr(kr,"onAnimationEnd"),Nr(Er,"onAnimationIteration"),Nr(Ir,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Le;Me=!1,Le=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||$r(t,!1,e),$r(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,$r("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=xe(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case kr:case Er:case Ir:l=vn;break;case Tr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ne(f,h))&&u.push(qr(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wi(l),p=null==c?a:wi(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(s,a,l,u,!1),null!==c&&null!==d&&Gr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if(Wn(a))if(Xn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?qn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?$n(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Hr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&$n(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift(qr(e,o,i)),null!=(o=Ne(e,t))&&r.push(qr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ne(n,o))&&s.unshift(qr(n,l,a)):i||null!=(l=Ne(n,o))&&s.push(qr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var _i=[],Si=-1;function Ai(e){return{current:e}}function Ci(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function ki(e,t){Si++,_i[Si]=e.current,e.current=t}var Ei={},Ii=Ai(Ei),Ti=Ai(!1),Ri=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Ci(Ti),Ci(Ii)}function Oi(e,t,n){if(Ii.current!==Ei)throw Error(o(168));ki(Ii,t),ki(Ti,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return L({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ri=Ii.current,ki(Ii,e),ki(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ti),Ci(Ii),ki(Ii,e)):Ci(Ti),ki(Ti,n)}var Fi=null,zi=!1,$i=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!$i&&null!==Fi){$i=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Bi),i}finally{bt=t,$i=!1}}return null}var Vi=[],Wi=0,qi=null,Hi=0,Ki=[],Gi=0,Yi=null,Qi=1,Xi="";function Ji(e,t){Vi[Wi++]=Hi,Vi[Wi++]=qi,qi=e,Hi=t}function Zi(e,t,n){Ki[Gi++]=Qi,Ki[Gi++]=Xi,Ki[Gi++]=Yi,Yi=e;var r=Qi;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Qi=1<<32-st(t)+i|n<<i|r,Xi=o+e}else Qi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===qi;)qi=Vi[--Wi],Vi[Wi]=null,Hi=Vi[--Wi],Vi[Wi]=null;for(;e===Yi;)Yi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Qi=Ki[--Gi],Ki[Gi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===N&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case N:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),io&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=Dc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Oc(s.type,s.key,s.props,null,r.mode,l)).ref=vo(r,o,s),l.return=r,r=l)}return a(r);case _:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(s,r.mode,l)).return=r,r=o}return a(r);case N:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var xo=wo(!0),_o=wo(!1),So=Ai(null),Ao=null,Co=null,ko=null;function Eo(){ko=Co=Ao=null}function Io(e){var t=So.current;Ci(So),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){Ao=e,ko=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Ao)throw Error(o(308));Co=e,Ao.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var No=null;function jo(e){null===No?No=[e]:No.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,jo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $o(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return null===(i=r.interleaved)?(t.next=t,jo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=s,e.lanes=s,e.memoizedState=d}}function Wo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var qo={},Ho=Ai(qo),Ko=Ai(qo),Go=Ai(qo);function Yo(e){if(e===qo)throw Error(o(174));return e}function Qo(e,t){switch(ki(Go,t),ki(Ko,e),ki(Ho,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Ho),ki(Ho,t)}function Xo(){Ci(Ho),Ci(Ko),Ci(Go)}function Jo(e){Yo(Go.current);var t=Yo(Ho.current),n=le(t,e.type);t!==n&&(ki(Ko,e),ki(Ho,n))}function Zo(e){Ko.current===e&&(Ci(Ho),Ci(Ko))}var es=Ai(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=w.ReactCurrentDispatcher,os=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Js,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Ml|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _s(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function As(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ms(Es.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ps(9,ks.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ss)||Cs(n,t,i)}return i}function Cs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ks(e,t,n,r){t.value=n,t.getSnapshot=r,Is(t)&&Ts(e)}function Es(e,t,n){return n((function(){Is(t)&&Ts(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ts(e){var t=Do(e,1);null!==t&&nc(t,e,1,-1)}function Rs(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ns(){return bs().memoizedState}function js(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ds(e,t){return js(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Ls(e,t){return Os(4,2,e,t)}function Fs(e,t){return Os(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $s(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,zs.bind(null,t,e),n)}function Us(){}function Bs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Ml|=n,e.baseState=!0),t)}function qs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function Hs(){return bs().memoizedState}function Ks(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Qs(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Gs(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Qs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,jo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Qs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Js={readContext:Po,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Rs,useDebugValue:Us,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=qs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tl)throw Error(o(349));0!==(30&ss)||Cs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(Es.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,ks.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Tl.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-st(Qi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:xs,useRef:Ns,useState:function(){return xs(ws)},useDebugValue:Us,useDeferredValue:function(e){return Ws(bs(),ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:As,useId:Hs,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:_s,useRef:Ns,useState:function(){return _s(ws)},useDebugValue:Us,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Ws(t,ls.memoizedState,e)},useTransition:function(){return[_s(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:As,useId:Hs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=zo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$o(e,i,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Ei,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ni(t)?Ri:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ni(t)?Ri:Ii.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),da(0,t)},n}function fa(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,$o(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?_o(t,null,n,r):xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function _a(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=jc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(jl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(jl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(jl,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(jl,Nl),Nl|=r;return wa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var o=Ni(n)?Ri:Ii.current;return o=Pi(t,o),Ro(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(Ni(n)){var o=!0;Mi(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Va(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Ni(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Mo=!1;var h=t.memoizedState;s.state=h,Vo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ti.current||Mo?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Mo||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Ni(n)?Ri:Ii.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Mo=!1,h=t.memoizedState,s.state=h,Vo(t,r,s,i);var f=t.memoizedState;a!==d||h!==f||Ti.current||Mo?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(c=Mo||oa(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,o,i)}function Ia(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Wa(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Qo(e,t.containerInfo)}function Ra(e,t,n,r,i){return fo(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Na,ja,Oa,Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(s=Dc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Da,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Do(e,i),nc(r,e,i,-1))}return mc(),za(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Gi++]=Qi,Ki[Gi++]=Xi,Ki[Gi++]=Yi,Qi=e.id,Xi=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=jc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=jc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $a(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Ua(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n,t);else if(19===e.tag)$a(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,o);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ni(t.type)&&ji(),Ha(t),null;case 3:return r=t.stateNode,Xo(),Ci(Ti),Ci(Ii),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Na(e,t),Ha(t),null;case 5:Zo(t);var i=Yo(Go.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=Yo(Ho.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Q(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":H(r),Z(r,s,!0);break;case"textarea":H(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Go.current),Yo(Ho.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ci(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Xo(),Na(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Io(t.type._context),Ha(t),null;case 19:if(Ci(es),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)qa(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,qa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Bl&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ha(t),null}else 2*Xe()-s.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=es.current,ki(es,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ga(e,t){switch(to(t),t.tag){case 1:return Ni(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Ci(Ti),Ci(Ii),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ci(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(es),null;case 4:return Xo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},ja=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Ho.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Qa=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,hl(e,t,n),Qa=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ac(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){Ac(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ac(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||d,ml(t,e),Qa=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ja=e,d=e.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Ja=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Ac(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var c=Qa;if(Ya=s,(Qa=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,Ja=l):_l(i);for(;null!==o;)Ja=o,bl(o,t,n),o=o.sibling;Ja=i,Ya=a,Qa=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):wl(e)}}function wl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&il(t)}catch(p){Ac(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function _l(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var o=t.return;try{il(t)}catch(l){Ac(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Ac(t,s,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Sl,Al=Math.ceil,Cl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Il=0,Tl=null,Rl=null,Pl=0,Nl=0,jl=Ai(0),Ol=0,Dl=null,Ml=0,Ll=0,Fl=0,zl=null,$l=null,Ul=0,Bl=1/0,Vl=null,Wl=!1,ql=null,Hl=null,Kl=!1,Gl=null,Yl=0,Ql=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Il)&&e===Tl||(e===Tl&&(0===(2&Il)&&(Ll|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Xe()+500,zi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Tl?Pl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),si((function(){0===(6&Il)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var s=fc();for(Tl===e&&Pl===t||(Vl=null,Bl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Eo(),Cl.current=s,Il=i,null!==Rl?t=0:(Tl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=oc(e,s))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,$l,Vl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,$l,Vl),t);break}xc(e,$l,Vl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,$l,Vl),r);break}xc(e,$l,Vl);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=$l,$l=n,null!==t&&sc(t)),e}function sc(e){null===$l?$l=e:$l.push.apply($l,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(o(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,$l,Vl),rc(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Xe()+500,zi&&Bi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&_c();var t=Il;Il|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,0===(6&(Il=t))&&Bi()}}function dc(){Nl=jl.current,Ci(jl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Xo(),Ci(Ti),Ci(Ii),rs();break;case 5:Zo(r);break;case 4:Xo();break;case 13:case 19:Ci(es);break;case 10:Io(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Rl=e=jc(e.current,null),Pl=Nl=t,Ol=0,Dl=null,Fl=Ll=Ml=0,$l=zl=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}No=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Eo(),is.current=Js,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,kl.current=null,null===n||null===n.return){Ol=1,Dl=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Ol&&(Ol=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Js,null===e?Js:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Tl||0===(268435455&Ml)&&0===(268435455&Ll)||ac(Tl,Pl)}function gc(e,t){var n=Il;Il|=2;var r=fc();for(Tl===e&&Pl===t||(Vl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Eo(),Il=n,Cl.current=r,null!==Rl)throw Error(o(261));return Tl=null,Pl=0,Ol}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,kl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Nl)))return void(Rl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ol=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ol&&(Ol=5)}function xc(e,t,n){var r=bt,i=El.transition;try{El.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Gl);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Tl&&(Rl=Tl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=El.transition,El.transition=null;var a=bt;bt=1;var l=Il;Il|=4,kl.current=null,function(e,t){if(ei=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){Ac(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Il=l,bt=a,El.transition=s}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Yl=i),s=e.pendingLanes,0===s&&(Hl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Bi()}(e,t,n,r)}finally{El.transition=i,bt=r}return null}function _c(){if(null!==Gl){var e=wt(Yl),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var p=(d=Ja).sibling,f=d.return;if(ol(d),d===u){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ja=y;break e}Ja=s.return}}var b=e.current;for(Ja=b;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ac(l,l.return,_)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Il=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,El.transition=t}}return!1}function Sc(e,t,n){e=$o(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=$o(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Xe()-Ul?hc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Do(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kc(e,n)}function Tc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,i,s,t);case A:a=8,i|=8;break;case C:return(e=Pc(12,n,t,2|i)).elementType=C,e.lanes=s,e;case T:return(e=Pc(13,n,t,i)).elementType=T,e.lanes=s,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=s,e;case j:return Mc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case E:a=9;break e;case I:a=11;break e;case P:a=14;break e;case N:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,i,o,s,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Uc(e){if(!e)return Ei;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Di(e,n,t)}return t}function Bc(e,t,n,r,i,o,s,a,l){return(e=$c(n,r,!0,e,0,o,0,a,l)).context=Uc(null),n=e.current,(o=zo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,$o(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$o(i,t,s))&&(nc(e,i,s,o),Uo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),fo();break;case 5:Jo(t);break;case 1:Ni(t.type)&&Mi(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(ki(es,1&es.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Va(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Ro(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ea(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=_a(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ta(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Fo(e,t),Vo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ki(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ti.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=zo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),To(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),To(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Po(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),_a(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Va(e,t),t.tag=1,Ni(r)?(e=!0,Mi(t)):e=!1,Ro(t,n),sa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Vc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[fi]=s.current,Br(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Il)&&(Bl=Xe()+500,Bi()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Do(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},At=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));K(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,ke,Ee,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},3030:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},a=t[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.A)({},a),Object.keys(s).forEach((e=>{n[o][e]=i(s[e],a[e])}))):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=e[o])})),n}},3174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>_.A,StyledEngineProvider:()=>x,ThemeContext:()=>i.T,css:()=>v.AH,default:()=>S,internal_processStyles:()=>A,keyframes:()=>v.i7});var r=n(8168),i=n(9369),o=n(6598),s=n(9436),a=n(1722),l=n(5043),c=n(918),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=(0,c.A)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),h=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:h},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,a.SF)(t,n,r),(0,s.s)((function(){return(0,a.sk)(t,n,r)})),null},g=function e(t,n){var s,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(s=n.label,c=n.target);var h=f(t,n,u),g=h||p(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&b.push("label:"+s+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var x=y.length,_=1;_<x;_++)b.push(y[_],w[_])}var S=(0,i.w)((function(e,t,n){var r=v&&e.as||d,s="",u=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=l.useContext(i.T)}"string"===typeof e.className?s=(0,a.Rk)(t.registered,u,e.className):null!=e.className&&(s=e.className+" ");var w=(0,o.J)(b.concat(u),t.registered,f);s+=t.key+"-"+w.name,void 0!==c&&(s+=" "+c);var x=v&&void 0===h?p(r):g,_={};for(var S in e)v&&"as"===S||x(S)&&(_[S]=e[S]);return _.className=s,n&&(_.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:w,isStringTag:"string"===typeof r}),l.createElement(r,_))}));return S.displayName=void 0!==s?s:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=d,S.__emotion_styles=b,S.__emotion_forwardProp=h,Object.defineProperty(S,"toString",{value:function(){return"."+c}}),S.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:f(S,i,!0)})).apply(void 0,b)},S}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=n(3290),y=n(3803),b=n(579);let w;function x(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(i.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));var _=n(869);function S(e,t){return g(e,t)}const A=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>d,mL:()=>c});var r=n(9369),i=n(5043),o=n(1722),s=n(9436),a=n(6598),l=(n(3803),n(219),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,s=new Array(o);s[0]=r.E,s[1]=(0,r.c)(e,t);for(var a=2;a<o;a++)s[a]=n[a];return i.createElement.apply(null,s)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)((function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}function d(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},3319:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1782).A},3375:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},3382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(191);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t=`${e}`.match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?`${n}(${r})`:n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.vM:return a(e,e.render,"ForwardRef");case r.lD:return a(e,e.type,"memo");default:return}}}},3462:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(6564);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},3468:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},3574:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(5043),i=n(9303);let o=!0,s=!1;const a=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const p=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,a.start(100,(()=>{s=!1})),t.current=!1,!0)},ref:e}}},3654:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,b:()=>a});var r=n(5043),i=n(3030),o=n(579);const s=r.createContext(void 0);function a(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?(0,i.A)(o.defaultProps,r):o.styleOverrides||o.variants?r:(0,i.A)(o,r)}({props:t,name:n,theme:{components:r.useContext(s)}})}const l=function(e){let{value:t,children:n}=e;return(0,o.jsx)(s.Provider,{value:t,children:n})}},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function x(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function _(e,t){return s(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function A(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function C(){return u(w,y)}function k(){return y}function E(e,t){return d(w,e,t)}function I(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return m=g=1,v=h(w=e),y=0,[]}function R(e){return w="",e}function P(e){return a(E(y-1,O(91===e?e+2:40===e?e+1:e)))}function N(e){for(;(b=C())&&b<33;)A();return I(e)>2||I(b)>3?"":" "}function j(e,t){for(;--t&&A()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return E(e,k()+(t<6&&32==C()&&32==A()))}function O(e){for(;A();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&O(b);break;case 40:41===e&&O(e);break;case 92:A()}return y}function D(e,t){for(;A()&&e+b!==57&&(e+b!==84||47!==C()););return"/*"+E(t,y-1)+"*"+o(47===e?e:A())}function M(e){for(;!I(C());)A();return E(e,y)}var L="-ms-",F="-moz-",z="-webkit-",$="comm",U="rule",B="decl",V="@keyframes";function W(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function q(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case $:return"";case V:return e.return=e.value+"{"+W(e.children,r)+"}";case U:e.value=e.props.join(",")}return h(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function H(e){return R(K("",null,null,null,[""],e=T(e),0,[0],e))}function K(e,t,n,r,i,s,a,d,p){for(var m=0,g=0,v=a,y=0,b=0,w=0,x=1,_=1,E=1,I=0,T="",R=i,O=s,L=r,F=T;_;)switch(w=I,I=A()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(P(I),"&","&\f"),"&\f")&&(E=-1);break}case 34:case 39:case 91:F+=P(I);break;case 9:case 10:case 13:case 32:F+=N(w);break;case 92:F+=j(k()-1,7);continue;case 47:switch(C()){case 42:case 47:f(Y(D(A(),k()),t,n),p);break;default:F+="/"}break;case 123*x:d[m++]=h(F)*E;case 125*x:case 59:case 0:switch(I){case 0:case 125:_=0;case 59+g:-1==E&&(F=l(F,/\f/g,"")),b>0&&h(F)-v&&f(b>32?Q(F+";",r,n,v-1):Q(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(f(L=G(F,t,n,m,g,i,d,T,R=[],O=[],v),s),123===I)if(0===g)K(F,t,L,L,R,s,v,d,O);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:K(e,L,L,r&&f(G(e,L,L,0,0,i,d,T,i,R=[],v),O),i,O,v,d,r?R:O);break;default:K(F,L,L,L,[""],O,0,d,O)}}m=g=b=0,x=E=1,T=F="",v=a;break;case 58:v=1+h(F),b=w;default:if(x<1)if(123==I)--x;else if(125==I&&0==x++&&125==S())continue;switch(F+=o(I),I*x){case 38:E=g>0?1:(F+="\f",-1);break;case 44:d[m++]=(h(F)-1)*E,E=1;break;case 64:45===C()&&(F+=P(A())),y=C(),g=v=h(T=F+=M(k())),I++;break;case 45:45===w&&2==h(F)&&(x=0)}}return s}function G(e,t,n,r,o,s,c,u,h,f,m){for(var g=o-1,v=0===o?s:[""],y=p(v),b=0,w=0,_=0;b<r;++b)for(var S=0,A=d(e,g+1,g=i(w=c[b])),C=e;S<y;++S)(C=a(w>0?v[S]+" "+A:l(A,/&\f/g,v[S])))&&(h[_++]=C);return x(e,t,n,0===o?U:u,h,f,m)}function Y(e,t,n){return x(e,t,n,$,o(b),d(e,2,-2),0)}function Q(e,t,n,r){return x(e,t,n,B,d(e,0,r),d(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,i=0;r=i,i=C(),38===r&&12===i&&(t[n]=1),!I(i);)A();return E(e,y)},J=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(I(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=X(y-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=A());return e}(T(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],o=J(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+L+e+e;case 6828:case 4268:return z+e+L+e+e;case 6165:return z+e+L+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+L+"flex-$1$2")+e;case 5443:return z+e+L+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+L+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+L+l(e,"shrink","negative")+e;case 5292:return z+e+L+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+L+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+L+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+L+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+L+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+L+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case V:return W([_(e,{value:l(e.value,"@","@"+z)})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([_(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([_(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,L+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,o,s=e.stylisPlugins||re,a={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,d=[q,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(s,d));o=function(e,t,n,r){c=n,W(H(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(l),f}},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9172);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},3940:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1668);function i(e){return(0,r.A)(e).defaultView||window}},4192:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore")},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},j={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:j,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},4318:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>a});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},s,e.easing),n=(0,i.A)({},a,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:a=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof s?s:l(s)} ${a} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4421:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o,createSvgIcon:()=>s.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m.A,unsupportedProp:()=>g,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>b.A,useIsFocusVisible:()=>w.A});var r=n(9386),i=n(6803);const o=n(2456).A;var s=n(9662),a=n(950);const l=function(e,t){return()=>null};var c=n(7328),u=n(2427),d=n(6078);n(8168);const h=function(e,t){return()=>null};const p=n(6564).A;var f=n(5013),m=n(5879);const g=function(e,t,n,r,i){return null};var v=n(4516),y=n(3319),b=n(5849),w=n(3574);const x={configure:e=>{r.A.configure(e)}}},4440:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},4516:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1052).A},4535:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});var r=n(8052),i=n(5170),o=n(3375),s=n(1475);const a=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:s.A})},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,o),c=s(t),u=Object.keys(c);function d(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-a/100}${n})`}function p(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100}${n})`}return(0,i.A)({keys:u,values:c,up:d,down:h,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||x(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5013:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4440).A},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7344).A)()},5844:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>a});var i=n(5043);let o=0;const s=(r||(r=n.t(i,2)))["useId".toString()];function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n(`mui-${o}`))}),[t]),r}(e)}},5849:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3462).A},5879:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5844).A},6078:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3940).A},6531:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(1188)},6564:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},6598:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=!1,s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(s,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(a,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)f={name:a.name,styles:a.styles,next:f},a=a.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var s in n){var a=n[s];if("object"!==typeof a){var l=a;null!=t&&void 0!==t[l]?r+=s+"{"+t[l]+"}":c(l)&&(r+=u(s)+":"+d(s,l)+";")}else{if("NO_COMPONENT_SELECTOR"===s&&o)throw new Error(h);if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var f=p(e,t,a);switch(s){case"animation":case"animationName":r+=u(s)+":"+f+";";break;default:r+=s+"{"+f+"}"}}else for(var m=0;m<a.length;m++)c(a[m])&&(r+=u(s)+":"+d(s,a[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";f=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=p(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++){if(i+=p(n,t,e[s]),r)i+=o[s]}m.lastIndex=0;for(var a,l="";null!==(a=m.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:f}}},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(7598).A},7123:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(7598),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,j(_);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(k),k=-1),f=!0;var o=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,C=null,k=-1,E=5,I=-1;function T(){return!(t.unstable_now()-I<E)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?S():(A=!1,C=null)}}else A=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){v(R,0)};function j(e){C=e,A||(A=!0,S())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,j(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(x,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,j(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.tL=g,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(457)),o=r(n(6531));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):m(e,t)}},7328:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},7344:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(8168),i=n(8587),o=n(7868),s=n(9172),a=n(7758),l=n(8812),c=n(8280);var u=n(7266);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function S(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),A=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),k=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),E=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function I(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:w.text.primary}const T=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?` (${n})`:"",JSON.stringify(t.main)));return _(t,"light",s,a),_(t,"dark",l,a),t.contrastText||(t.contrastText=I(t.main)),t},R={dark:x,light:w};return(0,s.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:T({color:c,name:"primary"}),secondary:T({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:A,name:"error"}),warning:T({color:E,name:"warning"}),info:T({color:C,name:"info"}),success:T({color:k,name:"success"}),grey:h,contrastThreshold:n,getContrastText:I,augmentColor:T,tonalOffset:a},R[t]),l)}const A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const C={textTransform:"uppercase"},k='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=k,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=n,m=(0,i.A)(n,A);const g=a/14,v=f||(e=>e/h*g+"rem"),y=(e,t,n,i,s)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:v(t),lineHeight:n},o===k?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5)+"em"}:{},s,p);var a},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,C),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function I(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const T=["none",I(0,2,1,-1,0,1,1,0,0,1,3,0),I(0,3,1,-2,0,2,2,0,0,1,5,0),I(0,3,3,-2,0,3,4,0,0,1,8,0),I(0,2,4,-1,0,4,5,0,0,1,10,0),I(0,3,5,-1,0,5,8,0,0,1,14,0),I(0,3,5,-1,0,6,10,0,0,1,18,0),I(0,4,5,-2,0,7,10,1,0,2,16,1),I(0,5,5,-3,0,8,10,1,0,3,14,2),I(0,5,6,-3,0,9,12,1,0,3,16,2),I(0,6,6,-3,0,10,14,1,0,4,18,3),I(0,6,7,-4,0,11,15,1,0,4,20,3),I(0,7,8,-4,0,12,17,2,0,5,22,4),I(0,7,8,-4,0,13,19,2,0,5,24,4),I(0,7,9,-4,0,14,21,2,0,5,26,4),I(0,8,9,-5,0,15,22,2,0,6,28,5),I(0,8,10,-5,0,16,24,2,0,6,30,5),I(0,8,11,-5,0,17,26,2,0,6,32,5),I(0,9,11,-5,0,18,28,2,0,7,34,6),I(0,9,12,-6,0,19,29,2,0,7,36,6),I(0,10,13,-6,0,20,31,3,0,8,38,7),I(0,10,13,-6,0,21,33,3,0,8,40,7),I(0,10,14,-6,0,22,35,3,0,8,42,7),I(0,11,14,-7,0,23,36,3,0,9,44,8),I(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(4318);const P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},N=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.A)(e,N);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,o.A)(18));const p=S(n),f=(0,c.A)(e);let m=(0,s.A)(f,{mixins:(g=f.breakpoints,v=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:p,shadows:T.slice(),typography:E(p,d),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},P)});var g,v;m=(0,s.A)(m,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return m=b.reduce(((e,t)=>(0,s.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},a.A,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},m}const O=j},7598:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7868);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),x=c("outlineColor"),_=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};_.propTypes={},_.filterProps=["borderRadius"];s(u,d,h,p,f,m,g,v,y,b,_,w,x);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const A=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};A.propTypes={},A.filterProps=["columnGap"];const C=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];s(S,A,C,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function k(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:k}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:k}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:k}));function E(e){return e<=1&&0!==e?100*e+"%":e}const I=(0,i.Ay)({prop:"width",transform:E}),T=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:E(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};T.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:E}),P=(0,i.Ay)({prop:"height",transform:E}),N=(0,i.Ay)({prop:"maxHeight",transform:E}),j=(0,i.Ay)({prop:"minHeight",transform:E}),O=((0,i.Ay)({prop:"size",cssProperty:"width",transform:E}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:E}),s(I,T,R,P,N,j,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_},color:{themeKey:"palette",transform:k},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:k},backgroundColor:{themeKey:"palette",transform:k},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:C},columnGap:{style:A},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:E},maxWidth:{style:T},minWidth:{transform:E},height:{transform:E},maxHeight:{transform:E},minHeight:{transform:E},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},7868:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7884:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")},7918:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7598)},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:p,skipVariantsResolver:m,skipSx:w,overridesResolver:x=y(g(p))}=c,_=(0,o.default)(c,h),S=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,A=w||!1;let C=f;"Root"===p||"root"===p?C=r:p?C=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const k=(0,s.default)(e,(0,i.default)({shouldForwardProp:C,label:undefined},_)),E=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,I=function(r){let o=E(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(E):[];d&&x&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=b(o,(0,i.default)({},e,{theme:r}))})),x(e,s)})),d&&!S&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),A||c.push(u);const h=c.length-a.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=k(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return k.withConfig&&(I.withConfig=k.withConfig),I}};var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(3174)),a=n(9482),l=(r(n(7918)),r(n(3382)),r(n(4989))),c=r(n(3234));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8206:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(5043);var r=n(3654);n(579);function i(e){return(0,r.b)(e)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(9172),s=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),d=n(9703);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,s.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(p);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},a,f)},m);y.applyStyles=d.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return y=w.reduce(((e,t)=>(0,o.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},8387:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>b});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h},8610:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(9172),s=n(7758);const a=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},c,{sx:u})}},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(7598),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(h)return h(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,d,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,s.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9172:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,Q:()=>o});var r=n(8168),i=n(5043);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(i.isValidElement(e)||!o(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((r=>{i.isValidElement(t[r])?l[r]=t[r]:o(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&o(e[r])?l[r]=a(e[r],t[r],n):n.clone?l[r]=o(t[r])?s(t[r]):t[r]:l[r]=t[r]})),l}},9303:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,A:()=>a});var r=n(5043);const i={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function a(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(s.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},9369:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>d,c:()=>f,h:()=>h,w:()=>u});var r=n(5043),i=n(3803),o=n(1722),s=n(6598),a=n(9436),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},d=r.createContext({});var h={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,a.s)((function(){return(0,o.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var a=e[p],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,s.J)(l,void 0,r.useContext(d));c+=t.key+"-"+u.name;var f={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),r.createElement(r.Fragment,null,r.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof a}),r.createElement(a,f))}))},9386:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},9482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(9172)},9662:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(8168),i=n(5043),o=n(8587),s=n(8387),a=n(8610),l=n(6803),c=n(8206),u=n(4535),d=n(2532),h=n(2372);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(579);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.A)(n.color)}`],t[`fontSize${(0,l.A)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,d,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),v=i.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:x,viewBox:_="0 0 24 24"}=n,S=(0,o.A)(n,m),A=i.isValidElement(u)&&"svg"===u.type,C=(0,r.A)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:_,hasSvgAsChild:A}),k={};w||(k.viewBox=_);const E=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.A)(t)}`,`fontSize${(0,l.A)(n)}`]};return(0,a.A)(i,p,r)})(C);return(0,f.jsxs)(g,(0,r.A)({as:v,className:(0,s.A)(E.root,d),focusable:"false",color:b,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},k,S,A&&u.props,{ownerState:C,children:[A?u.props.children:u,x?(0,f.jsx)("title",{children:x}):null]}))}));v.muiName="SvgIcon";const y=v;function b(e,t){function n(n,i){return(0,f.jsx)(y,(0,r.A)({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return n.muiName=y.muiName,i.memo(i.forwardRef(n))}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>s,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(9172);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),s)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t,r=n(5043),i=n.t(r,2),o=n(4391),s=n(7950),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}(t=e||(e={})).Pop="POP",t.Push="PUSH",t.Replace="REPLACE";const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(xI){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,d=e.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){d=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:d,location:w.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let w={get action(){return d},get location(){return t(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,y),m=e,()=>{o.removeEventListener(c,y),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){d=e.Push;let i=p(w.location,t,n);r&&r(i,t),g=v()+1;let l=h(i,g),c=w.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(c)}s&&m&&m({action:d,location:w.location,delta:1})},replace:function(t,n){d=e.Replace;let i=p(w.location,t,n);r&&r(i,t),g=v();let o=h(i,g),l=w.createHref(i);a.replaceState(o,"",l),s&&m&&m({action:d,location:w.location,delta:0})},go:e=>a.go(e)};return w}var v,y;(y=v||(v={})).data="data",y.deferred="deferred",y.redirect="redirect",y.error="error";new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let i=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=j(i);s=P(o[a],e,r)}return s}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=z([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:R(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=_(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,A=3,C=2,k=1,E=10,I=-2,T=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=I),t&&(r+=C),n.filter((e=>!T(e))).reduce(((e,t)=>e+(S.test(t)?A:""===t?k:E)),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:z([o,u.pathname]),pathnameBase:$(z([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=z([o,u.pathnameBase]))}return s}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function j(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:U(r),hash:B(i)}}(i,o),d=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const z=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],q=(new Set(W),["get",...W]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const K=r.createContext(null);const G=r.createContext(null);const Y=r.createContext(null);const Q=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function Z(){return null!=r.useContext(Q)}function ee(){return Z()||u(!1),r.useContext(Q).location}function te(e){r.useContext(Y).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=r.useRef(!1);return te((()=>{n.current=!0})),r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t])}():function(){Z()||u(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(Y),{matches:o}=r.useContext(X),{pathname:s}=ee(),a=JSON.stringify(L(o,n.v7_relativeSplatPath)),l=r.useRef(!1);return te((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=F(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:z([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e])}()}function re(){let{matches:e}=r.useContext(X),t=e[e.length-1];return t?t.params:{}}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Y),{matches:o}=r.useContext(X),{pathname:s}=ee(),a=JSON.stringify(L(o,i.v7_relativeSplatPath));return r.useMemo((()=>F(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function oe(t,n,i,o){Z()||u(!1);let{navigator:s,static:a}=r.useContext(Y),{matches:l}=r.useContext(X),c=l[l.length-1],d=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let p,f=ee();if(n){var g;let e="string"===typeof n?m(n):n;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),p=e}else p=f;let v=p.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!a&&i&&i.matches&&i.matches.length>0?i.matches:b(t,{pathname:y});let x=ue(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:z([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:z([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,o);return n&&x?r.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:e.Pop}},x):x}function se(){let e=function(){var e;let t=r.useContext(J),n=fe(he.UseRouteError),i=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const ae=r.createElement(se,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},i)}function ue(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,u=!1,h=null,p=null;var f;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||ae,c&&(d<0&&0===o?(f="route-fallback",!1||ge[f]||(ge[f]=!0),u=!0,p=null):d===o&&(u=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:u?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function pe(e){let t=r.useContext(K);return t||u(!1),t}function fe(e){let t=r.useContext(G);return t||u(!1),t}function me(e){let t=function(){let e=r.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ge={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){let{to:t,replace:n,state:i,relative:o}=e;Z()||u(!1);let{future:s,static:a}=r.useContext(Y),{matches:l}=r.useContext(X),{pathname:c}=ee(),d=ne(),h=F(t,L(l,s.v7_relativeSplatPath),c,"path"===o),p=JSON.stringify(h);return r.useEffect((()=>d(JSON.parse(p),{replace:n,state:i,relative:o})),[d,p,o,n,i]),null}function be(e){u(!1)}function we(t){let{basename:n="/",children:i=null,location:o,navigationType:s=e.Pop,navigator:a,static:l=!1,future:c}=t;Z()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},c)})),[d,c,a,l]);"string"===typeof o&&(o=m(o));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:y="default"}=o,b=r.useMemo((()=>{let e=O(p,d);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:s}}),[d,p,f,g,v,y,s]);return null==b?null:r.createElement(Y.Provider,{value:h},r.createElement(Q.Provider,{children:i,value:b}))}function xe(e){let{children:t,location:n}=e;return oe(_e(t),n)}new Promise((()=>{}));r.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,_e(e.props.children,o));e.type!==be&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=_e(e.props.children,o)),n.push(s)})),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Ae(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(xI){}new Map;const ke=i.startTransition;a.flushSync,i.useId;function Ee(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,a)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&ke?ke((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.useEffect((()=>ve(i)),[i]),r.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,m=Ae(e,Ce),{basename:g}=r.useContext(Y),v=!1;if("string"===typeof d&&Te.test(d)&&(n=d,Ie))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=O(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(xI){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||u(!1);let{basename:i,navigator:o}=r.useContext(Y),{hash:s,pathname:a,search:l}=ie(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:z([i,a])),o.createHref({pathname:c,search:l,hash:s})}(d,{relative:o}),b=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=ie(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:f(u)===f(d);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,viewTransition:l})}}),[u,c,d,i,o,n,e,s,a,l])}(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:o,viewTransition:p});return r.createElement("a",Se({},m,{href:n||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Pe,Ne,je,Oe;(Ne=Pe||(Pe={})).UseScrollRestoration="useScrollRestoration",Ne.UseSubmit="useSubmit",Ne.UseSubmitFetcher="useSubmitFetcher",Ne.UseFetcher="useFetcher",Ne.useViewTransitionState="useViewTransitionState",(Oe=je||(je={})).UseFetcher="useFetcher",Oe.UseFetchers="useFetchers",Oe.UseScrollRestoration="useScrollRestoration";var De=n(8168),Me=n(8587);const Le=r.createContext(null);function Fe(){return r.useContext(Le)}const ze="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var $e=n(579);const Ue=function(e){const{children:t,theme:n}=e,i=Fe(),o=r.useMemo((()=>{const e=null===i?n:function(e,t){if("function"===typeof t)return t(e);return(0,De.A)({},e,t)}(i,n);return null!=e&&(e[ze]=null!==i),e}),[n,i]);return(0,$e.jsx)(Le.Provider,{value:o,children:t})};var Be=n(9369);const Ve=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(Be.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},We=["value"],qe=r.createContext();const He=()=>{const e=r.useContext(qe);return null!=e&&e},Ke=function(e){let{value:t}=e,n=(0,Me.A)(e,We);return(0,$e.jsx)(qe.Provider,(0,De.A)({value:null==t||t},n))};var Ge=n(3654);const Ye={};function Qe(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.useMemo((()=>{const r=e&&t[e]||t;if("function"===typeof n){const o=n(r),s=e?(0,De.A)({},t,{[e]:o}):o;return i?()=>s:s}return e?(0,De.A)({},t,{[e]:n}):(0,De.A)({},t,n)}),[e,t,n,i])}const Xe=function(e){const{children:t,theme:n,themeId:r}=e,i=Ve(Ye),o=Fe()||Ye,s=Qe(r,i,n),a=Qe(r,o,n,!0),l="rtl"===s.direction;return(0,$e.jsx)(Ue,{theme:a,children:(0,$e.jsx)(Be.T.Provider,{value:s,children:(0,$e.jsx)(Ke,{value:l,children:(0,$e.jsx)(Ge.A,{value:null==s?void 0:s.components,children:t})})})})};var Je=n(3375);const Ze=["theme"];function et(e){let{theme:t}=e,n=(0,Me.A)(e,Ze);const r=t[Je.A];let i=r||t;return"function"!==typeof t&&(r&&!r.vars?i=(0,De.A)({},r,{vars:null}):t&&!t.vars&&(i=(0,De.A)({},t,{vars:null}))),(0,$e.jsx)(Xe,(0,De.A)({},n,{themeId:r?Je.A:void 0,theme:i}))}var tt=n(8206),nt=n(869),rt=n(8280);const it=(0,rt.A)();const ot=function(){return Ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:it)};const st=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=ot(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,$e.jsx)(nt.A,{styles:o})};var at=n(5170);const lt=function(e){return(0,$e.jsx)(st,(0,De.A)({},e,{defaultTheme:at.A,themeId:Je.A}))},ct=(e,t)=>(0,De.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),ut=e=>(0,De.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const dt=function(e){const t=(0,tt.b)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:i=!1}=t;return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)(lt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var o;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,De.A)({html:ct(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,De.A)({margin:0},ut(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(e,i)}),n]})};var ht=n(8387),pt=n(3174),ft=n(8812),mt=n(8698);const gt=["className","component"];var vt=n(9386),yt=n(7344),bt=n(2532);const wt=(0,bt.A)("MuiBox",["root"]),xt=(0,yt.A)(),_t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:o}=e,s=(0,pt.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(ft.A);return r.forwardRef((function(e,r){const a=ot(n),l=(0,mt.A)(e),{className:c,component:u="div"}=l,d=(0,Me.A)(l,gt);return(0,$e.jsx)(s,(0,De.A)({as:u,ref:r,className:(0,ht.A)(c,o?o(i):i),theme:t&&a[t]||a},d))}))}({themeId:Je.A,defaultTheme:xt,defaultClassName:wt.root,generateClassName:vt.A.generate}),St=!1,At=!1,Ct="${JSCORE_VERSION}",kt=function(e,t){if(!e)throw Et(t)},Et=function(e){return new Error("Firebase Database ("+Ct+") INTERNAL ASSERT FAILED: "+e)},It=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(It(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Rt;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Rt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pt=function(e){const t=It(e);return Tt.encodeByteArray(t,!0)},Nt=function(e){return Pt(e).replace(/\./g,"")},jt=function(e){try{return Tt.decodeString(e,!0)}catch(xI){console.error("base64Decode failed: ",xI)}return null};function Ot(e){return Dt(void 0,e)}function Dt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Dt(e[n],t[n]));return e}const Mt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Lt=()=>{try{return Mt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye-bafda.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(xI){return}const t=e&&jt(e[1]);return t&&JSON.parse(t)})()}catch(xI){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${xI}`)}},Ft=e=>{var t,n;return null===(n=null===(t=Lt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},zt=e=>{const t=Ft(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$t=()=>{var e;return null===(e=Lt())||void 0===e?void 0:e.config},Ut=e=>{var t;return null===(t=Lt())||void 0===t?void 0:t[`_${e}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Vt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Nt(JSON.stringify({alg:"none",type:"JWT"})),Nt(JSON.stringify(o)),""].join(".")}function Wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function Ht(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Kt(){return!0===St||!0===At}function Gt(){return!function(){var e;const t=null===(e=Lt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(xI){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yt(){try{return"object"===typeof indexedDB}catch(xI){return!1}}class Qt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Jt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Qt(n,o,t)}}const Jt=/\{\$([^}]+)}/g;function Zt(e){return JSON.parse(e)}function en(e){return JSON.stringify(e)}const tn=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Zt(jt(o[0])||""),n=Zt(jt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(xI){}return{header:t,claims:n,data:r,signature:i}};function nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function on(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function sn(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function an(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ln(n)&&ln(o)){if(!an(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ln(e){return null!==e&&"object"===typeof e}function cn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function un(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function dn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class hn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class pn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=fn),void 0===r.error&&(r.error=fn),void 0===r.complete&&(r.complete=fn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(xI){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(xI){"undefined"!==typeof console&&console.error&&console.error(xI)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function fn(){}function mn(e,t){return`${e} failed: ${t} argument `}const gn=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function vn(e){return e&&e._delegate?e._delegate:e}class yn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bn="[DEFAULT]";class wn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(xI){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(xI){if(r)return null;throw xI}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bn})}catch(xI){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(xI){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===bn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.component?this.component.multipleInstances?e:bn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _n=[];var Sn,An;(An=Sn||(Sn={}))[An.DEBUG=0]="DEBUG",An[An.VERBOSE=1]="VERBOSE",An[An.INFO=2]="INFO",An[An.WARN=3]="WARN",An[An.ERROR=4]="ERROR",An[An.SILENT=5]="SILENT";const Cn={debug:Sn.DEBUG,verbose:Sn.VERBOSE,info:Sn.INFO,warn:Sn.WARN,error:Sn.ERROR,silent:Sn.SILENT},kn=Sn.INFO,En={[Sn.DEBUG]:"log",[Sn.VERBOSE]:"log",[Sn.INFO]:"info",[Sn.WARN]:"warn",[Sn.ERROR]:"error"},In=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=En[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r](`[${n}]  ${e.name}:`,...o)};class Tn{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=In,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Cn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sn.DEBUG,...t),this._logHandler(this,Sn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sn.VERBOSE,...t),this._logHandler(this,Sn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sn.INFO,...t),this._logHandler(this,Sn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sn.WARN,...t),this._logHandler(this,Sn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Sn.ERROR,...t),this._logHandler(this,Sn.ERROR,...t)}}let Rn,Pn;const Nn=new WeakMap,jn=new WeakMap,On=new WeakMap,Dn=new WeakMap,Mn=new WeakMap;let Ln={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return jn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||On.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Fn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Pn||(Pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Un(this),n),$n(Nn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $n(e.apply(Un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Un(this),t,...r);return On.set(o,t.sort?t.sort():[t]),$n(o)}}function zn(e){return"function"===typeof e?Fn(e):(e instanceof IDBTransaction&&function(e){if(jn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));jn.set(e,t)}(e),t=e,(Rn||(Rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Ln):e);var t}function $n(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t($n(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Nn.set(t,e)})).catch((()=>{})),Mn.set(t,e),t}(e);if(Dn.has(e))return Dn.get(e);const t=zn(e);return t!==e&&(Dn.set(e,t),Mn.set(t,e)),t}const Un=e=>Mn.get(e);const Bn=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],Wn=new Map;function qn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Wn.get(t))return Wn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Wn.set(t,o),o}Ln=(e=>({...e,get:(t,n,r)=>qn(t,n)||e.get(t,n,r),has:(t,n)=>!!qn(t,n)||e.has(t,n)}))(Ln);class Hn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Kn="@firebase/app",Gn="0.11.4",Yn=new Tn("@firebase/app"),Qn="@firebase/app-compat",Xn="@firebase/analytics-compat",Jn="@firebase/analytics",Zn="@firebase/app-check-compat",er="@firebase/app-check",tr="@firebase/auth",nr="@firebase/auth-compat",rr="@firebase/database",ir="@firebase/data-connect",or="@firebase/database-compat",sr="@firebase/functions",ar="@firebase/functions-compat",lr="@firebase/installations",cr="@firebase/installations-compat",ur="@firebase/messaging",dr="@firebase/messaging-compat",hr="@firebase/performance",pr="@firebase/performance-compat",fr="@firebase/remote-config",mr="@firebase/remote-config-compat",gr="@firebase/storage",vr="@firebase/storage-compat",yr="@firebase/firestore",br="@firebase/vertexai",wr="@firebase/firestore-compat",xr="firebase",_r="[DEFAULT]",Sr={[Kn]:"fire-core",[Qn]:"fire-core-compat",[Jn]:"fire-analytics",[Xn]:"fire-analytics-compat",[er]:"fire-app-check",[Zn]:"fire-app-check-compat",[tr]:"fire-auth",[nr]:"fire-auth-compat",[rr]:"fire-rtdb",[ir]:"fire-data-connect",[or]:"fire-rtdb-compat",[sr]:"fire-fn",[ar]:"fire-fn-compat",[lr]:"fire-iid",[cr]:"fire-iid-compat",[ur]:"fire-fcm",[dr]:"fire-fcm-compat",[hr]:"fire-perf",[pr]:"fire-perf-compat",[fr]:"fire-rc",[mr]:"fire-rc-compat",[gr]:"fire-gcs",[vr]:"fire-gcs-compat",[yr]:"fire-fst",[wr]:"fire-fst-compat",[br]:"fire-vertex","fire-js":"fire-js",[xr]:"fire-js-all"},Ar=new Map,Cr=new Map,kr=new Map;function Er(e,t){try{e.container.addComponent(t)}catch(xI){Yn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,xI)}}function Ir(e){const t=e.name;if(kr.has(t))return Yn.debug(`There were multiple attempts to register component ${t}.`),!1;kr.set(t,e);for(const n of Ar.values())Er(n,e);for(const n of Cr.values())Er(n,e);return!0}function Tr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Pr=new Xt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Nr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const jr="11.6.0";function Or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_r,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=$t()),!n)throw Pr.create("no-options");const o=Ar.get(i);if(o){if(an(n,o.options)&&an(r,o.config))return o;throw Pr.create("duplicate-app",{appName:i})}const s=new xn(i);for(const l of kr.values())s.addComponent(l);const a=new Nr(n,r,s);return Ar.set(i,a),a}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;const t=Ar.get(e);if(!t&&e===_r&&$t())return Or();if(!t)throw Pr.create("no-app",{appName:e});return t}function Mr(e,t,n){var r;let i=null!==(r=Sr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Yn.warn(e.join(" "))}Ir(new yn(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Lr="firebase-heartbeat-store";let Fr=null;function zr(){return Fr||(Fr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=$n(s);return r&&s.addEventListener("upgradeneeded",(e=>{r($n(s.result),e.oldVersion,e.newVersion,$n(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Lr)}catch(xI){console.warn(xI)}}}).catch((e=>{throw Pr.create("idb-open",{originalErrorMessage:e.message})}))),Fr}async function $r(e,t){try{const n=(await zr()).transaction(Lr,"readwrite"),r=n.objectStore(Lr);await r.put(t,Ur(e)),await n.done}catch(xI){if(xI instanceof Qt)Yn.warn(xI.message);else{const t=Pr.create("idb-set",{originalErrorMessage:null===xI||void 0===xI?void 0:xI.message});Yn.warn(t.message)}}}function Ur(e){return`${e.name}!${e.options.appId}`}class Br{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(xI){Yn.warn(xI)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Vr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),qr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Nt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(xI){return Yn.warn(xI),""}}}function Vr(){return(new Date).toISOString().substring(0,10)}class Wr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Yt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zr()).transaction(Lr),n=await t.objectStore(Lr).get(Ur(e));return await t.done,n}catch(xI){if(xI instanceof Qt)Yn.warn(xI.message);else{const t=Pr.create("idb-get",{originalErrorMessage:null===xI||void 0===xI?void 0:xI.message});Yn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qr(e){return Nt(JSON.stringify({version:2,heartbeats:e})).length}var Hr;Hr="",Ir(new yn("platform-logger",(e=>new Hn(e)),"PRIVATE")),Ir(new yn("heartbeat",(e=>new Br(e)),"PRIVATE")),Mr(Kn,Gn,Hr),Mr(Kn,Gn,"esm2017"),Mr("fire-js","");Mr("firebase","11.6.0","app");function Kr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Gr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yr=Gr,Qr=new Xt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xr=new Tn("@firebase/auth");function Jr(e){if(Xr.logLevel<=Sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xr.error(`Auth (${jr}): ${e}`,...n)}}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ri(e,...n)}function ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ri(e,...n)}function ti(e,t,n){const r=Object.assign(Object.assign({},Yr()),{[t]:n});return new Xt("auth","Firebase",r).create(t,{appName:e.name})}function ni(e){return ti(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ri(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Qr.create(e,...n)}function ii(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ri(t,...r)}}function oi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Jr(t),new Error(t)}function si(e,t){e||oi(t)}function ai(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function li(){return"http:"===ci()||"https:"===ci()}function ci(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ui(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(li()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class di{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile=qt()||Ht()}get(){return ui()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hi(e,t){si(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class pi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mi=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gi=new di(3e4,6e4);function vi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function yi(e,t,n,r){return bi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=cn(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),pi.fetch()(await xi(e,e.config.apiHost,n,s),l)}))}async function bi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fi),t);try{const t=new Si(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ai(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ai(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ai(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ai(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw ti(e,a,s);Zr(e,a)}}catch(xI){if(xI instanceof Qt)throw xI;Zr(e,"network-request-failed",{message:String(xI)})}}async function wi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await yi(e,t,n,r,i);return"mfaPendingCredential"in o&&Zr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function xi(e,t,n,r){const i=`${t}${n}?${r}`,o=e,s=o.config.emulator?hi(e.config,i):`${e.config.apiScheme}://${i}`;if(mi.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function _i(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Si{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ei(this.auth,"network-request-failed"))),gi.get())}))}}function Ai(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ei(e,t,r);return i.customData._tokenResponse=n,i}function Ci(e){return void 0!==e&&void 0!==e.getResponse}function ki(e){return void 0!==e&&void 0!==e.enterprise}class Ei{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _i(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ii(e,t){return yi(e,"GET","/v2/recaptchaConfig",vi(e,t))}async function Ti(e,t){return yi(e,"POST","/v1/accounts:lookup",t)}function Ri(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(xI){}}function Pi(e){return 1e3*Number(e)}function Ni(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Jr("JWT malformed, contained fewer than 3 sections"),null;try{const e=jt(n);return e?JSON.parse(e):(Jr("Failed to decode base64 JWT payload"),null)}catch(xI){return Jr("Caught error parsing JWT payload as JSON",null===xI||void 0===xI?void 0:xI.toString()),null}}function ji(e){const t=Ni(e);return ii(t,"internal-error"),ii("undefined"!==typeof t.exp,"internal-error"),ii("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Oi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(xI){throw xI instanceof Qt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(xI)&&e.auth.currentUser===e&&await e.auth.signOut(),xI}}class Di{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(xI){return void("auth/network-request-failed"===(null===xI||void 0===xI?void 0:xI.code)&&this.schedule(!0))}this.schedule()}}class Mi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Li(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Oi(e,Ti(n,{idToken:r}));ii(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Fi(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mi(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Fi(e){return e.map((e=>{var{providerId:t}=e,n=Kr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ii(e.idToken,"internal-error"),ii("undefined"!==typeof e.idToken,"internal-error"),ii("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ji(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ii(0!==e.length,"internal-error");const t=ji(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ii(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await bi(e,{},(async()=>{const n=cn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await xi(e,r,"/v1/token",`key=${i}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",pi.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new zi;return n&&(ii("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(ii("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(ii("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zi,this.toJSON())}_performRefresh(){return oi("not implemented")}}function $i(e,t){ii("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ui{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Kr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Di(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Oi(this,this.stsTokenManager.getToken(this.auth,e));return ii(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vn(e),r=await n.getIdToken(t),i=Ni(r);ii(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ri(Pi(i.auth_time)),issuedAtTime:Ri(Pi(i.iat)),expirationTime:Ri(Pi(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vn(e);await Li(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ii(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ii(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Li(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rr(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await Oi(this,async function(e,t){return yi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;ii(y&&_,e,"internal-error");const S=zi.fromJSON(this.name,_);ii("string"===typeof y,e,"internal-error"),$i(u,e.name),$i(d,e.name),ii("boolean"===typeof b,e,"internal-error"),ii("boolean"===typeof w,e,"internal-error"),$i(h,e.name),$i(p,e.name),$i(f,e.name),$i(m,e.name),$i(g,e.name),$i(v,e.name);const A=new Ui({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map((e=>Object.assign({},e)))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new zi;r.updateFromServerResponse(t);const i=new Ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Li(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ii(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Fi(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new zi;s.updateFromIdToken(n);const a=new Ui({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Mi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Bi=new Map;function Vi(e){si(e instanceof Function,"Expected a class definition");let t=Bi.get(e);return t?(si(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bi.set(e,t),t)}class Wi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wi.type="NONE";const qi=Wi;function Hi(e,t,n){return`firebase:${e}:${t}:${n}`}class Ki{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Hi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Hi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Ti(this.auth,{idToken:e}).catch((()=>{}));return t?Ui._fromGetAccountInfoResponse(this.auth,t,e):null}return Ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ki(Vi(qi),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Vi(qi);const o=Hi(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await Ti(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Ui._fromGetAccountInfoResponse(e,r,t)}else n=Ui._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Ki(i,e,n)):new Ki(i,e,n)}}function Gi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ji(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eo(t))return"Blackberry";if(to(t))return"Webos";if(Qi(t))return"Safari";if((t.includes("chrome/")||Xi(t))&&!t.includes("edge/"))return"Chrome";if(Zi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/firefox\//i.test(e)}function Qi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/crios\//i.test(e)}function Ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iemobile/i.test(e)}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/android/i.test(e)}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/blackberry/i.test(e)}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/webos/i.test(e)}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ro(){return function(){const e=Wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function io(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return no(e)||Zi(e)||to(e)||eo(e)||/windows phone/i.test(e)||Ji(e)}function oo(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gi(Wt());break;case"Worker":t=`${Gi(Wt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${jr}/${r}`}class so{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(xI){r(xI)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(xI){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===xI||void 0===xI?void 0:xI.message})}}}class ao{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class lo{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uo(this),this.idTokenSubscription=new uo(this),this.beforeStateQueue=new so(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Ki.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(xI){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ti(this,{idToken:e}),n=await Ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(xI){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(xI)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ii(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(xI){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Li(e)}catch(xI){if("auth/network-request-failed"!==(null===xI||void 0===xI?void 0:xI.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rr(this.app))return Promise.reject(ni(this));const t=e?vn(e):null;return t&&ii(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ii(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Rr(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rr(this.app)?Promise.reject(ni(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Vi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return yi(e,"GET","/v2/passwordPolicy",vi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ao(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return yi(e,"POST","/v2/accounts:revokeToken",vi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vi(e)||this._popupRedirectResolver;ii(t,this,"argument-error"),this.redirectPersistenceManager=await Ki.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ii(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ii(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xr.logLevel<=Sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xr.warn(`Auth (${jr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function co(e){return vn(e)}class uo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new pn(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ii(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ho={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function po(e){return ho.loadJS(e)}function fo(e){return`__${e}${Math.floor(1e6*Math.random())}`}const mo=1e12;class go{constructor(e){this.auth=e,this.counter=mo,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new bo(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||mo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||mo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||mo;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class vo{constructor(){this.enterprise=new yo}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yo{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class bo{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ii(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(xI){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(xI){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wo="NO_RECAPTCHA";class xo{constructor(e){this.type="recaptcha-enterprise",this.auth=co(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ki(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(wo)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new vo).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ii(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ei(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ki(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ho.recaptchaEnterpriseScript;0!==t.length&&(t+=i),po(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function _o(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new xo(e);let s;if(i)s=wo;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function So(e,t,n,r,i){var o,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _o(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await _o(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("PHONE_PROVIDER")){const i=await _o(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await _o(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await _o(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ao(e){const t=co(e),n=await Ii(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ei(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new xo(t).verify()}}function Co(e,t,n){const r=co(e);ii(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=ko(t),{host:s,port:a}=function(e){const t=ko(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Eo(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Eo(t)}}}(t),l={url:`${o}//${s}${null===a?"":`:${a}`}/`},c=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return ii(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ii(an(l,r.config.emulator)&&an(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ko(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Eo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Io{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,t){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function To(e,t){return yi(e,"POST","/v1/accounts:signUp",t)}async function Ro(e,t){return wi(e,"POST","/v1/accounts:signInWithPassword",vi(e,t))}async function Po(e,t){return yi(e,"POST","/v1/accounts:sendOobCode",vi(e,t))}async function No(e,t){return Po(e,t)}class jo extends Io{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new jo(e,t,"password")}static _fromEmailAndCode(e,t){return new jo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return So(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ro,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return wi(e,"POST","/v1/accounts:signInWithEmailLink",vi(e,t))}(e,{email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return So(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",To,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return wi(e,"POST","/v1/accounts:signInWithEmailLink",vi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Oo(e,t){return wi(e,"POST","/v1/accounts:signInWithIdp",vi(e,t))}class Do extends Io{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Kr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Do(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Oo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Oo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cn(t)}return e}}async function Mo(e,t){return yi(e,"POST","/v1/accounts:sendVerificationCode",vi(e,t))}const Lo={USER_NOT_FOUND:"user-not-found"};class Fo extends Io{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Fo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Fo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return wi(e,"POST","/v1/accounts:signInWithPhoneNumber",vi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await wi(e,"POST","/v1/accounts:signInWithPhoneNumber",vi(e,t));if(n.temporaryProof)throw Ai(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return wi(e,"POST","/v1/accounts:signInWithPhoneNumber",vi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Lo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Fo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zo{constructor(e){var t,n,r,i,o,s;const a=un(dn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ii(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=un(dn(e)).link,n=t?un(dn(t)).deep_link_id:null,r=un(dn(e)).deep_link_id;return(r?un(dn(r)).link:null)||r||n||t||e}(e);try{return new zo(t)}catch(n){return null}}}class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,t){return jo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zo.parseLink(t);return ii(n,"argument-error"),jo._fromEmailAndCode(e,n.code,n.tenantId)}}$o.PROVIDER_ID="password",$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bo extends Uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vo extends Bo{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vo.credential(t.oauthAccessToken)}catch(n){return null}}}Vo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Vo.PROVIDER_ID="facebook.com";class Wo extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Wo.credential(n,r)}catch(i){return null}}}Wo.GOOGLE_SIGN_IN_METHOD="google.com",Wo.PROVIDER_ID="google.com";class qo extends Bo{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qo.credential(t.oauthAccessToken)}catch(n){return null}}}qo.GITHUB_SIGN_IN_METHOD="github.com",qo.PROVIDER_ID="github.com";class Ho extends Bo{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ho.credential(n,r)}catch(i){return null}}}async function Ko(e,t){return wi(e,"POST","/v1/accounts:signUp",vi(e,t))}Ho.TWITTER_SIGN_IN_METHOD="twitter.com",Ho.PROVIDER_ID="twitter.com";class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ui._fromIdTokenResponse(e,n,r),o=Yo(n);return new Go({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Yo(n);return new Go({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Yo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Qo extends Qt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Qo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Qo(e,t,n,r)}}function Xo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Qo._fromErrorAndOperation(e,n,t,r);throw n}))}async function Jo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Oi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Go._forOperation(e,"link",r)}async function Zo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Rr(r.app))return Promise.reject(ni(r));const i="reauthenticate";try{const o=await Oi(e,Xo(r,i,t,e),n);ii(o.idToken,r,"internal-error");const s=Ni(o.idToken);ii(s,r,"internal-error");const{sub:a}=s;return ii(e.uid===a,r,"user-mismatch"),Go._forOperation(e,i,o)}catch(xI){throw"auth/user-not-found"===(null===xI||void 0===xI?void 0:xI.code)&&Zr(r,"user-mismatch"),xI}}async function es(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rr(e.app))return Promise.reject(ni(e));const r="signIn",i=await Xo(e,r,t),o=await Go._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function ts(e,t){return es(co(e),t)}class ns{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?rs._fromServerResponse(e,t):"totpInfo"in t?is._fromServerResponse(e,t):Zr(e,"internal-error")}}class rs extends ns{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new rs(t)}}class is extends ns{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new is(t)}}function os(e,t,n){var r;ii((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ii("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),ii("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ii(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ii(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ss(e){const t=co(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function as(e,t){await async function(e,t){return yi(e,"POST","/v1/accounts:update",vi(e,t))}(vn(e),{oobCode:t})}async function ls(e,t,n){if(Rr(e.app))return Promise.reject(ni(e));const r=co(e),i=So(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ko,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ss(e),t})),s=await Go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function cs(e,t,n){return Rr(e.app)?Promise.reject(ni(e)):ts(vn(e),$o.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ss(e),t}))}async function us(e,t){const n=vn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&os(n.auth,r,t);const{email:i}=await async function(e,t){return Po(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ds(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=vn(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Oi(i,async function(e,t){return yi(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function hs(e){return vn(e).signOut()}class ps{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new ps("enroll",e,t)}static _fromMfaPendingCredential(e){return new ps("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return ps._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return ps._fromIdtoken(e.multiFactorSession.idToken)}return null}}function fs(e,t){return yi(e,"POST","/v2/accounts/mfaEnrollment:start",vi(e,t))}class ms{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ns._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new ms(e)}async getSession(){return ps._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Oi(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Oi(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},yi(r,"POST","/v2/accounts/mfaEnrollment:withdraw",vi(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(xI){throw xI}var r,i}}const gs=new WeakMap;function vs(e){const t=vn(e);return gs.has(t)||gs.set(t,ms._fromUser(t)),gs.get(t)}const ys="__sak";class bs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ys,"1"),this.storage.removeItem(ys),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ws extends bs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=io(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ro()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ws.type="LOCAL";const xs=ws;function _s(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Ss(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class As{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Ss(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _s(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Ss(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Ss(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=_s(n);const i=setInterval((()=>{const e=_s(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}As.type="COOKIE";class Cs extends bs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cs.type="SESSION";const ks=Cs;class Es{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Es(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Es.receivers=[];class Ts{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=Is("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Rs(){return window}function Ps(){return"undefined"!==typeof Rs().WorkerGlobalScope&&"function"===typeof Rs().importScripts}const Ns="firebaseLocalStorageDb",js="firebaseLocalStorage",Os="fbase_key";class Ds{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ms(e,t){return e.transaction([js],t?"readwrite":"readonly").objectStore(js)}function Ls(){const e=indexedDB.open(Ns,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(js,{keyPath:Os})}catch(xI){n(xI)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(js)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ns);return new Ds(e).toPromise()}(),t(await Ls()))}))}))}async function Fs(e,t,n){const r=Ms(e,!0).put({[Os]:t,value:n});return new Ds(r).toPromise()}function zs(e,t){const n=Ms(e,!0).delete(t);return new Ds(n).toPromise()}class $s{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ls()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(xI){if(t++>3)throw xI;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ps()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Es._getInstance(Ps()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ts(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ls();return await Fs(e,ys,"1"),await zs(e,ys),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fs(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ms(e,!1).get(t),r=await new Ds(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>zs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ms(e,!1).getAll();return new Ds(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$s.type="LOCAL";const Us=$s;function Bs(e,t){return yi(e,"POST","/v2/accounts/mfaSignIn:start",vi(e,t))}const Vs=fo("rcb"),Ws=new di(3e4,6e4);class qs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Rs().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ii(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ci(Rs().grecaptcha)?Promise.resolve(Rs().grecaptcha):new Promise(((n,r)=>{const i=Rs().setTimeout((()=>{r(ei(e,"network-request-failed"))}),Ws.get());Rs()[Vs]=()=>{Rs().clearTimeout(i),delete Rs()[Vs];const o=Rs().grecaptcha;if(!o||!Ci(o))return void r(ei(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};po(`${ho.recaptchaV2Script}?${cn({onload:Vs,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(ei(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Rs().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hs{async load(e){return new go(e)}clearedOneInstance(){}}const Ks="recaptcha",Gs={theme:"light",type:"image"};class Ys{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Gs);this.parameters=n,this.type=Ks,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=co(e),this.isInvisible="invisible"===this.parameters.size,ii("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ii(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hs:new qs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(xI){return Promise.reject(xI)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ii(!this.parameters.sitekey,this.auth,"argument-error"),ii(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ii("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Rs()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ii(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ii(li()&&!Ps(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await yi(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ii(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ii(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}async function Qs(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ao(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ii("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=So(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===wo){ii((null===n||void 0===n?void 0:n.type)===Ks,e,"argument-error");return fs(e,await Xs(e,t,n))}return fs(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{ii("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ii(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=So(e,s,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===wo){ii((null===n||void 0===n?void 0:n.type)===Ks,e,"argument-error");return Bs(e,await Xs(e,t,n))}return Bs(e,t)}),"PHONE_PROVIDER");return(await a.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=So(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===wo){ii((null===n||void 0===n?void 0:n.type)===Ks,e,"argument-error");return Mo(e,await Xs(e,t,n))}return Mo(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Xs(e,t,n){ii(n.type===Ks,e,"argument-error");const r=await n.verify();ii("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Js{constructor(e){this.providerId=Js.PROVIDER_ID,this.auth=co(e)}verifyPhoneNumber(e,t){return Qs(this.auth,e,vn(t))}static credential(e,t){return Fo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Js.credentialFromTaggedObject(t)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Fo._fromTokenResponse(n,r):null}}function Zs(e,t){return t?Vi(t):(ii(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Js.PROVIDER_ID="phone",Js.PHONE_SIGN_IN_METHOD="phone";class ea extends Io{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ta(e){return es(e.auth,new ea(e),e.bypassAuthState)}function na(e){const{auth:t,user:n}=e;return ii(n,t,"internal-error"),Zo(n,new ea(e),e.bypassAuthState)}async function ra(e){const{auth:t,user:n}=e;return ii(n,t,"internal-error"),Jo(n,new ea(e),e.bypassAuthState)}class ia{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(xI){this.reject(xI)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(xI){this.reject(xI)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ta;case"linkViaPopup":case"linkViaRedirect":return ra;case"reauthViaPopup":case"reauthViaRedirect":return na;default:Zr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oa=new di(2e3,1e4);class sa extends ia{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ii(e,this.auth,"internal-error"),e}async onExecution(){si(1===this.filter.length,"Popup operations only handle one event");const e=Is();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ei(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,oa.get())};e()}}sa.currentPopupAction=null;const aa=new Map;class la extends ia{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=aa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=da(t),r=ua(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(xI){e=()=>Promise.reject(xI)}aa.set(this.auth._key(),e)}return this.bypassAuthState||aa.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ca(e,t){aa.set(e._key(),t)}function ua(e){return Vi(e._redirectPersistence)}function da(e){return Hi("pendingRedirect",e.config.apiKey,e.name)}async function ha(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rr(e.app))return Promise.reject(ni(e));const r=co(e),i=Zs(r,t),o=new la(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class pa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ma(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ma(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ei(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fa(e))}saveEventToCache(e){this.cachedEventUids.add(fa(e)),this.lastProcessedEventTime=Date.now()}}function fa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ma(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,va=/^https?/;async function ya(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return yi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ba(r))return}catch(n){}Zr(e,"unauthorized-domain")}function ba(e){const t=ai(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!va.test(n))return!1;if(ga.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wa=new di(3e4,6e4);function xa(){const e=Rs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function _a(e){return new Promise(((t,n)=>{var r,i,o;function s(){xa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xa(),n(ei(e,"network-request-failed"))},timeout:wa.get()})}if(null===(i=null===(r=Rs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Rs().gapi)||void 0===o?void 0:o.load)){const t=fo("iframefcb");return Rs()[t]=()=>{gapi.load?s():n(ei(e,"network-request-failed"))},po(`${ho.gapiScript}?onload=${t}`).catch((e=>n(e)))}s()}})).catch((e=>{throw Sa=null,e}))}let Sa=null;const Aa=new di(5e3,15e3),Ca={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ea(e){const t=e.config;ii(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hi(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:jr},i=ka.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${cn(r).slice(1)}`}async function Ia(e){const t=await function(e){return Sa=Sa||_a(e),Sa}(e),n=Rs().gapi;return ii(n,e,"internal-error"),t.open({where:document.body,url:Ea(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ca,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ei(e,"network-request-failed"),o=Rs().setTimeout((()=>{r(i)}),Aa.get());function s(){Rs().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Ta={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ra{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(xI){}}}function Pa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ta),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Wt().toLowerCase();n&&(a=Xi(c)?"_blank":n),Yi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return no(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ra(null);const d=window.open(t||"",a,u);ii(d,e,"popup-blocked");try{d.focus()}catch(xI){}return new Ra(d)}const Na="__/auth/handler",ja="emulator/auth/handler",Oa=encodeURIComponent("fac");async function Da(e,t,n,r,i,o){ii(e.config.authDomain,e,"auth-domain-config-required"),ii(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:jr,eventId:i};if(t instanceof Uo){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",on(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Bo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Oa}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Na}`;return hi(t,ja)}(e)}?${cn(a).slice(1)}${c}`}const Ma="webStorageSupport";const La=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=ha,this._overrideRedirectResult=ca}async _openPopup(e,t,n,r){var i;si(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Pa(e,await Da(e,t,n,ai(),r),Is())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rs().location.href=e}(await Da(e,t,n,ai(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(si(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ia(e),n=new pa(e);return t.register("authEvent",(t=>{ii(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ma,{type:Ma},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ma];void 0!==i&&t(!!i),Zr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ya(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return io()||Qi()||no()}};class Fa{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return oi("unexpected MultiFactorSessionType")}}}class za extends Fa{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new za(e)}_finalizeEnroll(e,t,n){return function(e,t){return yi(e,"POST","/v2/accounts/mfaEnrollment:finalize",vi(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return yi(e,"POST","/v2/accounts/mfaSignIn:finalize",vi(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $a{constructor(){}static assertion(e){return za._fromCredential(e)}}$a.FACTOR_ID="phone";var Ua="@firebase/auth",Ba="1.10.0";class Va{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ii(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wa=Ut("authIdTokenMaxAge")||300;let qa=null;var Ha,Ka;Ha={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ei("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ho=Ha,Ka="Browser",Ir(new yn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ii(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Ka,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oo(Ka)},c=new lo(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ir(new yn("auth-internal",(e=>(e=>new Va(e))(co(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(Ua,Ba,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ka)),Mr(Ua,Ba,"esm2017");var Ga,Ya,Qa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xa={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=p*g,f(n,2*i+2*o),n[2*i+2*o+1]+=l*g,f(n,2*i+2*o+1),n[2*i+2*o+1]+=p*m,f(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,f(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ya=Xa.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},Ga=Xa.Integer=r}).apply("undefined"!==typeof Qa?Qa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ja,Za,el,tl,nl,rl,il,ol,sl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},al={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof sl&&sl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function A(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,I=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);E=()=>{e.then(P)}};var P=()=>{for(var e;e=A();){try{e.h.call(e.g)}catch(n){S(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function N(){this.s=this.s,this.C=this.C}function j(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},j.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(j.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,j);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}U.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=V(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new z(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),q={};function H(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new U(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)G(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(o=e.g[t],n,r,i))&&($(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):$(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){N.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new j(t,e);else if(t instanceof j)t.target=t.target||e;else{var i=t;x(t=new j(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,N),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){N.call(this),this.h=e,this.g={}}d(le,N);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){j.call(this,"d")}function be(){j.call(this,"c")}d(ye,j),d(be,j);var we={},xe=null;function _e(){return xe=xe||new ne}function Se(e){j.call(this,we.La,e)}function Ae(e){const t=_e();re(t,new Se(t))}function Ce(e,t){j.call(this,we.STAT_EVENT,e),this.stat=t}function ke(e){const t=_e();re(t,new Ce(t,e))}function Ee(e,t){j.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Te(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Se,j),we.STAT_EVENT="statevent",d(Ce,j),we.Ma="timingevent",d(Ee,j),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Pe,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Oe,fe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Le={},Fe={};function ze(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,$e(e,null)}function $e(e,t){e.F=Date.now(),Ve(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ae(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(AI){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Qt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(AI){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(qe(a),Ve(a)),r.g=s}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ae()}catch(AI){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||Ae(),qe(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=Ht(this.g);e="";var o=r.length,s=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ke(this),He(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==h&&(this.s=4,ke(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,ke(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ge(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),on(d),d.M=!0,ke(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),He(this)}else Re(this.i,this.l,a,null),Ge(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ke(this),He(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ke(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ae(),ke(17)),Ke(this),this.s=2,He(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Ct(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){_t(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function At(e,t){return _t(e),t=kt(e,t),e.g.has(t)}function Ct(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function It(){this.g=new pe}function Tt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(xI){throw t.push(r+"type="+encodeURIComponent("_badmap")),xI}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){_t(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)At(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,At(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(Rt,fe),Rt.prototype.g=function(){return new Pt(this.l,this.j)},Rt.prototype.i=(mt={},function(){return mt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):Ot(this),3==this.readyState&&Nt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ne);var Ft=/^https?$/i,zt=["POST","PUT"];function $t(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Vt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Ft.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<qt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(xI){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}dn(e)}function Qt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function Xt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||R(),I||(E(),I=!0),T.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Tt(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||R(),I||(E(),I=!0),T.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,$e(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ee(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout((()=>{n.abort(),Et(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)})).catch((()=>{clearTimeout(r),Et(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Rt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void $t(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){$t(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Dt(o)))+"&"+t:this.m&&Mt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,ze(i,n,null)):ze(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Qt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,fn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ol=al.createWebChannelTransport=function(){return new mn},il=al.getStatEventTarget=function(){return _e()},rl=al.Event=we,nl=al.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,tl=al.ErrorCode=Ne,je.COMPLETE="complete",el=al.EventType=je,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Za=al.WebChannel=ge,al.FetchXmlHttpFactory=Rt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Ja=al.XhrIo=Lt}).apply("undefined"!==typeof sl?sl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ll="@firebase/firestore",cl="4.7.10";class ul{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ul.UNAUTHENTICATED=new ul(null),ul.GOOGLE_CREDENTIALS=new ul("google-credentials-uid"),ul.FIRST_PARTY=new ul("first-party-uid"),ul.MOCK_USER=new ul("mock-user");let dl="11.5.0";const hl=new Tn("@firebase/firestore");function pl(){return hl.logLevel}function fl(e){if(hl.logLevel<=Sn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vl);hl.debug(`Firestore (${dl}): ${e}`,...i)}}function ml(e){if(hl.logLevel<=Sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vl);hl.error(`Firestore (${dl}): ${e}`,...i)}}function gl(e){if(hl.logLevel<=Sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vl);hl.warn(`Firestore (${dl}): ${e}`,...i)}}function vl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(_I){return e}}function yl(){const e=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw ml(e),new Error(e)}function bl(e,t){e||yl()}function wl(e,t){return e}const xl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _l extends Qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Al{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ul.UNAUTHENTICATED)))}shutdown(){}}class kl{constructor(e){this.t=e,this.currentUser=ul.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bl(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Sl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sl,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{fl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(fl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sl)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(fl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(bl("string"==typeof t.accessToken),new Al(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bl(null===e||"string"==typeof e),new ul(e)}}class El{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ul.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Il{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new El(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ul.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rl{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Rr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){bl(void 0===this.o);const n=e=>{null!=e.error&&fl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,fl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{fl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):fl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Tl(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(bl("string"==typeof e.token),this.R=e.token,new Tl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Nl(){return new TextEncoder}class jl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Pl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ol(e,t){return e<t?-1:e>t?1:0}function Dl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ol(r,i);{const o=Nl(),s=Ll(o.encode(Ml(e,n)),o.encode(Ml(t,n)));return 0!==s?s:Ol(r,i)}}n+=r>65535?2:1}return Ol(e.length,t.length)}function Ml(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Ll(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ol(e[n],t[n]);return Ol(e.length,t.length)}function Fl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function zl(e){return e+"\0"}const $l=-62135596800,Ul=1e6;class Bl{static now(){return Bl.fromMillis(Date.now())}static fromDate(e){return Bl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ul);return new Bl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _l(xl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _l(xl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$l)throw new _l(xl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _l(xl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ul}_compareTo(e){return this.seconds===e.seconds?Ol(this.nanoseconds,e.nanoseconds):Ol(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-$l;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vl{static fromTimestamp(e){return new Vl(e)}static min(){return new Vl(new Bl(0,0))}static max(){return new Vl(new Bl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wl="__name__";class ql{constructor(e,t,n){void 0===t?t=0:t>e.length&&yl(),void 0===n?n=e.length-t:n>e.length-t&&yl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ql.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ql.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ol(e.length,t.length)}static compareSegments(e,t){const n=ql.isNumericId(e),r=ql.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ql.extractNumericId(e).compare(ql.extractNumericId(t)):Dl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ga.fromString(e.substring(4,e.length-2))}}class Hl extends ql{construct(e,t,n){return new Hl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new _l(xl.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Hl(e)}static emptyPath(){return new Hl([])}}const Kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gl extends ql{construct(e,t,n){return new Gl(e,t,n)}static isValidIdentifier(e){return Kl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Wl}static keyField(){return new Gl([Wl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new _l(xl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new _l(xl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new _l(xl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new _l(xl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gl(t)}static emptyPath(){return new Gl([])}}class Yl{constructor(e){this.path=e}static fromPath(e){return new Yl(Hl.fromString(e))}static fromName(e){return new Yl(Hl.fromString(e).popFirst(5))}static empty(){return new Yl(Hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yl(new Hl(e.slice()))}}const Ql=-1;class Xl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Jl(e){return e.fields.find((e=>2===e.kind))}function Zl(e){return e.fields.filter((e=>2!==e.kind))}Xl.UNKNOWN_ID=-1;class ec{constructor(e,t){this.fieldPath=e,this.kind=t}}class tc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tc(0,ic.min())}}function nc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vl.fromTimestamp(1e9===r?new Bl(n+1,0):new Bl(n,r));return new ic(i,Yl.empty(),t)}function rc(e){return new ic(e.readTime,e.key,Ql)}class ic{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ic(Vl.min(),Yl.empty(),Ql)}static max(){return new ic(Vl.max(),Yl.empty(),Ql)}}function oc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yl.comparator(e.documentKey,t.documentKey),0!==n?n:Ol(e.largestBatchId,t.largestBatchId))}const sc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ac{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function lc(e){if(e.code!==xl.FAILED_PRECONDITION||e.message!==sc)throw e;fl("LocalStore","Unexpectedly lost primary lease")}class cc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new cc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof cc?t:cc.resolve(t)}catch(e){return cc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):cc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):cc.reject(t)}static resolve(e){return new cc(((t,n)=>{t(e)}))}static reject(e){return new cc(((t,n)=>{n(e)}))}static waitFor(e){return new cc(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=cc.resolve(!1);for(const n of e)t=t.next((e=>e?cc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new cc(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new cc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const uc="SimpleDb";class dc{static open(e,t,n,r){try{return new dc(t,e.transaction(r,n))}catch(e){throw new mc(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Sl,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new mc(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=wc(t.target.error);this.m.reject(new mc(e,n))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(fl(uc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vc(t)}}class hc{static delete(e){return fl(uc,"Removing database:",e),yc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yt())return!1;if(hc.v())return!0;const e=Wt(),t=hc.C(e),n=0<t&&t<10,r=pc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,12.2===hc.C(Wt())&&ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(fl(uc,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new mc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new _l(xl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new _l(xl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new mc(e,r))},r.onupgradeneeded=e=>{fl(uc,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.O.B(t,r.transaction,e.oldVersion,this.version).next((()=>{fl(uc,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.N(e);const t=dc.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.S(),e))).catch((e=>(t.abort(e),cc.reject(e)))).toPromise();return o.catch((()=>{})),await t.p,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(fl(uc,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class fc{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return yc(this.q.delete())}}class mc extends _l{constructor(e,t){super(xl.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gc(e){return"IndexedDbTransactionError"===e.name}class vc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(fl(uc,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(fl(uc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),yc(n)}add(e){return fl(uc,"ADD",this.store.name,e,e),yc(this.store.add(e))}get(e){return yc(this.store.get(e)).next((t=>(void 0===t&&(t=null),fl(uc,"GET",this.store.name,e,t),t)))}delete(e){return fl(uc,"DELETE",this.store.name,e),yc(this.store.delete(e))}count(){return fl(uc,"COUNT",this.store.name),yc(this.store.count())}G(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new cc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new cc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){fl(uc,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.j(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.j(r,t)}X(e){const t=this.cursor({});return new cc(((n,r)=>{t.onerror=e=>{const t=wc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}j(e,t){const n=[];return new cc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new fc(i),s=t(i.primaryKey,i.value,o);if(s instanceof cc){const e=s.catch((e=>(o.done(),cc.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>cc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yc(e){return new cc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=wc(e.target.error);n(t)}}))}let bc=!1;function wc(e){const t=hc.C(Wt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new _l("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bc||(bc=!0,setTimeout((()=>{throw e}),0)),e}}return e}const xc="IndexBackfiller";class _c{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){fl(xc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.ee.ne();fl(xc,`Documents written: ${e}`)}catch(e){gc(e)?fl(xc,"Ignoring IndexedDB error during index backfill: ",e):await lc(e)}await this.te(6e4)}))}}class Sc{constructor(e,t){this.localStore=e,this.persistence=t}async ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let r=t,i=!0;return cc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return fl(xc,`Processing collection: ${t}`),this.ie(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.se(r,n))).next((n=>(fl(xc,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=rc(t);oc(r,n)>0&&(n=r)})),new ic(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ac{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ac.ae=-1;const Cc=-1;function kc(e){return null==e}function Ec(e){return 0===e&&1/e==-1/0}function Ic(e){return"number"==typeof e&&Number.isInteger(e)&&!Ec(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Tc="\x01";function Rc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Nc(t)),t=Pc(e.get(n),t);return Nc(t)}function Pc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Tc:n+="\x01\x11";break;default:n+=t}}return n}function Nc(e){return e+Tc+"\x01"}function jc(e){const t=e.length;if(bl(t>=2),2===t)return bl(e.charAt(0)===Tc&&"\x01"===e.charAt(1)),Hl.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf(Tc,o);switch((t<0||t>n)&&yl(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:yl()}o=t+2}return new Hl(r)}const Oc="remoteDocuments",Dc="owner",Mc="owner",Lc="mutationQueues",Fc="mutations",zc="batchId",$c="userMutationsIndex",Uc=["userId","batchId"];function Bc(e,t){return[e,Rc(t)]}function Vc(e,t,n){return[e,Rc(t),n]}const Wc={},qc="documentMutations",Hc="remoteDocumentsV14",Kc=["prefixPath","collectionGroup","readTime","documentId"],Gc="documentKeyIndex",Yc=["prefixPath","collectionGroup","documentId"],Qc="collectionGroupIndex",Xc=["collectionGroup","readTime","prefixPath","documentId"],Jc="remoteDocumentGlobal",Zc="remoteDocumentGlobalKey",eu="targets",tu="queryTargetsIndex",nu=["canonicalId","targetId"],ru="targetDocuments",iu=["targetId","path"],ou="documentTargetsIndex",su=["path","targetId"],au="targetGlobalKey",lu="targetGlobal",cu="collectionParents",uu=["collectionId","parent"],du="clientMetadata",hu="bundles",pu="namedQueries",fu="indexConfiguration",mu="collectionGroupIndex",gu="indexState",vu=["indexId","uid"],yu="sequenceNumberIndex",bu=["uid","sequenceNumber"],wu="indexEntries",xu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_u="documentKeyIndex",Su=["indexId","uid","orderedDocumentKey"],Au="documentOverlays",Cu=["userId","collectionPath","documentId"],ku="collectionPathOverlayIndex",Eu=["userId","collectionPath","largestBatchId"],Iu="collectionGroupOverlayIndex",Tu=["userId","collectionGroup","largestBatchId"],Ru="globals",Pu=[Lc,Fc,qc,Oc,eu,Dc,lu,ru,du,Jc,cu,hu,pu],Nu=[...Pu,Au],ju=[Lc,Fc,qc,Hc,eu,Dc,lu,ru,du,Jc,cu,hu,pu,Au],Ou=ju,Du=[...Ou,fu,gu,wu],Mu=Du,Lu=[...Du,Ru];class Fu extends ac{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function zu(e,t){const n=wl(e);return hc.M(n.ue,t)}function $u(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Uu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Vu{constructor(e,t){this.comparator=e,this.root=t||qu.EMPTY}insert(e,t){return new Vu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qu.BLACK,null,null))}remove(e){return new Vu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:qu.RED,this.left=null!=r?r:qu.EMPTY,this.right=null!=i?i:qu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new qu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return qu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yl();if(this.right.isRed())throw yl();const e=this.left.check();if(e!==this.right.check())throw yl();return e+(this.isRed()?0:1)}}qu.EMPTY=null,qu.RED=!0,qu.BLACK=!1,qu.EMPTY=new class{constructor(){this.size=0}get key(){throw yl()}get value(){throw yl()}get color(){throw yl()}get left(){throw yl()}get right(){throw yl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new qu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hu{constructor(e){this.comparator=e,this.data=new Vu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ku(this.data.getIterator())}getIteratorFrom(e){return new Ku(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hu(this.comparator);return t.data=e,t}}class Ku{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gu(e){return e.hasNext()?e.getNext():void 0}class Yu{constructor(e){this.fields=e,e.sort(Gl.comparator)}static empty(){return new Yu([])}unionWith(e){let t=new Hu(Gl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Qu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qu("Invalid base64 string: "+e):e}}(e);return new Xu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Xu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ol(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xu.EMPTY_BYTE_STRING=new Xu("");const Ju=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zu(e){if(bl(!!e),"string"==typeof e){let t=0;const n=Ju.exec(e);if(bl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ed(e.seconds),nanos:ed(e.nanos)}}function ed(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function td(e){return"string"==typeof e?Xu.fromBase64String(e):Xu.fromUint8Array(e)}const nd="server_timestamp",rd="__type__",id="__previous_value__",od="__local_write_time__";function sd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[rd])||void 0===n?void 0:n.stringValue)===nd}function ad(e){const t=e.mapValue.fields[id];return sd(t)?ad(t):t}function ld(e){const t=Zu(e.mapValue.fields[od].timestampValue);return new Bl(t.seconds,t.nanos)}class cd{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}const ud="(default)";class dd{constructor(e,t){this.projectId=e,this.database=t||ud}static empty(){return new dd("","")}get isDefaultDatabase(){return this.database===ud}isEqual(e){return e instanceof dd&&e.projectId===this.projectId&&e.database===this.database}}const hd="__type__",pd="__max__",fd={mapValue:{fields:{__type__:{stringValue:pd}}}},md="__vector__",gd="value",vd={nullValue:"NULL_VALUE"};function yd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sd(e)?4:Dd(e)?9007199254740991:jd(e)?10:11:yl()}function bd(e,t){if(e===t)return!0;const n=yd(e);if(n!==yd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ld(e).isEqual(ld(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zu(e.timestampValue),r=Zu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return td(e.bytesValue).isEqual(td(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ed(e.geoPointValue.latitude)===ed(t.geoPointValue.latitude)&&ed(e.geoPointValue.longitude)===ed(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ed(e.integerValue)===ed(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ed(e.doubleValue),r=ed(t.doubleValue);return n===r?Ec(n)===Ec(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fl(e.arrayValue.values||[],t.arrayValue.values||[],bd);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if($u(n)!==$u(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bd(n[i],r[i])))return!1;return!0}(e,t);default:return yl()}}function wd(e,t){return void 0!==(e.values||[]).find((e=>bd(e,t)))}function xd(e,t){if(e===t)return 0;const n=yd(e),r=yd(t);if(n!==r)return Ol(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ol(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ed(e.integerValue||e.doubleValue),r=ed(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _d(e.timestampValue,t.timestampValue);case 4:return _d(ld(e),ld(t));case 5:return Dl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=td(e),r=td(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ol(n[i],r[i]);if(0!==e)return e}return Ol(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ol(ed(e.latitude),ed(t.latitude));return 0!==n?n:Ol(ed(e.longitude),ed(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Sd(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s[gd])||void 0===n?void 0:n.arrayValue,c=null===(r=a[gd])||void 0===r?void 0:r.arrayValue,u=Ol((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Sd(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===fd.mapValue&&t===fd.mapValue)return 0;if(e===fd.mapValue)return 1;if(t===fd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Dl(r[s],o[s]);if(0!==e)return e;const t=xd(n[r[s]],i[o[s]]);if(0!==t)return t}return Ol(r.length,o.length)}(e.mapValue,t.mapValue);default:throw yl()}}function _d(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ol(e,t);const n=Zu(e),r=Zu(t),i=Ol(n.seconds,r.seconds);return 0!==i?i:Ol(n.nanos,r.nanos)}function Sd(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=xd(n[i],r[i]);if(e)return e}return Ol(n.length,r.length)}function Ad(e){return Cd(e)}function Cd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return td(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Yl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Cd(e.fields[i])}`;return n+"}"}(e.mapValue):yl()}function kd(e){switch(yd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ad(e);return t?16+kd(t):16;case 5:return 2*e.stringValue.length;case 6:return td(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+kd(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Uu(e.fields,((e,n)=>{t+=e.length+kd(n)})),t}(e.mapValue);default:throw yl()}}function Ed(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Id(e){return!!e&&"integerValue"in e}function Td(e){return!!e&&"arrayValue"in e}function Rd(e){return!!e&&"nullValue"in e}function Pd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nd(e){return!!e&&"mapValue"in e}function jd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[hd])||void 0===n?void 0:n.stringValue)===md}function Od(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Uu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Od(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Od(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Dd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===pd}const Md={mapValue:{fields:{[hd]:{stringValue:md},[gd]:{arrayValue:{}}}}};function Ld(e){return"nullValue"in e?vd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ed(dd.empty(),Yl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?jd(e)?Md:{mapValue:{}}:yl()}function Fd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ed(dd.empty(),Yl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Md:"mapValue"in e?jd(e)?{mapValue:{}}:fd:yl()}function zd(e,t){const n=xd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function $d(e,t){const n=xd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Ud{constructor(e){this.value=e}static empty(){return new Ud({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Od(t)}setAll(e){let t=Gl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Od(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Nd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Uu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ud(Od(this.value))}}function Bd(e){const t=[];return Uu(e.fields,((e,n)=>{const r=new Gl([e]);if(Nd(n)){const e=Bd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Yu(t)}class Vd{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Vd(e,0,Vl.min(),Vl.min(),Vl.min(),Ud.empty(),0)}static newFoundDocument(e,t,n,r){return new Vd(e,1,t,Vl.min(),n,r,0)}static newNoDocument(e,t){return new Vd(e,2,t,Vl.min(),Vl.min(),Ud.empty(),0)}static newUnknownDocument(e,t){return new Vd(e,3,t,Vl.min(),Vl.min(),Ud.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ud.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ud.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function qd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Yl.comparator(Yl.fromName(s.referenceValue),n.key):xd(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Hd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bd(e.position[n],t.position[n]))return!1;return!0}class Kd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Gd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yd{}class Qd extends Yd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new sh(e,t,n):"array-contains"===t?new uh(e,n):"in"===t?new dh(e,n):"not-in"===t?new hh(e,n):"array-contains-any"===t?new ph(e,n):new Qd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ah(e,n):new lh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xd(t,this.value)):null!==t&&yd(this.value)===yd(t)&&this.matchesComparison(xd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xd extends Yd{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Xd(e,t)}matches(e){return Jd(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Jd(e){return"and"===e.op}function Zd(e){return"or"===e.op}function eh(e){return th(e)&&Jd(e)}function th(e){for(const t of e.filters)if(t instanceof Xd)return!1;return!0}function nh(e){if(e instanceof Qd)return e.field.canonicalString()+e.op.toString()+Ad(e.value);if(eh(e))return e.filters.map((e=>nh(e))).join(",");{const t=e.filters.map((e=>nh(e))).join(",");return`${e.op}(${t})`}}function rh(e,t){return e instanceof Qd?function(e,t){return t instanceof Qd&&e.op===t.op&&e.field.isEqual(t.field)&&bd(e.value,t.value)}(e,t):e instanceof Xd?function(e,t){return t instanceof Xd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&rh(n,t.filters[r])),!0)}(e,t):void yl()}function ih(e,t){const n=e.filters.concat(t);return Xd.create(n,e.op)}function oh(e){return e instanceof Qd?function(e){return`${e.field.canonicalString()} ${e.op} ${Ad(e.value)}`}(e):e instanceof Xd?function(e){return e.op.toString()+" {"+e.getFilters().map(oh).join(" ,")+"}"}(e):"Filter"}class sh extends Qd{constructor(e,t,n){super(e,t,n),this.key=Yl.fromName(n.referenceValue)}matches(e){const t=Yl.comparator(e.key,this.key);return this.matchesComparison(t)}}class ah extends Qd{constructor(e,t){super(e,"in",t),this.keys=ch("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lh extends Qd{constructor(e,t){super(e,"not-in",t),this.keys=ch("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ch(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Yl.fromName(e.referenceValue)))}class uh extends Qd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Td(t)&&wd(t.arrayValue,this.value)}}class dh extends Qd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wd(this.value.arrayValue,t)}}class hh extends Qd{constructor(e,t){super(e,"not-in",t)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wd(this.value.arrayValue,t)}}class ph extends Qd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Td(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>wd(this.value.arrayValue,e)))}}class fh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.le=null}}function mh(e){return new fh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gh(e){const t=wl(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>nh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),kc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ad(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ad(e))).join(",")),t.le=e}return t.le}function vh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!rh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hd(e.startAt,t.startAt)&&Hd(e.endAt,t.endAt)}function yh(e){return Yl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function bh(e,t){return e.filters.filter((e=>e instanceof Qd&&e.field.isEqual(t)))}function wh(e,t,n){let r=vd,i=!0;for(const o of bh(e,t)){let e=vd,t=!0;switch(o.op){case"<":case"<=":e=Ld(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=vd}zd({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];zd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function xh(e,t,n){let r=fd,i=!0;for(const o of bh(e,t)){let e=fd,t=!0;switch(o.op){case">=":case">":e=Fd(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=fd}$d({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];$d({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class _h{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Sh(e,t,n,r,i,o,s,a){return new _h(e,t,n,r,i,o,s,a)}function Ah(e){return new _h(e)}function Ch(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kh(e){return null!==e.collectionGroup}function Eh(e){const t=wl(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Hu(Gl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Kd(r,n))})),e.has(Gl.keyField().canonicalString())||t.he.push(new Kd(Gl.keyField(),n))}return t.he}function Ih(e){const t=wl(e);return t.Pe||(t.Pe=Th(t,Eh(e))),t.Pe}function Th(e,t){if("F"===e.limitType)return mh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Kd(e.field,t)}));const n=e.endAt?new Wd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wd(e.startAt.position,e.startAt.inclusive):null;return mh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Rh(e,t){const n=e.filters.concat([t]);return new _h(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ph(e,t,n){return new _h(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nh(e,t){return vh(Ih(e),Ih(t))&&e.limitType===t.limitType}function jh(e){return`${gh(Ih(e))}|lt:${e.limitType}`}function Oh(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>oh(e))).join(", ")}]`),kc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ad(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ad(e))).join(",")),`Target(${t})`}(Ih(e))}; limitType=${e.limitType})`}function Dh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Eh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=qd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Eh(e),t))&&!(e.endAt&&!function(e,t,n){const r=qd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Eh(e),t))}(e,t)}function Mh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Lh(e){return(t,n)=>{let r=!1;for(const i of Eh(e)){const e=Fh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Fh(e,t,n){const r=e.field.isKeyField()?Yl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?xd(r,i):yl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yl()}}class zh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Uu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Bu(this.inner)}size(){return this.innerSize}}const $h=new Vu(Yl.comparator);function Uh(){return $h}const Bh=new Vu(Yl.comparator);function Vh(){let e=Bh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Wh(e){let t=Bh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function qh(){return Kh()}function Hh(){return Kh()}function Kh(){return new zh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Gh=new Vu(Yl.comparator),Yh=new Hu(Yl.comparator);function Qh(){let e=Yh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Xh=new Hu(Ol);function Jh(){return Xh}function Zh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(t)?"-0":t}}function ep(e){return{integerValue:""+e}}function tp(e,t){return Ic(t)?ep(t):Zh(e,t)}class np{constructor(){this._=void 0}}function rp(e,t,n){return e instanceof sp?function(e,t){const n={fields:{[rd]:{stringValue:nd},[od]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&sd(t)&&(t=ad(t)),t&&(n.fields[id]=t),{mapValue:n}}(n,t):e instanceof ap?lp(e,t):e instanceof cp?up(e,t):function(e,t){const n=op(e,t),r=hp(n)+hp(e.Ie);return Id(n)&&Id(e.Ie)?ep(r):Zh(e.serializer,r)}(e,t)}function ip(e,t,n){return e instanceof ap?lp(e,t):e instanceof cp?up(e,t):n}function op(e,t){return e instanceof dp?function(e){return Id(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class sp extends np{}class ap extends np{constructor(e){super(),this.elements=e}}function lp(e,t){const n=pp(t);for(const r of e.elements)n.some((e=>bd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class cp extends np{constructor(e){super(),this.elements=e}}function up(e,t){let n=pp(t);for(const r of e.elements)n=n.filter((e=>!bd(e,r)));return{arrayValue:{values:n}}}class dp extends np{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function hp(e){return ed(e.integerValue||e.doubleValue)}function pp(e){return Td(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fp{constructor(e,t){this.field=e,this.transform=t}}class mp{constructor(e,t){this.version=e,this.transformResults=t}}class gp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gp}static exists(e){return new gp(void 0,e)}static updateTime(e){return new gp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yp{}function bp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tp(e.key,gp.none()):new Ap(e.key,e.data,gp.none());{const n=e.data,r=Ud.empty();let i=new Hu(Gl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Cp(e.key,r,new Yu(i.toArray()),gp.none())}}function wp(e,t,n){e instanceof Ap?function(e,t,n){const r=e.value.clone(),i=Ep(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Cp?function(e,t,n){if(!vp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ep(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xp(e,t,n,r){return e instanceof Ap?function(e,t,n,r){if(!vp(e.precondition,t))return n;const i=e.value.clone(),o=Ip(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cp?function(e,t,n,r){if(!vp(e.precondition,t))return n;const i=Ip(e.fieldTransforms,r,t),o=t.data;return o.setAll(kp(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return vp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _p(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=op(r.transform,e||null);null!=i&&(null===n&&(n=Ud.empty()),n.set(r.field,i))}return n||null}function Sp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ap&&t instanceof ap||e instanceof cp&&t instanceof cp?Fl(e.elements,t.elements,bd):e instanceof dp&&t instanceof dp?bd(e.Ie,t.Ie):e instanceof sp&&t instanceof sp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ap extends yp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cp extends yp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ep(e,t,n){const r=new Map;bl(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,ip(s,a,n[i]))}return r}function Ip(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,rp(e,o,t))}return r}class Tp extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rp extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&wp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=xp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=xp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Hh();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=bp(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Vl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qh())}isEqual(e){return this.batchId===e.batchId&&Fl(this.mutations,e.mutations,((e,t)=>Sp(e,t)))&&Fl(this.baseMutations,e.baseMutations,((e,t)=>Sp(e,t)))}}class Np{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){bl(e.mutations.length===n.length);let r=Gh;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Np(e,t,n,r)}}class jp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Op{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dp,Mp;function Lp(e){switch(e){case xl.OK:return yl();case xl.CANCELLED:case xl.UNKNOWN:case xl.DEADLINE_EXCEEDED:case xl.RESOURCE_EXHAUSTED:case xl.INTERNAL:case xl.UNAVAILABLE:case xl.UNAUTHENTICATED:return!1;case xl.INVALID_ARGUMENT:case xl.NOT_FOUND:case xl.ALREADY_EXISTS:case xl.PERMISSION_DENIED:case xl.FAILED_PRECONDITION:case xl.ABORTED:case xl.OUT_OF_RANGE:case xl.UNIMPLEMENTED:case xl.DATA_LOSS:return!0;default:return yl()}}function Fp(e){if(void 0===e)return ml("GRPC error has no .code"),xl.UNKNOWN;switch(e){case Dp.OK:return xl.OK;case Dp.CANCELLED:return xl.CANCELLED;case Dp.UNKNOWN:return xl.UNKNOWN;case Dp.DEADLINE_EXCEEDED:return xl.DEADLINE_EXCEEDED;case Dp.RESOURCE_EXHAUSTED:return xl.RESOURCE_EXHAUSTED;case Dp.INTERNAL:return xl.INTERNAL;case Dp.UNAVAILABLE:return xl.UNAVAILABLE;case Dp.UNAUTHENTICATED:return xl.UNAUTHENTICATED;case Dp.INVALID_ARGUMENT:return xl.INVALID_ARGUMENT;case Dp.NOT_FOUND:return xl.NOT_FOUND;case Dp.ALREADY_EXISTS:return xl.ALREADY_EXISTS;case Dp.PERMISSION_DENIED:return xl.PERMISSION_DENIED;case Dp.FAILED_PRECONDITION:return xl.FAILED_PRECONDITION;case Dp.ABORTED:return xl.ABORTED;case Dp.OUT_OF_RANGE:return xl.OUT_OF_RANGE;case Dp.UNIMPLEMENTED:return xl.UNIMPLEMENTED;case Dp.DATA_LOSS:return xl.DATA_LOSS;default:return yl()}}(Mp=Dp||(Dp={}))[Mp.OK=0]="OK",Mp[Mp.CANCELLED=1]="CANCELLED",Mp[Mp.UNKNOWN=2]="UNKNOWN",Mp[Mp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mp[Mp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mp[Mp.NOT_FOUND=5]="NOT_FOUND",Mp[Mp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mp[Mp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mp[Mp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mp[Mp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mp[Mp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mp[Mp.ABORTED=10]="ABORTED",Mp[Mp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mp[Mp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mp[Mp.INTERNAL=13]="INTERNAL",Mp[Mp.UNAVAILABLE=14]="UNAVAILABLE",Mp[Mp.DATA_LOSS=15]="DATA_LOSS";let zp=null;const $p=new Ga([4294967295,4294967295],0);function Up(e){const t=Nl().encode(e),n=new Ya;return n.update(t),new Uint8Array(n.digest())}function Bp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ga([n,r],0),new Ga([i,o],0)]}class Vp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Wp(`Invalid padding: ${t}`);if(n<0)throw new Wp(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Wp(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Wp(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ga.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Ga.fromNumber(n)));return 1===r.compare($p)&&(r=new Ga([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Up(e),[n,r]=Bp(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vp(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ee)return;const t=Up(e),[n,r]=Bp(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Wp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new qp(Vl.min(),r,new Vu(Ol),Uh(),Qh())}}class Hp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hp(n,t,Qh(),Qh(),Qh())}}class Kp{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Gp{constructor(e,t){this.targetId=e,this.ge=t}}class Yp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Qp{constructor(){this.pe=0,this.ye=Zp(),this.we=Xu.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Qh(),t=Qh(),n=Qh();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yl()}})),new Hp(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=Zp()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,bl(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Xp{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Uh(),this.$e=Jp(),this.Ue=Jp(),this.Ke=new Vu(Ol)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:yl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(yh(i))if(0===n){const e=new Yl(i.path);this.ze(t,e,Vd.newNoDocument(e,Vl.min()))}else bl(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==zp||zp.rt(function(e,t,n,r,i){var o,s,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=td(n).toUint8Array()}catch(e){if(e instanceof Qu)return gl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Vp(o,r,i)}catch(e){return gl(e instanceof Wp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ee?null:s}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&yh(i.target)){const t=new Yl(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Vd.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Qh();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new qp(e,t,this.Ke,this.Qe,n);return this.Qe=Uh(),this.$e=Jp(),this.Ue=Jp(),this.Ke=new Vu(Ol),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Qp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Hu(Ol),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Hu(Ol),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||fl("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Qp),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Jp(){return new Vu(Yl.comparator)}function Zp(){return new Vu(Yl.comparator)}const ef={asc:"ASCENDING",desc:"DESCENDING"},tf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nf={and:"AND",or:"OR"};class rf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function of(e,t){return e.useProto3Json||kc(t)?t:{value:t}}function sf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function af(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lf(e,t){return sf(e,t.toTimestamp())}function cf(e){return bl(!!e),Vl.fromTimestamp(function(e){const t=Zu(e);return new Bl(t.seconds,t.nanos)}(e))}function uf(e,t){return df(e,t).canonicalString()}function df(e,t){const n=function(e){return new Hl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function hf(e){const t=Hl.fromString(e);return bl(Of(t)),t}function pf(e,t){return uf(e.databaseId,t.path)}function ff(e,t){const n=hf(t);if(n.get(1)!==e.databaseId.projectId)throw new _l(xl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _l(xl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yl(yf(n))}function mf(e,t){return uf(e.databaseId,t)}function gf(e){const t=hf(e);return 4===t.length?Hl.emptyPath():yf(t)}function vf(e){return new Hl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yf(e){return bl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bf(e,t,n){return{name:pf(e,t),fields:n.value.mapValue.fields}}function wf(e,t,n){const r=ff(e,t.name),i=cf(t.updateTime),o=t.createTime?cf(t.createTime):Vl.min(),s=new Ud({mapValue:{fields:t.fields}}),a=Vd.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xf(e,t){let n;if(t instanceof Ap)n={update:bf(e,t.key,t.value)};else if(t instanceof Tp)n={delete:pf(e,t.key)};else if(t instanceof Cp)n={update:bf(e,t.key,t.data),updateMask:jf(t.fieldMask)};else{if(!(t instanceof Rp))return yl();n={verify:pf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof sp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ap)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof dp)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw yl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:lf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yl()}(e,t.precondition)),n}function _f(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?gp.updateTime(cf(e.updateTime)):void 0!==e.exists?gp.exists(e.exists):gp.none()}(t.currentDocument):gp.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)bl("REQUEST_TIME"===t.setToServerValue),n=new sp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ap(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new cp(e)}else"increment"in t?n=new dp(e,t.increment):yl();const r=Gl.fromServerFormat(t.fieldPath);return new fp(r,n)}(e,t))):[];if(t.update){t.update.name;const i=ff(e,t.update.name),o=new Ud({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Yu(t.map((e=>Gl.fromServerFormat(e))))}(t.updateMask);return new Cp(i,o,e,n,r)}return new Ap(i,o,n,r)}if(t.delete){const r=ff(e,t.delete);return new Tp(r,n)}if(t.verify){const r=ff(e,t.verify);return new Rp(r,n)}return yl()}function Sf(e,t){return{documents:[mf(e,t.path)]}}function Af(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mf(e,i);const o=function(e){if(0!==e.length)return Nf(Xd.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Rf(e.field),direction:Ef(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=of(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Cf(e){let t=gf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){bl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=kf(e);return t instanceof Xd&&eh(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Kd(Pf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,kc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wd(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wd(n,t)}(n.endAt)),Sh(t,i,s,o,a,"F",l,c)}function kf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pf(e.unaryFilter.field);return Qd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Pf(e.unaryFilter.field);return Qd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pf(e.unaryFilter.field);return Qd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pf(e.unaryFilter.field);return Qd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yl()}}(e):void 0!==e.fieldFilter?function(e){return Qd.create(Pf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xd.create(e.compositeFilter.filters.map((e=>kf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yl()}}(e.compositeFilter.op))}(e):yl()}function Ef(e){return ef[e]}function If(e){return tf[e]}function Tf(e){return nf[e]}function Rf(e){return{fieldPath:e.canonicalString()}}function Pf(e){return Gl.fromServerFormat(e.fieldPath)}function Nf(e){return e instanceof Qd?function(e){if("=="===e.op){if(Pd(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NAN"}};if(Rd(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pd(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NOT_NAN"}};if(Rd(e.value))return{unaryFilter:{field:Rf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rf(e.field),op:If(e.op),value:e.value}}}(e):e instanceof Xd?function(e){const t=e.getFilters().map((e=>Nf(e)));return 1===t.length?t[0]:{compositeFilter:{op:Tf(e.op),filters:t}}}(e):yl()}function jf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Of(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Df{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Df(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mf{constructor(e){this.Tt=e}}function Lf(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ff(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:pf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:sf(e,t.version.toTimestamp()),createTime:sf(e,t.createTime.toTimestamp())}}(e.Tt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zf(t.version)};else{if(!t.isUnknownDocument())return yl();r.unknownDocument={path:n.path.toArray(),version:zf(t.version)}}return r}function Ff(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $f(e){const t=new Bl(e.seconds,e.nanoseconds);return Vl.fromTimestamp(t)}function Uf(e,t){const n=(t.baseMutations||[]).map((t=>_f(e.Tt,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>_f(e.Tt,t))),i=Bl.fromMillis(t.localWriteTimeMs);return new Pp(t.batchId,i,n,r)}function Bf(e){const t=$f(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?$f(e.lastLimboFreeSnapshotVersion):Vl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return bl(1===e.documents.length),Ih(Ah(gf(e.documents[0])))}(e.query):function(e){return Ih(Cf(e))}(e.query),new Df(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Xu.fromBase64String(e.resumeToken))}function Vf(e,t){const n=zf(t.snapshotVersion),r=zf(t.lastLimboFreeSnapshotVersion);let i;i=yh(t.target)?Sf(e.Tt,t.target):Af(e.Tt,t.target).ht;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:gh(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Wf(e){const t=Cf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ph(t,t.limit,"L"):t}function qf(e,t){return new jp(t.largestBatchId,_f(e.Tt,t.overlayMutation))}function Hf(e,t){const n=t.path.lastSegment();return[e,Rc(t.path.popLast()),n]}function Kf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:zf(r.readTime),documentKey:Rc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Gf{getBundleMetadata(e,t){return Yf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:$f(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Yf(e).put(function(e){return{bundleId:e.id,createTime:zf(cf(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Qf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Wf(e.bundledQuery),readTime:$f(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Qf(e).put(function(e){return{name:e.name,readTime:zf(cf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Yf(e){return zu(e,hu)}function Qf(e){return zu(e,pu)}class Xf{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Xf(e,n)}getOverlay(e,t){return Jf(e).get(Hf(this.userId,t)).next((e=>e?qf(this.serializer,e):null))}getOverlays(e,t){const n=qh();return cc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new jp(t,i);r.push(this.Et(e,o))})),cc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Rc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Jf(e).J(ku,r))})),cc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=qh(),i=Rc(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Jf(e).G(ku,o).next((e=>{for(const t of e){const e=qf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=qh();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jf(e).Z({index:Iu,range:s},((e,t,n)=>{const s=qf(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}Et(e,t){return Jf(e).put(function(e,t,n){const[r,i,o]=Hf(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:xf(e.Tt,n.mutation)}}(this.serializer,this.userId,t))}}function Jf(e){return zu(e,Au)}class Zf{dt(e){return zu(e,Ru)}getSessionToken(e){return this.dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?Xu.fromUint8Array(t):Xu.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class em{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ed(e.integerValue));else if("doubleValue"in e){const n=ed(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Ec(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=Zu(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(td(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Dd(e)?this.ft(t,Number.MAX_SAFE_INTEGER):jd(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):yl()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const o=gd,s=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(ed(s)),this.wt(o,t),this.Rt(i[o],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),Yl.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}em.xt=new em;const tm=255;function nm(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function rm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=nm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class im{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Nt(e);else if(e<2048)this.Nt(960|e>>>6),this.Nt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Nt(480|e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e);else{const e=t.codePointAt(0);this.Nt(240|e>>>18),this.Nt(128|63&e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e)}}this.Bt()}$t(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.kt(e);else if(e<2048)this.kt(960|e>>>6),this.kt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.kt(480|e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e);else{const e=t.codePointAt(0);this.kt(240|e>>>18),this.kt(128|63&e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e)}}this.qt()}Ut(e){const t=this.Kt(e),n=rm(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Gt(e){const t=this.Kt(e),n=rm(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}zt(){this.jt(tm),this.jt(255)}Ht(){this.Jt(tm),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Nt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):t===tm?(this.jt(tm),this.jt(0)):this.jt(t)}kt(e){const t=255&e;0===t?(this.Jt(0),this.Jt(255)):t===tm?(this.Jt(tm),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class om{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class sm{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class am{constructor(){this.Zt=new im,this.Xt=new om(this.Zt),this.en=new sm(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return 0===e?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}class lm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}nn(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new lm(this.indexId,this.documentKey,this.arrayValue,n)}}function cm(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=um(e.arrayValue,t.arrayValue),0!==n?n:(n=um(e.directionalValue,t.directionalValue),0!==n?n:Yl.comparator(e.documentKey,t.documentKey)))}function um(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class dm{constructor(e){this.rn=new Hu(((e,t)=>Gl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const e=t;e.isInequality()?this.rn=this.rn.add(e):this._n.push(e)}}get an(){return this.rn.size>1}un(e){if(bl(e.collectionGroup===this.collectionId),this.an)return!1;const t=Jl(e);if(void 0!==t&&!this.cn(t))return!1;const n=Zl(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.cn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const e=this.rn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.ln(e,t)||!this.hn(this.sn[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.sn.length||!this.hn(this.sn[o++],e))return!1}return!0}Pn(){if(this.an)return null;let e=new Hu(Gl.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ec(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ec(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ec(n.field,"asc"===n.dir?0:1)));return new Xl(Xl.UNKNOWN_ID,this.collectionId,t,tc.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hm(e){var t,n;if(bl(e instanceof Qd||e instanceof Xd),e instanceof Qd){if(e instanceof dh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Qd.create(e.field,"==",t))))||[];return Xd.create(r,"or")}return e}const r=e.filters.map((e=>hm(e)));return Xd.create(r,e.op)}function pm(e){if(0===e.getFilters().length)return[];const t=vm(hm(e));return bl(gm(t)),fm(t)||mm(t)?[t]:t.getFilters()}function fm(e){return e instanceof Qd}function mm(e){return e instanceof Xd&&eh(e)}function gm(e){return fm(e)||mm(e)||function(e){if(e instanceof Xd&&Zd(e)){for(const t of e.getFilters())if(!fm(t)&&!mm(t))return!1;return!0}return!1}(e)}function vm(e){if(bl(e instanceof Qd||e instanceof Xd),e instanceof Qd)return e;if(1===e.filters.length)return vm(e.filters[0]);const t=e.filters.map((e=>vm(e)));let n=Xd.create(t,e.op);return n=wm(n),gm(n)?n:(bl(n instanceof Xd),bl(Jd(n)),bl(n.filters.length>1),n.filters.reduce(((e,t)=>ym(e,t))))}function ym(e,t){let n;return bl(e instanceof Qd||e instanceof Xd),bl(t instanceof Qd||t instanceof Xd),n=e instanceof Qd?t instanceof Qd?function(e,t){return Xd.create([e,t],"and")}(e,t):bm(e,t):t instanceof Qd?bm(t,e):function(e,t){if(bl(e.filters.length>0&&t.filters.length>0),Jd(e)&&Jd(t))return ih(e,t.getFilters());const n=Zd(e)?e:t,r=Zd(e)?t:e,i=n.filters.map((e=>ym(e,r)));return Xd.create(i,"or")}(e,t),wm(n)}function bm(e,t){if(Jd(t))return ih(t,e.getFilters());{const n=t.filters.map((t=>ym(e,t)));return Xd.create(n,"or")}}function wm(e){if(bl(e instanceof Qd||e instanceof Xd),e instanceof Qd)return e;const t=e.getFilters();if(1===t.length)return wm(t[0]);if(th(e))return e;const n=t.map((e=>wm(e))),r=[];return n.forEach((t=>{t instanceof Qd?r.push(t):t instanceof Xd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Xd.create(r,e.op)}class xm{constructor(){this.Tn=new _m}addToCollectionParentIndex(e,t){return this.Tn.add(t),cc.resolve()}getCollectionParents(e,t){return cc.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return cc.resolve()}deleteFieldIndex(e,t){return cc.resolve()}deleteAllFieldIndexes(e){return cc.resolve()}createTargetIndexes(e,t){return cc.resolve()}getDocumentsMatchingTarget(e,t){return cc.resolve(null)}getIndexType(e,t){return cc.resolve(0)}getFieldIndexes(e,t){return cc.resolve([])}getNextCollectionGroupToUpdate(e){return cc.resolve(null)}getMinOffset(e,t){return cc.resolve(ic.min())}getMinOffsetFromCollectionGroup(e,t){return cc.resolve(ic.min())}updateCollectionGroup(e,t,n){return cc.resolve()}updateIndexEntries(e,t){return cc.resolve()}}class _m{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hu(Hl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hu(Hl.comparator)).toArray()}}const Sm="IndexedDbIndexManager",Am=new Uint8Array(0);class Cm{constructor(e,t){this.databaseId=t,this.In=new _m,this.En=new zh((e=>gh(e)),((e,t)=>vh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const i={collectionId:n,parent:Rc(r)};return km(e).put(i)}return cc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[zl(t),""],!1,!0);return km(e).G(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(jc(r.parent))}return n}))}addFieldIndex(e,t){const n=Im(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Tm(e);return i.next((e=>{n.put(Kf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Im(e),r=Tm(e),i=Em(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Im(e),n=Em(e),r=Tm(e);return t.J().next((()=>n.J())).next((()=>r.J()))}createTargetIndexes(e,t){return cc.forEach(this.dn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new dm(t).Pn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Em(e);let r=!0;const i=new Map;return cc.forEach(this.dn(t),(t=>this.An(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Qh();const r=[];return cc.forEach(i,((i,o)=>{fl(Sm,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${gh(t)}`);const s=function(e,t){const n=Jl(t);if(void 0===n)return null;for(const r of bh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Zl(t))for(const t of bh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Zl(t)){const t=0===i.kind?wh(e,i.fieldPath,e.startAt):xh(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Wd(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Zl(t)){const t=0===i.kind?xh(e,i.fieldPath,e.endAt):wh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Wd(n,r)}(o,i),u=this.Rn(i,o,l),d=this.Rn(i,o,c),h=this.Vn(i,o,a),p=this.mn(i.indexId,s,u,l.inclusive,d,c.inclusive,h);return cc.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Yl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return cc.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(t=0===e.filters.length?[e]:pm(Xd.create(e.filters,"and")).map((t=>mh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.fn(t[u/l]):Am,d=this.gn(e,a,n[u%l],r),h=this.pn(e,a,i[u%l],o),p=s.map((t=>this.gn(e,a,t,!0)));c.push(...this.createRange(d,h,p))}return c}gn(e,t,n,r){const i=new lm(e,Yl.empty(),t,n);return r?i:i.nn()}pn(e,t,n,r){const i=new lm(e,Yl.empty(),t,n);return r?i.nn():i}An(e,t){const n=new dm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.un(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.dn(t);return cc.forEach(r,(t=>this.An(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Hu(Gl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}yn(e,t){const n=new am;for(const r of Zl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.tn(r.kind);em.xt.At(e,i)}return n.Yt()}fn(e){const t=new am;return em.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new am;return em.xt.At(Ed(this.databaseId,t),n.tn(function(e){const t=Zl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(null===n)return[];let r=[];r.push(new am);let i=0;for(const o of Zl(e)){const e=n[i++];for(const n of r)if(this.Sn(t,o.fieldPath)&&Td(e))r=this.bn(r,o,e);else{const t=n.tn(o.kind);em.xt.At(e,t)}}return this.Dn(r)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new am;n.seed(e.Yt()),em.xt.At(o,n.tn(t.kind)),i.push(n)}return i}Sn(e,t){return!!e.filters.find((e=>e instanceof Qd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Im(e),r=Tm(e);return(t?n.G(mu,IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return cc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new tc(t.sequenceNumber,new ic($f(t.readTime),new Yl(jc(t.documentKey)),t.largestBatchId)):tc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ec(Gl.fromServerFormat(t),n)}));return new Xl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ol(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Im(e),i=Tm(e);return this.vn(e).next((e=>r.G(mu,IDBKeyRange.bound(t,t)).next((t=>cc.forEach(t,(t=>i.put(Kf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return cc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?cc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),cc.forEach(i,(n=>this.Cn(e,t,n).next((t=>{const i=this.Fn(r,n);return t.isEqual(i)?cc.resolve():this.Mn(e,r,n,t,i)})))))))}))}xn(e,t,n,r){return Em(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,r){return Em(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const r=Em(e);let i=new Hu(cm);return r.Z({index:_u,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((e,r)=>{i=i.add(new lm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Fn(e,t){let n=new Hu(cm);const r=this.yn(t,e);if(null==r)return n;const i=Jl(t);if(null!=i){const o=e.data.field(i.fieldPath);if(Td(o))for(const i of o.arrayValue.values||[])n=n.add(new lm(t.indexId,e.key,this.fn(i),r))}else n=n.add(new lm(t.indexId,e.key,Am,r));return n}Mn(e,t,n,r,i){fl(Sm,"Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Gu(o),l=Gu(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Gu(s)):t?(i(a),a=Gu(o)):(a=Gu(o),l=Gu(s))}}(r,i,cm,(r=>{o.push(this.xn(e,t,n,r))}),(r=>{o.push(this.On(e,t,n,r))})),cc.waitFor(o)}vn(e){let t=1;return Tm(e).Z({index:yu,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>cm(e,t))).filter(((e,t,n)=>!t||0!==cm(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=cm(o,e),i=cm(o,t);if(0===n)r[0]=e.nn();else if(n>0&&i<0)r.push(o),r.push(o.nn());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Nn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Am,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Am,[]];i.push(IDBKeyRange.bound(e,t))}return i}Nn(e,t){return cm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rm)}getMinOffset(e,t){return cc.mapArray(this.dn(t),(t=>this.An(e,t).next((e=>e||yl())))).next(Rm)}}function km(e){return zu(e,cu)}function Em(e){return zu(e,wu)}function Im(e){return zu(e,fu)}function Tm(e){return zu(e,gu)}function Rm(e){bl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;oc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ic(t.readTime,t.documentKey,n)}const Pm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nm=41943040;class jm{static withCacheSize(e){return new jm(e,jm.DEFAULT_COLLECTION_PERCENTILE,jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Om(e,t,n){const r=e.store(Fc),i=e.store(qc),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{bl(1===a)})));const c=[];for(const u of n.mutations){const e=Vc(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return cc.waitFor(o).next((()=>c))}function Dm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yl();t=e.noDocument}return JSON.stringify(t).length}jm.DEFAULT_COLLECTION_PERCENTILE=10,jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jm.DEFAULT=new jm(Nm,jm.DEFAULT_COLLECTION_PERCENTILE,jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jm.DISABLED=new jm(-1,0,0);class Mm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Bn={}}static It(e,t,n,r){bl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Mm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fm(e).Z({index:$c,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=zm(e),o=Fm(e);return o.add({}).next((s=>{bl("number"==typeof s);const a=new Pp(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>xf(e.Tt,t))),i=n.mutations.map((t=>xf(e.Tt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Hu(((e,t)=>Ol(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Vc(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,Wc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Bn[s]=a.keys()})),cc.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Fm(e).get(t).next((e=>e?(bl(e.userId===this.userId),Uf(this.serializer,e)):null))}Ln(e,t){return this.Bn[t]?cc.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Fm(e).Z({index:$c,range:r},((e,t,r)=>{t.userId===this.userId&&(bl(t.batchId>=n),i=Uf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Cc;return Fm(e).Z({index:$c,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Cc],[this.userId,Number.POSITIVE_INFINITY]);return Fm(e).G($c,t).next((e=>e.map((e=>Uf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Bc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return zm(e).Z({range:r},((n,r,o)=>{const[s,a,l]=n,c=jc(a);if(s===this.userId&&t.path.isEqual(c))return Fm(e).get(l).next((e=>{if(!e)throw yl();bl(e.userId===this.userId),i.push(Uf(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hu(Ol);const r=[];return t.forEach((t=>{const i=Bc(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=zm(e).Z({range:o},((e,r,i)=>{const[o,s,a]=e,l=jc(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),cc.waitFor(r).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Bc(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Hu(Ol);return zm(e).Z({range:o},((e,t,i)=>{const[o,a,l]=e,c=jc(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()})).next((()=>this.kn(e,s)))}kn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Fm(e).get(t).next((e=>{if(null===e)throw yl();bl(e.userId===this.userId),n.push(Uf(this.serializer,e))})))})),cc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Om(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),cc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return cc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return zm(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=jc(e[1]);r.push(t)}else n.done()})).next((()=>{bl(0===r.length)}))}))}containsKey(e,t){return Lm(e,this.userId,t)}Qn(e){return $m(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Cc,lastStreamToken:""}))}}function Lm(e,t,n){const r=Bc(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return zm(e).Z({range:o,Y:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Fm(e){return zu(e,Fc)}function zm(e){return zu(e,qc)}function $m(e){return zu(e,Lc)}class Um{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Um(0)}static Kn(){return new Um(-1)}}class Bm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new Um(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((e=>Vl.fromTimestamp(new Bl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Gn(e,r))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vm(e).delete(t.targetId))).next((()=>this.Wn(e))).next((t=>(bl(t.targetCount>0),t.targetCount-=1,this.Gn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Vm(e).Z(((o,s)=>{const a=Bf(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>cc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Vm(e).Z(((e,n)=>{const r=Bf(n);t(r)}))}Wn(e){return Wm(e).get(au).next((e=>(bl(null!==e),e)))}Gn(e,t){return Wm(e).put(au,t)}zn(e,t){return Vm(e).put(Vf(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=gh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Vm(e).Z({range:r,index:tu},((e,n,r)=>{const o=Bf(n);vh(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=qm(e);return t.forEach((t=>{const o=Rc(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),cc.waitFor(r)}removeMatchingKeys(e,t,n){const r=qm(e);return cc.forEach(t,(t=>{const i=Rc(t.path);return cc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=qm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=qm(e);let i=Qh();return r.Z({range:n,Y:!0},((e,t,n)=>{const r=jc(e[1]),o=new Yl(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Rc(t.path),r=IDBKeyRange.bound([n],[zl(n)],!1,!0);let i=0;return qm(e).Z({index:ou,Y:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}lt(e,t){return Vm(e).get(t).next((e=>e?Bf(e):null))}}function Vm(e){return zu(e,eu)}function Wm(e){return zu(e,lu)}function qm(e){return zu(e,ru)}const Hm="LruGarbageCollector",Km=1048576;function Gm(e,t){let[n,r]=e,[i,o]=t;const s=Ol(n,i);return 0===s?Ol(r,o):s}class Ym{constructor(e){this.Hn=e,this.buffer=new Hu(Gm),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Gm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){fl(Hm,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gc(e)?fl(Hm,"Ignoring IndexedDB error during garbage collection: ",e):await lc(e)}await this.er(3e5)}))}}class Xm{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return cc.resolve(Ac.ae);const n=new Ym(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fl("LruGarbageCollector","Garbage collection skipped; disabled"),cc.resolve(Pm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(fl("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pm):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(fl("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),pl()<=Sn.DEBUG&&fl("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(s-o)+"ms\n"+`\tRemoved ${i} targets in `+(a-s)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),cc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Jm(e,t){return new Xm(e,t)}class Zm{constructor(e,t){this.db=e,this.garbageCollector=Jm(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((e,n)=>t(n)))}addReference(e,t,n){return eg(e,n)}removeReference(e,t,n){return eg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return eg(e,t)}ar(e,t){return function(e,t){let n=!1;return $m(e).X((r=>Lm(e,r,t).next((e=>(e&&(n=!0),cc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this._r(e,((o,s)=>{if(s<=t){const t=this.ar(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Vl.min()),qm(e).delete(function(e){return[0,Rc(e.path)]}(o)))))}));r.push(t)}})).next((()=>cc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return eg(e,t)}_r(e,t){const n=qm(e);let r,i=Ac.ae;return n.Z({index:ou},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==Ac.ae&&t(new Yl(jc(r)),i),i=l,r=a):i=Ac.ae})).next((()=>{i!==Ac.ae&&t(new Yl(jc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eg(e,t){return qm(e).put(function(e,t){return{targetId:0,path:Rc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class tg{constructor(){this.changes=new zh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?cc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ng{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return sg(e).put(n)}removeEntry(e,t,n){return sg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ff(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=Vd.newInvalidDocument(t);return sg(e).Z({index:Gc,range:IDBKeyRange.only(ag(t))},((e,r)=>{n=this.cr(t,r)})).next((()=>n))}lr(e,t){let n={size:0,document:Vd.newInvalidDocument(t)};return sg(e).Z({index:Gc,range:IDBKeyRange.only(ag(t))},((e,r)=>{n={document:this.cr(t,r),size:Dm(r)}})).next((()=>n))}getEntries(e,t){let n=Uh();return this.hr(e,t,((e,t)=>{const r=this.cr(e,t);n=n.insert(e,r)})).next((()=>n))}Pr(e,t){let n=Uh(),r=new Vu(Yl.comparator);return this.hr(e,t,((e,t)=>{const i=this.cr(e,t);n=n.insert(e,i),r=r.insert(e,Dm(t))})).next((()=>({documents:n,Tr:r})))}hr(e,t,n){if(t.isEmpty())return cc.resolve();let r=new Hu(cg);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(ag(r.first()),ag(r.last())),o=r.getIterator();let s=o.getNext();return sg(e).Z({index:Gc,range:i},((e,t,r)=>{const i=Yl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&cg(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.W(ag(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Ff(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sg(e).G(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Uh();for(const i of e){const e=this.cr(Yl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Dh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Uh();const o=lg(t,n),s=lg(t,ic.max());return sg(e).Z({index:Qc,range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.cr(Yl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ig(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return og(e).get(Zc).next((e=>(bl(!!e),e)))}ur(e,t){return og(e).put(Zc,t)}cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=wf(e.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Yl.fromSegments(t.noDocument.path),r=$f(t.noDocument.readTime);n=Vd.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return yl();{const e=Yl.fromSegments(t.unknownDocument.path),r=$f(t.unknownDocument.version);n=Vd.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Bl(e[0],e[1]);return Vl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Vl.min()))return e}return Vd.newInvalidDocument(e)}}function rg(e){return new ng(e)}class ig extends tg{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new zh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Hu(((e,t)=>Ol(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.Er.get(i);if(t.push(this.Ir.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Lf(this.Ir.serializer,o);r=r.add(i.path.popLast());const l=Dm(a);n+=l-s.size,t.push(this.Ir.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Lf(this.Ir.serializer,o.convertToNoDocument(Vl.min()));t.push(this.Ir.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Ir.updateMetadata(e,n)),cc.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((e=>(this.Er.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((e=>{let{documents:t,Tr:n}=e;return n.forEach(((e,n)=>{this.Er.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function og(e){return zu(e,Jc)}function sg(e){return zu(e,Hc)}function ag(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lg(e,t){const n=t.documentKey.path.toArray();return[e,Ff(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cg(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ol(n[o],r[o]),i)return i;return i=Ol(n.length,r.length),i||(i=Ol(n[n.length-2],r[r.length-2]),i||Ol(n[n.length-1],r[r.length-1]))}class ug{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&xp(n.mutation,e,Yu.empty(),Bl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Qh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qh();const r=qh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=qh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Qh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Uh();const o=Kh(),s=Kh();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Cp)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),xp(s.mutation,t,s.mutation.getFieldMask(),Bl.now())):o.set(t.key,Yu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new ug(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Kh();let r=new Vu(((e,t)=>e-t)),i=Qh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Yu.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Qh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Hh();l.forEach((e=>{if(!i.has(e)){const r=bp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return cc.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Yl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):cc.resolve(qh());let s=Ql,a=i;return o.next((t=>cc.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?cc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Qh()))).next((e=>({batchId:s,changes:Wh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yl(t)).next((e=>{let t=Vh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Vh();return this.indexManager.getCollectionParents(e,i).next((s=>cc.forEach(s,(s=>{const a=function(e,t){return new _h(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vd.newInvalidDocument(r)))}));let n=Vh();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&xp(o.mutation,r,Yu.empty(),Bl.now()),Dh(t,r)&&(n=n.insert(e,r))})),n}))}}class hg{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return cc.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:cf(e.createTime)}}(t)),cc.resolve()}getNamedQuery(e,t){return cc.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Wf(e.bundledQuery),readTime:cf(e.readTime)}}(t)),cc.resolve()}}class pg{constructor(){this.overlays=new Vu(Yl.comparator),this.Rr=new Map}getOverlay(e,t){return cc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=qh();return cc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),cc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),cc.resolve()}getOverlaysForCollection(e,t,n){const r=qh(),i=t.length+1,o=new Yl(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return cc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Vu(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=qh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=qh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return cc.resolve(s)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new jp(t,n));let i=this.Rr.get(t);void 0===i&&(i=Qh(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class fg{constructor(){this.sessionToken=Xu.EMPTY_BYTE_STRING}getSessionToken(e){return cc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,cc.resolve()}}class mg{constructor(){this.Vr=new Hu(gg.mr),this.gr=new Hu(gg.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new gg(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new gg(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new Yl(new Hl([])),n=new gg(t,e),r=new gg(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Yl(new Hl([])),n=new gg(t,e),r=new gg(t,e+1);let i=Qh();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new gg(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class gg{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Yl.comparator(e.key,t.key)||Ol(e.Cr,t.Cr)}static pr(e,t){return Ol(e.Cr,t.Cr)||Yl.comparator(e.key,t.key)}}class vg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Hu(gg.mr)}checkEmpty(e){return cc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Pp(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Mr=this.Mr.add(new gg(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return cc.resolve(o)}lookupMutationBatch(e,t){return cc.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return cc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return cc.resolve(0===this.mutationQueue.length?Cc:this.Fr-1)}getAllMutationBatches(e){return cc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new gg(t,0),r=new gg(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),cc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hu(Ol);return t.forEach((e=>{const t=new gg(e,0),r=new gg(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),cc.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Yl.isDocumentKey(i)||(i=i.child(""));const o=new gg(new Yl(i),0);let s=new Hu(Ol);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Cr)),!0)}),o),cc.resolve(this.Br(s))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){bl(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return cc.forEach(t.mutations,(r=>{const i=new gg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new gg(t,0),r=this.Mr.firstAfterOrEqual(n);return cc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,cc.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yg{constructor(e){this.kr=e,this.docs=new Vu(Yl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return cc.resolve(n?n.document.mutableCopy():Vd.newInvalidDocument(t))}getEntries(e,t){let n=Uh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vd.newInvalidDocument(e))})),cc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Uh();const o=t.path,s=new Yl(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||oc(rc(s),n)<=0||(r.has(s.key)||Dh(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return cc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){yl()}qr(e,t){return cc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bg(this)}getSize(e){return cc.resolve(this.size)}}class bg extends tg{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),cc.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class wg{constructor(e){this.persistence=e,this.Qr=new zh((e=>gh(e)),vh),this.lastRemoteSnapshotVersion=Vl.min(),this.highestTargetId=0,this.$r=0,this.Ur=new mg,this.targetCount=0,this.Kr=Um.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),cc.resolve()}getLastRemoteSnapshotVersion(e){return cc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return cc.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),cc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),cc.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Um(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,cc.resolve()}updateTargetData(e,t){return this.zn(t),cc.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,cc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),cc.waitFor(i).next((()=>r))}getTargetCount(e){return cc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return cc.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),cc.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),cc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),cc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return cc.resolve(n)}containsKey(e,t){return cc.resolve(this.Ur.containsKey(t))}}class xg{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ac(0),this.zr=!1,this.zr=!0,this.jr=new fg,this.referenceDelegate=e(this),this.Hr=new wg(this),this.indexManager=new xm,this.remoteDocumentCache=function(e){return new yg(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Mf(t),this.Yr=new hg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new vg(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){fl("MemoryPersistence","Starting transaction:",e);const r=new _g(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return cc.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class _g extends ac{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.ti=new mg,this.ni=null}static ri(e){return new Sg(e)}get ii(){if(this.ni)return this.ni;throw yl()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),cc.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),cc.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),cc.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cc.forEach(this.ii,(n=>{const r=Yl.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,Vl.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return cc.or([()=>cc.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ag{constructor(e,t){this.persistence=e,this.oi=new zh((e=>Rc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Jm(this,t)}static ri(e,t){return new Ag(e,t)}Zr(){}Xr(e){return cc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return cc.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?cc.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Vl.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),cc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),cc.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),cc.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),cc.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kd(e.data.value)),t}ar(e,t,n){return cc.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return cc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cg{constructor(e){this.serializer=e}B(e,t,n,r){const i=new dc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Dc)}(e),function(e){e.createObjectStore(Lc,{keyPath:"userId"});e.createObjectStore(Fc,{keyPath:zc,autoIncrement:!0}).createIndex($c,Uc,{unique:!0}),e.createObjectStore(qc)}(e),kg(e),function(e){e.createObjectStore(Oc)}(e));let o=cc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ru),e.deleteObjectStore(eu),e.deleteObjectStore(lu)}(e),kg(e)),o=o.next((()=>function(e){const t=e.store(lu),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vl.min().toTimestamp(),targetCount:0};return t.put(au,n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store(Fc).G().next((n=>{e.deleteObjectStore(Fc),e.createObjectStore(Fc,{keyPath:zc,autoIncrement:!0}).createIndex($c,Uc,{unique:!0});const r=t.store(Fc),i=n.map((e=>r.put(e)));return cc.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore(du,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this._i(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore(Jc)}(e),this.ai(i))))),n<7&&r>=7&&(o=o.next((()=>this.ui(i)))),n<8&&r>=8&&(o=o.next((()=>this.ci(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.li(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore(hu,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(pu,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore(Au,{keyPath:Cu});t.createIndex(ku,Eu,{unique:!1}),t.createIndex(Iu,Tu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore(Hc,{keyPath:Kc});t.createIndex(Gc,Yc),t.createIndex(Qc,Xc)}(e))).next((()=>this.hi(e,i))).next((()=>e.deleteObjectStore(Oc)))),n<14&&r>=14&&(o=o.next((()=>this.Pi(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore(fu,{keyPath:"indexId",autoIncrement:!0}).createIndex(mu,"collectionGroup",{unique:!1});e.createObjectStore(gu,{keyPath:vu}).createIndex(yu,bu,{unique:!1});e.createObjectStore(wu,{keyPath:xu}).createIndex(_u,Su,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore(gu).clear()})).next((()=>{t.objectStore(wu).clear()}))),n<17&&r>=17&&(o=o.next((()=>{!function(e){e.createObjectStore(Ru,{keyPath:"name"})}(e)}))),o}ai(e){let t=0;return e.store(Oc).Z(((e,n)=>{t+=Dm(n)})).next((()=>{const n={byteSize:t};return e.store(Jc).put(Zc,n)}))}_i(e){const t=e.store(Lc),n=e.store(Fc);return t.G().next((t=>cc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,Cc],[t.userId,t.lastAcknowledgedBatchId]);return n.G($c,r).next((n=>cc.forEach(n,(n=>{bl(n.userId===t.userId);const r=Uf(this.serializer,n);return Om(e,t.userId,r).next((()=>{}))}))))}))))}ui(e){const t=e.store(ru),n=e.store(Oc);return e.store(lu).get(au).next((e=>{const r=[];return n.Z(((n,i)=>{const o=new Hl(n),s=function(e){return[0,Rc(e)]}(o);r.push(t.get(s).next((n=>n?cc.resolve():(n=>t.put({targetId:0,path:Rc(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>cc.waitFor(r)))}))}ci(e,t){e.createObjectStore(cu,{keyPath:uu});const n=t.store(cu),r=new _m,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Rc(r)})}};return t.store(Oc).Z({Y:!0},((e,t)=>{const n=new Hl(e);return i(n.popLast())})).next((()=>t.store(qc).Z({Y:!0},((e,t)=>{let[n,r,o]=e;const s=jc(r);return i(s.popLast())}))))}li(e){const t=e.store(eu);return t.Z(((e,n)=>{const r=Bf(n),i=Vf(this.serializer,r);return t.put(i)}))}hi(e,t){const n=t.store(Oc),r=[];return n.Z(((e,n)=>{const i=t.store(Hc),o=function(e){return e.document?new Yl(Hl.fromString(e.document.name).popFirst(5)):e.noDocument?Yl.fromSegments(e.noDocument.path):e.unknownDocument?Yl.fromSegments(e.unknownDocument.path):yl()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>cc.waitFor(r)))}Pi(e,t){const n=t.store(Fc),r=rg(this.serializer),i=new xg(Sg.ri,this.serializer.Tt);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Qh();Uf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),cc.forEach(n,((e,n)=>{const o=new ul(n),s=Xf.It(this.serializer,o),a=i.getIndexManager(o),l=Mm.It(o,this.serializer,a,i.referenceDelegate);return new dg(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Fu(t,Ac.ae),e).next()}))}))}}function kg(e){e.createObjectStore(ru,{keyPath:iu}).createIndex(ou,su,{unique:!0}),e.createObjectStore(eu,{keyPath:"targetId"}).createIndex(tu,nu,{unique:!0}),e.createObjectStore(lu)}const Eg="IndexedDbPersistence",Ig=18e5,Tg=5e3,Rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pg="main";class Ng{constructor(e,t,n,r,i,o,s,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=i,this.window=o,this.document=s,this.Ii=l,this.Ei=c,this.di=u,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Ng.D())throw new _l(xl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zm(this,r),this.gi=t+Pg,this.serializer=new Mf(a),this.pi=new hc(this.gi,this.di,new Cg(this.serializer)),this.jr=new Zf,this.Hr=new Bm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rg(this.serializer),this.Yr=new Gf,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,!1===c&&ml(Eg,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _l(xl.FAILED_PRECONDITION,Rg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new Ac(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Og(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(gc(e))return fl(Eg,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fl(Eg,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return jg(e).get(Mc).next((e=>cc.resolve(this.Ni(e))))}Bi(e){return Og(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Ig)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=zu(e,du);return t.G().next((e=>{const n=this.qi(e,Ig),r=e.filter((e=>-1===n.indexOf(e)));return cc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?cc.resolve(!0):jg(e).get(Mc).next((t=>{if(null!==t&&this.ki(t.leaseTimestampMs,Tg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new _l(xl.FAILED_PRECONDITION,Rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Og(e).G().next((e=>void 0===this.qi(e,Tg).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&fl(Eg,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Dc,du],(e=>{const t=new Fu(e,Ac.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((e=>this.ki(e.updateTimeMs,t)&&!this.$i(e.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>Og(e).G().next((e=>this.qi(e,Ig).map((e=>e.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Mm.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cm(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Xf.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){fl(Eg,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?Lu:16===e?Mu:15===e?Du:14===e?Ou:13===e?ju:12===e?Nu:11===e?Pu:void yl()}(this.di);let o;return this.pi.runTransaction(e,r,i,(r=>(o=new Fu(r,this.Gr?this.Gr.next():Ac.ae),"readwrite-primary"===t?this.Fi(o).next((e=>!!e||this.Mi(o))).next((t=>{if(!t)throw ml(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new _l(xl.FAILED_PRECONDITION,sc);return n(o)})).next((e=>this.Oi(o).next((()=>e)))):this.ji(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ji(e){return jg(e).get(Mc).next((e=>{if(null!==e&&this.ki(e.leaseTimestampMs,Tg)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new _l(xl.FAILED_PRECONDITION,Rg)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jg(e).put(Mc,t)}static D(){return hc.D()}xi(e){const t=jg(e);return t.get(Mc).next((e=>this.Ni(e)?(fl(Eg,"Releasing primary lease."),t.delete(Mc)):cc.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ml(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground="visible"===this.document.visibilityState)}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;Gt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=null!==(null===(t=this.yi)||void 0===t?void 0:t.getItem(this.Qi(e)));return fl(Eg,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return ml(Eg,"Failed to get zombied client id.",e),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(xI){ml("Failed to set zombie client id.",xI)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch(xI){}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jg(e){return zu(e,Dc)}function Og(e){return zu(e,du)}function Dg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Mg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Qh(),r=Qh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Mg(e,t.fromCache,n,r)}}class Lg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fg{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Gt()?8:pc(Wt())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Lg;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(pl()<=Sn.DEBUG&&fl("QueryEngine","SDK will not create cache indexes for query:",Oh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),cc.resolve()):(pl()<=Sn.DEBUG&&fl("QueryEngine","Query:",Oh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(pl()<=Sn.DEBUG&&fl("QueryEngine","The SDK decides to create cache indexes for query:",Oh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ih(t))):cc.resolve())}rs(e,t){if(Ch(t))return cc.resolve(null);let n=Ih(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Ph(t,null,"F"),n=Ih(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Qh(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.cs(t,r);return this.ls(t,o,i,n.readTime)?this.rs(e,Ph(t,null,"F")):this.hs(e,o,t,n)}))))})))))}ss(e,t,n,r){return Ch(t)||r.isEqual(Vl.min())?cc.resolve(null):this.ns.getDocuments(e,n).next((i=>{const o=this.cs(t,i);return this.ls(t,o,n,r)?cc.resolve(null):(pl()<=Sn.DEBUG&&fl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Oh(t)),this.hs(e,o,t,nc(r,Ql)).next((e=>e)))}))}cs(e,t){let n=new Hu(Lh(e));return t.forEach(((t,r)=>{Dh(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return pl()<=Sn.DEBUG&&fl("QueryEngine","Using full collection scan to execute query:",Oh(t)),this.ns.getDocumentsMatchingQuery(e,t,ic.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const zg="LocalStore";class $g{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Vu(Ol),this.Is=new zh((e=>gh(e)),vh),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dg(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function Ug(e,t,n,r){return new $g(e,t,n,r)}async function Bg(e,t){const n=wl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Qh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Vg(e){const t=wl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Wg(e,t,n){let r=Qh(),i=Qh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Uh();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Vl.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):fl(zg,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{Vs:r,fs:i}}))}function qg(e,t){const n=wl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Cc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Hg(e,t){const n=wl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,cc.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Df(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Kg(e,t,n){const r=wl(e),i=r.Ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!gc(e))throw e;fl(zg,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Gg(e,t,n){const r=wl(e);let i=Vl.min(),o=Qh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=wl(e),i=r.Is.get(n);return void 0!==i?cc.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Ih(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Vl.min(),n?o:Qh()))).next((e=>(Yg(r,Mh(t),e),{documents:e,gs:o})))))}function Yg(e,t,n){let r=e.Es.get(t)||Vl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class Qg{constructor(){this.activeTargetIds=Jh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xg{constructor(){this.ho=new Qg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Qg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jg{To(e){}shutdown(){}}const Zg="ConnectivityMonitor";class ev{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){fl(Zg,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){fl(Zg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tv=null;function nv(){return null===tv?tv=268435456+Math.round(2147483648*Math.random()):tv++,"0x"+tv.toString(16)}const rv="RestConnection",iv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ov{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===ud?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const o=nv(),s=this.bo(e,t.toUriEncodedString());fl(rv,`Sending RPC '${e}' ${o}:`,s,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,s,a,n).then((t=>(fl(rv,`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw gl(rv,`RPC '${e}' ${o} failed with error: `,t,"url: ",s,"request:",n),t}))}Co(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=iv[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class sv{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const av="WebChannelConnection";class lv extends ov{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=nv();return new Promise(((o,s)=>{const a=new Ja;a.setWithCredentials(!0),a.listenOnce(el.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case tl.NO_ERROR:const t=a.getResponseJson();fl(av,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case tl.TIMEOUT:fl(av,`RPC '${e}' ${i} timed out`),s(new _l(xl.DEADLINE_EXCEEDED,"Request time out"));break;case tl.HTTP_ERROR:const n=a.getStatus();if(fl(av,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xl).indexOf(t)>=0?t:xl.UNKNOWN}(t.status);s(new _l(e,t.message))}else s(new _l(xl.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new _l(xl.UNAVAILABLE,"Connection failed."));break;default:yl()}}finally{fl(av,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);fl(av,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=nv(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ol(),s=il(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");fl(av,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const p=new sv({Fo:t=>{h?fl(av,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(fl(av,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),fl(av,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Za.EventType.OPEN,(()=>{h||(fl(av,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),f(u,Za.EventType.CLOSE,(()=>{h||(h=!0,fl(av,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),f(u,Za.EventType.ERROR,(t=>{h||(h=!0,gl(av,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new _l(xl.UNAVAILABLE,"The operation could not be completed")))})),f(u,Za.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];bl(!!i);const o=i,s=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){fl(av,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=Dp[e];if(void 0!==t)return Fp(t)}(t),i=s.message;void 0===n&&(n=xl.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,p.Uo(new _l(n,i)),u.close()}else fl(av,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),f(s,rl.STAT_EVENT,(t=>{t.stat===nl.PROXY?fl(av,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===nl.NOPROXY&&fl(av,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function cv(){return"undefined"!=typeof window?window:null}function uv(){return"undefined"!=typeof document?document:null}function dv(e){return new rf(e,!0)}class hv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&fl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const pv="PersistentStream";class fv{constructor(e,t,n,r,i,o,s,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new hv(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===xl.RESOURCE_EXHAUSTED?(ml(t.toString()),ml("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===xl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new _l(xl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return fl(pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(fl(pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mv extends fv{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(bl(void 0===t||"string"==typeof t),Xu.fromBase64String(t||"")):(bl(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Xu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?xl.UNKNOWN:Fp(e.code);return new _l(t,e.message||"")}(s);n=new Yp(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ff(e,r.document.name),o=cf(r.document.updateTime),s=r.document.createTime?cf(r.document.createTime):Vl.min(),a=new Ud({mapValue:{fields:r.document.fields}}),l=Vd.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Kp(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ff(e,r.document),o=r.readTime?cf(r.readTime):Vl.min(),s=Vd.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Kp([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ff(e,r.document),o=r.removedTargetIds||[];n=new Kp([],o,i,null)}else{if(!("filter"in t))return yl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Op(r,i),s=e.targetId;n=new Gp(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vl.min():t.readTime?cf(t.readTime):Vl.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=vf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=yh(r)?{documents:Sf(e,r)}:{query:Af(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=af(e,t.resumeToken);const r=of(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Vl.min())>0){n.readTime=sf(e,t.snapshotVersion.toTimestamp());const r=of(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=vf(this.serializer),t.removeTarget=e,this.I_(t)}}class gv extends fv{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return bl(!!e.streamToken),this.lastStreamToken=e.streamToken,bl(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){bl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(bl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?cf(e.updateTime):cf(t);return n.isEqual(Vl.min())&&(n=cf(t)),new mp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=cf(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=vf(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>xf(this.serializer,e)))};this.I_(t)}}class vv{}class yv extends vv{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new _l(xl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,df(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _l(xl.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.Co(e,df(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _l(xl.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class bv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ml(t),this.N_=!1):fl("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const wv="RemoteStore";class xv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Rv(this)&&(fl(wv,"Restarting streams for network reachability change."),await async function(e){const t=wl(e);t.W_.add(4),await Sv(t),t.j_.set("Unknown"),t.W_.delete(4),await _v(t)}(this))}))})),this.j_=new bv(n,r)}}async function _v(e){if(Rv(e))for(const t of e.G_)await t(!0)}async function Sv(e){for(const t of e.G_)await t(!1)}function Av(e,t){const n=wl(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Tv(n)?Iv(n):Yv(n).c_()&&kv(n,t))}function Cv(e,t){const n=wl(e),r=Yv(n);n.K_.delete(t),r.c_()&&Ev(n,t),0===n.K_.size&&(r.c_()?r.P_():Rv(n)&&n.j_.set("Unknown"))}function kv(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yv(e).y_(t)}function Ev(e,t){e.H_.Ne(t),Yv(e).w_(t)}function Iv(e){e.H_=new Xp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Yv(e).start(),e.j_.B_()}function Tv(e){return Rv(e)&&!Yv(e).u_()&&e.K_.size>0}function Rv(e){return 0===wl(e).W_.size}function Pv(e){e.H_=void 0}async function Nv(e){e.j_.set("Online")}async function jv(e){e.K_.forEach(((t,n)=>{kv(e,t)}))}async function Ov(e,t){Pv(e),Tv(e)?(e.j_.q_(t),Iv(e)):e.j_.set("Unknown")}async function Dv(e,t,n){if(e.j_.set("Online"),t instanceof Yp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){fl(wv,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mv(e,n)}else if(t instanceof Kp?e.H_.We(t):t instanceof Gp?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Vl.min()))try{const t=await Vg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(Xu.EMPTY_BYTE_STRING,r.snapshotVersion)),Ev(e,t);const i=new Df(r.target,t,n,r.sequenceNumber);kv(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){fl(wv,"Failed to raise snapshot:",t),await Mv(e,t)}}async function Mv(e,t,n){if(!gc(t))throw t;e.W_.add(1),await Sv(e),e.j_.set("Offline"),n||(n=()=>Vg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{fl(wv,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await _v(e)}))}function Lv(e,t){return t().catch((n=>Mv(e,n,t)))}async function Fv(e){const t=wl(e),n=Qv(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Cc;for(;zv(t);)try{const e=await qg(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,$v(t,e)}catch(e){await Mv(t,e)}Uv(t)&&Bv(t)}function zv(e){return Rv(e)&&e.U_.length<10}function $v(e,t){e.U_.push(t);const n=Qv(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Uv(e){return Rv(e)&&!Qv(e).u_()&&e.U_.length>0}function Bv(e){Qv(e).start()}async function Vv(e){Qv(e).C_()}async function Wv(e){const t=Qv(e);for(const n of e.U_)t.b_(n.mutations)}async function qv(e,t,n){const r=e.U_.shift(),i=Np.from(r,t,n);await Lv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Fv(e)}async function Hv(e,t){t&&Qv(e).S_&&await async function(e,t){if(function(e){return Lp(e)&&e!==xl.ABORTED}(t.code)){const n=e.U_.shift();Qv(e).h_(),await Lv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fv(e)}}(e,t),Uv(e)&&Bv(e)}async function Kv(e,t){const n=wl(e);n.asyncQueue.verifyOperationInProgress(),fl(wv,"RemoteStore received new credentials");const r=Rv(n);n.W_.add(3),await Sv(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await _v(n)}async function Gv(e,t){const n=wl(e);t?(n.W_.delete(2),await _v(n)):t||(n.W_.add(2),await Sv(n),n.j_.set("Unknown"))}function Yv(e){return e.J_||(e.J_=function(e,t,n){const r=wl(e);return r.M_(),new mv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Nv.bind(null,e),No:jv.bind(null,e),Lo:Ov.bind(null,e),p_:Dv.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Tv(e)?Iv(e):e.j_.set("Unknown")):(await e.J_.stop(),Pv(e))}))),e.J_}function Qv(e){return e.Y_||(e.Y_=function(e,t,n){const r=wl(e);return r.M_(),new gv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Vv.bind(null,e),Lo:Hv.bind(null,e),D_:Wv.bind(null,e),v_:qv.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await Fv(e)):(await e.Y_.stop(),e.U_.length>0&&(fl(wv,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class Xv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Sl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Xv(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _l(xl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jv(e,t){if(ml("AsyncQueue",`${t}: ${e}`),gc(e))return new _l(xl.UNAVAILABLE,`${t}: ${e}`);throw e}class Zv{static emptySet(e){return new Zv(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Yl.comparator(t.key,n.key):(e,t)=>Yl.comparator(e.key,t.key),this.keyedMap=Vh(),this.sortedSet=new Vu(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ey{constructor(){this.Z_=new Vu(Yl.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):yl():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ty{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new ty(e,t,Zv.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ny{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class ry{constructor(){this.queries=iy(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=wl(e),r=n.queries;n.queries=iy(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new _l(xl.ABORTED,"Firestore shutting down"))}}function iy(){return new zh((e=>jh(e)),Nh)}async function oy(e,t){const n=wl(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.na()&&t.ra()&&(r=2):(o=new ny,r=t.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(i,!0);break;case 1:o.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Jv(e,`Initialization of query '${Oh(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.ta.push(t),t.sa(n.onlineState),o.ea&&t.oa(o.ea)&&cy(n)}async function sy(e,t){const n=wl(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.ta.indexOf(t);e>=0&&(o.ta.splice(e,1),0===o.ta.length?i=t.ra()?0:1:!o.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ay(e,t){const n=wl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&cy(n)}function ly(e,t,n){const r=wl(e),i=r.queries.get(t);if(i)for(const o of i.ta)o.onError(n);r.queries.delete(t)}function cy(e){e.ia.forEach((e=>{e.next()}))}var uy,dy;(dy=uy||(uy={}))._a="default",dy.Cache="cache";class hy{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ty(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=ty.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==uy.Cache}}class py{constructor(e){this.key=e}}class fy{constructor(e){this.key=e}}class my{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Qh(),this.mutatedKeys=Qh(),this.ya=Lh(e),this.wa=new Zv(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new ey,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Dh(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.va(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.ya(u,a)>0||l&&this.ya(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(s=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:o,Da:n,ls:s,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yl()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const s=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==o.length||l?{snapshot:new ty(this.query,e.wa,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:s}:{Ma:s}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ey,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Qh(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new fy(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new py(n))})),t}Oa(e){this.fa=e.gs,this.pa=Qh();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ty.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const gy="SyncEngine";class vy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yy{constructor(e){this.key=e,this.Ba=!1}}class by{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new zh((e=>jh(e)),Nh),this.qa=new Map,this.Qa=new Set,this.$a=new Vu(Yl.comparator),this.Ua=new Map,this.Ka=new mg,this.Wa={},this.Ga=new Map,this.za=Um.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function wy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Uy(e);let i;const o=r.ka.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await _y(r,t,n,!0),i}async function xy(e,t){const n=Uy(e);await _y(n,t,!0,!1)}async function _y(e,t,n,r){const i=await Hg(e.localStore,Ih(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Sy(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Av(e.remoteStore,i),a}async function Sy(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Gg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Dy(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const o=await Gg(e.localStore,t,!0),s=new my(t,o.gs),a=s.ba(o.documents),l=Hp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Dy(e,n,c.Ma);const u=new vy(t,n,s);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function Ay(e,t,n){const r=wl(e),i=r.ka.get(t),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter((e=>!Nh(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cv(r.remoteStore,i.targetId),jy(r,i.targetId)})).catch(lc)):(jy(r,i.targetId),await Kg(r.localStore,i.targetId,!0))}async function Cy(e,t){const n=wl(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cv(n.remoteStore,r.targetId))}async function ky(e,t){const n=wl(e);try{const e=await function(e,t){const n=wl(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Hr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Xu.EMPTY_BYTE_STRING,Vl.min()).withLastLimboFreeSnapshotVersion(Vl.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Hr.updateTargetData(e,c))}));let a=Uh(),l=Qh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Wg(e,o,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual(Vl.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return cc.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(bl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?bl(r.Ba):e.removedDocuments.size>0&&(bl(r.Ba),r.Ba=!1))})),await Fy(n,e,t)}catch(e){await lc(e)}}function Ey(e,t,n){const r=wl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=wl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&cy(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Iy(e,t,n){const r=wl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),o=i&&i.key;if(o){let e=new Vu(Yl.comparator);e=e.insert(o,Vd.newNoDocument(o,Vl.min()));const n=Qh().add(o),i=new qp(Vl.min(),new Map,new Vu(Ol),e,n);await ky(r,i),r.$a=r.$a.remove(o),r.Ua.delete(t),Ly(r)}else await Kg(r.localStore,t,!1).then((()=>jy(r,t,n))).catch(lc)}async function Ty(e,t){const n=wl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=wl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=cc.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);bl(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Qh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ny(n,r,null),Py(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fy(n,e)}catch(e){await lc(e)}}async function Ry(e,t,n){const r=wl(e);try{const e=await function(e,t){const n=wl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(bl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ny(r,t,n),Py(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Fy(r,e)}catch(n){await lc(n)}}function Py(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function Ny(e,t,n){const r=wl(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function jy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||Oy(e,t)}))}function Oy(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(Cv(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),Ly(e))}function Dy(e,t,n){for(const r of n)r instanceof py?(e.Ka.addReference(r.key,t),My(e,r)):r instanceof fy?(fl(gy,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||Oy(e,r.key)):yl()}function My(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(fl(gy,"New document in limbo: "+n),e.Qa.add(r),Ly(e))}function Ly(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Yl(Hl.fromString(t)),r=e.za.next();e.Ua.set(r,new yy(n)),e.$a=e.$a.insert(n,r),Av(e.remoteStore,new Df(Ih(Ah(n.path)),r,"TargetPurposeLimboResolution",Ac.ae))}}async function Fy(e,t,n){const r=wl(e),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{s.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Mg.Yi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.La.p_(i),await async function(e,t){const n=wl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>cc.forEach(t,(t=>cc.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>cc.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!gc(e))throw e;fl(zg,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,o))}async function zy(e,t){const n=wl(e);if(!n.currentUser.isEqual(t)){fl(gy,"User change. New user:",t.toKey());const e=await Bg(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new _l(xl.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Fy(n,e.Rs)}}function $y(e,t){const n=wl(e),r=n.Ua.get(t);if(r&&r.Ba)return Qh().add(r.key);{let e=Qh();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function Uy(e){const t=wl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ky.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$y.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Iy.bind(null,t),t.La.p_=ay.bind(null,t.eventManager),t.La.Ja=ly.bind(null,t.eventManager),t}function By(e){const t=wl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ty.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ry.bind(null,t),t}class Vy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dv(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Ug(this.persistence,new Fg,e.initialUser,this.serializer)}Xa(e){return new xg(Sg.ri,this.serializer)}Za(e){return new Xg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vy.provider={build:()=>new Vy};class Wy extends Vy{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){bl(this.persistence.referenceDelegate instanceof Ag);const n=this.persistence.referenceDelegate.garbageCollector;return new Qm(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?jm.withCacheSize(this.cacheSizeBytes):jm.DEFAULT;return new xg((e=>Ag.ri(e,t)),this.serializer)}}class qy extends Vy{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await By(this.ru.syncEngine),await Fv(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return Ug(this.persistence,new Fg,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Qm(n,e.asyncQueue,t)}nu(e,t){const n=new Sc(t,this.persistence);return new _c(e.asyncQueue,n)}Xa(e){const t=Dg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jm.withCacheSize(this.cacheSizeBytes):jm.DEFAULT;return new Ng(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cv(),uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Xg}}class Hy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ey(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zy.bind(null,this.syncEngine),await Gv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ry}createDatastore(e){const t=dv(e.databaseInfo.databaseId),n=function(e){return new lv(e)}(e.databaseInfo);return function(e,t,n,r){return new yv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new xv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ey(this.syncEngine,e,0)),ev.D()?new ev:new Jg)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new by(e,t,n,r,i,o);return s&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=wl(e);fl(wv,"RemoteStore shutting down."),t.W_.add(5),await Sv(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Hy.provider={build:()=>new Hy};class Ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ml("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Gy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _l(xl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=wl(e),r={documents:t.map((e=>pf(n.serializer,e)))},i=await n.Co("BatchGetDocuments",n.serializer.databaseId,Hl.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){bl(!!t.found),t.found.name,t.found.updateTime;const n=ff(e,t.found.name),r=cf(t.found.updateTime),i=t.found.createTime?cf(t.found.createTime):Vl.min(),o=new Ud({mapValue:{fields:t.found.fields}});return Vd.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){bl(!!t.missing),bl(!!t.readTime);const n=ff(e,t.missing),r=cf(t.readTime);return Vd.newNoDocument(n,r)}(e,t):yl()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());bl(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Yl.fromPath(t);this.mutations.push(new Rp(n,this.precondition(n)))})),await async function(e,t){const n=wl(e),r={writes:t.map((e=>xf(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Hl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yl();t=Vl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _l(xl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vl.min())?gp.exists(!1):gp.updateTime(t):gp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vl.min()))throw new _l(xl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gp.updateTime(t)}return gp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yy{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new hv(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new Gy(this.datastore),t=this.du(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Au(e)}))))})).catch((e=>{this.Au(e)}))}))}du(e){try{const t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lp(t)}return!1}}const Qy="FirestoreClient";class Xy{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ul.UNAUTHENTICATED,this.clientId=jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{fl(Qy,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(fl(Qy,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(_I){const n=Jv(_I,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Jy(e,t){e.asyncQueue.verifyOperationInProgress(),fl(Qy,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Bg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Zy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await eb(e);fl(Qy,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Kv(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Kv(t.remoteStore,n))),e._onlineComponents=t}async function eb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fl(Qy,"Using user provided OfflineComponentProvider");try{await Jy(e,e._uninitializedComponentsProvider._offline)}catch(_I){const n=_I;if(!function(e){return"FirebaseError"===e.name?e.code===xl.FAILED_PRECONDITION||e.code===xl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;gl("Error using user provided cache. Falling back to memory cache: "+n),await Jy(e,new Vy)}}else fl(Qy,"Using default OfflineComponentProvider"),await Jy(e,new Wy(void 0));return e._offlineComponents}async function tb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fl(Qy,"Using user provided OnlineComponentProvider"),await Zy(e,e._uninitializedComponentsProvider._online)):(fl(Qy,"Using default OnlineComponentProvider"),await Zy(e,new Hy))),e._onlineComponents}function nb(e){return tb(e).then((e=>e.syncEngine))}function rb(e){return tb(e).then((e=>e.datastore))}async function ib(e){const t=await tb(e),n=t.eventManager;return n.onListen=wy.bind(null,t.syncEngine),n.onUnlisten=Ay.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xy.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Cy.bind(null,t.syncEngine),n}function ob(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Ky({next:a=>{o.su(),t.enqueueAndForget((()=>sy(e,s)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new _l(xl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new _l(xl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new hy(Ah(n.path),o,{includeMetadataChanges:!0,Ta:!0});return oy(e,s)}(await ib(e),e.asyncQueue,t,n,r))),r.promise}function sb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Ky({next:n=>{o.su(),t.enqueueAndForget((()=>sy(e,s))),n.fromCache&&"server"===r.source?i.reject(new _l(xl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new hy(n,o,{includeMetadataChanges:!0,Ta:!0});return oy(e,s)}(await ib(e),e.asyncQueue,t,n,r))),r.promise}function ab(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const lb=new Map;function cb(e,t,n){if(!n)throw new _l(xl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ub(e){if(!Yl.isDocumentKey(e))throw new _l(xl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function db(e){if(Yl.isDocumentKey(e))throw new _l(xl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":yl()}function pb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _l(xl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hb(e);throw new _l(xl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function fb(e,t){if(t<=0)throw new _l(xl.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const mb="firestore.googleapis.com",gb=!0;class vb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new _l(xl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=gb}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:gb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Nm;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Km)throw new _l(xl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new _l(xl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ab(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _l(xl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new _l(xl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new _l(xl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _l(xl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _l(xl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Cl;switch(e.type){case"firstParty":return new Il(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _l(xl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lb.get(e);t&&(fl("ComponentProvider","Removing Datastore"),lb.delete(e),t.terminate())}(this),Promise.resolve()}}class bb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bb(this.firestore,e,this._query)}}class wb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wb(this.firestore,e,this._key)}}class xb extends bb{constructor(e,t,n){super(e,t,Ah(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wb(this.firestore,null,new Yl(e))}withConverter(e){return new xb(this.firestore,e,this._path)}}function _b(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vn(e),cb("collection","path",t),e instanceof yb){const n=Hl.fromString(t,...r);return db(n),new xb(e,null,n)}{if(!(e instanceof wb||e instanceof xb))throw new _l(xl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hl.fromString(t,...r));return db(n),new xb(e.firestore,null,n)}}function Sb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vn(e),1===arguments.length&&(t=jl.newId()),cb("doc","path",t),e instanceof yb){const n=Hl.fromString(t,...r);return ub(n),new wb(e,null,new Yl(n))}{if(!(e instanceof wb||e instanceof xb))throw new _l(xl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hl.fromString(t,...r));return ub(n),new wb(e.firestore,e instanceof xb?e.converter:null,new Yl(n))}}const Ab="AsyncQueue";class Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new hv(this,"async_queue_retry"),this.Su=()=>{const e=uv();e&&fl(Ab,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=uv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=uv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Sl;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(xI){if(!gc(xI))throw xI;fl(Ab,"Operation failed with retryable error: "+xI)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ml("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Xv.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&yl()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function kb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Eb extends yb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cb(e),this._firestoreClient=void 0,await e}}}function Ib(e){if(e._terminated)throw new _l(xl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Tb(e),e._firestoreClient}function Tb(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new cd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ab(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Xy(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Rb(e,t,n){if((e=pb(e,Eb))._firestoreClient||e._terminated)throw new _l(xl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new _l(xl.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Tb(e)}class Pb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pb(Xu.fromBase64String(e))}catch(e){throw new _l(xl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pb(Xu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new _l(xl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jb{constructor(e){this._methodName=e}}class Ob{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _l(xl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _l(xl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ol(this._lat,e._lat)||Ol(this._long,e._long)}}class Db{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Mb=/^__.*__$/;class Lb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Cp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ap(e,this.data,t,this.fieldTransforms)}}class Fb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Cp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yl()}}class $b{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new $b(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return sw(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(zb(this.Lu)&&Mb.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Ub{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||dv(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $b({Lu:e,methodName:t,zu:n,path:Gl.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bb(e){const t=e._freezeSettings(),n=dv(e._databaseId);return new Ub(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vb(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ju(o.merge||o.mergeFields?2:0,t,n,i);nw("Data must be an object, but it was:",s,r);const a=ew(r,s);let l,c;if(o.merge)l=new Yu(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=rw(t,r,n);if(!s.contains(i))throw new _l(xl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);aw(e,i)||e.push(i)}l=new Yu(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Lb(new Ud(a),l,c)}class Wb extends jb{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wb}}function qb(e,t,n){return new $b({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Hb extends jb{_toFieldTransform(e){return new fp(e.path,new sp)}isEqual(e){return e instanceof Hb}}class Kb extends jb{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=qb(this,e,!0),n=this.Hu.map((e=>Zb(e,t))),r=new ap(n);return new fp(e.path,r)}isEqual(e){return e instanceof Kb&&an(this.Hu,e.Hu)}}class Gb extends jb{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=qb(this,e,!0),n=this.Hu.map((e=>Zb(e,t))),r=new cp(n);return new fp(e.path,r)}isEqual(e){return e instanceof Gb&&an(this.Hu,e.Hu)}}class Yb extends jb{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new dp(e.serializer,tp(e.serializer,this.Ju));return new fp(e.path,t)}isEqual(e){return e instanceof Yb&&this.Ju===e.Ju}}function Qb(e,t,n,r){const i=e.ju(1,t,n);nw("Data must be an object, but it was:",i,r);const o=[],s=Ud.empty();Uu(r,((e,r)=>{const a=ow(t,e,n);r=vn(r);const l=i.Uu(a);if(r instanceof Wb)o.push(a);else{const e=Zb(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Yu(o);return new Fb(s,a,i.fieldTransforms)}function Xb(e,t,n,r,i,o){const s=e.ju(1,t,n),a=[rw(t,r,n)],l=[i];if(o.length%2!=0)throw new _l(xl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(rw(t,o[h])),l.push(o[h+1]);const c=[],u=Ud.empty();for(let h=a.length-1;h>=0;--h)if(!aw(c,a[h])){const e=a[h];let t=l[h];t=vn(t);const n=s.Uu(e);if(t instanceof Wb)c.push(e);else{const r=Zb(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Yu(c);return new Fb(u,d,s.fieldTransforms)}function Jb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Zb(n,e.ju(r?4:3,t))}function Zb(e,t){if(tw(e=vn(e)))return nw("Unsupported field value:",t,e),ew(e,t);if(e instanceof jb)return function(e,t){if(!zb(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Zb(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return tp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Bl.fromDate(e);return{timestampValue:sf(t.serializer,n)}}if(e instanceof Bl){const n=new Bl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sf(t.serializer,n)}}if(e instanceof Ob)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pb)return{bytesValue:af(t.serializer,e._byteString)};if(e instanceof wb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:uf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Db)return function(e,t){return{mapValue:{fields:{[hd]:{stringValue:md},[gd]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return Zh(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${hb(e)}`)}(e,t)}function ew(e,t){const n={};return Bu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Uu(e,((e,r)=>{const i=Zb(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function tw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bl||e instanceof Ob||e instanceof Pb||e instanceof wb||e instanceof jb||e instanceof Db)}function nw(e,t,n){if(!tw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hb(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function rw(e,t,n){if((t=vn(t))instanceof Nb)return t._internalPath;if("string"==typeof t)return ow(e,t);throw sw("Field path arguments must be of type string or ",e,!1,void 0,n)}const iw=new RegExp("[~\\*/\\[\\]]");function ow(e,t,n){if(t.search(iw)>=0)throw sw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Nb(...t.split("."))._internalPath}catch(SI){throw sw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function sw(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new _l(xl.INVALID_ARGUMENT,a+e+l)}function aw(e,t){return e.some((e=>e.isEqual(t)))}class lw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cw extends lw{data(){return super.data()}}function uw(e,t){return"string"==typeof t?ow(e,t):t instanceof Nb?t._internalPath:t._delegate._internalPath}function dw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _l(xl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hw{}class pw extends hw{}function fw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof hw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof vw)).length,n=e.filter((e=>e instanceof mw)).length;if(t>1||t>0&&n>0)throw new _l(xl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class mw extends pw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new mw(e,t,n)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new bb(e.firestore,e.converter,Rh(e._query,t))}_parse(e){const t=Bb(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new _l(xl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){Sw(s,o);const t=[];for(const n of s)t.push(_w(r,e,n));a={arrayValue:{values:t}}}else a=_w(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Sw(s,o),a=Jb(n,t,s,"in"===o||"not-in"===o);return Qd.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function gw(e,t,n){const r=t,i=uw("where",e);return mw._create(i,r,n)}class vw extends hw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Xd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Aw(n,i),n=Rh(n,i)}(e._query,t),new bb(e.firestore,e.converter,Rh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yw extends pw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new _l(xl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _l(xl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kd(t,n)}(e._query,this._field,this._direction);return new bb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new _h(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function bw(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=uw("orderBy",e);return yw._create(n,t)}class ww extends pw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ww(e,t,n)}_apply(e){return new bb(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}}function xw(e){return fb("limit",e),ww._create("limit",e,"F")}function _w(e,t,n){if("string"==typeof(n=vn(n))){if(""===n)throw new _l(xl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kh(t)&&-1!==n.indexOf("/"))throw new _l(xl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Hl.fromString(n));if(!Yl.isDocumentKey(r))throw new _l(xl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ed(e,new Yl(r))}if(n instanceof wb)return Ed(e,n._key);throw new _l(xl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hb(n)}.`)}function Sw(e,t){if(!Array.isArray(e)||0===e.length)throw new _l(xl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Aw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new _l(xl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _l(xl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Cw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ed(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(td(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Uu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[gd].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>ed(e.doubleValue)));return new Db(i)}convertGeoPoint(e){return new Ob(ed(e.latitude),ed(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ad(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ld(e));default:return null}}convertTimestamp(e){const t=Zu(e);return new Bl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Hl.fromString(e);bl(Of(n));const r=new dd(n.get(1),n.get(3)),i=new Yl(n.popFirst(5));return r.isEqual(t)||ml(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function kw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ew extends Cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wb(this.firestore,null,t)}}class Iw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tw extends lw{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Rw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(uw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Rw extends Tw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Pw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Iw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Rw(this._firestore,this._userDataWriter,n.key,n,new Iw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _l(xl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Rw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Iw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Rw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Iw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Nw(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Nw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yl()}}function jw(e){e=pb(e,wb);const t=pb(e.firestore,Eb);return ob(Ib(t),e._key).then((n=>Bw(t,e,n)))}class Ow extends Cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wb(this.firestore,null,t)}}function Dw(e){e=pb(e,bb);const t=pb(e.firestore,Eb),n=Ib(t),r=new Ow(t);return dw(e._query),sb(n,e._query).then((n=>new Pw(t,r,e,n)))}function Mw(e,t,n){e=pb(e,wb);const r=pb(e.firestore,Eb),i=kw(e.converter,t,n);return Uw(r,[Vb(Bb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,gp.none())])}function Lw(e,t,n){e=pb(e,wb);const r=pb(e.firestore,Eb),i=Bb(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=vn(t))||t instanceof Nb?Xb(i,"updateDoc",e._key,t,n,a):Qb(i,"updateDoc",e._key,t),Uw(r,[o.toMutation(e._key,gp.exists(!0))])}function Fw(e){return Uw(pb(e.firestore,Eb),[new Tp(e._key,gp.none())])}function zw(e,t){const n=pb(e.firestore,Eb),r=Sb(e),i=kw(e.converter,t);return Uw(n,[Vb(Bb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,gp.exists(!1))]).then((()=>r))}function $w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=vn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||kb(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(kb(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof wb)d=pb(e.firestore,Eb),h=Ah(e._key.path),u={next:t=>{n[l]&&n[l](Bw(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=pb(e,bb);d=pb(t.firestore,Eb),h=t._query;const r=new Ow(d);u={next:e=>{n[l]&&n[l](new Pw(d,r,t,e))},error:n[l+1],complete:n[l+2]},dw(e._query)}return function(e,t,n,r){const i=new Ky(r),o=new hy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>oy(await ib(e),o))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>sy(await ib(e),o)))}}(Ib(d),h,c,u)}function Uw(e,t){return function(e,t){const n=new Sl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=By(e);try{const e=await function(e,t){const n=wl(e),r=Bl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Qh());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Uh(),l=Qh();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=_p(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Cp(e.key,t,Bd(t.value.mapValue),gp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Wh(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new Vu(Ol)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Fy(r,e.changes),await Fv(r.remoteStore)}catch(e){const t=Jv(e,"Failed to persist write");n.reject(t)}}(await nb(e),t,n))),n.promise}(Ib(e),t)}function Bw(e,t,n){const r=n.docs.get(t._key),i=new Ow(e);return new Tw(e,i,t._key,r,new Iw(n.hasPendingWrites,n.fromCache),t.converter)}const Vw={maxAttempts:5};class Ww{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bb(e)}set(e,t,n){this._verifyNotCommitted();const r=qw(e,this._firestore),i=kw(r.converter,t,n),o=Vb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,gp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=qw(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=vn(t))||t instanceof Nb?Xb(this._dataReader,"WriteBatch.update",r._key,t,n,s):Qb(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,gp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qw(e,this._firestore);return this._mutations=this._mutations.concat(new Tp(t._key,gp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _l(xl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qw(e,t){if((e=vn(e)).firestore!==t)throw new _l(xl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Hw{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bb(e)}get(e){const t=qw(e,this._firestore),n=new Ew(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return yl();const r=e[0];if(r.isFoundDocument())return new lw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new lw(this._firestore,n,t._key,null,t.converter);throw yl()}))}set(e,t,n){const r=qw(e,this._firestore),i=kw(r.converter,t,n),o=Vb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=qw(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=vn(t))||t instanceof Nb?Xb(this._dataReader,"Transaction.update",r._key,t,n,s):Qb(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=qw(e,this._firestore);return this._transaction.delete(t._key),this}}class Kw extends Hw{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qw(e,this._firestore),n=new Ow(this._firestore);return super.get(e).then((e=>new Tw(this._firestore,n,t._key,e._document,new Iw(!1,!1),t.converter)))}}function Gw(e,t,n){e=pb(e,Eb);const r=Object.assign(Object.assign({},Vw),n);return function(e){if(e.maxAttempts<1)throw new _l(xl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Sl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await rb(e);new Yy(e.asyncQueue,i,n,t,r).Iu()})),r.promise}(Ib(e),(n=>t(new Kw(e,n))),r)}function Yw(){return new Hb("serverTimestamp")}function Qw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kb("arrayUnion",t)}function Xw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gb("arrayRemove",t)}function Jw(e){return new Yb("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dl=e}(jr),Ir(new yn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Eb(new kl(e.getProvider("auth-internal")),new Rl(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _l(xl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Mr(ll,cl,e),Mr(ll,cl,"esm2017")}();const Zw="firebasestorage.googleapis.com",ex="storageBucket";class tx extends Qt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(sx(e),`Firebase Storage: ${t} (${sx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tx.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var nx,rx,ix,ox;function sx(e){return"storage/"+e}function ax(){return new tx(nx.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lx(){return new tx(nx.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cx(){return new tx(nx.CANCELED,"User canceled the upload/download.")}function ux(){return new tx(nx.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dx(e){return new tx(nx.INVALID_ARGUMENT,e)}function hx(){return new tx(nx.APP_DELETED,"The Firebase app was deleted.")}function px(e,t){return new tx(nx.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function fx(e){throw new tx(nx.INTERNAL_ERROR,"Internal error: "+e)}(rx=nx||(nx={})).UNKNOWN="unknown",rx.OBJECT_NOT_FOUND="object-not-found",rx.BUCKET_NOT_FOUND="bucket-not-found",rx.PROJECT_NOT_FOUND="project-not-found",rx.QUOTA_EXCEEDED="quota-exceeded",rx.UNAUTHENTICATED="unauthenticated",rx.UNAUTHORIZED="unauthorized",rx.UNAUTHORIZED_APP="unauthorized-app",rx.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",rx.INVALID_CHECKSUM="invalid-checksum",rx.CANCELED="canceled",rx.INVALID_EVENT_NAME="invalid-event-name",rx.INVALID_URL="invalid-url",rx.INVALID_DEFAULT_BUCKET="invalid-default-bucket",rx.NO_DEFAULT_BUCKET="no-default-bucket",rx.CANNOT_SLICE_BLOB="cannot-slice-blob",rx.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",rx.NO_DOWNLOAD_URL="no-download-url",rx.INVALID_ARGUMENT="invalid-argument",rx.INVALID_ARGUMENT_COUNT="invalid-argument-count",rx.APP_DELETED="app-deleted",rx.INVALID_ROOT_OPERATION="invalid-root-operation",rx.INVALID_FORMAT="invalid-format",rx.INTERNAL_ERROR="internal-error",rx.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class mx{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mx.makeFromUrl(e,t)}catch(xI){return new mx(e,"")}if(""===n.path)return n;throw r=e,new tx(nx.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===Zw?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new mx(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new tx(nx.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class gx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function vx(e){return"string"===typeof e||e instanceof String}function yx(e){return bx()&&e instanceof Blob}function bx(){return"undefined"!==typeof Blob}function wx(e,t,n,r){if(r<t)throw dx(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw dx(`Invalid value for '${e}'. Expected ${n} or less.`)}function xx(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function _x(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Sx(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(ox=ix||(ix={}))[ox.NO_ERROR=0]="NO_ERROR",ox[ox.NETWORK_ERROR=1]="NETWORK_ERROR",ox[ox.ABORT=2]="ABORT";class Ax{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Cx(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ix.NO_ERROR,i=n.getStatus();if(!t||Sx(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ix.ABORT;return void e(!1,new Cx(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Cx(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(xI){r(xI)}else if(null!==i){const e=ax();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?hx():cx())}else{r(lx())}};this.canceled_?t(0,new Cx(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){o&&clearTimeout(o)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Cx{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function kx(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ex(){const e=kx();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(bx())return new Blob(n);throw new tx(nx.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Ix(e){if("undefined"===typeof atob)throw t="base-64",new tx(nx.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const Tx="raw",Rx="base64",Px="base64url",Nx="data_url";class jx{constructor(e,t){this.data=e,this.contentType=t||null}}function Ox(e,t){switch(e){case Tx:return new jx(Dx(t));case Rx:case Px:return new jx(Mx(e,t));case Nx:return new jx(function(e){const t=new Lx(e);return t.base64?Mx(Rx,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(xI){throw px(Nx,"Malformed data URL.")}return Dx(t)}(t.rest)}(t),new Lx(t).contentType)}throw ax()}function Dx(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Mx(e,t){switch(e){case Rx:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw px(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Px:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw px(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ix(t)}catch(xI){if(xI.message.includes("polyfill"))throw xI;throw px(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Lx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw px(Nx,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Fx{constructor(e,t){let n=0,r="";yx(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(yx(this.data_)){const o=this.data_,s=(r=e,i=t,(n=o).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Fx(s)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Fx(n,!0)}var n,r,i}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(bx()){const e=t.map((e=>e instanceof Fx?e.data_:e));return new Fx(Ex.apply(null,e))}{const e=t.map((e=>vx(e)?Ox(Tx,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Fx(r,!0)}}uploadData(){return this.data_}}function zx(e){let t;try{t=JSON.parse(e)}catch(xI){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function $x(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ux(e,t){return t}class Bx{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ux}}let Vx=null;function Wx(){if(Vx)return Vx;const e=[];e.push(new Bx("bucket")),e.push(new Bx("generation")),e.push(new Bx("metageneration")),e.push(new Bx("name","fullPath",!0));const t=new Bx("name");t.xform=function(e,t){return function(e){return!vx(e)||e.length<2?e:$x(e)}(t)},e.push(t);const n=new Bx("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Bx("timeCreated")),e.push(new Bx("updated")),e.push(new Bx("md5Hash",null,!0)),e.push(new Bx("cacheControl",null,!0)),e.push(new Bx("contentDisposition",null,!0)),e.push(new Bx("contentEncoding",null,!0)),e.push(new Bx("contentLanguage",null,!0)),e.push(new Bx("contentType",null,!0)),e.push(new Bx("metadata","customMetadata",!0)),Vx=e,Vx}function qx(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new mx(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Hx(e,t,n){const r=zx(t);if(null===r)return null;return qx(e,r,n)}function Kx(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Gx{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yx(e){if(!e)throw ax()}function Qx(e,t){return function(n,r){const i=Hx(e,r,t);return Yx(null!==i),i}}function Xx(e,t){return function(n,r){const i=Hx(e,r,t);return Yx(null!==i),function(e,t,n,r){const i=zx(t);if(null===i)return null;if(!vx(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return xx("/b/"+s(i)+"/o/"+s(o),n,r)+_x({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Jx(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new tx(nx.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new tx(nx.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new tx(nx.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new tx(nx.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Zx(e){const t=Jx(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new tx(nx.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function e_(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function t_(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=e_(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Kx(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Fx.getBlob(c,r,u);if(null===d)throw ux();const h={name:l.fullPath},p=xx(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Gx(p,"POST",Qx(e,n),f);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Jx(t),m}class n_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ix.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=ix.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=ix.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw fx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(xI){return-1}}getResponse(){if(!this.sent_)throw fx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class r_ extends n_{initXhr(){this.xhr_.responseType="text"}}function i_(){return new r_}class o_{constructor(e,t){this._service=e,this._location=t instanceof mx?t:mx.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new o_(e,t)}get root(){const e=new mx(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $x(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new mx(this._location.bucket,e);return new o_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new tx(nx.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function s_(e,t,n){e._throwIfRoot("uploadBytes");const r=t_(e.storage,e._location,Wx(),new Fx(t,!0),n);return e.storage.makeRequestWithTokens(r,i_).then((t=>({metadata:t,ref:e})))}function a_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=xx(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Gx(r,"GET",Xx(e,n),i);return o.errorHandler=Zx(t),o}(e.storage,e._location,Wx());return e.storage.makeRequestWithTokens(t,i_).then((e=>{if(null===e)throw new tx(nx.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function l_(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=xx(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Gx(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Zx(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,i_)}function c_(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mx(e._location.bucket,n);return new o_(e.storage,r)}function u_(e,t){if(e instanceof p_){const n=e;if(null==n._bucket)throw new tx(nx.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ex+"' property when initializing the app?");const r=new o_(n,n._bucket);return null!=t?u_(r,t):r}return void 0!==t?c_(e,t):e}function d_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof p_)return new o_(e,t);throw dx("To use ref(service, url), the first argument must be a Storage instance.")}return u_(e,t)}function h_(e,t){const n=null===t||void 0===t?void 0:t[ex];return null==n?null:mx.makeFromBucketSpec(n,e)}class p_{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Zw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mx.makeFromBucketSpec(r,this._host):h_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=mx.makeFromBucketSpec(this._url,e):this._bucket=h_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new o_(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new gx(hx());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=_x(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Ax(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const f_="@firebase/storage",m_="0.13.7",g_="storage";function v_(e,t,n){return s_(e=vn(e),t,n)}function y_(e){return a_(e=vn(e))}function b_(e,t){return d_(e=vn(e),t)}function w_(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new p_(r,i,o,n,jr)}Ir(new yn(g_,w_,"PUBLIC").setMultipleInstances(!0)),Mr(f_,m_,""),Mr(f_,m_,"esm2017");const x_="@firebase/database",__="1.0.14";let S_="";function A_(e){S_=e}class C_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),en(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Zt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class k_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return nn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const E_=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new C_(t)}}catch(xI){}return new k_},I_=E_("localStorage"),T_=E_("sessionStorage"),R_=new Tn("@firebase/database"),P_=function(){let e=1;return function(){return e++}}(),N_=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,kt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new hn;n.update(t);const r=n.digest();return Tt.encodeByteArray(r)},j_=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=j_.apply(null,n):e+="object"===typeof n?en(n):n,e+=" "}return e};let O_=null,D_=!0;const M_=function(e,t){kt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(R_.logLevel=Sn.VERBOSE,O_=R_.log.bind(R_),t&&T_.set("logging_enabled",!0)):"function"===typeof e?O_=e:(O_=null,T_.remove("logging_enabled"))},L_=function(){if(!0===D_&&(D_=!1,null===O_&&!0===T_.get("logging_enabled")&&M_(!0)),O_){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=j_.apply(null,t);O_(r)}},F_=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];L_(e,...n)}},z_=function(){const e="FIREBASE INTERNAL ERROR: "+j_(...arguments);R_.error(e)},$_=function(){const e=`FIREBASE FATAL ERROR: ${j_(...arguments)}`;throw R_.error(e),new Error(e)},U_=function(){const e="FIREBASE WARNING: "+j_(...arguments);R_.warn(e)},B_=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},V_="[MIN_NAME]",W_="[MAX_NAME]",q_=function(e,t){if(e===t)return 0;if(e===V_||t===W_)return-1;if(t===V_||e===W_)return 1;{const n=Z_(e),r=Z_(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},H_=function(e,t){return e===t?0:e<t?-1:1},K_=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+en(t))},G_=function(e){if("object"!==typeof e||null===e)return en(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=en(t[r]),n+=":",n+=G_(e[t[r]]);return n+="}",n},Y_=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Q_(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const X_=function(e){kt(!B_(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const J_=new RegExp("^-?(0*)\\d{1,10}$"),Z_=function(e){if(J_.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},eS=function(e){try{e()}catch(xI){setTimeout((()=>{const t=xI.stack||"";throw U_("Exception was thrown by user callback.",t),xI}),Math.floor(0))}},tS=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class nS{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Rr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){U_(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class rS{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(L_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',U_(e)}}class iS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}iS.OWNER="owner";const oS="5",sS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aS="ac",lS="websocket",cS="long_polling";class uS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=I_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&I_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function dS(e,t,n){let r;if(kt("string"===typeof t,"typeof type must == string"),kt("object"===typeof n,"typeof params must == object"),t===lS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==cS)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Q_(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class hS{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;nn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ot(this.counters_)}}const pS={},fS={};function mS(e){const t=e.toString();return pS[t]||(pS[t]=new hS),pS[t]}class gS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&eS((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const vS="start";class yS{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F_(e),this.stats_=mS(t),this.urlFn=e=>(this.appCheckToken&&(e[aS]=this.appCheckToken),dS(t,cS,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Kt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new bS((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===vS)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[vS]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=oS,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[aS]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&sS.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yS.forceAllow_=!0}static forceDisallow(){yS.forceDisallow_=!0}static isAvailable(){return!Kt()&&(!!yS.forceAllow_||!yS.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Pt(t),r=Y_(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Kt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=en(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bS{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Kt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=P_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=bS.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(xI){L_("frame writing exception"),xI.stack&&L_(xI.stack),L_(xI)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||L_("No IE domain setting required")}catch(xI){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Kt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{L_("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(xI){}}),Math.floor(1))}}let wS=null;"undefined"!==typeof MozWebSocket?wS=MozWebSocket:"undefined"!==typeof WebSocket&&(wS=WebSocket);class xS{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F_(this.connId),this.stats_=mS(t),this.connURL=xS.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=oS,!Kt()&&"undefined"!==typeof location&&location.hostname&&sS.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[aS]=r),i&&(o.p=i),dS(e,lS,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,I_.set("previous_websocket_failure",!0);try{let e;if(Kt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${oS}/${S_}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye-bafda.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new wS(this.connURL,[],e)}catch(xI){this.log_("Error instantiating WebSocket.");const t=xI.message||xI.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){xS.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==wS&&!xS.forceDisallow_}static previouslyFailed(){return I_.isInMemoryStorage||!0===I_.get("previous_websocket_failure")}markConnectionHealthy(){I_.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Zt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(kt(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Y_(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(xI){this.log_("Exception thrown from WebSocket.send():",xI.message||xI.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xS.responsesRequiredToBeHealthy=2,xS.healthyTimeout=3e4;class _S{static get ALL_TRANSPORTS(){return[yS,xS]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=xS&&xS.isAvailable();let n=t&&!xS.previouslyFailed();if(e.webSocketOnly&&(t||U_("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[xS];else{const e=this.transports_=[];for(const t of _S.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);_S.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_S.globalTransportInitialized_=!1;class SS{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F_("c:"+this.id+":"),this.transportManager_=new _S(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=tS((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=K_("t",e),n=K_("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=K_("t",e),n=K_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=K_("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?z_("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):z_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oS!==n&&U_("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),tS((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tS((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(I_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class AS{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class CS{constructor(e){this.allowedEvents_=e,this.listeners_={},kt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){kt(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class kS extends CS{static getInstance(){return new kS}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||qt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return kt("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ES{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function IS(){return new ES("")}function TS(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function RS(e){return e.pieces_.length-e.pieceNum_}function PS(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ES(e.pieces_,t)}function NS(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function OS(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ES(t,0)}function DS(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ES)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ES(n,0)}function MS(e){return e.pieceNum_>=e.pieces_.length}function LS(e,t){const n=TS(e),r=TS(t);if(null===n)return t;if(n===r)return LS(PS(e),PS(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function FS(e,t){if(RS(e)!==RS(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function zS(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(RS(e)>RS(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class $S{constructor(e,t){this.errorPrefix_=t,this.parts_=jS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=gn(this.parts_[n]);US(this)}}function US(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+BS(e))}function BS(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class VS extends CS{static getInstance(){return new VS}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return kt("visible"===e,"Unknown event type: "+e),[this.visible_]}}const WS=1e3;class qS extends AS{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=qS.nextPersistentConnectionId_++,this.log_=F_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=WS,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Kt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VS.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&kS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(en(i)),kt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Bt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),kt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),kt(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;qS.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&nn(e,"w")){const n=rn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();U_(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=tn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=tn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),kt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+en(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):z_("Unrecognized action received from server: "+en(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){kt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=WS,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=WS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=WS),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+qS.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,r())},c=function(e){kt(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?L_("getToken() completed but was canceled"):(L_("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,a=new SS(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(e=>{U_(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&U_(e),l())}}}interrupt(e){L_("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){L_("Resuming connection for reason: "+e),delete this.interruptReasons_[e],on(this.interruptReasons_)&&(this.reconnectDelay_=WS,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>G_(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ES(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){L_("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){L_("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Kt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+S_.replace(/\./g,"-")]=1,qt()?e["framework.cordova"]=1:Ht()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kS.getInstance().currentlyOnline();return on(this.interruptReasons_)&&e}}qS.nextPersistentConnectionId_=0,qS.nextConnectionId_=0;class HS{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new HS(e,t)}}class KS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new HS(V_,e),r=new HS(V_,t);return 0!==this.compare(n,r)}minPost(){return HS.MIN}}let GS;class YS extends KS{static get __EMPTY_NODE(){return GS}static set __EMPTY_NODE(e){GS=e}compare(e,t){return q_(e.name,t.name)}isDefinedOn(e){throw Et("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return HS.MIN}maxPost(){return new HS(W_,GS)}makePost(e,t){return kt("string"===typeof e,"KeyIndex indexValue must always be a string."),new HS(e,GS)}toString(){return".key"}}const QS=new YS;class XS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class JS{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:JS.RED,this.left=null!=r?r:ZS.EMPTY_NODE,this.right=null!=i?i:ZS.EMPTY_NODE}copy(e,t,n,r,i){return new JS(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ZS.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ZS.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,JS.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,JS.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}JS.RED=!0,JS.BLACK=!1;class ZS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZS.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new ZS(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,JS.BLACK,null,null))}remove(e){return new ZS(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,JS.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new XS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new XS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new XS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new XS(this.root_,null,this.comparator_,!0,e)}}function eA(e,t){return q_(e.name,t.name)}function tA(e,t){return q_(e,t)}let nA;ZS.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new JS(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rA=function(e){return"number"===typeof e?"number:"+X_(e):"string:"+e},iA=function(e){if(e.isLeafNode()){const t=e.val();kt("string"===typeof t||"number"===typeof t||"object"===typeof t&&nn(t,".sv"),"Priority must be a string or number.")}else kt(e===nA||e.isEmpty(),"priority of unexpected type.");kt(e===nA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oA,sA,aA;class lA{static set __childrenNodeConstructor(e){oA=e}static get __childrenNodeConstructor(){return oA}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lA.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,kt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),iA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new lA(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:lA.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return MS(e)?this:".priority"===TS(e)?this.priorityNode_:lA.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:lA.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=TS(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(kt(".priority"!==n||1===RS(e),".priority must be the last token in a path"),this.updateImmediateChild(n,lA.__childrenNodeConstructor.EMPTY_NODE.updateChild(PS(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+rA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?X_(this.value_):this.value_,this.lazyHash_=N_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===lA.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof lA.__childrenNodeConstructor?-1:(kt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=lA.VALUE_TYPE_ORDER.indexOf(t),i=lA.VALUE_TYPE_ORDER.indexOf(n);return kt(r>=0,"Unknown leaf type: "+t),kt(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}lA.VALUE_TYPE_ORDER=["object","boolean","number","string"];const cA=new class extends KS{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?q_(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return HS.MIN}maxPost(){return new HS(W_,new lA("[PRIORITY-POST]",aA))}makePost(e,t){const n=sA(e);return new HS(t,new lA("[PRIORITY-POST]",n))}toString(){return".priority"}},uA=Math.log(2);class dA{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/uA,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hA=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new JS(a,s.node,JS.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new JS(a,s.node,JS.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],d=n?n(u):u;l(new JS(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,JS.BLACK):(a(r,JS.BLACK),a(r,JS.RED))}return o}(new dA(e.length));return new ZS(r||t,o)};let pA;const fA={};class mA{static get Default(){return kt(fA&&cA,"ChildrenNode.ts has not been loaded"),pA=pA||new mA({".priority":fA},{".priority":cA}),pA}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=rn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ZS?t:null}hasIndex(e){return nn(this.indexSet_,e.toString())}addIndex(e,t){kt(e!==QS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(HS.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?hA(n,e.getCompare()):fA;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new mA(c,l)}addToIndexes(e,t){const n=sn(this.indexes_,((n,r)=>{const i=rn(this.indexSet_,r);if(kt(i,"Missing index implementation for "+r),n===fA){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(HS.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),hA(n,i.getCompare())}return fA}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new HS(e.name,r))),i.insert(e,e.node)}}));return new mA(n,this.indexSet_)}removeFromIndexes(e,t){const n=sn(this.indexes_,(n=>{if(n===fA)return n;{const r=t.get(e.name);return r?n.remove(new HS(e.name,r)):n}}));return new mA(n,this.indexSet_)}}let gA;class vA{static get EMPTY_NODE(){return gA||(gA=new vA(new ZS(tA),null,mA.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&iA(this.priorityNode_),this.children_.isEmpty()&&kt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gA}updatePriority(e){return this.children_.isEmpty()?this:new vA(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?gA:t}}getChild(e){const t=TS(e);return null===t?this:this.getImmediateChild(t).getChild(PS(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(kt(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new HS(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?gA:this.priorityNode_;return new vA(r,o,i)}}updateChild(e,t){const n=TS(e);if(null===n)return t;{kt(".priority"!==TS(e)||1===RS(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(PS(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(cA,((o,s)=>{t[o]=s.val(e),n++,i&&vA.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+rA(this.getPriority().val())+":"),this.forEachChild(cA,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":N_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new HS(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new HS(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new HS(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,HS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,HS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yA?-1:0}withIndex(e){if(e===QS||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new vA(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===QS||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(cA),n=t.getIterator(cA);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===QS?null:this.indexMap_.get(e.toString())}}vA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const yA=new class extends vA{constructor(){super(new ZS(tA),vA.EMPTY_NODE,mA.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vA.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(HS,{MIN:{value:new HS(V_,vA.EMPTY_NODE)},MAX:{value:new HS(W_,yA)}}),YS.__EMPTY_NODE=vA.EMPTY_NODE,lA.__childrenNodeConstructor=vA,nA=yA,function(e){aA=e}(yA);function bA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return vA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),kt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new lA(e,bA(t))}if(e instanceof Array){let n=vA.EMPTY_NODE;return Q_(e,((t,r)=>{if(nn(e,t)&&"."!==t.substring(0,1)){const e=bA(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(bA(t))}{const n=[];let r=!1;if(Q_(e,((e,t)=>{if("."!==e.substring(0,1)){const i=bA(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new HS(e,i)))}})),0===n.length)return vA.EMPTY_NODE;const i=hA(n,eA,(e=>e.name),tA);if(r){const e=hA(n,cA.getCompare());return new vA(i,bA(t),new mA({".priority":e},{".priority":cA}))}return new vA(i,bA(t),mA.Default)}}!function(e){sA=e}(bA);class wA extends KS{constructor(e){super(),this.indexPath_=e,kt(!MS(e)&&".priority"!==TS(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?q_(e.name,t.name):i}makePost(e,t){const n=bA(e),r=vA.EMPTY_NODE.updateChild(this.indexPath_,n);return new HS(t,r)}maxPost(){const e=vA.EMPTY_NODE.updateChild(this.indexPath_,yA);return new HS(W_,e)}toString(){return jS(this.indexPath_,0).join("/")}}const xA=new class extends KS{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?q_(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return HS.MIN}maxPost(){return HS.MAX}makePost(e,t){const n=bA(e);return new HS(t,n)}toString(){return".value"}};function _A(e){return{type:"value",snapshotNode:e}}function SA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function AA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function CA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class kA{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){kt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(AA(t,s)):kt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(SA(t,n)):o.trackChildChange(CA(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(cA,((e,r)=>{t.hasChild(e)||n.trackChildChange(AA(e,r))})),t.isLeafNode()||t.forEachChild(cA,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(CA(t,r,i))}else n.trackChildChange(SA(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?vA.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class EA{constructor(e){this.indexedFilter_=new kA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=EA.getStartPost_(e),this.endPost_=EA.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new HS(t,n))||(n=vA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=vA.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(vA.EMPTY_NODE);const i=this;return t.forEachChild(cA,((e,t)=>{i.matches(new HS(e,t))||(r=r.updateImmediateChild(e,vA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class IA{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new EA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new HS(t,n))||(n=vA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=vA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=vA.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(vA.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,vA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;kt(s.numChildren()===this.limit_,"");const a=new HS(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:o(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(CA(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(AA(t,e));const n=s.updateImmediateChild(t,vA.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(SA(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(AA(l.name,l.node)),i.trackChildChange(SA(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,vA.EMPTY_NODE)):e}}class TA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cA}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return kt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return kt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:V_}hasEnd(){return this.endSet_}getIndexEndValue(){return kt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return kt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:W_}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return kt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cA}copy(){const e=new TA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function RA(e){const t={};if(e.isDefault())return t;let n;if(e.index_===cA?n="$priority":e.index_===xA?n="$value":e.index_===QS?n="$key":(kt(e.index_ instanceof wA,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=en(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=en(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+en(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=en(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+en(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function PA(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cA&&(t.i=e.index_.toString()),t}class NA extends AS{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(kt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=F_("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=NA.getListenId_(e,n),s={};this.listens_[o]=s;const a=RA(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),rn(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=NA.getListenId_(e,t);delete this.listens_[n]}get(e){const t=RA(e._queryParams),n=e._path.toString(),r=new Bt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cn(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Zt(a.responseText)}catch(xI){U_("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&U_("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class jA{constructor(){this.rootNode_=vA.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function OA(){return{value:null,children:new Map}}function DA(e,t,n){if(MS(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=TS(t);e.children.has(r)||e.children.set(r,OA());DA(e.children.get(r),t=PS(t),n)}}function MA(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{MA(r,new ES(t.toString()+"/"+e),n)}))}class LA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Q_(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class FA{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new LA(e);const n=1e4+2e4*Math.random();tS(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Q_(e,((e,r)=>{r>0&&nn(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),tS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zA,$A;function UA(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}($A=zA||(zA={}))[$A.OVERWRITE=0]="OVERWRITE",$A[$A.MERGE=1]="MERGE",$A[$A.ACK_USER_WRITE=2]="ACK_USER_WRITE",$A[$A.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class BA{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=zA.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(MS(this.path)){if(null!=this.affectedTree.value)return kt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ES(e));return new BA(IS(),t,this.revert)}}return kt(TS(this.path)===e,"operationForChild called for unrelated child."),new BA(PS(this.path),this.affectedTree,this.revert)}}class VA{constructor(e,t){this.source=e,this.path=t,this.type=zA.LISTEN_COMPLETE}operationForChild(e){return MS(this.path)?new VA(this.source,IS()):new VA(this.source,PS(this.path))}}class WA{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=zA.OVERWRITE}operationForChild(e){return MS(this.path)?new WA(this.source,IS(),this.snap.getImmediateChild(e)):new WA(this.source,PS(this.path),this.snap)}}class qA{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=zA.MERGE}operationForChild(e){if(MS(this.path)){const t=this.children.subtree(new ES(e));return t.isEmpty()?null:t.value?new WA(this.source,IS(),t.value):new qA(this.source,IS(),t)}return kt(TS(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qA(this.source,PS(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class HA{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(MS(e))return this.isFullyInitialized()&&!this.filtered_;const t=TS(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class KA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function GA(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Et("Should only compare child_ events.");const r=new HS(t.childName,t.snapshotNode),i=new HS(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function YA(e,t){return{eventCache:e,serverCache:t}}function QA(e,t,n,r){return YA(new HA(t,n,r),e.serverCache)}function XA(e,t,n,r){return YA(e.eventCache,new HA(t,n,r))}function JA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ZA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let eC;class tC{static fromObject(e){let t=new tC(null);return Q_(e,((e,n)=>{t=t.set(new ES(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(eC||(eC=new ZS(H_)),eC);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:IS(),value:this.value};if(MS(e))return null;{const n=TS(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(PS(e),t);if(null!=i){return{path:DS(new ES(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(MS(e))return this;{const t=TS(e),n=this.children.get(t);return null!==n?n.subtree(PS(e)):new tC(null)}}set(e,t){if(MS(e))return new tC(t,this.children);{const n=TS(e),r=(this.children.get(n)||new tC(null)).set(PS(e),t),i=this.children.insert(n,r);return new tC(this.value,i)}}remove(e){if(MS(e))return this.children.isEmpty()?new tC(null):new tC(null,this.children);{const t=TS(e),n=this.children.get(t);if(n){const r=n.remove(PS(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new tC(null):new tC(this.value,i)}return this}}get(e){if(MS(e))return this.value;{const t=TS(e),n=this.children.get(t);return n?n.get(PS(e)):null}}setTree(e,t){if(MS(e))return t;{const n=TS(e),r=(this.children.get(n)||new tC(null)).setTree(PS(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new tC(this.value,i)}}fold(e){return this.fold_(IS(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(DS(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,IS(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(MS(e))return null;{const r=TS(e),i=this.children.get(r);return i?i.findOnPath_(PS(e),DS(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,IS(),t)}foreachOnPath_(e,t,n){if(MS(e))return this;{this.value&&n(t,this.value);const r=TS(e),i=this.children.get(r);return i?i.foreachOnPath_(PS(e),DS(t,r),n):new tC(null)}}foreach(e){this.foreach_(IS(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(DS(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class nC{constructor(e){this.writeTree_=e}static empty(){return new nC(new tC(null))}}function rC(e,t,n){if(MS(t))return new nC(new tC(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=LS(i,t);return o=o.updateChild(s,n),new nC(e.writeTree_.set(i,o))}{const r=new tC(n),i=e.writeTree_.setTree(t,r);return new nC(i)}}}function iC(e,t,n){let r=e;return Q_(n,((e,n)=>{r=rC(r,DS(t,e),n)})),r}function oC(e,t){if(MS(t))return nC.empty();{const n=e.writeTree_.setTree(t,new tC(null));return new nC(n)}}function sC(e,t){return null!=aC(e,t)}function aC(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(LS(n.path,t)):null}function lC(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cA,((e,n)=>{t.push(new HS(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new HS(e,n.value))})),t}function cC(e,t){if(MS(t))return e;{const n=aC(e,t);return new nC(null!=n?new tC(n):e.writeTree_.subtree(t))}}function uC(e){return e.writeTree_.isEmpty()}function dC(e,t){return hC(IS(),e.writeTree_,t)}function hC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(kt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hC(DS(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(DS(e,".priority"),r)),n}}function pC(e,t){return kC(t,e)}function fC(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));kt(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&mC(t,r.path)?i=!1:zS(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=vC(e.allWrites,gC,IS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=oC(e.visibleWrites,r.path);else{Q_(r.children,(t=>{e.visibleWrites=oC(e.visibleWrites,DS(r.path,t))}))}return!0}return!1}function mC(e,t){if(e.snap)return zS(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&zS(DS(e.path,n),t))return!0;return!1}function gC(e){return e.visible}function vC(e,t,n){let r=nC.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)zS(n,e)?(t=LS(n,e),r=rC(r,t,o.snap)):zS(e,n)&&(t=LS(e,n),r=rC(r,IS(),o.snap.getChild(t)));else{if(!o.children)throw Et("WriteRecord should have .snap or .children");if(zS(n,e))t=LS(n,e),r=iC(r,t,o.children);else if(zS(e,n))if(t=LS(e,n),MS(t))r=iC(r,IS(),o.children);else{const e=rn(o.children,TS(t));if(e){const n=e.getChild(PS(t));r=rC(r,IS(),n)}}}}}return r}function yC(e,t,n,r,i){if(r||i){const o=cC(e.visibleWrites,t);if(!i&&uC(o))return n;if(i||null!=n||sC(o,IS())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(zS(e.path,t)||zS(t,e.path))};return dC(vC(e.allWrites,o,t),n||vA.EMPTY_NODE)}return null}{const r=aC(e.visibleWrites,t);if(null!=r)return r;{const r=cC(e.visibleWrites,t);if(uC(r))return n;if(null!=n||sC(r,IS())){return dC(r,n||vA.EMPTY_NODE)}return null}}}function bC(e,t,n,r){return yC(e.writeTree,e.treePath,t,n,r)}function wC(e,t){return function(e,t,n){let r=vA.EMPTY_NODE;const i=aC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(cA,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=cC(e.visibleWrites,t);return n.forEachChild(cA,((e,t)=>{const n=dC(cC(i,new ES(e)),t);r=r.updateImmediateChild(e,n)})),lC(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return lC(cC(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function xC(e,t,n,r){return function(e,t,n,r,i){kt(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=DS(t,n);if(sC(e.visibleWrites,o))return null;{const t=cC(e.visibleWrites,o);return uC(t)?i.getChild(n):dC(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function _C(e,t){return function(e,t){return aC(e.visibleWrites,t)}(e.writeTree,DS(e.treePath,t))}function SC(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=cC(e.visibleWrites,t),c=aC(l,IS());if(null!=c)a=c;else{if(null==n)return[];a=dC(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function AC(e,t,n){return function(e,t,n,r){const i=DS(t,n),o=aC(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return dC(cC(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function CC(e,t){return kC(DS(e.treePath,t),e.writeTree)}function kC(e,t){return{treePath:e,writeTree:t}}class EC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;kt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),kt(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,CA(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,AA(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,SA(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Et("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,CA(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const IC=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class TC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new HA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AC(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ZA(this.viewCache_),i=SC(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function RC(e,t,n,r,i){const o=new EC;let s,a;if(n.type===zA.OVERWRITE){const l=n;l.source.fromUser?s=jC(e,t,l.path,l.snap,r,i,o):(kt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!MS(l.path),s=NC(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===zA.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=DS(n,r);OC(t,TS(c))&&(a=jC(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=DS(n,r);OC(t,TS(c))||(a=jC(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(kt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=MC(e,t,l.path,l.children,r,i,a,o))}else if(n.type===zA.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=_C(r,n))return t;{const a=new TC(r,t,i),l=t.eventCache.getNode();let c;if(MS(n)||".priority"===TS(n)){let n;if(t.serverCache.isFullyInitialized())n=bC(r,ZA(t));else{const e=t.serverCache.getNode();kt(e instanceof vA,"serverChildren would be complete if leaf node"),n=wC(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=TS(n);let u=AC(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,PS(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,vA.EMPTY_NODE,PS(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=bC(r,ZA(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=_C(r,IS()),QA(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=_C(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(MS(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return NC(e,t,n,l.getNode().getChild(n),i,o,a,s);if(MS(n)){let r=new tC(null);return l.getNode().forEachChild(QS,((e,t)=>{r=r.set(new ES(e),t)})),MC(e,t,n,r,i,o,a,s)}return t}{let c=new tC(null);return r.foreach(((e,t)=>{const r=DS(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),MC(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==zA.LISTEN_COMPLETE)throw Et("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=XA(t,o.getNode(),o.isFullyInitialized()||MS(n),o.isFiltered());return PC(e,s,n,r,IC,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=JA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_A(JA(t)))}}(t,s,l),{viewCache:s,changes:l}}function PC(e,t,n,r,i,o){const s=t.eventCache;if(null!=_C(r,n))return t;{let a,l;if(MS(n))if(kt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ZA(t),i=wC(r,n instanceof vA?n:vA.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=bC(r,ZA(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=TS(n);if(".priority"===c){kt(1===RS(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=xC(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=PS(n);let d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=xC(r,n,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else d=AC(r,c,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),c,d,u,i,o):s.getNode()}}return QA(t,a,s.isFullyInitialized()||MS(n),e.filter.filtersNodes())}}function NC(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(MS(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=TS(n);if(!l.isCompleteForPath(n)&&RS(n)>1)return t;const i=PS(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,IC,null)}const d=XA(t,c,l.isFullyInitialized()||MS(n),u.filtersNodes());return PC(e,d,n,i,new TC(i,d,o),a)}function jC(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new TC(i,t,o);if(MS(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=QA(t,c,!0,e.filter.filtersNodes());else{const i=TS(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=QA(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=PS(n),c=a.getNode().getImmediateChild(i);let d;if(MS(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===NS(o)&&e.getChild(OS(o)).isEmpty()?e:e.updateChild(o,r):vA.EMPTY_NODE}if(c.equals(d))l=t;else{l=QA(t,e.filter.updateChild(a.getNode(),i,d,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function OC(e,t){return e.eventCache.isCompleteForChild(t)}function DC(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function MC(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=MS(n)?r:new tC(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=DC(0,t.serverCache.getNode().getImmediateChild(n),r);c=NC(e,c,new ES(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=DC(0,t.serverCache.getNode().getImmediateChild(n),r);c=NC(e,c,new ES(n),l,i,o,s,a)}})),c}class LC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new kA(n.getIndex()),i=(o=n).loadsAllData()?new kA(o.getIndex()):o.hasLimit()?new IA(o):new EA(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(vA.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(vA.EMPTY_NODE,a.getNode(),null),u=new HA(l,s.isFullyInitialized(),r.filtersNodes()),d=new HA(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=YA(d,u),this.eventGenerator_=new KA(this.query_)}get query(){return this.query_}}function FC(e,t){const n=ZA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!MS(t)&&!n.getImmediateChild(TS(t)).isEmpty())?n.getChild(t):null}function zC(e){return 0===e.eventRegistrations_.length}function $C(e,t,n){const r=[];if(n){kt(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function UC(e,t,n,r){t.type===zA.MERGE&&null!==t.source.queryId&&(kt(ZA(e.viewCache_),"We should always have a full cache before handling merges"),kt(JA(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=RC(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,kt(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),kt(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),kt(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,BC(e,o.changes,o.viewCache.eventCache.getNode(),null)}function BC(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),GA(e,i,"child_removed",t,r,n),GA(e,i,"child_added",t,r,n),GA(e,i,"child_moved",o,r,n),GA(e,i,"child_changed",t,r,n),GA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let VC,WC;class qC{constructor(){this.views=new Map}}function HC(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return kt(null!=o,"SyncTree gave us an op for an invalid query."),UC(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(UC(o,t,n,r));return i}}function KC(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=bC(n,i?r:null),o=!1;e?o=!0:r instanceof vA?(e=wC(n,r),o=!1):(e=vA.EMPTY_NODE,o=!1);const s=YA(new HA(e,o,!1),new HA(r,i,!1));return new LC(t,s)}return s}function GC(e,t,n,r,i,o){const s=KC(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(cA,((e,t)=>{r.push(SA(e,t))}));return n.isFullyInitialized()&&r.push(_A(n.getNode())),BC(e,r,n.getNode(),t)}(s,n)}function YC(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=ek(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat($C(c,n,r)),zC(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat($C(t,n,r)),zC(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!ek(e)&&o.push(new(kt(VC,"Reference.ts has not been loaded"),VC)(t._repo,t._path)),{removed:o,events:s}}function QC(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function XC(e,t){let n=null;for(const r of e.views.values())n=n||FC(r,t);return n}function JC(e,t){if(t._queryParams.loadsAllData())return tk(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ZC(e,t){return null!=JC(e,t)}function ek(e){return null!=tk(e)}function tk(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let nk=1;class rk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tC(null),this.pendingWriteTree_={visibleWrites:nC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ik(e,t,n,r,i){return function(e,t,n,r,i){kt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=rC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?dk(e,new WA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ok(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(fC(e.pendingWriteTree_,t)){let t=new tC(null);return null!=r.snap?t=t.set(IS(),!0):Q_(r.children,(e=>{t=t.set(new ES(e),!0)})),dk(e,new BA(r.path,t,n))}return[]}function sk(e,t,n){return dk(e,new WA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function ak(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||ZC(s,t))){const l=YC(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>ek(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ek(t)){return[tk(t)]}{let e=[];return t&&(e=QC(t)),Q_(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=fk(e,r);e.listenProvider_.startListening(wk(i),mk(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(wk(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(gk(t));e.listenProvider_.stopListening(wk(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=gk(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function lk(e,t,n,r){const i=vk(e,r);if(null!=i){const r=yk(i),o=r.path,s=r.queryId,a=LS(o,t);return bk(e,o,new WA(UA(s),a,n))}return[]}function ck(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=LS(e,i);o=o||XC(t,n),s=s||ek(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||ek(l),o=o||XC(l,IS())):(l=new qC,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=vA.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=XC(t,IS());n&&(o=o.updateImmediateChild(e,n))}))}const c=ZC(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=gk(t);kt(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=nk++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=GC(l,t,n,pC(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=JC(l,t);u=u.concat(function(e,t,n){const r=t._path,i=mk(e,t),o=fk(e,n),s=e.listenProvider_.startListening(wk(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)kt(!ek(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!MS(e)&&t&&ek(t))return[tk(t).query];{let e=[];return t&&(e=e.concat(QC(t).map((e=>e.query)))),Q_(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(wk(r),mk(e,r))}}return s}(e,t,n))}return u}function uk(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=XC(n,LS(e,t));if(r)return r}));return yC(r,t,i,n,!0)}function dk(e,t){return hk(t,e.syncPointTree_,null,pC(e.pendingWriteTree_,IS()))}function hk(e,t,n,r){if(MS(e.path))return pk(e,t,n,r);{const i=t.get(IS());null==n&&null!=i&&(n=XC(i,IS()));let o=[];const s=TS(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=CC(r,s);o=o.concat(hk(a,l,e,t))}return i&&(o=o.concat(HC(i,e,r,n))),o}}function pk(e,t,n,r){const i=t.get(IS());null==n&&null!=i&&(n=XC(i,IS()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=CC(r,t),l=e.operationForChild(t);l&&(o=o.concat(pk(l,i,s,a)))})),i&&(o=o.concat(HC(i,e,r,n))),o}function fk(e,t){const n=t.query,r=mk(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||vA.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=vk(e,n);if(r){const n=yk(r),i=n.path,o=n.queryId,s=LS(i,t);return bk(e,i,new VA(UA(o),s))}return[]}(e,n._path,r):function(e,t){return dk(e,new VA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return ak(e,n,null,r)}}}}function mk(e,t){const n=gk(t);return e.queryToTagMap.get(n)}function gk(e){return e._path.toString()+"$"+e._queryIdentifier}function vk(e,t){return e.tagToQueryMap.get(t)}function yk(e){const t=e.indexOf("$");return kt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ES(e.substr(0,t))}}function bk(e,t,n){const r=e.syncPointTree_.get(t);kt(r,"Missing sync point for query tag that we're tracking");return HC(r,n,pC(e.pendingWriteTree_,t),null)}function wk(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(kt(WC,"Reference.ts has not been loaded"),WC)(e._repo,e._path):e}class xk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new xk(t)}node(){return this.node_}}class _k{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=DS(this.path_,e);return new _k(this.syncTree_,t)}node(){return uk(this.syncTree_,this.path_)}}const Sk=function(e,t,n){return e&&"object"===typeof e?(kt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ak(e[".sv"],t,n):"object"===typeof e[".sv"]?Ck(e[".sv"],t):void kt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ak=function(e,t,n){if("timestamp"===e)return n.timestamp;kt(!1,"Unexpected server value: "+e)},Ck=function(e,t,n){e.hasOwnProperty("increment")||kt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&kt(!1,"Unexpected increment value: "+r);const i=t.node();if(kt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},kk=function(e,t,n,r){return Ik(t,new _k(n,e),r)},Ek=function(e,t,n){return Ik(e,new xk(t),n)};function Ik(e,t,n){const r=e.getPriority().val(),i=Sk(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=Sk(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new lA(o,bA(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new lA(i))),r.forEachChild(cA,((e,r)=>{const i=Ik(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class Tk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Rk(e,t){let n=t instanceof ES?t:new ES(t),r=e,i=TS(n);for(;null!==i;){const e=rn(r.node.children,i)||{children:{},childCount:0};r=new Tk(i,r,e),n=PS(n),i=TS(n)}return r}function Pk(e){return e.node.value}function Nk(e,t){e.node.value=t,Lk(e)}function jk(e){return e.node.childCount>0}function Ok(e,t){Q_(e.node.children,((n,r)=>{t(new Tk(n,e,r))}))}function Dk(e,t,n,r){n&&!r&&t(e),Ok(e,(e=>{Dk(e,t,!0,r)})),n&&r&&t(e)}function Mk(e){return new ES(null===e.parent?e.name:Mk(e.parent)+"/"+e.name)}function Lk(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Pk(e)&&!jk(e)}(n),i=nn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Lk(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Lk(e))}(e.parent,e.name,e)}const Fk=/[\[\].#$\/\u0000-\u001F\u007F]/,zk=/[\[\].#$\u0000-\u001F\u007F]/,$k=10485760,Uk=function(e){return"string"===typeof e&&0!==e.length&&!Fk.test(e)},Bk=function(e){return"string"===typeof e&&0!==e.length&&!zk.test(e)},Vk=function(e,t,n,r){r&&void 0===t||Wk(mn(e,"value"),t,n)},Wk=function(e,t,n){const r=n instanceof ES?new $S(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+BS(r));if("function"===typeof t)throw new Error(e+"contains a function "+BS(r)+" with contents = "+t.toString());if(B_(t))throw new Error(e+"contains "+t.toString()+" "+BS(r));if("string"===typeof t&&t.length>3495253.3333333335&&gn(t)>$k)throw new Error(e+"contains a string greater than "+$k+" utf8 bytes "+BS(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Q_(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Uk(t)))throw new Error(e+" contains an invalid key ("+t+") "+BS(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=t,(s=r).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=gn(a),US(s),Wk(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=gn(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+BS(r)+" in addition to actual children.")}},qk=function(e,t,n,r){if((!r||void 0!==n)&&!Bk(n))throw new Error(mn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hk=function(e,t){if(".info"===TS(t))throw new Error(e+" failed = Can't modify data under /.info/")},Kk=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Uk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Bk(e)}(n))throw new Error(mn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yk(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||FS(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Qk(e,t,n){Yk(e,n),Jk(e,(e=>FS(e,t)))}function Xk(e,t,n){Yk(e,n),Jk(e,(e=>zS(e,t)||zS(t,e)))}function Jk(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Zk(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Zk(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();O_&&L_("event: "+n.toString()),eS(r)}}}const eE="repo_interrupt";class tE{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=OA(),this.transactionQueueTree_=new Tk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nE(e,t,n){if(e.stats_=mS(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new NA(e.repoInfo_,((t,n,r,i)=>{oE(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>sE(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{en(n)}catch(xI){throw new Error("Invalid authOverride provided: "+xI)}}e.persistentConnection_=new qS(e.repoInfo_,t,((t,n,r,i)=>{oE(e,t,n,r,i)}),(t=>{sE(e,t)}),(t=>{!function(e,t){Q_(t,((t,n)=>{aE(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return fS[n]||(fS[n]=t()),fS[n]}(e.repoInfo_,(()=>new FA(e.stats_,e.server_))),e.infoData_=new jA,e.infoSyncTree_=new rk({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=sk(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),aE(e,"connected",!1),e.serverSyncTree_=new rk({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);Xk(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function rE(e){const t=e.infoData_.getNode(new ES(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function iE(e){return(t=(t={timestamp:rE(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function oE(e,t,n,r,i){e.dataUpdateCount++;const o=new ES(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=sn(n,(e=>bA(e)));s=function(e,t,n,r){const i=vk(e,r);if(i){const r=yk(i),o=r.path,s=r.queryId,a=LS(o,t),l=tC.fromObject(n);return bk(e,o,new qA(UA(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=bA(n);s=lk(e.serverSyncTree_,o,t,i)}else if(r){const t=sn(n,(e=>bA(e)));s=function(e,t,n){const r=tC.fromObject(n);return dk(e,new qA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=bA(n);s=sk(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=gE(e,o)),Xk(e.eventQueue_,a,s)}function sE(e,t){aE(e,"connected",t),!1===t&&function(e){hE(e,"onDisconnectEvents");const t=iE(e),n=OA();MA(e.onDisconnect_,IS(),((r,i)=>{const o=kk(r,i,e.serverSyncTree_,t);DA(n,r,o)}));let r=[];MA(n,IS(),((t,n)=>{r=r.concat(sk(e.serverSyncTree_,t,n));const i=xE(e,t);gE(e,i)})),e.onDisconnect_=OA(),Xk(e.eventQueue_,IS(),r)}(e)}function aE(e,t,n){const r=new ES("/.info/"+t),i=bA(n);e.infoData_.updateSnapshot(r,i);const o=sk(e.infoSyncTree_,r,i);Xk(e.eventQueue_,r,o)}function lE(e){return e.nextWriteId_++}function cE(e,t,n,r,i){hE(e,"set",{path:t.toString(),value:n,priority:r});const o=iE(e),s=bA(n,r),a=uk(e.serverSyncTree_,t),l=Ek(s,a,o),c=lE(e),u=ik(e.serverSyncTree_,t,l,c,!0);Yk(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||U_("set at "+t+" failed: "+n);const s=ok(e.serverSyncTree_,c,!o);Xk(e.eventQueue_,t,s),pE(e,i,n,r)}));const d=xE(e,t);gE(e,d),Xk(e.eventQueue_,d,[])}function uE(e,t,n){let r;r=".info"===TS(t._path)?ak(e.infoSyncTree_,t,n):ak(e.serverSyncTree_,t,n),Qk(e.eventQueue_,t._path,r)}function dE(e){e.persistentConnection_&&e.persistentConnection_.interrupt(eE)}function hE(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];L_(t,...r)}function pE(e,t,n,r){t&&eS((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function fE(e,t,n){return uk(e.serverSyncTree_,t,n)||vA.EMPTY_NODE}function mE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||wE(e,t),Pk(t)){const n=yE(e,t);kt(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=fE(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];kt(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=LS(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{hE(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(ok(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();wE(e,Rk(e.transactionQueueTree_,t)),mE(e,e.transactionQueueTree_),Xk(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)eS(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{U_("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}gE(e,t)}}),s)}(e,Mk(t),n)}else jk(t)&&Ok(t,(t=>{mE(e,t)}))}function gE(e,t){const n=vE(e,t),r=Mk(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=LS(n,o.path);let u,d=!1;if(kt(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(ok(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(ok(e.serverSyncTree_,o.currentWriteId,!0));else{const n=fE(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Wk("transaction failed: Data returned ",r,o.path);let t=bA(r);"object"===typeof r&&null!=r&&nn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=iE(e),c=Ek(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=lE(e),s.splice(s.indexOf(a),1),i=i.concat(ik(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(ok(e.serverSyncTree_,a,!0))}else d=!0,u="nodata",i=i.concat(ok(e.serverSyncTree_,o.currentWriteId,!0))}Xk(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;wE(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)eS(r[l]);mE(e,e.transactionQueueTree_)}(e,yE(e,n),r),r}function vE(e,t){let n,r=e.transactionQueueTree_;for(n=TS(t);null!==n&&void 0===Pk(r);)r=Rk(r,n),n=TS(t=PS(t));return r}function yE(e,t){const n=[];return bE(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function bE(e,t,n){const r=Pk(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ok(t,(t=>{bE(e,t,n)}))}function wE(e,t){const n=Pk(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Nk(t,n.length>0?n:void 0)}Ok(t,(t=>{wE(e,t)}))}function xE(e,t){const n=Mk(vE(e,t)),r=Rk(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{_E(e,t)})),_E(e,r),Dk(r,(t=>{_E(e,t)})),n}function _E(e,t){const n=Pk(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(kt(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(kt(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(ok(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Nk(t,void 0):n.length=o+1,Xk(e.eventQueue_,Mk(t),i);for(let e=0;e<r.length;e++)eS(r[e])}}const SE=function(e,t){const n=AE(e),r=n.namespace;"firebase.com"===n.domain&&$_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||$_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&U_("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new uS(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ES(n.pathString)}},AE=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(xI){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):U_(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},CE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class kE{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+en(this.snapshot.exportVal())}}class EE{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class IE{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return kt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class TE{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return MS(this._path)?null:NS(this._path)}get ref(){return new RE(this._repo,this._path)}get _queryIdentifier(){const e=PA(this._queryParams),t=G_(e);return"{}"===t?"default":t}get _queryObject(){return PA(this._queryParams)}isEqual(e){if(!((e=vn(e))instanceof TE))return!1;const t=this._repo===e._repo,n=FS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class RE extends TE{constructor(e,t){super(e,t,new TA,!1)}get parent(){const e=OS(this._path);return null===e?null:new RE(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class PE{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ES(e),n=jE(this.ref,e);return new PE(this._node.getChild(t),n,cA)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new PE(n,jE(this.ref,t),cA))))}hasChild(e){const t=new ES(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function NE(e,t){return(e=vn(e))._checkNotDeleted("ref"),void 0!==t?jE(e._root,t):e._root}function jE(e,t){var n,r,i,o;return null===TS((e=vn(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qk(n,r,i,o)):qk("child","path",t,!1),new RE(e._repo,DS(e._path,t))}function OE(e,t){e=vn(e),Hk("set",e._path),Vk("set",t,e._path,!1);const n=new Bt;return cE(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class DE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new kE("value",this,new PE(e.snapshotNode,new RE(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EE(this,e,t):null}matches(e){return e instanceof DE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ME{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EE(this,e,t):null}createEvent(e,t){kt(null!=e.childName,"Child events should have a childName.");const n=jE(new RE(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new kE(e.type,this,new PE(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ME&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function LE(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{uE(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new IE(n,o||void 0),a="value"===t?new DE(s):new ME(t,s);return function(e,t,n){let r;r=".info"===TS(t._path)?ck(e.infoSyncTree_,t,n):ck(e.serverSyncTree_,t,n),Qk(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>uE(e._repo,e,a)}function FE(e,t,n,r){return LE(e,"value",t,n,r)}!function(e){kt(!VC,"__referenceConstructor has already been defined"),VC=e}(RE),function(e){kt(!WC,"__referenceConstructor has already been defined"),WC=e}(RE);const zE={};let $E=!1;function UE(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||$_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),L_("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s,a,l=SE(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye-bafda.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,o=`http://${a}?ns=${c.namespace}`,l=SE(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new iS(iS.OWNER):new rS(e.name,e.options,t);Kk("Invalid Firebase Database URL",l),MS(l.path)||$_("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=zE[t.name];i||(i={},zE[t.name]=i);let o=i[e.toURLString()];o&&$_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new tE(e,$E,n,r),i[e.toURLString()]=o,o}(c,e,u,new nS(e,n));return new BE(d,e)}class BE{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(nE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new RE(this._repo,IS())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=zE[t];n&&n[e.key]===e||$_(`Database ${t}(${e.repoInfo_}) has already been deleted.`),dE(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&$_("Cannot call "+e+" on a deleted database.")}}qS.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},qS.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){A_(jr),Ir(new yn("database",((e,t)=>{let{instanceIdentifier:n}=t;return UE(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Mr(x_,__,e),Mr(x_,__,"esm2017")}();const VE=Or({apiKey:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",authDomain:"sideeye.uk",projectId:"sideeye-bafda",storageBucket:"sideeye-bafda.firebasestorage.app",messagingSenderId:"864667627333",appId:"1:864667627333:web:1ec087179141d1e91a982c",measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye-bafda.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.REACT_APP_FIREBASE_MEASUREMENT_ID,databaseURL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app"}),WE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();const t=Tr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Tr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(an(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Zr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:La,persistence:[Us,xs,ks]}),r=Ut("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Wa)return;const r=null===t||void 0===t?void 0:t.token;qa!==r&&(qa=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){vn(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){vn(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=Ft("auth");return o&&Co(n,`http://${o}`),n}(VE);const qE={cacheSizeBytes:-1,experimentalForceLongPolling:!0};let HE=null;const KE=async()=>{if(HE)return HE;try{return HE=function(e,t,n){n||(n=ud);const r=Tr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(an(r.getOptions(n),t))return e;throw new _l(xl.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new _l(xl.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<Km)throw new _l(xl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(VE,qE),await function(e,t){gl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Rb(e,Hy.provider,{build:e=>new qy(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(HE),console.log("Firestore persistence enabled"),HE}catch(e){if("failed-precondition"===e.code)return console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."),HE;if("unimplemented"===e.code)return console.warn("The current browser does not support persistence."),HE;throw console.error("Error enabling persistence:",e),e}},GE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),t=arguments.length>1?arguments[1]:void 0;e=vn(e);const n=Tr(e,g_).getImmediate({identifier:t}),r=zt("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Vt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(VE),YE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),t=arguments.length>1?arguments[1]:void 0;const n=Tr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=zt("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=vn(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&an(r,o.repoInfo_.emulatorOptions))return;$_("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&$_('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new iS(iS.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Vt(r.mockUserToken,e.app.options.projectId);s=new iS(t)}!function(e,t,n,r){e.repoInfo_=new uS(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(o,i,r,s)}(n,...e)}return n}(VE),QE=async()=>(HE||(HE=await KE()),HE);let XE={data:""},JE=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||XE,ZE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,eI=/\/\*[^]*?\*\/|  +/g,tI=/\n+/g,nI=(e,t)=>{let n="",r="",i="";for(let o in e){let s=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+s+";":r+="f"==o[1]?nI(s,o):o+"{"+nI(s,"k"==o[1]?"":t)+"}":"object"==typeof s?r+=nI(s,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=nI.p?nI.p(o,s):o+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},rI={},iI=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+iI(e[n]);return t}return e};function oI(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,i)=>{let o=iI(e),s=rI[o]||(rI[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!rI[s]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=ZE.exec(e.replace(eI,""));)t[4]?r.shift():t[3]?(n=t[3].replace(tI," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(tI," ").trim();return r[0]})(e);rI[s]=nI(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let a=n&&rI.g?rI.g:null;return n&&(rI.g=rI[s]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(rI[s],t,r,a),s})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":nI(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,JE(t.target),t.g,t.o,t.k)}oI.bind({g:1});let sI,aI,lI,cI=oI.bind({k:1});function uI(e,t){let n=this||{};return function(){let r=arguments;function i(o,s){let a=Object.assign({},o),l=a.className||i.className;n.p=Object.assign({theme:aI&&aI()},a),n.o=/ *go\d+/.test(l),a.className=oI.apply(n,r)+(l?" "+l:""),t&&(a.ref=s);let c=e;return e[0]&&(c=a.as||e,delete a.as),lI&&c[0]&&lI(a),sI(c,a)}return t?t(i):i}}var dI=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,hI=(()=>{let e=0;return()=>(++e).toString()})(),pI=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),fI=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return fI(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},mI=[],gI={toasts:[],pausedAt:void 0},vI=e=>{gI=fI(gI,e),mI.forEach((e=>{e(gI)}))},yI={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bI=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||hI()}}(t,e,n);return vI({type:2,toast:r}),r.id},wI=(e,t)=>bI("blank")(e,t);wI.error=bI("error"),wI.success=bI("success"),wI.loading=bI("loading"),wI.custom=bI("custom"),wI.dismiss=e=>{vI({type:3,toastId:e})},wI.remove=e=>vI({type:4,toastId:e}),wI.promise=(e,t,n)=>{let r=wI.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?dI(t.success,e):void 0;return i?wI.success(i,{id:r,...n,...null==n?void 0:n.success}):wI.dismiss(r),e})).catch((e=>{let i=t.error?dI(t.error,e):void 0;i?wI.error(i,{id:r,...n,...null==n?void 0:n.error}):wI.dismiss(r)})),e};var xI,_I,SI,AI,CI=(e,t)=>{vI({type:1,toast:{id:e,height:t}})},kI=()=>{vI({type:5,time:Date.now()})},EI=new Map,II=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,r.useState)(gI),i=(0,r.useRef)(gI);(0,r.useEffect)((()=>(i.current!==gI&&n(gI),mI.push(n),()=>{let e=mI.indexOf(n);e>-1&&mI.splice(e,1)})),[]);let o=t.toasts.map((t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||yI[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...t,toasts:o}}(e);(0,r.useEffect)((()=>{if(n)return;let e=Date.now(),r=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>wI.dismiss(t.id)),n);t.visible&&wI.dismiss(t.id)}));return()=>{r.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let i=(0,r.useCallback)((()=>{n&&vI({type:6,time:Date.now()})}),[n]),o=(0,r.useCallback)(((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=n||{},s=t.filter((t=>(t.position||o)===(e.position||o)&&t.height)),a=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<a&&e.visible)).length;return s.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[t]);return(0,r.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(EI.has(e))return;let n=setTimeout((()=>{EI.delete(e),vI({type:4,toastId:e})}),t);EI.set(e,n)}(e.id,e.removeDelay);else{let t=EI.get(e.id);t&&(clearTimeout(t),EI.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:CI,startPause:kI,endPause:i,calculateOffset:o}}},TI=cI`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RI=cI`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PI=cI`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,NI=uI("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${PI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jI=cI`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,OI=uI("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${jI} 1s linear infinite;
`,DI=cI`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MI=cI`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,LI=uI("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,FI=uI("div")`
  position: absolute;
`,zI=uI("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$I=cI`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UI=uI("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$I} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BI=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:o}=t;return void 0!==n?"string"==typeof n?r.createElement(UI,null,n):n:"blank"===i?null:r.createElement(zI,null,r.createElement(OI,{...o}),"loading"!==i&&r.createElement(FI,null,"error"===i?r.createElement(NI,{...o}):r.createElement(LI,{...o})))},VI=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,WI=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,qI=uI("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HI=uI("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,KI=r.memo((e=>{let{toast:t,position:n,style:i,children:o}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=pI()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[VI(n),WI(n)];return{animation:t?`${cI(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cI(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},a=r.createElement(BI,{toast:t}),l=r.createElement(HI,{...t.ariaProps},dI(t.message,t));return r.createElement(qI,{className:t.className,style:{...s,...i,...t.style}},"function"==typeof o?o({icon:a,message:l}):r.createElement(r.Fragment,null,a,l))}));xI=r.createElement,nI.p=_I,sI=xI,aI=SI,lI=AI;var GI=e=>{let{id:t,className:n,style:i,onHeightUpdate:o,children:s}=e,a=r.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;o(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,o]);return r.createElement("div",{ref:a,className:n,style:i},s)},YI=oI`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,QI=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:i,gutter:o,children:s,containerStyle:a,containerClassName:l}=e,{toasts:c,handlers:u}=II(i);return r.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...a},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||n,a=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(i,u.calculateOffset(e,{reverseOrder:t,gutter:o,defaultPosition:n}));return r.createElement(GI,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?YI:"",style:a},"custom"===e.type?dI(e.message,e):s?s(e):r.createElement(KI,{toast:e,position:i}))})))};const XI=(0,r.createContext)({currentUser:null,user:null,userProfile:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resetPassword:async()=>{},updateProfile:async()=>{},sendEmailVerification:async()=>{},verifyEmail:async()=>{},setupTwoFactorAuth:async()=>{},verifyTwoFactorAuth:async()=>{},setUserProfile:()=>{},setError:()=>{}}),JI=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();f(e)}catch(e){console.error("Error initializing Firestore:",e),h("Failed to initialize database")}})()}),[]),(0,r.useEffect)((()=>{if(!p)return;const e=WE.onAuthStateChanged((async e=>{if(i(e),s(e),e)try{const r=await jw(Sb(p,"users",e.uid));if(r.exists()){var t;const n=r.data();l({...n,id:e.uid,email:e.email||"",name:e.displayName||n.name||"",username:n.username||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"",profilePic:e.photoURL||n.profilePic||"",connections:n.connections||[],followers:n.followers||[],following:n.following||[],isVerified:e.emailVerified||n.isVerified||!1,createdAt:n.createdAt||Bl.fromDate(new Date),lastLogin:Bl.fromDate(new Date),settings:n.settings||{theme:"light",notifications:!0,privacy:"public"},updatedAt:new Date,isPrivate:!1,isActive:!0,lastSeen:new Date,status:"online",preferences:n.preferences||{theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0}})}else{var n;const t={id:e.uid,email:e.email||"",name:e.displayName||"",username:(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"",profilePic:e.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,createdAt:Bl.now(),lastLogin:Bl.now(),settings:{theme:"light",notifications:!0,privacy:"public"},updatedAt:new Date,isPrivate:!1,isActive:!0,lastSeen:new Date,status:"online",preferences:{theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0}};await Mw(Sb(p,"users",e.uid),t),l(t)}}catch(r){console.error("Error fetching user profile:",r),h("Failed to fetch user profile")}else l(null);u(!1)}));return e}),[p]);const m={currentUser:n,user:o,userProfile:a,loading:c,error:d,login:async(e,t)=>{u(!0),h(null);let n=0;for(;n<3;)try{const n=(await cs(WE,e,t)).user;if(!n.emailVerified)return h("Please verify your email before logging in"),void await hs(WE);if(p){const e=await jw(Sb(p,"users",n.uid));if(e.exists()){var r;const t=e.data();l({...t,id:n.uid,email:n.email||"",name:n.displayName||t.name||"",username:t.username||(null===(r=n.email)||void 0===r?void 0:r.split("@")[0])||"",profilePic:n.photoURL||t.profilePic||"",lastLogin:Bl.fromDate(new Date)})}}return}catch(d){if(n++,3===n)return h(eT(d.code)),void u(!1);await new Promise((e=>setTimeout(e,1e3*Math.pow(2,n))))}},register:async(e,t,n)=>{u(!0),h(null);let r=0;for(;r<3;)try{if(p){const e=fw(_b(p,"users"),gw("username","==",n.toLowerCase()));if(!(await Dw(e)).empty)return h("Username is already taken"),void u(!1)}const r=(await ls(WE,e,t)).user;if(p){const e={id:r.uid,email:r.email||"",name:r.displayName||"",username:n.toLowerCase(),profilePic:r.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,createdAt:Bl.fromDate(new Date),lastLogin:Bl.fromDate(new Date),settings:{theme:"light",notifications:!0,privacy:"public"},updatedAt:new Date,isPrivate:!1,isActive:!0,lastSeen:new Date,status:"online",preferences:{theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0}};await Mw(Sb(p,"users",r.uid),e),l(e)}return await us(r),void h("Please verify your email to continue")}catch(d){if(r++,3===r)return h(eT(d.code)),void u(!1);await new Promise((e=>setTimeout(e,1e3*Math.pow(2,r))))}},logout:async()=>{try{u(!0),await hs(WE),i(null),s(null),l(null),window.location.href="/login"}catch(d){console.error("Error logging out:",d),wI.error("Failed to log out")}finally{u(!1)}},resetPassword:async e=>{try{u(!0),await async function(e,t,n){const r=co(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&os(r,i,n),await So(r,i,"getOobCode",No,"EMAIL_PASSWORD_PROVIDER")}(WE,e)}catch(d){throw h(d.message),d}finally{u(!1)}},updateProfile:async e=>{if(!n)throw new Error("No user logged in");try{u(!0),await ds(n,e),i({...n,...e})}catch(d){throw h(d.message),d}finally{u(!1)}},sendEmailVerification:async()=>{if(!n)throw new Error("No user logged in");try{u(!0),await us(n)}catch(d){throw h(d.message),d}finally{u(!1)}},verifyEmail:async()=>{},setupTwoFactorAuth:async()=>{},verifyTwoFactorAuth:async()=>{},setUserProfile:l,setError:h};return(0,$e.jsx)(XI.Provider,{value:m,children:t})},ZI=()=>{const e=(0,r.useContext)(XI);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},eT=e=>{switch(e){case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email is already in use";case"auth/weak-password":return"Password is too weak";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}},tT=(0,r.createContext)(void 0),nT=e=>{let{children:t}=e;const{currentUser:n}=ZI(),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(0),[l,c]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();c(e)}catch(e){console.error("Error initializing Firestore:",e)}})()}),[]),(0,r.useEffect)((()=>{if(!n||!l)return;let e;try{const t=fw(_b(l,"notifications"),gw("recipientId","==",n.uid),bw("timestamp","desc"));e=$w(t,(e=>{const t=[];let n=0;e.forEach((e=>{const r={id:e.id,...e.data()};t.push(r),r.read||n++})),o(t),a(n)}),(e=>{console.error("Error in notifications listener:",e)}))}catch(t){console.error("Error setting up notifications listener:",t)}return()=>{e&&e()}}),[n,l]);return(0,$e.jsx)(tT.Provider,{value:{notifications:i,unreadCount:s,markAsRead:async e=>{if(l&&n)try{const t=Sb(l,"notifications",e);await Lw(t,{read:!0})}catch(t){console.error("Error marking notification as read:",t)}},markAllAsRead:async()=>{if(l&&n)try{const e=i.filter((e=>!e.read)).map((e=>Lw(Sb(l,"notifications",e.id),{read:!0})));await Promise.all(e)}catch(e){console.error("Error marking all notifications as read:",e)}},deleteNotification:async e=>{if(l&&n)try{const t=Sb(l,"notifications",e);await Lw(t,{deleted:!0})}catch(t){console.error("Error deleting notification:",t)}}},children:t})},rT=()=>{const e=(0,r.useContext)(tT);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e},iT=(0,yt.A)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5",paper:"#ffffff"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h1:{fontSize:"2.5rem",fontWeight:500},h2:{fontSize:"2rem",fontWeight:500},h3:{fontSize:"1.75rem",fontWeight:500},h4:{fontSize:"1.5rem",fontWeight:500},h5:{fontSize:"1.25rem",fontWeight:500},h6:{fontSize:"1rem",fontWeight:500}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}}}});function oT(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(xI){o(xI)}}function a(e){try{l(r.throw(e))}catch(xI){o(xI)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function sT(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(xI){o=[6,xI],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var aT=function(){return aT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},aT.apply(this,arguments)},lT=function(e){return{loading:void 0===e||null===e,value:e}},cT=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return aT(aT({},e),{error:t.error,loading:!1,value:void 0});case"reset":return lT(t.defaultValue);case"value":return aT(aT({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),lT(t)),i=n[0],o=n[1],s=(0,r.useCallback)((function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})}),[e]),a=(0,r.useCallback)((function(e){o({type:"error",error:e})}),[]),l=(0,r.useCallback)((function(e){o({type:"value",value:e})}),[]);return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:s,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,s,a,l,i.value])},uT=function(e,t){var n=cT((function(){return e.currentUser})),i=n.error,o=n.loading,s=n.setError,a=n.setValue,l=n.value;return(0,r.useEffect)((function(){var n=function(e,t,n,r){return vn(e).onAuthStateChanged(t,n,r)}(e,(function(e){return oT(void 0,void 0,void 0,(function(){var n;return sT(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),s(n),[3,4];case 4:return a(e),[2]}}))}))}),s);return function(){n()}}),[e]),[l,o,i]},dT=n(8610),hT=n(4535),pT=n(6803),fT=n(7266);const mT=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var gT=n(2372);function vT(e){return(0,gT.Ay)("MuiPaper",e)}(0,bt.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const yT=["className","component","elevation","square","variant"],bT=(0,hT.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,De.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.divider}`},"elevation"===n.variant&&(0,De.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,fT.X4)("#fff",mT(n.elevation))}, ${(0,fT.X4)("#fff",mT(n.elevation))})`},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),wT=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,Me.A)(n,yT),c=(0,De.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,dT.A)(o,vT,i)})(c);return(0,$e.jsx)(bT,(0,De.A)({as:i,ownerState:c,className:(0,ht.A)(u.root,r),ref:t},l))})),xT=wT;function _T(e){return(0,gT.Ay)("MuiAppBar",e)}(0,bt.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ST=["className","color","enableColorOnDark","position"],AT=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,CT=(0,hT.Ay)(xT,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,pT.A)(n.position)}`],t[`color${(0,pT.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,De.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,De.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,De.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,De.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:AT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:AT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:AT(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:AT(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),kT=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:s="fixed"}=n,a=(0,Me.A)(n,ST),l=(0,De.A)({},n,{color:i,position:s,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,pT.A)(t)}`,`position${(0,pT.A)(n)}`]};return(0,dT.A)(i,_T,r)})(l);return(0,$e.jsx)(CT,(0,De.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,ht.A)(c.root,r,"fixed"===s&&"mui-fixed"),ref:t},a))}));function ET(e){return(0,gT.Ay)("MuiToolbar",e)}(0,bt.A)("MuiToolbar",["root","gutters","regular","dense"]);const IT=["className","component","disableGutters","variant"],TT=(0,hT.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),RT=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:s="regular"}=n,a=(0,Me.A)(n,IT),l=(0,De.A)({},n,{component:i,disableGutters:o,variant:s}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,dT.A)(i,ET,t)})(l);return(0,$e.jsx)(TT,(0,De.A)({as:i,className:(0,ht.A)(c.root,r),ref:t,ownerState:l},a))})),PT=RT;var NT=n(9662);const jT=(0,NT.A)((0,$e.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function OT(e){return(0,gT.Ay)("MuiAvatar",e)}(0,bt.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var DT=n(3462);const MT=function(e){return"string"===typeof e};const LT=function(e,t,n){return void 0===e||MT(e)?t:(0,De.A)({},t,{ownerState:(0,De.A)({},t.ownerState,n)})};const FT=function(e,t,n){return"function"===typeof e?e(t,n):e};const zT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const $T=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const UT=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,ht.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,De.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,De.A)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=zT((0,De.A)({},i,r)),a=$T(r),l=$T(i),c=t(s),u=(0,ht.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,De.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,De.A)({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},BT=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],VT=["component","slots","slotProps"],WT=["component"];function qT(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:s,internalForwardedProps:a}=t,l=(0,Me.A)(t,BT),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=o,h=(0,Me.A)(o,VT),p=u[e]||r,f=FT(d[e],i),m=UT((0,De.A)({className:n},l,{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:f})),{props:{component:g},internalRef:v}=m,y=(0,Me.A)(m.props,WT),b=(0,DT.A)(v,null==f?void 0:f.ref,t.ref),w=s?s(y):{},x=(0,De.A)({},i,w),_="root"===e?g||c:g,S=LT(p,(0,De.A)({},"root"===e&&!c&&!u[e]&&a,"root"!==e&&!u[e]&&a,y,_&&{as:_},{ref:b}),x);return Object.keys(w).forEach((e=>{delete S[e]})),[p,S]}const HT=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],KT=(0,hT.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,De.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,De.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),GT=(0,hT.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),YT=(0,hT.Ay)(jT,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const QT=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:a="div",slots:l={},slotProps:c={},imgProps:u,sizes:d,src:h,srcSet:p,variant:f="circular"}=n,m=(0,Me.A)(n,HT);let g=null;const v=function(e){let{crossOrigin:t,referrerPolicy:n,src:i,srcSet:o}=e;const[s,a]=r.useState(!1);return r.useEffect((()=>{if(!i&&!o)return;a(!1);let e=!0;const r=new Image;return r.onload=()=>{e&&a("loaded")},r.onerror=()=>{e&&a("error")},r.crossOrigin=t,r.referrerPolicy=n,r.src=i,o&&(r.srcset=o),()=>{e=!1}}),[t,n,i,o]),s}((0,De.A)({},u,{src:h,srcSet:p})),y=h||p,b=y&&"error"!==v,w=(0,De.A)({},n,{colorDefault:!b,component:a,variant:f}),x=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,dT.A)(i,OT,t)})(w),[_,S]=qT("img",{className:x.img,elementType:GT,externalForwardedProps:{slots:l,slotProps:{img:(0,De.A)({},u,c.img)}},additionalProps:{alt:i,src:h,srcSet:p,sizes:d},ownerState:w});return g=b?(0,$e.jsx)(_,(0,De.A)({},S)):o||0===o?o:y&&i?i[0]:(0,$e.jsx)(YT,{ownerState:w,className:x.fallback}),(0,$e.jsx)(KT,(0,De.A)({as:a,ownerState:w,className:(0,ht.A)(x.root,s),ref:t},m,{children:g}))})),XT=QT;function JT(e){return(0,gT.Ay)("MuiTypography",e)}(0,bt.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ZT=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],eR=(0,hT.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,pT.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),tR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},nR={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},rR=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiTypography"}),r=(e=>nR[e]||e)(n.color),i=(0,mt.A)((0,De.A)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=tR}=i,p=(0,Me.A)(i,ZT),f=(0,De.A)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=a||(u?"p":h[d]||tR[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&`align${(0,pT.A)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,dT.A)(a,JT,s)})(f);return(0,$e.jsx)(eR,(0,De.A)({as:m,ref:t,ownerState:f,className:(0,ht.A)(g.root,s)},p))})),iR=rR;var oR=n(5849),sR=n(3319),aR=n(3574);function lR(e,t){return lR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lR(e,t)}function cR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lR(e,t)}const uR=r.createContext(null);function dR(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function hR(e,t,n){return null!=n[t]?n[t]:e.props[t]}function pR(e,t,n){var i=dR(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var l=s in t,c=s in i,u=t[s],d=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,r.isValidElement)(u)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:hR(a,"exit",e),enter:hR(a,"enter",e)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:hR(a,"exit",e),enter:hR(a,"enter",e)})}})),o}var fR=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},mR=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}cR(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,i=s,dR(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:hR(e,"appear",n),enter:hR(e,"enter",n),exit:hR(e,"exit",n)})}))):pR(e,o,s),firstRender:!1}},n.handleExited=function(e,t){var n=dR(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,De.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,Me.A)(e,["component","childFactory"]),o=this.state.contextValue,s=fR(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(uR.Provider,{value:o},s):r.createElement(uR.Provider,{value:o},r.createElement(t,i,s))},t}(r.Component);mR.propTypes={},mR.defaultProps={component:"div",childFactory:function(e){return e}};const gR=mR;var vR=n(3290),yR=n(9303);const bR=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[d,h]=r.useState(!1),p=(0,ht.A)(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+o},m=(0,ht.A)(n.child,d&&n.childLeaving,i&&n.childPulsate);return l||d||h(!0),r.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,$e.jsx)("span",{className:p,style:f,children:(0,$e.jsx)("span",{className:m})})};const wR=(0,bt.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),xR=["center","classes","className"];let _R,SR,AR,CR,kR=e=>e;const ER=(0,vR.i7)(_R||(_R=kR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),IR=(0,vR.i7)(SR||(SR=kR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),TR=(0,vR.i7)(AR||(AR=kR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),RR=(0,hT.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),PR=(0,hT.Ay)(bR,{name:"MuiTouchRipple",slot:"Ripple"})(CR||(CR=kR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),wR.rippleVisible,ER,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),wR.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),wR.child,wR.childLeaving,IR,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),wR.childPulsate,TR,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),NR=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,Me.A)(n,xR),[l,c]=r.useState([]),u=r.useRef(0),d=r.useRef(null);r.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=r.useRef(!1),p=(0,yR.A)(),f=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;c((e=>[...e,(0,$e.jsx)(PR,{classes:{ripple:(0,ht.A)(o.ripple,wR.ripple),rippleVisible:(0,ht.A)(o.rippleVisible,wR.rippleVisible),ripplePulsate:(0,ht.A)(o.ripplePulsate,wR.ripplePulsate),child:(0,ht.A)(o.child,wR.child),childLeaving:(0,ht.A)(o.childLeaving,wR.childLeaving),childPulsate:(0,ht.A)(o.childPulsate,wR.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=s}),[o]),v=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,g,p]),y=r.useCallback((()=>{v({},{pulsate:!0})}),[v]),b=r.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[p]);return r.useImperativeHandle(t,(()=>({pulsate:y,start:v,stop:b})),[y,v,b]),(0,$e.jsx)(RR,(0,De.A)({className:(0,ht.A)(wR.root,o.root,s),ref:m},a,{children:(0,$e.jsx)(gR,{component:null,exit:!0,children:l})}))}));function jR(e){return(0,gT.Ay)("MuiButtonBase",e)}const OR=(0,bt.A)("MuiButtonBase",["root","disabled","focusVisible"]),DR=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],MR=(0,hT.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${OR.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),LR=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:w,onKeyUp:x,onMouseDown:_,onMouseLeave:S,onMouseUp:A,onTouchEnd:C,onTouchMove:k,onTouchStart:E,tabIndex:I=0,TouchRippleProps:T,touchRippleRef:R,type:P}=n,N=(0,Me.A)(n,DR),j=r.useRef(null),O=r.useRef(null),D=(0,oR.A)(O,R),{isFocusVisibleRef:M,onFocus:L,onBlur:F,ref:z}=(0,aR.A)(),[$,U]=r.useState(!1);c&&$&&U(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{U(!0),j.current.focus()}})),[]);const[B,V]=r.useState(!1);r.useEffect((()=>{V(!0)}),[]);const W=B&&!u&&!c;function q(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,sR.A)((r=>{t&&t(r);return!n&&O.current&&O.current[e](r),!0}))}r.useEffect((()=>{$&&h&&!u&&B&&O.current.pulsate()}),[u,h,$,B]);const H=q("start",_),K=q("stop",g),G=q("stop",v),Y=q("stop",A),Q=q("stop",(e=>{$&&e.preventDefault(),S&&S(e)})),X=q("start",E),J=q("stop",C),Z=q("stop",k),ee=q("stop",(e=>{F(e),!1===M.current&&U(!1),f&&f(e)}),!1),te=(0,sR.A)((e=>{j.current||(j.current=e.currentTarget),L(e),!0===M.current&&(U(!0),b&&b(e)),y&&y(e)})),ne=()=>{const e=j.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=(0,sR.A)((e=>{h&&!re.current&&$&&O.current&&" "===e.key&&(re.current=!0,O.current.stop(e,(()=>{O.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=(0,sR.A)((e=>{h&&" "===e.key&&O.current&&$&&!e.defaultPrevented&&(re.current=!1,O.current.stop(e,(()=>{O.current.pulsate(e)}))),x&&x(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=l;"button"===se&&(N.href||N.to)&&(se=p);const ae={};"button"===se?(ae.type=void 0===P?"button":P,ae.disabled=c):(N.href||N.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=(0,oR.A)(t,z,j);const ce=(0,De.A)({},n,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:I,focusVisible:$}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,dT.A)(o,jR,i);return n&&r&&(s.root+=` ${r}`),s})(ce);return(0,$e.jsxs)(MR,(0,De.A)({as:se,className:(0,ht.A)(ue.root,a),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:K,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:H,onMouseLeave:Q,onMouseUp:Y,onDragLeave:G,onTouchEnd:J,onTouchMove:Z,onTouchStart:X,ref:le,tabIndex:c?-1:I,type:P},ae,N,{children:[s,W?(0,$e.jsx)(NR,(0,De.A)({ref:D,center:o},T)):null]}))}));function FR(e){return(0,gT.Ay)("MuiIconButton",e)}const zR=(0,bt.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),$R=["edge","children","className","color","disabled","disableFocusRipple","size"],UR=(0,hT.Ay)(LR,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,pT.A)(n.color)}`],n.edge&&t[`edge${(0,pT.A)(n.edge)}`],t[`size${(0,pT.A)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,De.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,De.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,De.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${zR.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),BR=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Me.A)(n,$R),d=(0,De.A)({},n,{edge:r,color:s,disabled:a,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled","default"!==r&&`color${(0,pT.A)(r)}`,i&&`edge${(0,pT.A)(i)}`,`size${(0,pT.A)(o)}`]};return(0,dT.A)(s,FR,t)})(d);return(0,$e.jsx)(UR,(0,De.A)({className:(0,ht.A)(h.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:t},u,{ownerState:d,children:i}))}));var VR=n(3030),WR=n(1475);function qR(e){return(0,gT.Ay)("MuiButton",e)}const HR=(0,bt.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const KR=r.createContext({});const GR=r.createContext(void 0),YR=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],QR=e=>(0,De.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),XR=(0,hT.Ay)(LR,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,pT.A)(n.color)}`],t[`size${(0,pT.A)(n.size)}`],t[`${n.variant}Size${(0,pT.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],s="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,De.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,De.A)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:`1px solid ${(t.vars||t).palette[n.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${HR.focusVisible}`]:(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${HR.disabled}`]:(0,De.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${(0,fT.X4)(t.palette[n.color].main,.5)}`},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${HR.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${HR.disabled}`]:{boxShadow:"none"}}})),JR=(0,hT.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,pT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},QR(t))})),ZR=(0,hT.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,pT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},QR(t))})),eP=r.forwardRef((function(e,t){const n=r.useContext(KR),i=r.useContext(GR),o=(0,VR.A)(n,e),s=(0,tt.b)({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,size:v="medium",startIcon:y,type:b,variant:w="text"}=s,x=(0,Me.A)(s,YR),_=(0,De.A)({},s,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:g,size:v,type:b,variant:w}),S=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,`${o}${(0,pT.A)(t)}`,`size${(0,pT.A)(i)}`,`${o}Size${(0,pT.A)(i)}`,`color${(0,pT.A)(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,pT.A)(i)}`],endIcon:["icon","endIcon",`iconSize${(0,pT.A)(i)}`]},l=(0,dT.A)(a,qR,s);return(0,De.A)({},s,l)})(_),A=y&&(0,$e.jsx)(JR,{className:S.startIcon,ownerState:_,children:y}),C=f&&(0,$e.jsx)(ZR,{className:S.endIcon,ownerState:_,children:f}),k=i||"";return(0,$e.jsxs)(XR,(0,De.A)({ownerState:_,className:(0,ht.A)(n.className,S.root,u,k),component:c,disabled:d,focusRipple:!p,focusVisibleClassName:(0,ht.A)(S.focusVisible,m),ref:t,type:b},x,{classes:S,children:[A,a,C]}))})),tP=eP,nP=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const rP=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=(0,Me.A)(e,nP),a=o?{}:FT(r,i),{props:l,internalRef:c}=UT((0,De.A)({},s,{externalSlotProps:a})),u=(0,DT.A)(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return LT(n,(0,De.A)({},l,{ref:u}),i)};var iP=n(2427);const oP=r.createContext({});function sP(e){return(0,gT.Ay)("MuiList",e)}(0,bt.A)("MuiList",["root","padding","dense","subheader"]);const aP=["children","className","component","dense","disablePadding","subheader"],lP=(0,hT.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,De.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),cP=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=n,u=(0,Me.A)(n,aP),d=r.useMemo((()=>({dense:a})),[a]),h=(0,De.A)({},n,{component:s,dense:a,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,dT.A)(o,sP,t)})(h);return(0,$e.jsx)(oP.Provider,{value:d,children:(0,$e.jsxs)(lP,(0,De.A)({as:s,className:(0,ht.A)(p.root,o),ref:t,ownerState:h},u,{children:[c,i]}))})}));function uP(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const dP=uP;var hP=n(5013);const pP=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function fP(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function mP(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function gP(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function vP(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&gP(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const yP=r.forwardRef((function(e,t){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Me.A)(e,pP),p=r.useRef(null),f=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,hP.A)((()=>{i&&p.current.focus()}),[i]),r.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${dP((0,iP.A)(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const m=(0,oR.A)(p,t);let g=-1;r.Children.forEach(s,((e,t)=>{r.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=s.length&&(g=-1))):g===t&&(g+=1,g>=s.length&&(g=-1))}));const v=r.Children.map(s,((e,t)=>{if(t===g){const t={};return o&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),r.cloneElement(e,t)}return e}));return(0,$e.jsx)(cP,(0,De.A)({role:"menu",ref:m,className:a,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,iP.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),vP(t,r,c,l,fP);else if("ArrowUp"===n)e.preventDefault(),vP(t,r,c,l,mP);else if("Home"===n)e.preventDefault(),vP(t,null,c,l,fP);else if("End"===n)e.preventDefault(),vP(t,null,c,l,mP);else if(1===n.length){const i=f.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&gP(r,i);i.previousKeyMatched&&(a||vP(t,r,!1,l,fP,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},h,{children:v}))})),bP=yP;var wP=n(950),xP=n(6078);function _P(e){var t;return parseInt(r.version,10)>=19?(null==e||null==(t=e.props)?void 0:t.ref)||null:(null==e?void 0:e.ref)||null}const SP=!1;var AP="unmounted",CP="exited",kP="entering",EP="entered",IP="exiting",TP=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=CP,r.appearStatus=kP):i=EP:i=t.unmountOnExit||t.mountOnEnter?AP:CP,r.state={status:i},r.nextCallback=null,r}cR(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===AP?{status:CP}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==kP&&n!==EP&&(t=kP):n!==kP&&n!==EP||(t=IP)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===kP){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===CP&&this.setState({status:AP})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||SP?this.safeSetState({status:EP},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:kP},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:EP},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!SP?(this.props.onExit(r),this.safeSetState({status:IP},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:CP},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:CP},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===AP)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Me.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(uR.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function RP(){}TP.contextType=uR,TP.propTypes={},TP.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:RP,onEntering:RP,onEntered:RP,onExit:RP,onExiting:RP,onExited:RP},TP.UNMOUNTED=AP,TP.EXITED=CP,TP.ENTERING=kP,TP.ENTERED=EP,TP.EXITING=IP;const PP=TP;function NP(){const e=ot(at.A);return e[Je.A]||e}const jP=e=>e.scrollTop;function OP(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const DP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function MP(e){return`scale(${e}, ${e**2})`}const LP={entering:{opacity:1,transform:MP(1)},entered:{opacity:1,transform:"none"}},FP="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),zP=r.forwardRef((function(e,t){const{addEndListener:n,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=PP}=e,v=(0,Me.A)(e,DP),y=(0,yR.A)(),b=r.useRef(),w=NP(),x=r.useRef(null),_=(0,oR.A)(x,_P(o),t),S=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},A=S(u),C=S(((e,t)=>{jP(e);const{duration:n,delay:r,easing:i}=OP({style:f,timeout:m,easing:s},{mode:"enter"});let o;"auto"===m?(o=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:FP?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),k=S(c),E=S(p),I=S((e=>{const{duration:t,delay:n,easing:r}=OP({style:f,timeout:m,easing:s},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:FP?i:.666*i,delay:FP?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=MP(.75),d&&d(e)})),T=S(h);return(0,$e.jsx)(g,(0,De.A)({appear:i,in:a,nodeRef:x,onEnter:C,onEntered:k,onEntering:A,onExit:I,onExited:T,onExiting:E,addEndListener:e=>{"auto"===m&&y.start(b.current||0,e),n&&n(x.current,e)},timeout:"auto"===m?null:m},v,{children:(e,t)=>r.cloneElement(o,(0,De.A)({style:(0,De.A)({opacity:0,transform:MP(.75),visibility:"exited"!==e||a?void 0:"hidden"},LP[e],f,o.props.style),ref:_},t))}))}));zP.muiSupportAuto=!0;const $P=zP;var UP=n(1668);const BP=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function VP(e){const t=[],n=[];return Array.from(e.querySelectorAll(BP)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function WP(){return!0}const qP=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=VP,isEnabled:a=WP,open:l}=e,c=r.useRef(!1),u=r.useRef(null),d=r.useRef(null),h=r.useRef(null),p=r.useRef(null),f=r.useRef(!1),m=r.useRef(null),g=(0,DT.A)(_P(t),m),v=r.useRef(null);r.useEffect((()=>{l&&m.current&&(f.current=!n)}),[n,l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,UP.A)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,UP.A)(m.current),t=t=>{v.current=t,!i&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=s(m.current)),n.length>0){var r,o;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,i,o,a,l,s]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,$e.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var HP=n(4440),KP=n(6564);const GP=r.forwardRef((function(e,t){const{children:n,container:i,disablePortal:o=!1}=e,[a,l]=r.useState(null),c=(0,DT.A)(r.isValidElement(n)?_P(n):null,t);if((0,HP.A)((()=>{o||l(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),(0,HP.A)((()=>{if(a&&!o)return(0,KP.A)(t,a),()=>{(0,KP.A)(t,null)}}),[t,a,o]),o){if(r.isValidElement(n)){const e={ref:c};return r.cloneElement(n,e)}return(0,$e.jsx)(r.Fragment,{children:n})}return(0,$e.jsx)(r.Fragment,{children:a?s.createPortal(n,a):a})})),YP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],QP={entering:{opacity:1},entered:{opacity:1}},XP=r.forwardRef((function(e,t){const n=NP(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=i,TransitionComponent:y=PP}=e,b=(0,Me.A)(e,YP),w=r.useRef(null),x=(0,oR.A)(w,_P(a),t),_=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},S=_(h),A=_(((e,t)=>{jP(e);const r=OP({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),C=_(d),k=_(m),E=_((e=>{const t=OP({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),I=_(f);return(0,$e.jsx)(y,(0,De.A)({appear:s,in:c,nodeRef:w,onEnter:A,onEntered:C,onEntering:S,onExit:E,onExited:I,onExiting:k,addEndListener:e=>{o&&o(w.current,e)},timeout:v},b,{children:(e,t)=>r.cloneElement(a,(0,De.A)({style:(0,De.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},QP[e],g,a.props.style),ref:x},t))}))})),JP=XP;function ZP(e){return(0,gT.Ay)("MuiBackdrop",e)}(0,bt.A)("MuiBackdrop",["root","invisible"]);const eN=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],tN=(0,hT.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),nN=r.forwardRef((function(e,t){var n,r,i;const o=(0,tt.b)({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:m=JP,transitionDuration:g}=o,v=(0,Me.A)(o,eN),y=(0,De.A)({},o,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,dT.A)(r,ZP,t)})(y),w=null!=(n=p.root)?n:u.root;return(0,$e.jsx)(m,(0,De.A)({in:h,timeout:g},v,{children:(0,$e.jsx)(tN,(0,De.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=f.root)?i:c.Root)?r:l,className:(0,ht.A)(b.root,a,null==w?void 0:w.className),ownerState:(0,De.A)({},y,null==w?void 0:w.ownerState),classes:b,ref:t,children:s}))}))}));var rN=n(1782),iN=n(2456),oN=n(3940);function sN(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function aN(e){return parseInt((0,oN.A)(e).getComputedStyle(e).paddingRight,10)||0}function lN(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&sN(e,i)}))}function cN(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function uN(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,UP.A)(e);return t.body===e?(0,oN.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=uP((0,UP.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${aN(r)+e}px`;const t=(0,UP.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${aN(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,UP.A)(r).body;else{const t=r.parentElement,n=(0,oN.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const dN=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&sN(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);lN(t,e.mount,e.modalRef,r,!0);const i=cN(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=cN(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=uN(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=cN(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&sN(e.modalRef,t),lN(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&sN(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const hN=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:o=dN,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,p=r.useRef({}),f=r.useRef(null),m=r.useRef(null),g=(0,DT.A)(m,h),[v,y]=r.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const x=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),_=()=>{o.mount(x(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},S=(0,rN.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||(0,UP.A)(f.current).body;o.add(x(),e),m.current&&_()})),A=r.useCallback((()=>o.isTopModal(x())),[o]),C=(0,rN.A)((e=>{f.current=e,e&&(d&&A()?_():m.current&&sN(m.current,w))})),k=r.useCallback((()=>{o.remove(x(),w)}),[w,o]);r.useEffect((()=>()=>{k()}),[k]),r.useEffect((()=>{d?S():b&&s||k()}),[d,k,b,s,S]);const E=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&A()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},I=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=zT(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,De.A)({},n,t);return(0,De.A)({role:"presentation"},r,{onKeyDown:E(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-hidden":!0},e,{onClick:I(e),open:d})},getTransitionProps:()=>({onEnter:(0,iN.A)((()=>{y(!1),a&&a()}),null==c?void 0:c.props.onEnter),onExited:(0,iN.A)((()=>{y(!0),l&&l(),s&&k()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:C,isTopModal:A,exited:v,hasTransition:b}};function pN(e){return(0,gT.Ay)("MuiModal",e)}(0,bt.A)("MuiModal",["root","hidden","backdrop"]);const fN=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],mN=(0,hT.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),gN=(0,hT.Ay)(nN,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),vN=r.forwardRef((function(e,t){var n,i,o,s,a,l;const c=(0,tt.b)({name:"MuiModal",props:e}),{BackdropComponent:u=gN,BackdropProps:d,className:h,closeAfterTransition:p=!1,children:f,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:x=!1,disablePortal:_=!1,disableRestoreFocus:S=!1,disableScrollLock:A=!1,hideBackdrop:C=!1,keepMounted:k=!1,onBackdropClick:E,open:I,slotProps:T,slots:R}=c,P=(0,Me.A)(c,fN),N=(0,De.A)({},c,{closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:x,disablePortal:_,disableRestoreFocus:S,disableScrollLock:A,hideBackdrop:C,keepMounted:k}),{getRootProps:j,getBackdropProps:O,getTransitionProps:D,portalRef:M,isTopModal:L,exited:F,hasTransition:z}=hN((0,De.A)({},N,{rootRef:t})),$=(0,De.A)({},N,{exited:F}),U=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,dT.A)(i,pN,r)})($),B={};if(void 0===f.props.tabIndex&&(B.tabIndex="-1"),z){const{onEnter:e,onExited:t}=D();B.onEnter=e,B.onExited=t}const V=null!=(n=null!=(i=null==R?void 0:R.root)?i:v.Root)?n:mN,W=null!=(o=null!=(s=null==R?void 0:R.backdrop)?s:v.Backdrop)?o:u,q=null!=(a=null==T?void 0:T.root)?a:y.root,H=null!=(l=null==T?void 0:T.backdrop)?l:y.backdrop,K=rP({elementType:V,externalSlotProps:q,externalForwardedProps:P,getSlotProps:j,additionalProps:{ref:t,as:g},ownerState:$,className:(0,ht.A)(h,null==q?void 0:q.className,null==U?void 0:U.root,!$.open&&$.exited&&(null==U?void 0:U.hidden))}),G=rP({elementType:W,externalSlotProps:H,additionalProps:d,getSlotProps:e=>O((0,De.A)({},e,{onClick:t=>{E&&E(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,ht.A)(null==H?void 0:H.className,null==d?void 0:d.className,null==U?void 0:U.backdrop),ownerState:$});return k||I||z&&!F?(0,$e.jsx)(GP,{ref:M,container:m,disablePortal:_,children:(0,$e.jsxs)(V,(0,De.A)({},K,{children:[!C&&u?(0,$e.jsx)(W,(0,De.A)({},G)):null,(0,$e.jsx)(qP,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:S,isEnabled:L,open:I,children:r.cloneElement(f,B)})]}))}):null})),yN=vN;function bN(e){return(0,gT.Ay)("MuiPopover",e)}(0,bt.A)("MuiPopover",["root","paper"]);const wN=["onEntering"],xN=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_N=["slotProps"];function SN(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function AN(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function CN(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function kN(e){return"function"===typeof e?e():e}const EN=(0,hT.Ay)(yN,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),IN=(0,hT.Ay)(xT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),TN=r.forwardRef((function(e,t){var n,i,o;const s=(0,tt.b)({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:b,slotProps:w,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:_=$P,transitionDuration:S="auto",TransitionProps:{onEntering:A}={},disableScrollLock:C=!1}=s,k=(0,Me.A)(s.TransitionProps,wN),E=(0,Me.A)(s,xN),I=null!=(n=null==w?void 0:w.paper)?n:y,T=r.useRef(),R=(0,oR.A)(T,I.ref),P=(0,De.A)({},s,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:I,transformOrigin:x,TransitionComponent:_,transitionDuration:S,TransitionProps:k}),N=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"],paper:["paper"]},bN,t)})(P),j=r.useCallback((()=>{if("anchorPosition"===d)return u;const e=kN(l),t=(e&&1===e.nodeType?e:(0,iP.A)(T.current).body).getBoundingClientRect();return{top:t.top+SN(t,c.vertical),left:t.left+AN(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),O=r.useCallback((e=>({vertical:SN(e,x.vertical),horizontal:AN(e,x.horizontal)})),[x.horizontal,x.vertical]),D=r.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=O(t);if("none"===d)return{top:null,left:null,transformOrigin:CN(n)};const r=j();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,a=o+t.width,c=(0,xP.A)(kN(l)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(a>h){const e=a-h;o-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(o)}px`,transformOrigin:CN(n)}}),[l,d,j,O,g]),[M,L]=r.useState(v),F=r.useCallback((()=>{const e=T.current;if(!e)return;const t=D(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,L(!0)}),[D]);r.useEffect((()=>(C&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F))),[l,C,F]);r.useEffect((()=>{v&&F()})),r.useImperativeHandle(a,(()=>v?{updatePosition:()=>{F()}}:null),[v,F]),r.useEffect((()=>{if(!v)return;const e=(0,wP.A)((()=>{F()})),t=(0,xP.A)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,v,F]);let z=S;"auto"!==S||_.muiSupportAuto||(z=void 0);const $=f||(l?(0,iP.A)(kN(l)).body:void 0),U=null!=(i=null==b?void 0:b.root)?i:EN,B=null!=(o=null==b?void 0:b.paper)?o:IN,V=rP({elementType:B,externalSlotProps:(0,De.A)({},I,{style:M?I.style:(0,De.A)({},I.style,{opacity:0})}),additionalProps:{elevation:m,ref:R},ownerState:P,className:(0,ht.A)(N.paper,null==I?void 0:I.className)}),W=rP({elementType:U,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:E,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:$,open:v},ownerState:P,className:(0,ht.A)(N.root,p)}),{slotProps:q}=W,H=(0,Me.A)(W,_N);return(0,$e.jsx)(U,(0,De.A)({},H,!MT(U)&&{slotProps:q,disableScrollLock:C},{children:(0,$e.jsx)(_,(0,De.A)({appear:!0,in:v,onEntering:(e,t)=>{A&&A(e,t),F()},onExited:()=>{L(!1)},timeout:z},k,{children:(0,$e.jsx)(B,(0,De.A)({},V,{children:h}))}))}))}));function RN(e){return(0,gT.Ay)("MuiMenu",e)}(0,bt.A)("MuiMenu",["root","paper","list"]);const PN=["onEntering"],NN=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],jN={vertical:"top",horizontal:"right"},ON={vertical:"top",horizontal:"left"},DN=(0,hT.Ay)(TN,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),MN=(0,hT.Ay)(IN,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),LN=(0,hT.Ay)(bP,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),FN=r.forwardRef((function(e,t){var n,i;const o=(0,tt.b)({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:b={}}=o,w=(0,Me.A)(o.TransitionProps,PN),x=(0,Me.A)(o,NN),_=He(),S=(0,De.A)({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:w,variant:v}),A=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"],paper:["paper"],list:["list"]},RN,t)})(S),C=s&&!c&&h,k=r.useRef(null);let E=-1;r.Children.map(a,((e,t)=>{r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===E)&&(E=t))}));const I=null!=(n=y.paper)?n:MN,T=null!=(i=b.paper)?i:p,R=rP({elementType:y.root,externalSlotProps:b.root,ownerState:S,className:[A.root,l]}),P=rP({elementType:I,externalSlotProps:T,ownerState:S,className:A.paper});return(0,$e.jsx)(DN,(0,De.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?jN:ON,slots:{paper:I,root:y.root},slotProps:{root:R,paper:P},open:h,ref:t,transitionDuration:m,TransitionProps:(0,De.A)({onEntering:(e,t)=>{k.current&&k.current.adjustStyleForScrollbar(e,{direction:_?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:S},x,{classes:f,children:(0,$e.jsx)(LN,(0,De.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:k,autoFocus:s&&(-1===E||c),autoFocusItem:C,variant:v},u,{className:(0,ht.A)(A.list,u.className),children:a}))}))})),zN=FN;function $N(e){return(0,gT.Ay)("MuiDivider",e)}const UN=(0,bt.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function BN(e){return(0,gT.Ay)("MuiListItemIcon",e)}const VN=(0,bt.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function WN(e){return(0,gT.Ay)("MuiListItemText",e)}const qN=(0,bt.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function HN(e){return(0,gT.Ay)("MuiMenuItem",e)}const KN=(0,bt.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),GN=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],YN=(0,hT.Ay)(LR,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${KN.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${KN.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${KN.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${KN.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${KN.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${UN.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${UN.inset}`]:{marginLeft:52},[`& .${qN.root}`]:{marginTop:0,marginBottom:0},[`& .${qN.inset}`]:{paddingLeft:36},[`& .${VN.root}`]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,De.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${VN.root} svg`]:{fontSize:"1.25rem"}}))})),QN=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=n,p=(0,Me.A)(n,GN),f=r.useContext(oP),m=r.useMemo((()=>({dense:s||f.dense||!1,disableGutters:l})),[f.dense,s,l]),g=r.useRef(null);(0,hP.A)((()=>{i&&g.current&&g.current.focus()}),[i]);const v=(0,De.A)({},n,{dense:m.dense,divider:a,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,a={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,dT.A)(a,HN,s);return(0,De.A)({},s,l)})(n),b=(0,oR.A)(g,t);let w;return n.disabled||(w=void 0!==d?d:-1),(0,$e.jsx)(oP.Provider,{value:m,children:(0,$e.jsx)(YN,(0,De.A)({ref:b,role:u,tabIndex:w,component:o,focusVisibleClassName:(0,ht.A)(y.focusVisible,c),className:(0,ht.A)(y.root,h)},p,{ownerState:v,classes:y}))})})),XN=["className"],JN=(0,hT.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),ZN=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItemIcon"}),{className:i}=n,o=(0,Me.A)(n,XN),s=r.useContext(oP),a=(0,De.A)({},n,{alignItems:s.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,dT.A)(r,BN,n)})(a);return(0,$e.jsx)(JN,(0,De.A)({className:(0,ht.A)(l.root,i),ownerState:a,ref:t},o))})),ej=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],tj=(0,hT.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${qN.primary}`]:t.primary},{[`& .${qN.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,De.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),nj=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=n,h=(0,Me.A)(n,ej),{dense:p}=r.useContext(oP);let f=null!=l?l:i,m=u;const g=(0,De.A)({},n,{disableTypography:s,inset:a,primary:!!f,secondary:!!m,dense:p}),v=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,s={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,dT.A)(s,WN,t)})(g);return null==f||f.type===iR||s||(f=(0,$e.jsx)(iR,(0,De.A)({variant:p?"body2":"body1",className:v.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:f}))),null==m||m.type===iR||s||(m=(0,$e.jsx)(iR,(0,De.A)({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:m}))),(0,$e.jsxs)(tj,(0,De.A)({className:(0,ht.A)(v.root,o),ownerState:g,ref:t},h,{children:[f,m]}))})),rj=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],ij=(0,hT.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,fT.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),oj=(0,hT.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===n.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})})),sj=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:s=(i?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Me.A)(n,rj),f=(0,De.A)({},n,{absolute:r,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:d,variant:h}),m=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,dT.A)(c,$N,r)})(f);return(0,$e.jsx)(ij,(0,De.A)({as:s,className:(0,ht.A)(m.root,o),role:u,ref:t,ownerState:f},p,{children:i?(0,$e.jsx)(oj,{className:m.wrapper,ownerState:f,children:i}):null}))}));sj.muiSkipListHighlight=!0;const aj=sj,lj=(0,NT.A)((0,$e.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),cj=(0,NT.A)((0,$e.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),uj=(0,NT.A)((0,$e.jsx)("path",{d:"M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2m0 5h-2V5h2zM4 19h16v2H4z"}),"LocalCafe"),dj=(0,NT.A)((0,$e.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),hj=(0,NT.A)((0,$e.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),pj=(0,NT.A)((0,$e.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),fj=(0,NT.A)((0,$e.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),mj=e=>{const t=r.useRef({});return r.useEffect((()=>{t.current=e})),t.current};const gj=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=mj({badgeContent:t,max:r});let s=n;!1!==n||0!==t||i||(s=!0);const{badgeContent:a,max:l=r}=s?o:e;return{badgeContent:a,invisible:s,max:l,displayValue:a&&Number(a)>l?`${l}+`:a}};function vj(e){return(0,gT.Ay)("MuiBadge",e)}const yj=(0,bt.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),bj=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],wj=(0,hT.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),xj=(0,hT.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,pT.A)(n.anchorOrigin.vertical)}${(0,pT.A)(n.anchorOrigin.horizontal)}${(0,pT.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,pT.A)(n.color)}`],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${yj.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),_j=r.forwardRef((function(e,t){var n,r,i,o,s,a;const l=(0,tt.b)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:w,slotProps:x,showZero:_=!1,variant:S="standard"}=l,A=(0,Me.A)(l,bj),{badgeContent:C,invisible:k,max:E,displayValue:I}=gj({max:y,invisible:v,badgeContent:b,showZero:_}),T=mj({anchorOrigin:c,color:g,overlap:m,variant:S,badgeContent:b}),R=k||null==C&&"dot"!==S,{color:P=g,overlap:N=m,anchorOrigin:j=c,variant:O=S}=R?T:l,D="dot"!==O?I:void 0,M=(0,De.A)({},l,{badgeContent:C,invisible:R,max:E,displayValue:D,showZero:_,anchorOrigin:j,color:P,overlap:N,variant:O}),L=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=e,a={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${(0,pT.A)(n.vertical)}${(0,pT.A)(n.horizontal)}`,`anchorOrigin${(0,pT.A)(n.vertical)}${(0,pT.A)(n.horizontal)}${(0,pT.A)(i)}`,`overlap${(0,pT.A)(i)}`,"default"!==t&&`color${(0,pT.A)(t)}`]};return(0,dT.A)(a,vj,s)})(M),F=null!=(n=null!=(r=null==w?void 0:w.root)?r:h.Root)?n:wj,z=null!=(i=null!=(o=null==w?void 0:w.badge)?o:h.Badge)?i:xj,$=null!=(s=null==x?void 0:x.root)?s:p.root,U=null!=(a=null==x?void 0:x.badge)?a:p.badge,B=rP({elementType:F,externalSlotProps:$,externalForwardedProps:A,additionalProps:{ref:t,as:d},ownerState:M,className:(0,ht.A)(null==$?void 0:$.className,L.root,u)}),V=rP({elementType:z,externalSlotProps:U,ownerState:M,className:(0,ht.A)(L.badge,null==U?void 0:U.className)});return(0,$e.jsxs)(F,(0,De.A)({},B,{children:[f,(0,$e.jsx)(z,(0,De.A)({},V,{children:D}))]}))})),Sj=_j;var Aj=n(7328);function Cj(e){return(0,gT.Ay)("MuiListItem",e)}const kj=(0,bt.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function Ej(e){return(0,gT.Ay)("MuiListItemButton",e)}const Ij=(0,bt.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Tj(e){return(0,gT.Ay)("MuiListItemSecondaryAction",e)}(0,bt.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const Rj=["className"],Pj=(0,hT.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),Nj=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=n,o=(0,Me.A)(n,Rj),s=r.useContext(oP),a=(0,De.A)({},n,{disableGutters:s.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,dT.A)(r,Tj,n)})(a);return(0,$e.jsx)(Pj,(0,De.A)({className:(0,ht.A)(l.root,i),ownerState:a,ref:t},o))}));Nj.muiName="ListItemSecondaryAction";const jj=Nj,Oj=["className"],Dj=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Mj=(0,hT.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,De.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${Ij.root}`]:{paddingRight:48}},{[`&.${kj.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${kj.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${kj.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${kj.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${kj.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Lj=(0,hT.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Fj=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:s=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:w,selected:x=!1,slotProps:_={},slots:S={}}=n,A=(0,Me.A)(n.ContainerProps,Oj),C=(0,Me.A)(n,Dj),k=r.useContext(oP),E=r.useMemo((()=>({dense:f||k.dense||!1,alignItems:i,disableGutters:g})),[i,k.dense,f,g]),I=r.useRef(null);(0,hP.A)((()=>{o&&I.current&&I.current.focus()}),[o]);const T=r.Children.toArray(a),R=T.length&&(0,Aj.A)(T[T.length-1],["ListItemSecondaryAction"]),P=(0,De.A)({},n,{alignItems:i,autoFocus:o,button:s,dense:E.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:R,selected:x}),N=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,dT.A)(d,Cj,r)})(P),j=(0,oR.A)(I,t),O=S.root||u.Root||Mj,D=_.root||d.root||{},M=(0,De.A)({className:(0,ht.A)(N.root,D.className,l),disabled:m},C);let L=c||"li";return s&&(M.component=c||"div",M.focusVisibleClassName=(0,ht.A)(kj.focusVisible,b),L=LR),R?(L=M.component||c?L:"div","li"===h&&("li"===L?L="div":"li"===M.component&&(M.component="div")),(0,$e.jsx)(oP.Provider,{value:E,children:(0,$e.jsxs)(Lj,(0,De.A)({as:h,className:(0,ht.A)(N.container,p),ref:j,ownerState:P},A,{children:[(0,$e.jsx)(O,(0,De.A)({},D,!MT(O)&&{as:L,ownerState:(0,De.A)({},P,D.ownerState)},M,{children:T})),T.pop()]}))})):(0,$e.jsx)(oP.Provider,{value:E,children:(0,$e.jsxs)(O,(0,De.A)({},D,{as:L,ref:j},!MT(O)&&{ownerState:(0,De.A)({},P,D.ownerState)},M,{children:[T,w&&(0,$e.jsx)(jj,{children:w})]}))})}));function zj(e){return(0,gT.Ay)("MuiListItemAvatar",e)}(0,bt.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const $j=["className"],Uj=(0,hT.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,De.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),Bj=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItemAvatar"}),{className:i}=n,o=(0,Me.A)(n,$j),s=r.useContext(oP),a=(0,De.A)({},n,{alignItems:s.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,dT.A)(r,zj,n)})(a);return(0,$e.jsx)(Uj,(0,De.A)({className:(0,ht.A)(l.root,i),ownerState:a,ref:t},o))})),Vj=(0,NT.A)((0,$e.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications");var Wj={};function qj(e){return qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qj(e)}function Hj(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Kj(e){Hj(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===qj(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Gj(e,t){Hj(2,arguments);var n=Kj(e),r=Kj(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Yj(e){Hj(1,arguments);var t=Kj(e);return function(e){Hj(1,arguments);var t=Kj(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){Hj(1,arguments);var t=Kj(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function Qj(e,t){Hj(2,arguments);var n,r=Kj(e),i=Kj(t),o=Gj(r,i),s=Math.abs(function(e,t){Hj(2,arguments);var n=Kj(e),r=Kj(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(s<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);var a=Gj(r,i)===-o;Yj(Kj(e))&&1===s&&1===Gj(e,i)&&(a=!1),n=o*(s-Number(a))}return 0===n?0:n}var Xj={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function Jj(e,t,n){Hj(2,arguments);var r,i=function(e,t){return Hj(2,arguments),Kj(e).getTime()-Kj(t).getTime()}(e,t)/1e3;return((r=null===n||void 0===n?void 0:n.roundingMethod)?Xj[r]:Xj.trunc)(i)}var Zj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const eO=function(e,t,n){var r,i=Zj[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function tO(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var nO={date:tO({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tO({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tO({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var rO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function iO(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function oO(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var s,a=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(a)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(a)}));return s=e.valueCallback?e.valueCallback(c):c,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(a.length)}}}var sO;const aO={code:"en-US",formatDistance:eO,formatLong:nO,formatRelative:function(e,t,n,r){return rO[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:iO({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:iO({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:iO({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:iO({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:iO({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(sO={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(sO.matchPattern);if(!n)return null;var r=n[0],i=e.match(sO.parsePattern);if(!i)return null;var o=sO.valueCallback?sO.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:oO({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:oO({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:oO({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:oO({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:oO({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function lO(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function cO(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var uO=43200;function dO(e,t,n){var r,i;Hj(2,arguments);var o=Wj,s=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:o.locale)&&void 0!==r?r:aO;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Gj(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var l,c,u=lO(lO({},n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:a});a>0?(l=Kj(t),c=Kj(e)):(l=Kj(e),c=Kj(t));var d,h=Jj(c,l),p=(cO(c)-cO(l))/1e3,f=Math.round((h-p)/60);if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,u):h<10?s.formatDistance("lessThanXSeconds",10,u):h<20?s.formatDistance("lessThanXSeconds",20,u):h<40?s.formatDistance("halfAMinute",0,u):h<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):0===f?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",f,u);if(f<45)return s.formatDistance("xMinutes",f,u);if(f<90)return s.formatDistance("aboutXHours",1,u);if(f<1440){var m=Math.round(f/60);return s.formatDistance("aboutXHours",m,u)}if(f<2520)return s.formatDistance("xDays",1,u);if(f<uO){var g=Math.round(f/1440);return s.formatDistance("xDays",g,u)}if(f<86400)return d=Math.round(f/uO),s.formatDistance("aboutXMonths",d,u);if((d=Qj(c,l))<12){var v=Math.round(f/uO);return s.formatDistance("xMonths",v,u)}var y=d%12,b=Math.floor(d/12);return y<3?s.formatDistance("aboutXYears",b,u):y<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}function hO(e,t){return Hj(1,arguments),dO(e,Date.now(),t)}const pO=()=>{const{notifications:e,unreadCount:t,markAsRead:n,markAllAsRead:i}=rT(),[o,s]=(0,r.useState)(null),a=()=>{s(null)};return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(BR,{color:"inherit",onClick:e=>{s(e.currentTarget)},sx:{position:"relative",color:"black","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,$e.jsx)(Sj,{badgeContent:t,color:"error",children:(0,$e.jsx)(Vj,{})})}),(0,$e.jsxs)(zN,{anchorEl:o,open:Boolean(o),onClose:a,PaperProps:{sx:{mt:1,width:360,maxHeight:480}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,$e.jsxs)(_t,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$e.jsx)(iR,{variant:"h6",children:"Notifications"}),t>0&&(0,$e.jsx)(tP,{size:"small",onClick:async()=>{await i()},children:"Mark all as read"})]}),(0,$e.jsx)(aj,{}),(0,$e.jsx)(cP,{children:0===e.length?(0,$e.jsx)(Fj,{children:(0,$e.jsx)(nj,{primary:"No notifications",secondary:"You're all caught up!",sx:{textAlign:"center"}})}):e.slice(0,5).map((e=>(0,$e.jsxs)(Fj,{component:Re,to:e.link,onClick:()=>(async e=>{await n(e.id),a()})(e),sx:{backgroundColor:e.read?"transparent":"action.hover",textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"action.hover"}},children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.senderAvatar,alt:e.senderName})}),(0,$e.jsx)(nj,{primary:e.content,secondary:hO(e.timestamp.toDate(),{addSuffix:!0}),sx:{"& .MuiListItemText-primary":{fontWeight:e.read?"normal":"bold"}}})]},e.id)))}),(0,$e.jsx)(aj,{}),(0,$e.jsx)(_t,{sx:{p:1},children:(0,$e.jsx)(tP,{fullWidth:!0,component:Re,to:"/notifications",onClick:a,sx:{textDecoration:"none"},children:"View All Notifications"})})]})]})},fO=(QE(),()=>{const e=ne(),[t]=uT(WE),[n]=function(e){var t=(0,r.useState)(),n=t[0],i=t[1],o=(0,r.useState)(!1),s=o[0],a=o[1],l=(0,r.useCallback)((function(){return oT(void 0,void 0,void 0,(function(){var t;return sT(this,(function(n){switch(n.label){case 0:a(!0),i(void 0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,e.signOut()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),i(t),[2,!1];case 4:return a(!1),[7];case 5:return[2]}}))}))}),[e]);return[l,s,n]}(WE),[i,o]=(0,r.useState)(null),{currentUser:s}=ZI(),a=()=>{o(null)},l=t=>{e(t),a()};return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)(kT,{position:"static",elevation:0,sx:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none",borderBottom:"none",padding:"0 24px"},children:(0,$e.jsxs)(PT,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",minHeight:"auto"},disableGutters:!0,children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,$e.jsx)(XT,{src:"/logo.png",alt:"Side Eye",sx:{width:40,height:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>e("/")}),(0,$e.jsx)(iR,{variant:"h5",component:"div",sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main","&:hover":{opacity:.8}},onClick:()=>e("/"),children:"SideEye"})]}),(0,$e.jsx)(_t,{sx:{display:"flex",alignItems:"center",gap:2},children:t?(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(BR,{color:"inherit",onClick:()=>e("/"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,$e.jsx)(lj,{})}),(0,$e.jsx)(pO,{}),(0,$e.jsx)(BR,{color:"inherit",onClick:e=>{o(e.currentTarget)},sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,$e.jsx)(cj,{})})]}):(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(tP,{color:"inherit",onClick:()=>e("/login"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Login"}),(0,$e.jsx)(tP,{color:"inherit",onClick:()=>e("/register"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Register"})]})}),(0,$e.jsxs)(zN,{anchorEl:i,open:Boolean(i),onClose:a,sx:{"& .MuiPaper-root":{borderRadius:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",minWidth:200,border:"none"}},children:[(0,$e.jsxs)(QN,{onClick:()=>l("/side-rooms"),children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(uj,{})}),(0,$e.jsx)(nj,{primary:"Side Rooms"})]}),(0,$e.jsxs)(QN,{onClick:()=>l("/discover"),children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(dj,{})}),(0,$e.jsx)(nj,{primary:"Discover"})]}),(0,$e.jsx)(aj,{}),(0,$e.jsxs)(QN,{onClick:()=>l("/settings"),children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(hj,{})}),(0,$e.jsx)(nj,{primary:"Settings"})]}),t&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(aj,{}),(0,$e.jsxs)(QN,{onClick:()=>l("/profile"),children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(pj,{})}),(0,$e.jsx)(nj,{children:"Profile"})]}),(0,$e.jsxs)(QN,{onClick:async()=>{await n(),a()},children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(fj,{})}),(0,$e.jsx)(nj,{children:"Logout"})]})]})]})]})})})});var mO=n(7598);function gO(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,VR.A)(t.components[n].defaultProps,r):r}function vO(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=ot(r);i&&(o=o[i]||o);return gO({theme:o,name:n,props:t})}var yO=n(9172);const bO=["ownerState"],wO=["variants"],xO=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function _O(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const SO=(0,rt.A)(),AO=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function CO(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function kO(e){return e?(t,n)=>n[e]:null}function EO(e,t){let{ownerState:n}=t,r=(0,Me.A)(t,bO);const i="function"===typeof e?e((0,De.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>EO(e,(0,De.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Me.A)(i,wO);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,De.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,De.A)({ownerState:n},r,n)):e.style))})),t}return i}const IO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=SO,rootShouldForwardProp:r=_O,slotShouldForwardProp:i=_O}=e,o=e=>(0,ft.A)((0,De.A)({},e,{theme:CO((0,De.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,pt.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=kO(AO(l))}=s,h=(0,Me.A)(s,xO),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,f=u||!1;let m=_O;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,pt.default)(e,(0,De.A)({shouldForwardProp:m,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,yO.Q)(e)?r=>EO(e,(0,De.A)({},r,{theme:CO({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];a&&d&&u.push((e=>{const r=CO((0,De.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=EO(i,(0,De.A)({},e,{theme:r}))})),d(e,o)})),a&&!p&&u.push((e=>{var r;const i=CO((0,De.A)({},e,{defaultTheme:n,themeId:t}));return EO({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,De.A)({},e,{theme:i}))})),f||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),TO=["className","component","disableGutters","fixed","maxWidth","classes"],RO=(0,rt.A)(),PO=IO("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,mO.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),NO=e=>vO({props:e,name:"MuiContainer",defaultTheme:RO});const jO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=PO,useThemeProps:n=NO,componentName:i="MuiContainer"}=e,o=t((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})}));return r.forwardRef((function(e,t){const r=n(e),{className:s,component:a="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=r,d=(0,Me.A)(r,TO),h=(0,De.A)({},r,{component:a,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,s={root:["root",o&&`maxWidth${(0,mO.A)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,dT.A)(s,(e=>(0,gT.Ay)(t,e)),n)})(h,i);return(0,$e.jsx)(o,(0,De.A)({as:a,ownerState:h,className:(0,ht.A)(p.root,s),ref:t},d))}))}({createStyledComponent:(0,hT.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,pT.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,tt.b)({props:e,name:"MuiContainer"})});function OO(e){return(0,gT.Ay)("MuiCircularProgress",e)}(0,bt.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const DO=["className","color","disableShrink","size","style","thickness","value","variant"];let MO,LO,FO,zO,$O=e=>e;const UO=44,BO=(0,vR.i7)(MO||(MO=$O`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),VO=(0,vR.i7)(LO||(LO=$O`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),WO=(0,hT.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,pT.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,vR.AH)(FO||(FO=$O`
      animation: ${0} 1.4s linear infinite;
    `),BO)})),qO=(0,hT.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),HO=(0,hT.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,pT.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,vR.AH)(zO||(zO=$O`
      animation: ${0} 1.4s ease-in-out infinite;
    `),VO)})),KO=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:a,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Me.A)(n,DO),h=(0,De.A)({},n,{color:i,disableShrink:o,size:s,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${(0,pT.A)(r)}`],svg:["svg"],circle:["circle",`circle${(0,pT.A)(n)}`,i&&"circleDisableShrink"]};return(0,dT.A)(o,OO,t)})(h),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((UO-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,$e.jsx)(WO,(0,De.A)({className:(0,ht.A)(p.root,r),style:(0,De.A)({width:s,height:s},m,a),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,$e.jsx)(qO,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,$e.jsx)(HO,{className:p.circle,style:f,ownerState:h,cx:UO,cy:UO,r:(UO-l)/2,fill:"none",strokeWidth:l})})}))})),GO=KO;function YO(e){return(0,gT.Ay)("MuiAlert",e)}const QO=(0,bt.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),XO=(0,NT.A)((0,$e.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),JO=(0,NT.A)((0,$e.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ZO=(0,NT.A)((0,$e.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),eD=(0,NT.A)((0,$e.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),tD=(0,NT.A)((0,$e.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),nD=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],rD=(0,hT.Ay)(xT,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,pT.A)(n.color||n.severity)}`]]}})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?fT.e$:fT.a,r="light"===t.palette.mode?fT.a:fT.e$;return(0,De.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${QO.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${QO.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,De.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})})),iD=(0,hT.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),oD=(0,hT.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),sD=(0,hT.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),aD={success:(0,$e.jsx)(XO,{fontSize:"inherit"}),warning:(0,$e.jsx)(JO,{fontSize:"inherit"}),error:(0,$e.jsx)(ZO,{fontSize:"inherit"}),info:(0,$e.jsx)(eD,{fontSize:"inherit"})},lD=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:s="Close",color:a,components:l={},componentsProps:c={},icon:u,iconMapping:d=aD,onClose:h,role:p="alert",severity:f="success",slotProps:m={},slots:g={},variant:v="standard"}=n,y=(0,Me.A)(n,nD),b=(0,De.A)({},n,{color:a,severity:f,variant:v,colorSeverity:a||f}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`color${(0,pT.A)(n||r)}`,`${t}${(0,pT.A)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,dT.A)(o,YO,i)})(b),x={slots:(0,De.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,De.A)({},c,m)},[_,S]=qT("closeButton",{elementType:BR,externalForwardedProps:x,ownerState:b}),[A,C]=qT("closeIcon",{elementType:tD,externalForwardedProps:x,ownerState:b});return(0,$e.jsxs)(rD,(0,De.A)({role:p,elevation:0,ownerState:b,className:(0,ht.A)(w.root,o),ref:t},y,{children:[!1!==u?(0,$e.jsx)(iD,{ownerState:b,className:w.icon,children:u||d[f]||aD[f]}):null,(0,$e.jsx)(oD,{ownerState:b,className:w.message,children:i}),null!=r?(0,$e.jsx)(sD,{ownerState:b,className:w.action,children:r}):null,null==r&&h?(0,$e.jsx)(sD,{ownerState:b,className:w.action,children:(0,$e.jsx)(_,(0,De.A)({size:"small","aria-label":s,title:s,color:"inherit",onClick:h},S,{children:(0,$e.jsx)(A,(0,De.A)({fontSize:"small"},C))}))}):null]}))})),cD=lD;function uD(e){return e.substring(2).toLowerCase()}function dD(e){const{children:t,disableReactTree:n=!1,mouseEvent:i="onClick",onClickAway:o,touchEvent:s="onTouchEnd"}=e,a=r.useRef(!1),l=r.useRef(null),c=r.useRef(!1),u=r.useRef(!1);r.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,DT.A)(_P(t),l),h=(0,rN.A)((e=>{const t=u.current;u.current=!1;const r=(0,UP.A)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(a.current)return void(a.current=!1);let i;i=e.composedPath?e.composedPath().indexOf(l.current)>-1:!r.documentElement.contains(e.target)||l.current.contains(e.target),i||!n&&t||o(e)})),p=e=>n=>{u.current=!0;const r=t.props[e];r&&r(n)},f={ref:d};return!1!==s&&(f[s]=p(s)),r.useEffect((()=>{if(!1!==s){const e=uD(s),t=(0,UP.A)(l.current),n=()=>{a.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,s]),!1!==i&&(f[i]=p(i)),r.useEffect((()=>{if(!1!==i){const e=uD(i),t=(0,UP.A)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,i]),(0,$e.jsx)(r.Fragment,{children:r.cloneElement(t,f)})}function hD(e){return(0,gT.Ay)("MuiCard",e)}(0,bt.A)("MuiCard",["root"]);const pD=["className","raised"],fD=(0,hT.Ay)(xT,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),mD=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,Me.A)(n,pD),s=(0,De.A)({},n,{raised:i}),a=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},hD,t)})(s);return(0,$e.jsx)(fD,(0,De.A)({className:(0,ht.A)(a.root,r),elevation:i?8:void 0,ref:t,ownerState:s},o))}));function gD(e){return(0,gT.Ay)("MuiCardContent",e)}(0,bt.A)("MuiCardContent",["root"]);const vD=["className","component"],yD=(0,hT.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),bD=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,Me.A)(n,vD),s=(0,De.A)({},n,{component:i}),a=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},gD,t)})(s);return(0,$e.jsx)(yD,(0,De.A)({as:i,className:(0,ht.A)(a.root,r),ownerState:s,ref:t},o))}));var wD=n(5844),xD=n(7868),_D=n(3468);const SD=["onChange","maxRows","minRows","style","value"];function AD(e){return parseInt(e,10)||0}const CD={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function kD(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const ED=r.forwardRef((function(e,t){const{onChange:n,maxRows:i,minRows:o=1,style:s,value:a}=e,l=(0,Me.A)(e,SD),{current:c}=r.useRef(null!=a),u=r.useRef(null),d=(0,DT.A)(t,u),h=r.useRef(null),p=r.useRef(null),f=r.useCallback((()=>{const t=u.current,n=p.current;if(!t||!n)return;const r=(0,oN.A)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const s=r.boxSizing,a=AD(r.paddingBottom)+AD(r.paddingTop),l=AD(r.borderBottomWidth)+AD(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;o&&(h=Math.max(Number(o)*d,h)),i&&(h=Math.min(Number(i)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===s?a+l:0),overflowing:Math.abs(h-c)<=1}}),[i,o,e.placeholder]),m=(0,rN.A)((()=>{const e=u.current,t=f();if(!e||!t||kD(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=r.useCallback((()=>{const e=u.current,t=f();if(!e||!t||kD(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[f]),v=r.useRef(-1);(0,HP.A)((()=>{const e=(0,_D.A)(g),t=null==u?void 0:u.current;if(!t)return;const n=(0,oN.A)(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{m()&&(r.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[f,g,m]),(0,HP.A)((()=>{g()}));return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)("textarea",(0,De.A)({value:a,onChange:e=>{c||g(),n&&n(e)},ref:d,rows:o,style:s},l)),(0,$e.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,De.A)({},CD,s,{paddingTop:0,paddingBottom:0})})]})}));function ID(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const TD=r.createContext(void 0);function RD(){return r.useContext(TD)}function PD(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function ND(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(PD(e.value)&&""!==e.value||t&&PD(e.defaultValue)&&""!==e.defaultValue)}function jD(e){return(0,gT.Ay)("MuiInputBase",e)}const OD=(0,bt.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),DD=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],MD=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,pT.A)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},LD=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},FD=(0,hT.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:MD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${OD.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,De.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),zD=(0,hT.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:LD})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,De.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,De.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${OD.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${OD.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),$D=(0,$e.jsx)(lt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),UD=r.forwardRef((function(e,t){var n;const i=(0,tt.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:w,minRows:x,multiline:_=!1,name:S,onBlur:A,onChange:C,onClick:k,onFocus:E,onKeyDown:I,onKeyUp:T,placeholder:R,readOnly:P,renderSuffix:N,rows:j,slotProps:O={},slots:D={},startAdornment:M,type:L="text",value:F}=i,z=(0,Me.A)(i,DD),$=null!=y.value?y.value:F,{current:U}=r.useRef(null!=$),B=r.useRef(),V=r.useCallback((e=>{0}),[]),W=(0,oR.A)(B,b,y.ref,V),[q,H]=r.useState(!1),K=RD();const G=ID({props:i,muiFormControl:K,states:["color","disabled","error","hiddenLabel","size","required","filled"]});G.focused=K?K.focused:q,r.useEffect((()=>{!K&&h&&q&&(H(!1),A&&A())}),[K,h,q,A]);const Y=K&&K.onFilled,Q=K&&K.onEmpty,X=r.useCallback((e=>{ND(e)?Y&&Y():Q&&Q()}),[Y,Q]);(0,hP.A)((()=>{U&&X({value:$})}),[$,X,U]);r.useEffect((()=>{X(B.current)}),[]);let J=v,Z=y;_&&"input"===J&&(Z=j?(0,De.A)({type:void 0,minRows:j,maxRows:j},Z):(0,De.A)({type:void 0,maxRows:w,minRows:x},Z),J=ED);r.useEffect((()=>{K&&K.setAdornedStart(Boolean(M))}),[K,M]);const ee=(0,De.A)({},i,{color:G.color||"primary",disabled:G.disabled,endAdornment:f,error:G.error,focused:G.focused,formControl:K,fullWidth:m,hiddenLabel:G.hiddenLabel,multiline:_,size:G.size,startAdornment:M,type:L}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,m={root:["root",`color${(0,pT.A)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&`size${(0,pT.A)(h)}`,u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,dT.A)(m,jD,t)})(ee),ne=D.root||c.Root||FD,re=O.root||u.root||{},ie=D.input||c.Input||zD;return Z=(0,De.A)({},Z,null!=(n=O.input)?n:u.input),(0,$e.jsxs)(r.Fragment,{children:[!p&&$D,(0,$e.jsxs)(ne,(0,De.A)({},re,!MT(ne)&&{ownerState:(0,De.A)({},ee,re.ownerState)},{ref:t,onClick:e=>{B.current&&e.currentTarget===e.target&&B.current.focus(),k&&k(e)}},z,{className:(0,ht.A)(te.root,re.className,l,P&&"MuiInputBase-readOnly"),children:[M,(0,$e.jsx)(TD.Provider,{value:null,children:(0,$e.jsx)(ie,(0,De.A)({ownerState:ee,"aria-invalid":G.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:d,disabled:G.disabled,id:g,onAnimationStart:e=>{X("mui-auto-fill-cancel"===e.animationName?B.current:{value:"x"})},name:S,placeholder:R,readOnly:P,required:G.required,rows:j,value:$,onKeyDown:I,onKeyUp:T,type:L},Z,!MT(ie)&&{as:J,ownerState:(0,De.A)({},ee,Z.ownerState)},{ref:W,className:(0,ht.A)(te.input,Z.className,P&&"MuiInputBase-readOnly"),onBlur:e=>{A&&A(e),y.onBlur&&y.onBlur(e),K&&K.onBlur?K.onBlur(e):H(!1)},onChange:function(e){if(!U){const t=e.target||B.current;if(null==t)throw new Error((0,xD.A)(1));X({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{G.disabled?e.stopPropagation():(E&&E(e),y.onFocus&&y.onFocus(e),K&&K.onFocus?K.onFocus(e):H(!0))}}))}),f,N?N((0,De.A)({},G,{startAdornment:M})):null]}))]})})),BD=UD;function VD(e){return(0,gT.Ay)("MuiInput",e)}const WD=(0,De.A)({},OD,(0,bt.A)("MuiInput",["root","underline","input"])),qD=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],HD=(0,hT.Ay)(FD,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...MD(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),(0,De.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${WD.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${WD.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${WD.disabled}, .${WD.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${WD.disabled}:before`]:{borderBottomStyle:"dotted"}})})),KD=(0,hT.Ay)(zD,{name:"MuiInput",slot:"Input",overridesResolver:LD})({}),GD=r.forwardRef((function(e,t){var n,r,i,o;const s=(0,tt.b)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=s,g=(0,Me.A)(s,qD),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,dT.A)(r,VD,t);return(0,De.A)({},t,i)})(s),y={root:{ownerState:{disableUnderline:a}}},b=(null!=p?p:c)?(0,yO.A)(null!=p?p:c,y):y,w=null!=(n=null!=(r=f.root)?r:l.Root)?n:HD,x=null!=(i=null!=(o=f.input)?o:l.Input)?i:KD;return(0,$e.jsx)(BD,(0,De.A)({slots:{root:w,input:x},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:v}))}));GD.muiName="Input";const YD=GD;function QD(e){return(0,gT.Ay)("MuiFilledInput",e)}const XD=(0,De.A)({},OD,(0,bt.A)("MuiFilledInput",["root","underline","input"])),JD=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],ZD=(0,hT.Ay)(FD,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...MD(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,De.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${XD.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${XD.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${XD.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${XD.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${XD.disabled}, .${XD.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${XD.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,De.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),eM=(0,hT.Ay)(zD,{name:"MuiFilledInput",slot:"Input",overridesResolver:LD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),tM=r.forwardRef((function(e,t){var n,r,i,o;const s=(0,tt.b)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=s,m=(0,Me.A)(s,JD),g=(0,De.A)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:f}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,dT.A)(r,QD,t);return(0,De.A)({},t,i)})(s),y={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,yO.A)(y,null!=h?h:l):y,w=null!=(n=null!=(r=p.root)?r:a.Root)?n:ZD,x=null!=(i=null!=(o=p.input)?o:a.Input)?i:eM;return(0,$e.jsx)(BD,(0,De.A)({slots:{root:w,input:x},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},m,{classes:v}))}));tM.muiName="Input";const nM=tM;var rM;const iM=["children","classes","className","label","notched"],oM=(0,hT.Ay)("fieldset",{shouldForwardProp:WR.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sM=(0,hT.Ay)("legend",{shouldForwardProp:WR.A})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,De.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function aM(e){return(0,gT.Ay)("MuiOutlinedInput",e)}const lM=(0,De.A)({},OD,(0,bt.A)("MuiOutlinedInput",["root","notchedOutline","input"])),cM=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],uM=(0,hT.Ay)(FD,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:MD})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,De.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${lM.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${lM.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${lM.focused} .${lM.notchedOutline}`]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},[`&.${lM.error} .${lM.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${lM.disabled} .${lM.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,De.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),dM=(0,hT.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,Me.A)(e,iM),o=null!=n&&""!==n,s=(0,De.A)({},e,{notched:r,withLabel:o});return(0,$e.jsx)(oM,(0,De.A)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,$e.jsx)(sM,{ownerState:s,children:o?(0,$e.jsx)("span",{children:n}):rM||(rM=(0,$e.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),hM=(0,hT.Ay)(zD,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:LD})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),pM=r.forwardRef((function(e,t){var n,i,o,s,a;const l=(0,tt.b)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,v=(0,Me.A)(l,cM),y=(e=>{const{classes:t}=e,n=(0,dT.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},aM,t);return(0,De.A)({},t,n)})(l),b=RD(),w=ID({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=(0,De.A)({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:g}),_=null!=(n=null!=(i=m.root)?i:c.Root)?n:uM,S=null!=(o=null!=(s=m.input)?s:c.Input)?o:hM;return(0,$e.jsx)(BD,(0,De.A)({slots:{root:_,input:S},renderSuffix:e=>(0,$e.jsx)(dM,{ownerState:x,className:y.notchedOutline,label:null!=h&&""!==h&&w.required?a||(a=(0,$e.jsxs)(r.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:t,type:g},v,{classes:(0,De.A)({},y,{notchedOutline:null})}))}));pM.muiName="Input";const fM=pM;function mM(e){return(0,gT.Ay)("MuiFormLabel",e)}const gM=(0,bt.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),vM=["children","className","color","component","disabled","error","filled","focused","required"],yM=(0,hT.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${gM.focused}`]:{color:(t.vars||t).palette[n.color].main},[`&.${gM.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${gM.error}`]:{color:(t.vars||t).palette.error.main}})})),bM=(0,hT.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${gM.error}`]:{color:(t.vars||t).palette.error.main}}})),wM=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,Me.A)(n,vM),a=ID({props:n,muiFormControl:RD(),states:["color","required","focused","disabled","error","filled"]}),l=(0,De.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root",`color${(0,pT.A)(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,dT.A)(l,mM,t)})(l);return(0,$e.jsxs)(yM,(0,De.A)({as:o,ownerState:l,className:(0,ht.A)(c.root,i),ref:t},s,{children:[r,a.required&&(0,$e.jsxs)(bM,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))}));function xM(e){return(0,gT.Ay)("MuiInputLabel",e)}(0,bt.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const _M=["disableAnimation","margin","shrink","variant","className"],SM=(0,hT.Ay)(wM,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${gM.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,De.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),AM=r.forwardRef((function(e,t){const n=(0,tt.b)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,Me.A)(n,_M),a=RD();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=ID({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,De.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${(0,pT.A)(r)}`,s],asterisk:[a&&"asterisk"]},c=(0,dT.A)(l,xM,t);return(0,De.A)({},t,c)})(u);return(0,$e.jsx)(SM,(0,De.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,ht.A)(d.root,o)},s,{classes:d}))})),CM=AM;function kM(e){return(0,gT.Ay)("MuiFormControl",e)}(0,bt.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const EM=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],IM=(0,hT.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,t[`margin${(0,pT.A)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),TM=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=n,v=(0,Me.A)(n,EM),y=(0,De.A)({},n,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,pT.A)(n)}`,r&&"fullWidth"]};return(0,dT.A)(i,kM,t)})(y),[w,x]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{if(!(0,Aj.A)(t,["Input","Select"]))return;const n=(0,Aj.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[_,S]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{(0,Aj.A)(t,["Input","Select"])&&(ND(t.props,!0)||ND(t.props.inputProps,!0))&&(e=!0)})),e})),[A,C]=r.useState(!1);l&&A&&C(!1);const k=void 0===u||l?A:u;let E;const I=r.useMemo((()=>({adornedStart:w,setAdornedStart:x,color:s,disabled:l,error:c,filled:_,focused:k,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{C(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{C(!0)},registerEffect:E,required:f,variant:g})),[w,s,l,c,_,k,d,h,E,f,m,g]);return(0,$e.jsx)(TD.Provider,{value:I,children:(0,$e.jsx)(IM,(0,De.A)({as:a,ownerState:y,className:(0,ht.A)(b.root,o),ref:t},v,{children:i}))})})),RM=TM;function PM(e){return(0,gT.Ay)("MuiFormHelperText",e)}const NM=(0,bt.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var jM;const OM=["children","className","component","disabled","error","filled","focused","margin","required","variant"],DM=(0,hT.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,pT.A)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${NM.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${NM.error}`]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),MM=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,Me.A)(n,OM),a=ID({props:n,muiFormControl:RD(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,De.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${(0,pT.A)(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,dT.A)(c,PM,t)})(l);return(0,$e.jsx)(DM,(0,De.A)({as:o,ownerState:l,className:(0,ht.A)(c.root,i),ref:t},s,{children:" "===r?jM||(jM=(0,$e.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))}));function LM(e){return(0,gT.Ay)("MuiNativeSelect",e)}const FM=(0,bt.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),zM=["className","disabled","error","IconComponent","inputRef","variant"],$M=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,De.A)({},n.vars?{backgroundColor:`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${FM.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},UM=(0,hT.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:WR.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${FM.multiple}`]:t.multiple}]}})($M),BM=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${FM.disabled}`]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},VM=(0,hT.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,pT.A)(n.variant)}`],n.open&&t.iconOpen]}})(BM),WM=r.forwardRef((function(e,t){const{className:n,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=(0,Me.A)(e,zM),u=(0,De.A)({},e,{disabled:i,variant:l,error:o}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${(0,pT.A)(n)}`,o&&"iconOpen",r&&"disabled"]};return(0,dT.A)(a,LM,t)})(u);return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)(UM,(0,De.A)({ownerState:u,className:(0,ht.A)(d.select,n),disabled:i,ref:a||t},c)),e.multiple?null:(0,$e.jsx)(VM,{as:s,ownerState:u,className:d.icon})]})})),qM=WM;var HM=n(7123),KM=n(4516);function GM(e){return(0,gT.Ay)("MuiSelect",e)}const YM=(0,bt.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var QM;const XM=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],JM=(0,hT.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${YM.select}`]:t.select},{[`&.${YM.select}`]:t[n.variant]},{[`&.${YM.error}`]:t.error},{[`&.${YM.multiple}`]:t.multiple}]}})($M,{[`&.${YM.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),ZM=(0,hT.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,pT.A)(n.variant)}`],n.open&&t.iconOpen]}})(BM),eL=(0,hT.Ay)("input",{shouldForwardProp:e=>(0,HM.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function tL(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function nL(e){return null==e||"string"===typeof e&&!e.trim()}const rL=r.forwardRef((function(e,t){var n;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:p,error:f=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:b,name:w,onBlur:x,onChange:_,onClose:S,onFocus:A,onOpen:C,open:k,readOnly:E,renderValue:I,SelectDisplayProps:T={},tabIndex:R,value:P,variant:N="standard"}=e,j=(0,Me.A)(e,XM),[O,D]=(0,KM.A)({controlled:P,default:d,name:"Select"}),[M,L]=(0,KM.A)({controlled:k,default:u,name:"Select"}),F=r.useRef(null),z=r.useRef(null),[$,U]=r.useState(null),{current:B}=r.useRef(null!=k),[V,W]=r.useState(),q=(0,oR.A)(t,g),H=r.useCallback((e=>{z.current=e,e&&U(e)}),[]),K=null==$?void 0:$.parentNode;r.useImperativeHandle(q,(()=>({focus:()=>{z.current.focus()},node:F.current,value:O})),[O]),r.useEffect((()=>{u&&M&&$&&!B&&(W(a?null:K.clientWidth),z.current.focus())}),[$,a]),r.useEffect((()=>{s&&z.current.focus()}),[s]),r.useEffect((()=>{if(!v)return;const e=(0,iP.A)(z.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&z.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const G=(e,t)=>{e?C&&C(t):S&&S(t),B||(W(a?null:K.clientWidth),L(e))},Y=r.Children.toArray(l),Q=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(O)?O.slice():[];const t=O.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),O!==n&&(D(n),_)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),_(i,e)}b||G(!1,t)}},X=null!==$&&M;let J,Z;delete j["aria-invalid"];const ee=[];let te=!1,ne=!1;(ND({value:O})||p)&&(I?J=I(O):te=!0);const re=Y.map((e=>{if(!r.isValidElement(e))return null;let t;if(b){if(!Array.isArray(O))throw new Error((0,xD.A)(2));t=O.some((t=>tL(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=tL(O,e.props.value),t&&te&&(Z=e.props.children);return t&&(ne=!0),r.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Q(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(J=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=V;!a&&B&&$&&(oe=K.clientWidth),ie="undefined"!==typeof R?R:h?null:0;const se=T.id||(w?`mui-component-select-${w}`:void 0),ae=(0,De.A)({},e,{variant:N,value:O,open:X,error:f}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${(0,pT.A)(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,dT.A)(a,GM,t)})(ae),ce=(0,De.A)({},y.PaperProps,null==(n=y.slotProps)?void 0:n.paper),ue=(0,wD.A)();return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)(JM,(0,De.A)({ref:H,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,se].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!E){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),G(!0,e))}},onMouseDown:h||E?null:e=>{0===e.button&&(e.preventDefault(),z.current.focus(),G(!0,e))},onBlur:e=>{!X&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:O,name:w}}),x(e))},onFocus:A},T,{ownerState:ae,className:(0,ht.A)(T.className,le.select,c),id:se,children:nL(J)?QM||(QM=(0,$e.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,$e.jsx)(eL,(0,De.A)({"aria-invalid":f,value:Array.isArray(O)?O.join(","):O,name:w,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(D(t.props.value),_&&_(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:s,ownerState:ae},j)),(0,$e.jsx)(ZM,{as:m,className:le.icon,ownerState:ae}),(0,$e.jsx)(zN,(0,De.A)({id:`menu-${w||""}`,anchorEl:K,open:X,onClose:e=>{G(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,De.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,De.A)({},y.slotProps,{paper:(0,De.A)({},ce,{style:(0,De.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),iL=rL,oL=(0,NT.A)((0,$e.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),sL=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],aL=["root"],lL={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,WR.A)(e)&&"variant"!==e,slot:"Root"},cL=(0,hT.Ay)(YD,lL)(""),uL=(0,hT.Ay)(fM,lL)(""),dL=(0,hT.Ay)(nM,lL)(""),hL=r.forwardRef((function(e,t){const n=(0,tt.b)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=oL,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:w,open:x,renderValue:_,SelectDisplayProps:S,variant:A="outlined"}=n,C=(0,Me.A)(n,sL),k=y?qM:iL,E=ID({props:n,muiFormControl:RD(),states:["variant","error"]}),I=E.variant||A,T=(0,De.A)({},n,{variant:I,classes:s}),R=(e=>{const{classes:t}=e;return t})(T),P=(0,Me.A)(R,aL),N=h||{standard:(0,$e.jsx)(cL,{ownerState:T}),outlined:(0,$e.jsx)(uL,{label:f,ownerState:T}),filled:(0,$e.jsx)(dL,{ownerState:T})}[I],j=(0,oR.A)(t,_P(N));return(0,$e.jsx)(r.Fragment,{children:r.cloneElement(N,(0,De.A)({inputComponent:k,inputProps:(0,De.A)({children:o,error:E.error,IconComponent:u,variant:I,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:x,renderValue:_,SelectDisplayProps:(0,De.A)({id:d},S)},p,{classes:p?(0,yO.A)(P,p.classes):P},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===I?{notched:!0}:{},{ref:j,className:(0,ht.A)(N.props.className,a,R.root)},!h&&{variant:I},C))})}));hL.muiName="Select";const pL=hL;function fL(e){return(0,gT.Ay)("MuiTextField",e)}(0,bt.A)("MuiTextField",["root"]);const mL=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],gL={standard:YD,filled:nM,outlined:fM},vL=(0,hT.Ay)(RM,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yL=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:b,maxRows:w,minRows:x,multiline:_=!1,name:S,onBlur:A,onChange:C,onFocus:k,placeholder:E,required:I=!1,rows:T,select:R=!1,SelectProps:P,type:N,value:j,variant:O="outlined"}=n,D=(0,Me.A)(n,mL),M=(0,De.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:_,required:I,select:R,variant:O}),L=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},fL,t)})(M);const F={};"outlined"===O&&(m&&"undefined"!==typeof m.shrink&&(F.notched=m.shrink),F.label=b),R&&(P&&P.native||(F.id=void 0),F["aria-describedby"]=void 0);const z=(0,wD.A)(f),$=p&&z?`${z}-helper-text`:void 0,U=b&&z?`${z}-label`:void 0,B=gL[O],V=(0,$e.jsx)(B,(0,De.A)({"aria-describedby":$,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:_,name:S,rows:T,maxRows:w,minRows:x,type:N,value:j,id:z,inputRef:y,onBlur:A,onChange:C,onFocus:k,placeholder:E,inputProps:g},F,v));return(0,$e.jsxs)(vL,(0,De.A)({className:(0,ht.A)(L.root,s),disabled:c,error:u,fullWidth:h,ref:t,required:I,color:a,variant:O,ownerState:M},D,{children:[null!=b&&""!==b&&(0,$e.jsx)(CM,(0,De.A)({htmlFor:z,id:U},m,{children:b})),R?(0,$e.jsx)(pL,(0,De.A)({"aria-describedby":$,id:z,labelId:U,value:j,input:V},P,{children:o})):V,p&&(0,$e.jsx)(MM,(0,De.A)({id:$},d,{children:p}))]}))})),bL=yL,wL=(0,NT.A)((0,$e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),xL=(0,NT.A)((0,$e.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),_L=(0,NT.A)([(0,$e.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,$e.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),SL=(0,NT.A)((0,$e.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8M12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4m3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"EmojiEmotions"),AL=["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83d\ude02","\ud83e\udd23","\ud83d\ude0a","\ud83d\ude07","\ud83d\ude42","\ud83d\ude43","\ud83d\ude09","\ud83d\ude0c","\ud83d\ude0d","\ud83e\udd70","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83d\ude0b","\ud83d\ude1b","\ud83d\ude1d","\ud83d\ude1c","\ud83e\udd2a","\ud83e\udd28","\ud83e\uddd0","\ud83e\udd13","\ud83d\ude0e","\ud83e\udd29","\ud83e\udd73","\ud83d\ude0f","\ud83d\ude12","\ud83d\ude1e","\ud83d\ude14","\ud83d\ude1f","\ud83d\ude15","\ud83d\ude41","\u2639\ufe0f","\ud83d\ude23"],CL=e=>{var t;let{onSubmit:n,user:i}=e;const[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(0),x=280,_=(0,r.useRef)(null),S=(0,r.useRef)(null);return(0,$e.jsx)(dD,{onClickAway:()=>{!v||o.trim()||a||y(!1)},children:(0,$e.jsxs)(_t,{sx:{position:"relative",mb:2},children:[v?(0,$e.jsx)(JP,{in:v,children:(0,$e.jsx)(xT,{ref:S,elevation:3,sx:{position:"fixed",bottom:24,right:24,width:400,maxWidth:"90vw",borderRadius:2,overflow:"hidden"},children:(0,$e.jsx)(mD,{children:(0,$e.jsxs)(bD,{children:[(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2},children:[(0,$e.jsx)(XT,{src:null===i||void 0===i?void 0:i.avatar,alt:(null===i||void 0===i?void 0:i.name)||"User",sx:{width:40,height:40},children:(null===i||void 0===i||null===(t=i.name)||void 0===t?void 0:t.charAt(0))||"U"}),(0,$e.jsx)(_t,{sx:{flex:1},children:(0,$e.jsxs)("form",{onSubmit:async e=>{var t;if(e.preventDefault(),(t=o).length>x?(g("Post cannot exceed 280 characters"),0):t.trim()||a||(g("Post cannot be empty"),0))try{f(!0),g(null),await n(o,a||void 0),s(""),l(null),u(null),w(0),y(!1)}catch(m){console.error("Error submitting post:",m),g("Failed to create post. Please try again.")}finally{f(!1)}},children:[(0,$e.jsx)(bL,{fullWidth:!0,multiline:!0,rows:3,placeholder:"What's on your mind?",value:o,onChange:e=>{const t=e.target.value;s(t),w(t.length),t.length>x?g("Post cannot exceed 280 characters"):g(null)},variant:"outlined",sx:{mb:2},autoFocus:!0,error:!!m,helperText:`${b}/280`}),c&&(0,$e.jsxs)(_t,{sx:{position:"relative",mb:2},children:[(0,$e.jsx)("img",{src:c,alt:"Preview",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px",objectFit:"contain"}}),(0,$e.jsx)(BR,{onClick:()=>{l(null),u(null),_.current&&(_.current.value=""),g(null)},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:(0,$e.jsx)(xL,{sx:{color:"white"}})})]}),(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$e.jsxs)(_t,{children:[(0,$e.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void g("Image size should be less than 5MB");if(!t.type.match(/image\/(jpeg|png|gif)/))return void g("Only JPEG, PNG, and GIF images are allowed");l(t),u(URL.createObjectURL(t)),g(null)}},style:{display:"none"},ref:_}),(0,$e.jsx)(BR,{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},children:(0,$e.jsx)(_L,{})}),(0,$e.jsx)(BR,{onClick:e=>{h(e.currentTarget)},children:(0,$e.jsx)(SL,{})})]}),(0,$e.jsx)(tP,{variant:"contained",type:"submit",disabled:!o.trim()&&!a||p,children:p?(0,$e.jsx)(GO,{size:24}):"Post"})]})]})})]}),m&&(0,$e.jsx)(cD,{severity:"error",sx:{mt:2},children:m})]})})})}):(0,$e.jsx)(BR,{onClick:()=>y(!0),sx:{position:"fixed",bottom:24,right:24,width:56,height:56,backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"},boxShadow:3},children:(0,$e.jsx)(wL,{})}),(0,$e.jsx)(TN,{open:Boolean(d),anchorEl:d,onClose:()=>{h(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,$e.jsx)(_t,{sx:{p:1,display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:1},children:AL.map((e=>(0,$e.jsx)(BR,{onClick:()=>(e=>{b+e.length>x?g("Adding this emoji would exceed the 280 character limit"):(s((t=>t+e)),w((t=>t+e.length)),h(null),g(null))})(e),sx:{fontSize:"1.5rem"},children:e},e)))})})]})})};function kL(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function EL(e){return parseFloat(e)}var IL=n(1188);function TL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,IL.A)(e,t,n)}function RL(e){if(e.type)return e;if("#"===e.charAt(0))return RL(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,xD.A)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,xD.A)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function PL(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function NL(e,t){return e=RL(e),t=TL(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,PL(e)}function jL(e){return(0,gT.Ay)("MuiSkeleton",e)}(0,bt.A)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const OL=["animation","className","component","height","style","variant","width"];let DL,ML,LL,FL,zL=e=>e;const $L=(0,vR.i7)(DL||(DL=zL`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),UL=(0,vR.i7)(ML||(ML=zL`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),BL=(0,hT.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const r=kL(t.shape.borderRadius)||"px",i=EL(t.shape.borderRadius);return(0,De.A)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:NL(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,vR.AH)(LL||(LL=zL`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),$L)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,vR.AH)(FL||(FL=zL`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),UL,(n.vars||n).palette.action.hover)})),VL=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:o="span",height:s,style:a,variant:l="text",width:c}=n,u=(0,Me.A)(n,OL),d=(0,De.A)({},n,{animation:r,component:o,variant:l,hasChildren:Boolean(u.children)}),h=(e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:s}=e,a={root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!s&&"heightAuto"]};return(0,dT.A)(a,jL,t)})(d);return(0,$e.jsx)(BL,(0,De.A)({as:o,ref:t,className:(0,ht.A)(h.root,i),ownerState:d},u,{style:(0,De.A)({width:c,height:s},a)}))})),WL=VL;function qL(e){return(0,gT.Ay)("MuiDialog",e)}const HL=(0,bt.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const KL=r.createContext({}),GL=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],YL=(0,hT.Ay)(nN,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),QL=(0,hT.Ay)(yN,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),XL=(0,hT.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,pT.A)(n.scroll)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),JL=(0,hT.Ay)(xT,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,pT.A)(n.scroll)}`],t[`paperWidth${(0,pT.A)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${HL.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`,[`&.${HL.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${HL.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),ZL=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiDialog"}),i=NP(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:v,onClose:y,open:b,PaperComponent:w=xT,PaperProps:x={},scroll:_="paper",TransitionComponent:S=JP,transitionDuration:A=o,TransitionProps:C}=n,k=(0,Me.A)(n,GL),E=(0,De.A)({},n,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:_}),I=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container",`scroll${(0,pT.A)(n)}`],paper:["paper",`paperScroll${(0,pT.A)(n)}`,`paperWidth${(0,pT.A)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,dT.A)(s,qL,t)})(E),T=r.useRef(),R=(0,wD.A)(a),P=r.useMemo((()=>({titleId:R})),[R]);return(0,$e.jsx)(QL,(0,De.A)({className:(0,ht.A)(I.root,d),closeAfterTransition:!0,components:{Backdrop:YL},componentsProps:{backdrop:(0,De.A)({transitionDuration:A,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:b,ref:t,onClick:e=>{v&&v(e),T.current&&(T.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:E},k,{children:(0,$e.jsx)(S,(0,De.A)({appear:!0,in:b,timeout:A,role:"presentation"},C,{children:(0,$e.jsx)(XL,{className:(0,ht.A)(I.container),onMouseDown:e=>{T.current=e.target===e.currentTarget},ownerState:E,children:(0,$e.jsx)(JL,(0,De.A)({as:w,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":R},x,{className:(0,ht.A)(I.paper,x.className),ownerState:E,children:(0,$e.jsx)(KL.Provider,{value:P,children:u})}))})}))}))}));function eF(e){return(0,gT.Ay)("MuiDialogTitle",e)}const tF=(0,bt.A)("MuiDialogTitle",["root"]),nF=["className","id"],rF=(0,hT.Ay)(iR,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),iF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiDialogTitle"}),{className:i,id:o}=n,s=(0,Me.A)(n,nF),a=n,l=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},eF,t)})(a),{titleId:c=o}=r.useContext(KL);return(0,$e.jsx)(rF,(0,De.A)({component:"h2",className:(0,ht.A)(l.root,i),ownerState:a,ref:t,variant:"h6",id:null!=o?o:c},s))}));function oF(e){return(0,gT.Ay)("MuiDialogContent",e)}(0,bt.A)("MuiDialogContent",["root","dividers"]);const sF=["className","dividers"],aF=(0,hT.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${tF.root} + &`]:{paddingTop:0}})})),lF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,Me.A)(n,sF),s=(0,De.A)({},n,{dividers:i}),a=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,dT.A)(r,oF,t)})(s);return(0,$e.jsx)(aF,(0,De.A)({className:(0,ht.A)(a.root,r),ownerState:s,ref:t},o))}));function cF(e){return(0,gT.Ay)("MuiDialogActions",e)}(0,bt.A)("MuiDialogActions",["root","spacing"]);const uF=["className","disableSpacing"],dF=(0,hT.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),hF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,Me.A)(n,uF),s=(0,De.A)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,dT.A)(r,cF,t)})(s);return(0,$e.jsx)(dF,(0,De.A)({className:(0,ht.A)(a.root,r),ownerState:s,ref:t},o))})),pF=e=>{let{following:t}=e;const{currentUser:n}=ZI(),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)([]),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null),_=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();v(e)}catch(e){console.error("Error initializing Firestore:",e),x("Failed to initialize database")}})()}),[]),(0,r.useEffect)((()=>{if(!n||!g)return;(async()=>{try{const e=await jw(Sb(g,"users",n.uid));e.exists()&&m(e.data())}catch(w){console.error("Error fetching user profile:",w),x("Failed to load user profile")}})(),(async()=>{try{const e=$w(fw(_b(g,"stories"),gw("authorId","in",[...t,n.uid]),bw("timestamp","desc")),(async e=>{try{const t=await Promise.all(e.docs.map((async e=>{var t;const n=e.data(),r=(await jw(Sb(g,"users",n.authorId))).data();return{id:e.id,imageUrl:n.imageUrl,author:{name:(null===r||void 0===r?void 0:r.name)||"Anonymous",avatar:(null===r||void 0===r?void 0:r.profilePic)||"",username:(null===r||void 0===r?void 0:r.username)||""},timestamp:(null===(t=n.timestamp)||void 0===t?void 0:t.toDate())||new Date}})));o(t)}catch(w){console.error("Error processing stories:",w),x("Failed to load stories")}}));return()=>e()}catch(w){console.error("Error setting up stories listener:",w),x("Failed to load stories")}})()}),[n,g,t]);const S=e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void x("Image size should be less than 5MB");if(!t.type.match(/image\/(jpeg|png|gif)/))return void x("Only JPEG, PNG, and GIF images are allowed");c(t),d(URL.createObjectURL(t)),x(null)}};return i.length||w?(0,$e.jsxs)(_t,{sx:{mb:3},children:[w&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:w}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2,overflowX:"auto",py:2,"&::-webkit-scrollbar":{display:"none"}},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80px",flexShrink:0},children:[(0,$e.jsx)("input",{type:"file",accept:"image/*",onChange:S,ref:_,style:{display:"none"}}),(0,$e.jsx)(BR,{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},sx:{width:64,height:64,border:"2px solid",borderColor:"primary.main",bgcolor:"background.paper","&:hover":{borderColor:"primary.dark",bgcolor:"action.hover"}},children:(0,$e.jsx)(wL,{color:"primary"})}),(0,$e.jsx)(iR,{variant:"caption",sx:{mt:1,color:"text.primary"},children:"Add Story"})]}),i.length>0?i.map((e=>(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",minWidth:"80px",flexShrink:0},onClick:()=>{},children:[(0,$e.jsx)(XT,{src:e.author.avatar,alt:e.author.name,sx:{width:64,height:64,border:"2px solid",borderColor:"primary.main"}}),(0,$e.jsx)(iR,{variant:"caption",sx:{mt:1,color:"text.primary"},children:e.author.username})]},e.id))):(0,$e.jsx)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80px",flexShrink:0},children:(0,$e.jsx)(iR,{variant:"caption",sx:{color:"text.secondary"},children:"No stories yet"})})]}),(0,$e.jsxs)(ZL,{open:s,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[(0,$e.jsx)(iF,{children:"Create New Story"}),(0,$e.jsxs)(lF,{children:[u&&(0,$e.jsx)(_t,{sx:{mt:2,mb:2},children:(0,$e.jsx)("img",{src:u,alt:"Preview",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),y&&(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",my:2},children:(0,$e.jsx)(GO,{})})]}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:()=>a(!1),children:"Cancel"}),(0,$e.jsx)(tP,{onClick:async()=>{if(n&&g&&l)try{b(!0),x(null);const e=b_(GE,`stories/${n.uid}/${Date.now()}_${l.name}`);await v_(e,l);const t=await y_(e),r={authorId:n.uid,imageUrl:t,stickers:h,timestamp:Yw(),views:0};await zw(_b(g,"stories"),r),c(null),d(null),p([]),a(!1)}catch(w){console.error("Error uploading story:",w),x("Failed to upload story")}finally{b(!1)}},variant:"contained",disabled:!l||y,children:"Upload Story"})]})]})]}):(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2,overflowX:"auto",py:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80px",flexShrink:0},children:[(0,$e.jsx)("input",{type:"file",accept:"image/*",onChange:S,ref:_,style:{display:"none"}}),(0,$e.jsx)(BR,{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},sx:{width:64,height:64,border:"2px solid",borderColor:"primary.main",bgcolor:"background.paper","&:hover":{borderColor:"primary.dark",bgcolor:"action.hover"}},children:(0,$e.jsx)(wL,{color:"primary"})}),(0,$e.jsx)(iR,{variant:"caption",sx:{mt:1,color:"text.primary"},children:"Add Story"})]}),[...Array(4)].map(((e,t)=>(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,$e.jsx)(WL,{variant:"circular",width:64,height:64}),(0,$e.jsx)(WL,{variant:"text",width:80,sx:{mt:1}})]},t)))]})},fF=(0,r.createContext)({db:null,loading:!0,error:null}),mF=()=>(0,r.useContext)(fF),gF=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{let e=!0;return(async()=>{try{const t=await QE();e&&(i(t),s(!1))}catch(t){e&&(l(t),s(!1))}})(),()=>{e=!1}}),[]),o?(0,$e.jsxs)(_t,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",children:[(0,$e.jsx)(GO,{}),(0,$e.jsx)(iR,{variant:"body1",mt:2,children:"Initializing Firestore..."})]}):a?(0,$e.jsx)(_t,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",children:(0,$e.jsxs)(iR,{variant:"h6",color:"error",children:["Error: ",a.message]})}):(0,$e.jsx)(fF.Provider,{value:{db:n,loading:o,error:a},children:t})},vF=(0,NT.A)((0,$e.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function yF(e){return(0,gT.Ay)("MuiChip",e)}const bF=(0,bt.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),wF=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],xF=(0,hT.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:l}=n;return[{[`& .${bF.avatar}`]:t.avatar},{[`& .${bF.avatar}`]:t[`avatar${(0,pT.A)(a)}`]},{[`& .${bF.avatar}`]:t[`avatarColor${(0,pT.A)(r)}`]},{[`& .${bF.icon}`]:t.icon},{[`& .${bF.icon}`]:t[`icon${(0,pT.A)(a)}`]},{[`& .${bF.icon}`]:t[`iconColor${(0,pT.A)(i)}`]},{[`& .${bF.deleteIcon}`]:t.deleteIcon},{[`& .${bF.deleteIcon}`]:t[`deleteIcon${(0,pT.A)(a)}`]},{[`& .${bF.deleteIcon}`]:t[`deleteIconColor${(0,pT.A)(r)}`]},{[`& .${bF.deleteIcon}`]:t[`deleteIcon${(0,pT.A)(l)}Color${(0,pT.A)(r)}`]},t.root,t[`size${(0,pT.A)(a)}`],t[`color${(0,pT.A)(r)}`],o&&t.clickable,o&&"default"!==r&&t[`clickableColor${(0,pT.A)(r)})`],s&&t.deletable,s&&"default"!==r&&t[`deletableColor${(0,pT.A)(r)}`],t[l],t[`${l}${(0,pT.A)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,De.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${bF.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${bF.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},[`& .${bF.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${bF.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${bF.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${bF.icon}`]:(0,De.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,De.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),[`& .${bF.deleteIcon}`]:(0,De.A)({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:(0,fT.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:(0,fT.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?`rgba(${t.vars.palette[n.color].contrastTextChannel} / 0.7)`:(0,fT.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{[`&.${bF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${bF.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,fT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${bF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${bF.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${bF.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${bF.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${bF.avatar}`]:{marginLeft:4},[`& .${bF.avatarSmall}`]:{marginLeft:2},[`& .${bF.icon}`]:{marginLeft:4},[`& .${bF.iconSmall}`]:{marginLeft:2},[`& .${bF.deleteIcon}`]:{marginRight:5},[`& .${bF.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,fT.X4)(t.palette[n.color].main,.7)}`,[`&.${bF.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${bF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:(0,fT.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${bF.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,fT.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),_F=(0,hT.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,pT.A)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function SF(e){return"Backspace"===e.key||"Delete"===e.key}const AF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:s,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:m,onKeyUp:g,size:v="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:w=!1}=n,x=(0,Me.A)(n,wF),_=r.useRef(null),S=(0,oR.A)(_,t),A=e=>{e.stopPropagation(),f&&f(e)},C=!(!1===s||!p)||s,k=C||f?LR:l||"div",E=(0,De.A)({},n,{component:k,disabled:u,size:v,color:a,iconColor:r.isValidElement(d)&&d.props.color||a,onDelete:!!f,clickable:C,variant:y}),I=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:l}=e,c={root:["root",l,n&&"disabled",`size${(0,pT.A)(r)}`,`color${(0,pT.A)(i)}`,a&&"clickable",a&&`clickableColor${(0,pT.A)(i)}`,s&&"deletable",s&&`deletableColor${(0,pT.A)(i)}`,`${l}${(0,pT.A)(i)}`],label:["label",`label${(0,pT.A)(r)}`],avatar:["avatar",`avatar${(0,pT.A)(r)}`,`avatarColor${(0,pT.A)(i)}`],icon:["icon",`icon${(0,pT.A)(r)}`,`iconColor${(0,pT.A)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,pT.A)(r)}`,`deleteIconColor${(0,pT.A)(i)}`,`deleteIcon${(0,pT.A)(l)}Color${(0,pT.A)(i)}`]};return(0,dT.A)(c,yF,t)})(E),T=k===LR?(0,De.A)({component:l||"div",focusVisibleClassName:I.focusVisible},f&&{disableRipple:!0}):{};let R=null;f&&(R=c&&r.isValidElement(c)?r.cloneElement(c,{className:(0,ht.A)(c.props.className,I.deleteIcon),onClick:A}):(0,$e.jsx)(vF,{className:(0,ht.A)(I.deleteIcon),onClick:A}));let P=null;i&&r.isValidElement(i)&&(P=r.cloneElement(i,{className:(0,ht.A)(I.avatar,i.props.className)}));let N=null;return d&&r.isValidElement(d)&&(N=r.cloneElement(d,{className:(0,ht.A)(I.icon,d.props.className)})),(0,$e.jsxs)(xF,(0,De.A)({as:k,className:(0,ht.A)(I.root,o),disabled:!(!C||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&SF(e)&&e.preventDefault(),m&&m(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&SF(e)?f(e):"Escape"===e.key&&_.current&&_.current.blur()),g&&g(e)},ref:S,tabIndex:w&&u?-1:b,ownerState:E},T,x,{children:[P||N,(0,$e.jsx)(_F,{className:(0,ht.A)(I.label),ownerState:E,children:h}),R]}))})),CF=AF;function kF(e){return(0,gT.Ay)("MuiCardMedia",e)}(0,bt.A)("MuiCardMedia",["root","media","img"]);const EF=["children","className","component","image","src","style"],IF=(0,hT.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),TF=["video","audio","picture","iframe","img"],RF=["picture","img"],PF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:s,src:a,style:l}=n,c=(0,Me.A)(n,EF),u=-1!==TF.indexOf(o),d=!u&&s?(0,De.A)({backgroundImage:`url("${s}")`},l):l,h=(0,De.A)({},n,{component:o,isMediaComponent:u,isImageComponent:-1!==RF.indexOf(o)}),p=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,dT.A)(i,kF,t)})(h);return(0,$e.jsx)(IF,(0,De.A)({className:(0,ht.A)(p.root,i),as:o,role:!u&&s?"img":void 0,ref:t,style:d,ownerState:h,src:u?s||a:void 0},c,{children:r}))}));var NF=n(4318);function jF(e){return(0,gT.Ay)("MuiCollapse",e)}(0,bt.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const OF=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],DF=(0,hT.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,De.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),MF=(0,hT.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),LF=(0,hT.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,De.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),FF=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:f,onExited:m,onExiting:g,orientation:v="vertical",style:y,timeout:b=NF.p0.standard,TransitionComponent:w=PP}=n,x=(0,Me.A)(n,OF),_=(0,De.A)({},n,{orientation:v,collapsedSize:a}),S=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,dT.A)(r,jF,n)})(_),A=NP(),C=(0,yR.A)(),k=r.useRef(null),E=r.useRef(),I="number"===typeof a?`${a}px`:a,T="horizontal"===v,R=T?"width":"height",P=r.useRef(null),N=(0,oR.A)(t,P),j=e=>t=>{if(e){const n=P.current;void 0===t?e(n):e(n,t)}},O=()=>k.current?k.current[T?"clientWidth":"clientHeight"]:0,D=j(((e,t)=>{k.current&&T&&(k.current.style.position="absolute"),e.style[R]=I,d&&d(e,t)})),M=j(((e,t)=>{const n=O();k.current&&T&&(k.current.style.position="");const{duration:r,easing:i}=OP({style:y,timeout:b,easing:c},{mode:"enter"});if("auto"===b){const t=A.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,E.current=t}else e.style.transitionDuration="string"===typeof r?r:`${r}ms`;e.style[R]=`${n}px`,e.style.transitionTimingFunction=i,p&&p(e,t)})),L=j(((e,t)=>{e.style[R]="auto",h&&h(e,t)})),F=j((e=>{e.style[R]=`${O()}px`,f&&f(e)})),z=j(m),$=j((e=>{const t=O(),{duration:n,easing:r}=OP({style:y,timeout:b,easing:c},{mode:"exit"});if("auto"===b){const n=A.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,E.current=n}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[R]=I,e.style.transitionTimingFunction=r,g&&g(e)}));return(0,$e.jsx)(w,(0,De.A)({in:u,onEnter:D,onEntered:L,onEntering:M,onExit:F,onExited:z,onExiting:$,addEndListener:e=>{"auto"===b&&C.start(E.current||0,e),i&&i(P.current,e)},nodeRef:P,timeout:"auto"===b?null:b},x,{children:(e,t)=>(0,$e.jsx)(DF,(0,De.A)({as:l,className:(0,ht.A)(S.root,s,{entered:S.entered,exited:!u&&"0px"===I&&S.hidden}[e]),style:(0,De.A)({[T?"minWidth":"minHeight"]:I},y),ref:N},t,{ownerState:(0,De.A)({},_,{state:e}),children:(0,$e.jsx)(MF,{ownerState:(0,De.A)({},_,{state:e}),className:S.wrapper,ref:k,children:(0,$e.jsx)(LF,{ownerState:(0,De.A)({},_,{state:e}),className:S.wrapperInner,children:o})})}))}))}));FF.muiSupportAuto=!0;const zF=FF,$F=(0,NT.A)((0,$e.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat"),UF=(0,NT.A)((0,$e.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),BF=(0,NT.A)((0,$e.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),VF=(0,NT.A)((0,$e.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline"),WF=(0,NT.A)((0,$e.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),qF=(0,NT.A)((0,$e.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),HF=(0,NT.A)((0,$e.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),KF=(0,NT.A)((0,$e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),GF=e=>e?e instanceof Date?e:e.toDate?e.toDate():"number"===typeof e||"string"===typeof e?new Date(e):new Date:new Date,YF=e=>{try{const t=GF(e);return isNaN(t.getTime())?(console.error("Invalid date:",e),"Just now"):hO(t,{addSuffix:!0})}catch(t){return console.error("Error formatting date:",t),"Just now"}},QF=(e,t)=>{try{const n=GF(e),r=GF(t);return n.getTime()===r.getTime()}catch(n){return console.error("Error comparing timestamps:",n),!1}},XF=e=>{let{id:t,authorId:n,authorName:i,authorAvatar:o,content:s,timestamp:a,likes:l,likedBy:c,comments:u,imageUrl:d,tags:h,isPrivate:p,userId:f,reposts:m,views:g,isPinned:v,isEdited:y,lastEdited:b,isArchived:w,onLike:x,onComment:_,onShare:S,onDelete:A,onEdit:C,isOwnPost:k,isRepost:E=!1}=e;const[I,T]=(0,r.useState)(!1),[R,P]=(0,r.useState)(!1),[N,j]=(0,r.useState)(!1),[O,D]=(0,r.useState)(s),[M,L]=(0,r.useState)(!1),[F,z]=(0,r.useState)(""),[$,U]=(0,r.useState)(!1),[B,V]=(0,r.useState)(!1),[W,q]=(0,r.useState)(!1),[H,K]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(null),[Q,X]=(0,r.useState)(""),[J,Z]=(0,r.useState)(u),[ee,te]=(0,r.useState)(null),[re,ie]=(0,r.useState)(""),[oe,se]=(0,r.useState)(!1),[ae,le]=(0,r.useState)(null),[ce,ue]=(0,r.useState)(null),de=ne(),{currentUser:he}=ZI();(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();le(e)}catch(e){console.error("Error initializing Firestore:",e),ue("Failed to initialize database")}})()}),[]),(0,r.useEffect)((()=>{n&&s||ue("Invalid post data")}),[n,s]);const pe=e=>{de(`/profile/${e}`)};return n&&s?(0,$e.jsxs)(xT,{elevation:0,sx:{p:2,mb:2,borderRadius:2},children:[ce&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:ce}),(0,$e.jsx)(mD,{sx:{mb:3,borderRadius:2},children:(0,$e.jsxs)(bD,{children:[E&&(0,$e.jsxs)(iR,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,$e.jsx)($F,{sx:{fontSize:16,mr:.5}}),"Reposted"]}),(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center"},children:[(0,$e.jsx)(XT,{src:o,alt:i,sx:{mr:2,cursor:"pointer"},onClick:()=>pe(n),children:i?i.charAt(0):"A"}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"subtitle1",fontWeight:"bold",onClick:()=>pe(n),sx:{cursor:"pointer"},children:i||"Anonymous"}),(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:YF(a)})]})]}),k&&(0,$e.jsx)(BR,{onClick:async()=>{if(he&&k)try{P(!0),ue(null),A&&await A(t)}catch(e){ue("Failed to delete post"),console.error("Error deleting post:",e)}finally{P(!1)}else ue("You can only delete your own posts")},disabled:R,"aria-label":"Delete post",children:R?(0,$e.jsx)(GO,{size:24}):(0,$e.jsx)(xL,{})})]}),(0,$e.jsx)(iR,{variant:"body1",sx:{mb:2},children:s}),h&&h.length>0&&(0,$e.jsx)(_t,{sx:{mb:2,display:"flex",flexWrap:"wrap",gap:1},children:h.map((e=>(0,$e.jsx)(CF,{label:`#${e}`,size:"small",sx:{borderRadius:1}},e)))}),d&&(0,$e.jsx)(PF,{component:"img",image:d,alt:"Post image",sx:{borderRadius:1,mb:2}}),(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center"},children:[(0,$e.jsx)(BR,{onClick:async()=>{if(he)try{T(!0),ue(null),await x(t)}catch(e){ue("Failed to like post"),console.error("Error liking post:",e)}finally{T(!1)}else ue("Please sign in to like posts")},color:null!==c&&void 0!==c&&c.includes((null===he||void 0===he?void 0:he.uid)||"")?"primary":"default",disabled:R||$,"aria-label":null!==c&&void 0!==c&&c.includes((null===he||void 0===he?void 0:he.uid)||"")?"Unlike post":"Like post",children:I?(0,$e.jsx)(GO,{size:24}):null!==c&&void 0!==c&&c.includes((null===he||void 0===he?void 0:he.uid)||"")?(0,$e.jsx)(UF,{}):(0,$e.jsx)(BF,{})}),(0,$e.jsx)(iR,{variant:"body2",color:"text.secondary",children:l})]}),(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center"},children:[(0,$e.jsx)(BR,{onClick:()=>L(!M),disabled:R||$,"aria-label":"Toggle comments",children:(0,$e.jsx)(VF,{})}),(0,$e.jsx)(iR,{variant:"body2",color:"text.secondary",children:(null===J||void 0===J?void 0:J.length)||0})]}),(0,$e.jsx)(BR,{onClick:async()=>{if(he&&!$)try{S&&await S(t)}catch(ce){console.error("Error sharing post:",ce)}},disabled:R||$,"aria-label":"Share post",children:(0,$e.jsx)(WF,{})})]}),J&&J.length>0&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(aj,{sx:{my:2}}),(0,$e.jsxs)(_t,{children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",cursor:"pointer",color:"text.secondary",mb:1},onClick:()=>L(!M),children:[(0,$e.jsx)(iR,{variant:"caption",children:M?"Hide comments":`Show ${J.length} comments`}),M?(0,$e.jsx)(qF,{}):(0,$e.jsx)(HF,{})]}),(0,$e.jsx)(zF,{in:M,timeout:"auto",unmountOnExit:!0,children:(0,$e.jsx)(cP,{children:J.map(((e,n)=>{var r;return(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"flex-start",mb:1},children:[(0,$e.jsx)(XT,{src:e.authorAvatar,alt:e.authorName,sx:{width:24,height:24,mr:1}}),(0,$e.jsxs)(_t,{children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,$e.jsx)(iR,{variant:"subtitle2",children:e.authorName}),(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:YF(e.timestamp)})]}),G===`${e.authorId}_${GF(e.timestamp).getTime()}`?(0,$e.jsxs)(_t,{sx:{mt:1},children:[(0,$e.jsx)(bL,{fullWidth:!0,multiline:!0,size:"small",value:Q,onChange:e=>X(e.target.value),disabled:H}),(0,$e.jsxs)(_t,{sx:{mt:1,display:"flex",gap:1},children:[(0,$e.jsx)(tP,{size:"small",variant:"contained",onClick:()=>(async e=>{if(he&&!H&&Q.trim()){K(!0);try{const n=Sb(ae,"posts",t),r=await jw(n);if(!r.exists())return;const i=r.data(),o=i.comments.findIndex((t=>QF(t.timestamp,e.timestamp)&&t.authorId===e.authorId));if(-1===o)return;const s=[...i.comments];s[o]={...s[o],content:Q.trim(),isEdited:!0,lastEdited:new Date},await Lw(n,{comments:s}),Z(s),Y(null),X("")}catch(ce){console.error("Error editing comment:",ce)}finally{K(!1)}}})(e),disabled:H||!Q.trim(),children:"Save"}),(0,$e.jsx)(tP,{size:"small",onClick:()=>{Y(null),X("")},disabled:H,children:"Cancel"})]})]}):(0,$e.jsx)(iR,{variant:"body2",children:e.content}),(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[(0,$e.jsx)(BR,{size:"small",onClick:()=>(async e=>{if(he&&!B){V(!0);try{var n;const i=Sb(ae,"posts",t),o=await jw(i);if(!o.exists())return;const s=o.data(),a=s.comments.findIndex((t=>QF(t.timestamp,e.timestamp)&&t.authorId===e.authorId));if(-1===a)return;const l=(null===(n=e.likedBy)||void 0===n?void 0:n.includes(he.uid))||!1,c=[...s.comments];var r;c[a]=l?{...c[a],likes:(c[a].likes||0)-1,likedBy:(null===(r=c[a].likedBy)||void 0===r?void 0:r.filter((e=>e!==he.uid)))||[]}:{...c[a],likes:(c[a].likes||0)+1,likedBy:[...c[a].likedBy||[],he.uid]},await Lw(i,{comments:c}),Z(c)}catch(ce){console.error("Error updating comment like:",ce)}finally{V(!1)}}})(e),disabled:B,children:B?(0,$e.jsx)(GO,{size:20}):null!==(r=e.likedBy)&&void 0!==r&&r.includes((null===he||void 0===he?void 0:he.uid)||"")?(0,$e.jsx)(UF,{fontSize:"small",color:"error"}):(0,$e.jsx)(BF,{fontSize:"small"})}),(0,$e.jsx)(iR,{variant:"caption",children:e.likes||0}),((null===he||void 0===he?void 0:he.uid)===e.authorId||k)&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(BR,{size:"small",onClick:()=>{Y(`${e.authorId}_${GF(e.timestamp).getTime()}`),X(e.content)},disabled:H||W,children:(0,$e.jsx)(KF,{fontSize:"small"})}),(0,$e.jsx)(BR,{size:"small",onClick:()=>(async e=>{if(he&&!W){q(!0);try{const n=Sb(ae,"posts",t),r=await jw(n);if(!r.exists())return;const i=r.data().comments.filter((t=>!(QF(t.timestamp,e.timestamp)&&t.authorId===e.authorId)));await Lw(n,{comments:i}),Z(i)}catch(ce){console.error("Error deleting comment:",ce)}finally{q(!1)}}})(e),disabled:W||H,children:W?(0,$e.jsx)(GO,{size:20}):(0,$e.jsx)(xL,{fontSize:"small"})})]})]})]})]},n)}))})})]})]}),he&&(0,$e.jsxs)(_t,{sx:{mt:2},children:[(0,$e.jsx)(bL,{fullWidth:!0,multiline:!0,placeholder:"Write a comment...",size:"small",value:F,onChange:e=>z(e.target.value),disabled:$}),(0,$e.jsx)(_t,{sx:{mt:1,display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(tP,{variant:"contained",onClick:async()=>{if(he)if(F.trim())try{U(!0),ue(null),await _(t,F),z("")}catch(e){ue("Failed to add comment"),console.error("Error adding comment:",e)}finally{U(!1)}else ue("Comment cannot be empty");else ue("Please sign in to comment")},disabled:$||!F.trim(),children:$?"Posting...":"Post"})})]})]})})]}):(0,$e.jsxs)(xT,{elevation:0,sx:{p:2,mb:2,borderRadius:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,$e.jsx)(WL,{variant:"circular",width:40,height:40}),(0,$e.jsxs)(_t,{sx:{ml:2,flex:1},children:[(0,$e.jsx)(WL,{variant:"text",width:120}),(0,$e.jsx)(WL,{variant:"text",width:80})]})]}),(0,$e.jsx)(WL,{variant:"rectangular",height:100,sx:{borderRadius:1}})]})},JF=()=>{const{currentUser:e}=ZI(),{db:t}=mF(),n=ne(),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!e)return void n("/login");if(!t)return;(async()=>{try{const n=await jw(Sb(t,"users",e.uid));if(!n.exists())return c("User profile not found"),void a(!1);const r=n.data();p(r),d(r.connections||[]),m(!0)}catch(l){console.error("Error loading user profile:",l),c("Failed to load user profile"),a(!1)}})()}),[e,t,n]),(0,r.useEffect)((()=>{if(!e||!t)return void a(!1);const n=$w(fw(_b(t,"posts"),bw("timestamp","desc"),xw(50)),(t=>{const n=[];t.forEach((t=>{const r={id:t.id,...t.data()};r.deleted||r.authorId!==e.uid&&!u.includes(r.authorId)||n.push(r)}));const r=n.filter((e=>{var t;return!(null!==h&&void 0!==h&&null!==(t=h.blockedUsers)&&void 0!==t&&t.includes(e.authorId))}));o(r),c(null),a(!1)}),(e=>{console.error("Error fetching posts:",e),c("Error loading posts. Please try again later."),a(!1)}));return()=>n()}),[e,t,u,null===h||void 0===h?void 0:h.blockedUsers]);const g=async(n,r,i,o,s)=>{if(t&&e)try{const a={type:r,senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:n,read:!1,timestamp:Yw(),content:i,link:o,relatedId:s};await zw(_b(t,"notifications"),a)}catch(l){console.error("Error creating notification:",l)}},v=async n=>{if(t&&e)try{const i=Sb(t,"posts",n),o=await jw(i);if(o.exists()){var r;const t=o.data(),s=null===(r=t.likedBy)||void 0===r?void 0:r.includes(e.uid);await Lw(i,{likes:Jw(s?-1:1),likedBy:s?Xw(e.uid):Qw(e.uid)}),s||t.authorId===e.uid||await g(t.authorId,"like",`${e.displayName||"Someone"} liked your post`,`/post/${n}`,n)}}catch(l){console.error("Error updating like:",l),c("Failed to update like")}},y=async(n,r)=>{if(t&&e)try{const i=Sb(t,"posts",n),o=(await jw(i)).data(),s={content:r,authorId:e.uid,authorName:e.displayName||"Anonymous",authorAvatar:e.photoURL||"",timestamp:Yw(),likes:0};await Lw(i,{comments:Qw(s)}),o&&o.authorId!==e.uid&&await g(o.authorId,"comment",`${e.displayName||"Someone"} commented on your post`,`/post/${n}`,n);const a=r.match(/@(\w+)/g);if(a){const r=Array.from(new Set(a));for(const i of r){const r=i.slice(1),o=fw(_b(t,"users"),gw("username","==",r),xw(1)),s=await Dw(o);if(!s.empty){const t=s.docs[0];t.id!==e.uid&&await g(t.id,"mention",`${e.displayName||"Someone"} mentioned you in a comment`,`/post/${n}`,n)}}}}catch(l){console.error("Error adding comment:",l),c("Failed to add comment")}},b=async(n,r)=>{if(t&&e)try{const i=Sb(t,"posts",n),s=await jw(i);if(s.exists()){if(s.data().authorId!==e.uid)throw new Error("You can only edit your own posts");await Lw(i,{content:r,isEdited:!0,lastEdited:Yw()}),o((e=>e.map((e=>e.id===n?{...e,content:r,isEdited:!0,lastEdited:Bl.now()}:e)))),wI.success("Post updated successfully")}}catch(l){console.error("Error updating post:",l),c("Failed to update post"),wI.error("Failed to update post")}},w=async n=>{var r;if(t&&e)try{const i=Sb(t,"posts",n),s=await jw(i);if(s.exists()){const t=s.data();if(t.authorId!==e.uid)throw new Error("You can only delete your own posts");if(t.imageUrl)try{const e=b_(GE,t.imageUrl);await(r=e,l_(r=vn(r)))}catch(l){console.error("Error deleting image:",l)}await Fw(i),o((e=>e.filter((e=>e.id!==n)))),wI.success("Post deleted successfully")}}catch(l){console.error("Error deleting post:",l),c("Failed to delete post"),wI.error("Failed to delete post")}};return e?s?(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,$e.jsx)(GO,{})}):l?(0,$e.jsx)(_t,{sx:{p:3,textAlign:"center"},children:(0,$e.jsx)(iR,{color:"error",children:l})}):(0,$e.jsxs)(jO,{maxWidth:"lg",children:[(0,$e.jsxs)(_t,{sx:{mb:4,pt:3,display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1,textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em",position:"relative","&::after":{content:'""',position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",width:"60px",height:"4px",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",borderRadius:"2px"}},children:"Your Feed"}),(0,$e.jsx)(iR,{variant:"subtitle1",color:"text.secondary",sx:{textAlign:"center",fontStyle:"italic",mb:2},children:"Stay updated with your friends and community"})]}),l&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:l}),s?(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})}):(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(_t,{sx:{mb:4},children:(0,$e.jsx)(pF,{following:(null===h||void 0===h?void 0:h.following)||[]})}),(0,$e.jsx)(_t,{sx:{mb:4},children:(0,$e.jsx)(CL,{user:{name:(null===e||void 0===e?void 0:e.displayName)||"Anonymous",avatar:(null===e||void 0===e?void 0:e.photoURL)||"",username:(null===h||void 0===h?void 0:h.username)||"",isVerified:(null===h||void 0===h?void 0:h.isVerified)||!1},onSubmit:async(n,r)=>{if(t&&e)try{const i=await jw(Sb(t,"users",e.uid)),s=i.exists()?i.data():null,a={content:n.trim(),authorId:e.uid,authorName:(null===s||void 0===s?void 0:s.name)||e.displayName||"Anonymous",authorAvatar:(null===s||void 0===s?void 0:s.profilePic)||e.photoURL||"",timestamp:Yw(),likes:0,likedBy:[],comments:[],tags:n.match(/#[a-zA-Z0-9_]+/g)||[],isPrivate:!1,userId:e.uid,reposts:0,views:0,isPinned:!1,isEdited:!1,isArchived:!1,deleted:!1};if(r){const e=await(async e=>{const t=b_(GE,`posts/${Date.now()}_${e.name}`);return await v_(t,e),y_(t)})(r);e&&Object.assign(a,{imageUrl:e})}const l=await zw(_b(t,"posts"),a),c=await jw(l);if(c.exists()){const e={...c.data(),id:c.id};o((t=>[e,...t])),wI.success("Post created successfully")}}catch(l){console.error("Error creating post:",l),c("Failed to create post"),wI.error("Failed to create post")}else c("Please sign in to create a post")}})}),(0,$e.jsx)(_t,{sx:{display:"flex",flexDirection:"column",gap:3},children:0===i.length?(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",align:"center",children:"No posts yet. Follow some users to see their posts!"}):i.map((t=>(0,$e.jsx)(XF,{id:t.id,authorId:t.authorId||(null===e||void 0===e?void 0:e.uid)||"",authorName:t.authorName||"Anonymous",authorAvatar:t.authorAvatar||"",content:t.content||"",timestamp:t.timestamp||Bl.now(),likes:t.likes||0,likedBy:t.likedBy||[],comments:t.comments||[],imageUrl:t.imageUrl,tags:t.tags||[],isPrivate:t.isPrivate||!1,userId:t.userId||(null===e||void 0===e?void 0:e.uid)||"",reposts:t.reposts||0,views:t.views||0,isPinned:t.isPinned||!1,isEdited:t.isEdited||!1,lastEdited:t.lastEdited,isArchived:t.isArchived||!1,deleted:t.deleted||!1,onLike:v,onComment:y,onDelete:w,onEdit:b,onShare:async()=>{},isOwnPost:t.authorId===(null===e||void 0===e?void 0:e.uid)},t.id)))})]})]}):(0,$e.jsx)(jO,{maxWidth:"md",children:(0,$e.jsx)(_t,{sx:{py:4,textAlign:"center"},children:(0,$e.jsx)(iR,{variant:"h6",children:"Please sign in to view your feed"})})})},ZF=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),a=ne();return(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsxs)(_t,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,$e.jsx)(iR,{component:"h1",variant:"h5",children:"Login to Side Eye"}),(0,$e.jsxs)(_t,{component:"form",onSubmit:async t=>{t.preventDefault();try{await cs(WE,e,n),a("/")}catch(o){s("Invalid email or password")}},sx:{mt:1},children:[(0,$e.jsx)(bL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>t(e.target.value)}),(0,$e.jsx)(bL,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n,onChange:e=>i(e.target.value)}),o&&(0,$e.jsx)(iR,{color:"error",sx:{mt:2},children:o}),(0,$e.jsx)(tP,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),(0,$e.jsx)(_t,{sx:{textAlign:"center",mt:2},children:(0,$e.jsxs)(iR,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",(0,$e.jsx)(Re,{to:"/register",style:{textDecoration:"none",color:"#1976d2"},children:"Sign Up Here"})]})})]})]})})};function ez(e){return(0,gT.Ay)("MuiInputAdornment",e)}const tz=(0,bt.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var nz;const rz=["children","className","component","disablePointerEvents","disableTypography","position","variant"],iz=(0,hT.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,pT.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${tz.positionStart}&:not(.${tz.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),oz=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:c,variant:u}=n,d=(0,Me.A)(n,rz),h=RD()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=(0,De.A)({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:a,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=e,a={root:["root",n&&"disablePointerEvents",i&&`position${(0,pT.A)(i)}`,s,r&&"hiddenLabel",o&&`size${(0,pT.A)(o)}`]};return(0,dT.A)(a,ez,t)})(f);return(0,$e.jsx)(TD.Provider,{value:null,children:(0,$e.jsx)(iz,(0,De.A)({as:s,ownerState:f,className:(0,ht.A)(m.root,o),ref:t},d,{children:"string"!==typeof i||l?(0,$e.jsxs)(r.Fragment,{children:["start"===c?nz||(nz=(0,$e.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,$e.jsx)(iR,{color:"text.secondary",children:i})}))})})),sz=oz,az=(0,NT.A)((0,$e.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),lz=(0,NT.A)((0,$e.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),cz=()=>{const[e,t]=(0,r.useState)({username:"",email:"",password:"",confirmPassword:""}),[n,i]=(0,r.useState)({}),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),d=ne(),{register:h}=ZI(),p=e=>{const{name:r,value:o}=e.target;t((e=>({...e,[r]:o}))),n[r]&&i((e=>({...e,[r]:void 0})))};return o?(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})})}):(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{mt:8},children:(0,$e.jsxs)(xT,{elevation:0,sx:{p:4},children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,align:"center",children:"Create Account"}),(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Join SideEye and start sharing your thoughts with the community"}),c&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:c}),(0,$e.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),u(null),(()=>{const t={};return e.username.trim()?e.username.length<3&&(t.username="Username must be at least 3 characters"):t.username="Username is required",e.email.trim()?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password?e.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),i(t),0===Object.keys(t).length})())try{s(!0),await h(e.email,e.password,e.username),d("/verify-email")}catch(c){console.error("Registration error:",c),"auth/email-already-in-use"===c.code?u("Email is already in use"):"auth/weak-password"===c.code?u("Password is too weak"):u("Error creating account. Please try again.")}finally{s(!1)}},children:[(0,$e.jsx)(bL,{fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:p,margin:"normal",required:!0,error:!!n.username,helperText:n.username}),(0,$e.jsx)(bL,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:p,margin:"normal",required:!0,error:!!n.email,helperText:n.email}),(0,$e.jsx)(bL,{fullWidth:!0,label:"Password",name:"password",type:a?"text":"password",value:e.password,onChange:p,margin:"normal",required:!0,error:!!n.password,helperText:n.password,InputProps:{endAdornment:(0,$e.jsx)(sz,{position:"end",children:(0,$e.jsx)(BR,{onClick:()=>l(!a),edge:"end",children:a?(0,$e.jsx)(az,{}):(0,$e.jsx)(lz,{})})})}}),(0,$e.jsx)(bL,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:a?"text":"password",value:e.confirmPassword,onChange:p,margin:"normal",required:!0,error:!!n.confirmPassword,helperText:n.confirmPassword}),(0,$e.jsx)(tP,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:o,children:"Create Account"})]})]})})})};function uz(e,t,n,i,o){const[s,a]=r.useState((()=>o&&n?n(e).matches:i?i(e).matches:t));return(0,HP.A)((()=>{let t=!0;if(!n)return;const r=n(e),i=()=>{t&&a(r.matches)};return i(),r.addListener(i),()=>{t=!1,r.removeListener(i)}}),[e,n]),s}const dz=i.useSyncExternalStore;function hz(e,t,n,i,o){const s=r.useCallback((()=>t),[t]),a=r.useMemo((()=>{if(o&&n)return()=>n(e).matches;if(null!==i){const{matches:t}=i(e);return()=>t}return s}),[s,e,i,o,n]),[l,c]=r.useMemo((()=>{if(null===n)return[s,()=>()=>{}];const t=n(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[s,n,e]);return dz(c,l,a)}function pz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ve(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:o=(r?window.matchMedia:null),ssrMatchMedia:s=null,noSsr:a=!1}=gO({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");return(void 0!==dz?hz:uz)(l,i,o,s,a)}let fz;function mz(){if(fz)return fz;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),fz="reverse",e.scrollLeft>0?fz="default":(e.scrollLeft=1,0===e.scrollLeft&&(fz="negative")),document.body.removeChild(e),fz}function gz(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(mz()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function vz(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const yz=["onChange"],bz={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const wz=(0,NT.A)((0,$e.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),xz=(0,NT.A)((0,$e.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function _z(e){return(0,gT.Ay)("MuiTabScrollButton",e)}const Sz=(0,bt.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Az=["className","slots","slotProps","direction","orientation","disabled"],Cz=(0,hT.Ay)(LR,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({width:40,flexShrink:0,opacity:.8,[`&.${Sz.disabled}`]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})})),kz=r.forwardRef((function(e,t){var n,r;const i=(0,tt.b)({props:e,name:"MuiTabScrollButton"}),{className:o,slots:s={},slotProps:a={},direction:l}=i,c=(0,Me.A)(i,Az),u=He(),d=(0,De.A)({isRtl:u},i),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,dT.A)(i,_z,t)})(d),p=null!=(n=s.StartScrollButtonIcon)?n:wz,f=null!=(r=s.EndScrollButtonIcon)?r:xz,m=rP({elementType:p,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=rP({elementType:f,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,$e.jsx)(Cz,(0,De.A)({component:"div",className:(0,ht.A)(h.root,o),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,$e.jsx)(p,(0,De.A)({},m)):(0,$e.jsx)(f,(0,De.A)({},g))}))}));function Ez(e){return(0,gT.Ay)("MuiTabs",e)}const Iz=(0,bt.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Tz=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Rz=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,Pz=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Nz=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},jz=(0,hT.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Iz.scrollButtons}`]:t.scrollButtons},{[`& .${Iz.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${Iz.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),Oz=(0,hT.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),Dz=(0,hT.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),Mz=(0,hT.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),Lz=(0,hT.Ay)((function(e){const{onChange:t}=e,n=(0,Me.A)(e,yz),i=r.useRef(),o=r.useRef(null),s=()=>{i.current=o.current.offsetHeight-o.current.clientHeight};return(0,hP.A)((()=>{const e=(0,wP.A)((()=>{const e=i.current;s(),e!==i.current&&t(i.current)})),n=(0,xP.A)(o.current);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}}),[t]),r.useEffect((()=>{s(),t(i.current)}),[t]),(0,$e.jsx)("div",(0,De.A)({style:bz},n,{ref:o}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Fz={};const zz=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiTabs"}),i=NP(),o=He(),{"aria-label":s,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:v=kz,scrollButtons:y="auto",selectionFollowsFocus:b,slots:w={},slotProps:x={},TabIndicatorProps:_={},TabScrollButtonProps:S={},textColor:A="primary",value:C,variant:k="standard",visibleScrollbar:E=!1}=n,I=(0,Me.A)(n,Tz),T="scrollable"===k,R="vertical"===g,P=R?"scrollTop":"scrollLeft",N=R?"top":"left",j=R?"bottom":"right",O=R?"clientHeight":"clientWidth",D=R?"height":"width",M=(0,De.A)({},n,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:R,scrollButtons:y,textColor:A,variant:k,visibleScrollbar:E,fixed:!T,hideScrollbar:T&&!E,scrollableX:T&&!R,scrollableY:T&&R,centered:c&&!T,scrollButtonsHideMobile:!p}),L=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,dT.A)(c,Ez,l)})(M),F=rP({elementType:w.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:M}),z=rP({elementType:w.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:M});const[$,U]=r.useState(!1),[B,V]=r.useState(Fz),[W,q]=r.useState(!1),[H,K]=r.useState(!1),[G,Y]=r.useState(!1),[Q,X]=r.useState({overflow:"hidden",scrollbarWidth:0}),J=new Map,Z=r.useRef(null),ee=r.useRef(null),te=()=>{const e=Z.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:gz(e,o?"rtl":"ltr"),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==C){const e=ee.current.children;if(e.length>0){const t=e[J.get(C)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=(0,sR.A)((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;if(R)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=o?"right":"left",t&&e){const i=o?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(o?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[D]:t?t[D]:0};if(isNaN(B[n])||isNaN(B[D]))V(i);else{const e=Math.abs(B[n]-i[n]),t=Math.abs(B[D]-i[D]);(e>=1||t>=1)&&V(i)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=vz,duration:s=300}=r;let a=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===a&&(a=r);const u=Math.min(1,(r-a)/s);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(P,Z.current,e,{duration:i.transitions.duration.standard}):Z.current[P]=e},ie=e=>{let t=Z.current[P];R?t+=e:(t+=e*(o?-1:1),t*=o&&"reverse"===mz()?-1:1),re(t)},oe=()=>{const e=Z.current[O];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[O]>e){0===r&&(t=e);break}t+=i[O]}return t},se=()=>{ie(-1*oe())},ae=()=>{ie(oe())},le=r.useCallback((e=>{X({overflow:null,scrollbarWidth:e})}),[]),ce=(0,sR.A)((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[N]<t[N]){const r=t[P]+(n[N]-t[N]);re(r,{animation:e})}else if(n[j]>t[j]){const r=t[P]+(n[j]-t[j]);re(r,{animation:e})}})),ue=(0,sR.A)((()=>{T&&!1!==y&&Y(!G)}));r.useEffect((()=>{const e=(0,wP.A)((()=>{Z.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null==(n=t)||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null==(n=t)||n.observe(e)}))})),e(),ue()},r=(0,xP.A)(Z.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{var n,o;e.clear(),r.removeEventListener("resize",e),null==(n=i)||n.disconnect(),null==(o=t)||o.disconnect()}}),[ne,ue]),r.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&T&&!1!==y){const n=e[0],r=e[t-1],i={root:Z.current,threshold:.99},o=new IntersectionObserver((e=>{q(!e[0].isIntersecting)}),i);o.observe(n);const s=new IntersectionObserver((e=>{K(!e[0].isIntersecting)}),i);return s.observe(r),()=>{o.disconnect(),s.disconnect()}}}),[T,y,G,null==u?void 0:u.length]),r.useEffect((()=>{U(!0)}),[]),r.useEffect((()=>{ne()})),r.useEffect((()=>{ce(Fz!==B)}),[ce,B]),r.useImperativeHandle(l,(()=>({updateIndicator:ne,updateScrollButtons:ue})),[ne,ue]);const de=(0,$e.jsx)(Mz,(0,De.A)({},_,{className:(0,ht.A)(L.indicator,_.className),ownerState:M,style:(0,De.A)({},B,_.style)}));let he=0;const pe=r.Children.map(u,(e=>{if(!r.isValidElement(e))return null;const t=void 0===e.props.value?he:e.props.value;J.set(t,he);const n=t===C;return he+=1,r.cloneElement(e,(0,De.A)({fullWidth:"fullWidth"===k,indicator:n&&!$&&de,selected:n,selectionFollowsFocus:b,onChange:m,textColor:A,value:t},1!==he||!1!==C||e.props.tabIndex?{}:{tabIndex:0}))})),fe=(()=>{const e={};e.scrollbarSizeListener=T?(0,$e.jsx)(Lz,{onChange:le,className:(0,ht.A)(L.scrollableX,L.hideScrollbar)}):null;const t=T&&("auto"===y&&(W||H)||!0===y);return e.scrollButtonStart=t?(0,$e.jsx)(v,(0,De.A)({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:F},orientation:g,direction:o?"right":"left",onClick:se,disabled:!W},S,{className:(0,ht.A)(L.scrollButtons,S.className)})):null,e.scrollButtonEnd=t?(0,$e.jsx)(v,(0,De.A)({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:z},orientation:g,direction:o?"left":"right",onClick:ae,disabled:!H},S,{className:(0,ht.A)(L.scrollButtons,S.className)})):null,e})();return(0,$e.jsxs)(jz,(0,De.A)({className:(0,ht.A)(L.root,d),ownerState:M,ref:t,as:h},I,{children:[fe.scrollButtonStart,fe.scrollbarSizeListener,(0,$e.jsxs)(Oz,{className:L.scroller,ownerState:M,style:{overflow:Q.overflow,[R?"margin"+(o?"Left":"Right"):"marginBottom"]:E?void 0:-Q.scrollbarWidth},ref:Z,children:[(0,$e.jsx)(Dz,{"aria-label":s,"aria-labelledby":a,"aria-orientation":"vertical"===g?"vertical":null,className:L.flexContainer,ownerState:M,onKeyDown:e=>{const t=ee.current,n=(0,iP.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",i="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&o&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),Nz(t,n,Pz);break;case i:e.preventDefault(),Nz(t,n,Rz);break;case"Home":e.preventDefault(),Nz(t,null,Rz);break;case"End":e.preventDefault(),Nz(t,null,Pz)}},ref:ee,role:"tablist",children:pe}),$&&de]}),fe.scrollButtonEnd]}))})),$z=zz;function Uz(e){return(0,gT.Ay)("MuiTab",e)}const Bz=(0,bt.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Vz=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Wz=(0,hT.Ay)(LR,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,pT.A)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${Bz.iconWrapper}`]:t.iconWrapper}]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Bz.iconWrapper}`]:(0,De.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,[`&.${Bz.selected}`]:{opacity:1},[`&.${Bz.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${Bz.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Bz.disabled}`]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${Bz.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Bz.disabled}`]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),qz=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=n,w=(0,Me.A)(n,Vz),x=(0,De.A)({},n,{disabled:o,disableFocusRipple:s,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:a,textColor:v,wrapped:b}),_=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=e,c={root:["root",o&&s&&"labelIcon",`textColor${(0,pT.A)(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,dT.A)(c,Uz,t)})(x),S=l&&d&&r.isValidElement(l)?r.cloneElement(l,{className:(0,ht.A)(_.iconWrapper,l.props.className)}):l;return(0,$e.jsxs)(Wz,(0,De.A)({focusRipple:!s,className:(0,ht.A)(_.root,i),ref:t,role:"tab","aria-selected":m,disabled:o,onClick:e=>{!m&&h&&h(e,y),p&&p(e)},onFocus:e=>{g&&!m&&h&&h(e,y),f&&f(e)},ownerState:x,tabIndex:m?0:-1},w,{children:["top"===c||"start"===c?(0,$e.jsxs)(r.Fragment,{children:[S,d]}):(0,$e.jsxs)(r.Fragment,{children:[d,S]}),u]}))})),Hz=(0,NT.A)((0,$e.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),Kz=(0,NT.A)((0,$e.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove"),Gz=(0,NT.A)((0,$e.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");function Yz(e){const{children:t,value:n,index:r,...i}=e;return(0,$e.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`profile-tabpanel-${r}`,"aria-labelledby":`profile-tab-${r}`,...i,children:n===r&&(0,$e.jsx)(_t,{sx:{p:3},children:t})})}const Qz=()=>{const e=pz(NP().breakpoints.down("sm")),{userId:t}=re(),{currentUser:n,userProfile:i,loading:o,setUserProfile:s}=ZI(),{db:a}=mF(),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(0),[w,x]=(0,r.useState)([]),[_,S]=(0,r.useState)([]),[A,C]=(0,r.useState)([]),[k,E]=(0,r.useState)([]),[I,T]=(0,r.useState)(!0),[R,P]=(0,r.useState)(null),[N,j]=(0,r.useState)([]),[O,D]=(0,r.useState)([]),[M,L]=(0,r.useState)(!1),[F,z]=(0,r.useState)(null),[$,U]=(0,r.useState)(!1),[B,V]=(0,r.useState)([]),[W,q]=(0,r.useState)(""),[H,K]=(0,r.useState)(0),[G,Y]=(0,r.useState)([]),[Q,X]=(0,r.useState)(!1),J=(0,r.useRef)(null),[Z,ee]=(0,r.useState)([]),[te,ne]=(0,r.useState)([]),[ie,oe]=(0,r.useState)(!1),[se,ae]=(0,r.useState)(""),[le,ce]=(0,r.useState)(""),[ue,de]=(0,r.useState)(""),[he,pe]=(0,r.useState)(!1),fe=t||(null===n||void 0===n?void 0:n.uid)||"",me=(0,r.useCallback)((async()=>{if(!fe)return P("No user ID provided"),void T(!1);if(!a)return P("Database not initialized"),void T(!1);try{if(T(!0),P(null),fe===(null===n||void 0===n?void 0:n.uid)&&i)c(i.username||""),d(i.name||""),p(i.email||""),m(i.bio||""),z(i.profilePic||null),j(i.connections||[]),D(i.followers||[]);else{const e=await jw(Sb(a,"users",fe));if(e.exists()){const t=e.data();c(t.username||""),d(t.name||""),p(t.email||""),m(t.bio||""),z(t.profilePic||null),j(t.connections||[]),D(t.followers||[])}else P("User not found")}const e=$w(fw(_b(a,"posts"),gw("authorId","==",fe),bw("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));x(t)})),t=$w(fw(_b(a,"forums"),gw("ownerId","==",fe),bw("createdAt","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));S(t)})),r=$w(fw(_b(a,"sideRooms"),gw("ownerId","==",fe),bw("createdAt","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));C(t)})),o=$w(fw(_b(a,"posts"),gw("likedBy","array-contains",fe),bw("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));E(t)})),s=$w(fw(_b(a,"deleted_items"),gw("content.authorId","==",fe),bw("deletedAt","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));Y(t)}));return T(!1),()=>{e(),t(),r(),o(),s()}}catch(R){console.error("Error fetching user data:",R),P("Failed to fetch user data"),T(!1)}}),[fe,n,i,a]);(0,r.useEffect)((()=>{me()}),[me]),(0,r.useEffect)((()=>{(async()=>{if(fe&&a)try{const e=O.map((async e=>{const t=await jw(Sb(a,"users",e));return t.exists()?t.data():null})),t=await Promise.all(e);ee(t.filter(Boolean));const n=N.map((async e=>{const t=await jw(Sb(a,"users",e));return t.exists()?t.data():null})),r=await Promise.all(n);ne(r.filter(Boolean))}catch(R){console.error("Error fetching user lists:",R),P("Failed to fetch user lists")}else P("Database not initialized")})()}),[fe,O,N,a]),(0,r.useEffect)((()=>{i&&(ae(i.name||""),ce(i.bio||""),de(i.username||""))}),[i]),(0,r.useEffect)((()=>{pe(!(null===n||void 0===n||!n.uid)&&O.includes(n.uid))}),[n,O]);const ge=async()=>{if(a&&n&&fe)try{const e=Sb(a,"users",n.uid),t=Sb(a,"users",fe);await Lw(e,{connections:Qw(fe)}),await Lw(t,{followers:Qw(n.uid)});const r={type:"follow",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",recipientId:fe,read:!1,timestamp:Yw(),content:`${n.displayName||"Someone"} started following you`,link:`/profile/${n.uid}`};await zw(_b(a,"notifications"),r),i&&s({...i,connections:[...i.connections||[],fe]}),D((e=>[...e,n.uid])),pe(!0)}catch(R){console.error("Error following user:",R),P("Failed to follow user")}},ve=()=>fe?(0,$e.jsx)(BR,{color:"primary",onClick:()=>{U(!0),B.forEach((e=>{e.read||be(e.id)}))},sx:{border:"1px solid",borderColor:"primary.main","&:hover":{backgroundColor:"primary.light",opacity:.8},width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,$e.jsx)(Sj,{badgeContent:H,color:"error",children:(0,$e.jsx)(Hz,{})})}):null,ye=async()=>{if(n&&fe&&W.trim()&&!ie&&a)try{oe(!0);const e={senderId:n.uid,receiverId:fe,content:W.trim(),timestamp:Yw(),read:!1,senderName:n.displayName||"Anonymous",senderAvatar:(null===i||void 0===i?void 0:i.profilePic)||null};await zw(_b(a,"messages"),e),q("")}catch(R){console.error("Error sending message:",R),P("Failed to send message")}finally{oe(!1)}else P("Database not initialized")},be=async e=>{if(n&&a)try{const t=Sb(a,"messages",e);await Lw(t,{read:!0})}catch(R){console.error("Error marking message as read:",R)}else P("Database not initialized")};(0,r.useEffect)((()=>{if($){const e=(async()=>{if(WE.currentUser&&fe&&a)try{return $w(fw(_b(a,"messages"),gw("receiverId","==",WE.currentUser.uid),bw("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));V(t),K(t.filter((e=>!e.read)).length)}))}catch(R){console.error("Error fetching messages:",R)}else P("Database not initialized")})();return()=>{e&&e.then((e=>null===e||void 0===e?void 0:e()))}}}),[$]);return o||I?(0,$e.jsx)(jO,{maxWidth:"lg",children:(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})})}):R?(0,$e.jsx)(jO,{maxWidth:"lg",children:(0,$e.jsx)(_t,{sx:{mt:4},children:(0,$e.jsx)(cD,{severity:"error",children:R})})}):(0,$e.jsxs)(jO,{maxWidth:"lg",children:[(0,$e.jsx)(_t,{sx:{mt:4},children:(0,$e.jsxs)(_t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 2fr"},gap:4},children:[(0,$e.jsx)(_t,{children:(0,$e.jsx)(xT,{elevation:0,sx:{p:3,textAlign:"center"},children:(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,$e.jsxs)(_t,{sx:{position:"relative"},children:[(0,$e.jsx)(Sj,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(null===n||void 0===n?void 0:n.uid)===fe&&(0,$e.jsx)(BR,{size:"small",onClick:()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.click()},sx:{bgcolor:"background.paper","&:hover":{bgcolor:"background.paper"}},children:(0,$e.jsx)(_L,{fontSize:"small"})}),children:(0,$e.jsx)(XT,{src:F||void 0,sx:{width:100,height:100}})}),(0,$e.jsx)("input",{type:"file",accept:"image/*",ref:J,style:{display:"none"},onChange:async e=>{if(n&&e.target.files&&e.target.files[0])if(a)try{T(!0),P(null);const t=e.target.files[0];if(!t.type.startsWith("image/"))return void P("Please upload an image file");if(t.size>5242880)return void P("Image size should be less than 5MB");const r=Date.now(),o=`profile_${r}.${t.name.split(".").pop()}`,l=b_(GE,`profile_pictures/${n.uid}/${o}`),c=await v_(l,t),u=await y_(c.ref),d=Sb(a,"users",n.uid);await Lw(d,{profilePic:u,updatedAt:Yw()}),z(u),i&&s({...i,profilePic:u}),J.current&&(J.current.value="")}catch(R){console.error("Error updating profile picture:",R),P("Failed to update profile picture")}finally{T(!1)}else P("Database not initialized")}})]}),(0,$e.jsxs)(_t,{sx:{flex:1},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",children:u}),(0,$e.jsxs)(iR,{variant:"subtitle1",color:"text.secondary",children:["@",l]}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2,mb:2,mt:2},children:[(0,$e.jsxs)(tP,{variant:"outlined",component:Re,to:`/profile/${fe}/followers`,children:[O.length," Followers"]}),(0,$e.jsxs)(tP,{variant:"outlined",component:Re,to:`/profile/${fe}/following`,children:[N.length," Following"]})]}),(0,$e.jsx)(iR,{variant:"body1",sx:{mt:1,mb:2},children:f}),(0,$e.jsx)(_t,{sx:{display:"flex",gap:2,alignItems:"center"},children:(null===n||void 0===n?void 0:n.uid)===fe?(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(tP,{variant:"outlined",startIcon:(0,$e.jsx)(KF,{}),onClick:()=>v(!0),sx:{minWidth:"120px",borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",color:"primary.dark"}},children:"Edit Profile"}),ve(),(0,$e.jsx)(BR,{component:Re,to:"/trash",color:"error",sx:{border:"1px solid",borderColor:"error.main","&:hover":{backgroundColor:"error.light",opacity:.8}},children:(0,$e.jsx)(xL,{})})]}):(0,$e.jsxs)($e.Fragment,{children:[(null===n||void 0===n?void 0:n.uid)!==fe&&fe?(0,$e.jsx)(tP,{variant:he?"outlined":"contained",color:he?"error":"primary",startIcon:he?(0,$e.jsx)(Kz,{}):(0,$e.jsx)(Gz,{}),onClick:he?()=>(async e=>{if(!n||!fe||!a)return void P("Database not initialized");const t=e||fe;try{T(!0);const e=Sb(a,"users",n.uid),r=Sb(a,"users",t);await Lw(e,{connections:Xw(t)}),await Lw(r,{followers:Xw(n.uid)}),i&&s({...i,connections:(i.connections||[]).filter((e=>e!==t))});const o=await jw(Sb(a,"users",fe));if(o.exists()){const e=o.data();j(e.connections||[]),D(e.followers||[])}}catch(R){console.error("Error unfollowing user:",R),P("Failed to unfollow user")}finally{T(!1)}})(fe):ge,disabled:I,children:I?"Loading...":he?"Unfollow":"Follow"}):null,ve()]})})]})]})})}),(0,$e.jsxs)(ZL,{open:g,onClose:()=>v(!1),maxWidth:"sm",fullWidth:!0,children:[(0,$e.jsx)(iF,{children:"Edit Profile"}),(0,$e.jsx)(lF,{children:(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,$e.jsx)(bL,{label:"Name",value:se,onChange:e=>ae(e.target.value),fullWidth:!0,variant:"outlined"}),(0,$e.jsx)(bL,{label:"Username",value:ue,onChange:e=>de(e.target.value),fullWidth:!0,variant:"outlined",helperText:"This will be your unique identifier on the platform"}),(0,$e.jsx)(bL,{label:"Bio",value:le,onChange:e=>ce(e.target.value),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",helperText:"Tell others about yourself (You can use emojis!)",InputProps:{endAdornment:(0,$e.jsx)(BR,{onClick:()=>{const e=window.prompt("Enter an emoji:");e&&ce((t=>t+e))},sx:{color:"primary.main","&:hover":{color:"primary.dark"}},children:(0,$e.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\ude0a"})})}})]})}),(0,$e.jsxs)(hF,{sx:{p:3},children:[(0,$e.jsx)(tP,{variant:"outlined",onClick:()=>v(!1),sx:{minWidth:"120px",borderColor:"text.secondary",color:"text.secondary","&:hover":{borderColor:"text.primary",color:"text.primary"}},children:"Cancel"}),(0,$e.jsx)(tP,{variant:"contained",onClick:async()=>{if(n&&a)try{T(!0);const e=Sb(a,"users",n.uid);await Lw(e,{name:se,bio:le,username:ue,updatedAt:Yw()}),v(!1),i&&s({...i,name:se,bio:le,username:ue})}catch(R){console.error("Error updating profile:",R),P("Failed to update profile")}finally{T(!1)}else P("Database not initialized")},disabled:I,sx:{minWidth:"120px",bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:I?"Saving...":"Save Changes"})]})]}),(0,$e.jsx)(_t,{children:(0,$e.jsxs)(xT,{elevation:0,children:[(0,$e.jsxs)($z,{value:y,onChange:(e,t)=>{b(t)},variant:e?"fullWidth":"standard",sx:{borderBottom:1,borderColor:"divider"},children:[(0,$e.jsx)(qz,{label:"Posts"}),(0,$e.jsx)(qz,{label:"Forums"}),(0,$e.jsx)(qz,{label:"Side Rooms"}),(0,$e.jsx)(qz,{label:"Liked Posts"}),(null===n||void 0===n?void 0:n.uid)===fe&&(0,$e.jsx)(qz,{label:"Deleted Items"})]}),(0,$e.jsx)(Yz,{value:y,index:0,children:0===w.length?(0,$e.jsx)(iR,{children:"No posts yet"}):(0,$e.jsx)(cP,{children:w.map((e=>{var t,r,i;return(0,$e.jsxs)(Fj,{divider:!0,children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.authorAvatar||void 0})}),(0,$e.jsx)(nj,{primary:(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"subtitle1",component:"span",children:e.authorName}),(0,$e.jsxs)(iR,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:[hO((null===(t=e.timestamp)||void 0===t||null===(r=t.toDate)||void 0===r?void 0:r.call(t))||new Date)," ago"]})]}),secondary:(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,$e.jsx)(jj,{children:(0,$e.jsxs)(BR,{edge:"end","aria-label":"likes",children:[(0,$e.jsx)(UF,{color:null!==(i=e.likedBy)&&void 0!==i&&i.includes((null===n||void 0===n?void 0:n.uid)||"")?"error":"inherit"}),(0,$e.jsx)(iR,{variant:"body2",sx:{ml:1},children:e.likes||0})]})})]},e.id)}))})}),(0,$e.jsx)(Yz,{value:y,index:1,children:0===_.length?(0,$e.jsx)(iR,{children:"Not a member of any forums yet"}):(0,$e.jsx)(_t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:_.map((e=>(0,$e.jsx)(_t,{children:(0,$e.jsx)(mD,{children:(0,$e.jsxs)(bD,{children:[(0,$e.jsx)(iR,{variant:"h6",children:e.title}),(0,$e.jsx)(iR,{variant:"body2",color:"text.secondary",children:e.description}),(0,$e.jsx)(CF,{size:"small",label:`${e.memberCount} members`,sx:{mt:1}})]})})},e.id)))})}),(0,$e.jsx)(Yz,{value:y,index:2,children:0===A.length?(0,$e.jsx)(iR,{children:"Not a member of any side rooms yet"}):(0,$e.jsx)(_t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:A.map((e=>(0,$e.jsx)(_t,{children:(0,$e.jsx)(mD,{children:(0,$e.jsxs)(bD,{children:[(0,$e.jsx)(iR,{variant:"h6",children:e.name}),(0,$e.jsx)(iR,{variant:"body2",color:"text.secondary",children:e.description}),(0,$e.jsx)(CF,{size:"small",label:`${e.memberCount} members`,sx:{mt:1}})]})})},e.id)))})}),(0,$e.jsx)(Yz,{value:y,index:3,children:0===k.length?(0,$e.jsx)(iR,{children:"No liked posts yet"}):(0,$e.jsx)(cP,{children:k.map((e=>{var t,n;return(0,$e.jsxs)(Fj,{divider:!0,children:[(0,$e.jsx)(nj,{primary:e.content,secondary:`Posted ${hO(e.timestamp instanceof Date?e.timestamp:(null===(t=e.timestamp)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date)} ago`}),(0,$e.jsx)(jj,{children:(0,$e.jsxs)(BR,{edge:"end","aria-label":"likes",children:[(0,$e.jsx)(UF,{}),(0,$e.jsx)(iR,{variant:"body2",sx:{ml:1},children:e.likes.length})]})})]},e.id)}))})}),(null===n||void 0===n?void 0:n.uid)===fe&&(0,$e.jsx)(Yz,{value:y,index:4,children:0===G.length?(0,$e.jsx)(iR,{children:"No deleted items"}):(0,$e.jsx)(cP,{children:G.map((e=>(0,$e.jsxs)(Fj,{divider:!0,children:[(0,$e.jsx)(nj,{primary:(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"subtitle1",children:"post"===e.type?"Post":"room"===e.type?"Side Room":"Forum"}),(0,$e.jsx)(iR,{variant:"body1",children:"post"===e.type?e.content.content:e.content.name})]}),secondary:`Deleted ${hO(e.deletedAt.toDate())} ago`}),(0,$e.jsxs)(jj,{children:[(0,$e.jsx)(tP,{variant:"outlined",onClick:()=>(async(e,t)=>{if(a)try{const n=Sb(a,"deleted_items",e),r=await jw(n);if(!r.exists())return void P("Item not found in trash");const i=r.data(),o="post"===t?"posts":"room"===t?"sideRooms":"forums";await Mw(Sb(a,o,e),{...i.content,deletedAt:null,scheduledForPermanentDeletion:null}),await Fw(n),Y((t=>t.filter((t=>t.id!==e)))),P("Item restored successfully")}catch(R){console.error("Error restoring item:",R),P("Failed to restore item")}else P("Database not initialized")})(e.id,e.type),children:"Restore"}),(0,$e.jsx)(tP,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(a)try{await Fw(Sb(a,"deleted_items",e)),Y((t=>t.filter((t=>t.id!==e)))),P("Item permanently deleted")}catch(R){console.error("Error permanently deleting item:",R),P("Failed to delete item permanently")}else P("Database not initialized")})(e.id),sx:{ml:1},children:"Delete Permanently"})]})]},e.id)))})})]})})]})}),(0,$e.jsxs)(ZL,{open:$,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[(0,$e.jsx)(iF,{children:(null===n||void 0===n?void 0:n.uid)===fe?"Your Messages":`Message ${l}`}),(0,$e.jsx)(lF,{children:(null===n||void 0===n?void 0:n.uid)===fe?(0,$e.jsx)(cP,{children:B.map((e=>{var t;return(0,$e.jsxs)(Fj,{divider:!0,children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.senderAvatar||void 0})}),(0,$e.jsx)(nj,{primary:e.senderName,secondary:e.content}),(0,$e.jsx)(jj,{children:(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString()})})]},e.id)}))}):(0,$e.jsxs)(_t,{sx:{mt:2},children:[(0,$e.jsx)(bL,{fullWidth:!0,multiline:!0,rows:4,label:"Your message",value:W,onChange:e=>q(e.target.value),variant:"outlined",sx:{mb:2}}),(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,$e.jsx)(tP,{variant:"contained",onClick:ye,disabled:!W.trim()||ie,sx:{minWidth:"100px","@media (max-width: 600px)":{width:"100%"}},children:ie?"Sending...":"Send"})})]})}),(0,$e.jsx)(hF,{children:(0,$e.jsx)(tP,{onClick:()=>U(!1),children:"Close"})})]})]})},Xz=(0,NT.A)((0,$e.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),Jz=(0,NT.A)((0,$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),Zz=(0,NT.A)([(0,$e.jsx)("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07 1.95-1.95 5.12-1.95 7.07 0 1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),(0,$e.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"Policy"),e$=(0,NT.A)((0,$e.jsx)("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Cookie"),t$=()=>{pz(NP().breakpoints.down("sm"));const e=[{title:"Safety",icon:(0,$e.jsx)(Xz,{}),path:"/safety",description:"Learn about our safety guidelines and reporting tools"},{title:"About",icon:(0,$e.jsx)(Jz,{}),path:"/about",description:"Learn more about SideEye and our mission"},{title:"Privacy Policy",icon:(0,$e.jsx)(Zz,{}),path:"/privacy-policy",description:"Read our privacy policy and data handling practices"},{title:"Terms of Service",icon:(0,$e.jsx)(Zz,{}),path:"/terms",description:"Review our terms of service and community guidelines"},{title:"Cookie Policy",icon:(0,$e.jsx)(e$,{}),path:"/cookies",description:"Learn about how we use cookies and similar technologies"}];return(0,$e.jsx)(jO,{maxWidth:"md",children:(0,$e.jsxs)(_t,{sx:{py:4},children:[(0,$e.jsx)(iR,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Settings"}),(0,$e.jsx)(xT,{elevation:0,sx:{borderRadius:2},children:(0,$e.jsx)(cP,{children:e.map(((t,n)=>(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsxs)(Fj,{component:Re,to:t.path,sx:{"&:hover":{backgroundColor:"action.hover"},textDecoration:"none",color:"inherit"},children:[(0,$e.jsx)(ZN,{children:t.icon}),(0,$e.jsx)(nj,{primary:t.title,secondary:t.description})]}),n<e.length-1&&(0,$e.jsx)(aj,{})]},t.path)))})})]})})},n$=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],r$=(0,hT.Ay)(LR,{shouldForwardProp:e=>(0,WR.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ij.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Ij.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Ij.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Ij.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Ij.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),i$=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:a,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=n,f=(0,Me.A)(n,n$),m=r.useContext(oP),g=r.useMemo((()=>({dense:l||m.dense||!1,alignItems:i,disableGutters:c})),[i,m.dense,l,c]),v=r.useRef(null);(0,hP.A)((()=>{o&&v.current&&v.current.focus()}),[o]);const y=(0,De.A)({},n,{alignItems:i,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=e,l={root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",a&&"selected"]},c=(0,dT.A)(l,Ej,n);return(0,De.A)({},n,c)})(y),w=(0,oR.A)(v,t);return(0,$e.jsx)(oP.Provider,{value:g,children:(0,$e.jsx)(r$,(0,De.A)({ref:w,href:f.href||f.to,component:(f.href||f.to)&&"div"===s?"button":s,focusVisibleClassName:(0,ht.A)(b.focusVisible,d),ownerState:y,className:(0,ht.A)(b.root,p)},f,{classes:b,children:a}))})})),o$=()=>{const e=ne(),{searchQuery:t}=re(),{db:n,loading:i,error:o}=mF(),[s,a]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(0);pz(NP().breakpoints.down("sm"));(0,r.useEffect)((()=>{(async()=>{if(t&&n)try{c(!0);const e=[],r=fw(_b(n,"users"),gw("username",">=",t.toLowerCase()),gw("username","<=",t.toLowerCase()+"\uf8ff"),xw(20));(await Dw(r)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"user",data:n})}));const i=fw(_b(n,"posts"),gw("content",">=",t.toLowerCase()),gw("content","<=",t.toLowerCase()+"\uf8ff"),bw("content"),xw(20)),o=await Dw(i);for(const t of o.docs){const r=t.data(),i=(await jw(Sb(n,"users",r.authorId))).data();e.push({id:t.id,type:"post",data:{...r,author:i}})}const s=fw(_b(n,"forums"),gw("title",">=",t.toLowerCase()),gw("title","<=",t.toLowerCase()+"\uf8ff"),xw(20));(await Dw(s)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"forum",data:n})}));const l=fw(_b(n,"sideRooms"),gw("name",">=",t.toLowerCase()),gw("name","<=",t.toLowerCase()+"\uf8ff"),xw(20));(await Dw(l)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"sideRoom",data:n})})),a(e)}catch(e){console.error("Error searching:",e),d("Failed to search. Please try again later.")}finally{c(!1)}})()}),[t,n]);const f=s.filter((e=>{switch(h){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return i?(0,$e.jsx)("div",{children:"Loading..."}):o?(0,$e.jsxs)("div",{children:["Error: ",o.message]}):n?(0,$e.jsxs)(jO,{maxWidth:"md",sx:{mt:4},children:[(0,$e.jsxs)(iR,{variant:"h4",gutterBottom:!0,children:['Search Results for "',t,'"']}),u&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:u}),(0,$e.jsx)(_t,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,$e.jsxs)($z,{value:h,onChange:(e,t)=>p(t),children:[(0,$e.jsx)(qz,{label:"Users"}),(0,$e.jsx)(qz,{label:"Posts"}),(0,$e.jsx)(qz,{label:"Forums"}),(0,$e.jsx)(qz,{label:"Side Rooms"})]})}),l?(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})}):0===f.length?(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,$e.jsx)(cP,{children:f.map((t=>(0,$e.jsxs)(i$,{onClick:()=>(t=>{switch(t.type){case"user":e(`/profile/${t.id}`);break;case"post":e(`/post/${t.id}`);break;case"forum":e(`/forum/${t.id}`);break;case"sideRoom":e(`/side-room/${t.id}`)}})(t),sx:{mb:1,borderRadius:1},children:[(0,$e.jsx)(Bj,{children:"user"===t.type?(0,$e.jsx)(XT,{src:t.data.avatar}):(0,$e.jsx)(XT,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,$e.jsx)(nj,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,$e.jsx)("div",{children:"Error: Database connection failed"})},s$=(0,NT.A)((0,$e.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),a$=(0,NT.A)((0,$e.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),l$=(0,NT.A)((0,$e.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),c$=(0,NT.A)((0,$e.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"}),"Whatshot"),u$=()=>{const[e,t]=(0,r.useState)(0),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)({users:[],rooms:[]}),[a,l]=(0,r.useState)(!1),c=ne(),{currentUser:u}=ZI();return(0,$e.jsxs)(jO,{maxWidth:"lg",sx:{mt:4},children:[(0,$e.jsxs)(_t,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[(0,$e.jsx)(dj,{fontSize:"large",color:"primary"}),(0,$e.jsx)(iR,{variant:"h4",component:"h1",children:"Discover"})]}),(0,$e.jsx)(xT,{sx:{p:2,mb:4},children:(0,$e.jsx)(bL,{fullWidth:!0,placeholder:"Search users and rooms...",value:n,onChange:e=>(async e=>{if(i(e),e.length<2)s({users:[],rooms:[]});else{l(!0);try{const t=await QE(),n=e.toLowerCase(),r=_b(t,"users"),i=fw(r,gw("displayNameSearch",">=",n),gw("displayNameSearch","<=",n+"\uf8ff")),o=fw(r,gw("usernameSearch",">=",n),gw("usernameSearch","<=",n+"\uf8ff")),a=fw(_b(t,"rooms"),gw("nameSearch",">=",n),gw("nameSearch","<=",n+"\uf8ff")),[l,c,u]=await Promise.all([Dw(i),Dw(o),Dw(a)]),d=new Map;l.docs.forEach((e=>{const t=e.data();d.set(e.id,{uid:e.id,displayName:t.displayName||"Anonymous",photoURL:t.photoURL||"",username:t.username||"",bio:t.bio||"",followers:t.followers||0,following:t.following||0})})),c.docs.forEach((e=>{if(!d.has(e.id)){const t=e.data();d.set(e.id,{uid:e.id,displayName:t.displayName||"Anonymous",photoURL:t.photoURL||"",username:t.username||"",bio:t.bio||"",followers:t.followers||0,following:t.following||0})}}));const h=u.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name,description:t.description,memberCount:t.memberCount||0,shareCount:t.shareCount||0,isPrivate:t.isPrivate||!1,createdAt:t.createdAt instanceof Bl?t.createdAt.toDate():new Date}}));s({users:Array.from(d.values()),rooms:h})}catch(t){console.error("Search error:",t),wI.error("Failed to search")}finally{l(!1)}}})(e.target.value),InputProps:{startAdornment:(0,$e.jsx)(sz,{position:"start",children:(0,$e.jsx)(s$,{})}),endAdornment:a&&(0,$e.jsx)(sz,{position:"end",children:(0,$e.jsx)(GO,{size:20})})}})}),n.length>0?(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,$e.jsxs)(xT,{children:[(0,$e.jsx)(_t,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,$e.jsx)(iR,{variant:"h6",component:"h2",children:"Users"})}),(0,$e.jsx)(cP,{children:0===o.users.length?(0,$e.jsx)(Fj,{children:(0,$e.jsx)(nj,{primary:"No users found",secondary:"Try a different search term"})}):o.users.map(((e,t)=>(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsxs)(Fj,{secondaryAction:e.uid!==(null===u||void 0===u?void 0:u.uid)&&(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[(0,$e.jsx)(BR,{edge:"end",onClick:()=>c(`/messages/${e.uid}`),title:"Send message",children:(0,$e.jsx)(Hz,{})}),(0,$e.jsx)(BR,{edge:"end",onClick:()=>wI.success("Follow feature coming soon!"),title:"Follow user",children:(0,$e.jsx)(Gz,{})})]}),children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.photoURL,alt:e.displayName,children:e.displayName[0]})}),(0,$e.jsx)(nj,{primary:e.displayName,secondary:(0,$e.jsxs)(r.Fragment,{children:["@",e.username,e.bio&&(0,$e.jsx)(iR,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.bio.length>100?`${e.bio.substring(0,100)}...`:e.bio})]}),onClick:()=>{return t=e.uid,void c(`/profile/${t}`);var t},sx:{cursor:"pointer"}})]}),t<o.users.length-1&&(0,$e.jsx)(aj,{})]},e.uid)))})]}),(0,$e.jsxs)(xT,{children:[(0,$e.jsx)(_t,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,$e.jsx)(iR,{variant:"h6",component:"h2",children:"Rooms"})}),(0,$e.jsx)(cP,{children:0===o.rooms.length?(0,$e.jsx)(Fj,{children:(0,$e.jsx)(nj,{primary:"No rooms found",secondary:"Try a different search term"})}):o.rooms.map(((e,t)=>(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsxs)(Fj,{secondaryAction:(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[(0,$e.jsx)(CF,{icon:(0,$e.jsx)(a$,{}),label:`${e.memberCount} members`,size:"small"}),e.isPrivate&&(0,$e.jsx)(CF,{label:"Private",color:"secondary",size:"small"})]}),children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{children:(0,$e.jsx)(l$,{})})}),(0,$e.jsx)(nj,{primary:e.name,secondary:(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)(iR,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description}),(0,$e.jsxs)(iR,{component:"span",variant:"caption",color:"text.secondary",children:[e.shareCount," shares"]})]}),onClick:()=>{return t=e.id,void c(`/room/${t}`);var t},sx:{cursor:"pointer"}})]}),t<o.rooms.length-1&&(0,$e.jsx)(aj,{})]},e.id)))})]})]}):(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(_t,{sx:{borderBottom:1,borderColor:"divider",mb:4},children:(0,$e.jsxs)($z,{value:e,onChange:(e,n)=>{t(n)},"aria-label":"discover tabs",children:[(0,$e.jsx)(qz,{icon:(0,$e.jsx)(c$,{}),label:"Trending Posts",id:"trending-posts-tab","aria-controls":"trending-posts-panel"}),(0,$e.jsx)(qz,{icon:(0,$e.jsx)(l$,{}),label:"Popular Rooms",id:"popular-rooms-tab","aria-controls":"popular-rooms-panel"})]})}),(0,$e.jsx)(xT,{sx:{p:4,textAlign:"center"},children:(0,$e.jsx)(cD,{severity:"info",sx:{maxWidth:500,mx:"auto"},children:0===e?"Stay tuned! We'll show trending posts with high engagement here.":"Stay tuned! Popular and active rooms will appear here."})})]})]})},d$=()=>{const{user:e}=ZI(),{db:t}=mF(),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(t&&e)try{const n=$w(fw(_b(t,"messages"),gw("participants","array-contains",e.uid),bw("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t),u(!1)}));return()=>n()}catch(n){h("Failed to fetch messages"),console.error("Error fetching messages:",n),u(!1)}}),[t,e]);return c?(0,$e.jsx)(_t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,$e.jsx)(GO,{})}):d?(0,$e.jsx)(_t,{p:3,children:(0,$e.jsx)(iR,{color:"error",children:d})}):(0,$e.jsxs)(_t,{p:3,children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,children:"Messages"}),(0,$e.jsxs)(_t,{mb:3,children:[(0,$e.jsx)(bL,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Type your message...",value:o,onChange:e=>s(e.target.value),sx:{mb:2}}),(0,$e.jsx)(tP,{variant:"contained",color:"primary",onClick:async()=>{if(t&&e&&a&&o.trim())try{await zw(_b(t,"messages"),{text:o,senderId:e.uid,receiverId:a,timestamp:new Date,read:!1,participants:[e.uid,a]}),s("")}catch(n){h("Failed to send message"),console.error("Error sending message:",n)}},disabled:!o.trim()||!a,children:"Send"})]}),(0,$e.jsxs)(cP,{children:[n.map((t=>{var n;return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:t.senderId===(null===e||void 0===e?void 0:e.uid)&&(null===e||void 0===e?void 0:e.photoURL)||void 0})}),(0,$e.jsx)(nj,{primary:t.text,secondary:(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(iR,{component:"span",variant:"body2",color:"text.primary",children:t.senderId===(null===e||void 0===e?void 0:e.uid)?"You":"Other User"})," \u2014 ",new Date(null===(n=t.timestamp)||void 0===n?void 0:n.toDate()).toLocaleString()]})})]}),(0,$e.jsx)(aj,{})]},t.id)})),0===n.length&&(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",children:"No messages yet"})]})]})};var h$=n(9751);const p$=r.createContext();function f$(e){return(0,gT.Ay)("MuiGrid",e)}const m$=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],g$=(0,bt.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...m$.map((e=>`grid-xs-${e}`)),...m$.map((e=>`grid-sm-${e}`)),...m$.map((e=>`grid-md-${e}`)),...m$.map((e=>`grid-lg-${e}`)),...m$.map((e=>`grid-xl-${e}`))]),v$=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function y$(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function b$(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const w$=(0,hT.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(s,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==a&&t[`wrap-xs-${String(a)}`],...d]}})((e=>{let{ownerState:t}=e;return(0,De.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,h$.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,h$.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${g$.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,h$.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=b$({breakpoints:t.breakpoints.values,values:e})),o=(0,h$.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:`-${y$(o)}`,[`& > .${g$.item}`]:{paddingTop:y$(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${g$.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,h$.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=b$({breakpoints:t.breakpoints.values,values:e})),o=(0,h$.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:`calc(100% + ${y$(o)})`,marginLeft:`-${y$(o)}`,[`& > .${g$.item}`]:{paddingLeft:y$(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${g$.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,h$.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return e;const l=Math.round(t/a*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${y$(e)})`;c={flexBasis:t,maxWidth:t}}}o=(0,De.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const x$=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)}));const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==s&&`wrap-xs-${String(s)}`,...u]};return(0,dT.A)(d,f$,t)};const _$=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiGrid"}),{breakpoints:i}=NP(),o=(0,mt.A)(n),{className:s,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=o,v=(0,Me.A)(o,v$),y=p||f,b=l||f,w=r.useContext(p$),x=u?a||12:w,_={},S=(0,De.A)({},v);i.keys.forEach((e=>{null!=v[e]&&(_[e]=v[e],delete S[e])}));const A=(0,De.A)({},o,{columns:x,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},_,{breakpoints:i.keys}),C=x$(A);return(0,$e.jsx)(p$.Provider,{value:x,children:(0,$e.jsx)(w$,(0,De.A)({ownerState:A,className:(0,ht.A)(C.root,s),as:c,ref:t},S))})}));var S$=n(2374);function A$(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function C$(e){return e instanceof A$(e).Element||e instanceof Element}function k$(e){return e instanceof A$(e).HTMLElement||e instanceof HTMLElement}function E$(e){return"undefined"!==typeof ShadowRoot&&(e instanceof A$(e).ShadowRoot||e instanceof ShadowRoot)}var I$=Math.max,T$=Math.min,R$=Math.round;function P$(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function N$(){return!/^((?!chrome|android).)*safari/i.test(P$())}function j$(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&k$(e)&&(i=e.offsetWidth>0&&R$(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&R$(r.height)/e.offsetHeight||1);var s=(C$(e)?A$(e):window).visualViewport,a=!N$()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function O$(e){var t=A$(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function D$(e){return e?(e.nodeName||"").toLowerCase():null}function M$(e){return((C$(e)?e.ownerDocument:e.document)||window.document).documentElement}function L$(e){return j$(M$(e)).left+O$(e).scrollLeft}function F$(e){return A$(e).getComputedStyle(e)}function z$(e){var t=F$(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function $$(e,t,n){void 0===n&&(n=!1);var r=k$(t),i=k$(t)&&function(e){var t=e.getBoundingClientRect(),n=R$(t.width)/e.offsetWidth||1,r=R$(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=M$(t),s=j$(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==D$(t)||z$(o))&&(a=function(e){return e!==A$(e)&&k$(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:O$(e);var t}(t)),k$(t)?((l=j$(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=L$(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function U$(e){var t=j$(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function B$(e){return"html"===D$(e)?e:e.assignedSlot||e.parentNode||(E$(e)?e.host:null)||M$(e)}function V$(e){return["html","body","#document"].indexOf(D$(e))>=0?e.ownerDocument.body:k$(e)&&z$(e)?e:V$(B$(e))}function W$(e,t){var n;void 0===t&&(t=[]);var r=V$(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=A$(r),s=i?[o].concat(o.visualViewport||[],z$(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(W$(B$(s)))}function q$(e){return["table","td","th"].indexOf(D$(e))>=0}function H$(e){return k$(e)&&"fixed"!==F$(e).position?e.offsetParent:null}function K$(e){for(var t=A$(e),n=H$(e);n&&q$(n)&&"static"===F$(n).position;)n=H$(n);return n&&("html"===D$(n)||"body"===D$(n)&&"static"===F$(n).position)?t:n||function(e){var t=/firefox/i.test(P$());if(/Trident/i.test(P$())&&k$(e)&&"fixed"===F$(e).position)return null;var n=B$(e);for(E$(n)&&(n=n.host);k$(n)&&["html","body"].indexOf(D$(n))<0;){var r=F$(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var G$="top",Y$="bottom",Q$="right",X$="left",J$="auto",Z$=[G$,Y$,Q$,X$],eU="start",tU="end",nU="viewport",rU="popper",iU=Z$.reduce((function(e,t){return e.concat([t+"-"+eU,t+"-"+tU])}),[]),oU=[].concat(Z$,[J$]).reduce((function(e,t){return e.concat([t,t+"-"+eU,t+"-"+tU])}),[]),sU=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function aU(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function lU(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var cU={placement:"bottom",modifiers:[],strategy:"absolute"};function uU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function dU(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?cU:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},cU,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:C$(e)?W$(e):e.contextElement?W$(e.contextElement):[],popper:W$(t)};var u=function(e){var t=aU(e);return sU.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(uU(t,n)){i.rects={reference:$$(t,K$(n),"fixed"===i.options.strategy),popper:U$(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:lU((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),a=!0}};if(!uU(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var hU={passive:!0};function pU(e){return e.split("-")[0]}function fU(e){return e.split("-")[1]}function mU(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function gU(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?pU(i):null,s=i?fU(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case G$:t={x:a,y:n.y-r.height};break;case Y$:t={x:a,y:n.y+n.height};break;case Q$:t={x:n.x+n.width,y:l};break;case X$:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?mU(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case eU:t[c]=t[c]-(n[u]/2-r[u]/2);break;case tU:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var vU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yU(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=X$,w=G$,x=window;if(c){var _=K$(n),S="clientHeight",A="clientWidth";if(_===A$(n)&&"static"!==F$(_=M$(n)).position&&"absolute"===a&&(S="scrollHeight",A="scrollWidth"),i===G$||(i===X$||i===Q$)&&o===tU)w=Y$,m-=(d&&_===x&&x.visualViewport?x.visualViewport.height:_[S])-r.height,m*=l?1:-1;if(i===X$||(i===G$||i===Y$)&&o===tU)b=Q$,p-=(d&&_===x&&x.visualViewport?x.visualViewport.width:_[A])-r.width,p*=l?1:-1}var C,k=Object.assign({position:a},c&&vU),E=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:R$(n*i)/i||0,y:R$(r*i)/i||0}}({x:p,y:m},A$(n)):{x:p,y:m};return p=E.x,m=E.y,l?Object.assign({},k,((C={})[w]=y?"0":"",C[b]=v?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},k,((t={})[w]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var bU={left:"right",right:"left",bottom:"top",top:"bottom"};function wU(e){return e.replace(/left|right|bottom|top/g,(function(e){return bU[e]}))}var xU={start:"end",end:"start"};function _U(e){return e.replace(/start|end/g,(function(e){return xU[e]}))}function SU(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&E$(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function AU(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function CU(e,t,n){return t===nU?AU(function(e,t){var n=A$(e),r=M$(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=N$();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+L$(e),y:l}}(e,n)):C$(t)?function(e,t){var n=j$(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):AU(function(e){var t,n=M$(e),r=O$(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=I$(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=I$(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+L$(e),l=-r.scrollTop;return"rtl"===F$(i||n).direction&&(a+=I$(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(M$(e)))}function kU(e,t,n,r){var i="clippingParents"===t?function(e){var t=W$(B$(e)),n=["absolute","fixed"].indexOf(F$(e).position)>=0&&k$(e)?K$(e):e;return C$(n)?t.filter((function(e){return C$(e)&&SU(e,n)&&"body"!==D$(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=CU(e,n,r);return t.top=I$(i.top,t.top),t.right=T$(i.right,t.right),t.bottom=T$(i.bottom,t.bottom),t.left=I$(i.left,t.left),t}),CU(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function EU(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function IU(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function TU(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?"clippingParents":a,c=n.rootBoundary,u=void 0===c?nU:c,d=n.elementContext,h=void 0===d?rU:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=EU("number"!==typeof g?g:IU(g,Z$)),y=h===rU?"reference":rU,b=e.rects.popper,w=e.elements[f?y:h],x=kU(C$(w)?w:w.contextElement||M$(e.elements.popper),l,u,s),_=j$(e.elements.reference),S=gU({reference:_,element:b,strategy:"absolute",placement:i}),A=AU(Object.assign({},b,S)),C=h===rU?A:_,k={top:x.top-C.top+v.top,bottom:C.bottom-x.bottom+v.bottom,left:x.left-C.left+v.left,right:C.right-x.right+v.right},E=e.modifiersData.offset;if(h===rU&&E){var I=E[i];Object.keys(k).forEach((function(e){var t=[Q$,Y$].indexOf(e)>=0?1:-1,n=[G$,Y$].indexOf(e)>=0?"y":"x";k[e]+=I[n]*t}))}return k}function RU(e,t,n){return I$(e,T$(t,n))}function PU(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function NU(e){return[G$,Q$,Y$,X$].some((function(t){return e[t]>=0}))}var jU=dU({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=A$(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,hU)})),a&&l.addEventListener("resize",n.update,hU),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,hU)})),a&&l.removeEventListener("resize",n.update,hU)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=gU({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:pU(t.placement),variation:fU(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,yU(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,yU(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];k$(i)&&D$(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});k$(r)&&D$(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=oU.reduce((function(e,n){return e[n]=function(e,t,n){var r=pU(e),i=[X$,G$].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[X$,Q$].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=pU(g),y=l||(v===g||!f?[wU(g)]:function(e){if(pU(e)===J$)return[];var t=wU(e);return[_U(e),t,_U(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(pU(n)===J$?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?oU:l,u=fU(r),d=u?a?iU:iU.filter((function(e){return fU(e)===u})):Z$,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=TU(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[pU(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,_=new Map,S=!0,A=b[0],C=0;C<b.length;C++){var k=b[C],E=pU(k),I=fU(k)===eU,T=[G$,Y$].indexOf(E)>=0,R=T?"width":"height",P=TU(t,{placement:k,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),N=T?I?Q$:X$:I?Y$:G$;w[R]>x[R]&&(N=wU(N));var j=wU(N),O=[];if(o&&O.push(P[E]<=0),a&&O.push(P[N]<=0,P[j]<=0),O.every((function(e){return e}))){A=k,S=!1;break}_.set(k,O)}if(S)for(var D=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},M=f?3:1;M>0;M--){if("break"===D(M))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=TU(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=pU(t.placement),y=fU(t.placement),b=!y,w=mU(v),x="x"===w?"y":"x",_=t.modifiersData.popperOffsets,S=t.rects.reference,A=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,k="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(_){if(o){var T,R="y"===w?G$:X$,P="y"===w?Y$:Q$,N="y"===w?"height":"width",j=_[w],O=j+g[R],D=j-g[P],M=p?-A[N]/2:0,L=y===eU?S[N]:A[N],F=y===eU?-A[N]:-S[N],z=t.elements.arrow,$=p&&z?U$(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=U[R],V=U[P],W=RU(0,S[N],$[N]),q=b?S[N]/2-M-W-B-k.mainAxis:L-W-B-k.mainAxis,H=b?-S[N]/2+M+W+V+k.mainAxis:F+W+V+k.mainAxis,K=t.elements.arrow&&K$(t.elements.arrow),G=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,Y=null!=(T=null==E?void 0:E[w])?T:0,Q=j+H-Y,X=RU(p?T$(O,j+q-Y-G):O,j,p?I$(D,Q):D);_[w]=X,I[w]=X-j}if(a){var J,Z="x"===w?G$:X$,ee="x"===w?Y$:Q$,te=_[x],ne="y"===x?"height":"width",re=te+g[Z],ie=te-g[ee],oe=-1!==[G$,X$].indexOf(v),se=null!=(J=null==E?void 0:E[x])?J:0,ae=oe?re:te-S[ne]-A[ne]-se+k.altAxis,le=oe?te+S[ne]+A[ne]-se-k.altAxis:ie,ce=p&&oe?function(e,t,n){var r=RU(e,t,n);return r>n?n:r}(ae,te,le):RU(p?ae:re,te,p?le:ie);_[x]=ce,I[x]=ce-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=pU(n.placement),l=mU(a),c=[X$,Q$].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return EU("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:IU(e,Z$))}(i.padding,n),d=U$(o),h="y"===l?G$:X$,p="y"===l?Y$:Q$,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=K$(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[h],w=v-d[c]-u[p],x=v/2-d[c]/2+y,_=RU(b,x,w),S=l;n.modifiersData[r]=((t={})[S]=_,t.centerOffset=_-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&SU(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=TU(t,{elementContext:"reference"}),a=TU(t,{altBoundary:!0}),l=PU(s,r),c=PU(a,i,o),u=NU(l),d=NU(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function OU(e){return(0,gT.Ay)("MuiPopper",e)}(0,bt.A)("MuiPopper",["root"]);const DU=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],MU=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function LU(e){return"function"===typeof e?e():e}function FU(e){return void 0!==e.nodeType}const zU={},$U=r.forwardRef((function(e,t){var n;const{anchorEl:i,children:o,direction:s,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,Me.A)(e,DU),v=r.useRef(null),y=(0,DT.A)(v,t),b=r.useRef(null),w=(0,DT.A)(b,h),x=r.useRef(w);(0,HP.A)((()=>{x.current=w}),[w]),r.useImperativeHandle(h,(()=>b.current),[]);const _=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,s),[S,A]=r.useState(_),[C,k]=r.useState(LU(i));r.useEffect((()=>{b.current&&b.current.forceUpdate()})),r.useEffect((()=>{i&&k(LU(i))}),[i]),(0,HP.A)((()=>{if(!C||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;A(t.placement)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=jU(C,v.current,(0,De.A)({placement:_},d,{modifiers:e}));return x.current(t),()=>{t.destroy(),x.current(null)}}),[C,a,l,c,d,_]);const E={placement:S};null!==m&&(E.TransitionProps=m);const I=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},OU,t)})(e),T=null!=(n=f.root)?n:"div",R=rP({elementType:T,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:I.root});return(0,$e.jsx)(T,(0,De.A)({},R,{children:"function"===typeof o?o(E):o}))})),UU=r.forwardRef((function(e,t){const{anchorEl:n,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=zU,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=(0,Me.A)(e,MU),[b,w]=r.useState(!0);if(!l&&!u&&(!m||b))return null;let x;if(o)x=o;else if(n){const e=LU(n);x=e&&FU(e)?(0,UP.A)(e).body:(0,UP.A)(null).body}const _=u||!l||m&&!b?void 0:"none",S=m?{in:u,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,$e.jsx)(GP,{disablePortal:a,container:x,children:(0,$e.jsx)($U,(0,De.A)({anchorEl:n,direction:s,disablePortal:a,modifiers:c,ref:t,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:(0,De.A)({position:"fixed",top:0,left:0,display:_},f),TransitionProps:S,children:i}))})})),BU=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],VU=(0,hT.Ay)(UU,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),WU=r.forwardRef((function(e,t){var n;const r=(0,S$.A)(),i=(0,tt.b)({props:e,name:"MuiPopper"}),{anchorEl:o,component:s,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v,slots:y,slotProps:b}=i,w=(0,Me.A)(i,BU),x=null!=(n=null==y?void 0:y.root)?n:null==a?void 0:a.Root,_=(0,De.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v},w);return(0,$e.jsx)(VU,(0,De.A)({as:s,direction:null==r?void 0:r.direction,slots:{root:x},slotProps:null!=b?b:l},_,{ref:t}))}));var qU=n(5879);function HU(e){return(0,gT.Ay)("MuiTooltip",e)}const KU=(0,bt.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),GU=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const YU=(0,hT.Ay)(WU,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${KU.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${KU.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${KU.arrow}`]:(0,De.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${KU.arrow}`]:(0,De.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),QU=(0,hT.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,pT.A)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,fT.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:(r=16/14,Math.round(1e5*r)/1e5)+"em",fontWeight:t.typography.fontWeightRegular},{[`.${KU.popper}[data-popper-placement*="left"] &`]:(0,De.A)({transformOrigin:"right center"},n.isRtl?(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${KU.popper}[data-popper-placement*="right"] &`]:(0,De.A)({transformOrigin:"left center"},n.isRtl?(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${KU.popper}[data-popper-placement*="top"] &`]:(0,De.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${KU.popper}[data-popper-placement*="bottom"] &`]:(0,De.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),XU=(0,hT.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,fT.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let JU=!1;const ZU=new yR.E;let eB={x:0,y:0};function tB(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t&&t(n,...i),e(n,...i)}}const nB=r.forwardRef((function(e,t){var n,i,o,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w,x;const _=(0,tt.b)({props:e,name:"MuiTooltip"}),{arrow:S=!1,children:A,components:C={},componentsProps:k={},describeChild:E=!1,disableFocusListener:I=!1,disableHoverListener:T=!1,disableInteractive:R=!1,disableTouchListener:P=!1,enterDelay:N=100,enterNextDelay:j=0,enterTouchDelay:O=700,followCursor:D=!1,id:M,leaveDelay:L=0,leaveTouchDelay:F=1500,onClose:z,onOpen:$,open:U,placement:B="bottom",PopperComponent:V,PopperProps:W={},slotProps:q={},slots:H={},title:K,TransitionComponent:G=$P,TransitionProps:Y}=_,Q=(0,Me.A)(_,GU),X=r.isValidElement(A)?A:(0,$e.jsx)("span",{children:A}),J=NP(),Z=He(),[ee,te]=r.useState(),[ne,re]=r.useState(null),ie=r.useRef(!1),oe=R||D,se=(0,yR.A)(),ae=(0,yR.A)(),le=(0,yR.A)(),ce=(0,yR.A)(),[ue,de]=(0,KM.A)({controlled:U,default:!1,name:"Tooltip",state:"open"});let he=ue;const pe=(0,qU.A)(M),fe=r.useRef(),me=(0,sR.A)((()=>{void 0!==fe.current&&(document.body.style.WebkitUserSelect=fe.current,fe.current=void 0),ce.clear()}));r.useEffect((()=>me),[me]);const ge=e=>{ZU.clear(),JU=!0,de(!0),$&&!he&&$(e)},ve=(0,sR.A)((e=>{ZU.start(800+L,(()=>{JU=!1})),de(!1),z&&he&&z(e),se.start(J.transitions.duration.shortest,(()=>{ie.current=!1}))})),ye=e=>{ie.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),ae.clear(),le.clear(),N||JU&&j?ae.start(JU?j:N,(()=>{ge(e)})):ge(e))},be=e=>{ae.clear(),le.start(L,(()=>{ve(e)}))},{isFocusVisibleRef:we,onBlur:xe,onFocus:_e,ref:Se}=(0,aR.A)(),[,Ae]=r.useState(!1),Ce=e=>{xe(e),!1===we.current&&(Ae(!1),be(e))},ke=e=>{ee||te(e.currentTarget),_e(e),!0===we.current&&(Ae(!0),ye(e))},Ee=e=>{ie.current=!0;const t=X.props;t.onTouchStart&&t.onTouchStart(e)},Ie=e=>{Ee(e),le.clear(),se.clear(),me(),fe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(O,(()=>{document.body.style.WebkitUserSelect=fe.current,ye(e)}))},Te=e=>{X.props.onTouchEnd&&X.props.onTouchEnd(e),me(),le.start(F,(()=>{ve(e)}))};r.useEffect((()=>{if(he)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}}),[ve,he]);const Re=(0,oR.A)(_P(X),Se,te,t);K||0===K||(he=!1);const Pe=r.useRef(),Ne={},je="string"===typeof K;E?(Ne.title=he||!je||T?null:K,Ne["aria-describedby"]=he?pe:null):(Ne["aria-label"]=je?K:null,Ne["aria-labelledby"]=he&&!je?pe:null);const Oe=(0,De.A)({},Ne,Q,X.props,{className:(0,ht.A)(Q.className,X.props.className),onTouchStart:Ee,ref:Re},D?{onMouseMove:e=>{const t=X.props;t.onMouseMove&&t.onMouseMove(e),eB={x:e.clientX,y:e.clientY},Pe.current&&Pe.current.update()}}:{});const Le={};P||(Oe.onTouchStart=Ie,Oe.onTouchEnd=Te),T||(Oe.onMouseOver=tB(ye,Oe.onMouseOver),Oe.onMouseLeave=tB(be,Oe.onMouseLeave),oe||(Le.onMouseOver=ye,Le.onMouseLeave=be)),I||(Oe.onFocus=tB(ke,Oe.onFocus),Oe.onBlur=tB(Ce,Oe.onBlur),oe||(Le.onFocus=ke,Le.onBlur=Ce));const Fe=r.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=W.popperOptions)&&e.modifiers&&(t=t.concat(W.popperOptions.modifiers)),(0,De.A)({},W.popperOptions,{modifiers:t})}),[ne,W]),ze=(0,De.A)({},_,{isRtl:Z,arrow:S,disableInteractive:oe,placement:B,PopperComponentProp:V,touch:ie.current}),Ue=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,pT.A)(o.split("-")[0])}`],arrow:["arrow"]};return(0,dT.A)(s,HU,t)})(ze),Be=null!=(n=null!=(i=H.popper)?i:C.Popper)?n:YU,Ve=null!=(o=null!=(s=null!=(a=H.transition)?a:C.Transition)?s:G)?o:$P,We=null!=(l=null!=(c=H.tooltip)?c:C.Tooltip)?l:QU,qe=null!=(u=null!=(d=H.arrow)?d:C.Arrow)?u:XU,Ke=LT(Be,(0,De.A)({},W,null!=(h=q.popper)?h:k.popper,{className:(0,ht.A)(Ue.popper,null==W?void 0:W.className,null==(p=null!=(f=q.popper)?f:k.popper)?void 0:p.className)}),ze),Ge=LT(Ve,(0,De.A)({},Y,null!=(m=q.transition)?m:k.transition),ze),Ye=LT(We,(0,De.A)({},null!=(g=q.tooltip)?g:k.tooltip,{className:(0,ht.A)(Ue.tooltip,null==(v=null!=(y=q.tooltip)?y:k.tooltip)?void 0:v.className)}),ze),Qe=LT(qe,(0,De.A)({},null!=(b=q.arrow)?b:k.arrow,{className:(0,ht.A)(Ue.arrow,null==(w=null!=(x=q.arrow)?x:k.arrow)?void 0:w.className)}),ze);return(0,$e.jsxs)(r.Fragment,{children:[r.cloneElement(X,Oe),(0,$e.jsx)(Be,(0,De.A)({as:null!=V?V:WU,placement:B,anchorEl:D?{getBoundingClientRect:()=>({top:eB.y,left:eB.x,right:eB.x,bottom:eB.y,width:0,height:0})}:ee,popperRef:Pe,open:!!ee&&he,id:pe,transition:!0},Le,Ke,{popperOptions:Fe,children:e=>{let{TransitionProps:t}=e;return(0,$e.jsx)(Ve,(0,De.A)({timeout:J.transitions.duration.shorter},t,Ge,{children:(0,$e.jsxs)(We,(0,De.A)({},Ye,{children:[K,S?(0,$e.jsx)(qe,(0,De.A)({},Qe,{ref:re})):null]}))}))}}))]})}));function rB(e){return(0,gT.Ay)("MuiCardActions",e)}(0,bt.A)("MuiCardActions",["root","spacing"]);const iB=["disableSpacing","className"],oB=(0,hT.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),sB=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,o=(0,Me.A)(n,iB),s=(0,De.A)({},n,{disableSpacing:r}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,dT.A)(r,rB,t)})(s);return(0,$e.jsx)(oB,(0,De.A)({className:(0,ht.A)(a.root,i),ownerState:s,ref:t},o))})),aB=(0,NT.A)((0,$e.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var lB=n(8604);const cB=["component","direction","spacing","divider","children","className","useFlexGap"],uB=(0,rt.A)(),dB=IO("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function hB(e){return vO({props:e,name:"MuiStack",defaultTheme:uB})}function pB(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,i,o)=>(e.push(i),o<n.length-1&&e.push(r.cloneElement(t,{key:`separator-${o}`})),e)),[])}const fB=e=>{let{ownerState:t,theme:n}=e,r=(0,De.A)({display:"flex",flexDirection:"column"},(0,h$.NI)({theme:n},(0,h$.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,lB.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,h$.kW)({values:t.direction,base:i}),s=(0,h$.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,lB._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,lB._W)(e,n)}};var i};r=(0,yO.A)(r,(0,h$.NI)({theme:n},s,a))}return r=(0,h$.iZ)(n.breakpoints,r),r};const mB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=dB,useThemeProps:n=hB,componentName:i="MuiStack"}=e,o=t(fB);return r.forwardRef((function(e,t){const r=n(e),s=(0,mt.A)(r),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=s,f=(0,Me.A)(s,cB),m={direction:l,spacing:c,useFlexGap:p},g=(0,dT.A)({root:["root"]},(e=>(0,gT.Ay)(i,e)),{});return(0,$e.jsx)(o,(0,De.A)({as:a,ownerState:m,ref:t,className:(0,ht.A)(g.root,h)},f,{children:u?pB(d,u):d}))}))}({createStyledComponent:(0,hT.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,tt.b)({props:e,name:"MuiStack"})});function gB(e){return(0,gT.Ay)("MuiFormControlLabel",e)}const vB=(0,bt.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),yB=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],bB=(0,hT.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${vB.label}`]:t.label},t.root,t[`labelPlacement${(0,pT.A)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${vB.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${vB.label}`]:{[`&.${vB.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})})),wB=(0,hT.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${vB.error}`]:{color:(t.vars||t).palette.error.main}}})),xB=r.forwardRef((function(e,t){var n,i;const o=(0,tt.b)({props:e,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:f={}}=o,m=(0,Me.A)(o,yB),g=RD(),v=null!=(n=null!=c?c:l.props.disabled)?n:null==g?void 0:g.disabled,y=null!=p?p:l.props.required,b={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof o[e]&&(b[e]=o[e])}));const w=ID({props:o,muiFormControl:g,states:["error"]}),x=(0,De.A)({},o,{disabled:v,labelPlacement:h,required:y,error:w.error}),_=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,s={root:["root",n&&"disabled",`labelPlacement${(0,pT.A)(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,dT.A)(s,gB,t)})(x),S=null!=(i=f.typography)?i:a.typography;let A=d;return null==A||A.type===iR||u||(A=(0,$e.jsx)(iR,(0,De.A)({component:"span"},S,{className:(0,ht.A)(_.label,null==S?void 0:S.className),children:A}))),(0,$e.jsxs)(bB,(0,De.A)({className:(0,ht.A)(_.root,s),ownerState:x,ref:t},m,{children:[r.cloneElement(l,b),y?(0,$e.jsxs)(mB,{display:"block",children:[A,(0,$e.jsxs)(wB,{ownerState:x,"aria-hidden":!0,className:_.asterisk,children:["\u2009","*"]})]}):A]}))}));function _B(e){return(0,gT.Ay)("PrivateSwitchBase",e)}(0,bt.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const SB=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],AB=(0,hT.Ay)(LR)((e=>{let{ownerState:t}=e;return(0,De.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),CB=(0,hT.Ay)("input",{shouldForwardProp:WR.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),kB=r.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:w,type:x,value:_}=e,S=(0,Me.A)(e,SB),[A,C]=(0,KM.A)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),k=RD();let E=a;k&&"undefined"===typeof E&&(E=k.disabled);const I="checkbox"===x||"radio"===x,T=(0,De.A)({},e,{checked:A,disabled:E,disableFocusRipple:l,edge:c}),R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,pT.A)(i)}`],input:["input"]};return(0,dT.A)(o,_B,t)})(T);return(0,$e.jsxs)(AB,(0,De.A)({component:"span",className:(0,ht.A)(R.root,o),centerRipple:!0,focusRipple:!l,disabled:E,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),k&&k.onFocus&&k.onFocus(e)},onBlur:e=>{m&&m(e),k&&k.onBlur&&k.onBlur(e)},ownerState:T,ref:t},S,{children:[(0,$e.jsx)(CB,(0,De.A)({autoFocus:n,checked:r,defaultChecked:s,className:R.input,disabled:E,id:I?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;C(t),g&&g(e,t)},readOnly:y,ref:p,required:b,ownerState:T,tabIndex:w,type:x},"checkbox"===x&&void 0===_?{}:{value:_},h)),A?i:u]}))}));function EB(e){return(0,gT.Ay)("MuiSwitch",e)}const IB=(0,bt.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),TB=["className","color","edge","size","sx"],RB=(0,hT.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,pT.A)(n.edge)}`],t[`size${(0,pT.A)(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${IB.thumb}`]:{width:16,height:16},[`& .${IB.switchBase}`]:{padding:4,[`&.${IB.checked}`]:{transform:"translateX(16px)"}}}}]}),PB=(0,hT.Ay)(kB,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${IB.input}`]:t.input},"default"!==n.color&&t[`color${(0,pT.A)(n.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${IB.checked}`]:{transform:"translateX(20px)"},[`&.${IB.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${IB.checked} + .${IB.track}`]:{opacity:.5},[`&.${IB.disabled} + .${IB.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${IB.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${IB.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,fT.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${IB.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${"light"===t.palette.mode?(0,fT.a)(t.palette[n].main,.62):(0,fT.e$)(t.palette[n].main,.55)}`}},[`&.${IB.checked} + .${IB.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),NB=(0,hT.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),jB=(0,hT.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),OB=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,Me.A)(n,TB),c=(0,De.A)({},n,{color:i,edge:o,size:s}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&`edge${(0,pT.A)(n)}`,`size${(0,pT.A)(r)}`],switchBase:["switchBase",`color${(0,pT.A)(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,dT.A)(a,EB,t);return(0,De.A)({},t,l)})(c),d=(0,$e.jsx)(jB,{className:u.thumb,ownerState:c});return(0,$e.jsxs)(RB,{className:(0,ht.A)(u.root,r),sx:a,ownerState:c,children:[(0,$e.jsx)(PB,(0,De.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,De.A)({},u,{root:u.switchBase})})),(0,$e.jsx)(NB,{className:u.track,ownerState:c})]})})),DB=e=>{let{open:t,onClose:n}=e;const{currentUser:i}=ZI(),o=ne(),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)([]),[w,x]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[A,C]=(0,r.useState)(50),[k,E]=(0,r.useState)([]),[I,T]=(0,r.useState)(""),[R,P]=(0,r.useState)(!1),[N,j]=(0,r.useState)(4),[O,D]=(0,r.useState)(!1),[M,L]=(0,r.useState)(2),[F,z]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();z(e)}catch(e){console.error("Error initializing Firestore:",e)}})()}),[]);const $=()=>{w.trim()&&!y.includes(w.trim())&&(b([...y,w.trim()]),x(""))},U=()=>{I.trim()&&!k.includes(I.trim())&&(E([...k,I.trim()]),T(""))};return(0,$e.jsxs)(ZL,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,children:[(0,$e.jsx)(iF,{children:"Create Side Room"}),(0,$e.jsxs)(lF,{children:[l&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:l}),(0,$e.jsx)(bL,{autoFocus:!0,margin:"dense",label:"Room Name",type:"text",fullWidth:!0,value:u,onChange:e=>d(e.target.value),required:!0}),(0,$e.jsx)(bL,{margin:"dense",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,value:h,onChange:e=>p(e.target.value)}),(0,$e.jsxs)(RM,{fullWidth:!0,margin:"dense",children:[(0,$e.jsx)(CM,{children:"Category"}),(0,$e.jsxs)(pL,{value:_,onChange:e=>S(e.target.value),label:"Category",children:[(0,$e.jsx)(QN,{value:"general",children:"General"}),(0,$e.jsx)(QN,{value:"gaming",children:"Gaming"}),(0,$e.jsx)(QN,{value:"music",children:"Music"}),(0,$e.jsx)(QN,{value:"movies",children:"Movies & TV"}),(0,$e.jsx)(QN,{value:"sports",children:"Sports"}),(0,$e.jsx)(QN,{value:"tech",children:"Technology"}),(0,$e.jsx)(QN,{value:"art",children:"Art & Design"}),(0,$e.jsx)(QN,{value:"education",children:"Education"}),(0,$e.jsx)(QN,{value:"other",children:"Other"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:2},children:[(0,$e.jsx)(iR,{variant:"subtitle2",children:"Tags"}),(0,$e.jsx)(_t,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:y.map((e=>(0,$e.jsx)(CF,{label:e,onDelete:()=>{return t=e,void b(y.filter((e=>e!==t)));var t}},e)))}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[(0,$e.jsx)(bL,{size:"small",value:w,onChange:e=>x(e.target.value),placeholder:"Add tag",onKeyPress:e=>"Enter"===e.key&&$()}),(0,$e.jsx)(BR,{onClick:$,size:"small",children:(0,$e.jsx)(wL,{})})]})]}),(0,$e.jsxs)(_t,{sx:{mt:2},children:[(0,$e.jsx)(iR,{variant:"subtitle2",children:"Rules"}),(0,$e.jsx)(_t,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:k.map((e=>(0,$e.jsx)(CF,{label:e,onDelete:()=>{return t=e,void E(k.filter((e=>e!==t)));var t}},e)))}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[(0,$e.jsx)(bL,{size:"small",value:I,onChange:e=>T(e.target.value),placeholder:"Add rule",onKeyPress:e=>"Enter"===e.key&&U()}),(0,$e.jsx)(BR,{onClick:U,size:"small",children:(0,$e.jsx)(wL,{})})]})]}),(0,$e.jsx)(xB,{control:(0,$e.jsx)(OB,{checked:f,onChange:e=>m(e.target.checked)}),label:"Private Room"}),f&&(0,$e.jsx)(bL,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:g,onChange:e=>v(e.target.value),required:!0}),(0,$e.jsx)(bL,{margin:"dense",label:"Maximum Participants",type:"number",fullWidth:!0,value:A,onChange:e=>C(Number(e.target.value)),inputProps:{min:2,max:100}}),(0,$e.jsx)(aj,{sx:{my:2}}),(0,$e.jsx)(iR,{variant:"h6",sx:{mb:2},children:"Live Session Settings"}),(0,$e.jsx)(xB,{control:(0,$e.jsx)(OB,{checked:R,onChange:e=>P(e.target.checked)}),label:"Enable Live Sessions"}),R&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(bL,{margin:"dense",label:"Maximum Live Participants",type:"number",fullWidth:!0,value:N,onChange:e=>j(Number(e.target.value)),inputProps:{min:1,max:10},helperText:"Maximum number of people who can join the live session"}),(0,$e.jsx)(xB,{control:(0,$e.jsx)(OB,{checked:O,onChange:e=>D(e.target.checked)}),label:"Allow Guest Speakers"}),O&&(0,$e.jsx)(bL,{margin:"dense",label:"Guest Speaker Limit",type:"number",fullWidth:!0,value:M,onChange:e=>L(Number(e.target.value)),inputProps:{min:1,max:5},helperText:"Maximum number of guest speakers allowed in a session"})]})]}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:n,children:"Cancel"}),(0,$e.jsx)(tP,{onClick:async()=>{if(i&&F)if(u.trim())if(!f||g.trim()){a(!0),c("");try{const e=await jw(Sb(F,"users",i.uid));if(!e.exists())throw new Error("User data not found");const t=e.data(),r={userId:i.uid,username:t.username||i.displayName||"Unknown User",displayName:t.displayName||t.username||i.displayName||"Unknown User",avatar:t.avatar||t.photoURL||i.photoURL||""},s=new Date,a={name:u.trim(),description:h.trim(),ownerId:i.uid,owner:r,members:[{...r,role:"owner",joinedAt:s}],memberCount:1,createdAt:s,isPrivate:f,password:f?g.trim():null,tags:y,category:_,maxParticipants:A,rules:k,isLive:!1,liveParticipants:[],activeUsers:0,bannedUsers:[],enableLiveSessions:R,maxLiveParticipants:N,allowGuestSpeakers:O,guestSpeakerLimit:M,liveSettings:{audioEnabled:!0,videoEnabled:!1,screenSharingEnabled:!1,raiseHandEnabled:!0,chatEnabled:!0,reactionsEnabled:!0}},l=await zw(_b(F,"sideRooms"),a),c=Sb(F,"users",i.uid);await Lw(c,{sideRooms:Qw(l.id)}),n(),o(`/side-room/${l.id}`)}catch(e){console.error("Error creating room:",e),c("Failed to create room. Please try again.")}finally{a(!1)}}else c("Password is required for private rooms");else c("Room name is required")},variant:"contained",disabled:s,children:s?"Creating...":"Create Room"})]})]})},MB=["All","Gaming","Music","Art","Technology","Sports","Education","Entertainment","Social","Other"],LB=()=>{const{db:e}=mF(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(""),[_,S]=(0,r.useState)("All"),[A,C]=(0,r.useState)("newest"),k=ne(),{currentUser:E}=ZI();(0,r.useEffect)((()=>{if(e)try{const t=$w(fw(_b(e,"sideRooms"),bw("createdAt","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data(),memberCount:e.data().memberCount||0,maxMembers:e.data().maxMembers||50})));n(t),a(!1)}));return()=>t()}catch(t){c("Error fetching rooms"),a(!1)}}),[e]),(0,r.useEffect)((()=>{let e=[...t];if(w){const t=w.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.genre&&e.genre.toLowerCase().includes(t)))}"All"!==_&&(e=e.filter((e=>e.genre===_))),e.sort(((e,t)=>{switch(A){case"newest":return t.createdAt.toMillis()-e.createdAt.toMillis();case"popular":return t.memberCount-e.memberCount;case"active":return t.lastActive.toMillis()-e.lastActive.toMillis();default:return 0}})),o(e)}),[t,w,_,A]);return s?(0,$e.jsx)("div",{children:"Loading..."}):l?(0,$e.jsxs)("div",{children:["Error: ",l]}):(0,$e.jsxs)(_t,{sx:{p:3},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",children:"Side Rooms \ud83c\udfad"}),(0,$e.jsx)(tP,{variant:"contained",color:"primary",startIcon:(0,$e.jsx)(wL,{}),onClick:()=>d(!0),children:"Create Room"})]}),u&&(0,$e.jsx)(DB,{open:u,onClose:()=>d(!1)}),(0,$e.jsx)(xT,{sx:{p:2,mb:3},children:(0,$e.jsxs)(_$,{container:!0,spacing:2,alignItems:"center",children:[(0,$e.jsx)(_$,{item:!0,xs:12,md:4,children:(0,$e.jsx)(bL,{fullWidth:!0,placeholder:"Search rooms by name or genre...",value:w,onChange:e=>x(e.target.value),InputProps:{startAdornment:(0,$e.jsx)(sz,{position:"start",children:(0,$e.jsx)(s$,{})})}})}),(0,$e.jsx)(_$,{item:!0,xs:12,md:3,children:(0,$e.jsxs)(RM,{fullWidth:!0,children:[(0,$e.jsx)(CM,{children:"Genre"}),(0,$e.jsx)(pL,{value:_,label:"Genre",onChange:e=>S(e.target.value),children:MB.map((e=>(0,$e.jsx)(QN,{value:e,children:e},e)))})]})}),(0,$e.jsx)(_$,{item:!0,xs:12,md:3,children:(0,$e.jsxs)(RM,{fullWidth:!0,children:[(0,$e.jsx)(CM,{children:"Sort by"}),(0,$e.jsxs)(pL,{value:A,label:"Sort by",onChange:e=>C(e.target.value),children:[(0,$e.jsx)(QN,{value:"newest",children:"Newest First"}),(0,$e.jsx)(QN,{value:"popular",children:"Most Popular"}),(0,$e.jsx)(QN,{value:"active",children:"Most Active"})]})]})})]})}),(0,$e.jsx)(_t,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:0===i.length?(0,$e.jsx)(iR,{variant:"body1",sx:{width:"100%",textAlign:"center",mt:4},children:"No rooms found matching your criteria"}):i.map((t=>(0,$e.jsxs)(mD,{sx:{width:300,display:"flex",flexDirection:"column"},children:[(0,$e.jsxs)(bD,{sx:{flexGrow:1},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,$e.jsx)(iR,{variant:"h6",component:"div",sx:{flexGrow:1},children:t.name}),t.isPrivate&&(0,$e.jsx)(nB,{title:"Private Room",children:(0,$e.jsx)(aB,{fontSize:"small"})})]}),(0,$e.jsx)(iR,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t.genre&&(0,$e.jsx)(CF,{size:"small",label:t.genre,color:"primary",variant:"outlined"}),(0,$e.jsx)(CF,{size:"small",icon:(0,$e.jsx)(l$,{}),label:`${t.memberCount||0} members`,variant:"outlined"})]})]}),(0,$e.jsx)(sB,{children:(0,$e.jsx)(tP,{fullWidth:!0,variant:"contained",onClick:()=>(async t=>{if(e&&E)if(t.isPrivate)m(t),p(!0);else try{var n;b(!0);const r=Sb(e,"sideRooms",t.id);if(null===(n=t.members)||void 0===n?void 0:n.some((e=>e.userId===E.uid)))return void k(`/side-room/${t.id}`);if(t.memberCount>=t.maxMembers)return void wI.error("Room is full");const i={userId:E.uid,username:E.displayName||"Anonymous",avatar:E.photoURL||"",role:"member",joinedAt:new Date};await Lw(r,{members:Qw(i),memberCount:t.memberCount+1,lastActive:new Date}),wI.success("Joined room successfully"),k(`/side-room/${t.id}`)}catch(l){console.error("Error joining room:",l),wI.error("Failed to join room")}finally{b(!1)}else wI.error("Not authenticated")})(t),disabled:y,children:y?(0,$e.jsx)(GO,{size:24}):"Join Room"})})]},t.id)))}),(0,$e.jsxs)(ZL,{open:h,onClose:()=>!y&&p(!1),children:[(0,$e.jsx)(iF,{children:"Enter Room Password"}),(0,$e.jsx)(lF,{children:(0,$e.jsx)(bL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:g,onChange:e=>v(e.target.value),disabled:y})}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:()=>p(!1),disabled:y,children:"Cancel"}),(0,$e.jsx)(tP,{onClick:async()=>{if(f&&e&&E)if(g===f.password)try{var t;b(!0);const n=Sb(e,"sideRooms",f.id),r={userId:E.uid,username:E.displayName||"Anonymous",avatar:E.photoURL||"",role:"member",joinedAt:new Date};if(null===(t=f.members)||void 0===t?void 0:t.some((e=>(console.log("Comparing member ID:",e.userId,"with current user ID:",E.uid),e.userId===E.uid))))return console.log("User is already a member, navigating to room"),void k(`/side-room/${f.id}`);if(f.memberCount>=(f.maxMembers||50))return void wI.error("Room is full");await Lw(n,{members:Qw(r),memberCount:(f.memberCount||0)+1,lastActive:new Date}),wI.success("Joined room successfully"),p(!1),v(""),m(null),k(`/side-room/${f.id}`)}catch(l){console.error("Error joining room:",l),wI.error("Failed to join room")}finally{b(!1)}else wI.error("Incorrect password")},variant:"contained",disabled:y,children:"Join"})]})]})]})};var FB=n(1052);function zB(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function $B(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const UB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=e;return(e,a)=>{let{inputValue:l,getOptionLabel:c}=a,u=s?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=zB(u));const d=u?e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=zB(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):e;return"number"===typeof r?d.slice(0,r):d}}(),BB=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))},VB=[];const WB=function(e){const{unstable_isActiveElementInListbox:t=BB,unstable_classNamePrefix:n="Mui",autoComplete:i=!1,autoHighlight:o=!1,autoSelect:s=!1,blurOnSelect:a=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:c=!1,componentName:u="useAutocomplete",defaultValue:d=(e.multiple?VB:null),disableClearable:h=!1,disableCloseOnSelect:p=!1,disabled:f,disabledItemsFocusable:m=!1,disableListWrap:g=!1,filterOptions:v=UB,filterSelectedOptions:y=!1,freeSolo:b=!1,getOptionDisabled:w,getOptionKey:x,getOptionLabel:_=e=>{var t;return null!=(t=e.label)?t:e},groupBy:S,handleHomeEndKeys:A=!e.freeSolo,id:C,includeInputInList:k=!1,inputValue:E,isOptionEqualToValue:I=(e,t)=>e===t,multiple:T=!1,onChange:R,onClose:P,onHighlightChange:N,onInputChange:j,onOpen:O,open:D,openOnFocus:M=!1,options:L,readOnly:F=!1,selectOnFocus:z=!e.freeSolo,value:$}=e,U=(0,wD.A)(C);let B=_;B=e=>{const t=_(e);return"string"!==typeof t?String(t):t};const V=r.useRef(!1),W=r.useRef(!0),q=r.useRef(null),H=r.useRef(null),[K,G]=r.useState(null),[Y,Q]=r.useState(-1),X=o?0:-1,J=r.useRef(X),[Z,ee]=(0,FB.A)({controlled:$,default:d,name:u}),[te,ne]=(0,FB.A)({controlled:E,default:"",name:u,state:"inputValue"}),[re,ie]=r.useState(!1),oe=r.useCallback(((e,t)=>{if(!(T?Z.length<t.length:null!==t)&&!l)return;let n;if(T)n="";else if(null==t)n="";else{const e=B(t);n="string"===typeof e?e:""}te!==n&&(ne(n),j&&j(e,n,"reset"))}),[B,te,T,j,ne,l,Z]),[se,ae]=(0,FB.A)({controlled:D,default:!1,name:u,state:"open"}),[le,ce]=r.useState(!0),ue=!T&&null!=Z&&te===B(Z),de=se&&!F,he=de?v(L.filter((e=>!y||!(T?Z:[Z]).some((t=>null!==t&&I(e,t))))),{inputValue:ue&&le?"":te,getOptionLabel:B}):[],pe=mj({filteredOptions:he,value:Z,inputValue:te});r.useEffect((()=>{const e=Z!==pe.value;re&&!e||b&&!e||oe(null,Z)}),[Z,oe,re,pe.value,b]);const fe=se&&he.length>0&&!F,me=(0,rN.A)((e=>{-1===e?q.current.focus():K.querySelector(`[data-tag-index="${e}"]`).focus()}));r.useEffect((()=>{T&&Y>Z.length-1&&(Q(-1),me(-1))}),[Z,T,Y,me]);const ge=(0,rN.A)((e=>{let{event:t,index:r,reason:i="auto"}=e;if(J.current=r,-1===r?q.current.removeAttribute("aria-activedescendant"):q.current.setAttribute("aria-activedescendant",`${U}-option-${r}`),N&&N(t,-1===r?null:he[r],i),!H.current)return;const o=H.current.querySelector(`[role="option"].${n}-focused`);o&&(o.classList.remove(`${n}-focused`),o.classList.remove(`${n}-focusVisible`));let s=H.current;if("listbox"!==H.current.getAttribute("role")&&(s=H.current.parentElement.querySelector('[role="listbox"]')),!s)return;if(-1===r)return void(s.scrollTop=0);const a=H.current.querySelector(`[data-option-index="${r}"]`);if(a&&(a.classList.add(`${n}-focused`),"keyboard"===i&&a.classList.add(`${n}-focusVisible`),s.scrollHeight>s.clientHeight&&"mouse"!==i&&"touch"!==i)){const e=a,t=s.clientHeight+s.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?s.scrollTop=n-s.clientHeight:e.offsetTop-e.offsetHeight*(S?1.3:0)<s.scrollTop&&(s.scrollTop=e.offsetTop-e.offsetHeight*(S?1.3:0))}})),ve=(0,rN.A)((e=>{let{event:t,diff:n,direction:r="next",reason:o="auto"}=e;if(!de)return;const s=function(e,t){if(!H.current||e<0||e>=he.length)return-1;let n=e;for(;;){const r=H.current.querySelector(`[data-option-index="${n}"]`),i=!m&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!i)return n;if(n="next"===t?(n+1)%he.length:(n-1+he.length)%he.length,n===e)return-1}}((()=>{const e=he.length-1;if("reset"===n)return X;if("start"===n)return 0;if("end"===n)return e;const t=J.current+n;return t<0?-1===t&&k?-1:g&&-1!==J.current||Math.abs(n)>1?0:e:t>e?t===e+1&&k?-1:g||Math.abs(n)>1?e:0:t})(),r);if(ge({index:s,reason:o,event:t}),i&&"reset"!==n)if(-1===s)q.current.value=te;else{const e=B(he[s]);q.current.value=e;0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&q.current.setSelectionRange(te.length,e.length)}})),ye=r.useCallback((()=>{if(!de)return;const e=(()=>{if(-1!==J.current&&pe.filteredOptions&&pe.filteredOptions.length!==he.length&&pe.inputValue===te&&(T?Z.length===pe.value.length&&pe.value.every(((e,t)=>B(Z[t])===B(e))):(e=pe.value,t=Z,(e?B(e):"")===(t?B(t):"")))){const e=pe.filteredOptions[J.current];if(e)return $B(he,(t=>B(t)===B(e)))}var e,t;return-1})();if(-1!==e)return void(J.current=e);const t=T?Z[0]:Z;if(0!==he.length&&null!=t){if(H.current)if(null==t)J.current>=he.length-1?ge({index:he.length-1}):ge({index:J.current});else{const e=he[J.current];if(T&&e&&-1!==$B(Z,(t=>I(e,t))))return;const n=$B(he,(e=>I(e,t)));-1===n?ve({diff:"reset"}):ge({index:n})}}else ve({diff:"reset"})}),[he.length,!T&&Z,y,ve,ge,de,te,T]),be=(0,rN.A)((e=>{(0,KP.A)(H,e),e&&ye()}));r.useEffect((()=>{ye()}),[ye]);const we=e=>{se||(ae(!0),ce(!0),O&&O(e))},xe=(e,t)=>{se&&(ae(!1),P&&P(e,t))},_e=(e,t,n,r)=>{if(T){if(Z.length===t.length&&Z.every(((e,n)=>e===t[n])))return}else if(Z===t)return;R&&R(e,t,n,r),ee(t)},Se=r.useRef(!1),Ae=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",i=t;if(T){i=Array.isArray(Z)?Z.slice():[];const e=$B(i,(e=>I(t,e)));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),r="removeOption")}oe(e,i),_e(e,i,r,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||xe(e,r),(!0===a||"touch"===a&&Se.current||"mouse"===a&&!Se.current)&&q.current.blur()},Ce=(e,t)=>{if(!T)return;""===te&&xe(e,"toggleInput");let n=Y;-1===Y?""===te&&"previous"===t&&(n=Z.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===Z.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===Z.length||"previous"===t&&-1===n)return-1;const e=K.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),Q(n),me(n)},ke=e=>{V.current=!0,ne(""),j&&j(e,"","clear"),_e(e,T?[]:null,"clear")},Ee=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(Q(-1),me(-1)),229!==t.which))switch(t.key){case"Home":de&&A&&(t.preventDefault(),ve({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":de&&A&&(t.preventDefault(),ve({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),ve({diff:-5,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"PageDown":t.preventDefault(),ve({diff:5,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowDown":t.preventDefault(),ve({diff:1,direction:"next",reason:"keyboard",event:t}),we(t);break;case"ArrowUp":t.preventDefault(),ve({diff:-1,direction:"previous",reason:"keyboard",event:t}),we(t);break;case"ArrowLeft":Ce(t,"previous");break;case"ArrowRight":Ce(t,"next");break;case"Enter":if(-1!==J.current&&de){const e=he[J.current],n=!!w&&w(e);if(t.preventDefault(),n)return;Ae(t,e,"selectOption"),i&&q.current.setSelectionRange(q.current.value.length,q.current.value.length)}else b&&""!==te&&!1===ue&&(T&&t.preventDefault(),Ae(t,te,"createOption","freeSolo"));break;case"Escape":de?(t.preventDefault(),t.stopPropagation(),xe(t,"escape")):c&&(""!==te||T&&Z.length>0)&&(t.preventDefault(),t.stopPropagation(),ke(t));break;case"Backspace":if(T&&!F&&""===te&&Z.length>0){const e=-1===Y?Z.length-1:Y,n=Z.slice();n.splice(e,1),_e(t,n,"removeOption",{option:Z[e]})}break;case"Delete":if(T&&!F&&""===te&&Z.length>0&&-1!==Y){const e=Y,n=Z.slice();n.splice(e,1),_e(t,n,"removeOption",{option:Z[e]})}}},Ie=e=>{ie(!0),M&&!V.current&&we(e)},Te=e=>{t(H)?q.current.focus():(ie(!1),W.current=!0,V.current=!1,s&&-1!==J.current&&de?Ae(e,he[J.current],"blur"):s&&b&&""!==te?Ae(e,te,"blur","freeSolo"):l&&oe(e,Z),xe(e,"blur"))},Re=e=>{const t=e.target.value;te!==t&&(ne(t),ce(!1),j&&j(e,t,"input")),""===t?h||T||_e(e,null,"clear"):we(e)},Pe=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));J.current!==t&&ge({event:e,index:t,reason:"mouse"})},Ne=e=>{ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Se.current=!0},je=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Ae(e,he[t],"selectOption"),Se.current=!1},Oe=e=>t=>{const n=Z.slice();n.splice(e,1),_e(t,n,"removeOption",{option:Z[e]})},Me=e=>{se?xe(e,"toggleInput"):we(e)},Le=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==U&&e.preventDefault()},Fe=e=>{e.currentTarget.contains(e.target)&&(q.current.focus(),z&&W.current&&q.current.selectionEnd-q.current.selectionStart===0&&q.current.select(),W.current=!1)},ze=e=>{f||""!==te&&se||Me(e)};let $e=b&&te.length>0;$e=$e||(T?Z.length>0:null!==Z);let Ue=he;if(S){new Map;Ue=he.reduce(((e,t,n)=>{const r=S(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return f&&re&&Te(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-owns":fe?`${U}-listbox`:null},e,{onKeyDown:Ee(e),onMouseDown:Le,onClick:Fe})},getInputLabelProps:()=>({id:`${U}-label`,htmlFor:U}),getInputProps:()=>({id:U,value:te,onBlur:Te,onFocus:Ie,onChange:Re,onMouseDown:ze,"aria-activedescendant":de?"":null,"aria-autocomplete":i?"both":"list","aria-controls":fe?`${U}-listbox`:void 0,"aria-expanded":fe,autoComplete:"off",ref:q,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:ke}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Me}),getTagProps:e=>{let{index:t}=e;return(0,De.A)({key:t,"data-tag-index":t,tabIndex:-1},!F&&{onDelete:Oe(t)})},getListboxProps:()=>({role:"listbox",id:`${U}-listbox`,"aria-labelledby":`${U}-label`,ref:be,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;var r;const i=(T?Z:[Z]).some((e=>null!=e&&I(n,e))),o=!!w&&w(n);return{key:null!=(r=null==x?void 0:x(n))?r:B(n),tabIndex:-1,role:"option",id:`${U}-option-${t}`,onMouseMove:Pe,onClick:je,onTouchStart:Ne,"data-option-index":t,"aria-disabled":o,"aria-selected":i}},id:U,inputValue:te,value:Z,dirty:$e,expanded:de&&K,popupOpen:de,focused:re||-1!==Y,anchorEl:K,setAnchorEl:G,focusedTag:Y,groupedOptions:Ue}};function qB(e){return(0,gT.Ay)("MuiListSubheader",e)}(0,bt.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const HB=["className","color","component","disableGutters","disableSticky","inset"],KB=(0,hT.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,pT.A)(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),GB=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=n,c=(0,Me.A)(n,HB),u=(0,De.A)({},n,{color:i,component:o,disableGutters:s,disableSticky:a,inset:l}),d=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,s={root:["root","default"!==n&&`color${(0,pT.A)(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,dT.A)(s,qB,t)})(u);return(0,$e.jsx)(KB,(0,De.A)({as:o,className:(0,ht.A)(d.root,r),ref:t,ownerState:u},c))}));GB.muiSkipListHighlight=!0;const YB=GB;function QB(e){return(0,gT.Ay)("MuiAutocomplete",e)}const XB=(0,bt.A)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var JB,ZB;const eV=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],tV=["ref"],nV=["key"],rV=["key"],iV=(0,hT.Ay)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{[`& .${XB.tag}`]:t.tag},{[`& .${XB.tag}`]:t[`tagSize${(0,pT.A)(a)}`]},{[`& .${XB.inputRoot}`]:t.inputRoot},{[`& .${XB.input}`]:t.input},{[`& .${XB.input}`]:s&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})({[`&.${XB.focused} .${XB.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${XB.clearIndicator}`]:{visibility:"visible"}},[`& .${XB.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${XB.inputRoot}`]:{[`.${XB.hasPopupIcon}&, .${XB.hasClearIcon}&`]:{paddingRight:30},[`.${XB.hasPopupIcon}.${XB.hasClearIcon}&`]:{paddingRight:56},[`& .${XB.input}`]:{width:0,minWidth:30}},[`& .${WD.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${WD.root}.${OD.sizeSmall}`]:{[`& .${WD.input}`]:{padding:"2px 4px 3px 0"}},[`& .${lM.root}`]:{padding:9,[`.${XB.hasPopupIcon}&, .${XB.hasClearIcon}&`]:{paddingRight:39},[`.${XB.hasPopupIcon}.${XB.hasClearIcon}&`]:{paddingRight:65},[`& .${XB.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${XB.endAdornment}`]:{right:9}},[`& .${lM.root}.${OD.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${XB.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${XD.root}`]:{paddingTop:19,paddingLeft:8,[`.${XB.hasPopupIcon}&, .${XB.hasClearIcon}&`]:{paddingRight:39},[`.${XB.hasPopupIcon}.${XB.hasClearIcon}&`]:{paddingRight:65},[`& .${XD.input}`]:{padding:"7px 4px"},[`& .${XB.endAdornment}`]:{right:9}},[`& .${XD.root}.${OD.sizeSmall}`]:{paddingBottom:1,[`& .${XD.input}`]:{padding:"2.5px 4px"}},[`& .${OD.hiddenLabel}`]:{paddingTop:8},[`& .${XD.root}.${OD.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${XB.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${XD.root}.${OD.hiddenLabel}.${OD.sizeSmall}`]:{[`& .${XB.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${XB.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${XB.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${XB.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${XB.inputRoot}`]:{flexWrap:"wrap"}}}]}),oV=(0,hT.Ay)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),sV=(0,hT.Ay)(BR,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),aV=(0,hT.Ay)(BR,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),lV=(0,hT.Ay)(WU,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${XB.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}})),cV=(0,hT.Ay)(xT,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body1,{overflow:"auto"})})),uV=(0,hT.Ay)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),dV=(0,hT.Ay)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),hV=(0,hT.Ay)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${XB.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${XB.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${XB.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${XB.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${XB.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,fT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}})),pV=(0,hT.Ay)(YB,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),fV=(0,hT.Ay)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${XB.option}`]:{paddingLeft:24}}),mV=r.forwardRef((function(e,t){var n,i,o,s;const a=(0,tt.b)({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:h,className:p,clearIcon:f=JB||(JB=(0,$e.jsx)(tD,{fontSize:"small"})),clearOnBlur:m=!a.freeSolo,clearOnEscape:g=!1,clearText:v="Clear",closeText:y="Close",componentsProps:b={},defaultValue:w=(a.multiple?[]:null),disableClearable:x=!1,disableCloseOnSelect:_=!1,disabled:S=!1,disabledItemsFocusable:A=!1,disableListWrap:C=!1,disablePortal:k=!1,filterSelectedOptions:E=!1,forcePopupIcon:I="auto",freeSolo:T=!1,fullWidth:R=!1,getLimitTagsText:P=e=>`+${e}`,getOptionLabel:N,groupBy:j,handleHomeEndKeys:O=!a.freeSolo,includeInputInList:D=!1,limitTags:M=-1,ListboxComponent:L="ul",ListboxProps:F,loading:z=!1,loadingText:$="Loading\u2026",multiple:U=!1,noOptionsText:B="No options",openOnFocus:V=!1,openText:W="Open",PaperComponent:q=xT,PopperComponent:H=WU,popupIcon:K=ZB||(ZB=(0,$e.jsx)(oL,{})),readOnly:G=!1,renderGroup:Y,renderInput:Q,renderOption:X,renderTags:J,selectOnFocus:Z=!a.freeSolo,size:ee="medium",slotProps:te={}}=a,ne=(0,Me.A)(a,eV),{getRootProps:re,getInputProps:ie,getInputLabelProps:oe,getPopupIndicatorProps:se,getClearProps:ae,getTagProps:le,getListboxProps:ce,getOptionProps:ue,value:de,dirty:he,expanded:pe,id:fe,popupOpen:me,focused:ge,focusedTag:ve,anchorEl:ye,setAnchorEl:be,inputValue:we,groupedOptions:xe}=WB((0,De.A)({},a,{componentName:"Autocomplete"})),_e=!x&&!S&&he&&!G,Se=(!T||!0===I)&&!1!==I,{onMouseDown:Ae}=ie(),{ref:Ce}=null!=F?F:{},ke=ce(),{ref:Ee}=ke,Ie=(0,Me.A)(ke,tV),Te=(0,oR.A)(Ee,Ce),Re=N||(e=>{var t;return null!=(t=e.label)?t:e}),Pe=(0,De.A)({},a,{disablePortal:k,expanded:pe,focused:ge,fullWidth:R,getOptionLabel:Re,hasClearIcon:_e,hasPopupIcon:Se,inputFocused:-1===ve,popupOpen:me,size:ee}),Ne=(e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:s,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=e,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",s&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${(0,pT.A)(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,dT.A)(d,QB,t)})(Pe);let je;if(U&&de.length>0){const e=e=>(0,De.A)({className:Ne.tag,disabled:S},le(e));je=J?J(de,e,Pe):de.map(((t,n)=>{const r=e({index:n}),{key:i}=r,o=(0,Me.A)(r,nV);return(0,$e.jsx)(CF,(0,De.A)({label:Re(t),size:ee},o,h),i)}))}if(M>-1&&Array.isArray(je)){const e=je.length-M;!ge&&e>0&&(je=je.splice(0,M),je.push((0,$e.jsx)("span",{className:Ne.tag,children:P(e)},je.length)))}const Oe=Y||(e=>(0,$e.jsxs)("li",{children:[(0,$e.jsx)(pV,{className:Ne.groupLabel,ownerState:Pe,component:"div",children:e.group}),(0,$e.jsx)(fV,{className:Ne.groupUl,ownerState:Pe,children:e.children})]},e.key)),Le=X||((e,t)=>{const{key:n}=e,r=(0,Me.A)(e,rV);return(0,$e.jsx)("li",(0,De.A)({},r,{children:Re(t)}),n)}),Fe=(e,t)=>{const n=ue({option:e,index:t});return Le((0,De.A)({},n,{className:Ne.option}),e,{selected:n["aria-selected"],index:t,inputValue:we},Pe)},ze=null!=(n=te.clearIndicator)?n:b.clearIndicator,Ue=null!=(i=te.paper)?i:b.paper,Be=null!=(o=te.popper)?o:b.popper,Ve=null!=(s=te.popupIndicator)?s:b.popupIndicator;return(0,$e.jsxs)(r.Fragment,{children:[(0,$e.jsx)(iV,(0,De.A)({ref:t,className:(0,ht.A)(Ne.root,p),ownerState:Pe},re(ne),{children:Q({id:fe,disabled:S,fullWidth:!0,size:"small"===ee?"small":void 0,InputLabelProps:oe(),InputProps:(0,De.A)({ref:be,className:Ne.inputRoot,startAdornment:je,onClick:e=>{e.target===e.currentTarget&&Ae(e)}},(_e||Se)&&{endAdornment:(0,$e.jsxs)(oV,{className:Ne.endAdornment,ownerState:Pe,children:[_e?(0,$e.jsx)(sV,(0,De.A)({},ae(),{"aria-label":v,title:v,ownerState:Pe},ze,{className:(0,ht.A)(Ne.clearIndicator,null==ze?void 0:ze.className),children:f})):null,Se?(0,$e.jsx)(aV,(0,De.A)({},se(),{disabled:S,"aria-label":me?y:W,title:me?y:W,ownerState:Pe},Ve,{className:(0,ht.A)(Ne.popupIndicator,null==Ve?void 0:Ve.className),children:K})):null]})}),inputProps:(0,De.A)({className:Ne.input,disabled:S,readOnly:G},ie())})})),ye?(0,$e.jsx)(lV,(0,De.A)({as:H,disablePortal:k,style:{width:ye?ye.clientWidth:null},ownerState:Pe,role:"presentation",anchorEl:ye,open:me},Be,{className:(0,ht.A)(Ne.popper,null==Be?void 0:Be.className),children:(0,$e.jsxs)(cV,(0,De.A)({ownerState:Pe,as:q},Ue,{className:(0,ht.A)(Ne.paper,null==Ue?void 0:Ue.className),children:[z&&0===xe.length?(0,$e.jsx)(uV,{className:Ne.loading,ownerState:Pe,children:$}):null,0!==xe.length||T||z?null:(0,$e.jsx)(dV,{className:Ne.noOptions,ownerState:Pe,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:B}),xe.length>0?(0,$e.jsx)(hV,(0,De.A)({as:L,className:Ne.listbox,ownerState:Pe},Ie,F,{ref:Te,children:xe.map(((e,t)=>j?Oe({key:e.key,group:e.group,children:e.options.map(((t,n)=>Fe(t,e.index+n)))}):Fe(e,t)))})):null]}))})):null]})})),gV=(0,NT.A)([(0,$e.jsx)("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07z"},"0"),(0,$e.jsx)("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52"},"1")],"LocalFireDepartment"),vV=(0,NT.A)((0,$e.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),yV=(0,NT.A)((0,$e.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),bV=(0,NT.A)((0,$e.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic"),wV=(0,NT.A)((0,$e.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff"),xV=(0,NT.A)((0,$e.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),_V=(0,NT.A)((0,$e.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff"),SV=(0,NT.A)((0,$e.jsx)("path",{d:"m21.22 18.02 2 2H24v-2zm.77-2 .01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74M2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47"}),"StopScreenShare"),AV=(0,NT.A)((0,$e.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73z"}),"ScreenShare"),CV=(0,NT.A)((0,$e.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),kV=e=>{NE(YE,`signaling/${e}`);return{sendOffer:async(t,n)=>{await OE(NE(YE,`signaling/${e}/offer`),{type:"offer",data:t,senderId:n})},sendAnswer:async(t,n)=>{await OE(NE(YE,`signaling/${e}/answer`),{type:"answer",data:t,senderId:n})},sendIceCandidate:async(t,n)=>{await OE(NE(YE,`signaling/${e}/ice-candidate`),{type:"ice-candidate",data:t,senderId:n})},listenForOffer:t=>FE(NE(YE,`signaling/${e}/offer`),(e=>{e.exists()&&t(e.val())})),listenForAnswer:t=>FE(NE(YE,`signaling/${e}/answer`),(e=>{e.exists()&&t(e.val())})),listenForIceCandidate:t=>FE(NE(YE,`signaling/${e}/ice-candidate`),(e=>{e.exists()&&t(e.val())})),cleanup:()=>{!function(e,t,n){let r=null;const i=n?new IE(n):null;"value"===t?r=new DE(i):t&&(r=new ME(t,i)),uE(e._repo,e,r)}(NE(YE,`signaling/${e}`))}}},EV=async e=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");const t=await navigator.mediaDevices.getUserMedia(e);return console.log("Got media stream:",t.getTracks().map((e=>e.kind))),t}catch(t){if(console.error("Error accessing media devices:",t),t instanceof Error){if("NotAllowedError"===t.name)throw new Error("Please allow access to your camera and microphone");if("NotFoundError"===t.name)throw new Error("No camera or microphone found");if("NotReadableError"===t.name)throw new Error("Camera or microphone is already in use")}throw t}},IV=e=>{e.getTracks().forEach((e=>{console.log("Stopping track:",e.kind),e.stop()}))},TV=e=>{var t;let{open:n,onClose:i,onSubmit:o,initialData:s,title:a,submitButtonText:l,isProcessing:c=!1}=e;const[u,d]=(0,r.useState)({name:(null===s||void 0===s?void 0:s.name)||"",description:(null===s||void 0===s?void 0:s.description)||"",isPrivate:(null===s||void 0===s?void 0:s.isPrivate)||!1,password:(null===s||void 0===s?void 0:s.password)||"",category:(null===s||void 0===s?void 0:s.category)||"",maxParticipants:(null===s||void 0===s?void 0:s.maxParticipants)||50,tags:(null===s||void 0===s?void 0:s.tags)||[]});return(0,$e.jsx)(ZL,{open:n,onClose:i,maxWidth:"sm",fullWidth:!0,children:(0,$e.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await o(u)},children:[(0,$e.jsx)(iF,{children:a}),(0,$e.jsx)(lF,{children:(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,$e.jsx)(bL,{autoFocus:!0,required:!0,label:"Room Name",value:u.name,onChange:e=>d((t=>({...t,name:e.target.value}))),fullWidth:!0}),(0,$e.jsx)(bL,{label:"Description",value:u.description,onChange:e=>d((t=>({...t,description:e.target.value}))),multiline:!0,rows:4,fullWidth:!0}),(0,$e.jsx)(bL,{label:"Category",value:u.category,onChange:e=>d((t=>({...t,category:e.target.value}))),fullWidth:!0}),(0,$e.jsx)(bL,{label:"Max Participants",type:"number",value:u.maxParticipants,onChange:e=>d((t=>({...t,maxParticipants:parseInt(e.target.value)}))),fullWidth:!0,inputProps:{min:1,max:100}}),(0,$e.jsx)(bL,{label:"Tags (comma separated)",value:null===(t=u.tags)||void 0===t?void 0:t.join(", "),onChange:e=>d((t=>({...t,tags:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)}))),fullWidth:!0,helperText:"Enter tags separated by commas"}),(0,$e.jsx)(xB,{control:(0,$e.jsx)(OB,{checked:u.isPrivate,onChange:e=>d((t=>({...t,isPrivate:e.target.checked})))}),label:"Private Room"}),u.isPrivate&&(0,$e.jsx)(bL,{required:!0,label:"Password",type:"password",value:u.password,onChange:e=>d((t=>({...t,password:e.target.value}))),fullWidth:!0})]})}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:i,disabled:c,children:"Cancel"}),(0,$e.jsx)(tP,{type:"submit",variant:"contained",disabled:c,children:l})]})]})})},RV=()=>{var e,t,n,i;const{roomId:o}=re(),s=ne(),{currentUser:a}=ZI(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[w,x]=(0,r.useState)(!1),[_,S]=(0,r.useState)([]),[A,C]=(0,r.useState)(""),[k,E]=(0,r.useState)(!1),[I,T]=(0,r.useState)(!1),[R,P]=(0,r.useState)({audioEnabled:!1,videoEnabled:!1,screenSharing:!1}),[N,j]=(0,r.useState)(null),[O,D]=(0,r.useState)(null),[M,L]=(0,r.useState)({}),[F,z]=(0,r.useState)(null),$=(0,r.useRef)({}),U=(0,r.useRef)(null),B=(0,r.useRef)(null),V=((0,r.useRef)(null),(0,r.useRef)(!0)),W=(0,r.useRef)(null),q=(0,r.useRef)(null),[H,K]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1),[J,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(""),[ie,oe]=(0,r.useState)([]),[se,ae]=(0,r.useState)([]),[le,ce]=(0,r.useState)(!1);(0,r.useEffect)((()=>()=>{var e;if(V.current=!1,W.current&&W.current(),N&&N.getTracks().forEach((e=>e.stop())),null!==(e=B.current)&&void 0!==e&&e.srcObject){B.current.srcObject.getTracks().forEach((e=>e.stop()))}}),[]);const ue=(0,r.useCallback)(((e,t)=>{console.error(t,e),V.current&&(e instanceof _l?m(`Firestore error: ${e.message}`):e instanceof Error?m(e.message):m(t))}),[]);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();c(e)}catch(e){console.error("Error initializing Firestore:",e),m("Failed to initialize database")}})()}),[]),(0,r.useEffect)((()=>{if(!l||!a)return;const e=()=>{try{if(!o||!l)return()=>{};const e=fw(_b(l,"sideRooms",o,"messages"),bw("timestamp","desc"),xw(50));return $w(e,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));S(t)}))}catch(f){return console.error("Error setting up messages listener:",f),m("Failed to listen to messages"),()=>{}}},t=(()=>{try{if(!o||!l)return()=>{};const t=$w(Sb(l,"sideRooms",o),(t=>{if(t.exists()){var n;const r=t.data(),i={id:t.id,name:r.name||"",description:r.description||"",ownerId:r.ownerId||"",members:r.members||[],memberCount:r.memberCount||0,createdAt:r.createdAt||new Date,isPrivate:r.isPrivate||!1,password:r.password||"",tags:r.tags||[],lastActive:r.lastActive||new Date,maxMembers:r.maxMembers||50,bannedUsers:r.bannedUsers||[],isLive:r.isLive||!1,liveParticipants:r.liveParticipants||[],category:r.category||"",scheduledReveals:r.scheduledReveals||[],activeUsers:r.activeUsers||0};d(i),p(!1);const o=null===(n=i.members)||void 0===n?void 0:n.some((e=>e.userId===a.uid));!o&&i.isPrivate?v(!0):o&&e()}else m("Room not found"),p(!1)}),(e=>{console.error("Error fetching room:",e),m("Failed to fetch room"),p(!1)}));return()=>t()}catch(f){return console.error("Error setting up room listener:",f),m("Failed to set up room listener"),p(!1),()=>{}}})();return()=>{t&&t()}}),[l,o,a]);const de=(0,r.useCallback)((async()=>{if(u&&a&&o&&!w)try{x(!0);const e=Sb(l,"sideRooms",o);await Gw(l,(async t=>{var n;const r=await t.get(e);if(!r.exists())throw new Error("Room not found");const i=r.data(),o={userId:a.uid,username:a.displayName||"Anonymous",avatar:a.photoURL||"",role:"member",joinedAt:new Date};if(null===(n=i.members)||void 0===n?void 0:n.some((e=>e.userId===a.uid)))throw new Error("You are already a member of this room");t.update(e,{members:Qw(o),memberCount:(i.memberCount||0)+1,lastActivity:new Date})})),V.current&&(wI.success("Joined room successfully"),v(!1),d((e=>e?{...e,members:[...e.members||[],{userId:a.uid,username:a.displayName||"Anonymous",avatar:a.photoURL||"",role:"member",joinedAt:new Date}],memberCount:(e.memberCount||0)+1}:null)))}catch(e){ue(e,"Failed to join room"),V.current&&v(!1)}finally{V.current&&x(!1)}}),[u,a,o,w,ue]),he=(0,r.useCallback)((async()=>{if(u&&a&&o&&!w)try{x(!0);const e=Sb(l,"sideRooms",o);await Gw(l,(async t=>{const n=await t.get(e);if(!n.exists())throw new Error("Room not found");const r=n.data(),i={userId:a.uid,username:a.displayName||"Anonymous",avatar:a.photoURL||"",role:"member",joinedAt:new Date};t.update(e,{members:Xw(i),memberCount:Math.max(0,(r.memberCount||0)-1)})})),V.current&&(wI.success("Left room successfully"),setTimeout((()=>{V.current&&s("/side-rooms")}),100))}catch(e){ue(e,"Failed to leave room")}finally{V.current&&x(!1)}}),[u,a,o,w,s,ue]),pe=(0,r.useCallback)((()=>{u&&y===u.password?de():wI.error("Incorrect password")}),[u,y,de]);(0,r.useEffect)((()=>{if(null!==u&&void 0!==u&&u.isLive&&a&&o){var e;if(!(null===(e=u.members)||void 0===e?void 0:e.some((e=>e.userId===a.uid))))return void console.log("User is not a member, skipping WebRTC initialization");const t=((e,t)=>{const n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]}),r=kV(e);return n.onicecandidate=e=>{e.candidate&&(console.log("New ICE candidate:",e.candidate),r.sendIceCandidate(e.candidate,t))},n.onconnectionstatechange=()=>{console.log("Connection state:",n.connectionState)},n.oniceconnectionstatechange=()=>{console.log("ICE connection state:",n.iceConnectionState)},n.ontrack=e=>{console.log("Received track:",e.track.kind);const t=e.streams[0];if(t)return console.log("New stream received:",{id:e.track.id,kind:e.track.kind,label:e.track.label}),t},{pc:n,signaling:r,addStream:e=>{console.log("Adding stream to peer connection:",{audioTracks:e.getAudioTracks().length,videoTracks:e.getVideoTracks().length}),e.getTracks().forEach((t=>{console.log("Adding track:",{kind:t.kind,label:t.label,enabled:t.enabled}),n.addTrack(t,e)}))},createOffer:async()=>{try{const e=await n.createOffer();return await n.setLocalDescription(e),r.sendOffer(e,t),e}catch(e){throw console.error("Error creating offer:",e),e}},handleOffer:async e=>{try{await n.setRemoteDescription(e);const i=await n.createAnswer();await n.setLocalDescription(i),r.sendAnswer(i,t)}catch(i){throw console.error("Error handling offer:",i),i}},handleAnswer:async e=>{try{await n.setRemoteDescription(e)}catch(t){throw console.error("Error handling answer:",t),t}},handleIceCandidate:async e=>{try{await n.addIceCandidate(e)}catch(t){throw console.error("Error handling ICE candidate:",t),t}},cleanup:()=>{n.close(),r.cleanup()}}})(o,a.uid);D(t);const n=t.signaling.listenForOffer((async e=>{e.senderId!==a.uid&&(console.log("Received offer from:",e.senderId),await t.handleOffer(e.data))})),r=t.signaling.listenForAnswer((async e=>{e.senderId!==a.uid&&(console.log("Received answer from:",e.senderId),await t.handleAnswer(e.data))})),i=t.signaling.listenForIceCandidate((async e=>{e.senderId!==a.uid&&(console.log("Received ICE candidate from:",e.senderId),await t.handleIceCandidate(e.data))}));t.pc.ontrack=e=>{console.log("Received track:",e.track.kind);const t=e.streams[0];t&&(console.log("New stream received:",{id:e.track.id,kind:e.track.kind,label:e.track.label}),L((n=>({...n,[e.track.id]:t}))))};return(async()=>{try{const e=await t.createOffer();console.log("Created offer:",e)}catch(e){console.error("Error creating offer:",e)}})(),()=>{n(),r(),i(),t.cleanup()}}}),[null===u||void 0===u?void 0:u.isLive,a,o,null===u||void 0===u?void 0:u.members]),(0,r.useEffect)((()=>{console.log("Local Stream Status:",{hasStream:!!N,audioTracks:(null===N||void 0===N?void 0:N.getAudioTracks().length)||0,videoTracks:(null===N||void 0===N?void 0:N.getVideoTracks().length)||0,tracks:null===N||void 0===N?void 0:N.getTracks().map((e=>({kind:e.kind,enabled:e.enabled,label:e.label})))})}),[N]),(0,r.useEffect)((()=>{console.log("Remote Streams Status:",{count:Object.keys(M).length,streams:Object.entries(M).map((e=>{let[t,n]=e;return{id:t,audioTracks:n.getAudioTracks().length,videoTracks:n.getVideoTracks().length,tracks:n.getTracks().map((e=>({kind:e.kind,enabled:e.enabled,label:e.label})))}}))})}),[M]),(0,r.useEffect)((()=>{O&&(console.log("Peer Connection Status:",{connectionState:O.pc.connectionState,iceConnectionState:O.pc.iceConnectionState,signalingState:O.pc.signalingState}),O.pc.onconnectionstatechange=()=>{console.log("Connection state changed:",O.pc.connectionState)},O.pc.oniceconnectionstatechange=()=>{console.log("ICE connection state changed:",O.pc.iceConnectionState)},O.pc.onsignalingstatechange=()=>{console.log("Signaling state changed:",O.pc.signalingState)})}),[O]);const fe=()=>{Y(null)};if(h)return(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,$e.jsx)(GO,{})});if(f)return(0,$e.jsxs)(_t,{sx:{p:3},children:[(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:f}),(0,$e.jsx)(tP,{onClick:()=>s("/side-rooms"),children:"Back to Rooms"})]});if(!u)return null;const me=null===(e=u.members)||void 0===e?void 0:e.some((e=>e.userId===(null===a||void 0===a?void 0:a.uid))),ge=null===(t=u.members)||void 0===t?void 0:t.some((e=>e.userId===(null===a||void 0===a?void 0:a.uid)&&"owner"===e.role)),ve=null===(n=u.members)||void 0===n?void 0:n.find((e=>"owner"===e.role));return(0,$e.jsxs)(_t,{sx:{display:"flex",height:"calc(100vh - 64px)"},children:[(0,$e.jsxs)(_t,{sx:{flex:1,display:"flex",flexDirection:"column",p:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",children:u.name}),(0,$e.jsxs)(iR,{variant:"subtitle1",color:"text.secondary",children:["Created by ",(null===ve||void 0===ve?void 0:ve.username)||"Anonymous"]})]}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[ge&&(0,$e.jsx)(nB,{title:u.isLive?"Stop Live":"Go Live",children:(0,$e.jsx)(BR,{color:u.isLive?"error":"primary",onClick:async()=>{if(u&&a&&o)try{x(!0);const e=Sb(l,"sideRooms",o);await Lw(e,{isLive:!u.isLive,lastActivity:new Date}),E(!u.isLive),wI.success(u.isLive?"Stopped live session":"Started live session")}catch(e){ue(e,"Failed to update live status")}finally{x(!1)}},disabled:w,children:(0,$e.jsx)(gV,{})})}),(0,$e.jsx)(nB,{title:"Members",children:(0,$e.jsx)(BR,{onClick:()=>T(!I),children:(0,$e.jsx)(l$,{})})}),me&&(0,$e.jsx)(tP,{variant:"outlined",color:"error",startIcon:(0,$e.jsx)(vV,{}),onClick:he,disabled:w,children:"Leave"}),ge&&(0,$e.jsx)(BR,{onClick:e=>{Y(e.currentTarget)},children:(0,$e.jsx)(yV,{})})]})]}),u.isLive&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2,mb:2},children:[(0,$e.jsx)(nB,{title:R.audioEnabled?"Mute":"Unmute",children:(0,$e.jsx)(BR,{color:R.audioEnabled?"primary":"error",onClick:async()=>{if(console.log("Toggling audio..."),N){console.log("Toggling existing audio track");N.getAudioTracks().forEach((e=>{e.enabled=!R.audioEnabled,console.log(`Audio track ${e.label} enabled:`,e.enabled)})),P((e=>({...e,audioEnabled:!e.audioEnabled})))}else try{console.log("Requesting audio stream...");const e=await EV({audio:!0});console.log("Got audio stream:",e.getTracks().map((e=>e.kind))),j(e),P((e=>({...e,audioEnabled:!0}))),O&&(console.log("Adding audio stream to peer connection"),O.addStream(e))}catch(e){console.error("Error getting audio stream:",e),ue(e,"Failed to access microphone")}},children:R.audioEnabled?(0,$e.jsx)(bV,{}):(0,$e.jsx)(wV,{})})}),(0,$e.jsx)(nB,{title:R.videoEnabled?"Turn off camera":"Turn on camera",children:(0,$e.jsx)(BR,{color:R.videoEnabled?"primary":"error",onClick:async()=>{if(console.log("Toggling video..."),N){console.log("Toggling existing video track");N.getVideoTracks().forEach((e=>{e.enabled=!R.videoEnabled,console.log(`Video track ${e.label} enabled:`,e.enabled)})),P((e=>({...e,videoEnabled:!e.videoEnabled})))}else try{console.log("Requesting video stream...");const e=await EV({video:!0});console.log("Got video stream:",e.getTracks().map((e=>e.kind))),j(e),P((e=>({...e,videoEnabled:!0}))),U.current&&(console.log("Setting video element source"),U.current.srcObject=e),O&&(console.log("Adding video stream to peer connection"),O.addStream(e))}catch(e){console.error("Error getting video stream:",e),ue(e,"Failed to access camera")}},children:R.videoEnabled?(0,$e.jsx)(xV,{}):(0,$e.jsx)(_V,{})})}),(0,$e.jsx)(nB,{title:R.screenSharing?"Stop sharing":"Share screen",children:(0,$e.jsx)(BR,{color:R.screenSharing?"primary":"default",onClick:async()=>{console.log("Toggling screen share...");try{if(R.screenSharing){var e;console.log("Stopping screen share"),null!==(e=B.current)&&void 0!==e&&e.srcObject&&(IV(B.current.srcObject),B.current.srcObject=null),P((e=>({...e,screenSharing:!1}))),z(null)}else{var t;console.log("Requesting screen share...");const e=await(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)throw new Error("Screen sharing is not supported in this browser");const e=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});return e.getVideoTracks()[0].onended=()=>{console.log("Screen sharing ended by user"),IV(e)},console.log("Screen sharing started successfully"),e}catch(e){if(console.error("Error accessing screen share:",e),e instanceof Error){if("NotAllowedError"===e.name)throw new Error("Screen sharing permission was denied. Please allow access to share your screen.");if("NotFoundError"===e.name)throw new Error("No screen sharing source found. Please make sure you have a screen to share.");if("NotReadableError"===e.name)throw new Error("Screen sharing is already in use by another application.");if("OverconstrainedError"===e.name)throw new Error("Screen sharing constraints could not be satisfied.")}throw new Error("Failed to start screen sharing. Please try again.")}})();console.log("Got screen share stream:",e.getTracks().map((e=>e.kind))),null!==(t=B.current)&&void 0!==t&&t.srcObject&&(console.log("Stopping previous screen share"),IV(B.current.srcObject)),B.current&&(console.log("Setting screen share element source"),B.current.srcObject=e),O&&(console.log("Adding screen share stream to peer connection"),O.addStream(e)),e.getVideoTracks()[0].onended=()=>{var e;console.log("Screen sharing ended by user"),P((e=>({...e,screenSharing:!1}))),null!==(e=B.current)&&void 0!==e&&e.srcObject&&(IV(B.current.srcObject),B.current.srcObject=null)},P((e=>({...e,screenSharing:!0}))),z(null)}}catch(n){console.error("Error with screen share:",n);const e=n instanceof Error?n.message:"Failed to share screen";z(e),ue(n,e)}},children:R.screenSharing?(0,$e.jsx)(SV,{}):(0,$e.jsx)(AV,{})})})]}),(0,$e.jsxs)(_t,{sx:{display:"flex",gap:2,mb:2},children:[(R.videoEnabled||R.screenSharing)&&(0,$e.jsx)(xT,{sx:{flex:1,p:1},children:(0,$e.jsx)("video",{ref:U,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",maxHeight:"300px",objectFit:"cover"}})}),R.screenSharing&&(0,$e.jsx)(xT,{sx:{flex:1,p:1},children:(0,$e.jsx)("video",{ref:B,autoPlay:!0,playsInline:!0,style:{width:"100%",maxHeight:"300px",objectFit:"contain"}})}),Object.entries(M).map((e=>{let[t,n]=e;return(0,$e.jsx)(xT,{sx:{flex:1,p:1},children:(0,$e.jsx)("video",{ref:e=>{e&&($.current[t]=e,e.srcObject=n)},autoPlay:!0,playsInline:!0,style:{width:"100%",maxHeight:"300px",objectFit:"cover"}})},t)}))]})]}),(0,$e.jsxs)(xT,{sx:{flex:1,display:"flex",flexDirection:"column",mb:2},children:[(0,$e.jsxs)(_t,{sx:{flex:1,overflow:"auto",p:2},children:[_.map((e=>{var t;return(0,$e.jsxs)(_t,{sx:{display:"flex",mb:2},children:[(0,$e.jsx)(XT,{src:e.avatar,sx:{mr:1}}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"subtitle2",children:e.username}),(0,$e.jsx)(iR,{variant:"body1",children:e.content}),(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]})]},e.id)})),(0,$e.jsx)("div",{ref:q})]}),(0,$e.jsx)(aj,{}),(0,$e.jsx)(_t,{component:"form",onSubmit:async e=>{if(e.preventDefault(),o&&a&&A.trim())try{const e=_b(l,"sideRooms",o,"messages");await zw(e,{userId:a.uid,username:a.displayName||"Anonymous",avatar:a.photoURL||"",content:A.trim(),timestamp:Yw()}),C("")}catch(t){ue(t,"Failed to send message")}},sx:{p:2},children:(0,$e.jsxs)(_t,{sx:{display:"flex",gap:1},children:[(0,$e.jsx)(BD,{fullWidth:!0,placeholder:"Type a message...",value:A,onChange:e=>C(e.target.value)}),(0,$e.jsx)(BR,{type:"submit",color:"primary",disabled:!A.trim(),children:(0,$e.jsx)(CV,{})})]})})]})]}),I&&(0,$e.jsxs)(xT,{sx:{width:300,p:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,$e.jsxs)(iR,{variant:"h6",children:["Members (",(null===u||void 0===u?void 0:u.memberCount)||0,")"]}),ge&&(0,$e.jsx)(tP,{startIcon:(0,$e.jsx)(Gz,{}),onClick:()=>{Z(!0)},variant:"outlined",size:"small",children:"Add Members"})]}),(0,$e.jsx)(cP,{children:null===u||void 0===u||null===(i=u.members)||void 0===i?void 0:i.map((e=>(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.avatar})}),(0,$e.jsx)(nj,{primary:e.username,secondary:e.role})]},e.userId)))})]}),(0,$e.jsxs)(ZL,{open:g,onClose:()=>!w&&v(!1),disableEscapeKeyDown:w,children:[(0,$e.jsx)(iF,{children:"Enter Room Password"}),(0,$e.jsx)(lF,{children:(0,$e.jsx)(bL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:y,onChange:e=>b(e.target.value),disabled:w})}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:()=>v(!1),disabled:w,children:"Cancel"}),(0,$e.jsx)(tP,{onClick:pe,variant:"contained",disabled:w,children:"Join"})]})]}),F&&(0,$e.jsxs)("div",{className:"error-alert",children:[(0,$e.jsx)("p",{children:F}),(0,$e.jsx)("button",{onClick:()=>z(null),children:"Dismiss"})]}),(0,$e.jsx)(TV,{open:H,onClose:()=>K(!1),onSubmit:async e=>{if(u&&o)try{x(!0);const t=Sb(l,"sideRooms",o);await Lw(t,{...e,updatedAt:new Date}),wI.success("Room updated successfully"),K(!1)}catch(t){console.error("Error updating room:",t),ue(t,"Failed to update room")}finally{x(!1)}},initialData:u,title:"Edit Room",submitButtonText:"Save Changes",isProcessing:w}),(0,$e.jsxs)(zN,{anchorEl:G,open:Boolean(G),onClose:fe,children:[(0,$e.jsxs)(QN,{onClick:()=>{fe(),K(!0)},children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(KF,{fontSize:"small"})}),(0,$e.jsx)(nj,{children:"Edit Room"})]}),(0,$e.jsxs)(QN,{onClick:async()=>{if(fe(),u&&a&&o)try{X(!0);const e=Sb(l,"sideRooms",o),t=Sb(l,"users",a.uid,"trash",o);await Gw(l,(async n=>{const r=await n.get(e);if(!r.exists())throw new Error("Room not found");n.set(t,{...r.data(),deletedAt:new Date,originalPath:`sideRooms/${o}`}),n.delete(e)})),wI.success("Room moved to trash"),s("/side-rooms")}catch(e){console.error("Error deleting room:",e),ue(e,"Failed to delete room")}finally{X(!1)}},disabled:Q,children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(xL,{fontSize:"small"})}),(0,$e.jsx)(nj,{children:"Delete Room"})]})]}),(0,$e.jsxs)(ZL,{open:J,onClose:()=>Z(!1),maxWidth:"sm",fullWidth:!0,children:[(0,$e.jsx)(iF,{children:"Invite Members"}),(0,$e.jsx)(lF,{children:(0,$e.jsx)(_t,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:(0,$e.jsx)(mV,{multiple:!0,options:ie,getOptionLabel:e=>e.username,value:se,onChange:(e,t)=>ae(t),renderInput:e=>(0,$e.jsx)(bL,{...e,label:"Search users",onChange:e=>{te(e.target.value),(async e=>{if(!l||!a)return[];try{const t=fw(_b(l,"users"),gw("username",">=",e),gw("username","<=",e+"\uf8ff"),xw(10));return(await Dw(t)).docs.map((e=>({id:e.id,...e.data()})))}catch(f){return console.error("Error searching users:",f),ue(f,"Failed to search users"),[]}})(e.target.value)},InputProps:{...e.InputProps,startAdornment:(0,$e.jsx)(s$,{sx:{mr:1}})}}),renderTags:(e,t)=>e.map(((e,n)=>(0,$e.jsx)(CF,{...t({index:n}),avatar:(0,$e.jsx)(XT,{src:e.avatar}),label:e.username}))),renderOption:(e,t)=>(0,$e.jsxs)(Fj,{...e,children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:t.avatar})}),(0,$e.jsx)(nj,{primary:t.username})]})})})}),(0,$e.jsxs)(hF,{children:[(0,$e.jsx)(tP,{onClick:()=>Z(!1),disabled:le,children:"Cancel"}),(0,$e.jsx)(tP,{onClick:async()=>{if(u&&o&&a&&0!==se.length)try{ce(!0);const e=function(e){return Ib(e=pb(e,Eb)),new Ww(e,(t=>Uw(e,t)))}(l);se.forEach((t=>{const n=Sb(_b(l,"sideRooms",o,"invitations"));e.set(n,{userId:t.id,invitedBy:a.uid,timestamp:new Date,status:"pending"});const r=Sb(_b(l,"users",t.id,"notifications"));e.set(r,{type:"room_invitation",roomId:o,roomName:u.name,invitedBy:a.uid,invitedByName:a.displayName||"Anonymous",timestamp:new Date,status:"unread"})})),await e.commit(),wI.success("Invitations sent successfully"),Z(!1),ae([])}catch(e){console.error("Error sending invitations:",e),ue(e,"Failed to send invitations")}finally{ce(!1)}},variant:"contained",disabled:le||0===se.length,children:"Send Invitations"})]})]})]})},PV=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();l(e)}catch(e){console.error("Error initializing Firestore:",e)}})()}),[]),(0,r.useEffect)((()=>{if(!a)return;const e=$w(fw(_b(a,"messages"),bw("timestamp","asc")),(e=>{const n=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()}}));t(n)}));return()=>e()}),[a]);return(0,$e.jsx)(jO,{maxWidth:"md",children:(0,$e.jsxs)(_t,{sx:{mt:4,mb:4},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",gutterBottom:!0,children:"Chat Room"}),(0,$e.jsx)(cP,{sx:{maxHeight:"60vh",overflow:"auto",bgcolor:"background.paper",borderRadius:1},children:e.map((e=>{var t;return(0,$e.jsxs)(Fj,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,$e.jsx)(iR,{variant:"subtitle2",color:"primary",children:e.username}),(0,$e.jsx)(iR,{variant:"body1",children:e.text}),(0,$e.jsx)(iR,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]},e.id)}))}),(0,$e.jsxs)(_t,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""!==n.trim()&&a)try{var t;await zw(_b(a,"messages"),{text:n,userId:null===(t=WE.currentUser)||void 0===t?void 0:t.uid,username:o||"Anonymous",timestamp:Yw()}),i("")}catch(r){console.error("Error sending message:",r)}},sx:{mt:2},children:[(0,$e.jsx)(bL,{fullWidth:!0,variant:"outlined",placeholder:"Type your message...",value:n,onChange:e=>i(e.target.value),sx:{mb:2}}),(0,$e.jsx)(tP,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})})};const NV=r.createContext({});function jV(e){return(0,gT.Ay)("MuiAccordion",e)}const OV=(0,bt.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),DV=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],MV=(0,hT.Ay)(xT,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${OV.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${OV.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${OV.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${OV.expanded}`]:{margin:"16px 0"}}}]}})),LV=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:s=!1,disabled:a=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,slots:h={},slotProps:p={},TransitionComponent:f,TransitionProps:m}=n,g=(0,Me.A)(n,DV),[v,y]=(0,KM.A)({controlled:c,default:s,name:"Accordion",state:"expanded"}),b=r.useCallback((e=>{y(!v),u&&u(e,!v)}),[v,u,y]),[w,...x]=r.Children.toArray(i),_=r.useMemo((()=>({expanded:v,disabled:a,disableGutters:l,toggle:b})),[v,a,l,b]),S=(0,De.A)({},n,{square:d,disabled:a,disableGutters:l,expanded:v}),A=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,s={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,dT.A)(s,jV,t)})(S),C=(0,De.A)({transition:f},h),k=(0,De.A)({transition:m},p),[E,I]=qT("transition",{elementType:zF,externalForwardedProps:{slots:C,slotProps:k},ownerState:S});return(0,$e.jsxs)(MV,(0,De.A)({className:(0,ht.A)(A.root,o),ref:t,ownerState:S,square:d},g,{children:[(0,$e.jsx)(NV.Provider,{value:_,children:w}),(0,$e.jsx)(E,(0,De.A)({in:v,timeout:"auto"},I,{children:(0,$e.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:A.region,children:x})}))]}))}));function FV(e){return(0,gT.Ay)("MuiAccordionSummary",e)}const zV=(0,bt.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),$V=["children","className","expandIcon","focusVisibleClassName","onClick"],UV=(0,hT.Ay)(LR,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${zV.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${zV.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${zV.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${zV.expanded}`]:{minHeight:64}}}]}})),BV=(0,hT.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${zV.expanded}`]:{margin:"20px 0"}}}]}})),VV=(0,hT.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${zV.expanded}`]:{transform:"rotate(180deg)"}}})),WV=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:s,focusVisibleClassName:a,onClick:l}=n,c=(0,Me.A)(n,$V),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=r.useContext(NV),f=(0,De.A)({},n,{expanded:h,disabled:u,disableGutters:d}),m=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,dT.A)(o,FV,t)})(f);return(0,$e.jsxs)(UV,(0,De.A)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,ht.A)(m.root,o),focusVisibleClassName:(0,ht.A)(m.focusVisible,a),onClick:e=>{p&&p(e),l&&l(e)},ref:t,ownerState:f},c,{children:[(0,$e.jsx)(BV,{className:m.content,ownerState:f,children:i}),s&&(0,$e.jsx)(VV,{className:m.expandIconWrapper,ownerState:f,children:s})]}))}));function qV(e){return(0,gT.Ay)("MuiAccordionDetails",e)}(0,bt.A)("MuiAccordionDetails",["root"]);const HV=["className"],KV=(0,hT.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),GV=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,Me.A)(n,HV),o=n,s=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"]},qV,t)})(o);return(0,$e.jsx)(KV,(0,De.A)({className:(0,ht.A)(s.root,r),ref:t,ownerState:o},i))})),YV=(0,NT.A)((0,$e.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),QV=(0,NT.A)((0,$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),XV=(0,NT.A)((0,$e.jsx)("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),JV=(0,NT.A)((0,$e.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),ZV=(0,NT.A)((0,$e.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport"),eW=(0,NT.A)((0,$e.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report"),tW=(0,NT.A)((0,$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),nW=()=>(0,$e.jsxs)(_t,{sx:{maxWidth:800,mx:"auto",p:3},children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,children:"Community Guidelines & Safety"}),(0,$e.jsxs)(LV,{children:[(0,$e.jsx)(WV,{expandIcon:(0,$e.jsx)(Xz,{}),children:(0,$e.jsx)(iR,{children:"Our Commitment to Safety"})}),(0,$e.jsx)(GV,{children:(0,$e.jsx)(iR,{children:"We are committed to maintaining a safe and respectful environment for all users. Our platform encourages healthy banter and shade while strictly prohibiting harassment, bullying, harmful content, misinformation, fraud, and cybercrime."})})]}),(0,$e.jsxs)(LV,{children:[(0,$e.jsx)(WV,{expandIcon:(0,$e.jsx)(YV,{}),children:(0,$e.jsx)(iR,{children:"Prohibited Content"})}),(0,$e.jsx)(GV,{children:(0,$e.jsxs)(cP,{children:[(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(QV,{})}),(0,$e.jsx)(nj,{primary:"Harassment & Bullying",secondary:"Targeted attacks, threats, or persistent harassment of any kind"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(QV,{})}),(0,$e.jsx)(nj,{primary:"Hate Speech",secondary:"Content that attacks or incites violence against individuals or groups"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(QV,{})}),(0,$e.jsx)(nj,{primary:"Misinformation",secondary:"Spreading false or misleading information about health, science, or current events"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(QV,{})}),(0,$e.jsx)(nj,{primary:"Fraud & Scams",secondary:"Financial scams, phishing attempts, or deceptive business practices"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(QV,{})}),(0,$e.jsx)(nj,{primary:"Cybercrime",secondary:"Hacking attempts, malware distribution, or other illegal online activities"})]})]})})]}),(0,$e.jsxs)(LV,{children:[(0,$e.jsx)(WV,{expandIcon:(0,$e.jsx)(XV,{}),children:(0,$e.jsx)(iR,{children:"Content Moderation"})}),(0,$e.jsx)(GV,{children:(0,$e.jsxs)(cP,{children:[(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(JV,{})}),(0,$e.jsx)(nj,{primary:"AI-Powered Detection",secondary:"Advanced algorithms detect harmful content, misinformation, and suspicious activities"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(ZV,{})}),(0,$e.jsx)(nj,{primary:"Automated Checks",secondary:"Real-time scanning for fraud, cybercrime, and policy violations"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(eW,{})}),(0,$e.jsx)(nj,{primary:"User Reports",secondary:"Community-driven reporting system for suspicious content"})]})]})})]}),(0,$e.jsxs)(LV,{children:[(0,$e.jsx)(WV,{expandIcon:(0,$e.jsx)(eW,{}),children:(0,$e.jsx)(iR,{children:"Reporting & Moderation"})}),(0,$e.jsx)(GV,{children:(0,$e.jsxs)(cP,{children:[(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(eW,{})}),(0,$e.jsx)(nj,{primary:"How to Report",secondary:"Click the report button on any content that violates our guidelines"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(eW,{})}),(0,$e.jsx)(nj,{primary:"Moderation Process",secondary:"Reports are reviewed by our team and appropriate action is taken"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(eW,{})}),(0,$e.jsx)(nj,{primary:"Appeals Process",secondary:"Users can appeal moderation decisions through our support system"})]})]})})]}),(0,$e.jsxs)(LV,{children:[(0,$e.jsx)(WV,{expandIcon:(0,$e.jsx)(tW,{}),children:(0,$e.jsx)(iR,{children:"Getting Help"})}),(0,$e.jsx)(GV,{children:(0,$e.jsxs)(cP,{children:[(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(tW,{})}),(0,$e.jsx)(nj,{primary:"Support Resources",secondary:"Access to mental health resources and support services"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(tW,{})}),(0,$e.jsx)(nj,{primary:"Safety Tips",secondary:"Guidelines for staying safe online and protecting your account"})]}),(0,$e.jsxs)(Fj,{children:[(0,$e.jsx)(ZN,{children:(0,$e.jsx)(tW,{})}),(0,$e.jsx)(nj,{primary:"Contact Us",secondary:"Reach out to our support team for assistance"})]})]})})]})]}),rW=()=>(0,$e.jsx)(jO,{maxWidth:"lg",children:(0,$e.jsx)(nW,{})}),iW=()=>(0,$e.jsx)(jO,{maxWidth:"md",sx:{py:4},children:(0,$e.jsxs)(xT,{elevation:3,sx:{p:4},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",gutterBottom:!0,children:"Privacy Policy"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"1. Information We Collect"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We collect information that you provide directly to us, including:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Account information (username, email, display name)"}),(0,$e.jsx)("li",{children:"Profile information (bio, profile picture)"}),(0,$e.jsx)("li",{children:"Content you post (comments, posts, messages)"}),(0,$e.jsx)("li",{children:"Communication preferences"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"2. How We Use Your Information"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Provide and maintain our services"}),(0,$e.jsx)("li",{children:"Improve and personalize your experience"}),(0,$e.jsx)("li",{children:"Communicate with you about updates and changes"}),(0,$e.jsx)("li",{children:"Ensure platform safety and security"}),(0,$e.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"3. Data Security"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We implement appropriate security measures to protect your personal information. However, no method of transmission over the internet is 100% secure."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"4. Your Rights"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"You have the right to:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Access your personal information"}),(0,$e.jsx)("li",{children:"Correct inaccurate information"}),(0,$e.jsx)("li",{children:"Request deletion of your information"}),(0,$e.jsx)("li",{children:"Opt-out of marketing communications"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"5. Cookies and Tracking"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to improve your experience and analyze usage patterns."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"6. Contact Us"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["If you have any questions about this Privacy Policy, please contact us at:",(0,$e.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),oW=()=>(0,$e.jsxs)(jO,{maxWidth:"lg",sx:{py:12},children:[(0,$e.jsx)(iR,{variant:"h1",component:"h1",sx:{textAlign:"center",fontWeight:"bold",mb:12,fontSize:{xs:"3rem",md:"4rem"},color:"primary.main",textTransform:"uppercase",letterSpacing:2},children:"About SideEye"}),(0,$e.jsxs)(_t,{sx:{mb:12},children:[(0,$e.jsx)(iR,{variant:"h2",sx:{fontWeight:"medium",mb:6,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Our Mission"}),(0,$e.jsx)(iR,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"SideEye is a platform dedicated to creating a safe and engaging space for users to share their thoughts, connect with others, and express themselves through various forms of content. We believe in fostering meaningful conversations while maintaining a respectful and inclusive environment."})]}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"h2",sx:{fontWeight:"medium",mb:8,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Features"}),(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",gap:8},children:[(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Tea Rooms"}),(0,$e.jsx)(iR,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Join themed discussion rooms to connect with like-minded individuals and share your thoughts."})]}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Shade Meter"}),(0,$e.jsx)(iR,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Our unique content moderation system helps maintain a positive community atmosphere."})]}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Leaderboard"}),(0,$e.jsx)(iR,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Compete and climb the ranks based on your positive contributions."})]})]})]})]}),sW=()=>(0,$e.jsx)(jO,{maxWidth:"md",sx:{py:4},children:(0,$e.jsxs)(xT,{elevation:3,sx:{p:4},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",gutterBottom:!0,children:"Terms of Service"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"1. Acceptance of Terms"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"By accessing or using SideEye, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"2. User Accounts"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"To use certain features of SideEye, you must create an account. You are responsible for:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Maintaining the confidentiality of your account information"}),(0,$e.jsx)("li",{children:"All activities that occur under your account"}),(0,$e.jsx)("li",{children:"Providing accurate and complete information"}),(0,$e.jsx)("li",{children:"Notifying us immediately of any unauthorized use"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"3. User Conduct"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"You agree not to:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Post or transmit any content that is unlawful, harmful, or offensive"}),(0,$e.jsx)("li",{children:"Impersonate any person or entity"}),(0,$e.jsx)("li",{children:"Interfere with the proper functioning of the service"}),(0,$e.jsx)("li",{children:"Attempt to gain unauthorized access to any portion of the service"}),(0,$e.jsx)("li",{children:"Use the service for any illegal purpose"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"4. Content Ownership"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"You retain ownership of any content you post on SideEye. By posting content, you grant us a worldwide, non-exclusive, royalty-free license to use, reproduce, modify, and distribute your content."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"5. Termination"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We reserve the right to terminate or suspend your account and access to the service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"6. Disclaimer"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:'The service is provided "as is" without any warranties, express or implied. We do not guarantee that the service will be uninterrupted, timely, secure, or error-free.'})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"7. Limitation of Liability"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"In no event shall SideEye be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or related to your use of the service."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"8. Changes to Terms"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on the service and updating the "Last updated" date.'})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"9. Contact Information"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["If you have any questions about these Terms, please contact us at:",(0,$e.jsx)("br",{}),"Email: legal@sideeye.com"]})]})]})}),aW=()=>(0,$e.jsx)(jO,{maxWidth:"md",sx:{py:4},children:(0,$e.jsxs)(xT,{elevation:3,sx:{p:4},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cookie Policy"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"What Are Cookies"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"Cookies are small text files that are placed on your computer or mobile device when you visit a website. They are widely used to make websites work more efficiently and provide useful information to website owners."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"How We Use Cookies"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"We use cookies for the following purposes:"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:"Essential cookies: Required for the website to function properly"}),(0,$e.jsx)("li",{children:"Authentication cookies: To keep you logged in"}),(0,$e.jsx)("li",{children:"Preference cookies: To remember your settings and preferences"}),(0,$e.jsx)("li",{children:"Analytics cookies: To understand how visitors use our website"}),(0,$e.jsx)("li",{children:"Marketing cookies: To deliver relevant advertisements"})]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Types of Cookies We Use"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:[(0,$e.jsx)("strong",{children:"1. Essential Cookies"}),(0,$e.jsx)("br",{}),"These cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you, such as setting your privacy preferences or filling in forms."]}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:[(0,$e.jsx)("strong",{children:"2. Performance Cookies"}),(0,$e.jsx)("br",{}),"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site."]}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:[(0,$e.jsx)("strong",{children:"3. Functionality Cookies"}),(0,$e.jsx)("br",{}),"These cookies enable the website to provide enhanced functionality and personalization."]}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:[(0,$e.jsx)("strong",{children:"4. Targeting Cookies"}),(0,$e.jsx)("br",{}),"These cookies may be set through our site by our advertising partners to build a profile of your interests."]})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Managing Cookies"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"You can control and/or delete cookies as you wish. You can delete all cookies that are already on your computer and you can set most browsers to prevent them from being placed. If you do this, however, you may have to manually adjust some preferences every time you visit a site and some services and functionalities may not work."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Third-Party Cookies"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:"Some cookies are placed by third-party services that appear on our pages. We have no control over these cookies and they are subject to the privacy policies of the respective third parties."})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Updates to This Policy"}),(0,$e.jsx)(iR,{variant:"body1",paragraph:!0,children:'We may update this Cookie Policy from time to time. We will notify you of any changes by posting the new Cookie Policy on this page and updating the "Last updated" date.'})]}),(0,$e.jsxs)(_t,{sx:{mt:4},children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Contact Us"}),(0,$e.jsxs)(iR,{variant:"body1",paragraph:!0,children:["If you have any questions about our use of cookies, please contact us at:",(0,$e.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),lW=()=>{const e=ne(),t=ee(),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{const n=new URLSearchParams(t.search).get("oobCode");if(n)try{i(!0),await as(WE,n),l(!0),setTimeout((()=>{e("/login")}),3e3)}catch(o){s("Invalid or expired verification link")}finally{i(!1)}})()}),[t,e]);return n?(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})})}):(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{mt:8,textAlign:"center"},children:a?(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,children:"Email Verified!"}),(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Your email has been successfully verified. You will be redirected to the login page."})]}):(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,children:"Verify Your Email"}),(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Please check your email for a verification link. If you haven't received it, you can request a new one."}),o&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:o}),c&&(0,$e.jsx)(cD,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox."}),(0,$e.jsx)(tP,{variant:"contained",onClick:async()=>{if(WE.currentUser)try{i(!0),await us(WE.currentUser),u(!0)}catch(o){s("Failed to send verification email. Please try again.")}finally{i(!1)}else s("No user found. Please log in again.")},disabled:n||c,sx:{mt:2},children:"Resend Verification Email"})]})})})},cW=()=>{const e=ne(),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>(window.recaptchaVerifier=new Ys(WE,"recaptcha-container",{size:"invisible",callback:()=>{}}),()=>{window.recaptchaVerifier&&window.recaptchaVerifier.clear()})),[]);return s?(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})})}):(0,$e.jsx)(jO,{maxWidth:"sm",children:(0,$e.jsx)(_t,{sx:{mt:8},children:(0,$e.jsxs)(xT,{elevation:0,sx:{p:4},children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,align:"center",children:"Two-Factor Authentication"}),h?(0,$e.jsx)(cD,{severity:"success",sx:{mb:2},children:"2FA has been successfully set up! You will be redirected to your profile."}):(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Add an extra layer of security to your account by enabling two-factor authentication."}),l&&(0,$e.jsx)(cD,{severity:"error",sx:{mb:2},children:l}),u?(0,$e.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),WE.currentUser&&u)try{a(!0),c(null);const t=Js.credential(u,i),n=$a.assertion(t);await vs(WE.currentUser).enroll(n,"Phone Number"),p(!0),setTimeout((()=>{e("/profile")}),3e3)}catch(l){c("Invalid verification code. Please try again.")}finally{a(!1)}else c("Invalid verification state. Please try again.")},children:[(0,$e.jsx)(bL,{fullWidth:!0,label:"Verification Code",value:i,onChange:e=>o(e.target.value),margin:"normal",required:!0}),(0,$e.jsx)(tP,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Verify Code"})]}):(0,$e.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),WE.currentUser)try{a(!0),c(null);const e=await vs(WE.currentUser).getSession(),n={phoneNumber:t,session:e},r=new Js(WE),i=await r.verifyPhoneNumber(n,window.recaptchaVerifier);d(i)}catch(l){c("Failed to send verification code. Please try again.")}finally{a(!1)}else c("No user found. Please log in again.")},children:[(0,$e.jsx)(bL,{fullWidth:!0,label:"Phone Number",value:t,onChange:e=>n(e.target.value),margin:"normal",required:!0,placeholder:"+1234567890"}),(0,$e.jsx)("div",{id:"recaptcha-container"}),(0,$e.jsx)(tP,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Send Verification Code"})]})]})]})})})};var uW=n(4192),dW=n(7884);const hW=()=>{const{currentUser:e}=ZI(),[t,n]=(0,r.useState)(null),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await QE();n(e)}catch(e){console.error("Error initializing Firestore:",e),p("Failed to initialize database")}})()}),[]),(0,r.useEffect)((()=>{t&&e&&f()}),[t,e]);const f=async()=>{if(t&&e)try{const n=fw(_b(t,"deleted_posts"),gw("userId","==",e.uid)),r=(await Dw(n)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),deletedAt:null===(t=e.data().deletedAt)||void 0===t?void 0:t.toDate(),scheduledForDeletion:null===(n=e.data().scheduledForDeletion)||void 0===n?void 0:n.toDate()}}));o(r)}catch(h){console.error("Error fetching deleted posts:",h),p("Failed to fetch deleted posts")}finally{a(!1)}};return s?(0,$e.jsx)(_t,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,$e.jsx)(GO,{})}):0===i.length?(0,$e.jsx)(iR,{sx:{mt:4,textAlign:"center"},children:"No deleted posts found"}):(0,$e.jsx)(_t,{sx:{mt:4},children:i.map((n=>(0,$e.jsxs)(xT,{sx:{p:2,mb:2,borderRadius:2},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,$e.jsx)(XT,{src:n.authorAvatar,alt:n.authorName||"Anonymous",sx:{mr:2},children:n.authorName?n.authorName.charAt(0):"A"}),(0,$e.jsxs)(_t,{children:[(0,$e.jsx)(iR,{variant:"subtitle1",fontWeight:"bold",children:n.authorName||"Anonymous"}),(0,$e.jsxs)(iR,{variant:"caption",color:"text.secondary",children:["Deleted ",hO(n.deletedAt)," ago"]})]})]}),(0,$e.jsx)(iR,{sx:{mb:2},children:n.content}),n.imageUrl&&(0,$e.jsx)(_t,{component:"img",src:n.imageUrl,alt:"Post content",sx:{maxWidth:"100%",maxHeight:300,borderRadius:1,mb:2}}),n.tags&&n.tags.length>0&&(0,$e.jsx)(_t,{sx:{mb:2},children:n.tags.map((e=>(0,$e.jsx)(CF,{label:`#${e}`,size:"small",sx:{mr:1,mb:1}},e)))}),(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,$e.jsx)(tP,{variant:"outlined",startIcon:(0,$e.jsx)(uW.A,{}),onClick:()=>(async n=>{if(t&&e){c(n);try{const r=Sb(t,"deleted_posts",n),i=(await jw(r)).data();if(!i)throw new Error("Post not found");const s=Sb(t,"posts",n);await Lw(s,{...i,deletedAt:null,scheduledForDeletion:null}),await Fw(r),await Lw(Sb(t,"users",e.uid),{postCount:Jw(1)}),o((e=>e.filter((e=>e.id!==n))))}catch(h){console.error("Error restoring post:",h)}finally{c(null)}}})(n.id),disabled:!!l,children:l===n.id?(0,$e.jsx)(GO,{size:24}):"Restore"}),(0,$e.jsx)(tP,{variant:"outlined",color:"error",startIcon:(0,$e.jsx)(dW.A,{}),onClick:()=>(async e=>{if(t){d(e);try{const n=Sb(t,"deleted_posts",e);await Fw(n),o((t=>t.filter((t=>t.id!==e))))}catch(h){console.error("Error permanently deleting post:",h),p("Failed to permanently delete post")}finally{d(null)}}})(n.id),disabled:!!u,children:u===n.id?(0,$e.jsx)(GO,{size:24}):"Delete Forever"})]})]},n.id)))})},pW=()=>(0,$e.jsx)(jO,{maxWidth:"md",children:(0,$e.jsxs)(_t,{sx:{py:4},children:[(0,$e.jsx)(iR,{variant:"h4",sx:{mb:4},children:"Trash"}),(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Posts in the trash will be automatically deleted after 24 hours. You can restore them before then."}),(0,$e.jsx)(hW,{})]})}),fW=()=>{const{userId:e}=re(),{db:t}=mF(),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{if(t&&e)try{const n=await jw(Sb(t,"users",e));if(n.exists()){const e=n.data(),r=(e.followers||[]).map((async e=>{const n=await jw(Sb(t,"users",e));if(n.exists()){return{...n.data(),id:e}}return null})),o=await Promise.all(r);i(o.filter(Boolean))}}catch(n){l("Failed to fetch followers"),console.error("Error fetching followers:",n)}finally{s(!1)}})()}),[t,e]),o?(0,$e.jsx)(_t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,$e.jsx)(GO,{})}):a?(0,$e.jsx)(_t,{p:3,children:(0,$e.jsx)(iR,{color:"error",children:a})}):(0,$e.jsxs)(_t,{p:3,children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Followers"}),(0,$e.jsxs)(cP,{children:[n.map((e=>(0,$e.jsxs)(Fj,{component:Re,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.profilePic,alt:e.username})}),(0,$e.jsx)(nj,{primary:e.username,secondary:e.name})]},e.id))),0===n.length&&(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",children:"No followers yet"})]})]})},mW=()=>{const{userId:e}=re(),{db:t}=mF(),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{if(t&&e)try{const n=await jw(Sb(t,"users",e));if(n.exists()){const e=n.data(),r=(e.connections||[]).map((async e=>{const n=await jw(Sb(t,"users",e));if(n.exists()){return{...n.data(),id:e}}return null})),o=await Promise.all(r);i(o.filter(Boolean))}}catch(n){l("Failed to fetch following"),console.error("Error fetching following:",n)}finally{s(!1)}})()}),[t,e]),o?(0,$e.jsx)(_t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,$e.jsx)(GO,{})}):a?(0,$e.jsx)(_t,{p:3,children:(0,$e.jsx)(iR,{color:"error",children:a})}):(0,$e.jsxs)(_t,{p:3,children:[(0,$e.jsx)(iR,{variant:"h5",gutterBottom:!0,children:"Following"}),(0,$e.jsxs)(cP,{children:[n.map((e=>(0,$e.jsxs)(Fj,{component:Re,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{src:e.profilePic,alt:e.username})}),(0,$e.jsx)(nj,{primary:e.username,secondary:e.name})]},e.id))),0===n.length&&(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",children:"Not following anyone yet"})]})]})},gW=e=>{let{message:t="Loading..."}=e;return(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,$e.jsx)(GO,{size:60,thickness:4}),(0,$e.jsx)(iR,{variant:"h6",sx:{mt:2},children:t})]})},vW=e=>{let{children:t,requireAuth:n=!0,requireEmailVerification:r=!1,require2FA:i=!1}=e;const{currentUser:o,loading:s,userProfile:a}=ZI();return s?(0,$e.jsx)(gW,{message:"Checking authentication..."}):n&&!o?(0,$e.jsx)(ye,{to:"/login",replace:!0}):r&&o&&!o.emailVerified?(0,$e.jsx)(ye,{to:"/verify-email",replace:!0}):i&&a&&!a.isVerified?(0,$e.jsx)(ye,{to:"/2fa",replace:!0}):(0,$e.jsx)($e.Fragment,{children:t})};class yW extends r.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,$e.jsx)(iR,{variant:"h4",gutterBottom:!0,children:"Oops! Something went wrong"}),(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,$e.jsx)(tP,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]}):this.props.children}}const bW=yW;const wW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:i,open:o,resumeHideDuration:s}=e,a=(0,yR.A)();r.useEffect((()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[o,i]);const l=(0,rN.A)(((e,t)=>{null==i||i(e,t)})),c=(0,rN.A)((e=>{i&&null!=e&&a.start(e,(()=>{l(null,"timeout")}))}));r.useEffect((()=>(o&&c(t),a.clear)),[o,t,c,a]);const u=a.clear,d=r.useCallback((()=>{null!=t&&c(null!=s?s:.5*t)}),[t,s,c]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return r.useEffect((()=>{if(!n&&o)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[n,o,d,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,De.A)({},zT(e),zT(t));return(0,De.A)({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),d()}),onFocus:h(n),onMouseEnter:p(n),onMouseLeave:f(n)});var r},onClickAway:e=>{null==i||i(e,"clickaway")}}};function xW(e){return(0,gT.Ay)("MuiSnackbarContent",e)}(0,bt.A)("MuiSnackbarContent",["root","message","action"]);const _W=["action","className","message","role"],SW=(0,hT.Ay)(xT,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,fT.tL)(t.palette.background.default,n);return(0,De.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),AW=(0,hT.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),CW=(0,hT.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),kW=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:o,role:s="alert"}=n,a=(0,Me.A)(n,_W),l=n,c=(e=>{const{classes:t}=e;return(0,dT.A)({root:["root"],action:["action"],message:["message"]},xW,t)})(l);return(0,$e.jsxs)(SW,(0,De.A)({role:s,square:!0,elevation:6,className:(0,ht.A)(c.root,i),ownerState:l,ref:t},a,{children:[(0,$e.jsx)(AW,{className:c.message,ownerState:l,children:o}),r?(0,$e.jsx)(CW,{className:c.action,ownerState:l,children:r}):null]}))}));function EW(e){return(0,gT.Ay)("MuiSnackbar",e)}(0,bt.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const IW=["onEnter","onExited"],TW=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],RW=(0,hT.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,pT.A)(n.anchorOrigin.vertical)}${(0,pT.A)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,De.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),PW=r.forwardRef((function(e,t){const n=(0,tt.b)({props:e,name:"MuiSnackbar"}),i=NP(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:v=$P,transitionDuration:y=o,TransitionProps:{onEnter:b,onExited:w}={}}=n,x=(0,Me.A)(n.TransitionProps,IW),_=(0,Me.A)(n,TW),S=(0,De.A)({},n,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:v,transitionDuration:y}),A=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,pT.A)(n.vertical)}${(0,pT.A)(n.horizontal)}`]};return(0,dT.A)(r,EW,t)})(S),{getRootProps:C,onClickAway:k}=wW((0,De.A)({},S)),[E,I]=r.useState(!0),T=rP({elementType:RW,getSlotProps:C,externalForwardedProps:_,ownerState:S,additionalProps:{ref:t},className:[A.root,d]});return!g&&E?null:(0,$e.jsx)(dD,(0,De.A)({onClickAway:k},h,{children:(0,$e.jsx)(RW,(0,De.A)({},T,{children:(0,$e.jsx)(v,(0,De.A)({appear:!0,in:g,timeout:y,direction:"top"===a?"down":"up",onEnter:(e,t)=>{I(!1),b&&b(e,t)},onExited:e=>{I(!0),w&&w(e)}},x,{children:u||(0,$e.jsx)(kW,(0,De.A)({message:m,action:s},p))}))}))}))})),NW=e=>{let{children:t,maxRequests:n=10,timeWindow:i=6e4}=e;const[o,s]=(0,r.useState)(null),a=(0,r.useRef)(0),l=(0,r.useRef)(Date.now()),c=(0,r.useCallback)((()=>{const e=Date.now();return e-l.current>=i&&(a.current=0,l.current=e),a.current>=n?(s(`Rate limit exceeded. Please try again in ${Math.ceil((i-(e-l.current))/1e3)} seconds.`),!1):(a.current++,!0)}),[n,i]),u=()=>{s(null)};return(0,$e.jsxs)($e.Fragment,{children:[r.Children.map(t,(e=>r.isValidElement(e)?r.cloneElement(e,{checkRateLimit:c}):e)),(0,$e.jsx)(PW,{open:!!o,autoHideDuration:6e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,$e.jsx)(cD,{onClose:u,severity:"error",sx:{width:"100%"},children:o})})]})},jW=()=>{const{notifications:e,markAsRead:t,deleteNotification:n,markAllAsRead:i}=rT(),o=ne(),s=e=>{switch(e){case"follow":return"\ud83d\udc65";case"like":return"\u2764\ufe0f";case"comment":return"\ud83d\udcac";case"tag":return"#\ufe0f\u20e3";case"mention":return"@\ufe0f";case"room_invite":return"\ud83d\udeaa";default:return"\ud83d\udce2"}};return(0,$e.jsx)(jO,{maxWidth:"md",sx:{py:4},children:(0,$e.jsxs)(xT,{elevation:0,sx:{p:3},children:[(0,$e.jsxs)(_t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,$e.jsx)(iR,{variant:"h4",component:"h1",children:"Notifications"}),e.some((e=>!e.read))&&(0,$e.jsx)(tP,{onClick:()=>i(),children:"Mark all as read"})]}),(0,$e.jsx)(cP,{children:0===e.length?(0,$e.jsx)(_t,{sx:{textAlign:"center",py:4},children:(0,$e.jsx)(iR,{variant:"body1",color:"text.secondary",children:"No notifications yet"})}):e.map(((e,i)=>(0,$e.jsxs)(r.Fragment,{children:[i>0&&(0,$e.jsx)(aj,{}),(0,$e.jsxs)(Fj,{button:!0,onClick:()=>(async e=>{e.read||await t(e.id),o(e.link)})(e),sx:{backgroundColor:e.read?"transparent":"action.hover","&:hover":{backgroundColor:"action.hover"}},children:[(0,$e.jsx)(Bj,{children:(0,$e.jsx)(XT,{sx:{bgcolor:"primary.main"},children:s(e.type)})}),(0,$e.jsx)(nj,{primary:(0,$e.jsx)(iR,{variant:"body1",sx:{fontWeight:e.read?"normal":"bold"},children:e.content}),secondary:hO(e.timestamp.toDate(),{addSuffix:!0})}),(0,$e.jsx)(BR,{edge:"end",onClick:t=>(async(e,t)=>{e.stopPropagation(),await n(t)})(t,e.id),sx:{ml:2},children:(0,$e.jsx)(xL,{})})]})]},e.id)))})]})})},OW=()=>(0,$e.jsx)(Ee,{children:(0,$e.jsxs)(et,{theme:iT,children:[(0,$e.jsx)(dt,{}),(0,$e.jsx)(bW,{children:(0,$e.jsx)(JI,{children:(0,$e.jsx)(gF,{children:(0,$e.jsx)(nT,{children:(0,$e.jsxs)(NW,{children:[(0,$e.jsxs)(_t,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,$e.jsx)(fO,{}),(0,$e.jsx)(_t,{component:"main",sx:{flexGrow:1},children:(0,$e.jsxs)(xe,{children:[(0,$e.jsx)(be,{path:"/",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(JF,{})})}),(0,$e.jsx)(be,{path:"/login",element:(0,$e.jsx)(ZF,{})}),(0,$e.jsx)(be,{path:"/register",element:(0,$e.jsx)(cz,{})}),(0,$e.jsx)(be,{path:"/profile/:userId?",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(Qz,{})})}),(0,$e.jsx)(be,{path:"/settings",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(t$,{})})}),(0,$e.jsx)(be,{path:"/search",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(o$,{})})}),(0,$e.jsx)(be,{path:"/discover",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(u$,{})})}),(0,$e.jsx)(be,{path:"/messages",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(d$,{})})}),(0,$e.jsx)(be,{path:"/side-rooms",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(LB,{})})}),(0,$e.jsx)(be,{path:"/side-room/:roomId",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(RV,{})})}),(0,$e.jsx)(be,{path:"/chat/:userId",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(PV,{})})}),(0,$e.jsx)(be,{path:"/safety",element:(0,$e.jsx)(rW,{})}),(0,$e.jsx)(be,{path:"/privacy-policy",element:(0,$e.jsx)(iW,{})}),(0,$e.jsx)(be,{path:"/about",element:(0,$e.jsx)(oW,{})}),(0,$e.jsx)(be,{path:"/terms",element:(0,$e.jsx)(sW,{})}),(0,$e.jsx)(be,{path:"/cookies",element:(0,$e.jsx)(aW,{})}),(0,$e.jsx)(be,{path:"/verify-email",element:(0,$e.jsx)(lW,{})}),(0,$e.jsx)(be,{path:"/2fa",element:(0,$e.jsx)(cW,{})}),(0,$e.jsx)(be,{path:"/trash",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(pW,{})})}),(0,$e.jsx)(be,{path:"/profile/:userId/followers",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(fW,{})})}),(0,$e.jsx)(be,{path:"/profile/:userId/following",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(mW,{})})}),(0,$e.jsx)(be,{path:"/notifications",element:(0,$e.jsx)(vW,{children:(0,$e.jsx)(jW,{})})})]})})]}),(0,$e.jsx)(QI,{position:"bottom-right"})]})})})})})]})});o.createRoot(document.getElementById("root")).render((0,$e.jsx)(r.StrictMode,{children:(0,$e.jsx)(OW,{})}))})()})();
//# sourceMappingURL=main.d46e4130.js.map