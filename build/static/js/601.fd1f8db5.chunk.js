"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[601],{760:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(3235),n=s(4414);const a=(0,r.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},1601:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var r=s(9379),n=s(9950),a=s(9808),o=s(6491),i=s(2053),l=s(2235),c=s(8145),d=s(5979),u=s(3788),m=s(6101),x=s(3266),h=s(226),A=s(6639),g=s(249),f=s(6050),v=s(8614),p=s(1413),y=s(3563),j=s(5277),b=s(5333),S=s(6583),w=s(33),C=s(8170),D=s(6493),I=s(9739),M=s(4862),N=s(3174),z=s(920),T=s(1673),k=s(2750),P=s(3235),R=s(4414);const X=(0,P.A)((0,R.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown");var E=s(760),H=s(1367),F=s(6220),B=s(330),U=s(7081);const L=()=>{const{currentUser:e}=(0,H.As)(),[t,s]=(0,n.useState)([]),[P,L]=(0,n.useState)(!0),[W,V]=(0,n.useState)(!1),[Z,q]=(0,n.useState)({}),[Y,J]=(0,n.useState)(""),[O,_]=(0,n.useState)(""),[G,Q]=(0,n.useState)(""),[K,$]=(0,n.useState)(""),[ee,te]=(0,n.useState)(!1),[se,re]=(0,n.useState)(""),[ne,ae]=(0,n.useState)("success"),[oe,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e=(0,F.rJ)(B.db,"suggestions"),t=(0,F.P)(e,(0,F.My)("createdAt","desc")),n=(0,F.aQ)(t,(e=>{const t=e.docs.map((e=>(0,r.A)({id:e.id},e.data())));s(t),L(!1)}));return()=>n()}),[]),(0,n.useEffect)((()=>{if(!e)return;(async()=>{try{const t=(0,F.H9)(B.db,"users",e.uid),s=await(0,F.x7)(t);if(s.exists()){const e=s.data();q({username:e.username,name:e.name,profilePic:e.profilePic||e.photoURL})}}catch(t){console.error("Error fetching user data:",t)}})()}),[e]);const de=async(s,r)=>{if(e)try{const n=(0,F.H9)(B.db,"suggestions",s),a=t.find((e=>e.id===s));if(!a)return;const o=a.upvotes.includes(e.uid),i=a.downvotes.includes(e.uid);if("upvote"===r)if(o)await(0,F.mZ)(n,{upvotes:(0,F.C3)(e.uid)});else{const t={upvotes:(0,F.hq)(e.uid)};i&&(t.downvotes=(0,F.C3)(e.uid)),await(0,F.mZ)(n,t)}else if(i)await(0,F.mZ)(n,{downvotes:(0,F.C3)(e.uid)});else{const t={downvotes:(0,F.hq)(e.uid)};o&&(t.upvotes=(0,F.C3)(e.uid)),await(0,F.mZ)(n,t)}}catch(n){console.error("Error voting:",n),re("Failed to register vote"),ae("error"),te(!0)}};return(0,R.jsxs)(a.A,{maxWidth:"md",sx:{mt:4,mb:4},children:[(0,R.jsxs)(o.A,{sx:{mb:4},children:[(0,R.jsxs)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(z.A,{fontSize:"large",color:"primary"}),"Suggestions"]}),(0,R.jsx)(i.A,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"Help us improve SideEye by sharing your ideas and suggestions!"}),(0,R.jsxs)(l.A,{elevation:2,sx:{p:3,mb:4},children:[(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Submit a New Suggestion"}),(0,R.jsxs)(o.A,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,R.jsx)(c.A,{label:"Suggestion Title",variant:"outlined",fullWidth:!0,value:Y,onChange:e=>J(e.target.value),placeholder:"Brief title for your suggestion...",disabled:W}),(0,R.jsxs)(d.A,{fullWidth:!0,disabled:W,children:[(0,R.jsx)(u.A,{children:"Category"}),(0,R.jsx)(m.A,{value:G,label:"Category",onChange:e=>Q(e.target.value),children:["New Features","New Rooms","New Gifts","Categories","UI/UX Improvements","Performance","Bug Reports","Content & Media","Social Features","Security & Privacy","Other"].map((e=>(0,R.jsx)(x.A,{value:e,children:e},e)))})]}),(0,R.jsxs)(d.A,{fullWidth:!0,disabled:W,children:[(0,R.jsx)(u.A,{children:"Post Type"}),(0,R.jsxs)(m.A,{value:K,label:"Post Type",onChange:e=>$(e.target.value),children:[(0,R.jsx)(x.A,{value:"public",children:(0,R.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:"\ud83d\udc64 Post Publicly"})}),(0,R.jsx)(x.A,{value:"anonymous",children:(0,R.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:"\ud83d\udd76\ufe0f Post Anonymously"})})]})]}),(0,R.jsx)(c.A,{label:"Description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,value:O,onChange:e=>_(e.target.value),placeholder:"Describe your suggestion in detail...",disabled:W}),(0,R.jsx)(h.A,{variant:"contained",startIcon:W?(0,R.jsx)(A.A,{size:20}):(0,R.jsx)(T.A,{}),onClick:async()=>{if(!e||!Y.trim()||!O.trim()||!G||!K)return re("Please fill in all fields"),ae("error"),void te(!0);V(!0);try{const t="anonymous"===K;await(0,F.gS)((0,F.rJ)(B.db,"suggestions"),{title:Y.trim(),description:O.trim(),category:G,authorId:e.uid,authorName:t?"Anonymous User":Z.name||Z.username||e.displayName||"User",authorAvatar:t?"":Z.profilePic||e.photoURL||"",isAnonymous:t,upvotes:[],downvotes:[],status:"pending",createdAt:(0,F.O5)()}),J(""),_(""),Q(""),$(""),re("Suggestion submitted successfully!"),ae("success"),te(!0),localStorage.setItem("suggestionSubmitted","true"),window.dispatchEvent(new CustomEvent("suggestionSubmittedImmediate"))}catch(t){console.error("Error submitting suggestion:",t),re("Failed to submit suggestion"),ae("error"),te(!0)}finally{V(!1)}},disabled:W||!Y.trim()||!O.trim()||!G||!K,sx:{alignSelf:"flex-start"},children:W?"Submitting...":"Submit Suggestion"})]})]}),(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Community Suggestions"}),P?(0,R.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,R.jsx)(A.A,{})}):0===t.length?(0,R.jsx)(l.A,{sx:{p:4,textAlign:"center"},children:(0,R.jsx)(i.A,{variant:"body1",color:"text.secondary",children:"No suggestions yet. Be the first to share your ideas!"})}):(0,R.jsx)(g.A,{sx:{bgcolor:"background.paper",borderRadius:1},children:t.map(((s,r)=>(0,R.jsxs)(n.Fragment,{children:[(0,R.jsxs)(f.Ay,{alignItems:"flex-start",sx:{py:2},children:[(0,R.jsx)(v.A,{children:(0,R.jsx)(p.A,{src:s.isAnonymous?void 0:s.authorAvatar,alt:s.authorName,sx:{bgcolor:s.isAnonymous?"grey.500":void 0},children:s.isAnonymous?"\ud83d\udd76\ufe0f":s.authorName.charAt(0).toUpperCase()})}),(0,R.jsx)(y.A,{primary:(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,R.jsx)(i.A,{variant:"h6",component:"span",children:s.title}),(0,R.jsx)(j.A,{label:s.category,size:"small",variant:"outlined"}),s.isAnonymous&&(0,R.jsx)(j.A,{label:"Anonymous",size:"small",variant:"outlined",sx:{bgcolor:"grey.100",color:"grey.700",borderColor:"grey.400"}})]}),secondary:(0,R.jsxs)(o.A,{children:[(0,R.jsx)(i.A,{variant:"body2",color:"text.primary",sx:{mb:1},children:s.description}),(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,R.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,R.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:["By ",s.authorName," \u2022 ",s.createdAt&&(0,U.A)(s.createdAt.toDate(),{addSuffix:!0})]})}),(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(b.A,{size:"small",onClick:()=>de(s.id,"upvote"),color:s.upvotes.includes((null===e||void 0===e?void 0:e.uid)||"")?"primary":"default",disabled:!e,children:(0,R.jsx)(k.A,{fontSize:"small"})}),(0,R.jsx)(i.A,{variant:"caption",children:s.upvotes.length})]}),(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(b.A,{size:"small",onClick:()=>de(s.id,"downvote"),color:s.downvotes.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"default",disabled:!e,children:(0,R.jsx)(X,{fontSize:"small"})}),(0,R.jsx)(i.A,{variant:"caption",children:s.downvotes.length})]}),(null===e||void 0===e?void 0:e.uid)===s.authorId&&(0,R.jsx)(b.A,{size:"small",onClick:()=>{return e=s.id,ce(e),void ie(!0);var e},color:"error",children:(0,R.jsx)(E.A,{fontSize:"small"})})]})]})]})})]}),r<t.length-1&&(0,R.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider",mx:2}})]},s.id)))})]}),(0,R.jsxs)(S.A,{open:oe,onClose:()=>ie(!1),"aria-labelledby":"delete-dialog-title",children:[(0,R.jsx)(w.A,{id:"delete-dialog-title",children:"Delete Suggestion?"}),(0,R.jsx)(C.A,{children:(0,R.jsx)(D.A,{children:"Are you sure you want to delete this suggestion? This action cannot be undone."})}),(0,R.jsxs)(I.A,{children:[(0,R.jsx)(h.A,{onClick:()=>ie(!1),children:"Cancel"}),(0,R.jsx)(h.A,{onClick:async()=>{if(le&&e)try{await(0,F.kd)((0,F.H9)(B.db,"suggestions",le)),re("Suggestion deleted successfully"),ae("success"),te(!0)}catch(t){console.error("Error deleting suggestion:",t),re("Failed to delete suggestion"),ae("error"),te(!0)}finally{ie(!1),ce(null)}},color:"error",variant:"contained",children:"Delete"})]})]}),(0,R.jsx)(M.A,{open:ee,autoHideDuration:4e3,onClose:()=>te(!1),children:(0,R.jsx)(N.A,{onClose:()=>te(!1),severity:ne,sx:{width:"100%"},children:se})})]})}},1673:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(3235),n=s(4414);const a=(0,r.A)((0,n.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},2750:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(3235),n=s(4414);const a=(0,r.A)((0,n.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp")},6493:(e,t,s)=>{s.d(t,{A:()=>v});var r=s(8587),n=s(8168),a=s(9950),o=s(2004),i=s(8465),l=s(9254),c=s(9608),d=s(8463),u=s(2053),m=s(1763),x=s(423);function h(e){return(0,x.Ay)("MuiDialogContentText",e)}(0,m.A)("MuiDialogContentText",["root"]);var A=s(4414);const g=["children","className"],f=(0,l.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v=a.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:a}=s,l=(0,r.A)(s,g),c=(e=>{const{classes:t}=e,s=(0,i.A)({root:["root"]},h,t);return(0,n.A)({},t,s)})(l);return(0,A.jsx)(f,(0,n.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,o.A)(c.root,a)},s,{classes:c}))}))},7081:(e,t,s)=>{s.d(t,{A:()=>f});var r=s(3840),n=s(7476),a=s(2588),o=s(4369),i=s(6792),l=s(8889),c=s(4388);var d=s(2434),u=s(8397),m=1440,x=2520,h=43200,A=86400;function g(e,t,s){var g,f;(0,u.A)(2,arguments);var v=(0,r.q)(),p=null!==(g=null!==(f=null===s||void 0===s?void 0:s.locale)&&void 0!==f?f:v.locale)&&void 0!==g?g:i.A;if(!p.formatDistance)throw new RangeError("locale must contain formatDistance property");var y=(0,n.A)(e,t);if(isNaN(y))throw new RangeError("Invalid time value");var j,b,S,w=(0,c.A)((j=s,(0,c.A)({},j)),{addSuffix:Boolean(null===s||void 0===s?void 0:s.addSuffix),comparison:y});y>0?(b=(0,l.A)(t),S=(0,l.A)(e)):(b=(0,l.A)(e),S=(0,l.A)(t));var C,D=(0,o.A)(S,b),I=((0,d.A)(S)-(0,d.A)(b))/1e3,M=Math.round((D-I)/60);if(M<2)return null!==s&&void 0!==s&&s.includeSeconds?D<5?p.formatDistance("lessThanXSeconds",5,w):D<10?p.formatDistance("lessThanXSeconds",10,w):D<20?p.formatDistance("lessThanXSeconds",20,w):D<40?p.formatDistance("halfAMinute",0,w):D<60?p.formatDistance("lessThanXMinutes",1,w):p.formatDistance("xMinutes",1,w):0===M?p.formatDistance("lessThanXMinutes",1,w):p.formatDistance("xMinutes",M,w);if(M<45)return p.formatDistance("xMinutes",M,w);if(M<90)return p.formatDistance("aboutXHours",1,w);if(M<m){var N=Math.round(M/60);return p.formatDistance("aboutXHours",N,w)}if(M<x)return p.formatDistance("xDays",1,w);if(M<h){var z=Math.round(M/m);return p.formatDistance("xDays",z,w)}if(M<A)return C=Math.round(M/h),p.formatDistance("aboutXMonths",C,w);if((C=(0,a.A)(S,b))<12){var T=Math.round(M/h);return p.formatDistance("xMonths",T,w)}var k=C%12,P=Math.floor(C/12);return k<3?p.formatDistance("aboutXYears",P,w):k<9?p.formatDistance("overXYears",P,w):p.formatDistance("almostXYears",P+1,w)}function f(e,t){return(0,u.A)(1,arguments),g(e,Date.now(),t)}},8614:(e,t,s)=>{s.d(t,{A:()=>f});var r=s(8587),n=s(8168),a=s(9950),o=s(2004),i=s(8465),l=s(3372),c=s(9254),d=s(8463),u=s(1763),m=s(423);function x(e){return(0,m.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var h=s(4414);const A=["className"],g=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,"flex-start"===s.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),f=a.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:c}=s,u=(0,r.A)(s,A),m=a.useContext(l.A),f=(0,n.A)({},s,{alignItems:m.alignItems}),v=(e=>{const{alignItems:t,classes:s}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(r,x,s)})(f);return(0,h.jsx)(g,(0,n.A)({className:(0,o.A)(v.root,c),ownerState:f,ref:t},u))}))}}]);