"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[675],{227:(e,i,t)=>{t.d(i,{A:()=>s});var a=t(3235),r=t(4414);const s=(0,a.A)((0,r.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},3675:(e,i,t)=>{t.r(i),t.d(i,{default:()=>T});var a=t(9379),r=t(9950),s=t(4857),o=t(6589),n=t(6491),d=t(6639),l=t(9808),c=t(2053),u=t(8145),m=t(2046),h=t(2235),x=t(249),p=t(6050),v=t(8614),A=t(1413),f=t(3563),b=t(5333),g=t(4745),y=t(2236),w=t(4142),j=t(1378),P=t(899),k=t(470),C=t(3569),S=t(5277),D=t(704),M=t(226),U=t(9715),E=t(6164),G=t(7092),L=t(227),z=t(4066),I=t(3235),R=t(4414);const W=(0,I.A)((0,R.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var B=t(8429),H=t(6220),F=t(330),O=t(1367),N=t(5887),_=t(7081);const V=e=>{try{return(0,_.A)(e)}catch(i){return e instanceof Date?e.toLocaleString():new Date(e).toLocaleString()}},J=e=>{if(!e)return"";try{return e.toDate?V(e.toDate()):e instanceof Date?V(e):V(new Date(e))}catch(i){return console.error("Error formatting timestamp:",i),""}};var X=t(9325),q=t(1849);const T=()=>{var e;const[i,t]=(0,r.useState)(0),[I,_]=(0,r.useState)(""),[V,T]=(0,r.useState)([]),[Y,K]=(0,r.useState)([]),[Z,Q]=(0,r.useState)(!0),[$,ee]=(0,r.useState)(new Set),[ie,te]=(0,r.useState)(new Set),ae=(0,B.Zp)(),{currentUser:re}=(0,O.As)(),[se,oe]=(0,r.useState)(null),ne=(0,s.A)(),de=(0,o.A)(ne.breakpoints.down("sm")),[le,ce]=(0,r.useState)(!1),[ue,me]=(0,r.useState)([]),[he,xe]=(0,r.useState)(!1),pe=r.useRef(null),[ve,Ae]=(0,r.useState)("All"),[fe,be]=(0,r.useState)(!1),ge=async()=>{try{const e=(0,H.rJ)(F.db,"users"),i=(0,H.P)(e,(0,H.My)("createdAt","desc"),(0,H.AB)(20)),t=(await(0,H.GG)(i)).docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id)).map((e=>({id:e.id,username:e.data().username||"",name:e.data().name||"",profilePic:e.data().profilePic,bio:e.data().bio,coverPhoto:e.data().coverPhoto,isPublic:e.data().isPublic,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email})));K(t)}catch(se){console.error("Error fetching users:",se)}finally{Q(!1)}},ye=async()=>{try{if(Q(!0),!F.db)return;const e=await(async()=>{if(!re||!F.db)return[];try{const e=(0,H.rJ)(F.db,"users"),i=await(0,H.GG)(e),t=[];return i.forEach((e=>{const i=e.data();i.blockedUsers&&Array.isArray(i.blockedUsers)&&i.blockedUsers.includes(re.uid)&&t.push(e.id)})),[...re.blockedUsers||[],...t]}catch(se){return console.error("Error fetching blocked users:",se),[]}})(),i=(0,H.rJ)(F.db,"sideRooms"),t=(0,H.P)(i,(0,H._M)("deleted","!=",!0)),r=await(0,H.GG)(t),s=r.docs.map((e=>{const i=e.data();return(0,a.A)({id:e.id},i)})).filter((i=>!e.includes(i.ownerId))),o=await Promise.all(s.map((async e=>{try{var i,t;const a=await(0,H.x7)((0,H.H9)(F.db,"users",e.ownerId)),r=a.exists()?a.data():null;return{id:e.id,name:e.name||"",description:e.description||"",memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(i=e.createdAt)||void 0===i?void 0:i.toDate())||new Date,creatorName:(null===r||void 0===r?void 0:r.username)||"Unknown",creatorId:e.ownerId,creatorAvatar:(null===r||void 0===r?void 0:r.profilePic)||"",tags:e.tags||[],lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||""}}catch(se){return console.error("Error fetching owner data for room ".concat(e.id,":"),se),null}})));T(o.filter((e=>null!==e)))}catch(se){console.error("Error fetching rooms:",se)}finally{Q(!1)}};(0,r.useEffect)((()=>{ge(),ye();const e=async()=>{re&&(await we(),await je())};e();const i=()=>{e()};return window.addEventListener("focus",i),()=>{window.removeEventListener("focus",i)}}),[re]),(0,r.useEffect)((()=>{re&&$.size>0&&je()}),[$]);const we=async()=>{if(re&&F.db)try{const e=(0,H.P)((0,H.rJ)(F.db,"users/".concat(re.uid,"/following"))),i=await(0,H.GG)(e),t=new Set(i.docs.map((e=>e.id))),a=(0,H.P)((0,H.rJ)(F.db,"users")),r=await(0,H.GG)(a);await Promise.all(r.docs.map((async e=>{if(t.has(e.id))return;const i=(0,H.H9)(F.db,"users/".concat(e.id,"/followers/").concat(re.uid));if((await(0,H.x7)(i)).exists()){t.add(e.id);const i=(0,H.H9)(F.db,"users/".concat(re.uid,"/following/").concat(e.id));(await(0,H.x7)(i)).exists()||(await(0,H.BN)(i,{timestamp:(0,H.O5)()}),console.log("Fixed inconsistent follow status for user ".concat(e.id)))}}))),ee(t)}catch(se){console.error("Error fetching following:",se)}},je=async()=>{if(re&&F.db)try{const e=new Set,i=(0,H.P)((0,H.rJ)(F.db,"users"),(0,H._M)("isPrivate","==",!0)),t=await(0,H.GG)(i);await Promise.all(t.docs.map((async i=>{if($.has(i.id))return;const t=(0,H.H9)(F.db,"users/".concat(i.id,"/followRequests/").concat(re.uid));(await(0,H.x7)(t)).exists()&&e.add(i.id)})));const a=(0,H.P)((0,H.rJ)(F.db,"users"),(0,H._M)("isPublic","==",!1)),r=await(0,H.GG)(a);await Promise.all(r.docs.map((async i=>{if($.has(i.id)||e.has(i.id))return;const t=(0,H.H9)(F.db,"users/".concat(i.id,"/followRequests/").concat(re.uid));(await(0,H.x7)(t)).exists()&&e.add(i.id)}))),te(e)}catch(se){console.error("Error fetching pending requests:",se)}},Pe=async e=>{if(re&&e!==re.uid)try{const r=(0,H.H9)(F.db,"users/".concat(re.uid,"/following"),e),s=(0,H.H9)(F.db,"users/".concat(e,"/followers"),re.uid);if($.has(e))await(0,H.kd)(r),await(0,H.kd)(s),ee((i=>{const t=new Set(i);return t.delete(e),t})),N.oR.success("Unfollowed user");else{const o=await(async e=>{if(!F.db)return!1;try{const i=(0,H.H9)(F.db,"users",e),t=await(0,H.x7)(i);if(t.exists()){const e=t.data();return!0===e.isPrivate||!1===e.isPublic}return!1}catch(se){return console.error("Error checking if account is private:",se),!1}})(e);if(o){var i;const t=(0,H.H9)(F.db,"users",e,"followRequests",re.uid);await(0,H.BN)(t,{userId:re.uid,username:re.displayName||(null===(i=re.email)||void 0===i?void 0:i.split("@")[0])||"User_".concat(re.uid.substring(0,5)),timestamp:(0,H.O5)()}),te((i=>new Set(i).add(e))),N.oR.success("Follow request sent")}else{var t,a;await(0,H.BN)(r,{timestamp:(0,H.O5)()}),await(0,H.BN)(s,{timestamp:(0,H.O5)()}),ee((i=>new Set(i).add(e)));const i={type:"follow",senderId:re.uid,senderName:re.displayName||(null===(t=re.email)||void 0===t?void 0:t.split("@")[0])||"Someone",senderAvatar:re.photoURL||"",recipientId:e,content:"".concat(re.displayName||(null===(a=re.email)||void 0===a?void 0:a.split("@")[0])||"Someone"," started following you"),createdAt:(0,H.O5)(),isRead:!1};await(0,H.gS)((0,H.rJ)(F.db,"notifications"),i),N.oR.success("Followed user")}}}catch(se){console.error("Error toggling follow:",se),N.oR.error("Failed to update follow status")}},ke=e=>{ae("/side-room/".concat(e))},Ce=async function(e){if(_(e),""===e.trim())return K([]),T([]),void ce(!1);try{Q(!0),ce(!0);const i=(null===re||void 0===re?void 0:re.blockedUsers)||[],t=[];if(re&&F.db){(await(0,H.GG)((0,H.rJ)(F.db,"users"))).forEach((e=>{const i=e.data();i.blockedUsers&&Array.isArray(i.blockedUsers)&&i.blockedUsers.includes(re.uid)&&t.push(e.id)}))}const r=[...i,...t];let s=[];const o=(0,H.rJ)(F.db,"users"),n=e.toLowerCase();try{const e=(0,H.P)(o,(0,H.My)("username_lower"),(0,H.EO)(n),(0,H.FD)(n+"\uf8ff"),(0,H.AB)(20)),i=await(0,H.GG)(e);s=i.docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!r.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id))}catch(se){console.error("Error searching by username_lower:",se)}if(s.length<10)try{const e=(0,H.P)(o,(0,H.My)("name_lower"),(0,H.EO)(n),(0,H.FD)(n+"\uf8ff"),(0,H.AB)(20)),i=(await(0,H.GG)(e)).docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!r.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id&&!s.some((i=>i.id===e.id))));s=[...s,...i]}catch(se){console.error("Error searching by name_lower:",se)}if(0===s.length){console.log("Falling back to simple search approach");const e=(0,H.P)(o,(0,H.AB)(50)),i=await(0,H.GG)(e);s=i.docs.map((e=>{var i;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(i=e.data().isPublic)||void 0===i||i,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive,isVerified:!0,email:e.data().email}})).filter((e=>!r.includes(e.id)&&"sideeye"!==e.id&&"contact-team"!==e.id&&(e.username.toLowerCase().includes(n)||e.name.toLowerCase().includes(n))))}const d=(0,H.rJ)(F.db,"sideRooms");let l=[];try{const i=(0,H.P)(d,(0,H._M)("name",">=",e),(0,H._M)("name","<=",e+"\uf8ff"),(0,H.AB)(20)),t=await(0,H.GG)(i);if(l=t.docs.map((e=>(0,a.A)({id:e.id},e.data()))),l.length<5){const e=(0,H.P)(d,(0,H._M)("deleted","!=",!0),(0,H.AB)(50)),i=(await(0,H.GG)(e)).docs.map((e=>(0,a.A)({id:e.id},e.data()))).filter((e=>!l.some((i=>i.id===e.id))&&(e.name.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)||e.tags&&e.tags.some((e=>e.toLowerCase().includes(n))))));l=[...l,...i]}}catch(se){console.error("Error searching rooms:",se)}l=l.filter((e=>e.ownerId&&!r.includes(e.ownerId)));const c=await Promise.all(l.map((async e=>{try{var i,t;const a=await(0,H.x7)((0,H.H9)(F.db,"users",e.ownerId)),r=a.exists()?a.data():null;return{id:e.id,name:e.name,description:e.description,memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(i=e.createdAt)||void 0===i?void 0:i.toDate())||new Date,creatorName:(null===r||void 0===r?void 0:r.username)||"Unknown",creatorId:e.ownerId,creatorAvatar:(null===r||void 0===r?void 0:r.profilePic)||"",tags:e.tags||[],lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||""}}catch(se){var a,r;return console.error("Error fetching owner data for room ".concat(e.id,":"),se),{id:e.id,name:e.name,description:e.description,memberCount:e.memberCount||0,shareCount:0,isPrivate:e.isPrivate||!1,createdAt:(null===(a=e.createdAt)||void 0===a?void 0:a.toDate())||new Date,creatorName:"Unknown",creatorId:e.ownerId,creatorAvatar:"",tags:e.tags||[],lastActive:(null===(r=e.lastActive)||void 0===r?void 0:r.toDate())||new Date,maxMembers:e.maxMembers||100,activeUsers:e.activeUsers||0,isLive:e.isLive||!1,thumbnailUrl:e.thumbnailUrl||""}}})));K(s),T(c)}catch(se){console.error("Error searching:",se)}finally{Q(!1)}};return Z&&!le?(0,R.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,R.jsx)(d.A,{})}):(0,R.jsxs)(n.A,{sx:{position:"relative",backgroundColor:ne.palette.background.default},children:[(0,R.jsx)(n.A,{sx:{position:"sticky",top:0,backgroundColor:ne.palette.background.default,zIndex:1e3,pt:2,pb:2,borderBottom:1,borderColor:"divider"},children:(0,R.jsxs)(l.A,{maxWidth:!1,sx:{maxWidth:"1440px"},children:[(0,R.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,R.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,R.jsx)(c.A,{variant:de?"h5":"h4",component:"h1",sx:{fontWeight:600},children:le?"Search Results":"Discover"})}),(0,R.jsx)(X.x,{onClickAway:()=>{xe(!1)},children:(0,R.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,position:"relative"},children:(0,R.jsxs)(n.A,{ref:pe,children:[(0,R.jsx)(u.A,{size:"small",placeholder:"Search rooms and users...",value:I,onChange:e=>{(async e=>{if(_(e),e.length<1)return me([]),void xe(!1);try{const i=e.toLowerCase(),t=(0,H.rJ)(F.db,"users"),a=e=>{var i,t,a,r,s,o,n,d,l,c;return{id:e.id,username:(null===(i=e.data())||void 0===i?void 0:i.username)||"",name:(null===(t=e.data())||void 0===t?void 0:t.name)||"",bio:null===(a=e.data())||void 0===a?void 0:a.bio,profilePic:null===(r=e.data())||void 0===r?void 0:r.profilePic,isPublic:null===(s=null===(o=e.data())||void 0===o?void 0:o.isPublic)||void 0===s||s,isAuthenticated:null===(n=e.data())||void 0===n?void 0:n.isAuthenticated,createdAt:null===(d=e.data())||void 0===d?void 0:d.createdAt,isActive:null===(l=e.data())||void 0===l?void 0:l.isActive,isVerified:!0,email:null===(c=e.data())||void 0===c?void 0:c.email}};let r=[];try{const e=(0,H.P)(t,(0,H.My)("username_lower"),(0,H.EO)(i),(0,H.FD)(i+"\uf8ff"),(0,H.AB)(10)),s=await(0,H.GG)(e);r=s.docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id)).map(a)}catch(se){console.log("Error searching by username_lower:",se)}if(r.length<5)try{const e=(0,H.P)(t,(0,H.My)("name_lower"),(0,H.EO)(i),(0,H.FD)(i+"\uf8ff"),(0,H.AB)(10)),s=(await(0,H.GG)(e)).docs.filter((e=>"sideeye"!==e.id&&"contact-team"!==e.id&&!r.some((i=>i.id===e.id)))).map(a);r=[...r,...s]}catch(se){console.log("Error searching by name_lower:",se)}if(r.length<3){const e=(0,H.P)(t,(0,H.AB)(25));try{const t=(await(0,H.GG)(e)).docs.filter((e=>{var t,a;return"sideeye"!==e.id&&"contact-team"!==e.id&&!r.some((i=>i.id===e.id))&&(((null===(t=e.data())||void 0===t?void 0:t.username)||"").toLowerCase().includes(i)||((null===(a=e.data())||void 0===a?void 0:a.name)||"").toLowerCase().includes(i))})).map(a);r=[...r,...t]}catch(se){console.log("Error with fallback search:",se)}}null!==re&&void 0!==re&&re.blockedUsers&&(r=r.filter((e=>{var i;return!(null!==(i=re.blockedUsers)&&void 0!==i&&i.includes(e.id))}))),me(r.slice(0,5)),xe(r.length>0)}catch(se){console.error("Instant search error:",se)}})(e.target.value),Ce(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(Ce(I,!0),xe(!1))},InputProps:{startAdornment:(0,R.jsx)(m.A,{position:"start",children:(0,R.jsx)(U.A,{})})},sx:{backgroundColor:"background.paper",borderRadius:1,width:de?"230px":"300px","& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,R.jsx)(q.A,{open:he&&ue.length>0,anchorEl:pe.current,placement:"bottom-start",style:{width:null===(e=pe.current)||void 0===e?void 0:e.offsetWidth,zIndex:1400},children:(0,R.jsx)(h.A,{elevation:3,sx:{mt:1,maxHeight:"300px",overflowY:"auto",borderRadius:1},children:(0,R.jsx)(x.A,{sx:{p:0},children:ue.map(((e,i)=>{var t,a;return(0,R.jsxs)(r.Fragment,{children:[(0,R.jsxs)(p.Ay,{button:!0,onClick:()=>{ae("/profile/".concat(e.id)),xe(!1)},sx:{py:1,px:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,R.jsx)(v.A,{children:(0,R.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:32,height:32},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),(0,R.jsx)(f.A,{primary:(0,R.jsxs)(c.A,{variant:"body1",component:"div",children:[e.name,e.isVerified&&(0,R.jsx)(E.A,{sx:{ml:.5,color:"primary.main",fontSize:"0.9rem",verticalAlign:"middle"}})]}),secondary:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,R.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]}),sx:{my:0}}),re&&e.id!==re.uid&&(0,R.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(b.A,{size:"small",onClick:i=>{i.stopPropagation(),ae("/messages/".concat(e.id))},children:(0,R.jsx)(G.A,{fontSize:"small"})}),(0,R.jsx)(b.A,{size:"small",onClick:i=>{i.stopPropagation(),ie.has(e.id)||Pe(e.id)},color:$.has(e.id)?"primary":ie.has(e.id)?"secondary":"default",disabled:ie.has(e.id),children:(0,R.jsx)(L.A,{fontSize:"small"})})]})]}),i<ue.length-1&&(0,R.jsx)(g.A,{})]},e.id)}))})})})]})})})]}),!le&&(0,R.jsxs)(y.A,{value:i,onChange:(e,i)=>{t(i),1===i&&0===Y.length&&ge()},variant:"standard",sx:{mb:2,"& .MuiTabs-indicator":{height:3}},children:[(0,R.jsx)(w.A,{icon:(0,R.jsx)(z.A,{}),label:"ROOMS",iconPosition:"start"}),(0,R.jsx)(w.A,{icon:(0,R.jsx)(W,{}),label:"PEOPLE",iconPosition:"start"})]}),!le&&0===i&&(0,R.jsxs)(y.A,{value:ve,onChange:(e,i)=>{Ae(i),le&&ce(!1)},variant:"scrollable",scrollButtons:"auto","aria-label":"room categories",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[(0,R.jsx)(w.A,{label:"All",value:"All"}),["ASMR","Just Chatting","Music","Gossip","Podcasts","Shows","Social","Other"].map((e=>(0,R.jsx)(w.A,{label:e,value:e},e)))]})]})}),(0,R.jsx)(l.A,{maxWidth:!1,sx:{pt:3,pb:4,px:de?2:3,maxWidth:"1440px"},children:le?(0,R.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",gap:4},children:[Y.length>0&&(0,R.jsxs)(n.A,{children:[(0,R.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Users"}),(0,R.jsx)(x.A,{children:Y.map(((e,i)=>{var t,a;return(0,R.jsxs)(r.Fragment,{children:[(0,R.jsxs)(p.Ay,{sx:{py:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>ae("/profile/".concat(e.id)),children:[(0,R.jsx)(v.A,{children:(0,R.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:50,height:50},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),(0,R.jsx)(f.A,{primary:(0,R.jsxs)(c.A,{variant:"subtitle1",component:"div",sx:{fontWeight:600},children:[e.name,e.isVerified&&(0,R.jsx)(E.A,{sx:{ml:.5,color:"primary.main",fontSize:"1rem",verticalAlign:"middle"}})]}),secondary:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,R.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]})}),re&&e.id!==re.uid&&(0,R.jsx)(j.A,{children:(0,R.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(b.A,{onClick:i=>{i.stopPropagation(),ae("/chat/".concat(e.id))},size:"small",children:(0,R.jsx)(G.A,{})}),(0,R.jsx)(b.A,{onClick:i=>{i.stopPropagation(),ie.has(e.id)||Pe(e.id)},size:"small",color:$.has(e.id)?"primary":ie.has(e.id)?"secondary":"default",disabled:ie.has(e.id),children:(0,R.jsx)(L.A,{})})]})})]}),i<Y.length-1&&(0,R.jsx)(g.A,{})]},e.id)}))})]}),V.length>0&&(0,R.jsxs)(n.A,{children:[(0,R.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Rooms"}),(0,R.jsx)(P.Ay,{container:!0,spacing:3,children:V.filter((e=>"All"===ve||e.tags&&e.tags.includes(ve))).map((e=>(0,R.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,R.jsxs)(k.A,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:ne.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:ne.shadows[6]}},onClick:()=>ke(e.id),children:[(0,R.jsxs)(n.A,{sx:{position:"relative"},children:[(0,R.jsx)(C.A,{component:"img",height:de?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"https://placehold.co/600x400/333/666?text=Room",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),e.isLive&&(0,R.jsx)(S.A,{label:"LIVE",color:"error",size:"small",sx:{position:"absolute",top:12,right:12,fontWeight:"bold",fontSize:de?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]}),(0,R.jsxs)(D.A,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,R.jsxs)(n.A,{sx:{mb:2},children:[(0,R.jsx)(c.A,{gutterBottom:!0,variant:de?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,R.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,R.jsx)(S.A,{icon:(0,R.jsx)(W,{sx:{fontSize:de?"1.1rem":"1.25rem"}}),label:"".concat(e.activeUsers||0," viewing"),color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:de?"0.875rem":"1rem"}}}),e.isPrivate&&(0,R.jsx)(S.A,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:de?"0.875rem":"1rem"}}})]}),(0,R.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{fontSize:de?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",J(e.lastActive)]})]})]})},e.id)))})]}),0===Y.length&&0===V.length&&!Z&&(0,R.jsxs)(n.A,{sx:{textAlign:"center",py:4},children:[(0,R.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No results found"}),(0,R.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Try different keywords or check your spelling"})]})]}):0===i?(0,R.jsx)(P.Ay,{container:!0,spacing:3,children:V.filter((e=>"All"===ve||e.tags&&e.tags.includes(ve))).map((e=>(0,R.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,R.jsxs)(k.A,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:ne.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:ne.shadows[6]}},onClick:()=>ke(e.id),children:[(0,R.jsxs)(n.A,{sx:{position:"relative"},children:[(0,R.jsx)(C.A,{component:"img",height:de?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"https://placehold.co/600x400/333/666?text=Room",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),e.isLive&&(0,R.jsx)(S.A,{label:"LIVE",color:"error",size:"small",sx:{position:"absolute",top:12,right:12,fontWeight:"bold",fontSize:de?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]}),(0,R.jsxs)(D.A,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,R.jsxs)(n.A,{sx:{mb:2},children:[(0,R.jsx)(c.A,{gutterBottom:!0,variant:de?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,R.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,R.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,R.jsx)(S.A,{icon:(0,R.jsx)(W,{sx:{fontSize:de?"1.1rem":"1.25rem"}}),label:"".concat(e.activeUsers||0," viewing"),color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:de?"0.875rem":"1rem"}}}),e.isPrivate&&(0,R.jsx)(S.A,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:de?"0.875rem":"1rem"}}})]}),(0,R.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{fontSize:de?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",J(e.lastActive)]})]})]})},e.id)))}):(0,R.jsx)(n.A,{sx:{mt:2},children:Z?(0,R.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,R.jsx)(d.A,{})}):Y.length>0?(0,R.jsx)(x.A,{children:Y.map(((e,i)=>{var t,a;return(0,R.jsxs)(r.Fragment,{children:[(0,R.jsxs)(p.Ay,{sx:{py:3,px:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"},borderRadius:1,mb:1},onClick:()=>ae("/profile/".concat(e.id)),children:[(0,R.jsx)(v.A,{children:(0,R.jsx)(A.A,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:60,height:60,mr:2},children:!1===e.isActive||e.profilePic?null:null===(t=e.name)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),(0,R.jsx)(f.A,{primary:(0,R.jsxs)(c.A,{variant:"subtitle1",component:"div",sx:{fontWeight:600},children:[e.name,e.isVerified&&(0,R.jsx)(E.A,{sx:{ml:.5,color:"primary.main",fontSize:"1rem",verticalAlign:"middle"}})]}),secondary:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(c.A,{variant:"body2",component:"span",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,R.jsx)(c.A,{variant:"body2",component:"span",color:"text.secondary",sx:{mt:.5,display:"block",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]}),sx:{ml:2}}),re&&e.id!==re.uid&&(0,R.jsx)(j.A,{sx:{right:16},children:(0,R.jsxs)(n.A,{sx:{display:"flex",gap:1,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[(0,R.jsx)(b.A,{color:"primary",size:"small",onClick:i=>{i.stopPropagation(),ae("/chat/user/".concat(e.id))},sx:{border:"1px solid",borderColor:"primary.main",p:1},children:(0,R.jsx)(G.A,{fontSize:"small"})}),(0,R.jsx)(M.A,{variant:$.has(e.id)||ie.has(e.id)?"contained":"outlined",size:"small",startIcon:$.has(e.id)||ie.has(e.id)?null:(0,R.jsx)(L.A,{}),onClick:i=>{i.stopPropagation(),ie.has(e.id)||Pe(e.id)},color:ie.has(e.id)?"secondary":"primary",disabled:ie.has(e.id),children:$.has(e.id)?"Following":ie.has(e.id)?"Requested":"Follow"})]})})]}),i<Y.length-1&&(0,R.jsx)(g.A,{sx:{my:1}})]},e.id)}))}):(0,R.jsx)(n.A,{sx:{textAlign:"center",py:4},children:(0,R.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No users found"})})})})]})}},4066:(e,i,t)=>{t.d(i,{A:()=>s});var a=t(3235),r=t(4414);const s=(0,a.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public")},6164:(e,i,t)=>{t.d(i,{A:()=>s});var a=t(3235),r=t(4414);const s=(0,a.A)((0,r.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser")},7081:(e,i,t)=>{t.d(i,{A:()=>A});var a=t(3840),r=t(7476),s=t(2588),o=t(4369),n=t(6792),d=t(8889),l=t(4388);var c=t(2434),u=t(8397),m=1440,h=2520,x=43200,p=86400;function v(e,i,t){var v,A;(0,u.A)(2,arguments);var f=(0,a.q)(),b=null!==(v=null!==(A=null===t||void 0===t?void 0:t.locale)&&void 0!==A?A:f.locale)&&void 0!==v?v:n.A;if(!b.formatDistance)throw new RangeError("locale must contain formatDistance property");var g=(0,r.A)(e,i);if(isNaN(g))throw new RangeError("Invalid time value");var y,w,j,P=(0,l.A)((y=t,(0,l.A)({},y)),{addSuffix:Boolean(null===t||void 0===t?void 0:t.addSuffix),comparison:g});g>0?(w=(0,d.A)(i),j=(0,d.A)(e)):(w=(0,d.A)(e),j=(0,d.A)(i));var k,C=(0,o.A)(j,w),S=((0,c.A)(j)-(0,c.A)(w))/1e3,D=Math.round((C-S)/60);if(D<2)return null!==t&&void 0!==t&&t.includeSeconds?C<5?b.formatDistance("lessThanXSeconds",5,P):C<10?b.formatDistance("lessThanXSeconds",10,P):C<20?b.formatDistance("lessThanXSeconds",20,P):C<40?b.formatDistance("halfAMinute",0,P):C<60?b.formatDistance("lessThanXMinutes",1,P):b.formatDistance("xMinutes",1,P):0===D?b.formatDistance("lessThanXMinutes",1,P):b.formatDistance("xMinutes",D,P);if(D<45)return b.formatDistance("xMinutes",D,P);if(D<90)return b.formatDistance("aboutXHours",1,P);if(D<m){var M=Math.round(D/60);return b.formatDistance("aboutXHours",M,P)}if(D<h)return b.formatDistance("xDays",1,P);if(D<x){var U=Math.round(D/m);return b.formatDistance("xDays",U,P)}if(D<p)return k=Math.round(D/x),b.formatDistance("aboutXMonths",k,P);if((k=(0,s.A)(j,w))<12){var E=Math.round(D/x);return b.formatDistance("xMonths",E,P)}var G=k%12,L=Math.floor(k/12);return G<3?b.formatDistance("aboutXYears",L,P):G<9?b.formatDistance("overXYears",L,P):b.formatDistance("almostXYears",L+1,P)}function A(e,i){return(0,u.A)(1,arguments),v(e,Date.now(),i)}}}]);