"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[250],{7357:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(8587),r=a(8168),o=a(9950),n=a(2004),i=a(8465),c=a(9269),l=a(9254),d=a(9608),u=a(8463),p=a(4184),m=a(9044),f=a(1506),A=a(3372),h=a(9813),v=a(4414);const b=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],x=(0,l.Ay)(p.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,"flex-start"===a.alignItems&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(h.A.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(h.A.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(h.A.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(h.A.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(h.A.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},"flex-start"===a.alignItems&&{alignItems:"flex-start"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.dense&&{paddingTop:4,paddingBottom:4})})),g=o.forwardRef((function(e,t){const a=(0,u.b)({props:e,name:"MuiListItemButton"}),{alignItems:c="center",autoFocus:l=!1,component:d="div",children:p,dense:g=!1,disableGutters:y=!1,divider:C=!1,focusVisibleClassName:w,selected:j=!1,className:I}=a,S=(0,s.A)(a,b),k=o.useContext(A.A),G=o.useMemo((()=>({dense:g||k.dense||!1,alignItems:c,disableGutters:y})),[c,k.dense,g,y]),L=o.useRef(null);(0,m.A)((()=>{l&&L.current&&L.current.focus()}),[l]);const M=(0,r.A)({},a,{alignItems:c,dense:G.dense,disableGutters:y,divider:C,selected:j}),R=(e=>{const{alignItems:t,classes:a,dense:s,disabled:o,disableGutters:n,divider:c,selected:l}=e,d={root:["root",s&&"dense",!n&&"gutters",c&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",l&&"selected"]},u=(0,i.A)(d,h.Y,a);return(0,r.A)({},a,u)})(M),O=(0,f.A)(L,t);return(0,v.jsx)(A.A.Provider,{value:G,children:(0,v.jsx)(x,(0,r.A)({ref:O,href:S.href||S.to,component:(S.href||S.to)&&"div"===d?"button":d,focusVisibleClassName:(0,n.A)(R.focusVisible,w),ownerState:M,className:(0,n.A)(R.root,I)},S,{classes:R,children:p}))})}))},8614:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(8587),r=a(8168),o=a(9950),n=a(2004),i=a(8465),c=a(3372),l=a(9254),d=a(8463),u=a(1763),p=a(423);function m(e){return(0,p.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var f=a(4414);const A=["className"],h=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,"flex-start"===a.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,r.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),v=o.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:l}=a,u=(0,s.A)(a,A),p=o.useContext(c.A),v=(0,r.A)({},a,{alignItems:p.alignItems}),b=(e=>{const{alignItems:t,classes:a}=e,s={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(s,m,a)})(v);return(0,f.jsx)(h,(0,r.A)({className:(0,n.A)(b.root,l),ownerState:v,ref:t},u))}))},9250:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(9379),r=a(9950),o=a(8429),n=a(4857),i=a(6589),c=a(9808),l=a(2053),d=a(3174),u=a(6491),p=a(2236),m=a(4142),f=a(6639),A=a(249),h=a(7357),v=a(8614),b=a(1413),x=a(3563),g=a(6220),y=a(301),C=a(4414);const w=()=>{const e=(0,o.Zp)(),{searchQuery:t}=(0,o.g)(),{db:a,loading:w,error:j}=(0,y.j)(),[I,S]=(0,r.useState)([]),[k,G]=(0,r.useState)(!0),[L,M]=(0,r.useState)(null),[R,O]=(0,r.useState)(0),B=(0,n.A)();(0,i.A)(B.breakpoints.down("sm"));(0,r.useEffect)((()=>{(async()=>{if(t&&a)try{G(!0);const e=[],r=(0,g.P)((0,g.rJ)(a,"users"),(0,g._M)("username",">=",t.toLowerCase()),(0,g._M)("username","<=",t.toLowerCase()+"\uf8ff"),(0,g.AB)(20));(await(0,g.GG)(r)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"user",data:a})}));const o=(0,g.P)((0,g.rJ)(a,"posts"),(0,g._M)("content",">=",t.toLowerCase()),(0,g._M)("content","<=",t.toLowerCase()+"\uf8ff"),(0,g.My)("content"),(0,g.AB)(20)),n=await(0,g.GG)(o);for(const t of n.docs){const r=t.data(),o=(await(0,g.x7)((0,g.H9)(a,"users",r.authorId))).data();e.push({id:t.id,type:"post",data:(0,s.A)((0,s.A)({},r),{},{author:o})})}const i=(0,g.P)((0,g.rJ)(a,"forums"),(0,g._M)("title",">=",t.toLowerCase()),(0,g._M)("title","<=",t.toLowerCase()+"\uf8ff"),(0,g.AB)(20));(await(0,g.GG)(i)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"forum",data:a})}));const c=(0,g.P)((0,g.rJ)(a,"sideRooms"),(0,g._M)("name",">=",t.toLowerCase()),(0,g._M)("name","<=",t.toLowerCase()+"\uf8ff"),(0,g.AB)(20));(await(0,g.GG)(c)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"sideRoom",data:a})})),S(e)}catch(e){console.error("Error searching:",e),M("Failed to search. Please try again later.")}finally{G(!1)}})()}),[t,a]);const F=I.filter((e=>{switch(R){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return w?(0,C.jsx)("div",{children:"Loading..."}):j?(0,C.jsxs)("div",{children:["Error: ",j.message]}):a?(0,C.jsxs)(c.A,{maxWidth:"md",sx:{mt:4},children:[(0,C.jsxs)(l.A,{variant:"h4",gutterBottom:!0,children:['Search Results for "',t,'"']}),L&&(0,C.jsx)(d.A,{severity:"error",sx:{mb:2},children:L}),(0,C.jsx)(u.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,C.jsxs)(p.A,{value:R,onChange:(e,t)=>O(t),children:[(0,C.jsx)(m.A,{label:"Users"}),(0,C.jsx)(m.A,{label:"Posts"}),(0,C.jsx)(m.A,{label:"Forums"}),(0,C.jsx)(m.A,{label:"Side Rooms"})]})}),k?(0,C.jsx)(u.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,C.jsx)(f.A,{})}):0===F.length?(0,C.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,C.jsx)(A.A,{children:F.map((t=>(0,C.jsxs)(h.A,{onClick:()=>(t=>{switch(t.type){case"user":e("/profile/".concat(t.id));break;case"post":e("/post/".concat(t.id));break;case"forum":e("/forum/".concat(t.id));break;case"sideRoom":e("/side-room/".concat(t.id))}})(t),sx:{mb:1,borderRadius:1},children:[(0,C.jsx)(v.A,{children:"user"===t.type?(0,C.jsx)(b.A,{src:t.data.avatar}):(0,C.jsx)(b.A,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,C.jsx)(x.A,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,C.jsx)("div",{children:"Error: Database connection failed"})}}}]);