"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[667],{227:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},1071:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 9h-2V5h2zm0 4h-2v-2h2z"}),"Announcement")},1667:(e,o,t)=>{t.r(o),t.d(o,{default:()=>X});var a=t(9950),n=t(9808),r=t(6639),s=t(6491),i=t(2053),c=t(249),l=t(6050),d=t(5333),m=t(8614),h=t(1413),A=t(3563),u=t(4745),v=t(6583),f=t(33),x=t(8170),p=t(6493),j=t(9739),y=t(226),g=t(6835),I=t(7443),b=t(3235),M=t(4414);const D=(0,b.A)((0,M.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");var S=t(227),k=t(7092),C=t(7341),w=t(6592),N=t(1071),z=t(9438),_=t(4570),R=t(1367),H=t(7081),T=t(8429),V=t(2074);const X=()=>{const{notifications:e,unreadCount:o,markAllAsRead:t,markAsRead:b,deleteNotification:X,loading:F}=(0,_.E)(),{currentUser:L}=(0,R.As)(),P=(0,T.Zp)(),[E,U]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(null);(0,a.useEffect)((()=>{}),[o]);const J=()=>{U(!1)};return F?(0,M.jsx)(n.A,{maxWidth:"sm",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,M.jsx)(r.A,{})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(n.A,{maxWidth:"sm",sx:{mt:4,mb:4},children:[(0,M.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,M.jsx)(i.A,{variant:"h5",component:"h1",children:"Notifications"}),e.length>0&&o>0&&(0,M.jsx)(i.A,{variant:"caption",color:"textSecondary",onClick:()=>{null!==L&&void 0!==L&&L.uid&&t(L.uid)},sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Mark all as read"})]}),0===e.length?(0,M.jsx)(i.A,{textAlign:"center",color:"textSecondary",children:"No notifications yet."}):(0,M.jsx)(c.A,{sx:{bgcolor:"background.paper",borderRadius:2},children:e.map(((o,t)=>{return(0,M.jsxs)(a.Fragment,{children:[(0,M.jsxs)(l.Ay,{alignItems:"flex-start",onClick:()=>(e=>{if(e.isRead||b(e.id),"room_created"===e.type&&e.roomId)return Y({id:e.roomId,name:e.roomName||"Room"}),void U(!0);let o="/notifications";switch(e.type){case"like":case"comment":case"mention":case"repost":e.postId&&(o="/post/".concat(e.postId));break;case"vibit_like":case"vibit_comment":case"vibit_mention":e.postId&&(o="/vibit/".concat(e.postId));break;case"follow":e.senderId&&(o="/profile/".concat(e.senderId));break;case"message":e.roomId?o="/chat/conversation/".concat(e.roomId):e.postId?o="/chat/conversation/".concat(e.postId):e.senderId&&(o="/chat/".concat(e.senderId));break;case"live_stream":case"room_invite":case"room_invitation":case"room_removal":e.roomId&&(o="/side-room/".concat(e.roomId));break;case"room_announcement":case"room_poll":e.roomId&&(o="/chat/room/".concat(e.roomId));break;default:console.warn("Unhandled notification type for navigation: ".concat(e.type))}console.log("Navigating to: ".concat(o," for notification type: ").concat(e.type)),P(o)})(o),sx:{cursor:"pointer",backgroundColor:o.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,M.jsx)(d.A,{edge:"end","aria-label":"delete",onClick:e=>{return t=e,a=o.id,t.stopPropagation(),void X(a);var t,a},children:(0,M.jsx)(g.A,{fontSize:"small"})}),children:[(0,M.jsx)(m.A,{sx:{mr:1},children:(0,M.jsx)(V.N_,{to:"/profile/".concat(o.senderId),onClick:e=>e.stopPropagation(),style:{textDecoration:"none"},children:(0,M.jsx)(h.A,{alt:o.senderName||"User",src:o.senderAvatar||void 0,sx:{bgcolor:o.senderAvatar?void 0:"primary.main",width:40,height:40},children:!o.senderAvatar&&o.senderName?o.senderName.charAt(0).toUpperCase():null})})}),(0,M.jsx)(A.A,{primary:(0,M.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["like"===o.type&&(0,M.jsx)(I.A,{fontSize:"small",color:"error"}),"comment"===o.type&&(0,M.jsx)(D,{fontSize:"small",color:"primary"}),"follow"===o.type&&(0,M.jsx)(S.A,{fontSize:"small",color:"primary"}),"message"===o.type&&(0,M.jsx)(k.A,{fontSize:"small",color:"primary"}),"live_stream"===o.type&&(0,M.jsx)(C.A,{fontSize:"small",color:"error"}),"room_created"===o.type&&(0,M.jsx)(w.A,{fontSize:"small",color:"primary"}),"room_announcement"===o.type&&(0,M.jsx)(N.A,{fontSize:"small",color:"warning"}),"room_poll"===o.type&&(0,M.jsx)(z.A,{fontSize:"small",color:"info"}),(0,M.jsx)(i.A,{component:"span",variant:"body2",color:"text.primary",children:o.content||"Notification content missing."})]}),secondary:(0,M.jsx)(i.A,{component:"span",variant:"caption",color:"text.secondary",children:(n=o.createdAt,n&&n instanceof Date&&!isNaN(n.getTime())?(0,H.A)(n,{addSuffix:!0}):"Invalid date")})})]}),t<e.length-1&&(0,M.jsx)(u.A,{variant:"inset",component:"li"})]},o.id);var n}))})]}),(0,M.jsxs)(v.A,{open:E,onClose:J,"aria-labelledby":"join-room-dialog-title",children:[(0,M.jsx)(f.A,{id:"join-room-dialog-title",children:"Join Room?"}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(p.A,{children:['Would you like to join the room "',null===W||void 0===W?void 0:W.name,'"?']})}),(0,M.jsxs)(j.A,{children:[(0,M.jsx)(y.A,{onClick:J,children:"Not Now"}),(0,M.jsx)(y.A,{onClick:()=>{W&&P("/chat/room/".concat(W.id)),U(!1)},variant:"contained",color:"primary",children:"Join Room"})]})]})]})}},6493:(e,o,t)=>{t.d(o,{A:()=>p});var a=t(8587),n=t(8168),r=t(9950),s=t(2004),i=t(8465),c=t(9254),l=t(9608),d=t(8463),m=t(2053),h=t(1763),A=t(423);function u(e){return(0,A.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var v=t(4414);const f=["children","className"],x=(0,c.Ay)(m.A,{shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,o)=>o.root})({}),p=r.forwardRef((function(e,o){const t=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:r}=t,c=(0,a.A)(t,f),l=(e=>{const{classes:o}=e,t=(0,i.A)({root:["root"]},u,o);return(0,n.A)({},o,t)})(c);return(0,v.jsx)(x,(0,n.A)({component:"p",variant:"body1",color:"text.secondary",ref:o,ownerState:c,className:(0,s.A)(l.root,r)},t,{classes:l}))}))},6592:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group")},7081:(e,o,t)=>{t.d(o,{A:()=>x});var a=t(3840),n=t(7476),r=t(2588),s=t(4369),i=t(6792),c=t(8889),l=t(4388);var d=t(2434),m=t(8397),h=1440,A=2520,u=43200,v=86400;function f(e,o,t){var f,x;(0,m.A)(2,arguments);var p=(0,a.q)(),j=null!==(f=null!==(x=null===t||void 0===t?void 0:t.locale)&&void 0!==x?x:p.locale)&&void 0!==f?f:i.A;if(!j.formatDistance)throw new RangeError("locale must contain formatDistance property");var y=(0,n.A)(e,o);if(isNaN(y))throw new RangeError("Invalid time value");var g,I,b,M=(0,l.A)((g=t,(0,l.A)({},g)),{addSuffix:Boolean(null===t||void 0===t?void 0:t.addSuffix),comparison:y});y>0?(I=(0,c.A)(o),b=(0,c.A)(e)):(I=(0,c.A)(e),b=(0,c.A)(o));var D,S=(0,s.A)(b,I),k=((0,d.A)(b)-(0,d.A)(I))/1e3,C=Math.round((S-k)/60);if(C<2)return null!==t&&void 0!==t&&t.includeSeconds?S<5?j.formatDistance("lessThanXSeconds",5,M):S<10?j.formatDistance("lessThanXSeconds",10,M):S<20?j.formatDistance("lessThanXSeconds",20,M):S<40?j.formatDistance("halfAMinute",0,M):S<60?j.formatDistance("lessThanXMinutes",1,M):j.formatDistance("xMinutes",1,M):0===C?j.formatDistance("lessThanXMinutes",1,M):j.formatDistance("xMinutes",C,M);if(C<45)return j.formatDistance("xMinutes",C,M);if(C<90)return j.formatDistance("aboutXHours",1,M);if(C<h){var w=Math.round(C/60);return j.formatDistance("aboutXHours",w,M)}if(C<A)return j.formatDistance("xDays",1,M);if(C<u){var N=Math.round(C/h);return j.formatDistance("xDays",N,M)}if(C<v)return D=Math.round(C/u),j.formatDistance("aboutXMonths",D,M);if((D=(0,r.A)(b,I))<12){var z=Math.round(C/u);return j.formatDistance("xMonths",z,M)}var _=D%12,R=Math.floor(D/12);return _<3?j.formatDistance("aboutXYears",R,M):_<9?j.formatDistance("overXYears",R,M):j.formatDistance("almostXYears",R+1,M)}function x(e,o){return(0,m.A)(1,arguments),f(e,Date.now(),o)}},7341:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam")},7443:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},8614:(e,o,t)=>{t.d(o,{A:()=>x});var a=t(8587),n=t(8168),r=t(9950),s=t(2004),i=t(8465),c=t(3372),l=t(9254),d=t(8463),m=t(1763),h=t(423);function A(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,m.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var u=t(4414);const v=["className"],f=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,"flex-start"===t.alignItems&&o.alignItemsFlexStart]}})((e=>{let{ownerState:o}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===o.alignItems&&{marginTop:8})})),x=r.forwardRef((function(e,o){const t=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:l}=t,m=(0,a.A)(t,v),h=r.useContext(c.A),x=(0,n.A)({},t,{alignItems:h.alignItems}),p=(e=>{const{alignItems:o,classes:t}=e,a={root:["root","flex-start"===o&&"alignItemsFlexStart"]};return(0,i.A)(a,A,t)})(x);return(0,u.jsx)(f,(0,n.A)({className:(0,s.A)(p.root,l),ownerState:x,ref:o},m))}))},9438:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(3235),n=t(4414);const r=(0,a.A)((0,n.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Poll")}}]);