"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[741],{9741:(e,i,n)=>{n.r(i),n.d(i,{default:()=>g});var t=n(9950),r=n(8429),a=n(9808),o=n(6491),s=n(6639),c=n(2235),l=n(2053),d=n(3174),u=n(226),h=n(4745),f=n(6080),m=n(1367),x=n(4414);const g=()=>{const e=(0,r.Zp)(),{currentUser:i,user:n,loading:g,sendEmailVerification:y,forceCheckEmailVerification:v}=((0,r.zy)(),(0,m.As)()),[p,A]=(0,t.useState)(!1),[j,k]=(0,t.useState)(null),[b,E]=(0,t.useState)(!1),[C,w]=(0,t.useState)(!1),[V,S]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!g&&(i||n)){const r=i||n;try{const i=await v(r);console.log("Email verification status on page load:",i),i&&(console.log("User email is verified, redirecting to setup source code..."),e("/setup-source-code",{replace:!0}))}catch(t){console.error("Error checking verification status:",t)}}})()}),[i,n,g,e,v]);const P=async()=>{if(!(i||n))return k("Not logged in. Cannot resend verification email."),void e("/login");try{A(!0),k(null),E(!1),await y(),E(!0),k(null)}catch(j){console.error("Error sending verification email:",j),k(j.message||"Failed to send verification email. Please try again."),E(!1)}finally{A(!1)}};if(g)return(0,x.jsx)(a.A,{maxWidth:"sm",children:(0,x.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,x.jsx)(s.A,{})})});const W=i||n,z=(null===W||void 0===W?void 0:W.email)||"your registered email";return(0,x.jsx)(a.A,{maxWidth:"sm",children:(0,x.jsxs)(c.A,{elevation:0,sx:{mt:8,p:4},children:[(0,x.jsx)(l.A,{variant:"h4",gutterBottom:!0,align:"center",children:"Verify Your Email"}),(0,x.jsx)(l.A,{variant:"body1",paragraph:!0,align:"center",children:"A verification email has been sent to:"}),(0,x.jsx)(l.A,{variant:"h6",align:"center",gutterBottom:!0,sx:{fontWeight:"bold"},children:z}),(0,x.jsx)(l.A,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Please check your inbox (and spam folder) and click the verification link."}),j&&(0,x.jsx)(d.A,{severity:"error",sx:{mb:2},children:j}),b&&(0,x.jsx)(d.A,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox (and spam folder)."}),V&&!j&&(0,x.jsxs)(d.A,{severity:"info",sx:{mb:2},children:["Verification status checked at ",V.toLocaleTimeString(),". Email is not yet verified."]}),(0,x.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:3},children:[(0,x.jsx)(u.A,{variant:"outlined",onClick:async()=>{const t=i||n;if(!t)return k("Not logged in. Cannot check verification status."),void e("/login");try{w(!0),k(null);const i=await v(t);S(new Date),console.log("Manual verification check result:",i),i?e("/setup-source-code",{replace:!0}):k("Email not verified yet. Please check your email and click the verification link.")}catch(j){console.error("Error checking verification status:",j),k(j.message||"Failed to check verification status. Please try again.")}finally{w(!1)}},disabled:p||C,color:"primary",fullWidth:!0,children:C?(0,x.jsx)(s.A,{size:24,color:"inherit"}):"I've Verified My Email"}),(0,x.jsx)(u.A,{variant:"text",onClick:P,disabled:p||C,color:"secondary",fullWidth:!0,children:p?(0,x.jsx)(s.A,{size:24,color:"inherit"}):"Resend Verification Email"})]}),(0,x.jsx)(h.A,{sx:{my:3}}),(0,x.jsxs)(l.A,{variant:"body2",color:"text.secondary",align:"center",children:["Having trouble? Try ",(0,x.jsx)(f.A,{component:"button",onClick:P,children:"sending the email again"})," or ",(0,x.jsx)(f.A,{component:"button",onClick:()=>e("/login"),children:"login with a different account"}),"."]})]})})}}}]);