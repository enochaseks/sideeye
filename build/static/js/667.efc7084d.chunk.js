"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[667],{227:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(3235),o=a(4414);const r=(0,n.A)((0,o.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},1667:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(9950),o=a(9808),r=a(6639),s=a(6491),i=a(2053),c=a(249),l=a(6050),d=a(5333),m=a(8614),f=a(1413),v=a(3563),u=a(4745),A=a(6835),h=a(7443),x=a(3235),p=a(4414);const g=(0,x.A)((0,p.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");var y=a(227),j=a(7092),I=a(7341),b=a(4570),D=a(1367),M=a(7081),k=a(8429),S=a(2074);const w=()=>{const{notifications:e,unreadCount:t,markAllAsRead:a,markAsRead:x,deleteNotification:w,loading:C}=(0,b.E)(),{currentUser:N}=(0,D.As)(),z=(0,k.Zp)();(0,n.useEffect)((()=>{}),[t]);return C?(0,p.jsx)(o.A,{maxWidth:"sm",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,p.jsx)(r.A,{})}):(0,p.jsxs)(o.A,{maxWidth:"sm",sx:{mt:4,mb:4},children:[(0,p.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,p.jsx)(i.A,{variant:"h5",component:"h1",children:"Notifications"}),e.length>0&&t>0&&(0,p.jsx)(i.A,{variant:"caption",color:"textSecondary",onClick:()=>{null!==N&&void 0!==N&&N.uid&&a(N.uid)},sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Mark all as read"})]}),0===e.length?(0,p.jsx)(i.A,{textAlign:"center",color:"textSecondary",children:"No notifications yet."}):(0,p.jsx)(c.A,{sx:{bgcolor:"background.paper",borderRadius:2},children:e.map(((t,a)=>{return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsxs)(l.Ay,{alignItems:"flex-start",onClick:()=>(e=>{e.isRead||x(e.id);let t="/notifications";switch(e.type){case"like":case"comment":case"mention":case"repost":e.postId&&(t="/post/".concat(e.postId));break;case"vibit_like":case"vibit_comment":case"vibit_mention":e.postId&&(t="/vibit/".concat(e.postId));break;case"follow":e.senderId&&(t="/profile/".concat(e.senderId));break;case"message":e.roomId?t="/chat/conversation/".concat(e.roomId):e.postId?t="/chat/conversation/".concat(e.postId):e.senderId&&(t="/chat/".concat(e.senderId));break;case"live_stream":case"room_invite":case"room_invitation":case"room_removal":e.roomId&&(t="/side-room/".concat(e.roomId));break;default:console.warn("Unhandled notification type for navigation: ".concat(e.type))}console.log("Navigating to: ".concat(t," for notification type: ").concat(e.type)),z(t)})(t),sx:{cursor:"pointer",backgroundColor:t.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,p.jsx)(d.A,{edge:"end","aria-label":"delete",onClick:e=>{return a=e,n=t.id,a.stopPropagation(),void w(n);var a,n},children:(0,p.jsx)(A.A,{fontSize:"small"})}),children:[(0,p.jsx)(m.A,{sx:{mr:1},children:(0,p.jsx)(S.N_,{to:"/profile/".concat(t.senderId),onClick:e=>e.stopPropagation(),style:{textDecoration:"none"},children:(0,p.jsx)(f.A,{alt:t.senderName||"User",src:t.senderAvatar||void 0,sx:{bgcolor:t.senderAvatar?void 0:"primary.main",width:40,height:40},children:!t.senderAvatar&&t.senderName?t.senderName.charAt(0).toUpperCase():null})})}),(0,p.jsx)(v.A,{primary:(0,p.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["like"===t.type&&(0,p.jsx)(h.A,{fontSize:"small",color:"error"}),"comment"===t.type&&(0,p.jsx)(g,{fontSize:"small",color:"primary"}),"follow"===t.type&&(0,p.jsx)(y.A,{fontSize:"small",color:"primary"}),"message"===t.type&&(0,p.jsx)(j.A,{fontSize:"small",color:"primary"}),"live_stream"===t.type&&(0,p.jsx)(I.A,{fontSize:"small",color:"error"}),(0,p.jsx)(i.A,{component:"span",variant:"body2",color:"text.primary",children:t.content||"Notification content missing."})]}),secondary:(0,p.jsx)(i.A,{component:"span",variant:"caption",color:"text.secondary",children:(o=t.createdAt,o&&o instanceof Date&&!isNaN(o.getTime())?(0,M.A)(o,{addSuffix:!0}):"Invalid date")})})]}),a<e.length-1&&(0,p.jsx)(u.A,{variant:"inset",component:"li"})]},t.id);var o}))})]})}},6835:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(3235),o=a(4414);const r=(0,n.A)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},7081:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(3840),o=a(7476),r=a(2588),s=a(4369),i=a(6792),c=a(8889),l=a(4388);var d=a(2434),m=a(8397),f=1440,v=2520,u=43200,A=86400;function h(e,t,a){var h,x;(0,m.A)(2,arguments);var p=(0,n.q)(),g=null!==(h=null!==(x=null===a||void 0===a?void 0:a.locale)&&void 0!==x?x:p.locale)&&void 0!==h?h:i.A;if(!g.formatDistance)throw new RangeError("locale must contain formatDistance property");var y=(0,o.A)(e,t);if(isNaN(y))throw new RangeError("Invalid time value");var j,I,b,D=(0,l.A)((j=a,(0,l.A)({},j)),{addSuffix:Boolean(null===a||void 0===a?void 0:a.addSuffix),comparison:y});y>0?(I=(0,c.A)(t),b=(0,c.A)(e)):(I=(0,c.A)(e),b=(0,c.A)(t));var M,k=(0,s.A)(b,I),S=((0,d.A)(b)-(0,d.A)(I))/1e3,w=Math.round((k-S)/60);if(w<2)return null!==a&&void 0!==a&&a.includeSeconds?k<5?g.formatDistance("lessThanXSeconds",5,D):k<10?g.formatDistance("lessThanXSeconds",10,D):k<20?g.formatDistance("lessThanXSeconds",20,D):k<40?g.formatDistance("halfAMinute",0,D):k<60?g.formatDistance("lessThanXMinutes",1,D):g.formatDistance("xMinutes",1,D):0===w?g.formatDistance("lessThanXMinutes",1,D):g.formatDistance("xMinutes",w,D);if(w<45)return g.formatDistance("xMinutes",w,D);if(w<90)return g.formatDistance("aboutXHours",1,D);if(w<f){var C=Math.round(w/60);return g.formatDistance("aboutXHours",C,D)}if(w<v)return g.formatDistance("xDays",1,D);if(w<u){var N=Math.round(w/f);return g.formatDistance("xDays",N,D)}if(w<A)return M=Math.round(w/u),g.formatDistance("aboutXMonths",M,D);if((M=(0,r.A)(b,I))<12){var z=Math.round(w/u);return g.formatDistance("xMonths",z,D)}var X=M%12,_=Math.floor(M/12);return X<3?g.formatDistance("aboutXYears",_,D):X<9?g.formatDistance("overXYears",_,D):g.formatDistance("almostXYears",_+1,D)}function x(e,t){return(0,m.A)(1,arguments),h(e,Date.now(),t)}},7341:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(3235),o=a(4414);const r=(0,n.A)((0,o.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam")},7443:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(3235),o=a(4414);const r=(0,n.A)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},8614:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(8587),o=a(8168),r=a(9950),s=a(2004),i=a(8465),c=a(3372),l=a(9254),d=a(8463),m=a(1763),f=a(423);function v(e){return(0,f.Ay)("MuiListItemAvatar",e)}(0,m.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var u=a(4414);const A=["className"],h=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,"flex-start"===a.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,o.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),x=r.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:l}=a,m=(0,n.A)(a,A),f=r.useContext(c.A),x=(0,o.A)({},a,{alignItems:f.alignItems}),p=(e=>{const{alignItems:t,classes:a}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(n,v,a)})(x);return(0,u.jsx)(h,(0,o.A)({className:(0,s.A)(p.root,l),ownerState:x,ref:t},m))}))}}]);