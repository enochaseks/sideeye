/*! For license information please see main.284a708c.js.LICENSE.txt */
(()=>{var e={86:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},116:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>S.A,StyledEngineProvider:()=>x,ThemeContext:()=>i.T,css:()=>v.AH,default:()=>C,internal_processStyles:()=>_,keyframes:()=>v.i7});var r=n(8168),i=n(7370),o=n(9015),s=n(6477),a=n(1783),l=n(9950),c=n(7923),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=(0,c.A)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),h=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:h},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,a.SF)(t,n,r),(0,s.s)((function(){return(0,a.sk)(t,n,r)})),null},g=function e(t,n){var s,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(s=n.label,c=n.target);var h=f(t,n,u),g=h||p(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&b.push("label:"+s+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var x=y.length,S=1;S<x;S++)b.push(y[S],w[S])}var C=(0,i.w)((function(e,t,n){var r=v&&e.as||d,s="",u=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=l.useContext(i.T)}"string"===typeof e.className?s=(0,a.Rk)(t.registered,u,e.className):null!=e.className&&(s=e.className+" ");var w=(0,o.J)(b.concat(u),t.registered,f);s+=t.key+"-"+w.name,void 0!==c&&(s+=" "+c);var x=v&&void 0===h?p(r):g,S={};for(var C in e)v&&"as"===C||x(C)&&(S[C]=e[C]);return S.className=s,n&&(S.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:w,isStringTag:"string"===typeof r}),l.createElement(r,S))}));return C.displayName=void 0!==s?s:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",C.defaultProps=t.defaultProps,C.__emotion_real=C,C.__emotion_base=d,C.__emotion_styles=b,C.__emotion_forwardProp=h,Object.defineProperty(C,"toString",{value:function(){return"."+c}}),C.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:f(C,i,!0)})).apply(void 0,b)},C}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=n(8283),y=n(8603),b=n(4414);let w;function x(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(i.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));var S=n(3158);function C(e,t){return g(e,t)}const _=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},195:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(4436).A)()},237:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(7483),s=n(8076);const a=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},c,{sx:u})}},304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(5501)},403:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},423:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o});var r=n(4501);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?`${n}-${o}`:`${r.A.generate(e)}-${t}`}},505:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(5501),i=n(6206),o=n(2703),s=n(8286),a=n(8076);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(h)return h(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,d,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,s.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},630:(e,t,n)=>{"use strict";e.exports=n(2138)},827:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(8635).A},949:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},1014:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3539).A},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1927).A},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1397:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,c=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",h]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",S="[object Error]",C="[object Function]",_="[object GeneratorFunction]",k="[object Map]",T="[object Number]",A="[object Object]",E="[object Promise]",I="[object RegExp]",R="[object Set]",P="[object String]",j="[object Symbol]",N="[object WeakMap]",O="[object ArrayBuffer]",D="[object DataView]",M="[object Float32Array]",L="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",$="[object Int32Array]",V="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",H=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,J=RegExp(K.source),Q=RegExp(Y.source),X=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,Ce=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Re="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['\u2019]",je="["+_e+"]",Ne="["+Re+"]",Oe="["+ke+"]",De="\\d+",Me="["+Te+"]",Le="["+Ae+"]",Fe="[^"+_e+Re+De+Te+Ae+Ee+"]",Ue="\\ud83c[\\udffb-\\udfff]",$e="[^"+_e+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Ee+"]",We="\\u200d",He="(?:"+Le+"|"+Fe+")",qe="(?:"+ze+"|"+Fe+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ke="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Oe+"|"+Ue+")"+"?",Je="["+Ie+"]?",Qe=Je+Ye+("(?:"+We+"(?:"+[$e,Ve,Be].join("|")+")"+Je+Ye+")*"),Xe="(?:"+[Me,Ve,Be].join("|")+")"+Qe,Ze="(?:"+[$e+Oe+"?",Oe,Ve,Be,je].join("|")+")",et=RegExp(Pe,"g"),tt=RegExp(Oe,"g"),nt=RegExp(Ue+"(?="+Ue+")|"+Ze+Qe,"g"),rt=RegExp([ze+"?"+Le+"+"+Ge+"(?="+[Ne,ze,"$"].join("|")+")",qe+"+"+Ke+"(?="+[Ne,ze+He,"$"].join("|")+")",ze+"?"+He+"+"+Ge,ze+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Xe].join("|"),"g"),it=RegExp("["+We+_e+ke+Ie+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[M]=lt[L]=lt[F]=lt[U]=lt[$]=lt[V]=lt[B]=lt[z]=lt[W]=!0,lt[y]=lt[b]=lt[O]=lt[w]=lt[D]=lt[x]=lt[S]=lt[C]=lt[k]=lt[T]=lt[A]=lt[I]=lt[R]=lt[P]=lt[N]=!1;var ct={};ct[y]=ct[b]=ct[O]=ct[D]=ct[w]=ct[x]=ct[M]=ct[L]=ct[F]=ct[U]=ct[$]=ct[k]=ct[T]=ct[A]=ct[I]=ct[R]=ct[P]=ct[j]=ct[V]=ct[B]=ct[z]=ct[W]=!0,ct[S]=ct[C]=ct[N]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,bt=yt&&pt.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),xt=wt&&wt.isArrayBuffer,St=wt&&wt.isDate,Ct=wt&&wt.isMap,_t=wt&&wt.isRegExp,kt=wt&&wt.isSet,Tt=wt&&wt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function jt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Nt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Ot(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Mt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Lt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var $t=Gt("length");function Vt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function zt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Ht,n)}function Wt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function qt(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:m}function Gt(e){return function(t){return null==t?i:t[e]}}function Kt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Jt(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,gn(e)+1).replace(se,""):e}function Zt(e){return function(t){return e(t)}}function en(e,t){return Dt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&zt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&zt(t,e[n],0)>-1;);return n}var on=Kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sn=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):$t(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,st))).Array,r=t.Date,ae=t.Error,_e=t.Function,ke=t.Math,Te=t.Object,Ae=t.RegExp,Ee=t.String,Ie=t.TypeError,Re=n.prototype,Pe=_e.prototype,je=Te.prototype,Ne=t["__core-js_shared__"],Oe=Pe.toString,De=je.hasOwnProperty,Me=0,Le=function(){var e=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=je.toString,Ue=Oe.call(Te),$e=mt._,Ve=Ae("^"+Oe.call(De).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=yt?t.Buffer:i,ze=t.Symbol,We=t.Uint8Array,He=Be?Be.allocUnsafe:i,qe=un(Te.getPrototypeOf,Te),Ge=Te.create,Ke=je.propertyIsEnumerable,Ye=Re.splice,Je=ze?ze.isConcatSpreadable:i,Qe=ze?ze.iterator:i,Xe=ze?ze.toStringTag:i,Ze=function(){try{var e=ho(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,ut=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=ke.ceil,ft=ke.floor,gt=Te.getOwnPropertySymbols,vt=Be?Be.isBuffer:i,bt=t.isFinite,wt=Re.join,$t=un(Te.keys,Te),Kt=ke.max,bn=ke.min,wn=r.now,xn=t.parseInt,Sn=ke.random,Cn=Re.reverse,_n=ho(t,"DataView"),kn=ho(t,"Map"),Tn=ho(t,"Promise"),An=ho(t,"Set"),En=ho(t,"WeakMap"),In=ho(Te,"create"),Rn=En&&new En,Pn={},jn=Fo(_n),Nn=Fo(kn),On=Fo(Tn),Dn=Fo(An),Mn=Fo(En),Ln=ze?ze.prototype:i,Fn=Ln?Ln.valueOf:i,Un=Ln?Ln.toString:i;function $n(e){if(ta(e)&&!Ws(e)&&!(e instanceof Wn)){if(e instanceof zn)return e;if(De.call(e,"__wrapped__"))return Uo(e)}return new zn(e)}var Vn=function(){function e(){}return function(t){if(!ea(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Bn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new qn(e);this.size=t.size}function Jn(e,t){var n=Ws(e),r=!n&&zs(e),i=!n&&!r&&Ks(e),o=!n&&!r&&!i&&ca(e),s=n||r||i||o,a=s?Qt(e.length,Ee):[],l=a.length;for(var c in e)!t&&!De.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bo(c,l))||a.push(c);return a}function Qn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Xn(e,t){return Do(Ii(e),ar(t,0,e.length))}function Zn(e){return Do(Ii(e))}function er(e,t,n){(n!==i&&!$s(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function tr(e,t,n){var r=e[t];De.call(e,t)&&$s(r,n)&&(n!==i||t in e)||or(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if($s(e[n][0],t))return n;return-1}function rr(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ir(e,t){return e&&Ri(t,Pa(t),e)}function or(e,t,n){"__proto__"==t&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:Ta(e,t[r]);return s}function ar(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,s){var a,l=1&t,c=2&t,u=4&t;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!ea(e))return e;var d=Ws(e);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ii(e,a)}else{var h=mo(e),p=h==C||h==_;if(Ks(e))return Ci(e,l);if(h==A||h==y||p&&!o){if(a=c||p?{}:vo(e),!l)return c?function(e,t){return Ri(e,fo(e),t)}(e,function(e,t){return e&&Ri(t,ja(t),e)}(a,e)):function(e,t){return Ri(e,po(e),t)}(e,ir(a,e))}else{if(!ct[h])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case O:return _i(e);case w:case x:return new r(+e);case D:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case L:case F:case U:case $:case V:case B:case z:case W:return ki(e,n);case k:return new r;case T:case P:return new r(e);case I:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case j:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,h,l)}}s||(s=new Yn);var f=s.get(e);if(f)return f;s.set(e,a),sa(e)?e.forEach((function(r){a.add(lr(r,t,n,r,e,s))})):na(e)&&e.forEach((function(r,i){a.set(i,lr(r,t,n,i,e,s))}));var m=d?i:(u?c?io:ro:c?ja:Pa)(e);return It(m||e,(function(r,i){m&&(r=e[i=r]),tr(a,i,lr(r,t,n,i,e,s))})),a}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new Ie(o);return Po((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,o=Nt,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=Dt(t,Zt(n))),r?(o=Ot,s=!1):t.length>=200&&(o=tn,s=!1,t=new Kn(t));e:for(;++i<a;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,s&&d===d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}$n.templateSettings={escape:X,evaluate:Z,interpolate:ee,variable:"",imports:{_:$n}},$n.prototype=Bn.prototype,$n.prototype.constructor=$n,zn.prototype=Vn(Bn.prototype),zn.prototype.constructor=zn,Wn.prototype=Vn(Bn.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===s?i:n}return De.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==i:De.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===i?s:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},qn.prototype.has=function(e){return nr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(kn||qn),string:new Hn}},Gn.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return co(this,e).get(e)},Gn.prototype.has=function(e){return co(this,e).has(e)},Gn.prototype.set=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,s),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new qn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!kn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var hr=Ni(wr),pr=Ni(xr,!0);function fr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(l===i?a===a&&!la(a):n(a,l)))var l=a,c=s}return c}function gr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=yo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?vr(a,t-1,n,r,i):Mt(i,a):r||(i[i.length]=a)}return i}var yr=Oi(),br=Oi(!0);function wr(e,t){return e&&yr(e,t,Pa)}function xr(e,t){return e&&br(e,t,Pa)}function Sr(e,t){return jt(t,(function(t){return Qs(e[t])}))}function Cr(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Lo(t[n++])];return n&&n==r?e:i}function _r(e,t,n){var r=t(e);return Ws(e)?r:Mt(r,n(e))}function kr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Xe&&Xe in Te(e)?function(e){var t=De.call(e,Xe),n=e[Xe];try{e[Xe]=i;var r=!0}catch(s){}var o=Fe.call(e);r&&(t?e[Xe]=n:delete e[Xe]);return o}(e):function(e){return Fe.call(e)}(e)}function Tr(e,t){return e>t}function Ar(e,t){return null!=e&&De.call(e,t)}function Er(e,t){return null!=e&&t in Te(e)}function Ir(e,t,r){for(var o=r?Ot:Nt,s=e[0].length,a=e.length,l=a,c=n(a),u=1/0,d=[];l--;){var h=e[l];l&&t&&(h=Dt(h,Zt(t))),u=bn(h.length,u),c[l]=!r&&(t||s>=120&&h.length>=120)?new Kn(l&&h):i}h=e[0];var p=-1,f=c[0];e:for(;++p<s&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?tn(f,g):o(d,g,r))){for(l=a;--l;){var v=c[l];if(!(v?tn(v,g):o(e[l],g,r)))continue e}f&&f.push(g),d.push(m)}}return d}function Rr(e,t,n){var r=null==(e=Eo(e,t=bi(t,e)))?e:e[Lo(Jo(t))];return null==r?i:At(r,e,n)}function Pr(e){return ta(e)&&kr(e)==y}function jr(e,t,n,r,o){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,r,o,s){var a=Ws(e),l=Ws(t),c=a?b:mo(e),u=l?b:mo(t),d=(c=c==y?A:c)==A,h=(u=u==y?A:u)==A,p=c==u;if(p&&Ks(e)){if(!Ks(t))return!1;a=!0,d=!1}if(p&&!d)return s||(s=new Yn),a||ca(e)?to(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!o(new We(e),new We(t)));case w:case x:case T:return $s(+e,+t);case S:return e.name==t.name&&e.message==t.message;case I:case P:return e==t+"";case k:var a=cn;case R:var l=1&r;if(a||(a=hn),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=to(a(e),a(t),r,i,o,s);return s.delete(e),u;case j:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,o,s);if(!(1&n)){var f=d&&De.call(e,"__wrapped__"),m=h&&De.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return s||(s=new Yn),o(g,v,n,r,s)}}if(!p)return!1;return s||(s=new Yn),function(e,t,n,r,o,s){var a=1&n,l=ro(e),c=l.length,u=ro(t),d=u.length;if(c!=d&&!a)return!1;var h=c;for(;h--;){var p=l[h];if(!(a?p in t:De.call(t,p)))return!1}var f=s.get(e),m=s.get(t);if(f&&m)return f==t&&m==e;var g=!0;s.set(e,t),s.set(t,e);var v=a;for(;++h<c;){var y=e[p=l[h]],b=t[p];if(r)var w=a?r(b,y,p,t,e,s):r(y,b,p,e,t,s);if(!(w===i?y===b||o(y,b,n,r,s):w)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var x=e.constructor,S=t.constructor;x==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof S&&S instanceof S||(g=!1)}return s.delete(e),s.delete(t),g}(e,t,n,r,o,s)}(e,t,n,r,jr,o))}function Nr(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=Te(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var c=(l=n[o])[0],u=e[c],d=l[1];if(a&&l[2]){if(u===i&&!(c in e))return!1}else{var h=new Yn;if(r)var p=r(u,d,c,e,t,h);if(!(p===i?jr(d,u,3,r,h):p))return!1}}return!0}function Or(e){return!(!ea(e)||(t=e,Le&&Le in t))&&(Qs(e)?Ve:ye).test(Fo(e));var t}function Dr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ws(e)?Vr(e[0],e[1]):$r(e):hl(e)}function Mr(e){if(!_o(e))return $t(e);var t=[];for(var n in Te(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Ur(e,t){var r=-1,i=qs(e)?n(e.length):[];return hr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function $r(e){var t=uo(e);return 1==t.length&&t[0][2]?To(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Vr(e,t){return xo(e)&&ko(t)?To(Lo(e),t):function(n){var r=Ta(n,e);return r===i&&r===t?Aa(n,e):jr(t,r,3)}}function Br(e,t,n,r,o){e!==t&&yr(t,(function(s,a){if(o||(o=new Yn),ea(s))!function(e,t,n,r,o,s,a){var l=Io(e,n),c=Io(t,n),u=a.get(c);if(u)return void er(e,n,u);var d=s?s(l,c,n+"",e,t,a):i,h=d===i;if(h){var p=Ws(c),f=!p&&Ks(c),m=!p&&!f&&ca(c);d=c,p||f||m?Ws(l)?d=l:Gs(l)?d=Ii(l):f?(h=!1,d=Ci(c,!0)):m?(h=!1,d=ki(c,!0)):d=[]:ia(c)||zs(c)?(d=l,zs(l)?d=va(l):ea(l)&&!Qs(l)||(d=vo(c))):h=!1}h&&(a.set(c,d),o(d,c,r,s,a),a.delete(c));er(e,n,d)}(e,t,a,n,Br,r,o);else{var l=r?r(Io(e,a),s,a+"",e,t,o):i;l===i&&(l=s),er(e,a,l)}}),ja)}function zr(e,t){var n=e.length;if(n)return bo(t+=t<0?n:0,n)?e[t]:i}function Wr(e,t,n){t=t.length?Dt(t,(function(e){return Ws(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Dt(t,Zt(lo()));var i=Ur(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var l=Ti(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Cr(e,s);n(a,s)&&Zr(o,bi(s,e),a)}return o}function qr(e,t,n,r){var i=r?Wt:zt,o=-1,s=t.length,a=e;for(e===t&&(t=Ii(t)),n&&(a=Dt(e,Zt(n)));++o<s;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==e&&Ye.call(a,l,1),Ye.call(e,l,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bo(i)?Ye.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+ft(Sn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return jo(Ao(e,t,rl),e+"")}function Qr(e){return Qn($a(e))}function Xr(e,t){var n=$a(e);return Do(n,ar(t,0,n.length))}function Zr(e,t,n,r){if(!ea(e))return e;for(var o=-1,s=(t=bi(t,e)).length,a=s-1,l=e;null!=l&&++o<s;){var c=Lo(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var d=l[c];(u=r?r(d,c,l):i)===i&&(u=ea(d)?d:bo(t[o+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ei=Rn?function(e,t){return Rn.set(e,t),e}:rl,ti=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Do($a(e))}function ri(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function ii(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!la(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return si(e,t,rl,n)}function si(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!==t,l=null===t,c=la(t),u=t===i;o<s;){var d=ft((o+s)/2),h=n(e[d]),p=h!==i,f=null===h,m=h===h,g=la(h);if(a)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?o=d+1:s=d}return bn(s,4294967294)}function ai(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!$s(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function li(e){return"number"==typeof e?e:la(e)?m:+e}function ci(e){if("string"==typeof e)return e;if(Ws(e))return Dt(e,ci)+"";if(la(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Nt,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=Ot;else if(o>=200){var c=t?null:Yi(e);if(c)return hn(c);s=!1,i=tn,l=new Kn}else l=t?[]:a;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}function di(e,t){return null==(e=Eo(e,t=bi(t,e)))||delete e[Lo(Jo(t))]}function hi(e,t,n,r){return Zr(e,t,n(Cr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ri(e,r?0:o,r?o+1:i):ri(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],l=-1;++l<i;)l!=o&&(s[o]=dr(s[o]||a,e[l],t,r));return ui(vr(s,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var l=r<s?t[r]:i;n(a,e[r],l)}return a}function vi(e){return Gs(e)?e:[]}function yi(e){return"function"==typeof e?e:rl}function bi(e,t){return Ws(e)?e:xo(e,t)?[e]:Mo(ya(e))}var wi=Jr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var Si=nt||function(e){return mt.clearTimeout(e)};function Ci(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function ki(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,s=la(e),a=t!==i,l=null===t,c=t===t,u=la(t);if(!l&&!u&&!s&&e>t||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!u&&e<t||u&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}function Ai(e,t,r,i){for(var o=-1,s=e.length,a=r.length,l=-1,c=t.length,u=Kt(s-a,0),d=n(c+u),h=!i;++l<c;)d[l]=t[l];for(;++o<a;)(h||o<s)&&(d[r[o]]=e[o]);for(;u--;)d[l++]=e[o++];return d}function Ei(e,t,r,i){for(var o=-1,s=e.length,a=-1,l=r.length,c=-1,u=t.length,d=Kt(s-l,0),h=n(d+u),p=!i;++o<d;)h[o]=e[o];for(var f=o;++c<u;)h[f+c]=t[c];for(;++a<l;)(p||o<s)&&(h[f+r[a]]=e[o++]);return h}function Ii(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ri(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),o?or(n,l,c):tr(n,l,c)}return n}function Pi(e,t){return function(n,r){var i=Ws(n)?Et:rr,o=t?t():{};return i(n,e,lo(r,2),o)}}function ji(e){return Jr((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&wo(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=Te(t);++r<o;){var l=n[r];l&&e(t,l,r,s)}return t}))}function Ni(e,t){return function(n,r){if(null==n)return n;if(!qs(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Te(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Oi(e){return function(t,n,r){for(var i=-1,o=Te(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}function Di(e){return function(t){var n=ln(t=ya(t))?mn(t):i,r=n?n[0]:t.charAt(0),o=n?xi(n,1).join(""):t.slice(1);return r[e]()+o}}function Mi(e){return function(t){return Lt(Qa(za(t).replace(et,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function Fi(e){return function(t,n,r){var o=Te(t);if(!qs(t)){var s=lo(n,3);t=Pa(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function Ui(e){return no((function(t){var n=t.length,r=n,s=zn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Ie(o);if(s&&!l&&"wrapper"==so(a))var l=new zn([],!0)}for(r=l?r:n;++r<n;){var c=so(a=t[r]),u="wrapper"==c?oo(a):i;l=u&&So(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[so(u[0])].apply(l,u[3]):1==a.length&&So(a)?l[c]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ws(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function $i(e,t,r,o,s,a,l,c,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Li(e);return function d(){for(var b=arguments.length,w=n(b),x=b;x--;)w[x]=arguments[x];if(g)var S=ao(d),C=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(w,S);if(o&&(w=Ai(w,o,s,g)),a&&(w=Ei(w,a,l,g)),b-=C,g&&b<h){var _=dn(w,S);return Gi(e,t,$i,d.placeholder,r,w,_,c,u,h-b)}var k=f?r:this,T=m?k[e]:e;return b=w.length,c?w=function(e,t){var n=e.length,r=bn(t.length,n),o=Ii(e);for(;r--;){var s=t[r];e[r]=bo(s,n)?o[s]:i}return e}(w,c):v&&b>1&&w.reverse(),p&&u<b&&(w.length=u),this&&this!==mt&&this instanceof d&&(T=y||Li(T)),T.apply(k,w)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Bi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function zi(e){return no((function(t){return t=Dt(t,Zt(lo())),Jr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Wi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/fn(t)));return ln(t)?xi(mn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,o){return o&&"number"!=typeof o&&wo(t,r,o)&&(r=o=i),t=pa(t),r===i?(r=t,t=0):r=pa(r),function(e,t,r,i){for(var o=-1,s=Kt(pt((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:pa(o),e)}}function qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Gi(e,t,n,r,o,s,a,l,d,h){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,o,p?s:i,p?a:i,p?i:s,p?i:a,l,d,h],m=n.apply(i,f);return So(e)&&Ro(m,f),m.placeholder=r,No(m,e,t)}function Ki(e){var t=ke[e];return function(e,n){if(e=ga(e),(n=null==n?0:bn(fa(n),292))&&bt(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=An&&1/hn(new An([,-0]))[1]==p?function(e){return new An(e)}:ll;function Ji(e){return function(t){var n=mo(t);return n==k?cn(t):n==R?pn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,r,s,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(o);var y=s?s.length:0;if(y||(t&=-97,s=p=i),m=m===i?m:Kt(fa(m),0),g=g===i?g:fa(g),y-=p?p.length:0,t&u){var b=s,w=p;s=p=i}var x=v?i:oo(e),S=[e,t,r,s,p,b,w,f,m,g];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==d&&8==n||r==d&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ai(c,l,t[4]):l,e[4]=c?dn(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ei(c,l,t[6]):l,e[6]=c?dn(e[5],a):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(S,x),e=S[0],t=S[1],r=S[2],s=S[3],p=S[4],!(g=S[9]=S[9]===i?v?0:e.length:Kt(S[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)C=8==t||t==l?function(e,t,r){var o=Li(e);return function s(){for(var a=arguments.length,l=n(a),c=a,u=ao(s);c--;)l[c]=arguments[c];var d=a<3&&l[0]!==u&&l[a-1]!==u?[]:dn(l,u);return(a-=d.length)<r?Gi(e,t,$i,s.placeholder,i,l,d,i,i,r-a):At(this&&this!==mt&&this instanceof s?o:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?$i.apply(i,S):function(e,t,r,i){var o=1&t,s=Li(e);return function t(){for(var a=-1,l=arguments.length,c=-1,u=i.length,d=n(u+l),h=this&&this!==mt&&this instanceof t?s:e;++c<u;)d[c]=i[c];for(;l--;)d[c++]=arguments[++a];return At(h,o?r:this,d)}}(e,t,r,s);else var C=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return No((x?ei:Ro)(C,S),e,t)}function Xi(e,t,n,r){return e===i||$s(e,je[n])&&!De.call(r,n)?t:e}function Zi(e,t,n,r,o,s){return ea(e)&&ea(t)&&(s.set(t,e),Br(e,t,i,Zi,s),s.delete(t)),e}function eo(e){return ia(e)?i:e}function to(e,t,n,r,o,s){var a=1&n,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Kn:i;for(s.set(e,t),s.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var v=a?r(g,m,h,t,e,s):r(m,g,h,e,t,s);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!tn(f,t)&&(m===e||o(m,e,n,r,s)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!o(m,g,n,r,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function no(e){return jo(Ao(e,i,Ho),e+"")}function ro(e){return _r(e,Pa,po)}function io(e){return _r(e,ja,fo)}var oo=Rn?function(e){return Rn.get(e)}:ll;function so(e){for(var t=e.name+"",n=Pn[t],r=De.call(Pn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ao(e){return(De.call($n,"placeholder")?$n:e).placeholder}function lo(){var e=$n.iteratee||il;return e=e===il?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function uo(e){for(var t=Pa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ko(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Or(n)?n:i}var po=gt?function(e){return null==e?[]:(e=Te(e),jt(gt(e),(function(t){return Ke.call(e,t)})))}:ml,fo=gt?function(e){for(var t=[];e;)Mt(t,po(e)),e=qe(e);return t}:ml,mo=kr;function go(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,o=!1;++r<i;){var s=Lo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Zs(i)&&bo(s,i)&&(Ws(e)||zs(e))}function vo(e){return"function"!=typeof e.constructor||_o(e)?{}:Vn(qe(e))}function yo(e){return Ws(e)||zs(e)||!!(Je&&e&&e[Je])}function bo(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?qs(n)&&bo(t,n.length):"string"==r&&t in n)&&$s(n[t],e)}function xo(e,t){if(Ws(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!la(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function So(e){var t=so(e),n=$n[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=oo(n);return!!r&&e===r[0]}(_n&&mo(new _n(new ArrayBuffer(1)))!=D||kn&&mo(new kn)!=k||Tn&&mo(Tn.resolve())!=E||An&&mo(new An)!=R||En&&mo(new En)!=N)&&(mo=function(e){var t=kr(e),n=t==A?e.constructor:i,r=n?Fo(n):"";if(r)switch(r){case jn:return D;case Nn:return k;case On:return E;case Dn:return R;case Mn:return N}return t});var Co=Ne?Qs:gl;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function ko(e){return e===e&&!ea(e)}function To(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function Ao(e,t,r){return t=Kt(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=Kt(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=i[o];return l[t]=r(a),At(e,this,l)}}function Eo(e,t){return t.length<2?e:Cr(e,ri(t,0,-1))}function Io(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ro=Oo(ei),Po=ut||function(e,t){return mt.setTimeout(e,t)},jo=Oo(ti);function No(e,t,n){var r=t+"";return jo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(v,(function(n){var r="_."+n[0];t&n[1]&&!Nt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Oo(e){var t=0,n=0;return function(){var r=wn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Do(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=Kr(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Mo=function(e){var t=Os(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function Lo(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Uo(e){if(e instanceof Wn)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $o=Jr((function(e,t){return Gs(e)?dr(e,vr(t,1,Gs,!0)):[]})),Vo=Jr((function(e,t){var n=Jo(t);return Gs(n)&&(n=i),Gs(e)?dr(e,vr(t,1,Gs,!0),lo(n,2)):[]})),Bo=Jr((function(e,t){var n=Jo(t);return Gs(n)&&(n=i),Gs(e)?dr(e,vr(t,1,Gs,!0),i,n):[]}));function zo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fa(n);return i<0&&(i=Kt(r+i,0)),Bt(e,lo(t,3),i)}function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fa(n),o=n<0?Kt(r+o,0):bn(o,r-1)),Bt(e,lo(t,3),o,!0)}function Ho(e){return(null==e?0:e.length)?vr(e,1):[]}function qo(e){return e&&e.length?e[0]:i}var Go=Jr((function(e){var t=Dt(e,vi);return t.length&&t[0]===e[0]?Ir(t):[]})),Ko=Jr((function(e){var t=Jo(e),n=Dt(e,vi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ir(n,lo(t,2)):[]})),Yo=Jr((function(e){var t=Jo(e),n=Dt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ir(n,i,t):[]}));function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qo=Jr(Xo);function Xo(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var Zo=no((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Gr(e,Dt(t,(function(e){return bo(e,n)?+e:e})).sort(Ti)),r}));function es(e){return null==e?e:Cn.call(e)}var ts=Jr((function(e){return ui(vr(e,1,Gs,!0))})),ns=Jr((function(e){var t=Jo(e);return Gs(t)&&(t=i),ui(vr(e,1,Gs,!0),lo(t,2))})),rs=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,ui(vr(e,1,Gs,!0),i,t)}));function is(e){if(!e||!e.length)return[];var t=0;return e=jt(e,(function(e){if(Gs(e))return t=Kt(e.length,t),!0})),Qt(t,(function(t){return Dt(e,Gt(t))}))}function os(e,t){if(!e||!e.length)return[];var n=is(e);return null==t?n:Dt(n,(function(e){return At(t,i,e)}))}var ss=Jr((function(e,t){return Gs(e)?dr(e,t):[]})),as=Jr((function(e){return mi(jt(e,Gs))})),ls=Jr((function(e){var t=Jo(e);return Gs(t)&&(t=i),mi(jt(e,Gs),lo(t,2))})),cs=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,mi(jt(e,Gs),i,t)})),us=Jr(is);var ds=Jr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,os(e,n)}));function hs(e){var t=$n(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var fs=no((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&bo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new zn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ms=Pi((function(e,t,n){De.call(e,n)?++e[n]:or(e,n,1)}));var gs=Fi(zo),vs=Fi(Wo);function ys(e,t){return(Ws(e)?It:hr)(e,lo(t,3))}function bs(e,t){return(Ws(e)?Rt:pr)(e,lo(t,3))}var ws=Pi((function(e,t,n){De.call(e,n)?e[n].push(t):or(e,n,[t])}));var xs=Jr((function(e,t,r){var i=-1,o="function"==typeof t,s=qs(e)?n(e.length):[];return hr(e,(function(e){s[++i]=o?At(t,e,r):Rr(e,t,r)})),s})),Ss=Pi((function(e,t,n){or(e,n,t)}));function Cs(e,t){return(Ws(e)?Dt:Ur)(e,lo(t,3))}var _s=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ks=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wo(e,t[0],t[1])?t=[]:n>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,vr(t,1),[])})),Ts=it||function(){return mt.Date.now()};function As(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Qi(e,d,i,i,i,i,t)}function Es(e,t){var n;if("function"!=typeof t)throw new Ie(o);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Is=Jr((function(e,t,n){var r=1;if(n.length){var i=dn(n,ao(Is));r|=c}return Qi(e,r,t,n,i)})),Rs=Jr((function(e,t,n){var r=3;if(n.length){var i=dn(n,ao(Rs));r|=c}return Qi(t,r,e,n,i)}));function Ps(e,t,n){var r,s,a,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ie(o);function m(t){var n=r,o=s;return r=s=i,d=t,l=e.apply(o,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-d>=a}function v(){var e=Ts();if(g(e))return y(e);c=Po(v,function(e){var n=t-(e-u);return p?bn(n,a-(e-d)):n}(e))}function y(e){return c=i,f&&r?m(e):(r=s=i,l)}function b(){var e=Ts(),n=g(e);if(r=arguments,s=this,u=e,n){if(c===i)return function(e){return d=e,c=Po(v,t),h?m(e):l}(u);if(p)return Si(c),c=Po(v,t),m(u)}return c===i&&(c=Po(v,t)),l}return t=ga(t)||0,ea(n)&&(h=!!n.leading,a=(p="maxWait"in n)?Kt(ga(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){c!==i&&Si(c),d=0,r=u=s=c=i},b.flush=function(){return c===i?l:y(Ts())},b}var js=Jr((function(e,t){return ur(e,1,t)})),Ns=Jr((function(e,t,n){return ur(e,ga(t)||0,n)}));function Os(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Os.Cache||Gn),n}function Ds(e){if("function"!=typeof e)throw new Ie(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Os.Cache=Gn;var Ms=wi((function(e,t){var n=(t=1==t.length&&Ws(t[0])?Dt(t[0],Zt(lo())):Dt(vr(t,1),Zt(lo()))).length;return Jr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),Ls=Jr((function(e,t){var n=dn(t,ao(Ls));return Qi(e,c,i,t,n)})),Fs=Jr((function(e,t){var n=dn(t,ao(Fs));return Qi(e,u,i,t,n)})),Us=no((function(e,t){return Qi(e,h,i,i,i,t)}));function $s(e,t){return e===t||e!==e&&t!==t}var Vs=qi(Tr),Bs=qi((function(e,t){return e>=t})),zs=Pr(function(){return arguments}())?Pr:function(e){return ta(e)&&De.call(e,"callee")&&!Ke.call(e,"callee")},Ws=n.isArray,Hs=xt?Zt(xt):function(e){return ta(e)&&kr(e)==O};function qs(e){return null!=e&&Zs(e.length)&&!Qs(e)}function Gs(e){return ta(e)&&qs(e)}var Ks=vt||gl,Ys=St?Zt(St):function(e){return ta(e)&&kr(e)==x};function Js(e){if(!ta(e))return!1;var t=kr(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ia(e)}function Qs(e){if(!ea(e))return!1;var t=kr(e);return t==C||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xs(e){return"number"==typeof e&&e==fa(e)}function Zs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=Ct?Zt(Ct):function(e){return ta(e)&&mo(e)==k};function ra(e){return"number"==typeof e||ta(e)&&kr(e)==T}function ia(e){if(!ta(e)||kr(e)!=A)return!1;var t=qe(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==Ue}var oa=_t?Zt(_t):function(e){return ta(e)&&kr(e)==I};var sa=kt?Zt(kt):function(e){return ta(e)&&mo(e)==R};function aa(e){return"string"==typeof e||!Ws(e)&&ta(e)&&kr(e)==P}function la(e){return"symbol"==typeof e||ta(e)&&kr(e)==j}var ca=Tt?Zt(Tt):function(e){return ta(e)&&Zs(e.length)&&!!lt[kr(e)]};var ua=qi(Fr),da=qi((function(e,t){return e<=t}));function ha(e){if(!e)return[];if(qs(e))return aa(e)?mn(e):Ii(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=mo(e);return(t==k?cn:t==R?hn:$a)(e)}function pa(e){return e?(e=ga(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fa(e){var t=pa(e),n=t%1;return t===t?n?t-n:t:0}function ma(e){return e?ar(fa(e),0,g):0}function ga(e){if("number"==typeof e)return e;if(la(e))return m;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=ve.test(e);return n||be.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function va(e){return Ri(e,ja(e))}function ya(e){return null==e?"":ci(e)}var ba=ji((function(e,t){if(_o(t)||qs(t))Ri(t,Pa(t),e);else for(var n in t)De.call(t,n)&&tr(e,n,t[n])})),wa=ji((function(e,t){Ri(t,ja(t),e)})),xa=ji((function(e,t,n,r){Ri(t,ja(t),e,r)})),Sa=ji((function(e,t,n,r){Ri(t,Pa(t),e,r)})),Ca=no(sr);var _a=Jr((function(e,t){e=Te(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&wo(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=ja(s),l=-1,c=a.length;++l<c;){var u=a[l],d=e[u];(d===i||$s(d,je[u])&&!De.call(e,u))&&(e[u]=s[u])}return e})),ka=Jr((function(e){return e.push(i,Zi),At(Oa,i,e)}));function Ta(e,t,n){var r=null==e?i:Cr(e,t);return r===i?n:r}function Aa(e,t){return null!=e&&go(e,t,Er)}var Ea=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(rl)),Ia=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Ra=Jr(Rr);function Pa(e){return qs(e)?Jn(e):Mr(e)}function ja(e){return qs(e)?Jn(e,!0):Lr(e)}var Na=ji((function(e,t,n){Br(e,t,n)})),Oa=ji((function(e,t,n,r){Br(e,t,n,r)})),Da=no((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Ri(e,io(e),n),r&&(n=lr(n,7,eo));for(var i=t.length;i--;)di(n,t[i]);return n}));var Ma=no((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return Aa(e,n)}))}(e,t)}));function La(e,t){if(null==e)return{};var n=Dt(io(e),(function(e){return[e]}));return t=lo(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Fa=Ji(Pa),Ua=Ji(ja);function $a(e){return null==e?[]:en(e,Pa(e))}var Va=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ba(t):t)}));function Ba(e){return Ja(ya(e).toLowerCase())}function za(e){return(e=ya(e))&&e.replace(xe,on).replace(tt,"")}var Wa=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ha=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qa=Di("toLowerCase");var Ga=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ka=Mi((function(e,t,n){return e+(n?" ":"")+Ja(t)}));var Ya=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ja=Di("toUpperCase");function Qa(e,t,n){return e=ya(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Xa=Jr((function(e,t){try{return At(e,i,t)}catch(n){return Js(n)?n:new ae(n)}})),Za=no((function(e,t){return It(t,(function(t){t=Lo(t),or(e,t,Is(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Ui(),nl=Ui(!0);function rl(e){return e}function il(e){return Dr("function"==typeof e?e:lr(e,1))}var ol=Jr((function(e,t){return function(n){return Rr(n,e,t)}})),sl=Jr((function(e,t){return function(n){return Rr(e,n,t)}}));function al(e,t,n){var r=Pa(t),i=Sr(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Pa(t)));var o=!(ea(n)&&"chain"in n)||!!n.chain,s=Qs(e);return It(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Mt([this.value()],arguments))})})),e}function ll(){}var cl=zi(Dt),ul=zi(Pt),dl=zi(Ut);function hl(e){return xo(e)?Gt(Lo(e)):function(e){return function(t){return Cr(t,e)}}(e)}var pl=Hi(),fl=Hi(!0);function ml(){return[]}function gl(){return!1}var vl=Bi((function(e,t){return e+t}),0),yl=Ki("ceil"),bl=Bi((function(e,t){return e/t}),1),wl=Ki("floor");var xl=Bi((function(e,t){return e*t}),1),Sl=Ki("round"),Cl=Bi((function(e,t){return e-t}),0);return $n.after=function(e,t){if("function"!=typeof t)throw new Ie(o);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},$n.ary=As,$n.assign=ba,$n.assignIn=wa,$n.assignInWith=xa,$n.assignWith=Sa,$n.at=Ca,$n.before=Es,$n.bind=Is,$n.bindAll=Za,$n.bindKey=Rs,$n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ws(e)?e:[e]},$n.chain=hs,$n.chunk=function(e,t,r){t=(r?wo(e,t,r):t===i)?1:Kt(fa(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,l=n(pt(o/t));s<o;)l[a++]=ri(e,s,s+=t);return l},$n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},$n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(Ws(r)?Ii(r):[r],vr(t,1))},$n.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Ie(o);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}}))},$n.conforms=function(e){return function(e){var t=Pa(e);return function(n){return cr(n,e,t)}}(lr(e,1))},$n.constant=el,$n.countBy=ms,$n.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},$n.curry=function e(t,n,r){var o=Qi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},$n.curryRight=function e(t,n,r){var o=Qi(t,l,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},$n.debounce=Ps,$n.defaults=_a,$n.defaultsDeep=ka,$n.defer=js,$n.delay=Ns,$n.difference=$o,$n.differenceBy=Vo,$n.differenceWith=Bo,$n.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:fa(t))<0?0:t,r):[]},$n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:fa(t)))<0?0:t):[]},$n.dropRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0,!0):[]},$n.dropWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0):[]},$n.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=fa(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fa(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},$n.filter=function(e,t){return(Ws(e)?jt:gr)(e,lo(t,3))},$n.flatMap=function(e,t){return vr(Cs(e,t),1)},$n.flatMapDeep=function(e,t){return vr(Cs(e,t),p)},$n.flatMapDepth=function(e,t,n){return n=n===i?1:fa(n),vr(Cs(e,t),n)},$n.flatten=Ho,$n.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,p):[]},$n.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:fa(t)):[]},$n.flip=function(e){return Qi(e,512)},$n.flow=tl,$n.flowRight=nl,$n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},$n.functions=function(e){return null==e?[]:Sr(e,Pa(e))},$n.functionsIn=function(e){return null==e?[]:Sr(e,ja(e))},$n.groupBy=ws,$n.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},$n.intersection=Go,$n.intersectionBy=Ko,$n.intersectionWith=Yo,$n.invert=Ea,$n.invertBy=Ia,$n.invokeMap=xs,$n.iteratee=il,$n.keyBy=Ss,$n.keys=Pa,$n.keysIn=ja,$n.map=Cs,$n.mapKeys=function(e,t){var n={};return t=lo(t,3),wr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},$n.mapValues=function(e,t){var n={};return t=lo(t,3),wr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},$n.matches=function(e){return $r(lr(e,1))},$n.matchesProperty=function(e,t){return Vr(e,lr(t,1))},$n.memoize=Os,$n.merge=Na,$n.mergeWith=Oa,$n.method=ol,$n.methodOf=sl,$n.mixin=al,$n.negate=Ds,$n.nthArg=function(e){return e=fa(e),Jr((function(t){return zr(t,e)}))},$n.omit=Da,$n.omitBy=function(e,t){return La(e,Ds(lo(t)))},$n.once=function(e){return Es(2,e)},$n.orderBy=function(e,t,n,r){return null==e?[]:(Ws(t)||(t=null==t?[]:[t]),Ws(n=r?i:n)||(n=null==n?[]:[n]),Wr(e,t,n))},$n.over=cl,$n.overArgs=Ms,$n.overEvery=ul,$n.overSome=dl,$n.partial=Ls,$n.partialRight=Fs,$n.partition=_s,$n.pick=Ma,$n.pickBy=La,$n.property=hl,$n.propertyOf=function(e){return function(t){return null==e?i:Cr(e,t)}},$n.pull=Qo,$n.pullAll=Xo,$n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,lo(n,2)):e},$n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,i,n):e},$n.pullAt=Zo,$n.range=pl,$n.rangeRight=fl,$n.rearg=Us,$n.reject=function(e,t){return(Ws(e)?jt:gr)(e,Ds(lo(t,3)))},$n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Gr(e,i),n},$n.rest=function(e,t){if("function"!=typeof e)throw new Ie(o);return Jr(e,t=t===i?t:fa(t))},$n.reverse=es,$n.sampleSize=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:fa(t),(Ws(e)?Xn:Xr)(e,t)},$n.set=function(e,t,n){return null==e?e:Zr(e,t,n)},$n.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Zr(e,t,n,r)},$n.shuffle=function(e){return(Ws(e)?Zn:ni)(e)},$n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wo(e,t,n)?(t=0,n=r):(t=null==t?0:fa(t),n=n===i?r:fa(n)),ri(e,t,n)):[]},$n.sortBy=ks,$n.sortedUniq=function(e){return e&&e.length?ai(e):[]},$n.sortedUniqBy=function(e,t){return e&&e.length?ai(e,lo(t,2)):[]},$n.split=function(e,t,n){return n&&"number"!=typeof n&&wo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=ci(t))&&ln(e)?xi(mn(e),0,n):e.split(t,n):[]},$n.spread=function(e,t){if("function"!=typeof e)throw new Ie(o);return t=null==t?0:Kt(fa(t),0),Jr((function(n){var r=n[t],i=xi(n,0,t);return r&&Mt(i,r),At(e,this,i)}))},$n.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},$n.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:fa(t))<0?0:t):[]},$n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:fa(t)))<0?0:t,r):[]},$n.takeRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!1,!0):[]},$n.takeWhile=function(e,t){return e&&e.length?pi(e,lo(t,3)):[]},$n.tap=function(e,t){return t(e),e},$n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ie(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ps(e,t,{leading:r,maxWait:t,trailing:i})},$n.thru=ps,$n.toArray=ha,$n.toPairs=Fa,$n.toPairsIn=Ua,$n.toPath=function(e){return Ws(e)?Dt(e,Lo):la(e)?[e]:Ii(Mo(ya(e)))},$n.toPlainObject=va,$n.transform=function(e,t,n){var r=Ws(e),i=r||Ks(e)||ca(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ea(e)&&Qs(o)?Vn(qe(e)):{}}return(i?It:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},$n.unary=function(e){return As(e,1)},$n.union=ts,$n.unionBy=ns,$n.unionWith=rs,$n.uniq=function(e){return e&&e.length?ui(e):[]},$n.uniqBy=function(e,t){return e&&e.length?ui(e,lo(t,2)):[]},$n.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},$n.unset=function(e,t){return null==e||di(e,t)},$n.unzip=is,$n.unzipWith=os,$n.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},$n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,yi(n),r)},$n.values=$a,$n.valuesIn=function(e){return null==e?[]:en(e,ja(e))},$n.without=ss,$n.words=Qa,$n.wrap=function(e,t){return Ls(yi(t),e)},$n.xor=as,$n.xorBy=ls,$n.xorWith=cs,$n.zip=us,$n.zipObject=function(e,t){return gi(e||[],t||[],tr)},$n.zipObjectDeep=function(e,t){return gi(e||[],t||[],Zr)},$n.zipWith=ds,$n.entries=Fa,$n.entriesIn=Ua,$n.extend=wa,$n.extendWith=xa,al($n,$n),$n.add=vl,$n.attempt=Xa,$n.camelCase=Va,$n.capitalize=Ba,$n.ceil=yl,$n.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ga(n))===n?n:0),t!==i&&(t=(t=ga(t))===t?t:0),ar(ga(e),t,n)},$n.clone=function(e){return lr(e,4)},$n.cloneDeep=function(e){return lr(e,5)},$n.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},$n.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},$n.conformsTo=function(e,t){return null==t||cr(e,t,Pa(t))},$n.deburr=za,$n.defaultTo=function(e,t){return null==e||e!==e?t:e},$n.divide=bl,$n.endsWith=function(e,t,n){e=ya(e),t=ci(t);var r=e.length,o=n=n===i?r:ar(fa(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},$n.eq=$s,$n.escape=function(e){return(e=ya(e))&&Q.test(e)?e.replace(Y,sn):e},$n.escapeRegExp=function(e){return(e=ya(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},$n.every=function(e,t,n){var r=Ws(e)?Pt:fr;return n&&wo(e,t,n)&&(t=i),r(e,lo(t,3))},$n.find=gs,$n.findIndex=zo,$n.findKey=function(e,t){return Vt(e,lo(t,3),wr)},$n.findLast=vs,$n.findLastIndex=Wo,$n.findLastKey=function(e,t){return Vt(e,lo(t,3),xr)},$n.floor=wl,$n.forEach=ys,$n.forEachRight=bs,$n.forIn=function(e,t){return null==e?e:yr(e,lo(t,3),ja)},$n.forInRight=function(e,t){return null==e?e:br(e,lo(t,3),ja)},$n.forOwn=function(e,t){return e&&wr(e,lo(t,3))},$n.forOwnRight=function(e,t){return e&&xr(e,lo(t,3))},$n.get=Ta,$n.gt=Vs,$n.gte=Bs,$n.has=function(e,t){return null!=e&&go(e,t,Ar)},$n.hasIn=Aa,$n.head=qo,$n.identity=rl,$n.includes=function(e,t,n,r){e=qs(e)?e:$a(e),n=n&&!r?fa(n):0;var i=e.length;return n<0&&(n=Kt(i+n,0)),aa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&zt(e,t,n)>-1},$n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fa(n);return i<0&&(i=Kt(r+i,0)),zt(e,t,i)},$n.inRange=function(e,t,n){return t=pa(t),n===i?(n=t,t=0):n=pa(n),function(e,t,n){return e>=bn(t,n)&&e<Kt(t,n)}(e=ga(e),t,n)},$n.invoke=Ra,$n.isArguments=zs,$n.isArray=Ws,$n.isArrayBuffer=Hs,$n.isArrayLike=qs,$n.isArrayLikeObject=Gs,$n.isBoolean=function(e){return!0===e||!1===e||ta(e)&&kr(e)==w},$n.isBuffer=Ks,$n.isDate=Ys,$n.isElement=function(e){return ta(e)&&1===e.nodeType&&!ia(e)},$n.isEmpty=function(e){if(null==e)return!0;if(qs(e)&&(Ws(e)||"string"==typeof e||"function"==typeof e.splice||Ks(e)||ca(e)||zs(e)))return!e.length;var t=mo(e);if(t==k||t==R)return!e.size;if(_o(e))return!Mr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},$n.isEqual=function(e,t){return jr(e,t)},$n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?jr(e,t,i,n):!!r},$n.isError=Js,$n.isFinite=function(e){return"number"==typeof e&&bt(e)},$n.isFunction=Qs,$n.isInteger=Xs,$n.isLength=Zs,$n.isMap=na,$n.isMatch=function(e,t){return e===t||Nr(e,t,uo(t))},$n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Nr(e,t,uo(t),n)},$n.isNaN=function(e){return ra(e)&&e!=+e},$n.isNative=function(e){if(Co(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},$n.isNil=function(e){return null==e},$n.isNull=function(e){return null===e},$n.isNumber=ra,$n.isObject=ea,$n.isObjectLike=ta,$n.isPlainObject=ia,$n.isRegExp=oa,$n.isSafeInteger=function(e){return Xs(e)&&e>=-9007199254740991&&e<=f},$n.isSet=sa,$n.isString=aa,$n.isSymbol=la,$n.isTypedArray=ca,$n.isUndefined=function(e){return e===i},$n.isWeakMap=function(e){return ta(e)&&mo(e)==N},$n.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==kr(e)},$n.join=function(e,t){return null==e?"":wt.call(e,t)},$n.kebabCase=Wa,$n.last=Jo,$n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fa(n))<0?Kt(r+o,0):bn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Bt(e,Ht,o,!0)},$n.lowerCase=Ha,$n.lowerFirst=qa,$n.lt=ua,$n.lte=da,$n.max=function(e){return e&&e.length?mr(e,rl,Tr):i},$n.maxBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Tr):i},$n.mean=function(e){return qt(e,rl)},$n.meanBy=function(e,t){return qt(e,lo(t,2))},$n.min=function(e){return e&&e.length?mr(e,rl,Fr):i},$n.minBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Fr):i},$n.stubArray=ml,$n.stubFalse=gl,$n.stubObject=function(){return{}},$n.stubString=function(){return""},$n.stubTrue=function(){return!0},$n.multiply=xl,$n.nth=function(e,t){return e&&e.length?zr(e,fa(t)):i},$n.noConflict=function(){return mt._===this&&(mt._=$e),this},$n.noop=ll,$n.now=Ts,$n.pad=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(ft(i),n)+e+Wi(pt(i),n)},$n.padEnd=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;return t&&r<t?e+Wi(t-r,n):e},$n.padStart=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;return t&&r<t?Wi(t-r,n)+e:e},$n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ya(e).replace(se,""),t||0)},$n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=pa(e),t===i?(t=e,e=0):t=pa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Sn();return bn(e+o*(t-e+dt("1e-"+((o+"").length-1))),t)}return Kr(e,t)},$n.reduce=function(e,t,n){var r=Ws(e)?Lt:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,hr)},$n.reduceRight=function(e,t,n){var r=Ws(e)?Ft:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},$n.repeat=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:fa(t),Yr(ya(e),t)},$n.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},$n.result=function(e,t,n){var r=-1,o=(t=bi(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[Lo(t[r])];s===i&&(r=o,s=n),e=Qs(s)?s.call(e):s}return e},$n.round=Sl,$n.runInContext=e,$n.sample=function(e){return(Ws(e)?Qn:Qr)(e)},$n.size=function(e){if(null==e)return 0;if(qs(e))return aa(e)?fn(e):e.length;var t=mo(e);return t==k||t==R?e.size:Mr(e).length},$n.snakeCase=Ga,$n.some=function(e,t,n){var r=Ws(e)?Ut:ii;return n&&wo(e,t,n)&&(t=i),r(e,lo(t,3))},$n.sortedIndex=function(e,t){return oi(e,t)},$n.sortedIndexBy=function(e,t,n){return si(e,t,lo(n,2))},$n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&$s(e[r],t))return r}return-1},$n.sortedLastIndex=function(e,t){return oi(e,t,!0)},$n.sortedLastIndexBy=function(e,t,n){return si(e,t,lo(n,2),!0)},$n.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if($s(e[n],t))return n}return-1},$n.startCase=Ka,$n.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ar(fa(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},$n.subtract=Cl,$n.sum=function(e){return e&&e.length?Jt(e,rl):0},$n.sumBy=function(e,t){return e&&e.length?Jt(e,lo(t,2)):0},$n.template=function(e,t,n){var r=$n.templateSettings;n&&wo(e,t,n)&&(t=i),e=ya(e),t=xa({},t,r,Xi);var o,s,a=xa({},t.imports,r.imports,Xi),l=Pa(a),c=en(a,l),u=0,d=t.interpolate||Se,h="__p += '",p=Ae((t.escape||Se).source+"|"+d.source+"|"+(d===ee?fe:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),f="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,n,r,i,a,l){return r||(r=i),h+=e.slice(u,l).replace(Ce,an),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),h+="';\n";var m=De.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(H,""):h).replace(q,"$1").replace(G,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Xa((function(){return _e(l,f+"return "+h).apply(i,c)}));if(g.source=h,Js(g))throw g;return g},$n.times=function(e,t){if((e=fa(e))<1||e>f)return[];var n=g,r=bn(e,g);t=lo(t),e-=g;for(var i=Qt(r,t);++n<e;)t(n);return i},$n.toFinite=pa,$n.toInteger=fa,$n.toLength=ma,$n.toLower=function(e){return ya(e).toLowerCase()},$n.toNumber=ga,$n.toSafeInteger=function(e){return e?ar(fa(e),-9007199254740991,f):0===e?e:0},$n.toString=ya,$n.toUpper=function(e){return ya(e).toUpperCase()},$n.trim=function(e,t,n){if((e=ya(e))&&(n||t===i))return Xt(e);if(!e||!(t=ci(t)))return e;var r=mn(e),o=mn(t);return xi(r,nn(r,o),rn(r,o)+1).join("")},$n.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var r=mn(e);return xi(r,0,rn(r,mn(t))+1).join("")},$n.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.replace(se,"");if(!e||!(t=ci(t)))return e;var r=mn(e);return xi(r,nn(r,mn(t))).join("")},$n.truncate=function(e,t){var n=30,r="...";if(ea(t)){var o="separator"in t?t.separator:o;n="length"in t?fa(t.length):n,r="omission"in t?ci(t.omission):r}var s=(e=ya(e)).length;if(ln(e)){var a=mn(e);s=a.length}if(n>=s)return e;var l=n-fn(r);if(l<1)return r;var c=a?xi(a,0,l).join(""):e.slice(0,l);if(o===i)return c+r;if(a&&(l+=c.length-l),oa(o)){if(e.slice(l).search(o)){var u,d=c;for(o.global||(o=Ae(o.source,ya(me.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(e.indexOf(ci(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},$n.unescape=function(e){return(e=ya(e))&&J.test(e)?e.replace(K,vn):e},$n.uniqueId=function(e){var t=++Me;return ya(e)+t},$n.upperCase=Ya,$n.upperFirst=Ja,$n.each=ys,$n.eachRight=bs,$n.first=qo,al($n,function(){var e={};return wr($n,(function(t,n){De.call($n.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),$n.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){$n[e].placeholder=$n})),It(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===i?1:Kt(fa(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(rl)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Rr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Ds(lo(e)))},Wn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(g)},wr(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=$n[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&($n.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof Wn,c=a[0],u=l||Ws(t),d=function(e){var t=o.apply($n,Mt([e],a));return r&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,m=l&&!p;if(!s&&u){t=m?t:new Wn(this);var g=e.apply(t,a);return g.__actions__.push({func:ps,args:[d],thisArg:i}),new zn(g,h)}return f&&m?e.apply(this,a):(g=this.thru(d),f?r?g.value()[0]:g.value():g)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);$n.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ws(i)?i:[],e)}return this[n]((function(n){return t.apply(Ws(n)?n:[],e)}))}})),wr(Wn.prototype,(function(e,t){var n=$n[t];if(n){var r=n.name+"";De.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[$i(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ws(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=bn(t,e+s);break;case"takeRight":e=Kt(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,d=u.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return fi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,b=v.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}f[h++]=g}return f},$n.prototype.at=fs,$n.prototype.chain=function(){return hs(this)},$n.prototype.commit=function(){return new zn(this.value(),this.__chain__)},$n.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},$n.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=Uo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},$n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:ps,args:[es],thisArg:i}),new zn(t,this.__chain__)}return this.thru(es)},$n.prototype.toJSON=$n.prototype.valueOf=$n.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},$n.prototype.first=$n.prototype.head,Qe&&($n.prototype[Qe]=function(){return this}),$n}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},1399:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1506:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5393).A},1676:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5501).A},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,N(S);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var o=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,_=!1,k=null,T=-1,A=5,E=-1;function I(){return!(t.unstable_now()-E<A)}function R(){if(null!==k){var e=t.unstable_now();E=e;var n=!0;try{n=k(!0,e)}finally{n?C():(_=!1,k=null)}}else _=!1}if("function"===typeof b)C=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=R,C=function(){j.postMessage(null)}}else C=function(){v(R,0)};function N(e){k=e,_||(_=!0,C())}function O(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,O(x,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,N(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1763:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(423);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},1783:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1824:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,A:()=>a});var r=n(9950);const i={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function a(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(s.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},1927:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},1942:(e,t,n)=>{e.exports=n(3488)()},1960:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},1976:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2529).A},2004:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:C.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+E(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),I(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+E(a=e[c],c);l+=I(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=o+E(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},N={transition:null},O={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:N,ReactCurrentOwner:C};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},2138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||x(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},2529:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(1399);const o=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},2703:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(5501),i=n(8286);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},2860:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(7483),s=n(3628);const a={borderRadius:4};var l=n(7937);var c=n(505),u=n(8076),d=n(86);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,s.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(p);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},a,f)},m);y.applyStyles=d.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return y=w.reduce(((e,t)=>(0,o.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},2937:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9950),i=n(1824);let o=!0,s=!1;const a=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const p=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,a.start(100,(()=>{s=!1})),t.current=!1,!0)},ref:e}}},3158:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(9950);var r=n(8283),i=n(4414);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},3217:(e,t,n)=>{var r=n(6238),i=n(7542);n(3992),t.qg=r.parse,r.parseParams,r.parseFmtpConfig,r.parsePayloads,r.parseRemoteCandidates,r.parseImageAttributes,r.parseSimulcastStreamList},3235:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(8168),i=n(9950),o=n(8587),s=n(2004),a=n(8465),l=n(1676),c=n(8463),u=n(9254),d=n(1763),h=n(423);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(4414);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.A)(n.color)}`],t[`fontSize${(0,l.A)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,d,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),v=i.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:x,viewBox:S="0 0 24 24"}=n,C=(0,o.A)(n,m),_=i.isValidElement(u)&&"svg"===u.type,k=(0,r.A)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:S,hasSvgAsChild:_}),T={};w||(T.viewBox=S);const A=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.A)(t)}`,`fontSize${(0,l.A)(n)}`]};return(0,a.A)(i,p,r)})(k);return(0,f.jsxs)(g,(0,r.A)({as:v,className:(0,s.A)(A.root,d),focusable:"false",color:b,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},T,C,_&&u.props,{ownerState:k,children:[_?u.props.children:u,x?(0,f.jsx)("title",{children:x}):null]}))}));v.muiName="SvgIcon";const y=v;function b(e,t){function n(n,i){return(0,f.jsx)(y,(0,r.A)({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return n.muiName=y.muiName,i.memo(i.forwardRef(n))}},3488:(e,t,n)=>{"use strict";var r=n(3959);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3539:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>a});var i=n(9950);let o=0;const s=(r||(r=n.t(i,2)))["useId".toString()];function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n(`mui-${o}`))}),[t]),r}(e)}},3628:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,o),c=s(t),u=Object.keys(c);function d(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-a/100}${n})`}function p(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100}${n})`}return(0,i.A)({keys:u,values:c,up:d,down:h,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},3828:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},3876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},3931:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||l(e)}),[])]}},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3992:e=>{var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4436:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(8168),i=n(8587),o=n(8099),s=n(7483),a=n(8076),l=n(505),c=n(2860);var u=n(9269);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function C(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),C=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),_=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),k=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function E(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:w.text.primary}const I=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?` (${n})`:"",JSON.stringify(t.main)));return S(t,"light",s,a),S(t,"dark",l,a),t.contrastText||(t.contrastText=E(t.main)),t},R={dark:x,light:w};return(0,s.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:I({color:c,name:"primary"}),secondary:I({color:C,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:_,name:"error"}),warning:I({color:A,name:"warning"}),info:I({color:k,name:"info"}),success:I({color:T,name:"success"}),grey:h,contrastThreshold:n,getContrastText:E,augmentColor:I,tonalOffset:a},R[t]),l)}const _=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const k={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function A(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=T,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=n,m=(0,i.A)(n,_);const g=a/14,v=f||(e=>e/h*g+"rem"),y=(e,t,n,i,s)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:v(t),lineHeight:n},o===T?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5)+"em"}:{},s,p);var a},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,k),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,k),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function E(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const I=["none",E(0,2,1,-1,0,1,1,0,0,1,3,0),E(0,3,1,-2,0,2,2,0,0,1,5,0),E(0,3,3,-2,0,3,4,0,0,1,8,0),E(0,2,4,-1,0,4,5,0,0,1,10,0),E(0,3,5,-1,0,5,8,0,0,1,14,0),E(0,3,5,-1,0,6,10,0,0,1,18,0),E(0,4,5,-2,0,7,10,1,0,2,16,1),E(0,5,5,-3,0,8,10,1,0,3,14,2),E(0,5,6,-3,0,9,12,1,0,3,16,2),E(0,6,6,-3,0,10,14,1,0,4,18,3),E(0,6,7,-4,0,11,15,1,0,4,20,3),E(0,7,8,-4,0,12,17,2,0,5,22,4),E(0,7,8,-4,0,13,19,2,0,5,24,4),E(0,7,9,-4,0,14,21,2,0,5,26,4),E(0,8,9,-5,0,15,22,2,0,6,28,5),E(0,8,10,-5,0,16,24,2,0,6,30,5),E(0,8,11,-5,0,17,26,2,0,6,32,5),E(0,9,11,-5,0,18,28,2,0,7,34,6),E(0,9,12,-6,0,19,29,2,0,7,36,6),E(0,10,13,-6,0,20,31,3,0,8,38,7),E(0,10,13,-6,0,21,33,3,0,8,40,7),E(0,10,14,-6,0,22,35,3,0,8,42,7),E(0,11,14,-7,0,23,36,3,0,9,44,8),E(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(5361);const P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},j=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.A)(e,j);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,o.A)(18));const p=C(n),f=(0,c.A)(e);let m=(0,s.A)(f,{mixins:(g=f.breakpoints,v=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:p,shadows:I.slice(),typography:A(p,d),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},P)});var g,v;m=(0,s.A)(m,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return m=b.reduce(((e,t)=>(0,s.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},a.A,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},m}const O=N},4501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},4605:function(e,t,n){var r;!function(i,o){"use strict";var s="function",a="undefined",l="object",c="string",u="major",d="model",h="name",p="type",f="vendor",m="version",g="architecture",v="console",y="mobile",b="tablet",w="smarttv",x="wearable",S="embedded",C="Amazon",_="Apple",k="ASUS",T="BlackBerry",A="Browser",E="Chrome",I="Firefox",R="Google",P="Huawei",j="LG",N="Microsoft",O="Motorola",D="Opera",M="Samsung",L="Sharp",F="Sony",U="Xiaomi",$="Zebra",V="Facebook",B="Chromium OS",z="Mac OS",W=" Browser",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},q=function(e,t){return typeof e===c&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},Y=function(e,t){for(var n,r,i,a,c,u,d=0;d<t.length&&!c;){var h=t[d],p=t[d+1];for(n=r=0;n<h.length&&!c&&h[n];)if(c=h[n++].exec(e))for(i=0;i<p.length;i++)u=c[++r],typeof(a=p[i])===l&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u||o;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(q(t[n][r],e))return"?"===n?o:n}else if(q(t[n],e))return"?"===n?o:n;return t.hasOwnProperty("*")?t["*"]:e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,m],[/opios[\/ ]+([\w\.]+)/i],[m,[h,D+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[h,D+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[h,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[m,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[h,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[h,"Smart Lenovo "+A]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+A],m],[/\bfocus\/([\w\.]+)/i],[m,[h,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[h,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[h,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[h,"MIUI"+W]],[/fxios\/([\w\.-]+)/i],[m,[h,I]],[/\bqihoobrowser\/?([\w\.]*)/i],[m,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+W],m],[/samsungbrowser\/([\w\.]+)/i],[m,[h,M+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[m,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,m],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[m,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,V],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[h,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,E+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[h,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[m,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],m],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[h,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,M],[p,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,M],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,_],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,_],[p,b]],[/(macintosh);/i],[d,[f,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,L],[p,y]],[/(?:honor)([-\w ]+)[;\)]/i],[d,[f,"Honor"],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,P],[p,b]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,P],[p,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[f,U],[p,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,U],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[p,y]],[/\b(opd2\d{3}a?) bui/i],[d,[f,"OPPO"],[p,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[p,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,O],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,O],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,j],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,j],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[p,y]],[/(pixel c)\b/i],[d,[f,R],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,R],[p,y]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,F],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,F],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,C],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,C],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,T],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,k],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,k],[p,y]],[/(nexus 9)/i],[d,[f,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[p,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[f,"TCL"],[p,b]],[/(itel) ((\w+))/i],[[f,G],d,[p,J,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[p,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[p,y]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[f,"Energizer"],[p,y]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[f,"Cat"],[p,y]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[f,"Smartfren"],[p,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[f,"Nothing"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[p,y]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[p,b]],[/(surface duo)/i],[d,[f,N],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[p,y]],[/(u304aa)/i],[d,[f,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[p,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[p,b]],[/\b(k88) b/i],[d,[f,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[p,b]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[p,y]],[/\b(ph-1) /i],[d,[f,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[f,d,[p,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,N],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,$],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,$],[p,y]],[/smart-tv.+(samsung)/i],[f,[p,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,M],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,j],[p,w]],[/(apple) ?tv/i],[f,[d,_+" TV"],[p,w]],[/crkey/i],[[d,E+"cast"],[f,R],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,C],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,L],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,F],[p,w]],[/(mitv-\w{5}) bui/i],[d,[f,U],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,K],[d,K],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[p,v]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[d,[f,F],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,N],[p,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[f,M],[p,x]],[/((pebble))app/i],[f,d,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,_],[p,x]],[/droid.+; (glass) \d/i],[d,[f,R],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,$],[p,x]],[/droid.+; (glass) \d/i],[d,[f,R],[p,x]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,d,[p,x]],[/; (quest( \d| pro)?)/i],[d,[f,V],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,S]],[/(aeobc)\b/i],[d,[f,C],[p,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,m],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[m,J,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,J,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,z],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,m],[/\(bb(10);/i],[m,[h,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[h,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[h,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,B],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,m],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,m]]},Z=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==a&&i.navigator?i.navigator:o,r=e||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:o,w=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(X,t):X,x=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[h]=o,t[m]=o,Y.call(t,r,w.browser),t[u]=typeof(e=t[m])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:o,x&&n&&n.brave&&typeof n.brave.isBrave==s&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[g]=o,Y.call(e,r,w.cpu),e},this.getDevice=function(){var e={};return e[f]=o,e[d]=o,e[p]=o,Y.call(e,r,w.device),x&&!e[p]&&v&&v.mobile&&(e[p]=y),x&&"Macintosh"==e[d]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[p]=b),e},this.getEngine=function(){var e={};return e[h]=o,e[m]=o,Y.call(e,r,w.engine),e},this.getOS=function(){var e={};return e[h]=o,e[m]=o,Y.call(e,r,w.os),x&&!e[h]&&v&&v.platform&&"Unknown"!=v.platform&&(e[h]=v.platform.replace(/chrome os/i,B).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>500?K(e,500):e,this},this.setUA(r),this};Z.VERSION="1.0.40",Z.BROWSER=H([h,m,u]),Z.CPU=H([g]),Z.DEVICE=H([d,f,p,v,y,w,b,x,S]),Z.ENGINE=Z.OS=H([h,m]),typeof t!==a?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===o||(e.exports=r):typeof i!==a&&(i.UAParser=Z);var ee=typeof i!==a&&(i.jQuery||i.Zepto);if(ee&&!ee.ua){var te=new Z;ee.ua=te.getResult(),ee.ua.get=function(){return te.getUA()},ee.ua.set=function(e){te.setUA(e);var t=te.getResult();for(var n in t)ee.ua[n]=t[n]}}}("object"===typeof window?window:this)},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],s=o[1],a=o[2];if(!a)return n(e,t);switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(s,t)).replace("{{time}}",r(a,t))}};t.default=i,e.exports=t.default},4901:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(!o(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5329:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(9950)),i=n(116);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5361:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>a});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},s,e.easing),n=(0,i.A)({},a,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:a=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof s?s:l(s)} ${a} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},5393:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),i=n(5587);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},5501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8099);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},5511:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},5537:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},a=t[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.A)({},a),Object.keys(s).forEach((e=>{n[o][e]=i(s[e],a[e])}))):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=e[o])})),n}},5587:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},6171:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,b:()=>a});var r=n(9950),i=n(5537),o=n(4414);const s=r.createContext(void 0);function a(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?(0,i.A)(o.defaultProps,r):o.styleOverrides||o.variants?r:(0,i.A)(o,r)}({props:t,name:n,theme:{components:r.useContext(s)}})}const l=function(e){let{value:t,children:n}=e;return(0,o.jsx)(s.Provider,{value:t,children:n})}},6206:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7483);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},6238:(e,t,n)=>{var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(3992),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(o[t]||[]).length;a+=1){var l=o[t][a];if(l.reg.test(s))return i(l,r,s)}})),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},6319:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},6477:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(9950),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},6747:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},6879:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case a:return e;default:return t}}case r:return t}}}t.vM=c,t.lD=h},6907:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},7034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o,createSvgIcon:()=>s.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m.A,unsupportedProp:()=>g,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>b.A,useIsFocusVisible:()=>w.A});var r=n(4501),i=n(1676);const o=n(5511).A;var s=n(3235),a=n(1209);const l=function(e,t){return()=>null};var c=n(3828),u=n(7402),d=n(827);const h=function(e,t){return()=>null};const p=n(5587).A;var f=n(9044),m=n(1014);const g=function(e,t,n,r,i){return null};var v=n(8733),y=n(1976),b=n(1506),w=n(2937);const x={configure:e=>{r.A.configure(e)}}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7295:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:p,skipVariantsResolver:m,skipSx:w,overridesResolver:x=y(g(p))}=c,S=(0,o.default)(c,h),C=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,_=w||!1;let k=f;"Root"===p||"root"===p?k=r:p?k=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(k=void 0);const T=(0,s.default)(e,(0,i.default)({shouldForwardProp:k,label:undefined},S)),A=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,E=function(r){let o=A(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(A):[];d&&x&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=b(o,(0,i.default)({},e,{theme:r}))})),x(e,s)})),d&&!C&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),_||c.push(u);const h=c.length-a.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=T(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return T.withConfig&&(E.withConfig=T.withConfig),E}};var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(116)),a=n(7785),l=(r(n(304)),r(n(8399)),r(n(9904))),c=r(n(8807));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},7370:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>d,c:()=>f,h:()=>h,w:()=>u});var r=n(9950),i=n(8603),o=n(1783),s=n(9015),a=n(6477),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},d=r.createContext({});var h={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,a.s)((function(){return(0,o.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var a=e[p],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,s.J)(l,void 0,r.useContext(d));c+=t.key+"-"+u.name;var f={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),r.createElement(r.Fragment,null,r.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof a}),r.createElement(a,f))}))},7402:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6907).A},7483:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,Q:()=>o});var r=n(8168),i=n(9950);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(i.isValidElement(e)||!o(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((r=>{i.isValidElement(t[r])?l[r]=t[r]:o(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&o(e[r])?l[r]=a(e[r],t[r],n):n.clone?l[r]=o(t[r])?s(t[r]):t[r]:l[r]=t[r]})),l}},7542:(e,t,n)=>{var r=n(3992),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},s=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var s=t.names[i];t.name?r.push(n[t.name][s]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||a,i=t.innerOrder||l,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))})),e.media.forEach((function(e){o.push(s("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},7550:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},7785:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(7483)},7923:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},7937:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>b});var r=n(8286),i=n(2703),o=n(6206);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h},8076:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(7937),i=n(2703),o=n(6206);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(8286);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),x=c("outlineColor"),S=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};S.propTypes={},S.filterProps=["borderRadius"];s(u,d,h,p,f,m,g,v,y,b,S,w,x);const C=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};C.propTypes={},C.filterProps=["gap"];const _=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};_.propTypes={},_.filterProps=["columnGap"];const k=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};k.propTypes={},k.filterProps=["rowGap"];s(C,_,k,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function T(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:T}));function A(e){return e<=1&&0!==e?100*e+"%":e}const E=(0,i.Ay)({prop:"width",transform:A}),I=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:A(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};I.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:A}),P=(0,i.Ay)({prop:"height",transform:A}),j=(0,i.Ay)({prop:"maxHeight",transform:A}),N=(0,i.Ay)({prop:"minHeight",transform:A}),O=((0,i.Ay)({prop:"size",cssProperty:"width",transform:A}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:A}),s(E,I,R,P,j,N,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:S},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:C},rowGap:{style:k},columnGap:{style:_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:A},maxWidth:{style:I},minWidth:{transform:A},height:{transform:A},maxHeight:{transform:A},minHeight:{transform:A},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8099:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8283:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>d,mL:()=>c});var r=n(7370),i=n(9950),o=n(1783),s=n(6477),a=n(9015),l=(n(8603),n(3876),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,s=new Array(o);s[0]=r.E,s[1]=(0,r.c)(e,t);for(var a=2;a<o;a++)s[a]=n[a];return i.createElement.apply(null,s)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)((function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}function d(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8286:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>s,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(7483);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),s)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function $(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case k:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,_e=null;function ke(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Te(e){Ce?_e?_e.push(e):_e=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=_e;if(_e=Ce=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ee(e,t,n)}finally{Re=!1,(null!==Ce||null!==_e)&&(Ie(),Ae())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Ne=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Le=null,Fe=!1,Ue=null,$e={onError:function(e){Me=!0,Le=e}};function Ve(e,t,n,r,i,o,s,a,l){Me=!1,Le=null,De.apply($e,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Qe=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Ct,_t,kt,Tt=!1,At=[],Et=null,It=null,Rt=null,Pt=new Map,jt=new Map,Nt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void kt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function $t(){Tt=!1,null!==Et&&Ft(Et)&&(Et=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),jt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Bt(e){function t(t){return Vt(t,e)}if(0<At.length){Vt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Vt(Et,e),null!==It&&Vt(It,e),null!==Rt&&Vt(Rt,e),Pt.forEach(t),jt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,zt.transition=o}}function qt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,zt.transition=o}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Mt(Et,e,t,n,r,i),!0;case"dragenter":return It=Mt(It,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,jt.set(o,Mt(jt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),vn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return _n}var Tn=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Tn),En=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Rn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=on(Pn),Nn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function $n(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},_r={};function kr(e){if(Cr[e])return Cr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Cr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=kr("animationend"),Ar=kr("animationiteration"),Er=kr("animationstart"),Ir=kr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Rr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Or=Pr[Nr];jr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}jr(Tr,"onAnimationEnd"),jr(Ar,"onAnimationIteration"),jr(Er,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Le;Me=!1,Le=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||$r(t,!1,e),$r(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,$r("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=xe(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case Ar:case Er:l=vn;break;case Ir:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=je(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wi(l),p=null==c?a:wi(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Wn(a))if(Qn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?$n(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Xt="value"in(Qt=i)?Qt.value:Qt.textContent,Bn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&$n(e,t)?(e=en(),Zt=Xt=Qt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=je(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=je(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=je(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var Si=[],Ci=-1;function _i(e){return{current:e}}function ki(e){0>Ci||(e.current=Si[Ci],Si[Ci]=null,Ci--)}function Ti(e,t){Ci++,Si[Ci]=e.current,e.current=t}var Ai={},Ei=_i(Ai),Ii=_i(!1),Ri=Ai;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){ki(Ii),ki(Ei)}function Oi(e,t,n){if(Ei.current!==Ai)throw Error(o(168));Ti(Ei,t),Ti(Ii,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return L({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ri=Ei.current,Ti(Ei,e),Ti(Ii,Ii.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,ki(Ii),ki(Ei),Ti(Ei,e)):ki(Ii),Ti(Ii,n)}var Fi=null,Ui=!1,$i=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!$i&&null!==Fi){$i=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,$i=!1}}return null}var zi=[],Wi=0,Hi=null,qi=0,Gi=[],Ki=0,Yi=null,Ji=1,Qi="";function Xi(e,t){zi[Wi++]=qi,zi[Wi++]=Hi,Hi=e,qi=t}function Zi(e,t,n){Gi[Ki++]=Ji,Gi[Ki++]=Qi,Gi[Ki++]=Yi,Yi=e;var r=Ji;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Qi=o+e}else Ji=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=zi[--Wi],zi[Wi]=null,qi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null,Ji=Gi[--Ki],Gi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===j&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case j:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),io&&Xi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Xi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Xi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return io&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===C){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===C?((o=Dc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Oc(s.type,s.key,s.props,null,r.mode,l)).ref=vo(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(s,r.mode,l)).return=r,r=o}return a(r);case j:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var xo=wo(!0),So=wo(!1),Co=_i(null),_o=null,ko=null,To=null;function Ao(){To=ko=_o=null}function Eo(e){var t=Co.current;ki(Co),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){_o=e,To=ko=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===ko){if(null===_o)throw Error(o(308));ko=e,_o.dependencies={lanes:0,firstContext:e}}else ko=ko.next=e;return t}var jo=null;function No(e){null===jo?jo=[e]:jo.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,No(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $o(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return null===(i=r.interleaved)?(t.next=t,No(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=s,e.lanes=s,e.memoizedState=d}}function Wo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},qo=_i(Ho),Go=_i(Ho),Ko=_i(Ho);function Yo(e){if(e===Ho)throw Error(o(174));return e}function Jo(e,t){switch(Ti(Ko,t),Ti(Go,e),Ti(qo,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(qo),Ti(qo,t)}function Qo(){ki(qo),ki(Go),ki(Ko)}function Xo(e){Yo(Ko.current);var t=Yo(qo.current),n=le(t,e.type);t!==n&&(Ti(Go,e),Ti(qo,n))}function Zo(e){Go.current===e&&(ki(qo),ki(Go))}var es=_i(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=w.ReactCurrentDispatcher,os=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Xs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Ml|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ss(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(){}function _s(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ms(As.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ps(9,Ts.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&ss)||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ts(e,t,n,r){t.value=n,t.getSnapshot=r,Es(t)&&Is(e)}function As(e,t,n){return n((function(){Es(t)&&Is(e)}))}function Es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Is(e){var t=Do(e,1);null!==t&&nc(t,e,1,-1)}function Rs(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return bs().memoizedState}function Ns(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ds(e,t){return Ns(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Ls(e,t){return Os(4,2,e,t)}function Fs(e,t){return Os(4,4,e,t)}function Us(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $s(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,Us.bind(null,t,e),n)}function Vs(){}function Bs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Ml|=n,e.baseState=!0),t)}function Hs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function qs(){return bs().memoizedState}function Gs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Js(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Qs(n,t,r)}}function Ks(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Js(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,No(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Qs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Js(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xs={readContext:Po,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4194308,4,Us.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gs.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Rs,useDebugValue:Vs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=Hs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&ss)||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(As.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,Ts.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Il.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:zs,useReducer:xs,useRef:js,useState:function(){return xs(ws)},useDebugValue:Vs,useDeferredValue:function(e){return Ws(bs(),ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:_s,useId:qs,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:$s,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:zs,useReducer:Ss,useRef:js,useState:function(){return Ss(ws)},useDebugValue:Vs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Ws(t,ls.memoizedState,e)},useTransition:function(){return[Ss(ws)[0],bs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:_s,useId:qs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$o(e,i,r))&&(nc(t,e,r,n),Vo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=ji(t)?Ri:Ei.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=ji(t)?Ri:Ei.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),da(0,t)},n}function fa(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,$o(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?So(t,null,n,r):xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||jc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Nc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Nl,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Nl,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Nl,jl),jl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Nl,jl),jl|=r;return wa(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=ji(n)?Ri:Ei.current;return o=Pi(t,o),Ro(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Aa(e,t,n,r,i){if(ji(n)){var o=!0;Mi(t)}else o=!1;if(Ro(t,i),null===t.stateNode)za(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=ji(n)?Ri:Ei.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Mo=!1;var h=t.memoizedState;s.state=h,zo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ii.current||Mo?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Mo||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=ji(n)?Ri:Ei.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Mo=!1,h=t.memoizedState,s.state=h,zo(t,r,s,i);var f=t.memoizedState;a!==d||h!==f||Ii.current||Mo?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(c=Mo||oa(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ea(e,t,n,r,o,i)}function Ea(e,t,n,r,i,o){ka(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Wa(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ia(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Jo(e,t.containerInfo)}function Ra(e,t,n,r,i){return fo(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,ja,Na,Oa,Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(s=Dc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Da,s);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Il)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Do(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Ki++]=Ji,Gi[Ki++]=Qi,Gi[Ki++]=Yi,Ji=e.id,Qi=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Nc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Nc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $a(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n,t);else if(19===e.tag)$a(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return ji(t.type)&&Ni(),qa(t),null;case 3:return r=t.stateNode,Qo(),ki(Ii),ki(Ei),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),ja(e,t),qa(t),null;case 5:Zo(t);var i=Yo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qa(t),null}if(e=Yo(qo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),Z(r,s,!0);break;case"textarea":q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Ko.current),Yo(qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qa(t),null;case 13:if(ki(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return Qo(),ja(e,t),null===e&&Br(t.stateNode.containerInfo),qa(t),null;case 10:return Eo(t.type._context),qa(t),null;case 19:if(ki(es),null===(s=t.memoizedState))return qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ha(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ha(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Bl&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return qa(t),null}else 2*Qe()-s.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Ti(es,r?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return ji(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),ki(Ii),ki(Ei),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(ki(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(es),null;case 4:return Qo(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ja=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(qo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_c(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,hl(e,t,n),Ja=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){_c(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){_c(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Qe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||d,ml(t,e),Ja=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Xa=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){_c(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=s,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(s=Xa).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Xa=l):Sl(i);for(;null!==o;)Xa=o,bl(o,t,n),o=o.sibling;Xa=i,Ya=a,Ja=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&il(t)}catch(p){_c(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function xl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Sl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var o=t.return;try{il(t)}catch(l){_c(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){_c(t,s,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Cl,_l=Math.ceil,kl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Al=w.ReactCurrentBatchConfig,El=0,Il=null,Rl=null,Pl=0,jl=0,Nl=_i(0),Ol=0,Dl=null,Ml=0,Ll=0,Fl=0,Ul=null,$l=null,Vl=0,Bl=1/0,zl=null,Wl=!1,Hl=null,ql=null,Gl=!1,Kl=null,Yl=0,Jl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Ql=null,Error(o(185));vt(e,n,r),0!==(2&El)&&e===Il||(e===Il&&(0===(2&El)&&(Ll|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Bl=Qe()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Il?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),si((function(){0===(6&El)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=El;El|=2;var s=fc();for(Il===e&&Pl===t||(zl=null,Bl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ao(),kl.current=s,El=i,null!==Rl?t=0:(Il=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=oc(e,s))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,$l,zl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,$l,zl),t);break}xc(e,$l,zl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,$l,zl),r);break}xc(e,$l,zl);break;default:throw Error(o(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=$l,$l=n,null!==t&&sc(t)),e}function sc(e){null===$l?$l=e:$l.push.apply($l,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(o(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,$l,zl),rc(e,Qe()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Bl=Qe()+500,Ui&&Bi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&El)&&Sc();var t=El;El|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(El=t))&&Bi()}}function dc(){jl=Nl.current,ki(Nl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Qo(),ki(Ii),ki(Ei),rs();break;case 5:Zo(r);break;case 4:Qo();break;case 13:case 19:ki(es);break;case 10:Eo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Nc(e.current,null),Pl=jl=t,Ol=0,Dl=null,Fl=Ll=Ml=0,$l=Ul=null,null!==jo){for(t=0;t<jo.length;t++)if(null!==(r=(n=jo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}jo=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Ao(),is.current=Xs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Tl.current=null,null===n||null===n.return){Ol=1,Dl=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Xs,null===e?Xs:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Ml)&&0===(268435455&Ll)||ac(Il,Pl)}function gc(e,t){var n=El;El|=2;var r=fc();for(Il===e&&Pl===t||(zl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Ao(),El=n,kl.current=r,null!==Rl)throw Error(o(261));return Il=null,Pl=0,Ol}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Cl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,jl)))return void(Rl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ol=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ol&&(Ol=5)}function xc(e,t,n){var r=bt,i=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Kl);if(0!==(6&El))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Il&&(Rl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Al.transition,Al.transition=null;var a=bt;bt=1;var l=El;El|=4,Tl.current=null,function(e,t){if(ei=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),El=l,bt=a,Al.transition=s}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),s=e.pendingLanes,0===s&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),s=e.pendingLanes,0!==(1&s)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,Bi()}(e,t,n,r)}finally{Al.transition=i,bt=r}return null}function Sc(){if(null!==Kl){var e=wt(Yl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&El))throw Error(o(331));var i=El;for(El|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,f=d.return;if(ol(d),d===u){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var b=e.current;for(Xa=b;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){_c(l,l.return,S)}if(l===a){Xa=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xa=x;break e}Xa=l.return}}if(El=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function Cc(e,t,n){e=$o(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=$o(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Qe()-Vl?hc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Do(e,t))&&(vt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)jc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Dc(n.children,i,s,t);case _:a=8,i|=8;break;case k:return(e=Pc(12,n,t,2|i)).elementType=k,e.lanes=s,e;case I:return(e=Pc(13,n,t,i)).elementType=I,e.lanes=s,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=s,e;case N:return Mc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case A:a=9;break e;case E:a=11;break e;case P:a=14;break e;case j:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,i,o,s,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Vc(e){if(!e)return Ai;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ji(n))return Di(e,n,t)}return t}function Bc(e,t,n,r,i,o,s,a,l){return(e=$c(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,$o(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$o(i,t,s))&&(nc(e,i,s,o),Vo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ia(t),fo();break;case 5:Xo(t);break;case 1:ji(t.type)&&Mi(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Co,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ti(es,1&es.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;za(e,t),e=t.pendingProps;var i=Pi(t,Ei.current);Ro(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ea(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(za(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ia(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Fo(e,t),zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=So(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),ka(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(Co,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ii.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Uo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Io(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Io(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Po(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Sa(e,t,r,i=na(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),za(e,t),t.tag=1,ji(r)?(e=!0,Mi(t)):e=!1,Ro(t,n),sa(t,r,i),la(t,r,i,n),Ea(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return _a(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}zc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[fi]=s.current,Br(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){zc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));zc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){zc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&El)&&(Bl=Qe()+500,Bi()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},St=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=Do(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},_t=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));G(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,Ae,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8399:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(6879);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t=`${e}`.match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?`${n}(${r})`:n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.vM:return a(e,e.render,"ForwardRef");case r.lD:return a(e,e.type,"memo");default:return}}}},8463:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(9950);var r=n(6171);n(4414);function i(e){return(0,r.b)(e)}},8465:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},8603:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function x(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function S(e,t){return s(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function C(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function _(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function k(){return u(w,y)}function T(){return y}function A(e,t){return d(w,e,t)}function E(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return m=g=1,v=h(w=e),y=0,[]}function R(e){return w="",e}function P(e){return a(A(y-1,O(91===e?e+2:40===e?e+1:e)))}function j(e){for(;(b=k())&&b<33;)_();return E(e)>2||E(b)>3?"":" "}function N(e,t){for(;--t&&_()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return A(e,T()+(t<6&&32==k()&&32==_()))}function O(e){for(;_();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&O(b);break;case 40:41===e&&O(e);break;case 92:_()}return y}function D(e,t){for(;_()&&e+b!==57&&(e+b!==84||47!==k()););return"/*"+A(t,y-1)+"*"+o(47===e?e:_())}function M(e){for(;!E(k());)_();return A(e,y)}var L="-ms-",F="-moz-",U="-webkit-",$="comm",V="rule",B="decl",z="@keyframes";function W(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case $:return"";case z:return e.return=e.value+"{"+W(e.children,r)+"}";case V:e.value=e.props.join(",")}return h(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return R(G("",null,null,null,[""],e=I(e),0,[0],e))}function G(e,t,n,r,i,s,a,d,p){for(var m=0,g=0,v=a,y=0,b=0,w=0,x=1,S=1,A=1,E=0,I="",R=i,O=s,L=r,F=I;S;)switch(w=E,E=_()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(P(E),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:F+=P(E);break;case 9:case 10:case 13:case 32:F+=j(w);break;case 92:F+=N(T()-1,7);continue;case 47:switch(k()){case 42:case 47:f(Y(D(_(),T()),t,n),p);break;default:F+="/"}break;case 123*x:d[m++]=h(F)*A;case 125*x:case 59:case 0:switch(E){case 0:case 125:S=0;case 59+g:-1==A&&(F=l(F,/\f/g,"")),b>0&&h(F)-v&&f(b>32?J(F+";",r,n,v-1):J(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(f(L=K(F,t,n,m,g,i,d,I,R=[],O=[],v),s),123===E)if(0===g)G(F,t,L,L,R,s,v,d,O);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:G(e,L,L,r&&f(K(e,L,L,0,0,i,d,I,i,R=[],v),O),i,O,v,d,r?R:O);break;default:G(F,L,L,L,[""],O,0,d,O)}}m=g=b=0,x=A=1,I=F="",v=a;break;case 58:v=1+h(F),b=w;default:if(x<1)if(123==E)--x;else if(125==E&&0==x++&&125==C())continue;switch(F+=o(E),E*x){case 38:A=g>0?1:(F+="\f",-1);break;case 44:d[m++]=(h(F)-1)*A,A=1;break;case 64:45===k()&&(F+=P(_())),y=k(),g=v=h(I=F+=M(T())),E++;break;case 45:45===w&&2==h(F)&&(x=0)}}return s}function K(e,t,n,r,o,s,c,u,h,f,m){for(var g=o-1,v=0===o?s:[""],y=p(v),b=0,w=0,S=0;b<r;++b)for(var C=0,_=d(e,g+1,g=i(w=c[b])),k=e;C<y;++C)(k=a(w>0?v[C]+" "+_:l(_,/&\f/g,v[C])))&&(h[S++]=k);return x(e,t,n,0===o?V:u,h,f,m)}function Y(e,t,n){return x(e,t,n,$,o(b),d(e,2,-2),0)}function J(e,t,n,r){return x(e,t,n,B,d(e,0,r),d(e,r+1,-1),r)}var Q=function(e,t,n){for(var r=0,i=0;r=i,i=k(),38===r&&12===i&&(t[n]=1),!E(i);)_();return A(e,y)},X=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(E(r)){case 0:38===r&&12===k()&&(t[n]=1),e[n]+=Q(y-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===k()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=_());return e}(I(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],o=X(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+F+e+L+e+e;case 6828:case 4268:return U+e+L+e+e;case 6165:return U+e+L+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+L+"flex-$1$2")+e;case 5443:return U+e+L+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+L+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+L+l(e,"shrink","negative")+e;case 5292:return U+e+L+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+L+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+L+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+L+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+L+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+L+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+L+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case z:return W([S(e,{value:l(e.value,"@","@"+U)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([S(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,L+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,o,s=e.stylisPlugins||re,a={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,d=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(s,d));o=function(e,t,n,r){c=n,W(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(l),f}},8635:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6907);function i(e){return(0,r.A)(e).defaultView||window}},8733:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3931).A},8807:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(505),i=n(237),o=n(8076)},9015:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(7923),o=!1,s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(s,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(a,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)f={name:a.name,styles:a.styles,next:f},a=a.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var s in n){var a=n[s];if("object"!==typeof a){var l=a;null!=t&&void 0!==t[l]?r+=s+"{"+t[l]+"}":c(l)&&(r+=u(s)+":"+d(s,l)+";")}else{if("NO_COMPONENT_SELECTOR"===s&&o)throw new Error(h);if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var f=p(e,t,a);switch(s){case"animation":case"animationName":r+=u(s)+":"+f+";";break;default:r+=s+"{"+f+"}"}}else for(var m=0;m<a.length;m++)c(a[m])&&(r+=u(s)+":"+d(s,a[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";f=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=p(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++){if(i+=p(n,t,e[s]),r)i+=o[s]}m.lastIndex=0;for(var a,l="";null!==(a=m.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:f}}},9044:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1399).A},9223:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},9234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(8099)},9254:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});var r=n(7295),i=n(195),o=n(7550),s=n(9608);const a=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:s.A})},9269:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.tL=g,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(9234)),o=r(n(9344));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):m(e,t)}},9344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6747)},9526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7034)},9569:e=>{"use strict";const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===a&&(l=c[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&l&&(t.rtx={ssrc:l}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t},9608:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1960);const i=e=>(0,r.A)(e)&&"classes"!==e},9825:()=>{},9904:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(2860),i=n(3628),o=n(86)},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ef812448.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="side-eye:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkside_eye=self.webpackChunkside_eye||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>jH,Encoder:()=>RH,PacketType:()=>IH,protocol:()=>EH});var t={};n.r(t),n.d(t,{fixNegotiationNeeded:()=>Nq,shimAddTrackRemoveTrack:()=>Pq,shimAddTrackRemoveTrackWithNative:()=>Rq,shimGetDisplayMedia:()=>_q,shimGetSendersWithDtmf:()=>Aq,shimGetStats:()=>Eq,shimGetUserMedia:()=>Cq,shimMediaStream:()=>kq,shimOnTrack:()=>Tq,shimPeerConnection:()=>jq,shimSenderReceiverGetStats:()=>Iq});var r={};n.r(r),n.d(r,{shimAddTransceiver:()=>Bq,shimCreateAnswer:()=>Hq,shimCreateOffer:()=>Wq,shimGetDisplayMedia:()=>Dq,shimGetParameters:()=>zq,shimGetUserMedia:()=>Oq,shimOnTrack:()=>Mq,shimPeerConnection:()=>Lq,shimRTCDataChannel:()=>Vq,shimReceiverGetStats:()=>Uq,shimRemoveStream:()=>$q,shimSenderGetStats:()=>Fq});var i={};n.r(i),n.d(i,{shimAudioContext:()=>eG,shimCallbacksAPI:()=>Kq,shimConstraints:()=>Jq,shimCreateOfferLegacy:()=>Zq,shimGetUserMedia:()=>Yq,shimLocalStreamsAPI:()=>qq,shimRTCIceServerUrls:()=>Qq,shimRemoteStreamsAPI:()=>Gq,shimTrackEventTransceiver:()=>Xq});var o={};n.r(o),n.d(o,{removeExtmapAllowMixed:()=>lG,shimAddIceCandidateNullOrEmpty:()=>cG,shimConnectionState:()=>aG,shimMaxMessageSize:()=>oG,shimParameterlessSetLocalDescription:()=>uG,shimRTCIceCandidate:()=>rG,shimRTCIceCandidateRelayProtocol:()=>iG,shimSendThrowTypeError:()=>sG});var s={};n.r(s),n.d(s,{hasBrowserEnv:()=>gY,hasStandardBrowserEnv:()=>yY,hasStandardBrowserWebWorkerEnv:()=>bY,navigator:()=>vY,origin:()=>wY});var a,l=n(9950),c=n.t(l,2),u=n(1352);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const h="popstate";function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ZC){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function v(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=a.Pop,c=null,u=f();function f(){return(s.state||{idx:null}).idx}function y(){l=a.Pop;let e=f(),t=null==e?null:e-u;u=e,c&&c({action:l,location:w.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:v(e);return n=n.replace(/ $/,"%20"),p(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,s.replaceState(d({},s.state,{idx:u}),""));let w={get action(){return l},get location(){return e(i,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(h,y),c=e,()=>{i.removeEventListener(h,y),c=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=a.Push;let r=g(w.location,e,t);n&&n(r,e),u=f()+1;let d=m(r,u),h=w.createHref(r);try{s.pushState(d,"",h)}catch(Nb){if(Nb instanceof DOMException&&"DataCloneError"===Nb.name)throw Nb;i.location.assign(h)}o&&c&&c({action:l,location:w.location,delta:1})},replace:function(e,t){l=a.Replace;let r=g(w.location,e,t);n&&n(r,e),u=f();let i=m(r,u),d=w.createHref(r);s.replaceState(i,"",d),o&&c&&c({action:l,location:w.location,delta:0})},go:e=>s.go(e)};return w}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),S(e,t,n,!1)}function S(e,t,n,r){let i=M(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let o=C(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=D(i);s=N(o[a],e,r)}return s}function C(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(p(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=V([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),C(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:j(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=_(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,T=3,A=2,E=1,I=10,R=-2,P=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(P)&&(r+=R),t&&(r+=A),n.filter((e=>!P(e))).reduce(((e,t)=>e+(k.test(t)?T:""===t?E:I)),r)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:V([o,u.pathname]),pathnameBase:B(V([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=V([o,u.pathnameBase]))}return s}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Nb){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Nb+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=F(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function $(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=y(e):(i=d({},e),p(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),p(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),p(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:z(r),hash:W(i)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],G=(new Set(q),["get",...q]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const Y=l.createContext(null);const J=l.createContext(null);const Q=l.createContext(null);const X=l.createContext(null);const Z=l.createContext({outlet:null,matches:[],isDataRoute:!1});const ee=l.createContext(null);function te(){return null!=l.useContext(X)}function ne(){return te()||p(!1),l.useContext(X).location}function re(e){l.useContext(Q).static||l.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=l.useContext(Z);return e?function(){let{router:e}=me(pe.UseNavigateStable),t=ve(fe.UseNavigateStable),n=l.useRef(!1);return re((()=>{n.current=!0})),l.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t])}():function(){te()||p(!1);let e=l.useContext(Y),{basename:t,future:n,navigator:r}=l.useContext(Q),{matches:i}=l.useContext(Z),{pathname:o}=ne(),s=JSON.stringify(U(i,n.v7_relativeSplatPath)),a=l.useRef(!1);return re((()=>{a.current=!0})),l.useCallback((function(n,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof n)return void r.go(n);let l=$(n,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:V([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[t,r,s,o,e])}()}function oe(){let{matches:e}=l.useContext(Z),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=l.useContext(Q),{matches:i}=l.useContext(Z),{pathname:o}=ne(),s=JSON.stringify(U(i,r.v7_relativeSplatPath));return l.useMemo((()=>$(e,JSON.parse(s),o,"path"===n)),[e,s,o,n])}function ae(e,t,n,r){te()||p(!1);let{navigator:i,static:o}=l.useContext(Q),{matches:s}=l.useContext(Z),c=s[s.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,f=ne();if(t){var m;let e="string"===typeof t?y(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||p(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!o&&n&&n.matches&&n.matches.length>0?n.matches:x(e,{pathname:v});let w=he(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,r);return t&&w?l.createElement(X.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:a.Pop}},w):w}function le(){let e=function(){var e;let t=l.useContext(ee),n=ge(fe.UseRouteError),r=ve(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:i},n):null,null)}const ce=l.createElement(le,null);class ue extends l.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?l.createElement(Z.Provider,{value:this.props.routeContext},l.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,i=l.useContext(Y);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(Z.Provider,{value:t},r)}function he(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=s.findIndex((e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id])));e>=0||p(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let l=0;l<s.length;l++){let e=s[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=l),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,r,i)=>{let o,d=!1,h=null,p=null;var f;n&&(o=a&&r.route.id?a[r.route.id]:void 0,h=r.route.errorElement||ce,c&&(u<0&&0===i?(f="route-fallback",!1||ye[f]||(ye[f]=!0),d=!0,p=null):u===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,i+1)),g=()=>{let t;return t=o?h:d?p:r.route.Component?l.createElement(r.route.Component,null):r.route.element?r.route.element:e,l.createElement(de,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?l.createElement(ue,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function me(e){let t=l.useContext(Y);return t||p(!1),t}function ge(e){let t=l.useContext(J);return t||p(!1),t}function ve(e){let t=function(){let e=l.useContext(Z);return e||p(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||p(!1),n.route.id}const ye={};function be(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}c.startTransition;function we(e){let{to:t,replace:n,state:r,relative:i}=e;te()||p(!1);let{future:o,static:s}=l.useContext(Q),{matches:a}=l.useContext(Z),{pathname:c}=ne(),u=ie(),d=$(t,U(a,o.v7_relativeSplatPath),c,"path"===i),h=JSON.stringify(d);return l.useEffect((()=>u(JSON.parse(h),{replace:n,state:r,relative:i})),[u,h,i,n,r]),null}function xe(e){p(!1)}function Se(e){let{basename:t="/",children:n=null,location:r,navigationType:i=a.Pop,navigator:o,static:s=!1,future:c}=e;te()&&p(!1);let u=t.replace(/^\/*/,"/"),d=l.useMemo((()=>({basename:u,navigator:o,static:s,future:K({v7_relativeSplatPath:!1},c)})),[u,c,o,s]);"string"===typeof r&&(r=y(r));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:v="default"}=r,b=l.useMemo((()=>{let e=M(h,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:v},navigationType:i}}),[u,h,f,m,g,v,i]);return null==b?null:l.createElement(Q.Provider,{value:d},l.createElement(X.Provider,{children:n,value:b}))}function Ce(e){let{children:t,location:n}=e;return ae(_e(t),n)}new Promise((()=>{}));l.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return l.Children.forEach(e,((e,r)=>{if(!l.isValidElement(e))return;let i=[...t,r];if(e.type===l.Fragment)return void n.push.apply(n,_e(e.props.children,i));e.type!==xe&&p(!1),e.props.index&&e.props.children&&p(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=_e(e.props.children,i)),n.push(o)})),n}var ke=n(7119),Te=n.t(ke,2);function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ZC){}new Map;const Re=c.startTransition;Te.flushSync,c.useId;function Pe(e){let{basename:t,children:n,future:r,window:i}=e,o=l.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),b((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return g("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:v(t)}),null,s)));let a=o.current,[c,u]=l.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=l.useCallback((e=>{d&&Re?Re((()=>u(e))):u(e)}),[u,d]);return l.useLayoutEffect((()=>a.listen(h)),[a,h]),l.useEffect((()=>be(r)),[r]),l.createElement(Se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const je="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=l.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Ee(e,Ie),{basename:m}=l.useContext(Q),g=!1;if("string"===typeof u&&Ne.test(u)&&(n=u,je))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=M(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(ZC){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;te()||p(!1);let{basename:r,navigator:i}=l.useContext(Q),{hash:o,pathname:s,search:a}=se(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:V([r,s])),i.createHref({pathname:c,search:a,hash:o})}(u,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=void 0===t?{}:t,c=ie(),u=ne(),d=se(e,{relative:s});return l.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:v(u)===v(d);c(e,{replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a})}}),[u,c,d,r,i,n,e,o,s,a])}(u,{replace:s,state:a,target:c,preventScrollReset:d,relative:i,viewTransition:h});return l.createElement("a",Ae({},f,{href:n||y,onClick:g||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var De,Me;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));var Le=n(8168),Fe=n(8587),Ue=n(2004),$e=n(116),Ve=n(505),Be=n(237),ze=n(2860),We=n(7370);const He=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=l.useContext(We.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},qe=(0,ze.A)();const Ge=function(){return He(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe)};var Ke=n(4414);const Ye=["className","component"];var Je=n(4501),Qe=n(4436),Xe=n(7550),Ze=n(1763);const et=(0,Ze.A)("MuiBox",["root"]),tt=(0,Qe.A)(),nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=(0,$e.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ve.A),s=l.forwardRef((function(e,s){const a=Ge(n),l=(0,Be.A)(e),{className:c,component:u="div"}=l,d=(0,Fe.A)(l,Ye);return(0,Ke.jsx)(o,(0,Le.A)({as:u,ref:s,className:(0,Ue.A)(c,i?i(r):r),theme:t&&a[t]||a},d))}));return s}({themeId:Xe.A,defaultTheme:tt,defaultClassName:et.root,generateClassName:Je.A.generate}),rt=nt;var it=n(8463),ot=n(3158);const st=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=Ge(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Ke.jsx)(ot.A,{styles:o})};var at=n(195);const lt=function(e){return(0,Ke.jsx)(st,(0,Le.A)({},e,{defaultTheme:at.A,themeId:Xe.A}))},ct=(e,t)=>(0,Le.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),ut=e=>(0,Le.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const dt=function(e){const t=(0,it.b)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)(lt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var o;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,Le.A)({html:ct(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,Le.A)({margin:0},ut(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(e,r)}),n]})},ht=!1,pt=!1,ft="${JSCORE_VERSION}",mt=function(e,t){if(!e)throw gt(t)},gt=function(e){return new Error("Firebase Database ("+ft+") INTERNAL ASSERT FAILED: "+e)},vt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new bt;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wt=function(e){const t=vt(e);return yt.encodeByteArray(t,!0)},xt=function(e){return wt(e).replace(/\./g,"")},St=function(e){try{return yt.decodeString(e,!0)}catch(ZC){console.error("base64Decode failed: ",ZC)}return null};function Ct(e){return _t(void 0,e)}function _t(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=_t(e[n],t[n]));return e}function kt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Tt=()=>{try{return kt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app",REACT_APP_SHOTSTACK_API_KEY:"c0Bpc85oj7cHuDdfhz54eQJmmoEI1qauJyodpw9d",REACT_APP_SOCKET_SERVER_URL:"wss://sideeye-backend-production.up.railway.app",REACT_APP_STREAM_API_KEY:"2nufecjmzmzh"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ZC){return}const t=e&&St(e[1]);return t&&JSON.parse(t)})()}catch(ZC){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ZC}`)}},At=e=>{var t,n;return null===(n=null===(t=Tt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Et=e=>{const t=At(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},It=()=>{var e;return null===(e=Tt())||void 0===e?void 0:e.config},Rt=e=>{var t;return null===(t=Tt())||void 0===t?void 0:t[`_${e}`]};class Pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function jt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xt(JSON.stringify({alg:"none",type:"JWT"})),xt(JSON.stringify(o)),""].join(".")}function Nt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ot(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function Dt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Mt(){return!0===ht||!0===pt}function Lt(){return!function(){var e;const t=null===(e=Tt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ZC){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ft(){try{return"object"===typeof indexedDB}catch(ZC){return!1}}class Ut extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Vt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Ut(n,o,t)}}const Vt=/\{\$([^}]+)}/g;function Bt(e){return JSON.parse(e)}function zt(e){return JSON.stringify(e)}const Wt=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Bt(St(o[0])||""),n=Bt(St(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(ZC){}return{header:t,claims:n,data:r,signature:i}};function Ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Gt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Yt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Jt(n)&&Jt(o)){if(!Yt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jt(e){return null!==e&&"object"===typeof e}function Qt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Xt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Zt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class en{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class tn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=nn),void 0===r.error&&(r.error=nn),void 0===r.complete&&(r.complete=nn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(ZC){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(ZC){"undefined"!==typeof console&&console.error&&console.error(ZC)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function nn(){}function rn(e,t){return`${e} failed: ${t} argument `}const on=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function sn(e){return e&&e._delegate?e._delegate:e}class an{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ln="[DEFAULT]";class cn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Pt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(ZC){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ZC){if(r)return null;throw ZC}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ln})}catch(ZC){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(ZC){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:un(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.component?this.component.multipleInstances?e:ln:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function un(e){return e===ln?void 0:e}class dn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const hn=[];var pn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pn||(pn={}));const fn={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},mn=pn.INFO,gn={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},vn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r](`[${n}]  ${e.name}:`,...o)};class yn{constructor(e){this.name=e,this._logLevel=mn,this._logHandler=vn,this._userLogHandler=null,hn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?fn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...t),this._logHandler(this,pn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...t),this._logHandler(this,pn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pn.INFO,...t),this._logHandler(this,pn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pn.WARN,...t),this._logHandler(this,pn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...t),this._logHandler(this,pn.ERROR,...t)}}let bn,wn;const xn=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,_n=new WeakMap,kn=new WeakMap;let Tn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Sn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return In(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function An(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wn||(wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rn(this),n),In(xn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return In(e.apply(Rn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Rn(this),t,...r);return Cn.set(o,t.sort?t.sort():[t]),In(o)}}function En(e){return"function"===typeof e?An(e):(e instanceof IDBTransaction&&function(e){if(Sn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Sn.set(e,t)}(e),t=e,(bn||(bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Tn):e);var t}function In(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(In(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&xn.set(t,e)})).catch((()=>{})),kn.set(t,e),t}(e);if(_n.has(e))return _n.get(e);const t=En(e);return t!==e&&(_n.set(e,t),kn.set(t,e)),t}const Rn=e=>kn.get(e);const Pn=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],Nn=new Map;function On(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Nn.get(t))return Nn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=jn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Nn.set(t,o),o}Tn=(e=>({...e,get:(t,n,r)=>On(t,n)||e.get(t,n,r),has:(t,n)=>!!On(t,n)||e.has(t,n)}))(Tn);class Dn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Mn="@firebase/app",Ln="0.11.5",Fn=new yn("@firebase/app"),Un="@firebase/app-compat",$n="@firebase/analytics-compat",Vn="@firebase/analytics",Bn="@firebase/app-check-compat",zn="@firebase/app-check",Wn="@firebase/auth",Hn="@firebase/auth-compat",qn="@firebase/database",Gn="@firebase/data-connect",Kn="@firebase/database-compat",Yn="@firebase/functions",Jn="@firebase/functions-compat",Qn="@firebase/installations",Xn="@firebase/installations-compat",Zn="@firebase/messaging",er="@firebase/messaging-compat",tr="@firebase/performance",nr="@firebase/performance-compat",rr="@firebase/remote-config",ir="@firebase/remote-config-compat",or="@firebase/storage",sr="@firebase/storage-compat",ar="@firebase/firestore",lr="@firebase/vertexai",cr="@firebase/firestore-compat",ur="firebase",dr="[DEFAULT]",hr={[Mn]:"fire-core",[Un]:"fire-core-compat",[Vn]:"fire-analytics",[$n]:"fire-analytics-compat",[zn]:"fire-app-check",[Bn]:"fire-app-check-compat",[Wn]:"fire-auth",[Hn]:"fire-auth-compat",[qn]:"fire-rtdb",[Gn]:"fire-data-connect",[Kn]:"fire-rtdb-compat",[Yn]:"fire-fn",[Jn]:"fire-fn-compat",[Qn]:"fire-iid",[Xn]:"fire-iid-compat",[Zn]:"fire-fcm",[er]:"fire-fcm-compat",[tr]:"fire-perf",[nr]:"fire-perf-compat",[rr]:"fire-rc",[ir]:"fire-rc-compat",[or]:"fire-gcs",[sr]:"fire-gcs-compat",[ar]:"fire-fst",[cr]:"fire-fst-compat",[lr]:"fire-vertex","fire-js":"fire-js",[ur]:"fire-js-all"},pr=new Map,fr=new Map,mr=new Map;function gr(e,t){try{e.container.addComponent(t)}catch(ZC){Fn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,ZC)}}function vr(e){const t=e.name;if(mr.has(t))return Fn.debug(`There were multiple attempts to register component ${t}.`),!1;mr.set(t,e);for(const n of pr.values())gr(n,e);for(const n of fr.values())gr(n,e);return!0}function yr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function br(e){return null!==e&&void 0!==e&&void 0!==e.settings}const wr=new $t("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new an("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const Sr="11.6.1";function Cr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:dr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=It()),!n)throw wr.create("no-options");const o=pr.get(i);if(o){if(Yt(n,o.options)&&Yt(r,o.config))return o;throw wr.create("duplicate-app",{appName:i})}const s=new dn(i);for(const l of mr.values())s.addComponent(l);const a=new xr(n,r,s);return pr.set(i,a),a}function _r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr;const t=pr.get(e);if(!t&&e===dr&&It())return Cr();if(!t)throw wr.create("no-app",{appName:e});return t}function kr(e,t,n){var r;let i=null!==(r=hr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Fn.warn(e.join(" "))}vr(new an(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Tr="firebase-heartbeat-store";let Ar=null;function Er(){return Ar||(Ar=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=In(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(In(s.result),e.oldVersion,e.newVersion,In(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Tr)}catch(ZC){console.warn(ZC)}}}).catch((e=>{throw wr.create("idb-open",{originalErrorMessage:e.message})}))),Ar}async function Ir(e,t){try{const n=(await Er()).transaction(Tr,"readwrite"),r=n.objectStore(Tr);await r.put(t,Rr(e)),await n.done}catch(ZC){if(ZC instanceof Ut)Fn.warn(ZC.message);else{const t=wr.create("idb-set",{originalErrorMessage:null===ZC||void 0===ZC?void 0:ZC.message});Fn.warn(t.message)}}}function Rr(e){return`${e.name}!${e.options.appId}`}class Pr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Nr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(ZC){Fn.warn(ZC)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=jr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Or(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Or(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=xt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(ZC){return Fn.warn(ZC),""}}}function jr(){return(new Date).toISOString().substring(0,10)}class Nr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ft()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Nb){t(Nb)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Er()).transaction(Tr),n=await t.objectStore(Tr).get(Rr(e));return await t.done,n}catch(ZC){if(ZC instanceof Ut)Fn.warn(ZC.message);else{const t=wr.create("idb-get",{originalErrorMessage:null===ZC||void 0===ZC?void 0:ZC.message});Fn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Or(e){return xt(JSON.stringify({version:2,heartbeats:e})).length}var Dr;Dr="",vr(new an("platform-logger",(e=>new Dn(e)),"PRIVATE")),vr(new an("heartbeat",(e=>new Pr(e)),"PRIVATE")),kr(Mn,Ln,Dr),kr(Mn,Ln,"esm2017"),kr("fire-js","");kr("firebase","11.6.1","app");var Mr=function(e,t){return Mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Mr(e,t)};function Lr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Mr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Fr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ur(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(ZC){o(ZC)}}function a(e){try{l(r.throw(e))}catch(ZC){o(ZC)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function $r(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(ZC){a=[6,ZC],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function Vr(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Br(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Nb){i={error:Nb}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function zr(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Wr(e){return this instanceof Wr?(this.v=e,this):new Wr(e)}function Hr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{!function(e){e.value instanceof Wr?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(i[e](t))}catch(ZC){u(o[0][3],ZC)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function qr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Vr(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;function Gr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kr=Gr,Yr=new $t("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jr=new yn("@firebase/auth");function Qr(e){if(Jr.logLevel<=pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jr.error(`Auth (${Sr}): ${e}`,...n)}}function Xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ni(e,...n)}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ni(e,...n)}function ei(e,t,n){const r=Object.assign(Object.assign({},Kr()),{[t]:n});return new $t("auth","Firebase",r).create(t,{appName:e.name})}function ti(e){return ei(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ni(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Yr.create(e,...n)}function ri(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ni(t,...r)}}function ii(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qr(t),new Error(t)}function oi(e,t){e||ii(t)}function si(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ai(){return"http:"===li()||"https:"===li()}function li(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ci(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ai()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ui{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=Ot()||Dt()}get(){return ci()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function di(e,t){oi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class hi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fi=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mi=new ui(3e4,6e4);function gi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function vi(e,t,n,r){return yi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Qt(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),hi.fetch()(await wi(e,e.config.apiHost,n,s),l)}))}async function yi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},pi),t);try{const t=new Si(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ci(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ci(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ci(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ci(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw ei(e,a,s);Xr(e,a)}}catch(ZC){if(ZC instanceof Ut)throw ZC;Xr(e,"network-request-failed",{message:String(ZC)})}}async function bi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await vi(e,t,n,r,i);return"mfaPendingCredential"in o&&Xr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function wi(e,t,n,r){const i=`${t}${n}?${r}`,o=e,s=o.config.emulator?di(e.config,i):`${e.config.apiScheme}://${i}`;if(fi.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function xi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Si{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Zr(this.auth,"network-request-failed"))),mi.get())}))}}function Ci(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(e,t,r);return i.customData._tokenResponse=n,i}function _i(e){return void 0!==e&&void 0!==e.enterprise}class ki{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ti(e,t){return vi(e,"GET","/v2/recaptchaConfig",gi(e,t))}async function Ai(e,t){return vi(e,"POST","/v1/accounts:lookup",t)}function Ei(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(ZC){}}function Ii(e){return 1e3*Number(e)}function Ri(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{const e=St(n);return e?JSON.parse(e):(Qr("Failed to decode base64 JWT payload"),null)}catch(ZC){return Qr("Caught error parsing JWT payload as JSON",null===ZC||void 0===ZC?void 0:ZC.toString()),null}}function Pi(e){const t=Ri(e);return ri(t,"internal-error"),ri("undefined"!==typeof t.exp,"internal-error"),ri("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ji(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(ZC){throw ZC instanceof Ut&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(ZC)&&e.auth.currentUser===e&&await e.auth.signOut(),ZC}}class Ni{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(ZC){return void("auth/network-request-failed"===(null===ZC||void 0===ZC?void 0:ZC.code)&&this.schedule(!0))}this.schedule()}}class Oi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Di(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ji(e,Ai(n,{idToken:r}));ri(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Mi(o.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Oi(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Mi(e){return e.map((e=>{var{providerId:t}=e,n=Fr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ri(e.idToken,"internal-error"),ri("undefined"!==typeof e.idToken,"internal-error"),ri("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Pi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ri(0!==e.length,"internal-error");const t=Pi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ri(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await yi(e,{},(async()=>{const n=Qt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await wi(e,r,"/v1/token",`key=${i}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",hi.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Li;return n&&(ri("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(ri("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(ri("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return ii("not implemented")}}function Fi(e,t){ri("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ui{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Fr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Oi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ji(this,this.stsTokenManager.getToken(this.auth,e));return ri(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=sn(e),r=await n.getIdToken(t),i=Ri(r);ri(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ei(Ii(i.auth_time)),issuedAtTime:Ei(Ii(i.iat)),expirationTime:Ei(Ii(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=sn(e);await Di(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ri(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ri(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Di(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await ji(this,async function(e,t){return vi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:S}=t;ri(y&&S,e,"internal-error");const C=Li.fromJSON(this.name,S);ri("string"===typeof y,e,"internal-error"),Fi(u,e.name),Fi(d,e.name),ri("boolean"===typeof b,e,"internal-error"),ri("boolean"===typeof w,e,"internal-error"),Fi(h,e.name),Fi(p,e.name),Fi(f,e.name),Fi(m,e.name),Fi(g,e.name),Fi(v,e.name);const _=new Ui({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:C,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(_.providerData=x.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Li;r.updateFromServerResponse(t);const i=new Ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Di(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ri(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Mi(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new Li;s.updateFromIdToken(n);const a=new Ui({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Oi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const $i=new Map;function Vi(e){oi(e instanceof Function,"Expected a class definition");let t=$i.get(e);return t?(oi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$i.set(e,t),t)}class Bi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bi.type="NONE";const zi=Bi;function Wi(e,t,n){return`firebase:${e}:${t}:${n}`}class Hi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Wi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Ai(this.auth,{idToken:e}).catch((()=>{}));return t?Ui._fromGetAccountInfoResponse(this.auth,t,e):null}return Ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Hi(Vi(zi),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Vi(zi);const o=Wi(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await Ai(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Ui._fromGetAccountInfoResponse(e,r,t)}else n=Ui._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Hi(i,e,n)):new Hi(i,e,n)}}function qi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ji(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xi(t))return"Blackberry";if(Zi(t))return"Webos";if(Ki(t))return"Safari";if((t.includes("chrome/")||Yi(t))&&!t.includes("edge/"))return"Chrome";if(Qi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/firefox\//i.test(e)}function Ki(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/crios\//i.test(e)}function Ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/iemobile/i.test(e)}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/android/i.test(e)}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/blackberry/i.test(e)}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/webos/i.test(e)}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function to(){return function(){const e=Nt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();return eo(e)||Qi(e)||Zi(e)||Xi(e)||/windows phone/i.test(e)||Ji(e)}function ro(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qi(Nt());break;case"Worker":t=`${qi(Nt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sr}/${r}`}class io{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(ZC){r(ZC)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(ZC){t.reverse();for(const n of t)try{n()}catch(M_){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===ZC||void 0===ZC?void 0:ZC.message})}}}class oo{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class so{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Hi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(ZC){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ai(this,{idToken:e}),n=await Ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(br(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(ZC){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(ZC)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ri(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(ZC){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Di(e)}catch(ZC){if("auth/network-request-failed"!==(null===ZC||void 0===ZC?void 0:ZC.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(ti(this));const t=e?sn(e):null;return t&&ri(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ri(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return br(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(ti(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Vi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return vi(e,"GET","/v2/passwordPolicy",gi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new oo(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return vi(e,"POST","/v2/accounts:revokeToken",gi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vi(e)||this._popupRedirectResolver;ri(t,this,"argument-error"),this.redirectPersistenceManager=await Hi.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ri(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ri(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ro(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Jr.logLevel<=pn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jr.warn(`Auth (${Sr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function ao(e){return sn(e)}class lo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new tn(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ri(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let co={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uo(e){return co.loadJS(e)}function ho(e){return`__${e}${Math.floor(1e6*Math.random())}`}class po{constructor(){this.enterprise=new fo}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fo{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mo="NO_RECAPTCHA";class go{constructor(e){this.type="recaptcha-enterprise",this.auth=ao(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;_i(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(mo)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new po).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ti(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ki(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&_i(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=co.recaptchaEnterpriseScript;0!==t.length&&(t+=i),uo(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function vo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new go(e);let s;if(i)s=mo;else try{s=await o.verify(n)}catch(Nb){s=await o.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yo(e,t,n,r,i){var o,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await vo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await vo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("PHONE_PROVIDER")){const i=await vo(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await vo(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await vo(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function bo(e){const t=ao(e),n=await Ti(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ki(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new go(t).verify()}}function wo(e,t,n){const r=ao(e);ri(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=xo(t),{host:s,port:a}=function(e){const t=xo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:So(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:So(t)}}}(t),l={url:`${o}//${s}${null===a?"":`:${a}`}/`},c=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return ri(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ri(Yt(l,r.config.emulator)&&Yt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function xo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function So(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Co{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function _o(e,t){return vi(e,"POST","/v1/accounts:signUp",t)}async function ko(e,t){return bi(e,"POST","/v1/accounts:signInWithPassword",gi(e,t))}async function To(e,t){return vi(e,"POST","/v1/accounts:sendOobCode",gi(e,t))}async function Ao(e,t){return To(e,t)}class Eo extends Co{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Eo(e,t,"password")}static _fromEmailAndCode(e,t){return new Eo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return yo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ko,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return bi(e,"POST","/v1/accounts:signInWithEmailLink",gi(e,t))}(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return yo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_o,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return bi(e,"POST","/v1/accounts:signInWithEmailLink",gi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Io(e,t){return bi(e,"POST","/v1/accounts:signInWithIdp",gi(e,t))}class Ro extends Co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Fr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ro(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Io(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Io(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qt(t)}return e}}async function Po(e,t){return vi(e,"POST","/v1/accounts:sendVerificationCode",gi(e,t))}const jo={USER_NOT_FOUND:"user-not-found"};class No extends Co{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new No({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new No({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bi(e,"POST","/v1/accounts:signInWithPhoneNumber",gi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bi(e,"POST","/v1/accounts:signInWithPhoneNumber",gi(e,t));if(n.temporaryProof)throw Ci(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bi(e,"POST","/v1/accounts:signInWithPhoneNumber",gi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),jo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new No({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Oo{constructor(e){var t,n,r,i,o,s;const a=Xt(Zt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ri(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Xt(Zt(e)).link,n=t?Xt(Zt(t)).deep_link_id:null,r=Xt(Zt(e)).deep_link_id;return(r?Xt(Zt(r)).link:null)||r||n||t||e}(e);try{return new Oo(t)}catch(n){return null}}}class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,t){return Eo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Oo.parseLink(t);return ri(n,"argument-error"),Eo._fromEmailAndCode(e,n.code,n.tenantId)}}Do.PROVIDER_ID="password",Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Mo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lo extends Mo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fo extends Lo{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fo.credential(t.oauthAccessToken)}catch(n){return null}}}Fo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fo.PROVIDER_ID="facebook.com";class Uo extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ro._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Uo.credential(n,r)}catch(i){return null}}}Uo.GOOGLE_SIGN_IN_METHOD="google.com",Uo.PROVIDER_ID="google.com";class $o extends Lo{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $o.credential(t.oauthAccessToken)}catch(n){return null}}}$o.GITHUB_SIGN_IN_METHOD="github.com",$o.PROVIDER_ID="github.com";class Vo extends Lo{constructor(){super("twitter.com")}static credential(e,t){return Ro._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Vo.credential(n,r)}catch(i){return null}}}async function Bo(e,t){return bi(e,"POST","/v1/accounts:signUp",gi(e,t))}Vo.TWITTER_SIGN_IN_METHOD="twitter.com",Vo.PROVIDER_ID="twitter.com";class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ui._fromIdTokenResponse(e,n,r),o=Wo(n);return new zo({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wo(n);return new zo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ho extends Ut{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ho(e,t,n,r)}}function qo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ho._fromErrorAndOperation(e,n,t,r);throw n}))}async function Go(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ji(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return zo._forOperation(e,"link",r)}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(br(r.app))return Promise.reject(ti(r));const i="reauthenticate";try{const o=await ji(e,qo(r,i,t,e),n);ri(o.idToken,r,"internal-error");const s=Ri(o.idToken);ri(s,r,"internal-error");const{sub:a}=s;return ri(e.uid===a,r,"user-mismatch"),zo._forOperation(e,i,o)}catch(ZC){throw"auth/user-not-found"===(null===ZC||void 0===ZC?void 0:ZC.code)&&Xr(r,"user-mismatch"),ZC}}async function Yo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(br(e.app))return Promise.reject(ti(e));const r="signIn",i=await qo(e,r,t),o=await zo._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Jo(e,t){return Yo(ao(e),t)}async function Qo(e,t){return Ko(sn(e),t)}function Xo(e,t,n){var r;ri((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ri("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),ri("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ri(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ri(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Zo(e){const t=ao(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function es(e,t){const n=sn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Xo(n.auth,r,t);const{email:i}=await async function(e,t){return To(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ts(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=sn(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await ji(i,async function(e,t){return vi(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function ns(e,t,n,r){return sn(e).onAuthStateChanged(t,n,r)}function rs(e){return sn(e).signOut()}function is(e,t){return vi(e,"POST","/v2/accounts/mfaEnrollment:start",gi(e,t))}new WeakMap;const os="__sak";class ss{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(os,"1"),this.storage.removeItem(os),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class as extends ss{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=no(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);to()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}as.type="LOCAL";const ls=as;function cs(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function us(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class ds{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=us(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return cs(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=us(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=us(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=cs(n);const i=setInterval((()=>{const e=cs(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ds.type="COOKIE";class hs extends ss{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hs.type="SESSION";const ps=hs;class fs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new fs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}fs.receivers=[];class gs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=ms("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function vs(){return window}function ys(){return"undefined"!==typeof vs().WorkerGlobalScope&&"function"===typeof vs().importScripts}const bs="firebaseLocalStorageDb",ws="firebaseLocalStorage",xs="fbase_key";class Ss{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Cs(e,t){return e.transaction([ws],t?"readwrite":"readonly").objectStore(ws)}function _s(){const e=indexedDB.open(bs,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ws,{keyPath:xs})}catch(ZC){n(ZC)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ws)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bs);return new Ss(e).toPromise()}(),t(await _s()))}))}))}async function ks(e,t,n){const r=Cs(e,!0).put({[xs]:t,value:n});return new Ss(r).toPromise()}function Ts(e,t){const n=Cs(e,!0).delete(t);return new Ss(n).toPromise()}class As{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await _s()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(ZC){if(t++>3)throw ZC;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ys()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fs._getInstance(ys()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new gs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _s();return await ks(e,os,"1"),await Ts(e,os),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ks(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Cs(e,!1).get(t),r=await new Ss(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ts(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Cs(e,!1).getAll();return new Ss(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}As.type="LOCAL";const Es=As;function Is(e,t){return vi(e,"POST","/v2/accounts/mfaSignIn:start",gi(e,t))}ho("rcb"),new ui(3e4,6e4);const Rs="recaptcha";async function Ps(e,t,n){var r;if(!e._getRecaptchaConfig())try{await bo(e)}catch(Nb){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ri("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=yo(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===mo){ri((null===n||void 0===n?void 0:n.type)===Rs,e,"argument-error");return is(e,await js(e,t,n))}return is(e,t)}),"PHONE_PROVIDER"),s=await o.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{ri("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ri(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=yo(e,s,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===mo){ri((null===n||void 0===n?void 0:n.type)===Rs,e,"argument-error");return Is(e,await js(e,t,n))}return Is(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=yo(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===mo){ri((null===n||void 0===n?void 0:n.type)===Rs,e,"argument-error");return Po(e,await js(e,t,n))}return Po(e,t)}),"PHONE_PROVIDER"),o=await r.catch((e=>Promise.reject(e)));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function js(e,t,n){ri(n.type===Rs,e,"argument-error");const r=await n.verify();ri("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ns{constructor(e){this.providerId=Ns.PROVIDER_ID,this.auth=ao(e)}verifyPhoneNumber(e,t){return Ps(this.auth,e,sn(t))}static credential(e,t){return No._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ns.credentialFromTaggedObject(t)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?No._fromTokenResponse(n,r):null}}function Os(e,t){return t?Vi(t):(ri(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ns.PROVIDER_ID="phone",Ns.PHONE_SIGN_IN_METHOD="phone";class Ds extends Co{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ms(e){return Yo(e.auth,new Ds(e),e.bypassAuthState)}function Ls(e){const{auth:t,user:n}=e;return ri(n,t,"internal-error"),Ko(n,new Ds(e),e.bypassAuthState)}async function Fs(e){const{auth:t,user:n}=e;return ri(n,t,"internal-error"),Go(n,new Ds(e),e.bypassAuthState)}class Us{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(ZC){this.reject(ZC)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(ZC){this.reject(ZC)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ms;case"linkViaPopup":case"linkViaRedirect":return Fs;case"reauthViaPopup":case"reauthViaRedirect":return Ls;default:Xr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $s=new ui(2e3,1e4);class Vs extends Us{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ri(e,this.auth,"internal-error"),e}async onExecution(){oi(1===this.filter.length,"Popup operations only handle one event");const e=ms();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Zr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$s.get())};e()}}Vs.currentPopupAction=null;const Bs=new Map;class zs extends Us{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Bs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=qs(t),r=Hs(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(ZC){e=()=>Promise.reject(ZC)}Bs.set(this.auth._key(),e)}return this.bypassAuthState||Bs.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ws(e,t){Bs.set(e._key(),t)}function Hs(e){return Vi(e._redirectPersistence)}function qs(e){return Wi("pendingRedirect",e.config.apiKey,e.name)}async function Gs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(br(e.app))return Promise.reject(ti(e));const r=ao(e),i=Os(r,t),o=new zs(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Ks{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Js(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Js(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ys(e))}saveEventToCache(e){this.cachedEventUids.add(Ys(e)),this.lastProcessedEventTime=Date.now()}}function Ys(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Js(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xs=/^https?/;async function Zs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return vi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ea(r))return}catch(n){}Xr(e,"unauthorized-domain")}function ea(e){const t=si(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Xs.test(n))return!1;if(Qs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ta=new ui(3e4,6e4);function na(){const e=vs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ra(e){return new Promise(((t,n)=>{var r,i,o;function s(){na(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{na(),n(Zr(e,"network-request-failed"))},timeout:ta.get()})}if(null===(i=null===(r=vs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=vs().gapi)||void 0===o?void 0:o.load)){const t=ho("iframefcb");return vs()[t]=()=>{gapi.load?s():n(Zr(e,"network-request-failed"))},uo(`${co.gapiScript}?onload=${t}`).catch((e=>n(e)))}s()}})).catch((e=>{throw ia=null,e}))}let ia=null;const oa=new ui(5e3,15e3),sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function la(e){const t=e.config;ri(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?di(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Sr},i=aa.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qt(r).slice(1)}`}async function ca(e){const t=await function(e){return ia=ia||ra(e),ia}(e),n=vs().gapi;return ri(n,e,"internal-error"),t.open({where:document.body,url:la(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Zr(e,"network-request-failed"),o=vs().setTimeout((()=>{r(i)}),oa.get());function s(){vs().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const ua={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class da{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(ZC){}}}function ha(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ua),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Nt().toLowerCase();n&&(a=Yi(c)?"_blank":n),Gi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return eo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new da(null);const d=window.open(t||"",a,u);ri(d,e,"popup-blocked");try{d.focus()}catch(ZC){}return new da(d)}const pa="__/auth/handler",fa="emulator/auth/handler",ma=encodeURIComponent("fac");async function ga(e,t,n,r,i,o){ri(e.config.authDomain,e,"auth-domain-config-required"),ri(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Sr,eventId:i};if(t instanceof Mo){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Gt(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Lo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${ma}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${pa}`;return di(t,fa)}(e)}?${Qt(a).slice(1)}${c}`}const va="webStorageSupport";const ya=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ps,this._completeRedirectFn=Gs,this._overrideRedirectResult=Ws}async _openPopup(e,t,n,r){var i;oi(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ha(e,await ga(e,t,n,si(),r),ms())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vs().location.href=e}(await ga(e,t,n,si(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(oi(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ca(e),n=new Ks(e);return t.register("authEvent",(t=>{ri(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(va,{type:va},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[va];void 0!==i&&t(!!i),Xr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return no()||Ki()||eo()}};var ba="@firebase/auth",wa="1.10.1";class xa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ri(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Sa=Rt("authIdTokenMaxAge")||300;let Ca=null;function _a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();const t=yr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=yr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Yt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Xr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ya,persistence:[Es,ls,ps]}),r=Rt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Sa)return;const i=null===n||void 0===n?void 0:n.token;Ca!==i&&(Ca=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))})(e.toString());!function(e,t,n){sn(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){sn(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const i=At("auth");return i&&wo(n,`http://${i}`),n}var ka;!function(e){co=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Zr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ka="Browser",vr(new an("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ri(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:ka,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ro(ka)},c=new so(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),vr(new an("auth-internal",(e=>(e=>new xa(e))(ao(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),kr(ba,wa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ka)),kr(ba,wa,"esm2017");var Ta,Aa,Ea="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ia={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=p*g,f(n,2*i+2*o),n[2*i+2*o+1]+=l*g,f(n,2*i+2*o+1),n[2*i+2*o+1]+=p*m,f(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,f(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Aa=Ia.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},Ta=Ia.Integer=r}).apply("undefined"!==typeof Ea?Ea:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ra,Pa,ja,Na,Oa,Da,Ma,La,Fa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ua={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Fa&&Fa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function C(e){i.setTimeout((()=>{throw e}),0)}function _(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,E=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);A=()=>{e.then(P)}};var P=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(o_){C(o_)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}E=!1};function j(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(o_){}return e}();function D(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(u_){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,N);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=z(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new U(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function q(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new V(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=z(o=e.g[t],n,r,i))&&($(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):$(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){j.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;x(t=new N(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,j),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends j{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){j.call(this),this.h=e,this.g={}}d(le,j);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){N.call(this,"d")}function be(){N.call(this,"c")}d(ye,N),d(be,N);var we={},xe=null;function Se(){return xe=xe||new ne}function Ce(e){N.call(this,we.La,e)}function _e(e){const t=Se();re(t,new Ce(t))}function ke(e,t){N.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new ke(t,e))}function Ae(e,t){N.call(this,we.Ma,e),this.size=t}function Ee(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Ce,N),we.STAT_EVENT="statevent",d(ke,N),we.Ma="timingevent",d(Ae,N),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Pe,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Oe,fe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Le={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,$e(e,null)}function $e(e,t){e.F=Date.now(),ze(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=q(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ee(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||an(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(t_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Yt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ee(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(t_){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&sn(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(He(a),ze(a)),r.g=s}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(t_){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Ht(this.g);e="";var o=r.length,s=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),qe(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Te(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ke(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(d),d.M=!0,Te(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Re(this.i,this.l,a,null),Ke(this,a);4==h&&Ge(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),qe(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ge(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Te(17)),Ge(this),this.s=2,qe(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),_t(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){xt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return xt(e),t=kt(e,t),e.g.has(t)}function _t(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(u_){}}function At(){this.g=new pe}function Et(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(ZC){throw t.push(r+"type="+encodeURIComponent("_badmap")),ZC}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Ct(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(It,fe),It.prototype.g=function(){return new Rt(this.l,this.j)},It.prototype.i=function(e){return function(){return e}}({}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):Nt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Lt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),Bt(e)}function $t(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Lt.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",$t(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){zt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(ZC){}}}function zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Jt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(c_){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;A||R(),E||(A(),E=!0),I.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Zt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Et(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;A||R(),E||(A(),E=!0),I.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ee(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,$e(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ae(r,n)),Qt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ee(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),un(e),Jt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new It({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function fn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(u_){return void Ut(this,u_)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(u_){Ut(this,u_)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(n_){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(n_){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Ot(o)))+"&"+t:this.m&&Dt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Qe(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ee(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Qt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,La=Ua.createWebChannelTransport=function(){return new fn},Ma=Ua.getStatEventTarget=function(){return Se()},Da=Ua.Event=we,Oa=Ua.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Na=Ua.ErrorCode=je,Ne.COMPLETE="complete",ja=Ua.EventType=Ne,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Pa=Ua.WebChannel=ge,Ua.FetchXmlHttpFactory=It,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Ra=Ua.XhrIo=Mt}).apply("undefined"!==typeof Fa?Fa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $a="@firebase/firestore",Va="4.7.11";class Ba{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ba.UNAUTHENTICATED=new Ba(null),Ba.GOOGLE_CREDENTIALS=new Ba("google-credentials-uid"),Ba.FIRST_PARTY=new Ba("first-party-uid"),Ba.MOCK_USER=new Ba("mock-user");let za="11.6.1";const Wa=new yn("@firebase/firestore");function Ha(){return Wa.logLevel}function qa(e){if(Wa.logLevel<=pn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ya);Wa.debug(`Firestore (${za}): ${e}`,...i)}}function Ga(e){if(Wa.logLevel<=pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ya);Wa.error(`Firestore (${za}): ${e}`,...i)}}function Ka(e){if(Wa.logLevel<=pn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ya);Wa.warn(`Firestore (${za}): ${e}`,...i)}}function Ya(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(e_){return e}}function Ja(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Qa(e,r,n)}function Qa(e,t,n){let r=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ga(r),new Error(r)}function Xa(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Qa(t,i,r)}function Za(e,t){return e}const el={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tl extends Ut{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class rl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class il{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ba.UNAUTHENTICATED)))}shutdown(){}}class ol{constructor(e){this.t=e,this.currentUser=Ba.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xa(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new nl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new nl,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{qa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(qa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new nl)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(qa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Xa("string"==typeof t.accessToken,31837,{l:t}),new rl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xa(null===e||"string"==typeof e,2055,{h:e}),new Ba(e)}}class sl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ba.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class al{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new sl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ba.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ll{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xa(void 0===this.o,3512);const n=e=>{null!=e.error&&qa("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,qa("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{qa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):qa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ll(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Xa("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ll(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ul(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function dl(){return new TextEncoder}class hl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ul(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function pl(e,t){return e<t?-1:e>t?1:0}function fl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return pl(r,i);{const o=dl(),s=gl(o.encode(ml(e,n)),o.encode(ml(t,n)));return 0!==s?s:pl(r,i)}}n+=r>65535?2:1}return pl(e.length,t.length)}function ml(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function gl(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return pl(e[n],t[n]);return pl(e.length,t.length)}function vl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const yl=-62135596800,bl=1e6;class wl{static now(){return wl.fromMillis(Date.now())}static fromDate(e){return wl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*bl);return new wl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tl(el.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tl(el.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yl)throw new tl(el.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tl(el.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bl}_compareTo(e){return this.seconds===e.seconds?pl(this.nanoseconds,e.nanoseconds):pl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xl{static fromTimestamp(e){return new xl(e)}static min(){return new xl(new wl(0,0))}static max(){return new xl(new wl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Sl="__name__";class Cl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ja(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ja(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Cl.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return pl(e.length,t.length)}static compareSegments(e,t){const n=Cl.isNumericId(e),r=Cl.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Cl.extractNumericId(e).compare(Cl.extractNumericId(t)):fl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class _l extends Cl{construct(e,t,n){return new _l(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new tl(el.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new _l(e)}static emptyPath(){return new _l([])}}const kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tl extends Cl{construct(e,t,n){return new Tl(e,t,n)}static isValidIdentifier(e){return kl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Sl}static keyField(){return new Tl([Sl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new tl(el.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new tl(el.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tl(el.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new tl(el.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tl(t)}static emptyPath(){return new Tl([])}}class Al{constructor(e){this.path=e}static fromPath(e){return new Al(_l.fromString(e))}static fromName(e){return new Al(_l.fromString(e).popFirst(5))}static empty(){return new Al(_l.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_l.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _l.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Al(new _l(e.slice()))}}const El=-1;class Il{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Il.UNKNOWN_ID=-1;function Rl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=xl.fromTimestamp(1e9===r?new wl(n+1,0):new wl(n,r));return new jl(i,Al.empty(),t)}function Pl(e){return new jl(e.readTime,e.key,El)}class jl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new jl(xl.min(),Al.empty(),El)}static max(){return new jl(xl.max(),Al.empty(),El)}}function Nl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Al.comparator(e.documentKey,t.documentKey),0!==n?n:pl(e.largestBatchId,t.largestBatchId))}const Ol="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ml(e){if(e.code!==el.FAILED_PRECONDITION||e.message!==Ol)throw e;qa("LocalStore","Unexpectedly lost primary lease")}class Ll{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ja(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ll(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ll?t:Ll.resolve(t)}catch(e){return Ll.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ll.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ll.reject(t)}static resolve(e){return new Ll(((t,n)=>{t(e)}))}static reject(e){return new Ll(((t,n)=>{n(e)}))}static waitFor(e){return new Ll(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Ll.resolve(!1);for(const n of e)t=t.next((e=>e?Ll.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ll(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ll(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Fl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ul(e){return"IndexedDbTransactionError"===e.name}class $l{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}$l.le=-1;const Vl=-1;function Bl(e){return null==e}function zl(e){return 0===e&&1/e==-1/0}function Wl(e){return"number"==typeof e&&Number.isInteger(e)&&!zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Hl="\x01";function ql(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Kl(t)),t=Gl(e.get(n),t);return Kl(t)}function Gl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Hl:n+="\x01\x11";break;default:n+=t}}return n}function Kl(e){return e+Hl+"\x01"}const Yl="remoteDocuments",Jl="owner",Ql="mutationQueues",Xl="mutations";const Zl="documentMutations",ec="remoteDocumentsV14",tc="remoteDocumentGlobal",nc="targets",rc="targetDocuments",ic="targetGlobal",oc="collectionParents",sc="clientMetadata",ac="bundles",lc="namedQueries",cc="indexConfiguration",uc="indexState",dc="indexEntries",hc="documentOverlays",pc="globals",fc=[Ql,Xl,Zl,Yl,nc,Jl,ic,rc,sc,tc,oc,ac,lc],mc=[Ql,Xl,Zl,ec,nc,Jl,ic,rc,sc,tc,oc,ac,lc,hc],gc=mc,vc=[...gc,cc,uc,dc];function yc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xc{constructor(e,t){this.comparator=e,this.root=t||Cc.EMPTY}insert(e,t){return new xc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cc.BLACK,null,null))}remove(e){return new xc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Cc.RED,this.left=null!=r?r:Cc.EMPTY,this.right=null!=i?i:Cc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Cc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Cc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Cc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ja(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ja(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ja(27949);return e+(this.isRed()?0:1)}}Cc.EMPTY=null,Cc.RED=!0,Cc.BLACK=!1,Cc.EMPTY=new class{constructor(){this.size=0}get key(){throw Ja(57766)}get value(){throw Ja(16141)}get color(){throw Ja(16727)}get left(){throw Ja(29726)}get right(){throw Ja(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Cc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _c{constructor(e){this.comparator=e,this.data=new xc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kc(this.data.getIterator())}getIteratorFrom(e){return new kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof _c))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _c(this.comparator);return t.data=e,t}}class kc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tc{constructor(e){this.fields=e,e.sort(Tl.comparator)}static empty(){return new Tc([])}unionWith(e){let t=new _c(Tl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Tc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ac extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ec{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ac("Invalid base64 string: "+e):e}}(e);return new Ec(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ec(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ec.EMPTY_BYTE_STRING=new Ec("");const Ic=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rc(e){if(Xa(!!e,39018),"string"==typeof e){let t=0;const n=Ic.exec(e);if(Xa(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pc(e.seconds),nanos:Pc(e.nanos)}}function Pc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jc(e){return"string"==typeof e?Ec.fromBase64String(e):Ec.fromUint8Array(e)}const Nc="server_timestamp",Oc="__type__",Dc="__previous_value__",Mc="__local_write_time__";function Lc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Oc])||void 0===n?void 0:n.stringValue)===Nc}function Fc(e){const t=e.mapValue.fields[Dc];return Lc(t)?Fc(t):t}function Uc(e){const t=Rc(e.mapValue.fields[Mc].timestampValue);return new wl(t.seconds,t.nanos)}class $c{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}const Vc="(default)";class Bc{constructor(e,t){this.projectId=e,this.database=t||Vc}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}const zc="__type__",Wc="__max__",Hc={mapValue:{fields:{__type__:{stringValue:Wc}}}},qc="__vector__",Gc="value";function Kc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lc(e)?4:du(e)?9007199254740991:cu(e)?10:11:Ja(28295,{value:e})}function Yc(e,t){if(e===t)return!0;const n=Kc(e);if(n!==Kc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Uc(e).isEqual(Uc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Rc(e.timestampValue),r=Rc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return jc(e.bytesValue).isEqual(jc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pc(e.geoPointValue.latitude)===Pc(t.geoPointValue.latitude)&&Pc(e.geoPointValue.longitude)===Pc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pc(e.integerValue)===Pc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pc(e.doubleValue),r=Pc(t.doubleValue);return n===r?zl(n)===zl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vl(e.arrayValue.values||[],t.arrayValue.values||[],Yc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yc(n)!==yc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yc(n[i],r[i])))return!1;return!0}(e,t);default:return Ja(52216,{left:e})}}function Jc(e,t){return void 0!==(e.values||[]).find((e=>Yc(e,t)))}function Qc(e,t){if(e===t)return 0;const n=Kc(e),r=Kc(t);if(n!==r)return pl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pc(e.integerValue||e.doubleValue),r=Pc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xc(e.timestampValue,t.timestampValue);case 4:return Xc(Uc(e),Uc(t));case 5:return fl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=jc(e),r=jc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=pl(n[i],r[i]);if(0!==e)return e}return pl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pl(Pc(e.latitude),Pc(t.latitude));return 0!==n?n:pl(Pc(e.longitude),Pc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s[Gc])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Gc])||void 0===r?void 0:r.arrayValue,u=pl((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Zc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Hc.mapValue&&t===Hc.mapValue)return 0;if(e===Hc.mapValue)return 1;if(t===Hc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=fl(r[s],o[s]);if(0!==e)return e;const t=Qc(n[r[s]],i[o[s]]);if(0!==t)return t}return pl(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ja(23264,{Pe:n})}}function Xc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pl(e,t);const n=Rc(e),r=Rc(t),i=pl(n.seconds,r.seconds);return 0!==i?i:pl(n.nanos,r.nanos)}function Zc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Qc(n[i],r[i]);if(e)return e}return pl(n.length,r.length)}function eu(e){return tu(e)}function tu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Rc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return jc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Al.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=tu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${tu(e.fields[i])}`;return n+"}"}(e.mapValue):Ja(61005,{value:e})}function nu(e){switch(Kc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fc(e);return t?16+nu(t):16;case 5:return 2*e.stringValue.length;case 6:return jc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+nu(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return bc(e.fields,((e,n)=>{t+=e.length+nu(n)})),t}(e.mapValue);default:throw Ja(13486,{value:e})}}function ru(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iu(e){return!!e&&"integerValue"in e}function ou(e){return!!e&&"arrayValue"in e}function su(e){return!!e&&"nullValue"in e}function au(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lu(e){return!!e&&"mapValue"in e}function cu(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[zc])||void 0===n?void 0:n.stringValue)===qc}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=uu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=uu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function du(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Wc}class hu{constructor(e){this.value=e}static empty(){return new hu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=Tl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=uu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());lu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new hu(uu(this.value))}}function pu(e){const t=[];return bc(e.fields,((e,n)=>{const r=new Tl([e]);if(lu(n)){const e=pu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Tc(t)}class fu{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new fu(e,0,xl.min(),xl.min(),xl.min(),hu.empty(),0)}static newFoundDocument(e,t,n,r){return new fu(e,1,t,xl.min(),n,r,0)}static newNoDocument(e,t){return new fu(e,2,t,xl.min(),xl.min(),hu.empty(),0)}static newUnknownDocument(e,t){return new fu(e,3,t,xl.min(),xl.min(),hu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mu{constructor(e,t){this.position=e,this.inclusive=t}}function gu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Al.comparator(Al.fromName(s.referenceValue),n.key):Qc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function vu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yc(e.position[n],t.position[n]))return!1;return!0}class yu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wu{}class xu extends wu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Iu(e,t,n):"array-contains"===t?new Nu(e,n):"in"===t?new Ou(e,n):"not-in"===t?new Du(e,n):"array-contains-any"===t?new Mu(e,n):new xu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ru(e,n):new Pu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Qc(t,this.value)):null!==t&&Kc(this.value)===Kc(t)&&this.matchesComparison(Qc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ja(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Su extends wu{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Su(e,t)}matches(e){return Cu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Cu(e){return"and"===e.op}function _u(e){return ku(e)&&Cu(e)}function ku(e){for(const t of e.filters)if(t instanceof Su)return!1;return!0}function Tu(e){if(e instanceof xu)return e.field.canonicalString()+e.op.toString()+eu(e.value);if(_u(e))return e.filters.map((e=>Tu(e))).join(",");{const t=e.filters.map((e=>Tu(e))).join(",");return`${e.op}(${t})`}}function Au(e,t){return e instanceof xu?function(e,t){return t instanceof xu&&e.op===t.op&&e.field.isEqual(t.field)&&Yc(e.value,t.value)}(e,t):e instanceof Su?function(e,t){return t instanceof Su&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Au(n,t.filters[r])),!0)}(e,t):void Ja(19439)}function Eu(e){return e instanceof xu?function(e){return`${e.field.canonicalString()} ${e.op} ${eu(e.value)}`}(e):e instanceof Su?function(e){return e.op.toString()+" {"+e.getFilters().map(Eu).join(" ,")+"}"}(e):"Filter"}class Iu extends xu{constructor(e,t,n){super(e,t,n),this.key=Al.fromName(n.referenceValue)}matches(e){const t=Al.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ru extends xu{constructor(e,t){super(e,"in",t),this.keys=ju("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Pu extends xu{constructor(e,t){super(e,"not-in",t),this.keys=ju("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ju(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Al.fromName(e.referenceValue)))}class Nu extends xu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&Jc(t.arrayValue,this.value)}}class Ou extends xu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jc(this.value.arrayValue,t)}}class Du extends xu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Jc(this.value.arrayValue,t)}}class Mu extends xu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Jc(this.value.arrayValue,e)))}}class Lu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Ie=null}}function Fu(e){return new Lu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Uu(e){const t=Za(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Tu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Bl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>eu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>eu(e))).join(",")),t.Ie=e}return t.Ie}function $u(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Au(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vu(e.startAt,t.startAt)&&vu(e.endAt,t.endAt)}function Vu(e){return Al.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function zu(e,t,n,r,i,o,s,a){return new Bu(e,t,n,r,i,o,s,a)}function Wu(e){return new Bu(e)}function Hu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qu(e){return null!==e.collectionGroup}function Gu(e){const t=Za(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new _c(Tl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new yu(r,n))})),e.has(Tl.keyField().canonicalString())||t.Ee.push(new yu(Tl.keyField(),n))}return t.Ee}function Ku(e){const t=Za(e);return t.de||(t.de=Yu(t,Gu(e))),t.de}function Yu(e,t){if("F"===e.limitType)return Fu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new yu(e.field,t)}));const n=e.endAt?new mu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mu(e.startAt.position,e.startAt.inclusive):null;return Fu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ju(e,t){const n=e.filters.concat([t]);return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Qu(e,t,n){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xu(e,t){return $u(Ku(e),Ku(t))&&e.limitType===t.limitType}function Zu(e){return`${Uu(Ku(e))}|lt:${e.limitType}`}function ed(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Eu(e))).join(", ")}]`),Bl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>eu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>eu(e))).join(",")),`Target(${t})`}(Ku(e))}; limitType=${e.limitType})`}function td(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Al.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Gu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gu(e),t))&&!(e.endAt&&!function(e,t,n){const r=gu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gu(e),t))}(e,t)}function nd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rd(e){return(t,n)=>{let r=!1;for(const i of Gu(e)){const e=id(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function id(e,t,n){const r=e.field.isKeyField()?Al.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Qc(r,i):Ja(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ja(19790,{direction:e.dir})}}class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return wc(this.inner)}size(){return this.innerSize}}const sd=new xc(Al.comparator);function ad(){return sd}const ld=new xc(Al.comparator);function cd(){let e=ld;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ud(e){let t=ld;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function dd(){return pd()}function hd(){return pd()}function pd(){return new od((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fd=new xc(Al.comparator),md=new _c(Al.comparator);function gd(){let e=md;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const vd=new _c(pl);function yd(){return vd}function bd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(t)?"-0":t}}function wd(e){return{integerValue:""+e}}function xd(e,t){return Wl(t)?wd(t):bd(e,t)}class Sd{constructor(){this._=void 0}}function Cd(e,t,n){return e instanceof Td?function(e,t){const n={fields:{[Oc]:{stringValue:Nc},[Mc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lc(t)&&(t=Fc(t)),t&&(n.fields[Dc]=t),{mapValue:n}}(n,t):e instanceof Ad?Ed(e,t):e instanceof Id?Rd(e,t):function(e,t){const n=kd(e,t),r=jd(n)+jd(e.Re);return iu(n)&&iu(e.Re)?wd(r):bd(e.serializer,r)}(e,t)}function _d(e,t,n){return e instanceof Ad?Ed(e,t):e instanceof Id?Rd(e,t):n}function kd(e,t){return e instanceof Pd?function(e){return iu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Td extends Sd{}class Ad extends Sd{constructor(e){super(),this.elements=e}}function Ed(e,t){const n=Nd(t);for(const r of e.elements)n.some((e=>Yc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Id extends Sd{constructor(e){super(),this.elements=e}}function Rd(e,t){let n=Nd(t);for(const r of e.elements)n=n.filter((e=>!Yc(e,r)));return{arrayValue:{values:n}}}class Pd extends Sd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function jd(e){return Pc(e.integerValue||e.doubleValue)}function Nd(e){return ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Od{constructor(e,t){this.field=e,this.transform=t}}class Dd{constructor(e,t){this.version=e,this.transformResults=t}}class Md{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Md}static exists(e){return new Md(void 0,e)}static updateTime(e){return new Md(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fd{}function Ud(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yd(e.key,Md.none()):new Wd(e.key,e.data,Md.none());{const n=e.data,r=hu.empty();let i=new _c(Tl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Hd(e.key,r,new Tc(i.toArray()),Md.none())}}function $d(e,t,n){e instanceof Wd?function(e,t,n){const r=e.value.clone(),i=Gd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hd?function(e,t,n){if(!Ld(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vd(e,t,n,r){return e instanceof Wd?function(e,t,n,r){if(!Ld(e.precondition,t))return n;const i=e.value.clone(),o=Kd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hd?function(e,t,n,r){if(!Ld(e.precondition,t))return n;const i=Kd(e.fieldTransforms,r,t),o=t.data;return o.setAll(qd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ld(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=kd(r.transform,e||null);null!=i&&(null===n&&(n=hu.empty()),n.set(r.field,i))}return n||null}function zd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ad&&t instanceof Ad||e instanceof Id&&t instanceof Id?vl(e.elements,t.elements,Yc):e instanceof Pd&&t instanceof Pd?Yc(e.Re,t.Re):e instanceof Td&&t instanceof Td}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Wd extends Fd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hd extends Fd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Gd(e,t,n){const r=new Map;Xa(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,_d(s,a,n[i]))}return r}function Kd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Cd(e,o,t))}return r}class Yd extends Fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jd extends Fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$d(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hd();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Ud(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(xl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gd())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,((e,t)=>zd(e,t)))&&vl(this.baseMutations,e.baseMutations,((e,t)=>zd(e,t)))}}class Xd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Xa(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=fd;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Xd(e,t,n,r)}}class Zd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eh{constructor(e,t){this.count=e,this.unchangedNames=t}}var th,nh;function rh(e){switch(e){case el.OK:return Ja(64938);case el.CANCELLED:case el.UNKNOWN:case el.DEADLINE_EXCEEDED:case el.RESOURCE_EXHAUSTED:case el.INTERNAL:case el.UNAVAILABLE:case el.UNAUTHENTICATED:return!1;case el.INVALID_ARGUMENT:case el.NOT_FOUND:case el.ALREADY_EXISTS:case el.PERMISSION_DENIED:case el.FAILED_PRECONDITION:case el.ABORTED:case el.OUT_OF_RANGE:case el.UNIMPLEMENTED:case el.DATA_LOSS:return!0;default:return Ja(15467,{code:e})}}function ih(e){if(void 0===e)return Ga("GRPC error has no .code"),el.UNKNOWN;switch(e){case th.OK:return el.OK;case th.CANCELLED:return el.CANCELLED;case th.UNKNOWN:return el.UNKNOWN;case th.DEADLINE_EXCEEDED:return el.DEADLINE_EXCEEDED;case th.RESOURCE_EXHAUSTED:return el.RESOURCE_EXHAUSTED;case th.INTERNAL:return el.INTERNAL;case th.UNAVAILABLE:return el.UNAVAILABLE;case th.UNAUTHENTICATED:return el.UNAUTHENTICATED;case th.INVALID_ARGUMENT:return el.INVALID_ARGUMENT;case th.NOT_FOUND:return el.NOT_FOUND;case th.ALREADY_EXISTS:return el.ALREADY_EXISTS;case th.PERMISSION_DENIED:return el.PERMISSION_DENIED;case th.FAILED_PRECONDITION:return el.FAILED_PRECONDITION;case th.ABORTED:return el.ABORTED;case th.OUT_OF_RANGE:return el.OUT_OF_RANGE;case th.UNIMPLEMENTED:return el.UNIMPLEMENTED;case th.DATA_LOSS:return el.DATA_LOSS;default:return Ja(39323,{code:e})}}(nh=th||(th={}))[nh.OK=0]="OK",nh[nh.CANCELLED=1]="CANCELLED",nh[nh.UNKNOWN=2]="UNKNOWN",nh[nh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nh[nh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nh[nh.NOT_FOUND=5]="NOT_FOUND",nh[nh.ALREADY_EXISTS=6]="ALREADY_EXISTS",nh[nh.PERMISSION_DENIED=7]="PERMISSION_DENIED",nh[nh.UNAUTHENTICATED=16]="UNAUTHENTICATED",nh[nh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nh[nh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nh[nh.ABORTED=10]="ABORTED",nh[nh.OUT_OF_RANGE=11]="OUT_OF_RANGE",nh[nh.UNIMPLEMENTED=12]="UNIMPLEMENTED",nh[nh.INTERNAL=13]="INTERNAL",nh[nh.UNAVAILABLE=14]="UNAVAILABLE",nh[nh.DATA_LOSS=15]="DATA_LOSS";let oh=null;const sh=new Ta([4294967295,4294967295],0);function ah(e){const t=dl().encode(e),n=new Aa;return n.update(t),new Uint8Array(n.digest())}function lh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ta([n,r],0),new Ta([i,o],0)]}class ch{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new uh(`Invalid padding: ${t}`);if(n<0)throw new uh(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new uh(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new uh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ta.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Ta.fromNumber(n)));return 1===r.compare(sh)&&(r=new Ta([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=ah(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ch(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.pe)return;const t=ah(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new dh(xl.min(),r,new xc(pl),ad(),gd())}}class hh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new hh(n,t,gd(),gd(),gd())}}class ph{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class fh{constructor(e,t){this.targetId=e,this.Ce=t}}class mh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class gh{constructor(){this.Fe=0,this.Me=bh(),this.xe=Ec.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=gd(),t=gd(),n=gd();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ja(38017,{changeType:i})}})),new hh(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=bh()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Xa(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class vh{constructor(e){this.ze=e,this.je=new Map,this.He=ad(),this.Je=yh(),this.Ye=yh(),this.Ze=new xc(pl)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Ja(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(Vu(i))if(0===n){const e=new Al(i.path);this.tt(t,e,fu.newNoDocument(e,xl.min()))}else Xa(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==oh||oh.ht(function(e,t,n,r,i){var o,s,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=jc(n).toUint8Array()}catch(e){if(e instanceof Ac)return Ka("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new ch(o,r,i)}catch(e){return Ka(e instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.pe?null:s}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&Vu(i.target)){const t=new Al(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,fu.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=gd();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new dh(e,t,this.Ze,this.He,n);return this.He=ad(),this.Je=yh(),this.Ye=yh(),this.Ze=new xc(pl),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new gh,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new _c(pl),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new _c(pl),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||qa("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new gh),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function yh(){return new xc(Al.comparator)}function bh(){return new xc(Al.comparator)}const wh={asc:"ASCENDING",desc:"DESCENDING"},xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sh={and:"AND",or:"OR"};class Ch{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _h(e,t){return e.useProto3Json||Bl(t)?t:{value:t}}function kh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Th(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ah(e,t){return kh(e,t.toTimestamp())}function Eh(e){return Xa(!!e,49232),xl.fromTimestamp(function(e){const t=Rc(e);return new wl(t.seconds,t.nanos)}(e))}function Ih(e,t){return Rh(e,t).canonicalString()}function Rh(e,t){const n=function(e){return new _l(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ph(e){const t=_l.fromString(e);return Xa(Qh(t),10190,{key:t.toString()}),t}function jh(e,t){return Ih(e.databaseId,t.path)}function Nh(e,t){const n=Ph(t);if(n.get(1)!==e.databaseId.projectId)throw new tl(el.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new tl(el.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Al(Lh(n))}function Oh(e,t){return Ih(e.databaseId,t)}function Dh(e){const t=Ph(e);return 4===t.length?_l.emptyPath():Lh(t)}function Mh(e){return new _l(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lh(e){return Xa(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Fh(e,t,n){return{name:jh(e,t),fields:n.value.mapValue.fields}}function Uh(e,t){let n;if(t instanceof Wd)n={update:Fh(e,t.key,t.value)};else if(t instanceof Yd)n={delete:jh(e,t.key)};else if(t instanceof Hd)n={update:Fh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof Jd))return Ja(16599,{ft:t.type});n={verify:jh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Td)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Id)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw Ja(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ja(27497)}(e,t.precondition)),n}function $h(e,t){return{documents:[Oh(e,t.path)]}}function Vh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Oh(e,i);const o=function(e){if(0!==e.length)return Yh(Su.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Gh(e.field),direction:Wh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=_h(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function Bh(e){let t=Dh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xa(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=zh(e);return t instanceof Su&&_u(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new yu(Kh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Bl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mu(n,t)}(n.endAt)),zu(t,i,s,o,a,"F",l,c)}function zh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kh(e.unaryFilter.field);return xu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Kh(e.unaryFilter.field);return xu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kh(e.unaryFilter.field);return xu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kh(e.unaryFilter.field);return xu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ja(61313);default:return Ja(60726)}}(e):void 0!==e.fieldFilter?function(e){return xu.create(Kh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ja(58110);default:return Ja(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Su.create(e.compositeFilter.filters.map((e=>zh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ja(1026)}}(e.compositeFilter.op))}(e):Ja(30097,{filter:e})}function Wh(e){return wh[e]}function Hh(e){return xh[e]}function qh(e){return Sh[e]}function Gh(e){return{fieldPath:e.canonicalString()}}function Kh(e){return Tl.fromServerFormat(e.fieldPath)}function Yh(e){return e instanceof xu?function(e){if("=="===e.op){if(au(e.value))return{unaryFilter:{field:Gh(e.field),op:"IS_NAN"}};if(su(e.value))return{unaryFilter:{field:Gh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(au(e.value))return{unaryFilter:{field:Gh(e.field),op:"IS_NOT_NAN"}};if(su(e.value))return{unaryFilter:{field:Gh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gh(e.field),op:Hh(e.op),value:e.value}}}(e):e instanceof Su?function(e){const t=e.getFilters().map((e=>Yh(e)));return 1===t.length?t[0]:{compositeFilter:{op:qh(e.op),filters:t}}}(e):Ja(54877,{filter:e})}function Jh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ec.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Xh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zh{constructor(e){this.wt=e}}function ep(e){const t=Bh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qu(t,t.limit,"L"):t}class tp{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Pc(e.integerValue));else if("doubleValue"in e){const n=Pc(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),zl(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Rc(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(jc(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?du(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):cu(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Ja(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const o=Gc,s=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Pc(s)),this.Nt(o,t),this.Ct(i[o],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Al.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}tp.Wt=new tp;class np{constructor(){this.yn=new rp}addToCollectionParentIndex(e,t){return this.yn.add(t),Ll.resolve()}getCollectionParents(e,t){return Ll.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Ll.resolve()}deleteFieldIndex(e,t){return Ll.resolve()}deleteAllFieldIndexes(e){return Ll.resolve()}createTargetIndexes(e,t){return Ll.resolve()}getDocumentsMatchingTarget(e,t){return Ll.resolve(null)}getIndexType(e,t){return Ll.resolve(0)}getFieldIndexes(e,t){return Ll.resolve([])}getNextCollectionGroupToUpdate(e){return Ll.resolve(null)}getMinOffset(e,t){return Ll.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,t){return Ll.resolve(jl.min())}updateCollectionGroup(e,t,n){return Ll.resolve()}updateIndexEntries(e,t){return Ll.resolve()}}class rp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _c(_l.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new _c(_l.comparator)).toArray()}}new Uint8Array(0);const ip={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},op=41943040;class sp{static withCacheSize(e){return new sp(e,sp.DEFAULT_COLLECTION_PERCENTILE,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}sp.DEFAULT_COLLECTION_PERCENTILE=10,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sp.DEFAULT=new sp(op,sp.DEFAULT_COLLECTION_PERCENTILE,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sp.DISABLED=new sp(-1,0,0);class ap{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ap(0)}static ir(){return new ap(-1)}}const lp="LruGarbageCollector",cp=1048576;function up(e,t){let[n,r]=e,[i,o]=t;const s=pl(n,i);return 0===s?pl(r,o):s}class dp{constructor(e){this.cr=e,this.buffer=new _c(up),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();up(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){qa(lp,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ul(e)?qa(lp,"Ignoring IndexedDB error during garbage collection: ",e):await Ml(e)}await this.Ir(3e5)}))}}class pp{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ll.resolve($l.le);const n=new dp(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qa("LruGarbageCollector","Garbage collection skipped; disabled"),Ll.resolve(ip)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(qa("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ip):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(qa("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ha()<=pn.DEBUG&&qa("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(s-o)+"ms\n"+`\tRemoved ${i} targets in `+(a-s)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Ll.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function fp(e,t){return new pp(e,t)}class mp{constructor(){this.changes=new od((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ll.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Vd(n.mutation,e,Tc.empty(),wl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,gd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gd();const r=dd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=cd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=dd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ad();const o=pd(),s=pd();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Hd)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Vd(s.mutation,t,s.mutation.getFieldMask(),wl.now())):o.set(t.key,Tc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new gp(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=pd();let r=new xc(((e,t)=>e-t)),i=gd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Tc.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||gd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=hd();l.forEach((e=>{if(!i.has(e)){const r=Ud(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ll.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Al.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ll.resolve(dd());let s=El,a=i;return o.next((t=>Ll.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Ll.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,gd()))).next((e=>({batchId:s,changes:ud(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Al(t)).next((e=>{let t=cd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=cd();return this.indexManager.getCollectionParents(e,i).next((s=>Ll.forEach(s,(s=>{const a=function(e,t){return new Bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fu.newInvalidDocument(r)))}));let n=cd();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Vd(o.mutation,r,Tc.empty(),wl.now()),td(t,r)&&(n=n.insert(e,r))})),n}))}}class yp{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Ll.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Eh(e.createTime)}}(t)),Ll.resolve()}getNamedQuery(e,t){return Ll.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:ep(e.bundledQuery),readTime:Eh(e.readTime)}}(t)),Ll.resolve()}}class bp{constructor(){this.overlays=new xc(Al.comparator),this.Or=new Map}getOverlay(e,t){return Ll.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dd();return Ll.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Ll.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),Ll.resolve()}getOverlaysForCollection(e,t,n){const r=dd(),i=t.length+1,o=new Al(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ll.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xc(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=dd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Ll.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Zd(t,n));let i=this.Or.get(t);void 0===i&&(i=gd(),this.Or.set(t,i)),this.Or.set(t,i.add(n.key))}}class wp{constructor(){this.sessionToken=Ec.EMPTY_BYTE_STRING}getSessionToken(e){return Ll.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ll.resolve()}}class xp{constructor(){this.Nr=new _c(Sp.Br),this.Lr=new _c(Sp.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new Sp(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new Sp(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new Al(new _l([])),n=new Sp(t,e),r=new Sp(t,e+1),i=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),i.push(e.key)})),i}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Al(new _l([])),n=new Sp(t,e),r=new Sp(t,e+1);let i=gd();return this.Lr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Sp(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sp{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Al.comparator(e.key,t.key)||pl(e.Gr,t.Gr)}static kr(e,t){return pl(e.Gr,t.Gr)||Al.comparator(e.key,t.key)}}class Cp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new _c(Sp.Br)}checkEmpty(e){return Ll.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Qd(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.zr=this.zr.add(new Sp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Ll.resolve(o)}lookupMutationBatch(e,t){return Ll.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),i=r<0?0:r;return Ll.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ll.resolve(0===this.mutationQueue.length?Vl:this.Jn-1)}getAllMutationBatches(e){return Ll.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sp(t,0),r=new Sp(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);i.push(t)})),Ll.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _c(pl);return t.forEach((e=>{const t=new Sp(e,0),r=new Sp(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),Ll.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Al.isDocumentKey(i)||(i=i.child(""));const o=new Sp(new Al(i),0);let s=new _c(pl);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Gr)),!0)}),o),Ll.resolve(this.Jr(s))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Xa(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return Ll.forEach(t.mutations,(r=>{const i=new Sp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new Sp(t,0),r=this.zr.firstAfterOrEqual(n);return Ll.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ll.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _p{constructor(e){this.Zr=e,this.docs=new xc(Al.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ll.resolve(n?n.document.mutableCopy():fu.newInvalidDocument(t))}getEntries(e,t){let n=ad();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fu.newInvalidDocument(e))})),Ll.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ad();const o=t.path,s=new Al(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Nl(Pl(s),n)<=0||(r.has(s.key)||td(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Ll.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ja(9500)}Xr(e,t){return Ll.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new kp(this)}getSize(e){return Ll.resolve(this.size)}}class kp extends mp{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),Ll.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class Tp{constructor(e){this.persistence=e,this.ei=new od((e=>Uu(e)),$u),this.lastRemoteSnapshotVersion=xl.min(),this.highestTargetId=0,this.ti=0,this.ni=new xp,this.targetCount=0,this.ri=ap.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),Ll.resolve()}getLastRemoteSnapshotVersion(e){return Ll.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ll.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Ll.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),Ll.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ap(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Ll.resolve()}updateTargetData(e,t){return this.ar(t),Ll.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Ll.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ei.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Ll.waitFor(i).next((()=>r))}getTargetCount(e){return Ll.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return Ll.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),Ll.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ll.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Ll.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return Ll.resolve(n)}containsKey(e,t){return Ll.resolve(this.ni.containsKey(t))}}class Ap{constructor(e,t){this.ii={},this.overlays={},this.si=new $l(0),this.oi=!1,this.oi=!0,this._i=new wp,this.referenceDelegate=e(this),this.ai=new Tp(this),this.indexManager=new np,this.remoteDocumentCache=function(e){return new _p(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new Zh(t),this.ci=new yp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new Cp(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){qa("MemoryPersistence","Starting transaction:",e);const r=new Ep(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return Ll.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class Ep extends Dl{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Ti=new xp,this.Ii=null}static Ei(e){return new Ip(e)}get di(){if(this.Ii)return this.Ii;throw Ja(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),Ll.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),Ll.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Ll.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ll.forEach(this.di,(n=>{const r=Al.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,xl.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return Ll.or([()=>Ll.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Rp{constructor(e,t){this.persistence=e,this.Ri=new od((e=>ql(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=fp(this,t)}static Ei(e,t){return new Rp(e,t)}li(){}hi(e){return Ll.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return Ll.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?Ll.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,xl.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Ll.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Ll.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Ll.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Ll.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nu(e.data.value)),t}gr(e,t,n){return Ll.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return Ll.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=gd(),r=gd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pp(e,t.fromCache,n,r)}}class jp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Np{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=Lt()?8:Fl(Nt())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Vs(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new jp;return this.fs(e,t,n).next((r=>{if(i.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>i.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(Ha()<=pn.DEBUG&&qa("QueryEngine","SDK will not create cache indexes for query:",ed(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Ll.resolve()):(Ha()<=pn.DEBUG&&qa("QueryEngine","Query:",ed(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(Ha()<=pn.DEBUG&&qa("QueryEngine","The SDK decides to create cache indexes for query:",ed(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ku(t))):Ll.resolve())}Rs(e,t){if(Hu(t))return Ll.resolve(null);let n=Ku(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Qu(t,null,"F"),n=Ku(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=gd(...r);return this.As.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ps(t,r);return this.ys(t,o,i,n.readTime)?this.Rs(e,Qu(t,null,"F")):this.ws(e,o,t,n)}))))})))))}Vs(e,t,n,r){return Hu(t)||r.isEqual(xl.min())?Ll.resolve(null):this.As.getDocuments(e,n).next((i=>{const o=this.ps(t,i);return this.ys(t,o,n,r)?Ll.resolve(null):(Ha()<=pn.DEBUG&&qa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ed(t)),this.ws(e,o,t,Rl(r,El)).next((e=>e)))}))}ps(e,t){let n=new _c(rd(e));return t.forEach(((t,r)=>{td(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}fs(e,t,n){return Ha()<=pn.DEBUG&&qa("QueryEngine","Using full collection scan to execute query:",ed(t)),this.As.getDocumentsMatchingQuery(e,t,jl.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Op="LocalStore";class Dp{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new xc(pl),this.Ds=new od((e=>Uu(e)),$u),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vp(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function Mp(e,t,n,r){return new Dp(e,t,n,r)}async function Lp(e,t){const n=Za(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=gd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({Ms:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Fp(e){const t=Za(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function Up(e,t,n){let r=gd(),i=gd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ad();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(xl.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):qa(Op,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{xs:r,Os:i}}))}function $p(e,t){const n=Za(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Vl),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Vp(e,t){const n=Za(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((i=>i?(r=i,Ll.resolve(r)):n.ai.allocateTargetId(e).next((i=>(r=new Xh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function Bp(e,t,n){const r=Za(e),i=r.Ss.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ul(e))throw e;qa(Op,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(i.target)}function zp(e,t,n){const r=Za(e);let i=xl.min(),o=gd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Za(e),i=r.Ds.get(n);return void 0!==i?Ll.resolve(r.Ss.get(i)):r.ai.getTargetData(t,n)}(r,e,Ku(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?i:xl.min(),n?o:gd()))).next((e=>(Wp(r,nd(t),e),{documents:e,Ns:o})))))}function Wp(e,t,n){let r=e.vs.get(t)||xl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}class Hp{constructor(){this.activeTargetIds=yd()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qp{constructor(){this.So=new Hp,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Hp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gp{vo(e){}shutdown(){}}const Kp="ConnectivityMonitor";class Yp{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){qa(Kp,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){qa(Kp,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jp=null;function Qp(){return null===Jp?Jp=268435456+Math.round(2147483648*Math.random()):Jp++,"0x"+Jp.toString(16)}const Xp="RestConnection",Zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ef{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Vc?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,i){const o=Qp(),s=this.$o(e,t.toUriEncodedString());qa(Xp,`Sending RPC '${e}' ${o}:`,s,n);const a={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(a,r,i),this.Ko(e,s,a,n).then((t=>(qa(Xp,`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw Ka(Xp,`RPC '${e}' ${o} failed with error: `,t,"url: ",s,"request:",n),t}))}Wo(e,t,n,r,i,o){return this.Qo(e,t,n,r,i)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=Zp[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}class tf{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const nf="WebChannelConnection";class rf extends ef{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const i=Qp();return new Promise(((o,s)=>{const a=new Ra;a.setWithCredentials(!0),a.listenOnce(ja.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Na.NO_ERROR:const t=a.getResponseJson();qa(nf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case Na.TIMEOUT:qa(nf,`RPC '${e}' ${i} timed out`),s(new tl(el.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:const n=a.getStatus();if(qa(nf,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(el).indexOf(t)>=0?t:el.UNKNOWN}(t.status);s(new tl(e,t.message))}else s(new tl(el.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new tl(el.UNAVAILABLE,"Connection failed."));break;default:Ja(9055,{s_:e,streamId:i,o_:a.getLastErrorCode(),__:a.getLastError()})}}finally{qa(nf,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);qa(nf,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Qp(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=La(),s=Ma(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Uo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");qa(nf,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const p=new tf({Go:t=>{h?qa(nf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(qa(nf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),qa(nf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Pa.EventType.OPEN,(()=>{h||(qa(nf,`RPC '${e}' stream ${r} transport opened.`),p.t_())})),f(u,Pa.EventType.CLOSE,(()=>{h||(h=!0,qa(nf,`RPC '${e}' stream ${r} transport closed`),p.r_())})),f(u,Pa.EventType.ERROR,(t=>{h||(h=!0,Ka(nf,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.r_(new tl(el.UNAVAILABLE,"The operation could not be completed")))})),f(u,Pa.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Xa(!!i,16349);const o=i,s=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){qa(nf,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=th[e];if(void 0!==t)return ih(t)}(t),i=s.message;void 0===n&&(n=el.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,p.r_(new tl(n,i)),u.close()}else qa(nf,`RPC '${e}' stream ${r} received:`,i),p.i_(i)}})),f(s,Da.STAT_EVENT,(t=>{t.stat===Oa.PROXY?qa(nf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Oa.NOPROXY&&qa(nf,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.n_()}),0),p}}function of(){return"undefined"!=typeof document?document:null}function sf(e){return new Ch(e,!0)}class af{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&qa("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const lf="PersistentStream";class cf{constructor(e,t,n,r,i,o,s,a){this.bi=e,this.R_=n,this.V_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new af(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===el.RESOURCE_EXHAUSTED?(Ga(t.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===el.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new tl(el.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return qa(lf,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(qa(lf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uf extends cf{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ja(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Xa(void 0===t||"string"==typeof t,58123),Ec.fromBase64String(t||"")):(Xa(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ec.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?el.UNKNOWN:ih(e.code);return new tl(t,e.message||"")}(s);n=new mh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nh(e,r.document.name),o=Eh(r.document.updateTime),s=r.document.createTime?Eh(r.document.createTime):xl.min(),a=new hu({mapValue:{fields:r.document.fields}}),l=fu.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ph(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Nh(e,r.document),o=r.readTime?Eh(r.readTime):xl.min(),s=fu.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ph([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Nh(e,r.document),o=r.removedTargetIds||[];n=new ph([],o,i,null)}else{if(!("filter"in t))return Ja(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new eh(r,i),s=e.targetId;n=new fh(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return xl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?xl.min():t.readTime?Eh(t.readTime):xl.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=Mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Vu(r)?{documents:$h(e,r)}:{query:Vh(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Th(e,t.resumeToken);const r=_h(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(xl.min())>0){n.readTime=kh(e,t.snapshotVersion.toTimestamp());const r=_h(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ja(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=Mh(this.serializer),t.removeTarget=e,this.F_(t)}}class df extends cf{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Xa(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xa(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Xa(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Xa(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Eh(e.updateTime):Eh(t);return n.isEqual(xl.min())&&(n=Eh(t)),new Dd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Eh(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=Mh(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Uh(this.serializer,e)))};this.F_(t)}}class hf{}class pf extends hf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new tl(el.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Qo(e,Rh(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===el.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tl(el.UNKNOWN,e.toString())}))}Wo(e,t,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.Wo(e,Rh(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===el.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tl(el.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class ff{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ga(t),this.ea=!1):qa("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const mf="RemoteStore";class gf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo((e=>{n.enqueueAndForget((async()=>{kf(this)&&(qa(mf,"Restarting streams for network reachability change."),await async function(e){const t=Za(e);t.aa.add(4),await yf(t),t.la.set("Unknown"),t.aa.delete(4),await vf(t)}(this))}))})),this.la=new ff(n,r)}}async function vf(e){if(kf(e))for(const t of e.ua)await t(!0)}async function yf(e){for(const t of e.ua)await t(!1)}function bf(e,t){const n=Za(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),_f(n)?Cf(n):Wf(n).b_()&&xf(n,t))}function wf(e,t){const n=Za(e),r=Wf(n);n._a.delete(t),r.b_()&&Sf(n,t),0===n._a.size&&(r.b_()?r.v_():kf(n)&&n.la.set("Unknown"))}function xf(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wf(e).U_(t)}function Sf(e,t){e.ha.Ke(t),Wf(e).K_(t)}function Cf(e){e.ha=new vh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Wf(e).start(),e.la.ta()}function _f(e){return kf(e)&&!Wf(e).w_()&&e._a.size>0}function kf(e){return 0===Za(e).aa.size}function Tf(e){e.ha=void 0}async function Af(e){e.la.set("Online")}async function Ef(e){e._a.forEach(((t,n)=>{xf(e,t)}))}async function If(e,t){Tf(e),_f(e)?(e.la.ia(t),Cf(e)):e.la.set("Unknown")}async function Rf(e,t,n){if(e.la.set("Online"),t instanceof mh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){qa(mf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pf(e,n)}else if(t instanceof ph?e.ha.Xe(t):t instanceof fh?e.ha.ot(t):e.ha.nt(t),!n.isEqual(xl.min()))try{const t=await Fp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._a.get(r);i&&e._a.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(Ec.EMPTY_BYTE_STRING,r.snapshotVersion)),Sf(e,t);const i=new Xh(r.target,t,n,r.sequenceNumber);xf(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){qa(mf,"Failed to raise snapshot:",t),await Pf(e,t)}}async function Pf(e,t,n){if(!Ul(t))throw t;e.aa.add(1),await yf(e),e.la.set("Offline"),n||(n=()=>Fp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{qa(mf,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await vf(e)}))}function jf(e,t){return t().catch((n=>Pf(e,n,t)))}async function Nf(e){const t=Za(e),n=Hf(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:Vl;for(;Of(t);)try{const e=await $p(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,Df(t,e)}catch(e){await Pf(t,e)}Mf(t)&&Lf(t)}function Of(e){return kf(e)&&e.oa.length<10}function Df(e,t){e.oa.push(t);const n=Hf(e);n.b_()&&n.W_&&n.G_(t.mutations)}function Mf(e){return kf(e)&&!Hf(e).w_()&&e.oa.length>0}function Lf(e){Hf(e).start()}async function Ff(e){Hf(e).H_()}async function Uf(e){const t=Hf(e);for(const n of e.oa)t.G_(n.mutations)}async function $f(e,t,n){const r=e.oa.shift(),i=Xd.from(r,t,n);await jf(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Nf(e)}async function Vf(e,t){t&&Hf(e).W_&&await async function(e,t){if(function(e){return rh(e)&&e!==el.ABORTED}(t.code)){const n=e.oa.shift();Hf(e).D_(),await jf(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Nf(e)}}(e,t),Mf(e)&&Lf(e)}async function Bf(e,t){const n=Za(e);n.asyncQueue.verifyOperationInProgress(),qa(mf,"RemoteStore received new credentials");const r=kf(n);n.aa.add(3),await yf(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await vf(n)}async function zf(e,t){const n=Za(e);t?(n.aa.delete(2),await vf(n)):t||(n.aa.add(2),await yf(n),n.la.set("Unknown"))}function Wf(e){return e.Pa||(e.Pa=function(e,t,n){const r=Za(e);return r.Y_(),new uf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:Af.bind(null,e),Jo:Ef.bind(null,e),Zo:If.bind(null,e),Q_:Rf.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),_f(e)?Cf(e):e.la.set("Unknown")):(await e.Pa.stop(),Tf(e))}))),e.Pa}function Hf(e){return e.Ta||(e.Ta=function(e,t,n){const r=Za(e);return r.Y_(),new df(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:Ff.bind(null,e),Zo:Vf.bind(null,e),z_:Uf.bind(null,e),j_:$f.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await Nf(e)):(await e.Ta.stop(),e.oa.length>0&&(qa(mf,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta}class qf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new qf(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tl(el.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gf(e,t){if(Ga("AsyncQueue",`${t}: ${e}`),Ul(e))return new tl(el.UNAVAILABLE,`${t}: ${e}`);throw e}class Kf{static emptySet(e){return new Kf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Al.comparator(t.key,n.key):(e,t)=>Al.comparator(e.key,t.key),this.keyedMap=cd(),this.sortedSet=new xc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yf{constructor(){this.Ia=new xc(Al.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ja(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Jf{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Jf(e,t,Kf.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Qf{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class Xf{constructor(){this.queries=Zf(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=Za(e),r=n.queries;n.queries=Zf(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new tl(el.ABORTED,"Firestore shutting down"))}}function Zf(){return new od((e=>Zu(e)),Xu)}async function em(e,t){const n=Za(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Va()&&t.ma()&&(r=2):(o=new Qf,r=t.ma()?0:1);try{switch(r){case 0:o.Aa=await n.onListen(i,!0);break;case 1:o.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Gf(e,`Initialization of query '${ed(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.Ra.push(t),t.ga(n.onlineState),o.Aa&&t.pa(o.Aa)&&im(n)}async function tm(e,t){const n=Za(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Ra.indexOf(t);e>=0&&(o.Ra.splice(e,1),0===o.Ra.length?i=t.ma()?0:1:!o.Va()&&t.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nm(e,t){const n=Za(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(i)&&(r=!0);t.Aa=i}}r&&im(n)}function rm(e,t,n){const r=Za(e),i=r.queries.get(t);if(i)for(const o of i.Ra)o.onError(n);r.queries.delete(t)}function im(e){e.fa.forEach((e=>{e.next()}))}var om,sm;(sm=om||(om={})).ya="default",sm.Cache="cache";class am{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=Jf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==om.Cache}}class lm{constructor(e){this.key=e}}class cm{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=gd(),this.mutatedKeys=gd(),this.Ua=rd(e),this.Ka=new Kf(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new Yf,r=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=td(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.ja(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Ua(u,a)>0||l&&this.Ua(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(s=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ka:o,za:n,ys:s,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ja(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const s=t&&!r?this.Ja():[],a=0===this.$a.size&&this.current&&!r?1:0,l=a!==this.Qa;return this.Qa=a,0!==o.length||l?{snapshot:new Jf(this.query,e.Ka,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:s}:{Ya:s}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Yf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=gd(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new cm(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new lm(n))})),t}Xa(e){this.qa=e.Ns,this.$a=gd();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Jf.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const dm="SyncEngine";class hm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class pm{constructor(e){this.key=e,this.tu=!1}}class fm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new od((e=>Zu(e)),Xu),this.iu=new Map,this.su=new Set,this.ou=new xc(Al.comparator),this._u=new Map,this.au=new xp,this.uu={},this.cu=new Map,this.lu=ap.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function mm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Mm(e);let i;const o=r.ru.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=await vm(r,t,n,!0),i}async function gm(e,t){const n=Mm(e);await vm(n,t,!0,!1)}async function vm(e,t,n,r){const i=await Vp(e.localStore,Ku(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await ym(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&bf(e.remoteStore,i),a}async function ym(e,t,n,r,i){e.Pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ga(n);i.ys&&(i=await zp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Rm(e,t.targetId,a.Ya),a.snapshot}(e,t,n,r);const o=await zp(e.localStore,t,!0),s=new um(t,o.Ns),a=s.Ga(o.documents),l=hh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Rm(e,n,c.Ya);const u=new hm(t,n,s);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function bm(e,t,n){const r=Za(e),i=r.ru.get(t),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter((e=>!Xu(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wf(r.remoteStore,i.targetId),Em(r,i.targetId)})).catch(Ml)):(Em(r,i.targetId),await Bp(r.localStore,i.targetId,!0))}async function wm(e,t){const n=Za(e),r=n.ru.get(t),i=n.iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wf(n.remoteStore,r.targetId))}async function xm(e,t){const n=Za(e);try{const e=await function(e,t){const n=Za(e),r=t.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.ai.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.ai.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Ec.EMPTY_BYTE_STRING,xl.min()).withLastLimboFreeSnapshotVersion(xl.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.ai.updateTargetData(e,c))}));let a=ad(),l=gd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Up(e,o,t.documentUpdates).next((e=>{a=e.xs,l=e.Os}))),!r.isEqual(xl.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Ll.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Xa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Xa(r.tu,14607):e.removedDocuments.size>0&&(Xa(r.tu,42227),r.tu=!1))})),await Nm(n,e,t)}catch(e){await Ml(e)}}function Sm(e,t,n){const r=Za(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const i=r.view.ga(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Za(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Ra)i.ga(t)&&(r=!0)})),r&&im(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Cm(e,t,n){const r=Za(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r._u.get(t),o=i&&i.key;if(o){let e=new xc(Al.comparator);e=e.insert(o,fu.newNoDocument(o,xl.min()));const n=gd().add(o),i=new dh(xl.min(),new Map,new xc(pl),e,n);await xm(r,i),r.ou=r.ou.remove(o),r._u.delete(t),jm(r)}else await Bp(r.localStore,t,!1).then((()=>Em(r,t,n))).catch(Ml)}async function _m(e,t){const n=Za(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Za(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Ll.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Xa(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Am(n,r,null),Tm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nm(n,e)}catch(e){await Ml(e)}}async function km(e,t,n){const r=Za(e);try{const e=await function(e,t){const n=Za(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Xa(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Am(r,t,n),Tm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Nm(r,e)}catch(n){await Ml(n)}}function Tm(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function Am(e,t,n){const r=Za(e);let i=r.uu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.uu[r.currentUser.toKey()]=i}}function Em(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||Im(e,t)}))}function Im(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(wf(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),jm(e))}function Rm(e,t,n){for(const r of n)r instanceof lm?(e.au.addReference(r.key,t),Pm(e,r)):r instanceof cm?(qa(dm,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||Im(e,r.key)):Ja(19791,{Iu:r})}function Pm(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(qa(dm,"New document in limbo: "+n),e.su.add(r),jm(e))}function jm(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new Al(_l.fromString(t)),r=e.lu.next();e._u.set(r,new pm(n)),e.ou=e.ou.insert(n,r),bf(e.remoteStore,new Xh(Ku(Wu(n.path)),r,"TargetPurposeLimboResolution",$l.le))}}async function Nm(e,t,n){const r=Za(e),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach(((e,a)=>{s.push(r.Pu(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Pp.Ps(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.nu.Q_(i),await async function(e,t){const n=Za(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ll.forEach(t,(t=>Ll.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ll.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ul(e))throw e;qa(Op,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,i)}}}(r.localStore,o))}async function Om(e,t){const n=Za(e);if(!n.currentUser.isEqual(t)){qa(dm,"User change. New user:",t.toKey());const e=await Lp(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new tl(el.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Nm(n,e.Ms)}}function Dm(e,t){const n=Za(e),r=n._u.get(t);if(r&&r.tu)return gd().add(r.key);{let e=gd();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function Mm(e){const t=Za(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,t),t.nu.Q_=nm.bind(null,t.eventManager),t.nu.Tu=rm.bind(null,t.eventManager),t}function Lm(e){const t=Za(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=km.bind(null,t),t}class Fm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Mp(this.persistence,new Np,e.initialUser,this.serializer)}Ru(e){return new Ap(Ip.Ei,this.serializer)}Au(e){return new qp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fm.provider={build:()=>new Fm};class Um extends Fm{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Xa(this.persistence.referenceDelegate instanceof Rp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new hp(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?sp.withCacheSize(this.cacheSizeBytes):sp.DEFAULT;return new Ap((e=>Rp.Ei(e,t)),this.serializer)}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Sm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Om.bind(null,this.syncEngine),await zf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Xf}createDatastore(e){const t=sf(e.databaseInfo.databaseId),n=function(e){return new rf(e)}(e.databaseInfo);return function(e,t,n,r){return new pf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new gf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Sm(this.syncEngine,e,0)),Yp.C()?new Yp:new Gp)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new fm(e,t,n,r,i,o);return s&&(a.hu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Za(e);qa(mf,"RemoteStore shutting down."),t.aa.add(5),await yf(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}$m.provider={build:()=>new $m};class Vm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ga("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Bm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new tl(el.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Za(e),r={documents:t.map((e=>jh(n.serializer,e)))},i=await n.Wo("BatchGetDocuments",n.serializer.databaseId,_l.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Xa(!!t.found,43571),t.found.name,t.found.updateTime;const n=Nh(e,t.found.name),r=Eh(t.found.updateTime),i=t.found.createTime?Eh(t.found.createTime):xl.min(),o=new hu({mapValue:{fields:t.found.fields}});return fu.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Xa(!!t.missing,3894),Xa(!!t.readTime,22933);const n=Nh(e,t.missing),r=Eh(t.readTime);return fu.newNoDocument(n,r)}(e,t):Ja(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());Xa(!!t,55234,{key:e}),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Al.fromPath(t);this.mutations.push(new Jd(n,this.precondition(n)))})),await async function(e,t){const n=Za(e),r={writes:t.map((e=>Uh(n.serializer,e)))};await n.Qo("Commit",n.serializer.databaseId,_l.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ja(50498,{xu:e.constructor.name});t=xl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new tl(el.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xl.min())?Md.exists(!1):Md.updateTime(t):Md.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xl.min()))throw new tl(el.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Md.updateTime(t)}return Md.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ou=n.maxAttempts,this.y_=new af(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){this.y_.E_((async()=>{const e=new Bm(this.datastore),t=this.Lu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ku(e)}))))})).catch((e=>{this.ku(e)}))}))}Lu(e){try{const t=this.updateFunction(e);return!Bl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget((()=>(this.Bu(),Promise.resolve())))):this.deferred.reject(e)}qu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rh(t)}return!1}}const Wm="FirestoreClient";class Hm{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ba.UNAUTHENTICATED,this.clientId=hl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{qa(Wm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(qa(Wm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(e_){const n=Gf(e_,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function qm(e,t){e.asyncQueue.verifyOperationInProgress(),qa(Wm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Lp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Gm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Km(e);qa(Wm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Bf(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Bf(t.remoteStore,n))),e._onlineComponents=t}async function Km(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qa(Wm,"Using user provided OfflineComponentProvider");try{await qm(e,e._uninitializedComponentsProvider._offline)}catch(e_){const n=e_;if(!function(e){return"FirebaseError"===e.name?e.code===el.FAILED_PRECONDITION||e.code===el.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await qm(e,new Fm)}}else qa(Wm,"Using default OfflineComponentProvider"),await qm(e,new Um(void 0));return e._offlineComponents}async function Ym(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qa(Wm,"Using user provided OnlineComponentProvider"),await Gm(e,e._uninitializedComponentsProvider._online)):(qa(Wm,"Using default OnlineComponentProvider"),await Gm(e,new $m))),e._onlineComponents}function Jm(e){return Ym(e).then((e=>e.syncEngine))}function Qm(e){return Ym(e).then((e=>e.datastore))}async function Xm(e){const t=await Ym(e),n=t.eventManager;return n.onListen=mm.bind(null,t.syncEngine),n.onUnlisten=bm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wm.bind(null,t.syncEngine),n}function Zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new nl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Vm({next:a=>{o.yu(),t.enqueueAndForget((()=>tm(e,s)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new tl(el.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new tl(el.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new am(Wu(n.path),o,{includeMetadataChanges:!0,Fa:!0});return em(e,s)}(await Xm(e),e.asyncQueue,t,n,r))),r.promise}function eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new nl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Vm({next:n=>{o.yu(),t.enqueueAndForget((()=>tm(e,s))),n.fromCache&&"server"===r.source?i.reject(new tl(el.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new am(n,o,{includeMetadataChanges:!0,Fa:!0});return em(e,s)}(await Xm(e),e.asyncQueue,t,n,r))),r.promise}function tg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ng=new Map;function rg(e,t,n){if(!n)throw new tl(el.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ig(e){if(!Al.isDocumentKey(e))throw new tl(el.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function og(e){if(Al.isDocumentKey(e))throw new tl(el.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function sg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ja(12329,{type:typeof e})}function ag(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tl(el.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sg(e);throw new tl(el.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function lg(e,t){if(t<=0)throw new tl(el.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const cg="firestore.googleapis.com",ug=!0;class dg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new tl(el.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cg,this.ssl=ug}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ug;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=op;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<cp)throw new tl(el.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new tl(el.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tl(el.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new tl(el.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new tl(el.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tl(el.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tl(el.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new il;switch(e.type){case"firstParty":return new al(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tl(el.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ng.get(e);t&&(qa("ComponentProvider","Removing Datastore"),ng.delete(e),t.terminate())}(this),Promise.resolve()}}class pg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pg(this.firestore,e,this._query)}}class fg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fg(this.firestore,e,this._key)}}class mg extends pg{constructor(e,t,n){super(e,t,Wu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fg(this.firestore,null,new Al(e))}withConverter(e){return new mg(this.firestore,e,this._path)}}function gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sn(e),rg("collection","path",t),e instanceof hg){const n=_l.fromString(t,...r);return og(n),new mg(e,null,n)}{if(!(e instanceof fg||e instanceof mg))throw new tl(el.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_l.fromString(t,...r));return og(n),new mg(e.firestore,null,n)}}function vg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sn(e),1===arguments.length&&(t=hl.newId()),rg("doc","path",t),e instanceof hg){const n=_l.fromString(t,...r);return ig(n),new fg(e,null,new Al(n))}{if(!(e instanceof fg||e instanceof mg))throw new tl(el.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_l.fromString(t,...r));return ig(n),new fg(e.firestore,e instanceof mg?e.converter:null,new Al(n))}}const yg="AsyncQueue";class bg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new af(this,"async_queue_retry"),this.ju=()=>{const e=of();e&&qa(yg,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=of();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=of();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new nl;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(ZC){if(!Ul(ZC))throw ZC;qa(yg,"Operation failed with retryable error: "+ZC)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,Ga("INTERNAL UNHANDLED ERROR: ",wg(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=qf.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&Ja(47125,{ec:wg(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function wg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function xg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Sg extends hg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bg(e),this._firestoreClient=void 0,await e}}}function Cg(e){if(e._terminated)throw new tl(el.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_g(e),e._firestoreClient}function _g(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new $c(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,tg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Hm(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class kg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kg(Ec.fromBase64String(e))}catch(e){throw new tl(el.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kg(Ec.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new tl(el.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._methodName=e}}class Eg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tl(el.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tl(el.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pl(this._lat,e._lat)||pl(this._long,e._long)}}class Ig{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Rg=/^__.*__$/;class Pg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wd(e,this.data,t,this.fieldTransforms)}}class jg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ng(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ja(40011,{oc:e})}}class Og{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Zg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(Ng(this.oc)&&Rg.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class Dg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sf(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Og({oc:e,methodName:t,Ec:n,path:Tl.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mg(e){const t=e._freezeSettings(),n=sf(e._databaseId);return new Dg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lg(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.dc(o.merge||o.mergeFields?2:0,t,n,i);Yg("Data must be an object, but it was:",s,r);const a=Gg(r,s);let l,c;if(o.merge)l=new Tc(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Jg(t,r,n);if(!s.contains(i))throw new tl(el.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);ev(e,i)||e.push(i)}l=new Tc(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Pg(new hu(a),l,c)}class Fg extends Ag{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fg}}function Ug(e,t,n){return new Og({oc:3,Ec:t.settings.Ec,methodName:e._methodName,cc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $g extends Ag{_toFieldTransform(e){return new Od(e.path,new Td)}isEqual(e){return e instanceof $g}}class Vg extends Ag{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Ug(this,e,!0),n=this.Ac.map((e=>qg(e,t))),r=new Ad(n);return new Od(e.path,r)}isEqual(e){return e instanceof Vg&&Yt(this.Ac,e.Ac)}}class Bg extends Ag{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new Pd(e.serializer,xd(e.serializer,this.Rc));return new Od(e.path,t)}isEqual(e){return e instanceof Bg&&this.Rc===e.Rc}}function zg(e,t,n,r){const i=e.dc(1,t,n);Yg("Data must be an object, but it was:",i,r);const o=[],s=hu.empty();bc(r,((e,r)=>{const a=Xg(t,e,n);r=sn(r);const l=i.hc(a);if(r instanceof Fg)o.push(a);else{const e=qg(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Tc(o);return new jg(s,a,i.fieldTransforms)}function Wg(e,t,n,r,i,o){const s=e.dc(1,t,n),a=[Jg(t,r,n)],l=[i];if(o.length%2!=0)throw new tl(el.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Jg(t,o[h])),l.push(o[h+1]);const c=[],u=hu.empty();for(let h=a.length-1;h>=0;--h)if(!ev(c,a[h])){const e=a[h];let t=l[h];t=sn(t);const n=s.hc(e);if(t instanceof Fg)c.push(e);else{const r=qg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Tc(c);return new jg(u,d,s.fieldTransforms)}function Hg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qg(n,e.dc(r?4:3,t))}function qg(e,t){if(Kg(e=sn(e)))return Yg("Unsupported field value:",t,e),Gg(e,t);if(e instanceof Ag)return function(e,t){if(!Ng(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qg(i,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=sn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=wl.fromDate(e);return{timestampValue:kh(t.serializer,n)}}if(e instanceof wl){const n=new wl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kh(t.serializer,n)}}if(e instanceof Eg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kg)return{bytesValue:Th(t.serializer,e._byteString)};if(e instanceof fg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ih(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ig)return function(e,t){return{mapValue:{fields:{[zc]:{stringValue:qc},[Gc]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return bd(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${sg(e)}`)}(e,t)}function Gg(e,t){const n={};return wc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bc(e,((e,r)=>{const i=qg(r,t.uc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Kg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wl||e instanceof Eg||e instanceof kg||e instanceof fg||e instanceof Ag||e instanceof Ig)}function Yg(e,t,n){if(!Kg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=sg(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function Jg(e,t,n){if((t=sn(t))instanceof Tg)return t._internalPath;if("string"==typeof t)return Xg(e,t);throw Zg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qg=new RegExp("[~\\*/\\[\\]]");function Xg(e,t,n){if(t.search(Qg)>=0)throw Zg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Tg(...t.split("."))._internalPath}catch(r){throw Zg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zg(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new tl(el.INVALID_ARGUMENT,a+e+l)}function ev(e,t){return e.some((e=>e.isEqual(t)))}class tv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nv extends tv{data(){return super.data()}}function rv(e,t){return"string"==typeof t?Xg(e,t):t instanceof Tg?t._internalPath:t._delegate._internalPath}function iv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tl(el.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class sv extends ov{}function av(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof ov&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof uv)).length,n=e.filter((e=>e instanceof lv)).length;if(t>1||t>0&&n>0)throw new tl(el.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class lv extends sv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lv(e,t,n)}_apply(e){const t=this._parse(e);return Sv(e._query,t),new pg(e.firestore,e.converter,Ju(e._query,t))}_parse(e){const t=Mg(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new tl(el.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){xv(s,o);const t=[];for(const n of s)t.push(wv(r,e,n));a={arrayValue:{values:t}}}else a=wv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||xv(s,o),a=Hg(n,t,s,"in"===o||"not-in"===o);return xu.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cv(e,t,n){const r=t,i=rv("where",e);return lv._create(i,r,n)}class uv extends ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Su.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Sv(n,i),n=Ju(n,i)}(e._query,t),new pg(e.firestore,e.converter,Ju(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dv extends sv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new tl(el.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tl(el.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(t,n)}(e._query,this._field,this._direction);return new pg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function hv(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=rv("orderBy",e);return dv._create(n,t)}class pv extends sv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new pv(e,t,n)}_apply(e){return new pg(e.firestore,e.converter,Qu(e._query,this._limit,this._limitType))}}function fv(e){return lg("limit",e),pv._create("limit",e,"F")}class mv extends sv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mv(e,t,n)}_apply(e){const t=bv(e,this.type,this._docOrFields,this._inclusive);return new pg(e.firestore,e.converter,function(e,t){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function gv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mv._create("startAt",t,!0)}class vv extends sv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new vv(e,t,n)}_apply(e){const t=bv(e,this.type,this._docOrFields,this._inclusive);return new pg(e.firestore,e.converter,function(e,t){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function yv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vv._create("endAt",t,!0)}function bv(e,t,n,r){if(n[0]=sn(n[0]),n[0]instanceof tv)return function(e,t,n,r,i){if(!r)throw new tl(el.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const s of Gu(e))if(s.field.isKeyField())o.push(ru(t,r.key));else{const e=r.data.field(s.field);if(Lc(e))throw new tl(el.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new tl(el.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new mu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Mg(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new tl(el.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new tl(el.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof o}`);if(!qu(e)&&-1!==o.indexOf("/"))throw new tl(el.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${o}' contains a slash.`);const n=e.path.child(_l.fromString(o));if(!Al.isDocumentKey(n))throw new tl(el.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Al(n);a.push(ru(t,i))}else{const e=Hg(n,r,o);a.push(e)}}return new mu(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function wv(e,t,n){if("string"==typeof(n=sn(n))){if(""===n)throw new tl(el.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qu(t)&&-1!==n.indexOf("/"))throw new tl(el.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_l.fromString(n));if(!Al.isDocumentKey(r))throw new tl(el.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ru(e,new Al(r))}if(n instanceof fg)return ru(e,n._key);throw new tl(el.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sg(n)}.`)}function xv(e,t){if(!Array.isArray(e)||0===e.length)throw new tl(el.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Sv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new tl(el.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new tl(el.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Cv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ja(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return bc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Gc].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Pc(e.doubleValue)));return new Ig(i)}convertGeoPoint(e){return new Eg(Pc(e.latitude),Pc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=Rc(e);return new wl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_l.fromString(e);Xa(Qh(n),9688,{name:e});const r=new Bc(n.get(1),n.get(3)),i=new Al(n.popFirst(5));return r.isEqual(t)||Ga(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function _v(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class kv extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new kg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fg(this.firestore,null,t)}}class Tv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Av extends tv{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ev(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(rv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ev extends Av{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Iv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ev(this._firestore,this._userDataWriter,n.key,n,new Tv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new tl(el.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ev(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ev(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Rv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Rv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ja(61501,{type:e})}}function Pv(e){e=ag(e,fg);const t=ag(e.firestore,Sg);return Zm(Cg(t),e._key).then((n=>$v(t,e,n)))}class jv extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new kg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fg(this.firestore,null,t)}}function Nv(e){e=ag(e,pg);const t=ag(e.firestore,Sg),n=Cg(t),r=new jv(t);return iv(e._query),eg(n,e._query).then((n=>new Iv(t,r,e,n)))}function Ov(e,t,n){e=ag(e,fg);const r=ag(e.firestore,Sg),i=_v(e.converter,t,n);return Uv(r,[Lg(Mg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Md.none())])}function Dv(e,t,n){e=ag(e,fg);const r=ag(e.firestore,Sg),i=Mg(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=sn(t))||t instanceof Tg?Wg(i,"updateDoc",e._key,t,n,a):zg(i,"updateDoc",e._key,t),Uv(r,[o.toMutation(e._key,Md.exists(!0))])}function Mv(e){return Uv(ag(e.firestore,Sg),[new Yd(e._key,Md.none())])}function Lv(e,t){const n=ag(e.firestore,Sg),r=vg(e),i=_v(e.converter,t);return Uv(n,[Lg(Mg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Md.exists(!1))]).then((()=>r))}function Fv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=sn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||xg(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof fg)d=ag(e.firestore,Sg),h=Wu(e._key.path),u={next:t=>{n[l]&&n[l]($v(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ag(e,pg);d=ag(t.firestore,Sg),h=t._query;const r=new jv(d);u={next:e=>{n[l]&&n[l](new Iv(d,r,t,e))},error:n[l+1],complete:n[l+2]},iv(e._query)}return function(e,t,n,r){const i=new Vm(r),o=new am(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>em(await Xm(e),o))),()=>{i.yu(),e.asyncQueue.enqueueAndForget((async()=>tm(await Xm(e),o)))}}(Cg(d),h,c,u)}function Uv(e,t){return function(e,t){const n=new nl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Lm(e);try{const e=await function(e,t){const n=Za(e),r=wl.now(),i=t.reduce(((e,t)=>e.add(t.key)),gd());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ad(),l=gd();return n.Cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Bd(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Hd(e.key,t,pu(t.value.mapValue),Md.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:ud(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new xc(pl)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Nm(r,e.changes),await Nf(r.remoteStore)}catch(e){const t=Gf(e,"Failed to persist write");n.reject(t)}}(await Jm(e),t,n))),n.promise}(Cg(e),t)}function $v(e,t,n){const r=n.docs.get(t._key),i=new jv(e);return new Av(e,i,t._key,r,new Tv(n.hasPendingWrites,n.fromCache),t.converter)}const Vv={maxAttempts:5};function Bv(e,t){if((e=sn(e)).firestore!==t)throw new tl(el.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class zv{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mg(e)}get(e){const t=Bv(e,this._firestore),n=new kv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ja(24041);const r=e[0];if(r.isFoundDocument())return new tv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new tv(this._firestore,n,t._key,null,t.converter);throw Ja(18433,{doc:r})}))}set(e,t,n){const r=Bv(e,this._firestore),i=_v(r.converter,t,n),o=Lg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Bv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=sn(t))||t instanceof Tg?Wg(this._dataReader,"Transaction.update",r._key,t,n,s):zg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Bv(e,this._firestore);return this._transaction.delete(t._key),this}}class Wv extends zv{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bv(e,this._firestore),n=new jv(this._firestore);return super.get(e).then((e=>new Av(this._firestore,n,t._key,e._document,new Tv(!1,!1),t.converter)))}}function Hv(e,t,n){e=ag(e,Sg);const r=Object.assign(Object.assign({},Vv),n);return function(e){if(e.maxAttempts<1)throw new tl(el.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new nl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Qm(e);new zm(e.asyncQueue,i,n,t,r).Nu()})),r.promise}(Cg(e),(n=>t(new Wv(e,n))),r)}function qv(){return new Fg("deleteField")}function Gv(){return new $g("serverTimestamp")}function Kv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vg("arrayUnion",t)}function Yv(e){return new Bg("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){za=e}(Sr),vr(new an("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Sg(new ol(e.getProvider("auth-internal")),new cl(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tl(el.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),kr($a,Va,e),kr($a,Va,"esm2017")}();const Jv="firebasestorage.googleapis.com",Qv="storageBucket";class Xv extends Ut{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(ty(e),`Firebase Storage: ${t} (${ty(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ty(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zv,ey;function ty(e){return"storage/"+e}function ny(){return new Xv(Zv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ry(){return new Xv(Zv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iy(){return new Xv(Zv.CANCELED,"User canceled the upload/download.")}function oy(){return new Xv(Zv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sy(e){return new Xv(Zv.INVALID_ARGUMENT,e)}function ay(){return new Xv(Zv.APP_DELETED,"The Firebase app was deleted.")}function ly(e,t){return new Xv(Zv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function cy(e){throw new Xv(Zv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Zv||(Zv={}));class uy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=uy.makeFromUrl(e,t)}catch(ZC){return new uy(e,"")}if(""===n.path)return n;throw r=e,new Xv(Zv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===Jv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new uy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Xv(Zv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class dy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function hy(e){return"string"===typeof e||e instanceof String}function py(e){return fy()&&e instanceof Blob}function fy(){return"undefined"!==typeof Blob}function my(e,t,n,r){if(r<t)throw sy(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw sy(`Invalid value for '${e}'. Expected ${n} or less.`)}function gy(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function vy(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function yy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ey||(ey={}));class by{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new wy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ey.NO_ERROR,i=n.getStatus();if(!t||yy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ey.ABORT;return void e(!1,new wy(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new wy(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(ZC){r(ZC)}else if(null!==i){const e=ny();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?ay():iy())}else{r(ry())}};this.canceled_?t(0,new wy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){o&&clearTimeout(o)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class wy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function xy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Sy(){const e=xy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(fy())return new Blob(n);throw new Xv(Zv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Cy(e){if("undefined"===typeof atob)throw t="base-64",new Xv(Zv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const _y="raw",ky="base64",Ty="base64url",Ay="data_url";class Ey{constructor(e,t){this.data=e,this.contentType=t||null}}function Iy(e,t){switch(e){case _y:return new Ey(Ry(t));case ky:case Ty:return new Ey(Py(e,t));case Ay:return new Ey(function(e){const t=new jy(e);return t.base64?Py(ky,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(ZC){throw ly(Ay,"Malformed data URL.")}return Ry(t)}(t.rest)}(t),function(e){const t=new jy(e);return t.contentType}(t))}throw ny()}function Ry(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Py(e,t){switch(e){case ky:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ly(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Ty:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ly(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Cy(t)}catch(ZC){if(ZC.message.includes("polyfill"))throw ZC;throw ly(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ly(Ay,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ny{constructor(e,t){let n=0,r="";py(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(py(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Ny(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ny(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(fy()){const e=t.map((e=>e instanceof Ny?e.data_:e));return new Ny(Sy.apply(null,e))}{const e=t.map((e=>hy(e)?Iy(_y,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Ny(r,!0)}}uploadData(){return this.data_}}function Oy(e){let t;try{t=JSON.parse(e)}catch(ZC){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Dy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function My(e,t){return t}class Ly{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||My}}let Fy=null;function Uy(){if(Fy)return Fy;const e=[];e.push(new Ly("bucket")),e.push(new Ly("generation")),e.push(new Ly("metageneration")),e.push(new Ly("name","fullPath",!0));const t=new Ly("name");t.xform=function(e,t){return function(e){return!hy(e)||e.length<2?e:Dy(e)}(t)},e.push(t);const n=new Ly("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ly("timeCreated")),e.push(new Ly("updated")),e.push(new Ly("md5Hash",null,!0)),e.push(new Ly("cacheControl",null,!0)),e.push(new Ly("contentDisposition",null,!0)),e.push(new Ly("contentEncoding",null,!0)),e.push(new Ly("contentLanguage",null,!0)),e.push(new Ly("contentType",null,!0)),e.push(new Ly("metadata","customMetadata",!0)),Fy=e,Fy}function $y(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new uy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Vy(e,t,n){const r=Oy(t);if(null===r)return null;return $y(e,r,n)}function By(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class zy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wy(e){if(!e)throw ny()}function Hy(e,t){return function(n,r){const i=Vy(e,r,t);return Wy(null!==i),i}}function qy(e,t){return function(n,r){const i=Vy(e,r,t);return Wy(null!==i),function(e,t,n,r){const i=Oy(t);if(null===i)return null;if(!hy(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return gy("/b/"+s(i)+"/o/"+s(o),n,r)+vy({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Gy(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Xv(Zv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Xv(Zv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Xv(Zv.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Xv(Zv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Ky(e){const t=Gy(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Xv(Zv.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Yy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Jy(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Yy(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+By(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Ny.getBlob(c,r,u);if(null===d)throw oy();const h={name:l.fullPath},p=gy(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new zy(p,"POST",Hy(e,n),f);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Gy(t),m}class Qy{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ey.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=ey.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=ey.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw cy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ZC){return-1}}getResponse(){if(!this.sent_)throw cy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Xy extends Qy{initXhr(){this.xhr_.responseType="text"}}function Zy(){return new Xy}class eb{constructor(e,t){this._service=e,this._location=t instanceof uy?t:uy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eb(e,t)}get root(){const e=new uy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new uy(this._location.bucket,e);return new eb(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Xv(Zv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function tb(e,t,n){e._throwIfRoot("uploadBytes");const r=Jy(e.storage,e._location,Uy(),new Ny(t,!0),n);return e.storage.makeRequestWithTokens(r,Zy).then((t=>({metadata:t,ref:e})))}function nb(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=gy(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new zy(r,"GET",qy(e,n),i);return o.errorHandler=Ky(t),o}(e.storage,e._location,Uy());return e.storage.makeRequestWithTokens(t,Zy).then((e=>{if(null===e)throw new Xv(Zv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function rb(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new uy(e._location.bucket,n);return new eb(e.storage,r)}function ib(e,t){if(e instanceof ab){const n=e;if(null==n._bucket)throw new Xv(Zv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qv+"' property when initializing the app?");const r=new eb(n,n._bucket);return null!=t?ib(r,t):r}return void 0!==t?rb(e,t):e}function ob(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ab)return function(e,t){return new eb(e,t)}(e,t);throw sy("To use ref(service, url), the first argument must be a Storage instance.")}return ib(e,t)}function sb(e,t){const n=null===t||void 0===t?void 0:t[Qv];return null==n?null:uy.makeFromBucketSpec(n,e)}class ab{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Jv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?uy.makeFromBucketSpec(r,this._host):sb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=uy.makeFromBucketSpec(this._url,e):this._bucket=sb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){my("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){my("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eb(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new dy(ay());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=vy(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new by(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const lb="@firebase/storage",cb="0.13.7",ub="storage";function db(e,t,n){return tb(e=sn(e),t,n)}function hb(e){return nb(e=sn(e))}function pb(e,t){return ob(e=sn(e),t)}function fb(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new ab(r,i,o,n,Sr)}vr(new an(ub,fb,"PUBLIC").setMultipleInstances(!0)),kr(lb,cb,""),kr(lb,cb,"esm2017");const mb="@firebase/database",gb="1.0.14";let vb="";function yb(e){vb=e}class bb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Bt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class wb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ht(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xb=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new bb(t)}}catch(ZC){}return new wb},Sb=xb("localStorage"),Cb=xb("sessionStorage"),_b=new yn("@firebase/database"),kb=function(){let e=1;return function(){return e++}}(),Tb=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,mt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new en;n.update(t);const r=n.digest();return yt.encodeByteArray(r)},Ab=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Ab.apply(null,n):e+="object"===typeof n?zt(n):n,e+=" "}return e};let Eb=null,Ib=!0;const Rb=function(e,t){mt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_b.logLevel=pn.VERBOSE,Eb=_b.log.bind(_b),t&&Cb.set("logging_enabled",!0)):"function"===typeof e?Eb=e:(Eb=null,Cb.remove("logging_enabled"))},Pb=function(){if(!0===Ib&&(Ib=!1,null===Eb&&!0===Cb.get("logging_enabled")&&Rb(!0)),Eb){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ab.apply(null,t);Eb(r)}},jb=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Pb(e,...n)}},Nb=function(){const e="FIREBASE INTERNAL ERROR: "+Ab(...arguments);_b.error(e)},Ob=function(){const e=`FIREBASE FATAL ERROR: ${Ab(...arguments)}`;throw _b.error(e),new Error(e)},Db=function(){const e="FIREBASE WARNING: "+Ab(...arguments);_b.warn(e)},Mb=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Lb="[MIN_NAME]",Fb="[MAX_NAME]",Ub=function(e,t){if(e===t)return 0;if(e===Lb||t===Fb)return-1;if(t===Lb||e===Fb)return 1;{const n=Gb(e),r=Gb(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},$b=function(e,t){return e===t?0:e<t?-1:1},Vb=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+zt(t))},Bb=function(e){if("object"!==typeof e||null===e)return zt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=zt(t[r]),n+=":",n+=Bb(e[t[r]]);return n+="}",n},zb=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Wb(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Hb=function(e){mt(!Mb(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const qb=new RegExp("^-?(0*)\\d{1,10}$"),Gb=function(e){if(qb.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Kb=function(e){try{e()}catch(ZC){setTimeout((()=>{const t=ZC.stack||"";throw Db("Exception was thrown by user callback.",t),ZC}),Math.floor(0))}},Yb=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Jb{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,br(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Db(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Qb{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Pb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Db(e)}}class Xb{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xb.OWNER="owner";const Zb="5",ew=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tw="ac",nw="websocket",rw="long_polling";class iw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sb.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sb.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ow(e,t,n){let r;if(mt("string"===typeof t,"typeof type must == string"),mt("object"===typeof n,"typeof params must == object"),t===nw)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==rw)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Wb(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class sw{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ct(this.counters_)}}const aw={},lw={};function cw(e){const t=e.toString();return aw[t]||(aw[t]=new sw),aw[t]}class uw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Kb((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const dw="start";class hw{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jb(e),this.stats_=cw(t),this.urlFn=e=>(this.appCheckToken&&(e[tw]=this.appCheckToken),ow(t,rw,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new uw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Mt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new pw((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===dw)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[dw]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Zb,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[tw]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&ew.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hw.forceAllow_=!0}static forceDisallow(){hw.forceDisallow_=!0}static isAvailable(){return!Mt()&&(!!hw.forceAllow_||!hw.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=wt(t),r=zb(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Mt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class pw{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Mt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=kb(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=pw.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(ZC){Pb("frame writing exception"),ZC.stack&&Pb(ZC.stack),Pb(ZC)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pb("No IE domain setting required")}catch(ZC){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Mt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Pb("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(ZC){}}),Math.floor(1))}}let fw=null;"undefined"!==typeof MozWebSocket?fw=MozWebSocket:"undefined"!==typeof WebSocket&&(fw=WebSocket);class mw{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jb(this.connId),this.stats_=cw(t),this.connURL=mw.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=Zb,!Mt()&&"undefined"!==typeof location&&location.hostname&&ew.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[tw]=r),i&&(o.p=i),ow(e,nw,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sb.set("previous_websocket_failure",!0);try{let e;if(Mt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Zb}/${vb}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app",REACT_APP_SHOTSTACK_API_KEY:"c0Bpc85oj7cHuDdfhz54eQJmmoEI1qauJyodpw9d",REACT_APP_SOCKET_SERVER_URL:"wss://sideeye-backend-production.up.railway.app",REACT_APP_STREAM_API_KEY:"2nufecjmzmzh"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new fw(this.connURL,[],e)}catch(ZC){this.log_("Error instantiating WebSocket.");const t=ZC.message||ZC.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){mw.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==fw&&!mw.forceDisallow_}static previouslyFailed(){return Sb.isInMemoryStorage||!0===Sb.get("previous_websocket_failure")}markConnectionHealthy(){Sb.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Bt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(mt(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=zb(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(ZC){this.log_("Exception thrown from WebSocket.send():",ZC.message||ZC.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mw.responsesRequiredToBeHealthy=2,mw.healthyTimeout=3e4;class gw{static get ALL_TRANSPORTS(){return[hw,mw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=mw&&mw.isAvailable();let n=t&&!mw.previouslyFailed();if(e.webSocketOnly&&(t||Db("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[mw];else{const e=this.transports_=[];for(const t of gw.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);gw.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gw.globalTransportInitialized_=!1;class vw{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jb("c:"+this.id+":"),this.transportManager_=new gw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Yb((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vb("t",e),n=Vb("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vb("t",e),n=Vb("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vb("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Nb("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nb("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Zb!==n&&Db("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Yb((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yb((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sb.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yw{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class bw{constructor(e){this.allowedEvents_=e,this.listeners_={},mt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){mt(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ww extends bw{static getInstance(){return new ww}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ot()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return mt("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xw{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sw(){return new xw("")}function Cw(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function _w(e){return e.pieces_.length-e.pieceNum_}function kw(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new xw(e.pieces_,t)}function Tw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ew(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new xw(t,0)}function Iw(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof xw)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new xw(n,0)}function Rw(e){return e.pieceNum_>=e.pieces_.length}function Pw(e,t){const n=Cw(e),r=Cw(t);if(null===n)return t;if(n===r)return Pw(kw(e),kw(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function jw(e,t){if(_w(e)!==_w(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Nw(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(_w(e)>_w(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Ow{constructor(e,t){this.errorPrefix_=t,this.parts_=Aw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=on(this.parts_[n]);Dw(this)}}function Dw(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mw(e))}function Mw(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Lw extends bw{static getInstance(){return new Lw}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return mt("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fw=1e3;class Uw extends yw{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=Uw.nextPersistentConnectionId_++,this.log_=jb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Lw.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ww.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(zt(i)),mt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Pt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),mt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),mt(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;Uw.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ht(e,"w")){const n=qt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Db(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Wt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Wt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),mt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Nb("Unrecognized action received from server: "+zt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){mt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fw),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Uw.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},l=function(e){mt(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Pb("getToken() completed but was canceled"):(Pb("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new vw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Db(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Nb){this.log_("Failed to get token: "+Nb),o||(this.repoInfo_.nodeAdmin&&Db(Nb),a())}}}interrupt(e){Pb("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pb("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Gt(this.interruptReasons_)&&(this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Bb(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new xw(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Pb("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Pb("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Mt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+vb.replace(/\./g,"-")]=1,Ot()?e["framework.cordova"]=1:Dt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ww.getInstance().currentlyOnline();return Gt(this.interruptReasons_)&&e}}Uw.nextPersistentConnectionId_=0,Uw.nextConnectionId_=0;class $w{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $w(e,t)}}class Vw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new $w(Lb,e),r=new $w(Lb,t);return 0!==this.compare(n,r)}minPost(){return $w.MIN}}let Bw;class zw extends Vw{static get __EMPTY_NODE(){return Bw}static set __EMPTY_NODE(e){Bw=e}compare(e,t){return Ub(e.name,t.name)}isDefinedOn(e){throw gt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $w.MIN}maxPost(){return new $w(Fb,Bw)}makePost(e,t){return mt("string"===typeof e,"KeyIndex indexValue must always be a string."),new $w(e,Bw)}toString(){return".key"}}const Ww=new zw;class Hw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:qw.RED,this.left=null!=r?r:Gw.EMPTY_NODE,this.right=null!=i?i:Gw.EMPTY_NODE}copy(e,t,n,r,i){return new qw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Gw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qw.RED=!0,qw.BLACK=!1;class Gw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Gw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qw.BLACK,null,null))}remove(e){return new Gw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qw.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hw(this.root_,null,this.comparator_,!0,e)}}function Kw(e,t){return Ub(e.name,t.name)}function Yw(e,t){return Ub(e,t)}let Jw;Gw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new qw(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qw=function(e){return"number"===typeof e?"number:"+Hb(e):"string:"+e},Xw=function(e){if(e.isLeafNode()){const t=e.val();mt("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ht(t,".sv"),"Priority must be a string or number.")}else mt(e===Jw||e.isEmpty(),"priority of unexpected type.");mt(e===Jw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Zw,ex,tx;class nx{static set __childrenNodeConstructor(e){Zw=e}static get __childrenNodeConstructor(){return Zw}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nx.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,mt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Xw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nx(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:nx.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Rw(e)?this:".priority"===Cw(e)?this.priorityNode_:nx.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:nx.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Cw(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(mt(".priority"!==n||1===_w(e),".priority must be the last token in a path"),this.updateImmediateChild(n,nx.__childrenNodeConstructor.EMPTY_NODE.updateChild(kw(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Hb(this.value_):this.value_,this.lazyHash_=Tb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nx.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nx.__childrenNodeConstructor?-1:(mt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=nx.VALUE_TYPE_ORDER.indexOf(t),i=nx.VALUE_TYPE_ORDER.indexOf(n);return mt(r>=0,"Unknown leaf type: "+t),mt(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}nx.VALUE_TYPE_ORDER=["object","boolean","number","string"];const rx=new class extends Vw{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ub(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $w.MIN}maxPost(){return new $w(Fb,new nx("[PRIORITY-POST]",tx))}makePost(e,t){const n=ex(e);return new $w(t,new nx("[PRIORITY-POST]",n))}toString(){return".priority"}},ix=Math.log(2);class ox{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/ix,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sx=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new qw(a,s.node,qw.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new qw(a,s.node,qw.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],d=n?n(u):u;l(new qw(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,qw.BLACK):(a(r,qw.BLACK),a(r,qw.RED))}return o}(new ox(e.length));return new Gw(r||t,o)};let ax;const lx={};class cx{static get Default(){return mt(lx&&rx,"ChildrenNode.ts has not been loaded"),ax=ax||new cx({".priority":lx},{".priority":rx}),ax}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=qt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gw?t:null}hasIndex(e){return Ht(this.indexSet_,e.toString())}addIndex(e,t){mt(e!==Ww,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator($w.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?sx(n,e.getCompare()):lx;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new cx(c,l)}addToIndexes(e,t){const n=Kt(this.indexes_,((n,r)=>{const i=qt(this.indexSet_,r);if(mt(i,"Missing index implementation for "+r),n===lx){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator($w.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),sx(n,i.getCompare())}return lx}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new $w(e.name,r))),i.insert(e,e.node)}}));return new cx(n,this.indexSet_)}removeFromIndexes(e,t){const n=Kt(this.indexes_,(n=>{if(n===lx)return n;{const r=t.get(e.name);return r?n.remove(new $w(e.name,r)):n}}));return new cx(n,this.indexSet_)}}let ux;class dx{static get EMPTY_NODE(){return ux||(ux=new dx(new Gw(Yw),null,cx.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Xw(this.priorityNode_),this.children_.isEmpty()&&mt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ux}updatePriority(e){return this.children_.isEmpty()?this:new dx(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ux:t}}getChild(e){const t=Cw(e);return null===t?this:this.getImmediateChild(t).getChild(kw(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(mt(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new $w(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?ux:this.priorityNode_;return new dx(r,o,i)}}updateChild(e,t){const n=Cw(e);if(null===n)return t;{mt(".priority"!==Cw(e)||1===_w(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(kw(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(rx,((o,s)=>{t[o]=s.val(e),n++,i&&dx.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qw(this.getPriority().val())+":"),this.forEachChild(rx,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Tb(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new $w(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new $w(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new $w(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,$w.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,$w.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hx?-1:0}withIndex(e){if(e===Ww||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new dx(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ww||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(rx),n=t.getIterator(rx);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ww?null:this.indexMap_.get(e.toString())}}dx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const hx=new class extends dx{constructor(){super(new Gw(Yw),dx.EMPTY_NODE,cx.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dx.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties($w,{MIN:{value:new $w(Lb,dx.EMPTY_NODE)},MAX:{value:new $w(Fb,hx)}}),zw.__EMPTY_NODE=dx.EMPTY_NODE,nx.__childrenNodeConstructor=dx,Jw=hx,function(e){tx=e}(hx);function px(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return dx.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),mt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new nx(e,px(t))}if(e instanceof Array){let n=dx.EMPTY_NODE;return Wb(e,((t,r)=>{if(Ht(e,t)&&"."!==t.substring(0,1)){const e=px(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(px(t))}{const n=[];let r=!1;if(Wb(e,((e,t)=>{if("."!==e.substring(0,1)){const i=px(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new $w(e,i)))}})),0===n.length)return dx.EMPTY_NODE;const i=sx(n,Kw,(e=>e.name),Yw);if(r){const e=sx(n,rx.getCompare());return new dx(i,px(t),new cx({".priority":e},{".priority":rx}))}return new dx(i,px(t),cx.Default)}}!function(e){ex=e}(px);class fx extends Vw{constructor(e){super(),this.indexPath_=e,mt(!Rw(e)&&".priority"!==Cw(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ub(e.name,t.name):i}makePost(e,t){const n=px(e),r=dx.EMPTY_NODE.updateChild(this.indexPath_,n);return new $w(t,r)}maxPost(){const e=dx.EMPTY_NODE.updateChild(this.indexPath_,hx);return new $w(Fb,e)}toString(){return Aw(this.indexPath_,0).join("/")}}const mx=new class extends Vw{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Ub(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $w.MIN}maxPost(){return $w.MAX}makePost(e,t){const n=px(e);return new $w(t,n)}toString(){return".value"}};function gx(e){return{type:"value",snapshotNode:e}}function vx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function yx(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function bx(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class wx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rx}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return mt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return mt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lb}hasEnd(){return this.endSet_}getIndexEndValue(){return mt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return mt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fb}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return mt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rx}copy(){const e=new wx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===rx?n="$priority":e.index_===mx?n="$value":e.index_===Ww?n="$key":(mt(e.index_ instanceof fx,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=zt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=zt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+zt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=zt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+zt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Sx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==rx&&(t.i=e.index_.toString()),t}class Cx extends yw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(mt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=jb("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Cx.getListenId_(e,n),s={};this.listens_[o]=s;const a=xx(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),qt(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Cx.getListenId_(e,t);delete this.listens_[n]}get(e){const t=xx(e._queryParams),n=e._path.toString(),r=new Pt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qt(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Bt(a.responseText)}catch(ZC){Db("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Db("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class _x{constructor(){this.rootNode_=dx.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function kx(){return{value:null,children:new Map}}function Tx(e,t,n){if(Rw(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Cw(t);e.children.has(r)||e.children.set(r,kx());Tx(e.children.get(r),t=kw(t),n)}}function Ax(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ax(r,new xw(t.toString()+"/"+e),n)}))}class Ex{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wb(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ix{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ex(e);const n=1e4+2e4*Math.random();Yb(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Wb(e,((e,r)=>{r>0&&Ht(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Yb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Rx;function Px(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Rx||(Rx={}));class jx{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Rx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Rw(this.path)){if(null!=this.affectedTree.value)return mt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xw(e));return new jx(Sw(),t,this.revert)}}return mt(Cw(this.path)===e,"operationForChild called for unrelated child."),new jx(kw(this.path),this.affectedTree,this.revert)}}class Nx{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Rx.OVERWRITE}operationForChild(e){return Rw(this.path)?new Nx(this.source,Sw(),this.snap.getImmediateChild(e)):new Nx(this.source,kw(this.path),this.snap)}}class Ox{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Rx.MERGE}operationForChild(e){if(Rw(this.path)){const t=this.children.subtree(new xw(e));return t.isEmpty()?null:t.value?new Nx(this.source,Sw(),t.value):new Ox(this.source,Sw(),t)}return mt(Cw(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ox(this.source,kw(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rw(e))return this.isFullyInitialized()&&!this.filtered_;const t=Cw(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Mx(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw gt("Should only compare child_ events.");const r=new $w(t.childName,t.snapshotNode),i=new $w(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Lx(e,t){return{eventCache:e,serverCache:t}}function Fx(e,t,n,r){return Lx(new Dx(t,n,r),e.serverCache)}function Ux(e,t,n,r){return Lx(e.eventCache,new Dx(t,n,r))}function $x(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Vx(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Bx;class zx{static fromObject(e){let t=new zx(null);return Wb(e,((e,n)=>{t=t.set(new xw(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Bx||(Bx=new Gw($b)),Bx);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sw(),value:this.value};if(Rw(e))return null;{const n=Cw(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(kw(e),t);if(null!=i){return{path:Iw(new xw(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Rw(e))return this;{const t=Cw(e),n=this.children.get(t);return null!==n?n.subtree(kw(e)):new zx(null)}}set(e,t){if(Rw(e))return new zx(t,this.children);{const n=Cw(e),r=(this.children.get(n)||new zx(null)).set(kw(e),t),i=this.children.insert(n,r);return new zx(this.value,i)}}remove(e){if(Rw(e))return this.children.isEmpty()?new zx(null):new zx(null,this.children);{const t=Cw(e),n=this.children.get(t);if(n){const r=n.remove(kw(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new zx(null):new zx(this.value,i)}return this}}get(e){if(Rw(e))return this.value;{const t=Cw(e),n=this.children.get(t);return n?n.get(kw(e)):null}}setTree(e,t){if(Rw(e))return t;{const n=Cw(e),r=(this.children.get(n)||new zx(null)).setTree(kw(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new zx(this.value,i)}}fold(e){return this.fold_(Sw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Iw(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Sw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Rw(e))return null;{const r=Cw(e),i=this.children.get(r);return i?i.findOnPath_(kw(e),Iw(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sw(),t)}foreachOnPath_(e,t,n){if(Rw(e))return this;{this.value&&n(t,this.value);const r=Cw(e),i=this.children.get(r);return i?i.foreachOnPath_(kw(e),Iw(t,r),n):new zx(null)}}foreach(e){this.foreach_(Sw(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Iw(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Wx{constructor(e){this.writeTree_=e}static empty(){return new Wx(new zx(null))}}function Hx(e,t,n){if(Rw(t))return new Wx(new zx(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=Pw(i,t);return o=o.updateChild(s,n),new Wx(e.writeTree_.set(i,o))}{const r=new zx(n),i=e.writeTree_.setTree(t,r);return new Wx(i)}}}function qx(e,t,n){let r=e;return Wb(n,((e,n)=>{r=Hx(r,Iw(t,e),n)})),r}function Gx(e,t){if(Rw(t))return Wx.empty();{const n=e.writeTree_.setTree(t,new zx(null));return new Wx(n)}}function Kx(e,t){return null!=Yx(e,t)}function Yx(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Pw(n.path,t)):null}function Jx(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(rx,((e,n)=>{t.push(new $w(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new $w(e,n.value))})),t}function Qx(e,t){if(Rw(t))return e;{const n=Yx(e,t);return new Wx(null!=n?new zx(n):e.writeTree_.subtree(t))}}function Xx(e){return e.writeTree_.isEmpty()}function Zx(e,t){return eS(Sw(),e.writeTree_,t)}function eS(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(mt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=eS(Iw(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Iw(e,".priority"),r)),n}}function tS(e,t){return fS(t,e)}function nS(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));mt(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&rS(t,r.path)?i=!1:Nw(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=oS(e.allWrites,iS,Sw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Gx(e.visibleWrites,r.path);else{Wb(r.children,(t=>{e.visibleWrites=Gx(e.visibleWrites,Iw(r.path,t))}))}return!0}return!1}function rS(e,t){if(e.snap)return Nw(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Nw(Iw(e.path,n),t))return!0;return!1}function iS(e){return e.visible}function oS(e,t,n){let r=Wx.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Nw(n,e)?(t=Pw(n,e),r=Hx(r,t,o.snap)):Nw(e,n)&&(t=Pw(e,n),r=Hx(r,Sw(),o.snap.getChild(t)));else{if(!o.children)throw gt("WriteRecord should have .snap or .children");if(Nw(n,e))t=Pw(n,e),r=qx(r,t,o.children);else if(Nw(e,n))if(t=Pw(e,n),Rw(t))r=qx(r,Sw(),o.children);else{const e=qt(o.children,Cw(t));if(e){const n=e.getChild(kw(t));r=Hx(r,Sw(),n)}}}}}return r}function sS(e,t,n,r,i){if(r||i){const o=Qx(e.visibleWrites,t);if(!i&&Xx(o))return n;if(i||null!=n||Kx(o,Sw())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Nw(e.path,t)||Nw(t,e.path))};return Zx(oS(e.allWrites,o,t),n||dx.EMPTY_NODE)}return null}{const r=Yx(e.visibleWrites,t);if(null!=r)return r;{const r=Qx(e.visibleWrites,t);if(Xx(r))return n;if(null!=n||Kx(r,Sw())){return Zx(r,n||dx.EMPTY_NODE)}return null}}}function aS(e,t,n,r){return sS(e.writeTree,e.treePath,t,n,r)}function lS(e,t){return function(e,t,n){let r=dx.EMPTY_NODE;const i=Yx(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(rx,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Qx(e.visibleWrites,t);return n.forEachChild(rx,((e,t)=>{const n=Zx(Qx(i,new xw(e)),t);r=r.updateImmediateChild(e,n)})),Jx(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Jx(Qx(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function cS(e,t,n,r){return function(e,t,n,r,i){mt(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Iw(t,n);if(Kx(e.visibleWrites,o))return null;{const t=Qx(e.visibleWrites,o);return Xx(t)?i.getChild(n):Zx(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function uS(e,t){return function(e,t){return Yx(e.visibleWrites,t)}(e.writeTree,Iw(e.treePath,t))}function dS(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=Qx(e.visibleWrites,t),c=Yx(l,Sw());if(null!=c)a=c;else{if(null==n)return[];a=Zx(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function hS(e,t,n){return function(e,t,n,r){const i=Iw(t,n),o=Yx(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return Zx(Qx(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function pS(e,t){return fS(Iw(e.treePath,t),e.writeTree)}function fS(e,t){return{treePath:e,writeTree:t}}class mS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;mt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),mt(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,bx(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,yx(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,vx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw gt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,bx(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const gS=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class vS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Dx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hS(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vx(this.viewCache_),i=dS(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function yS(e,t,n,r,i){const o=new mS;let s,a;if(n.type===Rx.OVERWRITE){const l=n;l.source.fromUser?s=xS(e,t,l.path,l.snap,r,i,o):(mt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Rw(l.path),s=wS(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Rx.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=Iw(n,r);SS(t,Cw(c))&&(a=xS(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=Iw(n,r);SS(t,Cw(c))||(a=xS(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(mt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=_S(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Rx.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=uS(r,n))return t;{const a=new vS(r,t,i),l=t.eventCache.getNode();let c;if(Rw(n)||".priority"===Cw(n)){let n;if(t.serverCache.isFullyInitialized())n=aS(r,Vx(t));else{const e=t.serverCache.getNode();mt(e instanceof dx,"serverChildren would be complete if leaf node"),n=lS(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=Cw(n);let u=hS(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,kw(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,dx.EMPTY_NODE,kw(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=aS(r,Vx(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=uS(r,Sw()),Fx(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=uS(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Rw(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return wS(e,t,n,l.getNode().getChild(n),i,o,a,s);if(Rw(n)){let r=new zx(null);return l.getNode().forEachChild(Ww,((e,t)=>{r=r.set(new xw(e),t)})),_S(e,t,n,r,i,o,a,s)}return t}{let c=new zx(null);return r.foreach(((e,t)=>{const r=Iw(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),_S(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==Rx.LISTEN_COMPLETE)throw gt("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=Ux(t,o.getNode(),o.isFullyInitialized()||Rw(n),o.isFiltered());return bS(e,s,n,r,gS,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$x(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gx($x(t)))}}(t,s,l),{viewCache:s,changes:l}}function bS(e,t,n,r,i,o){const s=t.eventCache;if(null!=uS(r,n))return t;{let a,l;if(Rw(n))if(mt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Vx(t),i=lS(r,n instanceof dx?n:dx.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=aS(r,Vx(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=Cw(n);if(".priority"===c){mt(1===_w(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=cS(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=kw(n);let d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=cS(r,n,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else d=hS(r,c,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),c,d,u,i,o):s.getNode()}}return Fx(t,a,s.isFullyInitialized()||Rw(n),e.filter.filtersNodes())}}function wS(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(Rw(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Cw(n);if(!l.isCompleteForPath(n)&&_w(n)>1)return t;const i=kw(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,gS,null)}const d=Ux(t,c,l.isFullyInitialized()||Rw(n),u.filtersNodes());return bS(e,d,n,i,new vS(i,d,o),a)}function xS(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new vS(i,t,o);if(Rw(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=Fx(t,c,!0,e.filter.filtersNodes());else{const i=Cw(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Fx(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=kw(n),c=a.getNode().getImmediateChild(i);let d;if(Rw(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===Tw(o)&&e.getChild(Ew(o)).isEmpty()?e:e.updateChild(o,r):dx.EMPTY_NODE}if(c.equals(d))l=t;else{l=Fx(t,e.filter.updateChild(a.getNode(),i,d,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function SS(e,t){return e.eventCache.isCompleteForChild(t)}function CS(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function _S(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Rw(n)?r:new zx(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=CS(0,t.serverCache.getNode().getImmediateChild(n),r);c=wS(e,c,new xw(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=CS(0,t.serverCache.getNode().getImmediateChild(n),r);c=wS(e,c,new xw(n),l,i,o,s,a)}})),c}function kS(e,t){const n=Vx(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Rw(t)&&!n.getImmediateChild(Cw(t)).isEmpty())?n.getChild(t):null}function TS(e,t,n,r){t.type===Rx.MERGE&&null!==t.source.queryId&&(mt(Vx(e.viewCache_),"We should always have a full cache before handling merges"),mt($x(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=yS(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,mt(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),mt(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),mt(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,AS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function AS(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Mx(e,i,"child_removed",t,r,n),Mx(e,i,"child_added",t,r,n),Mx(e,i,"child_moved",o,r,n),Mx(e,i,"child_changed",t,r,n),Mx(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let ES,IS;function RS(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return mt(null!=o,"SyncTree gave us an op for an invalid query."),TS(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(TS(o,t,n,r));return i}}function PS(e,t){let n=null;for(const r of e.views.values())n=n||kS(r,t);return n}class jS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zx(null),this.pendingWriteTree_={visibleWrites:Wx.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NS(e,t,n,r,i){return function(e,t,n,r,i){mt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Hx(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?FS(e,new Nx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function OS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(nS(e.pendingWriteTree_,t)){let t=new zx(null);return null!=r.snap?t=t.set(Sw(),!0):Wb(r.children,(e=>{t=t.set(new xw(e),!0)})),FS(e,new jx(r.path,t,n))}return[]}function DS(e,t,n){return FS(e,new Nx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function MS(e,t,n,r){const i=VS(e,r);if(null!=i){const r=BS(i),o=r.path,s=r.queryId,a=Pw(o,t);return zS(e,o,new Nx(Px(s),a,n))}return[]}function LS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=PS(n,Pw(e,t));if(r)return r}));return sS(r,t,i,n,!0)}function FS(e,t){return US(t,e.syncPointTree_,null,tS(e.pendingWriteTree_,Sw()))}function US(e,t,n,r){if(Rw(e.path))return $S(e,t,n,r);{const i=t.get(Sw());null==n&&null!=i&&(n=PS(i,Sw()));let o=[];const s=Cw(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=pS(r,s);o=o.concat(US(a,l,e,t))}return i&&(o=o.concat(RS(i,e,r,n))),o}}function $S(e,t,n,r){const i=t.get(Sw());null==n&&null!=i&&(n=PS(i,Sw()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=pS(r,t),l=e.operationForChild(t);l&&(o=o.concat($S(l,i,s,a)))})),i&&(o=o.concat(RS(i,e,r,n))),o}function VS(e,t){return e.tagToQueryMap.get(t)}function BS(e){const t=e.indexOf("$");return mt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new xw(e.substr(0,t))}}function zS(e,t,n){const r=e.syncPointTree_.get(t);mt(r,"Missing sync point for query tag that we're tracking");return RS(r,n,tS(e.pendingWriteTree_,t),null)}class WS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new WS(t)}node(){return this.node_}}class HS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Iw(this.path_,e);return new HS(this.syncTree_,t)}node(){return LS(this.syncTree_,this.path_)}}const qS=function(e,t,n){return e&&"object"===typeof e?(mt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?GS(e[".sv"],t,n):"object"===typeof e[".sv"]?KS(e[".sv"],t):void mt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},GS=function(e,t,n){if("timestamp"===e)return n.timestamp;mt(!1,"Unexpected server value: "+e)},KS=function(e,t,n){e.hasOwnProperty("increment")||mt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&mt(!1,"Unexpected increment value: "+r);const i=t.node();if(mt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},YS=function(e,t,n,r){return QS(t,new HS(n,e),r)},JS=function(e,t,n){return QS(e,new WS(t),n)};function QS(e,t,n){const r=e.getPriority().val(),i=qS(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=qS(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new nx(o,px(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new nx(i))),r.forEachChild(rx,((e,r)=>{const i=QS(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class XS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function ZS(e,t){let n=t instanceof xw?t:new xw(t),r=e,i=Cw(n);for(;null!==i;){const e=qt(r.node.children,i)||{children:{},childCount:0};r=new XS(i,r,e),n=kw(n),i=Cw(n)}return r}function eC(e){return e.node.value}function tC(e,t){e.node.value=t,sC(e)}function nC(e){return e.node.childCount>0}function rC(e,t){Wb(e.node.children,((n,r)=>{t(new XS(n,e,r))}))}function iC(e,t,n,r){n&&!r&&t(e),rC(e,(e=>{iC(e,t,!0,r)})),n&&r&&t(e)}function oC(e){return new xw(null===e.parent?e.name:oC(e.parent)+"/"+e.name)}function sC(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===eC(e)&&!nC(e)}(n),i=Ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,sC(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,sC(e))}(e.parent,e.name,e)}const aC=/[\[\].#$\/\u0000-\u001F\u007F]/,lC=/[\[\].#$\u0000-\u001F\u007F]/,cC=10485760,uC=function(e){return"string"===typeof e&&0!==e.length&&!aC.test(e)},dC=function(e){return"string"===typeof e&&0!==e.length&&!lC.test(e)},hC=function(e,t,n){const r=n instanceof xw?new Ow(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Mw(r));if("function"===typeof t)throw new Error(e+"contains a function "+Mw(r)+" with contents = "+t.toString());if(Mb(t))throw new Error(e+"contains "+t.toString()+" "+Mw(r));if("string"===typeof t&&t.length>cC/3&&on(t)>cC)throw new Error(e+"contains a string greater than "+cC+" utf8 bytes "+Mw(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Wb(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!uC(t)))throw new Error(e+" contains an invalid key ("+t+") "+Mw(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=on(t),Dw(e)}(r,t),hC(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=on(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Mw(r)+" in addition to actual children.")}},pC=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!uC(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),dC(e)}(n))throw new Error(rn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mC(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||jw(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function gC(e,t,n){mC(e,n),vC(e,(e=>Nw(e,t)||Nw(t,e)))}function vC(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(yC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function yC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Eb&&Pb("event: "+n.toString()),Kb(r)}}}const bC="repo_interrupt";class wC{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kx(),this.transactionQueueTree_=new XS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xC(e,t,n){if(e.stats_=cw(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Cx(e.repoInfo_,((t,n,r,i)=>{_C(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>kC(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(n)}catch(ZC){throw new Error("Invalid authOverride provided: "+ZC)}}e.persistentConnection_=new Uw(e.repoInfo_,t,((t,n,r,i)=>{_C(e,t,n,r,i)}),(t=>{kC(e,t)}),(t=>{!function(e,t){Wb(t,((t,n)=>{TC(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return lw[n]||(lw[n]=t()),lw[n]}(e.repoInfo_,(()=>new Ix(e.stats_,e.server_))),e.infoData_=new _x,e.infoSyncTree_=new jS({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=DS(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),TC(e,"connected",!1),e.serverSyncTree_=new jS({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);gC(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function SC(e){const t=e.infoData_.getNode(new xw(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CC(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:SC(e)})}function _C(e,t,n,r,i){e.dataUpdateCount++;const o=new xw(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=Kt(n,(e=>px(e)));s=function(e,t,n,r){const i=VS(e,r);if(i){const r=BS(i),o=r.path,s=r.queryId,a=Pw(o,t),l=zx.fromObject(n);return zS(e,o,new Ox(Px(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=px(n);s=MS(e.serverSyncTree_,o,t,i)}else if(r){const t=Kt(n,(e=>px(e)));s=function(e,t,n){const r=zx.fromObject(n);return FS(e,new Ox({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=px(n);s=DS(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=jC(e,o)),gC(e.eventQueue_,a,s)}function kC(e,t){TC(e,"connected",t),!1===t&&function(e){IC(e,"onDisconnectEvents");const t=CC(e),n=kx();Ax(e.onDisconnect_,Sw(),((r,i)=>{const o=YS(r,i,e.serverSyncTree_,t);Tx(n,r,o)}));let r=[];Ax(n,Sw(),((t,n)=>{r=r.concat(DS(e.serverSyncTree_,t,n));const i=LC(e,t);jC(e,i)})),e.onDisconnect_=kx(),gC(e.eventQueue_,Sw(),r)}(e)}function TC(e,t,n){const r=new xw("/.info/"+t),i=px(n);e.infoData_.updateSnapshot(r,i);const o=DS(e.infoSyncTree_,r,i);gC(e.eventQueue_,r,o)}function AC(e){return e.nextWriteId_++}function EC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bC)}function IC(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Pb(t,...r)}function RC(e,t,n){return LS(e.serverSyncTree_,t,n)||dx.EMPTY_NODE}function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||MC(e,t),eC(t)){const n=OC(e,t);mt(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=RC(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];mt(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Pw(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{IC(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(OS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();MC(e,ZS(e.transactionQueueTree_,t)),PC(e,e.transactionQueueTree_),gC(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Kb(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Db("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}jC(e,t)}}),s)}(e,oC(t),n)}else nC(t)&&rC(t,(t=>{PC(e,t)}))}function jC(e,t){const n=NC(e,t),r=oC(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=Pw(n,o.path);let u,d=!1;if(mt(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(OS(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(OS(e.serverSyncTree_,o.currentWriteId,!0));else{const n=RC(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){hC("transaction failed: Data returned ",r,o.path);let t=px(r);"object"===typeof r&&null!=r&&Ht(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=CC(e),c=JS(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=AC(e),s.splice(s.indexOf(a),1),i=i.concat(NS(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(OS(e.serverSyncTree_,a,!0))}else d=!0,u="nodata",i=i.concat(OS(e.serverSyncTree_,o.currentWriteId,!0))}gC(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;MC(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Kb(r[l]);PC(e,e.transactionQueueTree_)}(e,OC(e,n),r),r}function NC(e,t){let n,r=e.transactionQueueTree_;for(n=Cw(t);null!==n&&void 0===eC(r);)r=ZS(r,n),n=Cw(t=kw(t));return r}function OC(e,t){const n=[];return DC(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function DC(e,t,n){const r=eC(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rC(t,(t=>{DC(e,t,n)}))}function MC(e,t){const n=eC(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,tC(t,n.length>0?n:void 0)}rC(t,(t=>{MC(e,t)}))}function LC(e,t){const n=oC(NC(e,t)),r=ZS(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{FC(e,t)})),FC(e,r),iC(r,(t=>{FC(e,t)})),n}function FC(e,t){const n=eC(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(mt(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(mt(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(OS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?tC(t,void 0):n.length=o+1,gC(e.eventQueue_,oC(t),i);for(let e=0;e<r.length;e++)Kb(r[e])}}const UC=function(e,t){const n=$C(e),r=n.namespace;"firebase.com"===n.domain&&Ob(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ob("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Db("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new iw(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new xw(n.pathString)}},$C=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(ZC){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Db(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},VC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class BC{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Rw(this._path)?null:Tw(this._path)}get ref(){return new zC(this._repo,this._path)}get _queryIdentifier(){const e=Sx(this._queryParams),t=Bb(e);return"{}"===t?"default":t}get _queryObject(){return Sx(this._queryParams)}isEqual(e){if(!((e=sn(e))instanceof BC))return!1;const t=this._repo===e._repo,n=jw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class zC extends BC{constructor(e,t){super(e,t,new wx,!1)}get parent(){const e=Ew(this._path);return null===e?null:new zC(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){mt(!ES,"__referenceConstructor has already been defined"),ES=e}(zC),function(e){mt(!IS,"__referenceConstructor has already been defined"),IS=e}(zC);const WC={};let HC=!1;function qC(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Ob("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pb("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s,a,l=UC(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app",REACT_APP_SHOTSTACK_API_KEY:"c0Bpc85oj7cHuDdfhz54eQJmmoEI1qauJyodpw9d",REACT_APP_SOCKET_SERVER_URL:"wss://sideeye-backend-production.up.railway.app",REACT_APP_STREAM_API_KEY:"2nufecjmzmzh"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,o=`http://${a}?ns=${c.namespace}`,l=UC(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new Xb(Xb.OWNER):new Qb(e.name,e.options,t);pC("Invalid Firebase Database URL",l),Rw(l.path)||Ob("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=WC[t.name];i||(i={},WC[t.name]=i);let o=i[e.toURLString()];o&&Ob("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new wC(e,HC,n,r),i[e.toURLString()]=o,o}(c,e,u,new Jb(e,n));return new GC(d,e)}class GC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(xC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zC(this._repo,Sw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=WC[t];n&&n[e.key]===e||Ob(`Database ${t}(${e.repoInfo_}) has already been deleted.`),EC(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ob("Cannot call "+e+" on a deleted database.")}}Uw.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Uw.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){yb(Sr),vr(new an("database",((e,t)=>{let{instanceIdentifier:n}=t;return qC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),kr(mb,gb,e),kr(mb,gb,"esm2017")}();const KC=0===Array.from(pr.values()).length?Cr({apiKey:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",authDomain:"sideeye.uk",projectId:"sideeye-bafda",storageBucket:"sideeye-bafda.firebasestorage.app",messagingSenderId:"864667627333",appId:"1:864667627333:web:1ec087179141d1e91a982c",databaseURL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app"},{automaticDataCollectionEnabled:!1}):_r();console.log("Initializing Firebase app");const YC=function(e,t,n){n||(n=Vc);const r=yr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Yt(r.getOptions(n),t))return e;throw new tl(el.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new tl(el.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<cp)throw new tl(el.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(KC,{cacheSizeBytes:-1,experimentalForceLongPolling:!0}),JC=_a(KC),QC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r(),t=arguments.length>1?arguments[1]:void 0;e=sn(e);const n=yr(e,ub).getImmediate({identifier:t}),r=Et("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:jt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(KC),XC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r(),t=arguments.length>1?arguments[1]:void 0;const n=yr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Et("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=sn(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Yt(r,o.repoInfo_.emulatorOptions))return;Ob("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ob('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xb(Xb.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:jt(r.mockUserToken,e.app.options.projectId);s=new Xb(t)}!function(e,t,n,r){e.repoInfo_=new iw(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(o,i,r,s)}(n,...e)}return n}(KC);ns(JC,(e=>{console.log("Firebase auth state changed:",e?"User logged in":"No user")}));(()=>{{console.log("Checking Firebase configuration in production..."),console.log("Firebase App:",KC.name),console.log("Firebase Auth:",JC.app.name),console.log("Firestore:",YC.app.name),console.log("Realtime Database:",XC.app.name);const e=KC.options.projectId;console.log("Firebase Project ID:",e);const t=KC.options.apiKey;console.log("Firebase API Key:",t?"Present":"Missing");const n=KC.options.authDomain;console.log("Firebase Auth Domain:",n),e&&t&&n||(console.error("Firebase configuration is incomplete!"),console.error("Project ID:",e),console.error("API Key:",t?"Present":"Missing"),console.error("Auth Domain:",n))}})();let ZC={data:""},e_=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ZC,t_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,n_=/\/\*[^]*?\*\/|  +/g,r_=/\n+/g,i_=(e,t)=>{let n="",r="",i="";for(let o in e){let s=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+s+";":r+="f"==o[1]?i_(s,o):o+"{"+i_(s,"k"==o[1]?"":t)+"}":"object"==typeof s?r+=i_(s,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=i_.p?i_.p(o,s):o+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},o_={},s_=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+s_(e[n]);return t}return e},a_=(e,t,n,r,i)=>{let o=s_(e),s=o_[o]||(o_[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!o_[s]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=t_.exec(e.replace(n_,""));)t[4]?r.shift():t[3]?(n=t[3].replace(r_," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(r_," ").trim();return r[0]})(e);o_[s]=i_(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let a=n&&o_.g?o_.g:null;return n&&(o_.g=o_[s]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(o_[s],t,r,a),s};function l_(e){let t=this||{},n=e.call?e(t.p):e;return a_(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":i_(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,e_(t.target),t.g,t.o,t.k)}l_.bind({g:1});let c_,u_,d_,h_=l_.bind({k:1});function p_(e,t){let n=this||{};return function(){let r=arguments;function i(o,s){let a=Object.assign({},o),l=a.className||i.className;n.p=Object.assign({theme:u_&&u_()},a),n.o=/ *go\d+/.test(l),a.className=l_.apply(n,r)+(l?" "+l:""),t&&(a.ref=s);let c=e;return e[0]&&(c=a.as||e,delete a.as),d_&&c[0]&&d_(a),c_(c,a)}return t?t(i):i}}var f_=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,m_=(()=>{let e=0;return()=>(++e).toString()})(),g_=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),v_=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return v_(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},y_=[],b_={toasts:[],pausedAt:void 0},w_=e=>{b_=v_(b_,e),y_.forEach((e=>{e(b_)}))},x_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},S_=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||m_()}}(t,e,n);return w_({type:2,toast:r}),r.id},C_=(e,t)=>S_("blank")(e,t);C_.error=S_("error"),C_.success=S_("success"),C_.loading=S_("loading"),C_.custom=S_("custom"),C_.dismiss=e=>{w_({type:3,toastId:e})},C_.remove=e=>w_({type:4,toastId:e}),C_.promise=(e,t,n)=>{let r=C_.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?f_(t.success,e):void 0;return i?C_.success(i,{id:r,...n,...null==n?void 0:n.success}):C_.dismiss(r),e})).catch((e=>{let i=t.error?f_(t.error,e):void 0;i?C_.error(i,{id:r,...n,...null==n?void 0:n.error}):C_.dismiss(r)})),e};var __=(e,t)=>{w_({type:1,toast:{id:e,height:t}})},k_=()=>{w_({type:5,time:Date.now()})},T_=new Map,A_=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,l.useState)(b_),r=(0,l.useRef)(b_);(0,l.useEffect)((()=>(r.current!==b_&&n(b_),y_.push(n),()=>{let e=y_.indexOf(n);e>-1&&y_.splice(e,1)})),[]);let i=t.toasts.map((t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||x_[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...t,toasts:i}}(e);(0,l.useEffect)((()=>{if(n)return;let e=Date.now(),r=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>C_.dismiss(t.id)),n);t.visible&&C_.dismiss(t.id)}));return()=>{r.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let r=(0,l.useCallback)((()=>{n&&w_({type:6,time:Date.now()})}),[n]),i=(0,l.useCallback)(((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=n||{},s=t.filter((t=>(t.position||o)===(e.position||o)&&t.height)),a=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<a&&e.visible)).length;return s.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[t]);return(0,l.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(T_.has(e))return;let n=setTimeout((()=>{T_.delete(e),w_({type:4,toastId:e})}),t);T_.set(e,n)}(e.id,e.removeDelay);else{let t=T_.get(e.id);t&&(clearTimeout(t),T_.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:__,startPause:k_,endPause:r,calculateOffset:i}}},E_=h_`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,I_=h_`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,R_=h_`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,P_=p_("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${E_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${I_} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${R_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,j_=h_`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,N_=p_("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${j_} 1s linear infinite;
`,O_=h_`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,D_=h_`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,M_=p_("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${O_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${D_} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,L_=p_("div")`
  position: absolute;
`,F_=p_("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,U_=h_`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$_=p_("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${U_} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,V_=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?l.createElement($_,null,n):n:"blank"===r?null:l.createElement(F_,null,l.createElement(N_,{...i}),"loading"!==r&&l.createElement(L_,null,"error"===r?l.createElement(P_,{...i}):l.createElement(M_,{...i})))},B_=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,z_=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,W_=p_("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,H_=p_("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,q_=l.memo((e=>{let{toast:t,position:n,style:r,children:i}=e,o=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=g_()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[B_(n),z_(n)];return{animation:t?`${h_(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h_(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},s=l.createElement(V_,{toast:t}),a=l.createElement(H_,{...t.ariaProps},f_(t.message,t));return l.createElement(W_,{className:t.className,style:{...o,...r,...t.style}},"function"==typeof i?i({icon:s,message:a}):l.createElement(l.Fragment,null,s,a))}));!function(e,t,n,r){i_.p=t,c_=e,u_=n,d_=r}(l.createElement);var G_=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:o}=e,s=l.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,i]);return l.createElement("div",{ref:s,className:n,style:r},o)},K_=l_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Y_=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:i,children:o,containerStyle:s,containerClassName:a}=e,{toasts:c,handlers:u}=A_(r);return l.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let r=e.position||n,s=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:g_()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(r,u.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return l.createElement(G_,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?K_:"",style:s},"custom"===e.type?f_(e.message,e):o?o(e):l.createElement(q_,{toast:e,position:r}))})))},J_=n(9825),Q_=null;function X_(e,t){if("number"!==typeof(e=e||uk))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(ak(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return J_.randomBytes(e)}catch{}if(!Q_)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Q_(e)}(ck),ck)),n.join("")}function Z_(e,t,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0),"undefined"===typeof e)e=uk;else if("number"!==typeof e)throw Error("illegal arguments: "+typeof e);function r(t){rk((function(){try{t(null,X_(e))}catch(n){t(n)}}))}if(!n)return new Promise((function(e,t){r((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);r(n)}function ek(e,t){if("undefined"===typeof t&&(t=uk),"number"===typeof t&&(t=X_(t)),"string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return wk(e,t)}function tk(e,t,n,r){function i(n){"string"===typeof e&&"number"===typeof t?Z_(t,(function(t,i){wk(e,i,n,r)})):"string"===typeof e&&"string"===typeof t?wk(e,t,n,r):rk(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)}function nk(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return 0===n}var rk="undefined"!==typeof process&&process&&"function"===typeof process.nextTick?"function"===typeof setImmediate?setImmediate:process.nextTick:setTimeout;function ik(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t}var ok="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),sk=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function ak(e,t){var n,r,i=0,o=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(n=255&e[i++],o.push(ok[n>>2&63]),n=(3&n)<<4,i>=t){o.push(ok[63&n]);break}if(n|=(r=255&e[i++])>>4&15,o.push(ok[63&n]),n=(15&r)<<2,i>=t){o.push(ok[63&n]);break}n|=(r=255&e[i++])>>6&3,o.push(ok[63&n]),o.push(ok[63&r])}return o.join("")}function lk(e,t){var n,r,i,o,s,a=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;a<l-1&&c<t&&(n=(s=e.charCodeAt(a++))<sk.length?sk[s]:-1,r=(s=e.charCodeAt(a++))<sk.length?sk[s]:-1,-1!=n&&-1!=r)&&(o=n<<2>>>0,o|=(48&r)>>4,u.push(String.fromCharCode(o)),!(++c>=t||a>=l))&&-1!=(i=(s=e.charCodeAt(a++))<sk.length?sk[s]:-1)&&(o=(15&r)<<4>>>0,o|=(60&i)>>2,u.push(String.fromCharCode(o)),!(++c>=t||a>=l));)o=(3&i)<<6>>>0,o|=(s=e.charCodeAt(a++))<sk.length?sk[s]:-1,u.push(String.fromCharCode(o)),++c;var d=[];for(a=0;a<c;a++)d.push(u[a].charCodeAt(0));return d}var ck=16,uk=10,dk=16,hk=100,pk=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],fk=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],mk=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function gk(e,t,n,r){var i,o=e[t],s=e[t+1];return i=r[(o^=n[0])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[1])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[2])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[3])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[4])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[5])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[6])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[7])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[8])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[9])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[10])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[11])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[12])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[13])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i=r[(o^=(i+=r[768|255&s])^n[14])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(s^=(i+=r[768|255&o])^n[15])>>>24],i+=r[256|s>>16&255],i^=r[512|s>>8&255],o^=(i+=r[768|255&s])^n[16],e[t]=s^n[dk+1],e[t+1]=o,e}function vk(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|255&e[t],t=(t+1)%e.length;return{key:r,offp:t}}function yk(e,t,n){for(var r,i=0,o=[0,0],s=t.length,a=n.length,l=0;l<s;l++)i=(r=vk(e,i)).offp,t[l]=t[l]^r.key;for(l=0;l<s;l+=2)o=gk(o,0,t,n),t[l]=o[0],t[l+1]=o[1];for(l=0;l<a;l+=2)o=gk(o,0,t,n),n[l]=o[0],n[l+1]=o[1]}function bk(e,t,n,r,i){var o,s=mk.slice(),a=s.length;if(n<4||n>31){if(o=Error("Illegal number of rounds (4-31): "+n),r)return void rk(r.bind(this,o));throw o}if(t.length!==ck){if(o=Error("Illegal salt length: "+t.length+" != "+ck),r)return void rk(r.bind(this,o));throw o}n=1<<n>>>0;var l,c,u,d=0;function h(){if(i&&i(d/n),!(d<n)){for(d=0;d<64;d++)for(u=0;u<a>>1;u++)gk(s,u<<1,l,c);var o=[];for(d=0;d<a;d++)o.push((s[d]>>24&255)>>>0),o.push((s[d]>>16&255)>>>0),o.push((s[d]>>8&255)>>>0),o.push((255&s[d])>>>0);return r?void r(null,o):o}for(var p=Date.now();d<n&&(d+=1,yk(e,l,c),yk(t,l,c),!(Date.now()-p>hk)););r&&rk(h)}if("function"===typeof Int32Array?(l=new Int32Array(pk),c=new Int32Array(fk)):(l=pk.slice(),c=fk.slice()),function(e,t,n,r){for(var i,o=0,s=[0,0],a=n.length,l=r.length,c=0;c<a;c++)o=(i=vk(t,o)).offp,n[c]=n[c]^i.key;for(o=0,c=0;c<a;c+=2)o=(i=vk(e,o)).offp,s[0]^=i.key,o=(i=vk(e,o)).offp,s[1]^=i.key,s=gk(s,0,n,r),n[c]=s[0],n[c+1]=s[1];for(c=0;c<l;c+=2)o=(i=vk(e,o)).offp,s[0]^=i.key,o=(i=vk(e,o)).offp,s[1]^=i.key,s=gk(s,0,n,r),r[c]=s[0],r[c+1]=s[1]}(t,e,l,c),"undefined"!==typeof r)h();else for(var p;;)if("undefined"!==typeof(p=h()))return p||[]}function wk(e,t,n,r){var i,o,s;if("string"!==typeof e||"string"!==typeof t){if(i=Error("Invalid string / salt: Not a string"),n)return void rk(n.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),n)return void rk(n.bind(this,i));throw i}if("$"===t.charAt(2))o=String.fromCharCode(0),s=3;else{if("a"!==(o=t.charAt(2))&&"b"!==o&&"y"!==o||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),n)return void rk(n.bind(this,i));throw i}s=4}if(t.charAt(s+2)>"$"){if(i=Error("Missing salt rounds"),n)return void rk(n.bind(this,i));throw i}var a=10*parseInt(t.substring(s,s+1),10)+parseInt(t.substring(s+1,s+2),10),l=t.substring(s+3,s+25),c=function(e){for(var t,n,r=0,i=new Array(ik(e)),o=0,s=e.length;o<s;++o)(t=e.charCodeAt(o))<128?i[r++]=t:t<2048?(i[r++]=t>>6|192,i[r++]=63&t|128):55296===(64512&t)&&56320===(64512&(n=e.charCodeAt(o+1)))?(t=65536+((1023&t)<<10)+(1023&n),++o,i[r++]=t>>18|240,i[r++]=t>>12&63|128,i[r++]=t>>6&63|128,i[r++]=63&t|128):(i[r++]=t>>12|224,i[r++]=t>>6&63|128,i[r++]=63&t|128);return i}(e+=o>="a"?"\0":""),u=lk(l,ck);function d(e){var t=[];return t.push("$2"),o>="a"&&t.push(o),t.push("$"),a<10&&t.push("0"),t.push(a.toString()),t.push("$"),t.push(ak(u,u.length)),t.push(ak(e,4*mk.length-1)),t.join("")}if("undefined"==typeof n)return d(bk(c,u,a));bk(c,u,a,(function(e,t){e?n(e,null):n(null,d(t))}),r)}const xk={setRandomFallback:function(e){Q_=e},genSaltSync:X_,genSalt:Z_,hashSync:ek,hash:tk,compareSync:function(e,t){if("string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&nk(ek(e,t.substring(0,t.length-31)),t)},compare:function(e,t,n,r){function i(n){"string"===typeof e&&"string"===typeof t?60===t.length?tk(e,t.substring(0,29),(function(e,r){e?n(e):n(null,nk(r,t))}),r):rk(n.bind(this,null,!1)):rk(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof n)throw Error("Illegal callback: "+typeof n);i(n)},getRounds:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return ik(e)>72},encodeBase64:function(e,t){return ak(e,t)},decodeBase64:function(e,t){return lk(e,t)}},Sk=(0,l.createContext)({user:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resetPassword:async()=>{},sendEmailVerification:async()=>{},setError:()=>{},forceCheckEmailVerification:async()=>!1,currentUser:null,userProfile:null,setUserProfile:()=>{},verifySourceCodeAndCompleteLogin:async()=>{},tempUserForSourceCode:null}),Ck=e=>{var t;let{children:n}=e;const[r,i]=(0,l.useState)(null),[o,s]=(0,l.useState)(!0),[a,c]=(0,l.useState)(null),[u,d]=(0,l.useState)(null),h=ie(),p=(e,t)=>{console.error(`[${t}] Error:`,e)};(0,l.useEffect)((()=>{console.log("Setting up auth state listener");const e=ns(JC,(async e=>{if(console.log("Auth state changed:",e?"User logged in":"No user"),e)try{console.log("Reloading Firebase user data..."),await e.reload();const t=JC.currentUser;if(console.log("Firebase user data reloaded."),!t)return console.log("User is null after reload, signing out."),i(null),void s(!1);console.log("Fetching Firestore document for:",t.uid);const n=await Pv(vg(YC,"users",t.uid));if(n.exists()){const e=n.data();i({...t,profile:e}),console.log("User data loaded successfully:",t.uid),s(!1)}else console.error("User document not found in Firestore:",t.uid),i(null),rs(JC),console.log("Signed out due to missing Firestore document."),s(!1)}catch(a){console.error("Error loading user data:",a),i(null),s(!1)}else i(null),s(!1)}));return()=>{console.log("Cleaning up auth state listener"),e()}}),[]),(0,l.useEffect)((()=>{if(null===r||void 0===r||!r.uid||!YC)return;const e=Fv(vg(YC,"users",r.uid),(e=>{if(e.exists()){var t;const n=e.data(),o=null===(t=r.profile)||void 0===t?void 0:t.isPrivate;i((e=>e?{...e,profile:n}:null)),i((e=>e?{...e,isPrivate:n.isPrivate||!1,followers:n.followers||[],following:n.following||[]}:null)),o!==n.isPrivate&&(C_.success("Account is now "+(n.isPrivate?"private":"public")),window.location.pathname.includes("/profile")&&window.location.reload())}}),(e=>{console.error("Error listening to privacy changes:",e),C_.error("Failed to sync privacy settings")}));return()=>e()}),[null===r||void 0===r?void 0:r.uid,YC,null===r||void 0===r||null===(t=r.profile)||void 0===t?void 0:t.isPrivate]),(0,l.useEffect)((()=>{r&&!o&&(r.emailVerified||C_.error("Please verify your email to continue",{duration:5e3,id:"email-verification-needed"}),r.profile&&!r.profile.sourceCodeSetupComplete&&C_.error("Please set up your source code to continue",{duration:5e3,id:"source-code-setup-needed"}))}),[r,o]);const f=async e=>{try{console.log("Starting forceCheckEmailVerification for user:",e.uid),console.log("Initial emailVerified status:",e.emailVerified),await e.reload();const n=JC.currentUser;if(!n)return console.error("User disappeared after reload"),!1;const r=n.emailVerified;if(console.log("Email verification status after reload:",r),r&&YC)try{const e=vg(YC,"users",n.uid),t=await Pv(e);if(t.exists()){if(!t.data().isVerified){const t=await(async e=>{if(!YC)return!1;try{return(await Pv(vg(YC,"admins",e))).exists()}catch(a){return console.log("Error checking admin status:",a),!1}})(n.uid);t?(await Dv(e,{isVerified:!0,updatedAt:Gv()}),console.log("Updated user profile verification status in Firestore")):console.log("User is not admin, skipping verification status update")}}}catch(a){console.log("Could not access user profile in Firestore")}try{const e=await n.getIdTokenResult(!0);return console.log("Token verification status:",e.claims.email_verified),e.claims.email_verified&&!r?(await n.reload(),n.emailVerified):!0===e.claims.email_verified}catch(t){return console.error("Error checking token verification status:",t),r}}catch(a){return console.error("Failed to check email verification status:",a),!1}},m={user:r,loading:o,error:a,login:async(e,t)=>{s(!0),c(null);try{if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e))throw new Error("auth/invalid-email");console.log("Starting login process for:",e),await function(e,t){return sn(e).setPersistence(t)}(JC,ls),console.log("Persistence set to LOCAL");const n=await function(e,t,n){return br(e.app)?Promise.reject(ti(e)):Jo(sn(e),Do.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Zo(e),t}))}(JC,e,t),r=n.user;console.log("Firebase Auth login successful for user:",r.uid);const o=await f(r);if(console.log("Email verification status:",o),!o)return console.log("Email not verified, redirecting to verification page..."),c("Please verify your email before logging in."),await rs(JC),s(!1),void h("/verify-email",{replace:!0});const a=await Pv(vg(YC,"users",r.uid));if(a.exists()){const e=a.data();if(console.log("Retrieved user profile:",e),!e.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),s(!1),void h("/setup-source-code",{replace:!0});i({...r,profile:e}),s(!1),console.log("Login complete, redirecting to feed..."),h("/",{replace:!0})}else{console.log("User profile not found, creating default profile...");const e={name:r.displayName||"",username:r.displayName||"",email:r.email||"",profilePic:r.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:wl.fromDate(new Date),lastLogin:wl.fromDate(new Date),dateOfBirth:wl.fromDate(new Date(2e3,0,1)),settings:{theme:"light",notifications:!0,privacy:"public"},preferences:{theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0}};await Ov(vg(YC,"users",r.uid),e),console.log("Created default user profile");const t=(await Pv(vg(YC,"users",r.uid))).data();if(!t.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),s(!1),void h("/setup-source-code",{replace:!0});i({...r,profile:t}),s(!1),console.log("Login complete, redirecting to feed..."),h("/",{replace:!0})}}catch(a){console.error("Login function error:",a);let t="An error occurred during login.";"auth/invalid-credential"===a.code||"auth/invalid-credential"===a.message?t="Invalid email or password. Please check your credentials and try again.":"auth/user-not-found"===a.code||"auth/user-not-found"===a.message?t="No account found with this email.":"auth/wrong-password"===a.code||"auth/wrong-password"===a.message?t="Incorrect password.":"auth/too-many-requests"===a.code||"auth/too-many-requests"===a.message?t="Too many failed attempts. Please try again later.":"auth/network-request-failed"===a.code||"auth/network-request-failed"===a.message?t="Network error. Please check your connection.":"auth/invalid-email"===a.code||"auth/invalid-email"===a.message?t="Invalid email address. Please check the format.":"User profile not found"===a.message&&(t="User profile not found. Please contact support."),c(t),i(null),s(!1),p(a,"Login Function")}},register:async(e,t,n,r)=>{s(!0),c(null);try{const o=await async function(e,t,n){if(br(e.app))return Promise.reject(ti(e));const r=ao(e),i=yo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bo,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Zo(e),t})),s=await zo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(JC,e,t),s=o.user;if(console.log("User created successfully with UID:",s.uid),await ts(s,{displayName:n}),console.log("User profile updated with username:",n),await es(s),console.log("Verification email sent to:",s.email),YC){const t={theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0},i={name:n,username:n,email:e||"",profilePic:s.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:wl.fromDate(new Date),lastLogin:wl.fromDate(new Date),dateOfBirth:r,settings:{theme:"light",notifications:!0,privacy:"public"},preferences:t};await Ov(vg(YC,"users",s.uid),i),console.log("Basic user profile created in Firestore")}i(s)}catch(a){throw console.error("Registration error:",a),c(kk(a.code)),a}finally{s(!1)}},logout:async()=>{s(!0),c(null);try{console.log("Starting logout process..."),await rs(JC),console.log("Firebase sign out successful."),i(null),s(!1),console.log("User state cleared, navigating to /login..."),h("/login",{replace:!0}),console.log("Navigation to /login triggered.")}catch(a){console.error("Error during logout:",a),p(a,"Logout"),c(kk(a.code)),s(!1)}},resetPassword:async e=>{try{s(!0),await async function(e,t,n){const r=ao(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Xo(r,i,n),await yo(r,i,"getOobCode",Ao,"EMAIL_PASSWORD_PROVIDER")}(JC,e)}catch(a){throw c(a.message),a}finally{s(!1)}},sendEmailVerification:async()=>{const e=JC.currentUser;if(e)try{s(!0),await e.reload();const t=JC.currentUser;if(!t)return void c("User not found");if(t.emailVerified)return await f(t),void h("/setup-source-code");await es(t,{url:`${window.location.origin}/verify-email`,handleCodeInApp:!0}),YC&&await Dv(vg(YC,"users",t.uid),{lastVerificationAttempt:Gv(),verificationStatus:"pending"}),C_.success("Verification email sent")}catch(a){console.error("Error sending verification email:",a),c(kk(a.code||a.message))}finally{s(!1)}else c("No user available to send verification email")},setError:c,forceCheckEmailVerification:f,currentUser:r,userProfile:(null===r||void 0===r?void 0:r.profile)||null,setUserProfile:e=>{r&&i({...r,profile:e})},verifySourceCodeAndCompleteLogin:async e=>{if(!u||!YC)return c("No user logged in"),void console.error("verifySourceCodeAndCompleteLogin: No temporary user found");try{s(!0),c(null);const t=vg(YC,"users",u.uid),n=await Pv(t);if(!n.exists())return c("User profile not found"),void console.error("verifySourceCodeAndCompleteLogin: User profile not found");const r=n.data();if(!r.sourceCodeHash)return c("Source code not set up"),void console.error("verifySourceCodeAndCompleteLogin: No source code hash found");if(!await xk.compare(e,r.sourceCodeHash))return void c("Invalid source code");i({...u,profile:r}),d(null),s(!1),setTimeout((()=>{h("/")}),0)}catch(a){console.error("Error verifying source code:",a),c("Failed to verify source code"),s(!1)}},tempUserForSourceCode:u};return(0,Ke.jsx)(Sk.Provider,{value:m,children:n})},_k=()=>{const e=(0,l.useContext)(Sk);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},kk=e=>{switch(e){case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email is already in use";case"auth/weak-password":return"Password is too weak";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}},Tk=()=>{const{user:e}=_k();return{canViewProfile:t=>{var n,r,i;if(!e)return!1;if(e.uid===t)return!0;const o=null===(n=e.profile)||void 0===n||null===(r=n.followers)||void 0===r?void 0:r.includes(t);return!(null!==(i=e.profile)&&void 0!==i&&i.isPrivate)||o},canViewContent:t=>{var n,r,i;if(!e)return!1;if(e.uid===t)return!0;const o=null===(n=e.profile)||void 0===n||null===(r=n.following)||void 0===r?void 0:r.includes(t);return!(null!==(i=e.profile)&&void 0!==i&&i.isPrivate)||o}}},Ak=(0,l.createContext)(void 0),Ek=e=>{let{children:t}=e;const{currentUser:n}=_k(),[r,i]=(0,l.useState)([]),[o,s]=(0,l.useState)(0),[a,c]=(0,l.useState)(!0),[u,d]=(0,l.useState)(!1),h=(0,l.useCallback)((async e=>{if(!e)return;c(!0);const t=Fv(av(gg(YC,"notifications"),cv("recipientId","==",e),hv("createdAt","desc"),fv(50)),(e=>{const t=e.docs.map((e=>{var t;const n=e.data();return{id:e.id,...n,createdAt:null!==(t=n.createdAt)&&void 0!==t&&t.toDate?n.createdAt.toDate():new Date}}));i(t);const n=t.filter((e=>!e.isRead)).length;s(n),u||d(!0),c(!1)}),(e=>{console.error("Error fetching notifications: ",e),c(!1)}));return t}),[u]);(0,l.useEffect)((()=>{let e;if(null!==n&&void 0!==n&&n.uid){h(n.uid).then((t=>{t&&(e=t)})).catch((e=>{console.error("Failed to setup notification listener:",e)}))}else i([]),s(0),c(!0),d(!1);return()=>{e&&e()}}),[n,h]);const p={notifications:r,unreadCount:o,loading:a,fetchNotifications:h,markAsRead:async e=>{try{const t=vg(YC,"notifications",e);await Dv(t,{isRead:!0})}catch(Nb){console.error("Error marking notification as read: ",Nb)}},markAllAsRead:async e=>{if(e){c(!0);try{const t=av(gg(YC,"notifications"),cv("recipientId","==",e),cv("isRead","==",!1)),n=(await Nv(t)).docs.map((e=>Dv(vg(YC,"notifications",e.id),{isRead:!0})));await Promise.all(n)}catch(Nb){console.error("Error marking all notifications as read: ",Nb)}}},deleteNotification:async e=>{try{const t=vg(YC,"notifications",e);await Mv(t)}catch(Nb){console.error("Error deleting notification: ",Nb)}},addNotification:async e=>{try{await Lv(gg(YC,"notifications"),{...e,isRead:!1,createdAt:Gv()})}catch(Nb){console.error("Error adding notification: ",Nb)}}};return(0,Ke.jsx)(Ak.Provider,{value:p,children:t})},Ik=()=>{const e=(0,l.useContext)(Ak);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e};const Rk=l.createContext(null);function Pk(){return l.useContext(Rk)}const jk="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const Nk=function(e){const{children:t,theme:n}=e,r=Pk(),i=l.useMemo((()=>{const e=null===r?n:function(e,t){if("function"===typeof t)return t(e);return(0,Le.A)({},e,t)}(r,n);return null!=e&&(e[jk]=null!==r),e}),[n,r]);return(0,Ke.jsx)(Rk.Provider,{value:i,children:t})},Ok=["value"],Dk=l.createContext();const Mk=()=>{const e=l.useContext(Dk);return null!=e&&e},Lk=function(e){let{value:t}=e,n=(0,Fe.A)(e,Ok);return(0,Ke.jsx)(Dk.Provider,(0,Le.A)({value:null==t||t},n))};var Fk=n(6171);const Uk={};function $k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return l.useMemo((()=>{const i=e&&t[e]||t;if("function"===typeof n){const o=n(i),s=e?(0,Le.A)({},t,{[e]:o}):o;return r?()=>s:s}return e?(0,Le.A)({},t,{[e]:n}):(0,Le.A)({},t,n)}),[e,t,n,r])}const Vk=function(e){const{children:t,theme:n,themeId:r}=e,i=He(Uk),o=Pk()||Uk,s=$k(r,i,n),a=$k(r,o,n,!0),l="rtl"===s.direction;return(0,Ke.jsx)(Nk,{theme:a,children:(0,Ke.jsx)(We.T.Provider,{value:s,children:(0,Ke.jsx)(Lk,{value:l,children:(0,Ke.jsx)(Fk.A,{value:null==s?void 0:s.components,children:t})})})})},Bk=["theme"];function zk(e){let{theme:t}=e,n=(0,Fe.A)(e,Bk);const r=t[Xe.A];let i=r||t;return"function"!==typeof t&&(r&&!r.vars?i=(0,Le.A)({},r,{vars:null}):t&&!t.vars&&(i=(0,Le.A)({},t,{vars:null}))),(0,Ke.jsx)(Vk,(0,Le.A)({},n,{themeId:r?Xe.A:void 0,theme:i}))}const Wk=(0,l.createContext)(void 0),Hk=e=>{let{children:t}=e;const[n,r]=(0,l.useState)((()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)}));(0,l.useEffect)((()=>{localStorage.setItem("darkMode",JSON.stringify(n))}),[n]);const i=(0,Qe.A)({palette:{mode:n?"dark":"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:n?"#121212":"#ffffff",paper:n?"#1e1e1e":"#ffffff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});return(0,Ke.jsx)(Wk.Provider,{value:{isDarkMode:n,toggleDarkMode:()=>{r(!n)}},children:(0,Ke.jsx)(zk,{theme:i,children:t})})};var qk=n(8465),Gk=n(9254),Kk=n(1676),Yk=n(9269);const Jk=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var Qk=n(423);function Xk(e){return(0,Qk.Ay)("MuiPaper",e)}(0,Ze.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Zk=["className","component","elevation","square","variant"],eT=(0,Gk.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,Le.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.divider}`},"elevation"===n.variant&&(0,Le.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,Yk.X4)("#fff",Jk(n.elevation))}, ${(0,Yk.X4)("#fff",Jk(n.elevation))})`},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),tT=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,Fe.A)(n,Zk),c=(0,Le.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,qk.A)(o,Xk,i)})(c);return(0,Ke.jsx)(eT,(0,Le.A)({as:i,ownerState:c,className:(0,Ue.A)(u.root,r),ref:t},l))})),nT=tT;function rT(e){return(0,Qk.Ay)("MuiAppBar",e)}(0,Ze.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const iT=["className","color","enableColorOnDark","position"],oT=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,sT=(0,Gk.Ay)(nT,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Kk.A)(n.position)}`],t[`color${(0,Kk.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,Le.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,Le.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,Le.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,Le.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:oT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:oT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:oT(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:oT(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),aT=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:s="fixed"}=n,a=(0,Fe.A)(n,iT),l=(0,Le.A)({},n,{color:i,position:s,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,Kk.A)(t)}`,`position${(0,Kk.A)(n)}`]};return(0,qk.A)(i,rT,r)})(l);return(0,Ke.jsx)(sT,(0,Le.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,Ue.A)(c.root,r,"fixed"===s&&"mui-fixed"),ref:t},a))})),lT=aT;function cT(e){return(0,Qk.Ay)("MuiToolbar",e)}(0,Ze.A)("MuiToolbar",["root","gutters","regular","dense"]);const uT=["className","component","disableGutters","variant"],dT=(0,Gk.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),hT=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:s="regular"}=n,a=(0,Fe.A)(n,uT),l=(0,Le.A)({},n,{component:i,disableGutters:o,variant:s}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,qk.A)(i,cT,t)})(l);return(0,Ke.jsx)(dT,(0,Le.A)({as:i,className:(0,Ue.A)(c.root,r),ref:t,ownerState:l},a))})),pT=hT;var fT=n(3235);const mT=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function gT(e){return(0,Qk.Ay)("MuiAvatar",e)}(0,Ze.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var vT=n(5393);const yT=function(e){return"string"===typeof e};const bT=function(e,t,n){return void 0===e||yT(e)?t:(0,Le.A)({},t,{ownerState:(0,Le.A)({},t.ownerState,n)})};const wT=function(e,t,n){return"function"===typeof e?e(t,n):e};const xT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const ST=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const CT=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,Ue.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,Le.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,Le.A)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=xT((0,Le.A)({},i,r)),a=ST(r),l=ST(i),c=t(s),u=(0,Ue.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,Le.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,Le.A)({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},_T=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],kT=["component","slots","slotProps"],TT=["component"];function AT(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:s,internalForwardedProps:a}=t,l=(0,Fe.A)(t,_T),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=o,h=(0,Fe.A)(o,kT),p=u[e]||r,f=wT(d[e],i),m=CT((0,Le.A)({className:n},l,{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:f})),{props:{component:g},internalRef:v}=m,y=(0,Fe.A)(m.props,TT),b=(0,vT.A)(v,null==f?void 0:f.ref,t.ref),w=s?s(y):{},x=(0,Le.A)({},i,w),S="root"===e?g||c:g,C=bT(p,(0,Le.A)({},"root"===e&&!c&&!u[e]&&a,"root"!==e&&!u[e]&&a,y,S&&{as:S},{ref:b}),x);return Object.keys(w).forEach((e=>{delete C[e]})),[p,C]}const ET=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],IT=(0,Gk.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,Le.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,Le.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),RT=(0,Gk.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),PT=(0,Gk.Ay)(mT,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const jT=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAvatar"}),{alt:r,children:i,className:o,component:s="div",slots:a={},slotProps:c={},imgProps:u,sizes:d,src:h,srcSet:p,variant:f="circular"}=n,m=(0,Fe.A)(n,ET);let g=null;const v=function(e){let{crossOrigin:t,referrerPolicy:n,src:r,srcSet:i}=e;const[o,s]=l.useState(!1);return l.useEffect((()=>{if(!r&&!i)return;s(!1);let e=!0;const o=new Image;return o.onload=()=>{e&&s("loaded")},o.onerror=()=>{e&&s("error")},o.crossOrigin=t,o.referrerPolicy=n,o.src=r,i&&(o.srcset=i),()=>{e=!1}}),[t,n,r,i]),o}((0,Le.A)({},u,{src:h,srcSet:p})),y=h||p,b=y&&"error"!==v,w=(0,Le.A)({},n,{colorDefault:!b,component:s,variant:f}),x=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,qk.A)(i,gT,t)})(w),[S,C]=AT("img",{className:x.img,elementType:RT,externalForwardedProps:{slots:a,slotProps:{img:(0,Le.A)({},u,c.img)}},additionalProps:{alt:r,src:h,srcSet:p,sizes:d},ownerState:w});return g=b?(0,Ke.jsx)(S,(0,Le.A)({},C)):i||0===i?i:y&&r?r[0]:(0,Ke.jsx)(PT,{ownerState:w,className:x.fallback}),(0,Ke.jsx)(IT,(0,Le.A)({as:s,ownerState:w,className:(0,Ue.A)(x.root,o),ref:t},m,{children:g}))})),NT=jT;function OT(e){return(0,Qk.Ay)("MuiTypography",e)}(0,Ze.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const DT=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],MT=(0,Gk.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,Kk.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),LT={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},FT={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},UT=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiTypography"}),r=(e=>FT[e]||e)(n.color),i=(0,Be.A)((0,Le.A)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=LT}=i,p=(0,Fe.A)(i,DT),f=(0,Le.A)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=a||(u?"p":h[d]||LT[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&`align${(0,Kk.A)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,qk.A)(a,OT,s)})(f);return(0,Ke.jsx)(MT,(0,Le.A)({as:m,ref:t,ownerState:f,className:(0,Ue.A)(g.root,s)},p))})),$T=UT;var VT=n(1506),BT=n(1976),zT=n(2937);function WT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HT(e,t){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HT(e,t)}function qT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,HT(e,t)}const GT=l.createContext(null);function KT(e,t){var n=Object.create(null);return e&&l.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,l.isValidElement)(e)?t(e):e}(e)})),n}function YT(e,t,n){return null!=n[t]?n[t]:e.props[t]}function JT(e,t,n){var r=KT(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,l.isValidElement)(s)){var a=o in t,c=o in r,u=t[o],d=(0,l.isValidElement)(u)&&!u.props.in;!c||a&&!d?c||!a||d?c&&a&&(0,l.isValidElement)(u)&&(i[o]=(0,l.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:YT(s,"exit",e),enter:YT(s,"enter",e)})):i[o]=(0,l.cloneElement)(s,{in:!1}):i[o]=(0,l.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:YT(s,"exit",e),enter:YT(s,"enter",e)})}})),i}var QT=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},XT=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(WT(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}qT(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,KT(n.children,(function(e){return(0,l.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:YT(e,"appear",n),enter:YT(e,"enter",n),exit:YT(e,"exit",n)})}))):JT(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=KT(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,Le.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,Fe.A)(e,["component","childFactory"]),i=this.state.contextValue,o=QT(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?l.createElement(GT.Provider,{value:i},o):l.createElement(GT.Provider,{value:i},l.createElement(t,r,o))},t}(l.Component);XT.propTypes={},XT.defaultProps={component:"div",childFactory:function(e){return e}};const ZT=XT;var eA=n(8283),tA=n(1824);const nA=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:c,timeout:u}=e,[d,h]=l.useState(!1),p=(0,Ue.A)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:s,height:s,top:-s/2+o,left:-s/2+i},m=(0,Ue.A)(n.child,d&&n.childLeaving,r&&n.childPulsate);return a||d||h(!0),l.useEffect((()=>{if(!a&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,a,u]),(0,Ke.jsx)("span",{className:p,style:f,children:(0,Ke.jsx)("span",{className:m})})};const rA=(0,Ze.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),iA=["center","classes","className"];let oA,sA,aA,lA,cA=e=>e;const uA=(0,eA.i7)(oA||(oA=cA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),dA=(0,eA.i7)(sA||(sA=cA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hA=(0,eA.i7)(aA||(aA=cA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),pA=(0,Gk.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),fA=(0,Gk.Ay)(nA,{name:"MuiTouchRipple",slot:"Ripple"})(lA||(lA=cA`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),rA.rippleVisible,uA,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),rA.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),rA.child,rA.childLeaving,dA,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),rA.childPulsate,hA,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),mA=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o}=n,s=(0,Fe.A)(n,iA),[a,c]=l.useState([]),u=l.useRef(0),d=l.useRef(null);l.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[a]);const h=l.useRef(!1),p=(0,tA.A)(),f=l.useRef(null),m=l.useRef(null),g=l.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:s}=e;c((e=>[...e,(0,Ke.jsx)(fA,{classes:{ripple:(0,Ue.A)(i.ripple,rA.ripple),rippleVisible:(0,Ue.A)(i.rippleVisible,rA.rippleVisible),ripplePulsate:(0,Ue.A)(i.ripplePulsate,rA.ripplePulsate),child:(0,Ue.A)(i.child,rA.child),childLeaving:(0,Ue.A)(i.childLeaving,rA.childLeaving),childPulsate:(0,Ue.A)(i.childPulsate,rA.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},u.current)])),u.current+=1,d.current=s}),[i]),v=l.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:i,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[r,g,p]),y=l.useCallback((()=>{v({},{pulsate:!0})}),[v]),b=l.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[p]);return l.useImperativeHandle(t,(()=>({pulsate:y,start:v,stop:b})),[y,v,b]),(0,Ke.jsx)(pA,(0,Le.A)({className:(0,Ue.A)(rA.root,i.root,o),ref:m},s,{children:(0,Ke.jsx)(ZT,{component:null,exit:!0,children:a})}))})),gA=mA;function vA(e){return(0,Qk.Ay)("MuiButtonBase",e)}const yA=(0,Ze.A)("MuiButtonBase",["root","disabled","focusVisible"]),bA=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],wA=(0,Gk.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${yA.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),xA=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:s,component:a="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:w,onKeyUp:x,onMouseDown:S,onMouseLeave:C,onMouseUp:_,onTouchEnd:k,onTouchMove:T,onTouchStart:A,tabIndex:E=0,TouchRippleProps:I,touchRippleRef:R,type:P}=n,j=(0,Fe.A)(n,bA),N=l.useRef(null),O=l.useRef(null),D=(0,VT.A)(O,R),{isFocusVisibleRef:M,onFocus:L,onBlur:F,ref:U}=(0,zT.A)(),[$,V]=l.useState(!1);c&&$&&V(!1),l.useImperativeHandle(r,(()=>({focusVisible:()=>{V(!0),N.current.focus()}})),[]);const[B,z]=l.useState(!1);l.useEffect((()=>{z(!0)}),[]);const W=B&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,BT.A)((r=>{t&&t(r);return!n&&O.current&&O.current[e](r),!0}))}l.useEffect((()=>{$&&h&&!u&&B&&O.current.pulsate()}),[u,h,$,B]);const q=H("start",S),G=H("stop",g),K=H("stop",v),Y=H("stop",_),J=H("stop",(e=>{$&&e.preventDefault(),C&&C(e)})),Q=H("start",A),X=H("stop",k),Z=H("stop",T),ee=H("stop",(e=>{F(e),!1===M.current&&V(!1),f&&f(e)}),!1),te=(0,BT.A)((e=>{N.current||(N.current=e.currentTarget),L(e),!0===M.current&&(V(!0),b&&b(e)),y&&y(e)})),ne=()=>{const e=N.current;return a&&"button"!==a&&!("A"===e.tagName&&e.href)},re=l.useRef(!1),ie=(0,BT.A)((e=>{h&&!re.current&&$&&O.current&&" "===e.key&&(re.current=!0,O.current.stop(e,(()=>{O.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=(0,BT.A)((e=>{h&&" "===e.key&&O.current&&$&&!e.defaultPrevented&&(re.current=!1,O.current.stop(e,(()=>{O.current.pulsate(e)}))),x&&x(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=a;"button"===se&&(j.href||j.to)&&(se=p);const ae={};"button"===se?(ae.type=void 0===P?"button":P,ae.disabled=c):(j.href||j.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=(0,VT.A)(t,U,N);const ce=(0,Le.A)({},n,{centerRipple:i,component:a,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:E,focusVisible:$}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,qk.A)(o,vA,i);return n&&r&&(s.root+=` ${r}`),s})(ce);return(0,Ke.jsxs)(wA,(0,Le.A)({as:se,className:(0,Ue.A)(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:G,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:q,onMouseLeave:J,onMouseUp:Y,onDragLeave:K,onTouchEnd:X,onTouchMove:Z,onTouchStart:Q,ref:le,tabIndex:c?-1:E,type:P},ae,j,{children:[o,W?(0,Ke.jsx)(gA,(0,Le.A)({ref:D,center:i},I)):null]}))})),SA=xA;function CA(e){return(0,Qk.Ay)("MuiIconButton",e)}const _A=(0,Ze.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),kA=["edge","children","className","color","disabled","disableFocusRipple","size"],TA=(0,Gk.Ay)(SA,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,Kk.A)(n.color)}`],n.edge&&t[`edge${(0,Kk.A)(n.edge)}`],t[`size${(0,Kk.A)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,Le.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,Le.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,Le.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${_A.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),AA=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Fe.A)(n,kA),d=(0,Le.A)({},n,{edge:r,color:s,disabled:a,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled","default"!==r&&`color${(0,Kk.A)(r)}`,i&&`edge${(0,Kk.A)(i)}`,`size${(0,Kk.A)(o)}`]};return(0,qk.A)(s,CA,t)})(d);return(0,Ke.jsx)(TA,(0,Le.A)({className:(0,Ue.A)(h.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:t},u,{ownerState:d,children:i}))})),EA=AA,IA=e=>{const t=l.useRef({});return l.useEffect((()=>{t.current=e})),t.current},RA=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const PA=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=(0,Fe.A)(e,RA),a=o?{}:wT(r,i),{props:l,internalRef:c}=CT((0,Le.A)({},s,{externalSlotProps:a})),u=(0,vT.A)(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return bT(n,(0,Le.A)({},l,{ref:u}),i)};const jA=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=IA({badgeContent:t,max:r});let s=n;!1!==n||0!==t||i||(s=!0);const{badgeContent:a,max:l=r}=s?o:e;return{badgeContent:a,invisible:s,max:l,displayValue:a&&Number(a)>l?`${l}+`:a}};function NA(e){return(0,Qk.Ay)("MuiBadge",e)}const OA=(0,Ze.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),DA=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],MA=(0,Gk.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),LA=(0,Gk.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,Kk.A)(n.anchorOrigin.vertical)}${(0,Kk.A)(n.anchorOrigin.horizontal)}${(0,Kk.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,Kk.A)(n.color)}`],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${OA.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),FA=l.forwardRef((function(e,t){var n,r,i,o,s,a;const l=(0,it.b)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:w,slotProps:x,showZero:S=!1,variant:C="standard"}=l,_=(0,Fe.A)(l,DA),{badgeContent:k,invisible:T,max:A,displayValue:E}=jA({max:y,invisible:v,badgeContent:b,showZero:S}),I=IA({anchorOrigin:c,color:g,overlap:m,variant:C,badgeContent:b}),R=T||null==k&&"dot"!==C,{color:P=g,overlap:j=m,anchorOrigin:N=c,variant:O=C}=R?I:l,D="dot"!==O?E:void 0,M=(0,Le.A)({},l,{badgeContent:k,invisible:R,max:A,displayValue:D,showZero:S,anchorOrigin:N,color:P,overlap:j,variant:O}),L=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=e,a={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${(0,Kk.A)(n.vertical)}${(0,Kk.A)(n.horizontal)}`,`anchorOrigin${(0,Kk.A)(n.vertical)}${(0,Kk.A)(n.horizontal)}${(0,Kk.A)(i)}`,`overlap${(0,Kk.A)(i)}`,"default"!==t&&`color${(0,Kk.A)(t)}`]};return(0,qk.A)(a,NA,s)})(M),F=null!=(n=null!=(r=null==w?void 0:w.root)?r:h.Root)?n:MA,U=null!=(i=null!=(o=null==w?void 0:w.badge)?o:h.Badge)?i:LA,$=null!=(s=null==x?void 0:x.root)?s:p.root,V=null!=(a=null==x?void 0:x.badge)?a:p.badge,B=PA({elementType:F,externalSlotProps:$,externalForwardedProps:_,additionalProps:{ref:t,as:d},ownerState:M,className:(0,Ue.A)(null==$?void 0:$.className,L.root,u)}),z=PA({elementType:U,externalSlotProps:V,ownerState:M,className:(0,Ue.A)(L.badge,null==V?void 0:V.className)});return(0,Ke.jsxs)(F,(0,Le.A)({},B,{children:[f,(0,Ke.jsx)(U,(0,Le.A)({},z,{children:D}))]}))})),UA=FA;var $A=n(5537),VA=n(9608);function BA(e){return(0,Qk.Ay)("MuiButton",e)}const zA=(0,Ze.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const WA=l.createContext({});const HA=l.createContext(void 0),qA=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],GA=e=>(0,Le.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),KA=(0,Gk.Ay)(SA,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,Kk.A)(n.color)}`],t[`size${(0,Kk.A)(n.size)}`],t[`${n.variant}Size${(0,Kk.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],s="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,Le.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,Le.A)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:`1px solid ${(t.vars||t).palette[n.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,Le.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${zA.focusVisible}`]:(0,Le.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${zA.disabled}`]:(0,Le.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${(0,Yk.X4)(t.palette[n.color].main,.5)}`},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zA.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zA.disabled}`]:{boxShadow:"none"}}})),YA=(0,Gk.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,Kk.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},GA(t))})),JA=(0,Gk.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,Kk.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},GA(t))})),QA=l.forwardRef((function(e,t){const n=l.useContext(WA),r=l.useContext(HA),i=(0,$A.A)(n,e),o=(0,it.b)({props:i,name:"MuiButton"}),{children:s,color:a="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,size:v="medium",startIcon:y,type:b,variant:w="text"}=o,x=(0,Fe.A)(o,qA),S=(0,Le.A)({},o,{color:a,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:g,size:v,type:b,variant:w}),C=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,`${o}${(0,Kk.A)(t)}`,`size${(0,Kk.A)(i)}`,`${o}Size${(0,Kk.A)(i)}`,`color${(0,Kk.A)(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,Kk.A)(i)}`],endIcon:["icon","endIcon",`iconSize${(0,Kk.A)(i)}`]},l=(0,qk.A)(a,BA,s);return(0,Le.A)({},s,l)})(S),_=y&&(0,Ke.jsx)(YA,{className:C.startIcon,ownerState:S,children:y}),k=f&&(0,Ke.jsx)(JA,{className:C.endIcon,ownerState:S,children:f}),T=r||"";return(0,Ke.jsxs)(KA,(0,Le.A)({ownerState:S,className:(0,Ue.A)(n.className,C.root,u,T),component:c,disabled:d,focusRipple:!p,focusVisibleClassName:(0,Ue.A)(C.focusVisible,m),ref:t,type:b},x,{classes:C,children:[_,s,k]}))})),XA=QA;var ZA=n(7402);const eE=l.createContext({});function tE(e){return(0,Qk.Ay)("MuiList",e)}(0,Ze.A)("MuiList",["root","padding","dense","subheader"]);const nE=["children","className","component","dense","disablePadding","subheader"],rE=(0,Gk.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),iE=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:s=!1,disablePadding:a=!1,subheader:c}=n,u=(0,Fe.A)(n,nE),d=l.useMemo((()=>({dense:s})),[s]),h=(0,Le.A)({},n,{component:o,dense:s,disablePadding:a}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,qk.A)(o,tE,t)})(h);return(0,Ke.jsx)(eE.Provider,{value:d,children:(0,Ke.jsxs)(rE,(0,Le.A)({as:o,className:(0,Ue.A)(p.root,i),ref:t,ownerState:h},u,{children:[c,r]}))})})),oE=iE;function sE(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const aE=sE;var lE=n(9044);const cE=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function uE(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function dE(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function hE(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function pE(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&hE(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const fE=l.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:s,disabledItemsFocusable:a=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Fe.A)(e,cE),p=l.useRef(null),f=l.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,lE.A)((()=>{r&&p.current.focus()}),[r]),l.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${aE((0,ZA.A)(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const m=(0,VT.A)(p,t);let g=-1;l.Children.forEach(o,((e,t)=>{l.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1))):g===t&&(g+=1,g>=o.length&&(g=-1))}));const v=l.Children.map(o,((e,t)=>{if(t===g){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),l.cloneElement(e,t)}return e}));return(0,Ke.jsx)(oE,(0,Le.A)({role:"menu",ref:m,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,ZA.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),pE(t,r,c,a,uE);else if("ArrowUp"===n)e.preventDefault(),pE(t,r,c,a,dE);else if("Home"===n)e.preventDefault(),pE(t,null,c,a,uE);else if("End"===n)e.preventDefault(),pE(t,null,c,a,dE);else if(1===n.length){const i=f.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const l=r&&!i.repeating&&hE(r,i);i.previousKeyMatched&&(l||pE(t,r,!1,a,uE,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:r?0:-1},h,{children:v}))})),mE=fE;var gE=n(1209),vE=n(827);function yE(e){var t;return parseInt(l.version,10)>=19?(null==e||null==(t=e.props)?void 0:t.ref)||null:(null==e?void 0:e.ref)||null}const bE=!1;var wE=function(e){return e.scrollTop},xE="unmounted",SE="exited",CE="entering",_E="entered",kE="exiting",TE=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=SE,r.appearStatus=CE):i=_E:i=t.unmountOnExit||t.mountOnEnter?xE:SE,r.state={status:i},r.nextCallback=null,r}qT(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===xE?{status:SE}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==CE&&n!==_E&&(t=CE):n!==CE&&n!==_E||(t=kE)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===CE){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:ke.findDOMNode(this);n&&wE(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===SE&&this.setState({status:xE})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[ke.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||bE?this.safeSetState({status:_E},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:CE},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:_E},(function(){t.props.onEntered(o,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:ke.findDOMNode(this);t&&!bE?(this.props.onExit(r),this.safeSetState({status:kE},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:SE},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:SE},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:ke.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===xE)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Fe.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l.createElement(GT.Provider,{value:null},"function"===typeof n?n(e,r):l.cloneElement(l.Children.only(n),r))},t}(l.Component);function AE(){}TE.contextType=GT,TE.propTypes={},TE.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:AE,onEntering:AE,onEntered:AE,onExit:AE,onExiting:AE,onExited:AE},TE.UNMOUNTED=xE,TE.EXITED=SE,TE.ENTERING=CE,TE.ENTERED=_E,TE.EXITING=kE;const EE=TE;function IE(){const e=Ge(at.A);return e[Xe.A]||e}const RE=e=>e.scrollTop;function PE(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const jE=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function NE(e){return`scale(${e}, ${e**2})`}const OE={entering:{opacity:1,transform:NE(1)},entered:{opacity:1,transform:"none"}},DE="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ME=l.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:a,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=EE}=e,v=(0,Fe.A)(e,jE),y=(0,tA.A)(),b=l.useRef(),w=IE(),x=l.useRef(null),S=(0,VT.A)(x,yE(i),t),C=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},_=C(u),k=C(((e,t)=>{RE(e);const{duration:n,delay:r,easing:i}=PE({style:f,timeout:m,easing:o},{mode:"enter"});let s;"auto"===m?(s=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=s):s=n,e.style.transition=[w.transitions.create("opacity",{duration:s,delay:r}),w.transitions.create("transform",{duration:DE?s:.666*s,delay:r,easing:i})].join(","),a&&a(e,t)})),T=C(c),A=C(p),E=C((e=>{const{duration:t,delay:n,easing:r}=PE({style:f,timeout:m,easing:o},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:DE?i:.666*i,delay:DE?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=NE(.75),d&&d(e)})),I=C(h);return(0,Ke.jsx)(g,(0,Le.A)({appear:r,in:s,nodeRef:x,onEnter:k,onEntered:T,onEntering:_,onExit:E,onExited:I,onExiting:A,addEndListener:e=>{"auto"===m&&y.start(b.current||0,e),n&&n(x.current,e)},timeout:"auto"===m?null:m},v,{children:(e,t)=>l.cloneElement(i,(0,Le.A)({style:(0,Le.A)({opacity:0,transform:NE(.75),visibility:"exited"!==e||s?void 0:"hidden"},OE[e],f,i.props.style),ref:S},t))}))}));ME.muiSupportAuto=!0;const LE=ME;var FE=n(6907);const UE=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function $E(e){const t=[],n=[];return Array.from(e.querySelectorAll(UE)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function VE(){return!0}const BE=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=$E,isEnabled:s=VE,open:a}=e,c=l.useRef(!1),u=l.useRef(null),d=l.useRef(null),h=l.useRef(null),p=l.useRef(null),f=l.useRef(!1),m=l.useRef(null),g=(0,vT.A)(yE(t),m),v=l.useRef(null);l.useEffect((()=>{a&&m.current&&(f.current=!n)}),[n,a]),l.useEffect((()=>{if(!a||!m.current)return;const e=(0,FE.A)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[a]),l.useEffect((()=>{if(!a||!m.current)return;const e=(0,FE.A)(m.current),t=t=>{v.current=t,!r&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=o(m.current)),n.length>0){var i,a;const e=Boolean((null==(i=v.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=v.current)?void 0:a.key)),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,i,s,a,o]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),l.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,Ke.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var zE=n(1399),WE=n(5587);const HE=l.forwardRef((function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[o,s]=l.useState(null),a=(0,vT.A)(l.isValidElement(n)?yE(n):null,t);if((0,zE.A)((()=>{i||s(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,i]),(0,zE.A)((()=>{if(o&&!i)return(0,WE.A)(t,o),()=>{(0,WE.A)(t,null)}}),[t,o,i]),i){if(l.isValidElement(n)){const e={ref:a};return l.cloneElement(n,e)}return(0,Ke.jsx)(l.Fragment,{children:n})}return(0,Ke.jsx)(l.Fragment,{children:o?ke.createPortal(n,o):o})})),qE=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],GE={entering:{opacity:1},entered:{opacity:1}},KE=l.forwardRef((function(e,t){const n=IE(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,easing:a,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=r,TransitionComponent:y=EE}=e,b=(0,Fe.A)(e,qE),w=l.useRef(null),x=(0,VT.A)(w,yE(s),t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=S(h),_=S(((e,t)=>{RE(e);const r=PE({style:g,timeout:v,easing:a},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),k=S(d),T=S(m),A=S((e=>{const t=PE({style:g,timeout:v,easing:a},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),E=S(f);return(0,Ke.jsx)(y,(0,Le.A)({appear:o,in:c,nodeRef:w,onEnter:_,onEntered:k,onEntering:C,onExit:A,onExited:E,onExiting:T,addEndListener:e=>{i&&i(w.current,e)},timeout:v},b,{children:(e,t)=>l.cloneElement(s,(0,Le.A)({style:(0,Le.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},GE[e],g,s.props.style),ref:x},t))}))})),YE=KE;function JE(e){return(0,Qk.Ay)("MuiBackdrop",e)}(0,Ze.A)("MuiBackdrop",["root","invisible"]);const QE=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],XE=(0,Gk.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),ZE=l.forwardRef((function(e,t){var n,r,i;const o=(0,it.b)({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:m=YE,transitionDuration:g}=o,v=(0,Fe.A)(o,QE),y=(0,Le.A)({},o,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,qk.A)(r,JE,t)})(y),w=null!=(n=p.root)?n:u.root;return(0,Ke.jsx)(m,(0,Le.A)({in:h,timeout:g},v,{children:(0,Ke.jsx)(XE,(0,Le.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=f.root)?i:c.Root)?r:l,className:(0,Ue.A)(b.root,a,null==w?void 0:w.className),ownerState:(0,Le.A)({},y,null==w?void 0:w.ownerState),classes:b,ref:t,children:s}))}))})),eI=ZE;var tI=n(2529),nI=n(5511),rI=n(8635);function iI(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function oI(e){return parseInt((0,rI.A)(e).getComputedStyle(e).paddingRight,10)||0}function sI(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&iI(e,i)}))}function aI(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function lI(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,FE.A)(e);return t.body===e?(0,rI.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=sE((0,FE.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${oI(r)+e}px`;const t=(0,FE.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${oI(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,FE.A)(r).body;else{const t=r.parentElement,n=(0,rI.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const cI=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&iI(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);sI(t,e.mount,e.modalRef,r,!0);const i=aI(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=aI(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=lI(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=aI(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&iI(e.modalRef,t),sI(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&iI(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const uI=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=cI,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:c,onClose:u,open:d,rootRef:h}=e,p=l.useRef({}),f=l.useRef(null),m=l.useRef(null),g=(0,vT.A)(m,h),[v,y]=l.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const x=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),S=()=>{i.mount(x(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},C=(0,tI.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||(0,FE.A)(f.current).body;i.add(x(),e),m.current&&S()})),_=l.useCallback((()=>i.isTopModal(x())),[i]),k=(0,tI.A)((e=>{f.current=e,e&&(d&&_()?S():m.current&&iI(m.current,w))})),T=l.useCallback((()=>{i.remove(x(),w)}),[w,i]);l.useEffect((()=>()=>{T()}),[T]),l.useEffect((()=>{d?C():b&&o||T()}),[d,T,b,o,C]);const A=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&_()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},E=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=xT(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,Le.A)({},n,t);return(0,Le.A)({role:"presentation"},r,{onKeyDown:A(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Le.A)({"aria-hidden":!0},e,{onClick:E(e),open:d})},getTransitionProps:()=>({onEnter:(0,nI.A)((()=>{y(!1),s&&s()}),null==c?void 0:c.props.onEnter),onExited:(0,nI.A)((()=>{y(!0),a&&a(),o&&T()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:k,isTopModal:_,exited:v,hasTransition:b}};function dI(e){return(0,Qk.Ay)("MuiModal",e)}(0,Ze.A)("MuiModal",["root","hidden","backdrop"]);const hI=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],pI=(0,Gk.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),fI=(0,Gk.Ay)(eI,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),mI=l.forwardRef((function(e,t){var n,r,i,o,s,a;const c=(0,it.b)({name:"MuiModal",props:e}),{BackdropComponent:u=fI,BackdropProps:d,className:h,closeAfterTransition:p=!1,children:f,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:x=!1,disablePortal:S=!1,disableRestoreFocus:C=!1,disableScrollLock:_=!1,hideBackdrop:k=!1,keepMounted:T=!1,onBackdropClick:A,open:E,slotProps:I,slots:R}=c,P=(0,Fe.A)(c,hI),j=(0,Le.A)({},c,{closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:x,disablePortal:S,disableRestoreFocus:C,disableScrollLock:_,hideBackdrop:k,keepMounted:T}),{getRootProps:N,getBackdropProps:O,getTransitionProps:D,portalRef:M,isTopModal:L,exited:F,hasTransition:U}=uI((0,Le.A)({},j,{rootRef:t})),$=(0,Le.A)({},j,{exited:F}),V=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,qk.A)(i,dI,r)})($),B={};if(void 0===f.props.tabIndex&&(B.tabIndex="-1"),U){const{onEnter:e,onExited:t}=D();B.onEnter=e,B.onExited=t}const z=null!=(n=null!=(r=null==R?void 0:R.root)?r:v.Root)?n:pI,W=null!=(i=null!=(o=null==R?void 0:R.backdrop)?o:v.Backdrop)?i:u,H=null!=(s=null==I?void 0:I.root)?s:y.root,q=null!=(a=null==I?void 0:I.backdrop)?a:y.backdrop,G=PA({elementType:z,externalSlotProps:H,externalForwardedProps:P,getSlotProps:N,additionalProps:{ref:t,as:g},ownerState:$,className:(0,Ue.A)(h,null==H?void 0:H.className,null==V?void 0:V.root,!$.open&&$.exited&&(null==V?void 0:V.hidden))}),K=PA({elementType:W,externalSlotProps:q,additionalProps:d,getSlotProps:e=>O((0,Le.A)({},e,{onClick:t=>{A&&A(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,Ue.A)(null==q?void 0:q.className,null==d?void 0:d.className,null==V?void 0:V.backdrop),ownerState:$});return T||E||U&&!F?(0,Ke.jsx)(HE,{ref:M,container:m,disablePortal:S,children:(0,Ke.jsxs)(z,(0,Le.A)({},G,{children:[!k&&u?(0,Ke.jsx)(W,(0,Le.A)({},K)):null,(0,Ke.jsx)(BE,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:C,isEnabled:L,open:E,children:l.cloneElement(f,B)})]}))}):null})),gI=mI;function vI(e){return(0,Qk.Ay)("MuiPopover",e)}(0,Ze.A)("MuiPopover",["root","paper"]);const yI=["onEntering"],bI=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],wI=["slotProps"];function xI(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function SI(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function CI(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function _I(e){return"function"===typeof e?e():e}const kI=(0,Gk.Ay)(gI,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),TI=(0,Gk.Ay)(nT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),AI=l.forwardRef((function(e,t){var n,r,i;const o=(0,it.b)({props:e,name:"MuiPopover"}),{action:s,anchorEl:a,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:b,slotProps:w,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:S=LE,transitionDuration:C="auto",TransitionProps:{onEntering:_}={},disableScrollLock:k=!1}=o,T=(0,Fe.A)(o.TransitionProps,yI),A=(0,Fe.A)(o,bI),E=null!=(n=null==w?void 0:w.paper)?n:y,I=l.useRef(),R=(0,VT.A)(I,E.ref),P=(0,Le.A)({},o,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:E,transformOrigin:x,TransitionComponent:S,transitionDuration:C,TransitionProps:T}),j=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],paper:["paper"]},vI,t)})(P),N=l.useCallback((()=>{if("anchorPosition"===d)return u;const e=_I(a),t=(e&&1===e.nodeType?e:(0,ZA.A)(I.current).body).getBoundingClientRect();return{top:t.top+xI(t,c.vertical),left:t.left+SI(t,c.horizontal)}}),[a,c.horizontal,c.vertical,u,d]),O=l.useCallback((e=>({vertical:xI(e,x.vertical),horizontal:SI(e,x.horizontal)})),[x.horizontal,x.vertical]),D=l.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=O(t);if("none"===d)return{top:null,left:null,transformOrigin:CI(n)};const r=N();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,l=o+t.width,c=(0,vE.A)(_I(a)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(l>h){const e=l-h;o-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(o)}px`,transformOrigin:CI(n)}}),[a,d,N,O,g]),[M,L]=l.useState(v),F=l.useCallback((()=>{const e=I.current;if(!e)return;const t=D(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,L(!0)}),[D]);l.useEffect((()=>(k&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F))),[a,k,F]);l.useEffect((()=>{v&&F()})),l.useImperativeHandle(s,(()=>v?{updatePosition:()=>{F()}}:null),[v,F]),l.useEffect((()=>{if(!v)return;const e=(0,gE.A)((()=>{F()})),t=(0,vE.A)(a);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[a,v,F]);let U=C;"auto"!==C||S.muiSupportAuto||(U=void 0);const $=f||(a?(0,ZA.A)(_I(a)).body:void 0),V=null!=(r=null==b?void 0:b.root)?r:kI,B=null!=(i=null==b?void 0:b.paper)?i:TI,z=PA({elementType:B,externalSlotProps:(0,Le.A)({},E,{style:M?E.style:(0,Le.A)({},E.style,{opacity:0})}),additionalProps:{elevation:m,ref:R},ownerState:P,className:(0,Ue.A)(j.paper,null==E?void 0:E.className)}),W=PA({elementType:V,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:A,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:$,open:v},ownerState:P,className:(0,Ue.A)(j.root,p)}),{slotProps:H}=W,q=(0,Fe.A)(W,wI);return(0,Ke.jsx)(V,(0,Le.A)({},q,!yT(V)&&{slotProps:H,disableScrollLock:k},{children:(0,Ke.jsx)(S,(0,Le.A)({appear:!0,in:v,onEntering:(e,t)=>{_&&_(e,t),F()},onExited:()=>{L(!1)},timeout:U},T,{children:(0,Ke.jsx)(B,(0,Le.A)({},z,{children:h}))}))}))})),EI=AI;function II(e){return(0,Qk.Ay)("MuiMenu",e)}(0,Ze.A)("MuiMenu",["root","paper","list"]);const RI=["onEntering"],PI=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],jI={vertical:"top",horizontal:"right"},NI={vertical:"top",horizontal:"left"},OI=(0,Gk.Ay)(EI,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),DI=(0,Gk.Ay)(TI,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MI=(0,Gk.Ay)(mE,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),LI=l.forwardRef((function(e,t){var n,r;const i=(0,it.b)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:s,className:a,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:b={}}=i,w=(0,Fe.A)(i.TransitionProps,RI),x=(0,Fe.A)(i,PI),S=Mk(),C=(0,Le.A)({},i,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:w,variant:v}),_=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],paper:["paper"],list:["list"]},II,t)})(C),k=o&&!c&&h,T=l.useRef(null);let A=-1;l.Children.map(s,((e,t)=>{l.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===A)&&(A=t))}));const E=null!=(n=y.paper)?n:DI,I=null!=(r=b.paper)?r:p,R=PA({elementType:y.root,externalSlotProps:b.root,ownerState:C,className:[_.root,a]}),P=PA({elementType:E,externalSlotProps:I,ownerState:C,className:_.paper});return(0,Ke.jsx)(OI,(0,Le.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?jI:NI,slots:{paper:E,root:y.root},slotProps:{root:R,paper:P},open:h,ref:t,transitionDuration:m,TransitionProps:(0,Le.A)({onEntering:(e,t)=>{T.current&&T.current.adjustStyleForScrollbar(e,{direction:S?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:C},x,{classes:f,children:(0,Ke.jsx)(MI,(0,Le.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:T,autoFocus:o&&(-1===A||c),autoFocusItem:k,variant:v},u,{className:(0,Ue.A)(_.list,u.className),children:s}))}))})),FI=LI;function UI(e){return(0,Qk.Ay)("MuiDivider",e)}const $I=(0,Ze.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function VI(e){return(0,Qk.Ay)("MuiListItemIcon",e)}const BI=(0,Ze.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function zI(e){return(0,Qk.Ay)("MuiListItemText",e)}const WI=(0,Ze.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function HI(e){return(0,Qk.Ay)("MuiMenuItem",e)}const qI=(0,Ze.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),GI=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],KI=(0,Gk.Ay)(SA,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${qI.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${qI.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${qI.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${qI.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${qI.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${$I.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${$I.inset}`]:{marginLeft:52},[`& .${WI.root}`]:{marginTop:0,marginBottom:0},[`& .${WI.inset}`]:{paddingLeft:36},[`& .${BI.root}`]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,Le.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${BI.root} svg`]:{fontSize:"1.25rem"}}))})),YI=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:o=!1,divider:s=!1,disableGutters:a=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=n,p=(0,Fe.A)(n,GI),f=l.useContext(eE),m=l.useMemo((()=>({dense:o||f.dense||!1,disableGutters:a})),[f.dense,o,a]),g=l.useRef(null);(0,lE.A)((()=>{r&&g.current&&g.current.focus()}),[r]);const v=(0,Le.A)({},n,{dense:m.dense,divider:s,disableGutters:a}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,a={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,qk.A)(a,HI,s);return(0,Le.A)({},s,l)})(n),b=(0,VT.A)(g,t);let w;return n.disabled||(w=void 0!==d?d:-1),(0,Ke.jsx)(eE.Provider,{value:m,children:(0,Ke.jsx)(KI,(0,Le.A)({ref:b,role:u,tabIndex:w,component:i,focusVisibleClassName:(0,Ue.A)(y.focusVisible,c),className:(0,Ue.A)(y.root,h)},p,{ownerState:v,classes:y}))})})),JI=YI,QI=["className"],XI=(0,Gk.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),ZI=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItemIcon"}),{className:r}=n,i=(0,Fe.A)(n,QI),o=l.useContext(eE),s=(0,Le.A)({},n,{alignItems:o.alignItems}),a=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,qk.A)(r,VI,n)})(s);return(0,Ke.jsx)(XI,(0,Le.A)({className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},i))})),eR=ZI,tR=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],nR=(0,Gk.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${WI.primary}`]:t.primary},{[`& .${WI.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),rR=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItemText"}),{children:r,className:i,disableTypography:o=!1,inset:s=!1,primary:a,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=n,h=(0,Fe.A)(n,tR),{dense:p}=l.useContext(eE);let f=null!=a?a:r,m=u;const g=(0,Le.A)({},n,{disableTypography:o,inset:s,primary:!!f,secondary:!!m,dense:p}),v=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,s={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,qk.A)(s,zI,t)})(g);return null==f||f.type===$T||o||(f=(0,Ke.jsx)($T,(0,Le.A)({variant:p?"body2":"body1",className:v.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:f}))),null==m||m.type===$T||o||(m=(0,Ke.jsx)($T,(0,Le.A)({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:m}))),(0,Ke.jsxs)(nR,(0,Le.A)({className:(0,Ue.A)(v.root,i),ownerState:g,ref:t},h,{children:[f,m]}))})),iR=rR,oR=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],sR=(0,Gk.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,Yk.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,Le.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})}),(e=>{let{ownerState:t}=e;return(0,Le.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),aR=(0,Gk.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===n.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})})),lR=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:s=(i?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Fe.A)(n,oR),f=(0,Le.A)({},n,{absolute:r,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:d,variant:h}),m=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,qk.A)(c,UI,r)})(f);return(0,Ke.jsx)(sR,(0,Le.A)({as:s,className:(0,Ue.A)(m.root,o),role:u,ref:t,ownerState:f},p,{children:i?(0,Ke.jsx)(aR,{className:m.wrapper,ownerState:f,children:i}):null}))}));lR.muiSkipListHighlight=!0;const cR=lR,uR=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),dR=(0,fT.A)((0,Ke.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),hR=(0,fT.A)((0,Ke.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),pR=(0,fT.A)((0,Ke.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),fR=()=>{const e=ie(),[t,n]=(0,l.useState)(null),{currentUser:r,logout:i}=_k(),{unreadCount:o}=Ik(),s=()=>{n(null)};return(0,Ke.jsx)(Ke.Fragment,{children:(0,Ke.jsx)(lT,{position:"static",elevation:0,sx:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none",borderBottom:"none",padding:"0 24px"},children:(0,Ke.jsxs)(pT,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",minHeight:"auto"},disableGutters:!0,children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,Ke.jsx)(NT,{src:"/logo.png",alt:"Side Eye",sx:{width:40,height:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>e("/")}),(0,Ke.jsx)($T,{variant:"h5",component:"div",sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main","&:hover":{opacity:.8}},onClick:()=>e("/"),children:"SideEye"})]}),(0,Ke.jsx)(rt,{sx:{display:"flex",alignItems:"center",gap:2},children:r?(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(EA,{color:o>0?"error":"inherit",onClick:()=>e("/notifications"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ke.jsx)(UA,{badgeContent:o,color:"error",children:(0,Ke.jsx)(uR,{})})}),(0,Ke.jsx)(EA,{color:"inherit",onClick:e=>{n(e.currentTarget)},sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ke.jsx)(dR,{})})]}):(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(XA,{color:"inherit",onClick:()=>e("/login"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Login"}),(0,Ke.jsx)(XA,{color:"inherit",onClick:()=>e("/register"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Register"})]})}),(0,Ke.jsxs)(FI,{anchorEl:t,open:Boolean(t),onClose:s,sx:{"& .MuiPaper-root":{borderRadius:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",minWidth:200,border:"none"}},children:[(0,Ke.jsxs)(JI,{onClick:()=>{return t="/settings",s(),void setTimeout((()=>{e(t,{replace:!0})}),50);var t},children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(hR,{})}),(0,Ke.jsx)(iR,{primary:"Settings"})]}),(0,Ke.jsx)(cR,{}),(0,Ke.jsxs)(JI,{onClick:async()=>{await i(),s()},children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(pR,{})}),(0,Ke.jsx)(iR,{children:"Logout"})]})]})]})})})};var mR=n(5501);function gR(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,$A.A)(t.components[n].defaultProps,r):r}function vR(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=Ge(r);i&&(o=o[i]||o);return gR({theme:o,name:n,props:t})}var yR=n(7483);const bR=["ownerState"],wR=["variants"],xR=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function SR(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const CR=(0,ze.A)(),_R=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function kR(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function TR(e){return e?(t,n)=>n[e]:null}function AR(e,t){let{ownerState:n}=t,r=(0,Fe.A)(t,bR);const i="function"===typeof e?e((0,Le.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>AR(e,(0,Le.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Fe.A)(i,wR);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,Le.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,Le.A)({ownerState:n},r,n)):e.style))})),t}return i}const ER=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=CR,rootShouldForwardProp:r=SR,slotShouldForwardProp:i=SR}=e,o=e=>(0,Ve.A)((0,Le.A)({},e,{theme:kR((0,Le.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,$e.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=TR(_R(l))}=s,h=(0,Fe.A)(s,xR),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,f=u||!1;let m=SR;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,$e.default)(e,(0,Le.A)({shouldForwardProp:m,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,yR.Q)(e)?r=>AR(e,(0,Le.A)({},r,{theme:kR({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];a&&d&&u.push((e=>{const r=kR((0,Le.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=AR(i,(0,Le.A)({},e,{theme:r}))})),d(e,o)})),a&&!p&&u.push((e=>{var r;const i=kR((0,Le.A)({},e,{defaultTheme:n,themeId:t}));return AR({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,Le.A)({},e,{theme:i}))})),f||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),IR=ER,RR=["className","component","disableGutters","fixed","maxWidth","classes"],PR=(0,ze.A)(),jR=IR("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,mR.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),NR=e=>vR({props:e,name:"MuiContainer",defaultTheme:PR});const OR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=jR,useThemeProps:n=NR,componentName:r="MuiContainer"}=e,i=t((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),o=l.forwardRef((function(e,t){const o=n(e),{className:s,component:a="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=o,d=(0,Fe.A)(o,RR),h=(0,Le.A)({},o,{component:a,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,s={root:["root",o&&`maxWidth${(0,mR.A)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,qk.A)(s,(e=>(0,Qk.Ay)(t,e)),n)})(h,r);return(0,Ke.jsx)(i,(0,Le.A)({as:a,ownerState:h,className:(0,Ue.A)(p.root,s),ref:t},d))}));return o}({createStyledComponent:(0,Gk.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,Kk.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,it.b)({props:e,name:"MuiContainer"})}),DR=OR;var MR=n(3539),LR=n(8099),FR=n(1927);const UR=["onChange","maxRows","minRows","style","value"];function $R(e){return parseInt(e,10)||0}const VR={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function BR(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const zR=l.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:s}=e,a=(0,Fe.A)(e,UR),{current:c}=l.useRef(null!=s),u=l.useRef(null),d=(0,vT.A)(t,u),h=l.useRef(null),p=l.useRef(null),f=l.useCallback((()=>{const t=u.current,n=p.current;if(!t||!n)return;const o=(0,rI.A)(t).getComputedStyle(t);if("0px"===o.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=o.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const s=o.boxSizing,a=$R(o.paddingBottom)+$R(o.paddingTop),l=$R(o.borderBottomWidth)+$R(o.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;i&&(h=Math.max(Number(i)*d,h)),r&&(h=Math.min(Number(r)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===s?a+l:0),overflowing:Math.abs(h-c)<=1}}),[r,i,e.placeholder]),m=(0,tI.A)((()=>{const e=u.current,t=f();if(!e||!t||BR(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=l.useCallback((()=>{const e=u.current,t=f();if(!e||!t||BR(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[f]),v=l.useRef(-1);(0,zE.A)((()=>{const e=(0,FR.A)(g),t=null==u?void 0:u.current;if(!t)return;const n=(0,rI.A)(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{m()&&(r.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[f,g,m]),(0,zE.A)((()=>{g()}));return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)("textarea",(0,Le.A)({value:s,onChange:e=>{c||g(),n&&n(e)},ref:d,rows:i,style:o},a)),(0,Ke.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,Le.A)({},VR,o,{paddingTop:0,paddingBottom:0})})]})})),WR=zR;function HR(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const qR=l.createContext(void 0);function GR(){return l.useContext(qR)}function KR(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function YR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(KR(e.value)&&""!==e.value||t&&KR(e.defaultValue)&&""!==e.defaultValue)}function JR(e){return(0,Qk.Ay)("MuiInputBase",e)}const QR=(0,Ze.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),XR=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],ZR=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,Kk.A)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},eP=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},tP=(0,Gk.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ZR})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${QR.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,Le.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),nP=(0,Gk.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:eP})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,Le.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,Le.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${QR.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${QR.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),rP=(0,Ke.jsx)(lt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),iP=l.forwardRef((function(e,t){var n;const r=(0,it.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:w,minRows:x,multiline:S=!1,name:C,onBlur:_,onChange:k,onClick:T,onFocus:A,onKeyDown:E,onKeyUp:I,placeholder:R,readOnly:P,renderSuffix:j,rows:N,slotProps:O={},slots:D={},startAdornment:M,type:L="text",value:F}=r,U=(0,Fe.A)(r,XR),$=null!=y.value?y.value:F,{current:V}=l.useRef(null!=$),B=l.useRef(),z=l.useCallback((e=>{0}),[]),W=(0,VT.A)(B,b,y.ref,z),[H,q]=l.useState(!1),G=GR();const K=HR({props:r,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});K.focused=G?G.focused:H,l.useEffect((()=>{!G&&h&&H&&(q(!1),_&&_())}),[G,h,H,_]);const Y=G&&G.onFilled,J=G&&G.onEmpty,Q=l.useCallback((e=>{YR(e)?Y&&Y():J&&J()}),[Y,J]);(0,lE.A)((()=>{V&&Q({value:$})}),[$,Q,V]);l.useEffect((()=>{Q(B.current)}),[]);let X=v,Z=y;S&&"input"===X&&(Z=N?(0,Le.A)({type:void 0,minRows:N,maxRows:N},Z):(0,Le.A)({type:void 0,maxRows:w,minRows:x},Z),X=WR);l.useEffect((()=>{G&&G.setAdornedStart(Boolean(M))}),[G,M]);const ee=(0,Le.A)({},r,{color:K.color||"primary",disabled:K.disabled,endAdornment:f,error:K.error,focused:K.focused,formControl:G,fullWidth:m,hiddenLabel:K.hiddenLabel,multiline:S,size:K.size,startAdornment:M,type:L}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,m={root:["root",`color${(0,Kk.A)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&`size${(0,Kk.A)(h)}`,u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,qk.A)(m,JR,t)})(ee),ne=D.root||c.Root||tP,re=O.root||u.root||{},ie=D.input||c.Input||nP;return Z=(0,Le.A)({},Z,null!=(n=O.input)?n:u.input),(0,Ke.jsxs)(l.Fragment,{children:[!p&&rP,(0,Ke.jsxs)(ne,(0,Le.A)({},re,!yT(ne)&&{ownerState:(0,Le.A)({},ee,re.ownerState)},{ref:t,onClick:e=>{B.current&&e.currentTarget===e.target&&B.current.focus(),T&&T(e)}},U,{className:(0,Ue.A)(te.root,re.className,a,P&&"MuiInputBase-readOnly"),children:[M,(0,Ke.jsx)(qR.Provider,{value:null,children:(0,Ke.jsx)(ie,(0,Le.A)({ownerState:ee,"aria-invalid":K.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:d,disabled:K.disabled,id:g,onAnimationStart:e=>{Q("mui-auto-fill-cancel"===e.animationName?B.current:{value:"x"})},name:C,placeholder:R,readOnly:P,required:K.required,rows:N,value:$,onKeyDown:E,onKeyUp:I,type:L},Z,!yT(ie)&&{as:X,ownerState:(0,Le.A)({},ee,Z.ownerState)},{ref:W,className:(0,Ue.A)(te.input,Z.className,P&&"MuiInputBase-readOnly"),onBlur:e=>{_&&_(e),y.onBlur&&y.onBlur(e),G&&G.onBlur?G.onBlur(e):q(!1)},onChange:function(e){if(!V){const t=e.target||B.current;if(null==t)throw new Error((0,LR.A)(1));Q({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),k&&k(e,...n)},onFocus:e=>{K.disabled?e.stopPropagation():(A&&A(e),y.onFocus&&y.onFocus(e),G&&G.onFocus?G.onFocus(e):q(!0))}}))}),f,j?j((0,Le.A)({},K,{startAdornment:M})):null]}))]})})),oP=iP;function sP(e){return(0,Qk.Ay)("MuiInput",e)}const aP=(0,Le.A)({},QR,(0,Ze.A)("MuiInput",["root","underline","input"])),lP=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],cP=(0,Gk.Ay)(tP,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ZR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),(0,Le.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${aP.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${aP.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${aP.disabled}, .${aP.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${aP.disabled}:before`]:{borderBottomStyle:"dotted"}})})),uP=(0,Gk.Ay)(nP,{name:"MuiInput",slot:"Input",overridesResolver:eP})({}),dP=l.forwardRef((function(e,t){var n,r,i,o;const s=(0,it.b)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=s,g=(0,Fe.A)(s,lP),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,qk.A)(r,sP,t);return(0,Le.A)({},t,i)})(s),y={root:{ownerState:{disableUnderline:a}}},b=(null!=p?p:c)?(0,yR.A)(null!=p?p:c,y):y,w=null!=(n=null!=(r=f.root)?r:l.Root)?n:cP,x=null!=(i=null!=(o=f.input)?o:l.Input)?i:uP;return(0,Ke.jsx)(oP,(0,Le.A)({slots:{root:w,input:x},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:v}))}));dP.muiName="Input";const hP=dP;function pP(e){return(0,Qk.Ay)("MuiFilledInput",e)}const fP=(0,Le.A)({},QR,(0,Ze.A)("MuiFilledInput",["root","underline","input"])),mP=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],gP=(0,Gk.Ay)(tP,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ZR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,Le.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${fP.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${fP.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fP.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${fP.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fP.disabled}, .${fP.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${fP.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,Le.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),vP=(0,Gk.Ay)(nP,{name:"MuiFilledInput",slot:"Input",overridesResolver:eP})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),yP=l.forwardRef((function(e,t){var n,r,i,o;const s=(0,it.b)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=s,m=(0,Fe.A)(s,mP),g=(0,Le.A)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:f}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,qk.A)(r,pP,t);return(0,Le.A)({},t,i)})(s),y={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,yR.A)(y,null!=h?h:l):y,w=null!=(n=null!=(r=p.root)?r:a.Root)?n:gP,x=null!=(i=null!=(o=p.input)?o:a.Input)?i:vP;return(0,Ke.jsx)(oP,(0,Le.A)({slots:{root:w,input:x},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},m,{classes:v}))}));yP.muiName="Input";const bP=yP;var wP;const xP=["children","classes","className","label","notched"],SP=(0,Gk.Ay)("fieldset",{shouldForwardProp:VA.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),CP=(0,Gk.Ay)("legend",{shouldForwardProp:VA.A})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,Le.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function _P(e){return(0,Qk.Ay)("MuiOutlinedInput",e)}const kP=(0,Le.A)({},QR,(0,Ze.A)("MuiOutlinedInput",["root","notchedOutline","input"])),TP=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],AP=(0,Gk.Ay)(tP,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ZR})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,Le.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${kP.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${kP.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${kP.focused} .${kP.notchedOutline}`]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},[`&.${kP.error} .${kP.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${kP.disabled} .${kP.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,Le.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),EP=(0,Gk.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,Fe.A)(e,xP),o=null!=n&&""!==n,s=(0,Le.A)({},e,{notched:r,withLabel:o});return(0,Ke.jsx)(SP,(0,Le.A)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,Ke.jsx)(CP,{ownerState:s,children:o?(0,Ke.jsx)("span",{children:n}):wP||(wP=(0,Ke.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),IP=(0,Gk.Ay)(nP,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:eP})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),RP=l.forwardRef((function(e,t){var n,r,i,o,s;const a=(0,it.b)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=a,v=(0,Fe.A)(a,TP),y=(e=>{const{classes:t}=e,n=(0,qk.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},_P,t);return(0,Le.A)({},t,n)})(a),b=GR(),w=HR({props:a,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=(0,Le.A)({},a,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:g}),S=null!=(n=null!=(r=m.root)?r:c.Root)?n:AP,C=null!=(i=null!=(o=m.input)?o:c.Input)?i:IP;return(0,Ke.jsx)(oP,(0,Le.A)({slots:{root:S,input:C},renderSuffix:e=>(0,Ke.jsx)(EP,{ownerState:x,className:y.notchedOutline,label:null!=h&&""!==h&&w.required?s||(s=(0,Ke.jsxs)(l.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:t,type:g},v,{classes:(0,Le.A)({},y,{notchedOutline:null})}))}));RP.muiName="Input";const PP=RP;function jP(e){return(0,Qk.Ay)("MuiFormLabel",e)}const NP=(0,Ze.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),OP=["children","className","color","component","disabled","error","filled","focused","required"],DP=(0,Gk.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,Le.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${NP.focused}`]:{color:(t.vars||t).palette[n.color].main},[`&.${NP.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${NP.error}`]:{color:(t.vars||t).palette.error.main}})})),MP=(0,Gk.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${NP.error}`]:{color:(t.vars||t).palette.error.main}}})),LP=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,Fe.A)(n,OP),a=HR({props:n,muiFormControl:GR(),states:["color","required","focused","disabled","error","filled"]}),l=(0,Le.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root",`color${(0,Kk.A)(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,qk.A)(l,jP,t)})(l);return(0,Ke.jsxs)(DP,(0,Le.A)({as:o,ownerState:l,className:(0,Ue.A)(c.root,i),ref:t},s,{children:[r,a.required&&(0,Ke.jsxs)(MP,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),FP=LP;function UP(e){return(0,Qk.Ay)("MuiInputLabel",e)}(0,Ze.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const $P=["disableAnimation","margin","shrink","variant","className"],VP=(0,Gk.Ay)(FP,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${NP.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,Le.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,Le.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,Le.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),BP=l.forwardRef((function(e,t){const n=(0,it.b)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,Fe.A)(n,$P),a=GR();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=HR({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,Le.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${(0,Kk.A)(r)}`,s],asterisk:[a&&"asterisk"]},c=(0,qk.A)(l,UP,t);return(0,Le.A)({},t,c)})(u);return(0,Ke.jsx)(VP,(0,Le.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,Ue.A)(d.root,o)},s,{classes:d}))})),zP=BP;var WP=n(3828);function HP(e){return(0,Qk.Ay)("MuiFormControl",e)}(0,Ze.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const qP=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],GP=(0,Gk.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,Le.A)({},t.root,t[`margin${(0,Kk.A)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),KP=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=n,v=(0,Fe.A)(n,qP),y=(0,Le.A)({},n,{color:o,component:s,disabled:a,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,Kk.A)(n)}`,r&&"fullWidth"]};return(0,qk.A)(i,HP,t)})(y),[w,x]=l.useState((()=>{let e=!1;return r&&l.Children.forEach(r,(t=>{if(!(0,WP.A)(t,["Input","Select"]))return;const n=(0,WP.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[S,C]=l.useState((()=>{let e=!1;return r&&l.Children.forEach(r,(t=>{(0,WP.A)(t,["Input","Select"])&&(YR(t.props,!0)||YR(t.props.inputProps,!0))&&(e=!0)})),e})),[_,k]=l.useState(!1);a&&_&&k(!1);const T=void 0===u||a?_:u;let A;const E=l.useMemo((()=>({adornedStart:w,setAdornedStart:x,color:o,disabled:a,error:c,filled:S,focused:T,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{k(!1)},onEmpty:()=>{C(!1)},onFilled:()=>{C(!0)},onFocus:()=>{k(!0)},registerEffect:A,required:f,variant:g})),[w,o,a,c,S,T,d,h,A,f,m,g]);return(0,Ke.jsx)(qR.Provider,{value:E,children:(0,Ke.jsx)(GP,(0,Le.A)({as:s,ownerState:y,className:(0,Ue.A)(b.root,i),ref:t},v,{children:r}))})})),YP=KP;function JP(e){return(0,Qk.Ay)("MuiFormHelperText",e)}const QP=(0,Ze.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var XP;const ZP=["children","className","component","disabled","error","filled","focused","margin","required","variant"],ej=(0,Gk.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,Kk.A)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${QP.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${QP.error}`]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),tj=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,Fe.A)(n,ZP),a=HR({props:n,muiFormControl:GR(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,Le.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${(0,Kk.A)(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,qk.A)(c,JP,t)})(l);return(0,Ke.jsx)(ej,(0,Le.A)({as:o,ownerState:l,className:(0,Ue.A)(c.root,i),ref:t},s,{children:" "===r?XP||(XP=(0,Ke.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),nj=tj;function rj(e){return(0,Qk.Ay)("MuiNativeSelect",e)}const ij=(0,Ze.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),oj=["className","disabled","error","IconComponent","inputRef","variant"],sj=e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,Le.A)({},n.vars?{backgroundColor:`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${ij.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},aj=(0,Gk.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:VA.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${ij.multiple}`]:t.multiple}]}})(sj),lj=e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${ij.disabled}`]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},cj=(0,Gk.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,Kk.A)(n.variant)}`],n.open&&t.iconOpen]}})(lj),uj=l.forwardRef((function(e,t){const{className:n,disabled:r,error:i,IconComponent:o,inputRef:s,variant:a="standard"}=e,c=(0,Fe.A)(e,oj),u=(0,Le.A)({},e,{disabled:r,variant:a,error:i}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${(0,Kk.A)(n)}`,o&&"iconOpen",r&&"disabled"]};return(0,qk.A)(a,rj,t)})(u);return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)(aj,(0,Le.A)({ownerState:u,className:(0,Ue.A)(d.select,n),disabled:r,ref:s||t},c)),e.multiple?null:(0,Ke.jsx)(cj,{as:o,ownerState:u,className:d.icon})]})})),dj=uj;var hj=n(1960),pj=n(8733);function fj(e){return(0,Qk.Ay)("MuiSelect",e)}const mj=(0,Ze.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var gj;const vj=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],yj=(0,Gk.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${mj.select}`]:t.select},{[`&.${mj.select}`]:t[n.variant]},{[`&.${mj.error}`]:t.error},{[`&.${mj.multiple}`]:t.multiple}]}})(sj,{[`&.${mj.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bj=(0,Gk.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,Kk.A)(n.variant)}`],n.open&&t.iconOpen]}})(lj),wj=(0,Gk.Ay)("input",{shouldForwardProp:e=>(0,hj.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function xj(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Sj(e){return null==e||"string"===typeof e&&!e.trim()}const Cj=l.forwardRef((function(e,t){var n;const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:s,children:a,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:p,error:f=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:b,name:w,onBlur:x,onChange:S,onClose:C,onFocus:_,onOpen:k,open:T,readOnly:A,renderValue:E,SelectDisplayProps:I={},tabIndex:R,value:P,variant:j="standard"}=e,N=(0,Fe.A)(e,vj),[O,D]=(0,pj.A)({controlled:P,default:d,name:"Select"}),[M,L]=(0,pj.A)({controlled:T,default:u,name:"Select"}),F=l.useRef(null),U=l.useRef(null),[$,V]=l.useState(null),{current:B}=l.useRef(null!=T),[z,W]=l.useState(),H=(0,VT.A)(t,g),q=l.useCallback((e=>{U.current=e,e&&V(e)}),[]),G=null==$?void 0:$.parentNode;l.useImperativeHandle(H,(()=>({focus:()=>{U.current.focus()},node:F.current,value:O})),[O]),l.useEffect((()=>{u&&M&&$&&!B&&(W(s?null:G.clientWidth),U.current.focus())}),[$,s]),l.useEffect((()=>{o&&U.current.focus()}),[o]),l.useEffect((()=>{if(!v)return;const e=(0,ZA.A)(U.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const K=(e,t)=>{e?k&&k(t):C&&C(t),B||(W(s?null:G.clientWidth),L(e))},Y=l.Children.toArray(a),J=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(O)?O.slice():[];const t=O.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),O!==n&&(D(n),S)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),S(i,e)}b||K(!1,t)}},Q=null!==$&&M;let X,Z;delete N["aria-invalid"];const ee=[];let te=!1,ne=!1;(YR({value:O})||p)&&(E?X=E(O):te=!0);const re=Y.map((e=>{if(!l.isValidElement(e))return null;let t;if(b){if(!Array.isArray(O))throw new Error((0,LR.A)(2));t=O.some((t=>xj(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=xj(O,e.props.value),t&&te&&(Z=e.props.children);return t&&(ne=!0),l.cloneElement(e,{"aria-selected":t?"true":"false",onClick:J(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(X=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=z;!s&&B&&$&&(oe=G.clientWidth),ie="undefined"!==typeof R?R:h?null:0;const se=I.id||(w?`mui-component-select-${w}`:void 0),ae=(0,Le.A)({},e,{variant:j,value:O,open:Q,error:f}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${(0,Kk.A)(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,qk.A)(a,fj,t)})(ae),ce=(0,Le.A)({},y.PaperProps,null==(n=y.slotProps)?void 0:n.paper),ue=(0,MR.A)();return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)(yj,(0,Le.A)({ref:q,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[v,se].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:e=>{if(!A){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||A?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),K(!0,e))},onBlur:e=>{!Q&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:O,name:w}}),x(e))},onFocus:_},I,{ownerState:ae,className:(0,Ue.A)(I.className,le.select,c),id:se,children:Sj(X)?gj||(gj=(0,Ke.jsx)("span",{className:"notranslate",children:"\u200b"})):X})),(0,Ke.jsx)(wj,(0,Le.A)({"aria-invalid":f,value:Array.isArray(O)?O.join(","):O,name:w,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(D(t.props.value),S&&S(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:o,ownerState:ae},N)),(0,Ke.jsx)(bj,{as:m,className:le.icon,ownerState:ae}),(0,Ke.jsx)(FI,(0,Le.A)({id:`menu-${w||""}`,anchorEl:G,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,Le.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,Le.A)({},y.slotProps,{paper:(0,Le.A)({},ce,{style:(0,Le.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),_j=Cj,kj=(0,fT.A)((0,Ke.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Tj=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Aj=["root"],Ej={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,VA.A)(e)&&"variant"!==e,slot:"Root"},Ij=(0,Gk.Ay)(hP,Ej)(""),Rj=(0,Gk.Ay)(PP,Ej)(""),Pj=(0,Gk.Ay)(bP,Ej)(""),jj=l.forwardRef((function(e,t){const n=(0,it.b)({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:i,classes:o={},className:s,defaultOpen:a=!1,displayEmpty:c=!1,IconComponent:u=kj,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:w,open:x,renderValue:S,SelectDisplayProps:C,variant:_="outlined"}=n,k=(0,Fe.A)(n,Tj),T=y?dj:_j,A=HR({props:n,muiFormControl:GR(),states:["variant","error"]}),E=A.variant||_,I=(0,Le.A)({},n,{variant:E,classes:o}),R=(e=>{const{classes:t}=e;return t})(I),P=(0,Fe.A)(R,Aj),j=h||{standard:(0,Ke.jsx)(Ij,{ownerState:I}),outlined:(0,Ke.jsx)(Rj,{label:f,ownerState:I}),filled:(0,Ke.jsx)(Pj,{ownerState:I})}[E],N=(0,VT.A)(t,yE(j));return(0,Ke.jsx)(l.Fragment,{children:l.cloneElement(j,(0,Le.A)({inputComponent:T,inputProps:(0,Le.A)({children:i,error:A.error,IconComponent:u,variant:E,type:void 0,multiple:v},y?{id:d}:{autoWidth:r,defaultOpen:a,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:x,renderValue:S,SelectDisplayProps:(0,Le.A)({id:d},C)},p,{classes:p?(0,yR.A)(P,p.classes):P},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===E?{notched:!0}:{},{ref:N,className:(0,Ue.A)(j.props.className,s,R.root)},!h&&{variant:E},k))})}));jj.muiName="Select";const Nj=jj;function Oj(e){return(0,Qk.Ay)("MuiTextField",e)}(0,Ze.A)("MuiTextField",["root"]);const Dj=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Mj={standard:hP,filled:bP,outlined:PP},Lj=(0,Gk.Ay)(YP,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Fj=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:b,maxRows:w,minRows:x,multiline:S=!1,name:C,onBlur:_,onChange:k,onFocus:T,placeholder:A,required:E=!1,rows:I,select:R=!1,SelectProps:P,type:j,value:N,variant:O="outlined"}=n,D=(0,Fe.A)(n,Dj),M=(0,Le.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:S,required:E,select:R,variant:O}),L=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},Oj,t)})(M);const F={};"outlined"===O&&(m&&"undefined"!==typeof m.shrink&&(F.notched=m.shrink),F.label=b),R&&(P&&P.native||(F.id=void 0),F["aria-describedby"]=void 0);const U=(0,MR.A)(f),$=p&&U?`${U}-helper-text`:void 0,V=b&&U?`${U}-label`:void 0,B=Mj[O],z=(0,Ke.jsx)(B,(0,Le.A)({"aria-describedby":$,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:S,name:C,rows:I,maxRows:w,minRows:x,type:j,value:N,id:U,inputRef:y,onBlur:_,onChange:k,onFocus:T,placeholder:A,inputProps:g},F,v));return(0,Ke.jsxs)(Lj,(0,Le.A)({className:(0,Ue.A)(L.root,s),disabled:c,error:u,fullWidth:h,ref:t,required:E,color:a,variant:O,ownerState:M},D,{children:[null!=b&&""!==b&&(0,Ke.jsx)(zP,(0,Le.A)({htmlFor:U,id:V},m,{children:b})),R?(0,Ke.jsx)(Nj,(0,Le.A)({"aria-describedby":$,id:U,labelId:V,value:N,input:z},P,{children:o})):z,p&&(0,Ke.jsx)(nj,(0,Le.A)({id:$},d,{children:p}))]}))})),Uj=Fj;function $j(e){return(0,Qk.Ay)("MuiAlert",e)}const Vj=(0,Ze.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Bj=(0,fT.A)((0,Ke.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),zj=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Wj=(0,fT.A)((0,Ke.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Hj=(0,fT.A)((0,Ke.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),qj=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Gj=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Kj=(0,Gk.Ay)(nT,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,Kk.A)(n.color||n.severity)}`]]}})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?Yk.e$:Yk.a,r="light"===t.palette.mode?Yk.a:Yk.e$;return(0,Le.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${Vj.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${Vj.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,Le.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})})),Yj=(0,Gk.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Jj=(0,Gk.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Qj=(0,Gk.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Xj={success:(0,Ke.jsx)(Bj,{fontSize:"inherit"}),warning:(0,Ke.jsx)(zj,{fontSize:"inherit"}),error:(0,Ke.jsx)(Wj,{fontSize:"inherit"}),info:(0,Ke.jsx)(Hj,{fontSize:"inherit"})},Zj=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:s="Close",color:a,components:l={},componentsProps:c={},icon:u,iconMapping:d=Xj,onClose:h,role:p="alert",severity:f="success",slotProps:m={},slots:g={},variant:v="standard"}=n,y=(0,Fe.A)(n,Gj),b=(0,Le.A)({},n,{color:a,severity:f,variant:v,colorSeverity:a||f}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`color${(0,Kk.A)(n||r)}`,`${t}${(0,Kk.A)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,qk.A)(o,$j,i)})(b),x={slots:(0,Le.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,Le.A)({},c,m)},[S,C]=AT("closeButton",{elementType:EA,externalForwardedProps:x,ownerState:b}),[_,k]=AT("closeIcon",{elementType:qj,externalForwardedProps:x,ownerState:b});return(0,Ke.jsxs)(Kj,(0,Le.A)({role:p,elevation:0,ownerState:b,className:(0,Ue.A)(w.root,o),ref:t},y,{children:[!1!==u?(0,Ke.jsx)(Yj,{ownerState:b,className:w.icon,children:u||d[f]||Xj[f]}):null,(0,Ke.jsx)(Jj,{ownerState:b,className:w.message,children:i}),null!=r?(0,Ke.jsx)(Qj,{ownerState:b,className:w.action,children:r}):null,null==r&&h?(0,Ke.jsx)(Qj,{ownerState:b,className:w.action,children:(0,Ke.jsx)(S,(0,Le.A)({size:"small","aria-label":s,title:s,color:"inherit",onClick:h},C,{children:(0,Ke.jsx)(_,(0,Le.A)({fontSize:"small"},k))}))}):null]}))})),eN=Zj;var tN=n(8286);const nN=l.createContext();function rN(e){return(0,Qk.Ay)("MuiGrid",e)}const iN=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],oN=(0,Ze.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...iN.map((e=>`grid-xs-${e}`)),...iN.map((e=>`grid-sm-${e}`)),...iN.map((e=>`grid-md-${e}`)),...iN.map((e=>`grid-lg-${e}`)),...iN.map((e=>`grid-xl-${e}`))]),sN=oN,aN=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function lN(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function cN(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const uN=(0,Gk.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(s,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==a&&t[`wrap-xs-${String(a)}`],...d]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,tN.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,tN.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${sN.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,tN.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=cN({breakpoints:t.breakpoints.values,values:e})),o=(0,tN.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:`-${lN(o)}`,[`& > .${sN.item}`]:{paddingTop:lN(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${sN.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,tN.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=cN({breakpoints:t.breakpoints.values,values:e})),o=(0,tN.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:`calc(100% + ${lN(o)})`,marginLeft:`-${lN(o)}`,[`& > .${sN.item}`]:{paddingLeft:lN(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${sN.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,tN.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return e;const l=Math.round(t/a*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${lN(e)})`;c={flexBasis:t,maxWidth:t}}}o=(0,Le.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const dN=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)}));const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==s&&`wrap-xs-${String(s)}`,...u]};return(0,qk.A)(d,rN,t)},hN=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiGrid"}),{breakpoints:r}=IE(),i=(0,Be.A)(n),{className:o,columns:s,columnSpacing:a,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=i,v=(0,Fe.A)(i,aN),y=p||f,b=a||f,w=l.useContext(nN),x=u?s||12:w,S={},C=(0,Le.A)({},v);r.keys.forEach((e=>{null!=v[e]&&(S[e]=v[e],delete C[e])}));const _=(0,Le.A)({},i,{columns:x,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},S,{breakpoints:r.keys}),k=dN(_);return(0,Ke.jsx)(nN.Provider,{value:x,children:(0,Ke.jsx)(uN,(0,Le.A)({ownerState:_,className:(0,Ue.A)(k.root,o),as:c,ref:t},C))})}));const pN=hN;function fN(e){return(0,Qk.Ay)("MuiLink",e)}const mN=(0,Ze.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var gN=n(2703);const vN={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},yN=e=>{let{theme:t,ownerState:n}=e;const r=(e=>vN[e]||e)(n.color),i=(0,gN.Yn)(t,`palette.${r}`,!1)||n.color,o=(0,gN.Yn)(t,`palette.${r}Channel`);return"vars"in t&&o?`rgba(${o} / 0.4)`:(0,Yk.X4)(i,.4)},bN=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],wN=(0,Gk.Ay)($T,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${(0,Kk.A)(n.underline)}`],"button"===n.component&&t.button]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,Le.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:yN({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${mN.focusVisible}`]:{outline:"auto"}})})),xN=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiLink"}),{className:r,color:i="primary",component:o="a",onBlur:s,onFocus:a,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:h}=n,p=(0,Fe.A)(n,bN),{isFocusVisibleRef:f,onBlur:m,onFocus:g,ref:v}=(0,zT.A)(),[y,b]=l.useState(!1),w=(0,VT.A)(t,v),x=(0,Le.A)({},n,{color:i,component:o,focusVisible:y,underline:u,variant:d}),S=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${(0,Kk.A)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,qk.A)(o,fN,t)})(x);return(0,Ke.jsx)(wN,(0,Le.A)({color:i,className:(0,Ue.A)(S.root,r),classes:c,component:o,onBlur:e=>{m(e),!1===f.current&&b(!1),s&&s(e)},onFocus:e=>{g(e),!0===f.current&&b(!0),a&&a(e)},ref:w,ownerState:x,variant:d,sx:[...Object.keys(vN).includes(i)?[]:[{color:i}],...Array.isArray(h)?h:[h]]},p))})),SN=xN;function CN(e){return(0,Qk.Ay)("MuiCircularProgress",e)}(0,Ze.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _N=["className","color","disableShrink","size","style","thickness","value","variant"];let kN,TN,AN,EN,IN=e=>e;const RN=44,PN=(0,eA.i7)(kN||(kN=IN`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),jN=(0,eA.i7)(TN||(TN=IN`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),NN=(0,Gk.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,Kk.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,eA.AH)(AN||(AN=IN`
      animation: ${0} 1.4s linear infinite;
    `),PN)})),ON=(0,Gk.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),DN=(0,Gk.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,Kk.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,eA.AH)(EN||(EN=IN`
      animation: ${0} 1.4s ease-in-out infinite;
    `),jN)})),MN=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:a,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Fe.A)(n,_N),h=(0,Le.A)({},n,{color:i,disableShrink:o,size:s,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${(0,Kk.A)(r)}`],svg:["svg"],circle:["circle",`circle${(0,Kk.A)(n)}`,i&&"circleDisableShrink"]};return(0,qk.A)(o,CN,t)})(h),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((RN-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,Ke.jsx)(NN,(0,Le.A)({className:(0,Ue.A)(p.root,r),style:(0,Le.A)({width:s,height:s},m,a),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,Ke.jsx)(ON,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Ke.jsx)(DN,{className:p.circle,style:f,ownerState:h,cx:RN,cy:RN,r:(RN-l)/2,fill:"none",strokeWidth:l})})}))})),LN=MN,FN=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(!1),[s,a]=(0,l.useState)(null),{login:c,loading:u,error:d,setError:h,currentUser:p,userProfile:f}=_k(),m=ie();(0,l.useEffect)((()=>{a(null)}),[e,n]),(0,l.useEffect)((()=>{p&&f&&f.sourceCodeSetupComplete&&m("/")}),[p,f,m]),(0,l.useEffect)((()=>{d&&a({type:"error",message:d})}),[d]);const g=u||i;return(0,Ke.jsx)(DR,{maxWidth:"xs",children:(0,Ke.jsxs)(nT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{component:"h1",variant:"h5",align:"center",sx:{mb:2},children:"Login to Side Eye"}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async t=>{if(t.preventDefault(),h&&h(null),a(null),!e.trim())return void a({type:"error",message:"Email is required"});if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.trim()))if(n)try{if(o(!0),a({type:"info",message:"Logging in..."}),await c(e.trim(),n),p){var r;const e=vg(YC,"users",p.uid),t=await Pv(e);t.exists()&&!1===(null===(r=t.data())||void 0===r?void 0:r.isActive)&&(console.log("[Login] Reactivating account for user:",p.uid),await Dv(e,{isActive:!0,deactivatedAt:qv()}),C_.success("Welcome back! Your account has been reactivated."))}else console.warn("[Login] currentUser not available immediately after login for reactivation check.");a({type:"success",message:"Login successful! Redirecting..."})}catch(i){console.error("Login component caught error:",i),"auth/too-many-requests"===i.code||"auth/too-many-requests"===i.message?a({type:"error",message:"Too many failed login attempts. Please try again later or reset your password."}):"auth/invalid-credential"===i.code||"auth/invalid-credential"===i.message?a({type:"error",message:"Invalid email or password. Please try again."}):"auth/invalid-email"===i.code||"auth/invalid-email"===i.message?a({type:"error",message:"Invalid email address. Please check the format."}):a({type:"error",message:i.message||"Login failed. Please try again."})}finally{o(!1)}else a({type:"error",message:"Password is required"});else a({type:"error",message:"Please enter a valid email address"})},noValidate:!0,sx:{mt:1},children:[(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>t(e.target.value),disabled:g}),(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n,onChange:e=>r(e.target.value),disabled:g}),s&&(0,Ke.jsx)(eN,{severity:s.type,sx:{mt:2},children:s.message}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?(0,Ke.jsx)(LN,{size:24}):"Sign In"}),(0,Ke.jsxs)(pN,{container:!0,justifyContent:"space-between",children:[(0,Ke.jsx)(pN,{item:!0,children:(0,Ke.jsx)(SN,{component:Oe,to:"/reset-password",variant:"body2",children:"Forgot password?"})}),(0,Ke.jsx)(pN,{item:!0,children:(0,Ke.jsx)(SN,{component:Oe,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})};function UN(e){return(0,Qk.Ay)("MuiInputAdornment",e)}const $N=(0,Ze.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var VN;const BN=["children","className","component","disablePointerEvents","disableTypography","position","variant"],zN=(0,Gk.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Kk.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${$N.positionStart}&:not(.${$N.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),WN=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiInputAdornment"}),{children:r,className:i,component:o="div",disablePointerEvents:s=!1,disableTypography:a=!1,position:c,variant:u}=n,d=(0,Fe.A)(n,BN),h=GR()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=(0,Le.A)({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=e,a={root:["root",n&&"disablePointerEvents",i&&`position${(0,Kk.A)(i)}`,s,r&&"hiddenLabel",o&&`size${(0,Kk.A)(o)}`]};return(0,qk.A)(a,UN,t)})(f);return(0,Ke.jsx)(qR.Provider,{value:null,children:(0,Ke.jsx)(zN,(0,Le.A)({as:o,ownerState:f,className:(0,Ue.A)(m.root,i),ref:t},d,{children:"string"!==typeof r||a?(0,Ke.jsxs)(l.Fragment,{children:["start"===c?VN||(VN=(0,Ke.jsx)("span",{className:"notranslate",children:"\u200b"})):null,r]}):(0,Ke.jsx)($T,{color:"text.secondary",children:r})}))})})),HN=WN;function qN(e,t,n,r,i){const[o,s]=l.useState((()=>i&&n?n(e).matches:r?r(e).matches:t));return(0,zE.A)((()=>{let t=!0;if(!n)return;const r=n(e),i=()=>{t&&s(r.matches)};return i(),r.addListener(i),()=>{t=!1,r.removeListener(i)}}),[e,n]),o}const GN=c.useSyncExternalStore;function KN(e,t,n,r,i){const o=l.useCallback((()=>t),[t]),s=l.useMemo((()=>{if(i&&n)return()=>n(e).matches;if(null!==r){const{matches:t}=r(e);return()=>t}return o}),[o,e,r,i,n]),[a,c]=l.useMemo((()=>{if(null===n)return[o,()=>()=>{}];const t=n(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[o,n,e]);return GN(c,a,s)}function YN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=He(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:o=(r?window.matchMedia:null),ssrMatchMedia:s=null,noSsr:a=!1}=gR({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");return(void 0!==GN?KN:qN)(l,i,o,s,a)}function JN(e){let{props:t,name:n}=e;return vR({props:t,name:n,defaultTheme:at.A,themeId:Xe.A})}var QN=n(1942),XN=n.n(QN);function ZN(e,t,n){return"function"===typeof e?e(t,n):e}const eO=XN().oneOfType([XN().func,XN().object]),tO=(e,t)=>e.length===t.length&&t.every((t=>e.includes(t))),nO=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r},rO=e=>{let{date:t,disableFuture:n,disablePast:r,maxDate:i,minDate:o,isDateDisabled:s,utils:a,timezone:l}=e;const c=nO(a,a.dateWithTimezone(void 0,l),t);r&&a.isBefore(o,c)&&(o=c),n&&a.isAfter(i,c)&&(i=c);let u=t,d=t;for(a.isBefore(t,o)&&(u=o,d=null),a.isAfter(t,i)&&(d&&(d=i),u=null);u||d;){if(u&&a.isAfter(u,i)&&(u=null),d&&a.isBefore(d,o)&&(d=null),u){if(!s(u))return u;u=a.addDays(u,1)}if(d){if(!s(d))return d;d=a.addDays(d,-1)}}return null},iO=(e,t,n)=>null!=t&&e.isValid(t)?t:n,oO=(e,t)=>{const n=[e.startOfYear(t)];for(;n.length<12;){const t=n[n.length-1];n.push(e.addMonths(t,1))}return n},sO=(e,t,n)=>"date"===n?e.startOfDay(e.dateWithTimezone(void 0,t)):e.dateWithTimezone(void 0,t),aO=["year","month","day"],lO=e=>aO.includes(e),cO=(e,t,n)=>{let{format:r,views:i}=t;if(null!=r)return r;const o=e.formats;return tO(i,["year"])?o.year:tO(i,["month"])?o.month:tO(i,["day"])?o.dayOfMonth:tO(i,["month","year"])?`${o.month} ${o.year}`:tO(i,["day","month"])?`${o.month} ${o.dayOfMonth}`:n?/en/.test(e.getCurrentLocaleCode())?o.normalDateWithWeekday:o.normalDate:o.keyboardDate},uO=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map((t=>e.addDays(n,t)))},dO=["hours","minutes","seconds"],hO=(e,t)=>3600*t.getHours(e)+60*t.getMinutes(e)+t.getSeconds(e),pO={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},fO=(e,t,n)=>{if(t===pO.year)return e.startOfYear(n);if(t===pO.month)return e.startOfMonth(n);if(t===pO.day)return e.startOfDay(n);let r=n;return t<pO.minutes&&(r=e.setMinutes(r,0)),t<pO.seconds&&(r=e.setSeconds(r,0)),t<pO.milliseconds&&(r=e.setMilliseconds(r,0)),r},mO=e=>{let{props:t,utils:n,granularity:r,timezone:i,getTodayDate:o}=e;var s;let a=o?o():fO(n,r,sO(n,i));null!=t.minDate&&n.isAfterDay(t.minDate,a)&&(a=fO(n,r,t.minDate)),null!=t.maxDate&&n.isBeforeDay(t.maxDate,a)&&(a=fO(n,r,t.maxDate));const l=((e,t)=>(n,r)=>e?t.isAfter(n,r):hO(n,t)>hO(r,t))(null!=(s=t.disableIgnoringDatePartForTimeValidation)&&s,n);return null!=t.minTime&&l(t.minTime,a)&&(a=fO(n,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:nO(n,a,t.minTime))),null!=t.maxTime&&l(a,t.maxTime)&&(a=fO(n,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:nO(n,a,t.maxTime))),a},gO=(e,t)=>{const n=e.formatTokenMap[t];if(null==n)throw new Error([`MUI: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"===typeof n?{type:n,contentType:"meridiem"===n?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},vO=(e,t,n)=>{const r=[],i=e.dateWithTimezone(void 0,t),o=e.startOfWeek(i),s=e.endOfWeek(i);let a=o;for(;e.isBefore(a,s);)r.push(a),a=e.addDays(a,1);return r.map((t=>e.formatByString(t,n)))},yO=(e,t,n,r)=>{switch(n){case"month":return oO(e,e.dateWithTimezone(void 0,t)).map((t=>e.formatByString(t,r)));case"weekDay":return vO(e,t,r);case"meridiem":{const n=e.dateWithTimezone(void 0,t);return[e.startOfDay(n),e.endOfDay(n)].map((t=>e.formatByString(t,r)))}default:return[]}},bO=(e,t,n)=>{let r=t;for(r=Number(r).toString();r.length<n;)r=`0${r}`;return r},wO=(e,t,n,r,i)=>{if("day"===i.type&&"digit-with-letter"===i.contentType){const t=e.setDate(r.longestMonth,n);return e.formatByString(t,i.format)}const o=n.toString();return i.hasLeadingZerosInInput?bO(0,o,i.maxLength):o},xO=(e,t,n,r,i,o,s)=>{const a=(e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(r),l="Home"===r,c="End"===r,u=""===n.value||l||c;return"digit"===n.contentType||"digit-with-letter"===n.contentType?(()=>{const r=i[n.type]({currentDate:o,format:n.format,contentType:n.contentType}),d=t=>wO(e,0,t,r,n),h="minutes"===n.type&&null!=s&&s.minutesStep?s.minutesStep:1;let p=parseInt(n.value,10)+a*h;if(u){if("year"===n.type&&!c&&!l)return e.formatByString(e.dateWithTimezone(void 0,t),n.format);p=a>0||l?r.minimum:r.maximum}return p%h!==0&&((a<0||l)&&(p+=h-(h+p)%h),(a>0||c)&&(p-=p%h)),p>r.maximum?d(r.minimum+(p-r.maximum-1)%(r.maximum-r.minimum+1)):p<r.minimum?d(r.maximum-(r.minimum-p-1)%(r.maximum-r.minimum+1)):d(p)})():(()=>{const r=yO(e,t,n.type,n.format);if(0===r.length)return n.value;if(u)return a>0||l?r[0]:r[r.length-1];const i=r.indexOf(n.value);return r[(i+r.length+a)%r.length]})()},SO=(e,t)=>{let n=e.value||e.placeholder;const r="non-input"===t?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;"non-input"===t&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(n=Number(n).toString());return["input-rtl","input-ltr"].includes(t)&&"digit"===e.contentType&&!r&&1===n.length&&(n=`${n}\u200e`),"input-rtl"===t&&(n=`\u2068${n}\u2069`),n},CO=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),_O=(e,t)=>{let n=0,r=t?1:0;const i=[];for(let o=0;o<e.length;o+=1){const s=e[o],a=SO(s,t?"input-rtl":"input-ltr"),l=`${s.startSeparator}${a}${s.endSeparator}`,c=CO(l).length,u=l.length,d=CO(a),h=r+a.indexOf(d[0])+s.startSeparator.length,p=h+d.length;i.push((0,Le.A)({},s,{start:n,end:n+c,startInInput:h,endInInput:p})),n+=c,r+=u}return i},kO=(e,t,n,r,i)=>{switch(r.type){case"year":return n.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,t),i).length,format:i});case"month":return n.fieldMonthPlaceholder({contentType:r.contentType,format:i});case"day":return n.fieldDayPlaceholder({format:i});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:r.contentType,format:i});case"hours":return n.fieldHoursPlaceholder({format:i});case"minutes":return n.fieldMinutesPlaceholder({format:i});case"seconds":return n.fieldSecondsPlaceholder({format:i});case"meridiem":return n.fieldMeridiemPlaceholder({format:i});default:return i}},TO=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),AO=(e,t,n)=>4===e.formatByString(e.dateWithTimezone(void 0,t),n).length,EO=(e,t,n,r,i)=>{if("digit"!==n)return!1;const o=e.dateWithTimezone(void 0,t);switch(r){case"year":if(AO(e,t,i)){return"0001"===e.formatByString(e.setYear(o,1),i)}return"01"===e.formatByString(e.setYear(o,2001),i);case"month":return e.formatByString(e.startOfYear(o),i).length>1;case"day":return e.formatByString(e.startOfMonth(o),i).length>1;case"weekDay":return e.formatByString(e.startOfWeek(o),i).length>1;case"hours":return e.formatByString(e.setHours(o,1),i).length>1;case"minutes":return e.formatByString(e.setMinutes(o,1),i).length>1;case"seconds":return e.formatByString(e.setSeconds(o,1),i).length>1;default:throw new Error("Invalid section type")}},IO=(e,t,n,r,i,o,s,a)=>{let l="";const c=[],u=e.date(),d=r=>{if(""===r)return null;const o=gO(e,r),a=EO(e,t,o.contentType,o.type,r),d=s?a:"digit"===o.contentType,h=null!=i&&e.isValid(i);let p=h?e.formatByString(i,r):"",f=null;if(d)if(a)f=""===p?e.formatByString(u,r).length:p.length;else{if(null==o.maxLength)throw new Error(`MUI: The token ${r} should have a 'maxDigitNumber' property on it's adapter`);f=o.maxLength,h&&(p=bO(0,p,f))}return c.push((0,Le.A)({},o,{format:r,maxLength:f,value:p,placeholder:kO(e,t,n,o,r),hasLeadingZeros:a,hasLeadingZerosInFormat:a,hasLeadingZerosInInput:d,startSeparator:0===c.length?l:"",endSeparator:"",modified:!1})),null};let h=10,p=r,f=e.expandFormat(r);for(;f!==p;)if(p=f,f=e.expandFormat(p),h-=1,h<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const m=f,g=((e,t)=>{const n=[],{start:r,end:i}=e.escapedCharacters,o=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=o.exec(t);)n.push({start:s.index,end:o.lastIndex-1});return n})(e,m),v=new RegExp(`^(${Object.keys(e.formatTokenMap).sort(((e,t)=>t.length-e.length)).join("|")})`,"g");let y="";for(let b=0;b<m.length;b+=1){const e=g.find((e=>e.start<=b&&e.end>=b)),t=m[b],n=null!=e,r=`${y}${m.slice(b)}`,i=v.test(r);if(!n&&t.match(/([A-Za-z]+)/)&&i)y=r.slice(0,v.lastIndex),b+=v.lastIndex-1;else{n&&(null==e?void 0:e.start)===b||(null==e?void 0:e.end)===b||(d(y),y="",0===c.length?l+=t:c[c.length-1].endSeparator+=t)}}return d(y),c.map((e=>{const t=e=>{let t=e;return a&&null!==t&&t.includes(" ")&&(t=`\u2069${t}\u2066`),"spacious"===o&&["/",".","-"].includes(t)&&(t=` ${t} `),t};return e.startSeparator=t(e.startSeparator),e.endSeparator=t(e.endSeparator),e}))};const RO=(e,t)=>{0},PO={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},jO=(e,t,n,r,i,o)=>[...r].sort(((e,t)=>PO[e.type]-PO[t.type])).reduce(((r,i)=>!o||i.modified?((e,t,n,r,i)=>{switch(n.type){case"year":return e.setYear(i,e.getYear(r));case"month":return e.setMonth(i,e.getMonth(r));case"weekDay":{const i=vO(e,t,n.format),o=e.formatByString(r,n.format),s=i.indexOf(o),a=i.indexOf(n.value)-s;return e.addDays(r,a)}case"day":return e.setDate(i,e.getDate(r));case"meridiem":{const t=e.getHours(r)<12,n=e.getHours(i);return t&&n>=12?e.addHours(i,-12):!t&&n<12?e.addHours(i,12):i}case"hours":return e.setHours(i,e.getHours(r));case"minutes":return e.setMinutes(i,e.getMinutes(r));case"seconds":return e.setSeconds(i,e.getSeconds(r));default:return i}})(e,t,i,n,r):r),i),NO=["value","referenceDate"],OO={emptyValue:null,getTodayValue:sO,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=(0,Fe.A)(e,NO);return null!=t&&r.utils.isValid(t)?t:null!=n?n:mO(r)},cleanValue:(e,t)=>null!=t&&e.isValid(t)?t:null,areValuesEqual:(e,t,n)=>!e.isValid(t)&&null!=t&&!e.isValid(n)&&null!=n||e.isEqual(t,n),isSameError:(e,t)=>e===t,hasError:e=>null!=e,defaultErrorState:null,getTimezone:(e,t)=>null!=t&&e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>null==n?null:e.setTimezone(n,t)},DO={updateReferenceValue:(e,t,n)=>null!=t&&e.isValid(t)?t:n,getSectionsFromValue:(e,t,n,r,i)=>!e.isValid(t)&&!!n?n:_O(i(t),r),getValueStrFromSections:(e,t)=>{const n=e.map((e=>{const n=SO(e,t?"input-rtl":"input-ltr");return`${e.startSeparator}${n}${e.endSeparator}`})).join("");return t?`\u2066${n}\u2069`:n},getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:e=>e,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:null!=n&&e.isValid(n)?n:t.referenceValue})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},MO=["localeText"],LO=l.createContext(null);const FO=function(e){var t;const{localeText:n}=e,r=(0,Fe.A)(e,MO),{utils:i,localeText:o}=null!=(t=l.useContext(LO))?t:{utils:void 0,localeText:void 0},s=JN({props:r,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:c,dateFormats:u,dateLibInstance:d,adapterLocale:h,localeText:p}=s,f=l.useMemo((()=>(0,Le.A)({},p,o,n)),[p,o,n]),m=l.useMemo((()=>{if(!c)return i||null;const e=new c({locale:h,formats:u,instance:d});if(!e.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join("\n"));return e}),[c,h,u,d,i]),g=l.useMemo((()=>m?{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}:null),[m]),v=l.useMemo((()=>({utils:m,defaultDates:g,localeText:f})),[g,m,f]);return(0,Ke.jsx)(LO.Provider,{value:v,children:a})},UO={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n)=>`Select ${e}. ${null===t?"No time selected":`Selected time is ${n.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>null!==e&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>null!==e&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>"letter"===e.contentType?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>"letter"===e.contentType?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},$O=UO;VO=UO,(0,Le.A)({},VO);var VO;const BO=()=>{const e=l.useContext(LO);if(null===e)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join("\n"));if(null===e.utils)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join("\n"));const t=l.useMemo((()=>(0,Le.A)({},$O,e.localeText)),[e.localeText]);return l.useMemo((()=>(0,Le.A)({},e,{localeText:t})),[e,t])},zO=()=>BO().utils,WO=()=>BO().defaultDates,HO=()=>BO().localeText,qO=e=>{const t=zO(),n=l.useRef();return void 0===n.current&&(n.current=t.dateWithTimezone(void 0,e)),n.current};function GO(e){return(0,Qk.Ay)("MuiPickersToolbar",e)}(0,Ze.A)("MuiPickersToolbar",["root","content"]);const KO=(0,Gk.Ay)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},n.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})})),YO=(0,Gk.Ay)("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{ownerState:t}=e;var n;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?null!=(n=t.landscapeDirection)?n:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}})),JO=l.forwardRef((function(e,t){const n=JN({props:e,name:"MuiPickersToolbar"}),{children:r,className:i,toolbarTitle:o,hidden:s,titleId:a}=n,l=n,c=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]};return(0,qk.A)(r,GO,t)})(l);return s?null:(0,Ke.jsxs)(KO,{ref:t,className:(0,Ue.A)(c.root,i),ownerState:l,children:[(0,Ke.jsx)($T,{color:"text.secondary",variant:"overline",id:a,children:o}),(0,Ke.jsx)(YO,{className:c.content,ownerState:l,children:r})]})}));function QO(e){return(0,Qk.Ay)("MuiDatePickerToolbar",e)}(0,Ze.A)("MuiDatePickerToolbar",["root","title"]);const XO=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],ZO=(0,Gk.Ay)(JO,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),eD=(0,Gk.Ay)($T,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{ownerState:t}=e;return(0,Le.A)({},t.isLandscape&&{margin:"auto 16px auto auto"})})),tD=l.forwardRef((function(e,t){const n=JN({props:e,name:"MuiDatePickerToolbar"}),{value:r,isLandscape:i,toolbarFormat:o,toolbarPlaceholder:s="\u2013\u2013",views:a,className:c}=n,u=(0,Fe.A)(n,XO),d=zO(),h=HO(),p=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],title:["title"]},QO,t)})(n),f=l.useMemo((()=>{if(!r)return s;const e=cO(d,{format:o,views:a},!0);return d.formatByString(r,e)}),[r,o,s,d,a]),m=n;return(0,Ke.jsx)(ZO,(0,Le.A)({ref:t,toolbarTitle:h.datePickerToolbarTitle,isLandscape:i,className:(0,Ue.A)(p.root,c)},u,{children:(0,Ke.jsx)(eD,{variant:"h4",align:i?"left":"center",ownerState:m,className:p.title,children:f})}))})),nD=e=>{if(void 0!==e)return Object.keys(e).reduce(((t,n)=>(0,Le.A)({},t,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:e[n]})),{})};function rD(e,t){var n,r,i,o;const s=zO(),a=WO(),c=JN({props:e,name:t}),u=l.useMemo((()=>{var e;return null==(null==(e=c.localeText)?void 0:e.toolbarTitle)?c.localeText:(0,Le.A)({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})}),[c.localeText]),d=null!=(n=c.slots)?n:nD(c.components);return(0,Le.A)({},c,{localeText:u},(e=>{let{openTo:t,defaultOpenTo:n,views:r,defaultViews:i}=e;const o=null!=r?r:i;let s;if(null!=t)s=t;else if(o.includes(n))s=n;else{if(!(o.length>0))throw new Error("MUI: The `views` prop must contain at least one view");s=o[0]}return{views:o,openTo:s}})({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:null!=(r=c.disableFuture)&&r,disablePast:null!=(i=c.disablePast)&&i,minDate:iO(s,c.minDate,a.minDate),maxDate:iO(s,c.maxDate,a.maxDate),slots:(0,Le.A)({toolbar:tD},d),slotProps:null!=(o=c.slotProps)?o:c.componentsProps})}const iD=e=>{let{props:t,value:n,adapter:r}=e;if(null===n)return null;const{shouldDisableDate:i,shouldDisableMonth:o,shouldDisableYear:s,disablePast:a,disableFuture:l,timezone:c}=t,u=r.utils.dateWithTimezone(void 0,c),d=iO(r.utils,t.minDate,r.defaultDates.minDate),h=iO(r.utils,t.maxDate,r.defaultDates.maxDate);switch(!0){case!r.utils.isValid(n):return"invalidDate";case Boolean(i&&i(n)):return"shouldDisableDate";case Boolean(o&&o(n)):return"shouldDisableMonth";case Boolean(s&&s(n)):return"shouldDisableYear";case Boolean(l&&r.utils.isAfterDay(n,u)):return"disableFuture";case Boolean(a&&r.utils.isBeforeDay(n,u)):return"disablePast";case Boolean(d&&r.utils.isBeforeDay(n,d)):return"minDate";case Boolean(h&&r.utils.isAfterDay(n,h)):return"maxDate";default:return null}};function oD(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function sD(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,Ue.A)(n?.className,o,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},s={...n,...i,...r};return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}({...i,...r}),a=oD(r),l=oD(i),c=t(s),u=(0,Ue.A)(c?.className,n?.className,o,i?.className,r?.className),d={...c?.style,...n?.style,...i?.style,...r?.style},h={...c,...n,...l,...a};return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}function aD(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,s=i?{}:ZN(n,r),{props:a,internalRef:c}=sD({...o,externalSlotProps:s}),u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=l.useRef(void 0),i=l.useCallback((e=>{const n=t.map((t=>{if(null==t)return null;if("function"===typeof t){const n=t,r=n(e);return"function"===typeof r?r:()=>{n(null)}}return t.current=e,()=>{t.current=null}}));return()=>{n.forEach((e=>e?.()))}}),t);return l.useMemo((()=>t.every((e=>null==e))?null:e=>{r.current&&(r.current(),r.current=void 0),null!=e&&(r.current=i(e))}),t)}(c,s?.ref,e.additionalProps?.ref),d=function(e,t,n){return void 0===e||"string"===typeof e?t:{...t,ownerState:{...t.ownerState,...n}}}(t,{...a,ref:u},r);return d}var lD=n(5329);function cD(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function uD(e){return e instanceof cD(e).Element||e instanceof Element}function dD(e){return e instanceof cD(e).HTMLElement||e instanceof HTMLElement}function hD(e){return"undefined"!==typeof ShadowRoot&&(e instanceof cD(e).ShadowRoot||e instanceof ShadowRoot)}var pD=Math.max,fD=Math.min,mD=Math.round;function gD(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function vD(){return!/^((?!chrome|android).)*safari/i.test(gD())}function yD(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&dD(e)&&(i=e.offsetWidth>0&&mD(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&mD(r.height)/e.offsetHeight||1);var s=(uD(e)?cD(e):window).visualViewport,a=!vD()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function bD(e){var t=cD(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wD(e){return e?(e.nodeName||"").toLowerCase():null}function xD(e){return((uD(e)?e.ownerDocument:e.document)||window.document).documentElement}function SD(e){return yD(xD(e)).left+bD(e).scrollLeft}function CD(e){return cD(e).getComputedStyle(e)}function _D(e){var t=CD(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function kD(e,t,n){void 0===n&&(n=!1);var r=dD(t),i=dD(t)&&function(e){var t=e.getBoundingClientRect(),n=mD(t.width)/e.offsetWidth||1,r=mD(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=xD(t),s=yD(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==wD(t)||_D(o))&&(a=function(e){return e!==cD(e)&&dD(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:bD(e);var t}(t)),dD(t)?((l=yD(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=SD(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function TD(e){var t=yD(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function AD(e){return"html"===wD(e)?e:e.assignedSlot||e.parentNode||(hD(e)?e.host:null)||xD(e)}function ED(e){return["html","body","#document"].indexOf(wD(e))>=0?e.ownerDocument.body:dD(e)&&_D(e)?e:ED(AD(e))}function ID(e,t){var n;void 0===t&&(t=[]);var r=ED(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=cD(r),s=i?[o].concat(o.visualViewport||[],_D(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(ID(AD(s)))}function RD(e){return["table","td","th"].indexOf(wD(e))>=0}function PD(e){return dD(e)&&"fixed"!==CD(e).position?e.offsetParent:null}function jD(e){for(var t=cD(e),n=PD(e);n&&RD(n)&&"static"===CD(n).position;)n=PD(n);return n&&("html"===wD(n)||"body"===wD(n)&&"static"===CD(n).position)?t:n||function(e){var t=/firefox/i.test(gD());if(/Trident/i.test(gD())&&dD(e)&&"fixed"===CD(e).position)return null;var n=AD(e);for(hD(n)&&(n=n.host);dD(n)&&["html","body"].indexOf(wD(n))<0;){var r=CD(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var ND="top",OD="bottom",DD="right",MD="left",LD="auto",FD=[ND,OD,DD,MD],UD="start",$D="end",VD="viewport",BD="popper",zD=FD.reduce((function(e,t){return e.concat([t+"-"+UD,t+"-"+$D])}),[]),WD=[].concat(FD,[LD]).reduce((function(e,t){return e.concat([t,t+"-"+UD,t+"-"+$D])}),[]),HD=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function qD(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function GD(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var KD={placement:"bottom",modifiers:[],strategy:"absolute"};function YD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function JD(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?KD:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},KD,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:uD(e)?ID(e):e.contextElement?ID(e.contextElement):[],popper:ID(t)};var u=function(e){var t=qD(e);return HD.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(YD(t,n)){i.rects={reference:kD(t,jD(n),"fixed"===i.options.strategy),popper:TD(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:GD((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),a=!0}};if(!YD(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var QD={passive:!0};const XD={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=cD(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,QD)})),a&&l.addEventListener("resize",n.update,QD),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,QD)})),a&&l.removeEventListener("resize",n.update,QD)}},data:{}};function ZD(e){return e.split("-")[0]}function eM(e){return e.split("-")[1]}function tM(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nM(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?ZD(i):null,s=i?eM(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case ND:t={x:a,y:n.y-r.height};break;case OD:t={x:a,y:n.y+n.height};break;case DD:t={x:n.x+n.width,y:l};break;case MD:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?tM(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case UD:t[c]=t[c]-(n[u]/2-r[u]/2);break;case $D:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var rM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function iM(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=MD,w=ND,x=window;if(c){var S=jD(n),C="clientHeight",_="clientWidth";if(S===cD(n)&&"static"!==CD(S=xD(n)).position&&"absolute"===a&&(C="scrollHeight",_="scrollWidth"),i===ND||(i===MD||i===DD)&&o===$D)w=OD,m-=(d&&S===x&&x.visualViewport?x.visualViewport.height:S[C])-r.height,m*=l?1:-1;if(i===MD||(i===ND||i===OD)&&o===$D)b=DD,p-=(d&&S===x&&x.visualViewport?x.visualViewport.width:S[_])-r.width,p*=l?1:-1}var k,T=Object.assign({position:a},c&&rM),A=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:mD(n*i)/i||0,y:mD(r*i)/i||0}}({x:p,y:m},cD(n)):{x:p,y:m};return p=A.x,m=A.y,l?Object.assign({},T,((k={})[w]=y?"0":"",k[b]=v?"0":"",k.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",k)):Object.assign({},T,((t={})[w]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const oM={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];dD(i)&&wD(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});dD(r)&&wD(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const sM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=WD.reduce((function(e,n){return e[n]=function(e,t,n){var r=ZD(e),i=[MD,ND].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[MD,DD].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};var aM={left:"right",right:"left",bottom:"top",top:"bottom"};function lM(e){return e.replace(/left|right|bottom|top/g,(function(e){return aM[e]}))}var cM={start:"end",end:"start"};function uM(e){return e.replace(/start|end/g,(function(e){return cM[e]}))}function dM(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&hD(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function hM(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pM(e,t,n){return t===VD?hM(function(e,t){var n=cD(e),r=xD(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=vD();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+SD(e),y:l}}(e,n)):uD(t)?function(e,t){var n=yD(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):hM(function(e){var t,n=xD(e),r=bD(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=pD(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=pD(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+SD(e),l=-r.scrollTop;return"rtl"===CD(i||n).direction&&(a+=pD(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(xD(e)))}function fM(e,t,n,r){var i="clippingParents"===t?function(e){var t=ID(AD(e)),n=["absolute","fixed"].indexOf(CD(e).position)>=0&&dD(e)?jD(e):e;return uD(n)?t.filter((function(e){return uD(e)&&dM(e,n)&&"body"!==wD(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=pM(e,n,r);return t.top=pD(i.top,t.top),t.right=fD(i.right,t.right),t.bottom=fD(i.bottom,t.bottom),t.left=pD(i.left,t.left),t}),pM(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mM(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function gM(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function vM(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?"clippingParents":a,c=n.rootBoundary,u=void 0===c?VD:c,d=n.elementContext,h=void 0===d?BD:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=mM("number"!==typeof g?g:gM(g,FD)),y=h===BD?"reference":BD,b=e.rects.popper,w=e.elements[f?y:h],x=fM(uD(w)?w:w.contextElement||xD(e.elements.popper),l,u,s),S=yD(e.elements.reference),C=nM({reference:S,element:b,strategy:"absolute",placement:i}),_=hM(Object.assign({},b,C)),k=h===BD?_:S,T={top:x.top-k.top+v.top,bottom:k.bottom-x.bottom+v.bottom,left:x.left-k.left+v.left,right:k.right-x.right+v.right},A=e.modifiersData.offset;if(h===BD&&A){var E=A[i];Object.keys(T).forEach((function(e){var t=[DD,OD].indexOf(e)>=0?1:-1,n=[ND,OD].indexOf(e)>=0?"y":"x";T[e]+=E[n]*t}))}return T}const yM={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=ZD(g),y=l||(v===g||!f?[lM(g)]:function(e){if(ZD(e)===LD)return[];var t=lM(e);return[uM(e),t,uM(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(ZD(n)===LD?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?WD:l,u=eM(r),d=u?a?zD:zD.filter((function(e){return eM(e)===u})):FD,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=vM(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[ZD(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,S=new Map,C=!0,_=b[0],k=0;k<b.length;k++){var T=b[k],A=ZD(T),E=eM(T)===UD,I=[ND,OD].indexOf(A)>=0,R=I?"width":"height",P=vM(t,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),j=I?E?DD:MD:E?OD:ND;w[R]>x[R]&&(j=lM(j));var N=lM(j),O=[];if(o&&O.push(P[A]<=0),a&&O.push(P[j]<=0,P[N]<=0),O.every((function(e){return e}))){_=T,C=!1;break}S.set(T,O)}if(C)for(var D=function(e){var t=b.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},M=f?3:1;M>0;M--){if("break"===D(M))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bM(e,t,n){return pD(e,fD(t,n))}const wM={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=vM(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=ZD(t.placement),y=eM(t.placement),b=!y,w=tM(v),x="x"===w?"y":"x",S=t.modifiersData.popperOffsets,C=t.rects.reference,_=t.rects.popper,k="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(S){if(o){var I,R="y"===w?ND:MD,P="y"===w?OD:DD,j="y"===w?"height":"width",N=S[w],O=N+g[R],D=N-g[P],M=p?-_[j]/2:0,L=y===UD?C[j]:_[j],F=y===UD?-_[j]:-C[j],U=t.elements.arrow,$=p&&U?TD(U):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=V[R],z=V[P],W=bM(0,C[j],$[j]),H=b?C[j]/2-M-W-B-T.mainAxis:L-W-B-T.mainAxis,q=b?-C[j]/2+M+W+z+T.mainAxis:F+W+z+T.mainAxis,G=t.elements.arrow&&jD(t.elements.arrow),K=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Y=null!=(I=null==A?void 0:A[w])?I:0,J=N+q-Y,Q=bM(p?fD(O,N+H-Y-K):O,N,p?pD(D,J):D);S[w]=Q,E[w]=Q-N}if(a){var X,Z="x"===w?ND:MD,ee="x"===w?OD:DD,te=S[x],ne="y"===x?"height":"width",re=te+g[Z],ie=te-g[ee],oe=-1!==[ND,MD].indexOf(v),se=null!=(X=null==A?void 0:A[x])?X:0,ae=oe?re:te-C[ne]-_[ne]-se+T.altAxis,le=oe?te+C[ne]+_[ne]-se-T.altAxis:ie,ce=p&&oe?function(e,t,n){var r=bM(e,t,n);return r>n?n:r}(ae,te,le):bM(p?ae:re,te,p?le:ie);S[x]=ce,E[x]=ce-te}t.modifiersData[r]=E}},requiresIfExists:["offset"]};const xM={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ZD(n.placement),l=tM(a),c=[MD,DD].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return mM("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:gM(e,FD))}(i.padding,n),d=TD(o),h="y"===l?ND:MD,p="y"===l?OD:DD,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=jD(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[h],w=v-d[c]-u[p],x=v/2-d[c]/2+y,S=bM(b,x,w),C=l;n.modifiersData[r]=((t={})[C]=S,t.centerOffset=S-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&dM(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function SM(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function CM(e){return[ND,DD,OD,MD].some((function(t){return e[t]>=0}))}var _M=JD({defaultModifiers:[XD,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=nM({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:ZD(t.placement),variation:eM(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,iM(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,iM(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},oM,sM,yM,wM,xM,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=vM(t,{elementContext:"reference"}),a=vM(t,{altBoundary:!0}),l=SM(s,r),c=SM(a,i,o),u=CM(l),d=CM(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function kM(e){return(0,Qk.Ay)("MuiPopper",e)}(0,Ze.A)("MuiPopper",["root"]);const TM=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],AM=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function EM(e){return"function"===typeof e?e():e}function IM(e){return void 0!==e.nodeType}const RM={},PM=l.forwardRef((function(e,t){var n;const{anchorEl:r,children:i,direction:o,disablePortal:s,modifiers:a,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,Fe.A)(e,TM),v=l.useRef(null),y=(0,vT.A)(v,t),b=l.useRef(null),w=(0,vT.A)(b,h),x=l.useRef(w);(0,zE.A)((()=>{x.current=w}),[w]),l.useImperativeHandle(h,(()=>b.current),[]);const S=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,o),[C,_]=l.useState(S),[k,T]=l.useState(EM(r));l.useEffect((()=>{b.current&&b.current.forceUpdate()})),l.useEffect((()=>{r&&T(EM(r))}),[r]),(0,zE.A)((()=>{if(!k||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{_(e.placement)})(t)}}];null!=a&&(e=e.concat(a)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=_M(k,v.current,(0,Le.A)({placement:S},d,{modifiers:e}));return x.current(t),()=>{t.destroy(),x.current(null)}}),[k,s,a,c,d,S]);const A={placement:C};null!==m&&(A.TransitionProps=m);const E=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},kM,t)})(e),I=null!=(n=f.root)?n:"div",R=PA({elementType:I,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:E.root});return(0,Ke.jsx)(I,(0,Le.A)({},R,{children:"function"===typeof i?i(A):i}))})),jM=l.forwardRef((function(e,t){const{anchorEl:n,children:r,container:i,direction:o="ltr",disablePortal:s=!1,keepMounted:a=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=RM,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=(0,Fe.A)(e,AM),[b,w]=l.useState(!0);if(!a&&!u&&(!m||b))return null;let x;if(i)x=i;else if(n){const e=EM(n);x=e&&IM(e)?(0,FE.A)(e).body:(0,FE.A)(null).body}const S=u||!a||m&&!b?void 0:"none",C=m?{in:u,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,Ke.jsx)(HE,{disablePortal:s,container:x,children:(0,Ke.jsx)(PM,(0,Le.A)({anchorEl:n,direction:o,disablePortal:s,modifiers:c,ref:t,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:(0,Le.A)({position:"fixed",top:0,left:0,display:S},f),TransitionProps:C,children:r}))})})),NM=jM,OM=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],DM=(0,Gk.Ay)(NM,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),MM=l.forwardRef((function(e,t){var n;const r=(0,lD.A)(),i=(0,it.b)({props:e,name:"MuiPopper"}),{anchorEl:o,component:s,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v,slots:y,slotProps:b}=i,w=(0,Fe.A)(i,OM),x=null!=(n=null==y?void 0:y.root)?n:null==a?void 0:a.Root,S=(0,Le.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v},w);return(0,Ke.jsx)(DM,(0,Le.A)({as:s,direction:null==r?void 0:r.direction,slots:{root:x},slotProps:null!=b?b:l},S,{ref:t}))})),LM=MM;function FM(e){return(0,Qk.Ay)("MuiPickersPopper",e)}(0,Ze.A)("MuiPickersPopper",["root","paper"]);const UM=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).activeElement;return e?e.shadowRoot?UM(e.shadowRoot):e:null},$M="@media (pointer: fine)",VM="undefined"!==typeof navigator&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),BM=VM&&VM[1]?parseInt(VM[1],10):null,zM=VM&&VM[2]?parseInt(VM[2],10):null,WM=BM&&BM<10||zM&&zM<13||!1,HM=()=>YN("@media (prefers-reduced-motion: reduce)",{defaultMatches:!1})||WM,qM=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],GM=(0,Gk.Ay)(LM,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{zIndex:t.zIndex.modal}})),KM=(0,Gk.Ay)(nT,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{ownerState:t}=e;return(0,Le.A)({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"})}));const YM=l.forwardRef(((e,t)=>{const{PaperComponent:n,popperPlacement:r,ownerState:i,children:o,paperSlotProps:s,paperClasses:a,onPaperClick:l,onPaperTouchStart:c}=e,u=(0,Fe.A)(e,qM),d=(0,Le.A)({},i,{placement:r}),h=aD({elementType:n,externalSlotProps:s,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:a,ownerState:d});return(0,Ke.jsx)(n,(0,Le.A)({},u,h,{onClick:e=>{var t;l(e),null==(t=h.onClick)||t.call(h,e)},onTouchStart:e=>{var t;c(e),null==(t=h.onTouchStart)||t.call(h,e)},ownerState:d,children:o}))}));function JM(e){var t,n,r,i;const o=JN({props:e,name:"MuiPickersPopper"}),{anchorEl:s,children:a,containerRef:c=null,shouldRestoreFocus:u,onBlur:d,onDismiss:h,open:p,role:f,placement:m,slots:g,slotProps:v,reduceAnimations:y}=o;l.useEffect((()=>{function e(e){!p||"Escape"!==e.key&&"Esc"!==e.key||h()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[h,p]);const b=l.useRef(null);l.useEffect((()=>{"tooltip"===f||u&&!u()||(p?b.current=UM(document):b.current&&b.current instanceof HTMLElement&&setTimeout((()=>{b.current instanceof HTMLElement&&b.current.focus()})))}),[p,f,u]);const[w,x,S]=function(e,t){const n=l.useRef(!1),r=l.useRef(!1),i=l.useRef(null),o=l.useRef(!1);l.useEffect((()=>{if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),o.current=!1};function t(){o.current=!0}}),[e]);const s=(0,tI.A)((e=>{if(!o.current)return;const s=r.current;r.current=!1;const a=(0,FE.A)(i.current);if(!i.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,a))return;if(n.current)return void(n.current=!1);let l;l=e.composedPath?e.composedPath().indexOf(i.current)>-1:!a.documentElement.contains(e.target)||i.current.contains(e.target),l||s||t(e)})),a=()=>{r.current=!0};return l.useEffect((()=>{if(e){const e=(0,FE.A)(i.current),t=()=>{n.current=!0};return e.addEventListener("touchstart",s),e.addEventListener("touchmove",t),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",t)}}}),[e,s]),l.useEffect((()=>{if(e){const e=(0,FE.A)(i.current);return e.addEventListener("click",s),()=>{e.removeEventListener("click",s),r.current=!1}}}),[e,s]),[i,a,a]}(p,null!=d?d:h),C=l.useRef(null),_=(0,vT.A)(C,c),k=(0,vT.A)(_,w),T=o,A=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],paper:["paper"]},FM,t)})(T),E=HM(),I=null!=y?y:E,R=(null!=(t=null==g?void 0:g.desktopTransition)?t:I)?YE:LE,P=null!=(n=null==g?void 0:g.desktopTrapFocus)?n:BE,j=null!=(r=null==g?void 0:g.desktopPaper)?r:KM,N=null!=(i=null==g?void 0:g.popper)?i:GM,O=aD({elementType:N,externalSlotProps:null==v?void 0:v.popper,additionalProps:{transition:!0,role:f,open:p,anchorEl:s,placement:m,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),h())}},className:A.root,ownerState:o});return(0,Ke.jsx)(N,(0,Le.A)({},O,{children:e=>{let{TransitionProps:t,placement:n}=e;return(0,Ke.jsx)(P,(0,Le.A)({open:p,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===f,isEnabled:()=>!0},null==v?void 0:v.desktopTrapFocus,{children:(0,Ke.jsx)(R,(0,Le.A)({},t,null==v?void 0:v.desktopTransition,{children:(0,Ke.jsx)(YM,{PaperComponent:j,ownerState:T,popperPlacement:n,ref:k,onPaperClick:x,onPaperTouchStart:S,paperClasses:A.paper,paperSlotProps:null==v?void 0:v.desktopPaper,children:a})}))}))}}))}var QM=n(3931);function XM(e,t,n,r){const{value:i,onError:o}=e,s=BO(),a=l.useRef(r),c=t({adapter:s,value:i,props:e});return l.useEffect((()=>{o&&!n(c,a.current)&&o(c,i),a.current=c}),[n,o,a,c,i]),c}const ZM=e=>{let{timezone:t,value:n,defaultValue:r,onChange:i,valueManager:o}=e;var s,a;const c=zO(),u=l.useRef(r),d=null!=(s=null!=n?n:u.current)?s:o.emptyValue,h=l.useMemo((()=>o.getTimezone(c,d)),[c,o,d]),p=(0,tI.A)((e=>null==h?e:o.setTimezone(c,h,e))),f=null!=(a=null!=t?t:h)?a:"default",m=l.useMemo((()=>o.setTimezone(c,f,d)),[o,c,f,d]),g=(0,tI.A)((function(e){const t=p(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null==i||i(t,...r)}));return{value:m,handleValueChange:g,timezone:f}},eL=e=>{let{name:t,timezone:n,value:r,defaultValue:i,onChange:o,valueManager:s}=e;const[a,l]=(0,QM.A)({name:t,state:"value",controlled:r,default:null!=i?i:s.emptyValue}),c=(0,tI.A)((function(e){l(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==o||o(e,...n)}));return ZM({timezone:n,value:a,defaultValue:void 0,onChange:c,valueManager:s})},tL=e=>{let{props:t,valueManager:n,valueType:r,wrapperVariant:i,validator:o}=e;const{onAccept:s,onChange:a,value:c,defaultValue:u,closeOnSelect:d="desktop"===i,selectedSections:h,onSelectedSectionsChange:p,timezone:f}=t,{current:m}=l.useRef(u),{current:g}=l.useRef(void 0!==c);const v=zO(),y=BO(),[b,w]=(0,QM.A)({controlled:h,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:x,setIsOpen:S}=(e=>{let{open:t,onOpen:n,onClose:r}=e;const i=l.useRef("boolean"===typeof t).current,[o,s]=l.useState(!1);return l.useEffect((()=>{if(i){if("boolean"!==typeof t)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(t)}}),[i,t]),{isOpen:o,setIsOpen:l.useCallback((e=>{i||s(e),e&&n&&n(),!e&&r&&r()}),[i,n,r])}})(t),[C,_]=l.useState((()=>{let e;return e=void 0!==c?c:void 0!==m?m:n.emptyValue,{draft:e,lastPublishedValue:e,lastCommittedValue:e,lastControlledValue:c,hasBeenModifiedSinceMount:!1}})),{timezone:k,handleValueChange:T}=ZM({timezone:f,value:c,defaultValue:m,onChange:a,valueManager:n});XM((0,Le.A)({},t,{value:C.draft,timezone:k}),o,n.isSameError,n.defaultErrorState);const A=(0,tI.A)((e=>{const r={action:e,dateState:C,hasChanged:t=>!n.areValuesEqual(v,e.value,t),isControlled:g,closeOnSelect:d},i=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i}=e,o=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromField"===t.name||("setValueFromAction"===t.name?!(!o||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastPublishedValue):("setValueFromView"===t.name&&"shallow"!==t.selectionState||"setValueFromShortcut"===t.name)&&(!!o||n(r.lastPublishedValue)))})(r),a=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i,closeOnSelect:o}=e,s=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromAction"===t.name?!(!s||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastCommittedValue):"setValueFromView"===t.name&&"finish"===t.selectionState&&o?!!s||n(r.lastCommittedValue):"setValueFromShortcut"===t.name&&"accept"===t.changeImportance&&n(r.lastCommittedValue)})(r),l=(e=>{const{action:t,closeOnSelect:n}=e;return"setValueFromAction"===t.name||("setValueFromView"===t.name?"finish"===t.selectionState&&n:"setValueFromShortcut"===t.name&&"accept"===t.changeImportance)})(r);if(_((t=>(0,Le.A)({},t,{draft:e.value,lastPublishedValue:i?e.value:t.lastPublishedValue,lastCommittedValue:a?e.value:t.lastCommittedValue,hasBeenModifiedSinceMount:!0}))),i){const n={validationError:"setValueFromField"===e.name?e.context.validationError:o({adapter:y,value:e.value,props:(0,Le.A)({},t,{value:e.value,timezone:k})})};"setValueFromShortcut"===e.name&&null!=e.shortcut&&(n.shortcut=e.shortcut),T(e.value,n)}a&&s&&s(e.value),l&&S(!1)}));if(void 0!==c&&(void 0===C.lastControlledValue||!n.areValuesEqual(v,C.lastControlledValue,c))){const e=n.areValuesEqual(v,C.draft,c);_((t=>(0,Le.A)({},t,{lastControlledValue:c},e?{}:{lastCommittedValue:c,lastPublishedValue:c,draft:c,hasBeenModifiedSinceMount:!0})))}const E=(0,tI.A)((()=>{A({value:n.emptyValue,name:"setValueFromAction",pickerAction:"clear"})})),I=(0,tI.A)((()=>{A({value:C.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})})),R=(0,tI.A)((()=>{A({value:C.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})})),P=(0,tI.A)((()=>{A({value:C.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})})),j=(0,tI.A)((()=>{A({value:n.getTodayValue(v,k,r),name:"setValueFromAction",pickerAction:"today"})})),N=(0,tI.A)((()=>S(!0))),O=(0,tI.A)((()=>S(!1))),D=(0,tI.A)((function(e){return A({name:"setValueFromView",value:e,selectionState:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"partial"})})),M=(0,tI.A)(((e,t,n)=>A({name:"setValueFromShortcut",value:e,changeImportance:null!=t?t:"accept",shortcut:n}))),L=(0,tI.A)(((e,t)=>A({name:"setValueFromField",value:e,context:t}))),F=(0,tI.A)((e=>{w(e),null==p||p(e)})),U={onClear:E,onAccept:I,onDismiss:R,onCancel:P,onSetToday:j,onOpen:N,onClose:O},$={value:C.draft,onChange:L,selectedSections:b,onSelectedSectionsChange:F},V=l.useMemo((()=>n.cleanValue(v,C.draft)),[v,n,C.draft]),B={value:V,onChange:D,onClose:O,open:x,onSelectedSectionsChange:F},z=(0,Le.A)({},U,{value:V,onChange:D,onSelectShortcut:M,isValid:e=>{const r=o({adapter:y,value:e,props:(0,Le.A)({},t,{value:e,timezone:k})});return!n.hasError(r)}});return{open:x,fieldProps:$,viewProps:B,layoutProps:z,actions:U}};function nL(e){let{onChange:t,onViewChange:n,openTo:r,view:i,views:o,autoFocus:s,focusedView:a,onFocusedViewChange:c}=e;var u,d;const h=l.useRef(r),p=l.useRef(o),f=l.useRef(o.includes(r)?r:o[0]),[m,g]=(0,QM.A)({name:"useViews",state:"view",controlled:i,default:f.current}),v=l.useRef(s?m:null),[y,b]=(0,QM.A)({name:"useViews",state:"focusedView",controlled:a,default:v.current});l.useEffect((()=>{(h.current&&h.current!==r||p.current&&p.current.some((e=>!o.includes(e))))&&(g(o.includes(r)?r:o[0]),p.current=o,h.current=r)}),[r,g,m,o]);const w=o.indexOf(m),x=null!=(u=o[w-1])?u:null,S=null!=(d=o[w+1])?d:null,C=(0,tI.A)(((e,t)=>{b(t?e:t=>e===t?null:t),null==c||c(e,t)})),_=(0,tI.A)((e=>{C(e,!0),e!==m&&(g(e),n&&n(e))})),k=(0,tI.A)((()=>{S&&_(S)})),T=(0,tI.A)(((e,n,r)=>{const i="finish"===n,s=r?o.indexOf(r)<o.length-1:Boolean(S);if(t(e,i&&s?"partial":n,r),r&&r!==m){const e=o[o.indexOf(r)+1];e&&_(e)}else i&&k()}));return{view:m,setView:_,focusedView:y,setFocusedView:C,nextView:S,previousView:x,defaultView:o.includes(r)?r:o[0],goToNextView:k,setValueAndGoToNextView:T}}const rL=["className","sx"],iL=e=>{let{props:t,propsFromPickerValue:n,additionalViewProps:r,inputRef:i,autoFocusView:o}=e;const{onChange:s,open:a,onSelectedSectionsChange:c,onClose:u}=n,{view:d,views:h,openTo:p,onViewChange:f,viewRenderers:m,timezone:g}=t,v=(0,Fe.A)(t,rL),{view:y,setView:b,defaultView:w,focusedView:x,setFocusedView:S,setValueAndGoToNextView:C}=nL({view:d,views:h,openTo:p,onChange:s,onViewChange:f,autoFocus:o}),{hasUIView:_,viewModeLookup:k}=l.useMemo((()=>h.reduce(((e,t)=>{let n;return n=null!=m[t]?"UI":"field",e.viewModeLookup[t]=n,"UI"===n&&(e.hasUIView=!0),e}),{hasUIView:!1,viewModeLookup:{}})),[m,h]),T=l.useMemo((()=>h.reduce(((e,t)=>null!=m[t]&&(e=>dO.includes(e))(t)?e+1:e),0)),[m,h]),A=k[y],E=(0,tI.A)((()=>"UI"===A)),[I,R]=l.useState("UI"===A?y:null);I!==y&&"UI"===k[y]&&R(y),(0,zE.A)((()=>{"field"===A&&a&&(u(),setTimeout((()=>{null==i||i.current.focus(),c(y)})))}),[y]),(0,zE.A)((()=>{if(!a)return;let e=y;"field"===A&&null!=I&&(e=I),e!==w&&"UI"===k[e]&&"UI"===k[w]&&(e=w),e!==y&&b(e),S(e,!0)}),[a]);return{hasUIView:_,shouldRestoreFocus:E,layoutProps:{views:h,view:I,onViewChange:b},renderCurrentView:()=>{if(null==I)return null;const e=m[I];return null==e?null:e((0,Le.A)({},v,r,n,{views:h,timezone:g,onChange:C,view:I,onViewChange:b,focusedView:x,onFocusedViewChange:S,showViewSwitcher:T>1,timeViewsCount:T}))}}};function oL(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}const sL=(e,t)=>{const[n,r]=l.useState(oL);if((0,zE.A)((()=>{const e=()=>{r(oL())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}}),[]),i=e,o=["hours","minutes","seconds"],Array.isArray(o)?o.every((e=>-1!==i.indexOf(e))):-1!==i.indexOf(o))return!1;var i,o;return"landscape"===(t||n)},aL=(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=!1;const r=Array.isArray(e)?e.join("\n"):e}(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]),e=>{let{props:t,valueManager:n,valueType:r,wrapperVariant:i,inputRef:o,additionalViewProps:s,validator:a,autoFocusView:l}=e;const c=tL({props:t,valueManager:n,valueType:r,wrapperVariant:i,validator:a}),u=iL({props:t,inputRef:o,additionalViewProps:s,autoFocusView:l,propsFromPickerValue:c.viewProps}),d=(e=>{let{props:t,propsFromPickerValue:n,propsFromPickerViews:r,wrapperVariant:i}=e;const{orientation:o}=t,s=sL(r.views,o);return{layoutProps:(0,Le.A)({},r,n,{isLandscape:s,wrapperVariant:i,disabled:t.disabled,readOnly:t.readOnly})}})({props:t,wrapperVariant:i,propsFromPickerValue:c.layoutProps,propsFromPickerViews:u.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:u.renderCurrentView,hasUIView:u.hasUIView,shouldRestoreFocus:u.shouldRestoreFocus,layoutProps:d.layoutProps}});function lL(e){return(0,Qk.Ay)("MuiPickersLayout",e)}const cL=(0,Ze.A)("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]);function uL(e){return(0,Qk.Ay)("MuiDialogActions",e)}(0,Ze.A)("MuiDialogActions",["root","spacing"]);const dL=["className","disableSpacing"],hL=(0,Gk.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),pL=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,Fe.A)(n,dL),s=(0,Le.A)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,qk.A)(r,uL,t)})(s);return(0,Ke.jsx)(hL,(0,Le.A)({className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},o))})),fL=pL,mL=["onAccept","onClear","onCancel","onSetToday","actions"];function gL(e){const{onAccept:t,onClear:n,onCancel:r,onSetToday:i,actions:o}=e,s=(0,Fe.A)(e,mL),a=HO();if(null==o||0===o.length)return null;const l=null==o?void 0:o.map((e=>{switch(e){case"clear":return(0,Ke.jsx)(XA,{onClick:n,children:a.clearButtonLabel},e);case"cancel":return(0,Ke.jsx)(XA,{onClick:r,children:a.cancelButtonLabel},e);case"accept":return(0,Ke.jsx)(XA,{onClick:t,children:a.okButtonLabel},e);case"today":return(0,Ke.jsx)(XA,{onClick:i,children:a.todayButtonLabel},e);default:return null}}));return(0,Ke.jsx)(fL,(0,Le.A)({},s,{children:l}))}function vL(e){return(0,Qk.Ay)("MuiListItem",e)}const yL=(0,Ze.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function bL(e){return(0,Qk.Ay)("MuiListItemButton",e)}const wL=(0,Ze.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function xL(e){return(0,Qk.Ay)("MuiListItemSecondaryAction",e)}(0,Ze.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const SL=["className"],CL=(0,Gk.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),_L=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=n,i=(0,Fe.A)(n,SL),o=l.useContext(eE),s=(0,Le.A)({},n,{disableGutters:o.disableGutters}),a=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,qk.A)(r,xL,n)})(s);return(0,Ke.jsx)(CL,(0,Le.A)({className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},i))}));_L.muiName="ListItemSecondaryAction";const kL=_L,TL=["className"],AL=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],EL=(0,Gk.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,Le.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${wL.root}`]:{paddingRight:48}},{[`&.${yL.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${yL.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${yL.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${yL.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yL.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),IL=(0,Gk.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),RL=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:i=!1,button:o=!1,children:s,className:a,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:w,selected:x=!1,slotProps:S={},slots:C={}}=n,_=(0,Fe.A)(n.ContainerProps,TL),k=(0,Fe.A)(n,AL),T=l.useContext(eE),A=l.useMemo((()=>({dense:f||T.dense||!1,alignItems:r,disableGutters:g})),[r,T.dense,f,g]),E=l.useRef(null);(0,lE.A)((()=>{i&&E.current&&E.current.focus()}),[i]);const I=l.Children.toArray(s),R=I.length&&(0,WP.A)(I[I.length-1],["ListItemSecondaryAction"]),P=(0,Le.A)({},n,{alignItems:r,autoFocus:i,button:o,dense:A.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:R,selected:x}),j=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,qk.A)(d,vL,r)})(P),N=(0,VT.A)(E,t),O=C.root||u.Root||EL,D=S.root||d.root||{},M=(0,Le.A)({className:(0,Ue.A)(j.root,D.className,a),disabled:m},k);let L=c||"li";return o&&(M.component=c||"div",M.focusVisibleClassName=(0,Ue.A)(yL.focusVisible,b),L=SA),R?(L=M.component||c?L:"div","li"===h&&("li"===L?L="div":"li"===M.component&&(M.component="div")),(0,Ke.jsx)(eE.Provider,{value:A,children:(0,Ke.jsxs)(IL,(0,Le.A)({as:h,className:(0,Ue.A)(j.container,p),ref:N,ownerState:P},_,{children:[(0,Ke.jsx)(O,(0,Le.A)({},D,!yT(O)&&{as:L,ownerState:(0,Le.A)({},P,D.ownerState)},M,{children:I})),I.pop()]}))})):(0,Ke.jsx)(eE.Provider,{value:A,children:(0,Ke.jsxs)(O,(0,Le.A)({},D,{as:L,ref:N},!yT(O)&&{ownerState:(0,Le.A)({},P,D.ownerState)},M,{children:[I,w&&(0,Ke.jsx)(kL,{children:w})]}))})})),PL=RL,jL=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function NL(e){return(0,Qk.Ay)("MuiChip",e)}const OL=(0,Ze.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),DL=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],ML=(0,Gk.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:l}=n;return[{[`& .${OL.avatar}`]:t.avatar},{[`& .${OL.avatar}`]:t[`avatar${(0,Kk.A)(a)}`]},{[`& .${OL.avatar}`]:t[`avatarColor${(0,Kk.A)(r)}`]},{[`& .${OL.icon}`]:t.icon},{[`& .${OL.icon}`]:t[`icon${(0,Kk.A)(a)}`]},{[`& .${OL.icon}`]:t[`iconColor${(0,Kk.A)(i)}`]},{[`& .${OL.deleteIcon}`]:t.deleteIcon},{[`& .${OL.deleteIcon}`]:t[`deleteIcon${(0,Kk.A)(a)}`]},{[`& .${OL.deleteIcon}`]:t[`deleteIconColor${(0,Kk.A)(r)}`]},{[`& .${OL.deleteIcon}`]:t[`deleteIcon${(0,Kk.A)(l)}Color${(0,Kk.A)(r)}`]},t.root,t[`size${(0,Kk.A)(a)}`],t[`color${(0,Kk.A)(r)}`],o&&t.clickable,o&&"default"!==r&&t[`clickableColor${(0,Kk.A)(r)})`],s&&t.deletable,s&&"default"!==r&&t[`deletableColor${(0,Kk.A)(r)}`],t[l],t[`${l}${(0,Kk.A)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,Le.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${OL.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${OL.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},[`& .${OL.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${OL.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${OL.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${OL.icon}`]:(0,Le.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,Le.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),[`& .${OL.deleteIcon}`]:(0,Le.A)({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:(0,Yk.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:(0,Yk.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?`rgba(${t.vars.palette[n.color].contrastTextChannel} / 0.7)`:(0,Yk.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{[`&.${OL.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,Yk.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${OL.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,Yk.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${OL.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,Yk.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${OL.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${OL.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${OL.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${OL.avatar}`]:{marginLeft:4},[`& .${OL.avatarSmall}`]:{marginLeft:2},[`& .${OL.icon}`]:{marginLeft:4},[`& .${OL.iconSmall}`]:{marginLeft:2},[`& .${OL.deleteIcon}`]:{marginRight:5},[`& .${OL.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,Yk.X4)(t.palette[n.color].main,.7)}`,[`&.${OL.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${OL.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:(0,Yk.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${OL.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,Yk.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),LL=(0,Gk.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,Kk.A)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function FL(e){return"Backspace"===e.key||"Delete"===e.key}const UL=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiChip"}),{avatar:r,className:i,clickable:o,color:s="default",component:a,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:m,onKeyUp:g,size:v="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:w=!1}=n,x=(0,Fe.A)(n,DL),S=l.useRef(null),C=(0,VT.A)(S,t),_=e=>{e.stopPropagation(),f&&f(e)},k=!(!1===o||!p)||o,T=k||f?SA:a||"div",A=(0,Le.A)({},n,{component:T,disabled:u,size:v,color:s,iconColor:l.isValidElement(d)&&d.props.color||s,onDelete:!!f,clickable:k,variant:y}),E=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:l}=e,c={root:["root",l,n&&"disabled",`size${(0,Kk.A)(r)}`,`color${(0,Kk.A)(i)}`,a&&"clickable",a&&`clickableColor${(0,Kk.A)(i)}`,s&&"deletable",s&&`deletableColor${(0,Kk.A)(i)}`,`${l}${(0,Kk.A)(i)}`],label:["label",`label${(0,Kk.A)(r)}`],avatar:["avatar",`avatar${(0,Kk.A)(r)}`,`avatarColor${(0,Kk.A)(i)}`],icon:["icon",`icon${(0,Kk.A)(r)}`,`iconColor${(0,Kk.A)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,Kk.A)(r)}`,`deleteIconColor${(0,Kk.A)(i)}`,`deleteIcon${(0,Kk.A)(l)}Color${(0,Kk.A)(i)}`]};return(0,qk.A)(c,NL,t)})(A),I=T===SA?(0,Le.A)({component:a||"div",focusVisibleClassName:E.focusVisible},f&&{disableRipple:!0}):{};let R=null;f&&(R=c&&l.isValidElement(c)?l.cloneElement(c,{className:(0,Ue.A)(c.props.className,E.deleteIcon),onClick:_}):(0,Ke.jsx)(jL,{className:(0,Ue.A)(E.deleteIcon),onClick:_}));let P=null;r&&l.isValidElement(r)&&(P=l.cloneElement(r,{className:(0,Ue.A)(E.avatar,r.props.className)}));let j=null;return d&&l.isValidElement(d)&&(j=l.cloneElement(d,{className:(0,Ue.A)(E.icon,d.props.className)})),(0,Ke.jsxs)(ML,(0,Le.A)({as:T,className:(0,Ue.A)(E.root,i),disabled:!(!k||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&FL(e)&&e.preventDefault(),m&&m(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&FL(e)?f(e):"Escape"===e.key&&S.current&&S.current.blur()),g&&g(e)},ref:C,tabIndex:w&&u?-1:b,ownerState:A},I,x,{children:[P||j,(0,Ke.jsx)(LL,{className:(0,Ue.A)(E.label),ownerState:A,children:h}),R]}))})),$L=UL,VL=320,BL=["items","changeImportance","isLandscape","onChange","isValid"],zL=["getValue"];function WL(e){const{items:t,changeImportance:n,onChange:r,isValid:i}=e,o=(0,Fe.A)(e,BL);if(null==t||0===t.length)return null;const s=t.map((e=>{let{getValue:t}=e,o=(0,Fe.A)(e,zL);const s=t({isValid:i});return{label:o.label,onClick:()=>{r(s,n,o)},disabled:!i(s)}}));return(0,Ke.jsx)(oE,(0,Le.A)({dense:!0,sx:[{maxHeight:334,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:s.map((e=>(0,Ke.jsx)(PL,{children:(0,Ke.jsx)($L,(0,Le.A)({},e))},e.label)))}))}const HL=e=>{var t,n;const{wrapperVariant:r,onAccept:i,onClear:o,onCancel:s,onSetToday:a,view:l,views:c,onViewChange:u,value:d,onChange:h,onSelectShortcut:p,isValid:f,isLandscape:m,disabled:g,readOnly:v,children:y,components:b,componentsProps:w,slots:x,slotProps:S}=e,C=null!=x?x:nD(b),_=null!=S?S:w,k=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]};return(0,qk.A)(r,lL,t)})(e),T=null!=(t=null==C?void 0:C.actionBar)?t:gL,A=aD({elementType:T,externalSlotProps:null==_?void 0:_.actionBar,additionalProps:{onAccept:i,onClear:o,onCancel:s,onSetToday:a,actions:"desktop"===r?[]:["cancel","accept"],className:k.actionBar},ownerState:(0,Le.A)({},e,{wrapperVariant:r})}),E=(0,Ke.jsx)(T,(0,Le.A)({},A)),I=null==C?void 0:C.toolbar,R=aD({elementType:I,externalSlotProps:null==_?void 0:_.toolbar,additionalProps:{isLandscape:m,onChange:h,value:d,view:l,onViewChange:u,views:c,disabled:g,readOnly:v,className:k.toolbar},ownerState:(0,Le.A)({},e,{wrapperVariant:r})}),P=function(e){return null!==e.view}(R)&&I?(0,Ke.jsx)(I,(0,Le.A)({},R)):null,j=y,N=null==C?void 0:C.tabs,O=l&&N?(0,Ke.jsx)(N,(0,Le.A)({view:l,onViewChange:u,className:k.tabs},null==_?void 0:_.tabs)):null,D=null!=(n=null==C?void 0:C.shortcuts)?n:WL,M=aD({elementType:D,externalSlotProps:null==_?void 0:_.shortcuts,additionalProps:{isValid:f,isLandscape:m,onChange:p,className:k.shortcuts},ownerState:{isValid:f,isLandscape:m,onChange:p,className:k.shortcuts,wrapperVariant:r}});return{toolbar:P,content:j,tabs:O,actionBar:E,shortcuts:l&&D?(0,Ke.jsx)(D,(0,Le.A)({},M)):null}},qL=(0,Gk.Ay)("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t,ownerState:n}=e;return{display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${cL.toolbar}`]:n.isLandscape?{gridColumn:"rtl"===t.direction?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${cL.shortcuts}`]:n.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:"rtl"===t.direction?3:1,gridRow:"2 / 3"},[`& .${cL.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}}));qL.propTypes={as:XN().elementType,ownerState:XN().shape({isLandscape:XN().bool.isRequired}).isRequired,sx:XN().oneOfType([XN().arrayOf(XN().oneOfType([XN().func,XN().object,XN().bool])),XN().func,XN().object])};const GL=(0,Gk.Ay)("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),KL=function(e){const t=JN({props:e,name:"MuiPickersLayout"}),{toolbar:n,content:r,tabs:i,actionBar:o,shortcuts:s}=HL(t),{sx:a,className:c,isLandscape:u,ref:d,wrapperVariant:h}=t,p=t,f=(e=>{const{isLandscape:t,classes:n}=e,r={root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]};return(0,qk.A)(r,lL,n)})(p);return(0,Ke.jsxs)(qL,{ref:d,sx:a,className:(0,Ue.A)(c,f.root),ownerState:p,children:[u?s:n,u?n:s,(0,Ke.jsx)(GL,{className:f.contentWrapper,children:"desktop"===h?(0,Ke.jsxs)(l.Fragment,{children:[r,i]}):(0,Ke.jsxs)(l.Fragment,{children:[i,r]})}),o]})},YL=["props","getOpenDialogAriaText"],JL=["ownerState"],QL=["ownerState"],XL=(0,fT.A)((0,Ke.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ZL=(0,fT.A)((0,Ke.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),eF=(0,fT.A)((0,Ke.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),tF=(0,fT.A)((0,Ke.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),nF=((0,fT.A)((0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ke.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),(0,fT.A)((0,Ke.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,fT.A)((0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ke.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),(0,fT.A)((0,Ke.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")),rF=e=>{const t=zO(),n=HO(),r=BO(),i="rtl"===IE().direction,{valueManager:o,fieldValueManager:s,valueType:a,validator:c,internalProps:u,internalProps:{value:d,defaultValue:h,referenceDate:p,onChange:f,format:m,formatDensity:g="dense",selectedSections:v,onSelectedSectionsChange:y,shouldRespectLeadingZeros:b=!1,timezone:w}}=e,{timezone:x,value:S,handleValueChange:C}=ZM({timezone:w,value:d,defaultValue:h,onChange:f,valueManager:o}),_=l.useMemo((()=>((e,t)=>{const n=e.dateWithTimezone(void 0,t),r=e.endOfYear(n),i=e.endOfDay(n),{maxDaysInMonth:o,longestMonth:s}=oO(e,n).reduce(((t,n)=>{const r=e.getDaysInMonth(n);return r>t.maxDaysInMonth?{maxDaysInMonth:r,longestMonth:n}:t}),{maxDaysInMonth:0,longestMonth:null});return{year:n=>{let{format:r}=n;return{minimum:0,maximum:AO(e,t,r)?9999:99}},month:()=>({minimum:1,maximum:e.getMonth(r)+1}),day:t=>{let{currentDate:n}=t;return{minimum:1,maximum:null!=n&&e.isValid(n)?e.getDaysInMonth(n):o,longestMonth:s}},weekDay:n=>{let{format:r,contentType:i}=n;if("digit"===i){const n=vO(e,t,r).map(Number);return{minimum:Math.min(...n),maximum:Math.max(...n)}}return{minimum:1,maximum:7}},hours:t=>{let{format:r}=t;const o=e.getHours(i);return e.formatByString(e.endOfDay(n),r)!==o.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(n),r))}:{minimum:0,maximum:o}},minutes:()=>({minimum:0,maximum:e.getMinutes(i)}),seconds:()=>({minimum:0,maximum:e.getSeconds(i)}),meridiem:()=>({minimum:0,maximum:0})}})(t,x)),[t,x]),k=l.useCallback((function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s.getSectionsFromValue(t,e,r,i,(e=>IO(t,x,n,m,e,g,b,i)))}),[s,m,n,i,b,t,g,x]),T=l.useMemo((()=>s.getValueStrFromSections(k(o.emptyValue),i)),[s,k,o.emptyValue,i]),[A,E]=l.useState((()=>{const e=k(S);RO();const n={sections:e,value:S,referenceValue:o.emptyValue,tempValueStrAndroid:null},r=(e=>Math.max(...e.map((e=>{var t;return null!=(t=pO[e.type])?t:1}))))(e),i=o.getInitialReferenceValue({referenceDate:p,value:S,utils:t,props:u,granularity:r,timezone:x});return(0,Le.A)({},n,{referenceValue:i})})),[I,R]=(0,QM.A)({controlled:v,default:null,name:"useField",state:"selectedSectionIndexes"}),P=e=>{R(e),null==y||y(e),E((e=>(0,Le.A)({},e,{selectedSectionQuery:null})))},j=l.useMemo((()=>{if(null==I)return null;if("all"===I)return{startIndex:0,endIndex:A.sections.length-1,shouldSelectBoundarySelectors:!0};if("number"===typeof I)return{startIndex:I,endIndex:I};if("string"===typeof I){const e=A.sections.findIndex((e=>e.type===I));return{startIndex:e,endIndex:e}}return I}),[I,A.sections]),N=e=>{let{value:n,referenceValue:i,sections:s}=e;if(E((e=>(0,Le.A)({},e,{sections:s,value:n,referenceValue:i,tempValueStrAndroid:null}))),o.areValuesEqual(t,A.value,n))return;const a={validationError:c({adapter:r,value:n,props:(0,Le.A)({},u,{value:n,timezone:x})})};C(n,a)},O=(e,t)=>{const n=[...A.sections];return n[e]=(0,Le.A)({},n[e],{value:t,modified:!0}),_O(n,i)};return l.useEffect((()=>{const e=k(A.value);RO(),E((t=>(0,Le.A)({},t,{sections:e})))}),[m,t.locale]),l.useEffect((()=>{let e=!1;e=!o.areValuesEqual(t,A.value,S)||o.getTimezone(t,A.value)!==o.getTimezone(t,S),e&&E((e=>(0,Le.A)({},e,{value:S,referenceValue:s.updateReferenceValue(t,S,e.referenceValue),sections:k(S)})))}),[S]),{state:A,selectedSectionIndexes:j,setSelectedSections:P,clearValue:()=>{N({value:o.emptyValue,referenceValue:A.referenceValue,sections:k(o.emptyValue)})},clearActiveSection:()=>{if(null==j)return;const e=A.sections[j.startIndex],n=s.getActiveDateManager(t,A,e),r=n.getSections(A.sections).filter((e=>""!==e.value)).length===(""===e.value?0:1),i=O(j.startIndex,""),o=r?null:t.date(new Date("")),a=n.getNewValuesFromNewActiveDate(o);(null!=o&&!t.isValid(o))!==(null!=n.date&&!t.isValid(n.date))?N((0,Le.A)({},a,{sections:i})):E((e=>(0,Le.A)({},e,a,{sections:i,tempValueStrAndroid:null})))},updateSectionValue:e=>{let{activeSection:n,newSectionValue:r,shouldGoToNextSection:i}=e;i&&j&&j.startIndex<A.sections.length-1?P(j.startIndex+1):j&&j.startIndex!==j.endIndex&&P(j.startIndex);const o=s.getActiveDateManager(t,A,n),a=O(j.startIndex,r),l=o.getSections(a),c=((e,t)=>{const n=t.some((e=>"day"===e.type)),r=[],i=[];for(let a=0;a<t.length;a+=1){const e=t[a];n&&"weekDay"===e.type||(r.push(e.format),i.push(SO(e,"non-input")))}const o=r.join(" "),s=i.join(" ");return e.parse(s,o)})(t,l);let u,d;if(null!=c&&t.isValid(c)){const e=jO(t,x,c,l,o.referenceDate,!0);u=o.getNewValuesFromNewActiveDate(e),d=!0}else u=o.getNewValuesFromNewActiveDate(c),d=(null!=c&&!t.isValid(c))!==(null!=o.date&&!t.isValid(o.date));return d?N((0,Le.A)({},u,{sections:a})):E((e=>(0,Le.A)({},e,u,{sections:a,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const r=s.parseValueStr(e,A.referenceValue,((e,r)=>{const o=t.parse(e,m);if(null==o||!t.isValid(o))return null;const s=IO(t,x,n,m,o,g,b,i);return jO(t,x,o,s,r,!1)})),o=s.updateReferenceValue(t,r,A.referenceValue);N({value:r,referenceValue:o,sections:k(r,A.sections)})},setTempAndroidValueStr:e=>E((t=>(0,Le.A)({},t,{tempValueStrAndroid:e}))),sectionsValueBoundaries:_,placeholder:T,timezone:x}},iF=e=>null!=e.saveQuery,oF=e=>{let{sections:t,updateSectionValue:n,sectionsValueBoundaries:r,setTempAndroidValueStr:i,timezone:o}=e;const s=zO(),[a,c]=l.useState(null),u=(0,tI.A)((()=>c(null)));l.useEffect((()=>{var e;null!=a&&(null==(e=t[a.sectionIndex])?void 0:e.type)!==a.sectionType&&u()}),[t,a,u]),l.useEffect((()=>{if(null!=a){const e=setTimeout((()=>u()),5e3);return()=>{window.clearTimeout(e)}}return()=>{}}),[a,u]);const d=(e,n,r)=>{let{keyPressed:i,sectionIndex:o}=e;const s=i.toLowerCase(),l=t[o];if(null!=a&&(!r||r(a.value))&&a.sectionIndex===o){const e=`${a.value}${s}`,t=n(e,l);if(!iF(t))return c({sectionIndex:o,value:e,sectionType:l.type}),t}const d=n(s,l);return iF(d)&&!d.saveQuery?(u(),null):(c({sectionIndex:o,value:s,sectionType:l.type}),iF(d)?null:d)},h=(0,tI.A)((e=>{const a=t[e.sectionIndex],l=" "!==e.keyPressed&&!Number.isNaN(Number(e.keyPressed))?(e=>{const t=(e,t)=>{const n=Number(`${e}`),i=r[t.type]({currentDate:null,format:t.format,contentType:t.contentType});if(n>i.maximum)return{saveQuery:!1};if(n<i.minimum)return{saveQuery:!0};const o=Number(`${e}0`)>i.maximum||e.length===i.maximum.toString().length;return{sectionValue:wO(s,0,n,i,t),shouldGoToNextSection:o}};return d(e,((e,n)=>{if("digit"===n.contentType||"digit-with-letter"===n.contentType)return t(e,n);if("month"===n.type){const r=EO(s,o,"digit","month","MM"),i=t(e,{type:n.type,format:"MM",hasLeadingZerosInFormat:r,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(iF(i))return i;const a=TO(s,i.sectionValue,"MM",n.format);return(0,Le.A)({},i,{sectionValue:a})}if("weekDay"===n.type){const r=t(e,n);if(iF(r))return r;const i=vO(s,o,n.format)[Number(r.sectionValue)-1];return(0,Le.A)({},r,{sectionValue:i})}return{saveQuery:!1}}),(e=>!Number.isNaN(Number(e))))})(e):(e=>{const t=(e,t,n)=>{const r=t.filter((e=>e.toLowerCase().startsWith(n)));return 0===r.length?{saveQuery:!1}:{sectionValue:r[0],shouldGoToNextSection:1===r.length}},n=(e,n,r,i)=>{const a=e=>yO(s,o,n.type,e);if("letter"===n.contentType)return t(n.format,a(n.format),e);if(r&&null!=i&&"letter"===gO(s,r).contentType){const n=a(r),o=t(0,n,e);return iF(o)?{saveQuery:!1}:(0,Le.A)({},o,{sectionValue:i(o.sectionValue,n)})}return{saveQuery:!1}};return d(e,((e,t)=>{switch(t.type){case"month":{const r=e=>TO(s,e,s.formats.month,t.format);return n(e,t,s.formats.month,r)}case"weekDay":{const r=(e,t)=>t.indexOf(e).toString();return n(e,t,s.formats.weekday,r)}case"meridiem":return n(e,t);default:return{saveQuery:!1}}}))})(e);null==l?i(null):n({activeSection:a,newSectionValue:l.sectionValue,shouldGoToNextSection:l.shouldGoToNextSection})}));return{applyCharacterEditing:h,resetCharacterQuery:u}},sF=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],aF=e=>{const t=zO(),{state:n,selectedSectionIndexes:r,setSelectedSections:i,clearValue:o,clearActiveSection:s,updateSectionValue:a,updateValueFromValueStr:c,setTempAndroidValueStr:u,sectionsValueBoundaries:d,placeholder:h,timezone:p}=rF(e),{inputRef:f,internalProps:m,internalProps:{readOnly:g=!1,unstableFieldRef:v,minutesStep:y},forwardedProps:{onClick:b,onKeyDown:w,onFocus:x,onBlur:S,onMouseUp:C,onPaste:_,error:k,clearable:T,onClear:A,disabled:E},fieldValueManager:I,valueManager:R,validator:P}=e,j=(0,Fe.A)(e.forwardedProps,sF),{applyCharacterEditing:N,resetCharacterQuery:O}=oF({sections:n.sections,updateSectionValue:a,sectionsValueBoundaries:d,setTempAndroidValueStr:u,timezone:p}),D=l.useRef(null),M=(0,vT.A)(f,D),L=l.useRef(void 0),F="rtl"===IE().direction,U=l.useMemo((()=>((e,t)=>{const n={};if(!t)return e.forEach(((t,r)=>{const i=0===r?null:r-1,o=r===e.length-1?null:r+1;n[r]={leftIndex:i,rightIndex:o}})),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},i={};let o=0,s=0,a=e.length-1;for(;a>=0;){s=e.findIndex(((e,t)=>{var n;return t>=o&&(null==(n=e.endSeparator)?void 0:n.includes(" "))&&" / "!==e.endSeparator})),-1===s&&(s=e.length-1);for(let e=s;e>=o;e-=1)i[e]=a,r[a]=e,a-=1;o=s+1}return e.forEach(((t,o)=>{const s=i[o],a=0===s?null:r[s-1],l=s===e.length-1?null:r[s+1];n[o]={leftIndex:a,rightIndex:l}})),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}})(n.sections,F)),[n.sections,F]),$=()=>{var e;if(g)return void i(null);const t=null!=(e=D.current.selectionStart)?e:0;let r;r=t<=n.sections[0].startInInput||t>=n.sections[n.sections.length-1].endInInput?1:n.sections.findIndex((e=>e.startInInput-e.startSeparator.length>t));const o=-1===r?n.sections.length-1:r-1;i(o)},V=(0,tI.A)((function(e){if(!e.isDefaultPrevented()){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==b||b(e,...n),$()}})),B=(0,tI.A)((e=>{null==C||C(e),e.preventDefault()})),z=(0,tI.A)((function(){null==x||x(...arguments);const e=D.current;window.clearTimeout(L.current),L.current=setTimeout((()=>{e&&e===D.current&&(null!=r||g||(e.value.length&&Number(e.selectionEnd)-Number(e.selectionStart)===e.value.length?i("all"):$()))}))})),W=(0,tI.A)((function(){null==S||S(...arguments),i(null)})),H=(0,tI.A)((e=>{if(null==_||_(e),g)return void e.preventDefault();const t=e.clipboardData.getData("text");if(r&&r.startIndex===r.endIndex){const i=n.sections[r.startIndex],o=/^[a-zA-Z]+$/.test(t),s=/^[0-9]+$/.test(t),l=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(t);if("letter"===i.contentType&&o||"digit"===i.contentType&&s||"digit-with-letter"===i.contentType&&l)return O(),a({activeSection:i,newSectionValue:t,shouldGoToNextSection:!0}),void e.preventDefault();if(o||s)return void e.preventDefault()}e.preventDefault(),O(),c(t)})),q=(0,tI.A)((e=>{if(g)return;const t=e.target.value;if(""===t)return O(),void o();const i=e.nativeEvent.data,a=i&&i.length>1,l=a?i:t,d=CO(l);if(null==r||a)return void c(a?i:d);let h;if(0===r.startIndex&&r.endIndex===n.sections.length-1&&1===d.length)h=d;else{const e=CO(I.getValueStrFromSections(n.sections,F));let t=-1,i=-1;for(let n=0;n<e.length;n+=1)-1===t&&e[n]!==d[n]&&(t=n),-1===i&&e[e.length-n-1]!==d[d.length-n-1]&&(i=n);const o=n.sections[r.startIndex];if(t<o.start||e.length-i-1>o.end)return;const s=d.length-e.length+o.end-CO(o.endSeparator||"").length;h=d.slice(o.start+CO(o.startSeparator||"").length,s)}0!==h.length?N({keyPressed:h,sectionIndex:r.startIndex}):navigator.userAgent.toLowerCase().indexOf("android")>-1?u(l):(O(),s())})),G=(0,tI.A)((e=>{switch(null==w||w(e),!0){case"a"===e.key&&(e.ctrlKey||e.metaKey):e.preventDefault(),i("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==r)i(U.startIndex);else if(r.startIndex!==r.endIndex)i(r.endIndex);else{const e=U.neighbors[r.startIndex].rightIndex;null!==e&&i(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==r)i(U.endIndex);else if(r.startIndex!==r.endIndex)i(r.startIndex);else{const e=U.neighbors[r.startIndex].leftIndex;null!==e&&i(e)}break;case"Delete"===e.key:if(e.preventDefault(),g)break;null==r||0===r.startIndex&&r.endIndex===n.sections.length-1?o():s(),O();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),g||null==r)break;const i=n.sections[r.startIndex],o=I.getActiveDateManager(t,n,i),s=xO(t,p,i,e.key,d,o.date,{minutesStep:y});a({activeSection:i,newSectionValue:s,shouldGoToNextSection:!1});break}}}));(0,zE.A)((()=>{if(!D.current)return;if(null==r)return void(D.current.scrollLeft&&(D.current.scrollLeft=0));const e=n.sections[r.startIndex],t=n.sections[r.endIndex];let i=e.startInInput,o=t.endInInput;if(r.shouldSelectBoundarySelectors&&(i-=e.startSeparator.length,o+=t.endSeparator.length),i!==D.current.selectionStart||o!==D.current.selectionEnd){const e=D.current.scrollTop;D.current===UM(document)&&D.current.setSelectionRange(i,o),D.current.scrollTop=e}}));const K=XM((0,Le.A)({},m,{value:n.value,timezone:p}),P,R.isSameError,R.defaultErrorState),Y=l.useMemo((()=>void 0!==k?k:R.hasError(K)),[R,K,k]);l.useEffect((()=>{Y||r||O()}),[n.referenceValue,r,Y]),l.useEffect((()=>(D.current&&D.current===document.activeElement&&i("all"),()=>window.clearTimeout(L.current))),[]),l.useEffect((()=>{null!=n.tempValueStrAndroid&&null!=r&&(O(),s())}),[n.tempValueStrAndroid]);const J=l.useMemo((()=>{var e;return null!=(e=n.tempValueStrAndroid)?e:I.getValueStrFromSections(n.sections,F)}),[n.sections,I,n.tempValueStrAndroid,F]),Q=l.useMemo((()=>null==r||"letter"===n.sections[r.startIndex].contentType?"text":"numeric"),[r,n.sections]),X=D.current&&D.current===UM(document),Z=R.areValuesEqual(t,n.value,R.emptyValue),ee=!X&&Z;l.useImperativeHandle(v,(()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var e,t,r;const i=null!=(e=D.current.selectionStart)?e:0,o=null!=(t=D.current.selectionEnd)?t:0,s=!(null==(r=D.current)||!r.readOnly);if(0===i&&0===o||s)return null;const a=i<=n.sections[0].startInInput?1:n.sections.findIndex((e=>e.startInInput-e.startSeparator.length>i));return-1===a?n.sections.length-1:a-1},setSelectedSections:e=>i(e)})));const te=(0,tI.A)((function(e){var t;e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];null==A||A(e,...r),o(),null==D||null==(t=D.current)||t.focus(),i(0)}));return(0,Le.A)({placeholder:h,autoComplete:"off",disabled:Boolean(E)},j,{value:ee?"":J,inputMode:Q,readOnly:g,onClick:V,onFocus:z,onBlur:W,onPaste:H,onChange:q,onKeyDown:G,onMouseUp:B,onClear:te,error:Y,ref:M,clearable:Boolean(T&&!Z&&!g&&!E)})},lF=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],cF=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],uF=["minDateTime","maxDateTime"],dF=[...lF,...cF,...uF],hF=e=>dF.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),pF=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],fF=e=>{let{props:t,inputRef:n}=e;const r=(e=>{var t,n,r;const i=zO(),o=WO();return(0,Le.A)({},e,{disablePast:null!=(t=e.disablePast)&&t,disableFuture:null!=(n=e.disableFuture)&&n,format:null!=(r=e.format)?r:i.formats.keyboardDate,minDate:iO(i,e.minDate,o.minDate),maxDate:iO(i,e.maxDate,o.maxDate)})})(t),{forwardedProps:i,internalProps:o}=((e,t)=>{const n=(0,Le.A)({},e),r={},i=e=>{n.hasOwnProperty(e)&&(r[e]=n[e],delete n[e])};return pF.forEach(i),"date"===t?lF.forEach(i):"time"===t?cF.forEach(i):"date-time"===t&&(lF.forEach(i),cF.forEach(i),uF.forEach(i)),{forwardedProps:n,internalProps:r}})(r,"date");return aF({inputRef:n,forwardedProps:i,internalProps:o,valueManager:OO,fieldValueManager:DO,validator:iD,valueType:"date"})},mF=["ownerState"],gF=["components","componentsProps","slots","slotProps","InputProps","inputProps"],vF=["inputRef"],yF=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],bF=l.forwardRef((function(e,t){var n,r,i;const o=JN({props:e,name:"MuiDateField"}),{components:s,componentsProps:a,slots:c,slotProps:u,InputProps:d,inputProps:h}=o,p=(0,Fe.A)(o,gF),f=o,m=null!=(n=null!=(r=null==c?void 0:c.textField)?r:null==s?void 0:s.TextField)?n:Uj,g=aD({elementType:m,externalSlotProps:null!=(i=null==u?void 0:u.textField)?i:null==a?void 0:a.textField,externalForwardedProps:p,ownerState:f}),{inputRef:v}=g,y=(0,Fe.A)(g,vF);y.inputProps=(0,Le.A)({},h,y.inputProps),y.InputProps=(0,Le.A)({},d,y.InputProps);const b=fF({props:y,inputRef:v}),{ref:w,onPaste:x,onKeyDown:S,inputMode:C,readOnly:_,clearable:k,onClear:T}=b,A=(0,Fe.A)(b,yF),{InputProps:E,fieldProps:I}=(e=>{let{clearable:t,fieldProps:n,InputProps:r,onClear:i,slots:o,slotProps:s,components:a,componentsProps:c}=e;var u,d,h,p,f,m;const g=HO(),v=null!=(u=null!=(d=null==o?void 0:o.clearButton)?d:null==a?void 0:a.ClearButton)?u:EA,y=aD({elementType:v,externalSlotProps:null!=(h=null==s?void 0:s.clearButton)?h:null==c?void 0:c.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),b=(0,Fe.A)(y,mF),w=null!=(p=null!=(f=null==o?void 0:o.clearIcon)?f:null==a?void 0:a.ClearIcon)?p:nF,x=aD({elementType:w,externalSlotProps:null!=(m=null==s?void 0:s.clearIcon)?m:null==c?void 0:c.clearIcon,ownerState:{}});return{InputProps:(0,Le.A)({},r,{endAdornment:(0,Ke.jsxs)(l.Fragment,{children:[t&&(0,Ke.jsx)(HN,{position:"end",sx:{marginRight:null!=r&&r.endAdornment?-1:-1.5},children:(0,Ke.jsx)(v,(0,Le.A)({},b,{onClick:i,children:(0,Ke.jsx)(w,(0,Le.A)({fontSize:"small"},x))}))}),null==r?void 0:r.endAdornment]})}),fieldProps:(0,Le.A)({},n,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(n.sx)?n.sx:[n.sx]]})}})({onClear:T,clearable:k,fieldProps:A,InputProps:A.InputProps,slots:c,slotProps:u,components:s,componentsProps:a});return(0,Ke.jsx)(m,(0,Le.A)({ref:t},I,{InputProps:(0,Le.A)({},E,{readOnly:_}),inputProps:(0,Le.A)({},A.inputProps,{inputMode:C,onPaste:x,onKeyDown:S,ref:w})}))})),wF=e=>{let{shouldDisableDate:t,shouldDisableMonth:n,shouldDisableYear:r,minDate:i,maxDate:o,disableFuture:s,disablePast:a,timezone:c}=e;const u=BO();return l.useCallback((e=>null!==iD({adapter:u,value:e,props:{shouldDisableDate:t,shouldDisableMonth:n,shouldDisableYear:r,minDate:i,maxDate:o,disableFuture:s,disablePast:a,timezone:c}})),[u,t,n,r,i,o,s,a,c])},xF=e=>{const{value:t,referenceDate:n,defaultCalendarMonth:r,disableFuture:i,disablePast:o,disableSwitchToMonthOnDayFocus:s=!1,maxDate:a,minDate:c,onMonthChange:u,reduceAnimations:d,shouldDisableDate:h,timezone:p}=e,f=zO(),m=l.useRef(((e,t,n)=>(r,i)=>{switch(i.type){case"changeMonth":return(0,Le.A)({},r,{slideDirection:i.direction,currentMonth:i.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return(0,Le.A)({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(null!=r.focusedDay&&null!=i.focusedDay&&n.isSameDay(i.focusedDay,r.focusedDay))return r;const o=null!=i.focusedDay&&!t&&!n.isSameMonth(r.currentMonth,i.focusedDay);return(0,Le.A)({},r,{focusedDay:i.focusedDay,isMonthSwitchingAnimating:o&&!e&&!i.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(i.focusedDay):r.currentMonth,slideDirection:null!=i.focusedDay&&n.isAfterDay(i.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}})(Boolean(d),s,f)).current,g=l.useMemo((()=>{let i=null;return n?i=n:r&&(i=f.startOfMonth(r)),OO.getInitialReferenceValue({value:t,utils:f,timezone:p,props:e,referenceDate:i,granularity:pO.day})}),[]),[v,y]=l.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:g,currentMonth:f.startOfMonth(g),slideDirection:"left"}),b=l.useCallback((e=>{y((0,Le.A)({type:"changeMonth"},e)),u&&u(e.newMonth)}),[u]),w=l.useCallback((e=>{const t=e;f.isSameMonth(t,v.currentMonth)||b({newMonth:f.startOfMonth(t),direction:f.isAfterDay(t,v.currentMonth)?"left":"right"})}),[v.currentMonth,b,f]),x=wF({shouldDisableDate:h,minDate:c,maxDate:a,disableFuture:i,disablePast:o,timezone:p}),S=l.useCallback((()=>{y({type:"finishMonthSwitchingAnimation"})}),[]),C=(0,tI.A)(((e,t)=>{x(e)||y({type:"changeFocusedDay",focusedDay:e,withoutMonthSwitchingAnimation:t})}));return{referenceDate:g,calendarState:v,changeMonth:w,changeFocusedDay:C,isDateDisabled:x,onMonthSwitchingAnimationEnd:S,handleChangeMonth:b}},SF=e=>(0,Qk.Ay)("MuiPickersFadeTransitionGroup",e),CF=((0,Ze.A)("MuiPickersFadeTransitionGroup",["root"]),(0,Gk.Ay)(ZT,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"}));function _F(e){const t=JN({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:r,reduceAnimations:i,transKey:o}=t,s=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},SF,t)})(t),a=IE();return i?n:(0,Ke.jsx)(CF,{className:(0,Ue.A)(s.root,r),children:(0,Ke.jsx)(YE,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:a.transitions.duration.enteringScreen,enter:a.transitions.duration.enteringScreen,exit:0},children:n},o)})}var kF=n(6747);function TF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,kF.A)(e,t,n)}function AF(e){if(e.type)return e;if("#"===e.charAt(0))return AF(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,LR.A)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,LR.A)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function EF(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function IF(e,t){return e=AF(e),t=TF(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,EF(e)}function RF(e){return(0,Qk.Ay)("MuiPickersDay",e)}const PF=(0,Ze.A)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),jF=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],NF=e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},t.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:IF(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:IF(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${PF.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${PF.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${PF.disabled}:not(.${PF.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${PF.disabled}&.${PF.selected}`]:{opacity:.6}},!n.disableMargin&&{margin:"0 2px"},n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!n.disableHighlightToday&&n.today&&{[`&:not(.${PF.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}})},OF=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},DF=(0,Gk.Ay)(SA,{name:"MuiPickersDay",slot:"Root",overridesResolver:OF})(NF),MF=(0,Gk.Ay)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:OF})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},NF({theme:t,ownerState:n}),{opacity:0,pointerEvents:"none"})})),LF=()=>{},FF=l.forwardRef((function(e,t){const n=JN({props:e,name:"MuiPickersDay"}),{autoFocus:r=!1,className:i,day:o,disabled:s=!1,disableHighlightToday:a=!1,disableMargin:c=!1,isAnimating:u,onClick:d,onDaySelect:h,onFocus:p=LF,onBlur:f=LF,onKeyDown:m=LF,onMouseDown:g=LF,onMouseEnter:v=LF,outsideCurrentMonth:y,selected:b=!1,showDaysOutsideCurrentMonth:w=!1,children:x,today:S=!1}=n,C=(0,Fe.A)(n,jF),_=(0,Le.A)({},n,{autoFocus:r,disabled:s,disableHighlightToday:a,disableMargin:c,selected:b,showDaysOutsideCurrentMonth:w,today:S}),k=(e=>{const{selected:t,disableMargin:n,disableHighlightToday:r,today:i,disabled:o,outsideCurrentMonth:s,showDaysOutsideCurrentMonth:a,classes:l}=e,c=s&&!a,u={root:["root",t&&!c&&"selected",o&&"disabled",!n&&"dayWithMargin",!r&&i&&"today",s&&a&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return(0,qk.A)(u,RF,l)})(_),T=zO(),A=l.useRef(null),E=(0,vT.A)(A,t);(0,zE.A)((()=>{!r||s||u||y||A.current.focus()}),[r,s,u,y]);return y&&!w?(0,Ke.jsx)(MF,{className:(0,Ue.A)(k.root,k.hiddenDaySpacingFiller,i),ownerState:_,role:C.role}):(0,Ke.jsx)(DF,(0,Le.A)({className:(0,Ue.A)(k.root,i),ref:E,centerRipple:!0,disabled:s,tabIndex:b?0:-1,onKeyDown:e=>m(e,o),onFocus:e=>p(e,o),onBlur:e=>f(e,o),onMouseEnter:e=>v(e,o),onClick:e=>{s||h(o),y&&e.currentTarget.focus(),d&&d(e)},onMouseDown:e=>{g(e),y&&e.preventDefault()}},C,{ownerState:_,children:x||T.format(o,"dayOfMonth")}))})),UF=l.memo(FF);function $F(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var VF=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=$F(n.className,r):n.setAttribute("class",$F(n.className&&n.className.baseVal||"",r)));var n,r}))},BF=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}qT(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&wE(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&VF(e,r),i&&VF(e,i),o&&VF(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,Fe.A)(e,["classNames"]));return l.createElement(EE,(0,Le.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);BF.defaultProps={classNames:""},BF.propTypes={};const zF=BF,WF=e=>(0,Qk.Ay)("MuiPickersSlideTransition",e),HF=(0,Ze.A)("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),qF=["children","className","reduceAnimations","slideDirection","transKey","classes"],GF=(0,Gk.Ay)(ZT,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${HF["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${HF["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${HF.slideEnterActive}`]:t.slideEnterActive},{[`.${HF.slideExit}`]:t.slideExit},{[`.${HF["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${HF["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})((e=>{let{theme:t}=e;const n=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${HF["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${HF["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${HF.slideEnterActive}`]:{transform:"translate(0%)",transition:n},[`& .${HF.slideExit}`]:{transform:"translate(0%)"},[`& .${HF["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:n,zIndex:0},[`& .${HF["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:n,zIndex:0}}}));const KF=e=>(0,Qk.Ay)("MuiDayCalendar",e),YF=((0,Ze.A)("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]),["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"]),JF=["ownerState"],QF=(0,Gk.Ay)("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),XF=(0,Gk.Ay)("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),ZF=(0,Gk.Ay)($T,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary}})),eU=(0,Gk.Ay)($T,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled}})),tU=(0,Gk.Ay)($T,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})((e=>{let{theme:t}=e;return(0,Le.A)({},t.typography.caption,{width:36,height:36,padding:0,margin:"0 2px",color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})})),nU=(0,Gk.Ay)("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),rU=(0,Gk.Ay)((function(e){const t=JN({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:i,transKey:o}=t,s=(0,Fe.A)(t,qF),a=(e=>{const{classes:t,slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return(0,qk.A)(r,WF,t)})(t),c=IE();if(i)return(0,Ke.jsx)("div",{className:(0,Ue.A)(a.root,r),children:n});const u={exit:a.exit,enterActive:a.enterActive,enter:a.enter,exitActive:a.exitActive};return(0,Ke.jsx)(GF,{className:(0,Ue.A)(a.root,r),childFactory:e=>l.cloneElement(e,{classNames:u}),role:"presentation",children:(0,Ke.jsx)(zF,(0,Le.A)({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:u},s,{children:n}),o)})}),{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:240}),iU=(0,Gk.Ay)("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),oU=(0,Gk.Ay)("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"});function sU(e){var t,n,r;let{parentProps:i,day:o,focusableDay:s,selectedDays:a,isDateDisabled:c,currentMonthNumber:u,isViewFocused:d}=e,h=(0,Fe.A)(e,YF);const{disabled:p,disableHighlightToday:f,isMonthSwitchingAnimating:m,showDaysOutsideCurrentMonth:g,components:v,componentsProps:y,slots:b,slotProps:w,timezone:x}=i,S=zO(),C=qO(x),_=null!==s&&S.isSameDay(o,s),k=a.some((e=>S.isSameDay(e,o))),T=S.isSameDay(o,C),A=null!=(t=null!=(n=null==b?void 0:b.day)?n:null==v?void 0:v.Day)?t:UF,E=aD({elementType:A,externalSlotProps:null!=(r=null==w?void 0:w.day)?r:null==y?void 0:y.day,additionalProps:(0,Le.A)({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:m,"data-timestamp":S.toJsDate(o).valueOf()},h),ownerState:(0,Le.A)({},i,{day:o,selected:k})}),I=(0,Fe.A)(E,JF),R=l.useMemo((()=>p||c(o)),[p,c,o]),P=l.useMemo((()=>S.getMonth(o)!==u),[S,o,u]),j=l.useMemo((()=>{const e=S.startOfMonth(S.setMonth(o,u));return g?S.isSameDay(o,S.startOfWeek(e)):S.isSameDay(o,e)}),[u,o,g,S]),N=l.useMemo((()=>{const e=S.endOfMonth(S.setMonth(o,u));return g?S.isSameDay(o,S.endOfWeek(e)):S.isSameDay(o,e)}),[u,o,g,S]);return(0,Ke.jsx)(A,(0,Le.A)({},I,{day:o,disabled:R,autoFocus:d&&_,today:T,outsideCurrentMonth:P,isFirstVisibleCell:j,isLastVisibleCell:N,selected:k,tabIndex:_?0:-1,"aria-selected":k,"aria-current":T?"date":void 0}))}function aU(e){const t=JN({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:n,className:r,currentMonth:i,selectedDays:o,focusedDay:s,loading:a,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:u,readOnly:d,reduceAnimations:h,renderLoading:p=()=>(0,Ke.jsx)("span",{children:"..."}),slideDirection:f,TransitionProps:m,disablePast:g,disableFuture:v,minDate:y,maxDate:b,shouldDisableDate:w,shouldDisableMonth:x,shouldDisableYear:S,dayOfWeekFormatter:C,hasFocus:_,onFocusedViewChange:k,gridLabelId:T,displayWeekNumber:A,fixedWeekNumber:E,autoFocus:I,timezone:R}=t,P=qO(R),j=zO(),N=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},KF,t)})(t),O="rtl"===IE().direction,D=C||((e,t)=>j.format(t,"weekdayShort").charAt(0).toUpperCase()),M=wF({shouldDisableDate:w,shouldDisableMonth:x,shouldDisableYear:S,minDate:y,maxDate:b,disablePast:g,disableFuture:v,timezone:R}),L=HO(),[F,U]=(0,QM.A)({name:"DayCalendar",state:"hasFocus",controlled:_,default:null!=I&&I}),[$,V]=l.useState((()=>s||P)),B=(0,tI.A)((e=>{d||c(e)})),z=e=>{M(e)||(n(e),V(e),null==k||k(!0),U(!0))},W=(0,tI.A)(((e,t)=>{switch(e.key){case"ArrowUp":z(j.addDays(t,-7)),e.preventDefault();break;case"ArrowDown":z(j.addDays(t,7)),e.preventDefault();break;case"ArrowLeft":{const n=j.addDays(t,O?1:-1),r=j.addMonths(t,O?1:-1),i=rO({utils:j,date:n,minDate:O?n:j.startOfMonth(r),maxDate:O?j.endOfMonth(r):n,isDateDisabled:M,timezone:R});z(i||n),e.preventDefault();break}case"ArrowRight":{const n=j.addDays(t,O?-1:1),r=j.addMonths(t,O?-1:1),i=rO({utils:j,date:n,minDate:O?j.startOfMonth(r):n,maxDate:O?n:j.endOfMonth(r),isDateDisabled:M,timezone:R});z(i||n),e.preventDefault();break}case"Home":z(j.startOfWeek(t)),e.preventDefault();break;case"End":z(j.endOfWeek(t)),e.preventDefault();break;case"PageUp":z(j.addMonths(t,1)),e.preventDefault();break;case"PageDown":z(j.addMonths(t,-1)),e.preventDefault()}})),H=(0,tI.A)(((e,t)=>z(t))),q=(0,tI.A)(((e,t)=>{F&&j.isSameDay($,t)&&(null==k||k(!1))})),G=j.getMonth(i),K=l.useMemo((()=>o.filter((e=>!!e)).map((e=>j.startOfDay(e)))),[j,o]),Y=G,J=l.useMemo((()=>l.createRef()),[Y]),Q=j.startOfWeek(P),X=l.useMemo((()=>{const e=j.startOfMonth(i),t=j.endOfMonth(i);return M($)||j.isAfterDay($,t)||j.isBeforeDay($,e)?rO({utils:j,date:$,minDate:e,maxDate:t,disablePast:g,disableFuture:v,isDateDisabled:M,timezone:R}):$}),[i,v,g,$,M,j,R]),Z=l.useMemo((()=>{const e=j.setTimezone(i,R),t=j.getWeekArray(e);let n=j.addMonths(e,1);for(;E&&t.length<E;){const e=j.getWeekArray(n),r=j.isSameDay(t[t.length-1][0],e[0][0]);e.slice(r?1:0).forEach((e=>{t.length<E&&t.push(e)})),n=j.addMonths(n,1)}return t}),[i,E,j,R]);return(0,Ke.jsxs)(QF,{role:"grid","aria-labelledby":T,className:N.root,children:[(0,Ke.jsxs)(XF,{role:"row",className:N.header,children:[A&&(0,Ke.jsx)(eU,{variant:"caption",role:"columnheader","aria-label":L.calendarWeekNumberHeaderLabel,className:N.weekNumberLabel,children:L.calendarWeekNumberHeaderText}),uO(j,P).map(((e,t)=>{var n;const r=j.format(e,"weekdayShort");return(0,Ke.jsx)(ZF,{variant:"caption",role:"columnheader","aria-label":j.format(j.addDays(Q,t),"weekday"),className:N.weekDayLabel,children:null!=(n=null==D?void 0:D(r,e))?n:r},r+t.toString())}))]}),a?(0,Ke.jsx)(nU,{className:N.loadingContainer,children:p()}):(0,Ke.jsx)(rU,(0,Le.A)({transKey:Y,onExited:u,reduceAnimations:h,slideDirection:f,className:(0,Ue.A)(r,N.slideTransition)},m,{nodeRef:J,children:(0,Ke.jsx)(iU,{ref:J,role:"rowgroup",className:N.monthContainer,children:Z.map(((e,n)=>(0,Ke.jsxs)(oU,{role:"row",className:N.weekContainer,"aria-rowindex":n+1,children:[A&&(0,Ke.jsx)(tU,{className:N.weekNumber,role:"rowheader","aria-label":L.calendarWeekNumberAriaLabelText(j.getWeekNumber(e[0])),children:L.calendarWeekNumberText(j.getWeekNumber(e[0]))}),e.map(((e,n)=>(0,Ke.jsx)(sU,{parentProps:t,day:e,selectedDays:K,focusableDay:X,onKeyDown:W,onFocus:H,onBlur:q,onDaySelect:B,isDateDisabled:M,currentMonthNumber:G,isViewFocused:F,"aria-colindex":n+1},e.toString())))]},`week-${e[0]}`)))})}))]})}function lU(e){return(0,Qk.Ay)("MuiPickersMonth",e)}const cU=(0,Ze.A)("MuiPickersMonth",["root","monthButton","disabled","selected"]),uU=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],dU=(0,Gk.Ay)("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})((e=>{let{ownerState:t}=e;return{flexBasis:3===t.monthsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),hU=(0,Gk.Ay)("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${cU.disabled}`]:t.disabled},{[`&.${cU.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,Le.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IF(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IF(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${cU.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${cU.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),pU=l.memo((function(e){const t=JN({props:e,name:"MuiPickersMonth"}),{autoFocus:n,children:r,disabled:i,selected:o,value:s,tabIndex:a,onClick:c,onKeyDown:u,onFocus:d,onBlur:h,"aria-current":p,"aria-label":f}=t,m=(0,Fe.A)(t,uU),g=l.useRef(null),v=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]};return(0,qk.A)(i,lU,r)})(t);return(0,zE.A)((()=>{var e;n&&(null==(e=g.current)||e.focus())}),[n]),(0,Ke.jsx)(dU,(0,Le.A)({className:v.root,ownerState:t},m,{children:(0,Ke.jsx)(hU,{ref:g,disabled:i,type:"button",role:"radio",tabIndex:i?-1:a,"aria-current":p,"aria-checked":o,"aria-label":f,onClick:e=>c(e,s),onKeyDown:e=>u(e,s),onFocus:e=>d(e,s),onBlur:e=>h(e,s),className:v.monthButton,ownerState:t,children:r})}))}));function fU(e){return(0,Qk.Ay)("MuiMonthCalendar",e)}(0,Ze.A)("MuiMonthCalendar",["root"]);const mU=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"];const gU=(0,Gk.Ay)("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:VL,boxSizing:"border-box"}),vU=l.forwardRef((function(e,t){const n=function(e,t){const n=zO(),r=WO(),i=JN({props:e,name:t});return(0,Le.A)({disableFuture:!1,disablePast:!1},i,{minDate:iO(n,i.minDate,r.minDate),maxDate:iO(n,i.maxDate,r.maxDate)})}(e,"MuiMonthCalendar"),{className:r,value:i,defaultValue:o,referenceDate:s,disabled:a,disableFuture:c,disablePast:u,maxDate:d,minDate:h,onChange:p,shouldDisableMonth:f,readOnly:m,disableHighlightToday:g,autoFocus:v=!1,onMonthFocus:y,hasFocus:b,onFocusedViewChange:w,monthsPerRow:x=3,timezone:S,gridLabelId:C}=n,_=(0,Fe.A)(n,mU),{value:k,handleValueChange:T,timezone:A}=eL({name:"MonthCalendar",timezone:S,value:i,defaultValue:o,onChange:p,valueManager:OO}),E=qO(A),I=Ge(),R=zO(),P=l.useMemo((()=>OO.getInitialReferenceValue({value:k,utils:R,props:n,timezone:A,referenceDate:s,granularity:pO.month})),[]),j=n,N=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},fU,t)})(j),O=l.useMemo((()=>R.getMonth(E)),[R,E]),D=l.useMemo((()=>null!=k?R.getMonth(k):g?null:R.getMonth(P)),[k,R,g,P]),[M,L]=l.useState((()=>D||O)),[F,U]=(0,QM.A)({name:"MonthCalendar",state:"hasFocus",controlled:b,default:null!=v&&v}),$=(0,tI.A)((e=>{U(e),w&&w(e)})),V=l.useCallback((e=>{const t=R.startOfMonth(u&&R.isAfter(E,h)?E:h),n=R.startOfMonth(c&&R.isBefore(E,d)?E:d),r=R.startOfMonth(e);return!!R.isBefore(r,t)||(!!R.isAfter(r,n)||!!f&&f(r))}),[c,u,d,h,E,f,R]),B=(0,tI.A)(((e,t)=>{if(m)return;const n=R.setMonth(null!=k?k:P,t);T(n)})),z=(0,tI.A)((e=>{V(R.setMonth(null!=k?k:P,e))||(L(e),$(!0),y&&y(e))}));l.useEffect((()=>{L((e=>null!==D&&e!==D?D:e))}),[D]);const W=(0,tI.A)(((e,t)=>{const n=12;switch(e.key){case"ArrowUp":z((n+t-3)%n),e.preventDefault();break;case"ArrowDown":z((n+t+3)%n),e.preventDefault();break;case"ArrowLeft":z((n+t+("ltr"===I.direction?-1:1))%n),e.preventDefault();break;case"ArrowRight":z((n+t+("ltr"===I.direction?1:-1))%n),e.preventDefault()}})),H=(0,tI.A)(((e,t)=>{z(t)})),q=(0,tI.A)(((e,t)=>{M===t&&$(!1)}));return(0,Ke.jsx)(gU,(0,Le.A)({ref:t,className:(0,Ue.A)(N.root,r),ownerState:j,role:"radiogroup","aria-labelledby":C},_,{children:oO(R,null!=k?k:P).map((e=>{const t=R.getMonth(e),n=R.format(e,"monthShort"),r=R.format(e,"month"),i=t===D,o=a||V(e);return(0,Ke.jsx)(pU,{selected:i,value:t,onClick:B,onKeyDown:W,autoFocus:F&&t===M,disabled:o,tabIndex:t===M?0:-1,onFocus:H,onBlur:q,"aria-current":O===t?"date":void 0,"aria-label":r,monthsPerRow:x,children:n},n)}))}))}));function yU(e){return(0,Qk.Ay)("MuiPickersYear",e)}const bU=(0,Ze.A)("MuiPickersYear",["root","yearButton","selected","disabled"]),wU=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],xU=(0,Gk.Ay)("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})((e=>{let{ownerState:t}=e;return{flexBasis:3===t.yearsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),SU=(0,Gk.Ay)("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${bU.disabled}`]:t.disabled},{[`&.${bU.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,Le.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:IF(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:IF(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${bU.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${bU.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),CU=l.memo((function(e){const t=JN({props:e,name:"MuiPickersYear"}),{autoFocus:n,className:r,children:i,disabled:o,selected:s,value:a,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":f}=t,m=(0,Fe.A)(t,wU),g=l.useRef(null),v=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]};return(0,qk.A)(i,yU,r)})(t);return l.useEffect((()=>{n&&g.current.focus()}),[n]),(0,Ke.jsx)(xU,(0,Le.A)({className:(0,Ue.A)(v.root,r),ownerState:t},m,{children:(0,Ke.jsx)(SU,{ref:g,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":f,"aria-checked":s,onClick:e=>u(e,a),onKeyDown:e=>d(e,a),onFocus:e=>h(e,a),onBlur:e=>p(e,a),className:v.yearButton,ownerState:t,children:i})}))}));function _U(e){return(0,Qk.Ay)("MuiYearCalendar",e)}(0,Ze.A)("MuiYearCalendar",["root"]);const kU=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"];const TU=(0,Gk.Ay)("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:VL,maxHeight:280,boxSizing:"border-box",position:"relative"}),AU=l.forwardRef((function(e,t){const n=function(e,t){var n;const r=zO(),i=WO(),o=JN({props:e,name:t});return(0,Le.A)({disablePast:!1,disableFuture:!1},o,{yearsPerRow:null!=(n=o.yearsPerRow)?n:3,minDate:iO(r,o.minDate,i.minDate),maxDate:iO(r,o.maxDate,i.maxDate)})}(e,"MuiYearCalendar"),{autoFocus:r,className:i,value:o,defaultValue:s,referenceDate:a,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onChange:f,readOnly:m,shouldDisableYear:g,disableHighlightToday:v,onYearFocus:y,hasFocus:b,onFocusedViewChange:w,yearsPerRow:x,timezone:S,gridLabelId:C}=n,_=(0,Fe.A)(n,kU),{value:k,handleValueChange:T,timezone:A}=eL({name:"YearCalendar",timezone:S,value:o,defaultValue:s,onChange:f,valueManager:OO}),E=qO(A),I=Ge(),R=zO(),P=l.useMemo((()=>OO.getInitialReferenceValue({value:k,utils:R,props:n,timezone:A,referenceDate:a,granularity:pO.year})),[]),j=n,N=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},_U,t)})(j),O=l.useMemo((()=>R.getYear(E)),[R,E]),D=l.useMemo((()=>null!=k?R.getYear(k):v?null:R.getYear(P)),[k,R,v,P]),[M,L]=l.useState((()=>D||O)),[F,U]=(0,QM.A)({name:"YearCalendar",state:"hasFocus",controlled:b,default:null!=r&&r}),$=(0,tI.A)((e=>{U(e),w&&w(e)})),V=l.useCallback((e=>{if(d&&R.isBeforeYear(e,E))return!0;if(u&&R.isAfterYear(e,E))return!0;if(p&&R.isBeforeYear(e,p))return!0;if(h&&R.isAfterYear(e,h))return!0;if(!g)return!1;const t=R.startOfYear(e);return g(t)}),[u,d,h,p,E,g,R]),B=(0,tI.A)(((e,t)=>{if(m)return;const n=R.setYear(null!=k?k:P,t);T(n)})),z=(0,tI.A)((e=>{V(R.setYear(null!=k?k:P,e))||(L(e),$(!0),null==y||y(e))}));l.useEffect((()=>{L((e=>null!==D&&e!==D?D:e))}),[D]);const W=(0,tI.A)(((e,t)=>{switch(e.key){case"ArrowUp":z(t-x),e.preventDefault();break;case"ArrowDown":z(t+x),e.preventDefault();break;case"ArrowLeft":z(t+("ltr"===I.direction?-1:1)),e.preventDefault();break;case"ArrowRight":z(t+("ltr"===I.direction?1:-1)),e.preventDefault()}})),H=(0,tI.A)(((e,t)=>{z(t)})),q=(0,tI.A)(((e,t)=>{M===t&&$(!1)})),G=l.useRef(null),K=(0,vT.A)(t,G);return l.useEffect((()=>{if(r||null===G.current)return;const e=G.current.querySelector('[tabindex="0"]');if(!e)return;const t=e.offsetHeight,n=e.offsetTop,i=G.current.clientHeight,o=G.current.scrollTop,s=n+t;t>i||n<o||(G.current.scrollTop=s-i/2-t/2)}),[r]),(0,Ke.jsx)(TU,(0,Le.A)({ref:K,className:(0,Ue.A)(N.root,i),ownerState:j,role:"radiogroup","aria-labelledby":C},_,{children:R.getYearRange(p,h).map((e=>{const t=R.getYear(e),n=t===D,r=c||V(e);return(0,Ke.jsx)(CU,{selected:n,value:t,onClick:B,onKeyDown:W,autoFocus:F&&t===M,disabled:r,tabIndex:t===M?0:-1,onFocus:H,onBlur:q,"aria-current":O===t?"date":void 0,yearsPerRow:x,children:R.format(e,"year")},R.format(e,"year"))}))}))}));function EU(e){return(0,Qk.Ay)("MuiPickersArrowSwitcher",e)}(0,Ze.A)("MuiPickersArrowSwitcher",["root","spacer","button"]);const IU=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],RU=["ownerState"],PU=["ownerState"],jU=(0,Gk.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),NU=(0,Gk.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((e=>{let{theme:t}=e;return{width:t.spacing(3)}})),OU=(0,Gk.Ay)(EA,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})((e=>{let{ownerState:t}=e;return(0,Le.A)({},t.hidden&&{visibility:"hidden"})})),DU=l.forwardRef((function(e,t){var n,r,i,o;const s="rtl"===IE().direction,a=JN({props:e,name:"MuiPickersArrowSwitcher"}),{children:l,className:c,slots:u,slotProps:d,isNextDisabled:h,isNextHidden:p,onGoToNext:f,nextLabel:m,isPreviousDisabled:g,isPreviousHidden:v,onGoToPrevious:y,previousLabel:b}=a,w=(0,Fe.A)(a,IU),x=a,S=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],spacer:["spacer"],button:["button"]},EU,t)})(x),C={isDisabled:h,isHidden:p,goTo:f,label:m},_={isDisabled:g,isHidden:v,goTo:y,label:b},k=null!=(n=null==u?void 0:u.previousIconButton)?n:OU,T=aD({elementType:k,externalSlotProps:null==d?void 0:d.previousIconButton,additionalProps:{size:"medium",title:_.label,"aria-label":_.label,disabled:_.isDisabled,edge:"end",onClick:_.goTo},ownerState:(0,Le.A)({},x,{hidden:_.isHidden}),className:S.button}),A=null!=(r=null==u?void 0:u.nextIconButton)?r:OU,E=aD({elementType:A,externalSlotProps:null==d?void 0:d.nextIconButton,additionalProps:{size:"medium",title:C.label,"aria-label":C.label,disabled:C.isDisabled,edge:"start",onClick:C.goTo},ownerState:(0,Le.A)({},x,{hidden:C.isHidden}),className:S.button}),I=null!=(i=null==u?void 0:u.leftArrowIcon)?i:ZL,R=aD({elementType:I,externalSlotProps:null==d?void 0:d.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),P=(0,Fe.A)(R,RU),j=null!=(o=null==u?void 0:u.rightArrowIcon)?o:eF,N=aD({elementType:j,externalSlotProps:null==d?void 0:d.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),O=(0,Fe.A)(N,PU);return(0,Ke.jsxs)(jU,(0,Le.A)({ref:t,className:(0,Ue.A)(S.root,c),ownerState:x},w,{children:[(0,Ke.jsx)(k,(0,Le.A)({},T,{children:s?(0,Ke.jsx)(j,(0,Le.A)({},O)):(0,Ke.jsx)(I,(0,Le.A)({},P))})),l?(0,Ke.jsx)($T,{variant:"subtitle1",component:"span",children:l}):(0,Ke.jsx)(NU,{className:S.spacer,ownerState:x}),(0,Ke.jsx)(A,(0,Le.A)({},E,{children:s?(0,Ke.jsx)(I,(0,Le.A)({},P)):(0,Ke.jsx)(j,(0,Le.A)({},O))}))]}))}));const MU=e=>(0,Qk.Ay)("MuiPickersCalendarHeader",e),LU=(0,Ze.A)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),FU=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],UU=["ownerState"],$U=(0,Gk.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),VU=(0,Gk.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((e=>{let{theme:t}=e;return(0,Le.A)({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})})),BU=(0,Gk.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),zU=(0,Gk.Ay)(EA,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})((e=>{let{ownerState:t}=e;return(0,Le.A)({marginRight:"auto"},"year"===t.view&&{[`.${LU.switchViewIcon}`]:{transform:"rotate(180deg)"}})})),WU=(0,Gk.Ay)(XL,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})((e=>{let{theme:t}=e;return{willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"}})),HU=l.forwardRef((function(e,t){var n,r,i,o;const s=HO(),a=zO(),c=JN({props:e,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:d,components:h,currentMonth:p,disabled:f,disableFuture:m,disablePast:g,maxDate:v,minDate:y,onMonthChange:b,onViewChange:w,view:x,reduceAnimations:S,views:C,labelId:_,className:k,timezone:T}=c,A=(0,Fe.A)(c,FU),E=c,I=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},MU,t)})(c),R=null!=(n=null!=(r=null==u?void 0:u.switchViewButton)?r:null==h?void 0:h.SwitchViewButton)?n:zU,P=aD({elementType:R,externalSlotProps:null==d?void 0:d.switchViewButton,additionalProps:{size:"small","aria-label":s.calendarViewSwitchingButtonAriaLabel(x)},ownerState:E,className:I.switchViewButton}),j=null!=(i=null!=(o=null==u?void 0:u.switchViewIcon)?o:null==h?void 0:h.SwitchViewIcon)?i:WU,N=aD({elementType:j,externalSlotProps:null==d?void 0:d.switchViewIcon,ownerState:void 0,className:I.switchViewIcon}),O=(0,Fe.A)(N,UU),D=function(e,t){let{disableFuture:n,maxDate:r,timezone:i}=t;const o=zO();return l.useMemo((()=>{const t=o.dateWithTimezone(void 0,i),s=o.startOfMonth(n&&o.isBefore(t,r)?t:r);return!o.isAfter(s,e)}),[n,r,e,o,i])}(p,{disableFuture:m,maxDate:v,timezone:T}),M=function(e,t){let{disablePast:n,minDate:r,timezone:i}=t;const o=zO();return l.useMemo((()=>{const t=o.dateWithTimezone(void 0,i),s=o.startOfMonth(n&&o.isAfter(t,r)?t:r);return!o.isBefore(s,e)}),[n,r,e,o,i])}(p,{disablePast:g,minDate:y,timezone:T});return 1===C.length&&"year"===C[0]?null:(0,Ke.jsxs)($U,(0,Le.A)({},A,{ownerState:E,className:(0,Ue.A)(k,I.root),ref:t,children:[(0,Ke.jsxs)(VU,{role:"presentation",onClick:()=>{if(1!==C.length&&w&&!f)if(2===C.length)w(C.find((e=>e!==x))||C[0]);else{const e=0!==C.indexOf(x)?0:1;w(C[e])}},ownerState:E,"aria-live":"polite",className:I.labelContainer,children:[(0,Ke.jsx)(_F,{reduceAnimations:S,transKey:a.format(p,"monthAndYear"),children:(0,Ke.jsx)(BU,{id:_,ownerState:E,className:I.label,children:a.format(p,"monthAndYear")})}),C.length>1&&!f&&(0,Ke.jsx)(R,(0,Le.A)({},P,{children:(0,Ke.jsx)(j,(0,Le.A)({},O))}))]}),(0,Ke.jsx)(YE,{in:"day"===x,children:(0,Ke.jsx)(DU,{slots:u,slotProps:d,onGoToPrevious:()=>b(a.addMonths(p,-1),"right"),isPreviousDisabled:M,previousLabel:s.previousMonth,onGoToNext:()=>b(a.addMonths(p,1),"left"),isNextDisabled:D,nextLabel:s.nextMonth})})]}))})),qU=(0,Gk.Ay)("div")({overflow:"hidden",width:VL,maxHeight:334,display:"flex",flexDirection:"column",margin:"0 auto"}),GU=e=>(0,Qk.Ay)("MuiDateCalendar",e),KU=((0,Ze.A)("MuiDateCalendar",["root","viewTransitionContainer"]),["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"]);const YU=(0,Gk.Ay)(qU,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:334}),JU=(0,Gk.Ay)(_F,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),QU=l.forwardRef((function(e,t){var n,r,i;const o=zO(),s=(0,MR.A)(),a=function(e,t){var n,r,i,o,s,a,l;const c=zO(),u=WO(),d=HM(),h=JN({props:e,name:t});return(0,Le.A)({},h,{loading:null!=(n=h.loading)&&n,disablePast:null!=(r=h.disablePast)&&r,disableFuture:null!=(i=h.disableFuture)&&i,openTo:null!=(o=h.openTo)?o:"day",views:null!=(s=h.views)?s:["year","day"],reduceAnimations:null!=(a=h.reduceAnimations)?a:d,renderLoading:null!=(l=h.renderLoading)?l:()=>(0,Ke.jsx)("span",{children:"..."}),minDate:iO(c,h.minDate,u.minDate),maxDate:iO(c,h.maxDate,u.maxDate)})}(e,"MuiDateCalendar"),{autoFocus:c,onViewChange:u,value:d,defaultValue:h,referenceDate:p,disableFuture:f,disablePast:m,defaultCalendarMonth:g,onChange:v,onYearChange:y,onMonthChange:b,reduceAnimations:w,shouldDisableDate:x,shouldDisableMonth:S,shouldDisableYear:C,view:_,views:k,openTo:T,className:A,disabled:E,readOnly:I,minDate:R,maxDate:P,disableHighlightToday:j,focusedView:N,onFocusedViewChange:O,showDaysOutsideCurrentMonth:D,fixedWeekNumber:M,dayOfWeekFormatter:L,components:F,componentsProps:U,slots:$,slotProps:V,loading:B,renderLoading:z,displayWeekNumber:W,yearsPerRow:H,monthsPerRow:q,timezone:G}=a,K=(0,Fe.A)(a,KU),{value:Y,handleValueChange:J,timezone:Q}=eL({name:"DateCalendar",timezone:G,value:d,defaultValue:h,onChange:v,valueManager:OO}),{view:X,setView:Z,focusedView:ee,setFocusedView:te,goToNextView:ne,setValueAndGoToNextView:re}=nL({view:_,views:k,openTo:T,onChange:J,onViewChange:u,autoFocus:c,focusedView:N,onFocusedViewChange:O}),{referenceDate:ie,calendarState:oe,changeFocusedDay:se,changeMonth:ae,handleChangeMonth:le,isDateDisabled:ce,onMonthSwitchingAnimationEnd:ue}=xF({value:Y,defaultCalendarMonth:g,referenceDate:p,reduceAnimations:w,onMonthChange:b,minDate:R,maxDate:P,shouldDisableDate:x,disablePast:m,disableFuture:f,timezone:Q}),de=E&&Y||R,he=E&&Y||P,pe=`${s}-grid-label`,fe=null!==ee,me=null!=(n=null!=(r=null==$?void 0:$.calendarHeader)?r:null==F?void 0:F.CalendarHeader)?n:HU,ge=aD({elementType:me,externalSlotProps:null!=(i=null==V?void 0:V.calendarHeader)?i:null==U?void 0:U.calendarHeader,additionalProps:{views:k,view:X,currentMonth:oe.currentMonth,onViewChange:Z,onMonthChange:(e,t)=>le({newMonth:e,direction:t}),minDate:de,maxDate:he,disabled:E,disablePast:m,disableFuture:f,reduceAnimations:w,timezone:Q,labelId:pe,slots:$,slotProps:V},ownerState:a}),ve=(0,tI.A)((e=>{const t=o.startOfMonth(e),n=o.endOfMonth(e),r=ce(e)?rO({utils:o,date:e,minDate:o.isBefore(R,t)?t:R,maxDate:o.isAfter(P,n)?n:P,disablePast:m,disableFuture:f,isDateDisabled:ce,timezone:Q}):e;r?(re(r,"finish"),null==b||b(t)):(ne(),ae(t)),se(r,!0)})),ye=(0,tI.A)((e=>{const t=o.startOfYear(e),n=o.endOfYear(e),r=ce(e)?rO({utils:o,date:e,minDate:o.isBefore(R,t)?t:R,maxDate:o.isAfter(P,n)?n:P,disablePast:m,disableFuture:f,isDateDisabled:ce,timezone:Q}):e;r?(re(r,"finish"),null==y||y(r)):(ne(),ae(t)),se(r,!0)})),be=(0,tI.A)((e=>J(e?nO(o,e,null!=Y?Y:ie):e,"finish",X)));l.useEffect((()=>{null!=Y&&o.isValid(Y)&&ae(Y)}),[Y]);const we=a,xe=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},GU,t)})(we),Se={disablePast:m,disableFuture:f,maxDate:P,minDate:R},Ce={disableHighlightToday:j,readOnly:I,disabled:E,timezone:Q,gridLabelId:pe},_e=l.useRef(X);l.useEffect((()=>{_e.current!==X&&(ee===_e.current&&te(X,!0),_e.current=X)}),[ee,te,X]);const ke=l.useMemo((()=>[Y]),[Y]);return(0,Ke.jsxs)(YU,(0,Le.A)({ref:t,className:(0,Ue.A)(xe.root,A),ownerState:we},K,{children:[(0,Ke.jsx)(me,(0,Le.A)({},ge)),(0,Ke.jsx)(JU,{reduceAnimations:w,className:xe.viewTransitionContainer,transKey:X,ownerState:we,children:(0,Ke.jsxs)("div",{children:["year"===X&&(0,Ke.jsx)(AU,(0,Le.A)({},Se,Ce,{value:Y,onChange:ye,shouldDisableYear:C,hasFocus:fe,onFocusedViewChange:e=>te("year",e),yearsPerRow:H,referenceDate:ie})),"month"===X&&(0,Ke.jsx)(vU,(0,Le.A)({},Se,Ce,{hasFocus:fe,className:A,value:Y,onChange:ve,shouldDisableMonth:S,onFocusedViewChange:e=>te("month",e),monthsPerRow:q,referenceDate:ie})),"day"===X&&(0,Ke.jsx)(aU,(0,Le.A)({},oe,Se,Ce,{onMonthSwitchingAnimationEnd:ue,onFocusedDayChange:se,reduceAnimations:w,selectedDays:ke,onSelectedDaysChange:be,shouldDisableDate:x,shouldDisableMonth:S,shouldDisableYear:C,hasFocus:fe,onFocusedViewChange:e=>te("day",e),showDaysOutsideCurrentMonth:D,fixedWeekNumber:M,dayOfWeekFormatter:L,displayWeekNumber:W,components:F,componentsProps:U,slots:$,slotProps:V,loading:B,renderLoading:z}))]})})]}))})),XU=e=>{let{view:t,onViewChange:n,views:r,focusedView:i,onFocusedViewChange:o,value:s,defaultValue:a,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:S,yearsPerRow:C,defaultCalendarMonth:_,components:k,componentsProps:T,slots:A,slotProps:E,loading:I,renderLoading:R,disableHighlightToday:P,readOnly:j,disabled:N,showDaysOutsideCurrentMonth:O,dayOfWeekFormatter:D,sx:M,autoFocus:L,fixedWeekNumber:F,displayWeekNumber:U,timezone:$}=e;return(0,Ke.jsx)(QU,{view:t,onViewChange:n,views:r.filter(lO),focusedView:i&&lO(i)?i:null,onFocusedViewChange:o,value:s,defaultValue:a,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:x,onYearChange:S,yearsPerRow:C,defaultCalendarMonth:_,components:k,componentsProps:T,slots:A,slotProps:E,loading:I,renderLoading:R,disableHighlightToday:P,readOnly:j,disabled:N,showDaysOutsideCurrentMonth:O,dayOfWeekFormatter:D,sx:M,autoFocus:L,fixedWeekNumber:F,displayWeekNumber:U,timezone:$})},ZU=l.forwardRef((function(e,t){var n,r,i,o;const s=HO(),a=zO(),c=rD(e,"MuiDesktopDatePicker"),u=(0,Le.A)({day:XU,month:XU,year:XU},c.viewRenderers),d=(0,Le.A)({},c,{viewRenderers:u,format:cO(a,c,!1),yearsPerRow:null!=(n=c.yearsPerRow)?n:4,slots:(0,Le.A)({openPickerIcon:tF,field:bF},c.slots),slotProps:(0,Le.A)({},c.slotProps,{field:e=>{var n;return(0,Le.A)({},ZN(null==(n=c.slotProps)?void 0:n.field,e),hF(c),{ref:t})},toolbar:(0,Le.A)({hidden:!0},null==(r=c.slotProps)?void 0:r.toolbar)})}),{renderPicker:h}=(e=>{var t,n,r,i,o;let{props:s,getOpenDialogAriaText:a}=e,c=(0,Fe.A)(e,YL);const{slots:u,slotProps:d,className:h,sx:p,format:f,formatDensity:m,timezone:g,name:v,label:y,inputRef:b,readOnly:w,disabled:x,autoFocus:S,localeText:C,reduceAnimations:_}=s,k=zO(),T=l.useRef(null),A=l.useRef(null),E=(0,MR.A)(),I=null!=(t=null==d||null==(n=d.toolbar)?void 0:n.hidden)&&t,{open:R,actions:P,hasUIView:j,layoutProps:N,renderCurrentView:O,shouldRestoreFocus:D,fieldProps:M}=aL((0,Le.A)({},c,{props:s,inputRef:T,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),L=null!=(r=u.inputAdornment)?r:HN,F=aD({elementType:L,externalSlotProps:null==d?void 0:d.inputAdornment,additionalProps:{position:"end"},ownerState:s}),U=(0,Fe.A)(F,JL),$=null!=(i=u.openPickerButton)?i:EA,V=aD({elementType:$,externalSlotProps:null==d?void 0:d.openPickerButton,additionalProps:{disabled:x||w,onClick:R?P.onClose:P.onOpen,"aria-label":a(M.value,k),edge:U.position},ownerState:s}),B=(0,Fe.A)(V,QL),z=u.openPickerIcon,W=u.field,H=aD({elementType:W,externalSlotProps:null==d?void 0:d.field,additionalProps:(0,Le.A)({},M,I&&{id:E},{readOnly:w,disabled:x,className:h,sx:p,format:f,formatDensity:m,timezone:g,label:y,name:v,autoFocus:S&&!s.open,focused:!!R||void 0}),ownerState:s});j&&(H.InputProps=(0,Le.A)({},H.InputProps,{ref:A},!s.disableOpenPicker&&{[`${U.position}Adornment`]:(0,Ke.jsx)(L,(0,Le.A)({},U,{children:(0,Ke.jsx)($,(0,Le.A)({},B,{children:(0,Ke.jsx)(z,(0,Le.A)({},null==d?void 0:d.openPickerIcon))}))}))}));const q=(0,Le.A)({textField:u.textField,clearIcon:u.clearIcon,clearButton:u.clearButton},H.slots),G=null!=(o=u.layout)?o:KL,K=(0,vT.A)(T,H.inputRef,b);let Y=E;I&&(Y=y?`${E}-label`:void 0);const J=(0,Le.A)({},d,{toolbar:(0,Le.A)({},null==d?void 0:d.toolbar,{titleId:E}),popper:(0,Le.A)({"aria-labelledby":Y},null==d?void 0:d.popper)});return{renderPicker:()=>(0,Ke.jsxs)(FO,{localeText:C,children:[(0,Ke.jsx)(W,(0,Le.A)({},H,{slots:q,slotProps:J,inputRef:K})),(0,Ke.jsx)(JM,(0,Le.A)({role:"dialog",placement:"bottom-start",anchorEl:A.current},P,{open:R,slots:u,slotProps:J,shouldRestoreFocus:D,reduceAnimations:_,children:(0,Ke.jsx)(G,(0,Le.A)({},N,null==J?void 0:J.layout,{slots:u,slotProps:J,children:O()}))}))]})}})({props:d,valueManager:OO,valueType:"date",getOpenDialogAriaText:null!=(i=null==(o=d.localeText)?void 0:o.openDatePickerDialogue)?i:s.openDatePickerDialogue,validator:iD});return h()}));function e$(e){return(0,Qk.Ay)("MuiDialogContent",e)}ZU.propTypes={autoFocus:XN().bool,className:XN().string,closeOnSelect:XN().bool,components:XN().object,componentsProps:XN().object,dayOfWeekFormatter:XN().func,defaultCalendarMonth:XN().any,defaultValue:XN().any,disabled:XN().bool,disableFuture:XN().bool,disableHighlightToday:XN().bool,disableOpenPicker:XN().bool,disablePast:XN().bool,displayWeekNumber:XN().bool,fixedWeekNumber:XN().number,format:XN().string,formatDensity:XN().oneOf(["dense","spacious"]),inputRef:eO,label:XN().node,loading:XN().bool,localeText:XN().object,maxDate:XN().any,minDate:XN().any,monthsPerRow:XN().oneOf([3,4]),name:XN().string,onAccept:XN().func,onChange:XN().func,onClose:XN().func,onError:XN().func,onMonthChange:XN().func,onOpen:XN().func,onSelectedSectionsChange:XN().func,onViewChange:XN().func,onYearChange:XN().func,open:XN().bool,openTo:XN().oneOf(["day","month","year"]),orientation:XN().oneOf(["landscape","portrait"]),readOnly:XN().bool,reduceAnimations:XN().bool,referenceDate:XN().any,renderLoading:XN().func,selectedSections:XN().oneOfType([XN().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),XN().number,XN().shape({endIndex:XN().number.isRequired,startIndex:XN().number.isRequired})]),shouldDisableDate:XN().func,shouldDisableMonth:XN().func,shouldDisableYear:XN().func,showDaysOutsideCurrentMonth:XN().bool,slotProps:XN().object,slots:XN().object,sx:XN().oneOfType([XN().arrayOf(XN().oneOfType([XN().func,XN().object,XN().bool])),XN().func,XN().object]),timezone:XN().string,value:XN().any,view:XN().oneOf(["day","month","year"]),viewRenderers:XN().shape({day:XN().func,month:XN().func,year:XN().func}),views:XN().arrayOf(XN().oneOf(["day","month","year"]).isRequired),yearsPerRow:XN().oneOf([3,4])};(0,Ze.A)("MuiDialogContent",["root","dividers"]);function t$(e){return(0,Qk.Ay)("MuiDialogTitle",e)}const n$=(0,Ze.A)("MuiDialogTitle",["root"]),r$=["className","dividers"],i$=(0,Gk.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${n$.root} + &`]:{paddingTop:0}})})),o$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,Fe.A)(n,r$),s=(0,Le.A)({},n,{dividers:i}),a=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,qk.A)(r,e$,t)})(s);return(0,Ke.jsx)(i$,(0,Le.A)({className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},o))})),s$=o$;function a$(e){return(0,Qk.Ay)("MuiDialog",e)}const l$=(0,Ze.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const c$=l.createContext({}),u$=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],d$=(0,Gk.Ay)(eI,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),h$=(0,Gk.Ay)(gI,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),p$=(0,Gk.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,Kk.A)(n.scroll)}`]]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),f$=(0,Gk.Ay)(nT,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,Kk.A)(n.scroll)}`],t[`paperWidth${(0,Kk.A)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${l$.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`,[`&.${l$.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${l$.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),m$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDialog"}),r=IE(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":s,BackdropComponent:a,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:v,onClose:y,open:b,PaperComponent:w=nT,PaperProps:x={},scroll:S="paper",TransitionComponent:C=YE,transitionDuration:_=i,TransitionProps:k}=n,T=(0,Fe.A)(n,u$),A=(0,Le.A)({},n,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:S}),E=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container",`scroll${(0,Kk.A)(n)}`],paper:["paper",`paperScroll${(0,Kk.A)(n)}`,`paperWidth${(0,Kk.A)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,qk.A)(s,a$,t)})(A),I=l.useRef(),R=(0,MR.A)(s),P=l.useMemo((()=>({titleId:R})),[R]);return(0,Ke.jsx)(h$,(0,Le.A)({className:(0,Ue.A)(E.root,d),closeAfterTransition:!0,components:{Backdrop:d$},componentsProps:{backdrop:(0,Le.A)({transitionDuration:_,as:a},c)},disableEscapeKeyDown:h,onClose:y,open:b,ref:t,onClick:e=>{v&&v(e),I.current&&(I.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:A},T,{children:(0,Ke.jsx)(C,(0,Le.A)({appear:!0,in:b,timeout:_,role:"presentation"},k,{children:(0,Ke.jsx)(p$,{className:(0,Ue.A)(E.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:A,children:(0,Ke.jsx)(f$,(0,Le.A)({as:w,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":R},x,{className:(0,Ue.A)(E.paper,x.className),ownerState:A,children:(0,Ke.jsx)(c$.Provider,{value:P,children:u})}))})}))}))})),g$=m$,v$=(0,Gk.Ay)(g$)({[`& .${l$.container}`]:{outline:0},[`& .${l$.paper}`]:{outline:0,minWidth:VL}}),y$=(0,Gk.Ay)(s$)({"&:first-of-type":{padding:0}});function b$(e){var t,n;const{children:r,onDismiss:i,open:o,slots:s,slotProps:a}=e,l=null!=(t=null==s?void 0:s.dialog)?t:v$,c=null!=(n=null==s?void 0:s.mobileTransition)?n:YE;return(0,Ke.jsx)(l,(0,Le.A)({open:o,onClose:i},null==a?void 0:a.dialog,{TransitionComponent:c,TransitionProps:null==a?void 0:a.mobileTransition,PaperComponent:null==s?void 0:s.mobilePaper,PaperProps:null==a?void 0:a.mobilePaper,children:(0,Ke.jsx)(y$,{children:r})}))}const w$=["props","getOpenDialogAriaText"],x$=l.forwardRef((function(e,t){var n,r,i;const o=HO(),s=zO(),a=rD(e,"MuiMobileDatePicker"),c=(0,Le.A)({day:XU,month:XU,year:XU},a.viewRenderers),u=(0,Le.A)({},a,{viewRenderers:c,format:cO(s,a,!1),slots:(0,Le.A)({field:bF},a.slots),slotProps:(0,Le.A)({},a.slotProps,{field:e=>{var n;return(0,Le.A)({},ZN(null==(n=a.slotProps)?void 0:n.field,e),hF(a),{ref:t})},toolbar:(0,Le.A)({hidden:!1},null==(n=a.slotProps)?void 0:n.toolbar)})}),{renderPicker:d}=(e=>{var t,n,r;let{props:i,getOpenDialogAriaText:o}=e,s=(0,Fe.A)(e,w$);const{slots:a,slotProps:c,className:u,sx:d,format:h,formatDensity:p,timezone:f,name:m,label:g,inputRef:v,readOnly:y,disabled:b,localeText:w}=i,x=zO(),S=l.useRef(null),C=(0,MR.A)(),_=null!=(t=null==c||null==(n=c.toolbar)?void 0:n.hidden)&&t,{open:k,actions:T,layoutProps:A,renderCurrentView:E,fieldProps:I}=aL((0,Le.A)({},s,{props:i,inputRef:S,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),R=a.field,P=aD({elementType:R,externalSlotProps:null==c?void 0:c.field,additionalProps:(0,Le.A)({},I,_&&{id:C},!(b||y)&&{onClick:T.onOpen,onKeyDown:(j=T.onOpen,e=>{"Enter"!==e.key&&" "!==e.key||(j(e),e.preventDefault(),e.stopPropagation()),N&&N(e)})},{readOnly:null==y||y,disabled:b,className:u,sx:d,format:h,formatDensity:p,timezone:f,label:g,name:m}),ownerState:i});var j,N;P.inputProps=(0,Le.A)({},P.inputProps,{"aria-label":o(I.value,x)});const O=(0,Le.A)({textField:a.textField},P.slots),D=null!=(r=a.layout)?r:KL,M=(0,vT.A)(S,P.inputRef,v);let L=C;_&&(L=g?`${C}-label`:void 0);const F=(0,Le.A)({},c,{toolbar:(0,Le.A)({},null==c?void 0:c.toolbar,{titleId:C}),mobilePaper:(0,Le.A)({"aria-labelledby":L},null==c?void 0:c.mobilePaper)});return{renderPicker:()=>(0,Ke.jsxs)(FO,{localeText:w,children:[(0,Ke.jsx)(R,(0,Le.A)({},P,{slots:O,slotProps:F,inputRef:M})),(0,Ke.jsx)(b$,(0,Le.A)({},T,{open:k,slots:a,slotProps:F,children:(0,Ke.jsx)(D,(0,Le.A)({},A,null==F?void 0:F.layout,{slots:a,slotProps:F,children:E()}))}))]})}})({props:u,valueManager:OO,valueType:"date",getOpenDialogAriaText:null!=(r=null==(i=u.localeText)?void 0:i.openDatePickerDialogue)?r:o.openDatePickerDialogue,validator:iD});return d()}));x$.propTypes={autoFocus:XN().bool,className:XN().string,closeOnSelect:XN().bool,components:XN().object,componentsProps:XN().object,dayOfWeekFormatter:XN().func,defaultCalendarMonth:XN().any,defaultValue:XN().any,disabled:XN().bool,disableFuture:XN().bool,disableHighlightToday:XN().bool,disableOpenPicker:XN().bool,disablePast:XN().bool,displayWeekNumber:XN().bool,fixedWeekNumber:XN().number,format:XN().string,formatDensity:XN().oneOf(["dense","spacious"]),inputRef:eO,label:XN().node,loading:XN().bool,localeText:XN().object,maxDate:XN().any,minDate:XN().any,monthsPerRow:XN().oneOf([3,4]),name:XN().string,onAccept:XN().func,onChange:XN().func,onClose:XN().func,onError:XN().func,onMonthChange:XN().func,onOpen:XN().func,onSelectedSectionsChange:XN().func,onViewChange:XN().func,onYearChange:XN().func,open:XN().bool,openTo:XN().oneOf(["day","month","year"]),orientation:XN().oneOf(["landscape","portrait"]),readOnly:XN().bool,reduceAnimations:XN().bool,referenceDate:XN().any,renderLoading:XN().func,selectedSections:XN().oneOfType([XN().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),XN().number,XN().shape({endIndex:XN().number.isRequired,startIndex:XN().number.isRequired})]),shouldDisableDate:XN().func,shouldDisableMonth:XN().func,shouldDisableYear:XN().func,showDaysOutsideCurrentMonth:XN().bool,slotProps:XN().object,slots:XN().object,sx:XN().oneOfType([XN().arrayOf(XN().oneOfType([XN().func,XN().object,XN().bool])),XN().func,XN().object]),timezone:XN().string,value:XN().any,view:XN().oneOf(["day","month","year"]),viewRenderers:XN().shape({day:XN().func,month:XN().func,year:XN().func}),views:XN().arrayOf(XN().oneOf(["day","month","year"]).isRequired),yearsPerRow:XN().oneOf([3,4])};const S$=["desktopModeMediaQuery"],C$=l.forwardRef((function(e,t){const n=JN({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:r=$M}=n,i=(0,Fe.A)(n,S$);return YN(r,{defaultMatches:!0})?(0,Ke.jsx)(ZU,(0,Le.A)({ref:t},i)):(0,Ke.jsx)(x$,(0,Le.A)({ref:t},i))})),_$=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),k$=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),T$=()=>{const[e,t]=(0,l.useState)({username:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",name:""}),[n,r]=(0,l.useState)(null),[i,o]=(0,l.useState)({}),[s,a]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),p=ie(),{register:f}=_k(),m=e=>{const{name:n,value:r}=e.target;t((e=>({...e,[n]:r}))),i[n]&&o((e=>({...e,[n]:void 0})))};return s?(0,Ke.jsx)(DR,{maxWidth:"sm",children:(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ke.jsx)(LN,{})})}):(0,Ke.jsx)(DR,{maxWidth:"sm",children:(0,Ke.jsx)(rt,{sx:{mt:8},children:(0,Ke.jsxs)(nT,{elevation:0,sx:{p:4},children:[(0,Ke.jsx)($T,{variant:"h4",gutterBottom:!0,align:"center",children:"Create Account"}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Join SideEye and start sharing your thoughts with the community"}),d&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:d}),(0,Ke.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(null),(()=>{const t={};if(e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",e.password){const n=e.password;n.length<8?t.password="Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?/[!@#$%^&*(),.?":{}|<>]/.test(n)||(t.password="Password must contain at least one special character"):t.password="Password must contain at least one number":t.password="Password must contain at least one lowercase letter":t.password="Password must contain at least one uppercase letter"}else t.password="Password is required";if(e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),e.username?e.username.length<3?t.username="Username must be at least 3 characters long":/^[a-zA-Z0-9_-]+$/.test(e.username)||(t.username="Username can only contain letters, numbers, underscores, and hyphens"):t.username="Username is required",e.name?e.name.length<2?t.name="Name must be at least 2 characters long":/^[a-zA-Z\s-']+$/.test(e.name)||(t.name="Name can only contain letters, spaces, hyphens, and apostrophes"):t.name="Name is required",n){const e=new Date;let r=e.getFullYear()-n.getFullYear();const i=e.getMonth()-n.getMonth();(i<0||0===i&&e.getDate()<n.getDate())&&r--,r<16?t.dateOfBirth="You must be at least 16 years old":r>120&&(t.dateOfBirth="Please enter a valid date of birth")}else t.dateOfBirth="Date of birth is required";return o(t),0===Object.keys(t).length})())try{if(a(!0),!n||isNaN(n.getTime()))throw new Error("Invalid date of birth");await f(e.email,e.password,e.username,wl.fromDate(n)),p("/verify-email",{replace:!0})}catch(d){console.error("Registration error:",d),"auth/email-already-in-use"===d.code?h("Email is already in use"):"auth/weak-password"===d.code?h("Password is too weak"):"Invalid date of birth"===d.message?h("Please enter a valid date of birth"):h(d.message||"Error creating account. Please try again.")}finally{a(!1)}},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Full Name",name:"name",value:e.name,onChange:m,margin:"normal",required:!0,error:!!i.name,helperText:i.name}),(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:m,margin:"normal",required:!0,error:!!i.username,helperText:i.username}),(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:m,margin:"normal",required:!0,error:!!i.email,helperText:i.email}),(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:e.password,onChange:m,margin:"normal",required:!0,error:!!i.password,helperText:i.password,InputProps:{endAdornment:(0,Ke.jsx)(HN,{position:"end",children:(0,Ke.jsx)(EA,{onClick:()=>u(!c),edge:"end",children:c?(0,Ke.jsx)(_$,{}):(0,Ke.jsx)(k$,{})})})}}),(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:c?"text":"password",value:e.confirmPassword,onChange:m,margin:"normal",required:!0,error:!!i.confirmPassword,helperText:i.confirmPassword}),(0,Ke.jsx)(C$,{label:"Date of Birth",value:n,onChange:e=>{r(e),e&&!isNaN(e.getTime())?t((t=>({...t,dateOfBirth:e.toISOString()}))):t((e=>({...e,dateOfBirth:""}))),i.dateOfBirth&&o((e=>({...e,dateOfBirth:void 0})))},slotProps:{textField:{margin:"normal",required:!0,fullWidth:!0,error:!!i.dateOfBirth,helperText:i.dateOfBirth}},disableFuture:!0,maxDate:new Date}),(0,Ke.jsx)(XA,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Create Account"}),(0,Ke.jsxs)($T,{variant:"body2",sx:{mt:2},align:"center",children:["Already have an account? ",(0,Ke.jsx)(Oe,{to:"/login",children:"Log in"})]})]})]})})})},A$=()=>{const{resetPassword:e}=_k(),[t,n]=(ie(),(0,l.useState)("")),[r,i]=(0,l.useState)(!1),[o,s]=(0,l.useState)(null),[a,c]=(0,l.useState)(null);return(0,Ke.jsx)(DR,{maxWidth:"xs",children:(0,Ke.jsxs)(nT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Password"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your email address and we'll send you a link to reset your password."}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async n=>{if(n.preventDefault(),i(!0),s(null),c(null),!t)return s("Email is required."),void i(!1);try{await e(t),c("Password reset email sent. Please check your inbox.")}catch(r){console.error("Error sending password reset email:",r),s("Failed to send reset email. Please check the address and try again.")}finally{i(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:t,onChange:e=>n(e.target.value),autoFocus:!0}),o&&(0,Ke.jsx)(eN,{severity:"error",sx:{mt:2},children:o}),a&&(0,Ke.jsx)(eN,{severity:"success",sx:{mt:2},children:a}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,Ke.jsx)(LN,{size:24}):"Send Reset Link"}),(0,Ke.jsx)(rt,{textAlign:"center",children:(0,Ke.jsx)(SN,{component:Oe,to:"/login",variant:"body2",children:"Back to Login"})})]})]})})};function E$(e){return(0,Qk.Ay)("MuiCard",e)}(0,Ze.A)("MuiCard",["root"]);const I$=["className","raised"],R$=(0,Gk.Ay)(nT,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),P$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,Fe.A)(n,I$),s=(0,Le.A)({},n,{raised:i}),a=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},E$,t)})(s);return(0,Ke.jsx)(R$,(0,Le.A)({className:(0,Ue.A)(a.root,r),elevation:i?8:void 0,ref:t,ownerState:s},o))})),j$=P$;function N$(e){return(0,Qk.Ay)("MuiCardMedia",e)}(0,Ze.A)("MuiCardMedia",["root","media","img"]);const O$=["children","className","component","image","src","style"],D$=(0,Gk.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),M$=["video","audio","picture","iframe","img"],L$=["picture","img"],F$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:s,src:a,style:l}=n,c=(0,Fe.A)(n,O$),u=-1!==M$.indexOf(o),d=!u&&s?(0,Le.A)({backgroundImage:`url("${s}")`},l):l,h=(0,Le.A)({},n,{component:o,isMediaComponent:u,isImageComponent:-1!==L$.indexOf(o)}),p=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,qk.A)(i,N$,t)})(h);return(0,Ke.jsx)(D$,(0,Le.A)({className:(0,Ue.A)(p.root,i),as:o,role:!u&&s?"img":void 0,ref:t,style:d,ownerState:h,src:u?s||a:void 0},c,{children:r}))})),U$=F$;function $$(e){return(0,Qk.Ay)("MuiCardContent",e)}(0,Ze.A)("MuiCardContent",["root"]);const V$=["className","component"],B$=(0,Gk.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),z$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,Fe.A)(n,V$),s=(0,Le.A)({},n,{component:i}),a=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},$$,t)})(s);return(0,Ke.jsx)(B$,(0,Le.A)({as:i,className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},o))})),W$=z$;function H$(e){return(0,Qk.Ay)("MuiCardActions",e)}(0,Ze.A)("MuiCardActions",["root","spacing"]);const q$=["disableSpacing","className"],G$=(0,Gk.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),K$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,o=(0,Fe.A)(n,q$),s=(0,Le.A)({},n,{disableSpacing:r}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,qk.A)(r,H$,t)})(s);return(0,Ke.jsx)(G$,(0,Le.A)({className:(0,Ue.A)(a.root,i),ownerState:s,ref:t},o))})),Y$=K$,J$=["className","id"],Q$=(0,Gk.Ay)($T,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),X$=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDialogTitle"}),{className:r,id:i}=n,o=(0,Fe.A)(n,J$),s=n,a=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},t$,t)})(s),{titleId:c=i}=l.useContext(c$);return(0,Ke.jsx)(Q$,(0,Le.A)({component:"h2",className:(0,Ue.A)(a.root,r),ownerState:s,ref:t,variant:"h6",id:null!=i?i:c},o))})),Z$=X$,eV=(0,fT.A)((0,Ke.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),tV=(0,fT.A)([(0,Ke.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,Ke.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),nV=(0,fT.A)((0,Ke.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),rV=(0,fT.A)((0,Ke.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),iV=(0,fT.A)((0,Ke.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove"),oV=(0,fT.A)((0,Ke.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),sV=(0,fT.A)((0,Ke.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),aV=(0,l.createContext)({db:null,loading:!1,error:null}),lV=()=>{const e=(0,l.useContext)(aV);if(void 0===e)throw new Error("useFirestore must be used within a FirestoreProvider");return null===e.db&&console.warn("useFirestore called before db was initialized or initialization failed"),e},cV=e=>{let{children:t}=e;const n={db:YC,loading:!1,error:null};return(0,Ke.jsx)(aV.Provider,{value:n,children:t})},uV=()=>(0,Ke.jsx)(DR,{maxWidth:"sm",sx:{mt:4,textAlign:"center"},children:(0,Ke.jsxs)(nT,{elevation:2,sx:{p:3},children:[(0,Ke.jsx)(eV,{sx:{fontSize:40,mb:2},color:"action"}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Account Deactivated"}),(0,Ke.jsx)($T,{color:"text.secondary",children:"This user's account is currently deactivated."})]})}),dV=()=>{YN(IE().breakpoints.down("sm"));const{currentUser:e,user:t,userProfile:n,loading:r,setUserProfile:i}=_k(),{db:o}=lV(),{userId:s}=oe(),[a,c]=(0,l.useState)(null),[u,d]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[f,m]=(0,l.useState)(""),[g,v]=(0,l.useState)(""),[y,b]=(0,l.useState)(!1),[w,x]=(0,l.useState)(!0),[S,C]=(0,l.useState)(null),[_,k]=(0,l.useState)([]),[T,A]=(0,l.useState)([]),[E,I]=(0,l.useState)(null),[R,P]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),[O,D]=(0,l.useState)(!1),[M,L]=(0,l.useState)(!1),[F,U]=(0,l.useState)([]),[$,V]=(0,l.useState)(!1),[B,z]=(0,l.useState)(""),[W,H]=(0,l.useState)(""),[q,G]=(0,l.useState)(""),[K,Y]=(0,l.useState)([]),[J,Q]=(0,l.useState)([]),[X,Z]=(0,l.useState)(!1),ee=ie(),te=a||(null===e||void 0===e?void 0:e.uid)||"";(0,l.useEffect)((()=>{c(s||((null===e||void 0===e?void 0:e.uid)||null))}),[s,null===e||void 0===e?void 0:e.uid]);const ne=(0,l.useCallback)((async()=>{if(o&&a)try{x(!0),C(null),Z(!1);const t=vg(o,"users",a),n=await Pv(t);if(!n.exists())return C("Profile not found"),void x(!1);const r=n.data();if(!1===r.isActive)return Z(!0),C(null),void x(!1);const i=r.isPrivate||!1,s=(null===e||void 0===e?void 0:e.uid)===a;if(P(i),d(r.username||""),p(r.name||""),v(r.bio||""),I(r.profilePic||null),s||!i)N(!0),C(null);else if(null!==e&&void 0!==e&&e.uid){const t=vg(o,`users/${a}/followers/${e.uid}`),n=(await Pv(t)).exists();N(n),n||C("This profile is private")}else N(!1),C("This profile is private");const[l,c]=await Promise.all([Nv(gg(o,`users/${a}/followers`)),Nv(gg(o,`users/${a}/following`))]);A(l.docs.map((e=>e.id))),k(c.docs.map((e=>e.id)));const[u,h]=await Promise.all([Nv(av(gg(o,"sideRooms"),cv("members","array-contains",a))),Nv(av(gg(o,"sideRooms"),cv("ownerId","==",a),cv("deleted","==",!1)))]);Y(u.docs.map((e=>({id:e.id,...e.data()})))),Q(h.docs.map((e=>({id:e.id,...e.data()}))))}catch(S){console.error("Error in fetchUserData:",S),C("Failed to load profile data")}finally{x(!1)}else x(!1)}),[o,a,e]);(0,l.useEffect)((()=>{ne()}),[ne]),(0,l.useEffect)((()=>{if(!o||!te)return;const e=Fv(gg(o,"users",te,"followers"),(e=>{const t=e.docs.map((e=>e.id));A(t)}));return()=>e()}),[o,te]),(0,l.useEffect)((()=>{if(!o||!te)return;const e=Fv(gg(o,"users",te,"following"),(e=>{const t=e.docs.map((e=>e.id));k(t)}));return()=>e()}),[o,te]),(0,l.useEffect)((()=>{if(!o||!e||!te)return;const t=Fv(vg(o,"users",e.uid,"following",te),(e=>{D(e.exists())}));return()=>t()}),[o,e,te]);const re=async()=>{if(e&&te&&o)try{if(x(!0),R){const t=vg(o,"users",te,"followRequests",e.uid);await Ov(t,{timestamp:Gv()}),L(!0),C_.success("Follow request sent")}else{const t=vg(o,"users",e.uid,"following",te),n=vg(o,"users",te,"followers",e.uid);await Ov(t,{timestamp:Gv()}),await Ov(n,{timestamp:Gv()}),D(!0),C_.success("Followed successfully")}}catch(S){console.error("Error handling follow:",S),C("Failed to process follow request"),C_.error("Failed to process follow request")}finally{x(!1)}else C("Database not initialized")},se=async()=>{if(e&&te&&o)try{x(!0);const t=vg(o,"users",e.uid,"following",te);await Mv(t);const n=vg(o,"users",te,"followers",e.uid);await Mv(n),D(!1),A((t=>t.filter((t=>t!==e.uid)))),k((e=>e.filter((e=>e!==te)))),C_.success("Unfollowed successfully")}catch(S){console.error("Error unfollowing user:",S),C("Failed to unfollow user"),C_.error("Failed to unfollow user")}finally{x(!1)}else C("Database not initialized")};return r||w?(0,Ke.jsx)(DR,{maxWidth:"lg",children:(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ke.jsx)(LN,{})})}):X?(0,Ke.jsx)(uV,{}):(0,Ke.jsxs)(DR,{maxWidth:"lg",sx:{mt:2,mb:4},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,Ke.jsx)(nT,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,alignItems:"center"},children:[(0,Ke.jsx)(rt,{sx:{position:"relative"},children:(0,Ke.jsx)(UA,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(null===e||void 0===e?void 0:e.uid)===a&&(0,Ke.jsxs)(EA,{component:"label",size:"small",sx:{bgcolor:"background.paper","&:hover":{bgcolor:"background.default"}},children:[(0,Ke.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:async t=>{var n;if(e&&null!==(n=t.target.files)&&void 0!==n&&n[0])try{x(!0);const n=t.target.files[0],r=pb(QC,`profilePics/${e.uid}`);await db(r,n);const i=await hb(r),s=vg(o,"users",e.uid);await Dv(s,{profilePic:i,updatedAt:Gv()}),I(i),C_.success("Profile picture updated successfully")}catch(S){console.error("Error updating profile picture:",S),C("Failed to update profile picture"),C_.error("Failed to update profile picture")}finally{x(!1)}}}),(0,Ke.jsx)(tV,{fontSize:"small"})]}),children:(0,Ke.jsx)(NT,{src:E||void 0,alt:u,sx:{width:120,height:120}})})}),(0,Ke.jsxs)(rt,{sx:{flex:1,minWidth:0},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,Ke.jsx)($T,{variant:"h4",sx:{fontWeight:"bold"},children:h||"No name set"}),R&&(0,Ke.jsx)(eV,{color:"action"}),(null===e||void 0===e?void 0:e.uid)===te&&(0,Ke.jsx)(EA,{onClick:()=>b(!0),size:"small",children:(0,Ke.jsx)(nV,{fontSize:"small"})})]}),(0,Ke.jsxs)($T,{variant:"body1",color:"text.secondary",sx:{mb:2},children:["@",u||"No username set"]}),R&&!j&&(null===e||void 0===e?void 0:e.uid)!==te?(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ke.jsx)(eN,{severity:"info",sx:{mb:2},children:"This account is private. Follow to see their side rooms."}),(0,Ke.jsx)(rt,{sx:{display:"flex",gap:2},children:O?(0,Ke.jsx)(XA,{variant:"outlined",onClick:se,disabled:w,startIcon:(0,Ke.jsx)(iV,{}),children:"Unfollow"}):(0,Ke.jsx)(XA,{variant:"contained",onClick:re,disabled:w,startIcon:(0,Ke.jsx)(rV,{}),children:M?"Request Sent":"Follow"})})]}):(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)($T,{variant:"body1",sx:{mb:2},children:g||"No bio set"}),(0,Ke.jsx)(rt,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:(null===e||void 0===e?void 0:e.uid)!==te&&(0,Ke.jsxs)(Ke.Fragment,{children:[O?(0,Ke.jsx)(XA,{variant:"outlined",onClick:se,disabled:w,startIcon:(0,Ke.jsx)(iV,{}),children:"Unfollow"}):(0,Ke.jsx)(XA,{variant:"contained",onClick:re,disabled:w,startIcon:(0,Ke.jsx)(rV,{}),children:M?"Request Sent":"Follow"}),(0,Ke.jsx)(XA,{variant:"outlined",startIcon:(0,Ke.jsx)(oV,{}),onClick:()=>ee(`/chat/${te}`),children:"Message"})]})})]})]})]})}),(!R||j||(null===e||void 0===e?void 0:e.uid)===te)&&(0,Ke.jsx)(nT,{elevation:0,sx:{p:2,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ke.jsxs)(rt,{sx:{textAlign:"center"},children:[(0,Ke.jsx)($T,{variant:"h6",children:J.length}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Rooms"})]}),(0,Ke.jsxs)(rt,{sx:{textAlign:"center",cursor:"pointer","&:hover":{textDecoration:"underline"}},component:Oe,to:`/profile/${te}/followers`,children:[(0,Ke.jsx)($T,{variant:"h6",children:T.length}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ke.jsxs)(rt,{sx:{textAlign:"center",cursor:"pointer","&:hover":{textDecoration:"underline"}},component:Oe,to:`/profile/${te}/following`,children:[(0,Ke.jsx)($T,{variant:"h6",children:_.length}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(!R||j||(null===e||void 0===e?void 0:e.uid)===te)&&(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:3},children:[J.length>0&&(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h6",sx:{mb:2},children:"Created Rooms"}),(0,Ke.jsx)(rt,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:J.map((e=>(0,Ke.jsxs)(j$,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ke.jsx)(U$,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ke.jsxs)(W$,{sx:{flexGrow:1},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ke.jsx)($T,{variant:"h6",component:"div",children:e.name}),(0,Ke.jsx)($L,{size:"small",label:"Owner",color:"primary"})]}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ke.jsx)($L,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ke.jsx)(sV,{})}),e.category&&(0,Ke.jsx)($L,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ke.jsx)($L,{size:"small",icon:(0,Ke.jsx)(eV,{}),label:"Private",variant:"outlined"})]})]}),(0,Ke.jsx)(Y$,{children:(0,Ke.jsx)(XA,{size:"small",component:Oe,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]}),K.length>0&&(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h6",sx:{mb:2},children:"Joined Rooms"}),(0,Ke.jsx)(rt,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:K.map((e=>(0,Ke.jsxs)(j$,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ke.jsx)(U$,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ke.jsxs)(W$,{sx:{flexGrow:1},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ke.jsx)($T,{variant:"h6",component:"div",children:e.name}),(0,Ke.jsx)($L,{size:"small",label:"Member"})]}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ke.jsx)($L,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ke.jsx)(sV,{})}),e.category&&(0,Ke.jsx)($L,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ke.jsx)($L,{size:"small",icon:(0,Ke.jsx)(eV,{}),label:"Private",variant:"outlined"})]})]}),(0,Ke.jsx)(Y$,{children:(0,Ke.jsx)(XA,{size:"small",component:Oe,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]}),0===J.length&&0===K.length&&(0,Ke.jsxs)(rt,{sx:{textAlign:"center",py:4},children:[(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",children:"Not a member of any side rooms yet"}),(0,Ke.jsx)(XA,{variant:"contained",color:"primary",component:Oe,to:"/side-rooms",sx:{mt:2},children:"Browse Side Rooms"})]})]})]}),(0,Ke.jsxs)(g$,{open:y,onClose:()=>b(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Edit Profile"}),(0,Ke.jsx)(s$,{children:(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,Ke.jsx)(Uj,{label:"Name",value:B,onChange:e=>z(e.target.value),fullWidth:!0,variant:"outlined"}),(0,Ke.jsx)(Uj,{label:"Username",value:q,onChange:e=>G(e.target.value),fullWidth:!0,variant:"outlined"}),(0,Ke.jsx)(Uj,{label:"Bio",value:W,onChange:e=>H(e.target.value),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",helperText:"Tell others about yourself (You can use emojis!)"})]})}),(0,Ke.jsxs)(fL,{sx:{p:3},children:[(0,Ke.jsx)(XA,{variant:"outlined",onClick:()=>b(!1),sx:{minWidth:"120px",borderColor:"text.secondary",color:"text.secondary","&:hover":{borderColor:"text.primary",color:"text.primary"}},children:"Cancel"}),(0,Ke.jsx)(XA,{variant:"contained",onClick:async()=>{if(e&&o)try{x(!0);const t=vg(o,"users",e.uid);await Dv(t,{name:B,username:q,bio:W,updatedAt:Gv()}),p(B),d(q),v(W),b(!1),C_.success("Profile updated successfully")}catch(S){console.error("Error updating profile:",S),C("Failed to update profile"),C_.error("Failed to update profile")}finally{x(!1)}},disabled:w,sx:{minWidth:"120px",bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:w?"Saving...":"Save Changes"})]})]})]})},hV=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],pV=(0,Gk.Ay)(SA,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${wL.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${wL.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${wL.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,Yk.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${wL.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${wL.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),fV=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:i=!1,component:o="div",children:s,dense:a=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=n,f=(0,Fe.A)(n,hV),m=l.useContext(eE),g=l.useMemo((()=>({dense:a||m.dense||!1,alignItems:r,disableGutters:c})),[r,m.dense,a,c]),v=l.useRef(null);(0,lE.A)((()=>{i&&v.current&&v.current.focus()}),[i]);const y=(0,Le.A)({},n,{alignItems:r,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=e,l={root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",a&&"selected"]},c=(0,qk.A)(l,bL,n);return(0,Le.A)({},n,c)})(y),w=(0,VT.A)(v,t);return(0,Ke.jsx)(eE.Provider,{value:g,children:(0,Ke.jsx)(pV,(0,Le.A)({ref:w,href:f.href||f.to,component:(f.href||f.to)&&"div"===o?"button":o,focusVisibleClassName:(0,Ue.A)(b.focusVisible,d),ownerState:y,className:(0,Ue.A)(b.root,p)},f,{classes:b,children:s}))})})),mV=fV;function gV(e){return(0,Qk.Ay)("PrivateSwitchBase",e)}(0,Ze.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const vV=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],yV=(0,Gk.Ay)(SA)((e=>{let{ownerState:t}=e;return(0,Le.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),bV=(0,Gk.Ay)("input",{shouldForwardProp:VA.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),wV=l.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:w,type:x,value:S}=e,C=(0,Fe.A)(e,vV),[_,k]=(0,pj.A)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),T=GR();let A=a;T&&"undefined"===typeof A&&(A=T.disabled);const E="checkbox"===x||"radio"===x,I=(0,Le.A)({},e,{checked:_,disabled:A,disableFocusRipple:l,edge:c}),R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,Kk.A)(i)}`],input:["input"]};return(0,qk.A)(o,gV,t)})(I);return(0,Ke.jsxs)(yV,(0,Le.A)({component:"span",className:(0,Ue.A)(R.root,o),centerRipple:!0,focusRipple:!l,disabled:A,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{m&&m(e),T&&T.onBlur&&T.onBlur(e)},ownerState:I,ref:t},C,{children:[(0,Ke.jsx)(bV,(0,Le.A)({autoFocus:n,checked:r,defaultChecked:s,className:R.input,disabled:A,id:E?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;k(t),g&&g(e,t)},readOnly:y,ref:p,required:b,ownerState:I,tabIndex:w,type:x},"checkbox"===x&&void 0===S?{}:{value:S},h)),_?i:u]}))})),xV=wV;function SV(e){return(0,Qk.Ay)("MuiSwitch",e)}const CV=(0,Ze.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),_V=["className","color","edge","size","sx"],kV=(0,Gk.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,Kk.A)(n.edge)}`],t[`size${(0,Kk.A)(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${CV.thumb}`]:{width:16,height:16},[`& .${CV.switchBase}`]:{padding:4,[`&.${CV.checked}`]:{transform:"translateX(16px)"}}}}]}),TV=(0,Gk.Ay)(xV,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${CV.input}`]:t.input},"default"!==n.color&&t[`color${(0,Kk.A)(n.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${CV.checked}`]:{transform:"translateX(20px)"},[`&.${CV.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${CV.checked} + .${CV.track}`]:{opacity:.5},[`&.${CV.disabled} + .${CV.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${CV.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${CV.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${CV.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${"light"===t.palette.mode?(0,Yk.a)(t.palette[n].main,.62):(0,Yk.e$)(t.palette[n].main,.55)}`}},[`&.${CV.checked} + .${CV.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),AV=(0,Gk.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),EV=(0,Gk.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),IV=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,Fe.A)(n,_V),c=(0,Le.A)({},n,{color:i,edge:o,size:s}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&`edge${(0,Kk.A)(n)}`,`size${(0,Kk.A)(r)}`],switchBase:["switchBase",`color${(0,Kk.A)(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,qk.A)(a,SV,t);return(0,Le.A)({},t,l)})(c),d=(0,Ke.jsx)(EV,{className:u.thumb,ownerState:c});return(0,Ke.jsxs)(kV,{className:(0,Ue.A)(u.root,r),sx:a,ownerState:c,children:[(0,Ke.jsx)(TV,(0,Le.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,Le.A)({},u,{root:u.switchBase})})),(0,Ke.jsx)(AV,{className:u.track,ownerState:c})]})})),RV=IV,PV=(0,fT.A)((0,Ke.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),jV=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),NV=(0,fT.A)([(0,Ke.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,Ke.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts"),OV=(0,fT.A)((0,Ke.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),DV=(0,fT.A)((0,Ke.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"ReportProblem"),MV=(0,fT.A)((0,Ke.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),LV=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield"),FV=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),UV=(0,fT.A)([(0,Ke.jsx)("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07 1.95-1.95 5.12-1.95 7.07 0 1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),(0,Ke.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"Policy"),$V=(0,fT.A)((0,Ke.jsx)("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Cookie"),VV=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen"),BV=(0,fT.A)((0,Ke.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),zV=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),WV=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),HV=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)("");ie();(0,l.useEffect)((()=>{const e=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(e){console.warn("Error requesting media permissions for device enumeration:",e)}try{const e=await navigator.mediaDevices.enumerateDevices();t(e.filter((e=>e.deviceId)));const i=e.find((e=>"audioinput"===e.kind));i&&!n&&r(i.deviceId)}catch(Nb){console.error("Error enumerating devices:",Nb)}};return navigator.mediaDevices.addEventListener("devicechange",e),e(),()=>{navigator.mediaDevices.removeEventListener("devicechange",e)}}),[]);return(0,Ke.jsxs)(rt,{sx:{my:2},children:[(0,Ke.jsx)($T,{variant:"subtitle1",gutterBottom:!0,children:"Audio Input Device"}),(0,Ke.jsx)(Uj,{select:!0,SelectProps:{native:!0},value:n,onChange:e=>(e=>{r(e),console.log("Selected Audio Input:",e)})(e.target.value),label:"Microphone",fullWidth:!0,variant:"outlined",size:"small",disabled:0===e.filter((e=>"audioinput"===e.kind)).length,children:e.filter((e=>"audioinput"===e.kind)).length>0?e.filter((e=>"audioinput"===e.kind)).map((e=>(0,Ke.jsx)("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.substring(0,8)}...`},e.deviceId))):(0,Ke.jsx)("option",{value:"",children:"No microphones found"})})]})},qV=()=>{const e=IE(),{isDarkMode:t,toggleDarkMode:n}=(YN(e.breakpoints.down("sm")),(()=>{const e=(0,l.useContext)(Wk);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e})()),{currentUser:r,userProfile:i}=_k(),{canViewProfile:o,canViewContent:s}=Tk(),[a,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)([]),[g,v]=(0,l.useState)({followers:0,following:0,pendingRequests:0,audioRooms:0}),[y,b]=(0,l.useState)(!1),[w,x]=(0,l.useState)(!1),[S,C]=(0,l.useState)(""),[_,k]=(0,l.useState)(""),[T,A]=(0,l.useState)(""),[E,I]=(0,l.useState)(!1),[R,P]=(0,l.useState)(""),j=ie(),N=async(e,t,n)=>{if(!r)return;const i=r.uid,o=vg(YC,`users/${i}/followRequests`,e),s=vg(YC,`users/${i}/followers`,t),a=vg(YC,`users/${t}/following`,i);try{await Mv(o),n?(await Ov(s,{userId:t,timestamp:Gv()}),await Ov(a,{userId:i,timestamp:Gv()}),C_.success("Follow request accepted")):C_.success("Follow request declined")}catch(u){console.error("Error handling follow request:",u),C_.error("Failed to process follow request")}},O=async()=>{if(r&&S)try{const e=vg(YC,"users",r.uid),t=await Pv(e);if(t.exists()){const e=t.data();if(e.verificationCode===S){const t=e.registrationSourceCode||`REG-${r.uid}`;P(t),I(!0),b(!1),C(""),C_.success("Code verified successfully")}else C_.error("Invalid verification code")}else C_.error("User data not found.")}catch(u){console.error("Error verifying code:",u),C_.error("Failed to verify code")}},D=[{title:"Audio Settings",icon:(0,Ke.jsx)(PV,{}),description:"Manage your audio devices and microphone settings",onClick:()=>c(!0),isSetting:!0},{title:"Security & Authentication",icon:(0,Ke.jsx)(jV,{}),path:"/security",description:"Learn about our authentication flow and security features",isSetting:!0},{title:"Account Management",icon:(0,Ke.jsx)(NV,{}),path:"/account-management",description:"Manage your account settings and preferences",isSetting:!0},{title:"View Registration Code",icon:(0,Ke.jsx)(OV,{}),description:"View your unique registration code for new devices",onClick:async()=>{if(r)try{const e=vg(YC,"users",r.uid),t=await Pv(e);if(t.exists()){const e=t.data();e.sourceCodeHash||e.verificationCode?b(!0):x(!0)}else C_.error("User data not found.")}catch(u){console.error("Error checking verification code:",u),C_.error("Failed to check verification status")}},isSetting:!0},{title:"Report an Issue",icon:(0,Ke.jsx)(DV,{}),path:"/report",description:"Report a bug, user, or other problem",isHelp:!0},{title:"Get Help via Sade AI",icon:(0,Ke.jsx)(MV,{}),description:"Chat with Sade AI for general help or assistance",onClick:()=>{j("/sade-ai?intent=help")},isHelp:!0},{title:"Safety & Community Guidelines",icon:(0,Ke.jsx)(LV,{}),path:"/safety",description:"Review our audio chat guidelines and community standards",isHelp:!0},{title:"About SideEye",icon:(0,Ke.jsx)(FV,{}),path:"/about",description:"Learn more about SideEye and our mission",isHelp:!0},{title:"Privacy Policy",icon:(0,Ke.jsx)(UV,{}),path:"/privacy-policy",description:"Read our privacy policy and data handling practices",isHelp:!0},{title:"Terms of Service",icon:(0,Ke.jsx)(UV,{}),path:"/terms",description:"Review our terms of service",isHelp:!0},{title:"Cookie Policy",icon:(0,Ke.jsx)($V,{}),path:"/cookies",description:"Learn about how we use cookies",isHelp:!0}];return(0,l.useEffect)((()=>{if(r){const e=Fv(vg(YC,"users",r.uid),(e=>{if(e.exists()){const t=e.data();p(t.isPrivate||!1),v((e=>{var n,r,i;return{...e,followers:(null===(n=t.followers)||void 0===n?void 0:n.length)||0,following:(null===(r=t.following)||void 0===r?void 0:r.length)||0,audioRooms:(null===(i=t.audioRooms)||void 0===i?void 0:i.length)||0}}))}})),t=Fv(av(gg(YC,`users/${r.uid}/followRequests`),hv("timestamp","desc")),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username||`User_${t.userId.substring(0,5)}`,timestamp:t.timestamp}}));m(t),v((e=>({...e,pendingRequests:t.length})))}),(e=>{console.error("Error fetching follow requests:",e)}));return()=>{e(),t()}}}),[r]),(0,Ke.jsxs)(DR,{maxWidth:"md",sx:{py:4},children:[(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h4",sx:{mb:2,fontWeight:"bold"},children:"Settings"}),u&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:u}),(0,Ke.jsx)(nT,{elevation:0,sx:{borderRadius:2,border:`1px solid ${e.palette.divider}`},children:(0,Ke.jsx)(oE,{disablePadding:!0,children:D.filter((e=>e.isSetting)).map(((e,t,n)=>(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(mV,{component:e.path?Oe:"div",to:e.path,onClick:e.onClick,sx:{py:1.5,px:2},children:[(0,Ke.jsx)(eR,{sx:{minWidth:40},children:e.icon}),(0,Ke.jsx)(iR,{primary:e.title,secondary:e.description,primaryTypographyProps:{fontWeight:500}})]}),t<n.length-1&&(0,Ke.jsx)(cR,{})]},e.title)))})})]}),(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Privacy"}),(0,Ke.jsxs)(nT,{elevation:0,sx:{p:2,borderRadius:2,border:`1px solid ${e.palette.divider}`},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[h?(0,Ke.jsx)(eV,{color:"action"}):(0,Ke.jsx)(VV,{color:"action"}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"body1",sx:{fontWeight:500},children:"Private Account"}),(0,Ke.jsx)($T,{variant:"caption",color:"text.secondary",children:h?"Only approved followers can join your audio rooms.":"Anyone can join your audio rooms."})]})]}),(0,Ke.jsx)(RV,{checked:h,onChange:async()=>{if(null===r||void 0===r||!r.uid)return;const e=!h;try{const t=vg(YC,"users",r.uid);if(await Dv(t,{isPrivate:e,updatedAt:Gv()}),p(e),C_.success("Account set to "+(e?"Private":"Public")),!e&&f.length>0){C_.loading("Accepting pending requests...",{id:"accepting-requests"});const e=f.map((e=>N(e.id,e.userId,!0)));await Promise.all(e),C_.dismiss("accepting-requests"),C_.success("All pending requests accepted.")}}catch(u){console.error("Error updating privacy settings:",u),C_.error("Failed to update privacy settings"),p(!e)}},color:"primary"})]}),(0,Ke.jsx)(cR,{sx:{my:2}}),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"caption",color:"text.secondary",display:"block",children:"Followers"}),(0,Ke.jsx)($T,{variant:"body1",sx:{fontWeight:500},children:g.followers})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"caption",color:"text.secondary",display:"block",children:"Following"}),(0,Ke.jsx)($T,{variant:"body1",sx:{fontWeight:500},children:g.following})]}),h&&(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"caption",color:"text.secondary",display:"block",children:"Pending Requests"}),(0,Ke.jsx)($T,{variant:"body1",sx:{fontWeight:500},children:g.pendingRequests})]})]}),h&&f.length>0&&(0,Ke.jsxs)(rt,{sx:{mt:3},children:[(0,Ke.jsx)($T,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:500},children:"Follow Requests"}),(0,Ke.jsx)(oE,{disablePadding:!0,children:f.map((e=>{var t;return(0,Ke.jsx)(PL,{disablePadding:!0,secondaryAction:(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:.5},children:[(0,Ke.jsx)(EA,{size:"small",color:"success",onClick:()=>N(e.id,e.userId,!0),title:"Accept",children:(0,Ke.jsx)(BV,{fontSize:"small"})}),(0,Ke.jsx)(EA,{size:"small",color:"error",onClick:()=>N(e.id,e.userId,!1),title:"Decline",children:(0,Ke.jsx)(zV,{fontSize:"small"})})]}),sx:{mb:1},children:(0,Ke.jsxs)(mV,{sx:{borderRadius:1,py:.5},children:[(0,Ke.jsx)(eR,{sx:{minWidth:40},children:(0,Ke.jsx)(NT,{sx:{width:28,height:28,fontSize:"0.8rem"},children:e.username?e.username[0].toUpperCase():"?"})}),(0,Ke.jsx)(iR,{primary:`@${e.username}`,secondary:e.timestamp?`Requested on ${new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleDateString()}`:"Requested recently",primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]})},e.id)}))})]})]})]}),(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Help & Support"}),(0,Ke.jsx)(nT,{elevation:0,sx:{borderRadius:2,border:`1px solid ${e.palette.divider}`},children:(0,Ke.jsx)(oE,{disablePadding:!0,children:D.filter((e=>e.isHelp)).map(((e,t,n)=>(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(mV,{component:e.path?Oe:"div",to:e.path,onClick:e.onClick,sx:{py:1.5,px:2},children:[(0,Ke.jsx)(eR,{sx:{minWidth:40},children:e.icon}),(0,Ke.jsx)(iR,{primary:e.title,secondary:e.description,primaryTypographyProps:{fontWeight:500}})]}),t<n.length-1&&(0,Ke.jsx)(cR,{})]},e.title)))})})]}),(0,Ke.jsxs)(g$,{open:a,onClose:()=>c(!1),maxWidth:"xs",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Audio Settings"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsxs)(PL,{disablePadding:!0,children:[(0,Ke.jsx)(eR,{sx:{minWidth:40},children:(0,Ke.jsx)(WV,{})}),(0,Ke.jsx)(iR,{primary:"Dark Mode"}),(0,Ke.jsx)(RV,{checked:t,onChange:n,color:"primary",edge:"end"})]}),(0,Ke.jsx)(cR,{sx:{my:2}}),(0,Ke.jsx)(HV,{})]}),(0,Ke.jsx)(fL,{children:(0,Ke.jsx)(XA,{onClick:()=>c(!1),children:"Close"})})]}),(0,Ke.jsxs)(g$,{open:w,onClose:()=>x(!1),maxWidth:"xs",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Create Verification Code"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Create a numeric code (4-8 digits) to verify your identity when viewing sensitive information like your registration code."}),(0,Ke.jsx)(Uj,{label:"New Verification Code",value:_,onChange:e=>k(e.target.value.replace(/[^0-9]/g,"")),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*",minLength:4},autoFocus:!0})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>x(!1),children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:async()=>{if(!r||!_||_.length<4)C_.error("Verification code must be at least 4 digits.");else if(/^\d+$/.test(_))try{const e=vg(YC,"users",r.uid);await Dv(e,{verificationCode:_,updatedAt:Gv()}),k(""),x(!1),C_.success("Verification code created successfully. You can now view your Registration Code.")}catch(u){console.error("Error creating verification code:",u),C_.error("Failed to create verification code")}else C_.error("Verification code must contain only digits.")},variant:"contained",disabled:_.length<4,children:"Create"})]})]}),(0,Ke.jsxs)(g$,{open:y,onClose:()=>b(!1),maxWidth:"xs",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Enter Verification Code"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Enter the numeric verification code you created."}),(0,Ke.jsx)(Uj,{label:"Verification Code",value:S,onChange:e=>C(e.target.value.replace(/[^0-9]/g,"")),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&O()}})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>b(!1),children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:O,variant:"contained",disabled:!S,children:"Verify"})]})]}),(0,Ke.jsxs)(g$,{open:E,onClose:()=>I(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Your Registration Code"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)(eN,{severity:"warning",icon:(0,Ke.jsx)(FV,{}),sx:{mb:2},children:"Keep this code safe and private. You'll need it to log in on new devices. Do not share it."}),(0,Ke.jsx)($T,{variant:"body2",gutterBottom:!0,children:"Registration Code:"}),(0,Ke.jsx)(nT,{elevation:0,sx:{p:2,bgcolor:"action.hover",borderRadius:1},children:(0,Ke.jsx)($T,{sx:{fontFamily:"monospace",wordBreak:"break-all",fontSize:"1.1rem",textAlign:"center"},children:R||"No registration code found."})})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>I(!1),children:"Close"}),(0,Ke.jsx)(XA,{onClick:()=>{navigator.clipboard.writeText(R),C_.success("Registration code copied!")},disabled:!R,children:"Copy Code"})]})]})]})};let GV;function KV(){if(GV)return GV;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),GV="reverse",e.scrollLeft>0?GV="default":(e.scrollLeft=1,0===e.scrollLeft&&(GV="negative")),document.body.removeChild(e),GV}function YV(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(KV()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function JV(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const QV=["onChange"],XV={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const ZV=(0,fT.A)((0,Ke.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),eB=(0,fT.A)((0,Ke.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function tB(e){return(0,Qk.Ay)("MuiTabScrollButton",e)}const nB=(0,Ze.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),rB=["className","slots","slotProps","direction","orientation","disabled"],iB=(0,Gk.Ay)(SA,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({width:40,flexShrink:0,opacity:.8,[`&.${nB.disabled}`]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})})),oB=l.forwardRef((function(e,t){var n,r;const i=(0,it.b)({props:e,name:"MuiTabScrollButton"}),{className:o,slots:s={},slotProps:a={},direction:l}=i,c=(0,Fe.A)(i,rB),u=Mk(),d=(0,Le.A)({isRtl:u},i),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,qk.A)(i,tB,t)})(d),p=null!=(n=s.StartScrollButtonIcon)?n:ZV,f=null!=(r=s.EndScrollButtonIcon)?r:eB,m=PA({elementType:p,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=PA({elementType:f,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,Ke.jsx)(iB,(0,Le.A)({component:"div",className:(0,Ue.A)(h.root,o),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,Ke.jsx)(p,(0,Le.A)({},m)):(0,Ke.jsx)(f,(0,Le.A)({},g))}))})),sB=oB;function aB(e){return(0,Qk.Ay)("MuiTabs",e)}const lB=(0,Ze.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),cB=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],uB=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,dB=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,hB=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},pB=(0,Gk.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${lB.scrollButtons}`]:t.scrollButtons},{[`& .${lB.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${lB.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),fB=(0,Gk.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),mB=(0,Gk.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),gB=(0,Gk.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),vB=(0,Gk.Ay)((function(e){const{onChange:t}=e,n=(0,Fe.A)(e,QV),r=l.useRef(),i=l.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return(0,lE.A)((()=>{const e=(0,gE.A)((()=>{const e=r.current;o(),e!==r.current&&t(r.current)})),n=(0,vE.A)(i.current);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}}),[t]),l.useEffect((()=>{o(),t(r.current)}),[t]),(0,Ke.jsx)("div",(0,Le.A)({style:XV},n,{ref:i}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),yB={};const bB=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiTabs"}),r=IE(),i=Mk(),{"aria-label":o,"aria-labelledby":s,action:a,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:v=sB,scrollButtons:y="auto",selectionFollowsFocus:b,slots:w={},slotProps:x={},TabIndicatorProps:S={},TabScrollButtonProps:C={},textColor:_="primary",value:k,variant:T="standard",visibleScrollbar:A=!1}=n,E=(0,Fe.A)(n,cB),I="scrollable"===T,R="vertical"===g,P=R?"scrollTop":"scrollLeft",j=R?"top":"left",N=R?"bottom":"right",O=R?"clientHeight":"clientWidth",D=R?"height":"width",M=(0,Le.A)({},n,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:R,scrollButtons:y,textColor:_,variant:T,visibleScrollbar:A,fixed:!I,hideScrollbar:I&&!A,scrollableX:I&&!R,scrollableY:I&&R,centered:c&&!I,scrollButtonsHideMobile:!p}),L=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,qk.A)(c,aB,l)})(M),F=PA({elementType:w.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:M}),U=PA({elementType:w.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:M});const[$,V]=l.useState(!1),[B,z]=l.useState(yB),[W,H]=l.useState(!1),[q,G]=l.useState(!1),[K,Y]=l.useState(!1),[J,Q]=l.useState({overflow:"hidden",scrollbarWidth:0}),X=new Map,Z=l.useRef(null),ee=l.useRef(null),te=()=>{const e=Z.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:YV(e,i?"rtl":"ltr"),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==k){const e=ee.current.children;if(e.length>0){const t=e[X.get(k)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=(0,BT.A)((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;if(R)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=i?"right":"left",t&&e){const o=i?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(i?-1:1)*(t[n]-e[n]+o)}const o={[n]:r,[D]:t?t[D]:0};if(isNaN(B[n])||isNaN(B[D]))z(o);else{const e=Math.abs(B[n]-o[n]),t=Math.abs(B[D]-o[D]);(e>=1||t>=1)&&z(o)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=JV,duration:s=300}=r;let a=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===a&&(a=r);const u=Math.min(1,(r-a)/s);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(P,Z.current,e,{duration:r.transitions.duration.standard}):Z.current[P]=e},ie=e=>{let t=Z.current[P];R?t+=e:(t+=e*(i?-1:1),t*=i&&"reverse"===KV()?-1:1),re(t)},oe=()=>{const e=Z.current[O];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[O]>e){0===r&&(t=e);break}t+=i[O]}return t},se=()=>{ie(-1*oe())},ae=()=>{ie(oe())},le=l.useCallback((e=>{Q({overflow:null,scrollbarWidth:e})}),[]),ce=(0,BT.A)((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[j]<t[j]){const r=t[P]+(n[j]-t[j]);re(r,{animation:e})}else if(n[N]>t[N]){const r=t[P]+(n[N]-t[N]);re(r,{animation:e})}})),ue=(0,BT.A)((()=>{I&&!1!==y&&Y(!K)}));l.useEffect((()=>{const e=(0,gE.A)((()=>{Z.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null==(n=t)||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null==(n=t)||n.observe(e)}))})),e(),ue()},r=(0,vE.A)(Z.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{var n,o;e.clear(),r.removeEventListener("resize",e),null==(n=i)||n.disconnect(),null==(o=t)||o.disconnect()}}),[ne,ue]),l.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&I&&!1!==y){const n=e[0],r=e[t-1],i={root:Z.current,threshold:.99},o=new IntersectionObserver((e=>{H(!e[0].isIntersecting)}),i);o.observe(n);const s=new IntersectionObserver((e=>{G(!e[0].isIntersecting)}),i);return s.observe(r),()=>{o.disconnect(),s.disconnect()}}}),[I,y,K,null==u?void 0:u.length]),l.useEffect((()=>{V(!0)}),[]),l.useEffect((()=>{ne()})),l.useEffect((()=>{ce(yB!==B)}),[ce,B]),l.useImperativeHandle(a,(()=>({updateIndicator:ne,updateScrollButtons:ue})),[ne,ue]);const de=(0,Ke.jsx)(gB,(0,Le.A)({},S,{className:(0,Ue.A)(L.indicator,S.className),ownerState:M,style:(0,Le.A)({},B,S.style)}));let he=0;const pe=l.Children.map(u,(e=>{if(!l.isValidElement(e))return null;const t=void 0===e.props.value?he:e.props.value;X.set(t,he);const n=t===k;return he+=1,l.cloneElement(e,(0,Le.A)({fullWidth:"fullWidth"===T,indicator:n&&!$&&de,selected:n,selectionFollowsFocus:b,onChange:m,textColor:_,value:t},1!==he||!1!==k||e.props.tabIndex?{}:{tabIndex:0}))})),fe=(()=>{const e={};e.scrollbarSizeListener=I?(0,Ke.jsx)(vB,{onChange:le,className:(0,Ue.A)(L.scrollableX,L.hideScrollbar)}):null;const t=I&&("auto"===y&&(W||q)||!0===y);return e.scrollButtonStart=t?(0,Ke.jsx)(v,(0,Le.A)({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:F},orientation:g,direction:i?"right":"left",onClick:se,disabled:!W},C,{className:(0,Ue.A)(L.scrollButtons,C.className)})):null,e.scrollButtonEnd=t?(0,Ke.jsx)(v,(0,Le.A)({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:U},orientation:g,direction:i?"left":"right",onClick:ae,disabled:!q},C,{className:(0,Ue.A)(L.scrollButtons,C.className)})):null,e})();return(0,Ke.jsxs)(pB,(0,Le.A)({className:(0,Ue.A)(L.root,d),ownerState:M,ref:t,as:h},E,{children:[fe.scrollButtonStart,fe.scrollbarSizeListener,(0,Ke.jsxs)(fB,{className:L.scroller,ownerState:M,style:{overflow:J.overflow,[R?"margin"+(i?"Left":"Right"):"marginBottom"]:A?void 0:-J.scrollbarWidth},ref:Z,children:[(0,Ke.jsx)(mB,{"aria-label":o,"aria-labelledby":s,"aria-orientation":"vertical"===g?"vertical":null,className:L.flexContainer,ownerState:M,onKeyDown:e=>{const t=ee.current,n=(0,ZA.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",o="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&i&&(r="ArrowRight",o="ArrowLeft"),e.key){case r:e.preventDefault(),hB(t,n,dB);break;case o:e.preventDefault(),hB(t,n,uB);break;case"Home":e.preventDefault(),hB(t,null,uB);break;case"End":e.preventDefault(),hB(t,null,dB)}},ref:ee,role:"tablist",children:pe}),$&&de]}),fe.scrollButtonEnd]}))})),wB=bB;function xB(e){return(0,Qk.Ay)("MuiTab",e)}const SB=(0,Ze.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),CB=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],_B=(0,Gk.Ay)(SA,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,Kk.A)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${SB.iconWrapper}`]:t.iconWrapper}]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${SB.iconWrapper}`]:(0,Le.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,[`&.${SB.selected}`]:{opacity:1},[`&.${SB.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${SB.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${SB.disabled}`]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${SB.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${SB.disabled}`]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),kB=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiTab"}),{className:r,disabled:i=!1,disableFocusRipple:o=!1,fullWidth:s,icon:a,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=n,w=(0,Fe.A)(n,CB),x=(0,Le.A)({},n,{disabled:i,disableFocusRipple:o,selected:m,icon:!!a,iconPosition:c,label:!!d,fullWidth:s,textColor:v,wrapped:b}),S=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=e,c={root:["root",o&&s&&"labelIcon",`textColor${(0,Kk.A)(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,qk.A)(c,xB,t)})(x),C=a&&d&&l.isValidElement(a)?l.cloneElement(a,{className:(0,Ue.A)(S.iconWrapper,a.props.className)}):a;return(0,Ke.jsxs)(_B,(0,Le.A)({focusRipple:!o,className:(0,Ue.A)(S.root,r),ref:t,role:"tab","aria-selected":m,disabled:i,onClick:e=>{!m&&h&&h(e,y),p&&p(e)},onFocus:e=>{g&&!m&&h&&h(e,y),f&&f(e)},ownerState:x,tabIndex:m?0:-1},w,{children:["top"===c||"start"===c?(0,Ke.jsxs)(l.Fragment,{children:[C,d]}):(0,Ke.jsxs)(l.Fragment,{children:[d,C]}),u]}))})),TB=kB;function AB(e){return(0,Qk.Ay)("MuiListItemAvatar",e)}(0,Ze.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const EB=["className"],IB=(0,Gk.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,Le.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),RB=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiListItemAvatar"}),{className:r}=n,i=(0,Fe.A)(n,EB),o=l.useContext(eE),s=(0,Le.A)({},n,{alignItems:o.alignItems}),a=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,qk.A)(r,AB,n)})(s);return(0,Ke.jsx)(IB,(0,Le.A)({className:(0,Ue.A)(a.root,r),ownerState:s,ref:t},i))})),PB=RB,jB=()=>{const e=ie(),{searchQuery:t}=oe(),{db:n,loading:r,error:i}=lV(),[o,s]=(0,l.useState)([]),[a,c]=(0,l.useState)(!0),[u,d]=(0,l.useState)(null),[h,p]=(0,l.useState)(0);YN(IE().breakpoints.down("sm"));(0,l.useEffect)((()=>{(async()=>{if(t&&n)try{c(!0);const e=[],r=av(gg(n,"users"),cv("username",">=",t.toLowerCase()),cv("username","<=",t.toLowerCase()+"\uf8ff"),fv(20));(await Nv(r)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"user",data:n})}));const i=av(gg(n,"posts"),cv("content",">=",t.toLowerCase()),cv("content","<=",t.toLowerCase()+"\uf8ff"),hv("content"),fv(20)),o=await Nv(i);for(const t of o.docs){const r=t.data(),i=(await Pv(vg(n,"users",r.authorId))).data();e.push({id:t.id,type:"post",data:{...r,author:i}})}const a=av(gg(n,"forums"),cv("title",">=",t.toLowerCase()),cv("title","<=",t.toLowerCase()+"\uf8ff"),fv(20));(await Nv(a)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"forum",data:n})}));const l=av(gg(n,"sideRooms"),cv("name",">=",t.toLowerCase()),cv("name","<=",t.toLowerCase()+"\uf8ff"),fv(20));(await Nv(l)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"sideRoom",data:n})})),s(e)}catch(e){console.error("Error searching:",e),d("Failed to search. Please try again later.")}finally{c(!1)}})()}),[t,n]);const f=o.filter((e=>{switch(h){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return r?(0,Ke.jsx)("div",{children:"Loading..."}):i?(0,Ke.jsxs)("div",{children:["Error: ",i.message]}):n?(0,Ke.jsxs)(DR,{maxWidth:"md",sx:{mt:4},children:[(0,Ke.jsxs)($T,{variant:"h4",gutterBottom:!0,children:['Search Results for "',t,'"']}),u&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:u}),(0,Ke.jsx)(rt,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,Ke.jsxs)(wB,{value:h,onChange:(e,t)=>p(t),children:[(0,Ke.jsx)(TB,{label:"Users"}),(0,Ke.jsx)(TB,{label:"Posts"}),(0,Ke.jsx)(TB,{label:"Forums"}),(0,Ke.jsx)(TB,{label:"Side Rooms"})]})}),a?(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ke.jsx)(LN,{})}):0===f.length?(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,Ke.jsx)(oE,{children:f.map((t=>(0,Ke.jsxs)(mV,{onClick:()=>(t=>{switch(t.type){case"user":e(`/profile/${t.id}`);break;case"post":e(`/post/${t.id}`);break;case"forum":e(`/forum/${t.id}`);break;case"sideRoom":e(`/side-room/${t.id}`)}})(t),sx:{mb:1,borderRadius:1},children:[(0,Ke.jsx)(PB,{children:"user"===t.type?(0,Ke.jsx)(NT,{src:t.data.avatar}):(0,Ke.jsx)(NT,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,Ke.jsx)(iR,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,Ke.jsx)("div",{children:"Error: Database connection failed"})},NB=(0,fT.A)((0,Ke.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),OB=(0,fT.A)((0,Ke.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var DB={};function MB(){return DB}function LB(e){return LB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LB(e)}function FB(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function UB(e){FB(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===LB(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function $B(e,t){FB(2,arguments);var n=UB(e),r=UB(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function VB(e){FB(1,arguments);var t=UB(e);return t.setHours(23,59,59,999),t}function BB(e){FB(1,arguments);var t=UB(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function zB(e,t){FB(2,arguments);var n,r=UB(e),i=UB(t),o=$B(r,i),s=Math.abs(function(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(s<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);var a=$B(r,i)===-o;(function(e){FB(1,arguments);var t=UB(e);return VB(t).getTime()===BB(t).getTime()})(UB(e))&&1===s&&1===$B(e,i)&&(a=!1),n=o*(s-Number(a))}return 0===n?0:n}function WB(e,t){return FB(2,arguments),UB(e).getTime()-UB(t).getTime()}var HB={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function qB(e){return e?HB[e]:HB.trunc}function GB(e,t,n){FB(2,arguments);var r=WB(e,t)/1e3;return qB(null===n||void 0===n?void 0:n.roundingMethod)(r)}var KB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const YB=function(e,t,n){var r,i=KB[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function JB(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const QB={date:JB({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:JB({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:JB({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var XB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const ZB=function(e,t,n,r){return XB[e]};function ez(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const tz={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ez({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ez({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ez({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ez({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ez({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function nz(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var s,a=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(a)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(a)}));return s=e.valueCallback?e.valueCallback(c):c,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(a.length)}}}var rz,iz={ordinalNumber:(rz={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(rz.matchPattern);if(!n)return null;var r=n[0],i=e.match(rz.parsePattern);if(!i)return null;var o=rz.valueCallback?rz.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:nz({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:nz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:nz({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:nz({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:nz({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const oz={code:"en-US",formatDistance:YB,formatLong:QB,formatRelative:ZB,localize:tz,match:iz,options:{weekStartsOn:0,firstWeekContainsDate:1}},sz=oz;function az(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function lz(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var cz=43200;function uz(e,t,n){var r,i;FB(2,arguments);var o=MB(),s=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:o.locale)&&void 0!==r?r:sz;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=$B(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var l,c,u=az(az({},n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:a});a>0?(l=UB(t),c=UB(e)):(l=UB(e),c=UB(t));var d,h=GB(c,l),p=(lz(c)-lz(l))/1e3,f=Math.round((h-p)/60);if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,u):h<10?s.formatDistance("lessThanXSeconds",10,u):h<20?s.formatDistance("lessThanXSeconds",20,u):h<40?s.formatDistance("halfAMinute",0,u):h<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):0===f?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",f,u);if(f<45)return s.formatDistance("xMinutes",f,u);if(f<90)return s.formatDistance("aboutXHours",1,u);if(f<1440){var m=Math.round(f/60);return s.formatDistance("aboutXHours",m,u)}if(f<2520)return s.formatDistance("xDays",1,u);if(f<cz){var g=Math.round(f/1440);return s.formatDistance("xDays",g,u)}if(f<86400)return d=Math.round(f/cz),s.formatDistance("aboutXMonths",d,u);if((d=zB(c,l))<12){var v=Math.round(f/cz);return s.formatDistance("xMonths",v,u)}var y=d%12,b=Math.floor(d/12);return y<3?s.formatDistance("aboutXYears",b,u):y<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}function dz(e,t){return FB(1,arguments),uz(e,Date.now(),t)}const hz=e=>{try{return dz(e)}catch(Nb){return e instanceof Date?e.toLocaleString():new Date(e).toLocaleString()}},pz=e=>{if(!e)return"";try{return e.toDate?hz(e.toDate()):e instanceof Date?hz(e):hz(new Date(e))}catch(Nb){return console.error("Error formatting timestamp:",Nb),""}};function fz(e){return e.substring(2).toLowerCase()}function mz(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,s=l.useRef(!1),a=l.useRef(null),c=l.useRef(!1),u=l.useRef(!1);l.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,vT.A)(yE(t),a),h=(0,tI.A)((e=>{const t=u.current;u.current=!1;const r=(0,FE.A)(a.current);if(!c.current||!a.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(s.current)return void(s.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(a.current)>-1:!r.documentElement.contains(e.target)||a.current.contains(e.target),o||!n&&t||i(e)})),p=e=>n=>{u.current=!0;const r=t.props[e];r&&r(n)},f={ref:d};return!1!==o&&(f[o]=p(o)),l.useEffect((()=>{if(!1!==o){const e=fz(o),t=(0,FE.A)(a.current),n=()=>{s.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,o]),!1!==r&&(f[r]=p(r)),l.useEffect((()=>{if(!1!==r){const e=fz(r),t=(0,FE.A)(a.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,r]),(0,Ke.jsx)(l.Fragment,{children:l.cloneElement(t,f)})}const gz=()=>{var e;const[t,n]=(0,l.useState)(0),[r,i]=(0,l.useState)(""),[o,s]=(0,l.useState)([]),[a,c]=(0,l.useState)([]),[u,d]=(0,l.useState)(!0),[h,p]=(0,l.useState)(new Set),f=ie(),{currentUser:m}=_k(),[g,v]=(0,l.useState)(null),y=IE(),b=YN(y.breakpoints.down("sm")),[w,x]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[_,k]=(0,l.useState)([]),[T,A]=(0,l.useState)(!1),E=l.useRef(null),[I,R]=(0,l.useState)([]),[P,j]=(0,l.useState)("All"),N=async()=>{try{d(!0),I.forEach((e=>e())),R([]);const e=gg(YC,"sideRooms"),t=av(e,cv("deleted","==",!1),hv("lastActive","desc"),fv(20)),n=await Nv(t),r=await Promise.all(n.docs.map((async e=>{var t,n,r,i,o;const s=e.data();let a=null;if(s.ownerId){const e=vg(YC,"users",s.ownerId),t=await Pv(e);t.exists()&&(a=t.data())}return{id:e.id,name:s.name||"",description:s.description||"",memberCount:s.memberCount||0,shareCount:s.shareCount||0,isPrivate:s.isPrivate||!1,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,creatorName:(null===(n=a)||void 0===n?void 0:n.username)||s.creatorName||"",creatorId:s.ownerId||"",creatorAvatar:(null===(r=a)||void 0===r?void 0:r.profilePic)||(null===(i=a)||void 0===i?void 0:i.avatar)||"",tags:s.tags||[],lastActive:(null===(o=s.lastActive)||void 0===o?void 0:o.toDate())||new Date,maxMembers:s.maxMembers||50,activeUsers:s.activeUsers||0,isLive:s.isLive||!1,thumbnailUrl:s.thumbnailUrl||null}})));s(r),r.forEach((e=>{F(e.id)}));const i=Fv(av(e,cv("deleted","==",!1),hv("lastActive","desc"),fv(20)),(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){var t,n,r,i,o;const a=e.doc.data();let l=null;if(a.ownerId){const e=vg(YC,"users",a.ownerId),t=await Pv(e);t.exists()&&(l=t.data())}const c={id:e.doc.id,name:a.name||"",description:a.description||"",memberCount:a.memberCount||0,shareCount:a.shareCount||0,isPrivate:a.isPrivate||!1,createdAt:(null===(t=a.createdAt)||void 0===t?void 0:t.toDate())||new Date,creatorName:(null===(n=l)||void 0===n?void 0:n.username)||a.creatorName||"",creatorId:a.ownerId||"",creatorAvatar:(null===(r=l)||void 0===r?void 0:r.profilePic)||(null===(i=l)||void 0===i?void 0:i.avatar)||"",tags:a.tags||[],lastActive:(null===(o=a.lastActive)||void 0===o?void 0:o.toDate())||new Date,maxMembers:a.maxMembers||50,activeUsers:a.activeUsers||0,isLive:a.isLive||!1,thumbnailUrl:a.thumbnailUrl||null};s((e=>e.find((e=>e.id===c.id))?e:(F(c.id),[c,...e])))}"removed"===e.type&&s((t=>t.filter((t=>t.id!==e.doc.id))))}))}));R((e=>[...e,i]))}catch(g){console.error("Error fetching rooms:",g),C_.error("Failed to load rooms")}finally{d(!1)}};(0,l.useEffect)((()=>{(async()=>{try{const e=av(gg(YC,"users"),hv("createdAt","desc"),fv(20)),t=(await Nv(e)).docs.map((e=>({id:e.id,username:e.data().username||"",name:e.data().name||"",profilePic:e.data().profilePic,bio:e.data().bio,coverPhoto:e.data().coverPhoto,isPublic:e.data().isPublic,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive})));c(t)}catch(g){console.error("Error fetching users:",g)}finally{d(!1)}})(),N(),m&&O()}),[m]);const O=async()=>{if(m)try{const e=av(gg(YC,`users/${m.uid}/following`)),t=await Nv(e),n=new Set(t.docs.map((e=>e.id)));p(n)}catch(g){console.error("Error fetching following:",g)}},D=async e=>{if(m&&e!==m.uid)try{const r=vg(YC,`users/${m.uid}/following`,e),i=vg(YC,`users/${e}/followers`,m.uid);if(h.has(e))await Mv(r),await Mv(i),p((t=>{const n=new Set(t);return n.delete(e),n})),C_.success("Unfollowed user");else{var t,n;await Ov(r,{timestamp:Gv()}),await Ov(i,{timestamp:Gv()}),p((t=>new Set(t).add(e)));const o={type:"follow",senderId:m.uid,senderName:m.displayName||(null===(t=m.email)||void 0===t?void 0:t.split("@")[0])||"Someone",senderAvatar:m.photoURL||"",recipientId:e,content:`${m.displayName||(null===(n=m.email)||void 0===n?void 0:n.split("@")[0])||"Someone"} started following you`,createdAt:Gv(),isRead:!1};await Lv(gg(YC,"notifications"),o),C_.success("Followed user")}}catch(g){console.error("Error toggling follow:",g),C_.error("Failed to update follow status")}},M=e=>{f(`/side-room/${e}`)},L=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i(e),e.length<2&&!t)return C(!1),void N();if(t){C(!0),d(!0);try{const t=e.toLowerCase(),n=gg(YC,"users"),r=av(n,hv("username"),gv(t),yv(t+"\uf8ff"),fv(20)),i=av(gg(YC,"sideRooms"),cv("deleted","==",!1),cv("name_lower",">=",t),cv("name_lower","<=",t+"\uf8ff"),fv(20)),[o,a]=await Promise.all([Nv(r),Nv(i)]);let l=o.docs.map((e=>{var t;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(t=e.data().isPublic)||void 0===t||t,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive}}));if(0===l.length&&t){const e=av(n,hv("name_lower"),gv(t),yv(t+"\uf8ff"),fv(20));l=(await Nv(e)).docs.map((e=>{var t;return{id:e.id,username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",isPublic:null===(t=e.data().isPublic)||void 0===t||t,isAuthenticated:e.data().isAuthenticated,createdAt:e.data().createdAt,isActive:e.data().isActive}}))}const u=await Promise.all(a.docs.map((async e=>{var t,n,r,i,o;const s=e.data(),a={id:e.id,name:s.name||"",description:s.description||"",ownerId:s.ownerId||"",createdAt:s.createdAt,lastActive:s.lastActive,tags:s.tags||[],isPrivate:s.isPrivate||!1,activeUsers:s.activeUsers||0,isLive:s.isLive||!1,thumbnailUrl:s.thumbnailUrl||void 0};let l=null;if(a.ownerId){const e=vg(YC,"users",a.ownerId),t=await Pv(e);t.exists()&&(l=t.data())}return{id:e.id,name:a.name,description:a.description,memberCount:s.memberCount||0,shareCount:s.shareCount||0,isPrivate:a.isPrivate,createdAt:(null===(t=a.createdAt)||void 0===t?void 0:t.toDate())||new Date,creatorName:(null===(n=l)||void 0===n?void 0:n.username)||s.creatorName||"",creatorId:a.ownerId,creatorAvatar:(null===(r=l)||void 0===r?void 0:r.profilePic)||(null===(i=l)||void 0===i?void 0:i.avatar)||"",tags:a.tags||[],lastActive:(null===(o=a.lastActive)||void 0===o?void 0:o.toDate())||new Date,maxMembers:s.maxMembers||50,activeUsers:a.activeUsers,isLive:a.isLive,thumbnailUrl:a.thumbnailUrl||void 0}})));c(l),s(u)}catch(g){console.error("Search error:",g),C_.error(`Search failed: ${g.code||g.message}`)}finally{d(!1)}}};(0,l.useEffect)((()=>()=>{I.forEach((e=>e()))}),[I]);const F=e=>{const t=vg(YC,"sideRooms",e),n=(Fv(av(gg(YC,"sideRooms",e,"presence"),cv("isOnline","==",!0)),(n=>{const r=n.docs.map((e=>({id:e.id,...e.data()}))),i=r.find((e=>"owner"===e.role)),o=Boolean(i&&!i.isMuted);Dv(t,{activeUsers:r.length,isLive:o,lastActive:Gv()}).catch((t=>{console.error(`Error updating room ${e} status:`,t)}))})),Fv(t,(t=>{if(t.exists()){t.data();s((n=>{const r=[...n],i=r.findIndex((t=>t.id===e));if(-1!==i&&t.exists()){var o;const e=t.data();r[i]={...r[i],isLive:Boolean(e.isLive),activeUsers:e.activeUsers||0,lastActive:(null===(o=e.lastActive)||void 0===o?void 0:o.toDate())||new Date,thumbnailUrl:e.thumbnailUrl||r[i].thumbnailUrl}}return r}))}})));R((e=>[...e,n]))};return u&&!S?(0,Ke.jsx)(rt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,Ke.jsx)(LN,{})}):(0,Ke.jsxs)(rt,{sx:{height:"100vh",overflowY:"auto",position:"relative",backgroundColor:y.palette.background.default},children:[(0,Ke.jsx)(rt,{sx:{position:"sticky",top:0,backgroundColor:y.palette.background.default,zIndex:1e3,pt:2,pb:2,borderBottom:1,borderColor:"divider"},children:(0,Ke.jsxs)(DR,{maxWidth:!1,sx:{maxWidth:"1440px"},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ke.jsx)(rt,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,Ke.jsx)($T,{variant:b?"h5":"h4",component:"h1",sx:{fontWeight:600},children:S?"Search Results":"Discover"})}),(0,Ke.jsx)(mz,{onClickAway:()=>{A(!1)},children:(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:1,position:"relative"},children:[w&&(0,Ke.jsxs)(rt,{ref:E,children:[(0,Ke.jsx)(Uj,{size:"small",placeholder:"Search rooms and users...",value:r,onChange:e=>{(async e=>{if(i(e),e.length<1)return k([]),void A(!1);try{const t=e.toLowerCase(),n=gg(YC,"users"),r=e=>{var t,n,r,i,o,s,a,l,c;return{id:e.id,username:(null===(t=e.data())||void 0===t?void 0:t.username)||"",name:(null===(n=e.data())||void 0===n?void 0:n.name)||"",bio:null===(r=e.data())||void 0===r?void 0:r.bio,profilePic:null===(i=e.data())||void 0===i?void 0:i.profilePic,isPublic:null===(o=null===(s=e.data())||void 0===s?void 0:s.isPublic)||void 0===o||o,isAuthenticated:null===(a=e.data())||void 0===a?void 0:a.isAuthenticated,createdAt:null===(l=e.data())||void 0===l?void 0:l.createdAt,isActive:null===(c=e.data())||void 0===c?void 0:c.isActive}},i=av(n,hv("username_lower"),gv(t),yv(t+"\uf8ff"),fv(5));let o=(await Nv(i)).docs.map(r);if(o.length<5){const e=av(n,hv("name_lower"),gv(t),yv(t+"\uf8ff"),fv(5-o.length)),i=(await Nv(e)).docs.map(r),s=[...o,...i];o=Array.from(new Map(s.map((e=>[e.id,e]))).values())}k(o.slice(0,5)),A(!0)}catch(g){console.error("Instant search error:",g),C_.error("Failed to search users")}})(e.target.value),L(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(L(r,!0),A(!1))},InputProps:{startAdornment:(0,Ke.jsx)(HN,{position:"start",children:(0,Ke.jsx)(NB,{})})},sx:{backgroundColor:"background.paper",borderRadius:1,width:b?"200px":"250px","& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,Ke.jsx)(LM,{open:T&&_.length>0,anchorEl:E.current,placement:"bottom-start",style:{width:null===(e=E.current)||void 0===e?void 0:e.offsetWidth,zIndex:1400},children:(0,Ke.jsx)(nT,{elevation:3,sx:{mt:1,maxHeight:"300px",overflowY:"auto",borderRadius:1},children:(0,Ke.jsx)(oE,{sx:{p:0},children:_.map(((e,t)=>{var n,r;return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(PL,{button:!0,onClick:()=>{f(`/profile/${e.id}`),A(!1)},sx:{py:1,px:2,"&:hover":{backgroundColor:"action.hover"}},children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:32,height:32},children:!1===e.isActive||e.profilePic?null:null===(n=e.name)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.toUpperCase()})}),(0,Ke.jsx)(iR,{primary:(0,Ke.jsx)($T,{variant:"body1",children:e.name}),secondary:(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",children:["@",e.username]}),sx:{my:0}}),m&&e.id!==m.uid&&(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1},children:[(0,Ke.jsx)(EA,{size:"small",onClick:t=>{t.stopPropagation(),f(`/messages/${e.id}`)},children:(0,Ke.jsx)(oV,{fontSize:"small"})}),(0,Ke.jsx)(EA,{size:"small",onClick:t=>{t.stopPropagation(),D(e.id)},color:h.has(e.id)?"primary":"default",children:(0,Ke.jsx)(rV,{fontSize:"small"})})]})]}),t<_.length-1&&(0,Ke.jsx)(cR,{})]},e.id)}))})})})]}),(0,Ke.jsx)(EA,{onClick:()=>x(!w),sx:{backgroundColor:"background.paper","&:hover":{backgroundColor:"action.hover"}},children:(0,Ke.jsx)(NB,{})})]})})]}),!S&&(0,Ke.jsxs)(wB,{value:P,onChange:(e,t)=>{j(t),S&&C(!1)},variant:"scrollable",scrollButtons:"auto","aria-label":"room categories",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[(0,Ke.jsx)(TB,{label:"All",value:"All"}),["ASMR","Just Chatting","Music","Gossip","Podcasts","Shows","Social","Other"].map((e=>(0,Ke.jsx)(TB,{label:e,value:e},e)))]})]})}),(0,Ke.jsxs)(DR,{maxWidth:!1,sx:{pt:3,pb:4,px:b?2:3,maxWidth:"1440px"},children:[S?(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:4},children:[a.length>0&&(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h6",sx:{mb:2},children:"Users"}),(0,Ke.jsx)(oE,{children:a.map(((e,t)=>{var n,r;return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(PL,{sx:{py:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>f(`/profile/${e.id}`),children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:!1===e.isActive?void 0:e.profilePic,alt:e.name,sx:{width:50,height:50},children:!1===e.isActive||e.profilePic?null:null===(n=e.name)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.toUpperCase()})}),(0,Ke.jsx)(iR,{primary:(0,Ke.jsx)($T,{variant:"subtitle1",sx:{fontWeight:600},children:e.name}),secondary:(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",children:["@",e.username]}),e.bio&&(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mt:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.bio})]})}),m&&e.id!==m.uid&&(0,Ke.jsx)(kL,{children:(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1},children:[(0,Ke.jsx)(EA,{onClick:t=>{t.stopPropagation(),f(`/messages/${e.id}`)},size:"small",children:(0,Ke.jsx)(oV,{})}),(0,Ke.jsx)(EA,{onClick:t=>{t.stopPropagation(),D(e.id)},size:"small",color:h.has(e.id)?"primary":"default",children:(0,Ke.jsx)(rV,{})})]})})]}),t<a.length-1&&(0,Ke.jsx)(cR,{})]},e.id)}))})]}),o.length>0&&(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h6",sx:{mb:2},children:"Rooms"}),(0,Ke.jsx)(pN,{container:!0,spacing:3,children:o.filter((e=>{const t="All"===P||e.tags&&e.tags.includes(P);return console.log(`Filtering Room: '${e.name}', Tags: ${JSON.stringify(e.tags)}, Selected: '${P}', Included: ${t}`),t})).map((e=>(0,Ke.jsx)(pN,{item:!0,xs:12,sm:6,md:4,children:(0,Ke.jsxs)(j$,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:y.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:y.shadows[6]}},onClick:()=>M(e.id),children:[(0,Ke.jsxs)(rt,{sx:{position:"relative"},children:[(0,Ke.jsx)(U$,{component:"img",height:b?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"/default-room.jpg",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),e.isLive&&(0,Ke.jsx)($L,{label:"LIVE",color:"error",size:"small",sx:{position:"absolute",top:12,right:12,fontWeight:"bold",fontSize:b?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]}),(0,Ke.jsxs)(W$,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,Ke.jsxs)(rt,{sx:{mb:2},children:[(0,Ke.jsx)($T,{gutterBottom:!0,variant:b?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,Ke.jsx)($L,{icon:(0,Ke.jsx)(OB,{sx:{fontSize:b?"1.1rem":"1.25rem"}}),label:`${e.activeUsers||0} viewing`,color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:b?"0.875rem":"1rem"}}}),e.isPrivate&&(0,Ke.jsx)($L,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:b?"0.875rem":"1rem"}}})]}),(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",sx:{fontSize:b?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",pz(e.lastActive)]})]})]})},e.id)))})]}),0===a.length&&0===o.length&&!u&&(0,Ke.jsxs)(rt,{sx:{textAlign:"center",py:4},children:[(0,Ke.jsx)($T,{variant:"h6",color:"text.secondary",children:"No results found"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Try different keywords or check your spelling"})]})]}):(0,Ke.jsx)(pN,{container:!0,spacing:3,children:o.filter((e=>{const t="All"===P||e.tags&&e.tags.includes(P);return console.log(`Filtering Room: '${e.name}', Tags: ${JSON.stringify(e.tags)}, Selected: '${P}', Included: ${t}`),t})).map((e=>(0,Ke.jsx)(pN,{item:!0,xs:12,sm:6,md:4,children:(0,Ke.jsxs)(j$,{sx:{display:"flex",flexDirection:"column",cursor:"pointer",borderRadius:2,overflow:"hidden",boxShadow:y.shadows[3],"&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out",boxShadow:y.shadows[6]}},onClick:()=>M(e.id),children:[(0,Ke.jsxs)(rt,{sx:{position:"relative"},children:[(0,Ke.jsx)(U$,{component:"img",height:b?"220":"280",image:e.thumbnailUrl||e.creatorAvatar||"/default-room.jpg",alt:e.name,sx:{objectFit:"cover",width:"100%"}}),e.isLive&&(0,Ke.jsx)($L,{label:"LIVE",color:"error",size:"small",sx:{position:"absolute",top:12,right:12,fontWeight:"bold",fontSize:b?"0.75rem":"0.875rem",height:"auto",padding:"6px 12px"}})]}),(0,Ke.jsxs)(W$,{sx:{flexGrow:1,p:3,"&:last-child":{pb:3}},children:[(0,Ke.jsxs)(rt,{sx:{mb:2},children:[(0,Ke.jsx)($T,{gutterBottom:!0,variant:b?"h6":"h5",component:"h2",noWrap:!0,sx:{fontWeight:600,mb:1},children:e.name}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,lineHeight:1.5},children:e.description})]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,flexWrap:"wrap"},children:[(0,Ke.jsx)($L,{icon:(0,Ke.jsx)(OB,{sx:{fontSize:b?"1.1rem":"1.25rem"}}),label:`${e.activeUsers||0} viewing`,color:"primary",variant:"outlined",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:b?"0.875rem":"1rem"}}}),e.isPrivate&&(0,Ke.jsx)($L,{label:"Private",color:"secondary",sx:{height:"auto",padding:"8px 12px","& .MuiChip-label":{padding:"0 4px",fontSize:b?"0.875rem":"1rem"}}})]}),(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",sx:{fontSize:b?"0.75rem":"0.875rem",display:"flex",alignItems:"center",gap:.5},children:["Created by ",e.creatorName||"Anonymous"," \u2022 ",pz(e.lastActive)]})]})]})},e.id)))}),u&&S&&(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,Ke.jsx)(LN,{})})]})]})},vz=()=>{const{user:e}=_k(),{db:t}=lV(),[n,r]=(0,l.useState)([]),[i,o]=(0,l.useState)(""),[s,a]=(0,l.useState)(null),[c,u]=(0,l.useState)(!0),[d,h]=(0,l.useState)(null);(0,l.useEffect)((()=>{if(t&&e)try{const n=Fv(av(gg(t,"messages"),cv("participants","array-contains",e.uid),hv("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));r(t),u(!1)}));return()=>n()}catch(n){h("Failed to fetch messages"),console.error("Error fetching messages:",n),u(!1)}}),[t,e]);return c?(0,Ke.jsx)(rt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ke.jsx)(LN,{})}):d?(0,Ke.jsx)(rt,{p:3,children:(0,Ke.jsx)($T,{color:"error",children:d})}):(0,Ke.jsxs)(rt,{p:3,children:[(0,Ke.jsx)($T,{variant:"h4",gutterBottom:!0,children:"Messages"}),(0,Ke.jsxs)(rt,{mb:3,children:[(0,Ke.jsx)(Uj,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Type your message...",value:i,onChange:e=>o(e.target.value),sx:{mb:2}}),(0,Ke.jsx)(XA,{variant:"contained",color:"primary",onClick:async()=>{if(t&&e&&s&&i.trim())try{await Lv(gg(t,"messages"),{text:i,senderId:e.uid,receiverId:s,timestamp:new Date,read:!1,participants:[e.uid,s]}),o("")}catch(n){h("Failed to send message"),console.error("Error sending message:",n)}},disabled:!i.trim()||!s,children:"Send"})]}),(0,Ke.jsxs)(oE,{children:[n.map((t=>{var n;return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:t.senderId===(null===e||void 0===e?void 0:e.uid)&&(null===e||void 0===e?void 0:e.photoURL)||void 0})}),(0,Ke.jsx)(iR,{primary:t.text,secondary:(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)($T,{component:"span",variant:"body2",color:"text.primary",children:t.senderId===(null===e||void 0===e?void 0:e.uid)?"You":"Other User"})," \u2014 ",new Date(null===(n=t.timestamp)||void 0===n?void 0:n.toDate()).toLocaleString()]})})]}),(0,Ke.jsx)(cR,{})]},t.id)})),0===n.length&&(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",children:"No messages yet"})]})]})};var yz=n(1014);function bz(e){return(0,Qk.Ay)("MuiTooltip",e)}const wz=(0,Ze.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),xz=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function Sz(e){return Math.round(1e5*e)/1e5}const Cz=(0,Gk.Ay)(LM,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,Le.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${wz.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${wz.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${wz.arrow}`]:(0,Le.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${wz.arrow}`]:(0,Le.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),_z=(0,Gk.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,Kk.A)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,Yk.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Sz(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${wz.popper}[data-popper-placement*="left"] &`]:(0,Le.A)({transformOrigin:"right center"},n.isRtl?(0,Le.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,Le.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${wz.popper}[data-popper-placement*="right"] &`]:(0,Le.A)({transformOrigin:"left center"},n.isRtl?(0,Le.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,Le.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${wz.popper}[data-popper-placement*="top"] &`]:(0,Le.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${wz.popper}[data-popper-placement*="bottom"] &`]:(0,Le.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})})})),kz=(0,Gk.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,Yk.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let Tz=!1;const Az=new tA.E;let Ez={x:0,y:0};function Iz(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t&&t(n,...i),e(n,...i)}}const Rz=l.forwardRef((function(e,t){var n,r,i,o,s,a,c,u,d,h,p,f,m,g,v,y,b,w,x;const S=(0,it.b)({props:e,name:"MuiTooltip"}),{arrow:C=!1,children:_,components:k={},componentsProps:T={},describeChild:A=!1,disableFocusListener:E=!1,disableHoverListener:I=!1,disableInteractive:R=!1,disableTouchListener:P=!1,enterDelay:j=100,enterNextDelay:N=0,enterTouchDelay:O=700,followCursor:D=!1,id:M,leaveDelay:L=0,leaveTouchDelay:F=1500,onClose:U,onOpen:$,open:V,placement:B="bottom",PopperComponent:z,PopperProps:W={},slotProps:H={},slots:q={},title:G,TransitionComponent:K=LE,TransitionProps:Y}=S,J=(0,Fe.A)(S,xz),Q=l.isValidElement(_)?_:(0,Ke.jsx)("span",{children:_}),X=IE(),Z=Mk(),[ee,te]=l.useState(),[ne,re]=l.useState(null),ie=l.useRef(!1),oe=R||D,se=(0,tA.A)(),ae=(0,tA.A)(),le=(0,tA.A)(),ce=(0,tA.A)(),[ue,de]=(0,pj.A)({controlled:V,default:!1,name:"Tooltip",state:"open"});let he=ue;const pe=(0,yz.A)(M),fe=l.useRef(),me=(0,BT.A)((()=>{void 0!==fe.current&&(document.body.style.WebkitUserSelect=fe.current,fe.current=void 0),ce.clear()}));l.useEffect((()=>me),[me]);const ge=e=>{Az.clear(),Tz=!0,de(!0),$&&!he&&$(e)},ve=(0,BT.A)((e=>{Az.start(800+L,(()=>{Tz=!1})),de(!1),U&&he&&U(e),se.start(X.transitions.duration.shortest,(()=>{ie.current=!1}))})),ye=e=>{ie.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),ae.clear(),le.clear(),j||Tz&&N?ae.start(Tz?N:j,(()=>{ge(e)})):ge(e))},be=e=>{ae.clear(),le.start(L,(()=>{ve(e)}))},{isFocusVisibleRef:we,onBlur:xe,onFocus:Se,ref:Ce}=(0,zT.A)(),[,_e]=l.useState(!1),ke=e=>{xe(e),!1===we.current&&(_e(!1),be(e))},Te=e=>{ee||te(e.currentTarget),Se(e),!0===we.current&&(_e(!0),ye(e))},Ae=e=>{ie.current=!0;const t=Q.props;t.onTouchStart&&t.onTouchStart(e)},Ee=e=>{Ae(e),le.clear(),se.clear(),me(),fe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(O,(()=>{document.body.style.WebkitUserSelect=fe.current,ye(e)}))},Ie=e=>{Q.props.onTouchEnd&&Q.props.onTouchEnd(e),me(),le.start(F,(()=>{ve(e)}))};l.useEffect((()=>{if(he)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}}),[ve,he]);const Re=(0,VT.A)(yE(Q),Ce,te,t);G||0===G||(he=!1);const Pe=l.useRef(),je={},Ne="string"===typeof G;A?(je.title=he||!Ne||I?null:G,je["aria-describedby"]=he?pe:null):(je["aria-label"]=Ne?G:null,je["aria-labelledby"]=he&&!Ne?pe:null);const Oe=(0,Le.A)({},je,J,Q.props,{className:(0,Ue.A)(J.className,Q.props.className),onTouchStart:Ae,ref:Re},D?{onMouseMove:e=>{const t=Q.props;t.onMouseMove&&t.onMouseMove(e),Ez={x:e.clientX,y:e.clientY},Pe.current&&Pe.current.update()}}:{});const De={};P||(Oe.onTouchStart=Ee,Oe.onTouchEnd=Ie),I||(Oe.onMouseOver=Iz(ye,Oe.onMouseOver),Oe.onMouseLeave=Iz(be,Oe.onMouseLeave),oe||(De.onMouseOver=ye,De.onMouseLeave=be)),E||(Oe.onFocus=Iz(Te,Oe.onFocus),Oe.onBlur=Iz(ke,Oe.onBlur),oe||(De.onFocus=Te,De.onBlur=ke));const Me=l.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=W.popperOptions)&&e.modifiers&&(t=t.concat(W.popperOptions.modifiers)),(0,Le.A)({},W.popperOptions,{modifiers:t})}),[ne,W]),$e=(0,Le.A)({},S,{isRtl:Z,arrow:C,disableInteractive:oe,placement:B,PopperComponentProp:z,touch:ie.current}),Ve=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,Kk.A)(o.split("-")[0])}`],arrow:["arrow"]};return(0,qk.A)(s,bz,t)})($e),Be=null!=(n=null!=(r=q.popper)?r:k.Popper)?n:Cz,ze=null!=(i=null!=(o=null!=(s=q.transition)?s:k.Transition)?o:K)?i:LE,We=null!=(a=null!=(c=q.tooltip)?c:k.Tooltip)?a:_z,He=null!=(u=null!=(d=q.arrow)?d:k.Arrow)?u:kz,qe=bT(Be,(0,Le.A)({},W,null!=(h=H.popper)?h:T.popper,{className:(0,Ue.A)(Ve.popper,null==W?void 0:W.className,null==(p=null!=(f=H.popper)?f:T.popper)?void 0:p.className)}),$e),Ge=bT(ze,(0,Le.A)({},Y,null!=(m=H.transition)?m:T.transition),$e),Ye=bT(We,(0,Le.A)({},null!=(g=H.tooltip)?g:T.tooltip,{className:(0,Ue.A)(Ve.tooltip,null==(v=null!=(y=H.tooltip)?y:T.tooltip)?void 0:v.className)}),$e),Je=bT(He,(0,Le.A)({},null!=(b=H.arrow)?b:T.arrow,{className:(0,Ue.A)(Ve.arrow,null==(w=null!=(x=H.arrow)?x:T.arrow)?void 0:w.className)}),$e);return(0,Ke.jsxs)(l.Fragment,{children:[l.cloneElement(Q,Oe),(0,Ke.jsx)(Be,(0,Le.A)({as:null!=z?z:LM,placement:B,anchorEl:D?{getBoundingClientRect:()=>({top:Ez.y,left:Ez.x,right:Ez.x,bottom:Ez.y,width:0,height:0})}:ee,popperRef:Pe,open:!!ee&&he,id:pe,transition:!0},De,qe,{popperOptions:Me,children:e=>{let{TransitionProps:t}=e;return(0,Ke.jsx)(ze,(0,Le.A)({timeout:X.transitions.duration.shorter},t,Ge,{children:(0,Ke.jsxs)(We,(0,Le.A)({},Ye,{children:[G,C?(0,Ke.jsx)(He,(0,Le.A)({},Je,{ref:re})):null]}))}))}}))]})})),Pz=Rz,jz=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Nz=(0,fT.A)([(0,Ke.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Ke.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var Oz=n(7937);const Dz=["component","direction","spacing","divider","children","className","useFlexGap"],Mz=(0,ze.A)(),Lz=IR("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Fz(e){return vR({props:e,name:"MuiStack",defaultTheme:Mz})}function Uz(e,t){const n=l.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,i)=>(e.push(r),i<n.length-1&&e.push(l.cloneElement(t,{key:`separator-${i}`})),e)),[])}const $z=e=>{let{ownerState:t,theme:n}=e,r=(0,Le.A)({display:"flex",flexDirection:"column"},(0,tN.NI)({theme:n},(0,tN.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,Oz.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,tN.kW)({values:t.direction,base:i}),s=(0,tN.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,Oz._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,Oz._W)(e,n)}};var i};r=(0,yR.A)(r,(0,tN.NI)({theme:n},s,a))}return r=(0,tN.iZ)(n.breakpoints,r),r};const Vz=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=Lz,useThemeProps:n=Fz,componentName:r="MuiStack"}=e,i=t($z),o=l.forwardRef((function(e,t){const o=n(e),s=(0,Be.A)(o),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=s,f=(0,Fe.A)(s,Dz),m={direction:l,spacing:c,useFlexGap:p},g=(0,qk.A)({root:["root"]},(e=>(0,Qk.Ay)(r,e)),{});return(0,Ke.jsx)(i,(0,Le.A)({as:a,ownerState:m,ref:t,className:(0,Ue.A)(g.root,h)},f,{children:u?Uz(d,u):d}))}));return o}({createStyledComponent:(0,Gk.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,it.b)({props:e,name:"MuiStack"})}),Bz=Vz;function zz(e){return(0,Qk.Ay)("MuiFormControlLabel",e)}const Wz=(0,Ze.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Hz=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],qz=(0,Gk.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Wz.label}`]:t.label},t.root,t[`labelPlacement${(0,Kk.A)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Wz.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${Wz.label}`]:{[`&.${Wz.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})})),Gz=(0,Gk.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${Wz.error}`]:{color:(t.vars||t).palette.error.main}}})),Kz=l.forwardRef((function(e,t){var n,r;const i=(0,it.b)({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:s={},control:a,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:f={}}=i,m=(0,Fe.A)(i,Hz),g=GR(),v=null!=(n=null!=c?c:a.props.disabled)?n:null==g?void 0:g.disabled,y=null!=p?p:a.props.required,b={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof a.props[e]&&"undefined"!==typeof i[e]&&(b[e]=i[e])}));const w=HR({props:i,muiFormControl:g,states:["error"]}),x=(0,Le.A)({},i,{disabled:v,labelPlacement:h,required:y,error:w.error}),S=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,s={root:["root",n&&"disabled",`labelPlacement${(0,Kk.A)(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,qk.A)(s,zz,t)})(x),C=null!=(r=f.typography)?r:s.typography;let _=d;return null==_||_.type===$T||u||(_=(0,Ke.jsx)($T,(0,Le.A)({component:"span"},C,{className:(0,Ue.A)(S.label,null==C?void 0:C.className),children:_}))),(0,Ke.jsxs)(qz,(0,Le.A)({className:(0,Ue.A)(S.root,o),ownerState:x,ref:t},m,{children:[l.cloneElement(a,b),y?(0,Ke.jsxs)(Bz,{display:"block",children:[_,(0,Ke.jsxs)(Gz,{ownerState:x,"aria-hidden":!0,className:S.asterisk,children:["\u2009","*"]})]}):_]}))})),Yz=Kz,Jz=e=>{let{open:t,onClose:n}=e;const{currentUser:r}=_k(),i=ie(),[o,s]=(0,l.useState)(!1),[a,c]=(0,l.useState)(null),[u,d]=(0,l.useState)({name:"",description:"",isPrivate:!1,password:"",category:"",tags:[]}),[h,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)(""),[g,v]=(0,l.useState)([]),[y,b]=(0,l.useState)(""),[w,x]=(0,l.useState)(""),[S,C]=(0,l.useState)([]),[_,k]=(0,l.useState)(""),[T,A]=(0,l.useState)(!1),[E,I]=(0,l.useState)(!1),[R,P]=(0,l.useState)(null),j=()=>{y.trim()&&!g.includes(y.trim())&&(v([...g,y.trim()]),b(""))},N=()=>{_.trim()&&!S.includes(_.trim())&&(C([...S,_.trim()]),k(""))};return(0,Ke.jsxs)(g$,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Create Side Room"}),(0,Ke.jsxs)(s$,{children:[a&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:a}),(0,Ke.jsx)(Uj,{autoFocus:!0,margin:"dense",label:"Room Name",type:"text",fullWidth:!0,value:u.name,onChange:e=>d((t=>({...t,name:e.target.value}))),required:!0,error:!u.name.trim(),helperText:u.name.trim()?"":"Room name is required"}),(0,Ke.jsx)(Uj,{margin:"dense",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,value:u.description,onChange:e=>d((t=>({...t,description:e.target.value}))),required:!0,error:!u.description.trim(),helperText:u.description.trim()?"":"Description is required"}),(0,Ke.jsxs)(YP,{fullWidth:!0,margin:"dense",required:!0,error:!u.category,children:[(0,Ke.jsx)(zP,{children:"Category"}),(0,Ke.jsxs)(Nj,{value:u.category,onChange:e=>d((t=>({...t,category:e.target.value}))),label:"Category",children:[(0,Ke.jsx)(JI,{value:"Just Chatting",children:"Just Chatting"}),(0,Ke.jsx)(JI,{value:"Music",children:"Music"}),(0,Ke.jsx)(JI,{value:"Gossip",children:"Gossip"}),(0,Ke.jsx)(JI,{value:"Podcasts",children:"Podcasts"}),(0,Ke.jsx)(JI,{value:"Shows",children:"Shows"}),(0,Ke.jsx)(JI,{value:"Social",children:"Social"}),(0,Ke.jsx)(JI,{value:"ASMR",children:"ASMR"}),(0,Ke.jsx)(JI,{value:"Other",children:"Other"})]}),!u.category&&(0,Ke.jsx)(nj,{children:"Category is required"})]}),(0,Ke.jsxs)(rt,{sx:{mt:2},children:[(0,Ke.jsx)($T,{variant:"subtitle2",children:"Tags (Optional)"}),(0,Ke.jsx)(rt,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:g.map((e=>(0,Ke.jsx)($L,{label:e,onDelete:()=>{return t=e,void v(g.filter((e=>e!==t)));var t}},e)))}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1},children:[(0,Ke.jsx)(Uj,{size:"small",value:y,onChange:e=>b(e.target.value),placeholder:"Add tag",onKeyPress:e=>"Enter"===e.key&&j()}),(0,Ke.jsx)(EA,{onClick:j,size:"small",children:(0,Ke.jsx)(jz,{})})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:2},children:[(0,Ke.jsx)($T,{variant:"subtitle2",children:"Rules (Optional)"}),(0,Ke.jsx)(rt,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:S.map((e=>(0,Ke.jsx)($L,{label:e,onDelete:()=>{return t=e,void C(S.filter((e=>e!==t)));var t}},e)))}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1},children:[(0,Ke.jsx)(Uj,{size:"small",value:_,onChange:e=>k(e.target.value),placeholder:"Add rule",onKeyPress:e=>"Enter"===e.key&&N()}),(0,Ke.jsx)(EA,{onClick:N,size:"small",children:(0,Ke.jsx)(jz,{})})]})]}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(RV,{checked:u.isPrivate,onChange:e=>d((t=>({...t,isPrivate:e.target.checked})))}),label:"Private Room"}),u.isPrivate&&(0,Ke.jsx)(Uj,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u.password,onChange:e=>d((t=>({...t,password:e.target.value}))),required:!0,error:!u.password.trim(),helperText:u.password.trim()?"":"Password is required for private rooms"}),(0,Ke.jsxs)(rt,{sx:{mt:2,mb:1},children:[(0,Ke.jsxs)(XA,{variant:"outlined",component:"label",fullWidth:!0,children:["Upload Thumbnail (Optional)",(0,Ke.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]?P(e.target.files[0]):P(null)}})]}),R&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",mt:1},children:["Selected: ",R.name]})]})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:n,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:async e=>{if(e.preventDefault(),r&&YC)if(u.name.trim())if(u.description.trim())if(u.category)if(!u.isPrivate||u.password.trim())try{I(!0);const e=vg(YC,"users",r.uid),a=await Pv(e);let l="Anonymous",c="anonymous_user",d="";if(a.exists()){var t;const e=a.data();l=e.name||e.username||r.displayName||"Anonymous",c=e.username||(null===(t=r.displayName)||void 0===t?void 0:t.split(" ")[0].toLowerCase())||"anonymous_user",d=e.profilePic||r.photoURL||""}else{var o;l=r.displayName||"Anonymous",c=(null===(o=r.displayName)||void 0===o?void 0:o.split(" ")[0].toLowerCase())||"anonymous_user",d=r.photoURL||"",console.warn(`UserProfile not found for UID: ${r.uid}. Using Auth display name.`)}const h={name:u.name,description:u.description,ownerId:r.uid,viewers:[],memberCount:0,createdAt:Gv(),isPrivate:u.isPrivate,password:u.isPrivate?u.password:"",category:u.category,tags:Array.from(new Set([...g,u.category])),lastActive:Gv(),isLive:!1,activeUsers:0,deleted:!1,heartCount:0},p=await Lv(gg(YC,"sideRooms"),h),f={userId:r.uid,displayName:l,username:c,avatar:d,role:"owner",joinedAt:wl.now()};if(await Dv(p,{viewers:Kv(f),memberCount:1}),await Ov(vg(YC,"users",r.uid,"sideRooms",p.id),{roomId:p.id,name:u.name,role:"owner",joinedAt:wl.now(),lastActive:Gv()}),R){C_.loading("Uploading thumbnail...",{id:"thumbnail-upload"});try{const e=pb(QC,`sideRoomThumbnails/${p.id}/${R.name}`),t=await db(e,R),n=await hb(t.ref);await Dv(p,{thumbnailUrl:n}),C_.dismiss("thumbnail-upload"),C_.success("Thumbnail uploaded!")}catch(s){console.error("Error uploading thumbnail:",s),C_.dismiss("thumbnail-upload"),C_.error("Failed to upload thumbnail, but room created.")}}C_.success("Room created successfully!"),n(),i(`/side-room/${p.id}`)}catch(a){console.error("Error creating room:",a),C_.error("Failed to create room")}finally{I(!1)}else C_.error("Password is required for private rooms");else C_.error("Category is required");else C_.error("Description is required");else C_.error("Room name is required")},variant:"contained",disabled:E,children:E?"Creating...":"Create Room"})]})]})},Qz=["All","ASMR","Just Chatting","Music","Gossip","Podcasts","Shows","Social","Other"],Xz=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0),[s,a]=(0,l.useState)(null),[c,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)(!1),[p,f]=(0,l.useState)(null),[m,g]=(0,l.useState)(""),[v,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(""),[x,S]=(0,l.useState)("All"),[C,_]=(0,l.useState)("newest"),k=ie(),{currentUser:T}=_k();(0,l.useEffect)((()=>{if(!YC)return a("Firestore not initialized"),void o(!1);try{o(!0);const e=gg(YC,"sideRooms"),n=Fv(av(e,cv("deleted","==",!1),hv("createdAt","desc")),(e=>{const n=e.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",description:t.description,createdAt:t.createdAt,lastActive:t.lastActive,viewerCount:t.viewerCount||0,maxViewers:t.maxViewers||100,viewers:t.viewers,isPrivate:t.isPrivate,password:t.password,genre:t.genre,tags:t.tags,category:t.category,thumbnailUrl:t.thumbnailUrl}}));t(n),o(!1),a(null)}),(e=>{console.error("Error fetching side rooms:",e),a("Error fetching rooms. Please check permissions or network."),o(!1)}));return()=>n()}catch(e){console.error("Error setting up side rooms query:",e),a(`Error setting up query: ${e.message}`),o(!1)}}),[YC]),(0,l.useEffect)((()=>{let t=[...e];b&&(t=t.filter((e=>e.name.toLowerCase().includes(b.toLowerCase())||e.description&&e.description.toLowerCase().includes(b.toLowerCase())))),"All"!==x&&(t=t.filter((e=>e.category===x||e.genre===x||e.tags&&e.tags.includes(x)))),t.sort(((e,t)=>{var n,r,i,o;const s=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0,a=(null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0,l=(null===(i=e.lastActive)||void 0===i?void 0:i.toMillis())||0,c=(null===(o=t.lastActive)||void 0===o?void 0:o.toMillis())||0;switch(C){case"newest":return a-s;case"oldest":return s-a;case"members":return(t.viewerCount||0)-(e.viewerCount||0);case"activity":return c-l;default:return 0}})),r(t)}),[e,b,x,C]);const A=async()=>{if(T&&p&&m&&YC){y(!0);try{var e;const t=vg(YC,"sideRooms",p.id),n=await Pv(t);if(!n.exists()||(null===(e=n.data())||void 0===e?void 0:e.password)!==m)return C_.error("Incorrect password"),void y(!1);await Hv(YC,(async e=>{var n;const r=await e.get(t);if(!r.exists())throw new Error("Room does not exist!");const i=(null===(n=r.data())||void 0===n?void 0:n.viewers)||[],o=T&&i.some((e=>e.userId===T.uid));if(T&&!o){var s;const n={userId:T.uid,username:T.displayName||(null===(s=T.email)||void 0===s?void 0:s.split("@")[0])||"",avatar:T.photoURL||"",role:"viewer",joinedAt:wl.now()};e.update(t,{viewers:Kv(n),viewerCount:Yv(1)})}})),h(!1),g(""),k(`/side-room/${p.id}`)}catch(s){console.error("Error joining private room:",s),C_.error(`Failed to join room: ${(null===s||void 0===s?void 0:s.message)||s}`)}finally{y(!1)}}},E=e=>{if(!e)return"N/A";return e.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric"})};return i?(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh"},children:(0,Ke.jsx)(LN,{})}):s?(0,Ke.jsxs)($T,{color:"error",children:["Error: ",s]}):(0,Ke.jsxs)(rt,{sx:{flexGrow:1,p:3},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ke.jsx)($T,{variant:"h4",children:"Side Rooms"}),(0,Ke.jsx)(XA,{variant:"contained",startIcon:(0,Ke.jsx)(jz,{}),onClick:()=>u(!0),disabled:!T,children:"Create Room"})]}),(0,Ke.jsxs)(nT,{elevation:1,sx:{p:2,mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[(0,Ke.jsx)(Uj,{size:"small",placeholder:"Search rooms...",variant:"outlined",value:b,onChange:e=>w(e.target.value),InputProps:{startAdornment:(0,Ke.jsx)(HN,{position:"start",children:(0,Ke.jsx)(NB,{})})},sx:{flexGrow:1,minWidth:"200px"}}),(0,Ke.jsxs)(YP,{size:"small",sx:{minWidth:150},children:[(0,Ke.jsx)(zP,{children:"Category"}),(0,Ke.jsx)(Nj,{value:x,label:"Category",onChange:e=>S(e.target.value),children:Qz.map((e=>(0,Ke.jsx)(JI,{value:e,children:e},e)))})]}),(0,Ke.jsxs)(YP,{size:"small",sx:{minWidth:150},children:[(0,Ke.jsx)(zP,{children:"Sort By"}),(0,Ke.jsxs)(Nj,{value:C,label:"Sort By",onChange:e=>_(e.target.value),children:[(0,Ke.jsx)(JI,{value:"newest",children:"Newest"}),(0,Ke.jsx)(JI,{value:"oldest",children:"Oldest"}),(0,Ke.jsx)(JI,{value:"members",children:"Most Viewers"}),(0,Ke.jsx)(JI,{value:"activity",children:"Last Active"})]})]})]}),(0,Ke.jsx)(pN,{container:!0,spacing:3,children:n.length>0?n.map((e=>(0,Ke.jsx)(pN,{item:!0,xs:12,md:6,lg:4,children:(0,Ke.jsxs)(j$,{sx:{display:"flex",flexDirection:"column",height:"100%",borderRadius:2,transition:"box-shadow 0.3s","&:hover":{boxShadow:3}},children:[(0,Ke.jsx)(U$,{component:"img",height:"140",image:e.thumbnailUrl||"/default-room.jpg",alt:e.name,sx:{objectFit:"cover"}}),(0,Ke.jsxs)(W$,{sx:{flexGrow:1},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ke.jsx)($T,{variant:"h6",component:"div",children:e.name}),e.isPrivate&&(0,Ke.jsx)(Pz,{title:"Private Room",arrow:!0,children:(0,Ke.jsx)(eV,{fontSize:"small",color:"action"})})]}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[(0,Ke.jsx)($L,{icon:(0,Ke.jsx)(k$,{fontSize:"small"}),label:`${e.viewerCount||0} Viewing`,size:"small",variant:"outlined"}),(0,Ke.jsx)($L,{icon:(0,Ke.jsx)(Nz,{fontSize:"small"}),label:`Active: ${E(e.lastActive)}`,size:"small",variant:"outlined"}),e.category&&(0,Ke.jsx)($L,{label:e.category,size:"small",variant:"outlined",color:"primary"})]})]}),(0,Ke.jsx)(Y$,{sx:{justifyContent:"flex-end",p:2,borderTop:"1px solid",borderColor:"divider"},children:(0,Ke.jsx)(XA,{size:"small",variant:"contained",onClick:()=>(async e=>{if(T&&YC){if(e.isPrivate)return f(e),void h(!0);y(!0);try{const t=vg(YC,"sideRooms",e.id);await Hv(YC,(async e=>{var n;const r=await e.get(t);if(!r.exists())throw new Error("Room does not exist!");const i=(null===(n=r.data())||void 0===n?void 0:n.viewers)||[],o=T&&i.some((e=>e.userId===T.uid));if(T&&!o){var s;const n={userId:T.uid,username:T.displayName||(null===(s=T.email)||void 0===s?void 0:s.split("@")[0])||"",avatar:T.photoURL||"",role:"viewer",joinedAt:wl.now()};e.update(t,{viewers:Kv(n),viewerCount:Yv(1)})}})),k(`/side-room/${e.id}`)}catch(s){console.error("Error joining room:",s),C_.error(`Failed to join room: ${(null===s||void 0===s?void 0:s.message)||s}`)}finally{y(!1)}}else C_.error("You must be logged in to join a room.")})(e),disabled:v,children:"Join Room"})})]})},e.id))):(0,Ke.jsx)($T,{sx:{width:"100%",textAlign:"center",mt:4},children:"No rooms found. Why not create one?"})}),(0,Ke.jsx)(Jz,{open:c,onClose:()=>u(!1)}),(0,Ke.jsxs)(g$,{open:d,onClose:()=>h(!1),maxWidth:"xs",fullWidth:!0,children:[(0,Ke.jsx)(Z$,{children:"Enter Room Password"}),(0,Ke.jsx)(s$,{children:(0,Ke.jsx)(Uj,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,variant:"standard",value:m,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&A()})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>h(!1),disabled:v,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:A,disabled:v||!m,children:v?(0,Ke.jsx)(LN,{size:24}):"Join"})]})]})]})};function Zz(e){return(0,Qk.Ay)("MuiLinearProgress",e)}(0,Ze.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const eW=["className","color","value","valueBuffer","variant"];let tW,nW,rW,iW,oW,sW,aW=e=>e;const lW=(0,eA.i7)(tW||(tW=aW`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),cW=(0,eA.i7)(nW||(nW=aW`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),uW=(0,eA.i7)(rW||(rW=aW`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),dW=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,Yk.a)(e.palette[t].main,.62):(0,Yk.e$)(e.palette[t].main,.5),hW=(0,Gk.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,Kk.A)(n.color)}`],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:dW(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),pW=(0,Gk.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,Kk.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;const r=dW(n,t.color);return(0,Le.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,eA.AH)(iW||(iW=aW`
    animation: ${0} 3s infinite linear;
  `),uW)),fW=(0,Gk.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,Kk.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .4s linear"},"buffer"===t.variant&&{zIndex:1,transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,eA.AH)(oW||(oW=aW`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),lW)})),mW=(0,Gk.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,Kk.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Le.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:dW(n,t.color),transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,eA.AH)(sW||(sW=aW`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),cW)})),gW=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:s,variant:a="indeterminate"}=n,l=(0,Fe.A)(n,eW),c=(0,Le.A)({},n,{color:i,variant:a}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,Kk.A)(r)}`,n],dashed:["dashed",`dashedColor${(0,Kk.A)(r)}`],bar1:["bar",`barColor${(0,Kk.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,Kk.A)(r)}`,"buffer"===n&&`color${(0,Kk.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,qk.A)(i,Zz,t)})(c),d=Mk(),h={},p={bar1:{},bar2:{}};if("determinate"===a||"buffer"===a)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;d&&(e=-e),p.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===a)if(void 0!==s){let e=(s||0)-100;d&&(e=-e),p.bar2.transform=`translateX(${e}%)`}else 0;return(0,Ke.jsxs)(hW,(0,Le.A)({className:(0,Ue.A)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:t},l,{children:["buffer"===a?(0,Ke.jsx)(pW,{className:u.dashed,ownerState:c}):null,(0,Ke.jsx)(fW,{className:u.bar1,ownerState:c,style:p.bar1}),"determinate"===a?null:(0,Ke.jsx)(mW,{className:u.bar2,ownerState:c,style:p.bar2})]}))})),vW=gW;var yW=n(9223);const bW=Object.create(null);bW.open="0",bW.close="1",bW.ping="2",bW.pong="3",bW.message="4",bW.upgrade="5",bW.noop="6";const wW=Object.create(null);Object.keys(bW).forEach((e=>{wW[bW[e]]=e}));const xW={type:"error",data:"parser error"},SW="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),CW="function"===typeof ArrayBuffer,_W=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,kW=(e,t,n)=>{let{type:r,data:i}=e;return SW&&i instanceof Blob?t?n(i):TW(i,n):CW&&(i instanceof ArrayBuffer||_W(i))?t?n(i):TW(new Blob([i]),n):n(bW[r]+(i||""))},TW=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function AW(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let EW;const IW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RW="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)RW[IW.charCodeAt(n)]=n;const PW="function"===typeof ArrayBuffer,jW=(e,t)=>{if("string"!==typeof e)return{type:"message",data:OW(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:NW(e.substring(1),t)};return wW[n]?e.length>1?{type:wW[n],data:e.substring(1)}:{type:wW[n]}:xW},NW=(e,t)=>{if(PW){const n=(e=>{let t,n,r,i,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=RW[e.charCodeAt(t)],r=RW[e.charCodeAt(t+1)],i=RW[e.charCodeAt(t+2)],o=RW[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c})(e);return OW(n,t)}return{base64:!0,data:e}},OW=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,DW=String.fromCharCode(30);function MW(){return new TransformStream({transform(e,t){!function(e,t){SW&&e.data instanceof Blob?e.data.arrayBuffer().then(AW).then(t):CW&&(e.data instanceof ArrayBuffer||_W(e.data))?t(AW(e.data)):kW(e,!1,(e=>{EW||(EW=new TextEncoder),t(EW.encode(e))}))}(e,(n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)}))}})}let LW;function FW(e){return e.reduce(((e,t)=>e+t.length),0)}function UW(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function $W(e){if(e)return function(e){for(var t in $W.prototype)e[t]=$W.prototype[t];return e}(e)}$W.prototype.on=$W.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},$W.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},$W.prototype.off=$W.prototype.removeListener=$W.prototype.removeAllListeners=$W.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},$W.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},$W.prototype.emitReserved=$W.prototype.emit,$W.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},$W.prototype.hasListeners=function(e){return!!this.listeners(e).length};const VW="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),BW="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function zW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const WW=BW.setTimeout,HW=BW.clearTimeout;function qW(e,t){t.useNativeTimers?(e.setTimeoutFn=WW.bind(BW),e.clearTimeoutFn=HW.bind(BW)):(e.setTimeoutFn=BW.setTimeout.bind(BW),e.clearTimeoutFn=BW.clearTimeout.bind(BW))}function GW(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class KW extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class YW extends $W{constructor(e){super(),this.writable=!1,qW(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new KW(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=jW(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class JW extends YW{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(DW),r=[];for(let i=0;i<n.length;i++){const e=jW(n[i],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach(((e,o)=>{kW(e,!1,(e=>{r[o]=e,++i===n&&t(r.join(DW))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=GW()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let QW=!1;try{QW="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(hoe){}const XW=QW;function ZW(){}class eH extends JW{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class tH extends $W{constructor(e,t,n){super(),this.createRequest=e,qW(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=zW(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(ZC){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(ZC){}try{n.setRequestHeader("Accept","*/*")}catch(ZC){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(ZC){return void this.setTimeoutFn((()=>{this._onError(ZC)}),0)}"undefined"!==typeof document&&(this._index=tH.requestsCount++,tH.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=ZW,e)try{this._xhr.abort()}catch(ZC){}"undefined"!==typeof document&&delete tH.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(tH.requestsCount=0,tH.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",nH);else if("function"===typeof addEventListener){addEventListener("onpagehide"in BW?"pagehide":"unload",nH,!1)}function nH(){for(let e in tH.requests)tH.requests.hasOwnProperty(e)&&tH.requests[e].abort()}const rH=function(){const e=iH({xdomain:!1});return e&&null!==e.responseType}();function iH(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||XW))return new XMLHttpRequest}catch(ZC){}if(!t)try{return new(BW[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(ZC){}}const oH="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class sH extends YW{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=oH?{}:zW(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(hoe){return this.emitReserved("error",hoe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;kW(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(ZC){}r&&VW((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=GW()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const aH=BW.WebSocket||BW.MozWebSocket;const lH={websocket:class extends sH{createSocket(e,t,n){return oH?new aH(e,t,n):t?new aH(e,t):new aH(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends YW{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(hoe){return this.emitReserved("error",hoe)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){LW||(LW=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===r){if(FW(n)<1)break;const e=UW(n,1);o=128===(128&e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(FW(n)<2)break;const e=UW(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(FW(n)<8)break;const e=UW(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(xW);break}i=o*Math.pow(2,32)+t.getUint32(4),r=3}else{if(FW(n)<i)break;const e=UW(n,i);a.enqueue(jW(o?e:LW.decode(e),t)),r=0}if(0===i||i>e){a.enqueue(xW);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=MW();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),i())})).catch((e=>{}))};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&VW((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends eH{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=rH&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new tH(iH,this.uri(),e)}}},cH=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uH=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function dH(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=cH.exec(e||""),o={},s=14;for(;s--;)o[uH[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}const hH="function"===typeof addEventListener&&"function"===typeof removeEventListener,pH=[];hH&&addEventListener("offline",(()=>{pH.forEach((e=>e()))}),!1);class fH extends $W{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=dH(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=dH(t.host).host);qW(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),hH&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pH.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&fH.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",fH.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,VW((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(fH.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hH&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=pH.indexOf(this._offlineEventListener);-1!==e&&pH.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}fH.protocol=4;class mH extends fH{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;fH.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;fH.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){n||(n=!0,c(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",l)};t.once("open",r),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class gH extends mH{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>lH[e])).filter((e=>!!e))),super(e,t)}}const vH="function"===typeof ArrayBuffer,yH=Object.prototype.toString,bH="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===yH.call(Blob),wH="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===yH.call(File);function xH(e){return vH&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||bH&&e instanceof Blob||wH&&e instanceof File}function SH(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(SH(e[t]))return!0;return!1}if(xH(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return SH(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&SH(e[n]))return!0;return!1}function CH(e){const t=[],n=e.data,r=e;return r.data=_H(n,t),r.attachments=t.length,{packet:r,buffers:t}}function _H(e,t){if(!e)return e;if(xH(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=_H(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=_H(e[r],t));return n}return e}function kH(e,t){return e.data=TH(e.data,t),delete e.attachments,e}function TH(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=TH(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=TH(e[n],t));return e}const AH=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],EH=5;var IH;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(IH||(IH={}));class RH{constructor(e){this.replacer=e}encode(e){return e.type!==IH.EVENT&&e.type!==IH.ACK||!SH(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===IH.EVENT?IH.BINARY_EVENT:IH.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==IH.BINARY_EVENT&&e.type!==IH.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=CH(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function PH(e){return"[object Object]"===Object.prototype.toString.call(e)}class jH extends $W{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===IH.BINARY_EVENT;n||t.type===IH.BINARY_ACK?(t.type=n?IH.EVENT:IH.ACK,this.reconstructor=new NH(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!xH(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===IH[n.type])throw new Error("unknown packet type "+n.type);if(n.type===IH.BINARY_EVENT||n.type===IH.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!jH.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(ZC){return!1}}static isPayloadValid(e,t){switch(e){case IH.CONNECT:return PH(t);case IH.DISCONNECT:return void 0===t;case IH.CONNECT_ERROR:return"string"===typeof t||PH(t);case IH.EVENT:case IH.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===AH.indexOf(t[0]));case IH.ACK:case IH.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class NH{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=kH(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function OH(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const DH=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class MH extends $W{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[OH(e,"open",this.onopen.bind(this)),OH(e,"packet",this.onpacket.bind(this)),OH(e,"error",this.onerror.bind(this)),OH(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(DH.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const a={type:IH.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),i),s=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(((t,r)=>{const i=(e,n)=>e?r(e):t(n);i.withError=!0,n.push(i),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];n(null,...o)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:IH.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case IH.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case IH.EVENT:case IH.BINARY_EVENT:this.onevent(e);break;case IH.ACK:case IH.BINARY_ACK:this.onack(e);break;case IH.DISCONNECT:this.ondisconnect();break;case IH.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:IH.ACK,id:e,data:i})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:IH.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function LH(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}LH.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},LH.prototype.reset=function(){this.attempts=0},LH.prototype.setMin=function(e){this.ms=e},LH.prototype.setMax=function(e){this.max=e},LH.prototype.setJitter=function(e){this.jitter=e};class FH extends $W{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,qW(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new LH({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||e;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new gH(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=OH(t,"open",(function(){n.onopen(),e&&e()})),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=OH(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),i(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(OH(e,"ping",this.onping.bind(this)),OH(e,"data",this.ondata.bind(this)),OH(e,"error",this.onerror.bind(this)),OH(e,"close",this.onclose.bind(this)),OH(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(ZC){this.onclose("parse error",ZC)}}ondecoded(e){VW((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new MH(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const UH={};function $H(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=dH(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=UH[i]&&o in UH[i].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new FH(r,t):(UH[i]||(UH[i]=new FH(r,t)),a=UH[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign($H,{Manager:FH,Socket:MH,io:$H,connect:$H});const VH=()=>(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",pl:1,py:1.2},children:[" ",(0,Ke.jsx)(rt,{sx:{height:8,width:8,borderRadius:"50%",bgcolor:"grey.400",animation:"bounce 1.4s infinite ease-in-out both",mx:.5,animationName:"bounceKeyframes"}}),(0,Ke.jsx)(rt,{sx:{height:8,width:8,borderRadius:"50%",bgcolor:"grey.400",animation:"bounce 1.4s infinite ease-in-out both",mx:.5,animationDelay:"0.2s",animationName:"bounceKeyframes"}}),(0,Ke.jsx)(rt,{sx:{height:8,width:8,borderRadius:"50%",bgcolor:"grey.400",animation:"bounce 1.4s infinite ease-in-out both",mx:.5,animationDelay:"0.4s",animationName:"bounceKeyframes"}}),(0,Ke.jsx)("style",{children:"\n          @keyframes bounceKeyframes {\n            0%, 80%, 100% {\n              transform: scale(0);\n            }\n            40% {\n              transform: scale(1.0);\n            }\n          }\n        "})]}),BH=e=>{var t;let{board:n}=e;n.length;const r=(null===(t=n[0])||void 0===t?void 0:t.length)||0,i={"\ud83d\udd34":"#ff4136","\ud83d\udfe1":"#ffdc00","\u26aa":"#dddddd"};return(0,Ke.jsx)(rt,{sx:{bgcolor:"#0074D9",p:1,borderRadius:2,mb:2,display:"inline-block",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)"},children:(0,Ke.jsxs)(pN,{container:!0,spacing:.5,sx:{width:"auto"},children:[" ",n.map(((e,t)=>(0,Ke.jsx)(pN,{container:!0,item:!0,xs:12,justifyContent:"center",spacing:.5,children:e.map(((e,n)=>(0,Ke.jsx)(pN,{item:!0,children:(0,Ke.jsx)(rt,{sx:{width:{xs:30,sm:35},height:{xs:30,sm:35},borderRadius:"50%",bgcolor:i[e]||"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"}})},`${t}-${n}`)))},t))),(0,Ke.jsx)(pN,{container:!0,item:!0,xs:12,justifyContent:"center",spacing:.5,sx:{mt:.5},children:Array.from({length:r}).map(((e,t)=>(0,Ke.jsx)(pN,{item:!0,sx:{width:{xs:30,sm:35},textAlign:"center"},children:(0,Ke.jsx)($T,{variant:"caption",sx:{color:"white",fontWeight:"bold"},children:t+1})},`label-${t}`)))})]})})},zH=()=>{var e,t,n;const{currentUser:r}=_k(),[i,o]=(0,l.useState)([]),[s,a]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),[m,g]=(0,l.useState)(!1),[v,y]=(0,l.useState)(null),b=ne(),[w,x]=(0,l.useState)(null),S=(0,l.useRef)(null);(0,l.useEffect)((()=>{(()=>{var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[i]);(0,l.useEffect)((()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app",REACT_APP_SHOTSTACK_API_KEY:"c0Bpc85oj7cHuDdfhz54eQJmmoEI1qauJyodpw9d",REACT_APP_SOCKET_SERVER_URL:"wss://sideeye-backend-production.up.railway.app",REACT_APP_STREAM_API_KEY:"2nufecjmzmzh"}.REACT_APP_SOCKET_URL||"https://sideeye-backend-production.up.railway.app";console.log(`[Frontend] Connecting Socket.IO to: ${e}`);const t=$H(e,{});return y(t),t.on("connect",(()=>{console.log("[Frontend] Socket connected:",t.id)})),t.on("disconnect",(e=>{console.log("[Frontend] Socket disconnected:",e)})),t.on("connect_error",(e=>{console.error("[Frontend] Socket connection error:",e)})),()=>{console.log("[Frontend] Disconnecting socket..."),t.disconnect(),y(null)}}),[]),(0,l.useEffect)((()=>{if(v){const e=e=>{e&&"ai"===e.sender&&"string"===typeof e.text?(console.log("[Frontend] Received 'ai-message' via Socket:",e),o((t=>[...t,{sender:"ai",text:e.text}]))):console.warn("[Frontend] Received malformed 'ai-message' data via Socket:",e)};return v.on("ai-message",e),()=>{console.log("[Frontend] Removing 'ai-message' listener"),v.off("ai-message",e)}}}),[v]),(0,l.useEffect)((()=>{if("help"===new URLSearchParams(b.search).get("intent")&&0===i.length){console.log("[Frontend] Detected intent=help from URL params.");o([{sender:"ai",text:"Hi there! Looks like you clicked 'Get Help' in settings. How can I assist you today? Just type your question below. \ud83d\ude0a"}])}}),[b.search]),(0,l.useEffect)((()=>{const e=localStorage.getItem("sadeai_chat_history");e&&o(JSON.parse(e))}),[]),(0,l.useEffect)((()=>{localStorage.setItem("sadeai_chat_history",JSON.stringify(i))}),[i]);const C=(0,l.useRef)(null),_=()=>{C.current&&(clearInterval(C.current),C.current=null)},k=()=>{f((e=>{if(!e||!e.active)return console.log("[Frontend] handleTimerTick: No active state, clearing interval."),_(),null;const t=e.timer-1;return console.log(`[Frontend] handleTimerTick: Prev Timer: ${e.timer}, New Timer: ${t}, Step Index: ${e.currentStepIndex}`),t<=0?(console.log("[Frontend] handleTimerTick: Timer reached 0, starting next step."),setTimeout(T,0),{...e,timer:0}):{...e,timer:t}}))},T=()=>{console.log("[Frontend] startNextBreathingStep called."),_(),f((e=>{if(!e||!e.active)return console.warn("[Frontend] startNextBreathingStep: No active breathing state found on entry."),null;const t=e.currentStepIndex+1;if(console.log(`[Frontend] startNextBreathingStep: Prev Index: ${e.currentStepIndex}, Next Index: ${t}`),t>=e.steps.length)return console.log("[Frontend] startNextBreathingStep: Exercise finished."),console.log("[Frontend] endBreathingExercise called."),_(),o((e=>[...e,{sender:"ai",text:"Nicely done! Hope that helped you feel a bit calmer, mate. \ud83d\ude0a"}])),f(null),u(!1),null;const n=e.steps[t];console.log("[Frontend] startNextBreathingStep: Next step details:",n),o((e=>{const t=e[e.length-1];return"ai"===(null===t||void 0===t?void 0:t.sender)&&(null===t||void 0===t?void 0:t.text)===n.text?e:[...e,{sender:"ai",text:n.text}]})),C.current=setInterval(k,1e3),console.log("[Frontend] startNextBreathingStep: Interval started:",C.current);const r={...e,currentStepIndex:t,timer:n.duration,intervalId:C.current};return console.log("[Frontend] startNextBreathingStep: Setting new state:",r),r}))},A=()=>{f((e=>null!==e&&void 0!==e&&e.active?(console.log("[Frontend] Manually stopping breathing exercise."),_(),o((e=>[...e,{sender:"ai",text:"Okay, no worries! Stopping the exercise now."}])),u(!1),null):e))};(0,l.useEffect)((()=>()=>_()),[]);const E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.trim())return;if(!r)return console.error("[SadeAIPage] Error: No user logged in. Cannot send message."),void o((e=>[...e,{sender:"ai",text:"Sorry, I can't send messages if you're not logged in."}]));const n={sender:"user",text:e};o((e=>[...e,n])),a(""),u(!0),g(!1);try{if(console.log("[Frontend] sendMessage called. forceSearch=",t,"Connect4Game:",w,"ActiveGame:",d,"BreathingState:",p),null!==p&&void 0!==p&&p.active&&e.toLowerCase().includes("stop"))return void A();if(null!==p&&void 0!==p&&p.active)return void o((e=>[...e,{sender:"ai",text:"Let's focus on breathing for now. You can type 'stop' if you need to."}]));if(d&&"guess_the_number"===d.gameType){console.log("[Frontend] Guess the Number game is active. Processing locally.");const t=parseInt(e,10),n=e.toLowerCase();if(isNaN(t))if(n.includes("even")||n.includes("odd")){const e=d.targetNumber%2===0?"Okay, cheeky hint for you... It's an **even** number! \ud83d\ude09":"Alright, since you asked nicely... It's an **odd** number! \ud83e\udd14";o((t=>[...t,{sender:"ai",text:e}]))}else{const e="Ah, trying to be clever? \ud83d\ude09 Just give me a number guess between 1 and 100!";o((t=>[...t,{sender:"ai",text:e}]))}else R(t);return}if(w&&"connect_4"===w.gameType&&!w.gameOver&&"User"===w.turn){console.log("[Frontend] Connect 4 game is active and it's User's turn. Processing input as move.");const t=parseInt(e.trim(),10);if(!isNaN(t)&&t>=1&&t<=7){console.log(`[Frontend] Sending Connect 4 move (column ${t}) to backend.`);const e="https://sideeye-backend-production.up.railway.app";if(!e)throw console.error("[SadeAIPage] ERROR: REACT_APP_API_URL is not defined."),new Error("Configuration error: Backend URL not set.");const n=`${e}/api/sade-ai`,i={message:`connect4_move_${t}`,userId:r.uid};console.log("[Frontend] Sending Connect 4 move request body:",i);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},a=await fetch(n,s);if(!a.ok){let e=`HTTP error! status: ${a.status}`;try{e=(await a.json()).error||e}catch(ZC){}throw new Error(e)}const l=await a.json();if(console.log("[Frontend] Connect 4 move response data:",l),"connect_4"===l.gameUpdate&&l.board&&l.response){console.log("[Frontend] Received Connect 4 game update from backend.");const e={gameType:"connect_4",board:l.board,turn:l.turn,gameOver:l.gameOver,winner:l.winner};x(e),o((e=>[...e,{sender:"ai",text:l.response}])),l.gameOver&&console.log("[Frontend] Connect 4 game is over. Winner:",l.winner)}else l.error?o((e=>[...e,{sender:"ai",text:l.error}])):(console.error("[SadeAIPage] Received unexpected response structure after Connect 4 move:",l),o((e=>[...e,{sender:"ai",text:"Sorry, something went wrong with the game."}])),x(null))}else console.log("[Frontend] Connect 4 active, but input is not a valid column number (1-7)."),o((e=>[...e,{sender:"ai",text:"Please enter a column number from 1 to 7 to make your move, mate."}]));return}console.log("[Frontend] No active game/exercise or local action. Sending message to backend via HTTP.");const n="https://sideeye-backend-production.up.railway.app";if(!n)return console.error("[SadeAIPage] ERROR: REACT_APP_API_URL is not defined."),void o((e=>[...e,{sender:"ai",text:"Configuration error: Backend URL not set."}]));const s=`${n}/api/sade-ai`,a={message:e,history:i.slice(-10),forceSearch:t,userId:r.uid};console.log("[Frontend] Sending HTTP request body:",a);const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},c=await fetch(s,l);if(!c.ok){let e=`HTTP error! status: ${c.status}`;try{e=(await c.json()).error||e}catch(ZC){}throw new Error(e)}const u=await c.json();if(console.log("[Frontend] HTTP Backend response data:",u),u.startBreathingExercise&&u.steps){console.log("[Frontend] sendMessage: Received signal to start breathing exercise."),o((e=>[...e,{sender:"ai",text:u.response}]));const e={active:!0,steps:u.steps,currentStepIndex:-1,timer:0,intervalId:null};f(e),setTimeout(T,100),x(null),h(null)}else if("guess_the_number"===u.startGame&&u.response)I("guess_the_number",u.response),x(null),f(null);else if("connect_4"===u.startGame&&u.board&&u.response){console.log("[Frontend] sendMessage: Received signal to start Connect 4 game."),o((e=>[...e,{sender:"ai",text:u.response}]));const e={gameType:"connect_4",board:u.board,turn:"User",gameOver:!1,winner:null};x(e),h(null),f(null)}else u.response?o((e=>[...e,{sender:"ai",text:u.response}])):(console.error("[SadeAIPage] Received unexpected HTTP response structure:",u),o((e=>[...e,{sender:"ai",text:"Sorry, I got a bit confused there."}])))}catch(hoe){console.error("[SadeAIPage] sendMessage Error:",hoe),o((t=>[...t,{sender:"ai",text:`Sorry, there was an error: ${hoe.message||"Unknown error"}`}]))}finally{console.log("[SadeAIPage sendMessage finally] Setting loading to false."),u(!1)}},I=(e,t)=>{if("guess_the_number"===e){const e={gameType:"guess_the_number",targetNumber:Math.floor(100*Math.random())+1,guessesMade:0,lowerBound:1,upperBound:100};console.log("[Frontend] startGame called. Setting activeGame state to:",e),h(e),o((e=>[...e,{sender:"ai",text:t}]))}},R=e=>{if(!d||"guess_the_number"!==d.gameType)return;let t="";const n=d.guessesMade+1;let r=d.lowerBound,i=d.upperBound,s=!1;console.log(`[Frontend] handleGuess called with valid number: ${e}`),e<1||e>100?(t="Whoops! That number's not between 1 and 100, mate. Try again!",console.log("[Frontend] handleGuess: Input out of bounds.")):e===d.targetNumber?(t=`Yes! You got it in ${n} guesses! Proper smart. \ud83c\udf89 Fancy another round? (Just ask!)`,s=!0):e<d.targetNumber?(t=`A bit higher than ${e}... \ud83d\ude09`,r=Math.max(d.lowerBound,e+1)):(t=`Lower than ${e}, try again! \ud83d\udc47`,i=Math.min(d.upperBound,e-1)),o((e=>[...e,{sender:"ai",text:t}])),s?h(null):e>=1&&e<=100&&h({...d,guessesMade:n,lowerBound:r,upperBound:i})},P=null===p||void 0===p?void 0:p.active,j=null!==(e=null===p||void 0===p?void 0:p.currentStepIndex)&&void 0!==e?e:-1,N=P&&j>=0?p.steps[j]:null,O=null!==(t=null===N||void 0===N?void 0:N.duration)&&void 0!==t?t:0,D=null!==(n=null===p||void 0===p?void 0:p.timer)&&void 0!==n?n:0,M=O>0?(O-D)/O*100:0;return(0,Ke.jsx)(rt,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #FFF8DC 0%, #FFC0CB 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",pb:{xs:10,sm:7},pt:{xs:2,sm:6}},children:(0,Ke.jsxs)(nT,{elevation:6,sx:{width:"100%",maxWidth:500,p:{xs:2,sm:4},borderRadius:4,mb:2,mt:2,bgcolor:"#fffefa",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.12)"},children:[(0,Ke.jsxs)($T,{variant:"h4",align:"center",fontWeight:700,color:"primary.dark",gutterBottom:!0,sx:{letterSpacing:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:["Sade AI \u2728",(0,Ke.jsx)($T,{component:"span",variant:"body1",sx:{ml:1.5,fontWeight:400,fontSize:"1.1rem",color:"text.secondary"},children:"(SHA-DEY)"})]}),(0,Ke.jsx)(cR,{sx:{mb:2}}),(0,Ke.jsxs)(rt,{sx:{minHeight:320,maxHeight:{xs:350,sm:400},overflowY:"auto",bgcolor:"rgba(255, 255, 255, 0.6)",borderRadius:3,p:2,mb:2,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.05)",transition:"background 0.3s"},children:[0===i.length&&(0,Ke.jsxs)($T,{color:"text.secondary",align:"center",sx:{mt:8},children:["Say hello to ",(0,Ke.jsx)("b",{children:"Sade AI"}),", your friendly AI chatbot! \ud83c\udf38",(0,Ke.jsx)("br",{}),"Ask me anything! Search the web for information, or just chat."]}),i.map(((e,t)=>(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"ai"===e.sender?"flex-start":"flex-end",justifyContent:"user"===e.sender?"flex-end":"flex-start",mb:1.5},children:["ai"===e.sender&&(0,Ke.jsx)(NT,{src:"/images/sade-avatar.jpg",alt:"Sade AI Avatar",sx:{width:36,height:36,mr:1.5}}),(0,Ke.jsx)(rt,{sx:{bgcolor:"user"===e.sender?"primary.main":"#f3f6fb",color:"user"===e.sender?"primary.contrastText":"text.primary",borderRadius:"user"===e.sender?"18px 18px 4px 18px":"18px 18px 18px 4px",px:2,py:1.2,maxWidth:"80%",boxShadow:"user"===e.sender?"0 2px 8px 0 rgba(33, 150, 243, 0.10)":"0 2px 8px 0 rgba(31, 38, 135, 0.05)",fontSize:"1.08rem",wordBreak:"break-word",fontFamily:"inherit"},children:e.text})]},t))),c&&!d&&!(null!==p&&void 0!==p&&p.active)&&(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",mb:1.5},children:[(0,Ke.jsx)(NT,{src:"/images/sade-avatar.jpg",alt:"Sade AI Avatar",sx:{width:36,height:36,mr:1.5}}),(0,Ke.jsx)(rt,{sx:{bgcolor:"#f3f6fb",borderRadius:"18px 18px 18px 4px",px:1,py:.5,display:"inline-block"},children:(0,Ke.jsx)(VH,{})})]}),(0,Ke.jsx)("div",{ref:S})]}),!c&&!d&&!(null!==p&&void 0!==p&&p.active)&&i.length<=1&&(0,Ke.jsxs)(rt,{sx:{pt:1,pb:1.5,mb:2,overflow:"hidden"},children:[(0,Ke.jsx)($T,{variant:"caption",sx:{width:"100%",textAlign:"center",color:"text.secondary",mb:1},children:"Try asking:"}),(0,Ke.jsx)(rt,{sx:{display:"flex",gap:1,flexWrap:"nowrap",overflowX:"auto",justifyContent:"flex-start",px:{xs:2,sm:0},pb:1,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none","-ms-overflow-style":"none"},children:["Play Connect 4","I'm feeling a bit down today","Can we just talk?","Tell me a fact","What does 'wagwan' mean?","Play 'Would You Rather?'","Feeling a bit lost","Play Guess the Number","Breathing exercise"].map(((e,t)=>(0,Ke.jsx)($L,{label:e,onClick:()=>{E(e)},clickable:!0,variant:"outlined",color:"primary",size:"small",disabled:c,sx:{fontWeight:500}},t)))})]}),d&&!(null!==p&&void 0!==p&&p.active)&&"guess_the_number"===d.gameType&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",textAlign:"center",mb:1,color:"text.secondary"},children:["Guessing between ",d.lowerBound," and ",d.upperBound," (Guess #",d.guessesMade+1,")"]}),P&&j>=0&&(0,Ke.jsxs)(rt,{sx:{p:1,mt:1,border:"1px dashed grey",borderRadius:2,textAlign:"center",bgcolor:"rgba(255,255,255,0.7)"},children:[(0,Ke.jsx)($T,{variant:"caption",display:"block",sx:{mb:.5,fontWeight:500},children:null===N||void 0===N?void 0:N.text}),(0,Ke.jsx)(vW,{variant:"determinate",value:M,sx:{height:8,borderRadius:4,mb:.5,"& .MuiLinearProgress-bar":{transition:"transform .2s linear"}}}),(0,Ke.jsxs)($T,{variant:"caption",display:"block",children:[D,"s remaining... (type 'stop' to end)"]})]}),w&&"connect_4"===w.gameType&&!w.gameOver&&(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",width:"100%",mb:2},children:(0,Ke.jsx)(BH,{board:w.board})}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1,alignItems:"center",position:{xs:"fixed",sm:"static"},bottom:{xs:64,sm:"auto"},left:0,width:{xs:"100vw",sm:"auto"},maxWidth:{xs:"100vw",sm:"none"},bgcolor:{xs:"rgba(255,255,255,0.95)",sm:"transparent"},p:{xs:2,sm:0},borderTop:{xs:"1px solid #eee",sm:"none"},zIndex:1200},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,variant:"outlined",placeholder:null!==p&&void 0!==p&&p.active?"Focus on breathing... (or type 'stop')":d?"Enter your guess...":"Type your message...",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s.trim()&&E(s,m)},disabled:c||!(null!==v&&void 0!==v&&v.connected),type:"guess_the_number"===(null===d||void 0===d?void 0:d.gameType)?"number":"text",sx:{bgcolor:"white",borderRadius:2,boxShadow:"0 1px 4px 0 rgba(31,38,135,0.04)"}}),null!==p&&void 0!==p&&p.active?(0,Ke.jsx)(XA,{variant:"contained",color:"secondary",onClick:A,sx:{minWidth:80,fontWeight:600},children:"Stop"}):(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(XA,{variant:"contained",onClick:()=>E(s,!1),disabled:c||!s.trim()||!(null!==v&&void 0!==v&&v.connected),sx:{minWidth:80,fontWeight:600},children:d?"Guess":"Send"}),(0,Ke.jsx)(EA,{color:"primary",onClick:()=>E(s,!0),disabled:c||!s.trim()||!(null!==v&&void 0!==v&&v.connected),sx:{border:"1px solid",borderColor:"primary.main",ml:.5},title:"Search the web for this query",children:(0,Ke.jsx)(yW.A,{})})]}),!d&&!(null!==p&&void 0!==p&&p.active)&&(0,Ke.jsx)(XA,{variant:"outlined",color:"secondary",onClick:()=>{o([]),localStorage.removeItem("sadeai_chat_history"),h(null),f(null)},disabled:c,sx:{minWidth:90,fontWeight:500},children:"Clear Chat"})]})]})})},WH=(0,fT.A)((0,Ke.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),HH=(0,fT.A)((0,Ke.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),qH=(0,fT.A)((0,Ke.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),GH=(0,fT.A)((0,Ke.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link"),KH=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),YH=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),JH=(0,fT.A)((0,Ke.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),QH=(0,fT.A)((0,Ke.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),XH=(0,fT.A)((0,Ke.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp"),ZH=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic"),eq=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),tq=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff"),nq=(0,fT.A)((0,Ke.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),rq=(0,fT.A)((0,Ke.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter"),iq=(0,fT.A)((0,Ke.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook"),oq=(0,fT.A)((0,Ke.jsx)("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp"),sq=(0,fT.A)((0,Ke.jsx)("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram"),aq=(0,fT.A)((0,Ke.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}),"VolumeOff"),lq=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),cq=e=>{var t;let{open:n,onClose:r,onSubmit:i,initialData:o,title:s="Create Room",submitButtonText:a="Create"}=e;const[c,u]=(0,l.useState)({name:(null===o||void 0===o?void 0:o.name)||"",description:(null===o||void 0===o?void 0:o.description)||"",isPrivate:(null===o||void 0===o?void 0:o.isPrivate)||!1,password:(null===o||void 0===o?void 0:o.password)||"",tags:(null===o||void 0===o?void 0:o.tags)||[]}),[d,h]=(0,l.useState)(null);return(0,Ke.jsx)(g$,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:(0,Ke.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(c,d)},children:[(0,Ke.jsx)(Z$,{children:s}),(0,Ke.jsx)(s$,{children:(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2,pt:1},children:[(0,Ke.jsx)(Uj,{label:"Name",value:c.name,onChange:e=>u((t=>({...t,name:e.target.value}))),required:!0,fullWidth:!0}),(0,Ke.jsx)(Uj,{label:"Description",value:c.description,onChange:e=>u((t=>({...t,description:e.target.value}))),multiline:!0,rows:3,fullWidth:!0}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(RV,{checked:c.isPrivate,onChange:e=>u((t=>({...t,isPrivate:e.target.checked})))}),label:"Private Room"}),c.isPrivate&&(0,Ke.jsx)(Uj,{label:"Password",type:"password",value:c.password,onChange:e=>u((t=>({...t,password:e.target.value}))),required:c.isPrivate,fullWidth:!0}),(0,Ke.jsxs)(rt,{sx:{mt:1},children:[(0,Ke.jsxs)(XA,{variant:"outlined",component:"label",fullWidth:!0,children:["Upload Thumbnail",(0,Ke.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]?h(e.target.files[0]):h(null)}})]}),d&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",mt:1},children:["Selected: ",d.name]}),!d&&(null===o||void 0===o?void 0:o.thumbnailUrl)&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",mt:1},children:["Current: ",o.thumbnailUrl.substring(o.thumbnailUrl.lastIndexOf("/")+1)]})]}),(0,Ke.jsx)(Uj,{label:"Tags (comma separated)",value:null===(t=c.tags)||void 0===t?void 0:t.join(", "),onChange:e=>u((t=>({...t,tags:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)}))),fullWidth:!0,helperText:"Enter tags separated by commas"})]})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:r,children:"Cancel"}),(0,Ke.jsx)(XA,{type:"submit",variant:"contained",color:"primary",children:a})]})]})})};let uq=!0,dq=!0;function hq(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function pq(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function fq(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(uq=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function mq(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(dq=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function gq(){if("object"===typeof window){if(uq)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function vq(e,t){dq&&console.warn(e+" is deprecated, please use "+t+" instead.")}function yq(e){return"[object Object]"===Object.prototype.toString.call(e)}function bq(e){return yq(e)?Object.keys(e).reduce((function(t,n){const r=yq(e[n]),i=r?bq(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function wq(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?wq(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{wq(e,e.get(t),n)}))})))}function xq(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&wq(e,n,i)}))})),i}const Sq=gq;function Cq(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"===typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){let o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{n=n.filter((e=>"videoinput"===e.kind));let s=n.find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),Sq("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Sq("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function _q(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function kq(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Tq(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else pq(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Aq(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Eq(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"===typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function Iq(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>xq(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),pq(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>xq(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Rq(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Pq(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Rq(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function jq(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Nq(e,t){pq(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function Oq(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){vq("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Dq(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function Mq(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Lq(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(ZC){if("TypeError"!==ZC.name)throw ZC;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function Fq(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Uq(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),pq(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function $q(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){vq("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Vq(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Bq(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function zq(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Wq(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Hq(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function qq(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function Gq(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Kq(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function Yq(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Jq(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Jq(e){return e&&void 0!==e.video?Object.assign({},e,{video:bq(e.video)}):e}function Qq(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(vq("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Xq(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Zq(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function eG(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var tG=n(9569),nG=n.n(tG);function rG(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=nG().parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,pq(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function iG(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||pq(e,"icecandidate",(e=>{if(e.candidate){const t=nG().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function oG(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=nG().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=nG().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=nG().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function sG(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},pq(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function aG(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function lG(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function cG(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function uG(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const s=gq,a=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(hq(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(hq(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=parseInt(hq(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=hq(n.userAgent,/Version\/(\d+(\.?\d+))/,1)}return t}(e),l={browserDetails:a,commonShim:o,extractVersion:hq,disableLog:fq,disableWarnings:mq,sdp:tG};switch(a.browser){case"chrome":if(!t||!jq||!n.shimChrome)return s("Chrome shim is not included in this adapter release."),l;if(null===a.version)return s("Chrome shim can not determine version, not shimming."),l;s("adapter.js shimming chrome."),l.browserShim=t,cG(e,a),uG(e),Cq(e,a),kq(e),jq(e,a),Tq(e),Pq(e,a),Aq(e),Eq(e),Iq(e),Nq(e,a),rG(e),iG(e),aG(e),oG(e,a),sG(e),lG(e,a);break;case"firefox":if(!r||!Lq||!n.shimFirefox)return s("Firefox shim is not included in this adapter release."),l;s("adapter.js shimming firefox."),l.browserShim=r,cG(e,a),uG(e),Oq(e,a),Lq(e,a),Mq(e),$q(e),Fq(e),Uq(e),Vq(e),Bq(e),zq(e),Wq(e),Hq(e),rG(e),aG(e),oG(e,a),sG(e);break;case"safari":if(!i||!n.shimSafari)return s("Safari shim is not included in this adapter release."),l;s("adapter.js shimming safari."),l.browserShim=i,cG(e,a),uG(e),Qq(e),Zq(e),Kq(e),qq(e),Gq(e),Xq(e),Yq(e),eG(e),rG(e),iG(e),oG(e,a),sG(e),lG(e,a);break;default:s("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const dG=Symbol.for("protobuf-ts/message-type");function hG(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var pG,fG,mG;function gG(e){var t,n,r,i;return e.localName=null!==(t=e.localName)&&void 0!==t?t:hG(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:hG(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:mG.NO,e.opt=null!==(i=e.opt)&&void 0!==i?i:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function vG(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(pG||(pG={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(fG||(fG={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(mG||(mG={}));class yG{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some((e=>!r.includes(e))))return!1;if(!n&&r.some((e=>!i.known.includes(e))))return!1;if(t<1)return!0;for(const o of i.oneofs){const r=e[o];if(!vG(r))return!1;if(void 0===r.oneofKind)continue;const i=this.fields.find((e=>e.localName===r.oneofKind));if(!i)return!1;if(!this.field(r[r.oneofKind],i,n,t))return!1}for(const o of this.fields)if(void 0===o.oneof&&!this.field(e[o.localName],o,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,pG.INT32,r):this.scalar(e,pG.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),pG.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let i=0;i<e.length&&i<r;i++)if(!t.isAssignable(e[i],r-1))return!1}else for(let i=0;i<e.length&&i<r;i++)if(!t.is(e[i],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case pG.UINT64:case pG.FIXED64:case pG.INT64:case pG.SFIXED64:case pG.SINT64:switch(n){case fG.BIGINT:return"bigint"==r;case fG.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case pG.BOOL:return"boolean"==r;case pG.STRING:return"string"==r;case pG.BYTES:return e instanceof Uint8Array;case pG.DOUBLE:case pG.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case pG.INT32:case pG.FIXED32:case pG.SFIXED32:case pG.SINT32:case pG.UINT32:return this.scalars(r.slice(0,n).map((e=>parseInt(e))),t,n);case pG.BOOL:return this.scalars(r.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(r,t,n,fG.STRING)}}}function bG(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function wG(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let xG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),SG=[];for(let n=0;n<xG.length;n++)SG[xG[n].charCodeAt(0)]=n;function CG(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function _G(e,t,n){for(let o=0;o<28;o+=7){const r=e>>>o,i=!(r>>>7==0&&0==t),s=255&(i?128|r:r);if(n.push(s),!i)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0),o=255&(i?128|r:r);if(n.push(o),!i)return}n.push(t>>>31&1)}}SG["-".charCodeAt(0)]=xG.indexOf("+"),SG["_".charCodeAt(0)]=xG.indexOf("/");const kG=4294967296;function TG(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function o(t,o){const s=Number(e.slice(t,o));i*=n,r=r*n+s,r>=kG&&(i+=r/kG|0,r%=kG)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),[t,r,i]}function AG(e,t){if(t>>>0<=2097151)return""+(kG*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,o=n+8147497*r,s=2*r,a=1e7;function l(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=a&&(o+=Math.floor(i/a),i%=a),o>=a&&(s+=Math.floor(o/a),o%=a),l(s,0)+l(o,s)+l(i,1)}function EG(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function IG(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}let RG;function PG(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64;RG=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();const jG=/^-?[0-9]+$/,NG=4294967296,OG=2147483648;class DG{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*NG+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class MG extends DG{static from(e){if(RG)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=RG.C(e);case"number":if(0===e)return this.ZERO;e=RG.C(e);case"bigint":if(!e)return this.ZERO;if(e<RG.UMIN)throw new Error("signed value for ulong");if(e>RG.UMAX)throw new Error("ulong too large");return RG.V.setBigUint64(0,e,!0),new MG(RG.V.getInt32(0,!0),RG.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!jG.test(e))throw new Error("string is no integer");let[t,n,r]=TG(e);if(t)throw new Error("signed value for ulong");return new MG(n,r);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new MG(e,e/NG)}throw new Error("unknown value "+typeof e)}toString(){return RG?this.toBigInt().toString():AG(this.lo,this.hi)}toBigInt(){return PG(RG),RG.V.setInt32(0,this.lo,!0),RG.V.setInt32(4,this.hi,!0),RG.V.getBigUint64(0,!0)}}MG.ZERO=new MG(0,0);class LG extends DG{static from(e){if(RG)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=RG.C(e);case"number":if(0===e)return this.ZERO;e=RG.C(e);case"bigint":if(!e)return this.ZERO;if(e<RG.MIN)throw new Error("signed long too small");if(e>RG.MAX)throw new Error("signed long too large");return RG.V.setBigInt64(0,e,!0),new LG(RG.V.getInt32(0,!0),RG.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!jG.test(e))throw new Error("string is no integer");let[t,n,r]=TG(e);if(t){if(r>OG||r==OG&&0!=n)throw new Error("signed long too small")}else if(r>=OG)throw new Error("signed long too large");let i=new LG(n,r);return t?i.negate():i;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new LG(e,e/NG):new LG(-e,-e/NG).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!==(this.hi&OG)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new LG(t,e)}toString(){if(RG)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+AG(e.lo,e.hi)}return AG(this.lo,this.hi)}toBigInt(){return PG(RG),RG.V.setInt32(0,this.lo,!0),RG.V.setInt32(4,this.hi,!0),RG.V.getBigInt64(0,!0)}}function FG(e,t){if(!e)throw new Error(t)}LG.ZERO=new LG(0,0);function UG(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function $G(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function VG(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}function BG(e,t){switch(t){case fG.BIGINT:return e.toBigInt();case fG.NUMBER:return e.toNumber();default:return e.toString()}}class zG{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=bG(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[i,o]of Object.entries(e)){const e=this.fMap[i];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${i}`);continue}const s=e.localName;let a;if(e.oneof){if(null===o&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),a=t[e.oneof]={oneofKind:s}}else a=t;if("map"==e.kind){if(null===o)continue;this.assert(wG(o),e.name,o);const t=a[s];for(const[r,i]of Object.entries(o)){let o;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":o=e.V.T().internalJsonRead(i,n);break;case"enum":if(o=this.enum(e.V.T(),i,e.name,n.ignoreUnknownFields),!1===o)continue;break;case"scalar":o=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==o,e.name+" map value",i);let s=r;e.K==pG.BOOL&&(s="true"==s||"false"!=s&&s),s=this.scalar(s,e.K,fG.STRING,e.name).toString(),t[s]=o}}else if(e.repeat){if(null===o)continue;this.assert(Array.isArray(o),e.name,o);const t=a[s];for(const r of o){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":if(i=this.enum(e.T(),r,e.name,n.ignoreUnknownFields),!1===i)continue;break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,o),t.push(i)}}else switch(e.kind){case"message":if(null===o&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}a[s]=e.T().internalJsonRead(o,n,a[s]);break;case"enum":if(null===o)continue;let t=this.enum(e.T(),o,e.name,n.ignoreUnknownFields);if(!1===t)continue;a[s]=t;break;case"scalar":if(null===o)continue;a[s]=this.scalar(o,e.T,e.L,e.name)}}}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&FG(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return FG(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let i=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(i=t.substring(e[2].length));let o=e[1][i];return("undefined"!==typeof o||!r)&&(FG("number"==typeof o,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),o)}FG(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case pG.DOUBLE:case pG.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==pG.FLOAT&&VG(r),r;case pG.INT32:case pG.FIXED32:case pG.SFIXED32:case pG.SINT32:case pG.UINT32:if(null===e)return 0;let o;if("number"==typeof e?o=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":o=Number(e)),void 0===o)break;return t==pG.UINT32?$G(o):UG(o),o;case pG.INT64:case pG.SFIXED64:case pG.SINT64:if(null===e)return BG(LG.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return BG(LG.from(e),n);case pG.FIXED64:case pG.UINT64:if(null===e)return BG(MG.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return BG(MG.from(e),n);case pG.BOOL:if(null===e)return!1;if("boolean"!==typeof e)break;return e;case pG.STRING:if(null===e)return"";if("string"!==typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case pG.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!==typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,o=0,s=0;for(let a=0;a<e.length;a++){if(n=SG[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:s=n,o=1;break;case 1:r[i++]=s<<2|(48&n)>>4,s=n,o=2;break;case 2:r[i++]=(15&s)<<4|(60&n)>>2,s=n,o=3;break;case 3:r[i++]=(3&s)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(Nb){i=Nb.message}this.assert(!1,r+(i?" - "+i:""),e)}}class WG{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},r=e;for(const i of this.fields){if(!i.oneof){let e=this.field(i,r[i.localName],t);void 0!==e&&(n[t.useProtoFieldName?i.name:i.jsonName]=e);continue}const e=r[i.oneof];if(e.oneofKind!==i.localName)continue;const o="scalar"==i.kind||"enum"==i.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let s=this.field(i,e[i.localName],o);FG(void 0!==s),n[t.useProtoFieldName?i.name:i.jsonName]=s}return n}field(e,t,n){let r;if("map"==e.kind){FG("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,s]of Object.entries(t)){const t=this.scalar(e.V.T,s,e.name,!1,!0);FG(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[s,a]of Object.entries(t)){const t=this.message(r,a,e.name,n);FG(void 0!==t),i[s.toString()]=t}break;case"enum":const o=e.V.T();for(const[s,a]of Object.entries(t)){FG(void 0===a||"number"==typeof a);const t=this.enum(o,a,e.name,!1,!0,n.enumAsInteger);FG(void 0!==t),i[s.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){FG(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);FG(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let s=0;s<t.length;s++){FG(void 0===t[s]||"number"==typeof t[s]);const o=this.enum(r,t[s],e.name,e.opt,!0,n.enumAsInteger);FG(void 0!==o),i.push(o)}break;case"message":const o=e.T();for(let s=0;s<t.length;s++){const r=this.message(o,t[s],e.name,n);FG(void 0!==r),i.push(r)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,o){if("google.protobuf.NullValue"==e[0])return i||r?null:void 0;if(void 0!==t){if(0!==t||i||r)return FG("number"==typeof t),FG(Number.isInteger(t)),o||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else FG(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void FG(r);const o=i||r;switch(e){case pG.INT32:case pG.SFIXED32:case pG.SINT32:return 0===t?o?0:void 0:(UG(t),t);case pG.FIXED32:case pG.UINT32:return 0===t?o?0:void 0:($G(t),t);case pG.FLOAT:VG(t);case pG.DOUBLE:return 0===t?o?0:void 0:(FG("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case pG.STRING:return""===t?o?"":void 0:(FG("string"==typeof t),t);case pG.BOOL:return!1===t?!o&&void 0:(FG("boolean"==typeof t),t);case pG.UINT64:case pG.FIXED64:FG("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=MG.from(t);if(e.isZero()&&!o)return;return e.toString();case pG.INT64:case pG.SFIXED64:case pG.SINT64:FG("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=LG.from(t);if(n.isZero()&&!o)return;return n.toString();case pG.BYTES:return FG(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let o=0;o<e.length;o++)switch(t=e[o],r){case 0:n+=xG[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=xG[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=xG[i|t>>6],n+=xG[63&t],r=0}return r&&(n+=xG[i],n+="=",1==r&&(n+="=")),n}(t):o?"":void 0}}}var HG,qG;function GG(e,t){return Object.assign(Object.assign({},e),t)}function KG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fG.STRING;switch(e){case pG.BOOL:return!1;case pG.UINT64:case pG.FIXED64:return BG(MG.ZERO,t);case pG.INT64:case pG.SFIXED64:case pG.SINT64:return BG(LG.ZERO,t);case pG.DOUBLE:case pG.FLOAT:return 0;case pG.BYTES:return new Uint8Array(0);case pG.STRING:return"";default:return 0}}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,o,s)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:o,data:s})},e.onWrite=(t,n,r)=>{for(let{no:i,wireType:o,data:s}of e.list(n))r.tag(i,o).raw(s)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter((e=>e.no==r)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(HG||(HG={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(qG||(qG={}));class YG{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),o=this.fieldNoToField.get(r);if(!o){let o=n.readUnknownField;if("throw"==o)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let s=e.skip(i);!1!==o&&(!0===o?HG.onRead:o)(this.info.typeName,t,r,i,s);continue}let s=t,a=o.repeat,l=o.localName;switch(o.oneof&&(s=s[o.oneof],s.oneofKind!==l&&(s=t[o.oneof]={oneofKind:l})),o.kind){case"scalar":case"enum":let t="enum"==o.kind?pG.INT32:o.T,r="scalar"==o.kind?o.L:void 0;if(a){let n=s[l];if(i==qG.LengthDelimited&&t!=pG.STRING&&t!=pG.BYTES){let i=e.uint32()+e.pos;for(;e.pos<i;)n.push(this.scalar(e,t,r))}else n.push(this.scalar(e,t,r))}else s[l]=this.scalar(e,t,r);break;case"message":if(a){let t=s[l],r=o.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else s[l]=o.T().internalBinaryRead(e,e.uint32(),n,s[l]);break;case"map":let[c,u]=this.mapEntry(o,e,n);s[l][c]=u}}}mapEntry(e,t,n){let r,i,o=t.uint32(),s=t.pos+o;for(;t.pos<s;){let[o,s]=t.tag();switch(o){case 1:r=e.K==pG.BOOL?t.bool().toString():this.scalar(t,e.K,fG.STRING);break;case 2:switch(e.V.kind){case"scalar":i=this.scalar(t,e.V.T,e.V.L);break;case"enum":i=t.int32();break;case"message":i=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${o} (wire type ${s}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=KG(e.K);r=e.K==pG.BOOL?t.toString():t}if(void 0===i)switch(e.V.kind){case"scalar":i=KG(e.V.T,e.V.L);break;case"enum":i=0;break;case"message":i=e.V.T().create()}return[r,i]}scalar(e,t,n){switch(t){case pG.INT32:return e.int32();case pG.STRING:return e.string();case pG.BOOL:return e.bool();case pG.DOUBLE:return e.double();case pG.FLOAT:return e.float();case pG.INT64:return BG(e.int64(),n);case pG.UINT64:return BG(e.uint64(),n);case pG.FIXED64:return BG(e.fixed64(),n);case pG.FIXED32:return e.fixed32();case pG.BYTES:return e.bytes();case pG.UINT32:return e.uint32();case pG.SFIXED32:return e.sfixed32();case pG.SFIXED64:return BG(e.sfixed64(),n);case pG.SINT32:return e.sint32();case pG.SINT64:return BG(e.sint64(),n)}}}class JG{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const i of this.fields){let r,o,s=i.repeat,a=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==a)continue;r=t[a],o=!0}else r=e[a],o=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?pG.INT32:i.T;if(s)if(FG(Array.isArray(r)),s==mG.PACKED)this.packed(t,e,i.no,r);else for(const n of r)this.scalar(t,e,i.no,n,!0);else void 0===r?FG(i.opt):this.scalar(t,e,i.no,r,o||i.opt);break;case"message":if(s){FG(Array.isArray(r));for(const e of r)this.message(t,n,i.T(),i.no,e)}else this.message(t,n,i.T(),i.no,r);break;case"map":FG("object"==typeof r&&null!==r);for(const[o,s]of Object.entries(r))this.mapEntry(t,n,i,o,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?HG.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,qG.LengthDelimited),e.fork();let o=r;switch(n.K){case pG.INT32:case pG.FIXED32:case pG.UINT32:case pG.SFIXED32:case pG.SINT32:o=Number.parseInt(r);break;case pG.BOOL:FG("true"==r||"false"==r),o="true"==r}switch(this.scalar(e,n.K,1,o,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,pG.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,qG.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[o,s,a]=this.scalarInfo(t,r);a&&!i||(e.tag(n,o),e[s](r))}packed(e,t,n,r){if(!r.length)return;FG(t!==pG.BYTES&&t!==pG.STRING),e.tag(n,qG.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let o=0;o<r.length;o++)e[i](r[o]);e.join()}scalarInfo(e,t){let n,r=qG.Varint,i=void 0===t,o=0===t;switch(e){case pG.INT32:n="int32";break;case pG.STRING:o=i||!t.length,r=qG.LengthDelimited,n="string";break;case pG.BOOL:o=!1===t,n="bool";break;case pG.UINT32:n="uint32";break;case pG.DOUBLE:r=qG.Bit64,n="double";break;case pG.FLOAT:r=qG.Bit32,n="float";break;case pG.INT64:o=i||LG.from(t).isZero(),n="int64";break;case pG.UINT64:o=i||MG.from(t).isZero(),n="uint64";break;case pG.FIXED64:o=i||MG.from(t).isZero(),r=qG.Bit64,n="fixed64";break;case pG.BYTES:o=i||!t.byteLength,r=qG.LengthDelimited,n="bytes";break;case pG.FIXED32:r=qG.Bit32,n="fixed32";break;case pG.SFIXED32:r=qG.Bit32,n="sfixed32";break;case pG.SFIXED64:o=i||LG.from(t).isZero(),r=qG.Bit64,n="sfixed64";break;case pG.SINT32:n="sint32";break;case pG.SINT64:o=i||LG.from(t).isZero(),n="sint64"}return[r,n,i||o]}}function QG(e,t,n){let r,i,o=n;for(let s of e.fields){let e=s.localName;if(s.oneof){const n=o[s.oneof];if(void 0==(null===n||void 0===n?void 0:n.oneofKind))continue;if(r=n[e],i=t[s.oneof],i.oneofKind=n.oneofKind,void 0==r){delete i[e];continue}}else if(r=o[e],i=t,void 0==r)continue;switch(s.repeat&&(i[e].length=r.length),s.kind){case"scalar":case"enum":if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=r[n];else i[e]=r;break;case"message":let t=s.T();if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=s.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}const XG={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},ZG={ignoreUnknownFields:!1};function eK(e,t){var n,r;let i=Object.assign(Object.assign({},e),t);return i.typeRegistry=[...null!==(n=null===e||void 0===e?void 0:e.typeRegistry)&&void 0!==n?n:[],...null!==(r=null===t||void 0===t?void 0:t.typeRegistry)&&void 0!==r?r:[]],i}const tK=Object.values;function nK(e,t,n){if(t===n)return!0;if(e!==pG.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!=i[o])return!1;return!0}function rK(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!nK(e,t[r],n[r]))return!1;return!0}function iK(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}const oK={writeUnknownFields:!0,writerFactory:()=>new sK};class sK{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for($G(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return UG(e),EG(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){VG(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){$G(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){UG(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return UG(e),EG(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=LG.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=MG.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=LG.from(e);return _G(t.lo,t.hi,this.buf),this}sint64(e){let t=LG.from(e),n=t.hi>>31;return _G(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=MG.from(e);return _G(t.lo,t.hi,this.buf),this}}const aK={readUnknownField:!0,readerFactory:e=>new lK(e)};class lK{constructor(e,t){this.varint64=CG,this.uint32=IG,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case qG.Varint:for(;128&this.buf[this.pos++];);break;case qG.Bit64:this.pos+=4;case qG.Bit32:this.pos+=4;break;case qG.LengthDelimited:let t=this.uint32();this.pos+=t;break;case qG.StartGroup:let n;for(;(n=this.tag()[1])!==qG.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new LG(...this.varint64())}uint64(){return new MG(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new LG(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new MG(this.sfixed32(),this.sfixed32())}sfixed64(){return new LG(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}const cK=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class uK{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(gG),this.options=null!==n&&void 0!==n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},cK),{[dG]:{value:this}})),this.refTypeCheck=new yG(this),this.refJsonReader=new zG(this),this.refJsonWriter=new WG(this),this.refBinReader=new YG(this),this.refBinWriter=new JG(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},dG,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=KG(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&QG(this,t,e),t}clone(e){let t=this.create();return QG(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],o=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?pG.INT32:r.T;if(!(r.repeat?rK(e,i,o):nK(e,i,o)))return!1;break;case"map":if(!("message"==r.V.kind?iK(r.V.T(),tK(i),tK(o)):rK("enum"==r.V.kind?pG.INT32:r.V.T,tK(i),tK(o))))return!1;break;case"message":let t=r.T();if(!(r.repeat?iK(t,i,o):t.equals(i,o)))return!1}}return!0}(this,e,t)}is(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!1)}isAssignable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){QG(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},aK),e):aK}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},ZG),e):ZG}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},XG),e):XG}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},oK),e):oK}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${bG(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}function dK(e,t,n,r,i){var o,s,a,l;if("unary"==e){let e=(e,n,r)=>t.unary(e,n,r);for(const t of(null!==(o=r.interceptors)&&void 0!==o?o:[]).filter((e=>e.interceptUnary)).reverse()){const n=e;e=(e,r,i)=>t.interceptUnary(n,e,r,i)}return e(n,i,r)}if("serverStreaming"==e){let e=(e,n,r)=>t.serverStreaming(e,n,r);for(const t of(null!==(s=r.interceptors)&&void 0!==s?s:[]).filter((e=>e.interceptServerStreaming)).reverse()){const n=e;e=(e,r,i)=>t.interceptServerStreaming(n,e,r,i)}return e(n,i,r)}if("clientStreaming"==e){let e=(e,n)=>t.clientStreaming(e,n);for(const t of(null!==(a=r.interceptors)&&void 0!==a?a:[]).filter((e=>e.interceptClientStreaming)).reverse()){const n=e;e=(e,r)=>t.interceptClientStreaming(n,e,r)}return e(n,r)}if("duplex"==e){let e=(e,n)=>t.duplex(e,n);for(const t of(null!==(l=r.interceptors)&&void 0!==l?l:[]).filter((e=>e.interceptDuplex)).reverse()){const n=e;e=(e,r)=>t.interceptDuplex(n,e,r)}return e(n,r)}!function(e,t){throw new Error(null!==t&&void 0!==t?t:"Unexpected object: "+e)}(e)}class hK extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNKNOWN",n=arguments.length>2?arguments[2]:void 0;super(e),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=t,this.meta=null!==n&&void 0!==n?n:{}}toString(){const e=[this.name+": "+this.message];this.code&&(e.push(""),e.push("Code: "+this.code)),this.serviceName&&this.methodName&&e.push("Method: "+this.serviceName+"/"+this.methodName);let t=Object.entries(this.meta);if(t.length){e.push(""),e.push("Meta:");for(let[n,r]of t)e.push(`  ${n}: ${r}`)}return e.join("\n")}}function pK(e,t){return function(){return e.apply(t,arguments)}}const{toString:fK}=Object.prototype,{getPrototypeOf:mK}=Object,{iterator:gK,toStringTag:vK}=Symbol,yK=(e=>t=>{const n=fK.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bK=e=>(e=e.toLowerCase(),t=>yK(t)===e),wK=e=>t=>typeof t===e,{isArray:xK}=Array,SK=wK("undefined");const CK=bK("ArrayBuffer");const _K=wK("string"),kK=wK("function"),TK=wK("number"),AK=e=>null!==e&&"object"===typeof e,EK=e=>{if("object"!==yK(e))return!1;const t=mK(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(vK in e)&&!(gK in e)},IK=bK("Date"),RK=bK("File"),PK=bK("Blob"),jK=bK("FileList"),NK=bK("URLSearchParams"),[OK,DK,MK,LK]=["ReadableStream","Request","Response","Headers"].map(bK);function FK(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),xK(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function UK(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const $K="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,VK=e=>!SK(e)&&e!==$K;const BK=(zK="undefined"!==typeof Uint8Array&&mK(Uint8Array),e=>zK&&e instanceof zK);var zK;const WK=bK("HTMLFormElement"),HK=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),qK=bK("RegExp"),GK=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};FK(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)};const KK=bK("AsyncFunction"),YK=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],$K.addEventListener("message",(e=>{let{source:t,data:i}=e;t===$K&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),$K.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,kK($K.postMessage)),JK="undefined"!==typeof queueMicrotask?queueMicrotask.bind($K):"undefined"!==typeof process&&process.nextTick||YK,QK={isArray:xK,isArrayBuffer:CK,isBuffer:function(e){return null!==e&&!SK(e)&&null!==e.constructor&&!SK(e.constructor)&&kK(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||kK(e.append)&&("formdata"===(t=yK(e))||"object"===t&&kK(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&CK(e.buffer),t},isString:_K,isNumber:TK,isBoolean:e=>!0===e||!1===e,isObject:AK,isPlainObject:EK,isReadableStream:OK,isRequest:DK,isResponse:MK,isHeaders:LK,isUndefined:SK,isDate:IK,isFile:RK,isBlob:PK,isRegExp:qK,isFunction:kK,isStream:e=>AK(e)&&kK(e.pipe),isURLSearchParams:NK,isTypedArray:BK,isFileList:jK,forEach:FK,merge:function e(){const{caseless:t}=VK(this)&&this||{},n={},r=(r,i)=>{const o=t&&UK(n,i)||i;EK(n[o])&&EK(r)?n[o]=e(n[o],r):EK(r)?n[o]=e({},r):xK(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&FK(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return FK(t,((t,r)=>{n&&kK(t)?e[r]=pK(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&mK(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:yK,kindOfTest:bK,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(xK(e))return e;let t=e.length;if(!TK(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[gK]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:WK,hasOwnProperty:HK,hasOwnProp:HK,reduceDescriptors:GK,freezeMethods:e=>{GK(e,((t,n)=>{if(kK(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];kK(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return xK(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:UK,global:$K,isContextDefined:VK,isSpecCompliantForm:function(e){return!!(e&&kK(e.append)&&"FormData"===e[vK]&&e[gK])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(AK(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=xK(e)?[]:{};return FK(e,((e,t)=>{const o=n(e,r+1);!SK(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:KK,isThenable:e=>e&&(AK(e)||kK(e))&&kK(e.then)&&kK(e.catch),setImmediate:YK,asap:JK,isIterable:e=>null!=e&&kK(e[gK])};function XK(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}QK.inherits(XK,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:QK.toJSONObject(this.config),code:this.code,status:this.status}}});const ZK=XK.prototype,eY={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{eY[e]={value:e}})),Object.defineProperties(XK,eY),Object.defineProperty(ZK,"isAxiosError",{value:!0}),XK.from=(e,t,n,r,i,o)=>{const s=Object.create(ZK);return QK.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),XK.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const tY=XK;function nY(e){return QK.isPlainObject(e)||QK.isArray(e)}function rY(e){return QK.endsWith(e,"[]")?e.slice(0,-2):e}function iY(e,t,n){return e?e.concat(t).map((function(e,t){return e=rY(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const oY=QK.toFlatObject(QK,{},null,(function(e){return/^is[A-Z]/.test(e)}));const sY=function(e,t,n){if(!QK.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=QK.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!QK.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&QK.isSpecCompliantForm(t);if(!QK.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(QK.isDate(e))return e.toISOString();if(!a&&QK.isBlob(e))throw new tY("Blob is not supported. Use a Buffer instead.");return QK.isArrayBuffer(e)||QK.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(QK.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(QK.isArray(e)&&function(e){return QK.isArray(e)&&!e.some(nY)}(e)||(QK.isFileList(e)||QK.endsWith(n,"[]"))&&(a=QK.toArray(e)))return n=rY(n),a.forEach((function(e,r){!QK.isUndefined(e)&&null!==e&&t.append(!0===s?iY([n],r,o):null===s?n:n+"[]",l(e))})),!1;return!!nY(e)||(t.append(iY(i,n,o),l(e)),!1)}const u=[],d=Object.assign(oY,{defaultVisitor:c,convertValue:l,isVisitable:nY});if(!QK.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!QK.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),QK.forEach(n,(function(n,o){!0===(!(QK.isUndefined(n)||null===n)&&i.call(t,n,QK.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function aY(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function lY(e,t){this._pairs=[],e&&sY(e,this,t)}const cY=lY.prototype;cY.append=function(e,t){this._pairs.push([e,t])},cY.toString=function(e){const t=e?function(t){return e.call(this,t,aY)}:aY;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const uY=lY;function dY(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hY(e,t,n){if(!t)return e;const r=n&&n.encode||dY;QK.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):QK.isURLSearchParams(t)?t.toString():new uY(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const pY=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){QK.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},fY={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mY={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:uY,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},gY="undefined"!==typeof window&&"undefined"!==typeof document,vY="object"===typeof navigator&&navigator||void 0,yY=gY&&(!vY||["ReactNative","NativeScript","NS"].indexOf(vY.product)<0),bY="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,wY=gY&&window.location.href||"http://localhost",xY={...s,...mY};const SY=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&QK.isArray(r)?r.length:o,a)return QK.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&QK.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&QK.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(QK.isFormData(e)&&QK.isFunction(e.entries)){const n={};return QK.forEachEntry(e,((e,r)=>{t(function(e){return QK.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const CY={transitional:fY,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=QK.isObject(e);i&&QK.isHTMLForm(e)&&(e=new FormData(e));if(QK.isFormData(e))return r?JSON.stringify(SY(e)):e;if(QK.isArrayBuffer(e)||QK.isBuffer(e)||QK.isStream(e)||QK.isFile(e)||QK.isBlob(e)||QK.isReadableStream(e))return e;if(QK.isArrayBufferView(e))return e.buffer;if(QK.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return sY(e,new xY.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return xY.isNode&&QK.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=QK.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return sY(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(QK.isString(e))try{return(t||JSON.parse)(e),QK.trim(e)}catch(ZC){if("SyntaxError"!==ZC.name)throw ZC}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||CY.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(QK.isResponse(e)||QK.isReadableStream(e))return e;if(e&&QK.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(ZC){if(n){if("SyntaxError"===ZC.name)throw tY.from(ZC,tY.ERR_BAD_RESPONSE,this,null,this.response);throw ZC}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xY.classes.FormData,Blob:xY.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};QK.forEach(["delete","get","head","post","put","patch"],(e=>{CY.headers[e]={}}));const _Y=CY,kY=QK.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TY=Symbol("internals");function AY(e){return e&&String(e).trim().toLowerCase()}function EY(e){return!1===e||null==e?e:QK.isArray(e)?e.map(EY):String(e)}function IY(e,t,n,r,i){return QK.isFunction(r)?r.call(this,t,n):(i&&(t=n),QK.isString(t)?QK.isString(r)?-1!==t.indexOf(r):QK.isRegExp(r)?r.test(t):void 0:void 0)}class RY{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=AY(t);if(!i)throw new Error("header name must be a non-empty string");const o=QK.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=EY(e))}const o=(e,t)=>QK.forEach(e,((e,n)=>i(e,n,t)));if(QK.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(QK.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&kY[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(QK.isObject(e)&&QK.isIterable(e)){let n,r,i={};for(const t of e){if(!QK.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?QK.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=AY(e)){const n=QK.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(QK.isFunction(t))return t.call(this,e,n);if(QK.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=AY(e)){const n=QK.findKey(this,e);return!(!n||void 0===this[n]||t&&!IY(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=AY(e)){const i=QK.findKey(n,e);!i||t&&!IY(0,n[i],i,t)||(delete n[i],r=!0)}}return QK.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!IY(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return QK.forEach(this,((r,i)=>{const o=QK.findKey(n,i);if(o)return t[o]=EY(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=EY(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return QK.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&QK.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[TY]=this[TY]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=AY(e);t[r]||(!function(e,t){const n=QK.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return QK.isArray(e)?e.forEach(r):r(e),this}}RY.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),QK.reduceDescriptors(RY.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),QK.freezeMethods(RY);const PY=RY;function jY(e,t){const n=this||_Y,r=t||n,i=PY.from(r.headers);let o=r.data;return QK.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function NY(e){return!(!e||!e.__CANCEL__)}function OY(e,t,n){tY.call(this,null==e?"canceled":e,tY.ERR_CANCELED,t,n),this.name="CanceledError"}QK.inherits(OY,tY,{__CANCEL__:!0});const DY=OY;function MY(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new tY("Request failed with status code "+n.status,[tY.ERR_BAD_REQUEST,tY.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const LY=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const FY=function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=o?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),o-t)))},()=>n&&s(n)]},UY=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=LY(50,250);return FY((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,l=i(a);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},$Y=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},VY=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return QK.asap((()=>e(...n)))},BY=xY.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,xY.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(xY.origin),xY.navigator&&/(msie|trident)/i.test(xY.navigator.userAgent)):()=>!0,zY=xY.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];QK.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),QK.isString(r)&&s.push("path="+r),QK.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function WY(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const HY=e=>e instanceof PY?{...e}:e;function qY(e,t){t=t||{};const n={};function r(e,t,n,r){return QK.isPlainObject(e)&&QK.isPlainObject(t)?QK.merge.call({caseless:r},e,t):QK.isPlainObject(t)?QK.merge({},t):QK.isArray(t)?t.slice():t}function i(e,t,n,i){return QK.isUndefined(t)?QK.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!QK.isUndefined(t))return r(void 0,t)}function s(e,t){return QK.isUndefined(t)?QK.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>i(HY(e),HY(t),0,!0)};return QK.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,s=o(e[r],t[r],r);QK.isUndefined(s)&&o!==a||(n[r]=s)})),n}const GY=e=>{const t=qY({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=PY.from(a),t.url=hY(WY(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),QK.isFormData(r))if(xY.hasStandardBrowserEnv||xY.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(xY.hasStandardBrowserEnv&&(i&&QK.isFunction(i)&&(i=i(t)),i||!1!==i&&BY(t.url))){const e=o&&s&&zY.read(s);e&&a.set(o,e)}return t},KY="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=GY(e);let i=r.data;const o=PY.from(r.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=PY.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());MY((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new tY("Request aborted",tY.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new tY("Network Error",tY.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||fY;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new tY(t,i.clarifyTimeoutError?tY.ETIMEDOUT:tY.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&QK.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),QK.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=UY(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=UY(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new DY(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===xY.protocols.indexOf(v)?n(new tY("Unsupported protocol "+v+":",tY.ERR_BAD_REQUEST,e)):m.send(i||null)}))},YY=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof tY?t:new DY(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new tY(`timeout ${t} of ms exceeded`,tY.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>QK.asap(s),a}},JY=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},QY=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},XY=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of QY(e))yield*JY(n,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(hoe){throw a(hoe),hoe}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},ZY="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,eJ=ZY&&"function"===typeof ReadableStream,tJ=ZY&&("function"===typeof TextEncoder?(nJ=new TextEncoder,e=>nJ.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var nJ;const rJ=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(ZC){return!1}},iJ=eJ&&rJ((()=>{let e=!1;const t=new Request(xY.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),oJ=eJ&&rJ((()=>QK.isReadableStream(new Response("").body))),sJ={stream:oJ&&(e=>e.body)};var aJ;ZY&&(aJ=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!sJ[e]&&(sJ[e]=QK.isFunction(aJ[e])?t=>t[e]():(t,n)=>{throw new tY(`Response type '${e}' is not supported`,tY.ERR_NOT_SUPPORT,n)})})));const lJ=async(e,t)=>{const n=QK.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(QK.isBlob(e))return e.size;if(QK.isSpecCompliantForm(e)){const t=new Request(xY.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return QK.isArrayBufferView(e)||QK.isArrayBuffer(e)?e.byteLength:(QK.isURLSearchParams(e)&&(e+=""),QK.isString(e)?(await tJ(e)).byteLength:void 0)})(t):n},cJ=ZY&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=GY(e);c=c?(c+"").toLowerCase():"text";let p,f=YY([i,o&&o.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&iJ&&"get"!==n&&"head"!==n&&0!==(g=await lJ(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(QK.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=$Y(g,UY(VY(l)));r=XY(n.body,65536,e,t)}}QK.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let o=await fetch(p);const s=oJ&&("stream"===c||"response"===c);if(oJ&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=QK.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&$Y(t,UY(VY(a),!0))||[];o=new Response(XY(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let v=await sJ[QK.findKey(sJ,c)||"text"](o,e);return!s&&m&&m(),await new Promise(((t,n)=>{MY(t,n,{data:v,headers:PY.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(hoe){if(m&&m(),hoe&&"TypeError"===hoe.name&&/Load failed|fetch/i.test(hoe.message))throw Object.assign(new tY("Network Error",tY.ERR_NETWORK,e,p),{cause:hoe.cause||hoe});throw tY.from(hoe,hoe&&hoe.code,e,p)}}),uJ={http:null,xhr:KY,fetch:cJ};QK.forEach(uJ,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(ZC){}Object.defineProperty(e,"adapterName",{value:t})}}));const dJ=e=>`- ${e}`,hJ=e=>QK.isFunction(e)||null===e||!1===e,pJ=e=>{e=QK.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!hJ(n)&&(r=uJ[(t=String(n)).toLowerCase()],void 0===r))throw new tY(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(dJ).join("\n"):" "+dJ(e[0]):"as no adapter specified";throw new tY("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function fJ(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new DY(null,e)}function mJ(e){fJ(e),e.headers=PY.from(e.headers),e.data=jY.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return pJ(e.adapter||_Y.adapter)(e).then((function(t){return fJ(e),t.data=jY.call(e,e.transformResponse,t),t.headers=PY.from(t.headers),t}),(function(t){return NY(t)||(fJ(e),t&&t.response&&(t.response.data=jY.call(e,e.transformResponse,t.response),t.response.headers=PY.from(t.response.headers))),Promise.reject(t)}))}const gJ="1.9.0",vJ={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{vJ[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const yJ={};vJ.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new tY(r(i," has been removed"+(t?" in "+t:"")),tY.ERR_DEPRECATED);return t&&!yJ[i]&&(yJ[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},vJ.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const bJ={assertOptions:function(e,t,n){if("object"!==typeof e)throw new tY("options must be an object",tY.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new tY("option "+o+" must be "+n,tY.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new tY("Unknown option "+o,tY.ERR_BAD_OPTION)}},validators:vJ},wJ=bJ.validators;class xJ{constructor(e){this.defaults=e||{},this.interceptors={request:new pY,response:new pY}}async request(e,t){try{return await this._request(e,t)}catch(hoe){if(hoe instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{hoe.stack?n&&!String(hoe.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(hoe.stack+="\n"+n):hoe.stack=n}catch(ZC){}}throw hoe}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=qY(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&bJ.assertOptions(n,{silentJSONParsing:wJ.transitional(wJ.boolean),forcedJSONParsing:wJ.transitional(wJ.boolean),clarifyTimeoutError:wJ.transitional(wJ.boolean)},!1),null!=r&&(QK.isFunction(r)?t.paramsSerializer={serialize:r}:bJ.assertOptions(r,{encode:wJ.function,serialize:wJ.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bJ.assertOptions(t,{baseUrl:wJ.spelling("baseURL"),withXsrfToken:wJ.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&QK.merge(i.common,i[t.method]);i&&QK.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=PY.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[mJ.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(Nb){t.call(this,Nb);break}}try{c=mJ.call(this,h)}catch(Nb){return Promise.reject(Nb)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return hY(WY((e=qY(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}QK.forEach(["delete","get","head","options"],(function(e){xJ.prototype[e]=function(t,n){return this.request(qY(n||{},{method:e,url:t,data:(n||{}).data}))}})),QK.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(qY(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}xJ.prototype[e]=t(),xJ.prototype[e+"Form"]=t(!0)}));const SJ=xJ;class CJ{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new DY(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new CJ((function(t){e=t}));return{token:t,cancel:e}}}const _J=CJ;const kJ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kJ).forEach((e=>{let[t,n]=e;kJ[n]=t}));const TJ=kJ;const AJ=function e(t){const n=new SJ(t),r=pK(SJ.prototype.request,n);return QK.extend(r,SJ.prototype,n,{allOwnKeys:!0}),QK.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(qY(t,n))},r}(_Y);AJ.Axios=SJ,AJ.CanceledError=DY,AJ.CancelToken=_J,AJ.isCancel=NY,AJ.VERSION=gJ,AJ.toFormData=sY,AJ.AxiosError=tY,AJ.Cancel=AJ.CanceledError,AJ.all=function(e){return Promise.all(e)},AJ.spread=function(e){return function(t){return e.apply(null,t)}},AJ.isAxiosError=function(e){return QK.isObject(e)&&!0===e.isAxiosError},AJ.mergeConfig=qY,AJ.AxiosHeaders=PY,AJ.formToJSON=e=>SY(QK.isHTMLForm(e)?new FormData(e):e),AJ.getAdapter=pJ,AJ.HttpStatusCode=TJ,AJ.default=AJ;const EJ=AJ;var IJ,RJ;function PJ(e,t,n){if(n)for(let[r,i]of Object.entries(n))if("string"==typeof i)e.append(r,i);else for(let t of i)e.append(r,t);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function jJ(e,t){if(!e)return;let n=t;for(let[r,i]of Object.entries(e))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}!function(e){e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss"}(IJ||(IJ={})),function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED"}(RJ||(RJ={}));class NJ{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._state=RJ.PENDING,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),e&&this._promise.catch((e=>{}))}get state(){return this._state}get promise(){return this._promise}resolve(e){if(this.state!==RJ.PENDING)throw new Error(`cannot resolve ${RJ[this.state].toLowerCase()}`);this._resolve(e),this._state=RJ.RESOLVED}reject(e){if(this.state!==RJ.PENDING)throw new Error(`cannot reject ${RJ[this.state].toLowerCase()}`);this._reject(e),this._state=RJ.REJECTED}resolvePending(e){this._state===RJ.PENDING&&this.resolve(e)}rejectPending(e){this._state===RJ.PENDING&&this.reject(e)}}var OJ=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(ZC){o(ZC)}}function a(e){try{l(r.throw(e))}catch(ZC){o(ZC)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class DJ{constructor(e,t,n,r,i,o,s){this.method=e,this.requestHeaders=t,this.request=n,this.headers=r,this.response=i,this.status=o,this.trailers=s}then(e,t){return this.promiseFinished().then((t=>e?Promise.resolve(e(t)):t),(e=>t?Promise.resolve(t(e)):Promise.reject(e)))}promiseFinished(){return OJ(this,void 0,void 0,(function*(){let[e,t,n,r]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:e,response:t,status:n,trailers:r}}))}}class MJ{constructor(e){this.defaultOptions=e}mergeOptions(e){return function(e,t){if(!t)return e;let n={};jJ(e,n),jJ(t,n);for(let r of Object.keys(t)){let i=t[r];switch(r){case"jsonOptions":n.jsonOptions=eK(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=GG(e.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},jJ(e.meta,n.meta),jJ(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(i):i.concat()}}return n}(this.defaultOptions,e)}unary(e,t,n){var r,i,o;let s=n,a=this.makeUrl(e,s),l=null!==(r=s.fetchInit)&&void 0!==r?r:{},c=s.sendJson?e.I.toJsonString(t,s.jsonOptions):e.I.toBinary(t,s.binaryOptions),u=new NJ,d=new NJ,h=new NJ,p=new NJ;return globalThis.fetch(a,Object.assign(Object.assign({},l),{method:"POST",headers:PJ(new globalThis.Headers,!!s.sendJson,s.meta),body:c,signal:null!==(i=n.abort)&&void 0!==i?i:null})).then((t=>{let n;u.resolve(function(e){let t={};return e.forEach(((e,n)=>{"content-type"!==n.toLowerCase()&&"content-length"!==n.toLowerCase()&&(t.hasOwnProperty(n)?t[n].push(e):t[n]=e)})),t}(t.headers));try{n=t.type}catch(r){}switch(n){case"error":case"opaque":case"opaqueredirect":throw new hK(`fetch response type ${t.type}`,IJ[IJ.unknown])}return t.ok?s.sendJson?t.json().then((t=>e.O.fromJson(t,s.jsonOptions)),(()=>{throw new hK("unable to read response body as json",IJ[IJ.dataloss])})):t.arrayBuffer().then((t=>e.O.fromBinary(new Uint8Array(t),s.binaryOptions)),(()=>{throw new hK("unable to read response body",IJ[IJ.dataloss])})):t.json().then((e=>{throw function(e){if(!wG(e)||"string"!==typeof e.code||"string"!==typeof e.msg)return new hK("cannot read twirp error response",IJ[IJ.internal]);let t={};if(wG(e.meta))for(let[n,r]of Object.entries(e.meta))"string"==typeof r&&(t[n]=r);return new hK(e.msg,e.code,t)}(e)}),(()=>{throw new hK("received HTTP "+t.status+", unable to read response body as json",IJ[IJ.internal])}))}),(e=>{if(e instanceof Error&&"AbortError"===e.name)throw new hK(e.message,IJ[IJ.cancelled]);throw new hK(e instanceof Error?e.message:e)})).then((e=>{d.resolve(e),h.resolve({code:"OK",detail:""}),p.resolve({})})).catch((t=>{let n=t instanceof hK?t:new hK(t instanceof Error?t.message:t,IJ[IJ.internal]);n.methodName=e.name,n.serviceName=e.service.typeName,u.rejectPending(n),d.rejectPending(n),h.rejectPending(n),p.rejectPending(n)})),new DJ(e,null!==(o=s.meta)&&void 0!==o?o:{},t,u.promise,d.promise,h.promise,p.promise)}makeUrl(e,t){let n=t.baseUrl;n.endsWith("/")&&(n=n.substring(0,n.length-1));let r=e.name;return!0!==t.useProtoMethodName&&(r=hG(r),r=r.substring(0,1).toUpperCase()+r.substring(1)),`${n}/${e.service.typeName}/${r}`}clientStreaming(e){const t=new hK("Client streaming is not supported by Twirp",IJ[IJ.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}duplex(e){const t=new hK("Duplex streaming is not supported by Twirp",IJ[IJ.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}serverStreaming(e){const t=new hK("Server streaming is not supported by Twirp",IJ[IJ.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}}function LJ(e){return"function"===typeof e}function FJ(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var UJ=FJ((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function $J(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var VJ=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=Vr(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(LJ(l))try{l()}catch(ZC){i=ZC instanceof UJ?ZC.errors:[ZC]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=Vr(c),d=u.next();!d.done;d=u.next()){var h=d.value;try{WJ(h)}catch(hoe){i=null!==i&&void 0!==i?i:[],hoe instanceof UJ?i=zr(zr([],Br(i)),Br(hoe.errors)):i.push(hoe)}}}catch(f){n={error:f}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new UJ(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)WJ(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&$J(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&$J(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),BJ=VJ.EMPTY;function zJ(e){return e instanceof VJ||e&&"closed"in e&&LJ(e.remove)&&LJ(e.add)&&LJ(e.unsubscribe)}function WJ(e){LJ(e)?e():e.unsubscribe()}var HJ={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qJ={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=qJ.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,zr([e,t],Br(n))):setTimeout.apply(void 0,zr([e,t],Br(n)))},clearTimeout:function(e){var t=qJ.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function GJ(e){qJ.setTimeout((function(){var t=HJ.onUnhandledError;if(!t)throw e;t(e)}))}function KJ(){}var YJ=JJ("C",void 0,void 0);function JJ(e,t,n){return{kind:e,value:t,error:n}}var QJ=null;function XJ(e){if(HJ.useDeprecatedSynchronousErrorHandling){var t=!QJ;if(t&&(QJ={errorThrown:!1,error:null}),e(),t){var n=QJ,r=n.errorThrown,i=n.error;if(QJ=null,r)throw i}}else e()}var ZJ=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,zJ(t)&&t.add(n)):n.destination=sQ,n}return Lr(t,e),t.create=function(e,t,n){return new rQ(e,t,n)},t.prototype.next=function(e){this.isStopped?oQ(function(e){return JJ("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?oQ(function(e){return JJ("E",void 0,e)}(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?oQ(YJ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(VJ),eQ=Function.prototype.bind;function tQ(e,t){return eQ.call(e,t)}var nQ=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(Nb){iQ(Nb)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(Nb){iQ(Nb)}else iQ(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(Nb){iQ(Nb)}},e}(),rQ=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;LJ(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:s&&HJ.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&tQ(t.next,o),error:t.error&&tQ(t.error,o),complete:t.complete&&tQ(t.complete,o)}):i=t;return s.destination=new nQ(i),s}return Lr(t,e),t}(ZJ);function iQ(e){var t;HJ.useDeprecatedSynchronousErrorHandling?(t=e,HJ.useDeprecatedSynchronousErrorHandling&&QJ&&(QJ.errorThrown=!0,QJ.error=t)):GJ(e)}function oQ(e,t){var n=HJ.onStoppedNotification;n&&qJ.setTimeout((function(){return n(e,t)}))}var sQ={closed:!0,next:KJ,error:function(e){throw e},complete:KJ},aQ="function"===typeof Symbol&&Symbol.observable||"@@observable";function lQ(e){return e}function cQ(e){return 0===e.length?lQ:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var uQ=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,i=function(e){return e&&e instanceof ZJ||function(e){return e&&LJ(e.next)&&LJ(e.error)&&LJ(e.complete)}(e)&&zJ(e)}(e)?e:new rQ(e,t,n);return XJ((function(){var e=r,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?r._subscribe(i):r._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(hoe){e.error(hoe)}},e.prototype.forEach=function(e,t){var n=this;return new(t=dQ(t))((function(t,r){var i=new rQ({next:function(t){try{e(t)}catch(hoe){r(hoe),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[aQ]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cQ(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=dQ(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function dQ(e){var t;return null!==(t=null!==e&&void 0!==e?e:HJ.Promise)&&void 0!==t?t:Promise}var hQ=FJ((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),pQ=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Lr(t,e),t.prototype.lift=function(e){var t=new fQ(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new hQ},t.prototype.next=function(e){var t=this;XJ((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=Vr(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;XJ((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;XJ((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?BJ:(this.currentObservers=null,o.push(e),new VJ((function(){t.currentObservers=null,$J(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new uQ;return e.source=this,e},t.create=function(e,t){return new fQ(e,t)},t}(uQ),fQ=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Lr(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:BJ},t}(pQ),mQ={now:function(){return(mQ.delegate||Date).now()},delegate:void 0},gQ=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=mQ);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return Lr(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}},t}(pQ),vQ=Array.isArray,yQ=Object.getPrototypeOf,bQ=Object.prototype,wQ=Object.keys;function xQ(e){if(1===e.length){var t=e[0];if(vQ(t))return{args:t,keys:null};if((r=t)&&"object"===typeof r&&yQ(r)===bQ){var n=wQ(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}var SQ=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function CQ(e){return LJ(null===e||void 0===e?void 0:e.then)}function _Q(e){return LJ(e[aQ])}function kQ(e){return Symbol.asyncIterator&&LJ(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function TQ(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var AQ="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function EQ(e){return LJ(null===e||void 0===e?void 0:e[AQ])}function IQ(e){return Hr(this,arguments,(function(){var t,n,r;return $r(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Wr(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Wr(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Wr(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function RQ(e){return LJ(null===e||void 0===e?void 0:e.getReader)}function PQ(e){if(e instanceof uQ)return e;if(null!=e){if(_Q(e))return i=e,new uQ((function(e){var t=i[aQ]();if(LJ(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(SQ(e))return r=e,new uQ((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(CQ(e))return n=e,new uQ((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,GJ)}));if(kQ(e))return jQ(e);if(EQ(e))return t=e,new uQ((function(e){var n,r;try{for(var i=Vr(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(RQ(e))return jQ(IQ(e))}var t,n,r,i;throw TQ(e)}function jQ(e){return new uQ((function(t){(function(e,t){var n,r,i,o;return Ur(this,void 0,void 0,(function(){var s,a;return $r(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=qr(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function NQ(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}function OQ(e){return function(t){if(function(e){return LJ(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(hoe){this.error(hoe)}}));throw new TypeError("Unable to lift unknown Observable type")}}function DQ(e,t,n,r,i){return new MQ(e,t,n,r,i)}var MQ=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(hoe){t.error(hoe)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(hoe){t.error(hoe)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Lr(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(ZJ);function LQ(e,t){return void 0===t&&(t=0),OQ((function(n,r){n.subscribe(DQ(r,(function(n){return NQ(r,e,(function(){return r.next(n)}),t)}),(function(){return NQ(r,e,(function(){return r.complete()}),t)}),(function(n){return NQ(r,e,(function(){return r.error(n)}),t)})))}))}function FQ(e,t){return void 0===t&&(t=0),OQ((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function UQ(e,t){if(!e)throw new Error("Iterable cannot be null");return new uQ((function(n){NQ(n,t,(function(){var r=e[Symbol.asyncIterator]();NQ(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function $Q(e,t){if(null!=e){if(_Q(e))return function(e,t){return PQ(e).pipe(FQ(t),LQ(t))}(e,t);if(SQ(e))return function(e,t){return new uQ((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(CQ(e))return function(e,t){return PQ(e).pipe(FQ(t),LQ(t))}(e,t);if(kQ(e))return UQ(e,t);if(EQ(e))return function(e,t){return new uQ((function(n){var r;return NQ(n,t,(function(){r=e[AQ](),NQ(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(hoe){return void n.error(hoe)}i?n.complete():n.next(t)}),0,!0)})),function(){return LJ(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(RQ(e))return function(e,t){return UQ(IQ(e),t)}(e,t)}throw TQ(e)}function VQ(e,t){return t?$Q(e,t):PQ(e)}function BQ(e,t){return OQ((function(n,r){var i=0;n.subscribe(DQ(r,(function(n){r.next(e.call(t,n,i++))})))}))}var zQ=Array.isArray;function WQ(e){return BQ((function(t){return function(e,t){return zQ(t)?e.apply(void 0,zr([],Br(t))):e(t)}(e,t)}))}function HQ(e){return e[e.length-1]}function qQ(e){return function(e){return e&&LJ(e.schedule)}(HQ(e))?e.pop():void 0}function GQ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qQ(e),r=function(e){return LJ(HQ(e))?e.pop():void 0}(e),i=xQ(e),o=i.args,s=i.keys;if(0===o.length)return VQ([],n);var a=new uQ(function(e,t,n){void 0===n&&(n=lQ);return function(r){KQ(t,(function(){for(var i=e.length,o=new Array(i),s=i,a=i,l=function(i){KQ(t,(function(){var l=VQ(e[i],t),c=!1;l.subscribe(DQ(r,(function(e){o[i]=e,c||(c=!0,a--),a||r.next(n(o.slice()))}),(function(){--s||r.complete()})))}),r)},c=0;c<i;c++)l(c)}),r)}}(o,n,s?function(e){return function(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}(s,e)}:lQ));return r?a.pipe(WQ(r)):a}function KQ(e,t,n){e?NQ(n,e,t):t()}var YQ=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return Lr(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(pQ);function JQ(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var i=new rQ({next:function(){i.unsubscribe(),e()}});return PQ(t.apply(void 0,zr([],Br(n)))).subscribe(i)}}else e()}function QQ(e,t,n){var r,i,o,s,a=!1;return e&&"object"===typeof e?(r=e.bufferSize,s=void 0===r?1/0:r,i=e.windowTime,t=void 0===i?1/0:i,a=void 0!==(o=e.refCount)&&o,n=e.scheduler):s=null!==e&&void 0!==e?e:1/0,function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new pQ}:t,r=e.resetOnError,i=void 0===r||r,o=e.resetOnComplete,s=void 0===o||o,a=e.resetOnRefCountZero,l=void 0===a||a;return function(e){var t,r,o,a=0,c=!1,u=!1,d=function(){null===r||void 0===r||r.unsubscribe(),r=void 0},h=function(){d(),t=o=void 0,c=u=!1},p=function(){var e=t;h(),null===e||void 0===e||e.unsubscribe()};return OQ((function(e,f){a++,u||c||d();var m=o=null!==o&&void 0!==o?o:n();f.add((function(){0!==--a||u||c||(r=JQ(p,l))})),m.subscribe(f),!t&&a>0&&(t=new rQ({next:function(e){return m.next(e)},error:function(e){u=!0,d(),r=JQ(h,i,e),m.error(e)},complete:function(){c=!0,d(),r=JQ(h,s),m.complete()}}),PQ(e).subscribe(t))}))(e)}}({connector:function(){return new gQ(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function XQ(e,t){return void 0===t&&(t=lQ),e=null!==e&&void 0!==e?e:ZQ,OQ((function(n,r){var i,o=!0;n.subscribe(DQ(r,(function(n){var s=t(n);!o&&e(i,s)||(o=!1,i=s,r.next(n))})))}))}function ZQ(e,t){return e===t}function eX(e,t){return void 0===t&&(t=!1),OQ((function(n,r){var i=0;n.subscribe(DQ(r,(function(n){var o=e(n,i++);(o||t)&&r.next(n),!o&&r.complete()})))}))}function tX(e,t){return XQ((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}function nX(e,t,n){return n?nX(e,t).pipe(WQ(n)):new uQ((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)},i=e(r);return LJ(t)?function(){return t(r,i)}:void 0}))}function rX(e,t,n){return void 0===n&&(n=1/0),LJ(t)?rX((function(n,r){return BQ((function(e,i){return t(n,e,r,i)}))(PQ(e(n,r)))}),n):("number"===typeof t&&(n=t),OQ((function(t,r){return function(e,t,n,r,i,o,s,a){var l=[],c=0,u=0,d=!1,h=function(){!d||l.length||c||t.complete()},p=function(e){return c<r?f(e):l.push(e)},f=function(e){o&&t.next(e),c++;var a=!1;PQ(n(e,u++)).subscribe(DQ(t,(function(e){null===i||void 0===i||i(e),o?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=l.shift();s?NQ(t,s,(function(){return f(e)})):f(e)};l.length&&c<r;)e();h()}catch(hoe){t.error(hoe)}})))};return e.subscribe(DQ(t,p,(function(){d=!0,h()}))),function(){null===a||void 0===a||a()}}(t,r,e,n)})))}var iX=["addListener","removeListener"],oX=["addEventListener","removeEventListener"],sX=["on","off"];function aX(e,t,n,r){if(LJ(n)&&(r=n,n=void 0),r)return aX(e,t,n).pipe(WQ(r));var i=Br(function(e){return LJ(e.addEventListener)&&LJ(e.removeEventListener)}(e)?oX.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return LJ(e.addListener)&&LJ(e.removeListener)}(e)?iX.map(lX(e,t)):function(e){return LJ(e.on)&&LJ(e.off)}(e)?sX.map(lX(e,t)):[],2),o=i[0],s=i[1];if(!o&&SQ(e))return rX((function(e){return aX(e,t,n)}))(PQ(e));if(!o)throw new TypeError("Invalid event target");return new uQ((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return s(t)}}))}function lX(e,t){return function(n){return function(r){return e[n](t,r)}}}var cX=function(e){function t(t,n){return e.call(this)||this}return Lr(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(VJ),uX={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=uX.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,zr([e,t],Br(n))):setInterval.apply(void 0,zr([e,t],Br(n)))},clearInterval:function(e){var t=uX.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},dX=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Lr(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),uX.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&uX.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(ZC){r=!0,n=ZC||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,$J(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(cX),hX=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=mQ.now,e}(),pX=function(e){function t(t,n){void 0===n&&(n=hX.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return Lr(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(hX),fX=new pX(dX);function mX(e){return void 0===e&&(e=1/0),rX(lQ,e)}var gX=new uQ((function(e){return e.complete()}));function vX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qQ(e),r=function(e,t){return"number"===typeof HQ(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?PQ(i[0]):mX(r)(VQ(i,n)):gX}function yX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mX(1)(VQ(e,qQ(e)))}function bX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qQ(e);return OQ((function(t,r){(n?yX(e,t,n):yX(e,t)).subscribe(r)}))}function wX(e,t){return LJ(t)?rX(e,t,1):rX(e,1)}function xX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return VQ(e,qQ(e))}var SX=n(4605),CX=n(3217);class _X{constructor(e){this.buffer=[],this.enabled=!0,this.setEnabled=e=>{this.enabled!==e&&(this.enabled=e,this.buffer=[])},this.trace=(e,t)=>{this.enabled&&this.buffer.push([e,this.id,t,Date.now()])},this.take=()=>{const e=this.buffer;return this.buffer=[],{snapshot:e,rollback:()=>{this.buffer.unshift(...e)}}},this.dispose=()=>{this.buffer=[]},this.id=e}}const kX=new _X(null);if("undefined"!==typeof navigator&&"undefined"!==typeof navigator.mediaDevices){const e=e=>({id:e.id,tracks:e.getTracks().map((e=>({id:e.id,kind:e.kind,label:e.label,enabled:e.enabled,muted:e.muted,readyState:e.readyState})))}),t=kX.trace,n=navigator.mediaDevices;for(const r of["getUserMedia","getDisplayMedia"]){const i=n[r];if(!i)continue;let o=0;n[r]=async function(s){const a=`navigator.mediaDevices.${r}.${o++}`;t(a,s);try{const r=await i.call(n,s);return t(`${a}.OnSuccess`,e(r)),r}catch(hoe){throw t(`${a}.OnFailure`,hoe.name),hoe}}}}const TX="disabled",AX="auto-on",EX="block-users",IX="enable-noise-cancellation",RX="join-backstage",PX="mute-users",jX="pin-for-everyone",NX="screenshare",OX="send-audio",DX="send-video",MX="update-call-permissions";class LX extends Error{}var FX;!function(e){e[e.NULL_VALUE=0]="NULL_VALUE"}(FX||(FX={}));const UX=new class extends uK{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>$X}}])}internalJsonWrite(e,t){let n={};for(let[r,i]of Object.entries(e.fields))n[r]=$X.toJson(i);return n}internalJsonRead(e,t,n){if(!wG(e))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+bG(e)+".");n||(n=this.create());for(let[r,i]of globalThis.Object.entries(e))n.fields[r]=$X.fromJson(i);return n}};const $X=new class extends uK{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",FX]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>UX},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>VX}])}internalJsonWrite(e,t){if(void 0===e.kind.oneofKind)throw new globalThis.Error;switch(e.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return e.kind.boolValue;case"nullValue":return null;case"numberValue":let t=e.kind.numberValue;if("number"==typeof t&&!Number.isFinite(t))throw new globalThis.Error;return t;case"stringValue":return e.kind.stringValue;case"listValue":let n=this.fields.find((e=>6===e.no));if("message"!==n?.kind)throw new globalThis.Error;return n.T().toJson(e.kind.listValue);case"structValue":let r=this.fields.find((e=>5===e.no));if("message"!==r?.kind)throw new globalThis.Error;return r.T().toJson(e.kind.structValue)}}internalJsonRead(e,t,n){switch(n||(n=this.create()),typeof e){case"number":n.kind={oneofKind:"numberValue",numberValue:e};break;case"string":n.kind={oneofKind:"stringValue",stringValue:e};break;case"boolean":n.kind={oneofKind:"boolValue",boolValue:e};break;case"object":null===e?n.kind={oneofKind:"nullValue",nullValue:FX.NULL_VALUE}:globalThis.Array.isArray(e)?n.kind={oneofKind:"listValue",listValue:VX.fromJson(e)}:n.kind={oneofKind:"structValue",structValue:UX.fromJson(e)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+bG(e))}return n}};const VX=new class extends uK{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>$X}])}internalJsonWrite(e,t){return e.values.map((e=>$X.toJson(e)))}internalJsonRead(e,t,n){if(!globalThis.Array.isArray(e))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+bG(e));n||(n=this.create());let r=e.map((e=>$X.fromJson(e)));return n.values.push(...r),n}};const BX=new class extends uK{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),t=Date.now();return e.seconds=LG.from(Math.floor(t/1e3)).toString(),e.nanos=t%1e3*1e6,e}toDate(e){return new Date(1e3*LG.from(e.seconds).toNumber()+Math.ceil(e.nanos/1e6))}fromDate(e){const t=this.create(),n=e.getTime();return t.seconds=LG.from(Math.floor(n/1e3)).toString(),t.nanos=1e6*(n%1e3+(n<0&&n%1e3!==0?1e3:0)),t}internalJsonWrite(e,t){let n=1e3*LG.from(e.seconds).toNumber();if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let r="Z";if(e.nanos>0){let t=(e.nanos+1e9).toString().substring(1);r="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(n).toISOString().replace(".000Z",r)}internalJsonRead(e,t,n){if("string"!==typeof e)throw new Error("Unable to parse Timestamp from JSON "+bG(e)+".");let r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return n||(n=this.create()),n.seconds=LG.from(i/1e3).toString(),n.nanos=0,r[7]&&(n.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),n}};var zX,WX,HX,qX,GX,KX,YX,JX,QX,XX,ZX,eZ;!function(e){e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER"}(zX||(zX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT"}(WX||(WX={})),function(e){e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"}(HX||(HX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"}(qX||(qX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL"}(GX||(GX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"}(KX||(KX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION"}(YX||(YX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE"}(JX||(JX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED"}(QX||(QX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE"}(XX||(XX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN"}(ZX||(ZX={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL"}(eZ||(eZ={}));const tZ=new class extends uK{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>iZ},{no:2,name:"started_at",kind:"message",T:()=>BX},{no:3,name:"participant_count",kind:"message",T:()=>nZ},{no:4,name:"pins",kind:"message",repeat:1,T:()=>rZ}])}};const nZ=new class extends uK{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}};const rZ=new class extends uK{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const iZ=new class extends uK{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>BX},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",WX,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>UX},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}};const oZ=new class extends uK{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",HX,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}};const sZ=new class extends uK{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}};const aZ=new class extends uK{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>sZ},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",HX,"VIDEO_QUALITY_"]}])}};const lZ=new class extends uK{constructor(){super("stream.video.sfu.models.SubscribeOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:2,name:"codecs",kind:"message",repeat:1,T:()=>uZ}])}};const cZ=new class extends uK{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>uZ},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5},{no:7,name:"video_dimension",kind:"message",T:()=>sZ},{no:8,name:"id",kind:"scalar",T:5}])}};const uZ=new class extends uK{constructor(){super("stream.video.sfu.models.Codec",[{no:16,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:15,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}};const dZ=new class extends uK{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",zX,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const hZ=new class extends uK{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>aZ},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8},{no:11,name:"codec",kind:"message",T:()=>uZ},{no:12,name:"publish_option_id",kind:"scalar",T:5}])}};const pZ=new class extends uK{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",GX,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const fZ=new class extends uK{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>mZ},{no:2,name:"os",kind:"message",T:()=>gZ},{no:3,name:"browser",kind:"message",T:()=>vZ},{no:4,name:"device",kind:"message",T:()=>bZ}])}};const mZ=new class extends uK{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",KX,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}};const gZ=new class extends uK{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}};const vZ=new class extends uK{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const yZ=new class extends uK{constructor(){super("stream.video.sfu.models.RTMPIngress",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13},{no:3,name:"frame_rate",kind:"scalar",T:1},{no:4,name:"software",kind:"scalar",T:9},{no:5,name:"version",kind:"scalar",T:9},{no:6,name:"encoder",kind:"scalar",T:9},{no:7,name:"remote_addr",kind:"scalar",T:9}])}};const bZ=new class extends uK{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const wZ=new class extends uK{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>UX},{no:6,name:"created_at",kind:"message",T:()=>BX},{no:7,name:"updated_at",kind:"message",T:()=>BX}])}};const xZ=new class extends uK{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}};const SZ=new class extends uK{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}};const CZ=new class extends uK{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",ZX,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}};const _Z=new class extends uK{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",eZ,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}};const kZ=new class extends uK{constructor(){super("stream.video.sfu.models.PerformanceStats",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>uZ},{no:3,name:"avg_frame_time_ms",kind:"scalar",T:2},{no:4,name:"avg_fps",kind:"scalar",T:2},{no:5,name:"video_dimension",kind:"message",T:()=>sZ},{no:6,name:"target_bitrate",kind:"scalar",T:5}])}};var TZ=Object.freeze({__proto__:null,AndroidState:CZ,get AndroidThermalState(){return ZX},AppleState:_Z,get AppleThermalState(){return eZ},Browser:vZ,Call:wZ,get CallEndedReason(){return QX},CallGrants:xZ,CallState:tZ,ClientDetails:fZ,Codec:uZ,get ConnectionQuality(){return WX},Device:bZ,Error:pZ,get ErrorCode(){return GX},get GoAwayReason(){return JX},ICETrickle:dZ,InputDevices:SZ,OS:gZ,Participant:iZ,ParticipantCount:nZ,get PeerType(){return zX},PerformanceStats:kZ,Pin:rZ,PublishOption:cZ,RTMPIngress:yZ,Sdk:mZ,get SdkType(){return KX},StreamQuality:oZ,SubscribeOption:lZ,TrackInfo:hZ,get TrackType(){return qX},get TrackUnpublishReason(){return YX},VideoDimension:sZ,VideoLayer:aZ,get VideoQuality(){return HX},get WebsocketReconnectStrategy(){return XX}});const AZ=new class extends uK{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const EZ=new class extends uK{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>pZ}])}};const IZ=new class extends uK{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const RZ=new class extends uK{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>pZ}])}};const PZ=new class extends uK{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",XX,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};const jZ=new class extends uK{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>PZ}])}};const NZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>SZ},{no:8,name:"video_devices",kind:"message",T:()=>SZ},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>CZ},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>_Z},{no:11,name:"telemetry",kind:"message",T:()=>jZ},{no:12,name:"rtmp",kind:"message",T:()=>yZ},{no:13,name:"subscriber_rtc_stats",kind:"scalar",T:9},{no:14,name:"publisher_rtc_stats",kind:"scalar",T:9},{no:15,name:"rtc_stats",kind:"scalar",T:9},{no:16,name:"encode_stats",kind:"message",repeat:1,T:()=>kZ},{no:17,name:"decode_stats",kind:"message",repeat:1,T:()=>kZ},{no:18,name:"unified_session_id",kind:"scalar",T:9}])}};const OZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>pZ}])}};const DZ=new class extends uK{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",zX,"PEER_TYPE_"]}])}};const MZ=new class extends uK{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>pZ}])}};const LZ=new class extends uK{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>UZ}])}};const FZ=new class extends uK{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>pZ}])}};const UZ=new class extends uK{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}};new class extends uK{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}};new class extends uK{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}};const $Z=new class extends uK{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>BZ}])}};const VZ=new class extends uK{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>pZ}])}};const BZ=new class extends uK{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>sZ}])}};const zZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",zX,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const WZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>pZ}])}};const HZ=new class extends uK{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>pZ}])}};const qZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>hZ}])}};const GZ=new class extends uK{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>pZ}])}},KZ=new class{constructor(e,t,n){this.typeName=e,this.methods=t.map((e=>function(e,t){var n,r,i;let o=e;return o.service=t,o.localName=null!==(n=o.localName)&&void 0!==n?n:hG(o.name),o.serverStreaming=!!o.serverStreaming,o.clientStreaming=!!o.clientStreaming,o.options=null!==(r=o.options)&&void 0!==r?r:{},o.idempotency=null!==(i=o.idempotency)&&void 0!==i?i:void 0,o}(e,this))),this.options=null!==n&&void 0!==n?n:{}}}("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:qZ,O:GZ},{name:"SendAnswer",options:{},I:zZ,O:WZ},{name:"IceTrickle",options:{},I:dZ,O:HZ},{name:"UpdateSubscriptions",options:{},I:$Z,O:VZ},{name:"UpdateMuteStates",options:{},I:LZ,O:FZ},{name:"IceRestart",options:{},I:DZ,O:MZ},{name:"SendStats",options:{},I:NZ,O:OZ},{name:"StartNoiseCancellation",options:{},I:AZ,O:EZ},{name:"StopNoiseCancellation",options:{},I:IZ,O:RZ}]);const YZ=new class extends uK{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>f0},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>m0},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>g0},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>w0},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>dZ},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>_0},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>d0},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>h0},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>y0},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>u0},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>i0},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>o0},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>s0},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>ZZ},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>k0},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>T0},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>e0},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>XZ},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>A0},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>p0},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>QZ},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>JZ}])}};const JZ=new class extends uK{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_options",kind:"message",repeat:1,T:()=>cZ},{no:2,name:"reason",kind:"scalar",T:9}])}};new class extends uK{constructor(){super("stream.video.sfu.event.ChangePublishOptionsComplete",[])}};const QZ=new class extends uK{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}};const XZ=new class extends uK{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>rZ}])}};const ZZ=new class extends uK{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>pZ},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",XX,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};new class extends uK{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",zX,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}};const e0=new class extends uK{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",zX,"PEER_TYPE_"]}])}};const t0=new class extends uK{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>a0},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>r0},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>n0}])}};const n0=new class extends uK{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}};const r0=new class extends uK{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}};const i0=new class extends uK{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>nZ}])}};const o0=new class extends uK{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>iZ}])}};const s0=new class extends uK{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",YX,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>iZ}])}};const a0=new class extends uK{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>fZ},{no:5,name:"migration",kind:"message",T:()=>c0},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>l0},{no:9,name:"preferred_publish_options",kind:"message",repeat:1,T:()=>cZ},{no:10,name:"preferred_subscribe_options",kind:"message",repeat:1,T:()=>lZ}])}};const l0=new class extends uK{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",XX,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>hZ},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>BZ},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9},{no:8,name:"reason",kind:"scalar",T:9}])}};const c0=new class extends uK{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>hZ},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>BZ}])}};const u0=new class extends uK{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>tZ},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",repeat:1,T:()=>cZ}])}};const d0=new class extends uK{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>iZ}])}};const h0=new class extends uK{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>iZ}])}};const p0=new class extends uK{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>iZ}])}};const f0=new class extends uK{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}};const m0=new class extends uK{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}};const g0=new class extends uK{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>v0}])}};const v0=new class extends uK{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",WX,"CONNECTION_QUALITY_"]}])}};const y0=new class extends uK{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const b0=new class extends uK{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}};const w0=new class extends uK{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>b0}])}};const x0=new class extends uK{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>uZ},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:4,name:"publish_option_id",kind:"scalar",T:5}])}};const S0=new class extends uK{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>uZ},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}};const C0=new class extends uK{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>uZ},{no:3,name:"layers",kind:"message",repeat:1,T:()=>S0},{no:4,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",qX,"TRACK_TYPE_"]},{no:5,name:"publish_option_id",kind:"scalar",T:5}])}};const _0=new class extends uK{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>x0},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>C0}])}};const k0=new class extends uK{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>xZ},{no:2,name:"message",kind:"scalar",T:9}])}};const T0=new class extends uK{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",JX,"GO_AWAY_REASON_"]}])}};const A0=new class extends uK{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",QX,"CALL_ENDED_REASON_"]}])}};var E0,I0;!function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE"}(E0||(E0={})),function(e){e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW"}(I0||(I0={}));class R0{constructor(e){this._transport=e,this.typeName=KZ.typeName,this.methods=KZ.methods,this.options=KZ.options}setPublisher(e,t){const n=this.methods[0],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}sendAnswer(e,t){const n=this.methods[1],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}iceTrickle(e,t){const n=this.methods[2],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}updateSubscriptions(e,t){const n=this.methods[3],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}updateMuteStates(e,t){const n=this.methods[4],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}iceRestart(e,t){const n=this.methods[5],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}sendStats(e,t){const n=this.methods[6],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}startNoiseCancellation(e,t){const n=this.methods[7],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}stopNoiseCancellation(e,t){const n=this.methods[8],r=this._transport.mergeOptions(t);return dK("unary",this._transport,n,r,e)}}const P0={baseUrl:"",sendJson:!0,timeout:5e3,jsonOptions:{ignoreUnknownFields:!0}},j0=(e,t)=>({interceptUnary:(n,r,i,o)=>{let s;try{s=n(r,i,o)}finally{e(t,`Invoked SFU RPC method ${r.name}`,{request:s?.request,headers:s?.requestHeaders,response:s?.response})}return s}}),N0=e=>{const t={SendStats:!0};return{interceptUnary(n,r,i,o){if(t[r.name])return n(r,i,o);try{return e(r.name,i),n(r,i,o)}catch(hoe){throw e(`${r.name}OnFailure`,[i,hoe]),hoe}}}},O0=e=>new Promise((t=>setTimeout(t,e)));function D0(e){return e&&("[object Function]"===Object.prototype.toString.call(e)||"function"===typeof e||e instanceof Function)}const M0=40,L0=1e3;function F0(e){const t=Math.min(500+2e3*e,5e3),n=Math.min(Math.max(250,2e3*(e-1)),5e3);return Math.floor(Math.random()*(t-n)+n)}function U0(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function $0(){const e=function(e){const t=new Uint8Array(e);return V0(t),t}(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,[U0(e.subarray(0,4)),U0(e.subarray(4,6)),U0(e.subarray(6,8)),U0(e.subarray(8,10)),U0(e.subarray(10,16))].join("-")}const V0="undefined"!==typeof crypto&&crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t};function B0(e){"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function z0(e){"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}const W0=()=>"undefined"!==typeof navigator&&"reactnative"===navigator.product?.toLowerCase(),H0=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let q0,G0="info";const K0=function(e,t){let n;switch(e){case"error":if(W0()){t=`ERROR: ${t}`,n=console.info;break}n=console.error;break;case"warn":if(W0()){t=`WARN: ${t}`,n=console.info;break}n=console.warn;break;case"info":n=console.info;break;case"trace":n=console.trace;break;default:n=console.log}for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];n(t,...i)},Y0=e=>{G0=e},J0=()=>G0,Q0=e=>{const t=q0||K0,n=(e||[]).filter(Boolean).join(":");return function(e,r){if(H0[e]>=H0[G0]){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];t(e,`[${n}]: ${r}`,...o)}}},X0=async(e,t)=>{let n,r=0;do{r>0&&await O0(F0(r));try{n=await e()}catch(hoe){if(hoe instanceof hK&&hoe.code===IJ[IJ.cancelled]||(t?.aborted??!1))throw hoe;Q0(["sfu-client","rpc"])("debug",`rpc failed (${r})`,hoe),r++}}while(!n||n.response.error?.shouldRetry);return n},Z0=async e=>{const t=new RTCPeerConnection;t.addTransceiver("video",{direction:e}),t.addTransceiver("audio",{direction:e});const n=(await t.createOffer()).sdp??"";return t.getTransceivers().forEach((e=>{e.stop?.()})),t.close(),n},e1=e=>!!e&&("vp9"===(e=e.toLowerCase())||"av1"===e||"video/vp9"===e||"video/av1"===e),t1={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,changePublishOptions:void 0},n1=e=>Object.prototype.hasOwnProperty.call(t1,e);class r1{constructor(){var e=this;this.logger=Q0(["Dispatcher"]),this.subscribers={},this.dispatch=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const r=t.eventPayload.oneofKind;if(!r)return;const i=t.eventPayload[r];e.logger("debug",`Dispatching ${r}, tag=${n}`,i);const o=e.subscribers[r];if(o)for(const s of o)try{s(i)}catch(ZC){e.logger("warn","Listener failed with error",ZC)}},this.on=(e,t)=>{var n;return((n=this.subscribers)[e]??(n[e]=[])).push(t),()=>{this.off(e,t)}},this.off=(e,t)=>{this.subscribers[e]=(this.subscribers[e]||[]).filter((e=>e!==t))}}}class i1{constructor(){this.subscriberCandidates=new gQ,this.publisherCandidates=new gQ,this.push=e=>{const t=o1(e);if(t)if(e.peerType===zX.SUBSCRIBER)this.subscriberCandidates.next(t);else if(e.peerType===zX.PUBLISHER_UNSPECIFIED)this.publisherCandidates.next(t);else{Q0(["sfu-client"])("warn","ICETrickle, Unknown peer type",e)}},this.dispose=()=>{this.subscriberCandidates.complete(),this.publisherCandidates.complete()}}}const o1=e=>{try{return JSON.parse(e.iceCandidate)}catch(ZC){return void Q0(["sfu-client"])("error","Failed to parse ICE Trickle",ZC,e)}},s1=c1((function(e,t){let n=!1;return{cb:()=>t().finally((()=>{n||l1.delete(e)})),onContinued:()=>n=!0}})),a1=c1((function(e,t){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally((()=>{n.signal.aborted||l1.delete(e)})),onContinued:()=>n.abort()}})),l1=new Map;function c1(e){return function(t,n){const{cb:r,onContinued:i}=e(t,n),o=l1.get(t);o?.onContinued();const s=o?o.promise.then(r,r):r();return l1.set(t,{promise:s,onContinued:i}),s}}const u1=e=>{let t,n;if(GQ([e]).subscribe({next:e=>{let[n]=e;t=n},error:e=>{n=e}}).unsubscribe(),n)throw n;return t},d1=(e,t)=>{const n=(e=>"function"===typeof e)(t)?t(u1(e)):t;return e.next(n),n},h1=(e,t)=>{const n=e.getValue(),r=d1(e,t);return{lastValue:n,value:r,rollback:()=>d1(e,n)}},p1=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>Q0(["RxUtils"])("warn","An observable emitted an error",e);const r=e.subscribe({next:t,error:n});return()=>{r.unsubscribe()}},f1=(e,t)=>{const n=Symbol();return p1(e,(e=>{s1(n,(()=>t(e)))}))};var m1,g1=Object.freeze({__proto__:null,createSafeAsyncSubscription:f1,createSubscription:p1,getCurrentValue:u1,setCurrentValue:d1,updateValue:h1});!function(e){e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline"}(m1||(m1={}));class v1{constructor(){this.connectedUserSubject=new YQ(void 0),this.callsSubject=new YQ([]),this.setConnectedUser=e=>d1(this.connectedUserSubject,e),this.setCalls=e=>d1(this.callsSubject,e),this.registerCall=e=>{this.calls.find((t=>t.cid===e.cid))||this.setCalls((t=>[...t,e]))},this.unregisterCall=e=>(Q0(["client-state"])("trace",`Unregistering call: ${e.cid}`),this.setCalls((t=>t.filter((t=>t!==e))))),this.findCall=(e,t)=>this.calls.find((n=>n.type===e&&n.id===t)),this.connectedUserSubject.subscribe((async e=>{if(!e){const e=Q0(["client-state"]);for(const t of this.calls)t.state.callingState!==m1.LEFT&&(e("info",`User disconnected, leaving call: ${t.cid}`),await t.leave({message:"client.disconnectUser() called"}).catch((n=>{e("error",`Error leaving call: ${t.cid}`,n)})))}}))}get connectedUser(){return u1(this.connectedUserSubject)}get calls(){return u1(this.callsSubject)}}class y1{constructor(e){this.getCurrentValue=u1,this.connectedUser$=e.connectedUserSubject.asObservable(),this.calls$=e.callsSubject.asObservable()}get connectedUser(){return u1(this.connectedUser$)}get calls(){return u1(this.calls$)}}const b1=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{for(const r of t){const t=r(e,n);if(0!==t)return t}return 0}},w1=e=>t=>(n,r)=>e(n,r)?t(n,r):0,x1=e=>e.publishedTracks.includes(qX.VIDEO),S1=e=>e.publishedTracks.includes(qX.AUDIO),C1=e=>e.publishedTracks.includes(qX.SCREEN_SHARE),_1=e=>e.publishedTracks.includes(qX.SCREEN_SHARE_AUDIO),k1=e=>!!e.pin&&(e.pin.isLocalPin||e.pin.pinnedAt>0),T1=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,A1=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,E1=(e,t)=>C1(e)&&!C1(t)?-1:!C1(e)&&C1(t)?1:0,I1=(e,t)=>x1(e)&&!x1(t)?-1:!x1(e)&&x1(t)?1:0,R1=(e,t)=>S1(e)&&!S1(t)?-1:!S1(e)&&S1(t)?1:0,P1=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},j1=e=>(t,n)=>t.reaction?.type===e&&n.reaction?.type!==e?-1:t.reaction?.type!==e&&n.reaction?.type===e?1:0,N1=(e,t)=>(e.roles||[]).some((e=>t.includes(e))),O1=w1(((e,t)=>e.viewportVisibilityState?.videoTrack===E0.INVISIBLE||t.viewportVisibilityState?.videoTrack===E0.INVISIBLE)),D1=w1(((e,t)=>e.viewportVisibilityState?.videoTrack===E0.INVISIBLE||e.viewportVisibilityState?.videoTrack===E0.UNKNOWN||t.viewportVisibilityState?.videoTrack===E0.INVISIBLE||t.viewportVisibilityState?.videoTrack===E0.UNKNOWN)),M1=b1(P1,E1,O1(b1(T1,A1,j1("raised-hand"),I1,R1))),L1=b1(P1,E1,T1,O1(b1(A1,j1("raised-hand"),I1,R1))),F1=b1(P1,D1(b1(T1,A1,j1("raised-hand"),I1,R1))),U1=b1(O1(b1(T1,A1,j1("raised-hand"),I1,R1)),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>N1(e,t)&&!N1(n,t)?-1:!N1(e,t)&&N1(n,t)?1:0}("admin","host","speaker")),$1={broadcasting:!1,hls:{playlist_url:"",status:""},rtmps:[]};class V1{constructor(){this.backstageSubject=new YQ(!0),this.blockedUserIdsSubject=new YQ([]),this.createdAtSubject=new YQ(new Date),this.endedAtSubject=new YQ(void 0),this.startsAtSubject=new YQ(void 0),this.updatedAtSubject=new YQ(new Date),this.createdBySubject=new YQ(void 0),this.customSubject=new YQ({}),this.egressSubject=new YQ(void 0),this.ingressSubject=new YQ(void 0),this.recordingSubject=new YQ(!1),this.sessionSubject=new YQ(void 0),this.settingsSubject=new YQ(void 0),this.transcribingSubject=new YQ(!1),this.captioningSubject=new YQ(!1),this.endedBySubject=new YQ(void 0),this.thumbnailsSubject=new YQ(void 0),this.membersSubject=new YQ([]),this.ownCapabilitiesSubject=new YQ([]),this.callingStateSubject=new YQ(m1.UNKNOWN),this.startedAtSubject=new YQ(void 0),this.participantCountSubject=new YQ(0),this.anonymousParticipantCountSubject=new YQ(0),this.participantsSubject=new YQ([]),this.callStatsReportSubject=new YQ(void 0),this.closedCaptionsSubject=new YQ([]),this.orphanedTracks=[],this.logger=Q0(["CallState"]),this.sortParticipantsBy=M1,this.closedCaptionsTasks=new Map,this.dispose=()=>{for(const[e,t]of this.closedCaptionsTasks.entries())clearTimeout(t),this.closedCaptionsTasks.delete(e)},this.setSortParticipantsBy=e=>{this.sortParticipantsBy=e,this.setCurrentValue(this.participantsSubject,(e=>e))},this.getCurrentValue=u1,this.setCurrentValue=d1,this.setParticipantCount=e=>this.setCurrentValue(this.participantCountSubject,e),this.setStartedAt=e=>this.setCurrentValue(this.startedAtSubject,e),this.setCaptioning=e=>h1(this.captioningSubject,e),this.setAnonymousParticipantCount=e=>this.setCurrentValue(this.anonymousParticipantCountSubject,e),this.setParticipants=e=>this.setCurrentValue(this.participantsSubject,e),this.setCallingState=e=>this.setCurrentValue(this.callingStateSubject,e),this.setCallStatsReport=e=>this.setCurrentValue(this.callStatsReportSubject,e),this.setMembers=e=>{this.setCurrentValue(this.membersSubject,e)},this.setOwnCapabilities=e=>this.setCurrentValue(this.ownCapabilitiesSubject,e),this.setBackstage=e=>this.setCurrentValue(this.backstageSubject,e),this.setEndedAt=e=>this.setCurrentValue(this.endedAtSubject,e),this.findParticipantBySessionId=e=>this.participants.find((t=>t.sessionId===e)),this.getParticipantLookupBySessionId=()=>this.participants.reduce(((e,t)=>(e[t.sessionId]=t,e)),{}),this.updateParticipant=(e,t)=>{const n=this.findParticipantBySessionId(e);if(!n)return void this.logger("warn",`Participant with sessionId ${e} not found`);const r="function"===typeof t?t(n):t,i={...n,...r};return this.setParticipants((t=>t.map((t=>t.sessionId===e?i:t))))},this.updateOrAddParticipant=(e,t)=>this.setParticipants((n=>{let r=!0;const i=n.map((n=>n.sessionId===e?(r=!1,{...n,...t}):n));return r&&i.push(t),i})),this.updateParticipants=e=>0===Object.keys(e).length?this.participants:this.setParticipants((t=>t.map((t=>{const n=e[t.sessionId];return n?{...t,...n}:t})))),this.updateParticipantTracks=(e,t)=>this.updateParticipants(Object.entries(t).reduce(((t,n)=>{let[r,i]=n;i.dimension&&(i.dimension.height=Math.ceil(i.dimension.height),i.dimension.width=Math.ceil(i.dimension.width));const o="videoTrack"===e?"videoDimension":"screenShareTrack"===e?"screenShareDimension":void 0;return o&&(t[r]={[o]:i.dimension}),t}),{})),this.updateFromEvent=e=>{const t=this.eventHandlers[e.type];t&&t(e)},this.setServerSidePins=e=>{const t=e.reduce(((e,t)=>(e[t.sessionId]=Date.now(),e)),{});return this.setParticipants((e=>e.map((e=>{const n=t[e.sessionId];return n?{...e,pin:{isLocalPin:!1,pinnedAt:n}}:e.pin&&!e.pin.isLocalPin?{...e,pin:void 0}:e}))))},this.registerOrphanedTrack=e=>{this.orphanedTracks.push(e)},this.removeOrphanedTrack=e=>{this.orphanedTracks=this.orphanedTracks.filter((t=>t.id!==e))},this.takeOrphanedTracks=e=>{const t=this.orphanedTracks.filter((t=>t.trackLookupPrefix===e));return t.length>0&&(this.orphanedTracks=this.orphanedTracks.filter((t=>t.trackLookupPrefix!==e))),t},this.updateClosedCaptionSettings=e=>{this.closedCaptionsSettings={...this.closedCaptionsSettings,...e}},this.updateFromCallResponse=e=>{this.setBackstage(e.backstage),this.setCurrentValue(this.blockedUserIdsSubject,e.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(e.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(e.updated_at)),this.setCurrentValue(this.startsAtSubject,e.starts_at?new Date(e.starts_at):void 0),this.setEndedAt(e.ended_at?new Date(e.ended_at):void 0),this.setCurrentValue(this.createdBySubject,e.created_by),this.setCurrentValue(this.customSubject,e.custom),this.setCurrentValue(this.egressSubject,e.egress),this.setCurrentValue(this.ingressSubject,e.ingress),this.setCurrentValue(this.recordingSubject,e.recording);const t=this.setCurrentValue(this.sessionSubject,e.session);this.updateParticipantCountFromSession(t),this.setCurrentValue(this.settingsSubject,e.settings),this.setCurrentValue(this.transcribingSubject,e.transcribing),this.setCurrentValue(this.captioningSubject,e.captioning),this.setCurrentValue(this.thumbnailsSubject,e.thumbnails)},this.updateFromSfuCallState=(e,t,n)=>{const{participants:r,participantCount:i,startedAt:o,pins:s}=e,a=n?.announcedTracks.map((e=>e.trackType))??[];this.setParticipants((()=>{const e=this.getParticipantLookupBySessionId();return r.map((n=>{const r=e[n.sessionId],i=n.sessionId===t;return Object.assign({},r,n,{isLocalParticipant:i,publishedTracks:i?a:n.publishedTracks,viewportVisibilityState:r?.viewportVisibilityState??{videoTrack:E0.UNKNOWN,screenShareTrack:E0.UNKNOWN}})}))})),this.setParticipantCount(i?.total||0),this.setAnonymousParticipantCount(i?.anonymous||0),this.setStartedAt(o?BX.toDate(o):new Date),this.setServerSidePins(s)},this.updateFromMemberRemoved=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.filter((t=>-1===e.members.indexOf(t.user_id)))))},this.updateFromMemberAdded=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>[...t,...e.members]))},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$1;return{...e,broadcasting:!1,hls:{...e.hls,status:""}}}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$1;return{...e,broadcasting:!1,hls:{...e.hls,status:""}}}))},this.updateParticipantCountFromSession=e=>{if(!e||this.callingState===m1.JOINED)return;const t=Object.values(e.participants_count_by_role).reduce(((e,t)=>e+t),0),n=Math.max(t,e.participants.length);this.setParticipantCount(n),this.setAnonymousParticipantCount(e.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>t?{...t,anonymous_participant_count:e.anonymous_participant_count,participants_count_by_role:e.participants_count_by_role}:t));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantLeft=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:r}=t,{user:i,user_session_id:o}=e.participant;return{...t,participants:n.filter((e=>e.user_session_id!==o)),participants_count_by_role:{...r,[i.role]:Math.max(0,(r[i.role]||0)-1)}}}));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantJoined=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:r}=t,{user:i,user_session_id:o}=e.participant;let s=!0;const a=n.map((t=>t.user_session_id===o?(s=!1,e.participant):t));s&&a.push(e.participant);const l=s?1:0;return{...t,participants:a,participants_count_by_role:{...r,[i.role]:(r[i.role]||0)+l}}}));this.updateParticipantCountFromSession(t)},this.updateMembers=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.map((t=>{const n=e.members.find((e=>e.user_id===t.user_id));return n||t}))))},this.updateParticipantReaction=e=>{const{user:t,custom:n,type:r,emoji_code:i}=e.reaction;this.setParticipants((e=>e.map((e=>e.userId!==t.id?e:{...e,reaction:{type:r,emoji_code:i,custom:n}}))))},this.unblockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>t?t.filter((t=>t!==e.user.id)):t))},this.blockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>[...t||[],e.user.id]))},this.updateOwnCapabilities=e=>{e.user.id===this.localParticipant?.userId&&this.setCurrentValue(this.ownCapabilitiesSubject,e.own_capabilities)},this.updateFromClosedCaptions=e=>{this.setCurrentValue(this.closedCaptionsSubject,(t=>{const{closed_caption:n}=e,r=e=>`${e.speaker_id}/${e.start_time}`,i=r(n);if(t.some((e=>r(e)===i)))return t;const o=[...t,n],{visibilityDurationMs:s=2700,maxVisibleCaptions:a=2}=this.closedCaptionsSettings||{};if(s>0){const e=setTimeout((()=>{this.setCurrentValue(this.closedCaptionsSubject,(e=>e.filter((e=>e!==n)))),this.closedCaptionsTasks.delete(i)}),s);this.closedCaptionsTasks.set(i,e);for(let t=0;t<o.length-a;t++){const e=r(o[t]),n=this.closedCaptionsTasks.get(e);clearTimeout(n),this.closedCaptionsTasks.delete(e)}}return o.slice(-a)}))},this.participants$=this.participantsSubject.asObservable().pipe(BQ((e=>e.sort(this.sortParticipantsBy))),QQ({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(BQ((e=>e.find((e=>e.isLocalParticipant)))),QQ({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(BQ((e=>e.filter((e=>!e.isLocalParticipant)))),QQ({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(BQ((e=>e.filter((e=>!!e.pin)))),QQ({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(BQ((e=>e.find((e=>e.isDominantSpeaker)))),QQ({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(BQ((e=>e.some((e=>C1(e))))),XQ(),QQ({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable(),this.closedCaptions$=this.closedCaptionsSubject.asObservable();const e=(e,t)=>{if(e.length!==t.length)return!1;for(const n of e)if(!t.includes(n))return!1;for(const n of t)if(!e.includes(n))return!1;return!0},t=(e,t)=>e.asObservable().pipe(XQ(t));this.anonymousParticipantCount$=t(this.anonymousParticipantCountSubject),this.blockedUserIds$=t(this.blockedUserIdsSubject,e),this.backstage$=t(this.backstageSubject),this.callingState$=t(this.callingStateSubject),this.ownCapabilities$=t(this.ownCapabilitiesSubject,e),this.participantCount$=t(this.participantCountSubject),this.recording$=t(this.recordingSubject),this.transcribing$=t(this.transcribingSubject),this.captioning$=t(this.captioningSubject),this.eventHandlers={"call.frame_recording_ready":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.rtmp_broadcast_failed":void 0,"call.rtmp_broadcast_started":void 0,"call.rtmp_broadcast_stopped":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.updated":void 0,custom:void 0,"call.accepted":e=>this.updateFromCallResponse(e.call),"call.blocked_user":this.blockUser,"call.closed_caption":this.updateFromClosedCaptions,"call.closed_captions_failed":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.closed_captions_started":()=>{this.setCurrentValue(this.captioningSubject,!0)},"call.closed_captions_stopped":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.created":e=>this.updateFromCallResponse(e.call),"call.deleted":e=>this.updateFromCallResponse(e.call),"call.ended":e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.endedBySubject,e.user)},"call.frame_recording_failed":e=>{this.updateFromCallResponse(e.call)},"call.frame_recording_started":e=>{this.updateFromCallResponse(e.call)},"call.frame_recording_stopped":e=>{this.updateFromCallResponse(e.call)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":e=>{this.updateFromCallResponse(e.call)},"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":e=>this.updateFromCallResponse(e.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":e=>{this.updateFromCallResponse(e.call),this.setMembers(e.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":e=>this.updateFromCallResponse(e.call),"call.ring":e=>this.updateFromCallResponse(e.call),"call.missed":e=>this.updateFromCallResponse(e.call),"call.session_ended":e=>this.updateFromCallResponse(e.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":e=>this.updateFromCallResponse(e.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":e=>this.updateFromCallResponse(e.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get captioning(){return this.getCurrentValue(this.captioning$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}get closedCaptions(){return this.getCurrentValue(this.closedCaptions$)}}const B1=e=>{const t=[];return e.forEach((e=>{t.push(e)})),t},z1=e=>e&&e.type===KX.REACT?"stream-react":e&&e.type===KX.REACT_NATIVE?"stream-react-native":"stream-js",W1=e=>e?`${e.major}.${e.minor}.${e.patch}`:"0.0.0-development",H1=()=>"undefined"!==typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),q1=()=>"undefined"!==typeof navigator&&navigator.userAgent?.includes("Firefox");var G1=Object.freeze({__proto__:null,isChrome:()=>"undefined"!==typeof navigator&&navigator.userAgent?.includes("Chrome"),isFirefox:q1,isSafari:H1});const K1=(e,t)=>{const{trackKind:n,kind:r,publisher:i}=t,o="subscriber"===r?"inbound-rtp":"outbound-rtp",s=B1(e),a=s.filter((e=>e.type===o&&e.kind===n)).map((e=>{const t=e,n=s.find((e=>"codec"===e.type&&e.id===t.codecId)),o=s.find((e=>"transport"===e.type&&e.id===t.transportId));let a,l;if(o&&"connected"===o.dtlsState){const e=s.find((e=>"candidate-pair"===e.type&&e.id===o.selectedCandidatePairId));a=e?.currentRoundTripTime}if("publisher"===r&&i){const e=q1(),n=s.find((n=>"media-source"===n.type&&(!!e||n.id===t.mediaSourceId)));n&&(l=i.getTrackType(n.trackIdentifier))}return{bytesSent:t.bytesSent,bytesReceived:t.bytesReceived,codec:n?.mimeType,currentRoundTripTime:a,frameHeight:t.frameHeight,frameWidth:t.frameWidth,framesPerSecond:t.framesPerSecond,jitter:t.jitter,kind:t.kind,mediaSourceId:t.mediaSourceId,qualityLimitationReason:t.qualityLimitationReason,rid:t.rid,ssrc:t.ssrc,trackType:l}}));return{rawStats:e,streams:a,timestamp:Date.now()}},Y1=e=>({rawReport:e??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",codecPerTrackType:{},timestamp:Date.now()}),J1=e=>{const t=Y1(e);let n=-1;const r=new Set,i=e.streams,o=i.reduce(((e,t)=>{e.totalBytesSent+=t.bytesSent||0,e.totalBytesReceived+=t.bytesReceived||0,e.averageJitterInMs+=t.jitter||0,e.averageRoundTripTimeInMs+=t.currentRoundTripTime||0;const i=((e,t)=>e*t)(t.frameWidth||0,t.frameHeight||0);return i>n&&(e.highestFrameWidth=t.frameWidth||0,e.highestFrameHeight=t.frameHeight||0,e.highestFramesPerSecond=t.framesPerSecond||0,n=i),r.add(t.qualityLimitationReason||""),e}),t);i.length>0&&(o.averageJitterInMs=Math.round(o.averageJitterInMs/i.length*1e3),o.averageRoundTripTimeInMs=Math.round(o.averageRoundTripTimeInMs/i.length*1e3),o.codec=i[0].codec||"",o.codecPerTrackType=i.reduce(((e,t)=>(t.trackType&&(e[t.trackType]=t.codec||""),e)),{}));const s=[r.has("cpu")&&"cpu",r.has("bandwidth")&&"bandwidth",r.has("other")&&"other"].filter(Boolean).join(", ");return s&&(o.qualityLimitationReasons=s),o},[Q1,X1,Z1]="1.21.0".split(".");let e2,t2,n2,r2={type:KX.PLAIN_JAVASCRIPT,major:Q1,minor:X1,patch:Z1},i2={oneofKind:void 0};const o2=()=>r2,s2=async()=>{if(W0())return{sdk:r2,os:e2,device:t2};const e=navigator.userAgentData;let t;if(e&&e.getHighEntropyValues)try{t=await e.getHighEntropyValues(["platform","platformVersion"])}catch{}const n=new SX.UAParser(navigator.userAgent),{browser:r,os:i,device:o,cpu:s}=n.getResult();return{sdk:r2,browser:{name:r.name||navigator.userAgent,version:r.version||""},os:{name:t?.platform||i.name||"",version:t?.platformVersion||i.version||"",architecture:s.architecture||""},device:{name:[o.vendor,o.model,o.type].filter(Boolean).join(" "),version:""}}};class a2{constructor(e,t){let{options:n,clientDetails:r,subscriber:i,publisher:o,microphone:s,camera:a,state:l,unifiedSessionId:c}=t;this.logger=Q0(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(e,t)=>{const{browserPermissionState$:n}=e.state;this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=p1(GQ([n,this.state.ownCapabilities$]),(n=>{let[r,i]=n;this.unsubscribeListDevicesSubscription?.();const o="mic"===t?i.includes(OX):i.includes(DX);"granted"===r&&o?this.unsubscribeListDevicesSubscription=p1(GQ([e.listDevices(),e.state.selectedDevice$]),(e=>{let[n,r]=e;const i=n.find((e=>e.deviceId===r));this.inputDevices.set(t,{currentDevice:i?.label||r||"",availableDevices:n.map((e=>e.label)),isPermitted:!0})})):this.inputDevices.set(t,{currentDevice:"",availableDevices:[],isPermitted:!1})}))},this.sendConnectionTime=e=>{this.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:e}})},this.sendReconnectionTime=(e,t)=>{this.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{strategy:e,timeSeconds:t}}})},this.sendTelemetryData=e=>{this.run(e).catch((e=>{this.logger("warn","Failed to send telemetry data",e)}))},this.run=async e=>{const[t,n]=await Promise.all([this.subscriber.stats.get(),this.publisher?.stats.get()]);this.subscriber.tracer?.trace("getstats",t.delta),n&&this.publisher?.tracer?.trace("getstats",n.delta);const r=this.subscriber.tracer?.take(),i=this.publisher?.tracer?.take(),o=kX.take(),s=this.sfuClient.getTrace(),a=[...o.snapshot,...s?.snapshot??[],...i?.snapshot??[],...r?.snapshot??[]];try{await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:JSON.stringify(B1(t.stats)),publisherStats:n?JSON.stringify(B1(n.stats)):"[]",subscriberRtcStats:"",publisherRtcStats:"",rtcStats:JSON.stringify(a),encodeStats:n?.performanceStats??[],decodeStats:t.performanceStats,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),unifiedSessionId:this.unifiedSessionId,deviceState:i2,telemetry:e})}catch(hoe){throw i?.rollback(),r?.rollback(),o.rollback(),s?.rollback(),hoe}},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval((()=>{this.run().catch((e=>{this.logger("warn","Failed to report stats",e)}))}),this.options.reporting_interval_ms))},this.stop=()=>{this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=void 0,this.unsubscribeListDevicesSubscription?.(),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0,clearTimeout(this.timeoutId),this.timeoutId=void 0},this.scheduleOne=e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.run().catch((e=>{this.logger("warn","Failed to report stats",e)}))}),e)},this.sfuClient=e,this.options=n,this.subscriber=i,this.publisher=o,this.microphone=s,this.camera=a,this.state=l,this.unifiedSessionId=c;const{sdk:u,browser:d}=r;this.sdkName=z1(u),this.sdkVersion=W1(u);const h=n2;this.webRTCVersion=h?.version||`${d?.name||""}-${d?.version||""}`||"N/A"}}const l2=(e,t)=>{e.addEventListener("icecandidate",(e=>{t("onicecandidate",e.candidate)})),e.addEventListener("track",(e=>{const n=e.streams.map((e=>`stream:${e.id}`));t("ontrack",`${e.track.kind}:${e.track.id} ${n}`)})),e.addEventListener("signalingstatechange",(()=>{t("signalingstatechange",e.signalingState)})),e.addEventListener("iceconnectionstatechange",(()=>{t("iceconnectionstatechange",e.iceConnectionState)})),e.addEventListener("icegatheringstatechange",(()=>{t("icegatheringstatechange",e.iceGatheringState)})),e.addEventListener("connectionstatechange",(()=>{t("connectionstatechange",e.connectionState)})),e.addEventListener("negotiationneeded",(()=>{t("negotiationneeded",void 0)})),e.addEventListener("datachannel",(e=>{let{channel:n}=e;t("datachannel",[n.id,n.label])}));const n=e.close;e.close=function(){return t("close",void 0),n.call(this)};for(const r of["createOffer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate"]){const n=e[r];n&&(e[r]=async function(){try{for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t(r,i);const s=await n.apply(this,i);return t(`${r}OnSuccess`,s),s}catch(hoe){throw t(`${r}OnFailure`,hoe.toString()),hoe}})}};class c2{constructor(e,t,n){var r=this;this.previousStats={},this.frameTimeHistory=[],this.fpsHistory=[],this.get=async()=>{const e=await this.pc.getStats(),t=u2(e),n=this.withOverrides(this.peerType===zX.SUBSCRIBER?this.getDecodeStats(t):this.getEncodeStats(t)),r=d2(this.previousStats,t);return this.previousStats=t,this.frameTimeHistory=this.frameTimeHistory.slice(-2),this.fpsHistory=this.fpsHistory.slice(-2),{performanceStats:n,delta:r,stats:e}},this.getEncodeStats=e=>{const t=[];for(const n of Object.values(e)){if("outbound-rtp"!==n.type)continue;const{codecId:r,framesSent:i=0,kind:o,id:s,totalEncodeTime:a=0,framesPerSecond:l=0,frameHeight:c=0,frameWidth:u=0,targetBitrate:d=0,mediaSourceId:h}=n;if("audio"===o||!this.previousStats[s])continue;const p=this.previousStats[s],f=a-(p.totalEncodeTime||0),m=i-(p.framesSent||0),g=m>0?f/m*1e3:0;this.frameTimeHistory.push(g),this.fpsHistory.push(l);let v=qX.VIDEO;if(h&&e[h]){const t=e[h];v=this.trackIdToTrackType.get(t.trackIdentifier)||v}t.push({trackType:v,codec:p2(e,r),avgFrameTimeMs:h2(this.frameTimeHistory),avgFps:h2(this.fpsHistory),targetBitrate:Math.round(d),videoDimension:{width:u,height:c}})}return t},this.getDecodeStats=e=>{let t,n=0;for(const h of Object.values(e)){if("inbound-rtp"!==h.type)continue;const e=h,{kind:r,frameWidth:i=0,frameHeight:o=0}=e,s=i*o;"video"===r&&s>n&&(t=e,n=s)}if(!t||!this.previousStats[t.id])return[];const r=this.previousStats[t.id],{framesDecoded:i=0,framesPerSecond:o=0,totalDecodeTime:s=0,trackIdentifier:a}=t,l=s-(r.totalDecodeTime||0),c=i-(r.framesDecoded||0),u=c>0?l/c*1e3:0;this.frameTimeHistory.push(u),this.fpsHistory.push(o);const d=this.trackIdToTrackType.get(a)||qX.VIDEO;return[kZ.create({trackType:d,codec:p2(e,t.codecId),avgFrameTimeMs:h2(this.frameTimeHistory),avgFps:h2(this.fpsHistory),videoDimension:{width:t.frameWidth,height:t.frameHeight}})]},this.withOverrides=e=>{if(this.costOverrides)for(const t of e){const e=this.costOverrides.get(t.trackType);void 0!==e&&(t.avgFrameTimeMs=e+(t.avgFrameTimeMs||0)/1e3)}return e},this.setCost=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qX.VIDEO;r.costOverrides||(r.costOverrides=new Map),r.costOverrides.set(t,e)},this.pc=e,this.peerType=t,this.trackIdToTrackType=n}}const u2=e=>{const t={};return e.forEach(((e,n)=>{t[n]=e})),t},d2=(e,t)=>{t=JSON.parse(JSON.stringify(t));for(const[i,o]of Object.entries(t))if(delete o.id,e[i])for(const[t,n]of Object.entries(o))n===e[i][t]&&delete o[t];let n=-1/0;const r=Object.values(t);for(const i of r)i.timestamp>n&&(n=i.timestamp);for(const i of r)i.timestamp===n&&(i.timestamp=0);return t.timestamp=n,t},h2=e=>e.reduce(((e,t)=>e+t),0)/e.length,p2=(e,t)=>{if(!t||!e[t])return;const n=e[t];return uZ.create({name:n.mimeType.split("/").pop(),clockRate:n.clockRate,payloadType:n.payloadType,fmtp:n.sdpFmtpLine})};class f2{constructor(e,t){let{sfuClient:n,connectionConfig:r,state:i,dispatcher:o,onUnrecoverableError:s,logTag:a,enableTracing:l}=t;if(this.isIceRestarting=!1,this.isDisposed=!1,this.trackIdToTrackType=new Map,this.subscriptions=[],this.on=(e,t)=>{this.subscriptions.push(this.dispatcher.on(e,(n=>{s1(`pc.${e}`,(async()=>t(n))).catch((t=>{this.isDisposed||this.logger("warn",`Error handling ${e}`,t)}))})))},this.addTrickledIceCandidates=()=>{const{iceTrickleBuffer:e}=this.sfuClient,t=this.peerType===zX.SUBSCRIBER?e.subscriberCandidates:e.publisherCandidates;this.unsubscribeIceTrickle?.(),this.unsubscribeIceTrickle=f1(t,(async e=>this.pc.addIceCandidate(e).catch((t=>{this.isDisposed||this.logger("warn","ICE candidate error",t,e)}))))},this.setSfuClient=e=>{this.sfuClient=e},this.getStats=e=>this.pc.getStats(e),this.getTrackType=e=>this.trackIdToTrackType.get(e),this.onIceCandidate=e=>{const{candidate:t}=e;if(!t)return void this.logger("debug","null ice candidate");const n=this.asJSON(t);this.sfuClient.iceTrickle({peerType:this.peerType,iceCandidate:n}).catch((e=>{this.isDisposed||this.logger("warn","ICETrickle failed",e)}))},this.asJSON=e=>{if(!e.usernameFragment){const t=e.candidate.split(" "),n=t.findIndex((e=>"ufrag"===e))+1,r=t[n];return JSON.stringify({...e,usernameFragment:r})}return JSON.stringify(e.toJSON())},this.onConnectionStateChange=async()=>{const e=this.pc.connectionState;if(this.logger("debug","Connection state changed",e),this.tracer&&("connected"===e||"failed"===e))try{const e=await this.stats.get();this.tracer.trace("getstats",e.delta)}catch(hoe){this.tracer.trace("getstatsOnFailure",hoe.toString())}},this.onIceConnectionStateChange=()=>{const e=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",e),this.state.callingState!==m1.OFFLINE&&this.state.callingState!==m1.RECONNECTING&&(this.isIceRestarting||"failed"!==e&&"disconnected"!==e||(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch((e=>{if(this.isDisposed)return;const t="ICE restart failed";this.logger("error",t,e),this.onUnrecoverableError?.(`${t}: ${e}`)}))))},this.onIceCandidateError=e=>{const t=e instanceof RTCPeerConnectionIceErrorEvent&&`${e.errorCode}: ${e.errorText}`,n=this.pc.iceConnectionState,r="connected"===n||"checking"===n?"debug":"warn";this.logger(r,"ICE Candidate error",t)},this.onIceGatherChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.peerType=e,this.sfuClient=n,this.state=i,this.dispatcher=o,this.onUnrecoverableError=s,this.logger=Q0([e===zX.SUBSCRIBER?"Subscriber":"Publisher",a]),this.pc=new RTCPeerConnection(r),this.pc.addEventListener("icecandidate",this.onIceCandidate),this.pc.addEventListener("icecandidateerror",this.onIceCandidateError),this.pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.addEventListener("icegatheringstatechange",this.onIceGatherChange),this.pc.addEventListener("signalingstatechange",this.onSignalingChange),this.pc.addEventListener("connectionstatechange",this.onConnectionStateChange),this.stats=new c2(this.pc,e,this.trackIdToTrackType),l){const t=`${a}-${e===zX.SUBSCRIBER?"sub":"pub"}-${n.edgeName}`;this.tracer=new _X(t),this.tracer.trace("create",r),l2(this.pc,this.tracer.trace)}}dispose(){this.onUnrecoverableError=void 0,this.isDisposed=!0,this.detachEventHandlers(),this.pc.close(),this.tracer?.dispose()}detachEventHandlers(){this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("signalingstatechange",this.onSignalingChange),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatherChange),this.unsubscribeIceTrickle?.(),this.subscriptions.forEach((e=>e()))}}class m2{constructor(){var e=this;this.cache=[],this.layers=[],this.transceiverOrder=[],this.add=(e,t)=>{this.cache.push({publishOption:e,transceiver:t}),this.transceiverOrder.push(t)},this.get=e=>this.findTransceiver(e)?.transceiver,this.has=e=>!!this.get(e),this.find=e=>this.cache.find(e),this.items=()=>this.cache,this.indexOf=e=>this.transceiverOrder.indexOf(e),this.getLayers=e=>{const t=this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType));return t?.layers},this.setLayers=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.findLayer(t);r?r.layers=n:e.layers.push({publishOption:t,layers:n})},this.findTransceiver=e=>this.cache.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType)),this.findLayer=e=>this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType))}}const g2=(e,t)=>{Q0(["helpers"])("warn",t,e)},v2=e=>{switch(e){case qX.SCREEN_SHARE:return"screenShareStream";case qX.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case qX.VIDEO:return"videoStream";case qX.AUDIO:return"audioStream";case qX.UNSPECIFIED:throw new Error("Track type is unspecified");default:g2(e,"Unknown track type")}},y2=e=>e===qX.AUDIO||e===qX.SCREEN_SHARE_AUDIO,b2={q:3e5,h:75e4,f:125e4},w2=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{return{rid:e.rid||"",bitrate:e.maxBitrate||0,fps:e.maxFramerate||0,quality:(t=e.rid||"","q"===t?HX.LOW_UNSPECIFIED:"h"===t?HX.MID:HX.HIGH),videoDimension:{width:e.width,height:e.height}};var t}))},x2=(e,t)=>{if(y2(t.trackType))return;const n=[],r=e.getSettings(),{width:i=0,height:o=0}=r,{bitrate:s,codec:a,fps:l,maxSpatialLayers:c=3,maxTemporalLayers:u=3,videoDimension:d={width:1280,height:720}}=t,h=S2(d,i,o,s);let p=1,f=1;const m=e1(a?.name);for(const v of["f","h","q"].slice(0,c)){const e={active:!0,rid:v,width:Math.round(i/p),height:Math.round(o/p),maxBitrate:Math.round(h/f)||b2[v],maxFramerate:l};m?e.scalabilityMode=`L${g=c}T${u}${g>1?"_KEY":""}`:e.scaleResolutionDownBy=p,p*=2,f*=2,n.unshift(e)}var g;return C2(r,n)},S2=(e,t,n,r)=>{const{width:i,height:o}=e;if(t<i||n<o){const e=t*n/(i*o);return Math.round(r*e)}return r},C2=(e,t)=>{let n;const r=Math.max(e.width||0,e.height||0);n=r<=320?t.filter((e=>"f"===e.rid)):r<=640?t.filter((e=>"h"!==e.rid)):t;const i=["q","h","f"];return n.map(((e,t)=>({...e,rid:i[t]})))},_2=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return String(t);const r=e.sender.track,i=(0,CX.qg)(n).media.find((e=>e.type===r.kind&&(e.msid?.includes(r.id)??!0)));return"undefined"!==typeof i?.mid?String(i.mid):t<0?"":String(t)};class k2 extends f2{constructor(e){var t;let{publishOptions:n,...r}=e;super(zX.PUBLISHER_UNSPECIFIED,r),t=this,this.transceiverCache=new m2,this.clonedTracks=new Set,this.publish=async(e,t)=>{if(!this.publishOptions.some((e=>e.trackType===t)))throw new Error(`No publish options found for ${qX[t]}`);for(const n of this.publishOptions){if(n.trackType!==t)continue;const r=this.cloneTrack(e),i=this.transceiverCache.get(n);if(i){const e=i.sender.track;await this.updateTransceiver(i,r,t),W0()||this.stopTrack(e)}else await this.addTransceiver(r,n)}},this.addTransceiver=async(e,t)=>{const n=x2(e,t),r=e1(t.codec?.name)?(e=>{if(!e)return;const t=e=>t=>t.rid===e;return[{...e.find(t("f"))||e.find(t("h"))||e.find(t("q")),rid:"q"}]})(n):n,i=this.pc.addTransceiver(e,{direction:"sendonly",sendEncodings:r}),o=t.trackType;this.logger("debug",`Added ${qX[o]} transceiver`),this.transceiverCache.add(t,i),this.trackIdToTrackType.set(e.id,o),await this.negotiate()},this.updateTransceiver=async(e,t,n)=>{const r=e.sender;r.track&&this.trackIdToTrackType.delete(r.track.id),await r.replaceTrack(t),t&&this.trackIdToTrackType.set(t.id,n)},this.syncPublishOptions=async()=>{for(const e of this.publishOptions){const{trackType:t}=e;if(!this.isPublishing(t))continue;if(this.transceiverCache.has(e))continue;const n=this.transceiverCache.find((e=>!!e.transceiver.sender.track&&e.publishOption.trackType===t));if(!n||!n.transceiver)continue;const r=this.cloneTrack(n.transceiver.sender.track);await this.addTransceiver(r,e)}for(const e of this.transceiverCache.items()){const{publishOption:t,transceiver:n}=e;this.publishOptions.some((e=>e.id===t.id&&e.trackType===t.trackType))||(this.stopTrack(n.sender.track),await this.updateTransceiver(n,null,t.trackType))}},this.isPublishing=e=>{for(const t of this.transceiverCache.items()){if(t.publishOption.trackType!==e)continue;const n=t.transceiver.sender.track;if(n&&("live"===n.readyState&&n.enabled))return!0}return!1},this.stopTracks=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of t.transceiverCache.items()){const{publishOption:e,transceiver:r}=i;n.includes(e.trackType)&&t.stopTrack(r.sender.track)}},this.stopAllTracks=()=>{for(const{transceiver:e}of this.transceiverCache.items())this.stopTrack(e.sender.track);for(const e of this.clonedTracks)this.stopTrack(e)},this.changePublishQuality=async e=>{const{trackType:t,layers:n,publishOptionId:r}=e,i=n.filter((e=>e.active)),o="Update publish quality:";this.logger("info",`${o} requested layers by SFU:`,i);const s=this.transceiverCache.find((e=>e.publishOption.id===r&&e.publishOption.trackType===t)),a=s?.transceiver.sender;if(!a)return this.logger("warn",`${o} no video sender found.`);const l=a.getParameters();if(0===l.encodings.length)return this.logger("warn",`${o} there are no encodings set.`);const c=s?.publishOption.codec?.name,u=c&&e1(c);let d=!1;for(const p of l.encodings){const e=u?i[0]:i.find((e=>e.name===p.rid))??(1===l.encodings.length?i[0]:void 0),t=!!e?.active;if(t!==p.active&&(p.active=t,d=!0),!e)continue;const{maxFramerate:n,scaleResolutionDownBy:r,maxBitrate:o,scalabilityMode:s}=e;r>=1&&r!==p.scaleResolutionDownBy&&(p.scaleResolutionDownBy=r,d=!0),o>0&&o!==p.maxBitrate&&(p.maxBitrate=o,d=!0),n>0&&n!==p.maxFramerate&&(p.maxFramerate=n,d=!0),s&&s!==p.scalabilityMode&&(p.scalabilityMode=s,d=!0)}const h=l.encodings.filter((e=>e.active));if(!d)return this.logger("info",`${o} no change:`,h);await a.setParameters(l),this.logger("info",`${o} enabled rids:`,h)},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const e=this.pc.signalingState;this.isIceRestarting||"have-local-offer"===e?this.logger("debug","ICE restart is already in progress"):await this.negotiate({iceRestart:!0})},this.negotiate=async e=>s1("publisher.negotiate",(async()=>{const t=await this.pc.createOffer(e),n=this.getAnnouncedTracks(t.sdp);if(!n.length)throw new Error("Can't negotiate without any tracks");try{this.isIceRestarting=e?.iceRestart??!1,await this.pc.setLocalDescription(t);const{sdp:r=""}=t,{response:i}=await this.sfuClient.setPublisher({sdp:r,tracks:n});if(i.error)throw new Error(i.error.message);const{sdp:o}=i;await this.pc.setRemoteDescription({type:"answer",sdp:o})}finally{this.isIceRestarting=!1}this.addTrickledIceCandidates()})),this.getPublishedTracks=()=>{const e=[];for(const{transceiver:t}of this.transceiverCache.items()){const n=t.sender.track;n&&"live"===n.readyState&&e.push(n)}return e},this.getAnnouncedTracks=e=>{const t=[];for(const n of this.transceiverCache.items()){const{transceiver:r,publishOption:i}=n;r.sender.track&&t.push(this.toTrackInfo(r,i,e))}return t},this.getAnnouncedTracksForReconnect=()=>{const e=this.pc.localDescription?.sdp,t=[];for(const n of this.publishOptions){const r=this.transceiverCache.get(n);r&&r.sender.track&&t.push(this.toTrackInfo(r,n,e))}return t},this.toTrackInfo=(e,t,n)=>{const r=e.sender.track,i="live"===r.readyState,o=i?x2(r,t):this.transceiverCache.getLayers(t);this.transceiverCache.setLayers(t,o);const s=y2(t.trackType),a=s&&2===r.getSettings().channelCount,l=this.transceiverCache.indexOf(e),c=this.state.settings?.audio;return{trackId:r.id,layers:w2(o),trackType:t.trackType,mid:_2(e,l,n),stereo:a,dtx:s&&!!c?.opus_dtx_enabled,red:s&&!!c?.redundant_coding_enabled,muted:!i,codec:t.codec,publishOptionId:t.id}},this.cloneTrack=e=>{const t=e.clone();return this.clonedTracks.add(t),t},this.stopTrack=e=>{e&&(e.stop(),this.clonedTracks.delete(e))},this.publishOptions=n,this.on("iceRestart",(e=>{e.peerType===zX.PUBLISHER_UNSPECIFIED&&this.restartIce().catch((e=>{const t="ICE restart failed";this.logger("warn",t,e),this.onUnrecoverableError?.(`${t}: ${e}`)}))})),this.on("changePublishQuality",(async e=>{for(const t of e.videoSenders)await this.changePublishQuality(t)})),this.on("changePublishOptions",(e=>(this.publishOptions=e.publishOptions,this.syncPublishOptions())))}dispose(){super.dispose(),this.stopAllTracks(),this.clonedTracks.clear()}}class T2 extends f2{constructor(e){super(zX.SUBSCRIBER,e),this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),"have-remote-offer"===this.pc.signalingState)return void this.logger("debug","ICE restart is already in progress");if("new"===this.pc.connectionState)return void this.logger("debug","ICE connection is not yet established, skipping restart.");const e=this.isIceRestarting;try{this.isIceRestarting=!0,await this.sfuClient.iceRestart({peerType:zX.SUBSCRIBER})}catch(ZC){throw this.isIceRestarting=e,ZC}},this.handleOnTrack=e=>{const[t]=e.streams,[n,r]=t.id.split(":"),i=this.state.participants.find((e=>e.trackLookupPrefix===n));this.logger("debug",`[onTrack]: Got remote ${r} track for userId: ${i?.userId}`,e.track.id,e.track);const o=`${i?.userId} ${r}:${n}`;e.track.addEventListener("mute",(()=>{this.logger("info",`[onTrack]: Track muted: ${o}`)})),e.track.addEventListener("unmute",(()=>{this.logger("info",`[onTrack]: Track unmuted: ${o}`)})),e.track.addEventListener("ended",(()=>{this.logger("info",`[onTrack]: Track ended: ${o}`),this.state.removeOrphanedTrack(t.id)}));const s=(e=>{switch(e){case"TRACK_TYPE_AUDIO":return qX.AUDIO;case"TRACK_TYPE_VIDEO":return qX.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return qX.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return qX.SCREEN_SHARE_AUDIO;default:return}})(r);if(!s)return this.logger("error",`Unknown track type: ${r}`);if(this.trackIdToTrackType.set(e.track.id,s),!i)return this.logger("warn",`[onTrack]: Received track for unknown participant: ${n}`,e),void this.state.registerOrphanedTrack({id:t.id,trackLookupPrefix:n,track:t,trackType:s});const a=v2(s);if(!a)return void this.logger("error",`Unknown track type: ${r}`);const l=i[a];this.state.updateParticipant(i.sessionId,{[a]:t}),l&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${i.userId}`),l.getTracks().forEach((e=>{e.stop(),l.removeTrack(e)})))},this.negotiate=async e=>{await this.pc.setRemoteDescription({type:"offer",sdp:e.sdp}),this.addTrickledIceCandidates();const t=await this.pc.createAnswer();await this.pc.setLocalDescription(t),await this.sfuClient.sendAnswer({peerType:zX.SUBSCRIBER,sdp:t.sdp||""}),this.isIceRestarting=!1},this.pc.addEventListener("track",this.handleOnTrack),this.on("subscriberOffer",(async e=>this.negotiate(e).catch((e=>{this.logger("error","Negotiation failed.",e)}))))}detachEventHandlers(){super.detachEventHandlers(),this.pc.removeEventListener("track",this.handleOnTrack)}}function A2(e){let t=!0;const n=e.then((e=>({status:"resolved",result:e})),(e=>({status:"rejected",error:e}))).finally((()=>t=!1)),r=()=>n.then((e=>{if("rejected"===e.status)throw e.error;return e.result}));return r.checkPending=()=>t,r}const E2=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));let r=!1,i=!1;return{promise:n,resolve:t=>{r=!0,e(t)},reject:e=>{i=!0,t(e)},isResolved:()=>r,isRejected:()=>i}},I2=Symbol("uninitialized");function R2(e){let t=I2;return()=>(t===I2&&(t=e()),t)}const P2={src:"const timerIdMapping = new Map();\nself.addEventListener('message', (event) => {\n    const request = event.data;\n    switch (request.type) {\n        case 'setTimeout':\n        case 'setInterval':\n            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {\n                tick(request.id);\n                if (request.type === 'setTimeout') {\n                    timerIdMapping.delete(request.id);\n                }\n            }, request.timeout));\n            break;\n        case 'clearTimeout':\n        case 'clearInterval':\n            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));\n            timerIdMapping.delete(request.id);\n            break;\n    }\n});\nfunction tick(id) {\n    const message = { type: 'tick', id };\n    self.postMessage(message);\n}"};class j2{constructor(){this.currentTimerId=1,this.callbacks=new Map,this.fallback=!1}setup(){let{useTimerWorker:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)try{const e=new Blob([P2.src],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);this.worker=new Worker(t,{name:"str-timer-worker"}),this.worker.addEventListener("message",(e=>{const{type:t,id:n}=e.data;"tick"===t&&this.callbacks.get(n)?.()}))}catch(hoe){Q0(["timer-worker"])("error",hoe),this.fallback=!0}else this.fallback=!0}destroy(){this.callbacks.clear(),this.worker?.terminate(),this.worker=void 0,this.fallback=!1}get ready(){return this.fallback||Boolean(this.worker)}setInterval(e,t){return this.setTimer("setInterval",e,t)}clearInterval(e){this.clearTimer("clearInterval",e)}setTimeout(e,t){return this.setTimer("setTimeout",e,t)}clearTimeout(e){this.clearTimer("clearTimeout",e)}setTimer(e,t,n){if(this.ready||this.setup(),this.fallback)return("setTimeout"===e?setTimeout:setInterval)(t,n);const r=this.getTimerId();return this.callbacks.set(r,(()=>{t(),"setTimeout"===e&&this.callbacks.delete(r)})),this.sendMessage({type:e,id:r,timeout:n}),r}clearTimer(e,t){t&&(this.ready||this.setup(),this.fallback?("clearTimeout"===e?clearTimeout:clearInterval)(t):(this.callbacks.delete(t),this.sendMessage({type:e,id:t})))}getTimerId(){return this.currentTimerId++}sendMessage(e){if(!this.worker)throw new Error("Cannot use timer worker before it's set up");this.worker.postMessage(e)}}let N2=!1;const O2=R2((()=>{const e=new j2;return e.setup({useTimerWorker:N2}),e}));class D2{constructor(e){var t=this;let{dispatcher:n,credentials:r,sessionId:i,logTag:o,joinResponseTimeout:s=5e3,onSignalClose:a,streamClient:l,enableTracing:c}=e;this.iceTrickleBuffer=new i1,this.isLeaving=!1,this.isClosing=!1,this.pingIntervalInMs=1e4,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5e3,this.joinResponseTask=E2(),this.abortController=new AbortController,this.createWebSocket=()=>{const e={callEnded:!0,changePublishQuality:!0,error:!0,goAway:!0};this.signalWs=(e=>{const{endpoint:t,onMessage:n,logTag:r}=e,i=Q0(["SfuClientWS",r]);i("debug","Creating signaling WS channel:",t);const o=new WebSocket(t);return o.binaryType="arraybuffer",o.addEventListener("error",(e=>{i("error","Signaling WS channel error",e)})),o.addEventListener("close",(e=>{i("info","Signaling WS channel is closed",e)})),o.addEventListener("open",(e=>{i("info","Signaling WS channel is open",e)})),o.addEventListener("message",(e=>{try{const t=e.data instanceof ArrayBuffer?YZ.fromBinary(new Uint8Array(e.data)):YZ.fromJsonString(e.data.toString());n(t)}catch(hoe){i("error","Failed to decode a message. Check whether the Proto models match.",{event:e,error:hoe})}})),o})({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:t=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck();const n=t.eventPayload.oneofKind;e[n]&&this.tracer?.trace(n,t),this.dispatcher.dispatch(t,this.logTag)}}),this.signalReady=A2(Promise.race([new Promise(((e,t)=>{const n=()=>{this.signalWs.removeEventListener("open",n),e(this.signalWs)};this.signalWs.addEventListener("open",n),this.signalWs.addEventListener("close",(e=>{this.handleWebSocketClose(e),t(new Error("SFU WS closed unexpectedly"))}))})),new Promise(((e,t)=>{setTimeout((()=>t(new Error("SFU WS connection timed out"))),this.joinResponseTimeout)}))]))},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.handleWebSocketClose=e=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose),O2().clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),this.onSignalClose?.(`${e.code} ${e.reason}`)},this.close=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D2.NORMAL_CLOSURE,n=arguments.length>1?arguments[1]:void 0;t.isClosing=!0,t.signalWs.readyState===WebSocket.OPEN&&(t.logger("debug",`Closing SFU WS connection: ${e} - ${n}`),t.signalWs.close(e,`js-client: ${n}`),t.cleanUpWebSocket()),t.dispose()},this.dispose=()=>{this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),this.migrationTask?.resolve(),this.iceTrickleBuffer.dispose()},this.getTrace=()=>this.tracer?.take(),this.leaveAndClose=async e=>{await this.joinTask;try{this.isLeaving=!0,await this.notifyLeave(e)}catch(hoe){this.logger("debug","Error notifying SFU about leaving call",hoe)}this.close(D2.NORMAL_CLOSURE,e.substring(0,115))},this.updateSubscriptions=async e=>(await this.joinTask,X0((()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:e})),this.abortController.signal)),this.setPublisher=async e=>(await this.joinTask,X0((()=>this.rpc.setPublisher({...e,sessionId:this.sessionId})),this.abortController.signal)),this.sendAnswer=async e=>(await this.joinTask,X0((()=>this.rpc.sendAnswer({...e,sessionId:this.sessionId})),this.abortController.signal)),this.iceTrickle=async e=>(await this.joinTask,X0((()=>this.rpc.iceTrickle({...e,sessionId:this.sessionId})),this.abortController.signal)),this.iceRestart=async e=>(await this.joinTask,X0((()=>this.rpc.iceRestart({...e,sessionId:this.sessionId})),this.abortController.signal)),this.updateMuteStates=async e=>(await this.joinTask,X0((()=>this.rpc.updateMuteStates({muteStates:e,sessionId:this.sessionId})),this.abortController.signal)),this.sendStats=async e=>(await this.joinTask,this.rpc.sendStats({...e,sessionId:this.sessionId})),this.startNoiseCancellation=async()=>(await this.joinTask,X0((()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,X0((()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.enterMigration=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isLeaving=!0;const{timeout:n=7e3}=e;t.migrationTask?.reject(new Error("Cancelled previous migration"));const r=t.migrationTask=E2(),i=t.dispatcher.on("participantMigrationComplete",(()=>{i(),clearTimeout(t.migrateAwayTimeout),r.resolve()}));return t.migrateAwayTimeout=setTimeout((()=>{i(),r.reject(new Error(`Migration (${t.logTag}) failed to complete in ${n}ms`))}),n),r.promise},this.join=async e=>{await this.signalReady(),(this.joinResponseTask.isResolved()||this.joinResponseTask.isRejected())&&(this.joinResponseTask=E2());const t=this.joinResponseTask;let n;const r=this.dispatcher.on("joinResponse",(e=>{this.logger("debug","Received joinResponse",e),clearTimeout(n),r(),this.keepAlive(),t.resolve(e)}));n=setTimeout((()=>{r(),t.reject(new Error('Waiting for "joinResponse" has timed out'))}),this.joinResponseTimeout);const i=t0.create({requestPayload:{oneofKind:"joinRequest",joinRequest:a0.create({...e,sessionId:this.sessionId,token:this.credentials.token})}});return this.tracer?.trace("joinRequest",i),await this.send(i),t.promise},this.ping=async()=>this.send(t0.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async e=>this.send(t0.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:e}}})),this.send=async e=>{await this.signalReady();const t=t0.toJson(e);this.signalWs.readyState===WebSocket.OPEN?(this.logger("debug",`Sending message to: ${this.edgeName}`,t),this.signalWs.send(t0.toBinary(e))):this.logger("debug","Signal WS is not open. Skipping message",t)},this.keepAlive=()=>{const e=O2();e.clearInterval(this.keepAliveInterval),this.keepAliveInterval=e.setInterval((()=>{this.ping().catch((e=>{this.logger("error","Error sending healthCheckRequest to SFU",e)}))}),this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout((()=>{if(this.lastMessageTimestamp){(new Date).getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(D2.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)}}),this.unhealthyTimeoutInMs)},this.dispatcher=n,this.sessionId=i||$0(),this.onSignalClose=a,this.credentials=r;const{server:u,token:d}=r;var h;this.edgeName=u.edge_name,this.joinResponseTimeout=s,this.logTag=o,this.logger=Q0(["SfuClient",o]),this.tracer=c?new _X(`${o}-${this.edgeName}`):void 0,this.rpc=(e=>{const t=new MJ({...P0,...e});return new R0(t)})({baseUrl:u.url,interceptors:[(h={Authorization:`Bearer ${d}`},{interceptUnary:(e,t,n,r)=>(r.meta={...r.meta,...h},e(t,n,r))}),this.tracer&&N0(this.tracer.trace),"trace"===J0()&&j0(this.logger,"trace")].filter((e=>!!e))}),this.unsubscribeIceTrickle=n.on("iceTrickle",(e=>{this.iceTrickleBuffer.push(e)})),this.unsubscribeNetworkChanged=l.on("network.changed",(e=>{e.online?this.networkAvailableTask?.resolve():this.networkAvailableTask=E2()})),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN&&this.joinResponseTask.isResolved()}get joinTask(){return this.joinResponseTask.promise}}D2.NORMAL_CLOSURE=1e3,D2.ERROR_CONNECTION_UNHEALTHY=4001,D2.DISPOSE_OLD_SOCKET=4002;const M2=e=>async function(t){if(t.user.id===e.currentUserId)return;const{state:n}=e;t.call.created_by.id===e.currentUserId&&n.callingState===m1.RINGING&&await e.join()},L2=e=>async function(t){if(t.user.id===e.currentUserId)return;const{call:n}=t,{session:r}=n;if(!r)return void e.logger("warn","No call session provided. Ignoring call.rejected event.",t);const i=r.rejected_by,{members:o,callingState:s}=e.state;if(s===m1.RINGING)if(e.isCreatedByMe){const t=o.filter((t=>t.user_id!==e.currentUserId)).every((e=>i[e.user_id]));t&&(e.logger("info","everyone rejected, leaving the call"),await e.leave({reject:!0,reason:"cancel",message:"ring: everyone rejected"}))}else i[n.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),await e.leave({message:"ring: creator rejected"}));else e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",t)},F2=e=>function(){const{callingState:t}=e.state;t!==m1.IDLE&&t!==m1.LEFT&&e.leave({message:"call.ended event received",reject:!1}).catch((t=>{e.logger("error","Failed to leave call after call.ended ",t)}))},U2=e=>e.on("callEnded",(async t=>{if(e.state.callingState!==m1.LEFT)try{e.state.setEndedAt(new Date);const n=QX[t.reason];await e.leave({message:`callEnded received: ${n}`})}catch(hoe){e.logger("error","Failed to leave call after being ended by the SFU",hoe)}})),$2=e=>function(t){const{currentGrants:n}=t;if(n){const{canPublishAudio:t,canPublishVideo:r,canScreenshare:i}=n,o={[OX]:t,[DX]:r,[NX]:i},s=e.ownCapabilities.filter((e=>!1!==o[e]));Object.entries(o).forEach((e=>{let[t,n]=e;n&&!s.includes(t)&&s.push(t)})),e.setOwnCapabilities(s)}},V2=(e,t)=>e.on("connectionQualityChanged",(e=>{const{connectionQualityUpdates:n}=e;n&&t.updateParticipants(n.reduce(((e,t)=>{const{sessionId:n,connectionQuality:r}=t;return e[n]={connectionQuality:r},e}),{}))})),B2=(e,t)=>e.on("healthCheckResponse",(e=>{const{participantCount:n}=e;n&&(t.setParticipantCount(n.total),t.setAnonymousParticipantCount(n.anonymous))})),z2=(e,t)=>e.on("error",(e=>{e.error&&e.error.code!==GX.LIVE_ENDED||(t.state.setBackstage(!0),t.permissionsContext.hasPermission(RX)||t.leave({message:"live ended"}).catch((e=>{t.logger("error","Failed to leave call after live ended",e)})))})),W2=e=>e.on("error",(e=>{if(!e.error)return;const t=Q0(["SfuClient"]),{error:n,reconnectStrategy:r}=e;t("error","SFU reported error",{code:GX[n.code],reconnectStrategy:XX[r],message:n.message,shouldRetry:n.shouldRetry})})),H2=e=>function(t){const{pins:n}=t;e.setServerSidePins(n)},q2=e=>e.on("trackUnpublished",(async t=>{const{cause:n,type:r,sessionId:i}=t,{localParticipant:o}=e.state;if(n===YX.MODERATION&&i===o?.sessionId){const t=e.logger;t("info",`Local participant's ${qX[r]} track is muted remotely`);try{r===qX.VIDEO?await e.camera.disable():r===qX.AUDIO?await e.microphone.disable():r===qX.SCREEN_SHARE||r===qX.SCREEN_SHARE_AUDIO?await e.screenShare.disable():t("warn","Unsupported track type to soft mute",qX[r])}catch(Nb){t("error","Failed to stop publishing",Nb)}}})),G2=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.includes(i)||e.push(i);return e},K2=e=>function(t){const{participant:n}=t;if(!n)return;const r=Z2(e,n);e.updateOrAddParticipant(n.sessionId,Object.assign(n,r,{viewportVisibilityState:{videoTrack:E0.UNKNOWN,screenShareTrack:E0.UNKNOWN}}))},Y2=e=>function(t){const{participant:n}=t;n&&e.setParticipants((e=>e.filter((e=>e.sessionId!==n.sessionId))))},J2=e=>function(t){const{participant:n}=t;n&&e.updateParticipant(n.sessionId,n)},Q2=e=>function(t){const{type:n,sessionId:r}=t;if(t.participant){const n=Z2(e,t.participant),i=Object.assign(t.participant,n);e.updateOrAddParticipant(r,i)}else e.updateParticipant(r,(e=>({publishedTracks:G2([...e.publishedTracks],n)})))},X2=e=>function(t){const{type:n,sessionId:r}=t;if(t.participant){const n=Z2(e,t.participant),i=Object.assign(t.participant,n);e.updateOrAddParticipant(r,i)}else e.updateParticipant(r,(e=>({publishedTracks:e.publishedTracks.filter((e=>e!==n))})))},Z2=(e,t)=>{const n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;const r={};for(const i of n){const e=v2(i.trackType);e&&(r[e]=i.track)}return r},e4=(e,t)=>e.on("dominantSpeakerChanged",(e=>{const{sessionId:n}=e;n!==t.dominantSpeaker?.sessionId&&t.setParticipants((e=>e.map((e=>e.sessionId===n?{...e,isDominantSpeaker:!0}:e.isDominantSpeaker?{...e,isDominantSpeaker:!1}:e))))})),t4=(e,t)=>e.on("audioLevelChanged",(e=>{const{audioLevels:n}=e;t.updateParticipants(n.reduce(((e,t)=>(e[t.sessionId]={audioLevel:t.level,isSpeaking:t.isSpeaking},e)),{}))})),n4=e=>{const t={"call.accepted":M2(e),"call.rejected":L2(e)},n=Object.keys(t).map((n=>{const r=n;return e.on(r,t[r])}));return()=>{n.forEach((e=>e()))}};class r4{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(e,t)=>(this.observer=new IntersectionObserver((e=>{e.forEach((e=>{const t=this.elementHandlerMap.get(e.target);t?.(e)}))}),{root:e,...t,threshold:t?.threshold??.35}),this.queueSet.size&&(this.queueSet.forEach((t=>{let[n,r]=t;e.contains(n)&&(this.observer.observe(n),this.elementHandlerMap.set(n,r))})),this.queueSet.clear()),()=>{this.observer?.disconnect(),this.observer=null,this.elementHandlerMap.clear()}),this.observe=(e,t)=>{const n=[e,t],r=()=>{this.elementHandlerMap.delete(e),this.observer?.unobserve(e),this.queueSet.delete(n)};return this.elementHandlerMap.has(e)?r:this.observer?(this.observer.root.contains(e)&&(this.elementHandlerMap.set(e,t),this.observer.observe(e)),r):(this.queueSet.add(n),r)}}}const i4={videoTrack:E0.UNKNOWN,screenShareTrack:E0.UNKNOWN},o4=Symbol("globalOverrideKey");class s4{constructor(e,t){var n=this;this.viewportTracker=new r4,this.logger=Q0(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new YQ({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(BQ((e=>{const{[o4]:t,...n}=e;return{enabled:!1!==t?.enabled,preferredResolution:t?.enabled?t.dimension:void 0,participants:Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,{enabled:!1!==n?.enabled,preferredResolution:n?.enabled?n.dimension:void 0}]}))),isParticipantVideoEnabled:t=>e[t]?.enabled??e[o4]?.enabled??!0}})),QQ(1)),this.setVideoTrackSubscriptionOverrides=(e,t)=>d1(this.videoTrackSubscriptionOverridesSubject,t?n=>({...n,...Object.fromEntries(t.map((t=>[t,e])))}):e?{[o4]:e}:{}),this.applyTrackSubscriptions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I0.SLOW;n.pendingSubscriptionsUpdate&&clearTimeout(n.pendingSubscriptionsUpdate);const t=()=>{n.pendingSubscriptionsUpdate=null,n.sfuClient?.updateSubscriptions(n.trackSubscriptions).catch((e=>{n.logger("debug","Failed to update track subscriptions",e)}))};e?n.pendingSubscriptionsUpdate=setTimeout(t,e):t()},this.trackElementVisibility=(e,t,n)=>{const r=this.viewportTracker.observe(e,(r=>{this.callState.updateParticipant(t,(t=>{const i=t.viewportVisibilityState??i4,o=r.isIntersecting||document.fullscreenElement===e?E0.VISIBLE:E0.INVISIBLE;return{...t,viewportVisibilityState:{...i,[n]:o}}}))}));return()=>{r(),this.callState.updateParticipant(t,(e=>{const t=e.viewportVisibilityState??i4;return{...e,viewportVisibilityState:{...t,[n]:E0.UNKNOWN}}}))}},this.setViewport=e=>this.viewportTracker.setViewport(e),this.bindVideoElement=(e,t,n)=>{const r=this.callState.findParticipantBySessionId(t);if(!r)return;const i=(e,i)=>{!i||0!==i.width&&0!==i.height||(this.logger("debug","Ignoring 0x0 dimension",r),i=void 0),this.callState.updateParticipantTracks(n,{[t]:{dimension:i}}),this.applyTrackSubscriptions(e)},o=this.callState.participants$.pipe(BQ((e=>e.find((e=>e.sessionId===t)))),eX((e=>!!e)),XQ(),QQ({bufferSize:1,refCount:!0}));let s;const a=r.isLocalParticipant?null:o.pipe(BQ((e=>e.viewportVisibilityState?.[n])),XQ()).subscribe((t=>{if(s){if(s=t??E0.UNKNOWN,t===E0.INVISIBLE)return i(I0.MEDIUM,void 0);i(I0.MEDIUM,{width:e.clientWidth,height:e.clientHeight})}else s=t??E0.UNKNOWN}));let l;const c=r.isLocalParticipant?null:new ResizeObserver((()=>{const t={width:e.clientWidth,height:e.clientHeight};if(!l)return void(l=t);if(l.width===t.width&&l.height===t.height||s===E0.INVISIBLE)return;const n=Math.max(t.width/l.width,t.height/l.height)>1.2?I0.IMMEDIATE:I0.MEDIUM;i(n,{width:e.clientWidth,height:e.clientHeight}),l=t}));c?.observe(e);const u=r.isLocalParticipant?null:o.pipe(tX("publishedTracks"),BQ((e=>"videoTrack"===n?x1(e):C1(e))),XQ()).subscribe((t=>{t?i(I0.IMMEDIATE,{width:e.clientWidth,height:e.clientHeight}):i(I0.FAST,void 0)}));e.autoplay=!0,e.playsInline=!0,e.muted=!0;const d=o.pipe(tX("videoTrack"===n?"videoStream":"screenShareStream")).subscribe((t=>{const r="videoTrack"===n?t.videoStream:t.screenShareStream;e.srcObject!==r&&(e.srcObject=r??null,(H1()||q1())&&setTimeout((()=>{e.srcObject=r??null,e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}))}),25))}));return()=>{i(I0.FAST,void 0),a?.unsubscribe(),u?.unsubscribe(),d.unsubscribe(),c?.disconnect()}},this.bindAudioElement=(e,t,n)=>{const r=this.callState.findParticipantBySessionId(t);if(!r||r.isLocalParticipant)return;const i=this.callState.participants$.pipe(BQ((e=>e.find((e=>e.sessionId===t)))),eX((e=>!!e)),XQ(),QQ({bufferSize:1,refCount:!0})),o=i.pipe(tX("screenShareAudioTrack"===n?"screenShareAudioStream":"audioStream")).subscribe((t=>{const r="screenShareAudioTrack"===n?t.screenShareAudioStream:t.audioStream;e.srcObject!==r&&setTimeout((()=>{if(e.srcObject=r??null,e.srcObject){e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}));const{selectedDevice:t}=this.speaker.state;t&&"setSinkId"in e&&e.setSinkId(t)}}))})),s="setSinkId"in e?this.speaker.state.selectedDevice$.subscribe((t=>{t&&e.setSinkId(t)})):null,a=GQ([this.speaker.state.volume$,i.pipe(tX("audioVolume"))]).subscribe((t=>{let[n,r]=t;e.volume=r.audioVolume??n}));return e.autoplay=!0,()=>{s?.unsubscribe(),a.unsubscribe(),o.unsubscribe()}},this.callState=e,this.speaker=t}setSfuClient(e){this.sfuClient=e}get trackSubscriptions(){const e=[];for(const t of this.callState.remoteParticipants){if(t.videoDimension&&x1(t)){const n=this.videoTrackSubscriptionOverrides[t.sessionId]??this.videoTrackSubscriptionOverrides[o4];!1!==n?.enabled&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:qX.VIDEO,dimension:n?.dimension??t.videoDimension})}t.screenShareDimension&&C1(t)&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:qX.SCREEN_SHARE,dimension:t.screenShareDimension}),_1(t)&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:qX.SCREEN_SHARE_AUDIO})}return e}get videoTrackSubscriptionOverrides(){return u1(this.videoTrackSubscriptionOverrides$)}}class a4{constructor(){var e=this;this.permissions=[],this.setPermissions=e=>{this.permissions=e||[]},this.setCallSettings=e=>{this.settings=e},this.hasPermission=e=>this.permissions.includes(e),this.canPublish=e=>{switch(e){case qX.AUDIO:return this.hasPermission(OX);case qX.VIDEO:return this.hasPermission(DX);case qX.SCREEN_SHARE:case qX.SCREEN_SHARE_AUDIO:return this.hasPermission(NX);case qX.UNSPECIFIED:return!1;default:g2(e,"Unknown track type")}},this.canRequest=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.settings;if(!n)return!1;const{audio:r,video:i,screensharing:o}=n;switch(t){case OX:return r.access_request_enabled;case DX:return i.access_request_enabled;case NX:return o.access_request_enabled;default:return!1}}}}class l4{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sortParticipantsBy:M1};this.name=e,this.options=t}}const c4=new class{constructor(e){this.register=e=>{this.callTypes[e.name]=e},this.unregister=e=>{delete this.callTypes[e]},this.get=e=>(this.callTypes[e]||this.register(new l4(e)),this.callTypes[e]),this.callTypes=e.reduce(((e,t)=>(e[t.name]=t,e)),{})}}([new l4("default",{sortParticipantsBy:M1}),new l4("development",{sortParticipantsBy:M1}),new l4("livestream",{sortParticipantsBy:U1}),new l4("audio_room",{sortParticipantsBy:U1})]);class u4{constructor(e){this.permission=e,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=Q0(["permissions"]);const t=this.disposeController.signal;this.ready=(async()=>{const n=()=>{this.setState("prompt")};if(W0()||"undefined"===typeof navigator||!navigator.permissions?.query)return n();try{const n=await navigator.permissions.query({name:e.queryName});t.aborted||(this.setState(n.state),n.addEventListener("change",(()=>this.setState(n.state)),{signal:t}))}catch(hoe){this.logger("debug","Failed to query permission status",hoe),n()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt(){let{forcePrompt:e=!1,throwOnNotAllowed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await s1(`permission-prompt-${this.permission.queryName}`,(async()=>{if("prompt"!==await this.getState()||this.wasPrompted&&!e){const e="granted"===this.state;if(!e&&t)throw new Error("Permission was not granted previously, and prompting again is not allowed");return e}try{this.wasPrompted=!0,this.setState("prompting");const e=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return k4(e),this.setState("granted"),!0}catch(ZC){if(ZC&&"object"===typeof ZC&&"name"in ZC&&("NotAllowedError"===ZC.name||"SecurityError"===ZC.name)){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),t)throw ZC;return!1}throw this.logger("error","Failed to getUserMedia",{error:ZC,permission:this.permission}),this.setState("prompt"),ZC}}))}listen(e){return this.listeners.add(e),this.state&&e(this.state),()=>this.listeners.delete(e)}asObservable(){return this.getStateObservable().pipe(BQ((e=>"denied"!==e)))}asStateObservable(){return this.getStateObservable()}getIsPromptingObservable(){return this.getStateObservable().pipe(BQ((e=>"prompting"===e)))}getStateObservable(){return nX((e=>this.listen(e)),((e,t)=>t()))}setState(e){this.state!==e&&(this.state=e,this.listeners.forEach((t=>t(e))))}}const d4=(e,t)=>VQ((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some((e=>e.kind===t&&""===e.label))&&await e.prompt()&&(n=await navigator.mediaDevices.enumerateDevices()),n.filter((e=>e.kind===t&&""!==e.label&&"default"!==e.deviceId))})()),h4={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},p4={video:{width:1280,height:720}},f4=R2((()=>new u4({constraints:h4,queryName:"microphone"}))),m4=R2((()=>new u4({constraints:p4,queryName:"camera"}))),g4=R2((()=>{return navigator.mediaDevices.addEventListener?aX(navigator.mediaDevices,"devicechange").pipe(BQ((()=>{})),(e=500,void 0===t&&(t=fX),OQ((function(n,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,r.next(e)}};function l(){var n=s+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);a()}n.subscribe(DQ(r,(function(n){o=n,s=t.now(),i||(i=t.schedule(l,e),r.add(i))}),(function(){a(),r.complete()}),void 0,(function(){o=i=null})))})))):VQ([]);var e,t})),v4=R2((()=>vX(g4(),f4().asObservable()).pipe(bX(void 0),wX((()=>d4(f4(),"audioinput"))),QQ(1)))),y4=R2((()=>vX(g4(),m4().asObservable()).pipe(bX(void 0),wX((()=>d4(m4(),"videoinput"))),QQ(1)))),b4=R2((()=>vX(g4(),f4().asObservable()).pipe(bX(void 0),wX((()=>d4(f4(),"audiooutput"))),QQ(1)))),w4=async e=>{const t=await navigator.mediaDevices.getUserMedia(e);return q1()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t};function x4(e){if(!e||"object"!==typeof e)return!1;if("name"in e&&"string"===typeof e.name){const t=e.name;if(["OverconstrainedError","NotFoundError"].includes(t))return!0}if("message"in e&&"string"===typeof e.message){if(e.message.startsWith("OverconstrainedError"))return!0}return!1}const S4=async e=>{const t={audio:{...h4.audio,...e}};try{return await f4().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await w4(t)}catch(Nb){if(x4(Nb)&&e?.deviceId){const{deviceId:r,...i}=e;return Q0(["devices"])("warn","Failed to get audio stream, will try again with relaxed constraints",{error:Nb,constraints:t,relaxedConstraints:i}),S4(i)}throw Q0(["devices"])("error","Failed to get audio stream",{error:Nb,constraints:t}),Nb}},C4=async e=>{const t={video:{...p4.video,...e}};try{return await m4().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await w4(t)}catch(Nb){if(x4(Nb)&&e?.deviceId){const{deviceId:r,...i}=e;return Q0(["devices"])("warn","Failed to get video stream, will try again with relaxed constraints",{error:Nb,constraints:t,relaxedConstraints:i}),C4(i)}throw Q0(["devices"])("error","Failed to get video stream",{error:Nb,constraints:t}),Nb}},_4="undefined"!==typeof navigator&&"undefined"!==typeof navigator.mediaDevices?g4().pipe(bX(void 0),wX((()=>navigator.mediaDevices.enumerateDevices())),QQ(1)):void 0,k4=e=>{e.active&&(e.getTracks().forEach((e=>{e.stop()})),"function"===typeof e.release&&e.release())},T4=()=>/Mobi/i.test(navigator.userAgent);class A4{constructor(e,t,n){this.call=e,this.state=t,this.trackType=n,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach((e=>e()))},this.logger=Q0([`${qX[n].toLowerCase()} manager`]),!_4||W0()||this.trackType!==qX.AUDIO&&this.trackType!==qX.VIDEO||this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return"enabled"===this.state.status}async enable(){this.state.prevStatus=this.state.optimisticStatus,"enabled"!==this.state.optimisticStatus&&(this.state.setPendingStatus("enabled"),await a1(this.statusChangeConcurrencyTag,(async e=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}})))}async disable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.prevStatus=this.state.optimisticStatus,(e||"disabled"!==this.state.optimisticStatus)&&(this.state.setPendingStatus("disabled"),await a1(this.statusChangeConcurrencyTag,(async t=>{try{const t=e||"stop-tracks"===this.state.disableMode;await this.muteStream(t),this.state.setStatus("disabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}})))}async statusChangeSettled(){await async function(e){let t;for(;t=l1.get(e);)await t.promise}(this.statusChangeConcurrencyTag)}async resume(){"enabled"===this.state.prevStatus&&"enabled"!==this.state.status&&await this.enable()}async toggle(){return"enabled"===this.state.optimisticStatus?await this.disable():await this.enable()}registerFilter(e){const t={start:e,stop:void 0};return{registered:s1(this.filterRegistrationConcurrencyTag,(async()=>{this.filters.push(t),await this.applySettingsToStream()})),unregister:()=>s1(this.filterRegistrationConcurrencyTag,(async()=>{t.stop?.(),this.filters=this.filters.filter((e=>e!==t)),await this.applySettingsToStream()}))}}setDefaultConstraints(e){this.state.setDefaultConstraints(e)}async select(e){if(W0())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const t=this.state.selectedDevice;if(e!==t)try{this.state.setDevice(e),await this.applySettingsToStream()}catch(Nb){throw this.state.setDevice(t),Nb}}async applySettingsToStream(){await a1(this.statusChangeConcurrencyTag,(async()=>{this.enabled&&(await this.muteStream(),await this.unmuteStream())}))}publishStream(e){return this.call.publish(e,this.trackType)}stopPublishStream(){return this.call.stopPublish(this.trackType)}getTracks(){return this.state.mediaStream?.getTracks()??[]}async muteStream(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.state.mediaStream;if(!t)return;this.logger("debug",(e?"Stopping":"Disabling")+" stream"),this.call.state.callingState===m1.JOINED&&await this.stopPublishStream(),this.muteLocalStream(e);const n=this.getTracks().every((e=>"ended"===e.readyState));n&&("function"===typeof t.release&&t.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach((e=>e.stop?.())))}disableTracks(){this.getTracks().forEach((e=>{e.enabled&&(e.enabled=!1)}))}enableTracks(){this.getTracks().forEach((e=>{e.enabled||(e.enabled=!0)}))}stopTracks(){this.getTracks().forEach((e=>{"live"===e.readyState&&e.stop()}))}muteLocalStream(e){this.state.mediaStream&&(e?this.stopTracks():this.disableTracks())}async unmuteStream(){let e,t;this.logger("debug","Starting stream");try{if(this.state.mediaStream&&this.getTracks().every((e=>"live"===e.readyState)))e=this.state.mediaStream,this.enableTracks();else{const n={...this.state.defaultConstraints,deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0},r=e=>async t=>{if(!e)return t;const n=await e;return t.getTracks().forEach((e=>{const t=e.stop;e.stop=function(){t.call(e),n.getTracks().forEach((t=>{t.kind===e.kind&&t.stop()}))}})),n.getTracks().forEach((e=>{const n=()=>{t.getTracks().forEach((t=>{e.kind===t.kind&&(t.stop(),t.dispatchEvent(new Event("ended")))}))};e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("ended",n)}))})),t};t=this.getStream(n),e=await this.filters.reduce(((e,t)=>e.then((e=>{const{stop:n,output:r}=t.start(e);return t.stop=n,r})).then(r(e),(t=>(this.logger("warn","Filter failed to start and will be ignored",t),e)))),t)}if(this.call.state.callingState===m1.JOINED&&await this.publishStream(e),this.state.mediaStream!==e){this.state.setMediaStream(e,await t);const n=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout((()=>{this.isTrackStoppedDueToTrackEnd=!1}),2e3),await this.disable())},r=e=>()=>{T4()&&this.trackType===qX.VIDEO&&this.call.notifyTrackMuteState(e,this.trackType).catch((e=>{this.logger("warn","Error while notifying track mute state",e)}))};e.getTracks().forEach((e=>{const t=r(!0),i=r(!1);e.addEventListener("mute",t),e.addEventListener("unmute",i),e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("mute",t),e.removeEventListener("unmute",i),e.removeEventListener("ended",n)}))}))}}catch(hoe){throw t&&k4(await t),hoe}}get mediaDeviceKind(){return this.trackType===qX.AUDIO?"audioinput":this.trackType===qX.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(p1(GQ([_4.pipe(OQ((function(e,t){var n,r=!1;e.subscribe(DQ(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))),this.state.selectedDevice$]),(async e=>{let[[t,n],r]=e;try{if(!r)return;await this.statusChangeSettled();let e=!1,i=!1;const o=this.findDevice(n,r),s=this.findDevice(t,r);!o&&s?e=!0:o&&s&&o.deviceId===s.deviceId&&o.groupId!==s.groupId&&(i=!0),e&&(await this.disable(),await this.select(void 0)),i&&(this.isTrackStoppedDueToTrackEnd&&"disabled"===this.state.status?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(hoe){this.logger("warn","Unexpected error while handling disconnected or replaced device",hoe)}})))}findDevice(e,t){const n=this.mediaDeviceKind;return e.find((e=>e.deviceId===t&&e.kind===n))}}class E4{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stop-tracks",t=arguments.length>1?arguments[1]:void 0;this.disableMode=e,this.statusSubject=new YQ(void 0),this.optimisticStatusSubject=new YQ(void 0),this.mediaStreamSubject=new YQ(void 0),this.selectedDeviceSubject=new YQ(void 0),this.defaultConstraintsSubject=new YQ(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(XQ()),this.status$=this.statusSubject.asObservable().pipe(XQ()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(XQ()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.hasBrowserPermission$=t?t.asObservable().pipe(QQ(1)):xX(!0),this.browserPermissionState$=t?t.asStateObservable().pipe(QQ(1)):xX("prompt"),this.isPromptingPermission$=t?t.getIsPromptingObservable().pipe(QQ(1)):xX(!1)}get status(){return u1(this.status$)}get optimisticStatus(){return u1(this.optimisticStatus$)}get selectedDevice(){return u1(this.selectedDevice$)}get mediaStream(){return u1(this.mediaStream$)}setStatus(e){d1(this.statusSubject,e)}setPendingStatus(e){d1(this.optimisticStatusSubject,e)}setMediaStream(e,t){d1(this.mediaStreamSubject,e),t&&this.setDevice(this.getDeviceIdFromStream(t))}setDevice(e){d1(this.selectedDeviceSubject,e)}get defaultConstraints(){return u1(this.defaultConstraints$)}setDefaultConstraints(e){d1(this.defaultConstraintsSubject,e)}}class I4 extends E4{constructor(){super("stop-tracks",m4()),this.directionSubject=new YQ(void 0),this.direction$=this.directionSubject.asObservable().pipe(XQ())}get direction(){return u1(this.direction$)}setDirection(e){d1(this.directionSubject,e)}setMediaStream(e,t){if(super.setMediaStream(e,t),e){const t=W0()?this.direction:"environment"===e.getVideoTracks()[0]?.getSettings().facingMode?"back":"front";this.setDirection(t)}}getDeviceIdFromStream(e){const[t]=e.getVideoTracks();return t?.getSettings().deviceId}}class R4 extends A4{constructor(e){super(e,new I4,qX.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return W0()||T4()}async selectDirection(e){if(this.isDirectionSupportedByDevice())if(W0()){const t=this.getTracks()[0];if(!t)return void this.logger("warn","No video track found to do direction selection");await t.applyConstraints({facingMode:"front"===e?"user":"environment"}),this.state.setDirection(e),this.state.setDevice(void 0)}else this.state.setDirection(e),this.state.setDevice(void 0),this.getTracks().forEach((e=>{e.stop()})),await this.unmuteStream();else this.logger("warn","Camera direction ignored for desktop devices")}async flip(){const e="front"===this.state.direction?"back":"front";await this.selectDirection(e)}async selectTargetResolution(e){if(this.targetResolution.height=e.height,this.targetResolution.width=e.width,"enabled"===this.state.optimisticStatus)try{await this.statusChangeSettled()}catch(Nb){this.logger("warn","could not apply target resolution",Nb)}if(this.enabled&&this.state.mediaStream){const[e]=this.state.mediaStream.getVideoTracks();if(!e)return;const{width:t,height:n}=e.getSettings();t===this.targetResolution.width&&n===this.targetResolution.height||(await this.applySettingsToStream(),this.logger("debug",`${t}x${n} target resolution applied to media stream`))}}async apply(e,t){const n=!!this.call.state.localParticipant?.videoStream,r=this.call.permissionsContext.hasPermission(OX);if(n||!r)return;await this.statusChangeSettled();const{target_resolution:i,camera_facing:o,camera_default_on:s}=e;if(await this.selectTargetResolution(i),this.state.direction||this.state.selectedDevice||this.state.setDirection("front"===o?"front":"back"),!t)return;const{mediaStream:a}=this.state;this.enabled&&a?await this.publishStream(a):void 0===this.state.status&&s&&await this.enable()}getDevices(){return y4()}getStream(e){return e.width=this.targetResolution.width,e.height=this.targetResolution.height,!e.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(e.facingMode="front"===this.state.direction?"user":"environment"),C4(e)}}class P4 extends E4{constructor(e){super(e,f4()),this.speakingWhileMutedSubject=new YQ(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(XQ())}get speakingWhileMuted(){return u1(this.speakingWhileMuted$)}setSpeakingWhileMuted(e){d1(this.speakingWhileMutedSubject,e)}getDeviceIdFromStream(e){const[t]=e.getAudioTracks();return t?.getSettings().deviceId}}const j4=500,N4=150,O4=128;class D4{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(e){try{this.cleanupAudioStream();const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",(async e=>{await this.pc2.addIceCandidate(e.candidate)})),this.pc2.addEventListener("icecandidate",(async e=>{await this.pc1.addIceCandidate(e.candidate)})),this.pc2.addEventListener("track",(e=>{e.streams[0].getTracks().forEach((e=>{e._setVolume(0)}))})),t.getTracks().forEach((e=>this.pc1.addTrack(e,t)));const n=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(n),await this.pc1.setLocalDescription(n);const r=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(r),await this.pc2.setLocalDescription(r);const i=this.onSpeakingDetectedStateChange(e);return()=>{i(),this.stop()}}catch(Nb){return Q0(["RNSpeechDetector"])("error","error handling permissions: ",Nb),()=>{}}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream()}onSpeakingDetectedStateChange(e){let t,n,r=.13,i=!1;const o=[],s=setInterval((async()=>{try{const s=await this.pc1.getStats(),a=B1(s).find((e=>"media-source"===e.type&&"audio"===e.kind));if(a){const{audioLevel:s}=a;if(s){o.push(s),o.length>10&&o.shift();const a=o.reduce(((e,t)=>e+t),0)/o.length;a<1.1*r?n||(n=setTimeout((()=>{r=Math.min(.9*a,.13)}),5e3)):(clearTimeout(n),n=void 0),a>1.5*r&&(i||(i=!0,e({isSoundDetected:!0,audioLevel:s})),clearTimeout(t),t=setTimeout((()=>{i=!1,e({isSoundDetected:!1,audioLevel:0})}),500))}}}catch(Nb){Q0(["RNSpeechDetector"])("error","error checking audio level from stats",Nb)}}),100);return()=>{clearInterval(s),clearTimeout(t),clearTimeout(n)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach((e=>e.stop())),"function"===typeof this.audioStream.release&&this.audioStream.release())}}class M4 extends A4{constructor(e){super(e,new P4(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stop-tracks"),qX.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(f1(GQ([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),(async e=>{let[t,n,r,i]=e;try{if(t===m1.LEFT&&await this.stopSpeakingWhileMutedDetection(),t!==m1.JOINED)return;if(!this.speakingWhileMutedNotificationEnabled)return;n.includes(OX)&&"disabled"===i?await this.startSpeakingWhileMutedDetection(r):await this.stopSpeakingWhileMutedDetection()}catch(hoe){this.logger("warn","Could not enable speaking while muted",hoe)}}))),this.subscriptions.push(p1(this.call.state.callingState$,(e=>{if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;this.call.state.settings?.audio.noise_cancellation?.mode===AX&&e===m1.JOINED?this.noiseCancellationRegistration.then((()=>this.noiseCancellation?.enable())).catch((e=>(this.logger("warn","Failed to enable noise cancellation",e),this.call.notifyNoiseCancellationStopped()))):e===m1.LEFT&&this.noiseCancellationRegistration.then((()=>this.noiseCancellation?.disable())).catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))})))}async enableNoiseCancellation(e){if(W0())throw new Error("Noise cancellation is not supported in React Native");const{ownCapabilities:t,settings:n}=this.call.state;if(!t.includes(IX))throw new Error("Noise cancellation is not available.");const r=n?.audio.noise_cancellation;if(!r||r.mode===TX)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=e,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",(e=>{e?this.call.notifyNoiseCancellationStarting().catch((e=>{this.logger("warn","notifyNoiseCancellationStart failed",e)})):this.call.notifyNoiseCancellationStopped().catch((e=>{this.logger("warn","notifyNoiseCancellationStop failed",e)}))}));const t=this.registerFilter(e.toFilter());this.noiseCancellationRegistration=t.registered,this.unregisterNoiseCancellation=t.unregister,await this.noiseCancellationRegistration,r.mode===AX&&this.call.state.callingState===m1.JOINED&&e.enable()}catch(ZC){this.logger("warn","Failed to enable noise cancellation",ZC),await this.disableNoiseCancellation().catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))}}async disableNoiseCancellation(){if(W0())throw new Error("Noise cancellation is not supported in React Native");await(this.unregisterNoiseCancellation?.()??Promise.resolve()).then((()=>this.noiseCancellation?.disable())).then((()=>this.noiseCancellationChangeUnsubscribe?.())).catch((e=>{this.logger("warn","Failed to unregister noise cancellation",e)})),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,"disabled"===this.state.status&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}async apply(e,t){if(!t)return;const n=!!this.call.state.localParticipant?.audioStream,r=this.call.permissionsContext.hasPermission(OX);if(n||!r)return;await this.statusChangeSettled();const{mediaStream:i}=this.state;this.enabled&&i?await this.publishStream(i):void 0===this.state.status&&e.mic_default_on&&await this.enable()}getDevices(){return v4()}getStream(e){return S4(e)}async startSpeakingWhileMutedDetection(e){await s1(this.soundDetectorConcurrencyTag,(async()=>{if(await this.stopSpeakingWhileMutedDetection(),W0()){this.rnSpeechDetector=new D4;const e=await this.rnSpeechDetector.start((e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}));this.soundDetectorCleanup=()=>{e(),this.rnSpeechDetector=void 0}}else{const t=await this.getStream({deviceId:{exact:e}});this.soundDetectorCleanup=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{detectionFrequencyInMs:r=j4,audioLevelThreshold:i=N4,fftSize:o=O4,destroyStreamOnStop:s=!0}=n,a=new AudioContext,l=a.createAnalyser();l.fftSize=o;const c=a.createMediaStreamSource(e);c.connect(l);const u=setInterval((()=>{const n=new Uint8Array(l.frequencyBinCount);l.getByteFrequencyData(n);const r=n.some((e=>e>=i)),o=n.reduce(((e,t)=>e+t),0)/n.length,s=o>i?100:Math.round(o/i*100);e.getAudioTracks()[0]?.enabled?t({isSoundDetected:r,audioLevel:s}):t({isSoundDetected:!1,audioLevel:0})}),r);return async function(){clearInterval(u),c.disconnect(),l.disconnect(),"closed"!==a.state&&await a.close(),s&&e.getTracks().forEach((t=>{t.stop(),e.removeTrack(t)}))}}(t,(e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}))}}))}async stopSpeakingWhileMutedDetection(){await s1(this.soundDetectorConcurrencyTag,(async()=>{if(!this.soundDetectorCleanup)return;const e=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await e()}))}}class L4 extends E4{constructor(){super(...arguments),this.audioEnabledSubject=new YQ(!0),this.settingsSubject=new YQ(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(XQ()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=e=>{const[t]=e.getTracks();return t?.getSettings().deviceId}}get audioEnabled(){return u1(this.audioEnabled$)}setAudioEnabled(e){d1(this.audioEnabledSubject,e)}get settings(){return u1(this.settings$)}setSettings(e){d1(this.settingsSubject,e)}}class F4 extends A4{constructor(e){super(e,new L4,qX.SCREEN_SHARE),this.subscriptions.push(p1(e.state.settings$,(e=>{const t=e?.screensharing.target_resolution;t&&this.setDefaultConstraints({video:{width:t.width,height:t.height}})})))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){this.state.setAudioEnabled(!1),this.call.publisher?.isPublishing(qX.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(qX.SCREEN_SHARE_AUDIO)}getSettings(){return this.state.settings}setSettings(e){this.state.setSettings(e)}getDevices(){return xX([])}getStream(e){return this.state.audioEnabled||(e.audio=!1),(async e=>{try{return await navigator.mediaDevices.getDisplayMedia({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include",...e})}catch(ZC){throw Q0(["devices"])("error","Failed to get screen share stream",ZC),ZC}})(e)}async stopPublishStream(){return this.call.stopPublish(qX.SCREEN_SHARE,qX.SCREEN_SHARE_AUDIO)}async select(){throw new Error("This method is not supported in for Screen Share")}}class U4{constructor(){this.selectedDeviceSubject=new YQ(""),this.volumeSubject=new YQ(1),this.isDeviceSelectionSupported="undefined"!==typeof document&&"setSinkId"in document.createElement("audio"),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(XQ()),this.volume$=this.volumeSubject.asObservable().pipe(XQ())}get selectedDevice(){return u1(this.selectedDevice$)}get volume(){return u1(this.volume$)}setDevice(e){d1(this.selectedDeviceSubject,e),kX.trace("navigator.mediaDevices.setSinkId",e)}setVolume(e){d1(this.volumeSubject,e)}}class $4{constructor(e){this.state=new U4,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach((e=>e.unsubscribe()))},this.call=e,_4&&!W0()&&this.subscriptions.push(GQ([_4,this.state.selectedDevice$]).subscribe((e=>{let[t,n]=e;if(!n)return;const r=t.find((e=>e.deviceId===n&&"audiooutput"===e.kind));r||this.select("")})))}listDevices(){if(W0())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return b4()}select(e){if(W0())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(e)}setVolume(e){if(W0())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(e&&(e<0||e>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(e)}setParticipantVolume(e,t){if(W0())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(e,{audioVolume:t})}}class V4{constructor(e){var t=this;let{type:n,id:r,streamClient:i,members:o,ownCapabilities:s,sortParticipantsBy:a,clientStore:l,ringing:c=!1,watching:u=!1}=e;this.state=new V1,this.permissionsContext=new a4,this.dispatcher=new r1,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=XX.UNSPECIFIED,this.reconnectReason="",this.fastReconnectDeadlineSeconds=0,this.disconnectionTimeoutSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.setup=async()=>{await s1(this.joinLeaveConcurrencyTag,(async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",(e=>{this.state.updateFromEvent(e)}))),this.leaveCallHooks.add(this.on("changePublishOptions",(e=>{this.currentPublishOptions=e.publishOptions}))),this.leaveCallHooks.add(((e,t)=>{const n=e.state,r=[e.on("call.ended",F2(e)),U2(e),z2(t,e),W2(t),V2(t,n),B2(t,n),e.on("participantJoined",K2(n)),e.on("participantLeft",Y2(n)),e.on("participantUpdated",J2(n)),e.on("trackPublished",Q2(n)),e.on("trackUnpublished",X2(n)),t4(t,n),e4(t,n),e.on("callGrantsUpdated",$2(n)),e.on("pinsUpdated",H2(n)),q2(e)];return e.ringing&&r.push(n4(e)),()=>{r.forEach((e=>e()))}})(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===m1.LEFT&&this.state.setCallingState(m1.IDLE),this.initialized=!0)}))},this.registerEffects=()=>{this.leaveCallHooks.add(p1(this.state.settings$,(e=>{e&&this.permissionsContext.setCallSettings(e)}))),this.leaveCallHooks.add(f1(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(p1(this.state.blockedUserIds$,(async e=>{if(!e||0===e.length)return;const t=this.currentUserId;t&&e.includes(t)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({message:"user blocked"}).catch((e=>{this.logger("error","Error leaving call after being blocked",e)})))}))),this.leaveCallHooks.add(p1(this.state.session$,(e=>{if(!this.ringing)return;const t=this.clientStore.connectedUser?.id;if(!t)return;const n=Boolean(e?.accepted_by[t]),r=Boolean(e?.rejected_by[t]);(n||r)&&this.cancelAutoDrop();var i;!(n&&this.state.callingState===m1.RINGING)&&!r||(i=this.joinLeaveConcurrencyTag,l1.has(i))||this.leave().catch((()=>{this.logger("error","Could not leave a call that was accepted or rejected elsewhere")}))}))),this.leaveCallHooks.add(p1(this.ringingSubject,(e=>{if(!e)return;const t=this.state.session,n=this.clientStore.connectedUser?.id,r=t?.ended_at,i=this.state.createdBy?.id,o=t?.rejected_by,s=t?.accepted_by;let a=!1;r?a=!0:i&&o?o[i]&&(a=!0):n&&o?o[n]&&(a=!0):n&&s&&s[n]&&(a=!0),a?this.state.callingState!==m1.IDLE&&this.state.setCallingState(m1.IDLE):(this.state.callingState===m1.IDLE&&this.state.setCallingState(m1.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(n4(this)))})))},this.handleOwnCapabilitiesUpdated=async e=>{if(this.permissionsContext.setPermissions(e),!this.publisher)return;const t={[OX]:qX.AUDIO,[DX]:qX.VIDEO,[NX]:qX.SCREEN_SHARE};for(const[n,r]of Object.entries(t)){if(!this.permissionsContext.hasPermission(n))try{switch(r){case qX.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case qX.VIDEO:this.camera.enabled&&await this.camera.disable();break;case qX.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable()}}catch(hoe){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",hoe)}}},this.on=(e,t)=>{if(n1(e))return this.dispatcher.on(e,t);const n=this.streamClient.on(e,(e=>{const n=e;n.call_cid&&n.call_cid===this.cid&&t(n)}));return this.streamClientEventHandlers.set(t,n),()=>{this.off(e,t)}},this.off=(e,t)=>{if(n1(e))return this.dispatcher.off(e,t);const n=this.streamClientEventHandlers.get(t);n&&n()},this.leave=async function(){let{reject:e,reason:n,message:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await s1(t.joinLeaveConcurrencyTag,(async()=>{const i=t.state.callingState;if(i===m1.LEFT)throw new Error("Cannot leave call that has already been left.");if(i===m1.JOINING){const e=()=>new Promise((e=>{t.state.callingState$.pipe(eX((e=>e!==m1.JOINED),!0)).subscribe((()=>e()))}));await e()}if(i===m1.RINGING&&!1!==e)if(e)await t.reject(n??"decline");else{const e=t.state.remoteParticipants.length>0;t.isCreatedByMe&&!e&&await t.reject("cancel")}t.statsReporter?.stop(),t.statsReporter=void 0,t.sfuStatsReporter?.stop(),t.sfuStatsReporter=void 0,t.subscriber?.dispose(),t.subscriber=void 0,t.publisher?.dispose(),t.publisher=void 0,await(t.sfuClient?.leaveAndClose(r??n??"user is leaving the call")),t.sfuClient=void 0,t.dynascaleManager.setSfuClient(void 0),t.state.setCallingState(m1.LEFT),t.state.setParticipants([]),t.state.dispose(),t.leaveCallHooks.forEach((e=>e())),t.initialized=!1,t.hasJoinedOnce=!1,t.unifiedSessionId=void 0,t.ringingSubject.next(!1),t.cancelAutoDrop(),t.clientStore.unregisterCall(t),t.camera.dispose(),t.microphone.dispose(),t.screenShare.dispose(),t.speaker.dispose();const o=[];t.camera.stopOnLeave&&o.push(t.camera.disable(!0)),t.microphone.stopOnLeave&&o.push(t.microphone.disable(!0)),t.screenShare.stopOnLeave&&o.push(t.screenShare.disable(!0)),await Promise.all(o)}))},this.updateFromRingingEvent=async e=>{await this.setup();const{created_by:t,settings:n}=e.call,r=this.state.members.find((e=>e.user.id===t.id));r?this.state.setMembers([r,...e.members]):this.state.setMembers(e.members),this.state.updateFromCallResponse(e.call),this.watching=!0,this.ringingSubject.next(!0);const i=this.clientStore.calls.filter((e=>e.cid!==this.cid));this.clientStore.setCalls([this,...i]),await this.applyDeviceConfig(n,!1)},this.get=async e=>{await this.setup();const t=await this.streamClient.get(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),e?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.getOrCreate=async e=>{await this.setup();const t=await this.streamClient.post(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),e?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.create=async e=>this.getOrCreate(e),this.delete=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post(`${t.streamClientBasePath}/delete`,e)},this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post(`${this.streamClientBasePath}/accept`),this.reject=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"decline";return t.streamClient.post(`${t.streamClientBasePath}/reject`,{reason:e})},this.join=async function(){let{maxJoinRetries:e=3,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await t.setup();const r=t.state.callingState;if([m1.JOINED,m1.JOINING].includes(r))throw new Error("Illegal State: call.join() shall be called only once");t.state.setCallingState(m1.JOINING),e=Math.max(e,1);for(let i=0;i<e;i++){try{return t.logger("trace",`Joining call (${i})`,t.cid),await t.doJoin(n)}catch(hoe){if(t.logger("warn",`Failed to join call (${i})`,t.cid),i===e-1)throw t.state.setCallingState(r),hoe}await O0(F0(i))}},this.doJoin=async e=>{const t=Date.now(),n=this.state.callingState;this.joinCallData=e,this.logger("debug","Starting join flow"),this.state.setCallingState(m1.JOINING);const r=this.reconnectStrategy===XX.MIGRATE,i=this.reconnectStrategy===XX.REJOIN,o=this.reconnectStrategy===XX.FAST;let s=this.sfuStatsReporter?.options;if(!this.credentials||!s||i||r)try{const t=await this.doJoinRequest(e);this.credentials=t.credentials,s=t.stats_options}catch(Nb){throw this.state.callingState===m1.OFFLINE||this.state.setCallingState(n),Nb}const a=this.sfuClient,l=a?.sessionId,c=!!a?.isHealthy,u=i||r||!c?new D2({logTag:String(++this.sfuClientTag),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,enableTracing:s.enable_rtc_stats,sessionId:i?void 0:l,onSignalClose:e=>this.handleSfuSignalClose(u,e)}):a;this.sfuClient=u,this.dynascaleManager.setSfuClient(u);const d=await s2();if(a!==u){const[t,r]=await Promise.all([Z0("recvonly"),Z0("sendonly")]),i=this.reconnectStrategy!==XX.UNSPECIFIED,s=i?this.getReconnectDetails(e?.migrating_from,l):void 0,a=i?this.currentPublishOptions||[]:this.getPreferredPublishOptions(),c=i?[]:this.getPreferredSubscribeOptions();try{const{callState:e,fastReconnectDeadlineSeconds:n,publishOptions:i}=await u.join({subscriberSdp:t,publisherSdp:r,clientDetails:d,fastReconnect:o,reconnectDetails:s,preferredPublishOptions:a,preferredSubscribeOptions:c});this.currentPublishOptions=i,this.fastReconnectDeadlineSeconds=n,e&&this.state.updateFromSfuCallState(e,u.sessionId,s)}catch(Nb){throw this.logger("warn","Join SFU request failed",Nb),u.close(D2.ERROR_CONNECTION_UNHEALTHY,"Join request failed, connection considered unhealthy"),this.state.setCallingState(n),Nb}}if(r||this.state.setCallingState(m1.JOINED),this.hasJoinedOnce=!0,o)await this.restoreICE(u,{includeSubscriber:!1});else{const e=(e=>({bundlePolicy:"max-bundle",iceServers:e.map((e=>({urls:e.urls,username:e.username,credential:e.password})))}))(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:u,connectionConfig:e,clientDetails:d,statsOptions:s,publishOptions:this.currentPublishOptions||[],closePreviousInstances:!r})}if(i||o||r||this.sfuStatsReporter?.sendConnectionTime((Date.now()-t)/1e3),i){const e=XX[this.reconnectStrategy];await(a?.leaveAndClose(`Closing previous WS after reconnect with strategy: ${e}`))}else c||a?.close(D2.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");!this.deviceSettingsAppliedOnce&&this.state.settings&&(await this.applyDeviceConfig(this.state.settings,!0),this.deviceSettingsAppliedOnce=!0),delete this.joinCallData?.ring,delete this.joinCallData?.notify,this.reconnectStrategy=XX.UNSPECIFIED,this.reconnectReason="",this.logger("info",`Joined call ${this.cid}`)},this.getReconnectDetails=(e,t)=>{const n=this.reconnectStrategy,r=n===XX.REJOIN;return{strategy:n,announcedTracks:this.publisher?.getAnnouncedTracksForReconnect()||[],subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:e||"",previousSessionId:r&&t||"",reason:this.reconnectReason}},this.getPreferredPublishOptions=()=>{const{preferredCodec:e,fmtpLine:t,preferredBitrate:n,maxSimulcastLayers:r}=this.clientPublishOptions||{};if(!e&&!n&&!r)return[];const i=e?uZ.create({name:e.split("/").pop(),fmtp:t}):void 0,o=[cZ.create({trackType:qX.VIDEO,codec:i,bitrate:n,maxSpatialLayers:r})],s=this.screenShare.getSettings();return s&&o.push(cZ.create({trackType:qX.SCREEN_SHARE,fps:s.maxFramerate,bitrate:s.maxBitrate})),o},this.getPreferredSubscribeOptions=()=>{const{subscriberCodec:e,subscriberFmtpLine:t}=this.clientPublishOptions||{};return e&&t?[lZ.create({trackType:qX.VIDEO,codecs:[{name:e.split("/").pop(),fmtp:t}]})]:[]},this.restoreICE=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeSubscriber:r=!0,includePublisher:i=!0}=n;t.subscriber&&(t.subscriber.setSfuClient(e),r&&await t.subscriber.restartIce()),t.publisher&&(t.publisher.setSfuClient(e),i&&await t.publisher.restartIce())},this.initPublisherAndSubscriber=e=>{const{sfuClient:t,connectionConfig:n,clientDetails:r,statsOptions:i,publishOptions:o,closePreviousInstances:s}=e,{enable_rtc_stats:a}=i;s&&this.subscriber&&this.subscriber.dispose(),this.subscriber=new T2({sfuClient:t,dispatcher:this.dispatcher,state:this.state,connectionConfig:n,logTag:String(this.sfuClientTag),enableTracing:a,onUnrecoverableError:e=>{this.reconnect(XX.REJOIN,e).catch((t=>{this.logger("warn",`[Reconnect] Error reconnecting after a subscriber error: ${e}`,t)}))}});"anonymous"===this.streamClient.user?.type||(s&&this.publisher&&this.publisher.dispose(),this.publisher=new k2({sfuClient:t,dispatcher:this.dispatcher,state:this.state,connectionConfig:n,publishOptions:o,logTag:String(this.sfuClientTag),enableTracing:a,onUnrecoverableError:e=>{this.reconnect(XX.REJOIN,e).catch((t=>{this.logger("warn",`[Reconnect] Error reconnecting after a publisher error: ${e}`,t)}))}})),kX.setEnabled(a),this.statsReporter?.stop(),this.statsReporter=(e=>{let{subscriber:t,publisher:n,state:r,datacenter:i,pollingIntervalInMs:o=2e3}=e;const s=Q0(["stats"]),a=async(e,r)=>"subscriber"===e&&t?t.getStats(r):"publisher"===e&&n?n.getStats(r):void 0,l=async(e,r)=>{const i="subscriber"===e?t:n;if(!i)return[];const o=[];for(const t of r){const n=await i.getStats(t),r=K1(n,{trackKind:t.kind,kind:e,publisher:void 0});o.push(r)}return o},c=new Set,u=async()=>{const e={};if(c.size>0){const t=new Set(c);for(const i of r.participants){if(!t.has(i.sessionId))continue;const{audioStream:r,isLocalParticipant:o,sessionId:a,userId:c,videoStream:u}=i,d=o?"publisher":"subscriber";try{const t=o?n?.getPublishedTracks()||[]:[...u?.getVideoTracks()||[],...r?.getAudioTracks()||[]];e[a]=await l(d,t)}catch(ZC){s("warn",`Failed to collect ${d} stats for ${c}`,ZC)}}}const[t,o]=await Promise.all([a("subscriber"),n?a("publisher"):void 0]),u=(e,t)=>J1(K1(e,{kind:t,trackKind:"video",publisher:n})),d=t?u(t,"subscriber"):Y1(),h=o?u(o,"publisher"):Y1();r.setCallStatsReport({datacenter:i,publisherStats:h,subscriberStats:d,subscriberRawStats:t,publisherRawStats:o,participants:e,timestamp:Date.now()})};let d;if(o>0){const e=async()=>{await u().catch((e=>{s("debug","Failed to collect stats",e)})),d=setTimeout(e,o)};e()}return{getRawStatsForTrack:a,getStatsForStream:l,startReportingStatsFor:e=>{c.add(e),u()},stopReportingStatsFor:e=>{c.delete(e),u()},stop:()=>{d&&clearTimeout(d)}}})({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:t.edgeName}),this.sfuStatsReporter?.stop(),i?.reporting_interval_ms>0&&(this.unifiedSessionId??(this.unifiedSessionId=t.sessionId),this.sfuStatsReporter=new a2(t,{clientDetails:r,options:i,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state,unifiedSessionId:this.unifiedSessionId}),this.sfuStatsReporter.start())},this.doJoinRequest=async e=>{const t=await this.streamClient.getLocationHint(),n={...e,location:t},r=await this.streamClient.post(`${this.streamClientBasePath}/join`,n);this.state.updateFromCallResponse(r.call),this.state.setMembers(r.members),this.state.setOwnCapabilities(r.own_capabilities),e?.ring&&this.ringingSubject.next(!0);return this.reconnectStrategy!==XX.UNSPECIFIED||!this.ringing||this.isCreatedByMe||await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),r},this.handleSfuSignalClose=(e,t)=>{this.logger("debug","[Reconnect] SFU signal connection closed");const{callingState:n}=this.state;n!==m1.JOINING&&n!==m1.RECONNECTING&&n!==m1.IDLE&&n!==m1.LEFT&&(e.isLeaving||e.isClosing||this.reconnect(XX.REJOIN,t).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))},this.reconnect=async(e,t)=>{if(this.state.callingState!==m1.RECONNECTING&&this.state.callingState!==m1.RECONNECTING_FAILED)return s1(this.reconnectConcurrencyTag,(async()=>{this.logger("info",`[Reconnect] Reconnecting with strategy ${XX[e]}`);const n=Date.now();this.reconnectStrategy=e,this.reconnectReason=t;do{if(this.disconnectionTimeoutSeconds>0&&(Date.now()-n)/1e3>this.disconnectionTimeoutSeconds)return this.logger("warn","[Reconnect] Stopping reconnection attempts after reaching disconnection timeout"),void this.state.setCallingState(m1.RECONNECTING_FAILED);this.reconnectStrategy!==XX.FAST&&this.reconnectAttempts++;const e=XX[this.reconnectStrategy];try{switch(await(this.networkAvailableTask?.promise),this.reconnectStrategy){case XX.UNSPECIFIED:case XX.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${e}`);break;case XX.FAST:await this.reconnectFast();break;case XX.REJOIN:await this.reconnectRejoin();break;case XX.MIGRATE:await this.reconnectMigrate();break;default:g2(this.reconnectStrategy,"Unknown reconnection strategy")}break}catch(Nb){if(this.state.callingState===m1.OFFLINE){this.logger("trace","[Reconnect] Can't reconnect while offline, stopping reconnection attempts");break}if(Nb instanceof LX&&Nb.unrecoverable)return this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",Nb),void this.state.setCallingState(m1.RECONNECTING_FAILED);this.logger("warn",`[Reconnect] ${e} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,Nb),await O0(500),this.reconnectStrategy=XX.REJOIN}}while(this.state.callingState!==m1.JOINED&&this.state.callingState!==m1.RECONNECTING_FAILED&&this.state.callingState!==m1.LEFT)}))},this.reconnectFast=async()=>{const e=Date.now();this.reconnectStrategy=XX.FAST,this.state.setCallingState(m1.RECONNECTING),await this.doJoin(this.joinCallData),this.sfuStatsReporter?.sendReconnectionTime(XX.FAST,(Date.now()-e)/1e3)},this.reconnectRejoin=async()=>{const e=Date.now();this.reconnectStrategy=XX.REJOIN,this.state.setCallingState(m1.RECONNECTING),await this.doJoin(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks(),this.sfuStatsReporter?.sendReconnectionTime(XX.REJOIN,(Date.now()-e)/1e3)},this.reconnectMigrate=async()=>{const e=Date.now(),t=this.sfuClient;if(!t)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=XX.MIGRATE,this.state.setCallingState(m1.MIGRATING);const n=this.subscriber,r=this.publisher;n?.detachEventHandlers(),r?.detachEventHandlers();const i=A2(t.enterMigration());try{const e=t.edgeName;await this.doJoin({...this.joinCallData,migrating_from:e})}finally{delete this.joinCallData?.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await i(),this.state.setCallingState(m1.JOINED)}finally{n?.dispose(),r?.dispose(),t.close(D2.NORMAL_CLOSURE,"Migrating away")}this.sfuStatsReporter?.sendReconnectionTime(XX.MIGRATE,(Date.now()-e)/1e3)},this.registerReconnectHandlers=()=>{const e=this.on("goAway",(()=>{this.reconnect(XX.MIGRATE,"goAway").catch((e=>this.logger("warn","[Reconnect] Error reconnecting",e)))})),t=this.on("error",(e=>{const{reconnectStrategy:t,error:n}=e;t!==XX.UNSPECIFIED&&(t===XX.DISCONNECT?this.leave({message:"SFU instructed to disconnect"}).catch((e=>{this.logger("warn","Can't leave call after disconnect request",e)})):this.reconnect(t,n?.message||"SFU Error").catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))})),n=this.streamClient.on("network.changed",(e=>{if(e.online)this.logger("debug","[Reconnect] Going online"),this.sfuClient?.close(D2.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),this.networkAvailableTask?.resolve(),this.networkAvailableTask=void 0,this.sfuStatsReporter?.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const e=E2();e.promise.then((()=>{let e=XX.FAST;if(this.lastOfflineTimestamp){(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(e=XX.REJOIN)}this.reconnect(e,"Going online").catch((e=>{this.logger("warn","[Reconnect] Error reconnecting after going online",e)}))})),this.networkAvailableTask=e,this.sfuStatsReporter?.stop(),this.state.setCallingState(m1.OFFLINE)}}));this.leaveCallHooks.add(e).add(t).add(n)},this.restorePublishedTracks=async()=>{for(const e of this.trackPublishOrder){let t;switch(e){case qX.AUDIO:t=this.microphone.state.mediaStream;break;case qX.VIDEO:t=this.camera.state.mediaStream;break;case qX.SCREEN_SHARE:t=this.screenShare.state.mediaStream;break;case qX.SCREEN_SHARE_AUDIO:case qX.UNSPECIFIED:break;default:g2(e,"Unknown track type")}t&&await this.publish(t,e)}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:e}=this.state;e.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async e=>{await this.publish(e,qX.VIDEO)},this.publishAudioStream=async e=>{await this.publish(e,qX.AUDIO)},this.publishScreenShareStream=async e=>{await this.publish(e,qX.SCREEN_SHARE)},this.publish=async(e,t)=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.canPublish(t))throw new Error(`No permission to publish ${qX[t]}`);if(!this.publisher)throw new Error("Publisher is not initialized");const[n]=y2(t)?e.getAudioTracks():e.getVideoTracks();if(!n)throw new Error(`There is no ${qX[t]} track in the stream`);if("ended"===n.readyState)throw new Error("Can't publish ended tracks.");G2(this.trackPublishOrder,t),await this.publisher.publish(n,t);const r=[t];if(t===qX.SCREEN_SHARE){const[t]=e.getAudioTracks();t&&(G2(this.trackPublishOrder,qX.SCREEN_SHARE_AUDIO),await this.publisher.publish(t,qX.SCREEN_SHARE_AUDIO),r.push(qX.SCREEN_SHARE_AUDIO))}"video"===n.kind&&this.sfuStatsReporter?.scheduleOne(3e3),await this.updateLocalStreamState(e,...r)},this.stopPublish=async function(){if(t.sfuClient&&t.publisher){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.publisher.stopTracks(...n),await t.updateLocalStreamState(void 0,...n)}},this.updateLocalStreamState=async function(e){if(!t.sfuClient||!t.sfuClient.sessionId)return;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];await t.notifyTrackMuteState(!e,...r);const{sessionId:o}=t.sfuClient;for(const s of r){const n=v2(s);n&&t.state.updateParticipant(o,(t=>({publishedTracks:e?G2([...t.publishedTracks],s):t.publishedTracks.filter((e=>e!==s)),[n]:e})))}},this.updatePublishOptions=e=>{this.logger("warn","[call.updatePublishOptions]: You are manually overriding the publish options for this call. This is not recommended, and it can cause call stability/compatibility issues. Use with caution."),this.state.callingState===m1.JOINED&&this.logger("warn","Updating publish options after joining the call does not have an effect"),this.clientPublishOptions={...this.clientPublishOptions,...e}},this.notifyNoiseCancellationStarting=async()=>this.sfuClient?.startNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify start of noise cancellation",e)})),this.notifyNoiseCancellationStopped=async()=>this.sfuClient?.stopNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify stop of noise cancellation",e)})),this.notifyTrackMuteState=async function(e){if(t.sfuClient){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];await t.sfuClient.updateMuteStates(r.map((t=>({trackType:t,muted:e}))))}},this.startReportingStatsFor=e=>this.statsReporter?.startReportingStatsFor(e),this.stopReportingStatsFor=e=>this.statsReporter?.stopReportingStatsFor(e),this.resetReaction=e=>{this.state.updateParticipant(e,{reaction:void 0})},this.setSortParticipantsBy=e=>this.state.setSortParticipantsBy(e),this.sendReaction=async e=>this.streamClient.post(`${this.streamClientBasePath}/reaction`,e),this.blockUser=async e=>this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:e}),this.unblockUser=async e=>this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:e}),this.muteSelf=e=>{const t=this.currentUserId;if(t)return this.muteUser(t,e)},this.muteOthers=e=>{const t=(e=>{switch(e){case"audio":return qX.AUDIO;case"video":return qX.VIDEO;case"screenshare":return qX.SCREEN_SHARE;case"screenshare_audio":return qX.SCREEN_SHARE_AUDIO;default:g2(e,"Unknown mute type")}})(e);if(!t)return;const n=[];for(const r of this.state.remoteParticipants)r.publishedTracks.includes(t)&&n.push(r.userId);return n.length>0?this.muteUser(n,e):void 0},this.muteUser=(e,t)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(e)?e:[e],[t]:!0}),this.muteAllUsers=e=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[e]:!0}),this.startRecording=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_recording`,e||{}),this.stopRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{}),this.startTranscription=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,e),this.stopTranscription=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`),this.startClosedCaptions=async e=>{const t=this.state.setCaptioning(!0);try{return await this.streamClient.post(`${this.streamClientBasePath}/start_closed_captions`,e)}catch(hoe){throw t.rollback(),hoe}},this.stopClosedCaptions=async e=>{const t=this.state.setCaptioning(!1);try{return await this.streamClient.post(`${this.streamClientBasePath}/stop_closed_captions`,e)}catch(hoe){throw t.rollback(),hoe}},this.updateClosedCaptionSettings=e=>{this.state.updateClosedCaptionSettings(e)},this.requestPermissions=async e=>{const{permissions:t}=e;if(!t.every((e=>this.permissionsContext.canRequest(e))))throw new Error(`You are not allowed to request permissions: ${t.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,e)},this.grantPermissions=async(e,t)=>this.updateUserPermissions({user_id:e,grant_permissions:t}),this.revokePermissions=async(e,t)=>this.updateUserPermissions({user_id:e,revoke_permissions:t}),this.updateUserPermissions=async e=>this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,e),this.goLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return t.streamClient.post(`${t.streamClientBasePath}/go_live`,e,n)},this.stopLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post(`${t.streamClientBasePath}/stop_live`,e)},this.startHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{}),this.stopHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{}),this.startRTMPBroadcasts=async e=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts`,e),this.stopAllRTMPBroadcasts=async()=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/stop`),this.stopRTMPBroadcast=async e=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/${e}/stop`),this.startFrameRecording=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_frame_recording`,e),this.stopFrameRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_frame_recording`),this.update=async e=>{const t=await this.streamClient.patch(`${this.streamClientBasePath}`,e),{call:n,members:r,own_capabilities:i}=t;return this.state.updateFromCallResponse(n),this.state.setMembers(r),this.state.setOwnCapabilities(i),t},this.endCall=async()=>this.streamClient.post(`${this.streamClientBasePath}/mark_ended`),this.pin=e=>{this.state.updateParticipant(e,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=e=>{this.state.updateParticipant(e,{pin:void 0})},this.pinForEveryone=async e=>this.streamClient.post(`${this.streamClientBasePath}/pin`,e),this.unpinForEveryone=async e=>this.streamClient.post(`${this.streamClientBasePath}/unpin`,e),this.queryMembers=e=>this.streamClient.post("/call/members",{...e||{},id:this.id,type:this.type}),this.updateCallMembers=async e=>this.streamClient.post(`${this.streamClientBasePath}/members`,e),this.scheduleAutoDrop=()=>{this.cancelAutoDrop();const e=this.state.settings;if(!e)return;if(this.state.callingState!==m1.RINGING)return;const t=this.isCreatedByMe?e.ring.auto_cancel_timeout_ms:e.ring.incoming_call_timeout_ms;t<=0||(this.dropTimeout=setTimeout((()=>{this.state.callingState===m1.RINGING&&this.leave({reject:!0,reason:"timeout",message:"ringing timeout - "+(this.isCreatedByMe?"no one accepted":"user didn't interact with incoming call screen")}).catch((e=>{this.logger("error","Failed to drop call",e)}))}),t))},this.cancelAutoDrop=()=>{clearTimeout(this.dropTimeout),this.dropTimeout=void 0},this.queryRecordings=async e=>{let t=this.streamClientBasePath;return e&&(t=`${t}/${e}`),this.streamClient.get(`${t}/recordings`)},this.queryTranscriptions=async()=>this.streamClient.get(`${this.streamClientBasePath}/transcriptions`),this.getCallStats=async e=>{const t=`${this.streamClientBasePath}/stats/${e}`;return this.streamClient.get(t)},this.getCallReport=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n=`${t.streamClientBasePath}/report`,r=""!==e?{session_id:e}:{};return t.streamClient.get(n,r)},this.submitFeedback=async function(e){let{reason:n,custom:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sdkName:i,sdkVersion:o,...s}=(e=>{const{sdk:t,...n}=e;return{sdkName:z1(t),sdkVersion:W1(t),...n}})(await s2());return t.streamClient.post(`${t.streamClientBasePath}/feedback`,{rating:e,reason:n,user_session_id:t.sfuClient?.sessionId,sdk:i,sdk_version:o,custom:{...r,"x-stream-platform-data":s}})},this.sendCustomEvent=async e=>this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:e}),this.applyDeviceConfig=async(e,t)=>{await this.camera.apply(e.video,t).catch((e=>{this.logger("warn","Camera init failed",e)})),await this.microphone.apply(e.audio,t).catch((e=>{this.logger("warn","Mic init failed",e)}))},this.trackElementVisibility=(e,t,n)=>this.dynascaleManager.trackElementVisibility(e,t,n),this.setViewport=e=>this.dynascaleManager.setViewport(e),this.bindVideoElement=(e,t,n)=>{const r=this.dynascaleManager.bindVideoElement(e,t,n);if(r)return this.leaveCallHooks.add(r),()=>{this.leaveCallHooks.delete(r),r()}},this.bindAudioElement=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audioTrack";const i=t.dynascaleManager.bindAudioElement(e,n,r);if(i)return t.leaveCallHooks.add(i),()=>{t.leaveCallHooks.delete(i),i()}},this.bindCallThumbnailElement=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=()=>{e.src=n.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},i=p1(t.state.thumbnails$,(t=>{if(!t)return;e.addEventListener("error",r);const n=new URL(t.image_url);n.searchParams.set("w",String(e.clientWidth)),n.searchParams.set("h",String(e.clientHeight)),e.src=n.toString()}));return()=>{i(),e.removeEventListener("error",r)}},this.setPreferredIncomingVideoResolution=(e,t)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?{enabled:!0,dimension:e}:void 0,t),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=e=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.setDisconnectionTimeout=e=>{this.disconnectionTimeoutSeconds=e},this.type=n,this.id=r,this.cid=`${n}:${r}`,this.ringingSubject=new YQ(c),this.watching=u,this.streamClient=i,this.clientStore=l,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=Q0(["Call"]);const d=c4.get(n),h=a||d.options.sortParticipantsBy;h&&this.state.setSortParticipantsBy(h),this.state.setMembers(o||[]),this.state.setOwnCapabilities(s||[]),this.state.setCallingState(c?m1.RINGING:m1.IDLE),this.camera=new R4(this),this.microphone=new M4(this),this.speaker=new $4(this),this.screenShare=new F4(this),this.dynascaleManager=new s4(this.state,this.speaker)}get ringing(){return u1(this.ringingSubject)}get currentUserId(){return this.clientStore.connectedUser?.id}get isCreatedByMe(){return this.state.createdBy?.id===this.currentUserId}}class B4{constructor(e){var t=this;this._log=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";t.client.logger(r,`connection:${e}`,n)},this.setClient=e=>{this.client=e},this._buildUrl=()=>{const e=new URLSearchParams;return e.set("api_key",this.client.key),e.set("stream-auth-type",this.client.getAuthType()),e.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${e.toString()}`},this.onlineStatusChanged=e=>{"offline"===e.type?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):"online"===e.type&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=e=>{if(this.wsID!==e)return;const t=this.client.user;if(!t)return void this.client.logger("error","User not set, can't connect to WS");const n=this.client._getToken();if(!n)return void this.client.logger("error","Token not set, can't connect authenticate");const r=JSON.stringify({token:n,user_details:{id:t.id,name:t.name,image:t.image,custom:t.custom}});this._log(`onopen() - Sending auth message ${r}`,{},"trace"),this.ws?.send(r),this._log("onopen() - onopen callback",{wsID:e})},this.onmessage=(e,t)=>{if(this.wsID!==e)return;this._log("onmessage() - onmessage callback",{event:t,wsID:e});const n="string"===typeof t.data?JSON.parse(t.data):null;if(!this.isConnectionOpenResolved&&n&&"connection.error"===n.type&&(this.isConnectionOpenResolved=!0,n.error))this.rejectConnectionOpen?.(this._errorFromWSEvent(n,!1));else{if(this.lastEvent=new Date,!n||"health.check"!==n.type&&"connection.ok"!==n.type||this.scheduleNextPing(),n&&"connection.ok"===n.type&&(this.resolveConnectionOpen?.(n),this._setHealth(!0)),n&&"connection.error"===n.type&&n.error){const{code:e}=n.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,e!==M0||this.client.tokenManager.isStatic()||(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}n&&(n.received_at=new Date,this.client.dispatchEvent(n)),this.scheduleConnectionCheck()}},this.onclose=(e,t)=>{if(this.wsID===e)if(this._log("onclose() - onclose callback - "+t.code,{event:t,wsID:e}),t.code===L0){const e=new Error(`WS connection reject with error ${t.reason}`);e.reason=t.reason,e.code=t.code,e.wasClean=t.wasClean,e.target=t.target,this.rejectConnectionOpen?.(e),this._log(`onclose() - WS connection reject with error ${t.reason}`,{event:t})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(this._errorFromWSEvent(t)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:t}),this._reconnect()},this.onerror=(e,t)=>{this.wsID===e&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(new Error(`WebSocket error: ${t}`)),this._log("onerror() - WS connection resulted into error",{event:t}),this._reconnect())},this._setHealth=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==t.isHealthy&&(t.isHealthy=e,t.isHealthy||n?t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy}):setTimeout((()=>{t.isHealthy||t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy})}),5e3))},this._errorFromWSEvent=function(e){let n,r,i,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(function(e){return void 0!==e.code}(e))n=e.code,i=e.reason,r=0;else{const{error:t}=e;n=t.code,i=t.message,r=t.StatusCode}const s=`WS failed with code: ${n} and reason: ${i}`;t._log(s,{event:e},"warn");const a=new Error(s);return a.code=n,a.StatusCode=r,a.isWSFailure=o,a},this._setupConnectionPromise=()=>{this.isConnectionOpenResolved=!1,this.connectionOpenSafe=A2(new Promise(((e,t)=>{this.resolveConnectionOpen=e,this.rejectConnectionOpen=t})))},this.scheduleNextPing=()=>{const e=O2();this.healthCheckTimeoutRef&&e.clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=e.setTimeout((()=>{const e=[{type:"health.check",client_id:this.client.clientID}];try{this.ws?.send(JSON.stringify(e))}catch{}}),this.pingInterval)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout((()=>{const e=new Date;this.lastEvent&&e.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())}),this.connectionCheckTimeout)},this.client=e,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isConnectionOpenResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,B0(this.onlineStatusChanged)}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const e=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${e}`)}catch(Nb){if(this.isHealthy=!1,this.consecutiveFailures+=1,Nb.code!==M0||this.client.tokenManager.isStatic()){if(!Nb.isWSFailure)throw new Error(JSON.stringify({code:Nb.code,StatusCode:Nb.StatusCode,message:Nb.message,isWSFailure:Nb.isWSFailure}))}else this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0})}return await this._waitForHealthy(e)}async _waitForHealthy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;return Promise.race([(async()=>{for(let t=0;t<=e;t+=50)try{return await this.connectionOpen}catch(Nb){if(t===e)throw new Error(JSON.stringify({code:Nb.code,StatusCode:Nb.StatusCode,message:Nb.message,isWSFailure:Nb.isWSFailure}));await O0(50)}})(),(async()=>{throw await O0(e),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(e){let t;this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&O2().clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),z0(this.onlineStatusChanged),this.isHealthy=!1;const{ws:n}=this;return n&&n.close&&n.readyState===n.OPEN?(t=new Promise((t=>{const r=e=>{this._log(`disconnect() - resolving isClosedPromise ${e?"with":"without"} close frame`,{event:e}),t()};n.onclose=r,setTimeout(r,null!=e?e:1e3)})),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),n.close(L0,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),t=Promise.resolve()),delete this.ws,t}async _connect(){if(this.isConnecting)return;this.isConnecting=!0;let e=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),e=!0}catch{}try{e||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this.client.isConnectionIsPromisePending||this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const t=this._buildUrl();this._log(`_connect() - Connecting to ${t}`);const n=this.client.options.WebSocketImpl??WebSocket;this.ws=new n(t),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const r=await this.connectionOpen;if(this.isConnecting=!1,r)return this.connectionID=r.connection_id,this.client.resolveConnectionId?.(this.connectionID),r}catch(hoe){throw this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",hoe),this.client.rejectConnectionId?.(hoe),hoe}}async _reconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy)return void this._log("_reconnect() - Abort (1) since already connecting or healthy");let t=e.interval;if(t||(t=F0(this.consecutiveFailures)),await O0(t),this.isConnecting||this.isHealthy)this._log("_reconnect() - Abort (2) since already connecting or healthy");else if(this.isDisconnected)this._log("_reconnect() - Abort (3) since disconnect() is called");else{this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),e.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(Nb){if(this.isHealthy=!1,this.consecutiveFailures+=1,Nb.code===M0&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});Nb.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}}_destroyCurrentWSConnection(){this.wsID+=1;try{this?.ws?.close()}catch{}}get connectionOpen(){return this.connectionOpenSafe?.()}}const z4=e=>{const t={},n=String.fromCharCode,r=e.length;let i,o,s,a,l=0,c=0,u="";for(i=0;i<64;i++)t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(s=0;s<r;s++)for(o=t[e.charAt(s)],l=(l<<6)+o,c+=6;c>=8;)((a=l>>>(c-=8)&255)||s<r-2)&&(u+=n(a));return u};class W4{constructor(e){this.loadTokenPromise=null,this.type="static",this.setTokenOrProvider=async(e,t,n)=>{this.user=t,this.isAnonymous=n,this.validateToken(e),D0(e)&&(this.tokenProvider=e,this.type="provider"),"string"===typeof e&&(this.token=e,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=e=>{if(!this.user||!this.isAnonymous||e){if(!this.secret&&!e)throw new Error("User token can not be empty");if("string"!==typeof e&&!D0(e))throw new Error("User token should either be a string or a function");if("string"===typeof e){if(this.isAnonymous&&""===e)return;const t=function(e){const t=e.split(".");if(3!==t.length)return"";const n=t[1],r=z4(n);return JSON.parse(r).user_id}(e);if(null!=e&&(null==t||""===t||!this.isAnonymous&&t!==this.user.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise((async(e,t)=>{if("static"===this.type)return e(this.token);if(this.tokenProvider&&"string"!==typeof this.tokenProvider){try{const e=await this.tokenProvider();this.validateToken(e),this.token=e}catch(ZC){return t(new Error(`Call to tokenProvider failed with message: ${ZC}`))}e(this.token)}})),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>"static"===this.type,this.secret=e}}const H4=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://hint.stream-io-video.com/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=Q0(["location-hint"]);let i=0,o="ERR";do{const n=new AbortController,i=setTimeout((()=>n.abort()),t);try{const t=(await fetch(e,{method:"HEAD",signal:n.signal})).headers.get("x-amz-cf-pop")||"ERR";r("debug",`Location header: ${t}`),o=t.substring(0,3)}catch(ZC){r("warn",`Failed to get location hint from ${e}`,ZC),o="ERR"}finally{clearTimeout(i)}}while("ERR"===o&&++i<n);return o};class q4{constructor(e,t){var n=this;this.listeners={},this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=e=>{this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(e,t)=>{const n=await this.locationHint;return n&&"ERR"!==n?n:(this.locationHint=H4(e??this.options.locationHintUrl,t??this.options.locationHintTimeout),this.locationHint)},this._getConnectionID=()=>this.wsConnection?.connectionID,this._hasConnectionID=()=>Boolean(this._getConnectionID()),this.connectUser=async(e,t)=>{if(!e.id)throw new Error('The "id" field on the user is missing');if(this.userID===e.id&&this.connectUserTask)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.connectUserTask;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");!this.secret&&!this.node||this.options.allowServerSideConnect||this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=e.id,this.anonymous=!1,await this.tokenManager.setTokenOrProvider(t,e,!1),this._setUser(e),this.connectUserTask=this.openConnection();try{return B0(this.updateNetworkConnectionStatus),await this.connectUserTask}catch(hoe){throw this.persistUserOnConnectionFailure?await this.closeConnection():await this.disconnectUser(),hoe}},this._setUser=e=>{this.user=e,this.userID=e.id,this._user={...e}},this.closeConnection=async e=>{await(this.wsConnection?.disconnect(e))},this.openConnection=async()=>{if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");const e=this.wsPromiseSafe?.();if(this.wsConnection?.isConnecting&&e)return this.logger("info","client:openConnection() - connection already in progress"),await e;if(this.wsConnection?.isHealthy&&this._hasConnectionID())return void this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists");this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${$0()}`;const t=this.connect();return this.wsPromiseSafe=A2(t),await t},this.disconnectUser=async e=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(e),z0(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromiseSafe=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async e=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:e},{publicEndpoint:!0});const t=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally((()=>this.guestUserCreatePromise=void 0)),this.connectUser(t.user,t.access_token)},this.connectAnonymousUser=async(e,t)=>{B0(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,await this.tokenManager.setTokenOrProvider(t,e,!0),this._setUser(e),this.resolveConnectionId?.()},this.on=(e,t)=>(this.listeners[e]||(this.listeners[e]=[]),this.logger("debug",`Adding listener for ${e} event`),this.listeners[e]?.push(t),()=>{this.off(e,t)}),this.off=(e,t)=>{this.listeners[e]||(this.listeners[e]=[]),this.logger("debug",`Removing listener for ${e} event`),this.listeners[e]=this.listeners[e]?.filter((e=>e!==t))},this._setupConnectionIdPromise=()=>{this.connectionIdPromiseSafe=A2(new Promise(((e,t)=>{this.resolveConnectionId=e,this.rejectConnectionId=t})))},this._logApiRequest=(e,t,n,r)=>{"trace"===J0()&&this.logger("trace",`client: ${e} - Request - ${t}`,{payload:n,config:r})},this._logApiResponse=(e,t,n)=>{"trace"===J0()&&this.logger("trace",`client:${e} - Response - url: ${t} > status ${n.status}`,{response:n})},this._logApiError=(e,t,n)=>{this.logger("error",`client:${e} - Error - url: ${t}`,{url:t,error:n})},this.doAxiosRequest=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!i.publicEndpoint){await Promise.all([n.tokenManager.tokenReady(),n.guestUserCreatePromise]);try{await n.connectionIdPromise}catch{await(n.wsConnection?._waitForHealthy()),await n.connectionIdPromise}}const o=n._enrichAxiosOptions(i);try{let i;switch(n._logApiRequest(e,t,r,o),e){case"get":i=await n.axiosInstance.get(t,o);break;case"delete":i=await n.axiosInstance.delete(t,o);break;case"post":i=await n.axiosInstance.post(t,r,o);break;case"put":i=await n.axiosInstance.put(t,r,o);break;case"patch":i=await n.axiosInstance.patch(t,r,o);break;case"options":i=await n.axiosInstance.options(t,o);break;default:throw new Error("Invalid request type")}return n._logApiResponse(e,t,i),n.consecutiveFailures=0,n.handleResponse(i)}catch(ZC){if(ZC.client_request_id=o.headers?.["x-client-request-id"],n.consecutiveFailures+=1,ZC.response)return n._logApiError(e,t,ZC.response),ZC.response.data.code!==M0||n.tokenManager.isStatic()?n.handleResponse(ZC.response):(n.consecutiveFailures>1&&await O0(F0(n.consecutiveFailures)),await n.tokenManager.loadToken(),await n.doAxiosRequest(e,t,r,i));throw n._logApiError(e,t,ZC),ZC}},this.get=(e,t)=>this.doAxiosRequest("get",e,null,{params:t}),this.put=(e,t,n)=>this.doAxiosRequest("put",e,t,{params:n}),this.post=(e,t,n)=>this.doAxiosRequest("post",e,t,{params:n}),this.patch=(e,t,n)=>this.doAxiosRequest("patch",e,t,{params:n}),this.delete=(e,t)=>this.doAxiosRequest("delete",e,null,{params:t}),this.errorFromResponse=e=>{const{data:t,status:n}=e,r=new LX;return r.message=`Stream error code ${t.code}: ${t.message}`,r.code=t.code,r.unrecoverable=t.unrecoverable,r.response=e,r.status=n,r},this.handleResponse=e=>{const t=e.data;if(function(e){return!e.status||e.status<200||300<=e.status}(e))throw this.errorFromResponse(e);return t},this.dispatchEvent=e=>{if(this.logger("debug",`Dispatching event: ${e.type}`,e),this.listeners){for(const t of this.listeners.all||[])t(e);for(const t of this.listeners[e.type]||[])t(e)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");return this.wsConnection=new B4(this),this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.defaultWSTimeout)},this.getUserAgent=()=>{if(!this.cachedUserAgent){const{clientAppIdentifier:e={}}=this.options,{sdkName:t="js",sdkVersion:n="1.21.0",...r}=e;this.cachedUserAgent=[`stream-video-${t}-v${n}`,...Object.entries(r).map((e=>{let[t,n]=e;return`${t}=${n}`})),"client_bundle=browser-esm"].join("|")}return this.cachedUserAgent},this._enrichAxiosOptions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}};const t=e.publicEndpoint&&!n.user?void 0:n._getToken(),r=t?{Authorization:t}:void 0;return e.headers?.["x-client-request-id"]||(e.headers={...e.headers,"x-client-request-id":$0()}),{params:{user_id:n.userID,connection_id:n._getConnectionID(),api_key:n.key,...e.params},headers:{...r,"stream-auth-type":e.publicEndpoint&&!n.user?"anonymous":n.getAuthType(),"X-Stream-Client":n.getUserAgent(),...e.headers},...e.config,...n.options.axiosRequestConfig}},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this.updateNetworkConnectionStatus=e=>{"offline"===e.type?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):"online"===e.type&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=e,this.secret=t?.secret;const r=t||{browser:"undefined"!==typeof window};this.browser=r.browser||"undefined"!==typeof window,this.node=!this.browser,this.browser&&(this.locationHint=H4(t?.locationHintUrl,t?.locationHintTimeout,t?.locationHintMaxAttempts)),this.options={timeout:5e3,withCredentials:!1,...r},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new null.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),this.axiosInstance=EJ.create({...this.options,baseURL:this.baseURL}),this.wsConnection=null,this.wsPromiseSafe=null,this.connectUserTask=null,this.anonymous=!1,this.persistUserOnConnectionFailure=this.options?.persistUserOnConnectionFailure,this.tokenManager=new W4(this.secret),this.consecutiveFailures=0,this.defaultWSTimeout=this.options.defaultWsTimeout??15e3,this.logger=D0(r.logger)?r.logger:()=>null}get connectionIdPromise(){return this.connectionIdPromiseSafe?.()}get isConnectionIsPromisePending(){return this.connectionIdPromiseSafe?.checkPending()??!1}get wsPromise(){return this.wsPromiseSafe?.()}}const G4=(e,t)=>`${e}/${t.id}`,K4=(e,t)=>{const n=(e=>{const t=e?.clientAppIdentifier||{},n=o2();return n&&(t.sdkName=KX[n.type].toLowerCase(),t.sdkVersion=`${n.major}.${n.minor}.${n.patch}`),t})(t),r=Q0(["coordinator"]);return new q4(e,{persistUserOnConnectionFailure:!0,...t,clientAppIdentifier:n,logger:r})};class Y4{constructor(e,t){var n=this;this.effectsRegistered=!1,this.eventHandlersToUnregister=[],this.connectionConcurrencyTag=Symbol("connectionConcurrencyTag"),this.registerClientInstance=(e,t)=>{const n=G4(e,t);Y4._instances.has(n)&&this.logger("warn",`A StreamVideoClient already exists for ${t.id}; Prefer using getOrCreateInstance method`),Y4._instances.set(n,this)},this.registerEffects=()=>{this.effectsRegistered||(this.eventHandlersToUnregister.push(this.on("connection.changed",(e=>{if(!e.online)return;const t=this.writeableStateStore.calls.filter((e=>e.watching)).map((e=>e.cid));t.length<=0||(this.logger("info",`Rewatching calls ${t.join(", ")}`),this.queryCalls({watch:!0,filter_conditions:{cid:{$in:t}},sort:[{field:"cid",direction:1}]}).catch((e=>{this.logger("error","Failed to re-watch calls",e)})))}))),this.eventHandlersToUnregister.push(this.on("call.created",(e=>{const{call:t,members:n}=e;if(this.state.connectedUser?.id===t.created_by.id)return void this.logger("warn","Received `call.created` sent by the current user");this.logger("info",`New call created and registered: ${t.cid}`);const r=new V4({streamClient:this.streamClient,type:t.type,id:t.id,members:n,clientStore:this.writeableStateStore});r.state.updateFromCallResponse(t),this.writeableStateStore.registerCall(r)}))),this.eventHandlersToUnregister.push(this.on("call.ring",(async e=>{const{call:t,members:n}=e;if(this.state.connectedUser?.id===t.created_by.id)return void this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");const r=this.writeableStateStore.findCall(t.type,t.id);if(r)await r.updateFromRingingEvent(e);else{const e=new V4({streamClient:this.streamClient,type:t.type,id:t.id,members:n,clientStore:this.writeableStateStore,ringing:!0});await e.get()}}))),this.effectsRegistered=!0)},this.connectUser=async(e,t)=>{if("anonymous"===e.type)return e.id="!anon",this.connectAnonymousUser(e,t);const n=await s1(this.connectionConcurrencyTag,(async()=>{const n=this.streamClient,{onConnectUserError:r,persistUserOnConnectionFailure:i}=n.options;let{maxConnectUserRetries:o=5}=n.options;o=Math.max(o,1);const s=[];for(let a=0;a<o;a++)try{return this.logger("trace",`Connecting user (${a})`,e),"guest"===e.type?await n.connectGuestUser(e):await n.connectUser(e,t)}catch(hoe){if(this.logger("warn",`Failed to connect a user (${a})`,hoe),s.push(hoe),a===o-1)throw r?.(hoe,s),hoe;i&&await n.disconnectUser(),await O0(F0(a))}}));return n?.me&&this.writeableStateStore.setConnectedUser(n.me),this.registerEffects(),n},this.disconnectUser=async e=>{await s1(this.connectionConcurrencyTag,(async()=>{const{user:t,key:n}=this.streamClient;t&&(await this.streamClient.disconnectUser(e),t.id&&Y4._instances.delete(G4(n,t)),this.eventHandlersToUnregister.forEach((e=>e())),this.eventHandlersToUnregister=[],this.effectsRegistered=!1,this.writeableStateStore.setConnectedUser(void 0))}))},this.on=(e,t)=>this.streamClient.on(e,t),this.off=(e,t)=>this.streamClient.off(e,t),this.call=(e,t)=>new V4({streamClient:this.streamClient,id:t,type:e,clientStore:this.writeableStateStore}),this.createGuestUser=async e=>this.streamClient.doAxiosRequest("post","/guest",e,{publicEndpoint:!0}),this.queryCalls=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await n.streamClient.post("/calls",e),r=[];for(const i of t.calls){const t=new V4({streamClient:n.streamClient,id:i.call.id,type:i.call.type,members:i.members,ownCapabilities:i.own_capabilities,watching:e.watch,clientStore:n.writeableStateStore});t.state.updateFromCallResponse(i.call),await t.applyDeviceConfig(i.call.settings,!1),e.watch&&(await t.setup(),n.writeableStateStore.registerCall(t)),r.push(t)}return{...t,calls:r}},this.queryCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/call/stats",e)},this.queryAggregateCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/stats",e)},this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(e,t,n,r,i)=>await this.streamClient.post("/devices",{id:e,push_provider:t,voip_token:i,...null!=r?{user_id:r}:{},...null!=n?{push_provider_name:n}:{}}),this.addVoipDevice=async(e,t,n,r)=>await this.addDevice(e,t,n,r,!0),this.getDevices=async e=>await this.streamClient.get("/devices",e?{user_id:e}:{}),this.removeDevice=async(e,t)=>await this.streamClient.delete("/devices",{id:e,...t?{user_id:t}:{}}),this.onRingingCall=async e=>{let t=this.state.calls.find((t=>t.cid===e&&t.ringing));if(!t){const[n,r]=e.split(":");t=new V4({streamClient:this.streamClient,type:n,id:r,clientStore:this.writeableStateStore,ringing:!0}),await t.get()}return t},this.connectAnonymousUser=async(e,t)=>s1(this.connectionConcurrencyTag,(()=>this.streamClient.connectAnonymousUser(e,t)));const r="string"===typeof e?e:e.apiKey,i="string"===typeof e?t:e.options;i?.enableTimerWorker&&(N2=!0);if(((e,t)=>{q0=e,t&&Y0(t)})(i?.logger||K0,i?.logLevel||"warn"),this.logger=Q0(["client"]),this.streamClient=K4(r,i),this.writeableStateStore=new v1,this.readOnlyStateStore=new y1(this.writeableStateStore),"string"!==typeof e&&e.user){const t=e.user;"anonymous"===t.type&&(t.id="!anon"),t.id&&this.registerClientInstance(r,t);const n=(e=>{const{token:t,tokenProvider:n}=e;if(t&&n){let e=!1;return async function(){return e?n():(e=!0,t)}}return t||n})(e);this.connectUser(t,n).catch((e=>{this.logger("error","Failed to connect",e)}))}}static getOrCreateInstance(e){const{apiKey:t,user:n,token:r,tokenProvider:i}=e;if(!n.id&&"anonymous"!==n.type)throw new Error("user.id is required for a non-anonymous user");if(!r&&!i&&"anonymous"!==n.type&&"guest"!==n.type)throw new Error("tokenProvider or token is required for a authenticated users");return Y4._instances.get(G4(t,n))||new Y4(e)}get state(){return this.readOnlyStateStore}}Y4._instances=new Map;const J4=e=>"string"===typeof e,Q4=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},X4=e=>null==e?"":""+e,Z4=/###/g,e3=e=>e&&e.indexOf("###")>-1?e.replace(Z4,"."):e,t3=e=>!e||J4(e),n3=(e,t,n)=>{const r=J4(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(t3(e))return{};const t=e3(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return t3(e)?{}:{obj:e,k:e3(r[i])}},r3=(e,t,n)=>{const{obj:r,k:i}=n3(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let o=t[t.length-1],s=t.slice(0,t.length-1),a=n3(e,s,Object);for(;void 0===a.obj&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=n3(e,s,Object),a&&a.obj&&"undefined"!==typeof a.obj[`${a.k}.${o}`]&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},i3=(e,t)=>{const{obj:n,k:r}=n3(e,t);if(n)return n[r]},o3=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?J4(e[r])||e[r]instanceof String||J4(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):o3(e[r],t[r],n):e[r]=t[r]);return e},s3=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var a3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const l3=e=>J4(e)?e.replace(/[&<>"'\/]/g,(e=>a3[e])):e;const c3=[" ",",","?","!",";"],u3=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),d3=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||"object"!==typeof i)return;let e,t="";for(let s=o;s<r.length;++s)if(s!==o&&(t+=n),t+=r[s],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<r.length-1)continue;o+=s-o+1;break}i=e}return i},h3=e=>e&&e.replace("_","-"),p3={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class f3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||p3,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(J4(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new f3(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new f3(this.logger,e)}}var m3=new f3;class g3{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let i=0;i<r;i++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let o=0;o<i;o++)r.apply(r,[e,...n])}))}}}class v3 extends g3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],n&&(Array.isArray(n)?s.push(...n):J4(n)&&i?s.push(...n.split(i)):s.push(n)));const a=i3(this.data,s);return!a&&!t&&!n&&e.indexOf(".")>-1&&(e=s[0],t=s[1],n=s.slice(2).join(".")),!a&&o&&J4(n)?d3(this.data&&this.data[e]&&this.data[e][t],n,i):a}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(s=e.split("."),r=t,t=s[1]),this.addNamespaces(t),r3(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(J4(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=t,t=s[1]),this.addNamespaces(t);let a=i3(this.data,s)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?o3(a,n,i):a={...a,...n},r3(this.data,s,a),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var y3={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))})),t}};const b3={};class w3 extends g3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=m3.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=c3.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=u3.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let o=!i.test(e);if(!o){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(o=!0)}return o})(e,n,r);if(o&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:J4(i)?[i]:i};const o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return{key:e,namespaces:J4(i)?[i]:i}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],t),a=s[s.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:`${a}${e}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:`${a}${e}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:o}const u=this.resolve(e,t);let d=u&&u.res;const h=u&&u.usedKey||o,p=u&&u.exactUsedKey||o,f=Object.prototype.toString.apply(d),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!J4(d)&&"boolean"!==typeof d&&"number"!==typeof d;if(!(g&&d&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0)||J4(m)&&Array.isArray(d))if(g&&J4(m)&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,t,n));else{let r=!1,s=!1;const c=void 0!==t.count&&!J4(t.count),h=w3.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",m=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${f}`]||t.defaultValue;!this.isValidLookup(d)&&h&&(r=!0,d=g),this.isValidLookup(d)||(s=!0,d=o);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:d,y=h&&g!==d&&this.options.updateMissing;if(s||r||y){if(this.logger.log(y?"updateKey":"missingKey",l,a,o,y?g:d),i){const e=this.resolve(o,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=h&&r!==d?r:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,n,i,y,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,n,i,y,t),this.emit("missingKey",e,a,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);m&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{r([e],o+n,t[`defaultValue${n}`]||g)}))})):r(e,o,g))}d=this.extendTranslation(d,e,t,u,n),s&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${o}`),(s||r)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${o}`:o,r?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(u.res=e,u.usedParams=this.getUsedParamsDetails(t),u):e}if(i){const e=Array.isArray(d),n=e?[]:{},r=e?p:h;for(const o in d)if(Object.prototype.hasOwnProperty.call(d,o)){const e=`${r}${i}${o}`;n[o]=this.translate(e,{...t,joinArrays:!1,ns:s}),n[o]===e&&(n[o]=d[o])}d=n}}return r?(u.res=d,u.usedParams=this.getUsedParamsDetails(t),u):d}extendTranslation(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const s=J4(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!J4(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),s){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i&&i[0]===r[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):o.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,a=J4(s)?[s]:s;return void 0!==e&&null!==e&&a&&a.length&&!1!==n.applyPostProcessor&&(e=y3.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return J4(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,s),l=a.key;n=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==s.count&&!J4(s.count),d=u&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==s.context&&(J4(s.context)||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(o=e,!b3[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(b3[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;i=n;const o=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,s);else{let e;u&&(e=this.pluralResolver.getSuffix(n,s.count,s));const t=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(o.push(l+e),s.ordinal&&0===e.indexOf(r)&&o.push(l+e.replace(r,this.options.pluralSeparator)),d&&o.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${s.context}`;o.push(n),u&&(o.push(n+e),s.ordinal&&0===e.indexOf(r)&&o.push(n+e.replace(r,this.options.pluralSeparator)),d&&o.push(n+t))}}let a;for(;a=o.pop();)this.isValidLookup(t)||(r=a,t=this.getResource(n,e,a,s))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!J4(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const x3=e=>e.charAt(0).toUpperCase()+e.slice(1);class S3{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=m3.create("languageUtils")}getScriptPartFromCode(e){if(!(e=h3(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=h3(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(J4(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(ZC){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=x3(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=x3(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=x3(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),J4(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return J4(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):J4(e)&&i(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))})),r}}let C3=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_3={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const k3=["v1","v2","v3"],T3=["v4"],A3={zero:0,one:1,two:2,few:3,many:4,other:5};class E3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=m3.create("pluralResolver"),this.options.compatibilityJSON&&!T3.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return C3.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:_3[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const n=h3("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:r})}catch(hoe){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(r,t)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>A3[e]-A3[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!k3.includes(this.options.compatibilityJSON)}}const I3=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=((e,t,n)=>{const r=i3(e,n);return void 0!==r?r:i3(t,n)})(e,t,n);return!o&&i&&J4(n)&&(o=d3(e,n,r),void 0===o&&(o=d3(t,n,r))),o},R3=e=>e.replace(/\$/g,"$$$$");class P3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=m3.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:s,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:l3,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?s3(i):o||"{{",this.suffix=s?s3(s):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?s3(d):h||s3("$t("),this.nestingSuffix=p?s3(p):f||s3(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,o,s;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const i=I3(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),o=i.shift().trim(),s=i.join(this.formatSeparator).trim();return this.format(I3(t,a,o,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,{...r,...t,interpolationkey:o})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,u=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,d=[{regex:this.regexpUnescape,safeValue:e=>R3(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?R3(this.escape(e)):R3(e)}];return d.forEach((t=>{for(s=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=l(n),void 0===o)if("function"===typeof c){const t=c(e,i,r);o=J4(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(u){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else J4(o)||this.useRawValueToEscape||(o=X4(o));const a=t.safeValue(o);if(e=e.replace(i[0],a),u?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),e}nest(e,t){let n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let o=`{${r[1]}`;e=r[0],o=this.interpolate(o,i);const s=o.match(/'/g),a=o.match(/"/g);(s&&s.length%2===0&&!a||a.length%2!==0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i={...t,...i})}catch(ZC){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,ZC),`${e}${n}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let a=[];i={...o},i=i.replace&&!J4(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),a=e,l=!0}if(r=t(s.call(this,n[1].trim(),i),i),r&&n[0]===e&&!J4(r))return r;J4(r)||(r=X4(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),l&&(r=a.reduce(((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const j3=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=t[s];return a||(a=e(h3(r),i),t[s]=a),a(n)}};class N3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=m3.create("formatter"),this.options=e,this.formats={number:j3(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:j3(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:j3(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:j3(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:j3(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=j3(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find((e=>e.indexOf(")")>-1))){const e=i.findIndex((e=>e.indexOf(")")>-1));i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}const o=i.reduce(((e,t)=>{const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();n[o]||(n[o]=i),"false"===i&&(n[o]=!1),"true"===i&&(n[o]=!0),isNaN(i)||(n[o]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const s=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},a=s.locale||s.lng||r.locale||r.lng||n;t=this.formats[i](e,a,{...o,...r,...s})}catch(Nb){this.logger.warn(Nb)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e);return o}}class O3 extends g3{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=m3.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},o={},s={},a={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const s=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===o[s]&&(o[s]=!0):(this.state[s]=1,r=!1,void 0===o[s]&&(o[s]=!0),void 0===i[s]&&(i[s]=!0),void 0===a[t]&&(a[t]=!0)))})),r||(s[e]=!0)})),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),!t&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:i}=n3(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:o});this.readingCalls++;const s=(s,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&a&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,o)}),i):o(s,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,s);try{const n=a(e,t);n&&"function"===typeof n.then?n.then((e=>s(null,e))).catch(s):s(null,n)}catch(hoe){s(hoe)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();J4(e)&&(e=this.languageUtils.toResolveHierarchy(e)),J4(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,o)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,o),this.loaded(e,n,o)}))}saveMissing(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const a={...o,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,n,r,a):l(e,t,n,r),i&&"function"===typeof i.then?i.then((e=>s(null,e))).catch(s):s(null,i)}catch(hoe){s(hoe)}else l(e,t,n,r,s,a)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const D3=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),J4(e[1])&&(t.defaultValue=e[1]),J4(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),M3=e=>(J4(e.ns)&&(e.ns=[e.ns]),J4(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),J4(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),L3=()=>{};class F3 extends g3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=M3(e),this.services={},this.logger=m3,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(J4(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=D3();this.options={...r,...this.options,...M3(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?m3.init(i(this.modules.logger),this.options):m3.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=N3);const n=new S3(this.options);this.store=new v3(this.options.resources,this.options);const o=this.services;o.logger=m3,o.resourceStore=this.store,o.languageUtils=n,o.pluralResolver=new E3(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(o.formatter=i(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new P3(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new O3(i(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(o.languageDetector=i(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=i(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new w3(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=L3),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=Q4(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L3;const n=J4(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=Q4();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=L3),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&y3.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=Q4();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,o)=>{o?(i(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n=J4(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{o(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let o;if("object"!==typeof t){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([e,t].concat(a))}else o={...t};o.lng=o.lng||i.lng,o.lngs=o.lngs||i.lngs,o.ns=o.ns||i.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||n||i.keyPrefix);const c=r.options.keySeparator||".";let u;return u=o.keyPrefix&&Array.isArray(e)?e.map((e=>`${o.keyPrefix}${c}${e}`)):o.keyPrefix?`${o.keyPrefix}${c}${e}`:e,r.t(u,o)};return J4(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(n,e)||r&&!o(i,e)))}loadNamespaces(e,t){const n=Q4();return this.options.ns?(J4(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Q4();J4(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=r.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new S3(D3());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new F3(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L3;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new F3(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new v3(this.store.data,r),i.services.resourceStore=i.store),i.translator=new w3(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const U3=F3.createInstance();U3.createInstance=F3.createInstance;U3.createInstance,U3.dir,U3.init,U3.loadResources,U3.reloadResources,U3.use,U3.changeLanguage,U3.getFixedT,U3.t,U3.exists,U3.setDefaultNamespace,U3.hasLoadedNamespace,U3.loadNamespaces,U3.loadLanguages;const $3=(0,l.createContext)(void 0),V3=()=>(0,l.useContext)($3),B3="stream-video",z3={debug:!1,currentLanguage:"en",fallbackLanguage:!1},W3=(H3={},q3=B3,Object.entries(H3).reduce(((e,t)=>{let[n,r]=t;return e[n]={[q3]:r},e}),{}));var H3,q3;const G3=e=>e;class K3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.t=G3,this.init=async()=>{try{this.t=await this.i18nInstance.init()}catch(ZC){console.error(`Failed to initialize translations: ${JSON.stringify(ZC)}`)}return this},this.changeLanguage=async(e,t)=>{if(!this._checkIsInitialized())return;const n="undefined"!==typeof window&&window.navigator?window.navigator.language:void 0;await this.i18nInstance.changeLanguage(e||n),t?.(this.currentLanguage)},this.registerTranslationsForLanguage=e=>{let{lng:t,translations:n}=e;this._checkIsInitialized()&&this.i18nInstance.addResourceBundle(t,B3,n,!0,!0)},this._checkIsInitialized=()=>(this.i18nInstance.isInitialized||console.warn("I18n instance is not initialized. Call yourStreamI18nInstance.init()."),this.i18nInstance.isInitialized);const{debug:t=z3.debug,currentLanguage:n=z3.currentLanguage,fallbackLanguage:r=z3.fallbackLanguage,translationsOverrides:i}=e;this.i18nInstance=U3.createInstance({debug:t,defaultNS:B3,fallbackLng:r,interpolation:{escapeValue:!1},keySeparator:!1,lng:n,nsSeparator:!1,parseMissingKeyHandler:e=>e,resources:W3}),i&&this.i18nInstance.on("initialized",(()=>{Object.entries(i).forEach((e=>{let[t,n]=e;this.registerTranslationsForLanguage({lng:t,translations:n})}))}))}get currentLanguage(){return this._checkIsInitialized(),this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const Y3=(0,l.createContext)({t:G3}),J3=e=>{let{children:t,...n}=e;const{i18n:r,t:i}=Q3(n);return(0,Ke.jsx)(Y3.Provider,{value:{t:i,i18n:r},children:t})},Q3=e=>{let{i18nInstance:t,language:n,fallbackLanguage:r,translationsOverrides:i}=e;const[o]=(0,l.useState)((()=>t||new K3({currentLanguage:n,fallbackLanguage:r,translationsOverrides:i}))),[s,a]=(0,l.useState)((()=>G3));return(0,l.useEffect)((()=>{const{isInitialized:e}=o;e?n&&o?.currentLanguage!==n&&o.changeLanguage(n).catch((e=>{console.log("Error while changing language",e)})):o.init().then((e=>a((()=>e.i18nInstance.t))))}),[o,t,n,i]),{i18n:o,t:s}},X3=()=>(0,l.useContext)(Y3),Z3=(0,l.createContext)(void 0),e5=e=>{let{children:t,client:n,i18nInstance:r,language:i,translationsOverrides:o}=e;return(0,Ke.jsx)(Z3.Provider,{value:n,children:(0,Ke.jsx)(J3,{i18nInstance:r,language:i,translationsOverrides:o,children:t})})},t5=()=>(0,l.useContext)(Z3),n5=(e,t)=>{const[n,r]=(0,l.useState)((()=>{try{return g1.getCurrentValue(e)}catch(hoe){if("undefined"===typeof t)throw hoe;return t}}));return(0,l.useEffect)((()=>g1.createSubscription(e,r,(e=>{console.log("An error occurred while reading an observable",e),t&&r(t)}))),[t,e]),n},r5=Object.freeze([]),i5=()=>{const e=V3();if(!e){const e='You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.';return console.warn(e),new V1}return e.state},o5=()=>{const{recording$:e}=i5();return n5(e)},s5=()=>{const{ownCapabilities$:e}=i5();return n5(e)};function a5(e,t){const n=t??e;return{status:e,optimisticStatus:n,isEnabled:"enabled"===e,isMute:"enabled"!==e,optimisticIsMute:"enabled"!==n,isTogglePending:n!==e}}function l5(e){const t=(0,l.useMemo)((()=>xX(r5)),[]),[n,r]=(0,l.useState)(t),i=n5(n,r5);return{getDevices:()=>(n===t&&r(e.listDevices()),i)}}var c5=Object.freeze({__proto__:null,useAnonymousParticipantCount:()=>{const{anonymousParticipantCount$:e}=i5();return n5(e)},useCallBlockedUserIds:()=>{const{blockedUserIds$:e}=i5();return n5(e)},useCallCallingState:()=>{const{callingState$:e}=i5();return n5(e)},useCallClosedCaptions:()=>{const{closedCaptions$:e}=i5();return n5(e)},useCallCreatedAt:()=>{const{createdAt$:e}=i5();return n5(e)},useCallCreatedBy:()=>{const{createdBy$:e}=i5();return n5(e)},useCallCustomData:()=>{const{custom$:e}=i5();return n5(e)},useCallEgress:()=>{const{egress$:e}=i5();return n5(e)},useCallEndedAt:()=>{const{endedAt$:e}=i5();return n5(e)},useCallEndedBy:()=>{const{endedBy$:e}=i5();return n5(e)},useCallIngress:()=>{const{ingress$:e}=i5();return n5(e)},useCallMembers:()=>{const{members$:e}=i5();return n5(e)},useCallSession:()=>{const{session$:e}=i5();return n5(e)},useCallSettings:()=>{const{settings$:e}=i5();return n5(e)},useCallStartedAt:()=>{const{startedAt$:e}=i5();return n5(e)},useCallStartsAt:()=>{const{startsAt$:e}=i5();return n5(e)},useCallState:i5,useCallStatsReport:()=>{const{callStatsReport$:e}=i5();return n5(e)},useCallThumbnail:()=>{const{thumbnails$:e}=i5();return n5(e)},useCallUpdatedAt:()=>{const{updatedAt$:e}=i5();return n5(e)},useCameraState:()=>{const e=V3(),{camera:t}=e,{state:n}=t,r=n5(n.direction$),i=n5(n.mediaStream$),o=n5(n.selectedDevice$),{getDevices:s}=l5(t),a=n5(n.hasBrowserPermission$),l=n5(n.isPromptingPermission$);return{camera:t,direction:r,mediaStream:i,get devices(){return s()},hasBrowserPermission:a,isPromptingPermission:l,selectedDevice:o,...a5(n5(n.status$),n5(n.optimisticStatus$))}},useDominantSpeaker:()=>{const{dominantSpeaker$:e}=i5();return n5(e)},useHasOngoingScreenShare:()=>{const{hasOngoingScreenShare$:e}=i5();return n5(e)},useHasPermissions:function(){const e=s5();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.every((t=>e?.includes(t)))},useIncomingVideoSettings:()=>{const e=V3();return n5(e.dynascaleManager.incomingVideoSettings$)},useIsCallCaptioningInProgress:()=>{const{captioning$:e}=i5();return n5(e)},useIsCallHLSBroadcastingInProgress:()=>{const{egress$:e}=i5(),t=n5(e);return!!t&&t.broadcasting},useIsCallLive:()=>{const{backstage$:e}=i5();return!n5(e)},useIsCallRecordingInProgress:o5,useIsCallTranscribingInProgress:()=>{const{transcribing$:e}=i5();return n5(e)},useLocalParticipant:()=>{const{localParticipant$:e}=i5();return n5(e)},useMicrophoneState:()=>{const e=V3(),{microphone:t}=e,{state:n}=t,r=n5(n.mediaStream$),i=n5(n.selectedDevice$),{getDevices:o}=l5(t),s=n5(n.hasBrowserPermission$),a=n5(n.isPromptingPermission$),l=n5(n.speakingWhileMuted$);return{microphone:t,mediaStream:r,get devices(){return o()},selectedDevice:i,hasBrowserPermission:s,isPromptingPermission:a,isSpeakingWhileMuted:l,...a5(n5(n.status$),n5(n.optimisticStatus$))}},useOwnCapabilities:s5,useParticipantCount:()=>{const{participantCount$:e}=i5();return n5(e)},useParticipants:function(){let{sortBy:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{participants$:t}=i5(),n=n5(t);return(0,l.useMemo)((()=>e?[...n].sort(e):n),[n,e])},useRemoteParticipants:()=>{const{remoteParticipants$:e}=i5();return n5(e)},useScreenShareState:()=>{const e=V3(),{screenShare:t}=e;return{screenShare:t,mediaStream:n5(t.state.mediaStream$),...a5(n5(t.state.status$),n5(t.state.optimisticStatus$))}},useSpeakerState:()=>{if("undefined"!==typeof navigator&&"reactnative"===navigator.product?.toLowerCase())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const e=V3(),{speaker:t}=e,{getDevices:n}=l5(t),r=n5(t.state.selectedDevice$);return{speaker:t,get devices(){return n()},selectedDevice:r,isDeviceSelectionSupported:t.state.isDeviceSelectionSupported}}});const u5=()=>c5,d5=e=>{let{canRequestOnly:t,hasPermissionsOnly:n,requiredGrants:r,requireAll:i=!0,children:o}=e;const s=V3(),{useCallSettings:a,useOwnCapabilities:l}=u5(),c=l(),u=a(),d=r[i?"every":"some"]((e=>c?.includes(e)));if(n)return d?(0,Ke.jsx)(Ke.Fragment,{children:o}):null;const h=r.some((e=>s?.permissionsContext.canRequest(e,u)));return t?h?(0,Ke.jsx)(Ke.Fragment,{children:o}):null:d||h?(0,Ke.jsx)(Ke.Fragment,{children:o}):null};function h5(){return"undefined"!==typeof window}function p5(e){return g5(e)?(e.nodeName||"").toLowerCase():"#document"}function f5(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function m5(e){var t;return null==(t=(g5(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function g5(e){return!!h5()&&(e instanceof Node||e instanceof f5(e).Node)}function v5(e){return!!h5()&&(e instanceof Element||e instanceof f5(e).Element)}function y5(e){return!!h5()&&(e instanceof HTMLElement||e instanceof f5(e).HTMLElement)}function b5(e){return!(!h5()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof f5(e).ShadowRoot)}function w5(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=T5(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function x5(e){return["table","td","th"].includes(p5(e))}function S5(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(ZC){return!1}}))}function C5(e){const t=_5(),n=v5(e)?T5(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function _5(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function k5(e){return["html","body","#document"].includes(p5(e))}function T5(e){return f5(e).getComputedStyle(e)}function A5(e){return v5(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function E5(e){if("html"===p5(e))return e;const t=e.assignedSlot||e.parentNode||b5(e)&&e.host||m5(e);return b5(t)?t.host:t}function I5(e){const t=E5(e);return k5(t)?e.ownerDocument?e.ownerDocument.body:e.body:y5(t)&&w5(t)?t:I5(t)}function R5(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=I5(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=f5(i);if(o){const e=P5(s);return t.concat(s,s.visualViewport||[],w5(i)?i:[],e&&n?R5(e):[])}return t.concat(i,R5(i,[],n))}function P5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}var j5=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],N5=j5.join(","),O5="undefined"===typeof Element,D5=O5?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,M5=!O5&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},L5=function e(t,n){var r;void 0===n&&(n=!0);var i=null===t||void 0===t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},F5=function(e,t,n){if(L5(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(N5));return t&&D5.call(e,N5)&&r.unshift(e),r=r.filter(n)},U5=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!L5(s,!1))if("SLOT"===s.tagName){var a=s.assignedElements(),l=e(a.length?a:s.children,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:s,candidates:l})}else{D5.call(s,N5)&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var c=s.shadowRoot||"function"===typeof r.getShadowRoot&&r.getShadowRoot(s),u=!L5(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(c&&u){var d=e(!0===c?s.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:s,candidates:d})}else o.unshift.apply(o,s.children)}}return i},$5=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},V5=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!$5(e)?0:e.tabIndex},B5=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},z5=function(e){return"INPUT"===e.tagName},W5=function(e){return function(e){return z5(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||M5(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(hoe){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",hoe.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},H5=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},q5=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=D5.call(e,"details>summary:first-of-type")?e.parentElement:e;if(D5.call(i,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return H5(e)}else{if("function"===typeof r){for(var o=e;e;){var s=e.parentElement,a=M5(e);if(s&&!s.shadowRoot&&!0===r(s))return H5(e);e=e.assignedSlot?e.assignedSlot:s||a===e.ownerDocument?s:a.host}e=o}if(function(e){var t,n,r,i,o=e&&M5(e),s=null===(t=o)||void 0===t?void 0:t.host,a=!1;if(o&&o!==e)for(a=!!(null!==(n=s)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(s)||null!==e&&void 0!==e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!a&&s;){var l,c,u;a=!(null===(c=s=null===(l=o=M5(s))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(s))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},G5=function(e,t){return!(t.disabled||L5(t)||function(e){return z5(e)&&"hidden"===e.type}(t)||q5(t,e)||function(e){var t="DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}));return t}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!D5.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},K5=function(e,t){return!(W5(t)||V5(t)<0||!G5(e,t))},Y5=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},J5=function e(t){var n=[],r=[];return t.forEach((function(t,i){var o=!!t.scopeParent,s=o?t.scopeParent:t,a=function(e,t){var n=V5(e);return n<0&&t&&!$5(e)?0:n}(s,o),l=o?e(t.candidates):s;0===a?o?n.push.apply(n,l):n.push(s):r.push({documentOrder:i,tabIndex:a,item:t,isScope:o,content:l})})),r.sort(B5).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},Q5=function(e,t){var n;return n=(t=t||{}).getShadowRoot?U5([e],t.includeContainer,{filter:K5.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Y5}):F5(e,t.includeContainer,K5.bind(null,t)),J5(n)};function X5(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function Z5(e){return(null==e?void 0:e.ownerDocument)||document}var e6="undefined"!==typeof document?l.useLayoutEffect:l.useEffect;const t6={...c}.useInsertionEffect||(e=>e());const n6=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function r6(e,t){const n=Q5(e,n6()),r=n.length;if(0===r)return;const i=function(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}(Z5(e)),o=n.indexOf(i);return n[-1===o?1===t?0:r-1:o+t]}function i6(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!function(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&b5(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}(n,r)}function o6(e){Q5(e,n6()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function s6(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const a6=Math.min,l6=Math.max,c6=Math.round,u6=Math.floor,d6=e=>({x:e,y:e}),h6={left:"right",right:"left",bottom:"top",top:"bottom"},p6={start:"end",end:"start"};function f6(e,t,n){return l6(e,a6(t,n))}function m6(e,t){return"function"===typeof e?e(t):e}function g6(e){return e.split("-")[0]}function v6(e){return e.split("-")[1]}function y6(e){return"x"===e?"y":"x"}function b6(e){return"y"===e?"height":"width"}function w6(e){return["top","bottom"].includes(g6(e))?"y":"x"}function x6(e){return y6(w6(e))}function S6(e){return e.replace(/start|end/g,(e=>p6[e]))}function C6(e){return e.replace(/left|right|bottom|top/g,(e=>h6[e]))}function _6(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function k6(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function T6(e,t,n){let{reference:r,floating:i}=e;const o=w6(t),s=x6(t),a=b6(s),l=g6(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(v6(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function A6(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=m6(t,e),f=_6(p),m=a[h?"floating"===d?"reference":"floating":d],g=k6(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},w=k6(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}function E6(e){const t=T5(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=y5(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=c6(n)!==o||c6(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function I6(e){return v5(e)?e:e.contextElement}function R6(e){const t=I6(e);if(!y5(t))return d6(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=E6(t);let s=(o?c6(n.width):n.width)/r,a=(o?c6(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const P6=d6(0);function j6(e){const t=f5(e);return _5()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:P6}function N6(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=I6(e);let s=d6(1);t&&(r?v5(r)&&(s=R6(r)):s=R6(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==f5(e))&&t}(o,n,r)?j6(o):d6(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const e=f5(o),t=r&&v5(r)?f5(r):r;let n=e,i=P5(n);for(;i&&r&&t!==n;){const e=R6(i),t=i.getBoundingClientRect(),r=T5(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,n=f5(i),i=P5(n)}}return k6({width:u,height:d,x:l,y:c})}function O6(e,t){const n=A5(e).scrollLeft;return t?t.left+n:N6(m5(e)).left+n}function D6(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:O6(e,r)),y:r.top+t.scrollTop}}function M6(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=f5(e),r=m5(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=_5();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=m5(e),n=A5(e),r=e.ownerDocument.body,i=l6(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=l6(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+O6(e);const a=-n.scrollTop;return"rtl"===T5(r).direction&&(s+=l6(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(m5(e));else if(v5(t))r=function(e,t){const n=N6(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=y5(e)?R6(e):d6(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=j6(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return k6(r)}function L6(e,t){const n=E5(e);return!(n===t||!v5(n)||k5(n))&&("fixed"===T5(n).position||L6(n,t))}function F6(e,t,n){const r=y5(t),i=m5(t),o="fixed"===n,s=N6(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=d6(0);function c(){l.x=O6(i)}if(r||!r&&!o)if(("body"!==p5(t)||w5(i))&&(a=A5(t)),r){const e=N6(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();o&&!r&&i&&c();const u=!i||r||o?d6(0):D6(i,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function U6(e){return"static"===T5(e).position}function $6(e,t){if(!y5(e)||"fixed"===T5(e).position)return null;if(t)return t(e);let n=e.offsetParent;return m5(e)===n&&(n=n.ownerDocument.body),n}function V6(e,t){const n=f5(e);if(S5(e))return n;if(!y5(e)){let t=E5(e);for(;t&&!k5(t);){if(v5(t)&&!U6(t))return t;t=E5(t)}return n}let r=$6(e,t);for(;r&&x5(r)&&U6(r);)r=$6(r,t);return r&&k5(r)&&U6(r)&&!C5(r)?n:r||function(e){let t=E5(e);for(;y5(t)&&!k5(t);){if(C5(t))return t;if(S5(t))return null;t=E5(t)}return null}(e)||n}const B6={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,s=m5(r),a=!!t&&S5(t.floating);if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=d6(1);const u=d6(0),d=y5(r);if((d||!d&&!o)&&(("body"!==p5(r)||w5(s))&&(l=A5(r)),y5(r))){const e=N6(r);c=R6(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||o?d6(0):D6(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:m5,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o="clippingAncestors"===n?S5(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=R5(e,[],!1).filter((e=>v5(e)&&"body"!==p5(e))),i=null;const o="fixed"===T5(e).position;let s=o?E5(e):e;for(;v5(s)&&!k5(s);){const t=T5(s),n=C5(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||w5(s)&&!n&&L6(e,s))?r=r.filter((e=>e!==s)):i=t,s=E5(s)}return t.set(e,r),r}(t,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce(((e,n)=>{const r=M6(t,n,i);return e.top=l6(r.top,e.top),e.right=a6(r.right,e.right),e.bottom=a6(r.bottom,e.bottom),e.left=l6(r.left,e.left),e}),M6(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:V6,getElementRects:async function(e){const t=this.getOffsetParent||V6,n=this.getDimensions,r=await n(e.floating);return{reference:F6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=E6(e);return{width:t,height:n}},getScale:R6,isElement:v5,isRTL:function(e){return"rtl"===T5(e).direction}};function z6(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function W6(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=I6(e),u=i||o?[...c?R5(c):[],...R5(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=m5(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const f={rootMargin:-u6(d)+"px "+-u6(i.clientWidth-(u+h))+"px "+-u6(i.clientHeight-(d+p))+"px "+-u6(u)+"px",threshold:l6(0,a6(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return s();r?s(!1,r):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==r||z6(c,e.getBoundingClientRect())||s(),m=!1}try{r=new IntersectionObserver(g,{...f,root:i.ownerDocument})}catch(tc){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),o}(c,n):null;let h,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let m=l?N6(e):null;return l&&function t(){const r=N6(e);m&&!z6(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const H6=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=g6(n),a=v6(n),l="y"===w6(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=m6(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},q6=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=m6(e,t),c={x:n,y:r},u=await A6(t,l),d=w6(g6(i)),h=y6(d);let p=c[h],f=c[d];if(o){const e="y"===h?"bottom":"right";p=f6(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";f=f6(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[d]:s}}}}}},G6=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=m6(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=g6(i),y=w6(a),b=g6(a)===a,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!m?[C6(a)]:function(e){const t=C6(e);return[S6(e),t,S6(t)]}(a)),S="none"!==f;!h&&S&&x.push(...function(e,t,n,r){const i=v6(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(g6(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(S6)))),o}(a,m,f,w));const C=[a,...x],_=await A6(t,g),k=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&k.push(_[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=v6(e),i=x6(e),o=b6(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=C6(s)),[s,C6(s)]}(i,s,w);k.push(_[e[0]],_[e[1]])}if(T=[...T,{placement:i,overflows:k}],!k.every((e=>e<=0))){var A,E;const e=((null==(A=o.flip)?void 0:A.index)||0)+1,t=C[e];if(t){var I;const n="alignment"===d&&y!==w6(t),r=(null==(I=T[0])?void 0:I.overflows[0])>0;if(!n||r)return{data:{index:e,overflows:T},reset:{placement:t}}}let n=null==(E=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:E.placement;if(!n)switch(p){case"bestFit":{var R;const e=null==(R=T.filter((e=>{if(S){const t=w6(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},K6=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=m6(e,t),u=await A6(t,c),d=g6(i),h=v6(i),p="y"===w6(i),{width:f,height:m}=o.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,g="end"===h?"top":"bottom");const y=m-u.top-u.bottom,b=f-u.left-u.right,w=a6(m-u[g],y),x=a6(f-u[v],b),S=!t.middlewareData.shift;let C=w,_=x;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(_=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(C=y),S&&!h){const e=l6(u.left,0),t=l6(u.right,0),n=l6(u.top,0),r=l6(u.bottom,0);p?_=f-2*(0!==e||0!==t?e+t:l6(u.left,u.right)):C=m-2*(0!==n||0!==r?n+r:l6(u.top,u.bottom))}await l({...t,availableWidth:_,availableHeight:C});const k=await s.getDimensions(a.floating);return f!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}},Y6=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=m6(e,t)||{};if(null==c)return{};const d=_6(u),h={x:n,y:r},p=x6(i),f=b6(p),m=await s.getDimensions(c),g="y"===p,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=o.reference[f]+o.reference[p]-h[p]-o.floating[f],x=h[p]-o.reference[p],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let C=S?S[b]:0;C&&await(null==s.isElement?void 0:s.isElement(S))||(C=a.floating[b]||o.floating[f]);const _=w/2-x/2,k=C/2-m[f]/2-1,T=a6(d[v],k),A=a6(d[y],k),E=T,I=C-m[f]-A,R=C/2-m[f]/2+_,P=f6(E,R,I),j=!l.arrow&&null!=v6(i)&&R!==P&&o.reference[f]/2-(R<E?T:A)-m[f]/2<0,N=j?R<E?R-E:R-I:0;return{[p]:h[p]+N,data:{[p]:P,centerOffset:R-P-N,...j&&{alignmentOffset:N}},reset:j}}}),J6=(e,t,n)=>{const r=new Map,i={platform:B6,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=T6(c,r,l),h=r,p={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:v,data:y,reset:b}=await o({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,p={...p,[n]:{...p[n],...y}},b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=T6(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:o})};var Q6="undefined"!==typeof document?l.useLayoutEffect:l.useEffect;function X6(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!X6(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!X6(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Z6(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function e9(e,t){const n=Z6(e);return Math.round(t*n)/n}function t9(e){const t=l.useRef(e);return Q6((()=>{t.current=e})),t}const n9=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&function(e){return{}.hasOwnProperty.call(e,"current")}(n)?null!=n.current?Y6({element:n.current,padding:r}).fn(t):{}:n?Y6({element:n,padding:r}).fn(t):{}}}),r9=(e,t)=>({...q6(e),options:[e,t]}),i9=(e,t)=>({...G6(e),options:[e,t]}),o9=(e,t)=>({...K6(e),options:[e,t]});const s9="ArrowLeft",a9="ArrowRight",l9="ArrowUp",c9="ArrowDown";const u9=[s9,a9],d9=[l9,c9],h9={...c};let p9=!1,f9=0;const m9=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+f9++;const g9=h9.useId||function(){const[e,t]=l.useState((()=>p9?m9():void 0));return e6((()=>{null==e&&t(m9())}),[]),l.useEffect((()=>{p9=!0}),[]),e};const v9=l.forwardRef((function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:i,shift:o}},width:s=14,height:a=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:h,d:p,style:{transform:f,...m}={},...g}=e;const v=g9(),[y,b]=l.useState(!1);if(e6((()=>{if(!r)return;"rtl"===T5(r).direction&&b(!0)}),[r]),!r)return null;const[w,x]=n.split("-"),S="top"===w||"bottom"===w;let C=d;(S&&null!=o&&o.x||!S&&null!=o&&o.y)&&(C=null);const _=2*u,k=_/2,T=s/2*(c/-8+1),A=a/2*c/4,E=!!p,I=C&&"end"===x?"bottom":"top";let R=C&&"end"===x?"right":"left";C&&y&&(R="end"===x?"left":"right");const P=null!=(null==i?void 0:i.x)?C||i.x:"",j=null!=(null==i?void 0:i.y)?C||i.y:"",N=p||"M0,0 H"+s+" L"+(s-T)+","+(a-A)+" Q"+s/2+","+a+" "+T+","+(a-A)+" Z",O={top:E?"rotate(180deg)":"",left:E?"rotate(90deg)":"rotate(-90deg)",bottom:E?"":"rotate(180deg)",right:E?"rotate(-90deg)":"rotate(90deg)"}[w];return(0,Ke.jsxs)("svg",{...g,"aria-hidden":!0,ref:t,width:E?s:s+_,height:s,viewBox:"0 0 "+s+" "+(a>s?a:s),style:{position:"absolute",pointerEvents:"none",[R]:P,[I]:j,[w]:S||E?"100%":"calc(100% - "+_/2+"px)",transform:[O,f].filter((e=>!!e)).join(" "),...m},children:[_>0&&(0,Ke.jsx)("path",{clipPath:"url(#"+v+")",fill:"none",stroke:h,strokeWidth:_+(p?0:1),d:N}),(0,Ke.jsx)("path",{stroke:_&&!p?g.fill:"none",d:N}),(0,Ke.jsx)("clipPath",{id:v,children:(0,Ke.jsx)("rect",{x:-k,y:k*(E?-1:1),width:s+_,height:s})})]})}));function y9(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}const b9=l.createContext(null),w9=l.createContext(null),x9=()=>{var e;return(null==(e=l.useContext(b9))?void 0:e.id)||null},S9=()=>l.useContext(w9);function C9(e){return"data-floating-ui-"+e}const _9={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},k9=l.forwardRef((function(e,t){const[n,r]=l.useState();e6((()=>{/apple/i.test(navigator.vendor)&&r("button")}),[]);const i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[C9("focus-guard")]:"",style:_9};return(0,Ke.jsx)("span",{...e,...i})})),T9=l.createContext(null),A9=C9("portal");function E9(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=g9(),i=I9(),[o,s]=l.useState(null),a=l.useRef(null);return e6((()=>()=>{null==o||o.remove(),queueMicrotask((()=>{a.current=null}))}),[o]),e6((()=>{if(!r)return;if(a.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(A9,""),e.appendChild(n),a.current=n,s(n)}),[t,r]),e6((()=>{if(null===n)return;if(!r)return;if(a.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!v5(e)&&(e=e.current),e=e||document.body;let o=null;t&&(o=document.createElement("div"),o.id=t,e.appendChild(o));const l=document.createElement("div");l.id=r,l.setAttribute(A9,""),e=o||e,e.appendChild(l),a.current=l,s(l)}),[t,n,r,i]),o}({id:n,root:r}),[s,a]=l.useState(null),c=l.useRef(null),u=l.useRef(null),d=l.useRef(null),h=l.useRef(null),p=null==s?void 0:s.modal,f=null==s?void 0:s.open,m=!!s&&!s.modal&&s.open&&i&&!(!r&&!o);return l.useEffect((()=>{if(o&&i&&!p)return o.addEventListener("focusin",e,!0),o.addEventListener("focusout",e,!0),()=>{o.removeEventListener("focusin",e,!0),o.removeEventListener("focusout",e,!0)};function e(e){if(o&&i6(e)){("focusin"===e.type?s6:o6)(o)}}}),[o,i,p]),l.useEffect((()=>{o&&(f||s6(o))}),[f,o]),(0,Ke.jsxs)(T9.Provider,{value:l.useMemo((()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:h,portalNode:o,setFocusManagerState:a})),[i,o]),children:[m&&o&&(0,Ke.jsx)(k9,{"data-type":"outside",ref:c,onFocus:e=>{if(i6(e,o)){var t;null==(t=d.current)||t.focus()}else{const e=s?s.domReference:null,t=r6(Z5(n=e).body,-1)||n;null==t||t.focus()}var n}}),m&&o&&(0,Ke.jsx)("span",{"aria-owns":o.id,style:_9}),o&&ke.createPortal(t,o),m&&o&&(0,Ke.jsx)(k9,{"data-type":"outside",ref:u,onFocus:e=>{if(i6(e,o)){var t;null==(t=h.current)||t.focus()}else{const t=s?s.domReference:null,r=r6(Z5(n=t).body,1)||n;null==r||r.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}var n}})]})}const I9=()=>l.useContext(T9);let R9=0;let P9=()=>{};const j9=l.forwardRef((function(e,t){const{lockScroll:n=!1,...r}=e;return e6((()=>{if(n)return R9++,1===R9&&(P9=function(){const e=/iP(hone|ad|od)|iOS/.test(X5()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",r=window.innerWidth-document.documentElement.clientWidth,i=t.left?parseFloat(t.left):window.scrollX,o=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",r&&(t[n]=r+"px"),e){var s,a;const e=(null==(s=window.visualViewport)?void 0:s.offsetLeft)||0,n=(null==(a=window.visualViewport)?void 0:a.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(o-Math.floor(n))+"px",left:-(i-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(i,o))}}()),()=>{R9--,0===R9&&P9()}}),[n]),(0,Ke.jsx)("div",{ref:t,...r,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}})}));function N9(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=g9(),o=l.useRef({}),[s]=l.useState((()=>y9())),a=null!=x9();const[c,u]=l.useState(r.reference),d=function(e){const t=l.useRef((()=>{}));return t6((()=>{t.current=e})),l.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}(((e,t,r)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:a}),null==n||n(e,t,r)})),h=l.useMemo((()=>({setPositionReference:u})),[]),p=l.useMemo((()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference})),[c,r.reference,r.floating]);return l.useMemo((()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:s,floatingId:i,refs:h})),[t,d,p,s,i,h])}function O9(e){void 0===e&&(e={});const{nodeId:t}=e,n=N9({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=l.useState(null),[a,c]=l.useState(null),u=(null==i?void 0:i.domReference)||o,d=l.useRef(null),h=S9();e6((()=>{u&&(d.current=u)}),[u]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[d,h]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=l.useState(r);X6(p,r)||f(r);const[m,g]=l.useState(null),[v,y]=l.useState(null),b=l.useCallback((e=>{e!==C.current&&(C.current=e,g(e))}),[]),w=l.useCallback((e=>{e!==_.current&&(_.current=e,y(e))}),[]),x=o||m,S=s||v,C=l.useRef(null),_=l.useRef(null),k=l.useRef(d),T=null!=c,A=t9(c),E=t9(i),I=t9(u),R=l.useCallback((()=>{if(!C.current||!_.current)return;const e={placement:t,strategy:n,middleware:p};E.current&&(e.platform=E.current),J6(C.current,_.current,e).then((e=>{const t={...e,isPositioned:!1!==I.current};P.current&&!X6(k.current,t)&&(k.current=t,ke.flushSync((()=>{h(t)})))}))}),[p,t,n,E,I]);Q6((()=>{!1===u&&k.current.isPositioned&&(k.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const P=l.useRef(!1);Q6((()=>(P.current=!0,()=>{P.current=!1})),[]),Q6((()=>{if(x&&(C.current=x),S&&(_.current=S),x&&S){if(A.current)return A.current(x,S,R);R()}}),[x,S,R,A,T]);const j=l.useMemo((()=>({reference:C,floating:_,setReference:b,setFloating:w})),[b,w]),N=l.useMemo((()=>({reference:x,floating:S})),[x,S]),O=l.useMemo((()=>{const e={position:n,left:0,top:0};if(!N.floating)return e;const t=e9(N.floating,d.x),r=e9(N.floating,d.y);return a?{...e,transform:"translate("+t+"px, "+r+"px)",...Z6(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,a,N.floating,d.x,d.y]);return l.useMemo((()=>({...d,update:R,refs:j,elements:N,floatingStyles:O})),[d,R,j,N,O])}({...e,elements:{...i,...a&&{reference:a}}}),f=l.useCallback((e=>{const t=v5(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;c(t),p.refs.setReference(t)}),[p.refs]),m=l.useCallback((e=>{(v5(e)||null===e)&&(d.current=e,s(e)),(v5(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!v5(e))&&p.refs.setReference(e)}),[p.refs]),g=l.useMemo((()=>({...p.refs,setReference:m,setPositionReference:f,domReference:d})),[p.refs,m,f]),v=l.useMemo((()=>({...p.elements,domReference:u})),[p.elements,u]),y=l.useMemo((()=>({...p,...r,refs:g,elements:v,nodeId:t})),[p,g,v,t,r]);return e6((()=>{r.dataRef.current.floatingContext=y;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),l.useMemo((()=>({...p,context:y,refs:g,elements:v})),[p,g,v,y])}const D9=e=>{let{participant:t,trackType:n="audioTrack",...r}=e;const i=V3(),[o,s]=(0,l.useState)(null),{userId:a,sessionId:c}=t;return(0,l.useEffect)((()=>{if(!i||!o)return;const e=i.bindAudioElement(o,c,n);return()=>{e?.()}}),[i,c,o,n]),(0,Ke.jsx)("audio",{autoPlay:!0,...r,ref:s,"data-user-id":a,"data-session-id":c,"data-track-type":n})};D9.displayName="Audio";const M9=e=>{const{participants:t,audioProps:n}=e;return(0,Ke.jsx)(Ke.Fragment,{children:t.map((e=>{if(e.isLocalParticipant)return null;const{audioStream:t,screenShareAudioStream:r,sessionId:i}=e,o=S1(e)&&t&&(0,Ke.jsx)(D9,{...n,trackType:"audioTrack",participant:e}),s=_1(e)&&r&&(0,Ke.jsx)(D9,{...n,trackType:"screenShareAudioTrack",participant:e});return(0,Ke.jsxs)(l.Fragment,{children:[o,s]},i)}))})};M9.displayName="ParticipantsAudio";const L9=(0,l.createContext)(void 0),F9=()=>(0,l.useContext)(L9),U9=e=>{let{middleware:t=[],placement:n,strategy:r,offset:i=10}=e;const{refs:o,x:s,y:a,update:c,elements:{domReference:u,floating:d},context:h}=O9({placement:n,strategy:r,middleware:[(p=i,{...H6(p),options:[p,f]}),r9(),i9(),o9({padding:10,apply:e=>{let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:`${t}px`})}}),...t]});var p,f;return(0,l.useEffect)((()=>{if(!u||!d)return;const e=W6(u,d,c);return()=>e()}),[u,d,c]),{refs:o,x:s,y:a,domReference:u,floating:d,strategy:r,context:h}};var $9;!function(e){e.PORTAL="portal",e.MENU="menu"}($9||($9={}));const V9=(0,l.createContext)({}),B9=()=>(0,l.useContext)(V9),z9=e=>{let{children:t,refs:n}=e;const r=(0,l.useMemo)((()=>`str-video-portal-${Math.random().toString(36).substring(2,9)}`),[]);return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)("div",{id:r,className:"str-video__portal"}),(0,Ke.jsx)(j9,{children:(0,Ke.jsx)(E9,{id:r,children:(0,Ke.jsx)("div",{className:"str-video__portal-content",ref:n.setFloating,children:t})})})]})},W9=e=>{let{ToggleButton:t,placement:n="top-start",strategy:r="absolute",offset:i,visualType:o=$9.MENU,children:s,onToggle:a}=e;const[c,u]=(0,l.useState)(!1),d=(0,l.useRef)(a);d.current=a;const{floating:h,domReference:p,refs:f,x:m,y:g}=U9({placement:n,strategy:r,offset:i});return(0,l.useEffect)((()=>{const e=p?.ownerDocument,t=e=>{!h&&p?.contains(e.target)?(u(!0),d.current?.(!0)):h&&!h?.contains(e.target)&&(u(!1),d.current?.(!1))},n=e=>{!e.key||"escape"!==e.key.toLowerCase()||e.altKey||e.ctrlKey||(u(!1),d.current?.(!1))};return e?.addEventListener("click",t,{capture:!0}),e?.addEventListener("keydown",n),()=>{e?.removeEventListener("click",t,{capture:!0}),e?.removeEventListener("keydown",n)}}),[h,p]),(0,Ke.jsxs)(Ke.Fragment,{children:[c&&(0,Ke.jsx)(V9.Provider,{value:{close:()=>u(!1)},children:o===$9.PORTAL?(0,Ke.jsx)(z9,{refs:f,children:s}):o===$9.MENU?(0,Ke.jsx)("div",{className:"str-video__menu-container",ref:f.setFloating,style:{position:r,top:g??0,left:m??0,overflowY:"auto"},role:"menu",children:s}):null}),(0,Ke.jsx)(t,{menuShown:c,ref:f.setReference})]})},H9=e=>{let{children:t,onItemClick:n}=e;const r=(0,l.useRef)(null);return(0,Ke.jsx)("ul",{className:"str-video__generic-menu",ref:r,onClick:e=>{n&&e.target!==r.current&&r.current?.contains(e.target)&&n(e)},children:t})},q9=e=>{let{children:t,...n}=e;return(0,Ke.jsx)("li",{className:"str-video__generic-menu--item",children:(0,Ke.jsx)("button",{...n,children:t})})},G9=e=>{let{className:t,icon:n}=e;return(0,Ke.jsx)("span",{className:(0,Ue.A)("str-video__icon",n&&`str-video__icon--${n}`,t)})};function K9(e){const[t,n]=(0,l.useState)(document.pictureInPictureElement===e);return!e&&t&&n(!1),(0,l.useEffect)((()=>{if(!e)return;const t=()=>{n(document.pictureInPictureElement===e)};return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",t),()=>{e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",t)}}),[e]),t}const Y9=()=>{const{participant:e,participantViewElement:t,videoElement:n}=F9(),[r,i]=(0,l.useState)(!!document.fullscreenElement),o=V3(),s=K9(n??void 0),{t:a}=X3(),{pin:c,sessionId:u,userId:d}=e,h=S1(e),p=x1(e),f=C1(e),m=_1(e),g=e=>()=>{o?.updateUserPermissions({user_id:d,grant_permissions:[e]})},v=e=>()=>{o?.updateUserPermissions({user_id:d,revoke_permissions:[e]})};(0,l.useEffect)((()=>{const e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);const{close:y}=B9()||{};return(0,Ke.jsxs)(H9,{onItemClick:y,children:[(0,Ke.jsxs)(q9,{onClick:()=>{c?o?.unpin(u):o?.pin(u)},disabled:c&&!c.isLocalPin,children:[(0,Ke.jsx)(G9,{icon:"pin"}),a(c?"Unpin":"Pin")]}),(0,Ke.jsxs)(d5,{requiredGrants:[jX],children:[(0,Ke.jsxs)(q9,{onClick:()=>{o?.pinForEveryone({user_id:d,session_id:u}).catch((e=>{console.error(`Failed to pin participant ${d}`,e)}))},disabled:c&&!c.isLocalPin,children:[(0,Ke.jsx)(G9,{icon:"pin"}),a("Pin for everyone")]}),(0,Ke.jsxs)(q9,{onClick:()=>{o?.unpinForEveryone({user_id:d,session_id:u}).catch((e=>{console.error(`Failed to unpin participant ${d}`,e)}))},disabled:!c||c.isLocalPin,children:[(0,Ke.jsx)(G9,{icon:"pin"}),a("Unpin for everyone")]})]}),(0,Ke.jsx)(d5,{requiredGrants:[EX],children:(0,Ke.jsxs)(q9,{onClick:()=>o?.blockUser(d),children:[(0,Ke.jsx)(G9,{icon:"not-allowed"}),a("Block")]})}),(0,Ke.jsxs)(d5,{requiredGrants:[PX],children:[p&&(0,Ke.jsxs)(q9,{onClick:()=>o?.muteUser(d,"video"),children:[(0,Ke.jsx)(G9,{icon:"camera-off-outline"}),a("Turn off video")]}),f&&(0,Ke.jsxs)(q9,{onClick:()=>o?.muteUser(d,"screenshare"),children:[(0,Ke.jsx)(G9,{icon:"screen-share-off"}),a("Turn off screen share")]}),h&&(0,Ke.jsxs)(q9,{onClick:()=>o?.muteUser(d,"audio"),children:[(0,Ke.jsx)(G9,{icon:"no-audio"}),a("Mute audio")]}),m&&(0,Ke.jsxs)(q9,{onClick:()=>o?.muteUser(d,"screenshare_audio"),children:[(0,Ke.jsx)(G9,{icon:"no-audio"}),a("Mute screen share audio")]})]}),t&&"undefined"!==typeof t.requestFullscreen&&(0,Ke.jsx)(q9,{onClick:()=>r?document.exitFullscreen().catch(console.error):t?.requestFullscreen().catch(console.error),children:a("{{ direction }} fullscreen",{direction:a(r?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&(0,Ke.jsx)(q9,{onClick:()=>n&&!s?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),children:a("{{ direction }} picture-in-picture",{direction:a(s?"Leave":"Enter")})}),(0,Ke.jsxs)(d5,{requiredGrants:[MX],children:[(0,Ke.jsx)(q9,{onClick:g(OX),children:a("Allow audio")}),(0,Ke.jsx)(q9,{onClick:g(DX),children:a("Allow video")}),(0,Ke.jsx)(q9,{onClick:g(NX),children:a("Allow screen sharing")}),(0,Ke.jsx)(q9,{onClick:v(OX),children:a("Disable audio")}),(0,Ke.jsx)(q9,{onClick:v(DX),children:a("Disable video")}),(0,Ke.jsx)(q9,{onClick:v(NX),children:a("Disable screen sharing")})]})]})},J9=e=>null!==e&&!(0,l.isValidElement)(e),Q9=(e,t)=>{if(e)return"function"===typeof e?e(t):void(e.current=t)},X9=((0,l.forwardRef)((function(e,t){let{stream:n,...r}=e;const[i,o]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(i&&n&&n!==i.srcObject)return i.srcObject=n,(G1.isSafari()||G1.isFirefox())&&setTimeout((()=>{i.srcObject=n,i.play().catch((e=>{console.error("Failed to play stream",e)}))}),0),()=>{i.pause(),i.srcObject=null}}),[n,i]),(0,Ke.jsx)("video",{autoPlay:!0,playsInline:!0,...r,ref:e=>{Q9(t,e),o(e)}})})),(0,l.forwardRef)((function(e,t){let{participant:n,style:r,children:i}=e;const[o,s]=(0,l.useState)(!1),a=n.name||n.userId;return(0,Ke.jsxs)("div",{className:"str-video__video-placeholder",style:r,ref:t,children:[(!n.image||o)&&(a?(0,Ke.jsx)(Z9,{name:a}):(0,Ke.jsx)("div",{className:"str-video__video-placeholder__no-video-label",children:i})),n.image&&!o&&(0,Ke.jsx)("img",{onError:()=>s(!0),alt:a,className:"str-video__video-placeholder__avatar",src:n.image})]})}))),Z9=e=>{const{name:t}=e,n=t.split(" ").slice(0,2).map((e=>e[0])).join("");return(0,Ke.jsx)("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},e8=(0,l.forwardRef)((function(e,t){const{t:n}=X3();return(0,Ke.jsx)(X9,{ref:t,...e,children:n("Video is disabled")})})),t8=(0,l.forwardRef)((function(e,t){const{t:n}=X3();return(0,Ke.jsx)(X9,{ref:t,...e,children:n("Video is playing in a popup")})})),n8=e=>{let{enabled:t=!0,mirror:n,trackType:r,participant:i,className:o,VideoPlaceholder:s=e8,PictureInPicturePlaceholder:a=t8,refs:c,...u}=e;const{sessionId:d,videoStream:h,screenShareStream:p,viewportVisibilityState:f,isLocalParticipant:m,userId:g}=i,v=V3(),[y,b]=(0,l.useState)(null),[w,x]=(0,l.useState)(!0),[S,C]=(0,l.useState)(!0),_=K9(y??void 0),k="videoTrack"===r?h:"screenShareTrack"===r?p:void 0;if((0,l.useLayoutEffect)((()=>{if(!v||!y||"none"===r)return;const e=v.bindVideoElement(y,d,r);return()=>{e?.()}}),[v,r,d,y]),(0,l.useEffect)((()=>{if(!k||!y)return;const[e]=k.getVideoTracks();if(!e)return;const t=()=>{x(y.paused);const{width:t=0,height:n=0}=e.getSettings();C(t>=n)};return x(y.paused),y.addEventListener("play",t),y.addEventListener("pause",t),e.addEventListener("unmute",t),()=>{y.removeEventListener("play",t),y.removeEventListener("pause",t),e.removeEventListener("unmute",t),x(!0)}}),[k,y]),!v)return null;const T="videoTrack"===r?x1(i):"screenShareTrack"===r&&C1(i),A="none"===r||f?.[r]===E0.INVISIBLE,E=!t||!T||A,I=void 0===n?m&&"videoTrack"===r:n,R="screenShareTrack"===r;return(0,Ke.jsxs)(Ke.Fragment,{children:[!E&&(0,Ke.jsx)("video",{...u,className:(0,Ue.A)("str-video__video",o,{"str-video__video--not-playing":w,"str-video__video--tall":!S,"str-video__video--mirror":I,"str-video__video--screen-share":R}),"data-user-id":g,"data-session-id":d,ref:e=>{b(e),c?.setVideoElement?.(e)}}),_&&a&&(0,Ke.jsx)(a,{style:{position:"absolute"},participant:i}),(E||w)&&s&&(0,Ke.jsx)(s,{style:{position:"absolute"},participant:i,ref:c?.setVideoPlaceholderElement})]})};n8.displayName="Video";(0,l.createContext)(void 0);const r8=(0,l.forwardRef)((function(e,t){const{icon:n,enabled:r,variant:i,onClick:o,className:s,...a}=e;return(0,Ke.jsx)("button",{className:(0,Ue.A)("str-video__call-controls__button",s,{[`str-video__call-controls__button--variant-${i}`]:i,"str-video__call-controls__button--enabled":r}),onClick:e=>{e.preventDefault(),o?.(e)},ref:t,...a,children:(0,Ke.jsx)(G9,{icon:n})})})),i8=(0,l.forwardRef)((function(e,t){let{disabled:n,caption:r,children:i,className:o,active:s,Menu:a,menuPlacement:l,menuOffset:c,title:u,ToggleMenuButton:d=o8,variant:h,onClick:p,onMenuToggle:f,...m}=e;return(0,Ke.jsxs)("div",{className:(0,Ue.A)("str-video__composite-button",o,{"str-video__composite-button--caption":r,"str-video__composite-button--menu":a}),title:u,ref:t,children:[(0,Ke.jsxs)("div",{className:(0,Ue.A)("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":s,"str-video__composite-button__button-group--active-primary":s&&"primary"===h,"str-video__composite-button__button-group--active-secondary":s&&"secondary"===h,"str-video__composite-button__button-group--disabled":n}),children:[(0,Ke.jsx)("button",{type:"button",className:"str-video__composite-button__button",onClick:e=>{e.preventDefault(),p?.(e)},disabled:n,...m,children:i}),a&&(0,Ke.jsx)(W9,{offset:c,placement:l,ToggleButton:d,onToggle:f,children:J9(a)?(0,Ke.jsx)(a,{}):a})]}),r&&(0,Ke.jsx)("div",{className:"str-video__composite-button__caption",children:r})]})})),o8=(0,l.forwardRef)((function(e,t){let{menuShown:n}=e;return(0,Ke.jsx)(r8,{className:(0,Ue.A)("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":n}),icon:n?"caret-down":"caret-up",ref:t})})),s8=e=>{const{isVisible:t,message:n,children:r,visibilityTimeout:i,resetIsVisible:o,placement:s="top",iconClassName:a="str-video__notification__icon",close:c}=e,{refs:u,x:d,y:h,strategy:p}=U9({placement:s,strategy:"absolute"});return(0,l.useEffect)((()=>{if(!t||!i||!o)return;const e=setTimeout((()=>{o()}),i);return()=>clearTimeout(e)}),[t,o,i]),(0,Ke.jsxs)("div",{ref:u.setReference,children:[t&&(0,Ke.jsxs)("div",{className:"str-video__notification",ref:u.setFloating,style:{position:p,top:h??0,left:d??0,overflowY:"auto"},children:[a&&(0,Ke.jsx)("i",{className:a}),(0,Ke.jsx)("span",{className:"str-video__notification__message",children:n}),c?(0,Ke.jsx)("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:c}):null]}),r]})},a8=e=>{let{children:t,referenceElement:n,tooltipClassName:r,tooltipPlacement:i="top",visible:o=!1}=e;const s=(0,l.useRef)(null),{refs:a,x:c,y:u,strategy:d,context:h}=U9({placement:i,strategy:"absolute",middleware:[(p={element:s},{...n9(p),options:[p,f]})]});var p,f;return(0,l.useEffect)((()=>{a.setReference(n)}),[n,a]),o?(0,Ke.jsxs)("div",{className:(0,Ue.A)("str-video__tooltip",r),ref:a.setFloating,style:{position:d,top:u??0,left:c??0},children:[(0,Ke.jsx)(v9,{ref:s,context:h,fill:"var(--str-video__tooltip--background-color)"}),t]}):null},l8=e=>{let{title:t,tooltipClassName:n,tooltipPlacement:r,tooltipDisabled:i,...o}=e;const{handleMouseEnter:s,handleMouseLeave:a,tooltipVisible:c}=function(){let{onMouseEnter:e,onMouseLeave:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,l.useState)(!1),i=(0,l.useCallback)((t=>{r(!0),e?.(t)}),[e]),o=(0,l.useCallback)((e=>{r(!1),t?.(e)}),[t]);return{handleMouseEnter:i,handleMouseLeave:o,tooltipVisible:n}}(),[u,d]=(0,l.useState)(null),h=!i&&Boolean(t)&&c;return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(a8,{referenceElement:u,visible:h,tooltipClassName:n,tooltipPlacement:r,children:t||""}),(0,Ke.jsx)("div",{ref:d,onMouseEnter:s,onMouseLeave:a,...o})]})},c8=((0,l.forwardRef)((function(e,t){return(0,Ke.jsx)(i8,{ref:t,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:(0,Ke.jsx)(G9,{icon:"recording-off"})})})),{":like:":"\ud83d\udc4d",":raise-hand:":"\u270b",":fireworks:":"\ud83c\udf89",":dislike:":"\ud83d\udc4e",":heart:":"\u2764\ufe0f",":smile:":"\ud83d\ude00"}),u8=e=>{let{participant:{reaction:t,sessionId:n},hideAfterTimeoutInMs:r=5500,emojiReactionMap:i=c8}=e;const o=V3();if((0,l.useEffect)((()=>{if(!o||!t)return;const e=setTimeout((()=>{o.resetReaction(n)}),r);return()=>{clearTimeout(e)}}),[o,r,t,n]),!t)return null;const{emoji_code:s}=t;return(0,Ke.jsx)("div",{className:"str-video__reaction",children:(0,Ke.jsx)("span",{className:"str-video__reaction__emoji",children:s&&i[s]})})};(0,l.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=X3();return(0,Ke.jsx)(l8,{title:r("Reactions"),tooltipDisabled:n,children:(0,Ke.jsx)(i8,{ref:t,active:n,variant:"primary",children:(0,Ke.jsx)(G9,{icon:"reactions"})})})}));(0,l.createContext)({}),(0,l.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=X3();return(0,Ke.jsx)(r8,{className:(0,Ue.A)("str-video__device-settings__button",{"str-video__device-settings__button--active":n}),title:r("Toggle device menu"),icon:"device-settings",ref:t})})),(0,l.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=X3();return(0,Ke.jsx)(l8,{title:r("Leave call"),tooltipDisabled:n,children:(0,Ke.jsx)(r8,{icon:n?"close":"call-end",variant:n?"active":"danger","data-testid":"leave-call-button",ref:t})})})),(0,l.lazy)((()=>n.e(748).then(n.bind(n,748))));var d8;!function(e){e.GOOD="Good",e.OK="Ok",e.BAD="Bad"}(d8||(d8={}));(0,l.forwardRef)((function(e,t){const{t:n}=X3(),{caption:r,menuShown:i}=e;return(0,Ke.jsx)(i8,{ref:t,active:i,caption:r,title:r||n("Statistics"),"data-testid":"stats-button",children:(0,Ke.jsx)(G9,{icon:"stats"})})})),(0,l.forwardRef)((function(e,t){return(0,Ke.jsx)(r8,{enabled:e.menuShown,icon:"ellipsis",ref:t})}));(0,l.forwardRef)((function(e,t){return(0,Ke.jsx)(r8,{enabled:e.menuShown,icon:"filter",ref:t})})),(0,l.createContext)(null),m1.JOINING,m1.RINGING,m1.MIGRATING,m1.RECONNECTING,m1.RECONNECTING_FAILED,m1.OFFLINE,m1.IDLE,m1.UNKNOWN,m1.JOINED,m1.LEFT,(0,l.forwardRef)((function(e,t){const{permissionRequests:n,handleUpdatePermission:r,...i}=e,{t:o}=X3();return(0,Ke.jsx)("div",{className:"str-video__permission-requests-list",ref:t,...i,children:n.map(((e,t)=>{const{user:n,permissions:i}=e;return(0,Ke.jsx)(l.Fragment,{children:i.map((t=>(0,Ke.jsxs)("div",{className:"str-video__permission-request",children:[(0,Ke.jsx)("div",{className:"str-video__permission-request__message",children:p8(n.name||n.id,t,o)}),(0,Ke.jsx)(h8,{className:"str-video__permission-request__button--allow",type:"button",onClick:r(e,"grant"),children:o("Allow")}),(0,Ke.jsx)(h8,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(e,"revoke"),children:o("Revoke")}),(0,Ke.jsx)(h8,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(e,"dismiss"),children:o("Dismiss")})]},t)))},`${n.id}/${t}`)}))})}));const h8=e=>{const{className:t,...n}=e;return(0,Ke.jsx)("button",{className:(0,Ue.A)("str-video__permission-request__button",t),...n})},p8=(e,t,n)=>{switch(t){case OX:return n("{{ userName }} is requesting to speak",{userName:e});case DX:return n("{{ userName }} is requesting to share their camera",{userName:e});case NX:return n("{{ userName }} is requesting to present their screen",{userName:e});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:e,permission:t})}},f8=(0,l.forwardRef)((function(e,t){return(0,Ke.jsx)(r8,{enabled:e.menuShown,icon:"ellipsis",ref:t})})),m8=()=>{const e=V3(),{t:t}=X3();return(0,Ke.jsxs)("div",{className:"str-video__screen-share-overlay",children:[(0,Ke.jsx)(G9,{icon:"screen-share-off"}),(0,Ke.jsx)("span",{className:"str-video__screen-share-overlay__title",children:t("You are presenting your screen")}),(0,Ke.jsxs)("button",{onClick:()=>{e?.screenShare.disable()},className:"str-video__screen-share-overlay__button",children:[(0,Ke.jsx)(G9,{icon:"close"})," ",t("Stop Screen Sharing")]})]})},g8=e=>{let{indicatorsVisible:t=!0,menuPlacement:n="bottom-start",showMenuButton:r=!0,ParticipantActionsContextMenu:i=Y9}=e;const{participant:o,trackType:s}=F9(),a=C1(o);return o.isLocalParticipant&&a&&"screenShareTrack"===s?(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(m8,{}),(0,Ke.jsx)(v8,{indicatorsVisible:t})]}):(0,Ke.jsxs)(Ke.Fragment,{children:[r&&(0,Ke.jsx)(W9,{strategy:"fixed",placement:n,ToggleButton:f8,children:(0,Ke.jsx)(i,{})}),(0,Ke.jsx)(u8,{participant:o}),(0,Ke.jsx)(v8,{indicatorsVisible:t})]})},v8=e=>{let{indicatorsVisible:t=!0}=e;const{participant:n}=F9(),{isLocalParticipant:r,connectionQuality:i,pin:o,sessionId:s,name:a,userId:l}=n,c=V3(),{t:u}=X3(),d=!!i&&TZ.ConnectionQuality[i].toLowerCase(),h=S1(n),p=x1(n),f=!!o&&o.isLocalPin;return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)("div",{className:"str-video__participant-details",children:(0,Ke.jsxs)("span",{className:"str-video__participant-details__name",children:[a||l,t&&!h&&(0,Ke.jsx)("span",{className:"str-video__participant-details__name--audio-muted"}),t&&!p&&(0,Ke.jsx)("span",{className:"str-video__participant-details__name--video-muted"}),t&&f&&(0,Ke.jsx)("span",{title:u("Unpin"),onClick:()=>c?.unpin(s),className:"str-video__participant-details__name--pinned"}),t&&(0,Ke.jsx)(y8,{})]})}),t&&(0,Ke.jsx)(s8,{isVisible:r&&i===TZ.ConnectionQuality.POOR,message:u("Poor connection quality"),children:d&&(0,Ke.jsx)("span",{className:(0,Ue.A)("str-video__participant-details__connection-quality",`str-video__participant-details__connection-quality--${d}`),title:d})})]})},y8=()=>{const{participant:e}=F9(),{isSpeaking:t,isDominantSpeaker:n}=e;return(0,Ke.jsxs)("span",{className:(0,Ue.A)("str-video__speech-indicator",t&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[(0,Ke.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,Ke.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,Ke.jsx)("span",{className:"str-video__speech-indicator__bar"})]})},b8=(0,l.forwardRef)((function(e,t){let{participant:n,trackType:r="videoTrack",mirror:i,muteAudio:o,refs:{setVideoElement:s,setVideoPlaceholderElement:a}={},className:c,VideoPlaceholder:u,PictureInPicturePlaceholder:d,ParticipantViewUI:h=g8}=e;const{isLocalParticipant:p,isSpeaking:f,isDominantSpeaker:m,sessionId:g}=n,v=S1(n),y=x1(n),b=_1(n),[w,x]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[_,k]=(0,l.useState)(null);(e=>{let{trackedElement:t,dynascaleManager:n,sessionId:r,trackType:i}=e;const o=V3(),s=n??o?.dynascaleManager;(0,l.useEffect)((()=>{if(!t||!s||!o||"none"===i)return;const e=s.trackElementVisibility(t,r,i);return()=>{e()}}),[t,s,o,r,i])})({sessionId:g,trackedElement:w,trackType:r});const{useIncomingVideoSettings:T}=u5(),{isParticipantVideoEnabled:A}=T(),E=(0,l.useMemo)((()=>({participant:n,participantViewElement:w,videoElement:S,videoPlaceholderElement:_,trackType:r})),[S,_,n,w,r]),I=(0,l.useMemo)((()=>({setVideoElement:e=>{s?.(e),C(e)},setVideoPlaceholderElement:e=>{a?.(e),k(e)}})),[s,a]);return(0,Ke.jsx)("div",{"data-testid":"participant-view",ref:e=>{Q9(t,e),x(e)},className:(0,Ue.A)("str-video__participant-view",m&&"str-video__participant-view--dominant-speaker",f&&"str-video__participant-view--speaking",!y&&"str-video__participant-view--no-video",!v&&"str-video__participant-view--no-audio",c),children:(0,Ke.jsxs)(L9.Provider,{value:E,children:[!p&&!o&&(0,Ke.jsxs)(Ke.Fragment,{children:[v&&(0,Ke.jsx)(D9,{participant:n,trackType:"audioTrack"}),b&&(0,Ke.jsx)(D9,{participant:n,trackType:"screenShareAudioTrack"})]}),(0,Ke.jsx)(n8,{VideoPlaceholder:u,PictureInPicturePlaceholder:d,participant:n,trackType:r,refs:I,enabled:p||"videoTrack"!==r||A(n.sessionId),mirror:i,autoPlay:!0}),J9(h)?(0,Ke.jsx)(h,{}):h]})})}));b8.displayName="ParticipantView";const w8=e=>{const{call:t,children:n}=e;return(0,Ke.jsx)($3.Provider,{value:t,children:n})};w8.displayName="StreamCall";const x8={en:{Joining:"Joining",Mic:"Mic","No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:"Ringing","Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:"Speakers",Video:"Video","You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:"Live","You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:"Reactions",Statistics:"Statistics","You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:"Invite",Join:"Join",You:"You",Me:"Me",Unknown:"Unknown","Toggle device menu":"Toggle device menu",Default:"Default","Call Recordings":"Call Recordings",Refresh:"Refresh","Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:"Allow",Revoke:"Revoke",Dismiss:"Dismiss","Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:"Pinned",Unpin:"Unpin",Pin:"Pin","Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:"Block","Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:"Enter",Leave:"Leave","Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:"Participants",Anonymous:", and ({{ count }}) anonymous","No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"}},S8=e=>(0,Ke.jsx)(e5,{translationsOverrides:x8,...e});function C8(e,t){return"$and"in t?t.$and.every((t=>C8(e,t))):"$or"in t?t.$or.some((t=>C8(e,t))):"$not"in t?!C8(e,t.$not):function(e,t){let n=!0;for(const r of Object.keys(t)){const i=t[r],o=i&&"object"===typeof i,s=e[r];if(o&&"$eq"in i){n&&(n=i.$eq===s)}else if(o&&"$neq"in i){n&&(n=i.$neq!==s)}else if(o&&"$in"in i){n&&(n=i.$in.includes(s))}else if(o&&"$contains"in i)if(Array.isArray(s)){const e=i;n&&(n=s.includes(e.$contains))}else n=!1;else{n&&(n=i===s)}if(!n)return!1}return!0}(e,t)}S8.displayName="StreamVideo";const _8=e=>{let{excludeLocalParticipant:t=!1,filterParticipants:n}=e;const{useParticipants:r,useRemoteParticipants:i}=u5(),o=r(),s=i();return(0,l.useMemo)((()=>{const e=t?s:o;return n?k8(e,n):e}),[o,s,t,n])},k8=(e,t)=>{const n="function"===typeof t?t:e=>C8({userId:e.userId,isSpeaking:e.isSpeaking,isDominantSpeaker:e.isDominantSpeaker,name:e.name,roles:e.roles,isPinned:k1(e),hasVideo:x1(e),hasAudio:S1(e)},t);return e.filter(n)},T8=e=>{(0,l.useEffect)((()=>{if(e)return e.setSortParticipantsBy(F1),()=>{A8(e)}}),[e])},A8=e=>{const t=c4.get(e.type);e.setSortParticipantsBy(t.options.sortParticipantsBy||M1)},E8=(e,t)=>e.isLocalParticipant?1:t.isLocalParticipant?-1:0,I8=e=>{const{useParticipants:t,useRemoteParticipants:n,useHasOngoingScreenShare:r}=u5(),i=V3(),o=t(),[s]=o,a=n(),l=r(),c=l?o.find(C1):void 0;T8(i);const u=(0,Ke.jsx)(R8,{showParticipantCount:e.showParticipantCount,showDuration:e.showDuration,showLiveBadge:e.showLiveBadge,showSpeakerName:e.showSpeakerName}),{floatingParticipantProps:d,muted:h}=e,p=l&&(0,Ke.jsx)(R8,{showParticipantCount:d?.showParticipantCount??!1,showDuration:d?.showDuration??!1,showLiveBadge:d?.showLiveBadge??!1,showSpeakerName:d?.showSpeakerName??!0});return(0,Ke.jsxs)("div",{className:"str-video__livestream-layout__wrapper",children:[!h&&(0,Ke.jsx)(M9,{participants:a}),l&&c&&(0,Ke.jsx)(b8,{className:"str-video__livestream-layout__screen-share",participant:c,ParticipantViewUI:u,trackType:"screenShareTrack",muteAudio:!0}),s&&(0,Ke.jsx)(b8,{className:(0,Ue.A)(l&&(0,Ue.A)("str-video__livestream-layout__floating-participant",`str-video__livestream-layout__floating-participant--${d?.position??"top-right"}`)),participant:s,ParticipantViewUI:p||u,mirror:!1!==e.mirrorLocalParticipantVideo&&void 0,muteAudio:!0})]})},R8=e=>{const{enableFullScreen:t=!0,showParticipantCount:n=!0,showDuration:r=!0,showLiveBadge:i=!0,showSpeakerName:o=!1}=e,{participant:s}=F9(),{useParticipantCount:a}=u5(),l=a(),c=P8(),u=j8(),{t:d}=X3();return(0,Ke.jsx)("div",{className:"str-video__livestream-layout__overlay",children:(0,Ke.jsxs)("div",{className:"str-video__livestream-layout__overlay__bar",children:[i&&(0,Ke.jsx)("span",{className:"str-video__livestream-layout__live-badge",children:d("Live")}),n&&(0,Ke.jsx)("span",{className:"str-video__livestream-layout__viewers-count",children:l}),o&&(0,Ke.jsx)("span",{className:"str-video__livestream-layout__speaker-name",title:s.name||s.userId||"",children:s.name||s.userId||""}),r&&(0,Ke.jsx)("span",{className:"str-video__livestream-layout__duration",children:N8(c)}),t&&(0,Ke.jsx)("span",{className:"str-video__livestream-layout__go-fullscreen",onClick:u})]})})};I8.displayName="LivestreamLayout";const P8=()=>{const{useIsCallLive:e,useCallSession:t}=u5(),n=e(),r=t(),[i,o]=(0,l.useState)((()=>{if(!r||!r.live_started_at)return 0;const e=new Date(r.live_started_at),t=new Date;return Math.floor((t.getTime()-e.getTime())/1e3)}));return(0,l.useEffect)((()=>{if(!n)return;const e=setInterval((()=>{o((e=>e+1))}),1e3);return()=>{clearInterval(e)}}),[n]),i},j8=()=>{const{participantViewElement:e}=F9(),[t,n]=(0,l.useState)(!1);return(0,l.useCallback)((()=>{t?document.exitFullscreen().then((()=>{n(!1)})):e?.requestFullscreen().then((()=>{n(!0)}))}),[t,e])},N8=e=>{const t=Math.floor(e/86400),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60;return`${t?t+" ":""}${n?n+":":""}${r<10?"0":""}${r}:${i<10?"0":""}${i}`},O8=16,D8=e=>{let{group:t,mirror:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i,ParticipantViewUI:o}=e;return(0,Ke.jsx)("div",{className:(0,Ue.A)("str-video__paginated-grid-layout__group",{"str-video__paginated-grid-layout--one":1===t.length,"str-video__paginated-grid-layout--two-four":t.length>=2&&t.length<=4,"str-video__paginated-grid-layout--five-nine":t.length>=5&&t.length<=9}),children:t.map((e=>(0,Ke.jsx)(b8,{participant:e,muteAudio:!0,mirror:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i,ParticipantViewUI:o},e.sessionId)))})};(e=>{const{groupSize:t=(e.groupSize||0)>0&&e.groupSize||O8,excludeLocalParticipant:n=!1,filterParticipants:r,mirrorLocalParticipantVideo:i=!0,pageArrowsVisible:o=!0,VideoPlaceholder:s,ParticipantViewUI:a=g8,PictureInPicturePlaceholder:c,muted:u}=e,[d,h]=(0,l.useState)(0),[p,f]=(0,l.useState)(null),m=V3(),{useRemoteParticipants:g}=u5(),v=g(),y=_8({excludeLocalParticipant:n,filterParticipants:r});T8(m),(0,l.useEffect)((()=>{if(!p||!m)return;const e=m.setViewport(p);return()=>e()}),[p,m]);const b=(0,l.useMemo)((()=>((e,t)=>{const n=Math.ceil(e.length/t);return Array.from({length:n},((n,r)=>e.slice(t*r,t*r+t)))})(y,t)),[y,t]),w=b.length;(0,l.useEffect)((()=>{d>w-1&&h(Math.max(0,w-1))}),[d,w]);const x=b[d],S=!!i&&void 0;return m?(0,Ke.jsxs)("div",{className:"str-video__paginated-grid-layout__wrapper",ref:f,children:[!u&&(0,Ke.jsx)(M9,{participants:v}),(0,Ke.jsxs)("div",{className:"str-video__paginated-grid-layout",children:[o&&w>1&&(0,Ke.jsx)(r8,{icon:"caret-left",disabled:0===d,onClick:()=>h((e=>Math.max(0,e-1)))}),x&&(0,Ke.jsx)(D8,{group:x,mirror:S,VideoPlaceholder:s,ParticipantViewUI:a,PictureInPicturePlaceholder:c}),o&&w>1&&(0,Ke.jsx)(r8,{disabled:d===w-1,icon:"caret-right",onClick:()=>h((e=>Math.min(w-1,e+1)))})]})]}):null}).displayName="PaginatedGridLayout";const M8=()=>(0,Ke.jsx)(g8,{menuPlacement:"top-end"});(e=>{let{ParticipantViewUIBar:t=M8,ParticipantViewUISpotlight:n=g8,VideoPlaceholder:r,PictureInPicturePlaceholder:i,participantsBarPosition:o="bottom",participantsBarLimit:s,mirrorLocalParticipantVideo:a=!0,excludeLocalParticipant:c=!1,filterParticipants:u,pageArrowsVisible:d=!0,muted:h}=e;const p=V3(),{useParticipants:f,useRemoteParticipants:m}=u5(),g=f(),v=m(),[y,...b]=_8({excludeLocalParticipant:c,filterParticipants:u}),[w,x]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[_,k]=(0,l.useState)(null),T=y&&C1(y),A=((e,t,n)=>{const[r,i]=(0,l.useState)({vertical:"number"===typeof n?n:null,horizontal:"number"===typeof n?n:null});return(0,l.useEffect)((()=>{if(!t||!e||"number"===typeof n||"undefined"===typeof n)return;let r=null,o=null;const s=new ResizeObserver(((n,s)=>{if(n.length>1){const e=t.firstChild;e&&(o=e.clientHeight,r=e.clientWidth,s.unobserve(t))}if(null===o||null===r)return;const a=Math.floor(e.clientHeight/o),l=Math.floor(e.clientWidth/r);i((e=>e.vertical!==a||e.horizontal!==l?{vertical:a,horizontal:l}:e))}));return s.observe(e),s.observe(t),()=>{s.disconnect()}}),[t,n,e]),r})(_,S,s),E="left"===o||"right"===o,I="top"===o||"bottom"===o;(0,l.useEffect)((()=>{if(!w||!p)return;const e=p.setViewport(w);return()=>e()}),[w,p]);const R=2===g.length;((e,t)=>{(0,l.useEffect)((()=>{if(e)return t?e.setSortParticipantsBy(b1(E1,E8)):e.setSortParticipantsBy(L1),()=>{A8(e)}}),[e,t])})(p,R);let P=b;const j=E?A.vertical:A.horizontal;"undefined"!==typeof s&&null!==j&&(P=b.slice(0,j-(T?1:0)));const N=!!a&&void 0;if(!p)return null;const O=o&&(P.length>0||T);return(0,Ke.jsxs)("div",{className:"str-video__speaker-layout__wrapper",children:[!h&&(0,Ke.jsx)(M9,{participants:v}),(0,Ke.jsxs)("div",{className:(0,Ue.A)("str-video__speaker-layout",o&&`str-video__speaker-layout--variant-${o}`),children:[(0,Ke.jsx)("div",{className:"str-video__speaker-layout__spotlight",children:y&&(0,Ke.jsx)(b8,{participant:y,muteAudio:!0,mirror:N,trackType:T?"screenShareTrack":"videoTrack",ParticipantViewUI:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i})}),O&&(0,Ke.jsxs)("div",{ref:k,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[(0,Ke.jsx)("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:x,children:(0,Ke.jsxs)("div",{ref:C,className:"str-video__speaker-layout__participants-bar",children:[T&&(0,Ke.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,Ke.jsx)(b8,{participant:y,ParticipantViewUI:t,VideoPlaceholder:r,PictureInPicturePlaceholder:i,mirror:N,muteAudio:!0})},y.sessionId),P.map((e=>(0,Ke.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,Ke.jsx)(b8,{participant:e,ParticipantViewUI:t,VideoPlaceholder:r,PictureInPicturePlaceholder:i,mirror:N,muteAudio:!0})},e.sessionId)))]})}),d&&E&&(0,Ke.jsx)(F8,{scrollWrapper:w}),d&&I&&(0,Ke.jsx)(L8,{scrollWrapper:w})]})]})]})}).displayName="SpeakerLayout";const L8=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,r]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollWidth>n.clientWidth?n.scrollLeft<=t?r("start"):Math.abs(n.scrollWidth-n.scrollLeft-n.clientWidth)<=t?r("end"):void r("between"):r(null)},i=new ResizeObserver(n);return i.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),i.disconnect()}}),[e,t]),n}(t);return(0,Ke.jsxs)(Ke.Fragment,{children:[n&&"start"!==n&&(0,Ke.jsx)(r8,{onClick:()=>{t?.scrollBy({left:-150,behavior:"smooth"})},icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),n&&"end"!==n&&(0,Ke.jsx)(r8,{onClick:()=>{t?.scrollBy({left:150,behavior:"smooth"})},icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},F8=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,r]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollHeight>n.clientHeight?n.scrollTop<=t?r("top"):Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<=t?r("bottom"):void r("between"):r(null)},i=new ResizeObserver(n);return i.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),i.disconnect()}}),[e,t]),n}(t);return(0,Ke.jsxs)(Ke.Fragment,{children:[n&&"top"!==n&&(0,Ke.jsx)(r8,{onClick:()=>{t?.scrollBy({top:-150,behavior:"smooth"})},icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),n&&"bottom"!==n&&(0,Ke.jsx)(r8,{onClick:()=>{t?.scrollBy({top:150,behavior:"smooth"})},icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},U8=e=>{const{t:t}=X3(),{excludeLocalParticipant:n=!1,filterParticipants:r,mirrorLocalParticipantVideo:i=!0,VideoPlaceholder:o,ParticipantViewUI:s=g8}=e,[a,c]=(0,l.useState)(null),u=V3(),d=_8({excludeLocalParticipant:n,filterParticipants:r}),h=d.find((e=>C1(e)));T8(u),(0,l.useEffect)((()=>{if(a&&u)return u.setViewport(a)}),[a,u]);const p=!!i&&void 0;return u?(0,Ke.jsxs)("div",{className:"str-video__pip-layout",ref:c,children:[h&&(h.isLocalParticipant?(0,Ke.jsxs)("div",{className:"str-video__pip-screen-share-local",children:[(0,Ke.jsx)(G9,{icon:"screen-share-off"}),(0,Ke.jsx)("span",{className:"str-video__pip-screen-share-local__title",children:t("You are presenting your screen")})]}):(0,Ke.jsx)(b8,{participant:h,trackType:"screenShareTrack",muteAudio:!0,mirror:!1,VideoPlaceholder:o,ParticipantViewUI:s})),d.map((e=>(0,Ke.jsx)(b8,{participant:e,muteAudio:!0,mirror:p,VideoPlaceholder:o,ParticipantViewUI:s},e.sessionId)))]}):null};U8.displayName="PipLayout.Pip";const $8=()=>{const{useRemoteParticipants:e}=u5(),t=e();return(0,Ke.jsx)(M9,{participants:t})};$8.displayName="PipLayout.Host";const[V8,B8,z8]="1.15.0".split(".");var W8;W8={type:TZ.SdkType.REACT,major:V8,minor:B8,patch:z8},r2=W8;var H8=n(4901),q8=n.n(H8),G8=n(949),K8=n.n(G8),Y8=n(403),J8=n.n(Y8),Q8=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Q8||{}),X8={rel:["amphtml","canonical","alternate"]},Z8={type:["application/ld+json"]},e7={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},t7=Object.values(Q8),n7={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},r7=Object.entries(n7).reduce(((e,t)=>{let[n,r]=t;return e[r]=n,e}),{}),i7="data-rh",o7="defaultTitle",s7="defer",a7="encodeSpecialCharacters",l7="onChangeClientState",c7="titleTemplate",u7="prioritizeSeoTags",d7=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},h7=e=>{let t=d7(e,"title");const n=d7(e,c7);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,(()=>t));const r=d7(e,o7);return t||r||void 0},p7=e=>d7(e,l7)||(()=>{}),f7=(e,t)=>t.filter((t=>"undefined"!==typeof t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),m7=(e,t)=>t.filter((e=>"undefined"!==typeof e.base)).map((e=>e.base)).reverse().reduce(((t,n)=>{if(!t.length){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}}return t}),[]),g7=(e,t,n)=>{const r={};return n.filter((t=>{return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&(n=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"===typeof console.warn&&console.warn(n)),!1);var n})).map((t=>t[e])).reverse().reduce(((e,n)=>{const i={};n.filter((e=>{let n;const o=Object.keys(e);for(let r=0;r<o.length;r+=1){const i=o[r],s=i.toLowerCase();-1===t.indexOf(s)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===s&&"stylesheet"===e[s].toLowerCase()||(n=s),-1===t.indexOf(i)||"innerHTML"!==i&&"cssText"!==i&&"itemprop"!==i||(n=i)}if(!n||!e[n])return!1;const s=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][s]&&(i[n][s]=!0,!0)})).reverse().forEach((t=>e.push(t)));const o=Object.keys(i);for(let t=0;t<o.length;t+=1){const e=o[t],n={...r[e],...i[e]};r[e]=n}return e}),[]).reverse()},v7=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},y7=e=>Array.isArray(e)?e.join(""):e,b7=(e,t)=>Array.isArray(e)?e.reduce(((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e)),{priority:[],default:[]}):{default:e,priority:[]},w7=(e,t)=>({...e,[t]:void 0}),x7=["noscript","script","style"],S7=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},C7=e=>Object.keys(e).reduce(((t,n)=>{const r="undefined"!==typeof e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r}),""),_7=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(((t,n)=>(t[n7[n]||n]=e[n],t)),t)},k7=(e,t)=>t.map(((t,n)=>{const r={key:n,[i7]:!0};return Object.keys(t).forEach((e=>{const n=n7[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[n]=t[e]})),l.createElement(e,r)})),T7=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const r=_7(n,{key:t,[i7]:!0});return[l.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,r)=>{const i=C7(n),o=y7(t);return i?`<${e} ${i7}="true" ${i}>${S7(o,r)}</${e}>`:`<${e} ${i7}="true">${S7(o,r)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>_7(t),toString:()=>C7(t)};default:return{toComponent:()=>k7(e,t),toString:()=>function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.reduce(((t,r)=>{const i=r,o=Object.keys(i).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const r="undefined"===typeof i[t]?t:`${t}="${S7(i[t],n)}"`;return e?`${e} ${r}`:r}),""),s=i.innerHTML||i.cssText||"",a=-1===x7.indexOf(e);return`${t}<${e} ${i7}="true" ${o}${a?"/>":`>${s}</${e}>`}`}),"")}(e,t,n)}}},A7=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:a="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:h}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:h}=(e=>{let{metaTags:t,linkTags:n,scriptTags:r,encode:i}=e;const o=b7(t,e7),s=b7(n,X8),a=b7(r,Z8);return{priorityMethods:{toComponent:()=>[...k7("meta",o.priority),...k7("link",s.priority),...k7("script",a.priority)],toString:()=>`${T7("meta",o.priority,i)} ${T7("link",s.priority,i)} ${T7("script",a.priority,i)}`},metaTags:o.default,linkTags:s.default,scriptTags:a.default}})(e)),{priority:p,base:T7("base",t,r),bodyAttributes:T7("bodyAttributes",n,r),htmlAttributes:T7("htmlAttributes",i,r),link:T7("link",u,r),meta:T7("meta",d,r),noscript:T7("noscript",o,r),script:T7("script",h,r),style:T7("style",s,r),title:T7("title",{title:a,titleAttributes:l},r)}},E7=[],I7=!("undefined"===typeof window||!window.document||!window.document.createElement),R7=class{instances=[];canUseDOM=(()=>I7)();context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?E7:this.instances,add:e=>{(this.canUseDOM?E7:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?E7:this.instances).indexOf(e);(this.canUseDOM?E7:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=A7({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},P7=l.createContext({}),j7=class e extends l.Component{static canUseDOM=(()=>I7)();helmetData;constructor(t){super(t),this.helmetData=new R7(this.props.context||{},e.canUseDOM)}render(){return l.createElement(P7.Provider,{value:this.helmetData.value},this.props.children)}},N7=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${i7}]`),i=[].slice.call(r),o=[];let s;return t&&t.length&&t.forEach((t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const r=e,i="undefined"===typeof t[r]?"":t[r];n.setAttribute(e,i)}n.setAttribute(i7,"true"),i.some(((e,t)=>(s=t,n.isEqualNode(e))))?i.splice(s,1):o.push(n)})),i.forEach((e=>e.parentNode?.removeChild(e))),o.forEach((e=>n.appendChild(e))),{oldTags:i,newTags:o}},O7=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(i7),i=r?r.split(","):[],o=[...i],s=Object.keys(t);for(const a of s){const e=t[a]||"";n.getAttribute(a)!==e&&n.setAttribute(a,e),-1===i.indexOf(a)&&i.push(a);const r=o.indexOf(a);-1!==r&&o.splice(r,1)}for(let a=o.length-1;a>=0;a-=1)n.removeAttribute(o[a]);i.length===o.length?n.removeAttribute(i7):n.getAttribute(i7)!==s.join(",")&&n.setAttribute(i7,s.join(","))},D7=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:h}=e;O7("body",r),O7("html",i),((e,t)=>{"undefined"!==typeof e&&document.title!==e&&(document.title=y7(e)),O7("title",t)})(d,h);const p={baseTag:N7("base",n),linkTags:N7("link",o),metaTags:N7("meta",s),noscriptTags:N7("noscript",a),scriptTags:N7("script",c),styleTags:N7("style",u)},f={},m={};Object.keys(p).forEach((e=>{const{newTags:t,oldTags:n}=p[e];t.length&&(f[e]=t),n.length&&(m[e]=p[e].oldTags)})),t&&t(),l(e,f,m)},M7=null,L7=e=>{M7&&cancelAnimationFrame(M7),e.defer?M7=requestAnimationFrame((()=>{D7(e,(()=>{M7=null}))})):(D7(e),M7=null)},F7=class extends l.Component{rendered=!1;shouldComponentUpdate(e){return!J8()(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const r=(i=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:m7(["href"],i),bodyAttributes:f7("bodyAttributes",i),defer:d7(i,s7),encode:d7(i,a7),htmlAttributes:f7("htmlAttributes",i),linkTags:g7("link",["rel","href"],i),metaTags:g7("meta",["name","charset","http-equiv","property","itemprop"],i),noscriptTags:g7("noscript",["innerHTML"],i),onChangeClientState:p7(i),scriptTags:g7("script",["src","innerHTML"],i),styleTags:g7("style",["cssText"],i),title:h7(i),titleAttributes:f7("titleAttributes",i),prioritizeSeoTags:v7(i,u7)});var i;j7.canUseDOM?L7(r):A7&&(n=A7(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},U7=class extends l.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!q8()(w7(this.props,"helmetData"),w7(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach((t=>{n={...n,[t]:e[t]}})),n}warnOnInvalidChildren(e,t){return K8()(t7.some((t=>e.type===t)),"function"===typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${t7.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),K8()(!t||"string"===typeof t||Array.isArray(t)&&!t.some((e=>"string"!==typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return l.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:r,...i}=e.props,o=Object.keys(i).reduce(((e,t)=>(e[r7[t]||t]=i[t],e)),{});let{type:s}=e;switch("symbol"===typeof s?s=s.toString():this.warnOnInvalidChildren(e,r),s){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,o,r);break;default:t=this.mapObjectTypeChildren(e,t,o,r)}})),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof R7)){r=new R7(r.context,!0),delete n.helmetData}return r?l.createElement(F7,{...n,context:r.value}):l.createElement(P7.Consumer,null,(e=>l.createElement(F7,{...n,context:e})))}},$7=n(1397);const V7=[{name:"Classic Light",headerColor:"#F5F5F5",backgroundColor:"#FFFFFF",textColor:"#212121",accentColor:"#1976D2",headerGradient:!1,backgroundGradient:!1},{name:"Classic Dark",headerColor:"#303030",backgroundColor:"#212121",textColor:"#E0E0E0",accentColor:"#90CAF9",headerGradient:!1,backgroundGradient:!1},{name:"Midnight Bloom",headerColor:"#4A00E0",backgroundColor:"#1E1E2F",textColor:"#EAEAEA",accentColor:"#8E2DE2",headerGradient:!0,backgroundGradient:!0},{name:"Sunset Vibes",headerColor:"#FF8C00",backgroundColor:"#FFF3E0",textColor:"#4E342E",accentColor:"#FF5722",headerGradient:!0,backgroundGradient:!1},{name:"Oceanic Calm",headerColor:"#0077B6",backgroundColor:"#E0F7FA",textColor:"#01579B",accentColor:"#00B4D8",headerGradient:!1,backgroundGradient:!1}],B7=["Arial","Verdana","Georgia","Times New Roman","Courier New","Roboto","Open Sans","Lato","Montserrat"],z7=[12,14,16,18,20,24,28,32],W7=()=>{var e,t,n,r,i,o;const{roomId:s}=oe(),{currentUser:a}=_k(),c=ie(),u=IE(),[d,h]=(0,l.useState)(null),[p,f]=(0,l.useState)(!0),[m,g]=(0,l.useState)(null),[v,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[x,S]=(0,l.useState)(""),[C,_]=(0,l.useState)(!1),[k,T]=(0,l.useState)(!1),[A,E]=(0,l.useState)(!1),[I,R]=(0,l.useState)(!1),[P,j]=(0,l.useState)(null),[N,O]=(0,l.useState)([]),[D,M]=(0,l.useState)(null),[L,F]=((0,l.useRef)(null),(0,l.useState)(null)),[U,$]=(0,l.useState)(null),[V,B]=(0,l.useState)(null),[z,W]=(0,l.useState)(!1),[H,q]=(0,l.useState)(!1),[G,K]=(0,l.useState)(0),[Y,J]=(0,l.useState)(!1),[Q,X]=(0,l.useState)(null),Z=(0,l.useRef)(null),[ee,te]=(0,l.useState)(!1),[ne,re]=(0,l.useState)(""),[se,ae]=(0,l.useState)(null),[le,ce]=(0,l.useState)(""),[ue,de]=(0,l.useState)([]),[he,pe]=(0,l.useState)(!1),[fe,me]=(0,l.useState)(null),[ge,ve]=(0,l.useState)(!1),ye=(0,l.useRef)(null),[be,we]=(0,l.useState)(null),[xe,Se]=(0,l.useState)(!1),[Ce,_e]=(0,l.useState)([]),[ke,Te]=(0,l.useState)(""),[Ae,Ee]=(0,l.useState)(!1),Ie=(0,l.useRef)(null),[Re,Pe]=(0,l.useState)(!1),[je,Ne]=(0,l.useState)(V7[0].name),[Oe,De]=(0,l.useState)(!1),[Me,Le]=(0,l.useState)(!1),[Fe,Ue]=(0,l.useState)(B7[0]),[$e,Ve]=(0,l.useState)(z7[2]),Be=(0,l.useRef)(null),[ze,We]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e="https://sideeye-backend-production.up.railway.app";console.log(`[SideRoomComponent] Connecting Socket.IO to: ${e}`);const t=$H(e,{reconnectionAttempts:5});return t.on("connect",(()=>{console.log("[SideRoomComponent] Socket connected:",t.id),we(t)})),t.on("disconnect",(e=>{console.log("[SideRoomComponent] Socket disconnected:",e),we(null)})),t.on("connect_error",(e=>{console.error("[SideRoomComponent] Socket connection error:",e),C_.error("Chat/Invite connection failed. Trying to reconnect..."),we(null)})),()=>{console.log("[SideRoomComponent] Disconnecting socket..."),t.disconnect(),we(null)}}),[]),(0,l.useEffect)((()=>{if(A)if(null!==d&&void 0!==d&&d.style){const e=d.style,t=V7.find((t=>t.name===e.themeName));Ne(t?e.themeName:V7[0].name);const n=t||V7[0];De(void 0!==e.headerGradient?e.headerGradient:n.headerGradient||!1),Le(void 0!==e.backgroundGradient?e.backgroundGradient:n.backgroundGradient||!1),Ue(B7.includes(e.font)?e.font:B7[0]),Ve(z7.includes(e.headerFontSize)?e.headerFontSize:z7[2])}else Ne(V7[0].name),De(V7[0].headerGradient||!1),Le(V7[0].backgroundGradient||!1),Ue(B7[0]),Ve(z7[2])}),[A,d]),console.log("[SideRoomComponent Debug] Checking owner:"),console.log("  Current User UID:",null===a||void 0===a?void 0:a.uid),console.log("  Room Owner ID:",null===d||void 0===d?void 0:d.ownerId),console.log("  Room Data:",d);const He=(0,l.useMemo)((()=>{const e=null===a||void 0===a?void 0:a.uid,t=null===d||void 0===d?void 0:d.ownerId;return!!e&&!!t&&e===t}),[null===d||void 0===d?void 0:d.ownerId,null===a||void 0===a?void 0:a.uid]),qe=(0,l.useMemo)((()=>{var e;return d&&null!==a&&void 0!==a&&a.uid&&(null===(e=d.viewers)||void 0===e?void 0:e.some((e=>e.userId===a.uid&&"guest"===e.role)))||!1}),[d,null===a||void 0===a?void 0:a.uid]),Ge=(0,l.useMemo)((()=>{var e;return!(null===d||void 0===d||null===(e=d.viewers)||void 0===e||!e.some((e=>e.userId===(null===a||void 0===a?void 0:a.uid))))}),[null===d||void 0===d?void 0:d.viewers,null===a||void 0===a?void 0:a.uid]),Ye=He||Ge,Je=(0,l.useMemo)((()=>{console.log("[onlineParticipants Memo] Raw presence state:",N);const e=new Map;N.forEach((t=>{t.isOnline&&!e.has(t.userId)&&e.set(t.userId,t)}));const t=Array.from(e.values());return console.log("[onlineParticipants Memo] Filtered participants:",t),t}),[N]),Qe=(0,l.useMemo)((()=>{if(!d||!d.viewers||!Array.isArray(d.viewers))return void console.log("[SideRoomComponent Debug] ownerData: room or room.viewers not available or not an array.");console.log("[SideRoomComponent Debug] Inspecting room.viewers:",JSON.stringify(d.viewers,null,2));const e=d.viewers.find((e=>(console.log(`[SideRoomComponent Debug] Checking viewer: userId=${e.userId}, role=${e.role}, displayName="${e.displayName}", username="${e.username}"`),"owner"===e.role)));if(e){console.log("[SideRoomComponent Debug] Owner found in room.viewers:",JSON.stringify(e,null,2));const t=e.displayName;"string"===typeof t&&""!==t.trim()?console.log(`[SideRoomComponent Debug] Owner displayName is valid: "${t}"`):console.warn("[SideRoomComponent Debug] Owner found, but displayName is missing, empty, or not a string. DisplayName value:",t),"string"===typeof e.username&&""!==e.username.trim()?console.log(`[SideRoomComponent Debug] Owner username is valid: "${e.username}"`):console.warn("[SideRoomComponent Debug] Owner found, but username is missing, empty, or not a string. Username value:",e.username)}else console.log('[SideRoomComponent Debug] No member with role "owner" found in room.viewers.');return e}),[d]),Xe=()=>{te(!0)},Ze=()=>{te(!1),re("")},et=()=>{if(!s)return void C_.error("Cannot clear video: Room ID is missing.");if(!He)return void C_.error("Only the room owner can clear the video.");Dv(vg(YC,"sideRooms",s),{currentSharedVideoUrl:null,lastActive:Gv()}).catch((e=>console.error("Error clearing video URL in Firestore:",e))),ae(null),C_.success("Shared video cleared.")};(0,l.useEffect)((()=>{if(null===a||void 0===a||!a.uid||L)return;(async()=>{try{console.log("[Stream] Fetching token for user:",a.uid),console.log("[Stream] Data being sent - User ID:",a.uid),console.log("[Stream] Data being sent - Display Name:",a.displayName),console.log("[Stream] Data being sent - Photo URL:",a.photoURL);const e=`${"https://sideeye-backend-production.up.railway.app"}/api/stream-token`;console.log(`[Stream] Fetching token from: ${e}`);const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.uid,userName:a.displayName||a.email,userImage:a.photoURL||void 0}),credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to fetch Stream token")}const{token:n}=await t.json();if(!n)throw new Error("Stream token was not provided by backend.");F(n),console.log("[Stream] Token fetched successfully.")}catch(m){console.error("[Stream] Error fetching token:",m),C_.error(`Stream Token Error: ${m.message}`),F(null)}})()}),[a,L]),(0,l.useEffect)((()=>{var e,t;if(!L||null===a||void 0===a||!a.uid||U)return;console.log("[Stream] Initializing StreamVideoClient with token.");const n=(null===(e=a.profile)||void 0===e?void 0:e.name)||a.displayName||a.email||a.uid,r=(null===(t=a.profile)||void 0===t?void 0:t.profilePic)||a.photoURL||void 0;console.log(`[Stream] Client Init - Using displayName: ${n}, photoURL: ${r}`);const i={id:a.uid,name:n,image:r};try{const e=new Y4({apiKey:"2nufecjmzmzh",user:i,token:L});$(e),console.log("[Stream] StreamVideoClient initialized for Provider.")}catch(m){console.error("[Stream] Error initializing StreamVideoClient:",m),C_.error("Failed to initialize Stream video client.")}return()=>{U&&(console.log("[Stream] Client will be disconnected by StreamVideo provider or next init."),$(null))}}),[L,a,U]),(0,l.useEffect)((()=>{if(!H||!U||!s||null===a||void 0===a||!a.uid)return void(H&&q(!1));if(V)return console.log("[Stream Call] Call instance already active. Skipping join attempt."),void q(!1);return(async()=>{console.log(`[Stream Call] Attempting to join/create call with ID: ${s}`),W(!0);try{const e=U.call("default",s);await e.join({create:!0}),console.log(`[Stream Call] Successfully joined/created call: ${e.cid}`),B(e)}catch(m){console.error("[Stream Call] Error joining or creating call:",m),C_.error(`Failed to connect to audio: ${m.message||"Unknown error"}`),B(null)}finally{W(!1),q(!1)}})(),()=>{q(!1)}}),[H,U,s,null===a||void 0===a?void 0:a.uid,V]),(0,l.useEffect)((()=>()=>{V&&(console.log(`[Stream Call] Leaving active call ${V.cid} on component unmount or room change.`),V.leave().then((()=>console.log(`[Stream Call] Successfully left call ${V.cid}`))).catch((e=>console.error(`[Stream Call] Error leaving call ${V.cid}:`,e))).finally((()=>{B(null)})))}),[V,s]),(0,l.useEffect)((()=>{if(!s||!a)return;const e=Fv(vg(YC,"sideRooms",s),(e=>{if(e.exists()){const t={id:e.id,...e.data()};h(t),K(t.heartCount||0),f(!1)}else console.warn(`[SideRoomComponent - Room Listener] Room document for roomId '${s}' reported as non-existent. Current error: '${m}'. Setting room state to null.`),g("Room not found"),h(null),f(!1)}));let t;if(null!==a&&void 0!==a&&a.uid){const e=vg(YC,"sideRooms",s,"heartedBy",a.uid);t=Fv(e,(e=>{J(e.exists())}))}const n=Fv(av(gg(YC,"sideRooms",s,"heartedBy"),hv("timestamp","desc"),fv(1)),(e=>{e.docChanges().forEach((e=>{if("added"===e.type){const t=e.doc.data();t.userId!==(null===a||void 0===a?void 0:a.uid)&&t.username&&(X(`${t.username} hearted the room!`),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((()=>{X(null)}),3e3))}}))}));return()=>{e(),t&&t(),n(),Z.current&&clearTimeout(Z.current)}}),[s,a]),(0,l.useEffect)((()=>{if(console.log(`[Presence Listener - Others] Initializing. RoomId: ${s}, HasAccess: ${Ye}, CurrentUserUID: ${null===a||void 0===a?void 0:a.uid}`),!s||!Ye||null===a||void 0===a||!a.uid)return console.warn(`[Presence Listener - Others] Conditions not met. Clearing presence. RoomId: ${s}, HasAccess: ${Ye}, UserUID: ${null===a||void 0===a?void 0:a.uid}`),void O([]);console.log(`[Presence Listener - Others] Setting up listener for room ${s}`);const e=Fv(av(gg(YC,"sideRooms",s,"presence"),cv("isOnline","==",!0)),(e=>{const t=e.docs.map((e=>({userId:e.id,...e.data()})));Be.current&&(clearTimeout(Be.current),Be.current=null),t.length>0?(console.log("[Presence Listener - Others] Received presence snapshot (updating). Users:",t.length,t),O(t)):(console.log("[Presence Listener - Others] Received presence snapshot (empty). Users:",t.length),N.length>0?(console.log("[Presence Listener - Others] Current presence not empty, scheduling clear."),Be.current=setTimeout((()=>{console.log("[Presence Listener - Others] Timeout fired. Clearing presence."),O([])}),150)):(console.log("[Presence Listener - Others] Current presence already empty, setting to empty."),O([])))}),(e=>{console.error("[Presence Listener - Others] CRITICAL: Snapshot error:",e),C_.error("Error listening to room presence updates. See console."),O([])}));return()=>{console.log(`[Presence Listener - Others] Cleanup for room ${s}.`),e(),Be.current&&clearTimeout(Be.current)}}),[s,Ye,null===a||void 0===a?void 0:a.uid,YC]),(0,l.useEffect)((()=>{if(console.log(`[Presence Writer - Self] Initializing. RoomId: ${s}, HasAccess: ${Ye}, CurrentUserUID: ${null===a||void 0===a?void 0:a.uid}, IsRoomOwner: ${He}, RoomExists: ${!!d}`),!s||null===a||void 0===a||!a.uid||!d||!Ye){if(console.warn(`[Presence Writer - Self] Conditions not met. Attempting to set self offline. RoomId: ${s}, UserUID: ${null===a||void 0===a?void 0:a.uid}, HasAccess: ${Ye}, RoomExists: ${!!d}`),null!==a&&void 0!==a&&a.uid&&s){Dv(vg(YC,"sideRooms",s,"presence",a.uid),{isOnline:!1,lastSeen:Gv()}).then((()=>console.log(`[Presence Writer - Self] Successfully set self offline due to unmet conditions for user ${a.uid} in room ${s}`))).catch((e=>{"not-found"!==e.code&&console.error(`[Presence Writer - Self] Error setting self offline (unmet conditions) for ${a.uid}:`,e)}))}return}const e=a.uid;console.log(`[Presence Writer - Self] Proceeding to write presence for user ${e} in room ${s}.`);return(async()=>{try{var t,n;const r=vg(YC,"users",e),i=await Pv(r);let o="",l="",c=(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||`user_${e.substring(0,4)}`;if(i.exists()){const t=i.data();o=t.name||t.username||"",l=t.profilePic||"",c=t.username||c,console.log(`[Presence Writer - Self Profile Fetch] Fetched profile for ${e}: Name='${o}', Pic='${l}', Username='${c}'`)}else console.warn(`[Presence Writer - Self Profile Fetch] Firestore profile missing for ${e}. Using fallbacks.`),o=a.displayName||"",l=a.photoURL||"";let u="viewer";He?u="owner":null!==(n=d.viewers)&&void 0!==n&&n.some((t=>t.userId===e&&"guest"===t.role))&&(u="guest");const h=vg(YC,"sideRooms",s,"presence",e),p={userId:e,username:c,avatar:l,lastSeen:Date.now(),isOnline:!0,role:u,displayName:o,photoURL:l};console.log("[Presence Writer - Self Debug] Data being written to presence:",p),await Ov(h,p,{merge:!0}),console.log(`[Presence Writer - Self] Presence updated for ${e}`)}catch(r){console.error(`[Presence Writer - Self] Error fetching profile or writing presence for ${e}:`,r)}})(),()=>{console.log(`[Presence Writer - Self] Cleanup running for user ${e} in room ${s}. Setting offline.`);Dv(vg(YC,"sideRooms",s,"presence",e),{isOnline:!1,lastSeen:Gv()}).catch((t=>{"not-found"!==t.code&&console.error(`[Presence Writer - Self] Error setting user ${e} offline during cleanup:`,t)}))}}),[s,a,YC,He,d,Ye]),(0,l.useEffect)((()=>{if(s)return()=>{}}),[s]),(0,l.useEffect)((()=>{d&&d.currentSharedVideoUrl?ae(d.currentSharedVideoUrl):d&&!d.currentSharedVideoUrl&&ae(null)}),[d]),(0,l.useEffect)((()=>{if(!be)return;const e=e=>{C_.success(e.message),ve(!1),ce(""),me(null),de([]),T(!1)},t=e=>{C_.error(e.username?`${e.username}: ${e.reason}`:e.reason),ve(!1)},n=e=>{e.roomId===s&&C_.success(`${e.guest.displayName||e.guest.username} joined as a guest!`)},r=e=>{e.error?(C_.error(e.error),de([])):de(e.users)};return be.on("invite-success",e),be.on("invite-failed",t),be.on("guest-joined",n),be.on("user-search-results-for-invite",r),()=>{be.off("invite-success",e),be.off("invite-failed",t),be.off("guest-joined",n),be.off("user-search-results-for-invite",r)}}),[be,s]);const tt=(0,l.useCallback)((0,$7.debounce)((e=>{e.trim().length>=2&&(be?(console.log(`Emitting search-users-for-invite: "${e.trim()}"`),be.emit("search-users-for-invite",{searchTerm:e.trim()})):(console.warn("[SideRoomComponent] Socket not available for search-users-for-invite."),C_.error("Cannot search users: connection issue.")))}),300),[be]),nt=(0,l.useCallback)((()=>{R(!0)}),[]),it=(0,l.useCallback)((e=>{j(e.currentTarget)}),[]),ot=(0,l.useCallback)((()=>{j(null)}),[]),st=(0,l.useCallback)((()=>{_(!0),ot()}),[ot]),at=(0,l.useCallback)((()=>{E(!0),ot()}),[ot]),lt=(0,l.useCallback)((()=>{T(!0),ce(""),me(null),de([]),pe(!1),ot()}),[ot]),ct=(0,l.useCallback)((async()=>{ve(!0),be&&null!==a&&void 0!==a&&a.uid&&s&&null!==fe&&void 0!==fe&&fe.username?(console.log(`Emitting invite-user-to-room: ${fe.username}`),be.emit("invite-user-to-room",{roomId:s,inviterId:a.uid,inviteeUsername:fe.username})):(console.warn("Could not send invite due to missing socket, user, room, or selected invitee info.",{socket:!!be,currentUser:!(null===a||void 0===a||!a.uid),roomId:s,selectedInviteeForInvite:fe}),C_.error("Cannot send invite: connection or user data issue."),ve(!1))}),[null===a||void 0===a?void 0:a.uid,s,fe,be]),ut=(0,l.useCallback)((async()=>{if(s&&He&&(ot(),window.confirm("Are you sure you want to delete this room? This cannot be undone."))){y(!0);try{const e=vg(YC,"sideRooms",s);await Dv(e,{deleted:!0,deletedAt:Gv()}),C_.success("Room deleted successfully"),c("/side-rooms")}catch(m){console.error("Error deleting room:",m),C_.error("Failed to delete room")}finally{y(!1)}}}),[s,He,c]),dt=(0,l.useCallback)((async(e,t)=>{if(!He||!s||e===(null===a||void 0===a?void 0:a.uid))return;console.log(`Owner toggling mute for ${e}. Currently muted: ${t}`);const n=!t,r=vg(YC,"sideRooms",s,"presence",e);try{await Dv(r,{isMuted:n}),console.warn("[SideRoomComponent] handleForceMuteToggle needs to be connected to the correct signaling (e.g., general Socket.IO emit)"),C_.success(`User ${n?"muted":"unmuted"}.`)}catch(m){console.error(`Error toggling mute for ${e}:`,m),C_.error("Failed to update mute status.")}}),[He,s,null===a||void 0===a?void 0:a.uid,YC]),ht=(0,l.useCallback)(((e,t)=>{if(!He||!s||e===(null===a||void 0===a?void 0:a.uid))return;const n=t||"this user";window.confirm(`Are you sure you want to remove ${n} from the room?`)&&(console.log(`Owner removing user ${e} from room ${s}`),console.warn("[SideRoomComponent] handleForceRemove needs to be connected to the correct signaling (e.g., general Socket.IO emit)"),C_.success(`Removing ${n}...`))}),[He,s,null===a||void 0===a?void 0:a.uid]),pt=(0,l.useCallback)(((e,t)=>{if(!He||!s||e===(null===a||void 0===a?void 0:a.uid))return;const n=t||"this user";window.confirm(`Are you sure you want to BAN ${n} from the room? They will be removed and unable to rejoin.`)&&(console.log(`Owner banning user ${e} from room ${s}`),console.warn("[SideRoomComponent] handleForceBan needs to be connected to the correct signaling (e.g., general Socket.IO emit)"),C_.success(`Banning ${n}...`))}),[He,s,null===a||void 0===a?void 0:a.uid]),ft=()=>{setTimeout((()=>{var e;null===(e=Ie.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),100)};(0,l.useEffect)((()=>{xe&&ft()}),[Ce,xe]),(0,l.useEffect)((()=>{const e=localStorage.getItem("sideroom_sade_chat_history");if(e)try{const t=JSON.parse(e);Array.isArray(t)&&t.every((e=>"object"===typeof e&&null!==e&&"sender"in e&&"text"in e))?_e(t):(console.warn("[SideRoomComponent - SadeAI History] Invalid data found in localStorage."),localStorage.removeItem("sideroom_sade_chat_history"))}catch(m){console.error("[SideRoomComponent - SadeAI History] Error parsing saved history:",m),localStorage.removeItem("sideroom_sade_chat_history")}}),[]),(0,l.useEffect)((()=>{(Ce.length>0||localStorage.getItem("sideroom_sade_chat_history"))&&localStorage.setItem("sideroom_sade_chat_history",JSON.stringify(Ce))}),[Ce]);const mt=async function(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke).trim();if(!t)return;const n={sender:"user",text:t};_e((e=>[...e,n])),Te(""),Ee(!0);try{console.log("[SideRoomComponent - SadeAI] Sending message to backend.");const n="https://sideeye-backend-production.up.railway.app";if(!n)return console.error("[SideRoomComponent - SadeAI] ERROR: REACT_APP_API_URL is not defined."),_e((e=>[...e,{sender:"ai",text:"Configuration error: Backend URL not set."}])),void Ee(!1);const r=`${n}/api/sade-ai`;if(null===a||void 0===a||!a.uid)return console.error("[SideRoomComponent - SadeAI] ERROR: User ID not available."),_e((e=>[...e,{sender:"ai",text:"Error: Could not identify user."}])),void Ee(!1);const i={message:t,forceSearch:e,userId:a.uid};console.log("[SideRoomComponent - SadeAI] Sending HTTP request body:",i);const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},s=await fetch(r,o);if(!s.ok){let e=`HTTP error! status: ${s.status}`;try{e=(await s.json()).error||e}catch(ZC){}throw new Error(e)}const l=await s.json();console.log("[SideRoomComponent - SadeAI] HTTP Backend response data:",l),l.response?_e((e=>[...e,{sender:"ai",text:l.response}])):l.error?(console.error("[SideRoomComponent - SadeAI] Backend returned error:",l.error),_e((e=>[...e,{sender:"ai",text:`Sorry, there was an error: ${l.error}`}]))):(console.error("[SideRoomComponent - SadeAI] Received unexpected HTTP response structure:",l),_e((e=>[...e,{sender:"ai",text:"Sorry, I got a bit confused there."}])))}catch(hoe){console.error("[SideRoomComponent - SadeAI] sendMessage Error:",hoe),_e((t=>[...t,{sender:"ai",text:`Sorry, there was an error: ${hoe.message||"Unknown error"}`}]))}finally{Ee(!1),ft()}},gt=e=>{const t=(e=>{let t=null;return(e=e.trim()).includes("youtube.com/watch?v=")?t=new URL(e).searchParams.get("v"):e.includes("youtu.be/")&&(t=e.substring(e.lastIndexOf("/")+1).split("?")[0]),t?`https://www.youtube.com/embed/${t}?autoplay=1&rel=0`:e.includes("tiktok.com/")||e.includes("instagram.com/reel/")?null:e.match(/\.(mp4|webm|ogg)$/i)?e:(C_.error("Unsupported video URL or format. Try a YouTube link."),null)})(e);return t?t.startsWith("https://www.youtube.com/embed/")?(0,Ke.jsx)("iframe",{src:t,title:"Shared Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):(0,Ke.jsx)($T,{sx:{p:2,textAlign:"center"},children:"Video format not directly embeddable. Try a YouTube link."}):e.match(/\.(mp4|webm|ogg)$/i)?(0,Ke.jsx)("video",{src:e,controls:!0,autoPlay:!0,style:{width:"100%",height:"100%",objectFit:"contain"},onError:()=>C_.error("Failed to load video.")}):(0,Ke.jsx)($T,{sx:{p:2,textAlign:"center"},children:"Unsupported video link or error loading video."})},vt=async()=>{if(!a||!a.uid||!s||!d)return;const e=vg(YC,"sideRooms",s,"heartedBy",a.uid),t=vg(YC,"sideRooms",s);try{await Hv(YC,(async n=>{var r;const i=await n.get(e);if(!(await n.get(t)).exists())throw"Room does not exist!";const o=await Pv(vg(YC,"users",a.uid)),s=o.exists()?(null===(r=o.data())||void 0===r?void 0:r.username)||a.displayName:"Someone";i.exists()?(n.delete(e),n.update(t,{heartCount:Yv(-1)})):(n.set(e,{userId:a.uid,username:s,timestamp:Gv()}),n.update(t,{heartCount:Yv(1)}))}))}catch(m){console.error("Error hearting room:",m),C_.error("Failed to update heart status.")}},yt=d?`${d.name} - SideEye`:p?"Loading Room...":"Room Not Found - SideEye",bt=d&&d.description||"Join the conversation on SideEye.",wt=`${window.location.origin}/default-app-logo.png`,xt=(null===d||void 0===d?void 0:d.thumbnailUrl)||wt,St=`${window.location.origin}/side-room/${s||""}`;if(p&&!d)return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(U7,{children:(0,Ke.jsx)("title",{children:"Loading Room... - SideEye"})}),(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ke.jsx)(LN,{})})]});if(m&&!d)return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(U7,{children:(0,Ke.jsx)("title",{children:"Error Loading Room - SideEye"})}),(0,Ke.jsxs)(rt,{sx:{p:3,textAlign:"center"},children:[(0,Ke.jsx)(eN,{severity:"error",children:m}),(0,Ke.jsxs)(XA,{onClick:()=>c("/discover"),sx:{mt:2},children:[" ","Back to Discover"]})]})]});return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsxs)(U7,{children:[(0,Ke.jsx)("title",{children:yt}),(0,Ke.jsx)("meta",{name:"description",content:bt}),(0,Ke.jsx)("meta",{property:"og:type",content:"website"}),(0,Ke.jsx)("meta",{property:"og:url",content:St}),(0,Ke.jsx)("meta",{property:"og:title",content:yt}),(0,Ke.jsx)("meta",{property:"og:description",content:bt}),(0,Ke.jsx)("meta",{property:"og:image",content:xt}),(0,Ke.jsx)("meta",{property:"og:image:width",content:"1200"}),(0,Ke.jsx)("meta",{property:"og:image:height",content:"630"}),(0,Ke.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,Ke.jsx)("meta",{name:"twitter:url",content:St}),(0,Ke.jsx)("meta",{name:"twitter:title",content:yt}),(0,Ke.jsx)("meta",{name:"twitter:description",content:bt}),(0,Ke.jsx)("meta",{name:"twitter:image",content:xt})]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",height:"100vh",fontFamily:(null===d||void 0===d||null===(e=d.style)||void 0===e?void 0:e.font)||B7[0],backgroundColor:null!==d&&void 0!==d&&null!==(t=d.style)&&void 0!==t&&t.backgroundGradient?`linear-gradient(to bottom right, ${(null===d||void 0===d||null===(n=d.style)||void 0===n?void 0:n.backgroundColor)||u.palette.background.default}, ${(null===d||void 0===d||null===(r=d.style)||void 0===r?void 0:r.accentColor)||u.palette.secondary.main})`:(null===d||void 0===d||null===(i=d.style)||void 0===i?void 0:i.backgroundColor)||u.palette.background.default,color:(null===d||void 0===d||null===(o=d.style)||void 0===o?void 0:o.textColor)||u.palette.text.primary},children:[d&&(()=>{var e,t,n,r,i,o,l,h,f,g,y,b,w,x,S,C,_,k,T,A,E,I;return(0,Ke.jsxs)(rt,{sx:{p:2,borderBottom:1,borderColor:"divider",backgroundColor:null!==d&&void 0!==d&&null!==(e=d.style)&&void 0!==e&&e.headerGradient?`linear-gradient(to right, ${(null===d||void 0===d||null===(t=d.style)||void 0===t?void 0:t.headerColor)||u.palette.primary.main}, ${(null===d||void 0===d||null===(n=d.style)||void 0===n?void 0:n.accentColor)||u.palette.secondary.light})`:(null===d||void 0===d||null===(r=d.style)||void 0===r?void 0:r.headerColor)||u.palette.background.paper,color:(null===d||void 0===d||null===(i=d.style)||void 0===i?void 0:i.textColor)||"inherit"},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column"},children:[(0,Ke.jsx)($T,{variant:"h6",sx:{fontFamily:(null===d||void 0===d||null===(o=d.style)||void 0===o?void 0:o.font)||B7[0],fontSize:null!==d&&void 0!==d&&null!==(l=d.style)&&void 0!==l&&l.headerFontSize?`${d.style.headerFontSize}px`:"1.25rem",fontWeight:600},children:null===d||void 0===d?void 0:d.name}),Qe&&(0,Ke.jsxs)($T,{variant:"caption",sx:{opacity:null!==d&&void 0!==d&&null!==(h=d.style)&&void 0!==h&&h.textColor?.85:1,fontFamily:(null===d||void 0===d||null===(f=d.style)||void 0===f?void 0:f.font)||B7[0]},children:["Host: ",Qe.username]})]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,Ke.jsx)(Pz,{title:Y?"Unheart Room":"Heart Room",children:(0,Ke.jsx)(EA,{onClick:vt,color:Y?"error":"inherit",sx:{color:Y?u.palette.error.main:(null===d||void 0===d||null===(g=d.style)||void 0===g?void 0:g.accentColor)||"inherit"},disabled:Re,children:Y?(0,Ke.jsx)(WH,{}):(0,Ke.jsx)(HH,{})})}),(0,Ke.jsx)(UA,{badgeContent:G>0?G:"0",sx:{mr:1,"& .MuiBadge-badge":{backgroundColor:(null===d||void 0===d||null===(y=d.style)||void 0===y?void 0:y.accentColor)||u.palette.primary.main,color:null!==d&&void 0!==d&&null!==(b=d.style)&&void 0!==b&&b.textColor&&null!==d&&void 0!==d&&null!==(w=d.style)&&void 0!==w&&w.accentColor?u.palette.getContrastText(d.style.accentColor):u.palette.primary.contrastText}}}),(0,Ke.jsx)(Pz,{title:"Share",children:(0,Ke.jsx)(EA,{onClick:nt,sx:{color:(null===d||void 0===d||null===(x=d.style)||void 0===x?void 0:x.accentColor)||"inherit"},children:(0,Ke.jsx)(qH,{})})}),(0,Ke.jsx)(Pz,{title:"Share Video Link",children:(0,Ke.jsx)(EA,{onClick:Xe,disabled:!He&&!qe,size:"small",color:"secondary",children:(0,Ke.jsx)(GH,{})})}),(0,Ke.jsx)(Pz,{title:"Chat with Sade AI",children:(0,Ke.jsx)(NT,{src:"/images/sade-avatar.jpg",alt:"Sade AI Chat",onClick:()=>Se(!0),sx:{width:32,height:32,cursor:"pointer","&:hover":{opacity:.8},border:`1px solid ${(null===d||void 0===d||null===(S=d.style)||void 0===S?void 0:S.accentColor)||u.palette.primary.light}`}})}),He&&(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(Pz,{title:"Room Settings",children:(0,Ke.jsx)(EA,{onClick:it,sx:{color:(null===d||void 0===d||null===(C=d.style)||void 0===C?void 0:C.accentColor)||"inherit"},children:(0,Ke.jsx)(KH,{})})}),(0,Ke.jsxs)(FI,{anchorEl:P,open:Boolean(P),onClose:ot,children:[(0,Ke.jsxs)(JI,{onClick:st,children:[" ",(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(nV,{fontSize:"small"})}),"Edit Room"]}),(0,Ke.jsxs)(JI,{onClick:at,children:[" ",(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(YH,{fontSize:"small"})}),"Customize"]}),(0,Ke.jsxs)(JI,{onClick:lt,children:[" ",(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(rV,{fontSize:"small"})}),"Invite"]}),(0,Ke.jsxs)(JI,{onClick:ut,sx:{color:"error.main"},children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(JH,{fontSize:"small",color:"error"})}),"Delete Room"]})]})]}),(0,Ke.jsx)(Pz,{title:"Leave Room",children:(0,Ke.jsx)(EA,{onClick:()=>{He?We(!0):c("/side-rooms")},disabled:v,sx:{color:(null===d||void 0===d||null===(_=d.style)||void 0===_?void 0:_.accentColor)||"inherit"},children:(0,Ke.jsx)(QH,{})})})]})]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ke.jsxs)($T,{variant:"caption",sx:{fontFamily:(null===d||void 0===d||null===(k=d.style)||void 0===k?void 0:k.font)||B7[0]},children:[Je.length," Online"]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[!V&&U&&Ye&&(0,Ke.jsx)(XA,{variant:"contained",size:"small",color:"primary",onClick:()=>{console.log("User clicked 'Connect Audio (Stream)' button."),V?C_("Already connected to audio.",{icon:"\u2139\ufe0f"}):q(!0)},startIcon:z?(0,Ke.jsx)(LN,{size:20,color:"inherit"}):(0,Ke.jsx)(XH,{}),disabled:z||!U,sx:{backgroundColor:null===d||void 0===d||null===(T=d.style)||void 0===T?void 0:T.accentColor,fontFamily:(null===d||void 0===d||null===(A=d.style)||void 0===A?void 0:A.font)||B7[0],color:null!==d&&void 0!==d&&null!==(E=d.style)&&void 0!==E&&E.accentColor?u.palette.getContrastText(d.style.accentColor):void 0},children:z?"Connecting...":"Connect Audio (Stream)"}),V&&(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(Pz,{title:"Toggle Microphone",children:(0,Ke.jsxs)(EA,{onClick:async()=>{var e;if(null===V||void 0===V||!V.microphone||null===a||void 0===a||!a.uid||!s)return;const t=N.find((e=>e.userId===a.uid)),n=!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e);try{await V.microphone.toggle(),console.log(`[Mic Toggle] Stream toggle executed. Intended new state: ${n}`);const e=vg(YC,"sideRooms",s,"presence",a.uid);await Dv(e,{isMuted:n}),console.log(`[Mic Toggle] Updated Firestore isMuted for ${a.uid} to ${n}`)}catch(m){console.error("[Mic Toggle] Error toggling mic or updating Firestore:",m),C_.error("Failed to toggle microphone status.")}},color:"primary",disabled:!(null!==V&&void 0!==V&&V.microphone)||!(null!==a&&void 0!==a&&a.uid)||!s,children:[(0,Ke.jsx)(ZH,{})," "]})}),(0,Ke.jsx)($T,{variant:"caption",sx:{color:"lightgreen",mr:1},children:"Stream Audio Connected"}),(0,Ke.jsx)(XA,{variant:"outlined",size:"small",color:"error",onClick:()=>{null===V||void 0===V||V.leave().then((()=>{console.log("[Header Leave] Successfully left call, navigating..."),c("/side-rooms")})).catch((e=>{console.error("[Header Leave] Error leaving call:",e),C_.error("Error leaving audio call.")}))},disabled:z,sx:{fontFamily:(null===d||void 0===d||null===(I=d.style)||void 0===I?void 0:I.font)||B7[0]},children:"Leave Audio"})]}),!U&&p&&(0,Ke.jsx)(LN,{size:24})]})]})]})})(),(0,Ke.jsx)(rt,{sx:{flexGrow:1,overflowY:"auto"},children:U&&d?V?(0,Ke.jsx)(S8,{client:U,children:(0,Ke.jsx)(w8,{call:V,children:(0,Ke.jsx)(H7,{room:d,isRoomOwner:He,isGuest:qe,handleOpenShareVideoDialog:Xe,handleClearSharedVideo:et,currentVideoUrl:se,renderVideoPlayer:gt,onForceMuteToggle:dt,onForceRemove:ht,onForceBan:pt,theme:u})})}):(0,Ke.jsxs)(rt,{sx:{flexGrow:1,p:2,overflowY:"auto"},children:[se&&(0,Ke.jsxs)(rt,{sx:{mt:1,mb:3,p:1,border:"1px solid",borderColor:"divider",borderRadius:1,backgroundColor:"action.hover"},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,Ke.jsx)($T,{variant:"subtitle1",sx:{textAlign:"center",flexGrow:1},children:"Shared Video"}),He&&(0,Ke.jsx)(Pz,{title:"Clear Shared Video",children:(0,Ke.jsx)(EA,{onClick:et,size:"small",children:(0,Ke.jsx)(eq,{})})})]}),(0,Ke.jsx)(rt,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000","& iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0}},children:gt(se)})]}),(0,Ke.jsxs)($T,{variant:"h6",gutterBottom:!0,children:["Participants (",Je.length,")"]}),(0,Ke.jsx)(pN,{container:!0,spacing:2,children:Je.map((e=>(0,Ke.jsx)(pN,{item:!0,xs:4,sm:3,md:2,lg:2,children:(0,Ke.jsxs)(nT,{sx:{p:1,textAlign:"center"},children:[(0,Ke.jsx)(NT,{src:e.avatar,alt:e.displayName||e.username,sx:{width:60,height:60,margin:"auto",mb:1}}),(0,Ke.jsx)($T,{variant:"caption",display:"block",noWrap:!0,children:e.displayName||e.username}),e.isMuted&&(0,Ke.jsx)(tq,{fontSize:"small",color:"error",sx:{mt:.5}})]})},e.userId)))}),!V&&!z&&Ye&&(0,Ke.jsx)(eN,{severity:"warning",sx:{mt:2},children:"Audio not connected. Use the button in the header."}),z&&(0,Ke.jsx)(eN,{severity:"info",sx:{mt:2},children:"Connecting to room audio..."})]}):(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",p:2},children:[p&&(0,Ke.jsx)(LN,{}),!p&&!d&&(0,Ke.jsx)(eN,{severity:"error",children:"Room not found."}),!p&&d&&!U&&(0,Ke.jsx)($T,{children:"Initializing audio..."})]})}),(0,Ke.jsxs)(g$,{open:ee,onClose:Ze,fullWidth:!0,maxWidth:"sm",children:[(0,Ke.jsx)(Z$,{children:"Share a Video"}),(0,Ke.jsx)(s$,{children:(0,Ke.jsx)(Uj,{autoFocus:!0,margin:"dense",id:"videoUrl",label:"Video URL (e.g., YouTube)",type:"url",fullWidth:!0,variant:"standard",value:ne,onChange:e=>re(e.target.value),placeholder:"https://www.youtube.com/watch?v=..."})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:Ze,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:()=>{if(!s)return void C_.error("Cannot share video: Room ID is missing.");if(!ne.trim())return void C_.error("Please enter a video URL.");if(!ne.startsWith("http://")&&!ne.startsWith("https://"))return void C_.error("Invalid URL format.");Dv(vg(YC,"sideRooms",s),{currentSharedVideoUrl:ne,lastActive:Gv()}).then((()=>{console.warn("[SideRoomComponent] Video sharing part needs review for signaling if not using Firestore listeners for immediate effect")})).catch((e=>console.error("Error directly updating video URL in Firestore:",e))),ae(ne),C_.success("Video shared!"),Ze()},variant:"contained",children:"Share Video"})]})]}),(0,Ke.jsxs)(g$,{open:I,onClose:()=>R(!1),fullWidth:!0,maxWidth:"xs",children:[(0,Ke.jsx)(Z$,{children:"Share this Room"}),(0,Ke.jsxs)(s$,{sx:{textAlign:"center"},children:[(0,Ke.jsx)($T,{variant:"subtitle1",gutterBottom:!0,children:"Share this room link:"}),(0,Ke.jsx)(Uj,{fullWidth:!0,variant:"outlined",value:St,InputProps:{readOnly:!0},sx:{mb:2}}),(0,Ke.jsx)(XA,{variant:"contained",startIcon:(0,Ke.jsx)(nq,{}),onClick:()=>{navigator.clipboard.writeText(St),C_.success("Room link copied to clipboard!")},sx:{mb:2},children:"Copy Link"}),(0,Ke.jsx)($T,{variant:"subtitle2",gutterBottom:!0,children:"Or share on:"}),(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-around",mt:1},children:[(0,Ke.jsx)(EA,{color:"primary",onClick:()=>window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(St)}&text=${encodeURIComponent((null===d||void 0===d?void 0:d.name)||"Join my SideEye Room!")}`,"_blank"),title:"Share on Twitter",children:(0,Ke.jsx)(rq,{})}),(0,Ke.jsx)(EA,{color:"primary",onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(St)}`,"_blank"),title:"Share on Facebook",children:(0,Ke.jsx)(iq,{})}),(0,Ke.jsx)(EA,{color:"primary",onClick:()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(((null===d||void 0===d?void 0:d.name)||"Join my SideEye Room!")+" "+St)}`,"_blank"),title:"Share on WhatsApp",children:(0,Ke.jsx)(oq,{})}),(0,Ke.jsx)(EA,{color:"primary",onClick:()=>{navigator.clipboard.writeText(St),C_.success("Room link copied! Paste it on Instagram."),window.open("https://www.instagram.com","_blank")},title:"Copy link & Open Instagram",children:(0,Ke.jsx)(sq,{})})]})]}),(0,Ke.jsx)(fL,{children:(0,Ke.jsx)(XA,{onClick:()=>R(!1),children:"Close"})})]}),(0,Ke.jsxs)(g$,{open:xe,onClose:()=>Se(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{height:"80vh",display:"flex",flexDirection:"column"}},children:[(0,Ke.jsxs)(Z$,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Chat with Sade AI",(0,Ke.jsx)(Pz,{title:"Clear Chat History",children:(0,Ke.jsx)(EA,{onClick:()=>{_e([]),localStorage.removeItem("sideroom_sade_chat_history"),C_.success("Sade AI chat cleared")},size:"small",children:(0,Ke.jsx)(JH,{})})})]}),(0,Ke.jsx)(s$,{sx:{flexGrow:1,overflowY:"auto",p:1,backgroundColor:u.palette.background.default},children:(0,Ke.jsxs)(oE,{sx:{p:0},children:[Ce.map(((e,t)=>(0,Ke.jsxs)(PL,{sx:{display:"flex",flexDirection:"user"===e.sender?"row-reverse":"row",alignItems:"flex-end",mb:1,p:0},children:["ai"===e.sender&&(0,Ke.jsx)(NT,{src:"/images/sade-avatar.jpg",alt:"Sade AI",sx:{width:32,height:32,mr:1,mb:.5}}),(0,Ke.jsx)(nT,{elevation:1,sx:{p:"6px 12px",borderRadius:"user"===e.sender?"15px 15px 0 15px":"15px 15px 15px 0",bgcolor:"user"===e.sender?"primary.main":"background.paper",color:"user"===e.sender?"primary.contrastText":"text.primary",maxWidth:"75%",wordBreak:"break-word"},children:e.text})]},t))),Ae&&(0,Ke.jsx)(PL,{sx:{justifyContent:"center"},children:(0,Ke.jsx)(LN,{size:20})}),(0,Ke.jsx)("div",{ref:Ie})]})}),(0,Ke.jsxs)(fL,{sx:{p:1,borderTop:`1px solid ${u.palette.divider}`,flexDirection:"column"},children:[Ce.length<=1&&!Ae&&(0,Ke.jsx)(rt,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1,justifyContent:"center",px:1},children:["Tell me a fun fact","What does 'innit' mean?","Play 'Would You Rather?'","Help me relax with a breathing exercise","How's the weather?","What can you do?"].map(((e,t)=>(0,Ke.jsx)($L,{label:e,onClick:()=>mt(e),size:"small",variant:"outlined"},t)))}),(0,Ke.jsxs)(rt,{sx:{display:"flex",width:"100%"},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,variant:"outlined",size:"small",placeholder:"Talk to Sade...",value:ke,onChange:e=>Te(e.target.value),onKeyPress:e=>"Enter"===e.key&&!Ae&&mt(),sx:{mr:1},disabled:Ae}),(0,Ke.jsxs)(EA,{onClick:()=>!Ae&&mt(ke,!1),disabled:Ae||!ke.trim(),color:"primary",children:[(0,Ke.jsx)(qH,{sx:{transform:"rotate(-90deg)"}})," "]}),(0,Ke.jsxs)(EA,{onClick:()=>!Ae&&mt(ke,!0),disabled:Ae||!ke.trim(),color:"secondary",title:"Search the web",children:[(0,Ke.jsx)(NB,{})," "]})]})]})]}),C&&d&&(0,Ke.jsx)(cq,{open:C,onClose:()=>_(!1),onSubmit:async(e,t)=>{if(s&&a&&d){y(!0);try{let n=d.thumbnailUrl;if(t){const e=pb(QC,`room-thumbnails/${s}_${Date.now()}_${t.name}`);await db(e,t),n=await hb(e)}const r=vg(YC,"sideRooms",s),i={name:e.name,description:e.description,isPrivate:e.isPrivate,tags:e.tags||[],thumbnailUrl:n,lastActive:Gv()};e.isPrivate&&e.password&&e.password.length>0?i.password=e.password:e.isPrivate||(i.password=qv()),await Dv(r,i),C_.success("Room details updated successfully!"),_(!1)}catch(hoe){console.error("Error updating room:",hoe),C_.error("Failed to update room details.")}finally{y(!1)}}else C_.error("Error: Missing room or user data.")},initialData:d,title:"Edit Room",submitButtonText:"Save Changes"}),(0,Ke.jsxs)(g$,{open:A,onClose:()=>E(!1),fullWidth:!0,maxWidth:"sm",children:[(0,Ke.jsx)(Z$,{children:"Customize Room Appearance"}),(0,Ke.jsx)(s$,{children:(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2,pt:1},children:[(0,Ke.jsxs)(YP,{fullWidth:!0,children:[(0,Ke.jsx)(zP,{id:"theme-select-label",children:"Theme"}),(0,Ke.jsx)(Nj,{labelId:"theme-select-label",value:je,label:"Theme",onChange:e=>Ne(e.target.value),children:V7.map((e=>(0,Ke.jsx)(JI,{value:e.name,children:e.name},e.name)))})]}),(0,Ke.jsxs)(YP,{fullWidth:!0,children:[(0,Ke.jsx)(zP,{id:"font-select-label",children:"Font"}),(0,Ke.jsx)(Nj,{labelId:"font-select-label",value:Fe,label:"Font",onChange:e=>Ue(e.target.value),children:B7.map((e=>(0,Ke.jsx)(JI,{value:e,children:e},e)))})]}),(0,Ke.jsxs)(YP,{fullWidth:!0,children:[(0,Ke.jsx)(zP,{id:"text-size-select-label",children:"Header Text Size (px)"}),(0,Ke.jsx)(Nj,{labelId:"text-size-select-label",value:$e.toString(),label:"Header Text Size (px)",onChange:e=>Ve(Number(e.target.value)),children:z7.map((e=>(0,Ke.jsx)(JI,{value:e.toString(),children:e},e)))})]}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(RV,{checked:Oe,onChange:e=>De(e.target.checked)}),label:"Use Header Gradient"}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(RV,{checked:Me,onChange:e=>Le(e.target.checked)}),label:"Use Background Gradient"})]})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>E(!1),children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:async()=>{var e,t,n,r,i;if(!s||!d)return void C_.error("Cannot save style: Room data is missing.");if(!a)return void C_.error("You must be logged in to change the style.");if(!He)return void C_.error("Only the room owner can change the style.");const o=V7.find((e=>e.name===je));if(!o){var l,c,u,h,p;C_.error("Invalid theme selected. Defaulting to first theme.");const e=V7[0],t={themeName:e.name,headerColor:e.headerColor,backgroundColor:e.backgroundColor,textColor:e.textColor,accentColor:e.accentColor,font:Fe,headerFontSize:$e,headerGradient:Oe,backgroundGradient:Me,customCss:(null===(l=d.style)||void 0===l?void 0:l.customCss)||"",bannerUrl:(null===(c=d.style)||void 0===c?void 0:c.bannerUrl)||"",stickers:(null===(u=d.style)||void 0===u?void 0:u.stickers)||[],glitterEffect:(null===(h=d.style)||void 0===h?void 0:h.glitterEffect)||!1,thumbnailUrl:(null===(p=d.style)||void 0===p?void 0:p.thumbnailUrl)||d.thumbnailUrl||""};try{const e=vg(YC,"sideRooms",s);await Dv(e,{style:t,lastActive:Gv()}),C_.success("Room style updated (defaulted theme)!"),E(!1)}catch(m){console.error("Error updating room style with default theme:",m),C_.error("Failed to update room style.")}finally{y(!1)}return}const f={themeName:o.name,headerColor:o.headerColor,backgroundColor:o.backgroundColor,textColor:o.textColor,accentColor:o.accentColor,font:Fe,headerFontSize:$e,headerGradient:Oe,backgroundGradient:Me,customCss:(null===(e=d.style)||void 0===e?void 0:e.customCss)||"",bannerUrl:(null===(t=d.style)||void 0===t?void 0:t.bannerUrl)||"",stickers:(null===(n=d.style)||void 0===n?void 0:n.stickers)||[],glitterEffect:(null===(r=d.style)||void 0===r?void 0:r.glitterEffect)||!1,thumbnailUrl:(null===(i=d.style)||void 0===i?void 0:i.thumbnailUrl)||d.thumbnailUrl||""};y(!0);try{const e=vg(YC,"sideRooms",s);await Dv(e,{style:f,lastActive:Gv()}),C_.success("Room style updated successfully!"),E(!1)}catch(m){console.error("Error updating room style:",m),C_.error("Failed to update room style.")}finally{y(!1)}},variant:"contained",disabled:v,children:v?(0,Ke.jsx)(LN,{size:24}):"Save Style"})]})]}),(0,Ke.jsxs)(g$,{open:k,onClose:()=>{T(!1),ce(""),me(null),de([]),pe(!1)},fullWidth:!0,maxWidth:"xs",children:[(0,Ke.jsx)(Z$,{children:"Invite User to Room"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)($T,{variant:"body2",sx:{mb:2},children:"Search for a user by their username to invite them as a guest."}),(0,Ke.jsxs)(rt,{ref:ye,sx:{position:"relative"},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,label:"Search Username",variant:"outlined",value:le,onChange:e=>{const t=e.target.value;console.log(`[SideRoomComponent] handleInviteSearchChange: "${t}"`),ce(t),me(null),t.trim().length>=2?(pe(!0),tt(t)):(pe(!1),de([]))},sx:{mb:1}}),he&&ue.length>0&&(0,Ke.jsx)(nT,{elevation:3,sx:{position:"absolute",width:"100%",maxHeight:200,overflowY:"auto",zIndex:u.zIndex.modal+1,mt:.5},children:(0,Ke.jsx)(mz,{onClickAway:()=>{pe(!1)},children:(0,Ke.jsx)(oE,{dense:!0,children:ue.map((e=>(0,Ke.jsxs)(PL,{button:!0,onClick:()=>{return me(t=e),ce(t.username),pe(!1),void de([]);var t},children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:e.profilePic,alt:e.username})}),(0,Ke.jsx)(iR,{primary:e.username,secondary:e.name})]},e.id)))})})}),he&&0===ue.length&&le.length>=2&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:['No users found matching "',le,'".']})]}),fe&&(0,Ke.jsxs)($T,{variant:"caption",sx:{display:"block",mt:1,color:"success.main"},children:["Selected: ",fe.username]})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>{T(!1),ce(""),me(null),de([]),pe(!1)},children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:ct,variant:"contained",disabled:ge||!fe||!be,children:ge?(0,Ke.jsx)(LN,{size:24}):"Send Invite"})]})]}),(0,Ke.jsxs)(g$,{open:ze,onClose:()=>We(!1),"aria-labelledby":"end-room-dialog-title","aria-describedby":"end-room-dialog-description",children:[(0,Ke.jsx)(Z$,{id:"end-room-dialog-title",children:"End Room?"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)($T,{variant:"body1",id:"end-room-dialog-description",children:"Are you sure you want to end this room?"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This will remove everyone and permanently delete the room. This action cannot be undone."})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>We(!1),disabled:v,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:()=>{We(!1),ut()},color:"error",variant:"contained",disabled:v,autoFocus:!0,children:v?(0,Ke.jsx)(LN,{size:24}):"End and Delete"})]})]})]})]})},H7=e=>{let{room:t,isRoomOwner:n,isGuest:r,handleOpenShareVideoDialog:i,handleClearSharedVideo:o,currentVideoUrl:s,renderVideoPlayer:a,onForceMuteToggle:c,onForceRemove:u,onForceBan:d,theme:h}=e;const p=V3(),{useParticipants:f,useMicrophoneState:m}=u5(),g=f(),{isMute:v}=m(),y=t5(),b=ie(),{currentUser:w}=_k();if((0,l.useEffect)((()=>{if(p&&null!==w&&void 0!==w&&w.uid&&null!==t&&void 0!==t&&t.id&&"boolean"===typeof v&&YC){Dv(vg(YC,"sideRooms",t.id,"presence",w.uid),{isMuted:v}).then((()=>{console.log(`[InsideStreamCallContent] Synced local mute state (${v}) to Firestore for ${w.uid}`)})).catch((e=>{console.error(`[InsideStreamCallContent] Error syncing local mute state to Firestore for ${w.uid}:`,e)}))}}),[v,p,null===w||void 0===w?void 0:w.uid,null===t||void 0===t?void 0:t.id,YC]),!p||!y)return(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,height:"100%"},children:[(0,Ke.jsx)(LN,{}),(0,Ke.jsx)($T,{sx:{ml:1},children:"Loading call infrastructure..."})]});const x=g;return(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:h.palette.background.default},children:[(0,Ke.jsxs)(rt,{sx:{p:1,borderBottom:1,borderColor:"divider",textAlign:"center",flexShrink:0,backgroundColor:IF(h.palette.background.paper,.95)},children:[(0,Ke.jsx)($T,{variant:"body2",fontWeight:"medium",children:t.name}),(0,Ke.jsxs)($T,{variant:"caption",color:"text.secondary",children:["(Mic: ",v?"Muted":"On",")"]})]}),(0,Ke.jsxs)(rt,{sx:{flexGrow:1,overflowY:"auto",p:2},children:[s&&(0,Ke.jsxs)(rt,{sx:{mt:1,mb:3,p:1,border:"1px solid",borderColor:"divider",borderRadius:1,backgroundColor:"action.hover"},children:[(0,Ke.jsxs)(rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,Ke.jsx)($T,{variant:"subtitle1",sx:{textAlign:"center",flexGrow:1},children:"Shared Video"}),n&&(0,Ke.jsx)(Pz,{title:"Clear Shared Video",children:(0,Ke.jsx)(EA,{onClick:()=>o(),size:"small",children:(0,Ke.jsx)(eq,{})})})]}),(0,Ke.jsx)(rt,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000","& iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0}},children:a(s)})]}),(0,Ke.jsxs)($T,{variant:"overline",display:"block",sx:{color:"text.secondary",mb:1},children:["Participants (",x.length,")"]}),(0,Ke.jsx)(pN,{container:!0,spacing:2,children:x.map((e=>(0,Ke.jsx)(pN,{item:!0,xs:4,sm:3,md:2,children:(0,Ke.jsx)(q7,{participant:e,isRoomOwner:n,isLocalParticipant:e.userId===(null===w||void 0===w?void 0:w.uid),localUserAuthData:w,onForceMuteToggle:c,onForceRemove:u,onForceBan:d,call:p,localUserIsMute:v})},e.sessionId)))}),0===x.length&&(0,Ke.jsx)($T,{sx:{width:"100%",textAlign:"center",color:h.palette.text.secondary,mt:4},children:"Waiting for others to join..."})]}),(0,Ke.jsxs)(rt,{sx:{flexShrink:0,p:2,borderTop:`1px solid ${h.palette.divider}`,display:"flex",justifyContent:"center",backgroundColor:h.palette.background.paper},children:[(0,Ke.jsx)(XA,{variant:"outlined",color:"error",startIcon:(0,Ke.jsx)(QH,{}),onClick:()=>{null===p||void 0===p||p.leave().then((()=>b("/side-rooms")))},sx:{borderRadius:"20px",textTransform:"none"},children:"Leave quietly"}),(0,Ke.jsx)(Pz,{title:v?"Unmute Microphone":"Mute Microphone",children:(0,Ke.jsx)(EA,{onClick:()=>null===p||void 0===p?void 0:p.microphone.toggle(),color:v?"default":"primary",sx:{ml:2},disabled:!p,children:v?(0,Ke.jsx)(tq,{}):(0,Ke.jsx)(ZH,{})})}),(0,Ke.jsx)(Pz,{title:"Share Video Link",children:(0,Ke.jsxs)("span",{children:[" ",(0,Ke.jsx)(EA,{onClick:()=>i(),color:"secondary",sx:{ml:2},disabled:!n&&!r,children:(0,Ke.jsx)(GH,{})})]})})]})]})},q7=e=>{let{participant:t,isRoomOwner:n,isLocalParticipant:r,onForceMuteToggle:i,onForceRemove:o,onForceBan:s,call:a,localUserAuthData:c,localUserIsMute:u}=e;const d=IE(),h=!t.publishedTracks.includes("audio"),{isSpeaking:p}=t,[f,m]=(0,l.useState)(null),g=Boolean(f),v=()=>m(null);let y,b;const w=t.custom;return r&&c?(y=c.displayName||c.email||t.userId,b=c.photoURL||t.image||void 0):w&&"string"===typeof w.displayName&&""!==w.displayName.trim()?(y=w.displayName,b=w.customAvatarUrl&&"string"===typeof w.customAvatarUrl&&""!==w.customAvatarUrl.trim()?w.customAvatarUrl:t.image||void 0):(y=t.name||t.userId,b=t.image||void 0),console.log("[StreamParticipantCard] Rendering with props:",{participant:t,isRoomOwner:n,isLocalParticipant:r,localUserAuthData:c}),console.log("[StreamParticipantCard] Determined values - displayName:",y,"avatarUrl:",b,"isSpeaking:",p,"participantIsMuted:",h),r&&console.log("[StreamParticipantCard - LOCAL Focus] localUserAuthData:",c,"Stream participant.userId:",t.userId),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",textAlign:"center"},children:[(0,Ke.jsx)(NT,{src:b,alt:y,onClick:()=>{r&&a&&a.microphone.toggle()},sx:{width:64,height:64,mb:.5,border:p?`3px solid ${d.palette.success.main}`:`2px solid ${IF(d.palette.divider,.5)}`,boxShadow:p?`0 0 8px ${d.palette.success.light}`:"none",transition:"border 0.2s ease-in-out, boxShadow 0.2s ease-in-out",cursor:r?"pointer":"default"}}),(r?u:h)&&(0,Ke.jsx)(tq,{sx:{fontSize:"1rem",color:d.palette.error.contrastText,backgroundColor:IF(d.palette.error.main,.8),borderRadius:"50%",padding:"3px",position:"absolute",bottom:20,right:5}}),r&&!u&&(0,Ke.jsx)(ZH,{sx:{fontSize:"1rem",color:d.palette.success.contrastText,backgroundColor:IF(d.palette.success.main,.8),borderRadius:"50%",padding:"3px",position:"absolute",bottom:20,right:5}}),(0,Ke.jsx)($T,{variant:"caption",noWrap:!0,sx:{width:"100%",lineHeight:1.2,fontSize:"0.75rem",fontWeight:"medium",color:d.palette.text.primary},children:y}),n&&!r&&(0,Ke.jsxs)(rt,{sx:{position:"absolute",top:-5,right:-5,zIndex:1},children:[(0,Ke.jsx)(Pz,{title:"Manage User",children:(0,Ke.jsx)(EA,{onClick:e=>m(e.currentTarget),size:"small",sx:{backgroundColor:IF(d.palette.background.default,.7),p:.2,borderRadius:"50%"},children:(0,Ke.jsx)(KH,{fontSize:"small"})})}),(0,Ke.jsxs)(FI,{anchorEl:f,open:g,onClose:v,MenuListProps:{dense:!0},children:[(0,Ke.jsxs)(JI,{onClick:async()=>{v(),i&&i(t.userId,h)},sx:{fontSize:"0.8rem"},children:[(0,Ke.jsx)(eR,{sx:{minWidth:"30px"},children:h?(0,Ke.jsx)(XH,{fontSize:"small"}):(0,Ke.jsx)(aq,{fontSize:"small"})}),h?"Unmute":"Mute"]}),(0,Ke.jsxs)(JI,{onClick:()=>{v(),o&&o(t.userId,t.name||t.userId)},sx:{color:"warning.dark",fontSize:"0.8rem"},children:[(0,Ke.jsx)(eR,{sx:{minWidth:"30px"},children:(0,Ke.jsx)(iV,{fontSize:"small",color:"warning"})}),"Remove"]}),(0,Ke.jsxs)(JI,{onClick:()=>{v(),s&&s(t.userId,t.name||t.userId)},sx:{color:"error.main",fontSize:"0.8rem"},children:[(0,Ke.jsx)(eR,{sx:{minWidth:"30px"},children:(0,Ke.jsx)(lq,{fontSize:"small",color:"error"})}),"Ban"]})]})]})]})},G7=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[s,a]=(0,l.useState)(null);(0,l.useEffect)((()=>{const e=Fv(av(gg(YC,"messages"),hv("timestamp","asc")),(e=>{const n=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()}}));t(n)}));return()=>e()}),[]);return(0,Ke.jsx)(DR,{maxWidth:"md",children:(0,Ke.jsxs)(rt,{sx:{mt:4,mb:4},children:[(0,Ke.jsx)($T,{variant:"h4",component:"h1",gutterBottom:!0,children:"Chat Room"}),(0,Ke.jsx)(oE,{sx:{maxHeight:"60vh",overflow:"auto",bgcolor:"background.paper",borderRadius:1},children:e.map((e=>{var t;return(0,Ke.jsxs)(PL,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,Ke.jsx)($T,{variant:"subtitle2",color:"primary",children:e.username}),(0,Ke.jsx)($T,{variant:"body1",children:e.text}),(0,Ke.jsx)($T,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]},e.id)}))}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""!==n.trim()&&YC)try{var t;await Lv(gg(YC,"messages"),{text:n,userId:null===(t=JC.currentUser)||void 0===t?void 0:t.uid,username:i||"Anonymous",timestamp:Gv()}),r("")}catch(s){console.error("Error sending message:",s)}},sx:{mt:2},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,variant:"outlined",placeholder:"Type your message...",value:n,onChange:e=>r(e.target.value),sx:{mb:2}}),(0,Ke.jsx)(XA,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})})};var K7=n(5361);function Y7(e){return(0,Qk.Ay)("MuiCollapse",e)}(0,Ze.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const J7=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Q7=(0,Gk.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,Le.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),X7=(0,Gk.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,Le.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Z7=(0,Gk.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,Le.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),eee=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiCollapse"}),{addEndListener:r,children:i,className:o,collapsedSize:s="0px",component:a,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:f,onExited:m,onExiting:g,orientation:v="vertical",style:y,timeout:b=K7.p0.standard,TransitionComponent:w=EE}=n,x=(0,Fe.A)(n,J7),S=(0,Le.A)({},n,{orientation:v,collapsedSize:s}),C=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,qk.A)(r,Y7,n)})(S),_=IE(),k=(0,tA.A)(),T=l.useRef(null),A=l.useRef(),E="number"===typeof s?`${s}px`:s,I="horizontal"===v,R=I?"width":"height",P=l.useRef(null),j=(0,VT.A)(t,P),N=e=>t=>{if(e){const n=P.current;void 0===t?e(n):e(n,t)}},O=()=>T.current?T.current[I?"clientWidth":"clientHeight"]:0,D=N(((e,t)=>{T.current&&I&&(T.current.style.position="absolute"),e.style[R]=E,d&&d(e,t)})),M=N(((e,t)=>{const n=O();T.current&&I&&(T.current.style.position="");const{duration:r,easing:i}=PE({style:y,timeout:b,easing:c},{mode:"enter"});if("auto"===b){const t=_.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,A.current=t}else e.style.transitionDuration="string"===typeof r?r:`${r}ms`;e.style[R]=`${n}px`,e.style.transitionTimingFunction=i,p&&p(e,t)})),L=N(((e,t)=>{e.style[R]="auto",h&&h(e,t)})),F=N((e=>{e.style[R]=`${O()}px`,f&&f(e)})),U=N(m),$=N((e=>{const t=O(),{duration:n,easing:r}=PE({style:y,timeout:b,easing:c},{mode:"exit"});if("auto"===b){const n=_.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,A.current=n}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[R]=E,e.style.transitionTimingFunction=r,g&&g(e)}));return(0,Ke.jsx)(w,(0,Le.A)({in:u,onEnter:D,onEntered:L,onEntering:M,onExit:F,onExited:U,onExiting:$,addEndListener:e=>{"auto"===b&&k.start(A.current||0,e),r&&r(P.current,e)},nodeRef:P,timeout:"auto"===b?null:b},x,{children:(e,t)=>(0,Ke.jsx)(Q7,(0,Le.A)({as:a,className:(0,Ue.A)(C.root,o,{entered:C.entered,exited:!u&&"0px"===E&&C.hidden}[e]),style:(0,Le.A)({[I?"minWidth":"minHeight"]:E},y),ref:j},t,{ownerState:(0,Le.A)({},S,{state:e}),children:(0,Ke.jsx)(X7,{ownerState:(0,Le.A)({},S,{state:e}),className:C.wrapper,ref:T,children:(0,Ke.jsx)(Z7,{ownerState:(0,Le.A)({},S,{state:e}),className:C.wrapperInner,children:i})})}))}))}));eee.muiSupportAuto=!0;const tee=eee;const nee=l.createContext({});function ree(e){return(0,Qk.Ay)("MuiAccordion",e)}const iee=(0,Ze.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),oee=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],see=(0,Gk.Ay)(nT,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${iee.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${iee.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${iee.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${iee.expanded}`]:{margin:"16px 0"}}}]}})),aee=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAccordion"}),{children:r,className:i,defaultExpanded:o=!1,disabled:s=!1,disableGutters:a=!1,expanded:c,onChange:u,square:d=!1,slots:h={},slotProps:p={},TransitionComponent:f,TransitionProps:m}=n,g=(0,Fe.A)(n,oee),[v,y]=(0,pj.A)({controlled:c,default:o,name:"Accordion",state:"expanded"}),b=l.useCallback((e=>{y(!v),u&&u(e,!v)}),[v,u,y]),[w,...x]=l.Children.toArray(r),S=l.useMemo((()=>({expanded:v,disabled:s,disableGutters:a,toggle:b})),[v,s,a,b]),C=(0,Le.A)({},n,{square:d,disabled:s,disableGutters:a,expanded:v}),_=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,s={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,qk.A)(s,ree,t)})(C),k=(0,Le.A)({transition:f},h),T=(0,Le.A)({transition:m},p),[A,E]=AT("transition",{elementType:tee,externalForwardedProps:{slots:k,slotProps:T},ownerState:C});return(0,Ke.jsxs)(see,(0,Le.A)({className:(0,Ue.A)(_.root,i),ref:t,ownerState:C,square:d},g,{children:[(0,Ke.jsx)(nee.Provider,{value:S,children:w}),(0,Ke.jsx)(A,(0,Le.A)({in:v,timeout:"auto"},E,{children:(0,Ke.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:_.region,children:x})}))]}))})),lee=aee;function cee(e){return(0,Qk.Ay)("MuiAccordionSummary",e)}const uee=(0,Ze.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),dee=["children","className","expandIcon","focusVisibleClassName","onClick"],hee=(0,Gk.Ay)(SA,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${uee.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${uee.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${uee.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${uee.expanded}`]:{minHeight:64}}}]}})),pee=(0,Gk.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${uee.expanded}`]:{margin:"20px 0"}}}]}})),fee=(0,Gk.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${uee.expanded}`]:{transform:"rotate(180deg)"}}})),mee=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAccordionSummary"}),{children:r,className:i,expandIcon:o,focusVisibleClassName:s,onClick:a}=n,c=(0,Fe.A)(n,dee),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=l.useContext(nee),f=(0,Le.A)({},n,{expanded:h,disabled:u,disableGutters:d}),m=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,qk.A)(o,cee,t)})(f);return(0,Ke.jsxs)(hee,(0,Le.A)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,Ue.A)(m.root,i),focusVisibleClassName:(0,Ue.A)(m.focusVisible,s),onClick:e=>{p&&p(e),a&&a(e)},ref:t,ownerState:f},c,{children:[(0,Ke.jsx)(pee,{className:m.content,ownerState:f,children:r}),o&&(0,Ke.jsx)(fee,{className:m.expandIconWrapper,ownerState:f,children:o})]}))})),gee=mee;function vee(e){return(0,Qk.Ay)("MuiAccordionDetails",e)}(0,Ze.A)("MuiAccordionDetails",["root"]);const yee=["className"],bee=(0,Gk.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),wee=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,Fe.A)(n,yee),o=n,s=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},vee,t)})(o);return(0,Ke.jsx)(bee,(0,Le.A)({className:(0,Ue.A)(s.root,r),ref:t,ownerState:o},i))})),xee=wee,See=(0,fT.A)([(0,Ke.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,Ke.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),Cee=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),_ee=(0,fT.A)((0,Ke.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),kee=(0,fT.A)((0,Ke.jsx)("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),Tee=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),Aee=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline"),Eee=(0,fT.A)((0,Ke.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport"),Iee=(0,fT.A)((0,Ke.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report"),Ree=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),Pee=()=>(0,Ke.jsxs)(rt,{sx:{mx:"auto"},children:[(0,Ke.jsx)($T,{variant:"body1",sx:{mb:3},children:"These guidelines help ensure SideEye remains a platform where users can express themselves freely while maintaining a respectful and safe environment for all."}),(0,Ke.jsxs)($T,{variant:"body1",sx:{mb:3,bgcolor:"info.light",p:2,borderRadius:1},children:[(0,Ke.jsx)("strong",{children:"Important Notice:"}),' SideEye uses an AI-powered moderation system that automatically scans all content against our community guidelines. Violations will result in strike points on your account, which can lead to warnings, restrictions, or account suspension. See the "Strike System" section below for more details.']}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(jV,{}),children:(0,Ke.jsx)($T,{children:"Our Commitment to Safety"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"We are committed to maintaining a safe and respectful environment for all users. Our platform encourages healthy banter and shade while strictly prohibiting harassment, bullying, harmful content, misinformation, fraud, and cybercrime."}),(0,Ke.jsx)($T,{paragraph:!0,children:"We believe in:"}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(LV,{})}),(0,Ke.jsx)(iR,{primary:"Protecting User Privacy",secondary:"We implement strict data protection measures and transparent privacy policies"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(See,{})}),(0,Ke.jsx)(iR,{primary:"Mental Health Support",secondary:"We provide resources and tools to support users' wellbeing"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Cee,{})}),(0,Ke.jsx)(iR,{primary:"Inclusive Community",secondary:"We foster an environment that welcomes diverse perspectives and experiences"})]})]})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(_ee,{}),children:(0,Ke.jsx)($T,{children:"Prohibited Content"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"The following content is not permitted on our platform and may result in content removal, account restrictions, or termination:"}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Harassment & Bullying",secondary:"Targeted attacks, threats, persistent unwanted attention, or content designed to degrade or shame others"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Hate Speech",secondary:"Content that promotes discrimination, hostility, or violence against protected characteristics including race, ethnicity, national origin, religious affiliation, sexual orientation, gender, gender identity, or disability"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Misinformation",secondary:"Deliberate spreading of false information about health, science, elections, or current events that may cause public harm"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Fraud & Scams",secondary:"Financial scams, phishing attempts, pyramid schemes, deceptive business practices, or unauthorized promotions"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Cybercrime",secondary:"Hacking attempts, malware distribution, unauthorized access, or other illegal online activities"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Adult Content & Exploitation",secondary:"Sexually explicit content, non-consensual intimate imagery, sexual exploitation, or content that sexualizes minors"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Violence & Gore",secondary:"Gratuitous violence, content promoting self-harm, suicide, eating disorders, or graphic injury"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Copyright Infringement",secondary:"Content that violates copyright laws, including unauthorized use of intellectual property, especially in Vibits videos"})]})]})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(kee,{}),children:(0,Ke.jsx)($T,{children:"Vibits Community Guidelines"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"Our Vibits video sharing feature has specific guidelines to ensure a safe and enjoyable experience for all users:"}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Tee,{})}),(0,Ke.jsx)(iR,{primary:"Content Ownership",secondary:"Only upload videos that you've created or have permission to use. Respect copyright and intellectual property rights"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Appropriate Content",secondary:"Videos must not contain nudity, pornography, violence, hate speech, dangerous activities, or illegal substances"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Aee,{})}),(0,Ke.jsx)(iR,{primary:"Privacy & Consent",secondary:"Get consent before featuring identifiable individuals in your videos, especially in private settings"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(FV,{})}),(0,Ke.jsx)(iR,{primary:"Disclosure",secondary:"Clearly disclose if your content is sponsored, contains affiliate links, or is otherwise commercial in nature"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(LV,{})}),(0,Ke.jsx)(iR,{primary:"Music & Audio",secondary:"Only use music and audio that you have rights to use or that is available through our platform's licensed library"})]})]}),(0,Ke.jsx)($T,{paragraph:!0,children:"Vibits content is subject to both human and AI-powered moderation. Videos that violate these guidelines may be removed, and repeated violations may result in account restrictions or termination."})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(kee,{}),children:(0,Ke.jsx)($T,{children:"Content Moderation"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"Our content moderation approach combines technology and human review to enforce our community guidelines fairly and consistently:"}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Tee,{})}),(0,Ke.jsx)(iR,{primary:"AI-Powered Detection",secondary:"Advanced algorithms detect harmful content, misinformation, and suspicious activities in real-time"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Eee,{})}),(0,Ke.jsx)(iR,{primary:"Automated Checks",secondary:"Real-time scanning for fraud, cybercrime, and policy violations using pattern recognition"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Aee,{})}),(0,Ke.jsx)(iR,{primary:"Human Review",secondary:"Trained moderators review flagged content and complex cases with cultural and contextual awareness"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(FV,{})}),(0,Ke.jsx)(iR,{primary:"Educational Approach",secondary:"First-time or minor violations may result in warnings with educational resources"})]})]}),(0,Ke.jsx)(cR,{sx:{my:2}}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Enforcement Actions"}),(0,Ke.jsx)($T,{paragraph:!0,children:"Depending on the severity and frequency of violations, we may take the following actions:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Content removal"}),(0,Ke.jsx)("li",{children:"Warning notifications"}),(0,Ke.jsx)("li",{children:"Temporary feature restrictions"}),(0,Ke.jsx)("li",{children:"Temporary account suspension"}),(0,Ke.jsx)("li",{children:"Permanent account termination"})]})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(_ee,{}),children:(0,Ke.jsx)($T,{children:"Strike System"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"SideEye employs a strike system to enforce our community guidelines fairly and consistently:"}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Strike Points"}),(0,Ke.jsx)($T,{paragraph:!0,children:"Violations of our guidelines result in strike points based on severity:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Standard violations:"})," 1 strike point"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Serious violations"})," (misinformation, fraud, violence): 1.5 strike points"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Severe violations"})," (harmful content, cybercrime, exploitation): 2 strike points"]})]}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Consequences"}),(0,Ke.jsx)($T,{paragraph:!0,children:"As strike points accumulate, the following actions will be taken:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"3+ points:"})," Warning and educational resources"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"6+ points:"})," Temporary feature restrictions for 3 days"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"9+ points:"})," Account suspension for 7 days"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"12+ points:"})," Permanent account suspension"]})]}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Appeals"}),(0,Ke.jsx)($T,{paragraph:!0,children:"If you believe a strike was issued in error, you can appeal through your account settings or by contacting support@sideeye.com."}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,children:"Expiration"}),(0,Ke.jsx)($T,{paragraph:!0,children:"Strike points remain on your account for 6 months before beginning to expire."})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(Iee,{}),children:(0,Ke.jsx)($T,{children:"Reporting & Moderation"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"We rely on our community to help maintain a safe environment. If you encounter content that violates our guidelines, please report it immediately."}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Iee,{})}),(0,Ke.jsx)(iR,{primary:"How to Report",secondary:"Click the three dots menu on any post, comment, or profile and select 'Report' to flag content that violates our guidelines"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Iee,{})}),(0,Ke.jsx)(iR,{primary:"What Happens Next",secondary:"Our team reviews reports promptly, typically within 24-48 hours, and takes appropriate action based on our guidelines"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Iee,{})}),(0,Ke.jsx)(iR,{primary:"Appeals Process",secondary:"If you believe a moderation decision was made in error, you can appeal through your account settings or by contacting support@sideeye.com"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Iee,{})}),(0,Ke.jsx)(iR,{primary:"Transparency",secondary:"We publish regular reports on content moderation actions and policy enforcement to maintain accountability"})]})]})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(Ree,{}),children:(0,Ke.jsx)($T,{children:"Getting Help"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"We're committed to supporting our users' wellbeing and safety both on and off the platform."}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Ree,{})}),(0,Ke.jsx)(iR,{primary:"Support Resources",secondary:"Access to mental health resources, crisis helplines, and support services through our Help Center"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Ree,{})}),(0,Ke.jsx)(iR,{primary:"Safety Tips",secondary:"Guidelines for protecting your privacy, recognizing potential scams, and staying safe online"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Ree,{})}),(0,Ke.jsx)(iR,{primary:"Contact Us",secondary:"Reach out to our support team at support@sideeye.com for assistance with safety concerns"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Ree,{})}),(0,Ke.jsx)(iR,{primary:"Emergency Situations",secondary:"If you're experiencing an emergency or believe someone is in immediate danger, please contact local emergency services immediately"})]})]}),(0,Ke.jsx)($T,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:"SideEye is committed to continuously improving our safety measures and community guidelines. We regularly update our policies based on emerging threats, user feedback, and industry best practices."})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(jV,{}),children:(0,Ke.jsx)($T,{children:"Vibits Security & Privacy"})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{paragraph:!0,children:"We take the security and privacy of your Vibits videos seriously. Here's how we protect your content:"}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(LV,{})}),(0,Ke.jsx)(iR,{primary:"Secure Storage",secondary:"All videos are stored using industry-standard encryption and secure cloud storage protocols"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Aee,{})}),(0,Ke.jsx)(iR,{primary:"Privacy Controls",secondary:"You can delete your videos at any time, and you control who can view, comment on, and share your content"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Tee,{})}),(0,Ke.jsx)(iR,{primary:"Content Protection",secondary:"We implement measures to prevent unauthorized downloading and redistribution of your videos"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Eee,{})}),(0,Ke.jsx)(iR,{primary:"Metadata Stripping",secondary:"We remove sensitive metadata from videos that could reveal your location or device information"})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(lq,{})}),(0,Ke.jsx)(iR,{primary:"Report & Remove",secondary:"We provide tools to report videos that violate our guidelines, and we respond quickly to removal requests"})]})]}),(0,Ke.jsx)($T,{paragraph:!0,children:"To enhance your privacy when using Vibits:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Be mindful of what's visible in your videos (addresses, personal documents, etc.)"}),(0,Ke.jsx)("li",{children:"Consider the environment you're filming in and who might be visible in the background"}),(0,Ke.jsx)("li",{children:"Review your videos before posting to ensure you're comfortable with all content"}),(0,Ke.jsx)("li",{children:"Use the reporting tools if you see content that violates our guidelines"})]})]})]})]}),jee=()=>(0,Ke.jsx)(DR,{maxWidth:"lg",children:(0,Ke.jsxs)(rt,{sx:{py:4},children:[(0,Ke.jsx)($T,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Safety & Community Guidelines"}),(0,Ke.jsx)(nT,{elevation:3,sx:{p:{xs:2,md:4},borderRadius:2},children:(0,Ke.jsx)(Pee,{})})]})}),Nee=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Oee=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),Dee=(0,fT.A)((0,Ke.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),Mee=(0,fT.A)((0,Ke.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Lee=()=>{const{currentUser:e,userProfile:t}=_k(),{canViewProfile:n,canViewContent:r}=Tk(),[i,o]=(0,l.useState)(!1),[s,a]=(0,l.useState)({emailVerified:!1,deviceVerified:!1,lastSecurityUpdate:null});(0,l.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return;const t=Fv(vg(YC,"users",e.uid),(t=>{if(t.exists()){const n=t.data();o(n.isPrivate||!1),a({emailVerified:e.emailVerified||!1,deviceVerified:n.sourceCodeSetupComplete||!1,lastSecurityUpdate:n.lastSecurityUpdate||null})}}));return()=>t()}),[null===e||void 0===e?void 0:e.uid,null===e||void 0===e?void 0:e.emailVerified]);return(0,Ke.jsx)(DR,{maxWidth:"md",sx:{py:4},children:(0,Ke.jsxs)(nT,{elevation:3,sx:{p:4},children:[(0,Ke.jsxs)($T,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ke.jsx)(jV,{color:"primary"})," Security & Authentication"]}),(0,Ke.jsx)(eN,{severity:"info",sx:{mt:2,mb:4},children:"SideEye takes your security and privacy seriously. Our multi-layer authentication system helps protect your account and data from unauthorized access."}),(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Security Status"}),(0,Ke.jsx)(cR,{sx:{mb:3}}),(0,Ke.jsxs)(Bz,{direction:"row",spacing:2,sx:{mb:3},children:[(0,Ke.jsx)($L,{icon:s.emailVerified?(0,Ke.jsx)(Nee,{}):(0,Ke.jsx)(Oee,{}),label:s.emailVerified?"Email Verified":"Email Not Verified",color:s.emailVerified?"success":"error",variant:"outlined"}),(0,Ke.jsx)($L,{icon:s.deviceVerified?(0,Ke.jsx)(Nee,{}):(0,Ke.jsx)(Oee,{}),label:s.deviceVerified?"Device Verified":"Device Not Verified",color:s.deviceVerified?"success":"error",variant:"outlined"})]})]}),(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Account Privacy"}),(0,Ke.jsx)(cR,{sx:{mb:3}}),(0,Ke.jsxs)(nT,{elevation:1,sx:{p:3},children:[(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(RV,{checked:i,onChange:async()=>{if(null!==e&&void 0!==e&&e.uid)try{await Dv(vg(YC,"users",e.uid),{isPrivate:!i,lastSecurityUpdate:Gv()}),C_.success("Account is now "+(i?"public":"private"))}catch(Nb){console.error("Error updating privacy settings:",Nb),C_.error("Failed to update privacy settings")}},color:"primary"}),label:(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"subtitle1",children:"Private Account"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:i?"Only approved followers can see your content":"Anyone can see your content"})]})}),(0,Ke.jsx)(eN,{severity:"info",sx:{mt:2},children:i?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."})]})]}),(0,Ke.jsxs)(rt,{sx:{mb:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Authentication Flow"}),(0,Ke.jsx)(cR,{sx:{mb:3}}),(0,Ke.jsxs)(oE,{children:[(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Dee,{color:"primary"})}),(0,Ke.jsx)(iR,{primary:"Step 1: Email & Password Authentication",secondary:"First, you log in with your email and password. This provides the initial layer of account security."})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(Tee,{color:"primary"})}),(0,Ke.jsx)(iR,{primary:"Step 2: Email Verification",secondary:"New accounts must verify their email address before gaining full access to all features."})]}),(0,Ke.jsxs)(PL,{children:[(0,Ke.jsx)(eR,{children:(0,Ke.jsx)(OV,{color:"primary"})}),(0,Ke.jsx)(iR,{primary:"Step 3: Source Code Authentication",secondary:"When logging in from a new device, you must enter your 8-digit source code as an additional security measure."})]})]})]}),(0,Ke.jsxs)(lee,{children:[(0,Ke.jsx)(gee,{expandIcon:(0,Ke.jsx)(Mee,{}),children:(0,Ke.jsxs)($T,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ke.jsx)(FV,{fontSize:"small"})," Browser Privacy Settings"]})}),(0,Ke.jsxs)(xee,{children:[(0,Ke.jsx)($T,{variant:"body2",paragraph:!0,children:"Some browsers have strict privacy settings that can affect device registration:"}),(0,Ke.jsxs)(oE,{dense:!0,children:[(0,Ke.jsx)(PL,{children:(0,Ke.jsx)(iR,{primary:"\u2022 Safari users may need to enable website data storage",secondary:"Safari > Preferences > Privacy > Website Data"})}),(0,Ke.jsx)(PL,{children:(0,Ke.jsx)(iR,{primary:"\u2022 Private/Incognito browsing may require re-authentication",secondary:"Devices won't be persistently registered in private browsing modes"})}),(0,Ke.jsx)(PL,{children:(0,Ke.jsx)(iR,{primary:"\u2022 Clearing browser data will remove device registration",secondary:"You'll need to re-authenticate with your Source Code"})})]})]})]})]})})},Fee=()=>(0,Ke.jsx)(DR,{maxWidth:"md",sx:{py:4},children:(0,Ke.jsxs)(nT,{elevation:3,sx:{p:4},children:[(0,Ke.jsx)($T,{variant:"h4",component:"h1",gutterBottom:!0,children:"Privacy Policy"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"1. Information We Collect"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We collect information that you provide directly to us, including:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Account information (username, email, display name)"}),(0,Ke.jsx)("li",{children:"Profile information (bio, profile picture, custom avatars)"}),(0,Ke.jsx)("li",{children:"Content you post (posts, comments, likes, reposts)"}),(0,Ke.jsx)("li",{children:"Audio content from Side Rooms and Spaces"}),(0,Ke.jsx)("li",{children:"Connection data (followers, following relationships)"}),(0,Ke.jsx)("li",{children:"Messages and communications between users"}),(0,Ke.jsx)("li",{children:"Usage information and interaction with the platform"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"2. How We Use Your Information"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Provide and maintain our services"}),(0,Ke.jsx)("li",{children:"Improve and personalize your experience"}),(0,Ke.jsx)("li",{children:"Facilitate connections between users"}),(0,Ke.jsx)("li",{children:"Process and deliver messages between users"}),(0,Ke.jsx)("li",{children:"Monitor and enforce our community guidelines"}),(0,Ke.jsx)("li",{children:"Communicate with you about updates and changes"}),(0,Ke.jsx)("li",{children:"Ensure platform safety and security"}),(0,Ke.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"3. Sharing Your Information"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We may share your information in the following ways:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"With Other Users:"})," Your profile information, posts, videos, and content are shared with other users according to your privacy settings."]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Service Providers:"})," We may share information with third-party vendors who provide services on our behalf, including video hosting and processing."]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect rights, safety, and security."]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets."]})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"4. Data Security"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We implement appropriate security measures to protect your personal information, including encryption of sensitive data, secure storage protocols, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"5. Your Rights"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You have the right to:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Access your personal information"}),(0,Ke.jsx)("li",{children:"Correct inaccurate information"}),(0,Ke.jsx)("li",{children:"Delete your account and associated data"}),(0,Ke.jsx)("li",{children:"Delete audio content from Side Rooms and Spaces"}),(0,Ke.jsx)("li",{children:"Control your privacy settings and follower relationships"}),(0,Ke.jsx)("li",{children:"Restrict processing of your information"}),(0,Ke.jsx)("li",{children:"Request a data export of your content"}),(0,Ke.jsx)("li",{children:"Opt-out of marketing communications"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"6. Content Removal and Retention"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"When you delete content, it may remain in our backup systems for a limited time. Deleted content is moved to a temporary storage for 24 hours before permanent deletion, allowing for potential recovery if accidentally deleted. For audio content, we may retain non-personally identifiable analytics data even after deletion."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"7. Cookies and Tracking"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to improve your experience, maintain login sessions, and analyze usage patterns. Please see our Cookie Policy for more details on how we use these technologies."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"8. Third-Party Links"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Our service may contain links to third-party websites or services that are not owned or controlled by us. We have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party services."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"9. Audio Content Information"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"When you participate in Side Rooms or Spaces, we collect:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Audio Content:"})," The audio data from your participation"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Metadata:"})," Information such as duration, timestamps, and participant information"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"User Association:"})," Connection between your account and the audio session"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Engagement Data:"})," Participation statistics and interaction data"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Device Information:"})," Information about the device used to participate"]})]}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use this information to provide the audio chat services, improve our platform, and ensure quality of service. You maintain control over your audio content and can request deletion at any time, though we may retain anonymized analytics data."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"10. Children's Privacy"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Our services are not intended for use by children under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"11. Changes to This Policy"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last updated" date.'})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"12. Contact Us"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["If you have any questions about this Privacy Policy, please contact us at:",(0,Ke.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Uee=()=>(0,Ke.jsxs)(DR,{maxWidth:"lg",sx:{py:12},children:[(0,Ke.jsxs)(nT,{elevation:3,sx:{p:{xs:3,md:6},mb:6},children:[(0,Ke.jsx)($T,{variant:"h1",component:"h1",sx:{textAlign:"center",fontWeight:"bold",mb:6,fontSize:{xs:"2.5rem",md:"3.5rem"},color:"primary.main",textTransform:"uppercase",letterSpacing:2},children:"About SideEye"}),(0,Ke.jsx)(cR,{sx:{my:6}}),(0,Ke.jsxs)(rt,{sx:{mb:8},children:[(0,Ke.jsx)($T,{variant:"h2",sx:{fontWeight:"medium",mb:4,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Our Mission"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"SideEye is a moderated social media platform dedicated to creating a safe and engaging space for users to share their thoughts, connect with others, and express themselves through various forms of content. We believe in fostering meaningful conversations while maintaining a respectful and inclusive environment through our comprehensive moderation system that ensures all users can interact authentically within clear community guidelines."})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h2",sx:{fontWeight:"medium",mb:6,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Features"}),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:6},children:[(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Side Rooms"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Create or join audio-based discussion rooms where you can connect with other users in real-time. Side Rooms provide a space for meaningful conversations and community building through voice interactions. These rooms can be public or private, with customizable settings for membership and moderation. Each room serves as a dedicated space for focused discussions around specific topics or interests, allowing users to engage in authentic conversations with like-minded individuals."})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Discover"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Explore new content, find interesting users to follow, and discover trending Side Rooms through our Discover feature. This curated exploration space helps you find content aligned with your interests and introduces you to new communities within the platform. Discover makes it easy to expand your network and find engaging discussions to join."})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"AI Moderation"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Our advanced AI moderation system automatically scans all content against our community guidelines, detecting potential violations across multiple categories including harmful content, misinformation, fraud, cybercrime, adult content, and violence. This system helps maintain a safe environment by issuing appropriate warnings or restrictions when needed, while protecting users from harmful interactions."})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"User Expression"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Express yourself through various reaction types including sideEye, tea, shade, and petty. Our platform encourages authentic communication with features designed for meaningful social interaction. Whether you're sharing thoughts, connecting with others, or participating in discussions, SideEye provides the tools for genuine self-expression within a respectful framework."})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Audio Spaces"}),(0,Ke.jsx)($T,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Join or host live audio conversations in our Spaces feature. Similar to popular audio chat platforms, Spaces allow you to have real-time voice discussions with other users. Hosts can invite speakers, manage participants, and create an engaging audio experience. Listeners can join to hear the conversation and request to speak when appropriate. Perfect for discussions, Q&A sessions, or casual hangouts with your community."})]})]})]})]}),(0,Ke.jsx)(rt,{sx:{textAlign:"center",mt:8},children:(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",children:["\xa9 ",(new Date).getFullYear()," SideEye | Created by Enoch Asekomhe | All Rights Reserved"]})})]}),$ee=()=>(0,Ke.jsx)(DR,{maxWidth:"md",sx:{py:4},children:(0,Ke.jsxs)(nT,{elevation:3,sx:{p:4},children:[(0,Ke.jsx)($T,{variant:"h4",component:"h1",gutterBottom:!0,children:"Terms of Service"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"1. Acceptance of Terms"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"By accessing or using SideEye, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"2. User Accounts"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"To use certain features of SideEye, you must create an account. You are responsible for:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Maintaining the confidentiality of your account information"}),(0,Ke.jsx)("li",{children:"All activities that occur under your account"}),(0,Ke.jsx)("li",{children:"Providing accurate and complete profile information"}),(0,Ke.jsx)("li",{children:"Securing your login credentials"}),(0,Ke.jsx)("li",{children:"Notifying us immediately of any unauthorized use"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"3. User Conduct"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You agree not to:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Post or transmit any content that is unlawful, harmful, threatening, abusive, harassing, defamatory, vulgar, obscene, or otherwise objectionable"}),(0,Ke.jsx)("li",{children:"Share audio content that contains inappropriate material, copyright infringement, or violate our Community Guidelines"}),(0,Ke.jsx)("li",{children:"Harass, bully, intimidate, or stalk other users"}),(0,Ke.jsx)("li",{children:"Impersonate any person or entity or falsely state or misrepresent your affiliation with a person or entity"}),(0,Ke.jsx)("li",{children:"Interfere with or disrupt the proper functioning of the service or servers"}),(0,Ke.jsx)("li",{children:"Attempt to gain unauthorized access to any portion of the service or other systems"}),(0,Ke.jsx)("li",{children:"Use the service for any illegal purpose or in violation of any local, state, national, or international law"}),(0,Ke.jsx)("li",{children:"Collect or store personal data about other users without their consent"}),(0,Ke.jsx)("li",{children:"Create multiple accounts to evade restrictions or limitations"}),(0,Ke.jsx)("li",{children:"Engage in spamming, phishing, or other deceptive practices"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"4. Content Ownership and License"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You retain ownership of any content you post on SideEye, including audio content shared in Side Rooms and Spaces. By posting content, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, reproduce, process, adapt, modify, publish, transmit, display, and distribute your content in any and all media or distribution methods."}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"This license allows us to make your content available to the rest of the world and to let others do the same. The license continues even if you stop using our services, but you can delete content from public view at any time."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"5. Audio Content and Participation"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"SideEye provides audio-based features including Side Rooms and Spaces for real-time voice conversations. When participating in these features, you agree to:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Only share audio content that you have the right to share"}),(0,Ke.jsx)("li",{children:"Not share content that infringes on others' intellectual property rights"}),(0,Ke.jsx)("li",{children:"Not share content containing explicit material, hate speech, violence, or any content that violates our Community Guidelines"}),(0,Ke.jsx)("li",{children:"Respect other participants and maintain appropriate conduct during audio sessions"}),(0,Ke.jsx)("li",{children:"Grant us the license as described in Section 4 for audio content you share"}),(0,Ke.jsx)("li",{children:"Understand that we may remove content or restrict access that violates our policies without prior notice"})]}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We may provide tools to enhance your audio experience, but we do not claim ownership of your original content. We reserve the right to moderate audio sessions and take appropriate action to maintain community standards."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"6. Follower Relationships"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"SideEye allows users to follow other users and be followed by others. When you follow someone, you'll see their posts and activity on your feed. Users you follow will be able to see that you follow them. Similarly, users who follow you will be visible to you and others. You can unfollow users at any time."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"7. Direct Messages"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"SideEye provides a direct messaging feature for users to communicate privately. You are responsible for the content of your messages. While we strive to protect the privacy of your messages, we reserve the right to review content in the case of reported violations. We may take action if messages violate our guidelines."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"8. Content Moderation"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We reserve the right to moderate content posted on our platform, including audio content from Side Rooms and Spaces. We may remove, restrict, or disable access to any content or account that we determine violates these Terms or our Community Guidelines. Content moderation decisions are made in our sole discretion. Users can appeal moderation decisions through our support channels."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"9. Intellectual Property"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"The SideEye service and its original content, features, and functionality are and will remain the exclusive property of SideEye and its licensors. The service is protected by copyright, trademark, and other laws. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of SideEye."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"10. Termination"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We reserve the right to terminate or suspend your account and access to the service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties, or for any other reason. Upon termination, your right to use the service will immediately cease."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"11. Content Removal and Recovery"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"When you delete content, including audio content from Side Rooms and Spaces, it will be moved to a trash area for 24 hours before permanent deletion, allowing for recovery if accidentally deleted. We reserve the right to retain certain information as required by law or for legitimate business purposes."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"12. Disclaimer"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:'The service is provided "as is" without any warranties, express or implied. We do not guarantee that the service will be uninterrupted, timely, secure, or error-free. We make no warranties or representations about the accuracy or completeness of the content provided by our users.'})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"13. Limitation of Liability"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"In no event shall SideEye be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or related to your use of the service, including but not limited to damages for loss of profits, goodwill, use, data, or other intangible losses."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"14. Indemnification"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You agree to indemnify and hold harmless SideEye and its officers, directors, employees, and agents from any claims, damages, liabilities, costs, or expenses (including reasonable attorney fees) arising from your use of the service or your violation of these Terms."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"15. DMCA Compliance"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"SideEye respects the intellectual property rights of others. If you believe that your work has been copied in a way that constitutes copyright infringement in our audio features or elsewhere on our platform, please provide our copyright agent with the following information:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"An electronic or physical signature of the person authorized to act on behalf of the copyright owner"}),(0,Ke.jsx)("li",{children:"A description of the copyrighted work that you claim has been infringed"}),(0,Ke.jsx)("li",{children:"A description of where the material that you claim is infringing is located on the site"}),(0,Ke.jsx)("li",{children:"Your address, telephone number, and email address"}),(0,Ke.jsx)("li",{children:"A statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law"}),(0,Ke.jsx)("li",{children:"A statement by you, made under penalty of perjury, that the above information is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf"})]}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Our copyright agent can be reached at: dmca@sideeye.com"})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"16. Changes to Terms"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on the service and updating the "Last updated" date. Your continued use of the service after such changes constitutes your acceptance of the new Terms.'})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"17. Governing Law"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These Terms shall be governed by and construed in accordance with the laws of the jurisdiction in which we operate, without regard to its conflict of law provisions."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"18. Contact Information"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["If you have any questions about these Terms, please contact us at:",(0,Ke.jsx)("br",{}),"Email: legal@sideeye.com"]})]})]})}),Vee=()=>(0,Ke.jsx)(DR,{maxWidth:"md",sx:{py:4},children:(0,Ke.jsxs)(nT,{elevation:3,sx:{p:4},children:[(0,Ke.jsx)($T,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cookie Policy"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Introduction"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use cookies and similar technologies to provide, improve, and secure our services. This Cookie Policy explains how we use cookies, what types we use, their purposes, and how you can control them. These technologies help us deliver our audio-based features, including Side Rooms and Spaces, and ensure a smooth user experience."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"What Are Cookies?"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:'Cookies are small text files that are stored on your device when you visit a website. They are widely used to make websites work more efficiently and provide information to the website owners. Cookies can be "persistent" or "session" cookies. Persistent cookies remain on your device after you close your browser, while session cookies are deleted when you close your browser.'})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Types of Cookies We Use"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use the following types of cookies for the purposes explained below:"}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"1. Essential Cookies"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These cookies are necessary for the functioning of our platform and cannot be switched off. They include:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Authentication cookies to recognize you when you log in"}),(0,Ke.jsx)("li",{children:"Security cookies to prevent fraudulent activities"}),(0,Ke.jsx)("li",{children:"Session cookies to maintain your active session"})]}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"2. Performance Cookies"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These cookies help us understand how visitors interact with our platform by collecting information anonymously. They include:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Analytics cookies to measure user interactions with content"}),(0,Ke.jsx)("li",{children:"Error monitoring cookies to identify and fix platform issues"}),(0,Ke.jsx)("li",{children:"Load balancing cookies to distribute traffic to our servers"}),(0,Ke.jsx)("li",{children:"Audio quality monitoring cookies to ensure optimal performance"})]}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"3. Functional Cookies"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These cookies enable enhanced functionality and personalization. They include:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Preference cookies to remember your settings and choices"}),(0,Ke.jsx)("li",{children:"Interface customization cookies for personalized layouts"}),(0,Ke.jsx)("li",{children:"Language preference cookies"})]}),(0,Ke.jsx)($T,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"4. Targeting/Advertising Cookies"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These cookies may be set through our site by our advertising partners to build a profile of your interests. They include:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Social media cookies for content sharing and network integration"}),(0,Ke.jsx)("li",{children:"Recommendation cookies to suggest relevant content"})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Specific Cookies Used by SideEye"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Below are some of the key cookies we use on SideEye:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"sideeye_session"}),": Authentication and session management"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"sideeye_preferences"}),": Stores user preferences like theme and layout settings"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"sideeye_auth"}),": Maintains login state and authentication details"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"sideeye_analytics"}),": Collects anonymous usage data to improve our services"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"sideeye_audio"}),": Stores audio quality preferences and device settings"]})]})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Third-Party Cookies"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We may allow third parties to place cookies on your device when you visit our platform. These third parties include:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Analytics providers"})," (such as Google Analytics) to help us understand user behavior"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Social media platforms"})," (such as Twitter, Facebook) when you use social sharing features"]}),(0,Ke.jsxs)("li",{children:[(0,Ke.jsx)("strong",{children:"Security services"})," to protect against malicious activities"]})]}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"These third parties may use cookies, web beacons, and similar technologies to collect information about your use of our platform and other websites. We do not control these third-party technologies and their use is governed by the privacy policies of these third parties."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Managing Your Cookie Preferences"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You can control and/or delete cookies as you wish. You can delete all cookies that are already on your device and you can set most browsers to prevent them from being placed. However, if you do this, you may have to manually adjust some preferences every time you visit our platform, and some services and functionalities may not work."}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"You can manage your cookie preferences through your browser settings:"}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsxs)("li",{children:["Chrome: Settings ","->"," Privacy and Security ","->"," Cookies and other site data"]}),(0,Ke.jsxs)("li",{children:["Firefox: Options ","->"," Privacy & Security ","->"," Cookies and Site Data"]}),(0,Ke.jsxs)("li",{children:["Safari: Preferences ","->"," Privacy ","->"," Cookies and website data"]}),(0,Ke.jsxs)("li",{children:["Edge: Settings ","->"," Cookies and site permissions ","->"," Cookies and site data"]})]}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"For more information about cookies and how to disable them, please visit www.allaboutcookies.org"})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Do Not Track"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:'Some browsers have a "Do Not Track" feature that signals to websites that you visit that you do not want to have your online activity tracked. Given the diverse and evolving state of "Do Not Track" implementations, we may or may not respond to "Do Not Track" signals.'})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Changes to Our Cookie Policy"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We may update our Cookie Policy from time to time. Any changes will be posted on this page with an updated revision date. We encourage you to review this Cookie Policy periodically to stay informed about our use of cookies."})]}),(0,Ke.jsxs)(rt,{sx:{mt:4},children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Contact Us"}),(0,Ke.jsxs)($T,{variant:"body1",paragraph:!0,children:["If you have any questions about our use of cookies, please contact us at:",(0,Ke.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Bee=()=>{const e=ie(),{currentUser:t,user:n,loading:r,sendEmailVerification:i,forceCheckEmailVerification:o}=(ne(),_k()),[s,a]=(0,l.useState)(!1),[c,u]=(0,l.useState)(null),[d,h]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1),[m,g]=(0,l.useState)(null);(0,l.useEffect)((()=>{(async()=>{if(!r&&(t||n)){const r=t||n;try{const t=await o(r);console.log("Email verification status on page load:",t),t&&(console.log("User email is verified, redirecting to setup source code..."),e("/setup-source-code",{replace:!0}))}catch(hoe){console.error("Error checking verification status:",hoe)}}})()}),[t,n,r,e,o]);const v=async()=>{if(!(t||n))return u("Not logged in. Cannot resend verification email."),void e("/login");try{a(!0),u(null),h(!1),await i(),h(!0),u(null)}catch(c){console.error("Error sending verification email:",c),u(c.message||"Failed to send verification email. Please try again."),h(!1)}finally{a(!1)}};if(r)return(0,Ke.jsx)(DR,{maxWidth:"sm",children:(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,Ke.jsx)(LN,{})})});const y=t||n,b=(null===y||void 0===y?void 0:y.email)||"your registered email";return(0,Ke.jsx)(DR,{maxWidth:"sm",children:(0,Ke.jsxs)(nT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{variant:"h4",gutterBottom:!0,align:"center",children:"Verify Your Email"}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,align:"center",children:"A verification email has been sent to:"}),(0,Ke.jsx)($T,{variant:"h6",align:"center",gutterBottom:!0,sx:{fontWeight:"bold"},children:b}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Please check your inbox (and spam folder) and click the verification link."}),c&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:c}),d&&(0,Ke.jsx)(eN,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox (and spam folder)."}),m&&!c&&(0,Ke.jsxs)(eN,{severity:"info",sx:{mb:2},children:["Verification status checked at ",m.toLocaleTimeString(),". Email is not yet verified."]}),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2,mt:3},children:[(0,Ke.jsx)(XA,{variant:"outlined",onClick:async()=>{const r=t||n;if(!r)return u("Not logged in. Cannot check verification status."),void e("/login");try{f(!0),u(null);const t=await o(r);g(new Date),console.log("Manual verification check result:",t),t?e("/setup-source-code",{replace:!0}):u("Email not verified yet. Please check your email and click the verification link.")}catch(c){console.error("Error checking verification status:",c),u(c.message||"Failed to check verification status. Please try again.")}finally{f(!1)}},disabled:s||p,color:"primary",fullWidth:!0,children:p?(0,Ke.jsx)(LN,{size:24,color:"inherit"}):"I've Verified My Email"}),(0,Ke.jsx)(XA,{variant:"text",onClick:v,disabled:s||p,color:"secondary",fullWidth:!0,children:s?(0,Ke.jsx)(LN,{size:24,color:"inherit"}):"Resend Verification Email"})]}),(0,Ke.jsx)(cR,{sx:{my:3}}),(0,Ke.jsxs)($T,{variant:"body2",color:"text.secondary",align:"center",children:["Having trouble? Try ",(0,Ke.jsx)(SN,{component:"button",onClick:v,children:"sending the email again"})," or ",(0,Ke.jsx)(SN,{component:"button",onClick:()=>e("/login"),children:"login with a different account"}),"."]})]})})},zee=()=>(0,Ke.jsx)(DR,{maxWidth:"md",children:(0,Ke.jsxs)(rt,{sx:{py:4},children:[(0,Ke.jsx)($T,{variant:"h4",sx:{mb:4},children:"Trash"}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Posts in the trash will be automatically deleted after 24 hours. You can restore them before then."})]})}),Wee=()=>{const{userId:e}=oe(),{db:t}=lV(),[n,r]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0),[s,a]=(0,l.useState)(null),{currentUser:c}=_k();return(0,l.useEffect)((()=>{(async()=>{if(t&&e){console.log("Firestore database initialized:",t),console.log("User ID:",e);try{const n=await Pv(vg(t,"users",e));if(!n.exists())return void a("User not found");const i=n.data().isPrivate||!1;if(!(!i||c&&c.uid===e))return void a("This account is private. Follow to see their followers.");const o=gg(t,"users",e,"followers"),s=await Nv(o);console.log("Followers snapshot size:",s.size);const l=s.docs.map((async e=>{const n=e.id,r=await Pv(vg(t,"users",n));if(r.exists()){return{...r.data(),id:n}}return null})),u=await Promise.all(l);r(u.filter(Boolean))}catch(hoe){a("Failed to fetch followers"),console.error("Error fetching followers:",hoe)}finally{o(!1)}}else console.error("Firestore database or userId is not initialized")})()}),[t,e,c]),i?(0,Ke.jsx)(rt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ke.jsx)(LN,{})}):s?(0,Ke.jsx)(rt,{p:3,children:(0,Ke.jsx)($T,{color:"error",children:s})}):(0,Ke.jsxs)(rt,{p:3,children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Followers"}),(0,Ke.jsxs)(oE,{children:[n.map((e=>(0,Ke.jsxs)(PL,{component:Oe,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:e.profilePic,alt:e.username})}),(0,Ke.jsx)(iR,{primary:e.username,secondary:e.name})]},e.id))),0===n.length&&(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",children:"No followers yet"})]})]})},Hee=()=>{const{userId:e}=oe(),{db:t}=lV(),[n,r]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0),[s,a]=(0,l.useState)(null);return(0,l.useEffect)((()=>{(async()=>{if(t&&e)try{const n=gg(t,"users",e,"following"),i=await Nv(n);console.log("Following snapshot size:",i.size);const o=i.docs.map((async e=>{const n=e.id,r=await Pv(vg(t,"users",n));if(r.exists()){return{...r.data(),id:n}}return null})),s=await Promise.all(o);r(s.filter(Boolean))}catch(hoe){a("Failed to fetch following"),console.error("Error fetching following:",hoe)}finally{o(!1)}})()}),[t,e]),i?(0,Ke.jsx)(rt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ke.jsx)(LN,{})}):s?(0,Ke.jsx)(rt,{p:3,children:(0,Ke.jsx)($T,{color:"error",children:s})}):(0,Ke.jsxs)(rt,{p:3,children:[(0,Ke.jsx)($T,{variant:"h5",gutterBottom:!0,children:"Following"}),(0,Ke.jsxs)(oE,{children:[n.map((e=>(0,Ke.jsxs)(PL,{component:Oe,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ke.jsx)(PB,{children:(0,Ke.jsx)(NT,{src:e.profilePic,alt:e.username})}),(0,Ke.jsx)(iR,{primary:e.username,secondary:e.name})]},e.id))),0===n.length&&(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",children:"Not following anyone yet"})]})]})};function qee(e){return(0,Qk.Ay)("MuiDialogContentText",e)}(0,Ze.A)("MuiDialogContentText",["root"]);const Gee=["children","className"],Kee=(0,Gk.Ay)($T,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yee=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiDialogContentText"}),{className:r}=n,i=(0,Fe.A)(n,Gee),o=(e=>{const{classes:t}=e,n=(0,qk.A)({root:["root"]},qee,t);return(0,Le.A)({},t,n)})(i);return(0,Ke.jsx)(Kee,(0,Le.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,Ue.A)(o.root,r)},n,{classes:o}))})),Jee=Yee,Qee=(0,fT.A)([(0,Ke.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,Ke.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber"),Xee=(0,fT.A)((0,Ke.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),Zee=(0,fT.A)((0,Ke.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),ete=()=>{const{currentUser:e,logout:t}=_k(),n=ie(),[r,i]=(0,l.useState)(!1),[o,s]=(0,l.useState)(!1),[a,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)(null);return(0,Ke.jsxs)(DR,{maxWidth:"md",sx:{py:4},children:[(0,Ke.jsxs)(nT,{elevation:3,sx:{p:4},children:[(0,Ke.jsxs)($T,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ke.jsx)(Qee,{color:"warning"})," Account Management"]}),(0,Ke.jsx)(eN,{severity:"info",sx:{mt:2,mb:4},children:"You have the right to control your data. You can deactivate your account temporarily or delete it permanently."}),f&&(0,Ke.jsx)(eN,{severity:"error",sx:{mt:2,mb:2},children:f}),(0,Ke.jsxs)(rt,{sx:{mb:5},children:[(0,Ke.jsxs)($T,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ke.jsx)(Xee,{})," Deactivate Account"]}),(0,Ke.jsx)(cR,{sx:{mb:3}}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Deactivating your account will temporarily hide your profile, posts, and comments from other users. Your account will remain in our systems, and you can reactivate it at any time by simply logging in again."}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:(0,Ke.jsx)("strong",{children:"What happens when you deactivate:"})}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Your profile becomes hidden from other users"}),(0,Ke.jsx)("li",{children:"Your posts and comments are hidden but not deleted"}),(0,Ke.jsx)("li",{children:"You won't receive notifications"}),(0,Ke.jsx)("li",{children:"You can reactivate by logging in at any time"})]}),(0,Ke.jsx)(XA,{variant:"outlined",color:"warning",startIcon:(0,Ke.jsx)(Xee,{}),onClick:()=>i(!0),sx:{mt:2},disabled:h,children:"Deactivate Account"})]}),(0,Ke.jsxs)(rt,{children:[(0,Ke.jsxs)($T,{variant:"h5",gutterBottom:!0,sx:{color:"error.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ke.jsx)(Zee,{})," Delete Account Permanently"]}),(0,Ke.jsx)(cR,{sx:{mb:3}}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"Deleting your account is permanent. All your data will be wiped from our systems and cannot be recovered."}),(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:(0,Ke.jsx)("strong",{children:"What happens when you delete your account:"})}),(0,Ke.jsxs)("ul",{children:[(0,Ke.jsx)("li",{children:"Your profile, posts, comments, and all other data are permanently deleted"}),(0,Ke.jsx)("li",{children:"You will lose access to your account history and connections"}),(0,Ke.jsx)("li",{children:"This action cannot be undone"}),(0,Ke.jsx)("li",{children:"If you want to use SideEye again, you'll need to create a new account"})]}),(0,Ke.jsx)(XA,{variant:"contained",color:"error",startIcon:(0,Ke.jsx)(Zee,{}),onClick:()=>s(!0),sx:{mt:2},disabled:h,children:"Delete Account Permanently"})]})]}),(0,Ke.jsxs)(g$,{open:r,onClose:()=>i(!1),children:[(0,Ke.jsx)(Z$,{children:"Confirm Account Deactivation"}),(0,Ke.jsx)(s$,{children:(0,Ke.jsx)(Jee,{children:"Are you sure you want to deactivate your account? Your profile and content will be hidden until you log in again."})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>i(!1),disabled:h,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:async()=>{if(e){p(!0),m(null);try{const r=vg(YC,"users",e.uid);await Dv(r,{isActive:!1,deactivatedAt:(new Date).toISOString()}),await t(),C_.success("Your account has been deactivated. You can reactivate it by logging in again."),n("/login")}catch(hoe){console.error("Error deactivating account:",hoe),m("Failed to deactivate account. Please try again.")}finally{p(!1),i(!1)}}else m("You must be logged in to deactivate your account")},color:"warning",disabled:h,startIcon:h?(0,Ke.jsx)(LN,{size:20}):null,children:h?"Deactivating...":"Deactivate Account"})]})]}),(0,Ke.jsxs)(g$,{open:o,onClose:()=>s(!1),children:[(0,Ke.jsx)(Z$,{children:"Delete Account"}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)(Jee,{sx:{mb:2},children:"To confirm account deletion, please enter your password. This will permanently delete your account and all associated data."}),(0,Ke.jsx)(Uj,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u,onChange:e=>d(e.target.value),variant:"outlined"})]}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>s(!1),disabled:h,children:"Cancel"}),(0,Ke.jsx)(XA,{onClick:()=>c(!0),color:"error",disabled:h||!u,children:"Proceed"})]})]}),(0,Ke.jsxs)(g$,{open:a,onClose:()=>c(!1),children:[(0,Ke.jsxs)(Z$,{children:[(0,Ke.jsx)(Qee,{color:"error"})," Final Warning"]}),(0,Ke.jsx)(s$,{children:(0,Ke.jsxs)(Jee,{children:[(0,Ke.jsx)("strong",{children:"This action cannot be undone."})," Your account and all your data will be permanently deleted from our servers. Are you absolutely sure you want to proceed?"]})}),(0,Ke.jsxs)(fL,{children:[(0,Ke.jsx)(XA,{onClick:()=>c(!1),disabled:h,children:"No, Keep My Account"}),(0,Ke.jsx)(XA,{onClick:async()=>{const e=_a().currentUser;if(!e)return m("You must be logged in to delete your account"),void C_.error("Authentication error. Please log in again.");if(u){p(!0),m(null);try{if(!e.email)throw new Error("User email is not available for re-authentication.");const t=Do.credential(e.email,u);await Qo(e,t),console.log("Re-authentication successful");const r=vg(YC,"users",e.uid);await Mv(r),console.log("Firestore user document deleted"),console.log("Cloud Function 'onUserDeleted' will handle further data cleanup."),await async function(e){return sn(e).delete()}(e),console.log("Firebase Auth user deleted"),C_.success("Your account has been permanently deleted."),n("/login")}catch(hoe){console.error("Error deleting account:",hoe),"auth/wrong-password"===hoe.code||hoe.message.includes("auth/wrong-password")?(m("Incorrect password. Please try again."),C_.error("Incorrect password.")):"auth/requires-recent-login"===hoe.code||hoe.message.includes("auth/requires-recent-login")?(m("This operation requires a recent login. Please log out and log back in before deleting."),C_.error("Please log out and log back in to delete your account.")):(m(`Failed to delete account: ${hoe.message||hoe.code||"Unknown error"}`),C_.error("An error occurred during deletion."))}finally{p(!1),d(""),f?(c(!0),s(!0)):(c(!1),s(!1))}}else m("Please enter your password to confirm deletion")},color:"error",disabled:h,startIcon:h?(0,Ke.jsx)(LN,{size:20}):(0,Ke.jsx)(Zee,{}),children:h?"Deleting...":"Yes, Delete Permanently"})]})]})]})},tte=e=>{let{children:t,requireAuth:n=!0,requireEmailVerification:r=!0,requireDeviceSetup:i=!0}=e;const{currentUser:o,userProfile:s,loading:a}=_k(),c=ne();return(0,l.useEffect)((()=>{a||o||(window.location.href=`/login?redirect=${encodeURIComponent(c.pathname)}`)}),[o,a,c]),a?(0,Ke.jsx)(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ke.jsx)(LN,{})}):n&&!o?(0,Ke.jsx)(we,{to:"/login",replace:!0}):r&&o&&!o.emailVerified?(0,Ke.jsx)(we,{to:"/verify-email",replace:!0}):i&&o&&s&&!s.sourceCodeSetupComplete?(0,Ke.jsx)(we,{to:"/setup-source-code",replace:!0}):(0,Ke.jsx)(Ke.Fragment,{children:t})};class nte extends l.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ke.jsx)($T,{variant:"h4",gutterBottom:!0,children:"Oops! Something went wrong"}),(0,Ke.jsx)($T,{variant:"body1",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,Ke.jsx)(XA,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]}):this.props.children}}const rte=nte;const ite=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=e,s=(0,tA.A)();l.useEffect((()=>{if(i)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==r||r(e,"escapeKeyDown")}}),[i,r]);const a=(0,tI.A)(((e,t)=>{null==r||r(e,t)})),c=(0,tI.A)((e=>{r&&null!=e&&s.start(e,(()=>{a(null,"timeout")}))}));l.useEffect((()=>(i&&c(t),s.clear)),[i,t,c,s]);const u=s.clear,d=l.useCallback((()=>{null!=t&&c(null!=o?o:.5*t)}),[t,o,c]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return l.useEffect((()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[n,i,d,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,Le.A)({},xT(e),xT(t));return(0,Le.A)({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),d()}),onFocus:h(n),onMouseEnter:p(n),onMouseLeave:f(n)});var r},onClickAway:e=>{null==r||r(e,"clickaway")}}};function ote(e){return(0,Qk.Ay)("MuiSnackbarContent",e)}(0,Ze.A)("MuiSnackbarContent",["root","message","action"]);const ste=["action","className","message","role"],ate=(0,Gk.Ay)(nT,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,Yk.tL)(t.palette.background.default,n);return(0,Le.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),lte=(0,Gk.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),cte=(0,Gk.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),ute=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:o,role:s="alert"}=n,a=(0,Fe.A)(n,ste),l=n,c=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"],action:["action"],message:["message"]},ote,t)})(l);return(0,Ke.jsxs)(ate,(0,Le.A)({role:s,square:!0,elevation:6,className:(0,Ue.A)(c.root,i),ownerState:l,ref:t},a,{children:[(0,Ke.jsx)(lte,{className:c.message,ownerState:l,children:o}),r?(0,Ke.jsx)(cte,{className:c.action,ownerState:l,children:r}):null]}))})),dte=ute;function hte(e){return(0,Qk.Ay)("MuiSnackbar",e)}(0,Ze.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const pte=["onEnter","onExited"],fte=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],mte=(0,Gk.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,Kk.A)(n.anchorOrigin.vertical)}${(0,Kk.A)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,Le.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),gte=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiSnackbar"}),r=IE(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:s,horizontal:a}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:v=LE,transitionDuration:y=i,TransitionProps:{onEnter:b,onExited:w}={}}=n,x=(0,Fe.A)(n.TransitionProps,pte),S=(0,Fe.A)(n,fte),C=(0,Le.A)({},n,{anchorOrigin:{vertical:s,horizontal:a},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:v,transitionDuration:y}),_=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,Kk.A)(n.vertical)}${(0,Kk.A)(n.horizontal)}`]};return(0,qk.A)(r,hte,t)})(C),{getRootProps:k,onClickAway:T}=ite((0,Le.A)({},C)),[A,E]=l.useState(!0),I=PA({elementType:mte,getSlotProps:k,externalForwardedProps:S,ownerState:C,additionalProps:{ref:t},className:[_.root,d]});return!g&&A?null:(0,Ke.jsx)(mz,(0,Le.A)({onClickAway:T},h,{children:(0,Ke.jsx)(mte,(0,Le.A)({},I,{children:(0,Ke.jsx)(v,(0,Le.A)({appear:!0,in:g,timeout:y,direction:"top"===s?"down":"up",onEnter:(e,t)=>{E(!1),b&&b(e,t)},onExited:e=>{E(!0),w&&w(e)}},x,{children:u||(0,Ke.jsx)(dte,(0,Le.A)({message:m,action:o},p))}))}))}))})),vte=gte,yte=e=>{let{children:t,maxRequests:n=10,timeWindow:r=6e4}=e;const[i,o]=(0,l.useState)(null),s=(0,l.useRef)(0),a=(0,l.useRef)(Date.now()),c=(0,l.useCallback)((()=>{const e=Date.now();return e-a.current>=r&&(s.current=0,a.current=e),s.current>=n?(o(`Rate limit exceeded. Please try again in ${Math.ceil((r-(e-a.current))/1e3)} seconds.`),!1):(s.current++,!0)}),[n,r]),u=()=>{o(null)};return(0,Ke.jsxs)(Ke.Fragment,{children:[l.Children.map(t,(e=>l.isValidElement(e)?l.cloneElement(e,{checkRateLimit:c}):e)),(0,Ke.jsx)(vte,{open:!!i,autoHideDuration:6e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Ke.jsx)(eN,{onClose:u,severity:"error",sx:{width:"100%"},children:i})})]})},bte=()=>{const{notifications:e,unreadCount:t,markAllAsRead:n,markAsRead:r,deleteNotification:i,loading:o}=Ik(),{currentUser:s}=_k(),a=ie();(0,l.useEffect)((()=>{}),[t]);return o?(0,Ke.jsx)(DR,{maxWidth:"sm",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,Ke.jsx)(LN,{})}):(0,Ke.jsxs)(DR,{maxWidth:"sm",sx:{mt:4,mb:4},children:[(0,Ke.jsxs)(rt,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,Ke.jsx)($T,{variant:"h5",component:"h1",children:"Notifications"}),e.length>0&&t>0&&(0,Ke.jsx)($T,{variant:"caption",color:"textSecondary",onClick:()=>{null!==s&&void 0!==s&&s.uid&&n(s.uid)},sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Mark all as read"})]}),0===e.length?(0,Ke.jsx)($T,{textAlign:"center",color:"textSecondary",children:"No notifications yet."}):(0,Ke.jsx)(oE,{sx:{bgcolor:"background.paper",borderRadius:2},children:e.map(((t,n)=>{return(0,Ke.jsxs)(l.Fragment,{children:[(0,Ke.jsxs)(PL,{alignItems:"flex-start",onClick:()=>(e=>{e.isRead||r(e.id);let t="/notifications";switch(e.type){case"like":case"comment":case"mention":case"repost":e.postId&&(t=`/post/${e.postId}`);break;case"vibit_like":case"vibit_comment":case"vibit_mention":e.postId&&(t=`/vibit/${e.postId}`);break;case"follow":e.senderId&&(t=`/profile/${e.senderId}`);break;case"room_invite":case"room_invitation":case"room_removal":e.roomId&&(t=`/side-room/${e.roomId}`);break;default:console.warn(`Unhandled notification type for navigation: ${e.type}`)}console.log(`Navigating to: ${t} for notification type: ${e.type}`),a(t)})(t),sx:{cursor:"pointer",backgroundColor:t.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,Ke.jsx)(EA,{edge:"end","aria-label":"delete",onClick:e=>{return n=e,r=t.id,n.stopPropagation(),void i(r);var n,r},children:(0,Ke.jsx)(zV,{fontSize:"small"})}),children:[(0,Ke.jsx)(PB,{sx:{mr:1},children:(0,Ke.jsx)(Oe,{to:`/profile/${t.senderId}`,onClick:e=>e.stopPropagation(),style:{textDecoration:"none"},children:(0,Ke.jsx)(NT,{alt:t.senderName||"User",src:t.senderAvatar||void 0,sx:{bgcolor:t.senderAvatar?void 0:"primary.main",width:40,height:40},children:!t.senderAvatar&&t.senderName?t.senderName.charAt(0).toUpperCase():null})})}),(0,Ke.jsx)(iR,{primary:(0,Ke.jsx)($T,{component:"span",variant:"body2",color:"text.primary",children:t.content||"Notification content missing."}),secondary:(0,Ke.jsx)($T,{component:"span",variant:"caption",color:"text.secondary",children:(o=t.createdAt,o&&o instanceof Date&&!isNaN(o.getTime())?dz(o,{addSuffix:!0}):"Invalid date")})})]}),n<e.length-1&&(0,Ke.jsx)(cR,{variant:"inset",component:"li"})]},t.id);var o}))})]})},wte={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let xte;const Ste=new Uint8Array(16);function Cte(){if(!xte&&(xte="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xte))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xte(Ste)}const _te=[];for(let n=0;n<256;++n)_te.push((n+256).toString(16).slice(1));function kte(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _te[e[t+0]]+_te[e[t+1]]+_te[e[t+2]]+_te[e[t+3]]+"-"+_te[e[t+4]]+_te[e[t+5]]+"-"+_te[e[t+6]]+_te[e[t+7]]+"-"+_te[e[t+8]]+_te[e[t+9]]+"-"+_te[e[t+10]]+_te[e[t+11]]+_te[e[t+12]]+_te[e[t+13]]+_te[e[t+14]]+_te[e[t+15]]}const Tte=function(e,t,n){if(wte.randomUUID&&!t&&!e)return wte.randomUUID();const r=(e=e||{}).random||(e.rng||Cte)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return kte(r)},Ate=()=>{const{currentUser:e,user:t,loading:n,userProfile:r}=_k(),i=ie(),[o,s]=(0,l.useState)(""),[a,c]=(0,l.useState)(""),[u,d]=(0,l.useState)(null),[h,p]=(0,l.useState)(null),[f,m]=(0,l.useState)(!1),[g,v]=(0,l.useState)("");(0,l.useEffect)((()=>{(async()=>{try{let o="";try{o=localStorage.getItem("deviceId")||""}catch(ZC){console.log("localStorage access blocked, generating new device ID")}if(!o){o=Tte();try{localStorage.setItem("deviceId",o)}catch(ZC){console.log("Failed to store device ID in localStorage")}}if(v(o),n)return;if(!(e||t))return void i("/login");null!==r&&void 0!==r&&r.sourceCodeSetupComplete&&i("/")}catch(hoe){console.error("Device initialization error:",hoe),d("Failed to initialize device")}})()}),[e,t,n,i,r]);return n?(0,Ke.jsx)(DR,{maxWidth:"sm",children:(0,Ke.jsx)(rt,{display:"flex",justifyContent:"center",mt:8,children:(0,Ke.jsx)(LN,{})})}):(0,Ke.jsx)(DR,{maxWidth:"xs",children:(0,Ke.jsxs)(nT,{elevation:3,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{variant:"h5",align:"center",gutterBottom:!0,children:"Device Registration"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:g?`Device ID: ${g.slice(0,8)}...`:"Generating device ID..."}),u&&(0,Ke.jsx)(eN,{severity:"error",sx:{mb:2},children:u}),h&&(0,Ke.jsx)(eN,{severity:"success",sx:{mb:2},children:h}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async n=>{if(n.preventDefault(),!(/^\d{8}$/.test(o)?o===a||(d("Codes do not match"),0):(d("Source code must be exactly 8 digits"),0)))return;if(!g)return void d("Device identification failed. Please refresh the page.");const r=e||t;if(r&&YC){m(!0),d(null);try{const e=xk.genSaltSync(10),t=xk.hashSync(o,e);if(!g||"string"!==typeof g)throw new Error("Invalid device ID");const n=vg(YC,"users",r.uid);await Dv(n,{sourceCodeHash:t,sourceCodeSetupComplete:!0,registeredDevices:Kv(g),lastUpdated:Gv()});const s=await Pv(n);if(!s.exists()||!s.data().sourceCodeSetupComplete)throw new Error("Failed to update source code settings");localStorage.setItem("deviceId",g),p("Device registration successful! Redirecting..."),setTimeout((()=>i("/")),1500)}catch(hoe){console.error("Setup error:",hoe),d("permission-denied"===hoe.code?"Permission denied. Please contact support.":hoe.message.includes("device")?"Device registration failed. Please try again.":"Setup failed. Please try again.")}finally{m(!1)}}else d("Authentication error")},sx:{mt:2},children:[(0,Ke.jsx)(Uj,{fullWidth:!0,margin:"normal",label:"8-Digit Security Code",value:o,type:"password",onChange:e=>s(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ke.jsx)(Uj,{fullWidth:!0,margin:"normal",label:"Confirm Security Code",value:a,type:"password",onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3},disabled:f||!g,children:f?(0,Ke.jsx)(LN,{size:24}):"Register This Device"})]})]})})},Ete=()=>{const{verifySourceCodeAndCompleteLogin:e,loading:t,error:n,setError:r,tempUserForSourceCode:i,currentUser:o}=_k(),s=ie(),[a,c]=(0,l.useState)("");(0,l.useEffect)((()=>{if(!o&&!i&&!t)return console.log("No temporary or current user found, redirecting to login."),void s("/login",{replace:!0});r(null)}),[o,i,s,t,r]);return(0,Ke.jsx)(DR,{maxWidth:"xs",children:(0,Ke.jsxs)(nT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Enter Source Code"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your 8-digit source code to complete login."}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async t=>{t.preventDefault(),r(null),/^[0-9]{8}$/.test(a)?await e(a):r("Source code must be exactly 8 digits.")},noValidate:!0,sx:{mt:1},children:[(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"source-code",label:"8-Digit Source Code",name:"source-code",type:"password",inputProps:{maxLength:8,pattern:"[0-9]*",inputMode:"numeric"},value:a,onChange:e=>c(e.target.value.replace(/\\D/g,"").slice(0,8)),autoFocus:!0}),n&&(0,Ke.jsx)(eN,{severity:"error",sx:{mt:2},children:n}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:t,children:t?(0,Ke.jsx)(LN,{size:24}):"Verify Code"}),(0,Ke.jsx)(rt,{textAlign:"center",children:(0,Ke.jsx)(SN,{component:Oe,to:"/reset-source-code",variant:"body2",sx:{mt:1},children:"Forgot Source Code?"})})]})]})})},Ite=()=>{ie();const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(!1),[i,o]=(0,l.useState)(null),[s,a]=(0,l.useState)(null);return(0,Ke.jsx)(DR,{maxWidth:"xs",children:(0,Ke.jsxs)(nT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ke.jsx)($T,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Source Code"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your account email address to receive a link to reset your 8-digit source code."}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async t=>{if(t.preventDefault(),r(!0),o(null),a(null),!e)return o("Email is required."),void r(!1);try{await(async e=>{console.log(`Placeholder: Sending source code reset email to ${e}`),await new Promise((e=>setTimeout(e,1500)))})(e),a("If an account exists for this email, a reset link has been sent. Please check your inbox.")}catch(hoe){console.error("Error sending source code reset email:",hoe),o("Failed to send reset email. Please try again later.")}finally{r(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e,onChange:e=>t(e.target.value),autoFocus:!0}),i&&(0,Ke.jsx)(eN,{severity:"error",sx:{mt:2},children:i}),s&&(0,Ke.jsx)(eN,{severity:"success",sx:{mt:2},children:s}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?(0,Ke.jsx)(LN,{size:24}):"Send Reset Link"})]})]})})};function Rte(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Pte(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function jte(e,t){FB(2,arguments);var n=UB(e).getTime(),r=Rte(t);return new Date(n+r)}function Nte(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());return o.setMonth(n.getMonth()+r+1,0),i>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function Ote(e,t){return FB(2,arguments),Nte(e,12*Rte(t))}function Dte(e,t){FB(2,arguments);var n=UB(e),r=UB(t),i=$B(n,r),o=Math.abs(function(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getFullYear()-r.getFullYear()}(n,r));n.setFullYear(1584),r.setFullYear(1584);var s=$B(n,r)===-i,a=i*(o-Number(s));return 0===a?0:a}function Mte(e){FB(1,arguments);var t=UB(e);return t.setHours(0,0,0,0),t}function Lte(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Fte(e,t){FB(2,arguments);var n=UB(e),r=UB(t),i=Lte(n,r),o=Math.abs(function(e,t){FB(2,arguments);var n=Mte(e),r=Mte(t),i=n.getTime()-lz(n),o=r.getTime()-lz(r);return Math.round((i-o)/864e5)}(n,r));n.setDate(n.getDate()-i*o);var s=i*(o-Number(Lte(n,r)===-i));return 0===s?0:s}Math.pow(10,8);var Ute=6e4,$te=36e5;function Vte(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=MB(),d=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=UB(e),p=h.getDay(),f=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+f),h.setHours(23,59,59,999),h}function Bte(e){FB(1,arguments);var t=UB(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function zte(e){if(FB(1,arguments),!function(e){return FB(1,arguments),e instanceof Date||"object"===LB(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=UB(e);return!isNaN(Number(t))}function Wte(e,t){return FB(2,arguments),jte(e,-Rte(t))}function Hte(e){FB(1,arguments);var t=UB(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function qte(e){FB(1,arguments);var t=UB(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Hte(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=Hte(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function Gte(e){FB(1,arguments);var t=UB(e),n=Hte(t).getTime()-function(e){FB(1,arguments);var t=qte(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Hte(n)}(t).getTime();return Math.round(n/6048e5)+1}function Kte(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=MB(),d=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=UB(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function Yte(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=UB(e),d=u.getUTCFullYear(),h=MB(),p=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var m=Kte(f,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var v=Kte(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function Jte(e,t){FB(1,arguments);var n=UB(e),r=Kte(n,t).getTime()-function(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=MB(),d=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=Yte(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),Kte(p,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Qte(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Xte={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Qte("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Qte(n+1,2)},d:function(e,t){return Qte(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Qte(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Qte(e.getUTCHours(),t.length)},m:function(e,t){return Qte(e.getUTCMinutes(),t.length)},s:function(e,t){return Qte(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Qte(Math.floor(r*Math.pow(10,n-3)),t.length)}};var Zte="midnight",ene="noon",tne="morning",nne="afternoon",rne="evening",ine="night",one={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Xte.y(e,t)},Y:function(e,t,n,r){var i=Yte(e,r),o=i>0?i:1-i;return"YY"===t?Qte(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Qte(o,t.length)},R:function(e,t){return Qte(qte(e),t.length)},u:function(e,t){return Qte(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Qte(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Qte(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Xte.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Qte(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Jte(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Qte(i,t.length)},I:function(e,t,n){var r=Gte(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Qte(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Xte.d(e,t)},D:function(e,t,n){var r=function(e){FB(1,arguments);var t=UB(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Qte(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Qte(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Qte(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Qte(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?ene:0===i?Zte:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?rne:i>=12?nne:i>=4?tne:ine,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Xte.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Xte.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Qte(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Qte(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Xte.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Xte.s(e,t)},S:function(e,t){return Xte.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return ane(i);case"XXXX":case"XX":return lne(i);default:return lne(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return ane(i);case"xxxx":case"xx":return lne(i);default:return lne(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sne(i,":");default:return"GMT"+lne(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sne(i,":");default:return"GMT"+lne(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return Qte(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return Qte((r._originalDate||e).getTime(),t.length)}};function sne(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=t||"";return n+String(i)+s+Qte(o,2)}function ane(e,t){return e%60===0?(e>0?"-":"+")+Qte(Math.abs(e)/60,2):lne(e,t)}function lne(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Qte(Math.floor(i/60),2)+n+Qte(i%60,2)}const cne=one;var une=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},dne=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},hne={p:dne,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return une(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",une(i,t)).replace("{{time}}",dne(o,t))}};const pne=hne;var fne=["D","DD"],mne=["YY","YYYY"];function gne(e){return-1!==fne.indexOf(e)}function vne(e){return-1!==mne.indexOf(e)}function yne(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var bne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xne=/^'([^]*?)'?$/,Sne=/''/g,Cne=/[a-zA-Z]/;function _ne(e,t,n){var r,i,o,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w;FB(2,arguments);var x=String(t),S=MB(),C=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:S.locale)&&void 0!==r?r:sz,_=Rte(null!==(o=null!==(s=null!==(a=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:S.firstWeekContainsDate)&&void 0!==s?s:null===(d=S.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Rte(null!==(p=null!==(f=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:S.weekStartsOn)&&void 0!==f?f:null===(b=S.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var T=UB(e);if(!zte(T))throw new RangeError("Invalid time value");var A=Wte(T,lz(T)),E={firstWeekContainsDate:_,weekStartsOn:k,locale:C,_originalDate:T};return x.match(wne).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,pne[t])(e,C.formatLong):e})).join("").match(bne).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(xne);if(!t)return e;return t[1].replace(Sne,"'")}(r);var o=cne[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!vne(r)||yne(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!gne(r)||yne(r,t,String(e)),o(A,r,C.localize,E);if(i.match(Cne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function kne(e){FB(1,arguments);var t=UB(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Tne(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=MB(),d=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=UB(e),p=h.getDay(),f=(p<d?7:0)+p-d;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function Ane(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=MB(),d=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=function(e,t){var n,r,i,o,s,a,l,c;FB(1,arguments);var u=UB(e),d=u.getFullYear(),h=MB(),p=Rte(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setFullYear(d+1,0,p),f.setHours(0,0,0,0);var m=Tne(f,t),g=new Date(0);g.setFullYear(d,0,p),g.setHours(0,0,0,0);var v=Tne(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}(e,t),p=new Date(0);return p.setFullYear(h,0,d),p.setHours(0,0,0,0),Tne(p,t)}function Ene(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getTime()>r.getTime()}function Ine(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getTime()<r.getTime()}function Rne(e){FB(1,arguments);var t=UB(e);return t.setMinutes(0,0,0),t}function Pne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Nne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HT(e,t)}function One(e){return One=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},One(e)}function Dne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dne=function(){return!!e})()}function Mne(e){var t=Dne();return function(){var n,r=One(e);if(t){var i=One(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==LB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return WT(e)}(this,n)}}function Lne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fne(e){var t=function(e,t){if("object"!=LB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=LB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LB(t)?t:t+""}function Une(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fne(r.key),r)}}function $ne(e,t,n){return t&&Une(e.prototype,t),n&&Une(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vne(e,t,n){return(t=Fne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bne=function(){function e(){Lne(this,e),Vne(this,"priority",void 0),Vne(this,"subPriority",0)}return $ne(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),zne=function(e){Nne(n,e);var t=Mne(n);function n(e,r,i,o,s){var a;return Lne(this,n),(a=t.call(this)).value=e,a.validateValue=r,a.setValue=i,a.priority=o,s&&(a.subPriority=s),a}return $ne(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(Bne),Wne=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",10),Vne(WT(e),"subPriority",-1),e}return $ne(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(Bne),Hne=function(){function e(){Lne(this,e),Vne(this,"incompatibleTokens",void 0),Vne(this,"priority",void 0),Vne(this,"subPriority",void 0)}return $ne(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new zne(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),qne=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",140),Vne(WT(e),"incompatibleTokens",["R","u","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Gne=/^(1[0-2]|0?\d)/,Kne=/^(3[0-1]|[0-2]?\d)/,Yne=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Jne=/^(5[0-3]|[0-4]?\d)/,Qne=/^(2[0-3]|[0-1]?\d)/,Xne=/^(2[0-4]|[0-1]?\d)/,Zne=/^(1[0-1]|0?\d)/,ere=/^(1[0-2]|0?\d)/,tre=/^[0-5]?\d/,nre=/^[0-5]?\d/,rre=/^\d/,ire=/^\d{1,2}/,ore=/^\d{1,3}/,sre=/^\d{1,4}/,are=/^-?\d+/,lre=/^-?\d/,cre=/^-?\d{1,2}/,ure=/^-?\d{1,3}/,dre=/^-?\d{1,4}/,hre=/^([+-])(\d{2})(\d{2})?|Z/,pre=/^([+-])(\d{2})(\d{2})|Z/,fre=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,mre=/^([+-])(\d{2}):(\d{2})|Z/,gre=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function vre(e,t){return e?{value:t(e.value),rest:e.rest}:e}function yre(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function bre(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*$te+o*Ute+1e3*s),rest:t.slice(n[0].length)}}function wre(e){return yre(are,e)}function xre(e,t){switch(e){case 1:return yre(rre,t);case 2:return yre(ire,t);case 3:return yre(ore,t);case 4:return yre(sre,t);default:return yre(new RegExp("^\\d{1,"+e+"}"),t)}}function Sre(e,t){switch(e){case 1:return yre(lre,t);case 2:return yre(cre,t);case 3:return yre(ure,t);case 4:return yre(dre,t);default:return yre(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Cre(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function _re(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function kre(e){return e%400===0||e%4===0&&e%100!==0}var Tre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",130),Vne(WT(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return vre(xre(4,e),r);case"yo":return vre(n.ordinalNumber(e,{unit:"year"}),r);default:return vre(xre(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=_re(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Are=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",130),Vne(WT(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return vre(xre(4,e),r);case"Yo":return vre(n.ordinalNumber(e,{unit:"year"}),r);default:return vre(xre(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=Yte(e,r);if(n.isTwoDigitYear){var o=_re(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kte(e,r)}var s="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(s,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kte(e,r)}}]),n}(Hne),Ere=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",130),Vne(WT(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t){return Sre("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Hte(r)}}]),n}(Hne),Ire=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",130),Vne(WT(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t){return Sre("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Rre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",120),Vne(WT(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return xre(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Pre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",120),Vne(WT(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return xre(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),jre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Vne(WT(e),"priority",110),e}return $ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return vre(yre(Gne,e),r);case"MM":return vre(xre(2,e),r);case"Mo":return vre(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Nre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",110),Vne(WT(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return vre(yre(Gne,e),r);case"LL":return vre(xre(2,e),r);case"Lo":return vre(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Hne);var Ore=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",100),Vne(WT(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return yre(Jne,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return Kte(function(e,t,n){FB(2,arguments);var r=UB(e),i=Rte(t),o=Jte(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(Hne);var Dre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",100),Vne(WT(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return yre(Jne,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return Hte(function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t),i=Gte(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(Hne),Mre=[31,28,31,30,31,30,31,31,30,31,30,31],Lre=[31,29,31,30,31,30,31,31,30,31,30,31],Fre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"subPriority",1),Vne(WT(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return yre(Kne,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){var n=kre(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Lre[r]:t>=1&&t<=Mre[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Ure=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"subpriority",1),Vne(WT(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return yre(Yne,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return kre(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(Hne);function $re(e,t,n){var r,i,o,s,a,l,c,u;FB(2,arguments);var d=MB(),h=Rte(null!==(r=null!==(i=null!==(o=null!==(s=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==s?s:null===n||void 0===n||null===(a=n.locale)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=UB(e),f=Rte(t),m=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+m),p}var Vre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Hne),Bre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return vre(xre(t.length,e),i);case"eo":return vre(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Hne),zre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return vre(xre(t.length,e),i);case"co":return vre(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$re(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Hne);var Wre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",90),Vne(WT(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return xre(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return vre(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return vre(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return vre(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return vre(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){FB(2,arguments);var n=Rte(t);n%7===0&&(n-=7);var r=UB(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Hre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",80),Vne(WT(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Cre(n),0,0,0),e}}]),n}(Hne),qre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",80),Vne(WT(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Cre(n),0,0,0),e}}]),n}(Hne),Gre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",80),Vne(WT(e),"incompatibleTokens",["a","b","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Cre(n),0,0,0),e}}]),n}(Hne),Kre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",70),Vne(WT(e),"incompatibleTokens",["H","K","k","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return yre(ere,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(Hne),Yre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",70),Vne(WT(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return yre(Qne,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(Hne),Jre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",70),Vne(WT(e),"incompatibleTokens",["h","H","k","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return yre(Zne,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(Hne),Qre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",70),Vne(WT(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return yre(Xne,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(Hne),Xre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",60),Vne(WT(e),"incompatibleTokens",["t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return yre(tre,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(Hne),Zre=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",50),Vne(WT(e),"incompatibleTokens",["t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return yre(nre,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return xre(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(Hne),eie=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",30),Vne(WT(e),"incompatibleTokens",["t","T"]),e}return $ne(n,[{key:"parse",value:function(e,t){return vre(xre(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(Hne),tie=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",10),Vne(WT(e),"incompatibleTokens",["t","T","x"]),e}return $ne(n,[{key:"parse",value:function(e,t){switch(t){case"X":return bre(hre,e);case"XX":return bre(pre,e);case"XXXX":return bre(fre,e);case"XXXXX":return bre(gre,e);default:return bre(mre,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Hne),nie=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",10),Vne(WT(e),"incompatibleTokens",["t","T","X"]),e}return $ne(n,[{key:"parse",value:function(e,t){switch(t){case"x":return bre(hre,e);case"xx":return bre(pre,e);case"xxxx":return bre(fre,e);case"xxxxx":return bre(gre,e);default:return bre(mre,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Hne),rie=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",40),Vne(WT(e),"incompatibleTokens","*"),e}return $ne(n,[{key:"parse",value:function(e){return wre(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(Hne),iie=function(e){Nne(n,e);var t=Mne(n);function n(){var e;Lne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vne(WT(e=t.call.apply(t,[this].concat(i))),"priority",20),Vne(WT(e),"incompatibleTokens","*"),e}return $ne(n,[{key:"parse",value:function(e){return wre(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(Hne),oie={G:new qne,y:new Tre,Y:new Are,R:new Ere,u:new Ire,Q:new Rre,q:new Pre,M:new jre,L:new Nre,w:new Ore,I:new Dre,d:new Fre,D:new Ure,E:new Vre,e:new Bre,c:new zre,i:new Wre,a:new Hre,b:new qre,B:new Gre,h:new Kre,H:new Yre,K:new Jre,k:new Qre,m:new Xre,s:new Zre,S:new eie,X:new tie,x:new nie,t:new rie,T:new iie},sie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lie=/^'([^]*?)'?$/,cie=/''/g,uie=/\S/,die=/[a-zA-Z]/;function hie(e,t,n,r){var i,o,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w,x;FB(3,arguments);var S=String(e),C=String(t),_=MB(),k=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:_.locale)&&void 0!==i?i:sz;if(!k.match)throw new RangeError("locale must contain match property");var T=Rte(null!==(s=null!==(a=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:_.firstWeekContainsDate)&&void 0!==a?a:null===(h=_.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==s?s:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=Rte(null!==(f=null!==(m=null!==(g=null!==(v=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==v?v:null===r||void 0===r||null===(y=r.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==g?g:_.weekStartsOn)&&void 0!==m?m:null===(w=_.locale)||void 0===w||null===(x=w.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==f?f:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===C)return""===S?UB(n):new Date(NaN);var E,I={firstWeekContainsDate:T,weekStartsOn:A,locale:k},R=[new Wne],P=C.match(aie).map((function(e){var t=e[0];return t in pne?(0,pne[t])(e,k.formatLong):e})).join("").match(sie),j=[],N=jne(P);try{var O=function(){var t=E.value;null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!vne(t)||yne(t,C,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!gne(t)||yne(t,C,e);var n=t[0],i=oie[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var s=j.find((function(e){return o.includes(e.token)||e.token===n}));if(s)throw new RangeError("The format string mustn't contain `".concat(s.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&j.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));j.push({token:n,fullToken:t});var a=i.run(S,t,k.match,I);if(!a)return{v:new Date(NaN)};R.push(a.setter),S=a.rest}else{if(n.match(die))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(lie)[1].replace(cie,"'")),0!==S.indexOf(t))return{v:new Date(NaN)};S=S.slice(t.length)}};for(N.s();!(E=N.n()).done;){var D=O();if("object"===LB(D))return D.v}}catch(hoe){N.e(hoe)}finally{N.f()}if(S.length>0&&uie.test(S))return new Date(NaN);var M=R.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return R.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),L=UB(n);if(isNaN(L.getTime()))return new Date(NaN);var F,U=Wte(L,lz(L)),$={},V=jne(M);try{for(V.s();!(F=V.n()).done;){var B=F.value;if(!B.validate(U,I))return new Date(NaN);var z=B.set(U,$,I);Array.isArray(z)?(U=z[0],az($,z[1])):U=z}}catch(hoe){V.e(hoe)}finally{V.f()}return U}function pie(e){FB(1,arguments);var t=UB(e);return t.setDate(1),t.setHours(0,0,0,0),t}function fie(e){FB(1,arguments);var t=UB(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function mie(e,t){var n;FB(1,arguments);var r=Rte(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=function(e){var t,n={},r=e.split(gie.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],gie.timeZoneDelimiter.test(n.date)&&(n.date=e.split(gie.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var i=gie.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(o.date){var s=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,r);i=function(e,t){if(null===t)return new Date(NaN);var n=e.match(vie);if(!n)return new Date(NaN);var r=!!n[4],i=wie(n[1]),o=wie(n[2])-1,s=wie(n[3]),a=wie(n[4]),l=wie(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,a,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Sie[t]||(Cie(e)?29:28))}(t,o,s)&&function(e,t){return t>=1&&t<=(Cie(e)?366:365)}(t,i)?(c.setUTCFullYear(t,o,Math.max(i,s)),c):new Date(NaN)}(s.restDateString,s.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var a,l=i.getTime(),c=0;if(o.time&&(c=function(e){var t=e.match(yie);if(!t)return NaN;var n=xie(t[1]),r=xie(t[2]),i=xie(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*$te+r*Ute+1e3*i}(o.time),isNaN(c)))return new Date(NaN);if(!o.timezone){var u=new Date(l+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return a=function(e){if("Z"===e)return 0;var t=e.match(bie);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*$te+i*Ute)}(o.timezone),isNaN(a)?new Date(NaN):new Date(l+c+a)}var gie={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function wie(e){return e?parseInt(e):1}function xie(e){return e&&parseFloat(e.replace(",","."))||0}var Sie=[31,null,31,30,31,30,31,31,30,31,30,31];function Cie(e){return e%400===0||e%4===0&&e%100!==0}var _ie=n(4894),kie=n.n(_ie);const Tie={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Aie={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Eie{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Tie,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=e=>"undefined"===typeof e?new Date:null===e?null:new Date(e),this.dateWithTimezone=e=>this.date(e),this.getTimezone=()=>"default",this.setTimezone=e=>e,this.toJsDate=e=>e,this.getCurrentLocaleCode=()=>{var e;return(null==(e=this.locale)?void 0:e.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>!this.locale||/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=e=>e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,this.longFormatters[t])(e,this.locale.formatLong)}return e})).join(""),this.getFormatHelperText=e=>this.expandFormat(e).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=e=>null===e,this.formatNumber=e=>e,this.getMeridiemText=e=>"am"===e?"AM":"PM";const{locale:t,formats:n,longFormatters:r}=e;this.locale=t,this.formats=(0,Le.A)({},Aie,n),this.longFormatters=r}}class Iie extends Eie{constructor(){let{locale:e,formats:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({locale:null!=e?e:oz,formats:t,longFormatters:kie()}),this.parseISO=e=>mie(e),this.toISO=e=>function(e,t){var n,r;FB(1,arguments);var i=UB(e);if(isNaN(i.getTime()))throw new RangeError("Invalid time value");var o=String(null!==(n=null===t||void 0===t?void 0:t.format)&&void 0!==n?n:"extended"),s=String(null!==(r=null===t||void 0===t?void 0:t.representation)&&void 0!==r?r:"complete");if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",l="",c="extended"===o?"-":"",u="extended"===o?":":"";if("time"!==s){var d=Qte(i.getDate(),2),h=Qte(i.getMonth()+1,2),p=Qte(i.getFullYear(),4);a="".concat(p).concat(c).concat(h).concat(c).concat(d)}if("date"!==s){var f=i.getTimezoneOffset();if(0!==f){var m=Math.abs(f),g=Qte(Math.floor(m/60),2),v=Qte(m%60,2);l="".concat(f<0?"+":"-").concat(g,":").concat(v)}else l="Z";var y=""===a?"":"T",b=[Qte(i.getHours(),2),Qte(i.getMinutes(),2),Qte(i.getSeconds(),2)].join(u);a="".concat(a).concat(y).concat(b).concat(l)}return a}(e,{format:"extended"}),this.parse=(e,t)=>""===e?null:hie(e,t,new Date,{locale:this.locale}),this.isValid=e=>zte(this.date(e)),this.format=(e,t)=>this.formatByString(e,this.formats[t]),this.formatByString=(e,t)=>_ne(e,t,{locale:this.locale}),this.getDiff=(e,t,n)=>{switch(n){case"years":return Dte(e,this.date(t));case"quarters":return function(e,t,n){FB(2,arguments);var r=zB(e,t)/3;return qB(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"months":return zB(e,this.date(t));case"weeks":return function(e,t,n){FB(2,arguments);var r=Fte(e,t)/7;return qB(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"days":return Fte(e,this.date(t));case"hours":return function(e,t,n){FB(2,arguments);var r=WB(e,t)/$te;return qB(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"minutes":return function(e,t,n){FB(2,arguments);var r=WB(e,t)/Ute;return qB(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"seconds":return GB(e,this.date(t));default:return WB(e,this.date(t))}},this.isEqual=(e,t)=>null===e&&null===t||function(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getTime()===r.getTime()}(e,t),this.isSameYear=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getFullYear()===r.getFullYear()}(e,t),this.isSameMonth=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=UB(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t),this.isSameDay=(e,t)=>function(e,t){FB(2,arguments);var n=Mte(e),r=Mte(t);return n.getTime()===r.getTime()}(e,t),this.isSameHour=(e,t)=>function(e,t){FB(2,arguments);var n=Rne(e),r=Rne(t);return n.getTime()===r.getTime()}(e,t),this.isAfter=(e,t)=>Ene(e,t),this.isAfterYear=(e,t)=>Ene(e,Bte(t)),this.isAfterDay=(e,t)=>Ene(e,VB(t)),this.isBefore=(e,t)=>Ine(e,t),this.isBeforeYear=(e,t)=>Ine(e,fie(t)),this.isBeforeDay=(e,t)=>Ine(e,Mte(t)),this.isWithinRange=(e,t)=>{let[n,r]=t;return function(e,t){FB(2,arguments);var n=UB(e).getTime(),r=UB(t.start).getTime(),i=UB(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(e,{start:n,end:r})},this.startOfYear=e=>fie(e),this.startOfMonth=e=>pie(e),this.startOfWeek=e=>Tne(e,{locale:this.locale}),this.startOfDay=e=>Mte(e),this.endOfYear=e=>Bte(e),this.endOfMonth=e=>BB(e),this.endOfWeek=e=>Vte(e,{locale:this.locale}),this.endOfDay=e=>VB(e),this.addYears=(e,t)=>Ote(e,t),this.addMonths=(e,t)=>Nte(e,t),this.addWeeks=(e,t)=>function(e,t){return FB(2,arguments),Pte(e,7*Rte(t))}(e,t),this.addDays=(e,t)=>Pte(e,t),this.addHours=(e,t)=>function(e,t){return FB(2,arguments),jte(e,36e5*Rte(t))}(e,t),this.addMinutes=(e,t)=>function(e,t){return FB(2,arguments),jte(e,6e4*Rte(t))}(e,t),this.addSeconds=(e,t)=>function(e,t){return FB(2,arguments),jte(e,1e3*Rte(t))}(e,t),this.getYear=e=>function(e){return FB(1,arguments),UB(e).getFullYear()}(e),this.getMonth=e=>function(e){return FB(1,arguments),UB(e).getMonth()}(e),this.getDate=e=>function(e){return FB(1,arguments),UB(e).getDate()}(e),this.getHours=e=>function(e){return FB(1,arguments),UB(e).getHours()}(e),this.getMinutes=e=>function(e){return FB(1,arguments),UB(e).getMinutes()}(e),this.getSeconds=e=>function(e){return FB(1,arguments),UB(e).getSeconds()}(e),this.getMilliseconds=e=>function(e){return FB(1,arguments),UB(e).getMilliseconds()}(e),this.setYear=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}(e,t),this.setMonth=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t),i=n.getFullYear(),o=n.getDate(),s=new Date(0);s.setFullYear(i,r,15),s.setHours(0,0,0,0);var a=kne(s);return n.setMonth(r,Math.min(o,a)),n}(e,t),this.setDate=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return n.setDate(r),n}(e,t),this.setHours=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return n.setHours(r),n}(e,t),this.setMinutes=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return n.setMinutes(r),n}(e,t),this.setSeconds=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return n.setSeconds(r),n}(e,t),this.setMilliseconds=(e,t)=>function(e,t){FB(2,arguments);var n=UB(e),r=Rte(t);return n.setMilliseconds(r),n}(e,t),this.getDaysInMonth=e=>kne(e),this.getNextMonth=e=>Nte(e,1),this.getPreviousMonth=e=>Nte(e,-1),this.getMonthArray=e=>{const t=[fie(e)];for(;t.length<12;){const e=t[t.length-1];t.push(this.getNextMonth(e))}return t},this.mergeDateAndTime=(e,t)=>this.setSeconds(this.setMinutes(this.setHours(e,this.getHours(t)),this.getMinutes(t)),this.getSeconds(t)),this.getWeekdays=()=>{const e=new Date;return function(e,t){var n;FB(1,arguments);var r=e||{},i=UB(r.start),o=UB(r.end).getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var s=[],a=i;a.setHours(0,0,0,0);var l=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;a.getTime()<=o;)s.push(UB(a)),a.setDate(a.getDate()+l),a.setHours(0,0,0,0);return s}({start:Tne(e,{locale:this.locale}),end:Vte(e,{locale:this.locale})}).map((e=>this.formatByString(e,"EEEEEE")))},this.getWeekArray=e=>{const t=Tne(pie(e),{locale:this.locale}),n=Vte(BB(e),{locale:this.locale});let r=0,i=t;const o=[];for(;Ine(i,n);){const e=Math.floor(r/7);o[e]=o[e]||[],o[e].push(i),i=Pte(i,1),r+=1}return o},this.getWeekNumber=e=>function(e,t){FB(1,arguments);var n=UB(e),r=Tne(n,t).getTime()-Ane(n,t).getTime();return Math.round(r/6048e5)+1}(e,{locale:this.locale}),this.getYearRange=(e,t)=>{const n=fie(e),r=Bte(t),i=[];let o=n;for(;Ine(o,r);)i.push(o),o=Ote(o,1);return i}}}const Rie=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Pie=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),jie=(0,fT.A)((0,Ke.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Nie(e){return(0,Qk.Ay)("MuiCheckbox",e)}const Oie=(0,Ze.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Die=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Mie=(0,Gk.Ay)(xV,{shouldForwardProp:e=>(0,VA.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${(0,Kk.A)(n.size)}`],"default"!==n.color&&t[`color${(0,Kk.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,Yk.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${Oie.checked}, &.${Oie.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${Oie.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),Lie=(0,Ke.jsx)(Pie,{}),Fie=(0,Ke.jsx)(Rie,{}),Uie=(0,Ke.jsx)(jie,{}),$ie=l.forwardRef((function(e,t){var n,r;const i=(0,it.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=Lie,color:s="primary",icon:a=Fie,indeterminate:c=!1,indeterminateIcon:u=Uie,inputProps:d,size:h="medium",className:p}=i,f=(0,Fe.A)(i,Die),m=c?u:a,g=c?u:o,v=(0,Le.A)({},i,{color:s,indeterminate:c,size:h}),y=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate",`color${(0,Kk.A)(r)}`,`size${(0,Kk.A)(i)}`]},s=(0,qk.A)(o,Nie,t);return(0,Le.A)({},t,s)})(v);return(0,Ke.jsx)(Mie,(0,Le.A)({type:"checkbox",inputProps:(0,Le.A)({"data-indeterminate":c},d),icon:l.cloneElement(m,{fontSize:null!=(n=m.props.fontSize)?n:h}),checkedIcon:l.cloneElement(g,{fontSize:null!=(r=g.props.fontSize)?r:h}),ownerState:v,ref:t,className:(0,Ue.A)(y.root,p)},f,{classes:y}))})),Vie=$ie;var Bie=n(6319);const zie=()=>{const e=ie(),[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)({necessary:!0,functionality:!1,analytics:!1});(0,l.useEffect)((()=>{localStorage.getItem("cookiePreferences")||n(!0)}),[]);const o=e=>t=>{i({...r,[e]:t.target.checked})};return(0,Ke.jsxs)(g$,{open:t,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{style:{position:"fixed",bottom:20,right:20,margin:0,maxWidth:"500px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[(0,Ke.jsxs)(Z$,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ke.jsx)($T,{variant:"h6",component:"div",children:"Cookie Preferences"}),(0,Ke.jsx)(EA,{onClick:()=>n(!1),size:"small",sx:{color:"text.secondary"},children:(0,Ke.jsx)(Bie.A,{})})]}),(0,Ke.jsx)(cR,{}),(0,Ke.jsxs)(s$,{children:[(0,Ke.jsx)($T,{variant:"body1",paragraph:!0,children:"We use cookies to enhance your experience. Please select your preferences:"}),(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(Vie,{checked:r.necessary,disabled:!0,color:"primary"}),label:(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"body2",fontWeight:"bold",children:"Necessary Cookies"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Required for the app to function properly. Cannot be disabled."})]})}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(Vie,{checked:r.functionality,onChange:o("functionality"),color:"primary"}),label:(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"body2",fontWeight:"bold",children:"Functionality Cookies"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Remember your preferences and settings."})]})}),(0,Ke.jsx)(Yz,{control:(0,Ke.jsx)(Vie,{checked:r.analytics,onChange:o("analytics"),color:"primary"}),label:(0,Ke.jsxs)(rt,{children:[(0,Ke.jsx)($T,{variant:"body2",fontWeight:"bold",children:"Analytics Cookies"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",children:"Help us understand how you use our app."})]})})]}),(0,Ke.jsx)(rt,{sx:{mt:2},children:(0,Ke.jsx)(SN,{component:"button",variant:"body2",onClick:()=>{e("/cookies"),n(!1)},sx:{color:"primary.main"},children:"Learn more about how we use cookies"})})]}),(0,Ke.jsx)(cR,{}),(0,Ke.jsxs)(fL,{sx:{p:2,gap:1},children:[(0,Ke.jsx)(XA,{onClick:()=>{localStorage.setItem("cookiePreferences",JSON.stringify(r)),n(!1)},variant:"outlined",color:"primary",sx:{minWidth:"120px"},children:"Save Preferences"}),(0,Ke.jsx)(XA,{onClick:()=>{const e={necessary:!0,functionality:!0,analytics:!0};i(e),localStorage.setItem("cookiePreferences",JSON.stringify(e)),n(!1)},variant:"contained",color:"primary",sx:{minWidth:"120px"},children:"Accept All"})]})]})};function Wie(e){return(0,Qk.Ay)("MuiBottomNavigation",e)}(0,Ze.A)("MuiBottomNavigation",["root"]);const Hie=["children","className","component","onChange","showLabels","value"],qie=(0,Gk.Ay)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}})),Gie=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiBottomNavigation"}),{children:r,className:i,component:o="div",onChange:s,showLabels:a=!1,value:c}=n,u=(0,Fe.A)(n,Hie),d=(0,Le.A)({},n,{component:o,showLabels:a}),h=(e=>{const{classes:t}=e;return(0,qk.A)({root:["root"]},Wie,t)})(d);return(0,Ke.jsx)(qie,(0,Le.A)({as:o,className:(0,Ue.A)(h.root,i),ref:t,ownerState:d},u,{children:l.Children.map(r,((e,t)=>{if(!l.isValidElement(e))return null;const n=void 0===e.props.value?t:e.props.value;return l.cloneElement(e,{selected:n===c,showLabel:void 0!==e.props.showLabel?e.props.showLabel:a,value:n,onChange:s})}))}))})),Kie=Gie;function Yie(e){return(0,Qk.Ay)("MuiBottomNavigationAction",e)}const Jie=(0,Ze.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Qie=["className","icon","label","onChange","onClick","selected","showLabel","value"],Xie=(0,Gk.Ay)(SA,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{[`&.${Jie.selected}`]:{color:(t.vars||t).palette.primary.main}})})),Zie=(0,Gk.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})((e=>{let{theme:t,ownerState:n}=e;return(0,Le.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${Jie.selected}`]:{fontSize:t.typography.pxToRem(14)}})})),eoe=l.forwardRef((function(e,t){const n=(0,it.b)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:o,onChange:s,onClick:a,value:l}=n,c=(0,Fe.A)(n,Qie),u=n,d=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,qk.A)(i,Yie,t)})(u);return(0,Ke.jsxs)(Xie,(0,Le.A)({ref:t,className:(0,Ue.A)(d.root,r),focusRipple:!0,onClick:e=>{s&&s(e,l),a&&a(e)},ownerState:u},c,{children:[i,(0,Ke.jsx)(Zie,{className:d.label,ownerState:u,children:o})]}))})),toe=eoe,noe=(0,fT.A)((0,Ke.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),roe=(0,fT.A)((0,Ke.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6zm-4 5v2h2v-2z"}),"MeetingRoom"),ioe=(0,fT.A)((0,Ke.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),ooe=()=>{const e=ie(),t=ne(),{currentUser:n}=_k();return(0,Ke.jsx)(Ke.Fragment,{children:(0,Ke.jsxs)(Kie,{value:t.pathname,onChange:(t,n)=>{e(n)},sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",zIndex:1e3},children:[(0,Ke.jsx)(toe,{label:"Discover",value:"/",icon:(0,Ke.jsx)(noe,{})}),(0,Ke.jsx)(toe,{label:"Side Rooms",value:"/side-rooms",icon:(0,Ke.jsx)(roe,{})}),(0,Ke.jsx)(toe,{label:"Sade AI",value:"/sade-ai",icon:(0,Ke.jsx)(NT,{src:"/images/sade-avatar.jpg",sx:{width:24,height:24}})}),(0,Ke.jsx)(toe,{label:"Profile",value:`/profile/${null===n||void 0===n?void 0:n.uid}`,icon:(0,Ke.jsx)(ioe,{})})]})})},soe=(0,Qe.A)({components:{MuiButton:{styleOverrides:{root:{"&.MuiButton-root":{}}}},MuiButtonBase:{styleOverrides:{root:{"&.MuiButtonBase-root":{}}}}}}),aoe=e=>{let{children:t}=e;return(0,Ke.jsxs)(zk,{theme:soe,children:[(0,Ke.jsx)(dt,{}),t]})},loe=()=>{const{currentUser:e}=_k(),t=ie(),[n,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[s,a]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1);return(0,Ke.jsx)(DR,{maxWidth:"sm",sx:{py:4},children:(0,Ke.jsxs)(nT,{elevation:3,sx:{p:{xs:2,sm:4},borderRadius:2},children:[(0,Ke.jsx)($T,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Report an Issue"}),(0,Ke.jsx)($T,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Help us keep SideEye safe and running smoothly. Please provide as much detail as possible."}),(0,Ke.jsxs)(rt,{component:"form",onSubmit:async r=>{if(r.preventDefault(),e)if(n&&s)if("user"!==n||i){u(!0);try{const r={reporterUid:e.uid,reporterEmail:e.email,reportType:n,description:s,timestamp:Gv(),status:"new"};"user"===n&&i&&(r.reportedUsername=i.startsWith("@")?i.substring(1):i);const o=await Lv(gg(YC,"reports"),r);console.log("Report submitted with ID: ",o.id),C_.success("Report submitted successfully. Thank you!"),t("/settings")}catch(Nb){console.error("Error submitting report: ",Nb),C_.error("Failed to submit report. Please try again.")}finally{u(!1)}}else C_.error("Please enter the username of the user you are reporting.");else C_.error("Please select a report type and provide a description.");else C_.error("You must be logged in to submit a report.")},noValidate:!0,children:[(0,Ke.jsxs)(YP,{fullWidth:!0,margin:"normal",required:!0,children:[(0,Ke.jsx)(zP,{id:"report-type-label",children:"Type of Report"}),(0,Ke.jsxs)(Nj,{labelId:"report-type-label",id:"report-type",value:n,label:"Type of Report",onChange:e=>{r(e.target.value),"user"!==e.target.value&&o("")},children:[(0,Ke.jsx)(JI,{value:"",children:(0,Ke.jsx)("em",{children:"Select a type..."})}),(0,Ke.jsx)(JI,{value:"user",children:"Report a User (Harassment, Abuse, etc.)"}),(0,Ke.jsx)(JI,{value:"bug",children:"Report a Bug or Technical Issue"}),(0,Ke.jsx)(JI,{value:"content",children:"Report Inappropriate Content"}),(0,Ke.jsx)(JI,{value:"other",children:"Other Issue"})]})]}),"user"===n&&(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"reportedUser",label:"Username of User to Report (e.g., @username)",name:"reportedUser",autoComplete:"off",value:i,onChange:e=>o(e.target.value)}),(0,Ke.jsx)(Uj,{margin:"normal",required:!0,fullWidth:!0,id:"description",label:"Detailed Description",name:"description",multiline:!0,rows:4,value:s,onChange:e=>a(e.target.value),helperText:"Please include specific details like what happened, when, and where (if applicable)."}),(0,Ke.jsx)(XA,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:c,children:c?(0,Ke.jsx)(LN,{size:24,color:"inherit"}):"Submit Report"})]})]})})},coe=()=>{const{currentUser:e}=_k(),t=ne();return!e||["/login","/register"].includes(t.pathname)?null:(0,Ke.jsx)(ooe,{})},uoe=()=>{const e="/vibits"===ne().pathname;return(0,Ke.jsxs)(rt,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[!e&&(0,Ke.jsx)(fR,{}),(0,Ke.jsx)(rt,{component:"main",sx:{flexGrow:1,pt:{xs:2,sm:3}},children:(0,Ke.jsxs)(Ce,{children:[(0,Ke.jsx)(xe,{path:"/login",element:(0,Ke.jsx)(FN,{})}),(0,Ke.jsx)(xe,{path:"/register",element:(0,Ke.jsx)(T$,{})}),(0,Ke.jsx)(xe,{path:"/reset-password",element:(0,Ke.jsx)(A$,{})}),(0,Ke.jsx)(xe,{path:"/verify-email",element:(0,Ke.jsx)(Bee,{})}),(0,Ke.jsx)(xe,{path:"/setup-source-code",element:(0,Ke.jsx)(Ate,{})}),(0,Ke.jsx)(xe,{path:"/enter-source-code",element:(0,Ke.jsx)(Ete,{})}),(0,Ke.jsx)(xe,{path:"/reset-source-code",element:(0,Ke.jsx)(Ite,{})}),(0,Ke.jsx)(xe,{path:"/safety",element:(0,Ke.jsx)(jee,{})}),(0,Ke.jsx)(xe,{path:"/privacy-policy",element:(0,Ke.jsx)(Fee,{})}),(0,Ke.jsx)(xe,{path:"/about",element:(0,Ke.jsx)(Uee,{})}),(0,Ke.jsx)(xe,{path:"/terms",element:(0,Ke.jsx)($ee,{})}),(0,Ke.jsx)(xe,{path:"/cookies",element:(0,Ke.jsx)(Vee,{})}),(0,Ke.jsx)(xe,{path:"/",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(gz,{})})}),(0,Ke.jsx)(xe,{path:"/profile/:userId",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(dV,{})})}),(0,Ke.jsx)(xe,{path:"/settings",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(qV,{})})}),(0,Ke.jsx)(xe,{path:"/security",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(Lee,{})})}),(0,Ke.jsx)(xe,{path:"/search",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(jB,{})})}),(0,Ke.jsx)(xe,{path:"/messages",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(vz,{})})}),(0,Ke.jsx)(xe,{path:"/side-rooms",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(Xz,{})})}),(0,Ke.jsx)(xe,{path:"/side-room/:roomId",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(W7,{})})}),(0,Ke.jsx)(xe,{path:"/chat/:userId",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(G7,{})})}),(0,Ke.jsx)(xe,{path:"/trash",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(zee,{})})}),(0,Ke.jsx)(xe,{path:"/profile/:userId/followers",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(Wee,{})})}),(0,Ke.jsx)(xe,{path:"/profile/:userId/following",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(Hee,{})})}),(0,Ke.jsx)(xe,{path:"/notifications",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(bte,{})})}),(0,Ke.jsx)(xe,{path:"/account-management",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(ete,{})})}),(0,Ke.jsx)(xe,{path:"/report",element:(0,Ke.jsx)(tte,{children:(0,Ke.jsx)(loe,{})})}),(0,Ke.jsx)(xe,{path:"/sade-ai",element:(0,Ke.jsx)(zH,{})}),(0,Ke.jsx)(xe,{path:"*",element:(0,Ke.jsx)(we,{to:"/",replace:!0})})]})}),(0,Ke.jsx)(zie,{}),(0,Ke.jsx)(Y_,{position:"bottom-right"}),(0,Ke.jsx)(coe,{})]})},doe=()=>(0,Ke.jsx)(rte,{children:(0,Ke.jsx)(j7,{children:(0,Ke.jsx)(Pe,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Ke.jsx)(aoe,{children:(0,Ke.jsxs)(Hk,{children:[(0,Ke.jsx)(dt,{}),(0,Ke.jsx)(FO,{dateAdapter:Iie,children:(0,Ke.jsx)(Ck,{children:(0,Ke.jsx)(cV,{children:(0,Ke.jsx)(Ek,{children:(0,Ke.jsx)(yte,{children:(0,Ke.jsx)(uoe,{})})})})})})]})})})})});u.createRoot(document.getElementById("root")).render((0,Ke.jsx)(doe,{}))})()})();